var Uq=Object.defineProperty;var Fq=(t,e,n)=>e in t?Uq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var it=(t,e,n)=>Fq(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function uM(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const ra={},Ff=[],U0=()=>{},Vq=()=>!1,$C=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),fM=t=>t.startsWith("onUpdate:"),To=Object.assign,vM=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},kq=Object.prototype.hasOwnProperty,Lr=(t,e)=>kq.call(t,e),Yn=Array.isArray,rd=t=>zC(t)==="[object Map]",Gq=t=>zC(t)==="[object Set]",er=t=>typeof t=="function",Oi=t=>typeof t=="string",Pv=t=>typeof t=="symbol",li=t=>t!==null&&typeof t=="object",bx=t=>(li(t)||er(t))&&er(t.then)&&er(t.catch),Bq=Object.prototype.toString,zC=t=>Bq.call(t),Wq=t=>zC(t).slice(8,-1),Hq=t=>zC(t)==="[object Object]",gM=t=>Oi(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,ad=uM(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),qC=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},$q=/-(\w)/g,eu=qC(t=>t.replace($q,(e,n)=>n?n.toUpperCase():"")),zq=/\B([A-Z])/g,W1=qC(t=>t.replace(zq,"-$1").toLowerCase()),Nx=qC(t=>t.charAt(0).toUpperCase()+t.slice(1)),TD=qC(t=>t?`on${Nx(t)}`:""),c1=(t,e)=>!Object.is(t,e),yD=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},Lx=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},qq=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let CO;const jC=()=>CO||(CO=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function dM(t){if(Yn(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],a=Oi(r)?Xq(r):dM(r);if(a)for(const i in a)e[i]=a[i]}return e}else if(Oi(t)||li(t))return t}const jq=/;(?![^(]*\))/g,Qq=/:([^]+)/,Kq=/\/\*[^]*?\*\//g;function Xq(t){const e={};return t.replace(Kq,"").split(jq).forEach(n=>{if(n){const r=n.split(Qq);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function mM(t){let e="";if(Oi(t))e=t;else if(Yn(t))for(let n=0;n<t.length;n++){const r=mM(t[n]);r&&(e+=r+" ")}else if(li(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const Yq="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Zq=uM(Yq);function Ux(t){return!!t||t===""}/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Zo;class Jq{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Zo,!e&&Zo&&(this.index=(Zo.scopes||(Zo.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Zo;try{return Zo=this,e()}finally{Zo=n}}}on(){Zo=this}off(){Zo=this.parent}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const a=this.parent.scopes.pop();a&&a!==this&&(this.parent.scopes[this.index]=a,a.index=this.index)}this.parent=void 0}}}function ej(){return Zo}let na;const MD=new WeakSet;class Fx{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Zo&&Zo.active&&Zo.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,MD.has(this)&&(MD.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||kx(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,IO(this),Gx(this);const e=na,n=n0;na=this,n0=!0;try{return this.fn()}finally{Bx(this),na=e,n0=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)SM(e);this.deps=this.depsTail=void 0,IO(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?MD.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Q3(this)&&this.run()}get dirty(){return Q3(this)}}let Vx=0,id,od;function kx(t,e=!1){if(t.flags|=8,e){t.next=od,od=t;return}t.next=id,id=t}function hM(){Vx++}function pM(){if(--Vx>0)return;if(od){let e=od;for(od=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;id;){let e=id;for(id=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function Gx(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Bx(t){let e,n=t.depsTail,r=n;for(;r;){const a=r.prevDep;r.version===-1?(r===n&&(n=a),SM(r),tj(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=a}t.deps=e,t.depsTail=n}function Q3(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Wx(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Wx(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===$d))return;t.globalVersion=$d;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!Q3(t)){t.flags&=-3;return}const n=na,r=n0;na=t,n0=!0;try{Gx(t);const a=t.fn(t._value);(e.version===0||c1(a,t._value))&&(t._value=a,e.version++)}catch(a){throw e.version++,a}finally{na=n,n0=r,Bx(t),t.flags&=-3}}function SM(t,e=!1){const{dep:n,prevSub:r,nextSub:a}=t;if(r&&(r.nextSub=a,t.prevSub=void 0),a&&(a.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)SM(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function tj(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let n0=!0;const Hx=[];function lu(){Hx.push(n0),n0=!1}function uu(){const t=Hx.pop();n0=t===void 0?!0:t}function IO(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=na;na=void 0;try{e()}finally{na=n}}}let $d=0;class nj{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class $x{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!na||!n0||na===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==na)n=this.activeLink=new nj(na,this),na.deps?(n.prevDep=na.depsTail,na.depsTail.nextDep=n,na.depsTail=n):na.deps=na.depsTail=n,zx(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=na.depsTail,n.nextDep=void 0,na.depsTail.nextDep=n,na.depsTail=n,na.deps===n&&(na.deps=r)}return n}trigger(e){this.version++,$d++,this.notify(e)}notify(e){hM();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{pM()}}}function zx(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)zx(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const K3=new WeakMap,l1=Symbol(""),X3=Symbol(""),zd=Symbol("");function Yi(t,e,n){if(n0&&na){let r=K3.get(t);r||K3.set(t,r=new Map);let a=r.get(n);a||(r.set(n,a=new $x),a.map=r,a.key=n),a.track()}}function Ac(t,e,n,r,a,i){const o=K3.get(t);if(!o){$d++;return}const s=c=>{c&&c.trigger()};if(hM(),e==="clear")o.forEach(s);else{const c=Yn(t),l=c&&gM(n);if(c&&n==="length"){const u=Number(r);o.forEach((f,v)=>{(v==="length"||v===zd||!Pv(v)&&v>=u)&&s(f)})}else switch((n!==void 0||o.has(void 0))&&s(o.get(n)),l&&s(o.get(zd)),e){case"add":c?l&&s(o.get("length")):(s(o.get(l1)),rd(t)&&s(o.get(X3)));break;case"delete":c||(s(o.get(l1)),rd(t)&&s(o.get(X3)));break;case"set":rd(t)&&s(o.get(l1));break}}pM()}function J1(t){const e=Wr(t);return e===t?e:(Yi(e,"iterate",zd),F0(t)?e:e.map(ts))}function CM(t){return Yi(t=Wr(t),"iterate",zd),t}const rj={__proto__:null,[Symbol.iterator](){return _D(this,Symbol.iterator,ts)},concat(...t){return J1(this).concat(...t.map(e=>Yn(e)?J1(e):e))},entries(){return _D(this,"entries",t=>(t[1]=ts(t[1]),t))},every(t,e){return uc(this,"every",t,e,void 0,arguments)},filter(t,e){return uc(this,"filter",t,e,n=>n.map(ts),arguments)},find(t,e){return uc(this,"find",t,e,ts,arguments)},findIndex(t,e){return uc(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return uc(this,"findLast",t,e,ts,arguments)},findLastIndex(t,e){return uc(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return uc(this,"forEach",t,e,void 0,arguments)},includes(...t){return OD(this,"includes",t)},indexOf(...t){return OD(this,"indexOf",t)},join(t){return J1(this).join(t)},lastIndexOf(...t){return OD(this,"lastIndexOf",t)},map(t,e){return uc(this,"map",t,e,void 0,arguments)},pop(){return sg(this,"pop")},push(...t){return sg(this,"push",t)},reduce(t,...e){return DO(this,"reduce",t,e)},reduceRight(t,...e){return DO(this,"reduceRight",t,e)},shift(){return sg(this,"shift")},some(t,e){return uc(this,"some",t,e,void 0,arguments)},splice(...t){return sg(this,"splice",t)},toReversed(){return J1(this).toReversed()},toSorted(t){return J1(this).toSorted(t)},toSpliced(...t){return J1(this).toSpliced(...t)},unshift(...t){return sg(this,"unshift",t)},values(){return _D(this,"values",ts)}};function _D(t,e,n){const r=CM(t),a=r[e]();return r!==t&&!F0(t)&&(a._next=a.next,a.next=()=>{const i=a._next();return i.value&&(i.value=n(i.value)),i}),a}const aj=Array.prototype;function uc(t,e,n,r,a,i){const o=CM(t),s=o!==t&&!F0(t),c=o[e];if(c!==aj[e]){const f=c.apply(t,i);return s?ts(f):f}let l=n;o!==t&&(s?l=function(f,v){return n.call(this,ts(f),v,t)}:n.length>2&&(l=function(f,v){return n.call(this,f,v,t)}));const u=c.call(o,l,r);return s&&a?a(u):u}function DO(t,e,n,r){const a=CM(t);let i=n;return a!==t&&(F0(t)?n.length>3&&(i=function(o,s,c){return n.call(this,o,s,c,t)}):i=function(o,s,c){return n.call(this,o,ts(s),c,t)}),a[e](i,...r)}function OD(t,e,n){const r=Wr(t);Yi(r,"iterate",zd);const a=r[e](...n);return(a===-1||a===!1)&&TM(n[0])?(n[0]=Wr(n[0]),r[e](...n)):a}function sg(t,e,n=[]){lu(),hM();const r=Wr(t)[e].apply(t,n);return pM(),uu(),r}const ij=uM("__proto__,__v_isRef,__isVue"),qx=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Pv));function oj(t){Pv(t)||(t=String(t));const e=Wr(this);return Yi(e,"has",t),e.hasOwnProperty(t)}class jx{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const a=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!a;if(n==="__v_isReadonly")return a;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(a?i?hj:Yx:i?Xx:Kx).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=Yn(e);if(!a){let c;if(o&&(c=rj[n]))return c;if(n==="hasOwnProperty")return oj}const s=Reflect.get(e,n,Do(e)?e:r);return(Pv(n)?qx.has(n):ij(n))||(a||Yi(e,"get",n),i)?s:Do(s)?o&&gM(n)?s:s.value:li(s)?a?Zx(s):DM(s):s}}class Qx extends jx{constructor(e=!1){super(!1,e)}set(e,n,r,a){let i=e[n];if(!this._isShallow){const c=rv(i);if(!F0(r)&&!rv(r)&&(i=Wr(i),r=Wr(r)),!Yn(e)&&Do(i)&&!Do(r))return c?!1:(i.value=r,!0)}const o=Yn(e)&&gM(n)?Number(n)<e.length:Lr(e,n),s=Reflect.set(e,n,r,Do(e)?e:a);return e===Wr(a)&&(o?c1(r,i)&&Ac(e,"set",n,r):Ac(e,"add",n,r)),s}deleteProperty(e,n){const r=Lr(e,n);e[n];const a=Reflect.deleteProperty(e,n);return a&&r&&Ac(e,"delete",n,void 0),a}has(e,n){const r=Reflect.has(e,n);return(!Pv(n)||!qx.has(n))&&Yi(e,"has",n),r}ownKeys(e){return Yi(e,"iterate",Yn(e)?"length":l1),Reflect.ownKeys(e)}}class sj extends jx{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const cj=new Qx,lj=new sj,uj=new Qx(!0);const Y3=t=>t,Jh=t=>Reflect.getPrototypeOf(t);function fj(t,e,n){return function(...r){const a=this.__v_raw,i=Wr(a),o=rd(i),s=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,l=a[t](...r),u=n?Y3:e?Z3:ts;return!e&&Yi(i,"iterate",c?X3:l1),{next(){const{value:f,done:v}=l.next();return v?{value:f,done:v}:{value:s?[u(f[0]),u(f[1])]:u(f),done:v}},[Symbol.iterator](){return this}}}}function ep(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function vj(t,e){const n={get(a){const i=this.__v_raw,o=Wr(i),s=Wr(a);t||(c1(a,s)&&Yi(o,"get",a),Yi(o,"get",s));const{has:c}=Jh(o),l=e?Y3:t?Z3:ts;if(c.call(o,a))return l(i.get(a));if(c.call(o,s))return l(i.get(s));i!==o&&i.get(a)},get size(){const a=this.__v_raw;return!t&&Yi(Wr(a),"iterate",l1),Reflect.get(a,"size",a)},has(a){const i=this.__v_raw,o=Wr(i),s=Wr(a);return t||(c1(a,s)&&Yi(o,"has",a),Yi(o,"has",s)),a===s?i.has(a):i.has(a)||i.has(s)},forEach(a,i){const o=this,s=o.__v_raw,c=Wr(s),l=e?Y3:t?Z3:ts;return!t&&Yi(c,"iterate",l1),s.forEach((u,f)=>a.call(i,l(u),l(f),o))}};return To(n,t?{add:ep("add"),set:ep("set"),delete:ep("delete"),clear:ep("clear")}:{add(a){!e&&!F0(a)&&!rv(a)&&(a=Wr(a));const i=Wr(this);return Jh(i).has.call(i,a)||(i.add(a),Ac(i,"add",a,a)),this},set(a,i){!e&&!F0(i)&&!rv(i)&&(i=Wr(i));const o=Wr(this),{has:s,get:c}=Jh(o);let l=s.call(o,a);l||(a=Wr(a),l=s.call(o,a));const u=c.call(o,a);return o.set(a,i),l?c1(i,u)&&Ac(o,"set",a,i):Ac(o,"add",a,i),this},delete(a){const i=Wr(this),{has:o,get:s}=Jh(i);let c=o.call(i,a);c||(a=Wr(a),c=o.call(i,a)),s&&s.call(i,a);const l=i.delete(a);return c&&Ac(i,"delete",a,void 0),l},clear(){const a=Wr(this),i=a.size!==0,o=a.clear();return i&&Ac(a,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(a=>{n[a]=fj(a,t,e)}),n}function IM(t,e){const n=vj(t,e);return(r,a,i)=>a==="__v_isReactive"?!t:a==="__v_isReadonly"?t:a==="__v_raw"?r:Reflect.get(Lr(n,a)&&a in r?n:r,a,i)}const gj={get:IM(!1,!1)},dj={get:IM(!1,!0)},mj={get:IM(!0,!1)};const Kx=new WeakMap,Xx=new WeakMap,Yx=new WeakMap,hj=new WeakMap;function pj(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Sj(t){return t.__v_skip||!Object.isExtensible(t)?0:pj(Wq(t))}function DM(t){return rv(t)?t:EM(t,!1,cj,gj,Kx)}function Cj(t){return EM(t,!1,uj,dj,Xx)}function Zx(t){return EM(t,!0,lj,mj,Yx)}function EM(t,e,n,r,a){if(!li(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=a.get(t);if(i)return i;const o=Sj(t);if(o===0)return t;const s=new Proxy(t,o===2?r:n);return a.set(t,s),s}function sd(t){return rv(t)?sd(t.__v_raw):!!(t&&t.__v_isReactive)}function rv(t){return!!(t&&t.__v_isReadonly)}function F0(t){return!!(t&&t.__v_isShallow)}function TM(t){return t?!!t.__v_raw:!1}function Wr(t){const e=t&&t.__v_raw;return e?Wr(e):t}function Ij(t){return!Lr(t,"__v_skip")&&Object.isExtensible(t)&&Lx(t,"__v_skip",!0),t}const ts=t=>li(t)?DM(t):t,Z3=t=>li(t)?Zx(t):t;function Do(t){return t?t.__v_isRef===!0:!1}function Dj(t){return Do(t)?t.value:t}const Ej={get:(t,e,n)=>e==="__v_raw"?t:Dj(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const a=t[e];return Do(a)&&!Do(n)?(a.value=n,!0):Reflect.set(t,e,n,r)}};function Jx(t){return sd(t)?t:new Proxy(t,Ej)}class Tj{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new $x(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=$d-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&na!==this)return kx(this,!0),!0}get value(){const e=this.dep.track();return Wx(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function yj(t,e,n=!1){let r,a;return er(t)?r=t:(r=t.get,a=t.set),new Tj(r,a,n)}const tp={},cS=new WeakMap;let Gu;function Mj(t,e=!1,n=Gu){if(n){let r=cS.get(n);r||cS.set(n,r=[]),r.push(t)}}function _j(t,e,n=ra){const{immediate:r,deep:a,once:i,scheduler:o,augmentJob:s,call:c}=n,l=I=>a?I:F0(I)||a===!1||a===0?_l(I,1):_l(I);let u,f,v,g,d=!1,m=!1;if(Do(t)?(f=()=>t.value,d=F0(t)):sd(t)?(f=()=>l(t),d=!0):Yn(t)?(m=!0,d=t.some(I=>sd(I)||F0(I)),f=()=>t.map(I=>{if(Do(I))return I.value;if(sd(I))return l(I);if(er(I))return c?c(I,2):I()})):er(t)?e?f=c?()=>c(t,2):t:f=()=>{if(v){lu();try{v()}finally{uu()}}const I=Gu;Gu=u;try{return c?c(t,3,[g]):t(g)}finally{Gu=I}}:f=U0,e&&a){const I=f,D=a===!0?1/0:a;f=()=>_l(I(),D)}const h=ej(),C=()=>{u.stop(),h&&h.active&&vM(h.effects,u)};if(i&&e){const I=e;e=(...D)=>{I(...D),C()}}let p=m?new Array(t.length).fill(tp):tp;const S=I=>{if(!(!(u.flags&1)||!u.dirty&&!I))if(e){const D=u.run();if(a||d||(m?D.some((E,T)=>c1(E,p[T])):c1(D,p))){v&&v();const E=Gu;Gu=u;try{const T=[D,p===tp?void 0:m&&p[0]===tp?[]:p,g];c?c(e,3,T):e(...T),p=D}finally{Gu=E}}}else u.run()};return s&&s(S),u=new Fx(f),u.scheduler=o?()=>o(S,!1):S,g=I=>Mj(I,!1,u),v=u.onStop=()=>{const I=cS.get(u);if(I){if(c)c(I,4);else for(const D of I)D();cS.delete(u)}},e?r?S(!0):p=u.run():o?o(S.bind(null,!0),!0):u.run(),C.pause=u.pause.bind(u),C.resume=u.resume.bind(u),C.stop=C,C}function _l(t,e=1/0,n){if(e<=0||!li(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,Do(t))_l(t.value,e,n);else if(Yn(t))for(let r=0;r<t.length;r++)_l(t[r],e,n);else if(Gq(t)||rd(t))t.forEach(r=>{_l(r,e,n)});else if(Hq(t)){for(const r in t)_l(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&_l(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function jm(t,e,n,r){try{return r?t(...r):t()}catch(a){QC(a,e,n)}}function q0(t,e,n,r){if(er(t)){const a=jm(t,e,n,r);return a&&bx(a)&&a.catch(i=>{QC(i,e,n)}),a}if(Yn(t)){const a=[];for(let i=0;i<t.length;i++)a.push(q0(t[i],e,n,r));return a}}function QC(t,e,n,r=!0){const a=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||ra;if(e){let s=e.parent;const c=e.proxy,l=`https://vuejs.org/error-reference/#runtime-${n}`;for(;s;){const u=s.ec;if(u){for(let f=0;f<u.length;f++)if(u[f](t,c,l)===!1)return}s=s.parent}if(i){lu(),jm(i,null,10,[t,c,l]),uu();return}}Oj(t,n,a,r,o)}function Oj(t,e,n,r=!0,a=!1){if(a)throw t;console.error(t)}const go=[];let M0=-1;const Vf=[];let Tl=null,If=0;const eR=Promise.resolve();let lS=null;function wj(t){const e=lS||eR;return t?e.then(this?t.bind(this):t):e}function Pj(t){let e=M0+1,n=go.length;for(;e<n;){const r=e+n>>>1,a=go[r],i=qd(a);i<t||i===t&&a.flags&2?e=r+1:n=r}return e}function yM(t){if(!(t.flags&1)){const e=qd(t),n=go[go.length-1];!n||!(t.flags&2)&&e>=qd(n)?go.push(t):go.splice(Pj(e),0,t),t.flags|=1,tR()}}function tR(){lS||(lS=eR.then(rR))}function Aj(t){Yn(t)?Vf.push(...t):Tl&&t.id===-1?Tl.splice(If+1,0,t):t.flags&1||(Vf.push(t),t.flags|=1),tR()}function EO(t,e,n=M0+1){for(;n<go.length;n++){const r=go[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;go.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function nR(t){if(Vf.length){const e=[...new Set(Vf)].sort((n,r)=>qd(n)-qd(r));if(Vf.length=0,Tl){Tl.push(...e);return}for(Tl=e,If=0;If<Tl.length;If++){const n=Tl[If];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Tl=null,If=0}}const qd=t=>t.id==null?t.flags&2?-1:1/0:t.id;function rR(t){try{for(M0=0;M0<go.length;M0++){const e=go[M0];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),jm(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;M0<go.length;M0++){const e=go[M0];e&&(e.flags&=-2)}M0=-1,go.length=0,nR(),lS=null,(go.length||Vf.length)&&rR()}}let b0=null,aR=null;function uS(t){const e=b0;return b0=t,aR=t&&t.type.__scopeId||null,e}function xj(t,e=b0,n){if(!e||t._n)return t;const r=(...a)=>{r._d&&xO(-1);const i=uS(e);let o;try{o=t(...a)}finally{uS(i),r._d&&xO(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function _u(t,e,n,r){const a=t.dirs,i=e&&e.dirs;for(let o=0;o<a.length;o++){const s=a[o];i&&(s.oldValue=i[o].value);let c=s.dir[r];c&&(lu(),q0(c,n,8,[t.el,s,t,e]),uu())}}const Rj=Symbol("_vte"),bj=t=>t.__isTeleport;function MM(t,e){t.shapeFlag&6&&t.component?(t.transition=e,MM(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function iR(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function fS(t,e,n,r,a=!1){if(Yn(t)){t.forEach((d,m)=>fS(d,e&&(Yn(e)?e[m]:e),n,r,a));return}if(cd(r)&&!a){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&fS(t,e,n,r.component.subTree);return}const i=r.shapeFlag&4?wM(r.component):r.el,o=a?null:i,{i:s,r:c}=t,l=e&&e.r,u=s.refs===ra?s.refs={}:s.refs,f=s.setupState,v=Wr(f),g=f===ra?()=>!1:d=>Lr(v,d);if(l!=null&&l!==c&&(Oi(l)?(u[l]=null,g(l)&&(f[l]=null)):Do(l)&&(l.value=null)),er(c))jm(c,s,12,[o,u]);else{const d=Oi(c),m=Do(c);if(d||m){const h=()=>{if(t.f){const C=d?g(c)?f[c]:u[c]:c.value;a?Yn(C)&&vM(C,i):Yn(C)?C.includes(i)||C.push(i):d?(u[c]=[i],g(c)&&(f[c]=u[c])):(c.value=[i],t.k&&(u[t.k]=c.value))}else d?(u[c]=o,g(c)&&(f[c]=o)):m&&(c.value=o,t.k&&(u[t.k]=o))};o?(h.id=-1,Ko(h,n)):h()}}}jC().requestIdleCallback;jC().cancelIdleCallback;const cd=t=>!!t.type.__asyncLoader,oR=t=>t.type.__isKeepAlive;function Nj(t,e){sR(t,"a",e)}function Lj(t,e){sR(t,"da",e)}function sR(t,e,n=ho){const r=t.__wdc||(t.__wdc=()=>{let a=n;for(;a;){if(a.isDeactivated)return;a=a.parent}return t()});if(KC(e,r,n),n){let a=n.parent;for(;a&&a.parent;)oR(a.parent.vnode)&&Uj(r,e,n,a),a=a.parent}}function Uj(t,e,n,r){const a=KC(e,t,r,!0);lR(()=>{vM(r[e],a)},n)}function KC(t,e,n=ho,r=!1){if(n){const a=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{lu();const s=Qm(n),c=q0(e,n,t,o);return s(),uu(),c});return r?a.unshift(i):a.push(i),i}}const Xc=t=>(e,n=ho)=>{(!Kd||t==="sp")&&KC(t,(...r)=>e(...r),n)},Fj=Xc("bm"),cR=Xc("m"),Vj=Xc("bu"),kj=Xc("u"),Gj=Xc("bum"),lR=Xc("um"),Bj=Xc("sp"),Wj=Xc("rtg"),Hj=Xc("rtc");function $j(t,e=ho){KC("ec",t,e)}const zj=Symbol.for("v-ndc"),J3=t=>t?RR(t)?wM(t):J3(t.parent):null,ld=To(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>J3(t.parent),$root:t=>J3(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>fR(t),$forceUpdate:t=>t.f||(t.f=()=>{yM(t.update)}),$nextTick:t=>t.n||(t.n=wj.bind(t.proxy)),$watch:t=>gQ.bind(t)}),wD=(t,e)=>t!==ra&&!t.__isScriptSetup&&Lr(t,e),qj={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:a,props:i,accessCache:o,type:s,appContext:c}=t;let l;if(e[0]!=="$"){const g=o[e];if(g!==void 0)switch(g){case 1:return r[e];case 2:return a[e];case 4:return n[e];case 3:return i[e]}else{if(wD(r,e))return o[e]=1,r[e];if(a!==ra&&Lr(a,e))return o[e]=2,a[e];if((l=t.propsOptions[0])&&Lr(l,e))return o[e]=3,i[e];if(n!==ra&&Lr(n,e))return o[e]=4,n[e];eT&&(o[e]=0)}}const u=ld[e];let f,v;if(u)return e==="$attrs"&&Yi(t.attrs,"get",""),u(t);if((f=s.__cssModules)&&(f=f[e]))return f;if(n!==ra&&Lr(n,e))return o[e]=4,n[e];if(v=c.config.globalProperties,Lr(v,e))return v[e]},set({_:t},e,n){const{data:r,setupState:a,ctx:i}=t;return wD(a,e)?(a[e]=n,!0):r!==ra&&Lr(r,e)?(r[e]=n,!0):Lr(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:a,propsOptions:i}},o){let s;return!!n[o]||t!==ra&&Lr(t,o)||wD(e,o)||(s=i[0])&&Lr(s,o)||Lr(r,o)||Lr(ld,o)||Lr(a.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Lr(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function TO(t){return Yn(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let eT=!0;function jj(t){const e=fR(t),n=t.proxy,r=t.ctx;eT=!1,e.beforeCreate&&yO(e.beforeCreate,t,"bc");const{data:a,computed:i,methods:o,watch:s,provide:c,inject:l,created:u,beforeMount:f,mounted:v,beforeUpdate:g,updated:d,activated:m,deactivated:h,beforeDestroy:C,beforeUnmount:p,destroyed:S,unmounted:I,render:D,renderTracked:E,renderTriggered:T,errorCaptured:y,serverPrefetch:M,expose:_,inheritAttrs:O,components:w,directives:x,filters:P}=e;if(l&&Qj(l,r,null),o)for(const H in o){const F=o[H];er(F)&&(r[H]=F.bind(n))}if(a){const H=a.call(n,n);li(H)&&(t.data=DM(H))}if(eT=!0,i)for(const H in i){const F=i[H],U=er(F)?F.bind(n,n):er(F.get)?F.get.bind(n,n):U0,V=!er(F)&&er(F.set)?F.set.bind(n):U0,X=UQ({get:U,set:V});Object.defineProperty(r,H,{enumerable:!0,configurable:!0,get:()=>X.value,set:re=>X.value=re})}if(s)for(const H in s)uR(s[H],r,n,H);if(c){const H=er(c)?c.call(n):c;Reflect.ownKeys(H).forEach(F=>{eQ(F,H[F])})}u&&yO(u,t,"c");function L(H,F){Yn(F)?F.forEach(U=>H(U.bind(n))):F&&H(F.bind(n))}if(L(Fj,f),L(cR,v),L(Vj,g),L(kj,d),L(Nj,m),L(Lj,h),L($j,y),L(Hj,E),L(Wj,T),L(Gj,p),L(lR,I),L(Bj,M),Yn(_))if(_.length){const H=t.exposed||(t.exposed={});_.forEach(F=>{Object.defineProperty(H,F,{get:()=>n[F],set:U=>n[F]=U})})}else t.exposed||(t.exposed={});D&&t.render===U0&&(t.render=D),O!=null&&(t.inheritAttrs=O),w&&(t.components=w),x&&(t.directives=x),M&&iR(t)}function Qj(t,e,n=U0){Yn(t)&&(t=tT(t));for(const r in t){const a=t[r];let i;li(a)?"default"in a?i=p2(a.from||r,a.default,!0):i=p2(a.from||r):i=p2(a),Do(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function yO(t,e,n){q0(Yn(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function uR(t,e,n,r){let a=r.includes(".")?MR(n,r):()=>n[r];if(Oi(t)){const i=e[t];er(i)&&AD(a,i)}else if(er(t))AD(a,t.bind(n));else if(li(t))if(Yn(t))t.forEach(i=>uR(i,e,n,r));else{const i=er(t.handler)?t.handler.bind(n):e[t.handler];er(i)&&AD(a,i,t)}}function fR(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:a,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,s=i.get(e);let c;return s?c=s:!a.length&&!n&&!r?c=e:(c={},a.length&&a.forEach(l=>vS(c,l,o,!0)),vS(c,e,o)),li(e)&&i.set(e,c),c}function vS(t,e,n,r=!1){const{mixins:a,extends:i}=e;i&&vS(t,i,n,!0),a&&a.forEach(o=>vS(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const s=Kj[o]||n&&n[o];t[o]=s?s(t[o],e[o]):e[o]}return t}const Kj={data:MO,props:_O,emits:_O,methods:Ug,computed:Ug,beforeCreate:vo,created:vo,beforeMount:vo,mounted:vo,beforeUpdate:vo,updated:vo,beforeDestroy:vo,beforeUnmount:vo,destroyed:vo,unmounted:vo,activated:vo,deactivated:vo,errorCaptured:vo,serverPrefetch:vo,components:Ug,directives:Ug,watch:Yj,provide:MO,inject:Xj};function MO(t,e){return e?t?function(){return To(er(t)?t.call(this,this):t,er(e)?e.call(this,this):e)}:e:t}function Xj(t,e){return Ug(tT(t),tT(e))}function tT(t){if(Yn(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function vo(t,e){return t?[...new Set([].concat(t,e))]:e}function Ug(t,e){return t?To(Object.create(null),t,e):e}function _O(t,e){return t?Yn(t)&&Yn(e)?[...new Set([...t,...e])]:To(Object.create(null),TO(t),TO(e??{})):e}function Yj(t,e){if(!t)return e;if(!e)return t;const n=To(Object.create(null),t);for(const r in e)n[r]=vo(t[r],e[r]);return n}function vR(){return{app:null,config:{isNativeTag:Vq,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Zj=0;function Jj(t,e){return function(r,a=null){er(r)||(r=To({},r)),a!=null&&!li(a)&&(a=null);const i=vR(),o=new WeakSet,s=[];let c=!1;const l=i.app={_uid:Zj++,_component:r,_props:a,_container:null,_context:i,_instance:null,version:FQ,get config(){return i.config},set config(u){},use(u,...f){return o.has(u)||(u&&er(u.install)?(o.add(u),u.install(l,...f)):er(u)&&(o.add(u),u(l,...f))),l},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),l},component(u,f){return f?(i.components[u]=f,l):i.components[u]},directive(u,f){return f?(i.directives[u]=f,l):i.directives[u]},mount(u,f,v){if(!c){const g=l._ceVNode||Vc(r,a);return g.appContext=i,v===!0?v="svg":v===!1&&(v=void 0),t(g,u,v),c=!0,l._container=u,u.__vue_app__=l,wM(g.component)}},onUnmount(u){s.push(u)},unmount(){c&&(q0(s,l._instance,16),t(null,l._container),delete l._container.__vue_app__)},provide(u,f){return i.provides[u]=f,l},runWithContext(u){const f=kf;kf=l;try{return u()}finally{kf=f}}};return l}}let kf=null;function eQ(t,e){if(ho){let n=ho.provides;const r=ho.parent&&ho.parent.provides;r===n&&(n=ho.provides=Object.create(r)),n[t]=e}}function p2(t,e,n=!1){const r=ho||b0;if(r||kf){const a=kf?kf._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(a&&t in a)return a[t];if(arguments.length>1)return n&&er(e)?e.call(r&&r.proxy):e}}const gR={},dR=()=>Object.create(gR),mR=t=>Object.getPrototypeOf(t)===gR;function tQ(t,e,n,r=!1){const a={},i=dR();t.propsDefaults=Object.create(null),hR(t,e,a,i);for(const o in t.propsOptions[0])o in a||(a[o]=void 0);n?t.props=r?a:Cj(a):t.type.props?t.props=a:t.props=i,t.attrs=i}function nQ(t,e,n,r){const{props:a,attrs:i,vnode:{patchFlag:o}}=t,s=Wr(a),[c]=t.propsOptions;let l=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let f=0;f<u.length;f++){let v=u[f];if(XC(t.emitsOptions,v))continue;const g=e[v];if(c)if(Lr(i,v))g!==i[v]&&(i[v]=g,l=!0);else{const d=eu(v);a[d]=nT(c,s,d,g,t,!1)}else g!==i[v]&&(i[v]=g,l=!0)}}}else{hR(t,e,a,i)&&(l=!0);let u;for(const f in s)(!e||!Lr(e,f)&&((u=W1(f))===f||!Lr(e,u)))&&(c?n&&(n[f]!==void 0||n[u]!==void 0)&&(a[f]=nT(c,s,f,void 0,t,!0)):delete a[f]);if(i!==s)for(const f in i)(!e||!Lr(e,f))&&(delete i[f],l=!0)}l&&Ac(t.attrs,"set","")}function hR(t,e,n,r){const[a,i]=t.propsOptions;let o=!1,s;if(e)for(let c in e){if(ad(c))continue;const l=e[c];let u;a&&Lr(a,u=eu(c))?!i||!i.includes(u)?n[u]=l:(s||(s={}))[u]=l:XC(t.emitsOptions,c)||(!(c in r)||l!==r[c])&&(r[c]=l,o=!0)}if(i){const c=Wr(n),l=s||ra;for(let u=0;u<i.length;u++){const f=i[u];n[f]=nT(a,c,f,l[f],t,!Lr(l,f))}}return o}function nT(t,e,n,r,a,i){const o=t[n];if(o!=null){const s=Lr(o,"default");if(s&&r===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&er(c)){const{propsDefaults:l}=a;if(n in l)r=l[n];else{const u=Qm(a);r=l[n]=c.call(null,e),u()}}else r=c;a.ce&&a.ce._setProp(n,r)}o[0]&&(i&&!s?r=!1:o[1]&&(r===""||r===W1(n))&&(r=!0))}return r}const rQ=new WeakMap;function pR(t,e,n=!1){const r=n?rQ:e.propsCache,a=r.get(t);if(a)return a;const i=t.props,o={},s=[];let c=!1;if(!er(t)){const u=f=>{c=!0;const[v,g]=pR(f,e,!0);To(o,v),g&&s.push(...g)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!i&&!c)return li(t)&&r.set(t,Ff),Ff;if(Yn(i))for(let u=0;u<i.length;u++){const f=eu(i[u]);OO(f)&&(o[f]=ra)}else if(i)for(const u in i){const f=eu(u);if(OO(f)){const v=i[u],g=o[f]=Yn(v)||er(v)?{type:v}:To({},v),d=g.type;let m=!1,h=!0;if(Yn(d))for(let C=0;C<d.length;++C){const p=d[C],S=er(p)&&p.name;if(S==="Boolean"){m=!0;break}else S==="String"&&(h=!1)}else m=er(d)&&d.name==="Boolean";g[0]=m,g[1]=h,(m||Lr(g,"default"))&&s.push(f)}}const l=[o,s];return li(t)&&r.set(t,l),l}function OO(t){return t[0]!=="$"&&!ad(t)}const SR=t=>t[0]==="_"||t==="$stable",_M=t=>Yn(t)?t.map(w0):[w0(t)],aQ=(t,e,n)=>{if(e._n)return e;const r=xj((...a)=>_M(e(...a)),n);return r._c=!1,r},CR=(t,e,n)=>{const r=t._ctx;for(const a in t){if(SR(a))continue;const i=t[a];if(er(i))e[a]=aQ(a,i,r);else if(i!=null){const o=_M(i);e[a]=()=>o}}},IR=(t,e)=>{const n=_M(e);t.slots.default=()=>n},DR=(t,e,n)=>{for(const r in e)(n||r!=="_")&&(t[r]=e[r])},iQ=(t,e,n)=>{const r=t.slots=dR();if(t.vnode.shapeFlag&32){const a=e._;a?(DR(r,e,n),n&&Lx(r,"_",a,!0)):CR(e,r)}else e&&IR(t,e)},oQ=(t,e,n)=>{const{vnode:r,slots:a}=t;let i=!0,o=ra;if(r.shapeFlag&32){const s=e._;s?n&&s===1?i=!1:DR(a,e,n):(i=!e.$stable,CR(e,a)),o=e}else e&&(IR(t,e),o={default:1});if(i)for(const s in a)!SR(s)&&o[s]==null&&delete a[s]},Ko=IQ;function sQ(t){return cQ(t)}function cQ(t,e){const n=jC();n.__VUE__=!0;const{insert:r,remove:a,patchProp:i,createElement:o,createText:s,createComment:c,setText:l,setElementText:u,parentNode:f,nextSibling:v,setScopeId:g=U0,insertStaticContent:d}=t,m=(b,N,W,j=null,K=null,ge=null,ye=void 0,we=null,be=!!N.dynamicChildren)=>{if(b===N)return;b&&!cg(b,N)&&(j=Fe(b),re(b,K,ge,!0),b=null),N.patchFlag===-2&&(be=!1,N.dynamicChildren=null);const{type:Z,ref:ie,shapeFlag:he}=N;switch(Z){case YC:h(b,N,W,j);break;case jd:C(b,N,W,j);break;case S2:b==null&&p(N,W,j,ye);break;case Tc:w(b,N,W,j,K,ge,ye,we,be);break;default:he&1?D(b,N,W,j,K,ge,ye,we,be):he&6?x(b,N,W,j,K,ge,ye,we,be):(he&64||he&128)&&Z.process(b,N,W,j,K,ge,ye,we,be,k)}ie!=null&&K&&fS(ie,b&&b.ref,ge,N||b,!N)},h=(b,N,W,j)=>{if(b==null)r(N.el=s(N.children),W,j);else{const K=N.el=b.el;N.children!==b.children&&l(K,N.children)}},C=(b,N,W,j)=>{b==null?r(N.el=c(N.children||""),W,j):N.el=b.el},p=(b,N,W,j)=>{[b.el,b.anchor]=d(b.children,N,W,j,b.el,b.anchor)},S=({el:b,anchor:N},W,j)=>{let K;for(;b&&b!==N;)K=v(b),r(b,W,j),b=K;r(N,W,j)},I=({el:b,anchor:N})=>{let W;for(;b&&b!==N;)W=v(b),a(b),b=W;a(N)},D=(b,N,W,j,K,ge,ye,we,be)=>{N.type==="svg"?ye="svg":N.type==="math"&&(ye="mathml"),b==null?E(N,W,j,K,ge,ye,we,be):M(b,N,K,ge,ye,we,be)},E=(b,N,W,j,K,ge,ye,we)=>{let be,Z;const{props:ie,shapeFlag:he,transition:se,dirs:me}=b;if(be=b.el=o(b.type,ge,ie&&ie.is,ie),he&8?u(be,b.children):he&16&&y(b.children,be,null,j,K,PD(b,ge),ye,we),me&&_u(b,null,j,"created"),T(be,b,b.scopeId,ye,j),ie){for(const q in ie)q!=="value"&&!ad(q)&&i(be,q,null,ie[q],ge,j);"value"in ie&&i(be,"value",null,ie.value,ge),(Z=ie.onVnodeBeforeMount)&&S0(Z,j,b)}me&&_u(b,null,j,"beforeMount");const fe=lQ(K,se);fe&&se.beforeEnter(be),r(be,N,W),((Z=ie&&ie.onVnodeMounted)||fe||me)&&Ko(()=>{Z&&S0(Z,j,b),fe&&se.enter(be),me&&_u(b,null,j,"mounted")},K)},T=(b,N,W,j,K)=>{if(W&&g(b,W),j)for(let ge=0;ge<j.length;ge++)g(b,j[ge]);if(K){let ge=K.subTree;if(N===ge||OR(ge.type)&&(ge.ssContent===N||ge.ssFallback===N)){const ye=K.vnode;T(b,ye,ye.scopeId,ye.slotScopeIds,K.parent)}}},y=(b,N,W,j,K,ge,ye,we,be=0)=>{for(let Z=be;Z<b.length;Z++){const ie=b[Z]=we?yl(b[Z]):w0(b[Z]);m(null,ie,N,W,j,K,ge,ye,we)}},M=(b,N,W,j,K,ge,ye)=>{const we=N.el=b.el;let{patchFlag:be,dynamicChildren:Z,dirs:ie}=N;be|=b.patchFlag&16;const he=b.props||ra,se=N.props||ra;let me;if(W&&Ou(W,!1),(me=se.onVnodeBeforeUpdate)&&S0(me,W,N,b),ie&&_u(N,b,W,"beforeUpdate"),W&&Ou(W,!0),(he.innerHTML&&se.innerHTML==null||he.textContent&&se.textContent==null)&&u(we,""),Z?_(b.dynamicChildren,Z,we,W,j,PD(N,K),ge):ye||F(b,N,we,null,W,j,PD(N,K),ge,!1),be>0){if(be&16)O(we,he,se,W,K);else if(be&2&&he.class!==se.class&&i(we,"class",null,se.class,K),be&4&&i(we,"style",he.style,se.style,K),be&8){const fe=N.dynamicProps;for(let q=0;q<fe.length;q++){const Pe=fe[q],Le=he[Pe],Ue=se[Pe];(Ue!==Le||Pe==="value")&&i(we,Pe,Le,Ue,K,W)}}be&1&&b.children!==N.children&&u(we,N.children)}else!ye&&Z==null&&O(we,he,se,W,K);((me=se.onVnodeUpdated)||ie)&&Ko(()=>{me&&S0(me,W,N,b),ie&&_u(N,b,W,"updated")},j)},_=(b,N,W,j,K,ge,ye)=>{for(let we=0;we<N.length;we++){const be=b[we],Z=N[we],ie=be.el&&(be.type===Tc||!cg(be,Z)||be.shapeFlag&70)?f(be.el):W;m(be,Z,ie,null,j,K,ge,ye,!0)}},O=(b,N,W,j,K)=>{if(N!==W){if(N!==ra)for(const ge in N)!ad(ge)&&!(ge in W)&&i(b,ge,N[ge],null,K,j);for(const ge in W){if(ad(ge))continue;const ye=W[ge],we=N[ge];ye!==we&&ge!=="value"&&i(b,ge,we,ye,K,j)}"value"in W&&i(b,"value",N.value,W.value,K)}},w=(b,N,W,j,K,ge,ye,we,be)=>{const Z=N.el=b?b.el:s(""),ie=N.anchor=b?b.anchor:s("");let{patchFlag:he,dynamicChildren:se,slotScopeIds:me}=N;me&&(we=we?we.concat(me):me),b==null?(r(Z,W,j),r(ie,W,j),y(N.children||[],W,ie,K,ge,ye,we,be)):he>0&&he&64&&se&&b.dynamicChildren?(_(b.dynamicChildren,se,W,K,ge,ye,we),(N.key!=null||K&&N===K.subTree)&&ER(b,N,!0)):F(b,N,W,ie,K,ge,ye,we,be)},x=(b,N,W,j,K,ge,ye,we,be)=>{N.slotScopeIds=we,b==null?N.shapeFlag&512?K.ctx.activate(N,W,j,ye,be):P(N,W,j,K,ge,ye,be):R(b,N,be)},P=(b,N,W,j,K,ge,ye)=>{const we=b.component=AQ(b,j,K);if(oR(b)&&(we.ctx.renderer=k),xQ(we,!1,ye),we.asyncDep){if(K&&K.registerDep(we,L,ye),!b.el){const be=we.subTree=Vc(jd);C(null,be,N,W)}}else L(we,b,N,W,K,ge,ye)},R=(b,N,W)=>{const j=N.component=b.component;if(SQ(b,N,W))if(j.asyncDep&&!j.asyncResolved){H(j,N,W);return}else j.next=N,j.update();else N.el=b.el,j.vnode=N},L=(b,N,W,j,K,ge,ye)=>{const we=()=>{if(b.isMounted){let{next:he,bu:se,u:me,parent:fe,vnode:q}=b;{const Be=TR(b);if(Be){he&&(he.el=q.el,H(b,he,ye)),Be.asyncDep.then(()=>{b.isUnmounted||we()});return}}let Pe=he,Le;Ou(b,!1),he?(he.el=q.el,H(b,he,ye)):he=q,se&&yD(se),(Le=he.props&&he.props.onVnodeBeforeUpdate)&&S0(Le,fe,he,q),Ou(b,!0);const Ue=PO(b),Me=b.subTree;b.subTree=Ue,m(Me,Ue,f(Me.el),Fe(Me),b,K,ge),he.el=Ue.el,Pe===null&&CQ(b,Ue.el),me&&Ko(me,K),(Le=he.props&&he.props.onVnodeUpdated)&&Ko(()=>S0(Le,fe,he,q),K)}else{let he;const{el:se,props:me}=N,{bm:fe,m:q,parent:Pe,root:Le,type:Ue}=b,Me=cd(N);Ou(b,!1),fe&&yD(fe),!Me&&(he=me&&me.onVnodeBeforeMount)&&S0(he,Pe,N),Ou(b,!0);{Le.ce&&Le.ce._injectChildStyle(Ue);const Be=b.subTree=PO(b);m(null,Be,W,j,b,K,ge),N.el=Be.el}if(q&&Ko(q,K),!Me&&(he=me&&me.onVnodeMounted)){const Be=N;Ko(()=>S0(he,Pe,Be),K)}(N.shapeFlag&256||Pe&&cd(Pe.vnode)&&Pe.vnode.shapeFlag&256)&&b.a&&Ko(b.a,K),b.isMounted=!0,N=W=j=null}};b.scope.on();const be=b.effect=new Fx(we);b.scope.off();const Z=b.update=be.run.bind(be),ie=b.job=be.runIfDirty.bind(be);ie.i=b,ie.id=b.uid,be.scheduler=()=>yM(ie),Ou(b,!0),Z()},H=(b,N,W)=>{N.component=b;const j=b.vnode.props;b.vnode=N,b.next=null,nQ(b,N.props,j,W),oQ(b,N.children,W),lu(),EO(b),uu()},F=(b,N,W,j,K,ge,ye,we,be=!1)=>{const Z=b&&b.children,ie=b?b.shapeFlag:0,he=N.children,{patchFlag:se,shapeFlag:me}=N;if(se>0){if(se&128){V(Z,he,W,j,K,ge,ye,we,be);return}else if(se&256){U(Z,he,W,j,K,ge,ye,we,be);return}}me&8?(ie&16&&Te(Z,K,ge),he!==Z&&u(W,he)):ie&16?me&16?V(Z,he,W,j,K,ge,ye,we,be):Te(Z,K,ge,!0):(ie&8&&u(W,""),me&16&&y(he,W,j,K,ge,ye,we,be))},U=(b,N,W,j,K,ge,ye,we,be)=>{b=b||Ff,N=N||Ff;const Z=b.length,ie=N.length,he=Math.min(Z,ie);let se;for(se=0;se<he;se++){const me=N[se]=be?yl(N[se]):w0(N[se]);m(b[se],me,W,null,K,ge,ye,we,be)}Z>ie?Te(b,K,ge,!0,!1,he):y(N,W,j,K,ge,ye,we,be,he)},V=(b,N,W,j,K,ge,ye,we,be)=>{let Z=0;const ie=N.length;let he=b.length-1,se=ie-1;for(;Z<=he&&Z<=se;){const me=b[Z],fe=N[Z]=be?yl(N[Z]):w0(N[Z]);if(cg(me,fe))m(me,fe,W,null,K,ge,ye,we,be);else break;Z++}for(;Z<=he&&Z<=se;){const me=b[he],fe=N[se]=be?yl(N[se]):w0(N[se]);if(cg(me,fe))m(me,fe,W,null,K,ge,ye,we,be);else break;he--,se--}if(Z>he){if(Z<=se){const me=se+1,fe=me<ie?N[me].el:j;for(;Z<=se;)m(null,N[Z]=be?yl(N[Z]):w0(N[Z]),W,fe,K,ge,ye,we,be),Z++}}else if(Z>se)for(;Z<=he;)re(b[Z],K,ge,!0),Z++;else{const me=Z,fe=Z,q=new Map;for(Z=fe;Z<=se;Z++){const at=N[Z]=be?yl(N[Z]):w0(N[Z]);at.key!=null&&q.set(at.key,Z)}let Pe,Le=0;const Ue=se-fe+1;let Me=!1,Be=0;const nt=new Array(Ue);for(Z=0;Z<Ue;Z++)nt[Z]=0;for(Z=me;Z<=he;Z++){const at=b[Z];if(Le>=Ue){re(at,K,ge,!0);continue}let Ot;if(at.key!=null)Ot=q.get(at.key);else for(Pe=fe;Pe<=se;Pe++)if(nt[Pe-fe]===0&&cg(at,N[Pe])){Ot=Pe;break}Ot===void 0?re(at,K,ge,!0):(nt[Ot-fe]=Z+1,Ot>=Be?Be=Ot:Me=!0,m(at,N[Ot],W,null,K,ge,ye,we,be),Le++)}const Ze=Me?uQ(nt):Ff;for(Pe=Ze.length-1,Z=Ue-1;Z>=0;Z--){const at=fe+Z,Ot=N[at],Oe=at+1<ie?N[at+1].el:j;nt[Z]===0?m(null,Ot,W,Oe,K,ge,ye,we,be):Me&&(Pe<0||Z!==Ze[Pe]?X(Ot,W,Oe,2):Pe--)}}},X=(b,N,W,j,K=null)=>{const{el:ge,type:ye,transition:we,children:be,shapeFlag:Z}=b;if(Z&6){X(b.component.subTree,N,W,j);return}if(Z&128){b.suspense.move(N,W,j);return}if(Z&64){ye.move(b,N,W,k);return}if(ye===Tc){r(ge,N,W);for(let he=0;he<be.length;he++)X(be[he],N,W,j);r(b.anchor,N,W);return}if(ye===S2){S(b,N,W);return}if(j!==2&&Z&1&&we)if(j===0)we.beforeEnter(ge),r(ge,N,W),Ko(()=>we.enter(ge),K);else{const{leave:he,delayLeave:se,afterLeave:me}=we,fe=()=>r(ge,N,W),q=()=>{he(ge,()=>{fe(),me&&me()})};se?se(ge,fe,q):q()}else r(ge,N,W)},re=(b,N,W,j=!1,K=!1)=>{const{type:ge,props:ye,ref:we,children:be,dynamicChildren:Z,shapeFlag:ie,patchFlag:he,dirs:se,cacheIndex:me}=b;if(he===-2&&(K=!1),we!=null&&fS(we,null,W,b,!0),me!=null&&(N.renderCache[me]=void 0),ie&256){N.ctx.deactivate(b);return}const fe=ie&1&&se,q=!cd(b);let Pe;if(q&&(Pe=ye&&ye.onVnodeBeforeUnmount)&&S0(Pe,N,b),ie&6)pe(b.component,W,j);else{if(ie&128){b.suspense.unmount(W,j);return}fe&&_u(b,null,N,"beforeUnmount"),ie&64?b.type.remove(b,N,W,k,j):Z&&!Z.hasOnce&&(ge!==Tc||he>0&&he&64)?Te(Z,N,W,!1,!0):(ge===Tc&&he&384||!K&&ie&16)&&Te(be,N,W),j&&ue(b)}(q&&(Pe=ye&&ye.onVnodeUnmounted)||fe)&&Ko(()=>{Pe&&S0(Pe,N,b),fe&&_u(b,null,N,"unmounted")},W)},ue=b=>{const{type:N,el:W,anchor:j,transition:K}=b;if(N===Tc){De(W,j);return}if(N===S2){I(b);return}const ge=()=>{a(W),K&&!K.persisted&&K.afterLeave&&K.afterLeave()};if(b.shapeFlag&1&&K&&!K.persisted){const{leave:ye,delayLeave:we}=K,be=()=>ye(W,ge);we?we(b.el,ge,be):be()}else ge()},De=(b,N)=>{let W;for(;b!==N;)W=v(b),a(b),b=W;a(N)},pe=(b,N,W)=>{const{bum:j,scope:K,job:ge,subTree:ye,um:we,m:be,a:Z}=b;wO(be),wO(Z),j&&yD(j),K.stop(),ge&&(ge.flags|=8,re(ye,b,N,W)),we&&Ko(we,N),Ko(()=>{b.isUnmounted=!0},N),N&&N.pendingBranch&&!N.isUnmounted&&b.asyncDep&&!b.asyncResolved&&b.suspenseId===N.pendingId&&(N.deps--,N.deps===0&&N.resolve())},Te=(b,N,W,j=!1,K=!1,ge=0)=>{for(let ye=ge;ye<b.length;ye++)re(b[ye],N,W,j,K)},Fe=b=>{if(b.shapeFlag&6)return Fe(b.component.subTree);if(b.shapeFlag&128)return b.suspense.next();const N=v(b.anchor||b.el),W=N&&N[Rj];return W?v(W):N};let Ne=!1;const Re=(b,N,W)=>{b==null?N._vnode&&re(N._vnode,null,null,!0):m(N._vnode||null,b,N,null,null,null,W),N._vnode=b,Ne||(Ne=!0,EO(),nR(),Ne=!1)},k={p:m,um:re,m:X,r:ue,mt:P,mc:y,pc:F,pbc:_,n:Fe,o:t};return{render:Re,hydrate:void 0,createApp:Jj(Re)}}function PD({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Ou({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function lQ(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function ER(t,e,n=!1){const r=t.children,a=e.children;if(Yn(r)&&Yn(a))for(let i=0;i<r.length;i++){const o=r[i];let s=a[i];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=a[i]=yl(a[i]),s.el=o.el),!n&&s.patchFlag!==-2&&ER(o,s)),s.type===YC&&(s.el=o.el)}}function uQ(t){const e=t.slice(),n=[0];let r,a,i,o,s;const c=t.length;for(r=0;r<c;r++){const l=t[r];if(l!==0){if(a=n[n.length-1],t[a]<l){e[r]=a,n.push(r);continue}for(i=0,o=n.length-1;i<o;)s=i+o>>1,t[n[s]]<l?i=s+1:o=s;l<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function TR(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:TR(e)}function wO(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const fQ=Symbol.for("v-scx"),vQ=()=>p2(fQ);function AD(t,e,n){return yR(t,e,n)}function yR(t,e,n=ra){const{immediate:r,deep:a,flush:i,once:o}=n,s=To({},n),c=e&&r||!e&&i!=="post";let l;if(Kd){if(i==="sync"){const g=vQ();l=g.__watcherHandles||(g.__watcherHandles=[])}else if(!c){const g=()=>{};return g.stop=U0,g.resume=U0,g.pause=U0,g}}const u=ho;s.call=(g,d,m)=>q0(g,u,d,m);let f=!1;i==="post"?s.scheduler=g=>{Ko(g,u&&u.suspense)}:i!=="sync"&&(f=!0,s.scheduler=(g,d)=>{d?g():yM(g)}),s.augmentJob=g=>{e&&(g.flags|=4),f&&(g.flags|=2,u&&(g.id=u.uid,g.i=u))};const v=_j(t,e,s);return Kd&&(l?l.push(v):c&&v()),v}function gQ(t,e,n){const r=this.proxy,a=Oi(t)?t.includes(".")?MR(r,t):()=>r[t]:t.bind(r,r);let i;er(e)?i=e:(i=e.handler,n=e);const o=Qm(this),s=yR(a,i.bind(r),n);return o(),s}function MR(t,e){const n=e.split(".");return()=>{let r=t;for(let a=0;a<n.length&&r;a++)r=r[n[a]];return r}}const dQ=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${eu(e)}Modifiers`]||t[`${W1(e)}Modifiers`];function mQ(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||ra;let a=n;const i=e.startsWith("update:"),o=i&&dQ(r,e.slice(7));o&&(o.trim&&(a=n.map(u=>Oi(u)?u.trim():u)),o.number&&(a=n.map(qq)));let s,c=r[s=TD(e)]||r[s=TD(eu(e))];!c&&i&&(c=r[s=TD(W1(e))]),c&&q0(c,t,6,a);const l=r[s+"Once"];if(l){if(!t.emitted)t.emitted={};else if(t.emitted[s])return;t.emitted[s]=!0,q0(l,t,6,a)}}function _R(t,e,n=!1){const r=e.emitsCache,a=r.get(t);if(a!==void 0)return a;const i=t.emits;let o={},s=!1;if(!er(t)){const c=l=>{const u=_R(l,e,!0);u&&(s=!0,To(o,u))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!s?(li(t)&&r.set(t,null),null):(Yn(i)?i.forEach(c=>o[c]=null):To(o,i),li(t)&&r.set(t,o),o)}function XC(t,e){return!t||!$C(e)?!1:(e=e.slice(2).replace(/Once$/,""),Lr(t,e[0].toLowerCase()+e.slice(1))||Lr(t,W1(e))||Lr(t,e))}function PO(t){const{type:e,vnode:n,proxy:r,withProxy:a,propsOptions:[i],slots:o,attrs:s,emit:c,render:l,renderCache:u,props:f,data:v,setupState:g,ctx:d,inheritAttrs:m}=t,h=uS(t);let C,p;try{if(n.shapeFlag&4){const I=a||r,D=I;C=w0(l.call(D,I,u,f,g,v,d)),p=s}else{const I=e;C=w0(I.length>1?I(f,{attrs:s,slots:o,emit:c}):I(f,null)),p=e.props?s:hQ(s)}}catch(I){ud.length=0,QC(I,t,1),C=Vc(jd)}let S=C;if(p&&m!==!1){const I=Object.keys(p),{shapeFlag:D}=S;I.length&&D&7&&(i&&I.some(fM)&&(p=pQ(p,i)),S=av(S,p,!1,!0))}return n.dirs&&(S=av(S,null,!1,!0),S.dirs=S.dirs?S.dirs.concat(n.dirs):n.dirs),n.transition&&MM(S,n.transition),C=S,uS(h),C}const hQ=t=>{let e;for(const n in t)(n==="class"||n==="style"||$C(n))&&((e||(e={}))[n]=t[n]);return e},pQ=(t,e)=>{const n={};for(const r in t)(!fM(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function SQ(t,e,n){const{props:r,children:a,component:i}=t,{props:o,children:s,patchFlag:c}=e,l=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?AO(r,o,l):!!o;if(c&8){const u=e.dynamicProps;for(let f=0;f<u.length;f++){const v=u[f];if(o[v]!==r[v]&&!XC(l,v))return!0}}}else return(a||s)&&(!s||!s.$stable)?!0:r===o?!1:r?o?AO(r,o,l):!0:!!o;return!1}function AO(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let a=0;a<r.length;a++){const i=r[a];if(e[i]!==t[i]&&!XC(n,i))return!0}return!1}function CQ({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const OR=t=>t.__isSuspense;function IQ(t,e){e&&e.pendingBranch?Yn(t)?e.effects.push(...t):e.effects.push(t):Aj(t)}const Tc=Symbol.for("v-fgt"),YC=Symbol.for("v-txt"),jd=Symbol.for("v-cmt"),S2=Symbol.for("v-stc"),ud=[];let is=null;function wR(t=!1){ud.push(is=t?null:[])}function DQ(){ud.pop(),is=ud[ud.length-1]||null}let Qd=1;function xO(t,e=!1){Qd+=t,t<0&&is&&e&&(is.hasOnce=!0)}function EQ(t){return t.dynamicChildren=Qd>0?is||Ff:null,DQ(),Qd>0&&is&&is.push(t),t}function PR(t,e,n,r,a,i){return EQ(gS(t,e,n,r,a,i,!0))}function AR(t){return t?t.__v_isVNode===!0:!1}function cg(t,e){return t.type===e.type&&t.key===e.key}const xR=({key:t})=>t??null,C2=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Oi(t)||Do(t)||er(t)?{i:b0,r:t,k:e,f:!!n}:t:null);function gS(t,e=null,n=null,r=0,a=null,i=t===Tc?0:1,o=!1,s=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&xR(e),ref:e&&C2(e),scopeId:aR,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:a,dynamicChildren:null,appContext:null,ctx:b0};return s?(OM(c,n),i&128&&t.normalize(c)):n&&(c.shapeFlag|=Oi(n)?8:16),Qd>0&&!o&&is&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&is.push(c),c}const Vc=TQ;function TQ(t,e=null,n=null,r=0,a=null,i=!1){if((!t||t===zj)&&(t=jd),AR(t)){const s=av(t,e,!0);return n&&OM(s,n),Qd>0&&!i&&is&&(s.shapeFlag&6?is[is.indexOf(t)]=s:is.push(s)),s.patchFlag=-2,s}if(LQ(t)&&(t=t.__vccOpts),e){e=yQ(e);let{class:s,style:c}=e;s&&!Oi(s)&&(e.class=mM(s)),li(c)&&(TM(c)&&!Yn(c)&&(c=To({},c)),e.style=dM(c))}const o=Oi(t)?1:OR(t)?128:bj(t)?64:li(t)?4:er(t)?2:0;return gS(t,e,n,r,a,o,i,!0)}function yQ(t){return t?TM(t)||mR(t)?To({},t):t:null}function av(t,e,n=!1,r=!1){const{props:a,ref:i,patchFlag:o,children:s,transition:c}=t,l=e?OQ(a||{},e):a,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:l,key:l&&xR(l),ref:e&&e.ref?n&&i?Yn(i)?i.concat(C2(e)):[i,C2(e)]:C2(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:s,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Tc?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&av(t.ssContent),ssFallback:t.ssFallback&&av(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&r&&MM(u,c.clone(u)),u}function MQ(t=" ",e=0){return Vc(YC,null,t,e)}function _Q(t,e){const n=Vc(S2,null,t);return n.staticCount=e,n}function w0(t){return t==null||typeof t=="boolean"?Vc(jd):Yn(t)?Vc(Tc,null,t.slice()):AR(t)?yl(t):Vc(YC,null,String(t))}function yl(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:av(t)}function OM(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(Yn(e))n=16;else if(typeof e=="object")if(r&65){const a=e.default;a&&(a._c&&(a._d=!1),OM(t,a()),a._c&&(a._d=!0));return}else{n=32;const a=e._;!a&&!mR(e)?e._ctx=b0:a===3&&b0&&(b0.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else er(e)?(e={default:e,_ctx:b0},n=32):(e=String(e),r&64?(n=16,e=[MQ(e)]):n=8);t.children=e,t.shapeFlag|=n}function OQ(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const a in r)if(a==="class")e.class!==r.class&&(e.class=mM([e.class,r.class]));else if(a==="style")e.style=dM([e.style,r.style]);else if($C(a)){const i=e[a],o=r[a];o&&i!==o&&!(Yn(i)&&i.includes(o))&&(e[a]=i?[].concat(i,o):o)}else a!==""&&(e[a]=r[a])}return e}function S0(t,e,n,r=null){q0(t,e,7,[n,r])}const wQ=vR();let PQ=0;function AQ(t,e,n){const r=t.type,a=(e?e.appContext:t.appContext)||wQ,i={uid:PQ++,vnode:t,type:r,parent:e,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Jq(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(a.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:pR(r,a),emitsOptions:_R(r,a),emit:null,emitted:null,propsDefaults:ra,inheritAttrs:r.inheritAttrs,ctx:ra,data:ra,props:ra,attrs:ra,slots:ra,refs:ra,setupState:ra,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=mQ.bind(null,i),t.ce&&t.ce(i),i}let ho=null,dS,rT;{const t=jC(),e=(n,r)=>{let a;return(a=t[n])||(a=t[n]=[]),a.push(r),i=>{a.length>1?a.forEach(o=>o(i)):a[0](i)}};dS=e("__VUE_INSTANCE_SETTERS__",n=>ho=n),rT=e("__VUE_SSR_SETTERS__",n=>Kd=n)}const Qm=t=>{const e=ho;return dS(t),t.scope.on(),()=>{t.scope.off(),dS(e)}},RO=()=>{ho&&ho.scope.off(),dS(null)};function RR(t){return t.vnode.shapeFlag&4}let Kd=!1;function xQ(t,e=!1,n=!1){e&&rT(e);const{props:r,children:a}=t.vnode,i=RR(t);tQ(t,r,i,e),iQ(t,a,n);const o=i?RQ(t,e):void 0;return e&&rT(!1),o}function RQ(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,qj);const{setup:r}=n;if(r){lu();const a=t.setupContext=r.length>1?NQ(t):null,i=Qm(t),o=jm(r,t,0,[t.props,a]),s=bx(o);if(uu(),i(),(s||t.sp)&&!cd(t)&&iR(t),s){if(o.then(RO,RO),e)return o.then(c=>{bO(t,c)}).catch(c=>{QC(c,t,0)});t.asyncDep=o}else bO(t,o)}else bR(t)}function bO(t,e,n){er(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:li(e)&&(t.setupState=Jx(e)),bR(t)}function bR(t,e,n){const r=t.type;t.render||(t.render=r.render||U0);{const a=Qm(t);lu();try{jj(t)}finally{uu(),a()}}}const bQ={get(t,e){return Yi(t,"get",""),t[e]}};function NQ(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,bQ),slots:t.slots,emit:t.emit,expose:e}}function wM(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Jx(Ij(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in ld)return ld[n](t)},has(e,n){return n in e||n in ld}})):t.proxy}function LQ(t){return er(t)&&"__vccOpts"in t}const UQ=(t,e)=>yj(t,e,Kd),FQ="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let aT;const NO=typeof window<"u"&&window.trustedTypes;if(NO)try{aT=NO.createPolicy("vue",{createHTML:t=>t})}catch{}const NR=aT?t=>aT.createHTML(t):t=>t,VQ="http://www.w3.org/2000/svg",kQ="http://www.w3.org/1998/Math/MathML",Ic=typeof document<"u"?document:null,LO=Ic&&Ic.createElement("template"),GQ={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const a=e==="svg"?Ic.createElementNS(VQ,t):e==="mathml"?Ic.createElementNS(kQ,t):n?Ic.createElement(t,{is:n}):Ic.createElement(t);return t==="select"&&r&&r.multiple!=null&&a.setAttribute("multiple",r.multiple),a},createText:t=>Ic.createTextNode(t),createComment:t=>Ic.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Ic.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,a,i){const o=n?n.previousSibling:e.lastChild;if(a&&(a===i||a.nextSibling))for(;e.insertBefore(a.cloneNode(!0),n),!(a===i||!(a=a.nextSibling)););else{LO.innerHTML=NR(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const s=LO.content;if(r==="svg"||r==="mathml"){const c=s.firstChild;for(;c.firstChild;)s.appendChild(c.firstChild);s.removeChild(c)}e.insertBefore(s,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},BQ=Symbol("_vtc");function WQ(t,e,n){const r=t[BQ];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const UO=Symbol("_vod"),HQ=Symbol("_vsh"),$Q=Symbol(""),zQ=/(^|;)\s*display\s*:/;function qQ(t,e,n){const r=t.style,a=Oi(n);let i=!1;if(n&&!a){if(e)if(Oi(e))for(const o of e.split(";")){const s=o.slice(0,o.indexOf(":")).trim();n[s]==null&&I2(r,s,"")}else for(const o in e)n[o]==null&&I2(r,o,"");for(const o in n)o==="display"&&(i=!0),I2(r,o,n[o])}else if(a){if(e!==n){const o=r[$Q];o&&(n+=";"+o),r.cssText=n,i=zQ.test(n)}}else e&&t.removeAttribute("style");UO in t&&(t[UO]=i?r.display:"",t[HQ]&&(r.display="none"))}const FO=/\s*!important$/;function I2(t,e,n){if(Yn(n))n.forEach(r=>I2(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=jQ(t,e);FO.test(n)?t.setProperty(W1(r),n.replace(FO,""),"important"):t[r]=n}}const VO=["Webkit","Moz","ms"],xD={};function jQ(t,e){const n=xD[e];if(n)return n;let r=eu(e);if(r!=="filter"&&r in t)return xD[e]=r;r=Nx(r);for(let a=0;a<VO.length;a++){const i=VO[a]+r;if(i in t)return xD[e]=i}return e}const kO="http://www.w3.org/1999/xlink";function GO(t,e,n,r,a,i=Zq(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(kO,e.slice(6,e.length)):t.setAttributeNS(kO,e,n):n==null||i&&!Ux(n)?t.removeAttribute(e):t.setAttribute(e,i?"":Pv(n)?String(n):n)}function BO(t,e,n,r,a){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?NR(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const s=i==="OPTION"?t.getAttribute("value")||"":t.value,c=n==null?t.type==="checkbox"?"on":"":String(n);(s!==c||!("_value"in t))&&(t.value=c),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const s=typeof t[e];s==="boolean"?n=Ux(n):n==null&&s==="string"?(n="",o=!0):s==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(a||e)}function QQ(t,e,n,r){t.addEventListener(e,n,r)}function KQ(t,e,n,r){t.removeEventListener(e,n,r)}const WO=Symbol("_vei");function XQ(t,e,n,r,a=null){const i=t[WO]||(t[WO]={}),o=i[e];if(r&&o)o.value=r;else{const[s,c]=YQ(e);if(r){const l=i[e]=eK(r,a);QQ(t,s,l,c)}else o&&(KQ(t,s,o,c),i[e]=void 0)}}const HO=/(?:Once|Passive|Capture)$/;function YQ(t){let e;if(HO.test(t)){e={};let r;for(;r=t.match(HO);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):W1(t.slice(2)),e]}let RD=0;const ZQ=Promise.resolve(),JQ=()=>RD||(ZQ.then(()=>RD=0),RD=Date.now());function eK(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;q0(tK(r,n.value),e,5,[r])};return n.value=t,n.attached=JQ(),n}function tK(t,e){if(Yn(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>a=>!a._stopped&&r&&r(a))}else return e}const $O=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,nK=(t,e,n,r,a,i)=>{const o=a==="svg";e==="class"?WQ(t,r,o):e==="style"?qQ(t,n,r):$C(e)?fM(e)||XQ(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):rK(t,e,r,o))?(BO(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&GO(t,e,r,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Oi(r))?BO(t,eu(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),GO(t,e,r,o))};function rK(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&$O(e)&&er(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const a=t.tagName;if(a==="IMG"||a==="VIDEO"||a==="CANVAS"||a==="SOURCE")return!1}return $O(e)&&Oi(n)?!1:e in t}const aK=To({patchProp:nK},GQ);let zO;function iK(){return zO||(zO=sQ(aK))}const oK=(...t)=>{const e=iK().createApp(...t),{mount:n}=e;return e.mount=r=>{const a=cK(r);if(!a)return;const i=e._component;!er(i)&&!i.render&&!i.template&&(i.template=a.innerHTML),a.nodeType===1&&(a.textContent="");const o=n(a,!1,sK(a));return a instanceof Element&&(a.removeAttribute("v-cloak"),a.setAttribute("data-v-app","")),o},e};function sK(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function cK(t){return Oi(t)?document.querySelector(t):t}var vt;(function(t){t.ERROR_EVENT="CORNERSTONE_ERROR",t.CACHE_SIZE_EXCEEDED="CACHE_SIZE_EXCEEDED",t.IMAGE_LOAD_ERROR="IMAGE_LOAD_ERROR",t.CAMERA_MODIFIED="CORNERSTONE_CAMERA_MODIFIED",t.CAMERA_RESET="CORNERSTONE_CAMERA_RESET",t.VOI_MODIFIED="CORNERSTONE_VOI_MODIFIED",t.PRESET_MODIFIED="CORNERSTONE_VIEWPORT_RENDERING_PRESET_MODIFIED",t.DISPLAY_AREA_MODIFIED="CORNERSTONE_DISPLAY_AREA_MODIFIED",t.ELEMENT_DISABLED="CORNERSTONE_ELEMENT_DISABLED",t.ELEMENT_ENABLED="CORNERSTONE_ELEMENT_ENABLED",t.IMAGE_RENDERED="CORNERSTONE_IMAGE_RENDERED",t.IMAGE_VOLUME_MODIFIED="CORNERSTONE_IMAGE_VOLUME_MODIFIED",t.IMAGE_VOLUME_LOADING_COMPLETED="CORNERSTONE_IMAGE_VOLUME_LOADING_COMPLETED",t.IMAGE_LOADED="CORNERSTONE_IMAGE_LOADED",t.IMAGE_RETRIEVAL_STAGE="CORNERSTONE_IMAGE_RETRIEVAL_STAGE",t.IMAGE_LOAD_FAILED="CORNERSTONE_IMAGE_LOAD_FAILED",t.VOLUME_VIEWPORT_NEW_VOLUME="CORNERSTONE_VOLUME_VIEWPORT_NEW_VOLUME",t.VOLUME_LOADED="CORNERSTONE_VOLUME_LOADED",t.VOLUME_LOADED_FAILED="CORNERSTONE_VOLUME_LOADED_FAILED",t.IMAGE_CACHE_IMAGE_ADDED="CORNERSTONE_IMAGE_CACHE_IMAGE_ADDED",t.IMAGE_CACHE_IMAGE_REMOVED="CORNERSTONE_IMAGE_CACHE_IMAGE_REMOVED",t.VOLUME_CACHE_VOLUME_ADDED="CORNERSTONE_VOLUME_CACHE_VOLUME_ADDED",t.VOLUME_CACHE_VOLUME_REMOVED="CORNERSTONE_VOLUME_CACHE_VOLUME_REMOVED",t.STACK_NEW_IMAGE="CORNERSTONE_STACK_NEW_IMAGE",t.VOLUME_NEW_IMAGE="CORNERSTONE_VOLUME_NEW_IMAGE",t.PRE_STACK_NEW_IMAGE="CORNERSTONE_PRE_STACK_NEW_IMAGE",t.IMAGE_SPACING_CALIBRATED="CORNERSTONE_IMAGE_SPACING_CALIBRATED",t.VIEWPORT_NEW_IMAGE_SET="CORNERSTONE_VIEWPORT_NEW_IMAGE_SET",t.STACK_VIEWPORT_SCROLL="CORNERSTONE_STACK_VIEWPORT_SCROLL",t.STACK_SCROLL_OUT_OF_BOUNDS="STACK_SCROLL_OUT_OF_BOUNDS",t.GEOMETRY_CACHE_GEOMETRY_ADDED="CORNERSTONE_GEOMETRY_CACHE_GEOMETRY_ADDED",t.GEOMETRY_CACHE_GEOMETRY_REMOVED="CORNERSTONE_GEOMETRY_CACHE_GEOMETRY_REMOVED",t.VOLUME_VIEWPORT_SCROLL_OUT_OF_BOUNDS="VOLUME_VIEWPORT_SCROLL_OUT_OF_BOUNDS",t.VOLUME_VIEWPORT_SCROLL="VOLUME_VIEWPORT_SCROLL",t.CLIPPING_PLANES_UPDATED="CORNERSTONE_CLIPPING_PLANES_UPDATED",t.WEB_WORKER_PROGRESS="CORNERSTONE_WEB_WORKER_PROGRESS",t.COLORMAP_MODIFIED="CORNERSTONE_COLORMAP_MODIFIED",t.DYNAMIC_VOLUME_TIME_POINT_INDEX_CHANGED="DYNAMIC_VOLUME_TIME_POINT_INDEX_CHANGED",t.DYNAMIC_VOLUME_TIME_POINT_LOADED="DYNAMIC_VOLUME_TIME_POINT_LOADED",t.GEOMETRY_LOADED="GEOMETRY_LOADED",t.GEOMETRY_LOADED_FAILED="GEOMETRY_LOADED_FAILED"})(vt||(vt={}));var bn;(function(t){t.Interaction="interaction",t.Thumbnail="thumbnail",t.Prefetch="prefetch",t.Compute="compute"})(bn||(bn={}));var Kr;(function(t){t.STACK="stack",t.ORTHOGRAPHIC="orthographic",t.PERSPECTIVE="perspective",t.VOLUME_3D="volume3d",t.VIDEO="video",t.WHOLE_SLIDE="wholeSlide"})(Kr||(Kr={}));var iT;(function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR",t[t.FAST_LINEAR=2]="FAST_LINEAR"})(iT||(iT={}));const Yu=iT,D2={COMPOSITE_BLEND:0,MAXIMUM_INTENSITY_BLEND:1,MINIMUM_INTENSITY_BLEND:2,AVERAGE_INTENSITY_BLEND:3,ADDITIVE_INTENSITY_BLEND:4,RADON_TRANSFORM_BLEND:5,LABELMAP_EDGE_PROJECTION_BLEND:6},lK={OFF:0,NORMALIZED:1,RAW:2};var LR={BlendMode:D2,FilterMode:lK};const{BlendMode:lg}=LR;var oT;(function(t){t[t.COMPOSITE=lg.COMPOSITE_BLEND]="COMPOSITE",t[t.MAXIMUM_INTENSITY_BLEND=lg.MAXIMUM_INTENSITY_BLEND]="MAXIMUM_INTENSITY_BLEND",t[t.MINIMUM_INTENSITY_BLEND=lg.MINIMUM_INTENSITY_BLEND]="MINIMUM_INTENSITY_BLEND",t[t.AVERAGE_INTENSITY_BLEND=lg.AVERAGE_INTENSITY_BLEND]="AVERAGE_INTENSITY_BLEND",t[t.LABELMAP_EDGE_PROJECTION_BLEND=lg.LABELMAP_EDGE_PROJECTION_BLEND]="LABELMAP_EDGE_PROJECTION_BLEND"})(oT||(oT={}));const I1=oT;var sT;(function(t){t.AXIAL="axial",t.CORONAL="coronal",t.SAGITTAL="sagittal",t.ACQUISITION="acquisition"})(sT||(sT={}));const xl=sT;var cT;(function(t){t.CONTOUR="CONTOUR",t.SURFACE="SURFACE"})(cT||(cT={}));const D1=cT;var lT;(function(t){t.CLOSED_PLANAR="CLOSED_PLANAR",t.OPEN_PLANAR="OPEN_PLANAR"})(lT||(lT={}));const uK=lT;var So;(function(t){t.LINEAR="LINEAR",t.SAMPLED_SIGMOID="SIGMOID",t.LINEAR_EXACT="LINEAR_EXACT"})(So||(So={}));var uT;(function(t){t.SUM="SUM",t.AVERAGE="AVERAGE",t.SUBTRACT="SUBTRACT"})(uT||(uT={}));const fK=uT;var mS;(function(t){t.NOT_APPLICABLE="",t.ERMF="ERMF",t.USER="User",t.PROJECTION="Proj",t.REGION="Region",t.ERROR="Error",t.UNCALIBRATED="Uncalibrated"})(mS||(mS={}));var fT;(function(t){t.NO_DATA="noData",t.LOADING="loading",t.PRE_RENDER="preRender",t.RESIZE="resize",t.RENDERED="rendered"})(fT||(fT={}));const es=fT;var No;(function(t){t[t.FAR_REPLICATE=1]="FAR_REPLICATE",t[t.ADJACENT_REPLICATE=3]="ADJACENT_REPLICATE",t[t.SUBRESOLUTION=6]="SUBRESOLUTION",t[t.LOSSY=7]="LOSSY",t[t.FULL_RESOLUTION=8]="FULL_RESOLUTION"})(No||(No={}));var Xd;(function(t){t.FRAME="f",t.SECOND="s"})(Xd||(Xd={}));const vK=Object.freeze(Object.defineProperty({__proto__:null,get SpeedUnit(){return Xd}},Symbol.toStringTag,{value:"Module"}));var vT;(function(t){t.CALIBRATION="calibrationModule",t.CINE="cineModule",t.GENERAL_IMAGE="generalImageModule",t.GENERAL_SERIES="generalSeriesModule",t.GENERAL_STUDY="generalStudyModule",t.IMAGE_PIXEL="imagePixelModule",t.IMAGE_PLANE="imagePlaneModule",t.IMAGE_URL="imageUrlModule",t.MODALITY_LUT="modalityLutModule",t.MULTIFRAME="multiframeModule",t.NM_MULTIFRAME_GEOMETRY="nmMultiframeGeometryModule",t.OVERLAY_PLANE="overlayPlaneModule",t.PATIENT="patientModule",t.PATIENT_STUDY="patientStudyModule",t.PET_IMAGE="petImageModule",t.PET_ISOTOPE="petIsotopeModule",t.PET_SERIES="petSeriesModule",t.SOP_COMMON="sopCommonModule",t.ULTRASOUND_ENHANCED_REGION="ultrasoundEnhancedRegionModule",t.VOI_LUT="voiLutModule",t.WADO_WEB_CLIENT="wadoWebClient"})(vT||(vT={}));const po=vT;var Gf;(function(t){t.SUM="SUM",t.SUBTRACT="SUBTRACT",t.AVERAGE="AVERAGE"})(Gf||(Gf={}));var gT;(function(t){t.RLE="RLE",t.Volume="Volume"})(gT||(gT={}));const UR=gT,vs=Object.freeze(Object.defineProperty({__proto__:null,BlendModes:I1,CalibrationTypes:mS,ContourType:uK,DynamicOperatorType:fK,Events:vt,get GenerateImageType(){return Gf},GeometryType:D1,ImageQualityStatus:No,InterpolationType:Yu,MetadataModules:po,OrientationAxis:xl,RequestType:bn,VOILUTFunctionType:So,VideoEnums:vK,ViewportStatus:es,ViewportType:Kr,VoxelManagerEnum:UR},Symbol.toStringTag,{value:"Module"})),dT={hotIron:{name:"Hot Iron",numOfColors:256,colors:[[0,0,0,255],[2,0,0,255],[4,0,0,255],[6,0,0,255],[8,0,0,255],[10,0,0,255],[12,0,0,255],[14,0,0,255],[16,0,0,255],[18,0,0,255],[20,0,0,255],[22,0,0,255],[24,0,0,255],[26,0,0,255],[28,0,0,255],[30,0,0,255],[32,0,0,255],[34,0,0,255],[36,0,0,255],[38,0,0,255],[40,0,0,255],[42,0,0,255],[44,0,0,255],[46,0,0,255],[48,0,0,255],[50,0,0,255],[52,0,0,255],[54,0,0,255],[56,0,0,255],[58,0,0,255],[60,0,0,255],[62,0,0,255],[64,0,0,255],[66,0,0,255],[68,0,0,255],[70,0,0,255],[72,0,0,255],[74,0,0,255],[76,0,0,255],[78,0,0,255],[80,0,0,255],[82,0,0,255],[84,0,0,255],[86,0,0,255],[88,0,0,255],[90,0,0,255],[92,0,0,255],[94,0,0,255],[96,0,0,255],[98,0,0,255],[100,0,0,255],[102,0,0,255],[104,0,0,255],[106,0,0,255],[108,0,0,255],[110,0,0,255],[112,0,0,255],[114,0,0,255],[116,0,0,255],[118,0,0,255],[120,0,0,255],[122,0,0,255],[124,0,0,255],[126,0,0,255],[128,0,0,255],[130,0,0,255],[132,0,0,255],[134,0,0,255],[136,0,0,255],[138,0,0,255],[140,0,0,255],[142,0,0,255],[144,0,0,255],[146,0,0,255],[148,0,0,255],[150,0,0,255],[152,0,0,255],[154,0,0,255],[156,0,0,255],[158,0,0,255],[160,0,0,255],[162,0,0,255],[164,0,0,255],[166,0,0,255],[168,0,0,255],[170,0,0,255],[172,0,0,255],[174,0,0,255],[176,0,0,255],[178,0,0,255],[180,0,0,255],[182,0,0,255],[184,0,0,255],[186,0,0,255],[188,0,0,255],[190,0,0,255],[192,0,0,255],[194,0,0,255],[196,0,0,255],[198,0,0,255],[200,0,0,255],[202,0,0,255],[204,0,0,255],[206,0,0,255],[208,0,0,255],[210,0,0,255],[212,0,0,255],[214,0,0,255],[216,0,0,255],[218,0,0,255],[220,0,0,255],[222,0,0,255],[224,0,0,255],[226,0,0,255],[228,0,0,255],[230,0,0,255],[232,0,0,255],[234,0,0,255],[236,0,0,255],[238,0,0,255],[240,0,0,255],[242,0,0,255],[244,0,0,255],[246,0,0,255],[248,0,0,255],[250,0,0,255],[252,0,0,255],[254,0,0,255],[255,0,0,255],[255,2,0,255],[255,4,0,255],[255,6,0,255],[255,8,0,255],[255,10,0,255],[255,12,0,255],[255,14,0,255],[255,16,0,255],[255,18,0,255],[255,20,0,255],[255,22,0,255],[255,24,0,255],[255,26,0,255],[255,28,0,255],[255,30,0,255],[255,32,0,255],[255,34,0,255],[255,36,0,255],[255,38,0,255],[255,40,0,255],[255,42,0,255],[255,44,0,255],[255,46,0,255],[255,48,0,255],[255,50,0,255],[255,52,0,255],[255,54,0,255],[255,56,0,255],[255,58,0,255],[255,60,0,255],[255,62,0,255],[255,64,0,255],[255,66,0,255],[255,68,0,255],[255,70,0,255],[255,72,0,255],[255,74,0,255],[255,76,0,255],[255,78,0,255],[255,80,0,255],[255,82,0,255],[255,84,0,255],[255,86,0,255],[255,88,0,255],[255,90,0,255],[255,92,0,255],[255,94,0,255],[255,96,0,255],[255,98,0,255],[255,100,0,255],[255,102,0,255],[255,104,0,255],[255,106,0,255],[255,108,0,255],[255,110,0,255],[255,112,0,255],[255,114,0,255],[255,116,0,255],[255,118,0,255],[255,120,0,255],[255,122,0,255],[255,124,0,255],[255,126,0,255],[255,128,4,255],[255,130,8,255],[255,132,12,255],[255,134,16,255],[255,136,20,255],[255,138,24,255],[255,140,28,255],[255,142,32,255],[255,144,36,255],[255,146,40,255],[255,148,44,255],[255,150,48,255],[255,152,52,255],[255,154,56,255],[255,156,60,255],[255,158,64,255],[255,160,68,255],[255,162,72,255],[255,164,76,255],[255,166,80,255],[255,168,84,255],[255,170,88,255],[255,172,92,255],[255,174,96,255],[255,176,100,255],[255,178,104,255],[255,180,108,255],[255,182,112,255],[255,184,116,255],[255,186,120,255],[255,188,124,255],[255,190,128,255],[255,192,132,255],[255,194,136,255],[255,196,140,255],[255,198,144,255],[255,200,148,255],[255,202,152,255],[255,204,156,255],[255,206,160,255],[255,208,164,255],[255,210,168,255],[255,212,172,255],[255,214,176,255],[255,216,180,255],[255,218,184,255],[255,220,188,255],[255,222,192,255],[255,224,196,255],[255,226,200,255],[255,228,204,255],[255,230,208,255],[255,232,212,255],[255,234,216,255],[255,236,220,255],[255,238,224,255],[255,240,228,255],[255,242,232,255],[255,244,236,255],[255,246,240,255],[255,248,244,255],[255,250,248,255],[255,252,252,255],[255,255,255,255]]},pet:{name:"PET",numColors:256,colors:[[0,0,0,255],[0,2,1,255],[0,4,3,255],[0,6,5,255],[0,8,7,255],[0,10,9,255],[0,12,11,255],[0,14,13,255],[0,16,15,255],[0,18,17,255],[0,20,19,255],[0,22,21,255],[0,24,23,255],[0,26,25,255],[0,28,27,255],[0,30,29,255],[0,32,31,255],[0,34,33,255],[0,36,35,255],[0,38,37,255],[0,40,39,255],[0,42,41,255],[0,44,43,255],[0,46,45,255],[0,48,47,255],[0,50,49,255],[0,52,51,255],[0,54,53,255],[0,56,55,255],[0,58,57,255],[0,60,59,255],[0,62,61,255],[0,65,63,255],[0,67,65,255],[0,69,67,255],[0,71,69,255],[0,73,71,255],[0,75,73,255],[0,77,75,255],[0,79,77,255],[0,81,79,255],[0,83,81,255],[0,85,83,255],[0,87,85,255],[0,89,87,255],[0,91,89,255],[0,93,91,255],[0,95,93,255],[0,97,95,255],[0,99,97,255],[0,101,99,255],[0,103,101,255],[0,105,103,255],[0,107,105,255],[0,109,107,255],[0,111,109,255],[0,113,111,255],[0,115,113,255],[0,117,115,255],[0,119,117,255],[0,121,119,255],[0,123,121,255],[0,125,123,255],[0,128,125,255],[1,126,127,255],[3,124,129,255],[5,122,131,255],[7,120,133,255],[9,118,135,255],[11,116,137,255],[13,114,139,255],[15,112,141,255],[17,110,143,255],[19,108,145,255],[21,106,147,255],[23,104,149,255],[25,102,151,255],[27,100,153,255],[29,98,155,255],[31,96,157,255],[33,94,159,255],[35,92,161,255],[37,90,163,255],[39,88,165,255],[41,86,167,255],[43,84,169,255],[45,82,171,255],[47,80,173,255],[49,78,175,255],[51,76,177,255],[53,74,179,255],[55,72,181,255],[57,70,183,255],[59,68,185,255],[61,66,187,255],[63,64,189,255],[65,63,191,255],[67,61,193,255],[69,59,195,255],[71,57,197,255],[73,55,199,255],[75,53,201,255],[77,51,203,255],[79,49,205,255],[81,47,207,255],[83,45,209,255],[85,43,211,255],[86,41,213,255],[88,39,215,255],[90,37,217,255],[92,35,219,255],[94,33,221,255],[96,31,223,255],[98,29,225,255],[100,27,227,255],[102,25,229,255],[104,23,231,255],[106,21,233,255],[108,19,235,255],[110,17,237,255],[112,15,239,255],[114,13,241,255],[116,11,243,255],[118,9,245,255],[120,7,247,255],[122,5,249,255],[124,3,251,255],[126,1,253,255],[128,0,255,255],[130,2,252,255],[132,4,248,255],[134,6,244,255],[136,8,240,255],[138,10,236,255],[140,12,232,255],[142,14,228,255],[144,16,224,255],[146,18,220,255],[148,20,216,255],[150,22,212,255],[152,24,208,255],[154,26,204,255],[156,28,200,255],[158,30,196,255],[160,32,192,255],[162,34,188,255],[164,36,184,255],[166,38,180,255],[168,40,176,255],[170,42,172,255],[171,44,168,255],[173,46,164,255],[175,48,160,255],[177,50,156,255],[179,52,152,255],[181,54,148,255],[183,56,144,255],[185,58,140,255],[187,60,136,255],[189,62,132,255],[191,64,128,255],[193,66,124,255],[195,68,120,255],[197,70,116,255],[199,72,112,255],[201,74,108,255],[203,76,104,255],[205,78,100,255],[207,80,96,255],[209,82,92,255],[211,84,88,255],[213,86,84,255],[215,88,80,255],[217,90,76,255],[219,92,72,255],[221,94,68,255],[223,96,64,255],[225,98,60,255],[227,100,56,255],[229,102,52,255],[231,104,48,255],[233,106,44,255],[235,108,40,255],[237,110,36,255],[239,112,32,255],[241,114,28,255],[243,116,24,255],[245,118,20,255],[247,120,16,255],[249,122,12,255],[251,124,8,255],[253,126,4,255],[255,128,0,255],[255,130,4,255],[255,132,8,255],[255,134,12,255],[255,136,16,255],[255,138,20,255],[255,140,24,255],[255,142,28,255],[255,144,32,255],[255,146,36,255],[255,148,40,255],[255,150,44,255],[255,152,48,255],[255,154,52,255],[255,156,56,255],[255,158,60,255],[255,160,64,255],[255,162,68,255],[255,164,72,255],[255,166,76,255],[255,168,80,255],[255,170,85,255],[255,172,89,255],[255,174,93,255],[255,176,97,255],[255,178,101,255],[255,180,105,255],[255,182,109,255],[255,184,113,255],[255,186,117,255],[255,188,121,255],[255,190,125,255],[255,192,129,255],[255,194,133,255],[255,196,137,255],[255,198,141,255],[255,200,145,255],[255,202,149,255],[255,204,153,255],[255,206,157,255],[255,208,161,255],[255,210,165,255],[255,212,170,255],[255,214,174,255],[255,216,178,255],[255,218,182,255],[255,220,186,255],[255,222,190,255],[255,224,194,255],[255,226,198,255],[255,228,202,255],[255,230,206,255],[255,232,210,255],[255,234,214,255],[255,236,218,255],[255,238,222,255],[255,240,226,255],[255,242,230,255],[255,244,234,255],[255,246,238,255],[255,248,242,255],[255,250,246,255],[255,252,250,255],[255,255,255,255]]},hotMetalBlue:{name:"Hot Metal Blue",numColors:256,colors:[[0,0,0,255],[0,0,2,255],[0,0,4,255],[0,0,6,255],[0,0,8,255],[0,0,10,255],[0,0,12,255],[0,0,14,255],[0,0,16,255],[0,0,17,255],[0,0,19,255],[0,0,21,255],[0,0,23,255],[0,0,25,255],[0,0,27,255],[0,0,29,255],[0,0,31,255],[0,0,33,255],[0,0,35,255],[0,0,37,255],[0,0,39,255],[0,0,41,255],[0,0,43,255],[0,0,45,255],[0,0,47,255],[0,0,49,255],[0,0,51,255],[0,0,53,255],[0,0,55,255],[0,0,57,255],[0,0,59,255],[0,0,61,255],[0,0,63,255],[0,0,65,255],[0,0,67,255],[0,0,69,255],[0,0,71,255],[0,0,73,255],[0,0,75,255],[0,0,77,255],[0,0,79,255],[0,0,81,255],[0,0,83,255],[0,0,84,255],[0,0,86,255],[0,0,88,255],[0,0,90,255],[0,0,92,255],[0,0,94,255],[0,0,96,255],[0,0,98,255],[0,0,100,255],[0,0,102,255],[0,0,104,255],[0,0,106,255],[0,0,108,255],[0,0,110,255],[0,0,112,255],[0,0,114,255],[0,0,116,255],[0,0,117,255],[0,0,119,255],[0,0,121,255],[0,0,123,255],[0,0,125,255],[0,0,127,255],[0,0,129,255],[0,0,131,255],[0,0,133,255],[0,0,135,255],[0,0,137,255],[0,0,139,255],[0,0,141,255],[0,0,143,255],[0,0,145,255],[0,0,147,255],[0,0,149,255],[0,0,151,255],[0,0,153,255],[0,0,155,255],[0,0,157,255],[0,0,159,255],[0,0,161,255],[0,0,163,255],[0,0,165,255],[0,0,167,255],[3,0,169,255],[6,0,171,255],[9,0,173,255],[12,0,175,255],[15,0,177,255],[18,0,179,255],[21,0,181,255],[24,0,183,255],[26,0,184,255],[29,0,186,255],[32,0,188,255],[35,0,190,255],[38,0,192,255],[41,0,194,255],[44,0,196,255],[47,0,198,255],[50,0,200,255],[52,0,197,255],[55,0,194,255],[57,0,191,255],[59,0,188,255],[62,0,185,255],[64,0,182,255],[66,0,179,255],[69,0,176,255],[71,0,174,255],[74,0,171,255],[76,0,168,255],[78,0,165,255],[81,0,162,255],[83,0,159,255],[85,0,156,255],[88,0,153,255],[90,0,150,255],[93,2,144,255],[96,4,138,255],[99,6,132,255],[102,8,126,255],[105,9,121,255],[108,11,115,255],[111,13,109,255],[114,15,103,255],[116,17,97,255],[119,19,91,255],[122,21,85,255],[125,23,79,255],[128,24,74,255],[131,26,68,255],[134,28,62,255],[137,30,56,255],[140,32,50,255],[143,34,47,255],[146,36,44,255],[149,38,41,255],[152,40,38,255],[155,41,35,255],[158,43,32,255],[161,45,29,255],[164,47,26,255],[166,49,24,255],[169,51,21,255],[172,53,18,255],[175,55,15,255],[178,56,12,255],[181,58,9,255],[184,60,6,255],[187,62,3,255],[190,64,0,255],[194,66,0,255],[198,68,0,255],[201,70,0,255],[205,72,0,255],[209,73,0,255],[213,75,0,255],[217,77,0,255],[221,79,0,255],[224,81,0,255],[228,83,0,255],[232,85,0,255],[236,87,0,255],[240,88,0,255],[244,90,0,255],[247,92,0,255],[251,94,0,255],[255,96,0,255],[255,98,3,255],[255,100,6,255],[255,102,9,255],[255,104,12,255],[255,105,15,255],[255,107,18,255],[255,109,21,255],[255,111,24,255],[255,113,26,255],[255,115,29,255],[255,117,32,255],[255,119,35,255],[255,120,38,255],[255,122,41,255],[255,124,44,255],[255,126,47,255],[255,128,50,255],[255,130,53,255],[255,132,56,255],[255,134,59,255],[255,136,62,255],[255,137,65,255],[255,139,68,255],[255,141,71,255],[255,143,74,255],[255,145,76,255],[255,147,79,255],[255,149,82,255],[255,151,85,255],[255,152,88,255],[255,154,91,255],[255,156,94,255],[255,158,97,255],[255,160,100,255],[255,162,103,255],[255,164,106,255],[255,166,109,255],[255,168,112,255],[255,169,115,255],[255,171,118,255],[255,173,121,255],[255,175,124,255],[255,177,126,255],[255,179,129,255],[255,181,132,255],[255,183,135,255],[255,184,138,255],[255,186,141,255],[255,188,144,255],[255,190,147,255],[255,192,150,255],[255,194,153,255],[255,196,156,255],[255,198,159,255],[255,200,162,255],[255,201,165,255],[255,203,168,255],[255,205,171,255],[255,207,174,255],[255,209,176,255],[255,211,179,255],[255,213,182,255],[255,215,185,255],[255,216,188,255],[255,218,191,255],[255,220,194,255],[255,222,197,255],[255,224,200,255],[255,226,203,255],[255,228,206,255],[255,229,210,255],[255,231,213,255],[255,233,216,255],[255,235,219,255],[255,237,223,255],[255,239,226,255],[255,240,229,255],[255,242,232,255],[255,244,236,255],[255,246,239,255],[255,248,242,255],[255,250,245,255],[255,251,249,255],[255,253,252,255],[255,255,255,255]]},pet20Step:{name:"PET 20 Step",numColors:256,colors:[[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255]]},gray:{name:"Gray",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[1,1,1]],green:[[0,0,0],[1,1,1]],blue:[[0,0,0],[1,1,1]]}},jet:{name:"Jet",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[.35,0,0],[.66,1,1],[.89,1,1],[1,.5,.5]],green:[[0,0,0],[.125,0,0],[.375,1,1],[.64,1,1],[.91,0,0],[1,0,0]],blue:[[0,.5,.5],[.11,1,1],[.34,1,1],[.65,0,0],[1,0,0]]}},hsv:{name:"HSV",numColors:256,gamma:1,segmentedData:{red:[[0,1,1],[.15873,1,1],[.174603,.96875,.96875],[.333333,.03125,.03125],[.349206,0,0],[.666667,0,0],[.68254,.03125,.03125],[.84127,.96875,.96875],[.857143,1,1],[1,1,1]],green:[[0,0,0],[.15873,.9375,.9375],[.174603,1,1],[.507937,1,1],[.666667,.0625,.0625],[.68254,0,0],[1,0,0]],blue:[[0,0,0],[.333333,0,0],[.349206,.0625,.0625],[.507937,1,1],[.84127,1,1],[.857143,.9375,.9375],[1,.09375,.09375]]}},hot:{name:"Hot",numColors:256,gamma:1,segmentedData:{red:[[0,.0416,.0416],[.365079,1,1],[1,1,1]],green:[[0,0,0],[.365079,0,0],[.746032,1,1],[1,1,1]],blue:[[0,0,0],[.746032,0,0],[1,1,1]]}},cool:{name:"Cool",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[1,1,1]],green:[[0,1,1],[1,0,0]],blue:[[0,1,1],[1,1,1]]}},spring:{name:"Spring",numColors:256,gamma:1,segmentedData:{red:[[0,1,1],[1,1,1]],green:[[0,0,0],[1,1,1]],blue:[[0,1,1],[1,0,0]]}},summer:{name:"Summer",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[1,1,1]],green:[[0,.5,.5],[1,1,1]],blue:[[0,.4,.4],[1,.4,.4]]}},autumn:{name:"Autumn",numColors:256,gamma:1,segmentedData:{red:[[0,1,1],[1,1,1]],green:[[0,0,0],[1,1,1]],blue:[[0,0,0],[1,0,0]]}},winter:{name:"Winter",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[1,0,0]],green:[[0,0,0],[1,1,1]],blue:[[0,1,1],[1,.5,.5]]}},bone:{name:"Bone",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[.746032,.652778,.652778],[1,1,1]],green:[[0,0,0],[.365079,.319444,.319444],[.746032,.777778,.777778],[1,1,1]],blue:[[0,0,0],[.365079,.444444,.444444],[1,1,1]]}},copper:{name:"Copper",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[.809524,1,1],[1,1,1]],green:[[0,0,0],[1,.7812,.7812]],blue:[[0,0,0],[1,.4975,.4975]]}},spectral:{name:"Spectral",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[.05,.4667,.4667],[.1,.5333,.5333],[.15,0,0],[.2,0,0],[.25,0,0],[.3,0,0],[.35,0,0],[.4,0,0],[.45,0,0],[.5,0,0],[.55,0,0],[.6,0,0],[.65,.7333,.7333],[.7,.9333,.9333],[.75,1,1],[.8,1,1],[.85,1,1],[.9,.8667,.8667],[.95,.8,.8],[1,.8,.8]],green:[[0,0,0],[.05,0,0],[.1,0,0],[.15,0,0],[.2,0,0],[.25,.4667,.4667],[.3,.6,.6],[.35,.6667,.6667],[.4,.6667,.6667],[.45,.6,.6],[.5,.7333,.7333],[.55,.8667,.8667],[.6,1,1],[.65,1,1],[.7,.9333,.9333],[.75,.8,.8],[.8,.6,.6],[.85,0,0],[.9,0,0],[.95,0,0],[1,.8,.8]],blue:[[0,0,0],[.05,.5333,.5333],[.1,.6,.6],[.15,.6667,.6667],[.2,.8667,.8667],[.25,.8667,.8667],[.3,.8667,.8667],[.35,.6667,.6667],[.4,.5333,.5333],[.45,0,0],[.5,0,0],[.55,0,0],[.6,0,0],[.65,0,0],[.7,0,0],[.75,0,0],[.8,0,0],[.85,0,0],[.9,0,0],[.95,0,0],[1,.8,.8]]}},coolwarm:{name:"CoolWarm",numColors:256,gamma:1,segmentedData:{red:[[0,.2298057,.2298057],[.03125,.26623388,.26623388],[.0625,.30386891,.30386891],[.09375,.342804478,.342804478],[.125,.38301334,.38301334],[.15625,.424369608,.424369608],[.1875,.46666708,.46666708],[.21875,.509635204,.509635204],[.25,.552953156,.552953156],[.28125,.596262162,.596262162],[.3125,.639176211,.639176211],[.34375,.681291281,.681291281],[.375,.722193294,.722193294],[.40625,.761464949,.761464949],[.4375,.798691636,.798691636],[.46875,.833466556,.833466556],[.5,.865395197,.865395197],[.53125,.897787179,.897787179],[.5625,.924127593,.924127593],[.59375,.944468518,.944468518],[.625,.958852946,.958852946],[.65625,.96732803,.96732803],[.6875,.969954137,.969954137],[.71875,.966811177,.966811177],[.75,.958003065,.958003065],[.78125,.943660866,.943660866],[.8125,.923944917,.923944917],[.84375,.89904617,.89904617],[.875,.869186849,.869186849],[.90625,.834620542,.834620542],[.9375,.795631745,.795631745],[.96875,.752534934,.752534934],[1,.705673158,.705673158]],green:[[0,.298717966,.298717966],[.03125,.353094838,.353094838],[.0625,.406535296,.406535296],[.09375,.458757618,.458757618],[.125,.50941904,.50941904],[.15625,.558148092,.558148092],[.1875,.604562568,.604562568],[.21875,.648280772,.648280772],[.25,.688929332,.688929332],[.28125,.726149107,.726149107],[.3125,.759599947,.759599947],[.34375,.788964712,.788964712],[.375,.813952739,.813952739],[.40625,.834302879,.834302879],[.4375,.849786142,.849786142],[.46875,.860207984,.860207984],[.5,.86541021,.86541021],[.53125,.848937047,.848937047],[.5625,.827384882,.827384882],[.59375,.800927443,.800927443],[.625,.769767752,.769767752],[.65625,.734132809,.734132809],[.6875,.694266682,.694266682],[.71875,.650421156,.650421156],[.75,.602842431,.602842431],[.78125,.551750968,.551750968],[.8125,.49730856,.49730856],[.84375,.439559467,.439559467],[.875,.378313092,.378313092],[.90625,.312874446,.312874446],[.9375,.24128379,.24128379],[.96875,.157246067,.157246067],[1,.01555616,.01555616]],blue:[[0,.753683153,.753683153],[.03125,.801466763,.801466763],[.0625,.84495867,.84495867],[.09375,.883725899,.883725899],[.125,.917387822,.917387822],[.15625,.945619588,.945619588],[.1875,.968154911,.968154911],[.21875,.98478814,.98478814],[.25,.995375608,.995375608],[.28125,.999836203,.999836203],[.3125,.998151185,.998151185],[.34375,.990363227,.990363227],[.375,.976574709,.976574709],[.40625,.956945269,.956945269],[.4375,.931688648,.931688648],[.46875,.901068838,.901068838],[.5,.865395561,.865395561],[.53125,.820880546,.820880546],[.5625,.774508472,.774508472],[.59375,.726736146,.726736146],[.625,.678007945,.678007945],[.65625,.628751763,.628751763],[.6875,.579375448,.579375448],[.71875,.530263762,.530263762],[.75,.481775914,.481775914],[.78125,.434243684,.434243684],[.8125,.387970225,.387970225],[.84375,.343229596,.343229596],[.875,.300267182,.300267182],[.90625,.259301199,.259301199],[.9375,.220525627,.220525627],[.96875,.184115123,.184115123],[1,.150232812,.150232812]]}},blues:{name:"Blues",numColors:256,gamma:1,segmentedData:{red:[[0,.9686274528503418,.9686274528503418],[.125,.8705882430076599,.8705882430076599],[.25,.7764706015586853,.7764706015586853],[.375,.6196078658103943,.6196078658103943],[.5,.41960784792900085,.41960784792900085],[.625,.25882354378700256,.25882354378700256],[.75,.12941177189350128,.12941177189350128],[.875,.0313725508749485,.0313725508749485],[1,.0313725508749485,.0313725508749485]],green:[[0,.9843137264251709,.9843137264251709],[.125,.9215686321258545,.9215686321258545],[.25,.8588235378265381,.8588235378265381],[.375,.7921568751335144,.7921568751335144],[.5,.6823529601097107,.6823529601097107],[.625,.572549045085907,.572549045085907],[.75,.4431372582912445,.4431372582912445],[.875,.3176470696926117,.3176470696926117],[1,.1882352977991104,.1882352977991104]],blue:[[0,1,1],[.125,.9686274528503418,.9686274528503418],[.25,.9372549057006836,.9372549057006836],[.375,.8823529481887817,.8823529481887817],[.5,.8392156958580017,.8392156958580017],[.625,.7764706015586853,.7764706015586853],[.75,.7098039388656616,.7098039388656616],[.875,.6117647290229797,.6117647290229797],[1,.41960784792900085,.41960784792900085]]}}},wa={MINIMUM_SLAB_THICKNESS:.05,MAXIMUM_RAY_DISTANCE:1e6};Object.freeze(wa);const o0=.001;function FR(t){const e=Object.getOwnPropertyNames(t);for(const n of e){const r=t[n];r&&typeof r=="object"&&FR(r)}return Object.freeze(t)}const gK={axial:{viewPlaneNormal:[0,0,-1],viewUp:[0,-1,0],viewRight:[1,0,0]},sagittal:{viewPlaneNormal:[1,0,0],viewUp:[0,0,1],viewRight:[0,1,0]},coronal:{viewPlaneNormal:[0,-1,0],viewUp:[0,0,1],viewRight:[1,0,0]}},Rl=FR(gK),VR=[{name:"CT-AAA",gradientOpacity:"4 0 1 255 1",specularPower:"10",scalarOpacity:"12 -3024 0 143.556 0 166.222 0.686275 214.389 0.696078 419.736 0.833333 3071 0.803922",specular:"0.2",shade:"1",ambient:"0.1",colorTransfer:"24 -3024 0 0 0 143.556 0.615686 0.356863 0.184314 166.222 0.882353 0.603922 0.290196 214.389 1 1 1 419.736 1 0.937033 0.954531 3071 0.827451 0.658824 1",diffuse:"0.9",interpolation:"1"},{name:"CT-AAA2",gradientOpacity:"4 0 1 255 1",specularPower:"10",scalarOpacity:"16 -3024 0 129.542 0 145.244 0.166667 157.02 0.5 169.918 0.627451 395.575 0.8125 1578.73 0.8125 3071 0.8125",specular:"0.2",shade:"1",ambient:"0.1",colorTransfer:"32 -3024 0 0 0 129.542 0.54902 0.25098 0.14902 145.244 0.6 0.627451 0.843137 157.02 0.890196 0.47451 0.6 169.918 0.992157 0.870588 0.392157 395.575 1 0.886275 0.658824 1578.73 1 0.829256 0.957922 3071 0.827451 0.658824 1",diffuse:"0.9",interpolation:"1"},{name:"CT-Bone",gradientOpacity:"4 0 1 255 1",specularPower:"10",scalarOpacity:"8 -3024 0 -16.4458 0 641.385 0.715686 3071 0.705882",specular:"0.2",shade:"1",ambient:"0.1",colorTransfer:"16 -3024 0 0 0 -16.4458 0.729412 0.254902 0.301961 641.385 0.905882 0.815686 0.552941 3071 1 1 1",diffuse:"0.9",interpolation:"1"},{name:"CT-Bones",gradientOpacity:"4 0 1 985.12 1",specularPower:"1",scalarOpacity:"8 -1000 0 152.19 0 278.93 0.190476 952 0.2",specular:"0",shade:"1",ambient:"0.2",colorTransfer:"20 -1000 0.3 0.3 1 -488 0.3 1 0.3 463.28 1 0 0 659.15 1 0.912535 0.0374849 953 1 0.3 0.3",diffuse:"1",interpolation:"1"},{name:"CT-Cardiac",gradientOpacity:"4 0 1 255 1",specularPower:"10",scalarOpacity:"12 -3024 0 -77.6875 0 94.9518 0.285714 179.052 0.553571 260.439 0.848214 3071 0.875",specular:"0.2",shade:"1",ambient:"0.1",colorTransfer:"24 -3024 0 0 0 -77.6875 0.54902 0.25098 0.14902 94.9518 0.882353 0.603922 0.290196 179.052 1 0.937033 0.954531 260.439 0.615686 0 0 3071 0.827451 0.658824 1",diffuse:"0.9",interpolation:"1"},{name:"CT-Cardiac2",gradientOpacity:"4 0 1 255 1",specularPower:"10",scalarOpacity:"12 -3024 0 42.8964 0 163.488 0.428571 277.642 0.776786 1587 0.754902 3071 0.754902",specular:"0.2",shade:"1",ambient:"0.1",colorTransfer:"24 -3024 0 0 0 42.8964 0.54902 0.25098 0.14902 163.488 0.917647 0.639216 0.0588235 277.642 1 0.878431 0.623529 1587 1 1 1 3071 0.827451 0.658824 1",diffuse:"0.9",interpolation:"1"},{name:"CT-Cardiac3",gradientOpacity:"4 0 1 255 1",specularPower:"10",scalarOpacity:"14 -3024 0 -86.9767 0 45.3791 0.169643 139.919 0.589286 347.907 0.607143 1224.16 0.607143 3071 0.616071",specular:"0.2",shade:"1",ambient:"0.1",colorTransfer:"28 -3024 0 0 0 -86.9767 0 0.25098 1 45.3791 1 0 0 139.919 1 0.894893 0.894893 347.907 1 1 0.25098 1224.16 1 1 1 3071 0.827451 0.658824 1",diffuse:"0.9",interpolation:"1"},{name:"CT-Chest-Contrast-Enhanced",gradientOpacity:"4 0 1 255 1",specularPower:"10",scalarOpacity:"10 -3024 0 67.0106 0 251.105 0.446429 439.291 0.625 3071 0.616071",specular:"0.2",shade:"1",ambient:"0.1",colorTransfer:"20 -3024 0 0 0 67.0106 0.54902 0.25098 0.14902 251.105 0.882353 0.603922 0.290196 439.291 1 0.937033 0.954531 3071 0.827451 0.658824 1",diffuse:"0.9",interpolation:"1"},{name:"CT-Chest-Vessels",gradientOpacity:"4 0 1 255 1",specularPower:"1",scalarOpacity:"10 -3024 0 -1278.35 0 22.8277 0.428571 439.291 0.625 3071 0.616071",specular:"0",shade:"1",ambient:"0.2",colorTransfer:"20 -3024 0 0 0 -1278.35 0.54902 0.25098 0.14902 22.8277 0.882353 0.603922 0.290196 439.291 1 0.937033 0.954531 3071 0.827451 0.658824 1",diffuse:"1",interpolation:"1"},{name:"CT-Coronary-Arteries",gradientOpacity:"4 0 1 255 1",specularPower:"1",scalarOpacity:"12 -2048 0 136.47 0 159.215 0.258929 318.43 0.571429 478.693 0.776786 3661 1",specular:"0",shade:"0",ambient:"0.2",colorTransfer:"24 -2048 0 0 0 136.47 0 0 0 159.215 0.159804 0.159804 0.159804 318.43 0.764706 0.764706 0.764706 478.693 1 1 1 3661 1 1 1",diffuse:"1",interpolation:"1"},{name:"CT-Coronary-Arteries-2",gradientOpacity:"4 0 1 255 1",specularPower:"1",scalarOpacity:"14 -2048 0 142.677 0 145.016 0.116071 192.174 0.5625 217.24 0.776786 384.347 0.830357 3661 0.830357",specular:"0",shade:"1",ambient:"0.2",colorTransfer:"28 -2048 0 0 0 142.677 0 0 0 145.016 0.615686 0 0.0156863 192.174 0.909804 0.454902 0 217.24 0.972549 0.807843 0.611765 384.347 0.909804 0.909804 1 3661 1 1 1",diffuse:"1",interpolation:"1"},{name:"CT-Coronary-Arteries-3",gradientOpacity:"4 0 1 255 1",specularPower:"10",scalarOpacity:"14 -2048 0 128.643 0 129.982 0.0982143 173.636 0.669643 255.884 0.857143 584.878 0.866071 3661 1",specular:"0.2",shade:"1",ambient:"0.1",colorTransfer:"28 -2048 0 0 0 128.643 0 0 0 129.982 0.615686 0 0.0156863 173.636 0.909804 0.454902 0 255.884 0.886275 0.886275 0.886275 584.878 0.968627 0.968627 0.968627 3661 1 1 1",diffuse:"0.9",interpolation:"1"},{name:"CT-Cropped-Volume-Bone",gradientOpacity:"4 0 1 255 1",specularPower:"1",scalarOpacity:"10 -2048 0 -451 0 -450 1 1050 1 3661 1",specular:"0",shade:"0",ambient:"0.2",colorTransfer:"20 -2048 0 0 0 -451 0 0 0 -450 0.0556356 0.0556356 0.0556356 1050 1 1 1 3661 1 1 1",diffuse:"1",interpolation:"1"},{name:"CT-Fat",gradientOpacity:"6 0 1 985.12 1 988 1",specularPower:"1",scalarOpacity:"14 -1000 0 -100 0 -99 0.15 -60 0.15 -59 0 101.2 0 952 0",specular:"0",shade:"0",ambient:"0.2",colorTransfer:"36 -1000 0.3 0.3 1 -497.5 0.3 1 0.3 -99 0 0 1 -76.946 0 1 0 -65.481 0.835431 0.888889 0.0165387 83.89 1 0 0 463.28 1 0 0 659.15 1 0.912535 0.0374849 2952 1 0.300267 0.299886",diffuse:"1",interpolation:"1"},{name:"CT-Liver-Vasculature",gradientOpacity:"4 0 1 255 1",specularPower:"1",scalarOpacity:"14 -2048 0 149.113 0 157.884 0.482143 339.96 0.660714 388.526 0.830357 1197.95 0.839286 3661 0.848214",specular:"0",shade:"0",ambient:"0.2",colorTransfer:"28 -2048 0 0 0 149.113 0 0 0 157.884 0.501961 0.25098 0 339.96 0.695386 0.59603 0.36886 388.526 0.854902 0.85098 0.827451 1197.95 1 1 1 3661 1 1 1",diffuse:"1",interpolation:"1"},{name:"CT-Lung",gradientOpacity:"6 0 1 985.12 1 988 1",specularPower:"1",scalarOpacity:"12 -1000 0 -600 0 -599 0.15 -400 0.15 -399 0 2952 0",specular:"0",shade:"1",ambient:"0.2",colorTransfer:"24 -1000 0.3 0.3 1 -600 0 0 1 -530 0.134704 0.781726 0.0724558 -460 0.929244 1 0.109473 -400 0.888889 0.254949 0.0240258 2952 1 0.3 0.3",diffuse:"1",interpolation:"1"},{name:"CT-MIP",gradientOpacity:"4 0 1 255 1",specularPower:"10",scalarOpacity:"8 -3024 0 -637.62 0 700 1 3071 1",specular:"0.2",shade:"1",ambient:"0.1",colorTransfer:"16 -3024 0 0 0 -637.62 1 1 1 700 1 1 1 3071 1 1 1",diffuse:"0.9",interpolation:"1"},{name:"CT-Muscle",gradientOpacity:"4 0 1 255 1",specularPower:"10",scalarOpacity:"10 -3024 0 -155.407 0 217.641 0.676471 419.736 0.833333 3071 0.803922",specular:"0.2",shade:"1",ambient:"0.1",colorTransfer:"20 -3024 0 0 0 -155.407 0.54902 0.25098 0.14902 217.641 0.882353 0.603922 0.290196 419.736 1 0.937033 0.954531 3071 0.827451 0.658824 1",diffuse:"0.9",interpolation:"1"},{name:"CT-Pulmonary-Arteries",gradientOpacity:"4 0 1 255 1",specularPower:"1",scalarOpacity:"14 -2048 0 -568.625 0 -364.081 0.0714286 -244.813 0.401786 18.2775 0.607143 447.798 0.830357 3592.73 0.839286",specular:"0",shade:"1",ambient:"0.2",colorTransfer:"28 -2048 0 0 0 -568.625 0 0 0 -364.081 0.396078 0.301961 0.180392 -244.813 0.611765 0.352941 0.0705882 18.2775 0.843137 0.0156863 0.156863 447.798 0.752941 0.752941 0.752941 3592.73 1 1 1",diffuse:"1",interpolation:"1"},{name:"CT-Soft-Tissue",gradientOpacity:"4 0 1 255 1",specularPower:"1",scalarOpacity:"10 -2048 0 -167.01 0 -160 1 240 1 3661 1",specular:"0",shade:"0",ambient:"0.2",colorTransfer:"20 -2048 0 0 0 -167.01 0 0 0 -160 0.0556356 0.0556356 0.0556356 240 1 1 1 3661 1 1 1",diffuse:"1",interpolation:"1"},{name:"CT-Air",gradientOpacity:"4 0 1 255 1",specularPower:"10",scalarOpacity:"8 -3024 0.705882 -900.0 0.715686 -500.0 0 3071 0",specular:"0.2",shade:"1",ambient:"0.1",colorTransfer:"16 -3024 1 1 1 -900.0 0.2 1.0 1.0 -500.0 0.3 0.3 1.0 3071 0 0 0 ",diffuse:"0.9",interpolation:"1"},{name:"MR-Angio",gradientOpacity:"4 0 1 255 1",specularPower:"1",scalarOpacity:"12 -2048 0 151.354 0 158.279 0.4375 190.112 0.580357 200.873 0.732143 3661 0.741071",specular:"0",shade:"1",ambient:"0.2",colorTransfer:"24 -2048 0 0 0 151.354 0 0 0 158.279 0.74902 0.376471 0 190.112 1 0.866667 0.733333 200.873 0.937255 0.937255 0.937255 3661 1 1 1",diffuse:"1",interpolation:"1"},{name:"MR-Default",gradientOpacity:"4 0 1 255 1",specularPower:"1",scalarOpacity:"12 0 0 20 0 40 0.15 120 0.3 220 0.375 1024 0.5",specular:"0",shade:"1",ambient:"0.2",colorTransfer:"24 0 0 0 0 20 0.168627 0 0 40 0.403922 0.145098 0.0784314 120 0.780392 0.607843 0.380392 220 0.847059 0.835294 0.788235 1024 1 1 1",diffuse:"1",interpolation:"1"},{name:"MR-MIP",gradientOpacity:"4 0 1 255 1",specularPower:"1",scalarOpacity:"8 0 0 98.3725 0 416.637 1 2800 1",specular:"0",shade:"0",ambient:"0.2",colorTransfer:"16 0 1 1 1 98.3725 1 1 1 416.637 1 1 1 2800 1 1 1",diffuse:"1",interpolation:"1"},{name:"MR-T2-Brain",gradientOpacity:"4 0 1 160.25 1",specularPower:"40",scalarOpacity:"10 0 0 36.05 0 218.302 0.171429 412.406 1 641 1",specular:"0.5",shade:"1",ambient:"0.3",colorTransfer:"16 0 0 0 0 98.7223 0.956863 0.839216 0.192157 412.406 0 0.592157 0.807843 641 1 1 1",diffuse:"0.6",interpolation:"1"},{name:"DTI-FA-Brain",gradientOpacity:"4 0 1 0.9950 1",specularPower:"40",scalarOpacity:"16 0 0 0 0 0.3501 0.0158 0.49379 0.7619 0.6419 1 0.9920 1 0.9950 0 0.9950 0",specular:"0.5",shade:"1",ambient:"0.3",colorTransfer:"28 0 1 0 0 0 1 0 0 0.24974 0.4941 1 0 0.49949 0 0.9882 1 0.7492 0.51764 0 1 0.9950 1 0 0 0.9950 1 0 0",diffuse:"0.9",interpolation:"1"}],kR={slicer3D:[160/255,164/255,217/255]},fu=Object.freeze(Object.defineProperty({__proto__:null,BACKGROUND_COLORS:kR,CPU_COLORMAPS:dT,EPSILON:o0,MPR_CAMERA_VALUES:Rl,RENDERING_DEFAULTS:wa,VIEWPORT_PRESETS:VR},Symbol.toStringTag,{value:"Module"})),ug={},Yd={get:t=>ug[t],set:t=>{const e=t.id;ug[e]=t},delete:t=>delete ug[t],getAll:()=>{const e=Object.keys(ug).map(n=>ug[n]);return e.sort((n,r)=>n.id[0]==="_"&&r.id[0]!=="_"?1:n.id[0]!=="_"&&r.id[0]==="_"?-1:0),e}};class dK{constructor(){this.listeners={},this.debouncedListeners={}}reset(){this.listeners={},this.debouncedListeners={}}addEventListenerOnce(e,n){const r=a=>{this.removeEventListener(e,r),n.call(this,a)};this.addEventListener(e,r)}addEventListener(e,n){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].indexOf(n)===-1&&this.listeners[e].push(n)}addEventListenerDebounced(e,n,r){this.debouncedListeners[e]=this.debouncedListeners[e]||{};const a=this.debouncedListeners[e];if(!a[n]){const i=o=>{a[n]&&clearTimeout(a[n].timeoutId),a[n].timeoutId=setTimeout(()=>{n.call(this,o)},r)};a[n]={original:n,handle:i,timeoutId:null},this.addEventListener(e,i)}}removeEventListenerDebounced(e,n){var r;if((r=this.debouncedListeners[e])!=null&&r[n]){const a=this.debouncedListeners[e][n];this.removeEventListener(e,a.handle),clearTimeout(a.timeoutId),delete this.debouncedListeners[e][n]}}removeEventListener(e,n){if(!this.listeners[e])return;const r=this.listeners[e],a=r.length;for(let i=0;i<a;i++)if(r[i]===n){r.splice(i,1);return}}dispatchEvent(e){if(!this.listeners[e.type])return!e.defaultPrevented;const n=this.listeners[e.type].slice(),r=n.length;for(let a=0;a<r;a++)try{n[a].call(this,e)}catch(i){console.error(`error in event listener of type:  ${e.type}`,i)}return!e.defaultPrevented}}const ot=new dK;function Cr(){return typeof crypto.randomUUID=="function"?crypto.randomUUID():("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,t=>(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16))}function Dt(t=ot,e,n=null){if(!e)throw new Error("Event type was not defined");const r=new CustomEvent(e,{detail:n,cancelable:!0});return t==null?void 0:t.dispatchEvent(r)}var xc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Yc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function mK(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var a=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return t[r]}})}),n}var bD,qO;function hK(){return qO||(qO=1,bD=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,a,i;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(a=r;a--!==0;)if(!t(e[a],n[a]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(i=Object.keys(e),r=i.length,r!==Object.keys(n).length)return!1;for(a=r;a--!==0;)if(!Object.prototype.hasOwnProperty.call(n,i[a]))return!1;for(a=r;a--!==0;){var o=i[a];if(!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n}),bD}var pK=hK();const GR=Yc(pK);var ND,jO;function BR(){if(jO)return ND;jO=1;var t=Object.prototype.toString;return ND=function(n){var r=t.call(n),a=r==="[object Arguments]";return a||(a=r!=="[object Array]"&&n!==null&&typeof n=="object"&&typeof n.length=="number"&&n.length>=0&&t.call(n.callee)==="[object Function]"),a},ND}var LD,QO;function SK(){if(QO)return LD;QO=1;var t;if(!Object.keys){var e=Object.prototype.hasOwnProperty,n=Object.prototype.toString,r=BR(),a=Object.prototype.propertyIsEnumerable,i=!a.call({toString:null},"toString"),o=a.call(function(){},"prototype"),s=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],c=function(v){var g=v.constructor;return g&&g.prototype===v},l={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},u=function(){if(typeof window>"u")return!1;for(var v in window)try{if(!l["$"+v]&&e.call(window,v)&&window[v]!==null&&typeof window[v]=="object")try{c(window[v])}catch{return!0}}catch{return!0}return!1}(),f=function(v){if(typeof window>"u"||!u)return c(v);try{return c(v)}catch{return!1}};t=function(g){var d=g!==null&&typeof g=="object",m=n.call(g)==="[object Function]",h=r(g),C=d&&n.call(g)==="[object String]",p=[];if(!d&&!m&&!h)throw new TypeError("Object.keys called on a non-object");var S=o&&m;if(C&&g.length>0&&!e.call(g,0))for(var I=0;I<g.length;++I)p.push(String(I));if(h&&g.length>0)for(var D=0;D<g.length;++D)p.push(String(D));else for(var E in g)!(S&&E==="prototype")&&e.call(g,E)&&p.push(String(E));if(i)for(var T=f(g),y=0;y<s.length;++y)!(T&&s[y]==="constructor")&&e.call(g,s[y])&&p.push(s[y]);return p}}return LD=t,LD}var UD,KO;function CK(){if(KO)return UD;KO=1;var t=Array.prototype.slice,e=BR(),n=Object.keys,r=n?function(o){return n(o)}:SK(),a=Object.keys;return r.shim=function(){if(Object.keys){var o=function(){var s=Object.keys(arguments);return s&&s.length===arguments.length}(1,2);o||(Object.keys=function(c){return e(c)?a(t.call(c)):a(c)})}else Object.keys=r;return Object.keys||r},UD=r,UD}var FD,XO;function WR(){if(XO)return FD;XO=1;var t=Object.defineProperty||!1;if(t)try{t({},"a",{value:1})}catch{t=!1}return FD=t,FD}var VD,YO;function IK(){return YO||(YO=1,VD=SyntaxError),VD}var kD,ZO;function DK(){return ZO||(ZO=1,kD=TypeError),kD}var GD,JO;function EK(){return JO||(JO=1,GD=Object.getOwnPropertyDescriptor),GD}var BD,e8;function TK(){if(e8)return BD;e8=1;var t=EK();if(t)try{t([],"length")}catch{t=null}return BD=t,BD}var WD,t8;function yK(){if(t8)return WD;t8=1;var t=WR(),e=IK(),n=DK(),r=TK();return WD=function(i,o,s){if(!i||typeof i!="object"&&typeof i!="function")throw new n("`obj` must be an object or a function`");if(typeof o!="string"&&typeof o!="symbol")throw new n("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new n("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new n("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new n("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new n("`loose`, if provided, must be a boolean");var c=arguments.length>3?arguments[3]:null,l=arguments.length>4?arguments[4]:null,u=arguments.length>5?arguments[5]:null,f=arguments.length>6?arguments[6]:!1,v=!!r&&r(i,o);if(t)t(i,o,{configurable:u===null&&v?v.configurable:!u,enumerable:c===null&&v?v.enumerable:!c,value:s,writable:l===null&&v?v.writable:!l});else if(f||!c&&!l&&!u)i[o]=s;else throw new e("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},WD}var HD,n8;function MK(){if(n8)return HD;n8=1;var t=WR(),e=function(){return!!t};return e.hasArrayLengthDefineBug=function(){if(!t)return null;try{return t([],"length",{value:1}).length!==1}catch{return!0}},HD=e,HD}var $D,r8;function HR(){if(r8)return $D;r8=1;var t=CK(),e=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",n=Object.prototype.toString,r=Array.prototype.concat,a=yK(),i=function(l){return typeof l=="function"&&n.call(l)==="[object Function]"},o=MK()(),s=function(l,u,f,v){if(u in l){if(v===!0){if(l[u]===f)return}else if(!i(v)||!v())return}o?a(l,u,f,!0):a(l,u,f)},c=function(l,u){var f=arguments.length>2?arguments[2]:{},v=t(u);e&&(v=r.call(v,Object.getOwnPropertySymbols(u)));for(var g=0;g<v.length;g+=1)s(l,v[g],u[v[g]],f[v[g]])};return c.supportsDescriptors=!!o,$D=c,$D}var fg={exports:{}},a8;function $R(){return a8||(a8=1,typeof self<"u"?fg.exports=self:typeof window<"u"?fg.exports=window:fg.exports=Function("return this")()),fg.exports}var zD,i8;function zR(){if(i8)return zD;i8=1;var t=$R();return zD=function(){return typeof xc!="object"||!xc||xc.Math!==Math||xc.Array!==Array?t:xc},zD}var qD,o8;function _K(){if(o8)return qD;o8=1;var t=HR(),e=zR();return qD=function(){var r=e();if(t.supportsDescriptors){var a=Object.getOwnPropertyDescriptor(r,"globalThis");(!a||a.configurable&&(a.enumerable||!a.writable||globalThis!==r))&&Object.defineProperty(r,"globalThis",{configurable:!0,enumerable:!1,value:r,writable:!0})}else(typeof globalThis!="object"||globalThis!==r)&&(r.globalThis=r);return r},qD}var jD,s8;function OK(){if(s8)return jD;s8=1;var t=HR(),e=$R(),n=zR(),r=_K(),a=n(),i=function(){return a};return t(i,{getPolyfill:n,implementation:e,shim:r}),jD=i,jD}var wK=OK();const PK=Yc(wK),Ys=PK(),qR={vtkObject:()=>null};function Js(t){if(t==null||t.isA)return t;if(!t.vtkClass)return Ys.console&&Ys.console.error&&Ys.console.error("Invalid VTK object"),null;const e=qR[t.vtkClass];if(!e)return Ys.console&&Ys.console.error&&Ys.console.error(`No vtk class found for Object of type ${t.vtkClass}`),null;const n={...t};Object.keys(n).forEach(a=>{n[a]&&typeof n[a]=="object"&&n[a].vtkClass&&(n[a]=Js(n[a]))});const r=e(n);return r&&r.modified&&r.modified(),r}function AK(t,e){qR[t]=e}Js.register=AK;class QD extends Array{push(){for(let e=0;e<arguments.length;e++)this.includes(arguments[e])||super.push(arguments[e]);return this.length}}let mT=0;const jR=Symbol("void");function xK(){return mT}const QR={};function $u(){}const RK=["log","debug","info","warn","error","time","timeEnd","group","groupEnd"];RK.forEach(t=>{QR[t]=$u});Ys.console=console.hasOwnProperty("log")?console:QR;const tu={debug:$u,error:Ys.console.error||$u,info:Ys.console.info||$u,log:Ys.console.log||$u,warn:Ys.console.warn||$u};function KR(t,e){tu[t]&&(tu[t]=e||$u)}function XR(){tu.log(...arguments)}function YR(){tu.info(...arguments)}function hS(){tu.debug(...arguments)}function Kn(){tu.error(...arguments)}function ZC(){tu.warn(...arguments)}const c8={};function ZR(t){c8[t]||(tu.error(t),c8[t]=!0)}const eo=Object.create(null);eo.Float32Array=Float32Array;eo.Float64Array=Float64Array;eo.Uint8Array=Uint8Array;eo.Int8Array=Int8Array;eo.Uint16Array=Uint16Array;eo.Int16Array=Int16Array;eo.Uint32Array=Uint32Array;eo.Int32Array=Int32Array;eo.Uint8ClampedArray=Uint8ClampedArray;try{eo.BigInt64Array=BigInt64Array,eo.BigUint64Array=BigUint64Array}catch{}function Av(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return new(eo[t]||Float64Array)(...n)}function JC(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return(eo[t]||Float64Array).from(...n)}function eI(t){return t.charAt(0).toUpperCase()+t.slice(1)}function Ba(t){return eI(t[0]==="_"?t.slice(1):t)}function JR(t){return t.charAt(0).toLowerCase()+t.slice(1)}function eb(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e3;const r=["TB","GB","MB","KB"];let a=Number(t),i="B";for(;a>n;)a/=n,i=r.pop();return`${a.toFixed(e)} ${i}`}function tb(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:" ";const n=[];let r=t;for(;r>1e3;)n.push(`000${r%1e3}`.slice(-3)),r=Math.floor(r/1e3);return r>0&&n.push(r),n.reverse(),n.join(e)}function nb(t){Object.keys(t).forEach(e=>{Array.isArray(t[e])&&(t[e]=[].concat(t[e]))})}function bK(t){return Object.values(eo).some(e=>t instanceof e)}function NK(t,e){if(t===e)return!0;if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}function LK(t,e){return Object.keys(t).find(n=>t[n]===e)}function rb(t){return t&&t.isA?t.getState():t}function PM(t){setTimeout(t,0)}function ab(t,e){const n=performance.now();t.finally(()=>{const r=performance.now()-n;e(r)})}function Yr(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};nb(e);const n=[];if(Number.isInteger(e.mtime)||(e.mtime=++mT),!("classHierarchy"in e))e.classHierarchy=new QD("vtkObject");else if(!(e.classHierarchy instanceof QD)){const i=new QD;for(let o=0;o<e.classHierarchy.length;o++)i.push(e.classHierarchy[o]);e.classHierarchy=i}function r(i){n[i]=null}function a(i){function o(){r(i)}return Object.freeze({unsubscribe:o})}return t.isDeleted=()=>!!e.deleted,t.modified=i=>{if(e.deleted){Kn("instance deleted - cannot call any method");return}i&&i<t.getMTime()||(e.mtime=++mT,n.forEach(o=>o&&o(t)))},t.onModified=i=>{if(e.deleted)return Kn("instance deleted - cannot call any method"),null;const o=n.length;return n.push(i),a(o)},t.getMTime=()=>e.mtime,t.isA=i=>{let o=e.classHierarchy.length;for(;o--;)if(e.classHierarchy[o]===i)return!0;return!1},t.getClassName=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.classHierarchy[e.classHierarchy.length-1-i]},t.set=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,c=!1;return Object.keys(i).forEach(l=>{const u=s?null:t[`set${eI(l)}`];u&&Array.isArray(i[l])&&u.length>1?c=u(...i[l])||c:u?c=u(i[l])||c:(["mtime"].indexOf(l)===-1&&!o&&ZC(`Warning: Set value to model directly ${l}, ${i[l]}`),c=e[l]!==i[l]||c,e[l]=i[l])}),c},t.get=function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];if(!o.length)return e;const c={};return o.forEach(l=>{c[l]=e[l]}),c},t.getReferenceByName=i=>e[i],t.delete=()=>{Object.keys(e).forEach(i=>delete e[i]),n.forEach((i,o)=>r(o)),e.deleted=!0},t.getState=()=>{if(e.deleted)return null;const i={...e,vtkClass:t.getClassName()};Object.keys(i).forEach(s=>{i[s]===null||i[s]===void 0||s[0]==="_"?delete i[s]:i[s].isA?i[s]=i[s].getState():Array.isArray(i[s])?i[s]=i[s].map(rb):bK(i[s])&&(i[s]=Array.from(i[s]))});const o={};return Object.keys(i).sort().forEach(s=>{o[s]=i[s]}),o.mtime&&delete o.mtime,o},t.shallowCopy=function(i){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(i.getClassName()!==t.getClassName())throw new Error(`Cannot ShallowCopy ${i.getClassName()} into ${t.getClassName()}`);const s=i.get(),c=Object.keys(e).sort();Object.keys(s).sort().forEach(u=>{const f=c.indexOf(u);f===-1?o&&hS(`add ${u} in shallowCopy`):c.splice(f,1),e[u]=s[u]}),c.length&&o&&hS(`Untouched keys: ${c.join(", ")}`),t.modified()},t.toJSON=function(){return t.getState()},t}const UK={object(t,e,n){return function(){return{...e[n.name]}}}};function _o(t,e,n){n.forEach(r=>{if(typeof r=="object"){const a=UK[r.type];a?t[`get${Ba(r.name)}`]=a(t,e,r):t[`get${Ba(r.name)}`]=()=>e[r.name]}else t[`get${Ba(r)}`]=()=>e[r]})}const ib={enum(t,e,n){const r=`_on${Ba(n.name)}Changed`;return a=>{var i;if(typeof a=="string"){if(n.enum[a]!==void 0)return e[n.name]!==n.enum[a]?(e[n.name]=n.enum[a],t.modified(),!0):!1;throw Kn(`Set Enum with invalid argument ${n}, ${a}`),new RangeError("Set Enum with invalid string argument")}if(typeof a=="number"){if(e[n.name]!==a){if(Object.keys(n.enum).map(o=>n.enum[o]).indexOf(a)!==-1){const o=e[n.name];return e[n.name]=a,(i=e[r])==null||i.call(e,t,e,a,o),t.modified(),!0}throw Kn(`Set Enum outside numeric range ${n}, ${a}`),new RangeError("Set Enum outside numeric range")}return!1}throw Kn(`Set Enum with invalid argument (String/Number) ${n}, ${a}`),new TypeError("Set Enum with invalid argument (String/Number)")}},object(t,e,n){var a;((a=n.params)==null?void 0:a.length)===1&&ZC('Setter of type "object" with a single "param" field is not supported');const r=`_on${Ba(n.name)}Changed`;return function(){var l,u;for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];let c;if(o.length>1&&((l=n.params)!=null&&l.length)?c=n.params.reduce((f,v,g)=>Object.assign(f,{[v]:o[g]}),{}):c=o[0],!GR(e[n.name],c)){const f=e[n.name];return e[n.name]=c,(u=e[r])==null||u.call(e,t,e,c,f),t.modified(),!0}return!1}}};function l8(t){if(typeof t=="object"){const e=ib[t.type];if(e)return(n,r)=>e(n,r,t);throw Kn(`No setter for field ${t}`),new TypeError("No setter for field")}return function(n,r){const a=`_on${Ba(t)}Changed`;return function(o){var s;if(r.deleted)return Kn("instance deleted - cannot call any method"),!1;if(r[t]!==o){const c=r[t.name];return r[t]=o,(s=r[a])==null||s.call(r,n,r,o,c),n.modified(),!0}return!1}}}function Km(t,e,n){n.forEach(r=>{typeof r=="object"?t[`set${Ba(r.name)}`]=l8(r)(t,e):t[`set${Ba(r)}`]=l8(r)(t,e)})}function Wa(t,e,n){_o(t,e,n),Km(t,e,n)}function xv(t,e,n){n.forEach(r=>{t[`get${Ba(r)}`]=()=>e[r]?Array.from(e[r]):e[r],t[`get${Ba(r)}ByReference`]=()=>e[r]})}function AM(t,e,n,r){let a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:void 0;n.forEach(i=>{if(e[i]&&r&&e[i].length!==r)throw new RangeError(`Invalid initial number of values for array (${i})`);const o=`_on${Ba(i)}Changed`;t[`set${Ba(i)}`]=function(){var g;if(e.deleted)return Kn("instance deleted - cannot call any method"),!1;for(var s=arguments.length,c=new Array(s),l=0;l<s;l++)c[l]=arguments[l];let u=c,f,v=!1;if(u.length===1&&(u[0]==null||u[0].length>=0)&&(u=u[0],v=!0),u==null)f=e[i]!==u;else{if(r&&u.length!==r)if(u.length<r&&a!==void 0)for(u=Array.from(u),v=!1;u.length<r;)u.push(a);else throw new RangeError(`Invalid number of values for array setter (${i})`);f=e[i]==null||e[i].length!==u.length;for(let d=0;!f&&d<u.length;++d)f=e[i][d]!==u[d];f&&v&&(u=Array.from(u))}if(f){const d=e[i.name];e[i]=u,(g=e[o])==null||g.call(e,t,e,u,d),t.modified()}return f},t[`set${Ba(i)}From`]=s=>{const c=e[i];s.forEach((l,u)=>{c[u]=l})}})}function xM(t,e,n,r){let a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:void 0;xv(t,e,n),AM(t,e,n,r,a)}function Xm(t,e,n){for(let r=0;r<n.length;r++){const a=n[r];e[a]!==void 0&&(e[`_${a}`]=e[a],delete e[a])}}function RM(t,e,n,r){e.inputData?e.inputData=e.inputData.map(Js):e.inputData=[],e.inputConnection?e.inputConnection=e.inputConnection.map(Js):e.inputConnection=[],e.output?e.output=e.output.map(Js):e.output=[],e.inputArrayToProcess?e.inputArrayToProcess=e.inputArrayToProcess.map(Js):e.inputArrayToProcess=[],e.numberOfInputs=n;function a(g){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(e.deleted){Kn("instance deleted - cannot call any method");return}if(d>=e.numberOfInputs){Kn(`algorithm ${t.getClassName()} only has ${e.numberOfInputs} input ports. To add more input ports, use addInputData()`);return}(e.inputData[d]!==g||e.inputConnection[d])&&(e.inputData[d]=g,e.inputConnection[d]=null,t.modified&&t.modified())}function i(){let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.inputConnection[g]&&(e.inputData[g]=e.inputConnection[g]()),e.inputData[g]}function o(g){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(e.deleted){Kn("instance deleted - cannot call any method");return}if(d>=e.numberOfInputs){let m=`algorithm ${t.getClassName()} only has `;m+=`${e.numberOfInputs}`,m+=" input ports. To add more input ports, use addInputConnection()",Kn(m);return}e.inputData[d]=null,e.inputConnection[d]=g}function s(){let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.inputConnection[g]}function c(){let g=e.numberOfInputs;for(;g&&!e.inputData[g-1]&&!e.inputConnection[g-1];)g--;return g===e.numberOfInputs&&e.numberOfInputs++,g}function l(g){if(e.deleted){Kn("instance deleted - cannot call any method");return}o(g,c())}function u(g){if(e.deleted){Kn("instance deleted - cannot call any method");return}a(g,c())}function f(){let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.deleted?(Kn("instance deleted - cannot call any method"),null):(t.shouldUpdate()&&t.update(),e.output[g])}t.shouldUpdate=()=>{var h,C;const g=t.getMTime();let d=1/0,m=r;for(;m--;){if(!e.output[m]||e.output[m].isDeleted())return!0;const p=e.output[m].getMTime();if(p<g)return!0;p<d&&(d=p)}for(m=e.numberOfInputs;m--;)if((h=e.inputConnection[m])!=null&&h.filter.shouldUpdate()||((C=t.getInputData(m))==null?void 0:C.getMTime())>d)return!0;return!1};function v(){let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;const d=()=>f(g);return d.filter=t,d}if(e.numberOfInputs){let g=e.numberOfInputs;for(;g--;)e.inputData.push(null),e.inputConnection.push(null);t.setInputData=a,t.setInputConnection=o,t.addInputData=u,t.addInputConnection=l,t.getInputData=i,t.getInputConnection=s}r&&(t.getOutputData=f,t.getOutputPort=v),t.update=()=>{const g=[];if(e.numberOfInputs){let d=0;for(;d<e.numberOfInputs;)g[d]=t.getInputData(d),d++}t.shouldUpdate()&&t.requestData&&t.requestData(g,e.output)},t.getNumberOfInputPorts=()=>e.numberOfInputs,t.getNumberOfOutputPorts=()=>r||e.output.length,t.getInputArrayToProcess=g=>{const d=e.inputArrayToProcess[g],m=e.inputData[g];return d&&m?m[`get${d.fieldAssociation}`]().getArray(d.arrayName):null},t.setInputArrayToProcess=function(g,d,m){let h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Scalars";for(;e.inputArrayToProcess.length<g;)e.inputArrayToProcess.push(null);e.inputArrayToProcess[g]={arrayName:d,fieldAssociation:m,attributeType:h}}}const bM=Symbol("Event abort");function ob(t,e,n){const r=[],a=t.delete;let i=1;function o(l){for(let u=0;u<r.length;++u){const[f]=r[u];if(f===l){r.splice(u,1);return}}}function s(l){function u(){o(l)}return Object.freeze({unsubscribe:u})}function c(){if(e.deleted){Kn("instance deleted - cannot call any method");return}const l=r.slice();for(let u=0;u<l.length;++u){const[,f,v]=l[u];if(f){if(v<0)setTimeout(()=>f.apply(t,arguments),1-v);else if(f.apply(t,arguments)===bM)break}}}t[`invoke${Ba(n)}`]=c,t[`on${Ba(n)}`]=function(l){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!l.apply)return console.error(`Invalid callback for event ${n}`),null;if(e.deleted)return Kn("instance deleted - cannot call any method"),null;const f=i++;return r.push([f,l,u]),r.sort((v,g)=>g[2]-v[2]),s(f)},t.delete=()=>{a(),r.forEach(l=>{let[u]=l;return o(u)})}}function dr(t,e){const n=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const a={},i={};return t(i,a,r),Object.freeze(i)};return e&&Js.register(e,n),n}function Ym(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e.filter(o=>!!o).map(o=>o(...a))}}function NM(t){return t&&t.isA&&t.isA("vtkObject")}function pS(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];if(NM(t)){if(r.indexOf(t)>=0)return n;r.push(t);const a=e(t);a!==void 0&&n.push(a);const i=t.get();Object.keys(i).forEach(o=>{const s=i[o];Array.isArray(s)?s.forEach(c=>{pS(c,e,n,r)}):pS(s,e,n,r)})}return n}function sb(t,e,n){var r=this;let a;const i=function(){for(var o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];const l=r,u=()=>{a=null,n||t.apply(l,s)},f=n&&!a;clearTimeout(a),a=setTimeout(u,e),f&&t.apply(l,s)};return i.cancel=()=>clearTimeout(a),i}function cb(t,e){let n=!1,r=null;function a(){n=!1,r!==null&&(i(...r),r=null)}function i(){for(var o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];if(n){r=s;return}n=!0,t(...s),setTimeout(a,e)}return i}function LM(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};e.keystore=Object.assign(e.keystore||{},n),t.setKey=(r,a)=>{e.keystore[r]=a},t.getKey=r=>e.keystore[r],t.getAllKeys=()=>Object.keys(e.keystore),t.deleteKey=r=>delete e.keystore[r],t.clearKeystore=()=>t.getAllKeys().forEach(r=>delete e.keystore[r])}let FK=1;const np="__root__";function lb(t,e){LM(t,e);const n=t.delete;e.proxyId=`${FK++}`,e.ui=JSON.parse(JSON.stringify(e.ui||[])),_o(t,e,["proxyId","proxyGroup","proxyName"]),Wa(t,e,["proxyManager"]);const r={},a={};function i(l,u){a[u]||(a[u]=[]);const f=a[u];for(let v=0;v<l.length;v++)f.push(l[v].name),r[l[v].name]=l[v],l[v].children&&l[v].children.length&&i(l[v].children,l[v].name)}i(e.ui,np),t.updateUI=l=>{e.ui=JSON.parse(JSON.stringify(l||[])),Object.keys(r).forEach(u=>delete r[u]),Object.keys(a).forEach(u=>delete a[u]),i(e.ui,np),t.modified()};function o(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:np;return a[l]}t.updateProxyProperty=(l,u)=>{const f=r[l];f?Object.assign(f,u):r[l]={...u}},t.activate=()=>{if(e.proxyManager){const l=`setActive${Ba(t.getProxyGroup().slice(0,-1))}`;e.proxyManager[l]&&e.proxyManager[l](t)}},e.propertyLinkSubscribers={},t.registerPropertyLinkForGC=(l,u)=>{u in e.propertyLinkSubscribers||(e.propertyLinkSubscribers[u]=[]),e.propertyLinkSubscribers[u].push(l)},t.gcPropertyLinks=l=>{const u=e.propertyLinkSubscribers[l]||[];for(;u.length;)u.pop().unbind(t)},e.propertyLinkMap={},t.getPropertyLink=function(l){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e.propertyLinkMap[l])return e.propertyLinkMap[l];let f=null;const v=[];let g=0,d=!1;function m(I){let D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(d)return null;const E=[];let T=null;for(g=v.length;g--;){const M=v[g];M.instance===I?T=M:E.push(M)}if(!T)return null;const y=T.instance[`get${Ba(T.propertyName)}`]();if(!NK(y,f)||D){for(f=y,d=!0;E.length;){const M=E.pop();M.instance.set({[M.propertyName]:f})}d=!1}return e.propertyLinkMap[l].persistent&&(e.propertyLinkMap[l].value=y),y}function h(I,D){const E=[];for(g=v.length;g--;){const T=v[g];T.instance===I&&(T.propertyName===D||D===void 0)&&(T.subscription.unsubscribe(),E.push(g))}for(;E.length;)v.splice(E.pop(),1)}function C(I,D){let E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const T=I.onModified(m),y=v[0];return v.push({instance:I,propertyName:D,subscription:T}),E&&(e.propertyLinkMap[l].persistent&&e.propertyLinkMap[l].value!==void 0?I.set({[D]:e.propertyLinkMap[l].value}):y&&m(y.instance,!0)),{unsubscribe:()=>h(I,D)}}function p(){for(;v.length;)v.pop().subscription.unsubscribe()}const S={bind:C,unbind:h,unsubscribe:p,persistent:u};return e.propertyLinkMap[l]=S,S};function s(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:np;const u=[],f=e.proxyId,v=o(l)||[];for(let g=0;g<v.length;g++){const d=v[g],m=t[`get${Ba(d)}`],h=m?m():void 0,C={id:f,name:d,value:h},p=s(d);p.length&&(C.children=p),u.push(C)}return u}t.listPropertyNames=()=>s().map(l=>l.name),t.getPropertyByName=l=>s().find(u=>u.name===l),t.getPropertyDomainByName=l=>(r[l]||{}).domain,t.getProxySection=()=>({id:e.proxyId,name:e.proxyGroup,ui:e.ui,properties:s()}),t.delete=()=>{const l=Object.keys(e.propertyLinkMap);let u=l.length;for(;u--;)e.propertyLinkMap[l[u]].unsubscribe();Object.keys(e.propertyLinkSubscribers).forEach(t.gcPropertyLinks),n()},t.getState=()=>null;function c(){if(e.links)for(let l=0;l<e.links.length;l++){const{link:u,property:f,persistent:v,updateOnBind:g,type:d}=e.links[l];if(d==="application"){const m=e.proxyManager.getPropertyLink(u,v);t.registerPropertyLinkForGC(m,"application"),m.bind(t,f,g)}}}PM(c)}function ub(t,e,n){const r=t.delete,a=[],i=Object.keys(n);let o=i.length;for(;o--;){const s=i[o],{modelKey:c,property:l,modified:u=!0}=n[s],f=Ba(l),v=Ba(s);t[`get${v}`]=e[c][`get${f}`],t[`set${v}`]=e[c][`set${f}`],u&&a.push(e[c].onModified(t.modified))}t.delete=()=>{for(;a.length;)a.pop().unsubscribe();r()}}function fb(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};e.this=t;function a(s){const c=Object.keys(s);let l=c.length;for(;l--;){const u=c[l];e[u].set(s[u])}}const i=Object.keys(r);let o=i.length;for(;o--;){const s=i[o];e[s]=r[s];const c=n[s];t[`set${Ba(s)}`]=l=>{if(l!==e[s]){e[s]=l;const u=c[l];a(u),t.modified()}}}i.length&&_o(t,e,i)}const u8=10,f8=40,v8=800;function vb(t){let e=0,n=0,r=0,a=0;return"detail"in t&&(n=t.detail),"wheelDelta"in t&&(n=-t.wheelDelta/120),"wheelDeltaY"in t&&(n=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=n,n=0),r=e*u8,a=n*u8,"deltaY"in t&&(a=t.deltaY),"deltaX"in t&&(r=t.deltaX),(r||a)&&t.deltaMode&&(t.deltaMode===1?(r*=f8,a*=f8):(r*=v8,a*=v8)),r&&!e&&(e=r<1?-1:1),a&&!n&&(n=a<1?-1:1),{spinX:e,spinY:n||e,pixelX:r,pixelY:a||r}}var J={algo:RM,capitalize:eI,chain:Ym,debounce:sb,enumToString:LK,event:ob,EVENT_ABORT:bM,formatBytesToProperUnit:eb,formatNumbersWithThousandSeparator:tb,get:_o,getArray:xv,getCurrentGlobalMTime:xK,getStateArrayMapFunc:rb,isVtkObject:NM,keystore:LM,measurePromiseExecution:ab,moveToProtected:Xm,newInstance:dr,newTypedArray:Av,newTypedArrayFrom:JC,normalizeWheel:vb,obj:Yr,proxy:lb,proxyPropertyMapping:ub,proxyPropertyState:fb,safeArrays:nb,set:Km,setArray:AM,setGet:Wa,setGetArray:xM,setImmediate:PM,setLoggerFunction:KR,throttle:cb,traverseInstanceTree:pS,TYPED_ARRAYS:eo,uncapitalize:JR,VOID:jR,vtkDebugMacro:hS,vtkErrorMacro:Kn,vtkInfoMacro:YR,vtkLogMacro:XR,vtkOnceErrorMacro:ZR,vtkWarningMacro:ZC,objectSetterMap:ib},Bi=Object.freeze({__proto__:null,VOID:jR,setLoggerFunction:KR,vtkLogMacro:XR,vtkInfoMacro:YR,vtkDebugMacro:hS,vtkErrorMacro:Kn,vtkWarningMacro:ZC,vtkOnceErrorMacro:ZR,TYPED_ARRAYS:eo,newTypedArray:Av,newTypedArrayFrom:JC,capitalize:eI,_capitalize:Ba,uncapitalize:JR,formatBytesToProperUnit:eb,formatNumbersWithThousandSeparator:tb,setImmediateVTK:PM,measurePromiseExecution:ab,obj:Yr,get:_o,set:Km,setGet:Wa,getArray:xv,setArray:AM,setGetArray:xM,moveToProtected:Xm,algo:RM,EVENT_ABORT:bM,event:ob,newInstance:dr,chain:Ym,isVtkObject:NM,traverseInstanceTree:pS,debounce:sb,throttle:cb,keystore:LM,proxy:lb,proxyPropertyMapping:ub,proxyPropertyState:fb,normalizeWheel:vb,default:J});const gb={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Vn={VOID:"",CHAR:"Int8Array",SIGNED_CHAR:"Int8Array",UNSIGNED_CHAR:"Uint8Array",UNSIGNED_CHAR_CLAMPED:"Uint8ClampedArray",SHORT:"Int16Array",UNSIGNED_SHORT:"Uint16Array",INT:"Int32Array",UNSIGNED_INT:"Uint32Array",FLOAT:"Float32Array",DOUBLE:"Float64Array"},VK=Vn.FLOAT;var db={DefaultDataType:VK,DataTypeByteSize:gb,VtkDataTypes:Vn};const kK="WebGL",SS=Object.create(null);function mb(t,e){SS[t]=e}function GK(){return Object.keys(SS)}function hb(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return SS[t]&&SS[t](e)}function BK(t,e){e.classHierarchy.push("vtkRenderWindow"),t.addRenderer=n=>{t.hasRenderer(n)||(n.setRenderWindow(t),e.renderers.push(n),t.modified())},t.removeRenderer=n=>{e.renderers=e.renderers.filter(r=>r!==n),t.modified()},t.hasRenderer=n=>e.renderers.indexOf(n)!==-1,t.newAPISpecificView=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return hb(n||e.defaultViewAPI,r)},t.addView=n=>{t.hasView(n)||(n.setRenderable(t),e._views.push(n),t.modified())},t.removeView=n=>{e._views=e._views.filter(r=>r!==n),t.modified()},t.hasView=n=>e._views.indexOf(n)!==-1,t.preRender=()=>{e.renderers.forEach(n=>{n.isActiveCameraCreated()||n.resetCamera()})},t.render=()=>{t.preRender(),e.interactor?e.interactor.render():e._views.forEach(n=>n.traverseAllPasses())},t.getStatistics=()=>{const n={propCount:0,invisiblePropCount:0,gpuMemoryMB:0};return e._views.forEach(r=>{r.getGraphicsMemoryInfo&&(n.gpuMemoryMB+=r.getGraphicsMemoryInfo()/1e6)}),e.renderers.forEach(r=>{const a=r.getViewProps(),i=e._views[0].getViewNodeFor(r);a.forEach(o=>{if(o.getVisibility()){n.propCount+=1;const s=o.getMapper&&o.getMapper();if(s&&s.getPrimitiveCount){const c=i.getViewNodeFor(s);if(c){c.getAllocatedGPUMemoryInBytes&&(n.gpuMemoryMB+=c.getAllocatedGPUMemoryInBytes()/1e6);const l=s.getPrimitiveCount();Object.keys(l).forEach(u=>{n[u]||(n[u]=0),n[u]+=l[u]})}}}else n.invisiblePropCount+=1})}),n.str=Object.keys(n).map(r=>`${r}: ${n[r]}`).join(`
`),n},t.captureImages=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"image/png",r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return J.setImmediate(t.render),e._views.map(a=>a.captureNextImage?a.captureNextImage(n,r):void 0).filter(a=>!!a)},t.addRenderWindow=n=>e.childRenderWindows.includes(n)?!1:(e.childRenderWindows.push(n),t.modified(),!0),t.removeRenderWindow=n=>{const r=e.childRenderWindows.findIndex(a=>a===n);return r<0?!1:(e.childRenderWindows.splice(r,1),t.modified(),!0)}}const WK={defaultViewAPI:kK,renderers:[],views:[],interactor:null,neverRendered:!0,numberOfLayers:1,childRenderWindows:[]};function pb(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,WK,n),J.obj(t,e),J.setGet(t,e,["interactor","numberOfLayers","_views","defaultViewAPI"]),J.get(t,e,["neverRendered"]),J.getArray(t,e,["renderers","childRenderWindows"]),J.moveToProtected(t,e,["views"]),J.event(t,e,"completion"),BK(t,e)}const HK=J.newInstance(pb,"vtkRenderWindow");var $K={newInstance:HK,extend:pb,registerViewConstructor:mb,listViewAPIs:GK,newAPISpecificView:hb};const Zd={CLAMP_TO_EDGE:0,REPEAT:1,MIRRORED_REPEAT:2},en={NEAREST:0,LINEAR:1,NEAREST_MIPMAP_NEAREST:2,NEAREST_MIPMAP_LINEAR:3,LINEAR_MIPMAP_NEAREST:4,LINEAR_MIPMAP_LINEAR:5};var Sb={Wrap:Zd,Filter:en};const Cb=new Float32Array(1),zK=new Int32Array(Cb.buffer);function qK(t){Cb[0]=t;const e=zK[0];let n=e>>16&32768,r=e>>12&2047;const a=e>>23&255;return a<103?n:a>142?(n|=31744,n|=(a===255?0:1)&&e&8388607,n):a<113?(r|=2048,n|=(r>>114-a)+(r>>113-a&1),n):(n|=a-112<<10|r>>1,n+=r&1,n)}function jK(t){const e=(t&32768)>>15,n=(t&31744)>>10,r=t&1023;return n===0?(e?-1:1)*2**-14*(r/2**10):n===31?r?NaN:(e?-1:1)*(1/0):(e?-1:1)*2**(n-15)*(1+r/2**10)}var zu={fromHalf:jK,toHalf:qK},E2={exports:{}},QK=E2.exports,g8;function KK(){return g8||(g8=1,function(t){(function(e,n,r){function a(c){var l=this,u=s();l.next=function(){var f=2091639*l.s0+l.c*23283064365386963e-26;return l.s0=l.s1,l.s1=l.s2,l.s2=f-(l.c=f|0)},l.c=1,l.s0=u(" "),l.s1=u(" "),l.s2=u(" "),l.s0-=u(c),l.s0<0&&(l.s0+=1),l.s1-=u(c),l.s1<0&&(l.s1+=1),l.s2-=u(c),l.s2<0&&(l.s2+=1),u=null}function i(c,l){return l.c=c.c,l.s0=c.s0,l.s1=c.s1,l.s2=c.s2,l}function o(c,l){var u=new a(c),f=l&&l.state,v=u.next;return v.int32=function(){return u.next()*4294967296|0},v.double=function(){return v()+(v()*2097152|0)*11102230246251565e-32},v.quick=v,f&&(typeof f=="object"&&i(f,u),v.state=function(){return i(u,{})}),v}function s(){var c=4022871197,l=function(u){u=String(u);for(var f=0;f<u.length;f++){c+=u.charCodeAt(f);var v=.02519603282416938*c;c=v>>>0,v-=c,v*=c,c=v>>>0,v-=c,c+=v*4294967296}return(c>>>0)*23283064365386963e-26};return l}n.exports?n.exports=o:this.alea=o})(QK,t)}(E2)),E2.exports}var T2={exports:{}},XK=T2.exports,d8;function YK(){return d8||(d8=1,function(t){(function(e,n,r){function a(s){var c=this,l="";c.x=0,c.y=0,c.z=0,c.w=0,c.next=function(){var f=c.x^c.x<<11;return c.x=c.y,c.y=c.z,c.z=c.w,c.w^=c.w>>>19^f^f>>>8},s===(s|0)?c.x=s:l+=s;for(var u=0;u<l.length+64;u++)c.x^=l.charCodeAt(u)|0,c.next()}function i(s,c){return c.x=s.x,c.y=s.y,c.z=s.z,c.w=s.w,c}function o(s,c){var l=new a(s),u=c&&c.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var v=l.next()>>>11,g=(l.next()>>>0)/4294967296,d=(v+g)/(1<<21);while(d===0);return d},f.int32=l.next,f.quick=f,u&&(typeof u=="object"&&i(u,l),f.state=function(){return i(l,{})}),f}n.exports?n.exports=o:this.xor128=o})(XK,t)}(T2)),T2.exports}var y2={exports:{}},ZK=y2.exports,m8;function JK(){return m8||(m8=1,function(t){(function(e,n,r){function a(s){var c=this,l="";c.next=function(){var f=c.x^c.x>>>2;return c.x=c.y,c.y=c.z,c.z=c.w,c.w=c.v,(c.d=c.d+362437|0)+(c.v=c.v^c.v<<4^(f^f<<1))|0},c.x=0,c.y=0,c.z=0,c.w=0,c.v=0,s===(s|0)?c.x=s:l+=s;for(var u=0;u<l.length+64;u++)c.x^=l.charCodeAt(u)|0,u==l.length&&(c.d=c.x<<10^c.x>>>4),c.next()}function i(s,c){return c.x=s.x,c.y=s.y,c.z=s.z,c.w=s.w,c.v=s.v,c.d=s.d,c}function o(s,c){var l=new a(s),u=c&&c.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var v=l.next()>>>11,g=(l.next()>>>0)/4294967296,d=(v+g)/(1<<21);while(d===0);return d},f.int32=l.next,f.quick=f,u&&(typeof u=="object"&&i(u,l),f.state=function(){return i(l,{})}),f}n.exports?n.exports=o:this.xorwow=o})(ZK,t)}(y2)),y2.exports}var M2={exports:{}},eX=M2.exports,h8;function tX(){return h8||(h8=1,function(t){(function(e,n,r){function a(s){var c=this;c.next=function(){var u=c.x,f=c.i,v,g;return v=u[f],v^=v>>>7,g=v^v<<24,v=u[f+1&7],g^=v^v>>>10,v=u[f+3&7],g^=v^v>>>3,v=u[f+4&7],g^=v^v<<7,v=u[f+7&7],v=v^v<<13,g^=v^v<<9,u[f]=g,c.i=f+1&7,g};function l(u,f){var v,g=[];if(f===(f|0))g[0]=f;else for(f=""+f,v=0;v<f.length;++v)g[v&7]=g[v&7]<<15^f.charCodeAt(v)+g[v+1&7]<<13;for(;g.length<8;)g.push(0);for(v=0;v<8&&g[v]===0;++v);for(v==8?g[7]=-1:g[v],u.x=g,u.i=0,v=256;v>0;--v)u.next()}l(c,s)}function i(s,c){return c.x=s.x.slice(),c.i=s.i,c}function o(s,c){s==null&&(s=+new Date);var l=new a(s),u=c&&c.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var v=l.next()>>>11,g=(l.next()>>>0)/4294967296,d=(v+g)/(1<<21);while(d===0);return d},f.int32=l.next,f.quick=f,u&&(u.x&&i(u,l),f.state=function(){return i(l,{})}),f}n.exports?n.exports=o:this.xorshift7=o})(eX,t)}(M2)),M2.exports}var _2={exports:{}},nX=_2.exports,p8;function rX(){return p8||(p8=1,function(t){(function(e,n,r){function a(s){var c=this;c.next=function(){var u=c.w,f=c.X,v=c.i,g,d;return c.w=u=u+1640531527|0,d=f[v+34&127],g=f[v=v+1&127],d^=d<<13,g^=g<<17,d^=d>>>15,g^=g>>>12,d=f[v]=d^g,c.i=v,d+(u^u>>>16)|0};function l(u,f){var v,g,d,m,h,C=[],p=128;for(f===(f|0)?(g=f,f=null):(f=f+"\0",g=0,p=Math.max(p,f.length)),d=0,m=-32;m<p;++m)f&&(g^=f.charCodeAt((m+32)%f.length)),m===0&&(h=g),g^=g<<10,g^=g>>>15,g^=g<<4,g^=g>>>13,m>=0&&(h=h+1640531527|0,v=C[m&127]^=g+h,d=v==0?d+1:0);for(d>=128&&(C[(f&&f.length||0)&127]=-1),d=127,m=4*128;m>0;--m)g=C[d+34&127],v=C[d=d+1&127],g^=g<<13,v^=v<<17,g^=g>>>15,v^=v>>>12,C[d]=g^v;u.w=h,u.X=C,u.i=d}l(c,s)}function i(s,c){return c.i=s.i,c.w=s.w,c.X=s.X.slice(),c}function o(s,c){s==null&&(s=+new Date);var l=new a(s),u=c&&c.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var v=l.next()>>>11,g=(l.next()>>>0)/4294967296,d=(v+g)/(1<<21);while(d===0);return d},f.int32=l.next,f.quick=f,u&&(u.X&&i(u,l),f.state=function(){return i(l,{})}),f}n.exports?n.exports=o:this.xor4096=o})(nX,t)}(_2)),_2.exports}var O2={exports:{}},aX=O2.exports,S8;function iX(){return S8||(S8=1,function(t){(function(e,n,r){function a(s){var c=this,l="";c.next=function(){var f=c.b,v=c.c,g=c.d,d=c.a;return f=f<<25^f>>>7^v,v=v-g|0,g=g<<24^g>>>8^d,d=d-f|0,c.b=f=f<<20^f>>>12^v,c.c=v=v-g|0,c.d=g<<16^v>>>16^d,c.a=d-f|0},c.a=0,c.b=0,c.c=-1640531527,c.d=1367130551,s===Math.floor(s)?(c.a=s/4294967296|0,c.b=s|0):l+=s;for(var u=0;u<l.length+20;u++)c.b^=l.charCodeAt(u)|0,c.next()}function i(s,c){return c.a=s.a,c.b=s.b,c.c=s.c,c.d=s.d,c}function o(s,c){var l=new a(s),u=c&&c.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var v=l.next()>>>11,g=(l.next()>>>0)/4294967296,d=(v+g)/(1<<21);while(d===0);return d},f.int32=l.next,f.quick=f,u&&(typeof u=="object"&&i(u,l),f.state=function(){return i(l,{})}),f}n.exports?n.exports=o:this.tychei=o})(aX,t)}(O2)),O2.exports}var w2={exports:{}};const oX={},sX=Object.freeze(Object.defineProperty({__proto__:null,default:oX},Symbol.toStringTag,{value:"Module"})),j0=mK(sX);var cX=w2.exports,C8;function lX(){return C8||(C8=1,function(t){(function(e,n,r){var a=256,i=6,o=52,s="random",c=r.pow(a,i),l=r.pow(2,o),u=l*2,f=a-1,v;function g(I,D,E){var T=[];D=D==!0?{entropy:!0}:D||{};var y=C(h(D.entropy?[I,S(n)]:I??p(),3),T),M=new d(T),_=function(){for(var O=M.g(i),w=c,x=0;O<l;)O=(O+x)*a,w*=a,x=M.g(1);for(;O>=u;)O/=2,w/=2,x>>>=1;return(O+x)/w};return _.int32=function(){return M.g(4)|0},_.quick=function(){return M.g(4)/4294967296},_.double=_,C(S(M.S),n),(D.pass||E||function(O,w,x,P){return P&&(P.S&&m(P,M),O.state=function(){return m(M,{})}),x?(r[s]=O,w):O})(_,y,"global"in D?D.global:this==r,D.state)}function d(I){var D,E=I.length,T=this,y=0,M=T.i=T.j=0,_=T.S=[];for(E||(I=[E++]);y<a;)_[y]=y++;for(y=0;y<a;y++)_[y]=_[M=f&M+I[y%E]+(D=_[y])],_[M]=D;(T.g=function(O){for(var w,x=0,P=T.i,R=T.j,L=T.S;O--;)w=L[P=f&P+1],x=x*a+L[f&(L[P]=L[R=f&R+w])+(L[R]=w)];return T.i=P,T.j=R,x})(a)}function m(I,D){return D.i=I.i,D.j=I.j,D.S=I.S.slice(),D}function h(I,D){var E=[],T=typeof I,y;if(D&&T=="object")for(y in I)try{E.push(h(I[y],D-1))}catch{}return E.length?E:T=="string"?I:I+"\0"}function C(I,D){for(var E=I+"",T,y=0;y<E.length;)D[f&y]=f&(T^=D[f&y]*19)+E.charCodeAt(y++);return S(D)}function p(){try{var I;return v&&(I=v.randomBytes)?I=I(a):(I=new Uint8Array(a),(e.crypto||e.msCrypto).getRandomValues(I)),S(I)}catch{var D=e.navigator,E=D&&D.plugins;return[+new Date,e,E,e.screen,S(n)]}}function S(I){return String.fromCharCode.apply(0,I)}if(C(r.random(),n),t.exports){t.exports=g;try{v=j0}catch{}}else r["seed"+s]=g})(typeof self<"u"?self:cX,[],Math)}(w2)),w2.exports}var KD,I8;function uX(){if(I8)return KD;I8=1;var t=KK(),e=YK(),n=JK(),r=tX(),a=rX(),i=iX(),o=lX();return o.alea=t,o.xor128=e,o.xorwow=n,o.xorshift7=r,o.xor4096=a,o.tychei=i,KD=o,KD}var fX=uX();const vX=Yc(fX),UM=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],gX=[1,0,0,0,1,0,0,0,1],FM=1e-6,VM=1e-12,{vtkErrorMacro:Ib,vtkWarningMacro:E1}=J;let Db=0;const D8=20;function Zm(t){return()=>Ib(`vtkMath::${t} - NOT IMPLEMENTED`)}function fd(t,e,n,r){let a;for(let i=0;i<e;i++)a=t[n*e+i],t[n*e+i]=t[r*e+i],t[r*e+i]=a}function Fg(t,e,n,r){let a;for(let i=0;i<e;i++)a=t[i*e+n],t[i*e+n]=t[i*e+r],t[i*e+r]=a}function aa(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:3;const e=Array(t);for(let n=0;n<t;++n)e[n]=0;return e}const dX=()=>Math.PI;function Oa(t){return t/180*Math.PI}function CS(t){return t*180/Math.PI}const{round:Vg,floor:kM,ceil:mX,min:hX,max:pX}=Math;function SX(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=1/0;for(let a=e,i=t.length;a<i;a+=n)t[a]<r&&(r=t[a]);return r}function CX(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=-1/0;for(let a=e,i=t.length;a<i;a+=n)r<t[a]&&(r=t[a]);return r}function IX(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=1/0,a=-1/0;for(let i=e,o=t.length;i<o;i+=n)t[i]<r&&(r=t[i]),a<t[i]&&(a=t[i]);return[r,a]}const DX=Zm("ceilLog2"),EX=Zm("factorial");function ys(t){let e=1;for(;e<t;)e*=2;return e}function kg(t){return t===ys(t)}function TX(t,e){let n=1;for(let r=1;r<=e;++r)n*=(t-r+1)/r;return Math.floor(n)}function yX(t,e){if(t<e)return 0;const n=aa(e);for(let r=0;r<e;++r)n[r]=r;return n}function MX(t,e,n){let r=0;for(let a=e-1;a>=0;--a)if(n[a]<t-e+a){let i=n[a]+1;for(;a<e;)n[a++]=i++;r=1;break}return r}function _X(t){vX(`${t}`,{global:!0}),Db=t}function OX(){return Db}function wX(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;const n=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:1)-t;return t+n*Math.random()}const PX=Zm("gaussian");function IS(t,e,n){return n[0]=t[0]+e[0],n[1]=t[1]+e[1],n[2]=t[2]+e[2],n}function kc(t,e,n){return n[0]=t[0]-e[0],n[1]=t[1]-e[1],n[2]=t[2]-e[2],n}function Eb(t,e){return t[0]*=e,t[1]*=e,t[2]*=e,t}function Tb(t,e){return t[0]*=e,t[1]*=e,t}function hT(t,e,n,r){return r[0]=t[0]+e[0]*n,r[1]=t[1]+e[1]*n,r[2]=t[2]+e[2]*n,r}function AX(t,e,n,r){return r[0]=t[0]+e[0]*n,r[1]=t[1]+e[1]*n,r}function Wn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function xX(t,e,n){n[0]=t[0]*e[0],n[1]=t[0]*e[1],n[2]=t[0]*e[2],n[3]=t[1]*e[0],n[4]=t[1]*e[1],n[5]=t[1]*e[2],n[6]=t[2]*e[0],n[7]=t[2]*e[1],n[8]=t[2]*e[2]}function Q0(t,e,n){const r=t[1]*e[2]-t[2]*e[1],a=t[2]*e[0]-t[0]*e[2],i=t[0]*e[1]-t[1]*e[0];return n[0]=r,n[1]=a,n[2]=i,n}function bl(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3;switch(e){case 1:return Math.abs(t);case 2:return Math.sqrt(t[0]*t[0]+t[1]*t[1]);case 3:return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);default:{let n=0;for(let r=0;r<e;r++)n+=t[r]*t[r];return Math.sqrt(n)}}}function T1(t){const e=bl(t);return e!==0&&(t[0]/=e,t[1]/=e,t[2]/=e),e}function RX(t,e,n,r){const a=t[0]*t[0],i=t[1]*t[1],o=t[2]*t[2],s=Math.sqrt(a+i+o);let c,l,u;a>i&&a>o?(c=0,l=1,u=2):i>o?(c=1,l=2,u=0):(c=2,l=0,u=1);const f=t[c]/s,v=t[l]/s,g=t[u]/s,d=Math.sqrt(f*f+g*g);if(r!==0){const m=Math.sin(r),h=Math.cos(r);e&&(e[c]=(g*h-f*v*m)/d,e[l]=m*d,e[u]=(-(f*h)-v*g*m)/d),n&&(n[c]=(-(g*m)-f*v*h)/d,n[l]=h*d,n[u]=(f*m-v*g*h)/d)}else e&&(e[c]=g/d,e[l]=0,e[u]=-f/d),n&&(n[c]=-f*v/d,n[l]=d,n[u]=-v*g/d)}function bX(t,e,n){const r=Wn(e,e);if(r===0)return n[0]=0,n[1]=0,n[2]=0,!1;const a=Wn(t,e)/r;for(let i=0;i<3;i++)n[i]=e[i];return Eb(n,a),!0}function pT(t,e){return t[0]*e[0]+t[1]*e[1]}function NX(t,e,n){const r=pT(e,e);if(r===0)return n[0]=0,n[1]=0,!1;const a=pT(t,e)/r;for(let i=0;i<2;i++)n[i]=e[i];return Tb(n,a),!0}function O0(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])+(t[2]-e[2])*(t[2]-e[2])}function LX(t,e){const n=[0,0,0];return Q0(t,e,n),Math.atan2(bl(n),Wn(t,e))}function UX(t,e,n){const r=Math.abs(t-n);return 1/Math.sqrt(2*Math.PI*e)*Math.exp(-(r**2)/(2*e))}function FX(t,e,n){const r=Math.abs(t-n);return Math.exp(-(r**2)/(2*e))}function VX(t,e,n){n[0]=t[0]*e[0],n[1]=t[0]*e[1],n[2]=t[1]*e[0],n[3]=t[1]*e[1]}function yb(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Mb(t){const e=yb(t);return e!==0&&(t[0]/=e,t[1]/=e),e}function Pa(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===2?e[0][0]*e[1][1]-e[1][0]*e[0][1]:e.length===4?e[0]*e[3]-e[1]*e[2]:Number.NaN}function kX(t,e){let n,r,a;const i=[0,0,0];for(let o=0;o<3;o++)a=Math.abs(t[o*3]),(r=Math.abs(t[o*3+1]))>a&&(a=r),(r=Math.abs(t[o*3+2]))>a&&(a=r),i[o]=1/a;a=i[0]*Math.abs(t[0]),n=0,(r=i[1]*Math.abs(t[3]))>=a&&(a=r,n=1),(r=i[2]*Math.abs(t[6]))>=a&&(n=2),n!==0&&(fd(t,3,n,0),i[n]=i[0]),e[0]=n,t[3]/=t[0],t[6]/=t[0],t[4]-=t[3]*t[1],t[7]-=t[6]*t[1],a=i[1]*Math.abs(t[4]),n=1,(r=i[2]*Math.abs(t[7]))>=a&&(n=2,fd(t,3,1,2),i[2]=i[1]),e[1]=n,t[7]/=t[4],t[5]-=t[3]*t[2],t[8]-=t[6]*t[2]+t[7]*t[5],e[2]=2}function GX(t,e,n){let r=n[e[0]];n[e[0]]=n[0],n[0]=r,r=n[e[1]],n[e[1]]=n[1],n[1]=r-t[3]*n[0],r=n[e[2]],n[e[2]]=n[2],n[2]=r-t[6]*n[0]-t[7]*n[1],n[2]/=t[8],n[1]=(n[1]-t[5]*n[2])/t[4],n[0]=(n[0]-t[1]*n[1]-t[2]*n[2])/t[0]}function BX(t,e,n){const r=t[0],a=t[1],i=t[2],o=t[3],s=t[4],c=t[5],l=t[6],u=t[7],f=t[8],v=+Pa(s,u,c,f),g=-Pa(o,l,c,f),d=+Pa(o,l,s,u),m=-Pa(a,u,i,f),h=+Pa(r,l,i,f),C=-Pa(r,l,a,u),p=+Pa(a,s,i,c),S=-Pa(r,o,i,c),I=+Pa(r,o,a,s),D=r*v+a*g+i*d,E=v*e[0]+m*e[1]+p*e[2],T=g*e[0]+h*e[1]+S*e[2],y=d*e[0]+C*e[1]+I*e[2];n[0]=E/D,n[1]=T/D,n[2]=y/D}function P2(t,e,n){const r=t[0]*e[0]+t[1]*e[1]+t[2]*e[2],a=t[3]*e[0]+t[4]*e[1]+t[5]*e[2],i=t[6]*e[0]+t[7]*e[1]+t[8]*e[2];n[0]=r,n[1]=a,n[2]=i}function ST(t,e,n){const r=[...t],a=[...e];for(let i=0;i<3;i++)n[i]=r[0]*a[i]+r[1]*a[i+3]+r[2]*a[i+6],n[i+3]=r[3]*a[i]+r[4]*a[i+3]+r[5]*a[i+6],n[i+6]=r[6]*a[i]+r[7]*a[i+3]+r[8]*a[i+6]}function WX(t,e,n,r,a,i,o){r!==a&&Ib("Number of columns of A must match number of rows of B.");const s=[...t],c=[...e];for(let l=0;l<n;l++)for(let u=0;u<i;u++){o[l*i+u]=0;for(let f=0;f<r;f++)o[l*i+u]+=s[l*r+f]*c[u+i*f]}}function Bf(t,e){let n;n=t[3],e[3]=t[1],e[1]=n,n=t[6],e[6]=t[2],e[2]=n,n=t[7],e[7]=t[5],e[5]=n,e[0]=t[0],e[4]=t[4],e[8]=t[8]}function HX(t,e){const n=t[0],r=t[1],a=t[2],i=t[3],o=t[4],s=t[5],c=t[6],l=t[7],u=t[8],f=+Pa(o,l,s,u),v=-Pa(i,c,s,u),g=+Pa(i,c,o,l),d=-Pa(r,l,a,u),m=+Pa(n,c,a,u),h=-Pa(n,c,r,l),C=+Pa(r,o,a,s),p=-Pa(n,i,a,s),S=+Pa(n,i,r,o),I=n*f+r*v+a*g;I===0&&E1("Matrix has 0 determinant"),e[0]=f/I,e[3]=v/I,e[6]=g/I,e[1]=d/I,e[4]=m/I,e[7]=h/I,e[2]=C/I,e[5]=p/I,e[8]=S/I}function tI(t){return t[0]*t[4]*t[8]+t[3]*t[7]*t[2]+t[6]*t[1]*t[5]-t[0]*t[7]*t[5]-t[3]*t[1]*t[8]-t[6]*t[4]*t[2]}function _b(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:FM;if(t.length!==e.length)return!1;function r(a,i){return Math.abs(a-e[i])<=n}return t.every(r)}const Jm=_b;function Ob(t){for(let e=0;e<3;e++)t[e*3]=t[e*3+1]=t[e*3+2]=0,t[e*3+e]=1}function wb(t,e){for(let n=0;n<t;n++){for(let r=0;r<t;r++)e[n*t+r]=0;e[n*t+n]=1}return e}function $X(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:FM;return Jm(t,UM,e)}function zX(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:FM;return Jm(t,gX,e)}function Pb(t,e){const n=t[0]*t[0],r=t[0]*t[1],a=t[0]*t[2],i=t[0]*t[3],o=t[1]*t[1],s=t[2]*t[2],c=t[3]*t[3],l=t[1]*t[2],u=t[1]*t[3],f=t[2]*t[3],v=o+s+c;let g=1/(n+v);const d=(n-v)*g;g*=2,e[0]=o*g+d,e[3]=(l+i)*g,e[6]=(u-a)*g,e[1]=(l-i)*g,e[4]=s*g+d,e[7]=(f+r)*g,e[2]=(u+a)*g,e[5]=(f-r)*g,e[8]=c*g+d}function A2(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!`${t}`.includes("e"))return+`${Math.round(`${t}e+${e}`)}e-${e}`;const n=`${t}`.split("e");let r="";return+n[1]+e>0&&(r="+"),+`${Math.round(`${+n[0]}e${r}${+n[1]+e}`)}e-${e}`}function CT(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return e[0]=A2(t[0],n),e[1]=A2(t[1],n),e[2]=A2(t[2],n),e}function eh(t,e,n,r){let a,i,o,s,c,l,u,f,v,g,d,m,h,C,p,S;const I=aa(e),D=aa(e),E=(y,M,_)=>{C=y[M],h=y[_],y[M]=C-m*(h+C*g),y[_]=h+m*(C-h*g)};for(wb(e,r),c=0;c<e;c++)I[c]=n[c]=t[c+c*e],D[c]=0;for(a=0;a<D8;a++){for(d=0,c=0;c<e-1;c++)for(s=c+1;s<e;s++)d+=Math.abs(t[c*e+s]);if(d===0)break;for(a<3?u=.2*d/(e*e):u=0,c=0;c<e-1;c++)for(s=c+1;s<e;s++)if(C=100*Math.abs(t[c*e+s]),a>3&&Math.abs(n[c])+C===Math.abs(n[c])&&Math.abs(n[s])+C===Math.abs(n[s]))t[c*e+s]=0;else if(Math.abs(t[c*e+s])>u){for(h=n[s]-n[c],Math.abs(h)+C===Math.abs(h)?v=t[c*e+s]/h:(f=.5*h/t[c*e+s],v=1/(Math.abs(f)+Math.sqrt(1+f*f)),f<0&&(v=-v)),p=1/Math.sqrt(1+v*v),m=v*p,g=m/(1+p),h=v*t[c*e+s],D[c]-=h,D[s]+=h,n[c]-=h,n[s]+=h,t[c*e+s]=0,i=0;i<=c-1;i++)E(t,i*e+c,i*e+s);for(i=c+1;i<=s-1;i++)E(t,c*e+i,i*e+s);for(i=s+1;i<e;i++)E(t,c*e+i,s*e+i);for(i=0;i<e;i++)E(r,i*e+c,i*e+s)}for(c=0;c<e;c++)I[c]+=D[c],n[c]=I[c],D[c]=0}if(a>=D8)return E1("vtkMath::Jacobi: Error extracting eigenfunctions"),0;for(i=0;i<e-1;i++){for(o=i,S=n[o],a=i+1;a<e;a++)(n[a]>=S||Math.abs(n[a]-S)<VM)&&(o=a,S=n[o]);o!==i&&(n[o]=n[i],n[i]=S,Fg(r,e,i,o))}const T=(e>>1)+(e&1);for(l=0,a=0;a<e*e;a++)r[a]>=0&&l++;if(l<T)for(a=0;a<e;a++)r[a*e+i]*=-1;return 1}function Ab(t,e){const n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];n[0]=t[0]+t[4]+t[8],n[5]=t[0]-t[4]-t[8],n[10]=-t[0]+t[4]-t[8],n[15]=-t[0]-t[4]+t[8],n[1]=n[4]=t[7]-t[5],n[2]=n[8]=t[2]-t[6],n[3]=n[12]=t[3]-t[1],n[6]=n[9]=t[3]+t[1],n[7]=n[13]=t[2]+t[6],n[11]=n[14]=t[7]+t[5];const r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],a=[0,0,0,0],i=[...n];eh(i,4,a,r),e[0]=r[0],e[1]=r[4],e[2]=r[8],e[3]=r[12]}function qX(t,e,n){const r=t[0]*e[0],a=t[0]*e[1],i=t[0]*e[2],o=t[0]*e[3],s=t[1]*e[0],c=t[1]*e[1],l=t[1]*e[2],u=t[1]*e[3],f=t[2]*e[0],v=t[2]*e[1],g=t[2]*e[2],d=t[2]*e[3],m=t[3]*e[0],h=t[3]*e[1],C=t[3]*e[2],p=t[3]*e[3];n[0]=r-c-g-p,n[1]=a+s+d-C,n[2]=i-u+f+h,n[3]=o+l-v+m}function xb(t,e){for(let v=0;v<9;v++)e[v]=t[v];const n=aa(3),r=aa(3);let a;for(let v=0;v<3;v++){const g=Math.abs(e[v*3]),d=Math.abs(e[v*3+1]),m=Math.abs(e[v*3+2]);a=d>g?d:g,a=m>a?m:a,n[v]=1,a!==0&&(n[v]/=a)}const i=Math.abs(e[0])*n[0],o=Math.abs(e[3])*n[1],s=Math.abs(e[6])*n[2];r[0]=0,a=i,o>=a&&(a=o,r[0]=1),s>=a&&(r[0]=2),r[0]!==0&&(Fg(e,3,r[0],0),n[r[0]]=n[0]);const c=Math.abs(e[4])*n[1],l=Math.abs(e[7])*n[2];r[1]=1,a=c,l>=a&&(r[1]=2,Fg(e,3,1,2)),r[2]=2;let u=0;if(tI(e)<0){u=1;for(let v=0;v<9;v++)e[v]=-e[v]}const f=aa(4);if(Ab(e,f),Pb(f,e),u)for(let v=0;v<9;v++)e[v]=-e[v];r[1]!==1&&Fg(e,3,r[1],1),r[0]!==0&&Fg(e,3,r[0],0)}function Rb(t,e,n){let r,a,i,o,s,c;const l=[...t];if(eh(l,3,e,n),e[0]===e[1]&&e[0]===e[2]){Ob(n);return}for(Bf(n,n),r=0;r<3;r++)if(e[(r+1)%3]===e[(r+2)%3]){for(c=Math.abs(n[r*3]),o=0,a=1;a<3;a++)c<(s=Math.abs(n[r*3+a]))&&(c=s,o=a);o!==r&&(s=e[o],e[o]=e[r],e[r]=s,fd(n,3,r,o)),n[o*3+o]<0&&(n[o*3]=-n[o*3],n[o*3+1]=-n[o*3+1],n[o*3+2]=-n[o*3+2]),a=(o+1)%3,i=(o+2)%3,n[a*3]=0,n[a*3+1]=0,n[a*3+2]=0,n[a*3+a]=1;const u=Q0([n[o*3],n[o*3+1],n[o*3+2]],[n[a*3],n[a*3+1],n[a*3+2]],[]);T1(u);const f=Q0(u,[n[o*3],n[o*3+1],n[o*3+2]],[]);for(let v=0;v<3;v++)n[i*3+v]=u[v],n[a*3+v]=f[v];Bf(n,n);return}for(c=Math.abs(n[0]),o=0,r=1;r<3;r++)c<(s=Math.abs(n[r*3]))&&(c=s,o=r);if(o!==0){const u=e[o];e[o]=e[0],e[0]=u,fd(n,3,o,0)}if(Math.abs(n[4])<Math.abs(n[7])){const u=e[2];e[2]=e[1],e[1]=u,fd(n,3,1,2)}for(r=0;r<2;r++)n[r*3+r]<0&&(n[r*3]=-n[r*3],n[r*3+1]=-n[r*3+1],n[r*3+2]=-n[r*3+2]);tI(n)<0&&(n[6]=-n[6],n[7]=-n[7],n[8]=-n[8]),Bf(n,n)}function jX(t,e,n,r){let a;const i=[...t],o=tI(i);if(o<0)for(a=0;a<9;a++)i[a]=-i[a];xb(i,e),Bf(i,i),ST(i,e,r),Rb(r,n,r),ST(e,r,e),Bf(r,r),o<0&&(n[0]=-n[0],n[1]=-n[1],n[2]=-n[2])}function GM(t,e,n){let r,a,i,o,s=0,c,l,u;const f=aa(n);for(r=0;r<n;r++){for(o=0,a=0;a<n;a++)(u=Math.abs(t[r*n+a]))>o&&(o=u);if(o===0)return E1("Unable to factor linear system"),0;f[r]=1/o}for(a=0;a<n;a++){for(r=0;r<a;r++){for(c=t[r*n+a],i=0;i<r;i++)c-=t[r*n+i]*t[i*n+a];t[r*n+a]=c}for(o=0,r=a;r<n;r++){for(c=t[r*n+a],i=0;i<a;i++)c-=t[r*n+i]*t[i*n+a];t[r*n+a]=c,(l=f[r]*Math.abs(c))>=o&&(o=l,s=r)}if(a!==s){for(i=0;i<n;i++)l=t[s*n+i],t[s*n+i]=t[a*n+i],t[a*n+i]=l;f[s]=f[a]}if(e[a]=s,Math.abs(t[a*n+a])<=VM)return E1("Unable to factor linear system"),0;if(a!==n-1)for(l=1/t[a*n+a],r=a+1;r<n;r++)t[r*n+a]*=l}return 1}function BM(t,e,n,r){let a,i,o,s,c;for(o=-1,a=0;a<r;a++){if(s=e[a],c=n[s],n[s]=n[a],o>=0)for(i=o;i<=a-1;i++)c-=t[a*r+i]*n[i];else c!==0&&(o=a);n[a]=c}for(a=r-1;a>=0;a--){for(c=n[a],i=a+1;i<r;i++)c-=t[a*r+i]*n[i];n[a]=c/t[a*r+a]}}function bb(t,e,n){if(n===2){const a=aa(2),i=Pa(t[0],t[1],t[2],t[3]);return i===0?0:(a[0]=(t[3]*e[0]-t[1]*e[1])/i,a[1]=(-(t[2]*e[0])+t[0]*e[1])/i,e[0]=a[0],e[1]=a[1],1)}if(n===1)return t[0]===0?0:(e[0]/=t[0],1);const r=aa(n);return GM(t,r,n)===0?0:(BM(t,r,e,n),1)}function Nb(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;const i=r||aa(n),o=a||aa(n);if(GM(t,i,n)===0)return null;for(let s=0;s<n;s++){for(let c=0;c<n;c++)o[c]=0;o[s]=1,BM(t,i,o,n);for(let c=0;c<n;c++)e[c*n+s]=o[c]}return e}function QX(t,e){let n=+Number.MAX_VALUE,r=-Number.MAX_VALUE;for(let a=0;a<e;a++)for(let i=a;i<e;i++)Math.abs(t[a*e+i])>r&&(r=Math.abs(t[a*e+i]));for(let a=0;a<e;a++)Math.abs(t[a*e+a])<n&&(n=Math.abs(t[a*e+a]));return n===0?Number.MAX_VALUE:r/n}function KX(t,e,n){return eh(t,3,e,n)}function IT(t,e,n,r){if(t<n)return E1("Insufficient number of samples. Underdetermined."),0;let a,i,o;const s=aa(n*n),c=aa(n),l=aa(n*n);for(o=0;o<t;o++)for(a=0;a<n;a++)for(i=a;i<n;i++)s[a*n+i]+=e[o*n+a]*e[o*n+i];for(a=0;a<n;a++)for(i=0;i<a;i++)s[a*n+i]=s[i*n+a];for(eh(s,n,c,l),a=0;a<n;a++)r[a]=l[a*n+n-1];return 1}function XX(t,e,n,r,a,i){let o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:!0;if(t<n||t<a)return E1("Insufficient number of samples. Underdetermined."),0;const s=aa(a);let c=1,l,u=0,f,v,g,d=0;if(o){for(v=0;v<a;v++)s[v]=1;for(f=0;f<t;f++)for(v=0;v<a;v++)Math.abs(r[f*a+v])>VM&&(c=0,s[v]=0);if(c&&a===1)return E1("Detected homogeneous system (Y=0), calling SolveHomogeneousLeastSquares()"),IT(t,e,n,i);if(c)d=1;else for(v=0;v<a;v++)s[v]&&(d=1)}d&&(l=aa(n),u=IT(t,e,n,l));const m=aa(n*n),h=aa(n*n),C=aa(n*a);for(g=0;g<t;g++)for(f=0;f<n;f++){for(v=f;v<n;v++)m[f*n+v]+=e[g*n+f]*e[g*n+v];for(v=0;v<a;v++)C[f*a+v]+=e[g*n+f]*r[g*a+v]}for(f=0;f<n;f++)for(v=0;v<f;v++)m[f*n+v]=m[v*n+f];const p=Nb(m,h,n);if(p)for(f=0;f<n;f++)for(v=0;v<a;v++)for(i[f*a+v]=0,g=0;g<n;g++)i[f*a+v]+=h[f*n+g]*C[g*a+v];if(d){for(v=0;v<a;v++)if(s[v])for(f=0;f<n;f++)i[f*a+v]=l[f*a]}return d?u&&p:p}function YX(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,.5,1];switch(t.length){case 3:return e[0]=parseInt(t[0],16)*17/255,e[1]=parseInt(t[1],16)*17/255,e[2]=parseInt(t[2],16)*17/255,e;case 4:return e[0]=parseInt(t[1],16)*17/255,e[1]=parseInt(t[2],16)*17/255,e[2]=parseInt(t[3],16)*17/255,e;case 6:return e[0]=parseInt(t.substr(0,2),16)/255,e[1]=parseInt(t.substr(2,2),16)/255,e[2]=parseInt(t.substr(4,2),16)/255,e;case 7:return e[0]=parseInt(t.substr(1,2),16)/255,e[1]=parseInt(t.substr(3,2),16)/255,e[2]=parseInt(t.substr(5,2),16)/255,e;case 9:return e[0]=parseInt(t.substr(1,2),16)/255,e[1]=parseInt(t.substr(3,2),16)/255,e[2]=parseInt(t.substr(5,2),16)/255,e[3]=parseInt(t.substr(7,2),16)/255,e;default:return e}}function Gg(t,e){let n,r;const[a,i,o]=t,s=1/3,c=1/6,l=2/3;let u=a,f=a;i>u?u=i:i<f&&(f=i),o>u?u=o:o<f&&(f=o);const v=u;v>0?r=(u-f)/u:r=0,r>0?(a===u?n=c*(i-o)/(u-f):i===u?n=s+c*(o-a)/(u-f):n=l+c*(a-i)/(u-f),n<0&&(n+=1)):n=0,e[0]=n,e[1]=r,e[2]=v}function qu(t,e){const[n,r,a]=t,i=1/3,o=1/6,s=2/3,c=5/6;let l,u,f;n>o&&n<=i?(u=1,l=(i-n)/o,f=0):n>i&&n<=.5?(u=1,f=(n-i)/o,l=0):n>.5&&n<=s?(f=1,u=(s-n)/o,l=0):n>s&&n<=c?(f=1,l=(n-s)/o,u=0):n>c&&n<=1?(l=1,f=(1-n)/o,u=0):(l=1,u=n/o,f=0),l=r*l+(1-r),u=r*u+(1-r),f=r*f+(1-r),l*=a,u*=a,f*=a,e[0]=l,e[1]=u,e[2]=f}function Lb(t,e){const[n,r,a]=t;let i=(n+16)/116,o=r/500+i,s=i-a/200;i**3>.008856?i**=3:i=(i-16/116)/7.787,o**3>.008856?o**=3:o=(o-16/116)/7.787,s**3>.008856?s**=3:s=(s-16/116)/7.787;const c=.9505,l=1,u=1.089;e[0]=c*o,e[1]=l*i,e[2]=u*s}function Ub(t,e){const[n,r,a]=t,i=.9505,o=1,s=1.089;let c=n/i,l=r/o,u=a/s;c>.008856?c**=1/3:c=7.787*c+16/116,l>.008856?l**=1/3:l=7.787*l+16/116,u>.008856?u**=1/3:u=7.787*u+16/116,e[0]=116*l-16,e[1]=500*(c-l),e[2]=200*(l-u)}function Fb(t,e){const[n,r,a]=t;let i=n*3.2406+r*-1.5372+a*-.4986,o=n*-.9689+r*1.8758+a*.0415,s=n*.0557+r*-.204+a*1.057;i>.0031308?i=1.055*i**(1/2.4)-.055:i*=12.92,o>.0031308?o=1.055*o**(1/2.4)-.055:o*=12.92,s>.0031308?s=1.055*s**(1/2.4)-.055:s*=12.92;let c=i;c<o&&(c=o),c<s&&(c=s),c>1&&(i/=c,o/=c,s/=c),i<0&&(i=0),o<0&&(o=0),s<0&&(s=0),e[0]=i,e[1]=o,e[2]=s}function Vb(t,e){let[n,r,a]=t;n>.04045?n=((n+.055)/1.055)**2.4:n/=12.92,r>.04045?r=((r+.055)/1.055)**2.4:r/=12.92,a>.04045?a=((a+.055)/1.055)**2.4:a/=12.92,e[0]=n*.4124+r*.3576+a*.1805,e[1]=n*.2126+r*.7152+a*.0722,e[2]=n*.0193+r*.1192+a*.9505}function Zu(t,e){const n=[0,0,0];Vb(t,n),Ub(n,e)}function DS(t,e){const n=[0,0,0];Lb(t,n),Fb(n,e)}function Rv(t){return t[0]=1,t[1]=-1,t[2]=1,t[3]=-1,t[4]=1,t[5]=-1,t}function x2(t){return!(t[1]-t[0]<0)}function ZX(t,e,n){return n[0]=Math.min(t[0],e[0]),n[1]=Math.max(t[0],e[0]),n[2]=Math.min(t[1],e[1]),n[3]=Math.max(t[1],e[1]),n[4]=Math.min(t[2],e[2]),n[5]=Math.max(t[2],e[2]),n}function e0(t,e,n){return t<e?e:t>n?n:t}function DT(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[0,0,0];return r[0]=e0(t[0],e[0],n[0]),r[1]=e0(t[1],e[1],n[1]),r[2]=e0(t[2],e[2],n[2]),r}function JX(t,e){let n=0;return e[0]!==e[1]&&(t<e[0]?n=e[0]:t>e[1]?n=e[1]:n=t,n=(n-e[0])/(e[1]-e[0])),n}const eY=Zm("GetScalarTypeFittingRange"),tY=Zm("GetAdjustedScalarRange");function nY(t,e){if(!t||!e)return 0;for(let n=0;n<6;n+=2)if(t[n]<e[n]||t[n]>e[n+1]||t[n+1]<e[n]||t[n+1]>e[n+1])return 0;return 1}function rY(t,e,n){if(!t||!e)return 0;for(let r=0;r<6;r+=2)if(t[r]+n[r/2]<e[r]||t[r]-n[r/2]>e[r+1]||t[r+1]+n[r/2]<e[r]||t[r+1]-n[r/2]>e[r+1])return 0;return 1}function aY(t,e,n){if(!t||!e||!n)return 0;for(let r=0;r<3;r++)if(t[r]+n[r]<e[2*r]||t[r]-n[r]>e[2*r+1])return 0;return 1}function iY(t,e,n,r){const a=aa(3),i=aa(3),o=aa(3),s=aa(3),c=aa(3),l=aa(3);for(let I=0;I<3;++I)a[I]=t[I]-e[I],i[I]=e[I]-n[I],o[I]=n[I]-t[I],s[I]=-a[I],c[I]=-i[I],l[I]=-o[I];const u=bl(s),f=bl(c),v=bl(o),g=aa(3);Q0(a,i,g);const d=bl(g),m=u*f*v/(2*d),h=2*d*d,C=f*f*Wn(a,l)/h,p=v*v*Wn(s,i)/h,S=u*u*Wn(o,c)/h;for(let I=0;I<3;++I)r[I]=C*t[I]+p*e[I]+S*n[I];return m}const oY=1/0,sY=-1/0,kb=t=>!Number.isFinite(t),{isFinite:cY,isNaN:ET}=Number,ES=ET;function nu(){return[].concat([Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE])}function lY(t){let e=-1,n=-1;for(let r=0;r<t.length;r++){const a=Math.abs(t[r]);a>e&&(n=r,e=a)}return n}function Gb(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3;const n=new Array(e),r=new Array(e);for(let i=0;i<e;++i)n[i]=i,r[i]=i;for(let i=e-1;i>0;i--){let o=-1/0,s=0,c=0;for(let l=0;l<=i;++l){const u=n[l];for(let f=0;f<=i;++f){const v=r[f],g=Math.abs(t[u+e*v]);g>o&&(o=g,s=l,c=f)}}[n[i],n[s]]=[n[s],n[i]],[r[i],r[c]]=[r[c],r[i]]}const a=new Array(e*e).fill(0);for(let i=0;i<e;++i){const o=n[i]+e*r[i];a[o]=t[o]<0?-1:1}return a}function Bb(t){const e=Math.floor(t*255);return e>15?e.toString(16):`0${e.toString(16)}`}function uY(t){return`${arguments.length>1&&arguments[1]!==void 0?arguments[1]:"#"}${t.map(Bb).join("")}`}function rp(t){return Math.round(t*255)}function fY(t){return t.length===3?`rgb(${t.map(rp).join(", ")})`:`rgba(${rp(t[0]||0)}, ${rp(t[1]||0)}, ${rp(t[2]||0)}, ${t[3]||0})`}var Cn={Pi:dX,radiansFromDegrees:Oa,degreesFromRadians:CS,round:Vg,floor:kM,ceil:mX,ceilLog2:DX,min:hX,max:pX,arrayMin:SX,arrayMax:CX,arrayRange:IX,isPowerOfTwo:kg,nearestPowerOfTwo:ys,factorial:EX,binomial:TX,beginCombination:yX,nextCombination:MX,randomSeed:_X,getSeed:OX,random:wX,gaussian:PX,add:IS,subtract:kc,multiplyScalar:Eb,multiplyScalar2D:Tb,multiplyAccumulate:hT,multiplyAccumulate2D:AX,dot:Wn,outer:xX,cross:Q0,norm:bl,normalize:T1,perpendiculars:RX,projectVector:bX,projectVector2D:NX,distance2BetweenPoints:O0,angleBetweenVectors:LX,gaussianAmplitude:UX,gaussianWeight:FX,dot2D:pT,outer2D:VX,norm2D:yb,normalize2D:Mb,determinant2x2:Pa,LUFactor3x3:kX,LUSolve3x3:GX,linearSolve3x3:BX,multiply3x3_vect3:P2,multiply3x3_mat3:ST,multiplyMatrix:WX,transpose3x3:Bf,invert3x3:HX,identity3x3:Ob,identity:wb,isIdentity:$X,isIdentity3x3:zX,determinant3x3:tI,quaternionToMatrix3x3:Pb,areEquals:_b,areMatricesEqual:Jm,roundNumber:A2,roundVector:CT,matrix3x3ToQuaternion:Ab,multiplyQuaternion:qX,orthogonalize3x3:xb,diagonalize3x3:Rb,singularValueDecomposition3x3:jX,solveLinearSystem:bb,invertMatrix:Nb,luFactorLinearSystem:GM,luSolveLinearSystem:BM,estimateMatrixCondition:QX,jacobi:KX,jacobiN:eh,solveHomogeneousLeastSquares:IT,solveLeastSquares:XX,hex2float:YX,rgb2hsv:Gg,hsv2rgb:qu,lab2xyz:Lb,xyz2lab:Ub,xyz2rgb:Fb,rgb2xyz:Vb,rgb2lab:Zu,lab2rgb:DS,uninitializeBounds:Rv,areBoundsInitialized:x2,computeBoundsFromPoints:ZX,clampValue:e0,clampVector:DT,clampAndNormalizeValue:JX,getScalarTypeFittingRange:eY,getAdjustedScalarRange:tY,extentIsWithinOtherExtent:nY,boundsIsWithinOtherBounds:rY,pointIsWithinBounds:aY,solve3PointCircle:iY,inf:oY,negInf:sY,isInf:kb,isNan:ET,isNaN:ET,isFinite:cY,createUninitializedBounds:nu,getMajorAxisIndex:lY,getSparseOrthogonalMatrix:Gb,floatToHex2:Bb,floatRGB2HexCode:uY,float2CssRGBA:fY};const{vtkErrorMacro:vY}=Bi,{DefaultDataType:gY}=db,dY=1e-6;function TT(t,e,n){const r=t.length;let a=Number.MAX_VALUE,i=-Number.MAX_VALUE,o,s;for(s=e;s<r;s+=n)if(!Number.isNaN(t[s])){a=t[s],i=a;break}for(;s<r;s+=n)o=t[s],o<a?a=o:o>i&&(i=o);return{min:a,max:i}}function mY(){let t=Number.MAX_VALUE,e=-Number.MAX_VALUE,n=0,r=0;return{add(a){t>a&&(t=a),e<a&&(e=a),n++,r+=a},get(){return{min:t,max:e,count:n,sum:r,mean:r/n}},getRange(){return{min:t,max:e}}}}function Wb(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;if(e<0&&n>1){const a=t.length/n,i=new Float64Array(a);for(let o=0,s=0;o<a;++o){for(let c=s+n;s<c;++s)i[o]+=t[s]*t[s];i[o]**=.5}return TT(i,0,1)}return TT(t,e<0?0:e,n)}function E8(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const n=t||[];for(;n.length<=e;)n.push(null);return n}function WM(t){return Object.prototype.toString.call(t).slice(8,-1)}function hY(t){const e=t.getNumberOfComponents();let n=0;const r=new Array(e);for(let a=0;a<t.getNumberOfTuples();++a){t.getTuple(a,r);const i=bl(r,e);i>n&&(n=i)}return n}const pY={computeRange:Wb,createRangeHelper:mY,fastComputeRange:TT,getDataType:WM,getMaxNorm:hY};function SY(t,e){e.classHierarchy.push("vtkDataArray");function n(r){if(r<0)return!1;const a=t.getNumberOfComponents(),i=e.values.length/(a>0?a:1);if(r===i)return!0;if(r>i){const o=e.values;return e.values=Av(e.dataType,(r+i)*a),e.values.set(o),!0}return e.size>r*a&&(e.size=r*a,t.dataChange()),!0}t.dataChange=()=>{e.ranges=null,t.modified()},t.resize=r=>{n(r);const a=r*t.getNumberOfComponents();return e.size!==a?(e.size=a,t.dataChange(),!0):!1},t.initialize=()=>{t.resize(0)},t.getElementComponentSize=()=>e.values.BYTES_PER_ELEMENT,t.getComponent=function(r){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.values[r*e.numberOfComponents+a]},t.setComponent=(r,a,i)=>{i!==e.values[r*e.numberOfComponents+a]&&(e.values[r*e.numberOfComponents+a]=i,t.dataChange())},t.getValue=r=>{const a=r/e.numberOfComponents,i=r%e.numberOfComponents;return t.getComponent(a,i)},t.setValue=(r,a)=>{const i=r/e.numberOfComponents,o=r%e.numberOfComponents;t.setComponent(i,o,a)},t.getData=()=>e.size===e.values.length?e.values:e.values.subarray(0,e.size),t.getRange=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1,a=r;a<0&&(a=e.numberOfComponents===1?0:e.numberOfComponents);let i=null;return e.ranges||(e.ranges=E8(e.ranges,e.numberOfComponents)),i=e.ranges[a],i?(e.rangeTuple[0]=i.min,e.rangeTuple[1]=i.max,e.rangeTuple):(i=Wb(t.getData(),r,e.numberOfComponents),e.ranges[a]=i,e.rangeTuple[0]=i.min,e.rangeTuple[1]=i.max,e.rangeTuple)},t.setRange=(r,a)=>{e.ranges||(e.ranges=E8(e.ranges,e.numberOfComponents));const i={min:r.min,max:r.max};return e.ranges[a]=i,e.rangeTuple[0]=i.min,e.rangeTuple[1]=i.max,e.rangeTuple},t.setTuple=(r,a)=>{const i=r*e.numberOfComponents;for(let o=0;o<e.numberOfComponents;o++)e.values[i+o]=a[o]},t.setTuples=(r,a)=>{let i=r*e.numberOfComponents;const o=Math.min(a.length,e.size-i);for(let s=0;s<o;)e.values[i++]=a[s++]},t.insertTuple=(r,a)=>(e.size<=r*e.numberOfComponents&&(e.size=(r+1)*e.numberOfComponents,n(r+1)),t.setTuple(r,a),r),t.insertTuples=(r,a)=>{const i=r+a.length/e.numberOfComponents;return e.size<i*e.numberOfComponents&&(e.size=i*e.numberOfComponents,n(i)),t.setTuples(r,a),i},t.insertNextTuple=r=>{const a=e.size/e.numberOfComponents;return t.insertTuple(a,r)},t.insertNextTuples=r=>{const a=e.size/e.numberOfComponents;return t.insertTuples(a,r)},t.findTuple=function(r){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:dY;for(let i=0;i<e.size;i+=e.numberOfComponents)if(Math.abs(r[0]-e.values[i])<=a){let o=!0;for(let s=1;s<e.numberOfComponents;++s)if(Math.abs(r[s]-e.values[i+s])>a){o=!1;break}if(o)return i/e.numberOfComponents}return-1},t.getTuple=function(r){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const i=e.numberOfComponents||1,o=r*i;switch(i){case 4:a[3]=e.values[o+3];case 3:a[2]=e.values[o+2];case 2:a[1]=e.values[o+1];case 1:a[0]=e.values[o];break;default:for(let s=i-1;s>=0;--s)a[s]=e.values[o+s]}return a},t.getTuples=(r,a)=>{const i=(r??0)*e.numberOfComponents,o=(a??t.getNumberOfTuples())*e.numberOfComponents,s=t.getData().subarray(i,o);return s.length>0?s:null},t.getTupleLocation=function(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:1)*e.numberOfComponents},t.getNumberOfComponents=()=>e.numberOfComponents,t.getNumberOfValues=()=>e.size,t.getNumberOfTuples=()=>e.size/e.numberOfComponents,t.getDataType=()=>e.dataType,t.newClone=()=>$b({empty:!0,name:e.name,dataType:e.dataType,numberOfComponents:e.numberOfComponents}),t.getName=()=>(e.name||(t.modified(),e.name=`vtkDataArray${t.getMTime()}`),e.name),t.setData=(r,a)=>{e.values=r,e.size=r.length,e.dataType=WM(r),a&&(e.numberOfComponents=a),e.size%e.numberOfComponents!==0&&(e.numberOfComponents=1),t.dataChange()},t.getState=()=>{if(e.deleted)return null;const r={...e,vtkClass:t.getClassName()};r.values=Array.from(r.values),delete r.buffer,Object.keys(r).forEach(i=>{r[i]||delete r[i]});const a={};return Object.keys(r).sort().forEach(i=>{a[i]=r[i]}),a.mtime&&delete a.mtime,a},t.deepCopy=r=>{const a=t.getDataType(),i=e.values;t.shallowCopy(r),(i==null?void 0:i.length)>=r.getNumberOfValues()&&a===r.getDataType()?(i.set(r.getData()),e.values=i,t.dataChange()):t.setData(r.getData().slice())},t.interpolateTuple=(r,a,i,o,s,c)=>{const l=e.numberOfComponents||1;(l!==a.getNumberOfComponents()||l!==o.getNumberOfComponents())&&vY("numberOfComponents must match");const u=a.getTuple(i),f=o.getTuple(s),v=[];switch(v.length=l,l){case 4:v[3]=u[3]+(f[3]-u[3])*c;case 3:v[2]=u[2]+(f[2]-u[2])*c;case 2:v[1]=u[1]+(f[1]-u[1])*c;case 1:v[0]=u[0]+(f[0]-u[0])*c;break;default:for(let g=0;g<l;g++)v[g]=u[g]+(f[g]-u[g])*c}return t.insertTuple(r,v)}}const CY={name:"",numberOfComponents:1,dataType:gY,rangeTuple:[0,0]};function Hb(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Object.assign(e,CY,n),!e.empty&&!e.values&&!e.size)throw new TypeError("Cannot create vtkDataArray object without: size > 0, values");if(e.values?Array.isArray(e.values)&&(e.values=JC(e.dataType,e.values)):e.values=Av(e.dataType,e.size),e.values&&(e.size=e.size??e.values.length,e.dataType=WM(e.values)),Yr(t,e),Km(t,e,["name","numberOfComponents"]),e.size%e.numberOfComponents!==0)throw new RangeError("model.size is not a multiple of model.numberOfComponents");SY(t,e)}const $b=dr(Hb,"vtkDataArray");var fn={newInstance:$b,extend:Hb,...pY,...db};const{vtkErrorMacro:IY}=J,DY=["Build","Render"];function EY(t,e){e.classHierarchy.push("vtkViewNode"),t.build=r=>{},t.render=r=>{},t.traverse=r=>{const a=r.getTraverseOperation(),i=t[a];if(i){i(r);return}t.apply(r,!0);for(let o=0;o<e.children.length;o++)e.children[o].traverse(r);t.apply(r,!1)},t.apply=(r,a)=>{const i=t[r.getOperation()];i&&i(a,r)},t.getViewNodeFor=r=>{if(e.renderable===r)return t;for(let a=0;a<e.children.length;++a){const o=e.children[a].getViewNodeFor(r);if(o)return o}},t.getFirstAncestorOfType=r=>e._parent?e._parent.isA(r)?e._parent:e._parent.getFirstAncestorOfType(r):null,t.getLastAncestorOfType=r=>{if(!e._parent)return null;const a=e._parent.getLastAncestorOfType(r);return a||(e._parent.isA(r)?e._parent:null)},t.addMissingNode=r=>{if(!r)return;const a=e._renderableChildMap.get(r);if(a!==void 0)return a.setVisited(!0),a;const i=t.createViewNode(r);if(i)return i.setParent(t),i.setVisited(!0),e._renderableChildMap.set(r,i),e.children.push(i),i},t.addMissingNodes=r=>{if(!(!r||!r.length))for(let a=0;a<r.length;++a){const i=r[a];t.addMissingNode(i)}},t.addMissingChildren=r=>{if(!(!r||!r.length))for(let a=0;a<r.length;++a){const i=r[a];if(e.children.indexOf(i)===-1){i.setParent(t),e.children.push(i);const s=i.getRenderable();s&&e._renderableChildMap.set(s,i)}i.setVisited(!0)}},t.removeNode=r=>{const a=e.children.findIndex(o=>o===r);if(a<0)return!1;const i=r.getRenderable();return i&&e._renderableChildMap.delete(i),r.delete(),e.children.splice(a,1),!0},t.prepareNodes=()=>{for(let r=0;r<e.children.length;++r)e.children[r].setVisited(!1)},t.setVisited=r=>{e.visited=r},t.removeUnusedNodes=()=>{let r=0;for(let a=0;a<e.children.length;++a){const i=e.children[a];if(i.getVisited())e.children[r++]=i,i.setVisited(!1);else{const s=i.getRenderable();s&&e._renderableChildMap.delete(s),i.delete()}}e.children.length=r},t.createViewNode=r=>{if(!e.myFactory)return IY("Cannot create view nodes without my own factory"),null;const a=e.myFactory.createNode(r);return a&&a.setRenderable(r),a};const n=t.delete;t.delete=()=>{for(let r=0;r<e.children.length;r++)e.children[r].delete();n()}}const TY={renderable:null,myFactory:null,children:[],visited:!1};function zb(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,TY,n),J.obj(t,e),J.event(t,e,"event"),e._renderableChildMap=new Map,J.get(t,e,["visited"]),J.setGet(t,e,["_parent","renderable","myFactory"]),J.getArray(t,e,["children"]),J.moveToProtected(t,e,["parent"]),EY(t,e)}const yY=J.newInstance(zb,"vtkViewNode");var Fr={newInstance:yY,extend:zb,PASS_TYPES:DY};function MY(t,e){e.overrides||(e.overrides={}),e.classHierarchy.push("vtkViewNodeFactory"),t.createNode=n=>{if(n.isDeleted())return null;let r=0,a=n.getClassName(r++),i=!1;const o=Object.keys(e.overrides);for(;a&&!i;)o.indexOf(a)!==-1?i=!0:a=n.getClassName(r++);if(!i)return null;const s=e.overrides[a]();return s.setMyFactory(t),s}}const _Y={};function qb(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,_Y,n),J.obj(t,e),MY(t,e)}const OY=J.newInstance(qb,"vtkViewNodeFactory");var HM={newInstance:OY,extend:qb};const jb=Object.create(null);function Za(t,e){jb[t]=e}function wY(t,e){e.classHierarchy.push("vtkOpenGLViewNodeFactory")}const PY={};function Qb(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,PY,n),e.overrides=jb,HM.extend(t,e,n),wY(t,e)}const AY=J.newInstance(Qb,"vtkOpenGLViewNodeFactory");var xY={newInstance:AY,extend:Qb};const{Wrap:yc,Filter:Ai}=Sb,{VtkDataTypes:hr}=fn,{vtkDebugMacro:XD,vtkErrorMacro:ef,vtkWarningMacro:T8}=Bi,{toHalf:RY}=zu;function bY(t,e){e.classHierarchy.push("vtkOpenGLTexture"),t.render=function(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(c?e._openGLRenderWindow=c:(e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getLastAncestorOfType("vtkOpenGLRenderWindow")),e.context=e._openGLRenderWindow.getContext(),e.renderable.getInterpolate()?(e.generateMipmap?t.setMinificationFilter(Ai.LINEAR_MIPMAP_LINEAR):t.setMinificationFilter(Ai.LINEAR),t.setMagnificationFilter(Ai.LINEAR)):(t.setMinificationFilter(Ai.NEAREST),t.setMagnificationFilter(Ai.NEAREST)),e.renderable.getRepeat()&&(t.setWrapR(yc.REPEAT),t.setWrapS(yc.REPEAT),t.setWrapT(yc.REPEAT)),e.renderable.getInputData()&&e.renderable.setImage(null),!e.handle||e.renderable.getMTime()>e.textureBuildTime.getMTime()){if(e.renderable.getImage()!==null&&(e.renderable.getInterpolate()&&(e.generateMipmap=!0,t.setMinificationFilter(Ai.LINEAR_MIPMAP_LINEAR)),e.renderable.getImage()&&e.renderable.getImageLoaded()&&(t.create2DFromImage(e.renderable.getImage()),t.activate(),t.sendParameters(),e.textureBuildTime.modified())),e.renderable.getCanvas()!==null){e.renderable.getInterpolate()&&(e.generateMipmap=!0,t.setMinificationFilter(Ai.LINEAR_MIPMAP_LINEAR));const u=e.renderable.getCanvas();t.create2DFromRaw(u.width,u.height,4,hr.UNSIGNED_CHAR,u,!0),t.activate(),t.sendParameters(),e.textureBuildTime.modified()}if(e.renderable.getJsImageData()!==null){const u=e.renderable.getJsImageData();e.renderable.getInterpolate()&&(e.generateMipmap=!0,t.setMinificationFilter(Ai.LINEAR_MIPMAP_LINEAR)),t.create2DFromRaw(u.width,u.height,4,hr.UNSIGNED_CHAR,u.data,!0),t.activate(),t.sendParameters(),e.textureBuildTime.modified()}const l=e.renderable.getInputData(0);if(l&&l.getPointData().getScalars()){const u=l.getExtent(),f=l.getPointData().getScalars(),v=[];for(let g=0;g<e.renderable.getNumberOfInputPorts();++g){const d=e.renderable.getInputData(g),m=d?d.getPointData().getScalars().getData():null;m&&v.push(m)}e.renderable.getInterpolate()&&f.getNumberOfComponents()===4&&(e.generateMipmap=!0,t.setMinificationFilter(Ai.LINEAR_MIPMAP_LINEAR)),v.length%6===0?t.createCubeFromRaw(u[1]-u[0]+1,u[3]-u[2]+1,f.getNumberOfComponents(),f.getDataType(),v):t.create2DFromRaw(u[1]-u[0]+1,u[3]-u[2]+1,f.getNumberOfComponents(),f.getDataType(),f.getData()),t.activate(),t.sendParameters(),e.textureBuildTime.modified()}}e.handle&&t.activate()},t.destroyTexture=()=>{t.deactivate(),e.context&&e.handle&&e.context.deleteTexture(e.handle),e.handle=0,e.numberOfDimensions=0,e.target=0,e.components=0,e.width=0,e.height=0,e.depth=0,t.resetFormatAndType()},t.createTexture=()=>{e.handle||(e.handle=e.context.createTexture(),e.target&&(e.context.bindTexture(e.target,e.handle),e.context.texParameteri(e.target,e.context.TEXTURE_MIN_FILTER,t.getOpenGLFilterMode(e.minificationFilter)),e.context.texParameteri(e.target,e.context.TEXTURE_MAG_FILTER,t.getOpenGLFilterMode(e.magnificationFilter)),e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_S,t.getOpenGLWrapMode(e.wrapS)),e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_T,t.getOpenGLWrapMode(e.wrapT)),e._openGLRenderWindow.getWebgl2()&&e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_R,t.getOpenGLWrapMode(e.wrapR)),e.context.bindTexture(e.target,null)))},t.getTextureUnit=()=>e._openGLRenderWindow?e._openGLRenderWindow.getTextureUnitForTexture(t):-1,t.activate=()=>{e._openGLRenderWindow.activateTexture(t),t.bind()},t.deactivate=()=>{e._openGLRenderWindow&&e._openGLRenderWindow.deactivateTexture(t)},t.releaseGraphicsResources=c=>{c&&e.handle&&(c.activateTexture(t),c.deactivateTexture(t),e.context.deleteTexture(e.handle),e.handle=0,e.numberOfDimensions=0,e.target=0,e.internalFormat=0,e.format=0,e.openGLDataType=0,e.components=0,e.width=0,e.height=0,e.depth=0,e.allocatedGPUMemoryInBytes=0),e.shaderProgram&&(e.shaderProgram.releaseGraphicsResources(c),e.shaderProgram=null)},t.bind=()=>{e.context.bindTexture(e.target,e.handle),e.autoParameters&&t.getMTime()>e.sendParametersTime.getMTime()&&t.sendParameters()},t.isBound=()=>{let c=!1;if(e.context&&e.handle){let l=0;switch(e.target){case e.context.TEXTURE_2D:l=e.context.TEXTURE_BINDING_2D;break;default:T8("impossible case");break}c=e.context.getIntegerv(l)===e.handle}return c},t.sendParameters=()=>{e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_S,t.getOpenGLWrapMode(e.wrapS)),e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_T,t.getOpenGLWrapMode(e.wrapT)),e._openGLRenderWindow.getWebgl2()&&e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_R,t.getOpenGLWrapMode(e.wrapR)),e.context.texParameteri(e.target,e.context.TEXTURE_MIN_FILTER,t.getOpenGLFilterMode(e.minificationFilter)),e.context.texParameteri(e.target,e.context.TEXTURE_MAG_FILTER,t.getOpenGLFilterMode(e.magnificationFilter)),e._openGLRenderWindow.getWebgl2()&&(e.context.texParameteri(e.target,e.context.TEXTURE_BASE_LEVEL,e.baseLevel),e.context.texParameteri(e.target,e.context.TEXTURE_MAX_LEVEL,e.maxLevel)),e.sendParametersTime.modified()},t.getInternalFormat=(c,l)=>(e._forceInternalFormat||(e.internalFormat=t.getDefaultInternalFormat(c,l)),e.internalFormat||XD(`Unable to find suitable internal format for T=${c} NC= ${l}`),[e.context.R32F,e.context.RG32F,e.context.RGB32F,e.context.RGBA32F].includes(e.internalFormat)&&!e.context.getExtension("OES_texture_float_linear")&&T8("Failed to load OES_texture_float_linear. Texture filtering is not available for *32F internal formats."),e.internalFormat),t.getDefaultInternalFormat=(c,l)=>{let u=0;return u=e._openGLRenderWindow.getDefaultTextureInternalFormat(c,l,e.oglNorm16Ext,t.useHalfFloat()),u||(u||(XD("Unsupported internal texture type!"),XD(`Unable to find suitable internal format for T=${c} NC= ${l}`)),u)},t.useHalfFloat=()=>e.enableUseHalfFloat&&e.canUseHalfFloat,t.setInternalFormat=c=>{e._forceInternalFormat=!0,c!==e.internalFormat&&(e.internalFormat=c,t.modified())},t.getFormat=(c,l)=>(e.format=t.getDefaultFormat(c,l),e.format),t.getDefaultFormat=(c,l)=>{if(e._openGLRenderWindow.getWebgl2())switch(l){case 1:return e.context.RED;case 2:return e.context.RG;case 3:return e.context.RGB;case 4:return e.context.RGBA;default:return e.context.RGB}else switch(l){case 1:return e.context.LUMINANCE;case 2:return e.context.LUMINANCE_ALPHA;case 3:return e.context.RGB;case 4:return e.context.RGBA;default:return e.context.RGB}},t.resetFormatAndType=()=>{e.format=0,e.internalFormat=0,e._forceInternalFormat=!1,e.openGLDataType=0},t.getDefaultDataType=c=>{const l=t.useHalfFloat();if(e._openGLRenderWindow.getWebgl2())switch(c){case hr.UNSIGNED_CHAR:return e.context.UNSIGNED_BYTE;case(e.oglNorm16Ext&&!l&&hr.SHORT):return e.context.SHORT;case(e.oglNorm16Ext&&!l&&hr.UNSIGNED_SHORT):return e.context.UNSIGNED_SHORT;case(l&&hr.SHORT):return e.context.HALF_FLOAT;case(l&&hr.UNSIGNED_SHORT):return e.context.HALF_FLOAT;case hr.FLOAT:case hr.VOID:default:return e.context.FLOAT}switch(c){case hr.UNSIGNED_CHAR:return e.context.UNSIGNED_BYTE;case hr.FLOAT:case hr.VOID:default:if(e.context.getExtension("OES_texture_float")&&e.context.getExtension("OES_texture_float_linear"))return e.context.FLOAT;{const u=e.context.getExtension("OES_texture_half_float");if(u&&e.context.getExtension("OES_texture_half_float_linear"))return u.HALF_FLOAT_OES}return e.context.UNSIGNED_BYTE}},t.getOpenGLDataType=function(c){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return(!e.openGLDataType||l)&&(e.openGLDataType=t.getDefaultDataType(c)),e.openGLDataType},t.getShiftAndScale=()=>{let c=0,l=1;switch(e.openGLDataType){case e.context.BYTE:l=127.5,c=l-128;break;case e.context.UNSIGNED_BYTE:l=255,c=0;break;case e.context.SHORT:l=32767.5,c=l-32768;break;case e.context.UNSIGNED_SHORT:l=65536,c=0;break;case e.context.INT:l=21474836475e-1,c=l-2147483648;break;case e.context.UNSIGNED_INT:l=4294967295,c=0;break;case e.context.FLOAT:}return{shift:c,scale:l}},t.getOpenGLFilterMode=c=>{switch(c){case Ai.NEAREST:return e.context.NEAREST;case Ai.LINEAR:return e.context.LINEAR;case Ai.NEAREST_MIPMAP_NEAREST:return e.context.NEAREST_MIPMAP_NEAREST;case Ai.NEAREST_MIPMAP_LINEAR:return e.context.NEAREST_MIPMAP_LINEAR;case Ai.LINEAR_MIPMAP_NEAREST:return e.context.LINEAR_MIPMAP_NEAREST;case Ai.LINEAR_MIPMAP_LINEAR:return e.context.LINEAR_MIPMAP_LINEAR;default:return e.context.NEAREST}},t.getOpenGLWrapMode=c=>{switch(c){case yc.CLAMP_TO_EDGE:return e.context.CLAMP_TO_EDGE;case yc.REPEAT:return e.context.REPEAT;case yc.MIRRORED_REPEAT:return e.context.MIRRORED_REPEAT;default:return e.context.CLAMP_TO_EDGE}},t.updateArrayDataTypeForGL=function(c,l){let u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const f=[];let v=e.width*e.height*e.components;if(u&&(v*=e.depth),c!==hr.FLOAT&&e.openGLDataType===e.context.FLOAT)for(let d=0;d<l.length;d++)if(l[d]){const m=l[d].length>v?l[d].subarray(0,v):l[d];f.push(new Float32Array(m))}else f.push(null);if(c!==hr.UNSIGNED_CHAR&&e.openGLDataType===e.context.UNSIGNED_BYTE)for(let d=0;d<l.length;d++)if(l[d]){const m=l[d].length>v?l[d].subarray(0,v):l[d];f.push(new Uint8Array(m))}else f.push(null);let g=!1;if(e._openGLRenderWindow.getWebgl2())g=e.openGLDataType===e.context.HALF_FLOAT;else{const d=e.context.getExtension("OES_texture_half_float");g=d&&e.openGLDataType===d.HALF_FLOAT_OES}if(g)for(let d=0;d<l.length;d++)if(l[d]){const m=new Uint16Array(v),h=l[d];for(let C=0;C<v;C++)m[C]=RY(h[C]);f.push(m)}else f.push(null);if(f.length===0)for(let d=0;d<l.length;d++)f.push(l[d]);return f};function n(c){if(e._openGLRenderWindow.getWebgl2())return c;const l=[],u=e.width,f=e.height,v=e.components;if(c&&(!kg(u)||!kg(f))){const g=e.context.getExtension("OES_texture_half_float"),d=ys(u),m=ys(f),h=d*m*e.components;for(let C=0;C<c.length;C++)if(c[C]!==null){let p=null;const S=f/m,I=u/d;let D=!1;e.openGLDataType===e.context.FLOAT?p=new Float32Array(h):g&&e.openGLDataType===g.HALF_FLOAT_OES?(p=new Uint16Array(h),D=!0):p=new Uint8Array(h);for(let E=0;E<m;E++){const T=E*d*v,y=E*S;let M=Math.floor(y),_=Math.ceil(y);_>=f&&(_=f-1);const O=y-M,w=1-O;M=M*u*v,_=_*u*v;for(let x=0;x<d;x++){const P=x*v,R=x*I;let L=Math.floor(R),H=Math.ceil(R);H>=u&&(H=u-1);const F=R-L;L*=v,H*=v;for(let U=0;U<v;U++)D?p[T+P+U]=zu.toHalf(zu.fromHalf(c[C][M+L+U])*w*(1-F)+zu.fromHalf(c[C][M+H+U])*w*F+zu.fromHalf(c[C][_+L+U])*O*(1-F)+zu.fromHalf(c[C][_+H+U])*O*F):p[T+P+U]=c[C][M+L+U]*w*(1-F)+c[C][M+H+U]*w*F+c[C][_+L+U]*O*(1-F)+c[C][_+H+U]*O*F}}l.push(p),e.width=d,e.height=m}else l.push(null)}if(l.length===0)for(let g=0;g<c.length;g++)l.push(c[g]);return l}function r(c){var l;return e._openGLRenderWindow?e.resizable||(l=e.renderable)!=null&&l.getResizable()?!1:e._openGLRenderWindow.getWebgl2()?!(e._openGLRenderWindow.getGLInformations().RENDERER.value.match(/WebKit/gi)&&navigator.platform.match(/Mac/gi)&&e.oglNorm16Ext&&(c===hr.UNSIGNED_SHORT||c===hr.SHORT)):!1:!1}t.create2DFromRaw=function(c,l,u,f,v){let g=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1;if(t.getOpenGLDataType(f,!0),t.getInternalFormat(f,u),t.getFormat(f,u),!e.internalFormat||!e.format||!e.openGLDataType)return ef("Failed to determine texture parameters."),!1;e.target=e.context.TEXTURE_2D,e.components=u,e.width=c,e.height=l,e.depth=1,e.numberOfDimensions=2,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind();const d=[v],m=t.updateArrayDataTypeForGL(f,d),h=n(m);return e.context.pixelStorei(e.context.UNPACK_FLIP_Y_WEBGL,g),e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),r(f)?(e.context.texStorage2D(e.target,1,e.internalFormat,e.width,e.height),h[0]!=null&&e.context.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.openGLDataType,h[0])):e.context.texImage2D(e.target,0,e.internalFormat,e.width,e.height,0,e.format,e.openGLDataType,h[0]),e.generateMipmap&&e.context.generateMipmap(e.target),g&&e.context.pixelStorei(e.context.UNPACK_FLIP_Y_WEBGL,!1),e.allocatedGPUMemoryInBytes=e.width*e.height*e.depth*u*e._openGLRenderWindow.getDefaultTextureByteSize(f,e.oglNorm16Ext,t.useHalfFloat()),t.deactivate(),!0},t.createCubeFromRaw=(c,l,u,f,v)=>{if(t.getOpenGLDataType(f),t.getInternalFormat(f,u),t.getFormat(f,u),!e.internalFormat||!e.format||!e.openGLDataType)return ef("Failed to determine texture parameters."),!1;e.target=e.context.TEXTURE_CUBE_MAP,e.components=u,e.width=c,e.height=l,e.depth=1,e.numberOfDimensions=2,e._openGLRenderWindow.activateTexture(t),e.maxLevel=v.length/6-1,t.createTexture(),t.bind();const g=t.updateArrayDataTypeForGL(f,v),d=n(g),m=[];let h=e.width,C=e.height;for(let p=0;p<d.length;p++){p%6===0&&p!==0&&(h/=2,C/=2),m[p]=Av(f,C*h*e.components);for(let S=0;S<C;++S){const I=S*h*e.components,D=(C-S-1)*h*e.components;m[p].set(d[p].slice(D,D+h*e.components),I)}}e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),r(f)&&e.context.texStorage2D(e.target,6,e.internalFormat,e.width,e.height);for(let p=0;p<6;p++){let S=0,I=e.width,D=e.height;for(;I>=1&&D>=1;){let E=null;S<=e.maxLevel&&(E=m[6*S+p]),r(f)?E!=null&&e.context.texSubImage2D(e.context.TEXTURE_CUBE_MAP_POSITIVE_X+p,S,0,0,I,D,e.format,e.openGLDataType,E):e.context.texImage2D(e.context.TEXTURE_CUBE_MAP_POSITIVE_X+p,S,e.internalFormat,I,D,0,e.format,e.openGLDataType,E),S++,I/=2,D/=2}}return e.allocatedGPUMemoryInBytes=e.width*e.height*e.depth*u*e._openGLRenderWindow.getDefaultTextureByteSize(f,e.oglNorm16Ext,t.useHalfFloat()),t.deactivate(),!0},t.createDepthFromRaw=(c,l,u,f)=>(t.getOpenGLDataType(u),e.format=e.context.DEPTH_COMPONENT,e._openGLRenderWindow.getWebgl2()?u===hr.FLOAT?e.internalFormat=e.context.DEPTH_COMPONENT32F:e.internalFormat=e.context.DEPTH_COMPONENT16:e.internalFormat=e.context.DEPTH_COMPONENT,!e.internalFormat||!e.format||!e.openGLDataType?(ef("Failed to determine texture parameters."),!1):(e.target=e.context.TEXTURE_2D,e.components=1,e.width=c,e.height=l,e.depth=1,e.numberOfDimensions=2,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind(),e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),r(u)?(e.context.texStorage2D(e.target,1,e.internalFormat,e.width,e.height),f!=null&&e.context.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.openGLDataType,f)):e.context.texImage2D(e.target,0,e.internalFormat,e.width,e.height,0,e.format,e.openGLDataType,f),e.generateMipmap&&e.context.generateMipmap(e.target),e.allocatedGPUMemoryInBytes=e.width*e.height*e.depth*e.components*e._openGLRenderWindow.getDefaultTextureByteSize(u,e.oglNorm16Ext,t.useHalfFloat()),t.deactivate(),!0)),t.create2DFromImage=c=>{if(t.getOpenGLDataType(hr.UNSIGNED_CHAR),t.getInternalFormat(hr.UNSIGNED_CHAR,4),t.getFormat(hr.UNSIGNED_CHAR,4),!e.internalFormat||!e.format||!e.openGLDataType)return ef("Failed to determine texture parameters."),!1;e.target=e.context.TEXTURE_2D,e.components=4,e.depth=1,e.numberOfDimensions=2,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind(),e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1);const l=!e._openGLRenderWindow.getWebgl2()&&(!kg(c.width)||!kg(c.height)),u=document.createElement("canvas");u.width=l?ys(c.width):c.width,u.height=l?ys(c.height):c.height,e.width=u.width,e.height=u.height;const f=u.getContext("2d");f.translate(0,u.height),f.scale(1,-1),f.drawImage(c,0,0,c.width,c.height,0,0,u.width,u.height);const v=u;return r(hr.UNSIGNED_CHAR)?(e.context.texStorage2D(e.target,1,e.internalFormat,e.width,e.height),v!=null&&e.context.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.openGLDataType,v)):e.context.texImage2D(e.target,0,e.internalFormat,e.width,e.height,0,e.format,e.openGLDataType,v),e.generateMipmap&&e.context.generateMipmap(e.target),e.allocatedGPUMemoryInBytes=e.width*e.height*e.depth*e.components*e._openGLRenderWindow.getDefaultTextureByteSize(hr.UNSIGNED_CHAR,e.oglNorm16Ext,t.useHalfFloat()),t.deactivate(),!0};function a(c,l,u){const f=new Array(u),v=new Array(u);for(let g=0;g<u;++g)f[g]=c[g],v[g]=l[g]-c[g]||1;return{scale:v,offset:f}}function i(c,l){for(let u=0;u<c.length;u++){const f=c[u],v=l[u]+f;if(f<-2048||f>2048||v<-2048||v>2048)return!1}return!0}function o(c,l,u,f){t.getOpenGLDataType(c);const v=i(l,u)||f;let g=!1;if(e._openGLRenderWindow.getWebgl2())g=e.openGLDataType===e.context.FLOAT&&e.context.getExtension("OES_texture_float_linear")===null&&v||e.openGLDataType===e.context.HALF_FLOAT;else{const d=e.context.getExtension("OES_texture_half_float");g=d&&e.openGLDataType===d.HALF_FLOAT_OES}e.canUseHalfFloat=g&&v}function s(c,l){const u=c.getNumberOfComponents(),f=c.getDataType(),v=c.getData(),g=new Array(u),d=new Array(u);for(let h=0;h<u;++h){const[C,p]=c.getRange(h);g[h]=C,d[h]=p}const m=a(g,d,u);return o(f,m.offset,m.scale,l),t.useHalfFloat()||t.getOpenGLDataType(f,!0),{numComps:u,dataType:f,data:v,scaleOffsets:m}}t.create2DFilterableFromRaw=function(c,l,u,f,v){let g=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1;return t.create2DFilterableFromDataArray(c,l,fn.newInstance({numberOfComponents:u,dataType:f,values:v}),g)},t.create2DFilterableFromDataArray=function(c,l,u){let f=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const{numComps:v,dataType:g,data:d}=s(u,f);t.create2DFromRaw(c,l,v,g,d)},t.updateVolumeInfoForGL=(c,l)=>{var v,g;let u=!1;const f=t.useHalfFloat();(!((v=e.volumeInfo)!=null&&v.scale)||!((g=e.volumeInfo)!=null&&g.offset))&&(e.volumeInfo={scale:new Array(l),offset:new Array(l)});for(let d=0;d<l;++d)e.volumeInfo.scale[d]=1,e.volumeInfo.offset[d]=0;if(e.oglNorm16Ext&&!f&&c===hr.SHORT){for(let d=0;d<l;++d)e.volumeInfo.scale[d]=32767;u=!0}if(e.oglNorm16Ext&&!f&&c===hr.UNSIGNED_SHORT){for(let d=0;d<l;++d)e.volumeInfo.scale[d]=65535;u=!0}if(c===hr.UNSIGNED_CHAR){for(let d=0;d<l;++d)e.volumeInfo.scale[d]=255;u=!0}return(c===hr.FLOAT||f&&(c===hr.SHORT||c===hr.UNSIGNED_SHORT))&&(u=!0),u},t.create3DFromRaw=(c,l,u,f,v,g)=>{let d=v,m=g;if(!t.updateVolumeInfoForGL(d,f)&&m){const I=c*l*u,D=structuredClone(e.volumeInfo),E=new Float32Array(I*f);e.volumeInfo.offset=D.offset,e.volumeInfo.scale=D.scale;let T=0;const y=D.scale.map(M=>1/M);for(let M=0;M<I;M++)for(let _=0;_<f;_++)E[T]=(m[T]-D.offset[_])*y[_],T++;d=hr.FLOAT,m=E}if(t.getOpenGLDataType(d),t.getInternalFormat(d,f),t.getFormat(d,f),!e.internalFormat||!e.format||!e.openGLDataType)return ef("Failed to determine texture parameters."),!1;e.target=e.context.TEXTURE_3D,e.components=f,e.width=c,e.height=l,e.depth=u,e.numberOfDimensions=3,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind();const h=[m],p=t.updateArrayDataTypeForGL(d,h,!0),S=n(p);return e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),r(d)?(e.context.texStorage3D(e.target,1,e.internalFormat,e.width,e.height,e.depth),S[0]!=null&&e.context.texSubImage3D(e.target,0,0,0,0,e.width,e.height,e.depth,e.format,e.openGLDataType,S[0])):e.context.texImage3D(e.target,0,e.internalFormat,e.width,e.height,e.depth,0,e.format,e.openGLDataType,S[0]),e.generateMipmap&&e.context.generateMipmap(e.target),e.allocatedGPUMemoryInBytes=e.width*e.height*e.depth*e.components*e._openGLRenderWindow.getDefaultTextureByteSize(d,e.oglNorm16Ext,t.useHalfFloat()),t.deactivate(),!0},t.create3DFilterableFromRaw=function(c,l,u,f,v,g){let d=arguments.length>6&&arguments[6]!==void 0?arguments[6]:!1;return t.create3DFilterableFromDataArray(c,l,u,fn.newInstance({numberOfComponents:f,dataType:v,values:g}),d)},t.create3DFilterableFromDataArray=function(c,l,u,f){let v=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;const{numComps:g,dataType:d,data:m,scaleOffsets:h}=s(f,v),C=[],p=[];for(let U=0;U<g;++U)C[U]=0,p[U]=1;if(e.volumeInfo={scale:p,offset:C,dataComputedScale:h.scale,dataComputedOffset:h.offset,width:c,height:l,depth:u},e._openGLRenderWindow.getWebgl2())return t.create3DFromRaw(c,l,u,g,d,m);const S=c*l*u,I=structuredClone(h);let D=(U,V,X,re,ue)=>{U[V]=X},E=hr.UNSIGNED_CHAR;if(d===hr.UNSIGNED_CHAR)for(let U=0;U<g;++U)I.offset[U]=0,I.scale[U]=255;else e.context.getExtension("OES_texture_float")&&e.context.getExtension("OES_texture_float_linear")?(E=hr.FLOAT,D=(U,V,X,re,ue)=>{U[V]=(X-re)/ue}):(E=hr.UNSIGNED_CHAR,D=(U,V,X,re,ue)=>{U[V]=255*(X-re)/ue});if(t.getOpenGLDataType(E),t.getInternalFormat(E,g),t.getFormat(E,g),!e.internalFormat||!e.format||!e.openGLDataType)return ef("Failed to determine texture parameters."),!1;e.target=e.context.TEXTURE_2D,e.components=g,e.depth=1,e.numberOfDimensions=2;let T=e.context.getParameter(e.context.MAX_TEXTURE_SIZE);T>4096&&(E===hr.FLOAT||g>=3)&&(T=4096);let y=1,M=1;S>T*T&&(y=Math.ceil(Math.sqrt(S/(T*T))),M=y);let _=Math.sqrt(S)/y;_=ys(_);const O=Math.floor(_*y/c),w=Math.ceil(u/O),x=ys(l*w/M);e.width=_,e.height=x,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind(),e.volumeInfo.xreps=O,e.volumeInfo.yreps=w,e.volumeInfo.xstride=y,e.volumeInfo.ystride=M,e.volumeInfo.offset=I.offset,e.volumeInfo.scale=I.scale;let P;const R=_*x*g;E===hr.FLOAT?P=new Float32Array(R):P=new Uint8Array(R);let L=0;const H=Math.floor(c/y),F=Math.floor(l/M);for(let U=0;U<w;U++){const V=Math.min(O,u-U*O),X=g*(e.width-V*Math.floor(c/y));for(let re=0;re<F;re++){for(let ue=0;ue<V;ue++){const De=g*((U*O+ue)*c*l+M*re*c);for(let pe=0;pe<H;pe++)for(let Te=0;Te<g;Te++)D(P,L,m[De+y*pe*g+Te],I.offset[Te],I.scale[Te]),L++}L+=X}}return e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),r(E)?(e.context.texStorage2D(e.target,1,e.internalFormat,e.width,e.height),P!=null&&e.context.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.openGLDataType,P)):e.context.texImage2D(e.target,0,e.internalFormat,e.width,e.height,0,e.format,e.openGLDataType,P),t.deactivate(),!0},t.setOpenGLRenderWindow=c=>{e._openGLRenderWindow!==c&&(t.releaseGraphicsResources(),e._openGLRenderWindow=c,e.context=null,c&&(e.context=e._openGLRenderWindow.getContext()))},t.getMaximumTextureSize=c=>c&&c.isCurrent()?c.getIntegerv(c.MAX_TEXTURE_SIZE):-1,t.enableUseHalfFloat=c=>{e.enableUseHalfFloat=c}}const NY={_openGLRenderWindow:null,_forceInternalFormat:!1,context:null,handle:0,sendParametersTime:null,textureBuildTime:null,numberOfDimensions:0,target:0,format:0,openGLDataType:0,components:0,width:0,height:0,depth:0,autoParameters:!0,wrapS:yc.CLAMP_TO_EDGE,wrapT:yc.CLAMP_TO_EDGE,wrapR:yc.CLAMP_TO_EDGE,minificationFilter:Ai.NEAREST,magnificationFilter:Ai.NEAREST,minLOD:-1e3,maxLOD:1e3,baseLevel:0,maxLevel:1e3,generateMipmap:!1,oglNorm16Ext:null,allocatedGPUMemoryInBytes:0,enableUseHalfFloat:!0,canUseHalfFloat:!1};function Kb(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,NY,n),Fr.extend(t,e,n),e.sendParametersTime={},Yr(e.sendParametersTime,{mtime:0}),e.textureBuildTime={},Yr(e.textureBuildTime,{mtime:0}),Km(t,e,["format","openGLDataType"]),Wa(t,e,["keyMatrixTime","minificationFilter","magnificationFilter","wrapS","wrapT","wrapR","generateMipmap","oglNorm16Ext"]),_o(t,e,["width","height","volumeInfo","components","handle","target","allocatedGPUMemoryInBytes"]),Xm(t,e,["openGLRenderWindow"]),bY(t,e)}const Xb=dr(Kb,"vtkOpenGLTexture");var oa={newInstance:Xb,extend:Kb,...Sb};Za("vtkTexture",Xb);function LY(t,e){e.classHierarchy.push("vtkFramebuffer"),t.getBothMode=()=>e.context.FRAMEBUFFER,t.saveCurrentBindingsAndBuffers=n=>{const r=typeof n<"u"?n:t.getBothMode();t.saveCurrentBindings(r),t.saveCurrentBuffers(r)},t.saveCurrentBindings=n=>{if(!e.context){Kn("you must set the OpenGLRenderWindow before calling saveCurrentBindings");return}const r=e.context;e.previousDrawBinding=r.getParameter(e.context.FRAMEBUFFER_BINDING),e.previousActiveFramebuffer=e._openGLRenderWindow.getActiveFramebuffer()},t.saveCurrentBuffers=n=>{},t.restorePreviousBindingsAndBuffers=n=>{const r=typeof n<"u"?n:t.getBothMode();t.restorePreviousBindings(r),t.restorePreviousBuffers(r)},t.restorePreviousBindings=n=>{if(!e.context){Kn("you must set the OpenGLRenderWindow before calling restorePreviousBindings");return}const r=e.context;r.bindFramebuffer(r.FRAMEBUFFER,e.previousDrawBinding),e._openGLRenderWindow.setActiveFramebuffer(e.previousActiveFramebuffer)},t.restorePreviousBuffers=n=>{},t.bind=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;r===null&&(r=e.context.FRAMEBUFFER),e.context.bindFramebuffer(r,e.glFramebuffer);for(let a=0;a<e.colorBuffers.length;a++)e.colorBuffers[a].bind();e._openGLRenderWindow.setActiveFramebuffer(t)},t.create=(n,r)=>{if(!e.context){Kn("you must set the OpenGLRenderWindow before calling create");return}e.glFramebuffer=e.context.createFramebuffer(),e.glFramebuffer.width=n,e.glFramebuffer.height=r},t.setColorBuffer=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const a=e.context;if(!a){Kn("you must set the OpenGLRenderWindow before calling setColorBuffer");return}let i=a.COLOR_ATTACHMENT0;if(r>0)if(e._openGLRenderWindow.getWebgl2())i+=r;else{Kn("Using multiple framebuffer attachments requires WebGL 2");return}e.colorBuffers[r]=n,a.framebufferTexture2D(a.FRAMEBUFFER,i,a.TEXTURE_2D,n.getHandle(),0)},t.removeColorBuffer=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;const r=e.context;if(!r){Kn("you must set the OpenGLRenderWindow before calling removeColorBuffer");return}let a=r.COLOR_ATTACHMENT0;if(n>0)if(e._openGLRenderWindow.getWebgl2())a+=n;else{Kn("Using multiple framebuffer attachments requires WebGL 2");return}r.framebufferTexture2D(r.FRAMEBUFFER,a,r.TEXTURE_2D,null,0),e.colorBuffers=e.colorBuffers.splice(n,1)},t.setDepthBuffer=n=>{if(!e.context){Kn("you must set the OpenGLRenderWindow before calling setDepthBuffer");return}if(e._openGLRenderWindow.getWebgl2()){const r=e.context;r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,n.getHandle(),0)}else Kn("Attaching depth buffer textures to fbo requires WebGL 2")},t.removeDepthBuffer=()=>{if(!e.context){Kn("you must set the OpenGLRenderWindow before calling removeDepthBuffer");return}if(e._openGLRenderWindow.getWebgl2()){const n=e.context;n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,null,0)}else Kn("Attaching depth buffer textures to framebuffers requires WebGL 2")},t.getGLFramebuffer=()=>e.glFramebuffer,t.setOpenGLRenderWindow=n=>{e._openGLRenderWindow!==n&&(t.releaseGraphicsResources(),e._openGLRenderWindow=n,e.context=null,n&&(e.context=e._openGLRenderWindow.getContext()))},t.releaseGraphicsResources=()=>{e.glFramebuffer&&e.context.deleteFramebuffer(e.glFramebuffer)},t.getSize=()=>e.glFramebuffer==null?null:[e.glFramebuffer.width,e.glFramebuffer.height],t.populateFramebuffer=()=>{if(!e.context){Kn("you must set the OpenGLRenderWindow before calling populateFrameBuffer");return}t.bind();const n=e.context,r=oa.newInstance();r.setOpenGLRenderWindow(e._openGLRenderWindow),r.setMinificationFilter(en.LINEAR),r.setMagnificationFilter(en.LINEAR),r.create2DFromRaw(e.glFramebuffer.width,e.glFramebuffer.height,4,Vn.UNSIGNED_CHAR,null),t.setColorBuffer(r),e.depthTexture=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,e.depthTexture),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,e.glFramebuffer.width,e.glFramebuffer.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,e.depthTexture)},t.getColorTexture=()=>e.colorBuffers[0]}const UY={glFramebuffer:null,colorBuffers:null,depthTexture:null,previousDrawBinding:0,previousReadBinding:0,previousDrawBuffer:0,previousReadBuffer:0,previousActiveFramebuffer:null};function Yb(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,UY,n),Yr(t,e),e.colorBuffers&&Kn("you cannot initialize colorBuffers through the constructor. You should call setColorBuffer() instead."),e.colorBuffers=[],xv(t,e,["colorBuffers"]),LY(t,e)}const FY=dr(Yb,"vtkFramebuffer");var nI={newInstance:FY,extend:Yb};function VY(t,e){e.classHierarchy.push("vtkRenderPass"),t.getOperation=()=>e.currentOperation,t.setCurrentOperation=n=>{e.currentOperation=n,e.currentTraverseOperation=`traverse${J.capitalize(e.currentOperation)}`},t.getTraverseOperation=()=>e.currentTraverseOperation,t.traverse=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;e.deleted||(e._currentParent=r,e.preDelegateOperations.forEach(a=>{t.setCurrentOperation(a),n.traverse(t)}),e.delegates.forEach(a=>{a.traverse(n,t)}),e.postDelegateOperations.forEach(a=>{t.setCurrentOperation(a),n.traverse(t)}))}}const kY={delegates:[],currentOperation:null,preDelegateOperations:[],postDelegateOperations:[],currentParent:null};function Zb(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,kY,n),J.obj(t,e),J.get(t,e,["currentOperation"]),J.setGet(t,e,["delegates","_currentParent","preDelegateOperations","postDelegateOperations"]),J.moveToProtected(t,e,["currentParent"]),VY(t,e)}const GY=J.newInstance(Zb,"vtkRenderPass");var $M={newInstance:GY,extend:Zb},ur=1e-6,Na=typeof Float32Array<"u"?Float32Array:Array,BY=Math.PI/180;function WY(t){return t*BY}function ru(t,e){return Math.abs(t-e)<=ur*Math.max(1,Math.abs(t),Math.abs(e))}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function zM(){var t=new Na(9);return Na!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function rI(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function HY(t){var e=new Na(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function $Y(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Bg(t,e,n,r,a,i,o,s,c){var l=new Na(9);return l[0]=t,l[1]=e,l[2]=n,l[3]=r,l[4]=a,l[5]=i,l[6]=o,l[7]=s,l[8]=c,l}function Jb(t,e,n,r,a,i,o,s,c,l){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=i,t[5]=o,t[6]=s,t[7]=c,t[8]=l,t}function Rs(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function qM(t,e){if(t===e){var n=e[1],r=e[2],a=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=a}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function th(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],o=e[4],s=e[5],c=e[6],l=e[7],u=e[8],f=u*o-s*l,v=-u*i+s*c,g=l*i-o*c,d=n*f+r*v+a*g;return d?(d=1/d,t[0]=f*d,t[1]=(-u*r+a*l)*d,t[2]=(s*r-a*o)*d,t[3]=v*d,t[4]=(u*n-a*c)*d,t[5]=(-s*n+a*i)*d,t[6]=g*d,t[7]=(-l*n+r*c)*d,t[8]=(o*n-r*i)*d,t):null}function zY(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],o=e[4],s=e[5],c=e[6],l=e[7],u=e[8];return t[0]=o*u-s*l,t[1]=a*l-r*u,t[2]=r*s-a*o,t[3]=s*c-i*u,t[4]=n*u-a*c,t[5]=a*i-n*s,t[6]=i*l-o*c,t[7]=r*c-n*l,t[8]=n*o-r*i,t}function Bu(t){var e=t[0],n=t[1],r=t[2],a=t[3],i=t[4],o=t[5],s=t[6],c=t[7],l=t[8];return e*(l*i-o*c)+n*(-l*a+o*s)+r*(c*a-i*s)}function iv(t,e,n){var r=e[0],a=e[1],i=e[2],o=e[3],s=e[4],c=e[5],l=e[6],u=e[7],f=e[8],v=n[0],g=n[1],d=n[2],m=n[3],h=n[4],C=n[5],p=n[6],S=n[7],I=n[8];return t[0]=v*r+g*o+d*l,t[1]=v*a+g*s+d*u,t[2]=v*i+g*c+d*f,t[3]=m*r+h*o+C*l,t[4]=m*a+h*s+C*u,t[5]=m*i+h*c+C*f,t[6]=p*r+S*o+I*l,t[7]=p*a+S*s+I*u,t[8]=p*i+S*c+I*f,t}function qY(t,e,n){var r=e[0],a=e[1],i=e[2],o=e[3],s=e[4],c=e[5],l=e[6],u=e[7],f=e[8],v=n[0],g=n[1];return t[0]=r,t[1]=a,t[2]=i,t[3]=o,t[4]=s,t[5]=c,t[6]=v*r+g*o+l,t[7]=v*a+g*s+u,t[8]=v*i+g*c+f,t}function jY(t,e,n){var r=e[0],a=e[1],i=e[2],o=e[3],s=e[4],c=e[5],l=e[6],u=e[7],f=e[8],v=Math.sin(n),g=Math.cos(n);return t[0]=g*r+v*o,t[1]=g*a+v*s,t[2]=g*i+v*c,t[3]=g*o-v*r,t[4]=g*s-v*a,t[5]=g*c-v*i,t[6]=l,t[7]=u,t[8]=f,t}function QY(t,e,n){var r=n[0],a=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=a*e[3],t[4]=a*e[4],t[5]=a*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function KY(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function XY(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function YY(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function ZY(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function JY(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],o=n+n,s=r+r,c=a+a,l=n*o,u=r*o,f=r*s,v=a*o,g=a*s,d=a*c,m=i*o,h=i*s,C=i*c;return t[0]=1-f-d,t[3]=u-C,t[6]=v+h,t[1]=u+C,t[4]=1-l-d,t[7]=g-m,t[2]=v-h,t[5]=g+m,t[8]=1-l-f,t}function eZ(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],o=e[4],s=e[5],c=e[6],l=e[7],u=e[8],f=e[9],v=e[10],g=e[11],d=e[12],m=e[13],h=e[14],C=e[15],p=n*s-r*o,S=n*c-a*o,I=n*l-i*o,D=r*c-a*s,E=r*l-i*s,T=a*l-i*c,y=u*m-f*d,M=u*h-v*d,_=u*C-g*d,O=f*h-v*m,w=f*C-g*m,x=v*C-g*h,P=p*x-S*w+I*O+D*_-E*M+T*y;return P?(P=1/P,t[0]=(s*x-c*w+l*O)*P,t[1]=(c*_-o*x-l*M)*P,t[2]=(o*w-s*_+l*y)*P,t[3]=(a*w-r*x-i*O)*P,t[4]=(n*x-a*_+i*M)*P,t[5]=(r*_-n*w-i*y)*P,t[6]=(m*T-h*E+C*D)*P,t[7]=(h*I-d*T-C*S)*P,t[8]=(d*E-m*I+C*p)*P,t):null}function tZ(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function nZ(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function rZ(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function aZ(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t}function e7(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}function iZ(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t}function oZ(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t}function sZ(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function cZ(t,e){var n=t[0],r=t[1],a=t[2],i=t[3],o=t[4],s=t[5],c=t[6],l=t[7],u=t[8],f=e[0],v=e[1],g=e[2],d=e[3],m=e[4],h=e[5],C=e[6],p=e[7],S=e[8];return Math.abs(n-f)<=ur*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(r-v)<=ur*Math.max(1,Math.abs(r),Math.abs(v))&&Math.abs(a-g)<=ur*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(i-d)<=ur*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(o-m)<=ur*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(s-h)<=ur*Math.max(1,Math.abs(s),Math.abs(h))&&Math.abs(c-C)<=ur*Math.max(1,Math.abs(c),Math.abs(C))&&Math.abs(l-p)<=ur*Math.max(1,Math.abs(l),Math.abs(p))&&Math.abs(u-S)<=ur*Math.max(1,Math.abs(u),Math.abs(S))}var lZ=iv,uZ=e7;const fZ=Object.freeze(Object.defineProperty({__proto__:null,add:aZ,adjoint:zY,clone:HY,copy:$Y,create:zM,determinant:Bu,equals:cZ,exactEquals:sZ,frob:rZ,fromMat2d:ZY,fromMat4:rI,fromQuat:JY,fromRotation:XY,fromScaling:YY,fromTranslation:KY,fromValues:Bg,identity:Rs,invert:th,mul:lZ,multiply:iv,multiplyScalar:iZ,multiplyScalarAndAdd:oZ,normalFromMat4:eZ,projection:tZ,rotate:jY,scale:QY,set:Jb,str:nZ,sub:uZ,subtract:e7,translate:qY,transpose:qM},Symbol.toStringTag,{value:"Module"}));function Fs(){var t=new Na(16);return Na!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function vZ(t){var e=new Na(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function fa(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function jM(t,e,n,r,a,i,o,s,c,l,u,f,v,g,d,m){var h=new Na(16);return h[0]=t,h[1]=e,h[2]=n,h[3]=r,h[4]=a,h[5]=i,h[6]=o,h[7]=s,h[8]=c,h[9]=l,h[10]=u,h[11]=f,h[12]=v,h[13]=g,h[14]=d,h[15]=m,h}function gZ(t,e,n,r,a,i,o,s,c,l,u,f,v,g,d,m,h){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=i,t[5]=o,t[6]=s,t[7]=c,t[8]=l,t[9]=u,t[10]=f,t[11]=v,t[12]=g,t[13]=d,t[14]=m,t[15]=h,t}function zt(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function $n(t,e){if(t===e){var n=e[1],r=e[2],a=e[3],i=e[6],o=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=i,t[11]=e[14],t[12]=a,t[13]=o,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function ba(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],o=e[4],s=e[5],c=e[6],l=e[7],u=e[8],f=e[9],v=e[10],g=e[11],d=e[12],m=e[13],h=e[14],C=e[15],p=n*s-r*o,S=n*c-a*o,I=n*l-i*o,D=r*c-a*s,E=r*l-i*s,T=a*l-i*c,y=u*m-f*d,M=u*h-v*d,_=u*C-g*d,O=f*h-v*m,w=f*C-g*m,x=v*C-g*h,P=p*x-S*w+I*O+D*_-E*M+T*y;return P?(P=1/P,t[0]=(s*x-c*w+l*O)*P,t[1]=(a*w-r*x-i*O)*P,t[2]=(m*T-h*E+C*D)*P,t[3]=(v*E-f*T-g*D)*P,t[4]=(c*_-o*x-l*M)*P,t[5]=(n*x-a*_+i*M)*P,t[6]=(h*I-d*T-C*S)*P,t[7]=(u*T-v*I+g*S)*P,t[8]=(o*w-s*_+l*y)*P,t[9]=(r*_-n*w-i*y)*P,t[10]=(d*E-m*I+C*p)*P,t[11]=(f*I-u*E-g*p)*P,t[12]=(s*M-o*O-c*y)*P,t[13]=(n*O-r*M+a*y)*P,t[14]=(m*S-d*D-h*p)*P,t[15]=(u*D-f*S+v*p)*P,t):null}function dZ(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],o=e[4],s=e[5],c=e[6],l=e[7],u=e[8],f=e[9],v=e[10],g=e[11],d=e[12],m=e[13],h=e[14],C=e[15];return t[0]=s*(v*C-g*h)-f*(c*C-l*h)+m*(c*g-l*v),t[1]=-(r*(v*C-g*h)-f*(a*C-i*h)+m*(a*g-i*v)),t[2]=r*(c*C-l*h)-s*(a*C-i*h)+m*(a*l-i*c),t[3]=-(r*(c*g-l*v)-s*(a*g-i*v)+f*(a*l-i*c)),t[4]=-(o*(v*C-g*h)-u*(c*C-l*h)+d*(c*g-l*v)),t[5]=n*(v*C-g*h)-u*(a*C-i*h)+d*(a*g-i*v),t[6]=-(n*(c*C-l*h)-o*(a*C-i*h)+d*(a*l-i*c)),t[7]=n*(c*g-l*v)-o*(a*g-i*v)+u*(a*l-i*c),t[8]=o*(f*C-g*m)-u*(s*C-l*m)+d*(s*g-l*f),t[9]=-(n*(f*C-g*m)-u*(r*C-i*m)+d*(r*g-i*f)),t[10]=n*(s*C-l*m)-o*(r*C-i*m)+d*(r*l-i*s),t[11]=-(n*(s*g-l*f)-o*(r*g-i*f)+u*(r*l-i*s)),t[12]=-(o*(f*h-v*m)-u*(s*h-c*m)+d*(s*v-c*f)),t[13]=n*(f*h-v*m)-u*(r*h-a*m)+d*(r*v-a*f),t[14]=-(n*(s*h-c*m)-o*(r*h-a*m)+d*(r*c-a*s)),t[15]=n*(s*v-c*f)-o*(r*v-a*f)+u*(r*c-a*s),t}function mZ(t){var e=t[0],n=t[1],r=t[2],a=t[3],i=t[4],o=t[5],s=t[6],c=t[7],l=t[8],u=t[9],f=t[10],v=t[11],g=t[12],d=t[13],m=t[14],h=t[15],C=e*o-n*i,p=e*s-r*i,S=e*c-a*i,I=n*s-r*o,D=n*c-a*o,E=r*c-a*s,T=l*d-u*g,y=l*m-f*g,M=l*h-v*g,_=u*m-f*d,O=u*h-v*d,w=f*h-v*m;return C*w-p*O+S*_+I*M-D*y+E*T}function Xn(t,e,n){var r=e[0],a=e[1],i=e[2],o=e[3],s=e[4],c=e[5],l=e[6],u=e[7],f=e[8],v=e[9],g=e[10],d=e[11],m=e[12],h=e[13],C=e[14],p=e[15],S=n[0],I=n[1],D=n[2],E=n[3];return t[0]=S*r+I*s+D*f+E*m,t[1]=S*a+I*c+D*v+E*h,t[2]=S*i+I*l+D*g+E*C,t[3]=S*o+I*u+D*d+E*p,S=n[4],I=n[5],D=n[6],E=n[7],t[4]=S*r+I*s+D*f+E*m,t[5]=S*a+I*c+D*v+E*h,t[6]=S*i+I*l+D*g+E*C,t[7]=S*o+I*u+D*d+E*p,S=n[8],I=n[9],D=n[10],E=n[11],t[8]=S*r+I*s+D*f+E*m,t[9]=S*a+I*c+D*v+E*h,t[10]=S*i+I*l+D*g+E*C,t[11]=S*o+I*u+D*d+E*p,S=n[12],I=n[13],D=n[14],E=n[15],t[12]=S*r+I*s+D*f+E*m,t[13]=S*a+I*c+D*v+E*h,t[14]=S*i+I*l+D*g+E*C,t[15]=S*o+I*u+D*d+E*p,t}function kr(t,e,n){var r=n[0],a=n[1],i=n[2],o,s,c,l,u,f,v,g,d,m,h,C;return e===t?(t[12]=e[0]*r+e[4]*a+e[8]*i+e[12],t[13]=e[1]*r+e[5]*a+e[9]*i+e[13],t[14]=e[2]*r+e[6]*a+e[10]*i+e[14],t[15]=e[3]*r+e[7]*a+e[11]*i+e[15]):(o=e[0],s=e[1],c=e[2],l=e[3],u=e[4],f=e[5],v=e[6],g=e[7],d=e[8],m=e[9],h=e[10],C=e[11],t[0]=o,t[1]=s,t[2]=c,t[3]=l,t[4]=u,t[5]=f,t[6]=v,t[7]=g,t[8]=d,t[9]=m,t[10]=h,t[11]=C,t[12]=o*r+u*a+d*i+e[12],t[13]=s*r+f*a+m*i+e[13],t[14]=c*r+v*a+h*i+e[14],t[15]=l*r+g*a+C*i+e[15]),t}function $c(t,e,n){var r=n[0],a=n[1],i=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Ki(t,e,n,r){var a=r[0],i=r[1],o=r[2],s=Math.hypot(a,i,o),c,l,u,f,v,g,d,m,h,C,p,S,I,D,E,T,y,M,_,O,w,x,P,R;return s<ur?null:(s=1/s,a*=s,i*=s,o*=s,c=Math.sin(n),l=Math.cos(n),u=1-l,f=e[0],v=e[1],g=e[2],d=e[3],m=e[4],h=e[5],C=e[6],p=e[7],S=e[8],I=e[9],D=e[10],E=e[11],T=a*a*u+l,y=i*a*u+o*c,M=o*a*u-i*c,_=a*i*u-o*c,O=i*i*u+l,w=o*i*u+a*c,x=a*o*u+i*c,P=i*o*u-a*c,R=o*o*u+l,t[0]=f*T+m*y+S*M,t[1]=v*T+h*y+I*M,t[2]=g*T+C*y+D*M,t[3]=d*T+p*y+E*M,t[4]=f*_+m*O+S*w,t[5]=v*_+h*O+I*w,t[6]=g*_+C*O+D*w,t[7]=d*_+p*O+E*w,t[8]=f*x+m*P+S*R,t[9]=v*x+h*P+I*R,t[10]=g*x+C*P+D*R,t[11]=d*x+p*P+E*R,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function QM(t,e,n){var r=Math.sin(n),a=Math.cos(n),i=e[4],o=e[5],s=e[6],c=e[7],l=e[8],u=e[9],f=e[10],v=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=i*a+l*r,t[5]=o*a+u*r,t[6]=s*a+f*r,t[7]=c*a+v*r,t[8]=l*a-i*r,t[9]=u*a-o*r,t[10]=f*a-s*r,t[11]=v*a-c*r,t}function KM(t,e,n){var r=Math.sin(n),a=Math.cos(n),i=e[0],o=e[1],s=e[2],c=e[3],l=e[8],u=e[9],f=e[10],v=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*a-l*r,t[1]=o*a-u*r,t[2]=s*a-f*r,t[3]=c*a-v*r,t[8]=i*r+l*a,t[9]=o*r+u*a,t[10]=s*r+f*a,t[11]=c*r+v*a,t}function XM(t,e,n){var r=Math.sin(n),a=Math.cos(n),i=e[0],o=e[1],s=e[2],c=e[3],l=e[4],u=e[5],f=e[6],v=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*a+l*r,t[1]=o*a+u*r,t[2]=s*a+f*r,t[3]=c*a+v*r,t[4]=l*a-i*r,t[5]=u*a-o*r,t[6]=f*a-s*r,t[7]=v*a-c*r,t}function aI(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function YM(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ZM(t,e,n){var r=n[0],a=n[1],i=n[2],o=Math.hypot(r,a,i),s,c,l;return o<ur?null:(o=1/o,r*=o,a*=o,i*=o,s=Math.sin(e),c=Math.cos(e),l=1-c,t[0]=r*r*l+c,t[1]=a*r*l+i*s,t[2]=i*r*l-a*s,t[3]=0,t[4]=r*a*l-i*s,t[5]=a*a*l+c,t[6]=i*a*l+r*s,t[7]=0,t[8]=r*i*l+a*s,t[9]=a*i*l-r*s,t[10]=i*i*l+c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function hZ(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function pZ(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function SZ(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function t7(t,e,n){var r=e[0],a=e[1],i=e[2],o=e[3],s=r+r,c=a+a,l=i+i,u=r*s,f=r*c,v=r*l,g=a*c,d=a*l,m=i*l,h=o*s,C=o*c,p=o*l;return t[0]=1-(g+m),t[1]=f+p,t[2]=v-C,t[3]=0,t[4]=f-p,t[5]=1-(u+m),t[6]=d+h,t[7]=0,t[8]=v+C,t[9]=d-h,t[10]=1-(u+g),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function CZ(t,e){var n=new Na(3),r=-e[0],a=-e[1],i=-e[2],o=e[3],s=e[4],c=e[5],l=e[6],u=e[7],f=r*r+a*a+i*i+o*o;return f>0?(n[0]=(s*o+u*r+c*i-l*a)*2/f,n[1]=(c*o+u*a+l*r-s*i)*2/f,n[2]=(l*o+u*i+s*a-c*r)*2/f):(n[0]=(s*o+u*r+c*i-l*a)*2,n[1]=(c*o+u*a+l*r-s*i)*2,n[2]=(l*o+u*i+s*a-c*r)*2),t7(t,e,n),t}function IZ(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function n7(t,e){var n=e[0],r=e[1],a=e[2],i=e[4],o=e[5],s=e[6],c=e[8],l=e[9],u=e[10];return t[0]=Math.hypot(n,r,a),t[1]=Math.hypot(i,o,s),t[2]=Math.hypot(c,l,u),t}function yT(t,e){var n=new Na(3);n7(n,e);var r=1/n[0],a=1/n[1],i=1/n[2],o=e[0]*r,s=e[1]*a,c=e[2]*i,l=e[4]*r,u=e[5]*a,f=e[6]*i,v=e[8]*r,g=e[9]*a,d=e[10]*i,m=o+u+d,h=0;return m>0?(h=Math.sqrt(m+1)*2,t[3]=.25*h,t[0]=(f-g)/h,t[1]=(v-c)/h,t[2]=(s-l)/h):o>u&&o>d?(h=Math.sqrt(1+o-u-d)*2,t[3]=(f-g)/h,t[0]=.25*h,t[1]=(s+l)/h,t[2]=(v+c)/h):u>d?(h=Math.sqrt(1+u-o-d)*2,t[3]=(v-c)/h,t[0]=(s+l)/h,t[1]=.25*h,t[2]=(f+g)/h):(h=Math.sqrt(1+d-o-u)*2,t[3]=(s-l)/h,t[0]=(v+c)/h,t[1]=(f+g)/h,t[2]=.25*h),t}function r7(t,e,n,r){var a=e[0],i=e[1],o=e[2],s=e[3],c=a+a,l=i+i,u=o+o,f=a*c,v=a*l,g=a*u,d=i*l,m=i*u,h=o*u,C=s*c,p=s*l,S=s*u,I=r[0],D=r[1],E=r[2];return t[0]=(1-(d+h))*I,t[1]=(v+S)*I,t[2]=(g-p)*I,t[3]=0,t[4]=(v-S)*D,t[5]=(1-(f+h))*D,t[6]=(m+C)*D,t[7]=0,t[8]=(g+p)*E,t[9]=(m-C)*E,t[10]=(1-(f+d))*E,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function DZ(t,e,n,r,a){var i=e[0],o=e[1],s=e[2],c=e[3],l=i+i,u=o+o,f=s+s,v=i*l,g=i*u,d=i*f,m=o*u,h=o*f,C=s*f,p=c*l,S=c*u,I=c*f,D=r[0],E=r[1],T=r[2],y=a[0],M=a[1],_=a[2],O=(1-(m+C))*D,w=(g+I)*D,x=(d-S)*D,P=(g-I)*E,R=(1-(v+C))*E,L=(h+p)*E,H=(d+S)*T,F=(h-p)*T,U=(1-(v+m))*T;return t[0]=O,t[1]=w,t[2]=x,t[3]=0,t[4]=P,t[5]=R,t[6]=L,t[7]=0,t[8]=H,t[9]=F,t[10]=U,t[11]=0,t[12]=n[0]+y-(O*y+P*M+H*_),t[13]=n[1]+M-(w*y+R*M+F*_),t[14]=n[2]+_-(x*y+L*M+U*_),t[15]=1,t}function TS(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],o=n+n,s=r+r,c=a+a,l=n*o,u=r*o,f=r*s,v=a*o,g=a*s,d=a*c,m=i*o,h=i*s,C=i*c;return t[0]=1-f-d,t[1]=u+C,t[2]=v-h,t[3]=0,t[4]=u-C,t[5]=1-l-d,t[6]=g+m,t[7]=0,t[8]=v+h,t[9]=g-m,t[10]=1-l-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function EZ(t,e,n,r,a,i,o){var s=1/(n-e),c=1/(a-r),l=1/(i-o);return t[0]=i*2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i*2*c,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(a+r)*c,t[10]=(o+i)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*i*2*l,t[15]=0,t}function a7(t,e,n,r,a){var i=1/Math.tan(e/2),o;return t[0]=i/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,a!=null&&a!==1/0?(o=1/(r-a),t[10]=(a+r)*o,t[14]=2*a*r*o):(t[10]=-1,t[14]=-2*r),t}var TZ=a7;function yZ(t,e,n,r,a){var i=1/Math.tan(e/2),o;return t[0]=i/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,a!=null&&a!==1/0?(o=1/(r-a),t[10]=a*o,t[14]=a*r*o):(t[10]=-1,t[14]=-r),t}function MZ(t,e,n,r){var a=Math.tan(e.upDegrees*Math.PI/180),i=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),c=2/(o+s),l=2/(a+i);return t[0]=c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-((o-s)*c*.5),t[9]=(a-i)*l*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function i7(t,e,n,r,a,i,o){var s=1/(e-n),c=1/(r-a),l=1/(i-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*s,t[13]=(a+r)*c,t[14]=(o+i)*l,t[15]=1,t}var JM=i7;function _Z(t,e,n,r,a,i,o){var s=1/(e-n),c=1/(r-a),l=1/(i-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=l,t[11]=0,t[12]=(e+n)*s,t[13]=(a+r)*c,t[14]=i*l,t[15]=1,t}function e5(t,e,n,r){var a,i,o,s,c,l,u,f,v,g,d=e[0],m=e[1],h=e[2],C=r[0],p=r[1],S=r[2],I=n[0],D=n[1],E=n[2];return Math.abs(d-I)<ur&&Math.abs(m-D)<ur&&Math.abs(h-E)<ur?zt(t):(u=d-I,f=m-D,v=h-E,g=1/Math.hypot(u,f,v),u*=g,f*=g,v*=g,a=p*v-S*f,i=S*u-C*v,o=C*f-p*u,g=Math.hypot(a,i,o),g?(g=1/g,a*=g,i*=g,o*=g):(a=0,i=0,o=0),s=f*o-v*i,c=v*a-u*o,l=u*i-f*a,g=Math.hypot(s,c,l),g?(g=1/g,s*=g,c*=g,l*=g):(s=0,c=0,l=0),t[0]=a,t[1]=s,t[2]=u,t[3]=0,t[4]=i,t[5]=c,t[6]=f,t[7]=0,t[8]=o,t[9]=l,t[10]=v,t[11]=0,t[12]=-(a*d+i*m+o*h),t[13]=-(s*d+c*m+l*h),t[14]=-(u*d+f*m+v*h),t[15]=1,t)}function OZ(t,e,n,r){var a=e[0],i=e[1],o=e[2],s=r[0],c=r[1],l=r[2],u=a-n[0],f=i-n[1],v=o-n[2],g=u*u+f*f+v*v;g>0&&(g=1/Math.sqrt(g),u*=g,f*=g,v*=g);var d=c*v-l*f,m=l*u-s*v,h=s*f-c*u;return g=d*d+m*m+h*h,g>0&&(g=1/Math.sqrt(g),d*=g,m*=g,h*=g),t[0]=d,t[1]=m,t[2]=h,t[3]=0,t[4]=f*h-v*m,t[5]=v*d-u*h,t[6]=u*m-f*d,t[7]=0,t[8]=u,t[9]=f,t[10]=v,t[11]=0,t[12]=a,t[13]=i,t[14]=o,t[15]=1,t}function wZ(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function PZ(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function AZ(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function o7(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function s7(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function xZ(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function RZ(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function bZ(t,e){var n=t[0],r=t[1],a=t[2],i=t[3],o=t[4],s=t[5],c=t[6],l=t[7],u=t[8],f=t[9],v=t[10],g=t[11],d=t[12],m=t[13],h=t[14],C=t[15],p=e[0],S=e[1],I=e[2],D=e[3],E=e[4],T=e[5],y=e[6],M=e[7],_=e[8],O=e[9],w=e[10],x=e[11],P=e[12],R=e[13],L=e[14],H=e[15];return Math.abs(n-p)<=ur*Math.max(1,Math.abs(n),Math.abs(p))&&Math.abs(r-S)<=ur*Math.max(1,Math.abs(r),Math.abs(S))&&Math.abs(a-I)<=ur*Math.max(1,Math.abs(a),Math.abs(I))&&Math.abs(i-D)<=ur*Math.max(1,Math.abs(i),Math.abs(D))&&Math.abs(o-E)<=ur*Math.max(1,Math.abs(o),Math.abs(E))&&Math.abs(s-T)<=ur*Math.max(1,Math.abs(s),Math.abs(T))&&Math.abs(c-y)<=ur*Math.max(1,Math.abs(c),Math.abs(y))&&Math.abs(l-M)<=ur*Math.max(1,Math.abs(l),Math.abs(M))&&Math.abs(u-_)<=ur*Math.max(1,Math.abs(u),Math.abs(_))&&Math.abs(f-O)<=ur*Math.max(1,Math.abs(f),Math.abs(O))&&Math.abs(v-w)<=ur*Math.max(1,Math.abs(v),Math.abs(w))&&Math.abs(g-x)<=ur*Math.max(1,Math.abs(g),Math.abs(x))&&Math.abs(d-P)<=ur*Math.max(1,Math.abs(d),Math.abs(P))&&Math.abs(m-R)<=ur*Math.max(1,Math.abs(m),Math.abs(R))&&Math.abs(h-L)<=ur*Math.max(1,Math.abs(h),Math.abs(L))&&Math.abs(C-H)<=ur*Math.max(1,Math.abs(C),Math.abs(H))}var yS=Xn,NZ=o7;const Jd=Object.freeze(Object.defineProperty({__proto__:null,add:AZ,adjoint:dZ,clone:vZ,copy:fa,create:Fs,determinant:mZ,equals:bZ,exactEquals:RZ,frob:PZ,fromQuat:TS,fromQuat2:CZ,fromRotation:ZM,fromRotationTranslation:t7,fromRotationTranslationScale:r7,fromRotationTranslationScaleOrigin:DZ,fromScaling:YM,fromTranslation:aI,fromValues:jM,fromXRotation:hZ,fromYRotation:pZ,fromZRotation:SZ,frustum:EZ,getRotation:yT,getScaling:n7,getTranslation:IZ,identity:zt,invert:ba,lookAt:e5,mul:yS,multiply:Xn,multiplyScalar:s7,multiplyScalarAndAdd:xZ,ortho:JM,orthoNO:i7,orthoZO:_Z,perspective:TZ,perspectiveFromFieldOfView:MZ,perspectiveNO:a7,perspectiveZO:yZ,rotate:Ki,rotateX:QM,rotateY:KM,rotateZ:XM,scale:$c,set:gZ,str:wZ,sub:NZ,subtract:o7,targetTo:OZ,translate:kr,transpose:$n},Symbol.toStringTag,{value:"Module"}));function Xe(){var t=new Na(3);return Na!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function LZ(t){var e=new Na(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Eo(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function qt(t,e,n){var r=new Na(3);return r[0]=t,r[1]=e,r[2]=n,r}function UZ(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function or(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function Ra(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function fr(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function FZ(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function VZ(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function MT(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function R2(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function c7(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function Ia(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function Hn(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function Si(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2];return Math.hypot(n,r,a)}function l7(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2];return n*n+r*r+a*a}function r0(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function u7(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function Ar(t,e){var n=e[0],r=e[1],a=e[2],i=n*n+r*r+a*a;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function Gt(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function gr(t,e,n){var r=e[0],a=e[1],i=e[2],o=n[0],s=n[1],c=n[2];return t[0]=a*c-i*s,t[1]=i*o-r*c,t[2]=r*s-a*o,t}function un(t,e,n){var r=e[0],a=e[1],i=e[2],o=n[3]*r+n[7]*a+n[11]*i+n[15];return o=o||1,t[0]=(n[0]*r+n[4]*a+n[8]*i+n[12])/o,t[1]=(n[1]*r+n[5]*a+n[9]*i+n[13])/o,t[2]=(n[2]*r+n[6]*a+n[10]*i+n[14])/o,t}function b2(t,e,n){var r=e[0],a=e[1],i=e[2];return t[0]=r*n[0]+a*n[3]+i*n[6],t[1]=r*n[1]+a*n[4]+i*n[7],t[2]=r*n[2]+a*n[5]+i*n[8],t}function kZ(t,e,n){var r=n[0],a=n[1],i=n[2],o=n[3],s=e[0],c=e[1],l=e[2],u=a*l-i*c,f=i*s-r*l,v=r*c-a*s,g=a*v-i*f,d=i*u-r*v,m=r*f-a*u,h=o*2;return u*=h,f*=h,v*=h,g*=2,d*=2,m*=2,t[0]=s+u+g,t[1]=c+f+d,t[2]=l+v+m,t}function t5(t,e){var n=t[0],r=t[1],a=t[2],i=e[0],o=e[1],s=e[2],c=Math.sqrt(n*n+r*r+a*a),l=Math.sqrt(i*i+o*o+s*s),u=c*l,f=u&&Gt(t,e)/u;return Math.acos(Math.min(Math.max(f,-1),1))}function GZ(t){return t[0]=0,t[1]=0,t[2]=0,t}function y8(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function _T(t,e){var n=t[0],r=t[1],a=t[2],i=e[0],o=e[1],s=e[2];return Math.abs(n-i)<=ur*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-o)<=ur*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(a-s)<=ur*Math.max(1,Math.abs(a),Math.abs(s))}var Dr=fr,f7=FZ,OT=l7,ov=Eo;(function(){var t=Xe();return function(e,n,r,a,i,o){var s,c;for(n||(n=3),r||(r=0),a?c=Math.min(a*n+r,e.length):c=e.length,s=r;s<c;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],i(t,t,o),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2];return e}})();function v7(){var t=new Na(4);return Na!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function N2(t,e,n,r){var a=new Na(4);return a[0]=t,a[1]=e,a[2]=n,a[3]=r,a}function M8(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function BZ(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],o=n*n+r*r+a*a+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=n*o,t[1]=r*o,t[2]=a*o,t[3]=i*o,t}function _8(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function Nl(t,e,n){var r=e[0],a=e[1],i=e[2],o=e[3];return t[0]=n[0]*r+n[4]*a+n[8]*i+n[12]*o,t[1]=n[1]*r+n[5]*a+n[9]*i+n[13]*o,t[2]=n[2]*r+n[6]*a+n[10]*i+n[14]*o,t[3]=n[3]*r+n[7]*a+n[11]*i+n[15]*o,t}(function(){var t=v7();return function(e,n,r,a,i,o){var s,c;for(n||(n=4),r||(r=0),a?c=Math.min(a*n+r,e.length):c=e.length,s=r;s<c;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],i(t,t,o),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}})();function au(){var t=new Na(4);return Na!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function iI(t,e,n){n=n*.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function WZ(t,e){var n=Math.acos(e[3])*2,r=Math.sin(n/2);return r>ur?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n}function O8(t,e,n){var r=e[0],a=e[1],i=e[2],o=e[3],s=n[0],c=n[1],l=n[2],u=n[3];return t[0]=r*u+o*s+a*l-i*c,t[1]=a*u+o*c+i*s-r*l,t[2]=i*u+o*l+r*c-a*s,t[3]=o*u-r*s-a*c-i*l,t}function L2(t,e,n,r){var a=e[0],i=e[1],o=e[2],s=e[3],c=n[0],l=n[1],u=n[2],f=n[3],v,g,d,m,h;return g=a*c+i*l+o*u+s*f,g<0&&(g=-g,c=-c,l=-l,u=-u,f=-f),1-g>ur?(v=Math.acos(g),d=Math.sin(v),m=Math.sin((1-r)*v)/d,h=Math.sin(r*v)/d):(m=1-r,h=r),t[0]=m*a+h*c,t[1]=m*i+h*l,t[2]=m*o+h*u,t[3]=m*s+h*f,t}function HZ(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function $Z(t,e){var n=e[0]+e[4]+e[8],r;if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var a=0;e[4]>e[0]&&(a=1),e[8]>e[a*3+a]&&(a=2);var i=(a+1)%3,o=(a+2)%3;r=Math.sqrt(e[a*3+a]-e[i*3+i]-e[o*3+o]+1),t[a]=.5*r,r=.5/r,t[3]=(e[i*3+o]-e[o*3+i])*r,t[i]=(e[i*3+a]+e[a*3+i])*r,t[o]=(e[o*3+a]+e[a*3+o])*r}return t}var w8=N2,g7=BZ;(function(){var t=Xe(),e=qt(1,0,0),n=qt(0,1,0);return function(r,a,i){var o=Gt(a,i);return o<-.999999?(gr(t,e,a),ov(t)<1e-6&&gr(t,n,a),Ar(t,t),iI(r,t,Math.PI),r):o>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(gr(t,a,i),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+o,g7(r,r))}})();(function(){var t=au(),e=au();return function(n,r,a,i,o,s){return L2(t,r,o,s),L2(e,a,i,s),L2(n,t,e,2*s*(1-s)),n}})();(function(){var t=zM();return function(e,n,r,a){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=a[0],t[4]=a[1],t[7]=a[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],g7(e,$Z(e,t))}})();function In(){var t=new Na(2);return Na!=Float32Array&&(t[0]=0,t[1]=0),t}function ap(t){var e=new Na(2);return e[0]=t[0],e[1]=t[1],e}function P8(t,e){var n=new Na(2);return n[0]=t,n[1]=e,n}function Ms(t,e,n){return t[0]=e,t[1]=n,t}function Ri(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function _a(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function Mc(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function zZ(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}function sa(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.hypot(n,r)}function MS(t){var e=t[0],n=t[1];return Math.hypot(e,n)}function Nc(t,e){var n=e[0],r=e[1],a=n*n+r*r;return a>0&&(a=1/Math.sqrt(a)),t[0]=e[0]*a,t[1]=e[1]*a,t}function n5(t,e){return t[0]*e[0]+t[1]*e[1]}function qZ(t,e){var n=t[0],r=t[1],a=e[0],i=e[1],o=Math.sqrt(n*n+r*r)*Math.sqrt(a*a+i*i),s=o&&(n*a+r*i)/o;return Math.acos(Math.min(Math.max(s,-1),1))}var jZ=MS,Ps=_a,r5=sa;(function(){var t=In();return function(e,n,r,a,i,o){var s,c;for(n||(n=2),r||(r=0),a?c=Math.min(a*n+r,e.length):c=e.length,s=r;s<c;s+=n)t[0]=e[s],t[1]=e[s+1],i(t,t,o),e[s]=t[0],e[s+1]=t[1];return e}})();const Gc={ARRAY_BUFFER:0,ELEMENT_ARRAY_BUFFER:1,TEXTURE_BUFFER:2};var d7={ObjectType:Gc};const{ObjectType:U2}=d7,QZ={};function KZ(t,e){e.classHierarchy.push("vtkOpenGLBufferObject");function n(s){switch(s){case U2.ELEMENT_ARRAY_BUFFER:return e.context.ELEMENT_ARRAY_BUFFER;case U2.TEXTURE_BUFFER:if("TEXTURE_BUFFER"in e.context)return e.context.TEXTURE_BUFFER;case U2.ARRAY_BUFFER:default:return e.context.ARRAY_BUFFER}}let r=null,a=null,i=!0,o="";t.getType=()=>r,t.setType=s=>{r=s},t.getHandle=()=>a,t.isReady=()=>i===!1,t.generateBuffer=s=>{const c=n(s);return a===null&&(a=e.context.createBuffer(),r=s),n(r)===c},t.upload=(s,c)=>t.generateBuffer(c)?(e.context.bindBuffer(n(r),a),e.context.bufferData(n(r),s,e.context.STATIC_DRAW),e.allocatedGPUMemoryInBytes=s.length*s.BYTES_PER_ELEMENT,i=!1,!0):(o="Trying to upload array buffer to incompatible buffer.",!1),t.bind=()=>a?(e.context.bindBuffer(n(r),a),!0):!1,t.release=()=>a?(e.context.bindBuffer(n(r),null),!0):!1,t.releaseGraphicsResources=()=>{a!==null&&(e.context.bindBuffer(n(r),null),e.context.deleteBuffer(a),a=null,e.allocatedGPUMemoryInBytes=0)},t.setOpenGLRenderWindow=s=>{e._openGLRenderWindow!==s&&(t.releaseGraphicsResources(),e._openGLRenderWindow=s,e.context=null,s&&(e.context=e._openGLRenderWindow.getContext()))},t.getError=()=>o}const XZ={objectType:U2.ARRAY_BUFFER,context:null,allocatedGPUMemoryInBytes:0};function m7(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,XZ,n),J.obj(t,e),J.get(t,e,["_openGLRenderWindow","allocatedGPUMemoryInBytes"]),J.moveToProtected(t,e,["openGLRenderWindow"]),KZ(t,e)}const YZ=J.newInstance(m7);var Lc={newInstance:YZ,extend:m7,...QZ,...d7};const h7={FLAT:0,GOURAUD:1,PHONG:2},Fi={POINTS:0,WIREFRAME:1,SURFACE:2},ZZ=h7;var p7={Shading:h7,Representation:Fi,Interpolation:ZZ};const{vtkErrorMacro:A8}=J;function JZ(t,e){const n=new Float64Array(3);u7(n,e);const r=new Float64Array(16);return r7(r,au(),t,n),r}function eJ(t,e){return t===null||e===null?!1:!(y8(t,[0,0,0])&&y8(e,[1,1,1]))}function tJ(t,e){e.classHierarchy.push("vtkOpenGLCellArrayBufferObject"),t.setType(Gc.ARRAY_BUFFER),t.createVBO=function(n,r,a,i){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(!n.getData()||!n.getData().length)return e.elementCount=0,0;e.blockSize=3,e.vertexOffset=0,e.normalOffset=0,e.tCoordOffset=0,e.tCoordComponents=0,e.colorComponents=0,e.colorOffset=0,e.customData=[];const s=i.points.getData();let c=null,l=null,u=null;const f=i.colors?i.colors.getNumberOfComponents():0,v=i.tcoords?i.tcoords.getNumberOfComponents():0;i.normals&&(e.normalOffset=4*e.blockSize,e.blockSize+=3,c=i.normals.getData()),i.customAttributes&&i.customAttributes.forEach(U=>{U&&(e.customData.push({data:U.getData(),offset:4*e.blockSize,components:U.getNumberOfComponents(),name:U.getName()}),e.blockSize+=U.getNumberOfComponents())}),i.tcoords&&(e.tCoordOffset=4*e.blockSize,e.tCoordComponents=v,e.blockSize+=v,l=i.tcoords.getData()),i.colors?(e.colorComponents=i.colors.getNumberOfComponents(),e.colorOffset=0,u=i.colors.getData(),e.colorBO||(e.colorBO=Lc.newInstance()),e.colorBO.setOpenGLRenderWindow(e._openGLRenderWindow)):e.colorBO=null,e.stride=4*e.blockSize;let g=0,d=0,m=0,h=0,C=0,p=0,S;const I={anythingToPoints(U,V,X,re){for(let ue=0;ue<U;++ue)S(V[X+ue],re)},linesToWireframe(U,V,X,re){for(let ue=0;ue<U-1;++ue)S(V[X+ue],re),S(V[X+ue+1],re)},polysToWireframe(U,V,X,re){if(U>2)for(let ue=0;ue<U;++ue)S(V[X+ue],re),S(V[X+(ue+1)%U],re)},stripsToWireframe(U,V,X,re){if(U>2){for(let ue=0;ue<U-1;++ue)S(V[X+ue],re),S(V[X+ue+1],re);for(let ue=0;ue<U-2;ue++)S(V[X+ue],re),S(V[X+ue+2],re)}},polysToSurface(U,V,X,re){for(let ue=0;ue<U-2;ue++)S(V[X+0],re),S(V[X+ue+1],re),S(V[X+ue+2],re)},stripsToSurface(U,V,X,re){for(let ue=0;ue<U-2;ue++)S(V[X+ue],re),S(V[X+ue+1+ue%2],re),S(V[X+ue+1+(ue+1)%2],re)}},D={anythingToPoints(U,V){return U},linesToWireframe(U,V){return U>1?(U-1)*2:0},polysToWireframe(U,V){return U>2?U*2:0},stripsToWireframe(U,V){return U>2?U*4-6:0},polysToSurface(U,V){return U>2?(U-2)*3:0},stripsToSurface(U,V,X){return U>2?(U-2)*3:0}};let E=null,T=null;a===Fi.POINTS||r==="verts"?(E=I.anythingToPoints,T=D.anythingToPoints):a===Fi.WIREFRAME||r==="lines"?(E=I[`${r}ToWireframe`],T=D[`${r}ToWireframe`]):(E=I[`${r}ToSurface`],T=D[`${r}ToSurface`]);const y=n.getData(),M=y.length;let _=0;for(let U=0;U<M;)_+=T(y[U],y),U+=y[U]+1;let O=null;const w=new Float32Array(_*e.blockSize);u&&(O=new Uint8Array(_*4));let x=0,P=0,R=0,L=0;for(let U=0;U<3;++U){const V=i.points.getRange(U),X=V[1]-V[0];R+=X*X;const re=.5*(V[1]+V[0]);L+=re*re}if(R>0&&(Math.abs(L)/R>1e6||Math.abs(Math.log10(R))>3||R===0&&L>1e6)){const U=new Float64Array(3),V=new Float64Array(3);for(let X=0;X<3;++X){const re=i.points.getRange(X),ue=re[1]-re[0];U[X]=.5*(re[1]+re[0]),V[X]=ue>0?1/ue:1}t.setCoordShiftAndScale(U,V)}else e.coordShiftAndScaleEnabled===!0&&t.setCoordShiftAndScale(null,null);if(o)if(!o.points&&!o.cells)o.points=new Int32Array(_),o.cells=new Int32Array(_);else{const U=new Int32Array(_+o.points.length);U.set(o.points),o.points=U;const V=new Int32Array(_+o.cells.length);V.set(o.cells),o.cells=V}let F=i.vertexOffset;S=function(V,X){if(o&&(o.points[F]=V,o.cells[F]=p+i.cellOffset),++F,g=V*3,e.coordShiftAndScaleEnabled?(w[x++]=(s[g++]-e.coordShift[0])*e.coordScale[0],w[x++]=(s[g++]-e.coordShift[1])*e.coordScale[1],w[x++]=(s[g++]-e.coordShift[2])*e.coordScale[2]):(w[x++]=s[g++],w[x++]=s[g++],w[x++]=s[g++]),c!==null&&(i.haveCellNormals?d=(p+i.cellOffset)*3:d=V*3,w[x++]=c[d++],w[x++]=c[d++],w[x++]=c[d++]),e.customData.forEach(re=>{C=V*re.components;for(let ue=0;ue<re.components;++ue)w[x++]=re.data[C++]}),l!==null){i.useTCoordsPerCell?m=X*v:m=V*v;for(let re=0;re<v;++re)w[x++]=l[m++]}u!==null&&(i.haveCellScalars?h=(p+i.cellOffset)*f:h=V*f,O[P++]=u[h++],O[P++]=u[h++],O[P++]=u[h++],O[P++]=f===4?u[h++]:255)};for(let U=0;U<M;U+=y[U]+1,p++)E(y[U],y,U+1,p+i.cellOffset);return e.elementCount=_,t.upload(w,Gc.ARRAY_BUFFER),e.colorBO&&(e.colorBOStride=4,e.colorBO.upload(O,Gc.ARRAY_BUFFER)),p},t.setCoordShiftAndScale=(n,r)=>{if(n!==null&&(n.constructor!==Float64Array||n.length!==3)){A8("Wrong type for coordShift, expected vec3 or null");return}if(r!==null&&(r.constructor!==Float64Array||r.length!==3)){A8("Wrong type for coordScale, expected vec3 or null");return}(e.coordShift===null||n===null||!_T(n,e.coordShift))&&(e.coordShift=n),(e.coordScale===null||r===null||!_T(r,e.coordScale))&&(e.coordScale=r),e.coordShiftAndScaleEnabled=eJ(e.coordShift,e.coordScale),e.coordShiftAndScaleEnabled?e.inverseShiftAndScaleMatrix=JZ(e.coordShift,e.coordScale):e.inverseShiftAndScaleMatrix=null}}const nJ={elementCount:0,stride:0,colorBOStride:0,vertexOffset:0,normalOffset:0,tCoordOffset:0,tCoordComponents:0,colorOffset:0,colorComponents:0,tcoordBO:null,customData:[],coordShift:null,coordScale:null,coordShiftAndScaleEnabled:!1,inverseShiftAndScaleMatrix:null};function S7(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,nJ,n),Lc.extend(t,e,n),J.setGet(t,e,["colorBO","elementCount","stride","colorBOStride","vertexOffset","normalOffset","tCoordOffset","tCoordComponents","colorOffset","colorComponents","customData"]),J.get(t,e,["coordShift","coordScale","coordShiftAndScaleEnabled","inverseShiftAndScaleMatrix"]),tJ(t,e)}const rJ=J.newInstance(S7);var aJ={newInstance:rJ,extend:S7};const{vtkErrorMacro:iJ}=J;function oJ(t,e){e.classHierarchy.push("vtkShader"),t.compile=()=>{let n=e.context.VERTEX_SHADER;if(!e.source||!e.source.length||e.shaderType==="Unknown")return!1;switch(e.handle!==0&&(e.context.deleteShader(e.handle),e.handle=0),e.shaderType){case"Fragment":n=e.context.FRAGMENT_SHADER;break;case"Vertex":default:n=e.context.VERTEX_SHADER;break}if(e.handle=e.context.createShader(n),e.context.shaderSource(e.handle,e.source),e.context.compileShader(e.handle),!e.context.getShaderParameter(e.handle,e.context.COMPILE_STATUS)){const a=e.context.getShaderInfoLog(e.handle);return iJ(`Error compiling shader '${e.source}': ${a}`),e.context.deleteShader(e.handle),e.handle=0,!1}return!0},t.cleanup=()=>{e.shaderType==="Unknown"||e.handle===0||(e.context.deleteShader(e.handle),e.handle=0,e.dirty=!0)}}const sJ={shaderType:"Unknown",source:"",error:"",handle:0,dirty:!1,context:null};function C7(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,sJ,n),J.obj(t,e),J.setGet(t,e,["shaderType","source","error","handle","context"]),oJ(t,e)}const cJ=J.newInstance(C7,"vtkShader");var YD={newInstance:cJ,extend:C7};const{vtkErrorMacro:C0}=J;function lJ(t,e,n,r){const a=typeof n=="string"?n:n.join(`
`),i=r===!1?e:new RegExp(e,"g"),o=t.replace(i,a);return{replace:o!==a,result:o}}function uJ(t,e){e.classHierarchy.push("vtkShaderProgram"),t.compileShader=()=>e.vertexShader.compile()?e.fragmentShader.compile()?!t.attachShader(e.vertexShader)||!t.attachShader(e.fragmentShader)?(C0(e.error),0):t.link()?(t.setCompiled(!0),1):(C0(`Links failed: ${e.error}`),0):(C0(e.fragmentShader.getSource().split(`
`).map((n,r)=>`${r}: ${n}`).join(`
`)),C0(e.fragmentShader.getError()),0):(C0(e.vertexShader.getSource().split(`
`).map((n,r)=>`${r}: ${n}`).join(`
`)),C0(e.vertexShader.getError()),0),t.cleanup=()=>{e.shaderType==="Unknown"||e.handle===0||(t.release(),e.vertexShaderHandle!==0&&(e.context.detachShader(e.handle,e.vertexShaderHandle),e.vertexShaderHandle=0),e.fragmentShaderHandle!==0&&(e.context.detachShader(e.handle,e.fragmentShaderHandle),e.fragmentShaderHandle=0),e.context.deleteProgram(e.handle),e.handle=0,t.setCompiled(!1))},t.bind=()=>!e.linked&&!t.link()?!1:(e.context.useProgram(e.handle),t.setBound(!0),!0),t.isBound=()=>!!e.bound,t.release=()=>{e.context.useProgram(null),t.setBound(!1)},t.setContext=n=>{e.vertexShader.setContext(n),e.fragmentShader.setContext(n),e.geometryShader.setContext(n)},t.link=()=>{if(e.linked)return!0;if(e.handle===0)return e.error="Program has not been initialized, and/or does not have shaders.",!1;if(e.uniformLocs={},e.context.linkProgram(e.handle),!e.context.getProgramParameter(e.handle,e.context.LINK_STATUS)){const r=e.context.getProgramInfoLog(e.handle);return C0(`Error linking shader ${r}`),e.handle=0,!1}return t.setLinked(!0),e.attributeLocs={},!0},t.setUniformMatrix=(n,r)=>{const a=t.findUniform(n);if(a===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;const i=new Float32Array(r);return e.context.uniformMatrix4fv(a,!1,i),!0},t.setUniformMatrix3x3=(n,r)=>{const a=t.findUniform(n);if(a===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;const i=new Float32Array(r);return e.context.uniformMatrix3fv(a,!1,i),!0},t.setUniformf=(n,r)=>{const a=t.findUniform(n);return a===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform1f(a,r),!0)},t.setUniformfv=(n,r)=>{const a=t.findUniform(n);return a===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform1fv(a,r),!0)},t.setUniformi=(n,r)=>{const a=t.findUniform(n);return a===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform1i(a,r),!0)},t.setUniformiv=(n,r)=>{const a=t.findUniform(n);return a===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform1iv(a,r),!0)},t.setUniform2f=(n,r,a)=>{const i=t.findUniform(n);if(i===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;if(a===void 0)throw new RangeError("Invalid number of values for array");return e.context.uniform2f(i,r,a),!0},t.setUniform2fv=(n,r)=>{const a=t.findUniform(n);return a===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform2fv(a,r),!0)},t.setUniform2i=(n,r,a)=>{const i=t.findUniform(n);if(i===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;if(a===void 0)throw new RangeError("Invalid number of values for array");return e.context.uniform2i(i,r,a),!0},t.setUniform2iv=(n,r)=>{const a=t.findUniform(n);return a===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform2iv(a,r),!0)},t.setUniform3f=(n,r,a,i)=>{const o=t.findUniform(n);if(o===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;if(i===void 0)throw new RangeError("Invalid number of values for array");return e.context.uniform3f(o,r,a,i),!0},t.setUniform3fArray=(n,r)=>{const a=t.findUniform(n);if(a===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;if(!Array.isArray(r)||r.length!==3)throw new RangeError("Invalid number of values for array");return e.context.uniform3f(a,r[0],r[1],r[2]),!0},t.setUniform3fv=(n,r)=>{const a=t.findUniform(n);return a===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform3fv(a,r),!0)},t.setUniform3i=function(n){const r=t.findUniform(n);if(r===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;for(var a=arguments.length,i=new Array(a>1?a-1:0),o=1;o<a;o++)i[o-1]=arguments[o];let s=i;if(s.length===1&&Array.isArray(s[0])&&(s=s[0]),s.length!==3)throw new RangeError("Invalid number of values for array");return e.context.uniform3i(r,s[0],s[1],s[2]),!0},t.setUniform3iv=(n,r)=>{const a=t.findUniform(n);return a===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform3iv(a,r),!0)},t.setUniform4f=function(n){const r=t.findUniform(n);if(r===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;for(var a=arguments.length,i=new Array(a>1?a-1:0),o=1;o<a;o++)i[o-1]=arguments[o];let s=i;if(s.length===1&&Array.isArray(s[0])&&(s=s[0]),s.length!==4)throw new RangeError("Invalid number of values for array");return e.context.uniform4f(r,s[0],s[1],s[2],s[3]),!0},t.setUniform4fv=(n,r)=>{const a=t.findUniform(n);return a===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform4fv(a,r),!0)},t.setUniform4i=function(n){const r=t.findUniform(n);if(r===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;for(var a=arguments.length,i=new Array(a>1?a-1:0),o=1;o<a;o++)i[o-1]=arguments[o];let s=i;if(s.length===1&&Array.isArray(s[0])&&(s=s[0]),s.length!==4)throw new RangeError("Invalid number of values for array");return e.context.uniform4i(r,s[0],s[1],s[2],s[3]),!0},t.setUniform4iv=(n,r)=>{const a=t.findUniform(n);return a===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform4iv(a,r),!0)},t.findUniform=n=>{if(!n||!e.linked)return-1;let r=e.uniformLocs[n];return r!==void 0?r:(r=e.context.getUniformLocation(e.handle,n),r===null?(e.error=`Uniform ${n} not found in current shader program.`,e.uniformLocs[n]=-1,-1):(e.uniformLocs[n]=r,r))},t.isUniformUsed=n=>{if(!n)return!1;let r=e.uniformLocs[n];return r!==void 0?r!==null:e.linked?(r=e.context.getUniformLocation(e.handle,n),e.uniformLocs[n]=r,r!==null):(C0("attempt to find uniform when the shader program is not linked"),!1)},t.isAttributeUsed=n=>{if(!n)return!1;if(n in e.attributeLocs)return!0;if(!e.linked)return C0("attempt to find uniform when the shader program is not linked"),!1;const r=e.context.getAttribLocation(e.handle,n);return r===-1?!1:(e.attributeLocs[n]=r,!0)},t.attachShader=n=>{if(n.getHandle()===0)return e.error="Shader object was not initialized, cannot attach it.",!1;if(n.getShaderType()==="Unknown")return e.error="Shader object is of type Unknown and cannot be used.",!1;if(e.handle===0){const r=e.context.createProgram();if(r===0)return e.error="Could not create shader program.",!1;e.handle=r,e.linked=!1}return n.getShaderType()==="Vertex"&&(e.vertexShaderHandle!==0&&e.context.detachShader(e.handle,e.vertexShaderHandle),e.vertexShaderHandle=n.getHandle()),n.getShaderType()==="Fragment"&&(e.fragmentShaderHandle!==0&&e.context.detachShader(e.handle,e.fragmentShaderHandle),e.fragmentShaderHandle=n.getHandle()),e.context.attachShader(e.handle,n.getHandle()),t.setLinked(!1),!0},t.detachShader=n=>{if(n.getHandle()===0)return e.error="shader object was not initialized, cannot attach it.",!1;if(n.getShaderType()==="Unknown")return e.error="Shader object is of type Unknown and cannot be used.",!1;switch(e.handle===0&&(e.error="This shader program has not been initialized yet."),n.getShaderType()){case"Vertex":return e.vertexShaderHandle!==n.getHandle()?(e.error="The supplied shader was not attached to this program.",!1):(e.context.detachShader(e.handle,n.getHandle()),e.vertexShaderHandle=0,e.linked=!1,!0);case"Fragment":return e.fragmentShaderHandle!==n.getHandle()?(e.error="The supplied shader was not attached to this program.",!1):(e.context.detachShader(e.handle,n.getHandle()),e.fragmentShaderHandle=0,e.linked=!1,!0);default:return!1}},t.setContext=n=>{e.context=n,e.vertexShader.setContext(n),e.fragmentShader.setContext(n),e.geometryShader.setContext(n)},t.setLastCameraMTime=n=>{e.lastCameraMTime=n}}const fJ={vertexShaderHandle:0,fragmentShaderHandle:0,geometryShaderHandle:0,vertexShader:null,fragmentShader:null,geometryShader:null,linked:!1,bound:!1,compiled:!1,error:"",handle:0,numberOfOutputs:0,attributesLocs:null,uniformLocs:null,md5Hash:0,context:null,lastCameraMTime:null};function I7(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,fJ,n),e.attributesLocs={},e.uniformLocs={},e.vertexShader=YD.newInstance(),e.vertexShader.setShaderType("Vertex"),e.fragmentShader=YD.newInstance(),e.fragmentShader.setShaderType("Fragment"),e.geometryShader=YD.newInstance(),e.geometryShader.setShaderType("Geometry"),J.obj(t,e),J.get(t,e,["lastCameraMTime"]),J.setGet(t,e,["error","handle","compiled","bound","md5Hash","vertexShader","fragmentShader","geometryShader","linked"]),uJ(t,e)}const vJ=J.newInstance(I7,"vtkShaderProgram");var Ve={newInstance:vJ,extend:I7,substitute:lJ};function gJ(t,e){e.classHierarchy.push("vtkOpenGLVertexArrayObject"),t.exposedMethod=()=>{},t.initialize=()=>{e.instancingExtension=null,e._openGLRenderWindow.getWebgl2()||(e.instancingExtension=e.context.getExtension("ANGLE_instanced_arrays")),!e.forceEmulation&&e._openGLRenderWindow&&e._openGLRenderWindow.getWebgl2()?(e.extension=null,e.supported=!0,e.handleVAO=e.context.createVertexArray()):(e.extension=e.context.getExtension("OES_vertex_array_object"),!e.forceEmulation&&e.extension?(e.supported=!0,e.handleVAO=e.extension.createVertexArrayOES()):e.supported=!1)},t.isReady=()=>e.handleVAO!==0||e.supported===!1,t.bind=()=>{if(t.isReady()||t.initialize(),t.isReady()&&e.supported)e.extension?e.extension.bindVertexArrayOES(e.handleVAO):e.context.bindVertexArray(e.handleVAO);else if(t.isReady()){const n=e.context;for(let r=0;r<e.buffers.length;++r){const a=e.buffers[r];e.context.bindBuffer(n.ARRAY_BUFFER,a.buffer);for(let i=0;i<a.attributes.length;++i){const o=a.attributes[i],s=o.isMatrix?o.size:1;for(let c=0;c<s;++c)n.enableVertexAttribArray(o.index+c),n.vertexAttribPointer(o.index+c,o.size,o.type,o.normalize,o.stride,o.offset+o.stride*c/o.size),o.divisor>0&&(e.instancingExtension?e.instancingExtension.vertexAttribDivisorANGLE(o.index+c,1):n.vertexAttribDivisor(o.index+c,1))}}}},t.release=()=>{if(t.isReady()&&e.supported)e.extension?e.extension.bindVertexArrayOES(null):e.context.bindVertexArray(null);else if(t.isReady()){const n=e.context;for(let r=0;r<e.buffers.length;++r){const a=e.buffers[r];e.context.bindBuffer(n.ARRAY_BUFFER,a.buffer);for(let i=0;i<a.attributes.length;++i){const o=a.attributes[i],s=o.isMatrix?o.size:1;for(let c=0;c<s;++c)n.enableVertexAttribArray(o.index+c),n.vertexAttribPointer(o.index+c,o.size,o.type,o.normalize,o.stride,o.offset+o.stride*c/o.size),o.divisor>0&&(e.instancingExtension?e.instancingExtension.vertexAttribDivisorANGLE(o.index+c,0):n.vertexAttribDivisor(o.index+c,0)),n.disableVertexAttribArray(o.index+c)}}}},t.shaderProgramChanged=()=>{t.release(),e.handleVAO&&(e.extension?e.extension.deleteVertexArrayOES(e.handleVAO):e.context.deleteVertexArray(e.handleVAO)),e.handleVAO=0,e.handleProgram=0},t.releaseGraphicsResources=()=>{t.shaderProgramChanged(),e.handleVAO&&(e.extension?e.extension.deleteVertexArrayOES(e.handleVAO):e.context.deleteVertexArray(e.handleVAO)),e.handleVAO=0,e.supported=!0,e.handleProgram=0},t.addAttributeArray=(n,r,a,i,o,s,c,l)=>t.addAttributeArrayWithDivisor(n,r,a,i,o,s,c,l,0,!1),t.addAttributeArrayWithDivisor=(n,r,a,i,o,s,c,l,u,f)=>{if(!n||!n.isBound()||r.getHandle()===0||r.getType()!==Gc.ARRAY_BUFFER||(e.handleProgram===0&&(e.handleProgram=n.getHandle()),t.isReady()||t.initialize(),!t.isReady()||e.handleProgram!==n.getHandle()))return!1;const v=e.context,g={};if(g.name=a,g.index=v.getAttribLocation(e.handleProgram,a),g.offset=i,g.stride=o,g.type=s,g.size=c,g.normalize=l,g.isMatrix=f,g.divisor=u,g.Index===-1)return!1;if(r.bind(),v.enableVertexAttribArray(g.index),v.vertexAttribPointer(g.index,g.size,g.type,g.normalize,g.stride,g.offset),u>0&&(e.instancingExtension?e.instancingExtension.vertexAttribDivisorANGLE(g.index,1):v.vertexAttribDivisor(g.index,1)),g.buffer=r.getHandle(),!e.supported){let d=!1;for(let m=0;m<e.buffers.length;++m){const h=e.buffers[m];if(h.buffer===g.buffer){d=!0;let C=!1;for(let p=0;p<h.attributes.length;++p)h.attributes[p].name===a&&(C=!0,h.attributes[p]=g);C||h.attributes.push(g)}}d||e.buffers.push({buffer:g.buffer,attributes:[g]})}return!0},t.addAttributeMatrixWithDivisor=(n,r,a,i,o,s,c,l,u)=>{const f=t.addAttributeArrayWithDivisor(n,r,a,i,o,s,c,l,u,!0);if(!f)return f;const v=e.context,g=v.getAttribLocation(e.handleProgram,a);for(let d=1;d<c;d++)v.enableVertexAttribArray(g+d),v.vertexAttribPointer(g+d,c,s,l,o,i+o*d/c),u>0&&(e.instancingExtension?e.instancingExtension.vertexAttribDivisorANGLE(g+d,1):v.vertexAttribDivisor(g+d,1));return!0},t.removeAttributeArray=n=>{if(!t.isReady()||e.handleProgram===0)return!1;if(!e.supported)for(let r=0;r<e.buffers.length;++r){const a=e.buffers[r];for(let i=0;i<a.attributes.length;++i)if(a.attributes[i].name===n)return a.attributes.splice(i,1),a.attributes.length||e.buffers.splice(r,1),!0}return!0},t.setOpenGLRenderWindow=n=>{e._openGLRenderWindow!==n&&(t.releaseGraphicsResources(),e._openGLRenderWindow=n,e.context=null,n&&(e.context=e._openGLRenderWindow.getContext()))}}const dJ={forceEmulation:!1,handleVAO:0,handleProgram:0,supported:!0,buffers:null,context:null};function D7(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,dJ,n),e.buffers=[],J.obj(t,e),J.get(t,e,["supported"]),J.setGet(t,e,["forceEmulation"]),gJ(t,e)}const mJ=J.newInstance(D7,"vtkOpenGLVertexArrayObject");var a5={newInstance:mJ,extend:D7};const Il={Start:0,Points:0,Lines:1,Tris:2,TriStrips:3,TrisEdges:4,TriStripsEdges:5,End:6};function hJ(t,e){e.classHierarchy.push("vtkOpenGLHelper"),t.setOpenGLRenderWindow=n=>{e.context=n.getContext(),e.program.setContext(e.context),e.VAO.setOpenGLRenderWindow(n),e.CABO.setOpenGLRenderWindow(n)},t.releaseGraphicsResources=n=>{e.VAO.releaseGraphicsResources(),e.CABO.releaseGraphicsResources(),e.CABO.setElementCount(0)},t.drawArrays=(n,r,a,i)=>{if(e.CABO.getElementCount()){const o=t.getOpenGLMode(a),s=t.haveWideLines(n,r),c=e.context,l=c.getParameter(c.DEPTH_WRITEMASK);e.pointPicking&&c.depthMask(!1),o===c.LINES&&s?(t.updateShaders(n,r,i),c.drawArraysInstanced(o,0,e.CABO.getElementCount(),2*Math.ceil(r.getProperty().getLineWidth()))):(c.lineWidth(r.getProperty().getLineWidth()),t.updateShaders(n,r,i),c.drawArrays(o,0,e.CABO.getElementCount()),c.lineWidth(1));const f=(o===c.POINTS?1:0)||(o===c.LINES?2:3);return e.pointPicking&&c.depthMask(l),e.CABO.getElementCount()/f}return 0},t.getOpenGLMode=n=>{if(e.pointPicking)return e.context.POINTS;const r=e.primitiveType;return n===Fi.POINTS||r===Il.Points?e.context.POINTS:n===Fi.WIREFRAME||r===Il.Lines||r===Il.TrisEdges||r===Il.TriStripsEdges?e.context.LINES:e.context.TRIANGLES},t.haveWideLines=(n,r)=>r.getProperty().getLineWidth()>1?!(e.CABO.getOpenGLRenderWindow()&&e.CABO.getOpenGLRenderWindow().getHardwareMaximumLineWidth()>=r.getProperty().getLineWidth()):!1,t.getNeedToRebuildShaders=(n,r,a)=>!!(a.getNeedToRebuildShaders(t,n,r)||t.getProgram()===0||t.getShaderSourceTime().getMTime()<a.getMTime()||t.getShaderSourceTime().getMTime()<r.getMTime()),t.updateShaders=(n,r,a)=>{if(t.getNeedToRebuildShaders(n,r,a)){const i={Vertex:null,Fragment:null,Geometry:null};a.buildShaders(i,n,r);const o=e.CABO.getOpenGLRenderWindow().getShaderCache().readyShaderProgramArray(i.Vertex,i.Fragment,i.Geometry);o!==t.getProgram()&&(t.setProgram(o),t.getVAO().releaseGraphicsResources()),t.getShaderSourceTime().modified()}else e.CABO.getOpenGLRenderWindow().getShaderCache().readyShaderProgram(t.getProgram());t.getVAO().bind(),a.setMapperShaderParameters(t,n,r),a.setPropertyShaderParameters(t,n,r),a.setCameraShaderParameters(t,n,r),a.setLightingShaderParameters(t,n,r),a.invokeShaderCallbacks(t,n,r)},t.setMapperShaderParameters=(n,r,a)=>{if(t.haveWideLines(n,r)){t.getProgram().setUniform2f("viewportSize",a.usize,a.vsize);const i=parseFloat(r.getProperty().getLineWidth()),o=i/2;t.getProgram().setUniformf("lineWidthStepSize",i/Math.ceil(i)),t.getProgram().setUniformf("halfLineWidth",o)}e.primitiveType===Il.Points||r.getProperty().getRepresentation()===Fi.POINTS?t.getProgram().setUniformf("pointSize",r.getProperty().getPointSize()):e.pointPicking&&t.getProgram().setUniformf("pointSize",t.getPointPickingPrimitiveSize())},t.replaceShaderPositionVC=(n,r,a)=>{let i=n.Vertex;i=Ve.substitute(i,"//VTK::PositionVC::Dec",["//VTK::PositionVC::Dec","uniform float pointSize;"]).result,i=Ve.substitute(i,"//VTK::PositionVC::Impl",["//VTK::PositionVC::Impl","  gl_PointSize = pointSize;"],!1).result,t.getOpenGLMode(a.getProperty().getRepresentation())===e.context.LINES&&t.haveWideLines(r,a)&&(i=Ve.substitute(i,"//VTK::PositionVC::Dec",["//VTK::PositionVC::Dec","uniform vec2 viewportSize;","uniform float lineWidthStepSize;","uniform float halfLineWidth;"]).result,i=Ve.substitute(i,"//VTK::PositionVC::Impl",["//VTK::PositionVC::Impl"," if (halfLineWidth > 0.0)","   {","   float offset = float(gl_InstanceID / 2) * lineWidthStepSize - halfLineWidth;","   vec4 tmpPos = gl_Position;","   vec3 tmpPos2 = tmpPos.xyz / tmpPos.w;","   tmpPos2.x = tmpPos2.x + 2.0 * mod(float(gl_InstanceID), 2.0) * offset / viewportSize[0];","   tmpPos2.y = tmpPos2.y + 2.0 * mod(float(gl_InstanceID + 1), 2.0) * offset / viewportSize[1];","   gl_Position = vec4(tmpPos2.xyz * tmpPos.w, tmpPos.w);","   }"]).result),n.Vertex=i},t.getPointPickingPrimitiveSize=()=>e.primitiveType===Il.Points?2:e.primitiveType===Il.Lines?4:6,t.getAllocatedGPUMemoryInBytes=()=>t.getCABO().getAllocatedGPUMemoryInBytes()}const pJ={context:null,program:null,shaderSourceTime:null,VAO:null,attributeUpdateTime:null,CABO:null,primitiveType:0,pointPicking:!1};function E7(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,pJ,n),J.obj(t,e),e.shaderSourceTime={},J.obj(e.shaderSourceTime),e.attributeUpdateTime={},J.obj(e.attributeUpdateTime),J.setGet(t,e,["program","shaderSourceTime","VAO","attributeUpdateTime","CABO","primitiveType","pointPicking"]),e.program=Ve.newInstance(),e.VAO=a5.newInstance(),e.CABO=aJ.newInstance(),hJ(t,e)}const SJ=J.newInstance(E7);var tc={newInstance:SJ,extend:E7,primTypes:Il};const{Representation:Wg,Interpolation:Hg}=p7;function x8(t){return()=>J.vtkErrorMacro(`vtkProperty::${t} - NOT IMPLEMENTED`)}function CJ(t,e){e.classHierarchy.push("vtkProperty"),t.setColor=(n,r,a)=>{Array.isArray(n)?(e.color[0]!==n[0]||e.color[1]!==n[1]||e.color[2]!==n[2])&&(e.color[0]=n[0],e.color[1]=n[1],e.color[2]=n[2],t.modified()):(e.color[0]!==n||e.color[1]!==r||e.color[2]!==a)&&(e.color[0]=n,e.color[1]=r,e.color[2]=a,t.modified()),t.setDiffuseColor(e.color),t.setAmbientColor(e.color),t.setSpecularColor(e.color)},t.computeCompositeColor=x8("ComputeCompositeColor"),t.getColor=()=>{let n=0;e.ambient+e.diffuse+e.specular>0&&(n=1/(e.ambient+e.diffuse+e.specular));for(let r=0;r<3;r++)e.color[r]=n*(e.ambient*e.ambientColor[r]+e.diffuse*e.diffuseColor[r]+e.specular*e.specularColor[r]);return[].concat(e.color)},t.setSpecularPower=n=>{const r=1/Math.max(1,n);(e.roughness!==r||e.specularPower!==n)&&(e.specularPower=n,e.roughness=r,t.modified())},t.addShaderVariable=x8("AddShaderVariable"),t.setInterpolationToFlat=()=>t.setInterpolation(Hg.FLAT),t.setInterpolationToGouraud=()=>t.setInterpolation(Hg.GOURAUD),t.setInterpolationToPhong=()=>t.setInterpolation(Hg.PHONG),t.getInterpolationAsString=()=>J.enumToString(Hg,e.interpolation),t.setRepresentationToWireframe=()=>t.setRepresentation(Wg.WIREFRAME),t.setRepresentationToSurface=()=>t.setRepresentation(Wg.SURFACE),t.setRepresentationToPoints=()=>t.setRepresentation(Wg.POINTS),t.getRepresentationAsString=()=>J.enumToString(Wg,e.representation)}const IJ={color:[1,1,1],ambientColor:[1,1,1],diffuseColor:[1,1,1],specularColor:[1,1,1],edgeColor:[0,0,0],ambient:0,diffuse:1,metallic:0,roughness:.6,normalStrength:1,emission:1,baseIOR:1.45,specular:0,specularPower:1,opacity:1,interpolation:Hg.GOURAUD,representation:Wg.SURFACE,edgeVisibility:!1,backfaceCulling:!1,frontfaceCulling:!1,pointSize:1,lineWidth:1,lighting:!0,shading:!1,materialName:null};function T7(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,IJ,n),J.obj(t,e),J.setGet(t,e,["lighting","interpolation","ambient","diffuse","metallic","roughness","normalStrength","emission","baseIOR","specular","specularPower","opacity","edgeVisibility","lineWidth","pointSize","backfaceCulling","frontfaceCulling","representation","diffuseTexture","metallicTexture","roughnessTexture","normalTexture","ambientOcclusionTexture","emissionTexture"]),J.setGetArray(t,e,["ambientColor","specularColor","diffuseColor","edgeColor"],3),CJ(t,e)}const DJ=J.newInstance(T7,"vtkProperty");var bv={newInstance:DJ,extend:T7,...p7};const{Representation:EJ}=bv,{vtkErrorMacro:R8}=J;function TJ(t){const e=Ve.substitute(t.Fragment,"//VTK::RenderPassFragmentShader::Impl",`
      float weight = gl_FragData[0].a * pow(max(1.1 - gl_FragCoord.z, 0.0), 2.0);
      gl_FragData[0] = vec4(gl_FragData[0].rgb*weight, gl_FragData[0].a);
      gl_FragData[1].r = weight;
    `,!1);t.Fragment=e.result}const yJ=`//VTK::System::Dec

in vec2 tcoord;

uniform sampler2D translucentRTexture;
uniform sampler2D translucentRGBATexture;

// the output of this shader
//VTK::Output::Dec

void main()
{
  vec4 t1Color = texture(translucentRGBATexture, tcoord);
  float t2Color = texture(translucentRTexture, tcoord).r;
  gl_FragData[0] = vec4(t1Color.rgb/max(t2Color,0.01), 1.0 - t1Color.a);
}
`;function MJ(t,e){e.classHierarchy.push("vtkOpenGLOrderIndependentTranslucentPass"),t.createVertexBuffer=()=>{const n=new Float32Array([-1,-1,-1,1,-1,-1,-1,1,-1,1,1,-1]),r=new Float32Array([0,0,1,0,0,1,1,1]),a=new Uint16Array([4,0,1,3,2]),i=fn.newInstance({numberOfComponents:3,values:n});i.setName("points");const o=fn.newInstance({numberOfComponents:2,values:r});o.setName("tcoords");const s=fn.newInstance({numberOfComponents:1,values:a});e.tris.getCABO().createVBO(s,"polys",EJ.SURFACE,{points:i,tcoords:o,cellOffset:0}),e.VBOBuildTime.modified()},t.createFramebuffer=n=>{const r=n.getSize(),a=n.getContext();e.framebuffer=nI.newInstance(),e.framebuffer.setOpenGLRenderWindow(n),e.framebuffer.create(...r),e.framebuffer.saveCurrentBindingsAndBuffers(),e.framebuffer.bind(),e.translucentRGBATexture=oa.newInstance(),e.translucentRGBATexture.setInternalFormat(a.RGBA16F),e.translucentRGBATexture.setFormat(a.RGBA),e.translucentRGBATexture.setOpenGLDataType(a.HALF_FLOAT),e.translucentRGBATexture.setOpenGLRenderWindow(n),e.translucentRGBATexture.create2DFromRaw(r[0],r[1],4,"Float32Array",null),e.translucentRTexture=oa.newInstance(),e.translucentRTexture.setInternalFormat(a.R16F),e.translucentRTexture.setFormat(a.RED),e.translucentRTexture.setOpenGLDataType(a.HALF_FLOAT),e.translucentRTexture.setOpenGLRenderWindow(n),e.translucentRTexture.create2DFromRaw(r[0],r[1],1,"Float32Array",null),e.translucentZTexture=oa.newInstance(),e.translucentZTexture.setOpenGLRenderWindow(n),e.translucentZTexture.createDepthFromRaw(r[0],r[1],"Float32Array",null),e.framebuffer.setColorBuffer(e.translucentRGBATexture,0),e.framebuffer.setColorBuffer(e.translucentRTexture,1),e.framebuffer.setDepthBuffer(e.translucentZTexture)},t.createCopyShader=n=>{e.copyShader=n.getShaderCache().readyShaderProgramArray(["//VTK::System::Dec","attribute vec4 vertexDC;","attribute vec2 tcoordTC;","varying vec2 tcoord;","void main() { tcoord = tcoordTC; gl_Position = vertexDC; }"].join(`
`),yJ,"")},t.createVBO=n=>{const r=n.getContext();e.tris.setOpenGLRenderWindow(n),t.createVertexBuffer();const a=e.copyShader;e.tris.getCABO().bind(),e.copyVAO.addAttributeArray(a,e.tris.getCABO(),"vertexDC",e.tris.getCABO().getVertexOffset(),e.tris.getCABO().getStride(),r.FLOAT,3,r.FALSE)||R8("Error setting vertexDC in copy shader VAO."),e.copyVAO.addAttributeArray(a,e.tris.getCABO(),"tcoordTC",e.tris.getCABO().getTCoordOffset(),e.tris.getCABO().getStride(),r.FLOAT,2,r.FALSE)||R8("Error setting vertexDC in copy shader VAO.")},t.traverse=(n,r,a)=>{if(e.deleted)return;const i=n.getSize(),o=n.getContext();if(e._supported=!1,r.getSelector()||!o||!n.getWebgl2()||!o.getExtension("EXT_color_buffer_half_float")&&!o.getExtension("EXT_color_buffer_float")){t.setCurrentOperation("translucentPass"),r.traverse(t);return}if(e._supported=!0,e.framebuffer===null)t.createFramebuffer(n);else{const c=e.framebuffer.getSize();c===null||c[0]!==i[0]||c[1]!==i[1]?(e.framebuffer.releaseGraphicsResources(),e.translucentRGBATexture.releaseGraphicsResources(n),e.translucentRTexture.releaseGraphicsResources(n),e.translucentZTexture.releaseGraphicsResources(n),t.createFramebuffer(n)):(e.framebuffer.saveCurrentBindingsAndBuffers(),e.framebuffer.bind())}o.drawBuffers([o.COLOR_ATTACHMENT0]),o.clearBufferfv(o.COLOR,0,[0,0,0,0]),o.clearBufferfv(o.DEPTH,0,[1]),o.colorMask(!1,!1,!1,!1),a.getOpaqueActorCount()>0&&(a.setCurrentOperation("opaqueZBufferPass"),r.traverse(a)),o.colorMask(!0,!0,!0,!0),o.drawBuffers([o.COLOR_ATTACHMENT0,o.COLOR_ATTACHMENT1]),o.viewport(0,0,i[0],i[1]),o.scissor(0,0,i[0],i[1]),o.clearBufferfv(o.COLOR,0,[0,0,0,1]),o.clearBufferfv(o.COLOR,1,[0,0,0,0]),o.enable(o.DEPTH_TEST),o.enable(o.BLEND),o.blendFuncSeparate(o.ONE,o.ONE,o.ZERO,o.ONE_MINUS_SRC_ALPHA),t.setCurrentOperation("translucentPass"),r.traverse(t),o.drawBuffers([o.NONE]),e.framebuffer.restorePreviousBindingsAndBuffers(),e.copyShader===null?t.createCopyShader(n):n.getShaderCache().readyShaderProgram(e.copyShader),e.copyVAO||(e.copyVAO=a5.newInstance(),e.copyVAO.setOpenGLRenderWindow(n)),e.copyVAO.bind(),e.VBOBuildTime.getMTime()<t.getMTime()&&t.createVBO(n),o.blendFuncSeparate(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA,o.ONE,o.ONE_MINUS_SRC_ALPHA),o.depthMask(!1),o.depthFunc(o.ALWAYS),o.viewport(0,0,i[0],i[1]),o.scissor(0,0,i[0],i[1]),e.translucentRGBATexture.activate(),e.copyShader.setUniformi("translucentRGBATexture",e.translucentRGBATexture.getTextureUnit()),e.translucentRTexture.activate(),e.copyShader.setUniformi("translucentRTexture",e.translucentRTexture.getTextureUnit()),o.drawArrays(o.TRIANGLES,0,e.tris.getCABO().getElementCount()),o.depthMask(!0),o.depthFunc(o.LEQUAL),e.translucentRGBATexture.deactivate(),e.translucentRTexture.deactivate();const s=r.getTiledSizeAndOrigin();o.scissor(s.lowerLeftU,s.lowerLeftV,s.usize,s.vsize),o.viewport(s.lowerLeftU,s.lowerLeftV,s.usize,s.vsize)},t.getShaderReplacement=()=>e._supported?TJ:null,t.releaseGraphicsResources=n=>{e.framebuffer&&(e.framebuffer.releaseGraphicsResources(n),e.framebuffer=null),e.translucentRGBATexture&&(e.translucentRGBATexture.releaseGraphicsResources(n),e.translucentRGBATexture=null),e.translucentRTexture&&(e.translucentRTexture.releaseGraphicsResources(n),e.translucentRTexture=null),e.translucentZTexture&&(e.translucentZTexture.releaseGraphicsResources(n),e.translucentZTexture=null),e.copyVAO&&(e.copyVAO.releaseGraphicsResources(n),e.copyVAO=null),e.copyShader&&(e.copyShader.releaseGraphicsResources(n),e.copyShader=null),e.tris&&(e.tris.releaseGraphicsResources(n),e.tris=null),t.modified()}}const _J={framebuffer:null,copyShader:null,tris:null};function y7(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,_J,n),$M.extend(t,e,n),e.VBOBuildTime={},J.obj(e.VBOBuildTime,{mtime:0}),e.tris=tc.newInstance(),J.get(t,e,["framebuffer"]),MJ(t,e)}const OJ=J.newInstance(y7,"vtkOpenGLOrderIndependentTranslucentPass");var wJ={newInstance:OJ,extend:y7};function PJ(t,e){e.classHierarchy.push("vtkForwardPass"),t.traverse=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(e.deleted)return;e._currentParent=r,t.setCurrentOperation("buildPass"),n.traverse(t);const a=n.getRenderable().getNumberOfLayers(),i=n.getRenderable().getRenderersByReference();for(let o=0;o<a;o++)for(let s=0;s<i.length;s++){const c=i[s],l=n.getViewNodeFor(c);if(c.getDraw()&&c.getLayer()===o){if(e.opaqueActorCount=0,e.translucentActorCount=0,e.volumeCount=0,e.overlayActorCount=0,t.setCurrentOperation("queryPass"),l.traverse(t),(e.opaqueActorCount>0||e.translucentActorCount>0)&&e.volumeCount>0||e.depthRequested){const u=n.getFramebufferSize();e.framebuffer===null&&(e.framebuffer=nI.newInstance()),e.framebuffer.setOpenGLRenderWindow(n),e.framebuffer.saveCurrentBindingsAndBuffers();const f=e.framebuffer.getSize();(f===null||f[0]!==u[0]||f[1]!==u[1])&&(e.framebuffer.create(u[0],u[1]),e.framebuffer.populateFramebuffer()),e.framebuffer.bind(),t.setCurrentOperation("zBufferPass"),l.traverse(t),e.framebuffer.restorePreviousBindingsAndBuffers(),e.depthRequested=!1}t.setCurrentOperation("cameraPass"),l.traverse(t),e.opaqueActorCount>0&&(t.setCurrentOperation("opaquePass"),l.traverse(t)),e.translucentActorCount>0&&(e.translucentPass||(e.translucentPass=wJ.newInstance()),e.translucentPass.traverse(n,l,t)),e.volumeCount>0&&(t.setCurrentOperation("volumePass"),l.traverse(t)),e.overlayActorCount>0&&(t.setCurrentOperation("overlayPass"),l.traverse(t))}}},t.getZBufferTexture=()=>e.framebuffer?e.framebuffer.getColorTexture():null,t.requestDepth=()=>{e.depthRequested=!0},t.incrementOpaqueActorCount=()=>e.opaqueActorCount++,t.incrementTranslucentActorCount=()=>e.translucentActorCount++,t.incrementVolumeCount=()=>e.volumeCount++,t.incrementOverlayActorCount=()=>e.overlayActorCount++}const AJ={opaqueActorCount:0,translucentActorCount:0,volumeCount:0,overlayActorCount:0,framebuffer:null,depthRequested:!1};function M7(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,AJ,n),$M.extend(t,e,n),J.get(t,e,["framebuffer","opaqueActorCount","translucentActorCount","volumeCount"]),PJ(t,e)}const xJ=J.newInstance(M7,"vtkForwardPass");var RJ={newInstance:xJ,extend:M7};const mo={MIN_KNOWN_PASS:0,ACTOR_PASS:0,COMPOSITE_INDEX_PASS:1,ID_LOW24:2,ID_HIGH24:3,MAX_KNOWN_PASS:3};var _7={PassTypes:mo};const{vtkErrorMacro:b8,vtkWarningMacro:bJ}=J;function NJ(t,e){e.classHierarchy.push("vtkFieldData");const n=t.getState;e.arrays&&(e.arrays=e.arrays.map(r=>({data:Js(r.data)}))),t.initialize=()=>{t.initializeFields(),t.copyAllOn(),t.clearFieldFlags()},t.initializeFields=()=>{e.arrays=[],e.copyFieldFlags={},t.modified()},t.copyStructure=r=>{t.initializeFields(),e.copyFieldFlags=r.getCopyFieldFlags().map(a=>a),e.arrays=r.arrays().map(a=>({array:a}))},t.getNumberOfArrays=()=>e.arrays.length,t.getNumberOfActiveArrays=()=>e.arrays.length,t.addArray=r=>{const a=r.getName(),{array:i,index:o}=t.getArrayWithIndex(a);return i!=null?(e.arrays[o]={data:r},o):(e.arrays=[].concat(e.arrays,{data:r}),e.arrays.length-1)},t.removeAllArrays=()=>{e.arrays=[]},t.removeArray=r=>{const a=e.arrays.findIndex(i=>i.data.getName()===r);return t.removeArrayByIndex(a)},t.removeArrayByIndex=r=>r!==-1&&r<e.arrays.length?(e.arrays.splice(r,1),!0):!1,t.getArrays=()=>e.arrays.map(r=>r.data),t.getArray=r=>typeof r=="number"?t.getArrayByIndex(r):t.getArrayByName(r),t.getArrayByName=r=>e.arrays.reduce((a,i,o)=>i.data.getName()===r?i.data:a,null),t.getArrayWithIndex=r=>{const a=e.arrays.findIndex(i=>i.data.getName()===r);return{array:a!==-1?e.arrays[a].data:null,index:a}},t.getArrayByIndex=r=>r>=0&&r<e.arrays.length?e.arrays[r].data:null,t.hasArray=r=>t.getArrayWithIndex(r).index>=0,t.getArrayName=r=>{const a=e.arrays[r];return a?a.data.getName():""},t.getCopyFieldFlags=()=>e.copyFieldFlags,t.getFlag=r=>e.copyFieldFlags[r],t.passData=function(r){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1;r.getArrays().forEach(o=>{const s=t.getFlag(o.getName());if(s!==!1&&!(e.doCopyAllOff&&s!==!0)&&o){let c=t.getArrayByName(o.getName());if(c)if(o.getNumberOfComponents()===c.getNumberOfComponents())if(a>-1&&a<o.getNumberOfTuples()){const l=i>-1?i:a;c.insertTuple(l,o.getTuple(a))}else c.insertTuples(0,o.getTuples());else b8("Unhandled case in passData");else if(a<0||a>o.getNumberOfTuples())t.addArray(o),r.getAttributes(o).forEach(l=>{t.setAttribute(o,l)});else{const l=o.getNumberOfComponents();let u=o.getNumberOfValues();const f=i>-1?i:a;u<=f*l&&(u=(f+1)*l),c=fn.newInstance({name:o.getName(),dataType:o.getDataType(),numberOfComponents:l,values:J.newTypedArray(o.getDataType(),u),size:0}),c.insertTuple(f,o.getTuple(a)),t.addArray(c),r.getAttributes(o).forEach(v=>{t.setAttribute(c,v)})}}})},t.interpolateData=function(r){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:-1,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.5;r.getArrays().forEach(c=>{const l=t.getFlag(c.getName());if(l!==!1&&!(e.doCopyAllOff&&l!==!0)&&c){let u=t.getArrayByName(c.getName());if(u)if(c.getNumberOfComponents()===u.getNumberOfComponents())if(a>-1&&a<c.getNumberOfTuples()){const f=o>-1?o:a;u.interpolateTuple(f,c,a,c,i,s),bJ("Unexpected case in interpolateData")}else u.insertTuples(c.getTuples());else b8("Unhandled case in interpolateData");else if(a<0||i<0||a>c.getNumberOfTuples())t.addArray(c),r.getAttributes(c).forEach(f=>{t.setAttribute(c,f)});else{const f=c.getNumberOfComponents();let v=c.getNumberOfValues();const g=o>-1?o:a;v<=g*f&&(v=(g+1)*f),u=fn.newInstance({name:c.getName(),dataType:c.getDataType(),numberOfComponents:f,values:J.newTypedArray(c.getDataType(),v),size:0}),u.interpolateTuple(g,c,a,c,i,s),t.addArray(u),r.getAttributes(c).forEach(d=>{t.setAttribute(u,d)})}}})},t.copyFieldOn=r=>{e.copyFieldFlags[r]=!0},t.copyFieldOff=r=>{e.copyFieldFlags[r]=!1},t.copyAllOn=()=>{(!e.doCopyAllOn||e.doCopyAllOff)&&(e.doCopyAllOn=!0,e.doCopyAllOff=!1,t.modified())},t.copyAllOff=()=>{(e.doCopyAllOn||!e.doCopyAllOff)&&(e.doCopyAllOn=!1,e.doCopyAllOff=!0,t.modified())},t.clearFieldFlags=()=>{e.copyFieldFlags={}},t.deepCopy=r=>{e.arrays=r.getArrays().map(a=>{const i=a.newClone();return i.deepCopy(a),{data:i}})},t.copyFlags=r=>r.getCopyFieldFlags().map(a=>a),t.reset=()=>e.arrays.forEach(r=>r.data.reset()),t.getMTime=()=>e.arrays.reduce((r,a)=>a.data.getMTime()>r?a.data.getMTime():r,e.mtime),t.getNumberOfComponents=()=>e.arrays.reduce((r,a)=>r+a.data.getNumberOfComponents(),0),t.getNumberOfTuples=()=>e.arrays.length>0?e.arrays[0].getNumberOfTuples():0,t.getState=()=>{const r=n();return r&&(r.arrays=e.arrays.map(a=>({data:a.data.getState()}))),r}}const LJ={arrays:[],copyFieldFlags:[],doCopyAllOn:!0,doCopyAllOff:!1};function O7(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,LJ,n),J.obj(t,e),NJ(t,e)}const UJ=J.newInstance(O7,"vtkFieldData");var FJ={newInstance:UJ,extend:O7};const VJ={SCALARS:0,VECTORS:1,NORMALS:2,TCOORDS:3,TENSORS:4,GLOBALIDS:5,PEDIGREEIDS:6,EDGEFLAG:7,NUM_ATTRIBUTES:8},kJ={MAX:0,EXACT:1,NOLIMIT:2},GJ={DUPLICATECELL:1,HIGHCONNECTIVITYCELL:2,LOWCONNECTIVITYCELL:4,REFINEDCELL:8,EXTERIORCELL:16,HIDDENCELL:32},BJ={DUPLICATEPOINT:1,HIDDENPOINT:2},WJ={COPYTUPLE:0,INTERPOLATE:1,PASSDATA:2,ALLCOPY:3},HJ="vtkGhostType",_S={DEFAULT:0,SINGLE:1,DOUBLE:2};var w7={AttributeCopyOperations:WJ,AttributeLimitTypes:kJ,AttributeTypes:VJ,CellGhostTypes:GJ,DesiredOutputPrecision:_S,PointGhostTypes:BJ,ghostArrayName:HJ};const{AttributeTypes:vl,AttributeCopyOperations:wu}=w7,{vtkWarningMacro:ip}=J;function $J(t,e){const n=["Scalars","Vectors","Normals","TCoords","Tensors","GlobalIds","PedigreeIds"];function r(o){let s=n.find(c=>vl[c.toUpperCase()]===o||typeof o!="number"&&c.toLowerCase()===o.toLowerCase());return typeof s>"u"&&(s=null),s}e.classHierarchy.push("vtkDataSetAttributes");const a={...t};t.checkNumberOfComponents=o=>!0,t.setAttribute=(o,s)=>{const c=r(s);if(o&&c.toUpperCase()==="PEDIGREEIDS"&&!o.isA("vtkDataArray"))return ip(`Cannot set attribute ${c}. The attribute must be a vtkDataArray.`),-1;if(o&&!t.checkNumberOfComponents(o,c))return ip(`Cannot set attribute ${c}. Incorrect number of components.`),-1;let l=e[`active${c}`];if(l>=0&&l<e.arrays.length){if(e.arrays[l]===o)return l;t.removeArrayByIndex(l)}return o?(l=t.addArray(o),e[`active${c}`]=l):e[`active${c}`]=-1,t.modified(),e[`active${c}`]},t.getAttributes=o=>n.filter(s=>t[`get${s}`]()===o),t.setActiveAttributeByName=(o,s)=>t.setActiveAttributeByIndex(t.getArrayWithIndex(o).index,s),t.setActiveAttributeByIndex=(o,s)=>{const c=r(s);if(o>=0&&o<e.arrays.length){if(c.toUpperCase()!=="PEDIGREEIDS"){const l=t.getArrayByIndex(o);if(!l.isA("vtkDataArray"))return ip(`Cannot set attribute ${c}. Only vtkDataArray subclasses can be set as active attributes.`),-1;if(!t.checkNumberOfComponents(l,c))return ip(`Cannot set attribute ${c}. Incorrect number of components.`),-1}return e[`active${c}`]=o,t.modified(),o}return o===-1&&(e[`active${c}`]=o,t.modified()),-1},t.getActiveAttribute=o=>{const s=r(o);return t[`get${s}`]()},t.removeAllArrays=()=>{n.forEach(o=>{e[`active${o}`]=-1}),a.removeAllArrays()},t.removeArrayByIndex=o=>(o!==-1&&n.forEach(s=>{o===e[`active${s}`]?e[`active${s}`]=-1:o<e[`active${s}`]&&(e[`active${s}`]-=1)}),a.removeArrayByIndex(o)),n.forEach(o=>{const s=`active${o}`;t[`get${o}`]=()=>t.getArrayByIndex(e[s]),t[`set${o}`]=c=>t.setAttribute(c,o),t[`setActive${o}`]=c=>t.setActiveAttributeByIndex(t.getArrayWithIndex(c).index,o),t[`copy${o}Off`]=()=>{const c=o.toUpperCase();e.copyAttributeFlags[wu.PASSDATA][vl[c]]=!1},t[`copy${o}On`]=()=>{const c=o.toUpperCase();e.copyAttributeFlags[wu.PASSDATA][vl[c]]=!0}}),t.initializeAttributeCopyFlags=()=>{e.copyAttributeFlags=[],Object.keys(wu).filter(o=>o!=="ALLCOPY").forEach(o=>{e.copyAttributeFlags[wu[o]]=Object.keys(vl).filter(s=>s!=="NUM_ATTRIBUTES").reduce((s,c)=>(s[vl[c]]=!0,s),[])}),e.copyAttributeFlags[wu.COPYTUPLE][vl.GLOBALIDS]=!1,e.copyAttributeFlags[wu.INTERPOLATE][vl.GLOBALIDS]=!1,e.copyAttributeFlags[wu.COPYTUPLE][vl.PEDIGREEIDS]=!1},t.initialize=J.chain(t.initialize,t.initializeAttributeCopyFlags),e.dataArrays&&Object.keys(e.dataArrays).length&&Object.keys(e.dataArrays).forEach(o=>{!e.dataArrays[o].ref&&e.dataArrays[o].type==="vtkDataArray"&&t.addArray(fn.newInstance(e.dataArrays[o]))});const i=t.shallowCopy;t.shallowCopy=(o,s)=>{i(o,s),e.arrays=o.getArrays().map(c=>{const l=c.newClone();return l.shallowCopy(c,s),{data:l}})},t.initializeAttributeCopyFlags()}const zJ={activeScalars:-1,activeVectors:-1,activeTensors:-1,activeNormals:-1,activeTCoords:-1,activeGlobalIds:-1,activePedigreeIds:-1};function P7(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,zJ,n),FJ.extend(t,e,n),J.setGet(t,e,["activeScalars","activeNormals","activeTCoords","activeVectors","activeTensors","activeGlobalIds","activePedigreeIds"]),e.arrays||(e.arrays={}),$J(t,e)}const qJ=J.newInstance(P7,"vtkDataSetAttributes");var N8={newInstance:qJ,extend:P7,...w7};const jJ={UNIFORM:0,DATA_OBJECT_FIELD:0,COORDINATE:1,POINT_DATA:1,POINT:2,POINT_FIELD_DATA:2,CELL:3,CELL_FIELD_DATA:3,VERTEX:4,VERTEX_FIELD_DATA:4,EDGE:5,EDGE_FIELD_DATA:5,ROW:6,ROW_DATA:6},QJ={FIELD_ASSOCIATION_POINTS:0,FIELD_ASSOCIATION_CELLS:1,FIELD_ASSOCIATION_NONE:2,FIELD_ASSOCIATION_POINTS_THEN_CELLS:3,FIELD_ASSOCIATION_VERTICES:4,FIELD_ASSOCIATION_EDGES:5,FIELD_ASSOCIATION_ROWS:6,NUMBER_OF_ASSOCIATIONS:7};var KJ={FieldDataTypes:jJ,FieldAssociations:QJ};const wT=["pointData","cellData","fieldData"];function XJ(t,e){e.classHierarchy.push("vtkDataSet"),wT.forEach(r=>{e[r]?e[r]=Js(e[r]):e[r]=N8.newInstance()});const n=t.shallowCopy;t.shallowCopy=function(r){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;n(r,a),wT.forEach(i=>{e[i]=N8.newInstance(),e[i].shallowCopy(r.getReferenceByName(i))})}}const YJ={};function A7(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,YJ,n),J.obj(t,e),J.setGet(t,e,wT),XJ(t,e)}const ZJ=J.newInstance(A7,"vtkDataSet");var Nv={newInstance:ZJ,extend:A7,...KJ};const{FieldAssociations:JJ}=Nv;function eee(t,e){e.classHierarchy.push("vtkHardwareSelector"),t.getSourceDataAsync=async(n,r,a,i,o)=>{},t.selectAsync=async(n,r,a,i,o)=>{const s=await t.getSourceDataAsync(n,r,a,i,o);return s?s.generateSelection(r,a,i,o):[]}}const tee={fieldAssociation:JJ.FIELD_ASSOCIATION_CELLS,captureZValues:!1};function x7(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,tee,n),J.obj(t,e),J.setGet(t,e,["fieldAssociation","captureZValues"]),eee(t,e)}const nee=J.newInstance(x7,"vtkHardwareSelector");var ree={newInstance:nee,extend:x7};const aee={GLOBALIDS:0,PEDIGREEIDS:1,VALUES:2,INDICES:3,FRUSTUM:4,LOCATIONS:5,THRESHOLDS:6,BLOCKS:7,QUERY:8},iee={CELL:0,POINT:1,FIELD:2,VERTEX:3,EDGE:4,ROW:5};var oee={SelectionContent:aee,SelectionField:iee};function see(t,e){e.classHierarchy.push("vtkSelectionNode"),t.getBounds=()=>e.points.getBounds()}const cee={contentType:-1,fieldType:-1,properties:null,selectionList:[]};function R7(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,cee,n),J.obj(t,e),e.properties={},J.setGet(t,e,["contentType","fieldType","properties","selectionList"]),see(t,e)}const lee=J.newInstance(R7,"vtkSelectionNode");var b7={newInstance:lee,extend:R7,...oee};const{PassTypes:ja}=_7,{SelectionContent:uee,SelectionField:L8}=b7,{FieldAssociations:vd}=Nv,{vtkErrorMacro:N7}=J,Ol=1;function L7(t){return`${t.propID} ${t.compositeID}`}function U7(t,e,n,r){if(!n)return 0;const a=(e*(r[2]-r[0]+1)+t)*4;return n[a+3]}function Rc(t,e,n,r){if(!n)return 0;const a=(e*(r[2]-r[0]+1)+t)*4,i=n[a],o=n[a+1];return(n[a+2]*256+o)*256+i}function F7(t,e){let n=e;return n<<=24,n|=t,n}function fee(t,e,n,r){{if(r[0]=e[0],r[1]=e[1],e[0]<t.area[0]||e[0]>t.area[2]||e[1]<t.area[1]||e[1]>t.area[3])return null;const a=[e[0]-t.area[0],e[1]-t.area[1]],i=Rc(a[0],a[1],t.pixBuffer[ja.ACTOR_PASS],t.area);if(i<=0||i-Ol>=t.props.length)return null;const o={};o.valid=!0,o.propID=i-Ol,o.prop=t.props[o.propID];let s=Rc(a[0],a[1],t.pixBuffer[ja.COMPOSITE_INDEX_PASS],t.area);if((s<0||s>16777215)&&(s=0),o.compositeID=s-Ol,t.captureZValues){const u=(a[1]*(t.area[2]-t.area[0]+1)+a[0])*4;o.zValue=(256*t.zBuffer[u]+t.zBuffer[u+1])/65535,o.displayPosition=e}if(t.pixBuffer[ja.ID_LOW24]&&U7(a[0],a[1],t.pixBuffer[ja.ID_LOW24],t.area)===0)return o;const c=Rc(a[0],a[1],t.pixBuffer[ja.ID_LOW24],t.area),l=Rc(a[0],a[1],t.pixBuffer[ja.ID_HIGH24],t.area);return o.attributeID=F7(c,l),o}}function V7(t,e,n,r,a){const i=[];let o=0;return e.forEach((s,c)=>{const l=b7.newInstance();switch(l.setContentType(uee.INDICES),t){case vd.FIELD_ASSOCIATION_CELLS:l.setFieldType(L8.CELL);break;case vd.FIELD_ASSOCIATION_POINTS:l.setFieldType(L8.POINT);break;default:N7("Unknown field association")}l.getProperties().propID=s.info.propID,l.getProperties().prop=s.info.prop,l.getProperties().compositeID=s.info.compositeID,l.getProperties().attributeID=s.info.attributeID,l.getProperties().pixelCount=s.pixelCount,n&&(l.getProperties().displayPosition=[s.info.displayPosition[0],s.info.displayPosition[1],s.info.zValue],l.getProperties().worldPosition=a.displayToWorld(s.info.displayPosition[0],s.info.displayPosition[1],s.info.zValue,r)),l.setSelectionList(s.attributeIDs),i[o]=l,o++}),i}function vee(t,e,n,r,a){const i=Math.floor(e),o=Math.floor(n),s=Math.floor(r),c=Math.floor(a),l=new Map,u=[0,0];for(let f=o;f<=c;f++)for(let v=i;v<=s;v++){const d=fee(t,[v,f],0,u);if(d&&d.valid){const m=L7(d);if(!l.has(m))l.set(m,{info:d,pixelCount:1,attributeIDs:[d.attributeID]});else{const h=l.get(m);h.pixelCount++,t.captureZValues&&d.zValue<h.info.zValue&&(h.info=d),h.attributeIDs.indexOf(d.attributeID)===-1&&h.attributeIDs.push(d.attributeID)}}}return V7(t.fieldAssociation,l,t.captureZValues,t.renderer,t.openGLRenderWindow)}function gee(t,e){e.classHierarchy.push("vtkOpenGLHardwareSelector"),t.releasePixBuffers=()=>{e.rawPixBuffer=[],e.pixBuffer=[],e.zBuffer=null},t.beginSelection=()=>{e._openGLRenderer=e._openGLRenderWindow.getViewNodeFor(e._renderer),e.maxAttributeId=0;const r=e._openGLRenderWindow.getSize();if(!e.framebuffer)e.framebuffer=nI.newInstance(),e.framebuffer.setOpenGLRenderWindow(e._openGLRenderWindow),e.framebuffer.saveCurrentBindingsAndBuffers(),e.framebuffer.create(r[0],r[1]),e.framebuffer.populateFramebuffer();else{e.framebuffer.setOpenGLRenderWindow(e._openGLRenderWindow),e.framebuffer.saveCurrentBindingsAndBuffers();const a=e.framebuffer.getSize();!a||a[0]!==r[0]||a[1]!==r[1]?(e.framebuffer.create(r[0],r[1]),e.framebuffer.populateFramebuffer()):e.framebuffer.bind()}if(e._openGLRenderer.clear(),e._openGLRenderer.setSelector(t),e.hitProps={},e.propPixels={},e.props=[],t.releasePixBuffers(),e.fieldAssociation===vd.FIELD_ASSOCIATION_POINTS){const a=e._openGLRenderWindow.getContext(),i=a.isEnabled(a.BLEND);a.disable(a.BLEND),e._openGLRenderWindow.traverseAllPasses(),i&&a.enable(a.BLEND)}},t.endSelection=()=>{e.hitProps={},e._openGLRenderer.setSelector(null),e.framebuffer.restorePreviousBindingsAndBuffers()},t.preCapturePass=()=>{const r=e._openGLRenderWindow.getContext();e.originalBlending=r.isEnabled(r.BLEND),r.disable(r.BLEND)},t.postCapturePass=()=>{const r=e._openGLRenderWindow.getContext();e.originalBlending&&r.enable(r.BLEND)},t.select=()=>{let r=null;return t.captureBuffers()&&(r=t.generateSelection(e.area[0],e.area[1],e.area[2],e.area[3]),t.releasePixBuffers()),r},t.getSourceDataAsync=async(r,a,i,o,s)=>{if(e._renderer=r,a===void 0){const l=e._openGLRenderWindow.getSize();t.setArea(0,0,l[0]-1,l[1]-1)}else t.setArea(a,i,o,s);if(!t.captureBuffers())return!1;const c={area:[...e.area],pixBuffer:[...e.pixBuffer],captureZValues:e.captureZValues,zBuffer:e.zBuffer,props:[...e.props],fieldAssociation:e.fieldAssociation,renderer:r,openGLRenderWindow:e._openGLRenderWindow};return c.generateSelection=function(){for(var l=arguments.length,u=new Array(l),f=0;f<l;f++)u[f]=arguments[f];return vee(c,...u)},c},t.captureBuffers=()=>{if(!e._renderer||!e._openGLRenderWindow)return N7("Renderer and view must be set before calling Select."),!1;e._openGLRenderer=e._openGLRenderWindow.getViewNodeFor(e._renderer),e._openGLRenderWindow.getRenderable().preRender(),t.invokeEvent({type:"StartEvent"}),e.originalBackground=e._renderer.getBackgroundByReference(),e._renderer.setBackground(0,0,0,0);const r=e._openGLRenderWindow.getRenderPasses();t.beginSelection();const a=[];for(e.currentPass=ja.MIN_KNOWN_PASS;e.currentPass<=ja.MAX_KNOWN_PASS;e.currentPass++)t.passRequired(e.currentPass)&&(t.preCapturePass(e.currentPass),e.captureZValues&&e.currentPass===ja.ACTOR_PASS&&typeof r[0].requestDepth=="function"&&typeof r[0].getFramebuffer=="function"&&r[0].requestDepth(),e._openGLRenderWindow.traverseAllPasses(),t.postCapturePass(e.currentPass),t.savePixelBuffer(e.currentPass),a.push(e.currentPass));return a.forEach(i=>{e.currentPass=i,t.processPixelBuffers()}),e.currentPass=ja.MAX_KNOWN_PASS,t.endSelection(),e._renderer.setBackground(e.originalBackground),t.invokeEvent({type:"EndEvent"}),!0},t.processPixelBuffers=()=>{e.props.forEach((r,a)=>{t.isPropHit(a)&&r.processSelectorPixelBuffers(t,e.propPixels[a])})},t.passRequired=r=>{if(r===ja.ID_HIGH24){if(e.fieldAssociation===vd.FIELD_ASSOCIATION_POINTS)return e.maximumPointId>16777215;if(e.fieldAssociation===vd.FIELD_ASSOCIATION_CELLS)return e.maximumCellId>16777215}return!0},t.savePixelBuffer=r=>{if(e.pixBuffer[r]=e._openGLRenderWindow.getPixelData(e.area[0],e.area[1],e.area[2],e.area[3]),!e.rawPixBuffer[r]){const a=(e.area[2]-e.area[0]+1)*(e.area[3]-e.area[1]+1)*4;e.rawPixBuffer[r]=new Uint8Array(a),e.rawPixBuffer[r].set(e.pixBuffer[r])}if(r===ja.ACTOR_PASS){if(e.captureZValues){const a=e._openGLRenderWindow.getRenderPasses();if(typeof a[0].requestDepth=="function"&&typeof a[0].getFramebuffer=="function"){const i=a[0].getFramebuffer();i.saveCurrentBindingsAndBuffers(),i.bind(),e.zBuffer=e._openGLRenderWindow.getPixelData(e.area[0],e.area[1],e.area[2],e.area[3]),i.restorePreviousBindingsAndBuffers()}}t.buildPropHitList(e.rawPixBuffer[r])}},t.buildPropHitList=r=>{let a=0;for(let i=0;i<=e.area[3]-e.area[1];i++)for(let o=0;o<=e.area[2]-e.area[0];o++){let s=Rc(o,i,r,e.area);s>0&&(s--,s in e.hitProps||(e.hitProps[s]=!0,e.propPixels[s]=[]),e.propPixels[s].push(a*4)),++a}},t.renderProp=r=>{e.currentPass===ja.ACTOR_PASS&&(t.setPropColorValueFromInt(e.props.length+Ol),e.props.push(r))},t.renderCompositeIndex=r=>{e.currentPass===ja.COMPOSITE_INDEX_PASS&&t.setPropColorValueFromInt(r+Ol)},t.renderAttributeId=r=>{r<0||(e.maxAttributeId=r>e.maxAttributeId?r:e.maxAttributeId)},t.passTypeToString=r=>J.enumToString(ja,r),t.isPropHit=r=>!!e.hitProps[r],t.setPropColorValueFromInt=r=>{e.propColorValue[0]=r%256/255,e.propColorValue[1]=Math.floor(r/256)%256/255,e.propColorValue[2]=Math.floor(r/65536)%256/255},t.getPixelInformation=(r,a,i)=>{const o=a<0?0:a;if(o===0){if(i[0]=r[0],i[1]=r[1],r[0]<e.area[0]||r[0]>e.area[2]||r[1]<e.area[1]||r[1]>e.area[3])return null;const u=[r[0]-e.area[0],r[1]-e.area[1]],f=Rc(u[0],u[1],e.pixBuffer[ja.ACTOR_PASS],e.area);if(f<=0||f-Ol>=e.props.length)return null;const v={};v.valid=!0,v.propID=f-Ol,v.prop=e.props[v.propID];let g=Rc(u[0],u[1],e.pixBuffer[ja.COMPOSITE_INDEX_PASS],e.area);if((g<0||g>16777215)&&(g=0),v.compositeID=g-Ol,e.captureZValues){const h=(u[1]*(e.area[2]-e.area[0]+1)+u[0])*4;v.zValue=(256*e.zBuffer[h]+e.zBuffer[h+1])/65535,v.displayPosition=r}if(e.pixBuffer[ja.ID_LOW24]&&U7(u[0],u[1],e.pixBuffer[ja.ID_LOW24],e.area)===0)return v;const d=Rc(u[0],u[1],e.pixBuffer[ja.ID_LOW24],e.area),m=Rc(u[0],u[1],e.pixBuffer[ja.ID_HIGH24],e.area);return v.attributeID=F7(d,m),v}const s=[r[0],r[1]],c=[0,0];let l=t.getPixelInformation(r,0,i);if(l&&l.valid)return l;for(let u=1;u<o;++u){for(let f=s[1]>u?s[1]-u:0;f<=s[1]+u;++f)if(c[1]=f,s[0]>=u&&(c[0]=s[0]-u,l=t.getPixelInformation(c,0,i),l&&l.valid)||(c[0]=s[0]+u,l=t.getPixelInformation(c,0,i),l&&l.valid))return l;for(let f=s[0]>=u?s[0]-(u-1):0;f<=s[0]+(u-1);++f)if(c[0]=f,s[1]>=u&&(c[1]=s[1]-u,l=t.getPixelInformation(c,0,i),l&&l.valid)||(c[1]=s[1]+u,l=t.getPixelInformation(c,0,i),l&&l.valid))return l}return i[0]=r[0],i[1]=r[1],null},t.generateSelection=(r,a,i,o)=>{const s=Math.floor(r),c=Math.floor(a),l=Math.floor(i),u=Math.floor(o),f=new Map,v=[0,0];for(let g=c;g<=u;g++)for(let d=s;d<=l;d++){const m=[d,g],h=t.getPixelInformation(m,0,v);if(h&&h.valid){const C=L7(h);if(!f.has(C))f.set(C,{info:h,pixelCount:1,attributeIDs:[h.attributeID]});else{const p=f.get(C);p.pixelCount++,e.captureZValues&&h.zValue<p.info.zValue&&(p.info=h),p.attributeIDs.indexOf(h.attributeID)===-1&&p.attributeIDs.push(h.attributeID)}}}return V7(e.fieldAssociation,f,e.captureZValues,e._renderer,e._openGLRenderWindow)},t.getRawPixelBuffer=r=>e.rawPixBuffer[r],t.getPixelBuffer=r=>e.pixBuffer[r],t.attach=(r,a)=>{e._openGLRenderWindow=r,e._renderer=a};const n=t.setArea;t.setArea=function(){return n(...arguments)?(e.area[0]=Math.floor(e.area[0]),e.area[1]=Math.floor(e.area[1]),e.area[2]=Math.floor(e.area[2]),e.area[3]=Math.floor(e.area[3]),!0):!1}}const dee={area:void 0,currentPass:-1,propColorValue:null,props:null,maximumPointId:0,maximumCellId:0,idOffset:1};function k7(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,dee,n),ree.extend(t,e,n),e.propColorValue=[0,0,0],e.props=[],e.area||(e.area=[0,0,0,0]),J.setGetArray(t,e,["area"],4),J.setGet(t,e,["_renderer","currentPass","_openGLRenderWindow","maximumPointId","maximumCellId"]),J.setGetArray(t,e,["propColorValue"],3),J.moveToProtected(t,e,["renderer","openGLRenderWindow"]),J.event(t,e,"event"),gee(t,e)}const mee=J.newInstance(k7,"vtkOpenGLHardwareSelector");var i5={newInstance:mee,extend:k7,..._7},ZD={exports:{}},U8;function hee(){return U8||(U8=1,function(t,e){(function(n){t.exports=n()})(function(n){var r=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function a(C,p){var S=C[0],I=C[1],D=C[2],E=C[3];S+=(I&D|~I&E)+p[0]-680876936|0,S=(S<<7|S>>>25)+I|0,E+=(S&I|~S&D)+p[1]-389564586|0,E=(E<<12|E>>>20)+S|0,D+=(E&S|~E&I)+p[2]+606105819|0,D=(D<<17|D>>>15)+E|0,I+=(D&E|~D&S)+p[3]-1044525330|0,I=(I<<22|I>>>10)+D|0,S+=(I&D|~I&E)+p[4]-176418897|0,S=(S<<7|S>>>25)+I|0,E+=(S&I|~S&D)+p[5]+1200080426|0,E=(E<<12|E>>>20)+S|0,D+=(E&S|~E&I)+p[6]-1473231341|0,D=(D<<17|D>>>15)+E|0,I+=(D&E|~D&S)+p[7]-45705983|0,I=(I<<22|I>>>10)+D|0,S+=(I&D|~I&E)+p[8]+1770035416|0,S=(S<<7|S>>>25)+I|0,E+=(S&I|~S&D)+p[9]-1958414417|0,E=(E<<12|E>>>20)+S|0,D+=(E&S|~E&I)+p[10]-42063|0,D=(D<<17|D>>>15)+E|0,I+=(D&E|~D&S)+p[11]-1990404162|0,I=(I<<22|I>>>10)+D|0,S+=(I&D|~I&E)+p[12]+1804603682|0,S=(S<<7|S>>>25)+I|0,E+=(S&I|~S&D)+p[13]-40341101|0,E=(E<<12|E>>>20)+S|0,D+=(E&S|~E&I)+p[14]-1502002290|0,D=(D<<17|D>>>15)+E|0,I+=(D&E|~D&S)+p[15]+1236535329|0,I=(I<<22|I>>>10)+D|0,S+=(I&E|D&~E)+p[1]-165796510|0,S=(S<<5|S>>>27)+I|0,E+=(S&D|I&~D)+p[6]-1069501632|0,E=(E<<9|E>>>23)+S|0,D+=(E&I|S&~I)+p[11]+643717713|0,D=(D<<14|D>>>18)+E|0,I+=(D&S|E&~S)+p[0]-373897302|0,I=(I<<20|I>>>12)+D|0,S+=(I&E|D&~E)+p[5]-701558691|0,S=(S<<5|S>>>27)+I|0,E+=(S&D|I&~D)+p[10]+38016083|0,E=(E<<9|E>>>23)+S|0,D+=(E&I|S&~I)+p[15]-660478335|0,D=(D<<14|D>>>18)+E|0,I+=(D&S|E&~S)+p[4]-405537848|0,I=(I<<20|I>>>12)+D|0,S+=(I&E|D&~E)+p[9]+568446438|0,S=(S<<5|S>>>27)+I|0,E+=(S&D|I&~D)+p[14]-1019803690|0,E=(E<<9|E>>>23)+S|0,D+=(E&I|S&~I)+p[3]-187363961|0,D=(D<<14|D>>>18)+E|0,I+=(D&S|E&~S)+p[8]+1163531501|0,I=(I<<20|I>>>12)+D|0,S+=(I&E|D&~E)+p[13]-1444681467|0,S=(S<<5|S>>>27)+I|0,E+=(S&D|I&~D)+p[2]-51403784|0,E=(E<<9|E>>>23)+S|0,D+=(E&I|S&~I)+p[7]+1735328473|0,D=(D<<14|D>>>18)+E|0,I+=(D&S|E&~S)+p[12]-1926607734|0,I=(I<<20|I>>>12)+D|0,S+=(I^D^E)+p[5]-378558|0,S=(S<<4|S>>>28)+I|0,E+=(S^I^D)+p[8]-2022574463|0,E=(E<<11|E>>>21)+S|0,D+=(E^S^I)+p[11]+1839030562|0,D=(D<<16|D>>>16)+E|0,I+=(D^E^S)+p[14]-35309556|0,I=(I<<23|I>>>9)+D|0,S+=(I^D^E)+p[1]-1530992060|0,S=(S<<4|S>>>28)+I|0,E+=(S^I^D)+p[4]+1272893353|0,E=(E<<11|E>>>21)+S|0,D+=(E^S^I)+p[7]-155497632|0,D=(D<<16|D>>>16)+E|0,I+=(D^E^S)+p[10]-1094730640|0,I=(I<<23|I>>>9)+D|0,S+=(I^D^E)+p[13]+681279174|0,S=(S<<4|S>>>28)+I|0,E+=(S^I^D)+p[0]-358537222|0,E=(E<<11|E>>>21)+S|0,D+=(E^S^I)+p[3]-722521979|0,D=(D<<16|D>>>16)+E|0,I+=(D^E^S)+p[6]+76029189|0,I=(I<<23|I>>>9)+D|0,S+=(I^D^E)+p[9]-640364487|0,S=(S<<4|S>>>28)+I|0,E+=(S^I^D)+p[12]-421815835|0,E=(E<<11|E>>>21)+S|0,D+=(E^S^I)+p[15]+530742520|0,D=(D<<16|D>>>16)+E|0,I+=(D^E^S)+p[2]-995338651|0,I=(I<<23|I>>>9)+D|0,S+=(D^(I|~E))+p[0]-198630844|0,S=(S<<6|S>>>26)+I|0,E+=(I^(S|~D))+p[7]+1126891415|0,E=(E<<10|E>>>22)+S|0,D+=(S^(E|~I))+p[14]-1416354905|0,D=(D<<15|D>>>17)+E|0,I+=(E^(D|~S))+p[5]-57434055|0,I=(I<<21|I>>>11)+D|0,S+=(D^(I|~E))+p[12]+1700485571|0,S=(S<<6|S>>>26)+I|0,E+=(I^(S|~D))+p[3]-1894986606|0,E=(E<<10|E>>>22)+S|0,D+=(S^(E|~I))+p[10]-1051523|0,D=(D<<15|D>>>17)+E|0,I+=(E^(D|~S))+p[1]-2054922799|0,I=(I<<21|I>>>11)+D|0,S+=(D^(I|~E))+p[8]+1873313359|0,S=(S<<6|S>>>26)+I|0,E+=(I^(S|~D))+p[15]-30611744|0,E=(E<<10|E>>>22)+S|0,D+=(S^(E|~I))+p[6]-1560198380|0,D=(D<<15|D>>>17)+E|0,I+=(E^(D|~S))+p[13]+1309151649|0,I=(I<<21|I>>>11)+D|0,S+=(D^(I|~E))+p[4]-145523070|0,S=(S<<6|S>>>26)+I|0,E+=(I^(S|~D))+p[11]-1120210379|0,E=(E<<10|E>>>22)+S|0,D+=(S^(E|~I))+p[2]+718787259|0,D=(D<<15|D>>>17)+E|0,I+=(E^(D|~S))+p[9]-343485551|0,I=(I<<21|I>>>11)+D|0,C[0]=S+C[0]|0,C[1]=I+C[1]|0,C[2]=D+C[2]|0,C[3]=E+C[3]|0}function i(C){var p=[],S;for(S=0;S<64;S+=4)p[S>>2]=C.charCodeAt(S)+(C.charCodeAt(S+1)<<8)+(C.charCodeAt(S+2)<<16)+(C.charCodeAt(S+3)<<24);return p}function o(C){var p=[],S;for(S=0;S<64;S+=4)p[S>>2]=C[S]+(C[S+1]<<8)+(C[S+2]<<16)+(C[S+3]<<24);return p}function s(C){var p=C.length,S=[1732584193,-271733879,-1732584194,271733878],I,D,E,T,y,M;for(I=64;I<=p;I+=64)a(S,i(C.substring(I-64,I)));for(C=C.substring(I-64),D=C.length,E=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],I=0;I<D;I+=1)E[I>>2]|=C.charCodeAt(I)<<(I%4<<3);if(E[I>>2]|=128<<(I%4<<3),I>55)for(a(S,E),I=0;I<16;I+=1)E[I]=0;return T=p*8,T=T.toString(16).match(/(.*?)(.{0,8})$/),y=parseInt(T[2],16),M=parseInt(T[1],16)||0,E[14]=y,E[15]=M,a(S,E),S}function c(C){var p=C.length,S=[1732584193,-271733879,-1732584194,271733878],I,D,E,T,y,M;for(I=64;I<=p;I+=64)a(S,o(C.subarray(I-64,I)));for(C=I-64<p?C.subarray(I-64):new Uint8Array(0),D=C.length,E=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],I=0;I<D;I+=1)E[I>>2]|=C[I]<<(I%4<<3);if(E[I>>2]|=128<<(I%4<<3),I>55)for(a(S,E),I=0;I<16;I+=1)E[I]=0;return T=p*8,T=T.toString(16).match(/(.*?)(.{0,8})$/),y=parseInt(T[2],16),M=parseInt(T[1],16)||0,E[14]=y,E[15]=M,a(S,E),S}function l(C){var p="",S;for(S=0;S<4;S+=1)p+=r[C>>S*8+4&15]+r[C>>S*8&15];return p}function u(C){var p;for(p=0;p<C.length;p+=1)C[p]=l(C[p]);return C.join("")}u(s("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function C(p,S){return p=p|0||0,p<0?Math.max(p+S,0):Math.min(p,S)}ArrayBuffer.prototype.slice=function(p,S){var I=this.byteLength,D=C(p,I),E=I,T,y,M,_;return S!==n&&(E=C(S,I)),D>E?new ArrayBuffer(0):(T=E-D,y=new ArrayBuffer(T),M=new Uint8Array(y),_=new Uint8Array(this,D,T),M.set(_),y)}}();function f(C){return/[\u0080-\uFFFF]/.test(C)&&(C=unescape(encodeURIComponent(C))),C}function v(C,p){var S=C.length,I=new ArrayBuffer(S),D=new Uint8Array(I),E;for(E=0;E<S;E+=1)D[E]=C.charCodeAt(E);return p?D:I}function g(C){return String.fromCharCode.apply(null,new Uint8Array(C))}function d(C,p,S){var I=new Uint8Array(C.byteLength+p.byteLength);return I.set(new Uint8Array(C)),I.set(new Uint8Array(p),C.byteLength),I}function m(C){var p=[],S=C.length,I;for(I=0;I<S-1;I+=2)p.push(parseInt(C.substr(I,2),16));return String.fromCharCode.apply(String,p)}function h(){this.reset()}return h.prototype.append=function(C){return this.appendBinary(f(C)),this},h.prototype.appendBinary=function(C){this._buff+=C,this._length+=C.length;var p=this._buff.length,S;for(S=64;S<=p;S+=64)a(this._hash,i(this._buff.substring(S-64,S)));return this._buff=this._buff.substring(S-64),this},h.prototype.end=function(C){var p=this._buff,S=p.length,I,D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],E;for(I=0;I<S;I+=1)D[I>>2]|=p.charCodeAt(I)<<(I%4<<3);return this._finish(D,S),E=u(this._hash),C&&(E=m(E)),this.reset(),E},h.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},h.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},h.prototype.setState=function(C){return this._buff=C.buff,this._length=C.length,this._hash=C.hash,this},h.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},h.prototype._finish=function(C,p){var S=p,I,D,E;if(C[S>>2]|=128<<(S%4<<3),S>55)for(a(this._hash,C),S=0;S<16;S+=1)C[S]=0;I=this._length*8,I=I.toString(16).match(/(.*?)(.{0,8})$/),D=parseInt(I[2],16),E=parseInt(I[1],16)||0,C[14]=D,C[15]=E,a(this._hash,C)},h.hash=function(C,p){return h.hashBinary(f(C),p)},h.hashBinary=function(C,p){var S=s(C),I=u(S);return p?m(I):I},h.ArrayBuffer=function(){this.reset()},h.ArrayBuffer.prototype.append=function(C){var p=d(this._buff.buffer,C),S=p.length,I;for(this._length+=C.byteLength,I=64;I<=S;I+=64)a(this._hash,o(p.subarray(I-64,I)));return this._buff=I-64<S?new Uint8Array(p.buffer.slice(I-64)):new Uint8Array(0),this},h.ArrayBuffer.prototype.end=function(C){var p=this._buff,S=p.length,I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],D,E;for(D=0;D<S;D+=1)I[D>>2]|=p[D]<<(D%4<<3);return this._finish(I,S),E=u(this._hash),C&&(E=m(E)),this.reset(),E},h.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},h.ArrayBuffer.prototype.getState=function(){var C=h.prototype.getState.call(this);return C.buff=g(C.buff),C},h.ArrayBuffer.prototype.setState=function(C){return C.buff=v(C.buff,!0),h.prototype.setState.call(this,C)},h.ArrayBuffer.prototype.destroy=h.prototype.destroy,h.ArrayBuffer.prototype._finish=h.prototype._finish,h.ArrayBuffer.hash=function(C,p){var S=c(new Uint8Array(C)),I=u(S);return p?m(I):I},h})}(ZD)),ZD.exports}var pee=hee();const See=Yc(pee),Cee=["lastShaderProgramBound","context","_openGLRenderWindow"];function Iee(t,e){e.classHierarchy.push("vtkShaderCache"),t.replaceShaderValues=(n,r,a)=>{let i=r;a.length>0&&(i=Ve.substitute(i,"VSOut","GSOut").result);const o=e._openGLRenderWindow.getWebgl2();let s=`
`,c=`#version 100
`;o?c=`#version 300 es
#define attribute in
#define textureCube texture
#define texture2D texture
#define textureCubeLod textureLod
#define texture2DLod textureLod
`:(e.context.getExtension("OES_standard_derivatives"),e.context.getExtension("EXT_frag_depth")&&(s=`#extension GL_EXT_frag_depth : enable
`),e.context.getExtension("EXT_shader_texture_lod")&&(s+=`#extension GL_EXT_shader_texture_lod : enable
#define textureCubeLod textureCubeLodEXT
#define texture2DLod texture2DLodEXT`)),i=Ve.substitute(i,"//VTK::System::Dec",[`${c}
`,o?"":`#extension GL_OES_standard_derivatives : enable
`,s,"#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","precision highp int;","#else","precision mediump float;","precision mediump int;","#endif"]).result;let l=Ve.substitute(n,"//VTK::System::Dec",[`${c}
`,"#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","precision highp int;","#else","precision mediump float;","precision mediump int;","#endif"]).result;if(o){l=Ve.substitute(l,"varying","out").result,i=Ve.substitute(i,"varying","in").result;let f="",v=0;for(;i.includes(`gl_FragData[${v}]`);)i=Ve.substitute(i,`gl_FragData\\[${v}\\]`,`fragOutput${v}`).result,f+=`layout(location = ${v}) out vec4 fragOutput${v};
`,v++;i=Ve.substitute(i,"//VTK::Output::Dec",f).result}const u=Ve.substitute(a,"//VTK::System::Dec",c).result;return{VSSource:l,FSSource:i,GSSource:u}},t.readyShaderProgramArray=(n,r,a)=>{const i=t.replaceShaderValues(n,r,a),o=t.getShaderProgram(i.VSSource,i.FSSource,i.GSSource);return t.readyShaderProgram(o)},t.readyShaderProgram=n=>!n||!n.getCompiled()&&!n.compileShader()||!t.bindShaderProgram(n)?null:n,t.getShaderProgram=(n,r,a)=>{const i=`${n}${r}${a}`,o=See.hash(i);if(!(o in e.shaderPrograms)){const s=Ve.newInstance();return s.setContext(e.context),s.getVertexShader().setSource(n),s.getFragmentShader().setSource(r),a&&s.getGeometryShader().setSource(a),s.setMd5Hash(o),e.shaderPrograms[o]=s,s}return e.shaderPrograms[o]},t.releaseGraphicsResources=n=>{t.releaseCurrentShaderProgram(),Object.keys(e.shaderPrograms).map(r=>e.shaderPrograms[r]).forEach(r=>r.cleanup()),e.shaderPrograms={}},t.releaseCurrentShaderProgram=()=>{e.lastShaderProgramBound&&(e.lastShaderProgramBound.cleanup(),e.lastShaderProgramBound=null)},t.bindShaderProgram=n=>(e.lastShaderProgramBound===n||(e.lastShaderProgramBound&&e.lastShaderProgramBound.release(),n.bind(),e.lastShaderProgramBound=n),1)}const Dee={lastShaderProgramBound:null,shaderPrograms:null,context:null};function G7(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Dee,n),e.shaderPrograms={},J.obj(t,e),J.setGet(t,e,Cee),J.moveToProtected(t,e,["openGLRenderWindow"]),Iee(t,e)}const Eee=J.newInstance(G7,"vtkShaderCache");var Tee={newInstance:Eee,extend:G7};const{vtkErrorMacro:yee}=J;function Mee(t,e){e.classHierarchy.push("vtkOpenGLTextureUnitManager"),t.deleteTable=()=>{for(let n=0;n<e.numberOfTextureUnits;++n)e.textureUnits[n]===!0&&yee("some texture units  were not properly released");e.textureUnits=[],e.numberOfTextureUnits=0},t.setContext=n=>{if(e.context!==n){if(e.context!==0&&t.deleteTable(),e.context=n,e.context){e.numberOfTextureUnits=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS);for(let r=0;r<e.numberOfTextureUnits;++r)e.textureUnits[r]=!1}t.modified()}},t.allocate=()=>{for(let n=0;n<e.numberOfTextureUnits;n++)if(!t.isAllocated(n))return e.textureUnits[n]=!0,n;return-1},t.allocateUnit=n=>t.isAllocated(n)?-1:(e.textureUnits[n]=!0,n),t.isAllocated=n=>e.textureUnits[n],t.free=n=>{e.textureUnits[n]=!1},t.freeAll=()=>{for(let n=0;n<e.numberOfTextureUnits;++n)e.textureUnits[n]=!1}}const _ee={context:null,numberOfTextureUnits:0,textureUnits:0};function B7(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,_ee,n),J.obj(t,e),e.textureUnits=[],J.get(t,e,["numberOfTextureUnits"]),J.setGet(t,e,["context"]),Mee(t,e)}const Oee=J.newInstance(B7,"vtkOpenGLTextureUnitManager");var wee={newInstance:Oee,extend:B7};function Pee(t,e){e.classHierarchy.push("vtkRenderWindowViewNode"),t.getViewNodeFactory=()=>null,t.getAspectRatio=()=>e.size[0]/e.size[1],t.getAspectRatioForRenderer=n=>{const r=n.getViewportByReference();return e.size[0]*(r[2]-r[0])/((r[3]-r[1])*e.size[1])},t.isInViewport=(n,r,a)=>{const i=a.getViewportByReference(),o=t.getFramebufferSize();return i[0]*o[0]<=n&&i[2]*o[0]>=n&&i[1]*o[1]<=r&&i[3]*o[1]>=r},t.getViewportSize=n=>{const r=n.getViewportByReference(),a=t.getFramebufferSize();return[(r[2]-r[0])*a[0],(r[3]-r[1])*a[1]]},t.getViewportCenter=n=>{const r=t.getViewportSize(n);return[r[0]*.5,r[1]*.5]},t.displayToNormalizedDisplay=(n,r,a)=>{const i=t.getFramebufferSize();return[n/i[0],r/i[1],a]},t.normalizedDisplayToDisplay=(n,r,a)=>{const i=t.getFramebufferSize();return[n*i[0],r*i[1],a]},t.worldToView=(n,r,a,i)=>i.worldToView(n,r,a),t.viewToWorld=(n,r,a,i)=>i.viewToWorld(n,r,a),t.worldToDisplay=(n,r,a,i)=>{const o=i.worldToView(n,r,a),s=t.getViewportSize(i),c=i.viewToProjection(o[0],o[1],o[2],s[0]/s[1]),l=i.projectionToNormalizedDisplay(c[0],c[1],c[2]);return t.normalizedDisplayToDisplay(l[0],l[1],l[2])},t.displayToWorld=(n,r,a,i)=>{const o=t.displayToNormalizedDisplay(n,r,a),s=i.normalizedDisplayToProjection(o[0],o[1],o[2]),c=t.getViewportSize(i),l=i.projectionToView(s[0],s[1],s[2],c[0]/c[1]);return i.viewToWorld(l[0],l[1],l[2])},t.normalizedDisplayToViewport=(n,r,a,i)=>{let o=i.getViewportByReference();o=t.normalizedDisplayToDisplay(o[0],o[1],0);const s=t.normalizedDisplayToDisplay(n,r,a);return[s[0]-o[0]-.5,s[1]-o[1]-.5,a]},t.viewportToNormalizedViewport=(n,r,a,i)=>{const o=t.getViewportSize(i);return o&&o[0]!==0&&o[1]!==0?[n/(o[0]-1),r/(o[1]-1),a]:[n,r,a]},t.normalizedViewportToViewport=(n,r,a,i)=>{const o=t.getViewportSize(i);return[n*(o[0]-1),r*(o[1]-1),a]},t.displayToLocalDisplay=(n,r,a)=>{const i=t.getFramebufferSize();return[n,i[1]-r-1,a]},t.viewportToNormalizedDisplay=(n,r,a,i)=>{let o=i.getViewportByReference();o=t.normalizedDisplayToDisplay(o[0],o[1],0);const s=n+o[0]+.5,c=r+o[1]+.5;return t.displayToNormalizedDisplay(s,c,a)},t.getComputedDevicePixelRatio=()=>e.size[0]/t.getContainerSize()[0],t.getContainerSize=()=>{J.vtkErrorMacro("not implemented")},t.getPixelData=(n,r,a,i)=>{J.vtkErrorMacro("not implemented")},t.createSelector=()=>{J.vtkErrorMacro("not implemented")}}const Aee={size:void 0,selector:void 0};function W7(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Aee,n),e.size||(e.size=[300,300]),J.getArray(t,e,["size"],2),J.get(t,e,["selector"]),Fr.extend(t,e,n),Pee(t,e)}const xee=J.newInstance(W7,"vtkRenderWindowViewNode");var Ree={newInstance:xee,extend:W7};const bee="__getUnderlyingContext";function Nee(){const t=new Map,e={apply(a,i,o){return t.has(o[0])?t.get(o[0]):a.apply(i,o)}};function n(a){return{apply(i,o,s){return t.set(a,s[0]),i.apply(o,s)}}}const r=Object.create(null);return r.getParameter=(a,i,o,s)=>new Proxy(s.bind(a),e),r.depthMask=(a,i,o,s)=>new Proxy(s.bind(a),n(a.DEPTH_WRITEMASK)),{get(a,i,o){if(i===bee)return()=>a;let s=Reflect.get(a,i,a);s instanceof Function&&(s=s.bind(a));const c=r[i];return c?c(a,i,o,s):s}}}const{vtkDebugMacro:F8,vtkErrorMacro:V8}=J,Lee={position:"absolute",top:0,left:0,width:"100%",height:"100%"},Uee=["activateTexture","deactivateTexture","disableCullFace","enableCullFace","get3DContext","getActiveFramebuffer","getContext","getDefaultTextureByteSize","getDefaultTextureInternalFormat","getDefaultToWebgl2","getGLInformations","getGraphicsMemoryInfo","getGraphicsResourceForObject","getHardwareMaximumLineWidth","getPixelData","getShaderCache","getTextureUnitForTexture","getTextureUnitManager","getWebgl2","makeCurrent","releaseGraphicsResources","registerGraphicsResourceUser","unregisterGraphicsResourceUser","restoreContext","setActiveFramebuffer","setContext","setDefaultToWebgl2","setGraphicsResourceForObject"];function uo(t,e,n){const r=t.createFramebuffer(),a=t.createTexture();t.bindTexture(t.TEXTURE_2D,a),t.texImage2D(t.TEXTURE_2D,0,e,2,2,0,e,n,null),t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,a,0);const i=t.checkFramebufferStatus(t.FRAMEBUFFER);return t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindTexture(t.TEXTURE_2D,null),i===t.FRAMEBUFFER_COMPLETE}let OS=0;const oI=[];function Fee(){OS++,oI.forEach(t=>t(OS))}function Vee(){OS--,oI.forEach(t=>t(OS))}function kee(t){oI.push(t)}function Gee(t){return oI.pop()}function k8(t){t.preventDefault()}function Bee(t,e){e.classHierarchy.push("vtkOpenGLRenderWindow");let n;function r(){return n||(n=Nee()),n}t.getViewNodeFactory=()=>e.myFactory,e.canvas.addEventListener("webglcontextlost",k8,!1),e.canvas.addEventListener("webglcontextrestored",t.restoreContext,!1);const a=[0,0];function i(){e.renderable&&(e.size[0]!==a[0]||e.size[1]!==a[1])&&(a[0]=e.size[0],a[1]=e.size[1],e.canvas.setAttribute("width",e.size[0]),e.canvas.setAttribute("height",e.size[1])),e.viewStream&&e.viewStream.setSize(e.size[0],e.size[1]),e.canvas.style.display=e.useOffScreen?"none":"block",e.el&&(e.el.style.cursor=e.cursorVisibility?e.cursor:"none"),e.containerSize=null}t.onModified(i),t.buildPass=f=>{if(f){if(!e.renderable)return;t.prepareNodes(),t.addMissingNodes(e.renderable.getRenderersByReference()),t.addMissingNodes(e.renderable.getChildRenderWindowsByReference()),t.removeUnusedNodes(),t.initialize(),e.children.forEach(v=>{var g;(g=v.setOpenGLRenderWindow)==null||g.call(v,t)})}},t.initialize=()=>{if(!e.initialized){if(e.rootOpenGLRenderWindow=t.getLastAncestorOfType("vtkOpenGLRenderWindow"),e.rootOpenGLRenderWindow)e.context2D=t.get2DContext();else{e.context=t.get3DContext(),t.resizeFromChildRenderWindows(),e.context&&Fee(),e.textureUnitManager=wee.newInstance(),e.textureUnitManager.setContext(e.context),e.shaderCache.setContext(e.context);const f=e.context;f.blendFuncSeparate(f.SRC_ALPHA,f.ONE_MINUS_SRC_ALPHA,f.ONE,f.ONE_MINUS_SRC_ALPHA),f.depthFunc(f.LEQUAL),f.enable(f.BLEND)}e.initialized=!0}},t.makeCurrent=()=>{e.context.makeCurrent()},t.setContainer=f=>{e.el&&e.el!==f&&(e.canvas.parentNode!==e.el&&V8("Error: canvas parent node does not match container"),e.el.removeChild(e.canvas),e.el.contains(e.bgImage)&&e.el.removeChild(e.bgImage)),e.el!==f&&(e.el=f,e.el&&(e.el.appendChild(e.canvas),e.useBackgroundImage&&e.el.appendChild(e.bgImage)),t.modified())},t.getContainer=()=>e.el,t.getContainerSize=()=>{if(!e.containerSize&&e.el){const{width:f,height:v}=e.el.getBoundingClientRect();e.containerSize=[f,v]}return e.containerSize||e.size},t.getFramebufferSize=()=>{var v;return((v=e.activeFramebuffer)==null?void 0:v.getSize())||e.size},t.getPixelData=(f,v,g,d)=>{const m=new Uint8Array((g-f+1)*(d-v+1)*4);return e.context.readPixels(f,v,g-f+1,d-v+1,e.context.RGBA,e.context.UNSIGNED_BYTE,m),m},t.get3DContext=function(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{preserveDrawingBuffer:!1,depth:!0,alpha:!0,powerPreference:"high-performance"},v=null;const g=typeof WebGL2RenderingContext<"u";return e.webgl2=!1,e.defaultToWebgl2&&g&&(v=e.canvas.getContext("webgl2",f),v&&(e.webgl2=!0,F8("using webgl2"))),v||(F8("using webgl1"),v=e.canvas.getContext("webgl",f)||e.canvas.getContext("experimental-webgl",f)),new Proxy(v,r())},t.get2DContext=function(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e.canvas.getContext("2d",f)},t.restoreContext=()=>{const f=$M.newInstance();f.setCurrentOperation("Release"),f.traverse(t,null)},t.activateTexture=f=>{const v=e._textureResourceIds.get(f);if(v!==void 0){e.context.activeTexture(e.context.TEXTURE0+v);return}const g=t.getTextureUnitManager().allocate();if(g<0){V8("Hardware does not support the number of textures defined.");return}e._textureResourceIds.set(f,g),e.context.activeTexture(e.context.TEXTURE0+g)},t.deactivateTexture=f=>{const v=e._textureResourceIds.get(f);v!==void 0&&(t.getTextureUnitManager().free(v),e._textureResourceIds.delete(f))},t.getTextureUnitForTexture=f=>{const v=e._textureResourceIds.get(f);return v!==void 0?v:-1},t.getDefaultTextureByteSize=function(f){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(e.webgl2)switch(f){case Vn.CHAR:case Vn.SIGNED_CHAR:case Vn.UNSIGNED_CHAR:return 1;case v:case g:case Vn.UNSIGNED_SHORT:case Vn.SHORT:case Vn.VOID:return 2;default:return 4}return 1},t.getDefaultTextureInternalFormat=function(f,v){let g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e.webgl2)switch(f){case Vn.UNSIGNED_CHAR:switch(v){case 1:return e.context.R8;case 2:return e.context.RG8;case 3:return e.context.RGB8;case 4:default:return e.context.RGBA8}case(g&&!d&&Vn.UNSIGNED_SHORT):switch(v){case 1:return g.R16_EXT;case 2:return g.RG16_EXT;case 3:return g.RGB16_EXT;case 4:default:return g.RGBA16_EXT}case(g&&!d&&Vn.SHORT):switch(v){case 1:return g.R16_SNORM_EXT;case 2:return g.RG16_SNORM_EXT;case 3:return g.RGB16_SNORM_EXT;case 4:default:return g.RGBA16_SNORM_EXT}case Vn.UNSIGNED_SHORT:case Vn.SHORT:case Vn.FLOAT:default:switch(v){case 1:return d?e.context.R16F:e.context.R32F;case 2:return d?e.context.RG16F:e.context.RG32F;case 3:return d?e.context.RGB16F:e.context.RGB32F;case 4:default:return d?e.context.RGBA16F:e.context.RGBA32F}}switch(v){case 1:return e.context.LUMINANCE;case 2:return e.context.LUMINANCE_ALPHA;case 3:return e.context.RGB;case 4:default:return e.context.RGBA}},t.setBackgroundImage=f=>{e.bgImage.src=f.src},t.setUseBackgroundImage=f=>{e.useBackgroundImage=f,e.useBackgroundImage&&!e.el.contains(e.bgImage)?e.el.appendChild(e.bgImage):!e.useBackgroundImage&&e.el.contains(e.bgImage)&&e.el.removeChild(e.bgImage)};function o(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.imageFormat;const v=document.createElement("canvas"),g=v.getContext("2d");v.width=e.canvas.width,v.height=e.canvas.height,g.drawImage(e.canvas,0,0);const d=e.canvas.getBoundingClientRect();e.renderable.getRenderers().forEach(p=>{p.getViewProps().forEach(I=>{if(I.getContainer){const E=I.getContainer().getElementsByTagName("canvas");for(let T=0;T<E.length;T++){const y=E[T],M=y.getBoundingClientRect(),_=M.x-d.x,O=M.y-d.y;g.drawImage(y,_,O)}}})});const C=v.toDataURL(f);v.remove(),t.invokeImageReady(C)}t.captureNextImage=function(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"image/png",{resetCamera:v=!1,size:g=null,scale:d=1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e.deleted)return null;e.imageFormat=f;const m=e.notifyStartCaptureImage;return e.notifyStartCaptureImage=!0,e._screenshot={size:g||d!==1?g||e.size.map(h=>h*d):null},new Promise((h,C)=>{const p=t.onImageReady(S=>{if(e._screenshot.size===null)e.notifyStartCaptureImage=m,p.unsubscribe(),e._screenshot.placeHolder&&(e.size=e._screenshot.originalSize,t.modified(),e._screenshot.cameras&&e._screenshot.cameras.forEach(I=>{let{restoreParamsFn:D,arg:E}=I;return D(E)}),t.traverseAllPasses(),e.el.removeChild(e._screenshot.placeHolder),e._screenshot.placeHolder.remove(),e._screenshot=null),h(S);else{const I=document.createElement("img");if(I.style=Lee,I.src=S,e._screenshot.placeHolder=e.el.appendChild(I),e.canvas.style.display="none",e._screenshot.originalSize=e.size,e.size=e._screenshot.size,e._screenshot.size=null,t.modified(),v){const D=v!==!0;e._screenshot.cameras=e.renderable.getRenderers().map(E=>{const T=E.getActiveCamera(),y=T.get("focalPoint","position","parallelScale");return{resetCameraArgs:D?{renderer:E}:void 0,resetCameraFn:D?v:E.resetCamera,restoreParamsFn:T.set,arg:JSON.parse(JSON.stringify(y))}}),e._screenshot.cameras.forEach(E=>{let{resetCameraFn:T,resetCameraArgs:y}=E;return T(y)})}t.traverseAllPasses()}})})};let s;t.getHardwareMaximumLineWidth=()=>{if(s!=null)return s;const f=t.get3DContext(),v=f.getParameter(f.ALIASED_LINE_WIDTH_RANGE);return s=v[1],v[1]},t.getGLInformations=()=>{if(e._glInformation)return e._glInformation;const f=t.get3DContext(),v=f.getExtension("OES_texture_float"),g=f.getExtension("OES_texture_half_float"),d=f.getExtension("WEBGL_debug_renderer_info"),m=f.getExtension("WEBGL_draw_buffers"),h=f.getExtension("EXT_texture_filter_anisotropic")||f.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),C=[["Max Vertex Attributes","MAX_VERTEX_ATTRIBS",f.getParameter(f.MAX_VERTEX_ATTRIBS)],["Max Varying Vectors","MAX_VARYING_VECTORS",f.getParameter(f.MAX_VARYING_VECTORS)],["Max Vertex Uniform Vectors","MAX_VERTEX_UNIFORM_VECTORS",f.getParameter(f.MAX_VERTEX_UNIFORM_VECTORS)],["Max Fragment Uniform Vectors","MAX_FRAGMENT_UNIFORM_VECTORS",f.getParameter(f.MAX_FRAGMENT_UNIFORM_VECTORS)],["Max Fragment Texture Image Units","MAX_TEXTURE_IMAGE_UNITS",f.getParameter(f.MAX_TEXTURE_IMAGE_UNITS)],["Max Vertex Texture Image Units","MAX_VERTEX_TEXTURE_IMAGE_UNITS",f.getParameter(f.MAX_VERTEX_TEXTURE_IMAGE_UNITS)],["Max Combined Texture Image Units","MAX_COMBINED_TEXTURE_IMAGE_UNITS",f.getParameter(f.MAX_COMBINED_TEXTURE_IMAGE_UNITS)],["Max 2D Texture Size","MAX_TEXTURE_SIZE",f.getParameter(f.MAX_TEXTURE_SIZE)],["Max Cube Texture Size","MAX_CUBE_MAP_TEXTURE_SIZE",f.getParameter(f.MAX_CUBE_MAP_TEXTURE_SIZE)],["Max Texture Anisotropy","MAX_TEXTURE_MAX_ANISOTROPY_EXT",h&&f.getParameter(h.MAX_TEXTURE_MAX_ANISOTROPY_EXT)],["Point Size Range","ALIASED_POINT_SIZE_RANGE",f.getParameter(f.ALIASED_POINT_SIZE_RANGE).join(" - ")],["Line Width Range","ALIASED_LINE_WIDTH_RANGE",f.getParameter(f.ALIASED_LINE_WIDTH_RANGE).join(" - ")],["Max Viewport Dimensions","MAX_VIEWPORT_DIMS",f.getParameter(f.MAX_VIEWPORT_DIMS).join(" - ")],["Max Renderbuffer Size","MAX_RENDERBUFFER_SIZE",f.getParameter(f.MAX_RENDERBUFFER_SIZE)],["Framebuffer Red Bits","RED_BITS",f.getParameter(f.RED_BITS)],["Framebuffer Green Bits","GREEN_BITS",f.getParameter(f.GREEN_BITS)],["Framebuffer Blue Bits","BLUE_BITS",f.getParameter(f.BLUE_BITS)],["Framebuffer Alpha Bits","ALPHA_BITS",f.getParameter(f.ALPHA_BITS)],["Framebuffer Depth Bits","DEPTH_BITS",f.getParameter(f.DEPTH_BITS)],["Framebuffer Stencil Bits","STENCIL_BITS",f.getParameter(f.STENCIL_BITS)],["Framebuffer Subpixel Bits","SUBPIXEL_BITS",f.getParameter(f.SUBPIXEL_BITS)],["MSAA Samples","SAMPLES",f.getParameter(f.SAMPLES)],["MSAA Sample Buffers","SAMPLE_BUFFERS",f.getParameter(f.SAMPLE_BUFFERS)],["Supported Formats for UByte Render Targets     ","UNSIGNED_BYTE RENDER TARGET FORMATS",[v&&uo(f,f.RGBA,f.UNSIGNED_BYTE)?"RGBA":"",v&&uo(f,f.RGB,f.UNSIGNED_BYTE)?"RGB":"",v&&uo(f,f.LUMINANCE,f.UNSIGNED_BYTE)?"LUMINANCE":"",v&&uo(f,f.ALPHA,f.UNSIGNED_BYTE)?"ALPHA":"",v&&uo(f,f.LUMINANCE_ALPHA,f.UNSIGNED_BYTE)?"LUMINANCE_ALPHA":""].join(" ")],["Supported Formats for Half Float Render Targets","HALF FLOAT RENDER TARGET FORMATS",[g&&uo(f,f.RGBA,g.HALF_FLOAT_OES)?"RGBA":"",g&&uo(f,f.RGB,g.HALF_FLOAT_OES)?"RGB":"",g&&uo(f,f.LUMINANCE,g.HALF_FLOAT_OES)?"LUMINANCE":"",g&&uo(f,f.ALPHA,g.HALF_FLOAT_OES)?"ALPHA":"",g&&uo(f,f.LUMINANCE_ALPHA,g.HALF_FLOAT_OES)?"LUMINANCE_ALPHA":""].join(" ")],["Supported Formats for Full Float Render Targets","FLOAT RENDER TARGET FORMATS",[v&&uo(f,f.RGBA,f.FLOAT)?"RGBA":"",v&&uo(f,f.RGB,f.FLOAT)?"RGB":"",v&&uo(f,f.LUMINANCE,f.FLOAT)?"LUMINANCE":"",v&&uo(f,f.ALPHA,f.FLOAT)?"ALPHA":"",v&&uo(f,f.LUMINANCE_ALPHA,f.FLOAT)?"LUMINANCE_ALPHA":""].join(" ")],["Max Multiple Render Targets Buffers","MAX_DRAW_BUFFERS_WEBGL",m?f.getParameter(m.MAX_DRAW_BUFFERS_WEBGL):0],["High Float Precision in Vertex Shader","HIGH_FLOAT VERTEX_SHADER",[f.getShaderPrecisionFormat(f.VERTEX_SHADER,f.HIGH_FLOAT).precision," (-2<sup>",f.getShaderPrecisionFormat(f.VERTEX_SHADER,f.HIGH_FLOAT).rangeMin,"</sup> - 2<sup>",f.getShaderPrecisionFormat(f.VERTEX_SHADER,f.HIGH_FLOAT).rangeMax,"</sup>)"].join("")],["Medium Float Precision in Vertex Shader","MEDIUM_FLOAT VERTEX_SHADER",[f.getShaderPrecisionFormat(f.VERTEX_SHADER,f.MEDIUM_FLOAT).precision," (-2<sup>",f.getShaderPrecisionFormat(f.VERTEX_SHADER,f.MEDIUM_FLOAT).rangeMin,"</sup> - 2<sup>",f.getShaderPrecisionFormat(f.VERTEX_SHADER,f.MEDIUM_FLOAT).rangeMax,"</sup>)"].join("")],["Low Float Precision in Vertex Shader","LOW_FLOAT VERTEX_SHADER",[f.getShaderPrecisionFormat(f.VERTEX_SHADER,f.LOW_FLOAT).precision," (-2<sup>",f.getShaderPrecisionFormat(f.VERTEX_SHADER,f.LOW_FLOAT).rangeMin,"</sup> - 2<sup>",f.getShaderPrecisionFormat(f.VERTEX_SHADER,f.LOW_FLOAT).rangeMax,"</sup>)"].join("")],["High Float Precision in Fragment Shader","HIGH_FLOAT FRAGMENT_SHADER",[f.getShaderPrecisionFormat(f.FRAGMENT_SHADER,f.HIGH_FLOAT).precision," (-2<sup>",f.getShaderPrecisionFormat(f.FRAGMENT_SHADER,f.HIGH_FLOAT).rangeMin,"</sup> - 2<sup>",f.getShaderPrecisionFormat(f.FRAGMENT_SHADER,f.HIGH_FLOAT).rangeMax,"</sup>)"].join("")],["Medium Float Precision in Fragment Shader","MEDIUM_FLOAT FRAGMENT_SHADER",[f.getShaderPrecisionFormat(f.FRAGMENT_SHADER,f.MEDIUM_FLOAT).precision," (-2<sup>",f.getShaderPrecisionFormat(f.FRAGMENT_SHADER,f.MEDIUM_FLOAT).rangeMin,"</sup> - 2<sup>",f.getShaderPrecisionFormat(f.FRAGMENT_SHADER,f.MEDIUM_FLOAT).rangeMax,"</sup>)"].join("")],["Low Float Precision in Fragment Shader","LOW_FLOAT FRAGMENT_SHADER",[f.getShaderPrecisionFormat(f.FRAGMENT_SHADER,f.LOW_FLOAT).precision," (-2<sup>",f.getShaderPrecisionFormat(f.FRAGMENT_SHADER,f.LOW_FLOAT).rangeMin,"</sup> - 2<sup>",f.getShaderPrecisionFormat(f.FRAGMENT_SHADER,f.LOW_FLOAT).rangeMax,"</sup>)"].join("")],["High Int Precision in Vertex Shader","HIGH_INT VERTEX_SHADER",[f.getShaderPrecisionFormat(f.VERTEX_SHADER,f.HIGH_INT).precision," (-2<sup>",f.getShaderPrecisionFormat(f.VERTEX_SHADER,f.HIGH_INT).rangeMin,"</sup> - 2<sup>",f.getShaderPrecisionFormat(f.VERTEX_SHADER,f.HIGH_INT).rangeMax,"</sup>)"].join("")],["Medium Int Precision in Vertex Shader","MEDIUM_INT VERTEX_SHADER",[f.getShaderPrecisionFormat(f.VERTEX_SHADER,f.MEDIUM_INT).precision," (-2<sup>",f.getShaderPrecisionFormat(f.VERTEX_SHADER,f.MEDIUM_INT).rangeMin,"</sup> - 2<sup>",f.getShaderPrecisionFormat(f.VERTEX_SHADER,f.MEDIUM_INT).rangeMax,"</sup>)"].join("")],["Low Int Precision in Vertex Shader","LOW_INT VERTEX_SHADER",[f.getShaderPrecisionFormat(f.VERTEX_SHADER,f.LOW_INT).precision," (-2<sup>",f.getShaderPrecisionFormat(f.VERTEX_SHADER,f.LOW_INT).rangeMin,"</sup> - 2<sup>",f.getShaderPrecisionFormat(f.VERTEX_SHADER,f.LOW_INT).rangeMax,"</sup>)"].join("")],["High Int Precision in Fragment Shader","HIGH_INT FRAGMENT_SHADER",[f.getShaderPrecisionFormat(f.FRAGMENT_SHADER,f.HIGH_INT).precision," (-2<sup>",f.getShaderPrecisionFormat(f.FRAGMENT_SHADER,f.HIGH_INT).rangeMin,"</sup> - 2<sup>",f.getShaderPrecisionFormat(f.FRAGMENT_SHADER,f.HIGH_INT).rangeMax,"</sup>)"].join("")],["Medium Int Precision in Fragment Shader","MEDIUM_INT FRAGMENT_SHADER",[f.getShaderPrecisionFormat(f.FRAGMENT_SHADER,f.MEDIUM_INT).precision," (-2<sup>",f.getShaderPrecisionFormat(f.FRAGMENT_SHADER,f.MEDIUM_INT).rangeMin,"</sup> - 2<sup>",f.getShaderPrecisionFormat(f.FRAGMENT_SHADER,f.MEDIUM_INT).rangeMax,"</sup>)"].join("")],["Low Int Precision in Fragment Shader","LOW_INT FRAGMENT_SHADER",[f.getShaderPrecisionFormat(f.FRAGMENT_SHADER,f.LOW_INT).precision," (-2<sup>",f.getShaderPrecisionFormat(f.FRAGMENT_SHADER,f.LOW_INT).rangeMin,"</sup> - 2<sup>",f.getShaderPrecisionFormat(f.FRAGMENT_SHADER,f.LOW_INT).rangeMax,"</sup>)"].join("")],["Supported Extensions","EXTENSIONS",f.getSupportedExtensions().join("<br/>					    ")],["WebGL Renderer","RENDERER",f.getParameter(f.RENDERER)],["WebGL Vendor","VENDOR",f.getParameter(f.VENDOR)],["WebGL Version","VERSION",f.getParameter(f.VERSION)],["Shading Language Version","SHADING_LANGUAGE_VERSION",f.getParameter(f.SHADING_LANGUAGE_VERSION)],["Unmasked Renderer","UNMASKED_RENDERER",d&&f.getParameter(d.UNMASKED_RENDERER_WEBGL)],["Unmasked Vendor","UNMASKED_VENDOR",d&&f.getParameter(d.UNMASKED_VENDOR_WEBGL)],["WebGL Version","WEBGL_VERSION",e.webgl2?2:1]],p={};for(;C.length;){const[S,I,D]=C.pop();I&&(p[I]={label:S,value:D})}return e._glInformation=p,p},t.traverseAllPasses=()=>{var v;if(e.renderPasses)for(let g=0;g<e.renderPasses.length;++g)e.renderPasses[g].traverse(t,null);e.notifyStartCaptureImage&&o(),t.copyParentContent();const f=e.renderable.getChildRenderWindowsByReference();for(let g=0;g<f.length;++g)(v=t.getViewNodeFor(f[g]))==null||v.traverseAllPasses()},t.copyParentContent=()=>{const f=e.rootOpenGLRenderWindow;if(!f||!e.context2D||e.children.some(d=>{var m;return!!((m=d.getSelector)!=null&&m.call(d))}))return;const v=f.getCanvas(),g=e.canvas;e.context2D.drawImage(v,0,v.height-g.height,g.width,g.height,0,0,g.width,g.height)},t.resizeFromChildRenderWindows=()=>{var v;const f=e.renderable.getChildRenderWindowsByReference();if(f.length>0){const g=[0,0];for(let d=0;d<f.length;++d){const m=(v=t.getViewNodeFor(f[d]))==null?void 0:v.getSize();m&&(g[0]=m[0]>g[0]?m[0]:g[0],g[1]=m[1]>g[1]?m[1]:g[1])}t.setSize(...g)}},t.disableCullFace=()=>{e.cullFaceEnabled&&(e.context.disable(e.context.CULL_FACE),e.cullFaceEnabled=!1)},t.enableCullFace=()=>{e.cullFaceEnabled||(e.context.enable(e.context.CULL_FACE),e.cullFaceEnabled=!0)},t.setViewStream=f=>{if(e.viewStream===f)return!1;if(e.subscription&&(e.subscription.unsubscribe(),e.subscription=null),e.viewStream=f,e.viewStream){const v=e.renderable.getRenderers()[0];v.getBackgroundByReference()[3]=0,t.setUseBackgroundImage(!0),e.subscription=e.viewStream.onImageReady(g=>t.setBackgroundImage(g.image)),e.viewStream.setSize(e.size[0],e.size[1]),e.viewStream.invalidateCache(),e.viewStream.render(),t.modified()}return!0},t.createSelector=()=>{const f=i5.newInstance();return f.setOpenGLRenderWindow(t),f};function c(){e.canvas.removeEventListener("webglcontextlost",k8),e.canvas.removeEventListener("webglcontextrestored",t.restoreContext)}t.delete=J.chain(()=>{e.context&&Vee(),t.setContainer(),t.setViewStream()},c,t.delete),t.setActiveFramebuffer=f=>{e.activeFramebuffer=f};const l=t.setSize;t.setSize=(f,v)=>{const g=l(f,v);return g&&t.invokeWindowResizeEvent({width:f,height:v}),g},t.registerGraphicsResourceUser=(f,v)=>{e._graphicsResources.has(f)||t.setGraphicsResourceForObject(f,null,null);const g=e._graphicsResources.get(f);g==null||g.users.add(v)},t.unregisterGraphicsResourceUser=(f,v)=>{var d;const g=e._graphicsResources.get(f);g&&(g.users.delete(v),g.users.size||((d=g.oglObject)==null||d.releaseGraphicsResources(t),e._graphicsResources.delete(f)))},t.getGraphicsResourceForObject=f=>e._graphicsResources.get(f),t.setGraphicsResourceForObject=(f,v,g)=>{var m;if(!f)return;const d=e._graphicsResources.get(f);(m=d==null?void 0:d.oglObject)==null||m.releaseGraphicsResources(t),e._graphicsResources.set(f,{coreObject:f,oglObject:v,hash:g,users:(d==null?void 0:d.users)??new Set})},t.getGraphicsMemoryInfo=()=>{let f=0;return e._graphicsResources.forEach(v=>{let{oglObject:g}=v;f+=g.getAllocatedGPUMemoryInBytes()}),f},t.releaseGraphicsResources=()=>{e.shaderCache!==null&&e.shaderCache.releaseGraphicsResources(t),e._graphicsResources.forEach(f=>{let{oglObject:v}=f;v.releaseGraphicsResources(t)}),e._graphicsResources.clear(),e.textureUnitManager!==null&&e.textureUnitManager.freeAll(),e.renderable.getRenderersByReference().forEach(f=>{const v=t.getViewNodeFor(f);v==null||v.releaseGraphicsResources()})};const u={...t};Uee.forEach(f=>{t[f]=function(){return e.rootOpenGLRenderWindow?e.rootOpenGLRenderWindow[f](...arguments):u[f](...arguments)}})}const Wee={cullFaceEnabled:!1,shaderCache:null,initialized:!1,context:null,context2D:null,canvas:null,cursorVisibility:!0,cursor:"pointer",textureUnitManager:null,textureResourceIds:null,containerSize:null,renderPasses:[],notifyStartCaptureImage:!1,webgl2:!1,defaultToWebgl2:!0,activeFramebuffer:null,imageFormat:"image/png",useOffScreen:!1,useBackgroundImage:!1};function H7(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Wee,n),Ree.extend(t,e,n),e.canvas||(e.canvas=document.createElement("canvas"),e.canvas.style.width="100%"),e.selector||(e.selector=i5.newInstance(),e.selector.setOpenGLRenderWindow(t)),e.bgImage=new Image,e.bgImage.style.position="absolute",e.bgImage.style.left="0",e.bgImage.style.top="0",e.bgImage.style.width="100%",e.bgImage.style.height="100%",e.bgImage.style.zIndex="-1",e._textureResourceIds=new Map,e._graphicsResources=new Map,e._glInformation=null,e.myFactory=xY.newInstance(),e.shaderCache=Tee.newInstance(),e.shaderCache.setOpenGLRenderWindow(t),e.renderPasses[0]=RJ.newInstance(),J.get(t,e,["shaderCache","textureUnitManager","webgl2","useBackgroundImage","activeFramebuffer","rootOpenGLRenderWindow"]),J.setGet(t,e,["initialized","context","context2D","canvas","renderPasses","notifyStartCaptureImage","defaultToWebgl2","cursor","useOffScreen"]),J.setGetArray(t,e,["size"],2),J.event(t,e,"imageReady"),J.event(t,e,"windowResizeEvent"),Bee(t,e)}const o5=J.newInstance(H7,"vtkOpenGLRenderWindow");mb("WebGL",o5);var Hee={newInstance:o5,extend:H7,pushMonitorGLContextCount:kee,popMonitorGLContextCount:Gee};Za("vtkRenderWindow",o5);function $ee(t,e){e.classHierarchy.push("vtkOpenGLActor"),t.buildPass=n=>{if(n){e._openGLRenderWindow=t.getLastAncestorOfType("vtkOpenGLRenderWindow"),e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e.context=e._openGLRenderWindow.getContext(),t.prepareNodes(),t.addMissingNodes(e.renderable.getTextures()),t.addMissingNode(e.renderable.getMapper()),t.removeUnusedNodes(),e.ogltextures=null,e.activeTextures=null;for(let r=0;r<e.children.length;r++){const a=e.children[r];a.isA("vtkOpenGLTexture")?(e.ogltextures||(e.ogltextures=[]),e.ogltextures.push(a)):e.oglmapper=a}}},t.traverseZBufferPass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.oglmapper.traverse(n),t.apply(n,!1))},t.traverseOpaqueZBufferPass=n=>t.traverseOpaquePass(n),t.traverseOpaquePass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||!e.renderable.getIsOpaque()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.oglmapper.traverse(n),t.apply(n,!1))},t.traverseTranslucentPass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||e.renderable.getIsOpaque()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.oglmapper.traverse(n),t.apply(n,!1))},t.activateTextures=()=>{if(e.ogltextures){e.activeTextures=[];for(let n=0;n<e.ogltextures.length;n++){const r=e.ogltextures[n];r.render(),r.getHandle()&&e.activeTextures.push(r)}}},t.queryPass=(n,r)=>{if(n){if(!e.renderable||!e.renderable.getVisibility())return;e.renderable.getIsOpaque()?r.incrementOpaqueActorCount():r.incrementTranslucentActorCount()}},t.zBufferPass=(n,r)=>t.opaquePass(n,r),t.opaqueZBufferPass=(n,r)=>t.opaquePass(n,r),t.opaquePass=(n,r)=>{if(n)e.context.depthMask(!0),t.activateTextures();else if(e.activeTextures)for(let a=0;a<e.activeTextures.length;a++)e.activeTextures[a].deactivate()},t.translucentPass=(n,r)=>{if(n)e.context.depthMask(e._openGLRenderer.getSelector()&&e.renderable.getNestedPickable()),t.activateTextures();else if(e.activeTextures)for(let a=0;a<e.activeTextures.length;a++)e.activeTextures[a].deactivate()},t.getKeyMatrices=()=>(e.renderable.getMTime()>e.keyMatrixTime.getMTime()&&(e.renderable.computeMatrix(),fa(e.keyMatrices.mcwc,e.renderable.getMatrix()),$n(e.keyMatrices.mcwc,e.keyMatrices.mcwc),e.renderable.getIsIdentity()?Rs(e.keyMatrices.normalMatrix):(rI(e.keyMatrices.normalMatrix,e.keyMatrices.mcwc),th(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix),qM(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix)),e.keyMatrixTime.modified()),e.keyMatrices)}const zee={context:null,keyMatrixTime:null,keyMatrices:null,activeTextures:null};function $7(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,zee,n),Fr.extend(t,e,n),e.keyMatrixTime={},Yr(e.keyMatrixTime,{mtime:0}),e.keyMatrices={normalMatrix:Rs(new Float64Array(9)),mcwc:zt(new Float64Array(16))},Wa(t,e,["context"]),_o(t,e,["activeTextures"]),$ee(t,e)}const z7=dr($7);var qee={newInstance:z7,extend:$7};Za("vtkActor",z7);function jee(t,e){e.classHierarchy.push("vtkOpenGLActor2D"),t.buildPass=n=>{if(n){if(!e.renderable)return;e._openGLRenderWindow=t.getLastAncestorOfType("vtkOpenGLRenderWindow"),e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e.context=e._openGLRenderWindow.getContext(),t.prepareNodes(),t.addMissingNodes(e.renderable.getTextures()),t.addMissingNode(e.renderable.getMapper()),t.removeUnusedNodes(),e.ogltextures=null,e.activeTextures=null;for(let r=0;r<e.children.length;r++){const a=e.children[r];a.isA("vtkOpenGLTexture")?(e.ogltextures||(e.ogltextures=[]),e.ogltextures.push(a)):e.oglmapper=a}}},t.queryPass=(n,r)=>{if(n){if(!e.renderable||!e.renderable.getVisibility())return;r.incrementOverlayActorCount()}},t.traverseOpaquePass=n=>{!e.oglmapper||!e.renderable||!e.renderable.getNestedVisibility()||!e.renderable.getIsOpaque()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.oglmapper.traverse(n),t.apply(n,!1))},t.traverseTranslucentPass=n=>{!e.oglmapper||!e.renderable||!e.renderable.getNestedVisibility()||e.renderable.getIsOpaque()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.oglmapper.traverse(n),t.apply(n,!1))},t.traverseOverlayPass=n=>{!e.oglmapper||!e.renderable||!e.renderable.getNestedVisibility()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable||(t.apply(n,!0),e.oglmapper.traverse(n),t.apply(n,!1))},t.activateTextures=()=>{if(e.ogltextures){e.activeTextures=[];for(let n=0;n<e.ogltextures.length;n++){const r=e.ogltextures[n];r.render(),r.getHandle()&&e.activeTextures.push(r)}}},t.opaquePass=(n,r)=>{if(n)e.context.depthMask(!0),t.activateTextures();else if(e.activeTextures)for(let a=0;a<e.activeTextures.length;a++)e.activeTextures[a].deactivate()},t.translucentPass=(n,r)=>{if(n)e.context.depthMask(!1),t.activateTextures();else if(e.activeTextures)for(let a=0;a<e.activeTextures.length;a++)e.activeTextures[a].deactivate()},t.overlayPass=(n,r)=>{if(n)e.context.depthMask(!0),t.activateTextures();else if(e.activeTextures)for(let a=0;a<e.activeTextures.length;a++)e.activeTextures[a].deactivate()}}const Qee={context:null,activeTextures:null};function q7(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Qee,n),Fr.extend(t,e,n),Wa(t,e,["context"]),_o(t,e,["activeTextures"]),jee(t,e)}const j7=dr(q7);var Kee={newInstance:j7,extend:q7};Za("vtkActor2D",j7);function Xee(t,e){e.classHierarchy.push("vtkOpenGLCamera"),t.buildPass=n=>{n&&(e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.context=e._openGLRenderWindow.getContext())},t.opaquePass=n=>{if(n){const r=e._openGLRenderer.getTiledSizeAndOrigin();e.context.viewport(r.lowerLeftU,r.lowerLeftV,r.usize,r.vsize),e.context.scissor(r.lowerLeftU,r.lowerLeftV,r.usize,r.vsize)}},t.translucentPass=t.opaquePass,t.zBufferPass=t.opaquePass,t.opaqueZBufferPass=t.opaquePass,t.volumePass=t.opaquePass,t.getKeyMatrices=n=>{if(n!==e.lastRenderer||e._openGLRenderWindow.getMTime()>e.keyMatrixTime.getMTime()||t.getMTime()>e.keyMatrixTime.getMTime()||n.getMTime()>e.keyMatrixTime.getMTime()||e.renderable.getMTime()>e.keyMatrixTime.getMTime()){fa(e.keyMatrices.wcvc,e.renderable.getViewMatrix()),rI(e.keyMatrices.normalMatrix,e.keyMatrices.wcvc),th(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix),$n(e.keyMatrices.wcvc,e.keyMatrices.wcvc);const r=e._openGLRenderer.getAspectRatio();fa(e.keyMatrices.vcpc,e.renderable.getProjectionMatrix(r,-1,1)),$n(e.keyMatrices.vcpc,e.keyMatrices.vcpc),Xn(e.keyMatrices.wcpc,e.keyMatrices.vcpc,e.keyMatrices.wcvc),e.keyMatrixTime.modified(),e.lastRenderer=n}return e.keyMatrices}}const Yee={context:null,lastRenderer:null,keyMatrixTime:null,keyMatrices:null};function Q7(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Yee,n),Fr.extend(t,e,n),e.keyMatrixTime={},Yr(e.keyMatrixTime),e.keyMatrices={normalMatrix:new Float64Array(9),vcpc:new Float64Array(16),wcvc:new Float64Array(16),wcpc:new Float64Array(16)},Wa(t,e,["context","keyMatrixTime"]),Xee(t,e)}const K7=dr(Q7);var Zee={newInstance:K7,extend:Q7};Za("vtkCamera",K7);function Jee(t,e){e.classHierarchy.push("vtkAbstractMapper"),t.update=()=>{t.getInputData()},t.addClippingPlane=n=>n.isA("vtkPlane")?e.clippingPlanes.includes(n)?!1:(e.clippingPlanes.push(n),t.modified(),!0):!1,t.getNumberOfClippingPlanes=()=>e.clippingPlanes.length,t.removeAllClippingPlanes=()=>e.clippingPlanes.length===0?!1:(e.clippingPlanes.length=0,t.modified(),!0),t.removeClippingPlane=n=>{const r=e.clippingPlanes.indexOf(n);return r===-1?!1:(e.clippingPlanes.splice(r,1),t.modified(),!0)},t.getClippingPlanes=()=>e.clippingPlanes,t.setClippingPlanes=n=>{if(n)if(!Array.isArray(n))t.addClippingPlane(n);else{const r=n.length;for(let a=0;a<r&&a<6;a++)t.addClippingPlane(n[a])}},t.getClippingPlaneInDataCoords=(n,r,a)=>{const i=e.clippingPlanes,o=n;if(i){const s=i.length;if(r>=0&&r<s){const c=i[r],l=c.getNormal(),u=c.getOrigin(),f=l[0],v=l[1],g=l[2],d=-(f*u[0]+v*u[1]+g*u[2]);a[0]=f*o[0]+v*o[4]+g*o[8]+d*o[12],a[1]=f*o[1]+v*o[5]+g*o[9]+d*o[13],a[2]=f*o[2]+v*o[6]+g*o[10]+d*o[14],a[3]=f*o[3]+v*o[7]+g*o[11]+d*o[15];return}}J.vtkErrorMacro(`Clipping plane index ${r} is out of range.`)}}const ete={clippingPlanes:[]};function tte(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,ete,n),J.obj(t,e),J.algo(t,e,1,0),e.clippingPlanes||(e.clippingPlanes=[]),Jee(t,e)}var X7={extend:tte};function nte(t,e){e.classHierarchy.push("vtkImplicitFunction"),t.functionValue=n=>{if(!e.transform)return t.evaluateFunction(n);const r=[];return e.transform.transformPoint(n,r),t.evaluateFunction(r)},t.evaluateFunction=n=>{J.vtkErrorMacro("not implemented")}}const rte={};function Y7(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,rte,n),J.obj(t,e),J.setGet(t,e,["transform"]),nte(t,e)}const ate=J.newInstance(Y7,"vtkImplicitFunction");var ite={newInstance:ate,extend:Y7};const PT=1e-6,Z7="coincide",J7="disjoint";function ote(t,e,n){return t[0]*(n[0]-e[0])+t[1]*(n[1]-e[1])+t[2]*(n[2]-e[2])}function eN(t,e,n){const r=n[0]*(t[0]-e[0])+n[1]*(t[1]-e[1])+n[2]*(t[2]-e[2]);return Math.abs(r)}function tN(t,e,n,r){const a=[];kc(t,e,a);const i=Wn(n,a);r[0]=t[0]-i*n[0],r[1]=t[1]-i*n[1],r[2]=t[2]-i*n[2]}function nN(t,e,n){const r=Wn(t,e);let a=Wn(e,e);return a===0&&(a=1),n[0]=t[0]-r*e[0]/a,n[1]=t[1]-r*e[1]/a,n[2]=t[2]-r*e[2]/a,n}function rN(t,e,n,r){const a=[];kc(t,e,a);const i=Wn(n,a),o=Wn(n,n);o!==0?(r[0]=t[0]-i*n[0]/o,r[1]=t[1]-i*n[1]/o,r[2]=t[2]-i*n[2]/o):(r[0]=t[0],r[1]=t[1],r[2]=t[2])}function aN(t,e,n,r){const a={intersection:!1,betweenPoints:!1,t:Number.MAX_VALUE,x:[]},i=[],o=[];kc(e,t,i),kc(n,t,o);const s=Wn(r,o),c=Wn(r,i);let l,u;return c<0?l=-c:l=c,s<0?u=-s*PT:u=s*PT,l<=u||(a.t=s/c,a.x[0]=t[0]+a.t*i[0],a.x[1]=t[1]+a.t*i[1],a.x[2]=t[2]+a.t*i[2],a.intersection=!0,a.betweenPoints=a.t>=0&&a.t<=1),a}function iN(t,e,n,r){const a={intersection:!1,l0:[],l1:[],error:null},i=[];Q0(e,r,i);const o=i.map(f=>Math.abs(f));if(o[0]+o[1]+o[2]<PT){const f=[];return kc(t,n,f),Wn(e,f)===0?a.error=Z7:a.error=J7,a}let s;o[0]>o[1]&&o[0]>o[2]?s="x":o[1]>o[2]?s="y":s="z";const c=[],l=-Wn(e,t),u=-Wn(r,n);switch(s){case"x":c[0]=0,c[1]=(u*e[2]-l*r[2])/i[0],c[2]=(l*r[1]-u*e[1])/i[0];break;case"y":c[0]=(l*r[2]-u*e[2])/i[1],c[1]=0,c[2]=(u*e[0]-l*r[0])/i[1];break;case"z":c[0]=(u*e[1]-l*r[1])/i[2],c[1]=(l*r[0]-u*e[0])/i[2],c[2]=0;break}return a.l0=c,IS(c,i,a.l1),a.intersection=!0,a}const ste={evaluate:ote,distanceToPlane:eN,projectPoint:tN,projectVector:nN,generalizedProjectPoint:rN,intersectWithLine:aN,intersectWithPlane:iN,DISJOINT:J7,COINCIDE:Z7};function cte(t,e){e.classHierarchy.push("vtkPlane"),t.distanceToPlane=n=>eN(n,e.origin,e.normal),t.projectPoint=(n,r)=>{tN(n,e.origin,e.normal,r)},t.projectVector=(n,r)=>nN(n,e.normal,r),t.push=n=>{if(n!==0)for(let r=0;r<3;r++)e.origin[r]+=n*e.normal[r]},t.generalizedProjectPoint=(n,r)=>{rN(n,e.origin,e.normal,r)},t.evaluateFunction=(n,r,a)=>Array.isArray(n)?e.normal[0]*(n[0]-e.origin[0])+e.normal[1]*(n[1]-e.origin[1])+e.normal[2]*(n[2]-e.origin[2]):e.normal[0]*(n-e.origin[0])+e.normal[1]*(r-e.origin[1])+e.normal[2]*(a-e.origin[2]),t.evaluateGradient=n=>[e.normal[0],e.normal[1],e.normal[2]],t.intersectWithLine=(n,r)=>aN(n,r,e.origin,e.normal),t.intersectWithPlane=(n,r)=>iN(n,r,e.origin,e.normal)}const lte={normal:[0,0,1],origin:[0,0,0]};function oN(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,lte,n),ite.extend(t,e,n),J.setGetArray(t,e,["normal","origin"],3),cte(t,e)}const ute=J.newInstance(oN,"vtkPlane");var Ji={newInstance:ute,extend:oN,...ste};const sI=[Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE];function sN(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function zc(t){return(t==null?void 0:t.length)>=6&&t[0]<=t[1]&&t[2]<=t[3]&&t[4]<=t[5]}function s5(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function c5(t){return s5(t,sI)}function wS(t,e,n,r){const[a,i,o,s,c,l]=t;return t[0]=a<e?a:e,t[1]=i>e?i:e,t[2]=o<n?o:n,t[3]=s>n?s:n,t[4]=c<r?c:r,t[5]=l>r?l:r,t}function l5(t,e){if(e.length===0)return t;if(Array.isArray(e[0]))for(let n=0;n<e.length;++n)wS(t,...e[n]);else for(let n=0;n<e.length;n+=3)wS(t,...e.slice(n,n+3));return t}function cN(t,e,n,r,a,i,o){const[s,c,l,u,f,v]=t;return o===void 0?(t[0]=Math.min(e[0],s),t[1]=Math.max(e[1],c),t[2]=Math.min(e[2],l),t[3]=Math.max(e[3],u),t[4]=Math.min(e[4],f),t[5]=Math.max(e[5],v)):(t[0]=Math.min(e,s),t[1]=Math.max(n,c),t[2]=Math.min(r,l),t[3]=Math.max(a,u),t[4]=Math.min(i,f),t[5]=Math.max(o,v)),t}function lN(t,e,n,r){const[a,i,o,s,c,l]=t;return t[0]=e,t[1]=e>i?e:i,t[2]=n,t[3]=n>s?n:s,t[4]=r,t[5]=r>l?r:l,a!==e||o!==n||c!==r}function uN(t,e,n,r){const[a,i,o,s,c,l]=t;return t[0]=e<a?e:a,t[1]=e,t[2]=n<o?n:o,t[3]=n,t[4]=r<c?r:c,t[5]=r,i!==e||s!==n||l!==r}function fN(t,e){return t[0]-=e,t[1]+=e,t[2]-=e,t[3]+=e,t[4]-=e,t[5]+=e,t}function u5(t,e,n,r){return zc(t)?(e>=0?(t[0]*=e,t[1]*=e):(t[0]=e*t[1],t[1]=e*t[0]),n>=0?(t[2]*=n,t[3]*=n):(t[2]=n*t[3],t[3]=n*t[2]),r>=0?(t[4]*=r,t[5]*=r):(t[4]=r*t[5],t[5]=r*t[4]),!0):!1}function f5(t){return[.5*(t[0]+t[1]),.5*(t[2]+t[3]),.5*(t[4]+t[5])]}function fte(t,e,n,r){if(!zc(t))return!1;const a=f5(t);return t[0]-=a[0],t[1]-=a[0],t[2]-=a[1],t[3]-=a[1],t[4]-=a[2],t[5]-=a[2],u5(t,e,n,r),t[0]+=a[0],t[1]+=a[0],t[2]+=a[1],t[3]+=a[1],t[4]+=a[2],t[5]+=a[2],!0}function gd(t,e){return t[e*2+1]-t[e*2]}function cI(t){return[gd(t,0),gd(t,1),gd(t,2)]}function vN(t){return t.slice(0,2)}function gN(t){return t.slice(2,4)}function dN(t){return t.slice(4,6)}function mN(t){const e=cI(t);return e[0]>e[1]?e[0]>e[2]?e[0]:e[2]:e[1]>e[2]?e[1]:e[2]}function hN(t){if(zc(t)){const e=cI(t);return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])}return null}function v5(t){return[t[0],t[2],t[4]]}function g5(t){return[t[1],t[3],t[5]]}function op(t,e){return t<=0&&e>=0||t>=0&&e<=0}function d5(t,e){let n=0;for(let r=0;r<2;r++)for(let a=2;a<4;a++)for(let i=4;i<6;i++)e[n++]=[t[r],t[a],t[i]];return e}function pN(t,e,n){return e[0]=t[0],e[1]=t[2],e[2]=t[4],n[0]=t[1],n[1]=t[3],n[2]=t[5],e}function SN(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];const r=d5(t,[]);for(let a=0;a<r.length;++a)un(r[a],r[a],e);return c5(n),l5(n,r)}function CN(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return e[0]=.5*(t[1]-t[0]),e[1]=.5*(t[3]-t[2]),e[2]=.5*(t[5]-t[4]),e}function IN(t,e,n,r){const a=[].concat(sI),i=t.getData();for(let o=0;o<i.length;o+=3){const s=[i[o],i[o+1],i[o+2]],c=Wn(s,e);a[0]=Math.min(c,a[0]),a[1]=Math.max(c,a[1]);const l=Wn(s,n);a[2]=Math.min(l,a[2]),a[3]=Math.max(l,a[3]);const u=Wn(s,r);a[4]=Math.min(u,a[4]),a[5]=Math.max(u,a[5])}return a}function DN(t,e,n,r,a){let i=!0;const o=[];let s=0;const c=[],l=[0,0,0],u=0,f=1,v=2;for(let g=0;g<3;g++)e[g]<t[2*g]?(o[g]=f,l[g]=t[2*g],i=!1):e[g]>t[2*g+1]?(o[g]=u,l[g]=t[2*g+1],i=!1):o[g]=v;if(i)return r[0]=e[0],r[1]=e[1],r[2]=e[2],a[0]=0,1;for(let g=0;g<3;g++)o[g]!==v&&n[g]!==0?c[g]=(l[g]-e[g])/n[g]:c[g]=-1;for(let g=0;g<3;g++)c[s]<c[g]&&(s=g);if(c[s]>1||c[s]<0)return 0;a[0]=c[s];for(let g=0;g<3;g++)if(s!==g){if(r[g]=e[g]+c[s]*n[g],r[g]<t[2*g]||r[g]>t[2*g+1])return 0}else r[g]=l[g];return 1}function EN(t,e,n){const r=[];let a=0,i=1,o=1;for(let s=4;s<=5;++s){r[2]=t[s];for(let c=2;c<=3;++c){r[1]=t[c];for(let l=0;l<=1;++l)if(r[0]=t[l],a=Ji.evaluate(n,e,r),o&&(i=a>=0?1:-1,o=0),a===0||i>0&&a<0||i<0&&a>0)return 1}}return 0}function TN(t,e){if(!(zc(t)&&zc(e)))return!1;const n=[0,0,0,0,0,0];let r;for(let a=0;a<3;a++)if(r=!1,e[a*2]>=t[a*2]&&e[a*2]<=t[a*2+1]?(r=!0,n[a*2]=e[a*2]):t[a*2]>=e[a*2]&&t[a*2]<=e[a*2+1]&&(r=!0,n[a*2]=t[a*2]),e[a*2+1]>=t[a*2]&&e[a*2+1]<=t[a*2+1]?(r=!0,n[a*2+1]=e[2*a+1]):t[a*2+1]>=e[a*2]&&t[a*2+1]<=e[a*2+1]&&(r=!0,n[a*2+1]=t[a*2+1]),!r)return!1;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],!0}function PS(t,e){if(!(zc(t)&&zc(e)))return!1;for(let n=0;n<3;n++)if(!(e[n*2]>=t[n*2]&&e[n*2]<=t[n*2+1])&&!(t[n*2]>=e[n*2]&&t[n*2]<=e[n*2+1])&&!(e[n*2+1]>=t[n*2]&&e[n*2+1]<=t[n*2+1])&&!(t[n*2+1]>=e[n*2]&&t[n*2+1]<=e[n*2+1]))return!1;return!0}function AS(t,e,n,r){return!(e<t[0]||e>t[1]||n<t[2]||n>t[3]||r<t[4]||r>t[5])}function vte(t,e){return!(!PS(t,e)||!AS(t,...v5(e))||!AS(t,...g5(e)))}function yN(t,e,n){const r=[[0,1,2,3,4,5,6,7],[0,1,4,5,2,3,6,7],[0,2,4,6,1,3,5,7]],a=[0,0,0,0,0,0,0,0];let i=0;for(let f=0;f<2;f++)for(let v=2;v<4;v++)for(let g=4;g<6;g++){const d=[t[f],t[v],t[g]];a[i++]=Ji.evaluate(n,e,d)}let o=2;for(;o--&&!(op(a[r[o][0]],a[r[o][4]])&&op(a[r[o][1]],a[r[o][5]])&&op(a[r[o][2]],a[r[o][6]])&&op(a[r[o][3]],a[r[o][7]])););if(o<0)return!1;const s=Math.sign(n[o]),c=Math.abs((t[o*2+1]-t[o*2])*n[o]);let l=s>0?1:0;for(let f=0;f<4;f++){if(c===0)continue;const v=Math.abs(a[r[o][f]])/c;s>0&&v<l&&(l=v),s<0&&v>l&&(l=v)}const u=(1-l)*t[o*2]+l*t[o*2+1];return s>0?t[o*2]=u:t[o*2+1]=u,!0}class gte{constructor(e){this.bounds=e,this.bounds||(this.bounds=new Float64Array(sI))}getBounds(){return this.bounds}equals(e){return sN(this.bounds,e)}isValid(){return zc(this.bounds)}setBounds(e){return s5(this.bounds,e)}reset(){return c5(this.bounds)}addPoint(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return wS(this.bounds,...n)}addPoints(e){return l5(this.bounds,e)}addBounds(e,n,r,a,i,o){return cN(this.bounds,e,n,r,a,i,o)}setMinPoint(e,n,r){return lN(this.bounds,e,n,r)}setMaxPoint(e,n,r){return uN(this.bounds,e,n,r)}inflate(e){return fN(this.bounds,e)}scale(e,n,r){return u5(this.bounds,e,n,r)}getCenter(){return f5(this.bounds)}getLength(e){return gd(this.bounds,e)}getLengths(){return cI(this.bounds)}getMaxLength(){return mN(this.bounds)}getDiagonalLength(){return hN(this.bounds)}getMinPoint(){return v5(this.bounds)}getMaxPoint(){return g5(this.bounds)}getXRange(){return vN(this.bounds)}getYRange(){return gN(this.bounds)}getZRange(){return dN(this.bounds)}getCorners(e){return d5(this.bounds,e)}computeCornerPoints(e,n){return pN(this.bounds,e,n)}computeLocalBounds(e,n,r){return IN(this.bounds,e,n,r)}transformBounds(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return SN(this.bounds,e,n)}computeScale3(e){return CN(this.bounds,e)}cutWithPlane(e,n){return yN(this.bounds,e,n)}intersectBox(e,n,r,a){return DN(this.bounds,e,n,r,a)}intersectPlane(e,n){return EN(this.bounds,e,n)}intersect(e){return TN(this.bounds,e)}intersects(e){return PS(this.bounds,e)}containsPoint(e,n,r){return AS(this.bounds,e,n,r)}contains(e){return PS(this.bounds,e)}}function dte(t){const e=t&&t.bounds;return new gte(e)}const mte={equals:sN,isValid:zc,setBounds:s5,reset:c5,addPoint:wS,addPoints:l5,addBounds:cN,setMinPoint:lN,setMaxPoint:uN,inflate:fN,scale:u5,scaleAboutCenter:fte,getCenter:f5,getLength:gd,getLengths:cI,getMaxLength:mN,getDiagonalLength:hN,getMinPoint:v5,getMaxPoint:g5,getXRange:vN,getYRange:gN,getZRange:dN,getCorners:d5,computeCornerPoints:pN,computeLocalBounds:IN,transformBounds:SN,computeScale3:CN,cutWithPlane:yN,intersectBox:DN,intersectPlane:EN,intersect:TN,intersects:PS,containsPoint:AS,contains:vte,INIT_BOUNDS:sI};var Pr={newInstance:dte,...mte};function hte(t,e){t.getBounds=()=>(J.vtkErrorMacro("vtkAbstractMapper3D.getBounds - NOT IMPLEMENTED"),nu()),t.getCenter=()=>{var r;const n=t.getBounds();return e.center=Pr.isValid(n)?Pr.getCenter(n):null,(r=e.center)==null?void 0:r.slice()},t.getLength=()=>{const n=t.getBounds();return Pr.getDiagonalLength(n)}}const pte=t=>({bounds:[...Pr.INIT_BOUNDS],center:[0,0,0],viewSpecificProperties:{},...t});function Ste(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,pte(n)),X7.extend(t,e,n),J.setGet(t,e,["viewSpecificProperties"]),hte(t,e)}var m5={extend:Ste};const js={UNCHANGED:0,SINGLE_POINT:1,X_LINE:2,Y_LINE:3,Z_LINE:4,XY_PLANE:5,YZ_PLANE:6,XZ_PLANE:7,XYZ_GRID:8,EMPTY:9};var MN={StructuredType:js};const{StructuredType:fc}=MN;function Cte(t){let e=0;for(let n=0;n<3;++n)t[n*2]<t[n*2+1]&&e++;return t[0]>t[1]||t[2]>t[3]||t[4]>t[5]?fc.EMPTY:e===3?fc.XYZ_GRID:e===2?t[0]===t[1]?fc.YZ_PLANE:t[2]===t[3]?fc.XZ_PLANE:fc.XY_PLANE:e===1?t[0]<t[1]?fc.X_LINE:t[2]<t[3]?fc.Y_LINE:fc.Z_LINE:fc.SINGLE_POINT}var Ite={getDataDescriptionFromExtent:Cte,...MN};const{vtkErrorMacro:Pu}=J;function Dte(t,e){e.classHierarchy.push("vtkImageData"),t.setExtent=function(){if(e.deleted)return Pu("instance deleted - cannot call any method"),!1;for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];const i=r.length===1?r[0]:r;if(i.length!==6)return!1;const o=e.extent.some((s,c)=>s!==i[c]);return o&&(e.extent=i.slice(),e.dataDescription=Ite.getDataDescriptionFromExtent(e.extent),t.modified()),o},t.setDimensions=function(){let n,r,a;if(e.deleted){Pu("instance deleted - cannot call any method");return}if(arguments.length===1){const i=arguments.length<=0?void 0:arguments[0];n=i[0],r=i[1],a=i[2]}else if(arguments.length===3)n=arguments.length<=0?void 0:arguments[0],r=arguments.length<=1?void 0:arguments[1],a=arguments.length<=2?void 0:arguments[2];else{Pu("Bad dimension specification");return}t.setExtent(0,n-1,0,r-1,0,a-1)},t.getDimensions=()=>[e.extent[1]-e.extent[0]+1,e.extent[3]-e.extent[2]+1,e.extent[5]-e.extent[4]+1],t.getNumberOfCells=()=>{const n=t.getDimensions();let r=1;for(let a=0;a<3;a++){if(n[a]===0)return 0;n[a]>1&&(r*=n[a]-1)}return r},t.getNumberOfPoints=()=>{const n=t.getDimensions();return n[0]*n[1]*n[2]},t.getPoint=n=>{const r=t.getDimensions();if(r[0]===0||r[1]===0||r[2]===0)return Pu("Requesting a point from an empty image."),null;const a=new Float64Array(3);switch(e.dataDescription){case js.EMPTY:return null;case js.SINGLE_POINT:break;case js.X_LINE:a[0]=n;break;case js.Y_LINE:a[1]=n;break;case js.Z_LINE:a[2]=n;break;case js.XY_PLANE:a[0]=n%r[0],a[1]=n/r[0];break;case js.YZ_PLANE:a[1]=n%r[1],a[2]=n/r[1];break;case js.XZ_PLANE:a[0]=n%r[0],a[2]=n/r[0];break;case js.XYZ_GRID:a[0]=n%r[0],a[1]=n/r[0]%r[1],a[2]=n/(r[0]*r[1]);break;default:Pu("Invalid dataDescription");break}const i=[0,0,0];return t.indexToWorld(a,i),i},t.getBounds=()=>t.extentToBounds(t.getSpatialExtent()),t.extentToBounds=n=>Pr.transformBounds(n,e.indexToWorld),t.getSpatialExtent=()=>Pr.inflate([...e.extent],.5),t.computeTransforms=()=>{aI(e.indexToWorld,e.origin),e.indexToWorld[0]=e.direction[0],e.indexToWorld[1]=e.direction[1],e.indexToWorld[2]=e.direction[2],e.indexToWorld[4]=e.direction[3],e.indexToWorld[5]=e.direction[4],e.indexToWorld[6]=e.direction[5],e.indexToWorld[8]=e.direction[6],e.indexToWorld[9]=e.direction[7],e.indexToWorld[10]=e.direction[8],$c(e.indexToWorld,e.indexToWorld,e.spacing),ba(e.worldToIndex,e.indexToWorld)},t.indexToWorld=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return un(r,n,e.indexToWorld),r},t.indexToWorldVec3=t.indexToWorld,t.worldToIndex=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return un(r,n,e.worldToIndex),r},t.worldToIndexVec3=t.worldToIndex,t.indexToWorldBounds=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Pr.transformBounds(n,e.indexToWorld,r)},t.worldToIndexBounds=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Pr.transformBounds(n,e.worldToIndex,r)},t.onModified(t.computeTransforms),t.computeTransforms(),t.getCenter=()=>Pr.getCenter(t.getBounds()),t.computeHistogram=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const a=[0,0,0,0,0,0];t.worldToIndexBounds(n,a);const i=[0,0,0],o=[0,0,0];Pr.computeCornerPoints(a,i,o),CT(i,i),CT(o,o);const s=t.getDimensions();DT(i,[0,0,0],[s[0]-1,s[1]-1,s[2]-1],i),DT(o,[0,0,0],[s[0]-1,s[1]-1,s[2]-1],o);const c=s[0],l=s[0]*s[1],u=t.getPointData().getScalars().getData();let f=-1/0,v=1/0,g=0,d=0,m=0;for(let S=i[2];S<=o[2];S++)for(let I=i[1];I<=o[1];I++){let D=i[0]+I*c+S*l;for(let E=i[0];E<=o[0];E++){if(!r||r([E,I,S],a)){const T=u[D];T>f&&(f=T),T<v&&(v=T),g+=T*T,d+=T,m+=1}++D}}const h=m>0?d/m:0,C=m?Math.abs(g/m-h*h):0,p=Math.sqrt(C);return{minimum:v,maximum:f,average:h,variance:C,sigma:p,count:m}},t.computeIncrements=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const a=[];let i=r;for(let o=0;o<3;++o)a[o]=i,i*=n[o*2+1]-n[o*2]+1;return a},t.computeOffsetIndex=n=>{let[r,a,i]=n;const o=t.getExtent(),s=t.getPointData().getScalars().getNumberOfComponents(),c=t.computeIncrements(o,s);return Math.floor((Math.round(r)-o[0])*c[0]+(Math.round(a)-o[2])*c[1]+(Math.round(i)-o[4])*c[2])},t.getOffsetIndexFromWorld=n=>{const r=t.getExtent(),a=t.worldToIndex(n);for(let i=0;i<3;++i)if(a[i]<r[i*2]||a[i]>r[i*2+1])return Pu(`GetScalarPointer: Pixel ${a} is not in memory. Current extent = ${r}`),NaN;return t.computeOffsetIndex(a)},t.getScalarValueFromWorld=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const a=t.getPointData().getScalars().getNumberOfComponents();if(r<0||r>=a)return Pu(`GetScalarPointer: Scalar Component ${r} is not within bounds. Current Scalar numberOfComponents: ${a}`),NaN;const i=t.getOffsetIndexFromWorld(n);return Number.isNaN(i)?i:t.getPointData().getScalars().getComponent(i,r)}}const Ete={direction:null,indexToWorld:null,worldToIndex:null,spacing:[1,1,1],origin:[0,0,0],extent:[0,-1,0,-1,0,-1],dataDescription:js.EMPTY};function _N(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Ete,n),Nv.extend(t,e,n),e.direction?Array.isArray(e.direction)&&(e.direction=new Float64Array(e.direction.slice(0,9))):e.direction=Rs(new Float64Array(9)),e.indexToWorld=new Float64Array(16),e.worldToIndex=new Float64Array(16),J.get(t,e,["indexToWorld","worldToIndex"]),J.setGetArray(t,e,["origin","spacing"],3),J.setGetArray(t,e,["direction"],9),J.getArray(t,e,["extent"],6),Dte(t,e)}const Tte=J.newInstance(_N,"vtkImageData");var Lv={newInstance:Tte,extend:_N};const yte={MAGNITUDE:0,COMPONENT:1,RGBCOLORS:2},AT={LUMINANCE:1,LUMINANCE_ALPHA:2,RGB:3,RGBA:4};var h5={VectorMode:yte,ScalarMappingTarget:AT};const Mte={DEFAULT:0,MAP_SCALARS:1,DIRECT_SCALARS:2},_te={DEFAULT:0,USE_POINT_DATA:1,USE_CELL_DATA:2,USE_POINT_FIELD_DATA:3,USE_CELL_FIELD_DATA:4,USE_FIELD_DATA:5},Ote={BY_ID:0,BY_NAME:1};var lI={ColorMode:Mte,GetArray:Ote,ScalarMode:_te};const{ScalarMappingTarget:G8,VectorMode:T0}=h5,{VtkDataTypes:gl}=fn,{ColorMode:sp}=lI,{vtkErrorMacro:B8}=J;function wte(t){return t}function W8(t){return Math.floor(t*255+.5)}function Pte(t,e){e.classHierarchy.push("vtkScalarsToColors"),t.setVectorModeToMagnitude=()=>t.setVectorMode(T0.MAGNITUDE),t.setVectorModeToComponent=()=>t.setVectorMode(T0.COMPONENT),t.setVectorModeToRGBColors=()=>t.setVectorMode(T0.RGBCOLORS),t.build=()=>{},t.isOpaque=()=>!0,t.setAnnotations=(n,r)=>{if(!(n&&!r||!n&&r)){if(n&&r&&n.length!==r.length){B8("Values and annotations do not have the same number of tuples so ignoring");return}if(e.annotationArray=[],r&&n){const a=r.length;for(let i=0;i<a;i++)e.annotationArray.push({value:n[i],annotation:String(r[i])})}t.updateAnnotatedValueMap(),t.modified()}},t.setAnnotation=(n,r)=>{let a=t.checkForAnnotatedValue(n),i=!1;return a>=0?e.annotationArray[a].annotation!==r&&(e.annotationArray[a].annotation=r,i=!0):(e.annotationArray.push({value:n,annotation:r}),a=e.annotationArray.length-1,i=!0),i&&(t.updateAnnotatedValueMap(),t.modified()),a},t.getNumberOfAnnotatedValues=()=>e.annotationArray.length,t.getAnnotatedValue=n=>n<0||n>=e.annotationArray.length?null:e.annotationArray[n].value,t.getAnnotation=n=>e.annotationArray[n]===void 0?null:e.annotationArray[n].annotation,t.getAnnotatedValueIndex=n=>e.annotationArray.length?t.checkForAnnotatedValue(n):-1,t.removeAnnotation=n=>{const r=t.checkForAnnotatedValue(n),a=r>=0;return a&&(e.annotationArray.splice(r,1),t.updateAnnotatedValueMap(),t.modified()),a},t.resetAnnotations=()=>{e.annotationArray=[],e.annotatedValueMap=[],t.modified()},t.getAnnotationColor=(n,r)=>{if(e.indexedLookup){const a=t.getAnnotatedValueIndex(n);t.getIndexedColor(a,r)}else t.getColor(parseFloat(n),r),r[3]=1},t.checkForAnnotatedValue=n=>t.getAnnotatedValueIndexInternal(n),t.getAnnotatedValueIndexInternal=n=>{if(e.annotatedValueMap[n]!==void 0){const r=e.annotationArray.length;return e.annotatedValueMap[n]%r}return-1},t.getIndexedColor=(n,r)=>{r[0]=0,r[1]=0,r[2]=0,r[3]=0},t.updateAnnotatedValueMap=()=>{e.annotatedValueMap=[];const n=e.annotationArray.length;for(let r=0;r<n;r++)e.annotatedValueMap[e.annotationArray[r].value]=r},t.mapScalars=(n,r,a)=>{const i=n.getNumberOfComponents();let o=null;if(r===sp.DEFAULT&&(n.getDataType()===gl.UNSIGNED_CHAR||n.getDataType()===gl.UNSIGNED_CHAR_CLAMPED)||r===sp.DIRECT_SCALARS&&n)o=t.convertToRGBA(n,i,n.getNumberOfTuples());else{const s={type:"vtkDataArray",name:"temp",numberOfComponents:4,dataType:gl.UNSIGNED_CHAR},c=J.newTypedArray(s.dataType,4*n.getNumberOfTuples());s.values=c,s.size=c.length,o=fn.newInstance(s);let l=a;l<0&&i>1?t.mapVectorsThroughTable(n,o,G8.RGBA,-1,-1):(l<0&&(l=0),l>=i&&(l=i-1),t.mapScalarsThroughTable(n,o,G8.RGBA,l))}return o},t.mapVectorsToMagnitude=(n,r,a)=>{const i=n.getNumberOfTuples(),o=n.getNumberOfComponents(),s=r.getData(),c=n.getData();for(let l=0;l<i;l++){let u=0;for(let f=0;f<a;f++)u+=c[l*o+f]*c[l*o+f];s[l]=Math.sqrt(u)}},t.mapVectorsThroughTable=(n,r,a,i,o)=>{let s=t.getVectorMode(),c=o,l=i;const u=n.getNumberOfComponents();s===T0.COMPONENT?(l===-1&&(l=t.getVectorComponent()),l<0&&(l=0),l>=u&&(l=u-1)):(c===-1&&(c=t.getVectorSize()),c<=0?(l=0,c=u):(l<0&&(l=0),l>=u&&(l=u-1),l+c>u&&(c=u-l)),s===T0.MAGNITUDE&&(u===1||c===1)&&(s=T0.COMPONENT));let f=0;switch(l>0&&(f=l),s){case T0.COMPONENT:{t.mapScalarsThroughTable(n,r,a,f);break}case T0.RGBCOLORS:break;case T0.MAGNITUDE:default:{const v=fn.newInstance({numberOfComponents:1,values:new Float32Array(n.getNumberOfTuples())});t.mapVectorsToMagnitude(n,v,c),t.mapScalarsThroughTable(v,r,a,0);break}}},t.luminanceToRGBA=(n,r,a,i)=>{const o=i(a),s=r.getData(),c=n.getData(),l=s.length,u=0,f=1;let v=0;for(let g=u;g<l;g+=f){const d=i(s[g]);c[v*4]=d,c[v*4+1]=d,c[v*4+2]=d,c[v*4+3]=o,v++}},t.luminanceAlphaToRGBA=(n,r,a,i)=>{const o=r.getData(),s=n.getData(),c=o.length,l=0,u=2;let f=0;for(let v=l;v<c;v+=u){const g=i(o[v]);s[f]=g,s[f+1]=g,s[f+2]=g,s[f+3]=i(o[v+1])*a,f+=4}},t.rGBToRGBA=(n,r,a,i)=>{const o=W8(a),s=r.getData(),c=n.getData(),l=s.length,u=0,f=3;let v=0;for(let g=u;g<l;g+=f)c[v*4]=i(s[g]),c[v*4+1]=i(s[g+1]),c[v*4+2]=i(s[g+2]),c[v*4+3]=o,v++},t.rGBAToRGBA=(n,r,a,i)=>{const o=r.getData(),s=n.getData(),c=o.length,l=0,u=4;let f=0;for(let v=l;v<c;v+=u)s[f*4]=i(o[v]),s[f*4+1]=i(o[v+1]),s[f*4+2]=i(o[v+2]),s[f*4+3]=i(o[v+3])*a,f++},t.convertToRGBA=(n,r,a)=>{let{alpha:i}=e;if(r===4&&i>=1&&n.getDataType()===gl.UNSIGNED_CHAR)return n;const o=fn.newInstance({numberOfComponents:4,empty:!0,size:4*a,dataType:gl.UNSIGNED_CHAR});if(a<=0)return o;i=i>0?i:0,i=i<1?i:1;let s=wte;switch((n.getDataType()===gl.FLOAT||n.getDataType()===gl.DOUBLE)&&(s=W8),r){case 1:t.luminanceToRGBA(o,n,i,s);break;case 2:t.luminanceAlphaToRGBA(o,n,s);break;case 3:t.rGBToRGBA(o,n,i,s);break;case 4:t.rGBAToRGBA(o,n,i,s);break;default:return B8("Cannot convert colors"),null}return o},t.usingLogScale=()=>!1,t.getNumberOfAvailableColors=()=>256*256*256,t.setRange=(n,r)=>t.setMappingRange(n,r),t.getRange=()=>t.getMappingRange(),t.areScalarsOpaque=(n,r,a)=>{if(!n)return t.isOpaque();const i=n.getNumberOfComponents();return r===sp.DEFAULT&&n.getDataType()===gl.UNSIGNED_CHAR||r===sp.DIRECT_SCALARS?i===3||i===1?e.alpha>=1:n.getRange(i-1)[0]===255:!0}}const Ate={alpha:1,vectorComponent:0,vectorSize:-1,vectorMode:T0.COMPONENT,mappingRange:null,annotationArray:null,annotatedValueMap:null,indexedLookup:!1};function ON(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Ate,n),J.obj(t,e),e.mappingRange=[0,255],e.annotationArray=[],e.annotatedValueMap=[],J.setGet(t,e,["vectorSize","vectorComponent","vectorMode","alpha","indexedLookup"]),J.setArray(t,e,["mappingRange"],2),J.getArray(t,e,["mappingRange"]),Pte(t,e)}const xte=J.newInstance(ON,"vtkScalarsToColors");var uI={newInstance:xte,extend:ON,...h5};const{vtkErrorMacro:H8}=J,$8=0,z8=1,JD=2;function Rte(t,e){e.classHierarchy.push("vtkLookupTable"),t.isOpaque=()=>{if(e.opaqueFlagBuildTime.getMTime()<t.getMTime()){let n=!0;e.nanColor[3]<1&&(n=0),e.useBelowRangeColor&&e.belowRangeColor[3]<1&&(n=0),e.useAboveRangeColor&&e.aboveRangeColor[3]<1&&(n=0);for(let r=3;r<e.table.length&&n;r+=4)e.table[r]<255&&(n=!1);e.opaqueFlag=n,e.opaqueFlagBuildTime.modified()}return e.opaqueFlag},t.usingLogScale=()=>!1,t.getNumberOfAvailableColors=()=>e.table.length/4-3,t.linearIndexLookup=(n,r)=>{let a=0;const i=Number(n);return i<r.range[0]?a=r.maxIndex+$8+1.5:i>r.range[1]?a=r.maxIndex+z8+1.5:(a=(i+r.shift)*r.scale,a=a<r.maxIndex?a:r.maxIndex),Math.floor(a)},t.linearLookup=(n,r,a)=>{let i=0;ES(n)?i=Math.floor(a.maxIndex+1.5+JD):i=t.linearIndexLookup(n,a);const o=4*i;return r.slice(o,o+4)},t.indexedLookupFunction=(n,r,a)=>{let i=t.getAnnotatedValueIndexInternal(n);i===-1&&(i=e.numberOfColors+JD);const o=4*i;return[r[o],r[o+1],r[o+2],r[o+3]]},t.lookupShiftAndScale=(n,r)=>{r.shift=-n[0],r.scale=Number.MAX_VALUE,n[1]>n[0]&&(r.scale=(r.maxIndex+1)/(n[1]-n[0]))},t.mapScalarsThroughTable=(n,r,a,i)=>{let o=t.linearLookup;e.indexedLookup&&(o=t.indexedLookupFunction);const s=t.getMappingRange(),c={maxIndex:t.getNumberOfColors()-1,range:s,shift:0,scale:0};t.lookupShiftAndScale(s,c);const l=t.getAlpha(),u=n.getNumberOfTuples(),f=n.getNumberOfComponents(),v=r.getData(),g=n.getData();if(l>=1){if(a===AT.RGBA)for(let d=0;d<u;d++){const m=o(g[d*f+i],e.table,c);v[d*4]=m[0],v[d*4+1]=m[1],v[d*4+2]=m[2],v[d*4+3]=m[3]}}else if(a===AT.RGBA)for(let d=0;d<u;d++){const m=o(g[d*f+i],e.table,c);v[d*4]=m[0],v[d*4+1]=m[1],v[d*4+2]=m[2],v[d*4+3]=Math.floor(m[3]*l+.5)}},t.forceBuild=()=>{let n=0,r=0,a=0,i=0;const o=e.numberOfColors-1;o&&(n=(e.hueRange[1]-e.hueRange[0])/o,r=(e.saturationRange[1]-e.saturationRange[0])/o,a=(e.valueRange[1]-e.valueRange[0])/o,i=(e.alphaRange[1]-e.alphaRange[0])/o),e.table.length=4*o+16;const s=[],c=[];for(let l=0;l<=o;l++)s[0]=e.hueRange[0]+l*n,s[1]=e.saturationRange[0]+l*r,s[2]=e.valueRange[0]+l*a,qu(s,c),c[3]=e.alphaRange[0]+l*i,e.table[l*4]=c[0]*255+.5,e.table[l*4+1]=c[1]*255+.5,e.table[l*4+2]=c[2]*255+.5,e.table[l*4+3]=c[3]*255+.5;t.buildSpecialColors(),e.buildTime.modified()},t.setTable=n=>{if(Array.isArray(n)){const a=n[0].length;e.numberOfColors=n.length;const i=4-a;let o=0;for(let s=0;s<e.numberOfColors;s++)e.table[s*4]=255,e.table[s*4+1]=255,e.table[s*4+2]=255,e.table[s*4+3]=255;for(let s=0;s<n.length;s++){const c=n[s];for(let l=0;l<a;l++)e.table[o++]=c[l];o+=i}return t.buildSpecialColors(),e.insertTime.modified(),t.modified(),!0}if(n.getNumberOfComponents()!==4)return H8("Expected 4 components for RGBA colors"),!1;if(n.getDataType()!==Vn.UNSIGNED_CHAR)return H8("Expected unsigned char values for RGBA colors"),!1;e.numberOfColors=n.getNumberOfTuples();const r=n.getData();e.table.length=r.length;for(let a=0;a<r.length;a++)e.table[a]=r[a];return t.buildSpecialColors(),e.insertTime.modified(),t.modified(),!0},t.buildSpecialColors=()=>{const{numberOfColors:n}=e,r=e.table;let a=(n+$8)*4;e.useBelowRangeColor||n===0?(r[a]=e.belowRangeColor[0]*255+.5,r[a+1]=e.belowRangeColor[1]*255+.5,r[a+2]=e.belowRangeColor[2]*255+.5,r[a+3]=e.belowRangeColor[3]*255+.5):(r[a]=r[0],r[a+1]=r[1],r[a+2]=r[2],r[a+3]=r[3]),a=(n+z8)*4,e.useAboveRangeColor||n===0?(r[a]=e.aboveRangeColor[0]*255+.5,r[a+1]=e.aboveRangeColor[1]*255+.5,r[a+2]=e.aboveRangeColor[2]*255+.5,r[a+3]=e.aboveRangeColor[3]*255+.5):(r[a]=r[4*(n-1)+0],r[a+1]=r[4*(n-1)+1],r[a+2]=r[4*(n-1)+2],r[a+3]=r[4*(n-1)+3]),a=(n+JD)*4,r[a]=e.nanColor[0]*255+.5,r[a+1]=e.nanColor[1]*255+.5,r[a+2]=e.nanColor[2]*255+.5,r[a+3]=e.nanColor[3]*255+.5},t.build=()=>{(e.table.length<1||t.getMTime()>e.buildTime.getMTime()&&e.insertTime.getMTime()<=e.buildTime.getMTime())&&t.forceBuild()},e.table.length>0&&(t.buildSpecialColors(),e.insertTime.modified())}const bte={numberOfColors:256,hueRange:[0,.66667],saturationRange:[1,1],valueRange:[1,1],alphaRange:[1,1],nanColor:[.5,0,0,1],belowRangeColor:[0,0,0,1],aboveRangeColor:[1,1,1,1],useAboveRangeColor:!1,useBelowRangeColor:!1,alpha:1};function wN(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,bte,n),uI.extend(t,e,n),e.table||(e.table=[]),e.buildTime={},J.obj(e.buildTime),e.opaqueFlagBuildTime={},J.obj(e.opaqueFlagBuildTime,{mtime:0}),e.insertTime={},J.obj(e.insertTime,{mtime:0}),J.get(t,e,["buildTime"]),J.setGet(t,e,["numberOfColors","useAboveRangeColor","useBelowRangeColor"]),J.setArray(t,e,["alphaRange","hueRange","saturationRange","valueRange"],2),J.setArray(t,e,["nanColor","belowRangeColor","aboveRangeColor"],4),J.getArray(t,e,["hueRange","saturationRange","valueRange","alphaRange","nanColor","belowRangeColor","aboveRangeColor"]),Rte(t,e)}const Nte=J.newInstance(wN,"vtkLookupTable");var xS={newInstance:Nte,extend:wN};const f0={Off:0,PolygonOffset:1};let xT=f0.PolygonOffset,RS=f0.Off;const Lte=["VTK_RESOLVE_OFF","VTK_RESOLVE_POLYGON_OFFSET"];function Ute(){return xT}function Fte(t){const e=xT===t;return xT=t,e}function Vte(){return RS}function fI(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;const e=RS===t;return RS=t,e}function kte(){return fI(f0.Off)}function Gte(){return fI(f0.Off)}function Bte(){return fI(f0.PolygonOffset)}function Wte(){return Lte[RS]}var RT={Resolve:f0,getResolveCoincidentTopologyAsString:Wte,getResolveCoincidentTopologyPolygonOffsetFaces:Ute,getResolveCoincidentTopology:Vte,setResolveCoincidentTopology:fI,setResolveCoincidentTopologyPolygonOffsetFaces:Fte,setResolveCoincidentTopologyToDefault:kte,setResolveCoincidentTopologyToOff:Gte,setResolveCoincidentTopologyToPolygonOffset:Bte};function PN(t,e,n){n.forEach(r=>{t[`get${r.method}`]=()=>e[r.key],t[`set${r.method}`]=J.objectSetterMap.object(t,e,{name:r.key,params:["factor","offset"]})})}const p5=["Polygon","Line","Point"],Hte={Polygon:{factor:2,offset:0},Line:{factor:1,offset:-1},Point:{factor:0,offset:-2}},ju={};PN(ju,Hte,p5.map(t=>({key:t,method:`ResolveCoincidentTopology${t}OffsetParameters`})));function $te(t,e){e.resolveCoincidentTopology===void 0&&(e.resolveCoincidentTopology=!1),J.setGet(t,e,["resolveCoincidentTopology"]),e.topologyOffset={Polygon:{factor:0,offset:0},Line:{factor:0,offset:0},Point:{factor:0,offset:0}},Object.keys(RT).forEach(n=>{t[n]=RT[n]}),Object.keys(ju).forEach(n=>{t[n]=ju[n]}),PN(t,e.topologyOffset,p5.map(n=>({key:n,method:`RelativeCoincidentTopology${n}OffsetParameters`}))),t.getCoincidentTopologyPolygonOffsetParameters=()=>{const n=ju.getResolveCoincidentTopologyPolygonOffsetParameters(),r=t.getRelativeCoincidentTopologyPolygonOffsetParameters();return{factor:n.factor+r.factor,offset:n.offset+r.offset}},t.getCoincidentTopologyLineOffsetParameters=()=>{const n=ju.getResolveCoincidentTopologyLineOffsetParameters(),r=t.getRelativeCoincidentTopologyLineOffsetParameters();return{factor:n.factor+r.factor,offset:n.offset+r.offset}},t.getCoincidentTopologyPointOffsetParameter=()=>{const n=ju.getResolveCoincidentTopologyPointOffsetParameters(),r=t.getRelativeCoincidentTopologyPointOffsetParameters();return{factor:n.factor+r.factor,offset:n.offset+r.offset}}}var vI={implementCoincidentTopologyMethods:$te,staticOffsetAPI:ju,otherStaticMethods:RT,CATEGORIES:p5,Resolve:f0};const{FieldAssociations:q8}=Nv,{staticOffsetAPI:zte,otherStaticMethods:qte}=vI,{ColorMode:cp,ScalarMode:Au,GetArray:eE}=lI,{VectorMode:jte}=h5,{VtkDataTypes:Qte}=fn;function vg(t){return()=>J.vtkErrorMacro(`vtkMapper::${t} - NOT IMPLEMENTED`)}function Kte(t,e){const n=t[1]%2===0?1:-1;if(t[0]+=n,t[0]>=e[0]||t[0]<0){const r=t[2]%2===0?1:-1;t[0]-=n,t[1]+=r,(t[1]>=e[1]||t[1]<0)&&(t[1]-=r,t[2]++)}}function Xte(t,e){return t[0]+e[0]*(t[1]+e[1]*t[2])}function j8(t,e,n){const r=Math.floor(e),a=r%(2*n[0]);let i,o;a<n[0]?(t[0]=a,i=1,o=t[0]===n[0]-1):(t[0]=2*n[0]-1-a,i=-1,o=t[0]===0);const s=Math.floor(r/n[0]),c=s%(2*n[1]);let l,u;c<n[1]?(t[1]=c,l=1,u=t[1]===n[1]-1):(t[1]=2*n[1]-1-c,l=-1,u=t[1]===0),t[2]=Math.floor(s/n[1]);const f=e-r;o?u?t[2]+=f:t[1]+=l*f:t[0]+=i*f,t[0]=(t[0]+.5)/n[0],t[1]=(t[1]+.5)/n[1],t[2]=(t[2]+.5)/n[2]}const Q8=new WeakMap;function Yte(t,e,n,r,a,i,o){var w;const s=new Array(arguments.length);for(let x=0;x<arguments.length;++x){const P=arguments[x];s[x]=((w=P.getMTime)==null?void 0:w.call(P))??P}const c=s.join("/"),l=Q8.get(t);if(l&&l.stringHash===c)return l.textureCoordinates;const u=(n[1]-n[0])/(r-1),[f,v]=[n[0]-u,n[1]+u],g=f-.5*u,d=1/(v-f+u),m=f,h=(r+1)/(v-f),C=t.getData(),p=t.getNumberOfTuples(),S=t.getNumberOfComponents(),I=e<0||e>=S,D=a[2]<=1?2:3,E=fn.newInstance({numberOfComponents:D,values:new Float32Array(p*D)}),T=E.getData(),y=[0,0,0];j8(y,r+2,a);let M=0,_=0;const O=[.5,.5,.5];for(let x=0;x<p;++x){let P;if(I){let R=0;for(let L=0;L<S;++L){const H=C[M+L];R+=H*H}P=Math.sqrt(R)}else P=C[M+e];if(M+=S,i&&(P=xS.applyLogScale(P,n,n)),ES(P))O[0]=y[0],O[1]=y[1],O[2]=y[2];else if(o){let R=(P-m)*h;R<1?R=0:R>r&&(R=r+1),j8(O,R,a)}else{O[1]=.49;const R=(P-g)*d;R>1e3?O[0]=1e3:R<-1e3?O[0]=-1e3:O[0]=R}for(let R=0;R<D;++R)T[_++]=O[R]}return Q8.set(t,{stringHash:c,textureCoordinates:E}),E}function Zte(t,e){e.classHierarchy.push("vtkMapper"),t.getBounds=()=>{const n=t.getInputData();return n?(e.static||t.update(),e.bounds=n.getBounds()):e.bounds=nu(),e.bounds},t.setForceCompileOnly=n=>{e.forceCompileOnly=n},t.setSelectionWebGLIdsToVTKIds=n=>{e.selectionWebGLIdsToVTKIds=n},t.createDefaultLookupTable=()=>{e.lookupTable=xS.newInstance()},t.getColorModeAsString=()=>J.enumToString(cp,e.colorMode),t.setColorModeToDefault=()=>t.setColorMode(0),t.setColorModeToMapScalars=()=>t.setColorMode(1),t.setColorModeToDirectScalars=()=>t.setColorMode(2),t.getScalarModeAsString=()=>J.enumToString(Au,e.scalarMode),t.setScalarModeToDefault=()=>t.setScalarMode(0),t.setScalarModeToUsePointData=()=>t.setScalarMode(1),t.setScalarModeToUseCellData=()=>t.setScalarMode(2),t.setScalarModeToUsePointFieldData=()=>t.setScalarMode(3),t.setScalarModeToUseCellFieldData=()=>t.setScalarMode(4),t.setScalarModeToUseFieldData=()=>t.setScalarMode(5),t.getAbstractScalars=(n,r,a,i,o)=>{if(!n||!e.scalarVisibility)return{scalars:null,cellFlag:!1};let s=null,c=!1;if(r===Au.DEFAULT)s=n.getPointData().getScalars(),s||(s=n.getCellData().getScalars(),c=!0);else if(r===Au.USE_POINT_DATA)s=n.getPointData().getScalars();else if(r===Au.USE_CELL_DATA)s=n.getCellData().getScalars(),c=!0;else if(r===Au.USE_POINT_FIELD_DATA){const l=n.getPointData();a===eE.BY_ID?s=l.getArrayByIndex(i):s=l.getArrayByName(o)}else if(r===Au.USE_CELL_FIELD_DATA){const l=n.getCellData();c=!0,a===eE.BY_ID?s=l.getArrayByIndex(i):s=l.getArrayByName(o)}else if(r===Au.USE_FIELD_DATA){const l=n.getFieldData();a===eE.BY_ID?s=l.getArrayByIndex(i):s=l.getArrayByName(o)}return{scalars:s,cellFlag:c}},t.mapScalars=(n,r)=>{const{scalars:a,cellFlag:i}=t.getAbstractScalars(n,e.scalarMode,e.arrayAccessMode,e.arrayId,e.colorByArrayName);if(e.areScalarsMappedFromCells=i,!a){e.colorCoordinates=null,e.colorTextureMap=null,e.colorMapColors=null;return}const o=`${t.getMTime()}${a.getMTime()}${r}`;if(e.colorBuildString!==o){if(e.useLookupTableScalarRange||t.getLookupTable().setRange(e.scalarRange[0],e.scalarRange[1]),t.canUseTextureMapForColoring(a,i))e.mapScalarsToTexture(a,i,r);else{e.colorCoordinates=null,e.colorTextureMap=null;const s=t.getLookupTable();s&&(s.build(),e.colorMapColors=s.mapScalars(a,e.colorMode,e.fieldDataTupleId))}e.colorBuildString=`${t.getMTime()}${a.getMTime()}${r}`}},e.mapScalarsToTexture=(n,r,a)=>{const i=e.lookupTable.getRange(),o=e.lookupTable.usingLogScale();o&&xS.getLogRange(i,i);const s=e.lookupTable.getAlpha();if(e.colorMapColors=null,e.colorTextureMap==null||t.getMTime()>e.colorTextureMap.getMTime()||e.lookupTable.getMTime()>e.colorTextureMap.getMTime()||e.lookupTable.getAlpha()!==a){e.lookupTable.setAlpha(a),e.colorTextureMap=null,e.lookupTable.build();const l=e.lookupTable.getNumberOfAvailableColors(),u=2048,f=u**3-3,g=4096-2,d=2,m=r?f:g;e.numberOfColorsInRange=Math.min(Math.max(l,d),m);const h=e.numberOfColorsInRange+3,C=e.numberOfColorsInRange+2,p=r?[Math.min(Math.ceil(h/u**0),u),Math.min(Math.ceil(h/u**1),u),Math.min(Math.ceil(h/u**2),u)]:[C,2,1],S=p[0]*p[1]*p[2],I=new Float64Array(S);I.fill(NaN);const D=e.numberOfColorsInRange,E=D+2,T=[0,0,0],y=i[0],M=i[1]-i[0];for(let w=0;w<E;++w){const x=Xte(T,p),P=y+M*(w-1)/(D-1);I[x]=o?10**P:P,Kte(T,p)}const _=fn.newInstance({numberOfComponents:1,values:I}),O=e.lookupTable.mapScalars(_,e.colorMode,0);e.colorTextureMap=Lv.newInstance(),e.colorTextureMap.setDimensions(p),e.colorTextureMap.getPointData().setScalars(O),e.lookupTable.setAlpha(s)}const c=e.lookupTable.getVectorMode()===jte.MAGNITUDE&&n.getNumberOfComponents()>1?-1:e.lookupTable.getVectorComponent();e.colorCoordinates=Yte(n,c,i,e.numberOfColorsInRange,e.colorTextureMap.getDimensions(),o,r)},t.getIsOpaque=()=>{const n=t.getInputData(),a=t.getAbstractScalars(n,e.scalarMode,e.arrayAccessMode,e.arrayId,e.colorByArrayName).scalars;if(!e.scalarVisibility||a==null)return!0;const i=t.getLookupTable();return i?(i.build(),i.areScalarsOpaque(a,e.colorMode,-1)):!0},t.canUseTextureMapForColoring=(n,r)=>r&&e.colorMode!==cp.DIRECT_SCALARS?!0:!(!e.interpolateScalarsBeforeMapping||e.lookupTable&&e.lookupTable.getIndexedLookup()||!n||e.colorMode===cp.DEFAULT&&n.getDataType()===Qte.UNSIGNED_CHAR||e.colorMode===cp.DIRECT_SCALARS),t.clearColorArrays=()=>{e.colorMapColors=null,e.colorCoordinates=null,e.colorTextureMap=null},t.getLookupTable=()=>(e.lookupTable||t.createDefaultLookupTable(),e.lookupTable),t.getMTime=()=>{let n=e.mtime;if(e.lookupTable!==null){const r=e.lookupTable.getMTime();n=r>n?r:n}return n},t.getPrimitiveCount=()=>{const n=t.getInputData();return{points:n.getPoints().getNumberOfValues()/3,verts:n.getVerts().getNumberOfValues()-n.getVerts().getNumberOfCells(),lines:n.getLines().getNumberOfValues()-2*n.getLines().getNumberOfCells(),triangles:n.getPolys().getNumberOfValues()-3*n.getPolys().getNumberOfCells()}},t.acquireInvertibleLookupTable=vg("AcquireInvertibleLookupTable"),t.valueToColor=vg("ValueToColor"),t.colorToValue=vg("ColorToValue"),t.useInvertibleColorFor=vg("UseInvertibleColorFor"),t.clearInvertibleColor=vg("ClearInvertibleColor"),t.processSelectorPixelBuffers=(n,r)=>{if(!n||!e.selectionWebGLIdsToVTKIds||!e.populateSelectionSettings)return;const a=n.getRawPixelBuffer(mo.ID_LOW24),i=n.getRawPixelBuffer(mo.ID_HIGH24),o=n.getCurrentPass(),s=n.getFieldAssociation();let c=null;s===q8.FIELD_ASSOCIATION_POINTS?c=e.selectionWebGLIdsToVTKIds.points:s===q8.FIELD_ASSOCIATION_CELLS&&(c=e.selectionWebGLIdsToVTKIds.cells),c&&r.forEach(l=>{if(o===mo.ID_LOW24){let u=0;i&&(u+=i[l],u*=256),u+=a[l+2],u*=256,u+=a[l+1],u*=256,u+=a[l];const f=c[u],v=n.getPixelBuffer(mo.ID_LOW24);v[l]=f&255,v[l+1]=(f&65280)>>8,v[l+2]=(f&16711680)>>16}else if(o===mo.ID_HIGH24&&i){let u=0;u+=i[l],u*=256,u+=a[l+2],u*=256,u+=a[l+1],u*=256,u+=a[l];const f=c[u],v=n.getPixelBuffer(mo.ID_HIGH24);v[l]=(f&4278190080)>>24}})}}const Jte={colorMapColors:null,areScalarsMappedFromCells:!1,static:!1,lookupTable:null,scalarVisibility:!0,scalarRange:[0,1],useLookupTableScalarRange:!1,colorMode:0,scalarMode:0,arrayAccessMode:1,renderTime:0,colorByArrayName:null,fieldDataTupleId:-1,populateSelectionSettings:!0,selectionWebGLIdsToVTKIds:null,interpolateScalarsBeforeMapping:!1,colorCoordinates:null,colorTextureMap:null,numberOfColorsInRange:0,forceCompileOnly:0,useInvertibleColors:!1,invertibleScalars:null,customShaderAttributes:[]};function AN(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Jte,n),m5.extend(t,e,n),J.get(t,e,["areScalarsMappedFromCells","colorCoordinates","colorMapColors","colorTextureMap","numberOfColorsInRange","selectionWebGLIdsToVTKIds"]),J.setGet(t,e,["colorByArrayName","arrayAccessMode","colorMode","fieldDataTupleId","interpolateScalarsBeforeMapping","lookupTable","populateSelectionSettings","renderTime","scalarMode","scalarVisibility","static","useLookupTableScalarRange","customShaderAttributes"]),J.setGetArray(t,e,["scalarRange"],2),vI.implementCoincidentTopologyMethods(t,e),Zte(t,e)}const ene=J.newInstance(AN,"vtkMapper");var K0={newInstance:ene,extend:AN,...zte,...qte,...lI};const tne={DISPLAY:0,WORLD:1};var xN={CoordinateSystem:tne};const{CoordinateSystem:bT}=xN;function K8(t){return()=>J.vtkErrorMacro(`vtkProp::${t} - NOT IMPLEMENTED`)}function nne(t,e){e.classHierarchy.push("vtkProp"),t.getMTime=()=>{let n=e.mtime;for(let r=0;r<e.textures.length;++r){const a=e.textures[r].getMTime();a>n&&(n=a)}return n},t.processSelectorPixelBuffers=(n,r)=>{},t.getNestedProps=()=>null,t.getActors=()=>[],t.getActors2D=()=>[],t.getVolumes=()=>[],t.pick=K8("pick"),t.hasKey=K8("hasKey"),t.getNestedVisibility=()=>e.visibility&&(!e._parentProp||e._parentProp.getNestedVisibility()),t.getNestedPickable=()=>e.pickable&&(!e._parentProp||e._parentProp.getNestedPickable()),t.getNestedDragable=()=>e.dragable&&(!e._parentProp||e._parentProp.getNestedDragable()),t.getRedrawMTime=()=>e.mtime,t.setEstimatedRenderTime=n=>{e.estimatedRenderTime=n,e.savedEstimatedRenderTime=n},t.restoreEstimatedRenderTime=()=>{e.estimatedRenderTime=e.savedEstimatedRenderTime},t.addEstimatedRenderTime=n=>{e.estimatedRenderTime+=n},t.setAllocatedRenderTime=n=>{e.allocatedRenderTime=n,e.savedEstimatedRenderTime=e.estimatedRenderTime,e.estimatedRenderTime=0},t.getSupportsSelection=()=>!1,t.getTextures=()=>e.textures,t.hasTexture=n=>e.textures.indexOf(n)!==-1,t.addTexture=n=>{n&&!t.hasTexture(n)&&(e.textures=e.textures.concat(n),t.modified())},t.removeTexture=n=>{const r=e.textures.filter(a=>a!==n);e.textures.length!==r.length&&(e.textures=r,t.modified())},t.removeAllTextures=()=>{e.textures=[],t.modified()},t.setCoordinateSystemToWorld=()=>t.setCoordinateSystem(bT.WORLD),t.setCoordinateSystemToDisplay=()=>t.setCoordinateSystem(bT.DISPLAY)}const rne={allocatedRenderTime:10,coordinateSystem:bT.WORLD,dragable:!0,estimatedRenderTime:0,paths:null,pickable:!0,renderTimeMultiplier:1,savedEstimatedRenderTime:0,textures:[],useBounds:!0,visibility:!0};function RN(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,rne,n),J.obj(t,e),J.get(t,e,["estimatedRenderTime","allocatedRenderTime"]),J.setGet(t,e,["_parentProp","coordinateSystem","dragable","pickable","renderTimeMultiplier","useBounds","visibility"]),J.moveToProtected(t,e,["parentProp"]),nne(t,e)}const ane=J.newInstance(RN,"vtkProp");var nh={newInstance:ane,extend:RN,...xN},S5=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkPolyDataVS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/

attribute vec4 vertexMC;

// frag position in VC
//VTK::PositionVC::Dec

// optional normal declaration
//VTK::Normal::Dec

// extra lighting parameters
//VTK::Light::Dec

// Texture coordinates
//VTK::TCoord::Dec

// material property values
//VTK::Color::Dec

// clipping plane vars
//VTK::Clip::Dec

// camera and actor matrix values
//VTK::Camera::Dec

// Apple Bug
//VTK::PrimID::Dec

// picking support
//VTK::Picking::Dec

void main()
{
  //VTK::Color::Impl

  //VTK::Normal::Impl

  //VTK::TCoord::Impl

  //VTK::Clip::Impl

  //VTK::PrimID::Impl

  //VTK::PositionVC::Impl

  //VTK::Light::Impl

  //VTK::Picking::Impl
}
`,rh=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkPolyDataFS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/
// Template for the polydata mappers fragment shader

uniform int PrimitiveIDOffset;

// VC position of this fragment
//VTK::PositionVC::Dec

// optional color passed in from the vertex shader, vertexColor
//VTK::Color::Dec

// optional surface normal declaration
//VTK::Normal::Dec

// extra lighting parameters
//VTK::Light::Dec

// define vtkImageLabelOutlineOn
//VTK::ImageLabelOutlineOn

// Texture coordinates
//VTK::TCoord::Dec

// picking support
//VTK::Picking::Dec

// Depth Peeling Support
//VTK::DepthPeeling::Dec

// clipping plane vars
//VTK::Clip::Dec

// label outline 
//VTK::LabelOutline::Dec

// the output of this shader
//VTK::Output::Dec

// Apple Bug
//VTK::PrimID::Dec

// handle coincident offsets
//VTK::Coincident::Dec

//VTK::ZBuffer::Dec

//VTK::LabelOutlineHelperFunction

void main()
{
  // VC position of this fragment. This should not branch/return/discard.
  //VTK::PositionVC::Impl

  // Place any calls that require uniform flow (e.g. dFdx) here.
  //VTK::UniformFlow::Impl

  // Set gl_FragDepth here (gl_FragCoord.z by default)
  //VTK::Depth::Impl

  // Early depth peeling abort:
  //VTK::DepthPeeling::PreColor

  // Apple Bug
  //VTK::PrimID::Impl

  //VTK::Clip::Impl

  //VTK::Color::Impl

  // Generate the normal if we are not passed in one
  //VTK::Normal::Impl

  //VTK::TCoord::Impl

  //VTK::Light::Impl

  if (gl_FragData[0].a <= 0.0)
    {
    discard;
    }

  //VTK::DepthPeeling::Impl

  //VTK::Picking::Impl

  // handle coincident offsets
  //VTK::Coincident::Impl

  //VTK::ZBuffer::Impl

  //VTK::RenderPassFragmentShader::Impl
}
`;function ine(t,e){t.replaceShaderCoincidentOffset=(n,r,a)=>{const i=t.getCoincidentParameters(r,a);if(i&&(i.factor!==0||i.offset!==0)){let o=n.Fragment;o=Ve.substitute(o,"//VTK::Coincident::Dec",["uniform float cfactor;","uniform float coffset;"]).result,e.context.getExtension("EXT_frag_depth")&&(i.factor!==0?(o=Ve.substitute(o,"//VTK::UniformFlow::Impl",["float cscale = length(vec2(dFdx(gl_FragCoord.z),dFdy(gl_FragCoord.z)));","//VTK::UniformFlow::Impl"],!1).result,o=Ve.substitute(o,"//VTK::Depth::Impl","gl_FragDepthEXT = gl_FragCoord.z + cfactor*cscale + 0.000016*coffset;").result):o=Ve.substitute(o,"//VTK::Depth::Impl","gl_FragDepthEXT = gl_FragCoord.z + 0.000016*coffset;").result),e._openGLRenderWindow.getWebgl2()&&(i.factor!==0?(o=Ve.substitute(o,"//VTK::UniformFlow::Impl",["float cscale = length(vec2(dFdx(gl_FragCoord.z),dFdy(gl_FragCoord.z)));","//VTK::UniformFlow::Impl"],!1).result,o=Ve.substitute(o,"//VTK::Depth::Impl","gl_FragDepth = gl_FragCoord.z + cfactor*cscale + 0.000016*coffset;").result):o=Ve.substitute(o,"//VTK::Depth::Impl","gl_FragDepth = gl_FragCoord.z + 0.000016*coffset;").result),n.Fragment=o}}}function one(t,e){t.applyShaderReplacements=(n,r,a)=>{let i=null;if(r&&(i=r.ShaderReplacements),i)for(let o=0;o<i.length;o++){const s=i[o];if(a&&s.replaceFirst||!a&&!s.replaceFirst){const c=s.shaderType,l=n[c],u=Ve.substitute(l,s.originalValue,s.replacementValue,s.replaceAll);n[c]=u.result}}},t.buildShaders=(n,r,a)=>{t.getReplacedShaderTemplate(n,r,a),e.lastRenderPassShaderReplacement=e.currentRenderPass?e.currentRenderPass.getShaderReplacement():null,e.lastRenderPassShaderReplacement&&e.lastRenderPassShaderReplacement(n);const i=e.renderable.getViewSpecificProperties().OpenGL;t.applyShaderReplacements(n,i,!0),t.replaceShaderValues(n,r,a),t.applyShaderReplacements(n,i)},t.getReplacedShaderTemplate=(n,r,a)=>{const i=e.renderable.getViewSpecificProperties().OpenGL;t.getShaderTemplate(n,r,a);let o=n.Vertex;if(i){const l=i.VertexShaderCode;l!==void 0&&l!==""&&(o=l)}n.Vertex=o;let s=n.Fragment;if(i){const l=i.FragmentShaderCode;l!==void 0&&l!==""&&(s=l)}n.Fragment=s;let c=n.Geometry;if(i){const l=i.GeometryShaderCode;l!==void 0&&(c=l)}n.Geometry=c}}var X0={implementReplaceShaderCoincidentOffset:ine,implementBuildShadersWithReplacements:one};const{FieldAssociations:tE}=Nv,{primTypes:di}=tc,{Representation:tf,Shading:X8}=bv,{ScalarMode:lp}=K0,{Filter:Y8,Wrap:Z8}=oa,{vtkErrorMacro:xu}=Bi,sne={type:"StartEvent"},cne={type:"EndEvent"},{CoordinateSystem:lne}=nh;function une(t){const e=t.getSelector();return e?e.getCurrentPass():mo.MIN_KNOWN_PASS-1}function fne(t,e){e.classHierarchy.push("vtkOpenGLPolyDataMapper"),t.buildPass=r=>{r&&(e.currentRenderPass=null,e.openGLActor=t.getFirstAncestorOfType("vtkOpenGLActor"),e._openGLRenderer=e.openGLActor.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getLastAncestorOfType("vtkOpenGLRenderWindow"),e.openGLCamera=e._openGLRenderer.getViewNodeFor(e._openGLRenderer.getRenderable().getActiveCamera()))},t.translucentPass=(r,a)=>{r&&(e.currentRenderPass=a,t.render())},t.zBufferPass=r=>{r&&(e.haveSeenDepthRequest=!0,e.renderDepth=!0,t.render(),e.renderDepth=!1)},t.opaqueZBufferPass=r=>t.zBufferPass(r),t.opaquePass=r=>{r&&t.render()},t.render=()=>{const r=e._openGLRenderWindow.getContext();if(e.context!==r){e.context=r;for(let o=di.Start;o<di.End;o++)e.primitives[o].setOpenGLRenderWindow(e._openGLRenderWindow)}const a=e.openGLActor.getRenderable(),i=e._openGLRenderer.getRenderable();t.renderPiece(i,a)},t.getShaderTemplate=(r,a,i)=>{r.Vertex=S5,r.Fragment=rh,r.Geometry=""},t.replaceShaderColor=(r,a,i)=>{let o=r.Vertex,s=r.Geometry,c=r.Fragment;const l=e.lastBoundBO.getReferenceByName("lastLightComplexity");let u=["uniform float ambient;","uniform float diffuse;","uniform float specular;","uniform float opacityUniform; // the fragment opacity","uniform vec3 ambientColorUniform;","uniform vec3 diffuseColorUniform;"];l&&(u=u.concat(["uniform vec3 specularColorUniform;","uniform float specularPowerUniform;"]));let f=["vec3 ambientColor;","  vec3 diffuseColor;","  float opacity;"];l&&(f=f.concat(["  vec3 specularColor;","  float specularPower;"])),f=f.concat(["  ambientColor = ambientColorUniform;","  diffuseColor = diffuseColorUniform;","  opacity = opacityUniform;"]),l&&(f=f.concat(["  specularColor = specularColorUniform;","  specularPower = specularPowerUniform;"])),e.lastBoundBO.getCABO().getColorComponents()!==0&&!e.drawingEdges&&(u=u.concat(["varying vec4 vertexColorVSOutput;"]),o=Ve.substitute(o,"//VTK::Color::Dec",["attribute vec4 scalarColor;","varying vec4 vertexColorVSOutput;"]).result,o=Ve.substitute(o,"//VTK::Color::Impl",["vertexColorVSOutput =  scalarColor;"]).result,s=Ve.substitute(s,"//VTK::Color::Dec",["in vec4 vertexColorVSOutput[];","out vec4 vertexColorGSOutput;"]).result,s=Ve.substitute(s,"//VTK::Color::Impl",["vertexColorGSOutput = vertexColorVSOutput[i];"]).result),e.lastBoundBO.getCABO().getColorComponents()!==0&&!e.drawingEdges?c=Ve.substitute(c,"//VTK::Color::Impl",f.concat(["  diffuseColor = vertexColorVSOutput.rgb;","  ambientColor = vertexColorVSOutput.rgb;","  opacity = opacity*vertexColorVSOutput.a;"])).result:(e.renderable.getAreScalarsMappedFromCells()||e.renderable.getInterpolateScalarsBeforeMapping())&&e.renderable.getColorCoordinates()&&!e.drawingEdges?c=Ve.substitute(c,"//VTK::Color::Impl",f.concat(["  vec4 texColor = texture2D(texture1, tcoordVCVSOutput.st);","  diffuseColor = texColor.rgb;","  ambientColor = texColor.rgb;","  opacity = opacity*texColor.a;"])).result:(i.getBackfaceProperty()&&!e.drawingEdges&&(u=u.concat(["uniform float opacityUniformBF; // the fragment opacity","uniform float ambientIntensityBF; // the material ambient","uniform float diffuseIntensityBF; // the material diffuse","uniform vec3 ambientColorUniformBF; // ambient material color","uniform vec3 diffuseColorUniformBF; // diffuse material color"]),l?(u=u.concat(["uniform float specularIntensityBF; // the material specular intensity","uniform vec3 specularColorUniformBF; // intensity weighted color","uniform float specularPowerUniformBF;"]),f=f.concat(["if (gl_FrontFacing == false) {","  ambientColor = ambientIntensityBF * ambientColorUniformBF;","  diffuseColor = diffuseIntensityBF * diffuseColorUniformBF;","  specularColor = specularIntensityBF * specularColorUniformBF;","  specularPower = specularPowerUniformBF;","  opacity = opacityUniformBF; }"])):f=f.concat(["if (gl_FrontFacing == false) {","  ambientColor = ambientIntensityBF * ambientColorUniformBF;","  diffuseColor = diffuseIntensityBF * diffuseColorUniformBF;","  opacity = opacityUniformBF; }"])),e.haveCellScalars&&!e.drawingEdges&&(u=u.concat(["uniform samplerBuffer texture1;"])),c=Ve.substitute(c,"//VTK::Color::Impl",f).result),c=Ve.substitute(c,"//VTK::Color::Dec",u).result,r.Vertex=o,r.Geometry=s,r.Fragment=c},t.replaceShaderLight=(r,a,i)=>{let o=r.Fragment;const s="",c=e.lastBoundBO.getReferenceByName("lastLightComplexity"),l=e.lastBoundBO.getReferenceByName("lastLightCount");let u=[];switch(c){case 0:o=Ve.substitute(o,"//VTK::Light::Impl",["  gl_FragData[0] = vec4(ambientColor * ambient + diffuseColor * diffuse, opacity);","  //VTK::Light::Impl"],!1).result;break;case 1:o=Ve.substitute(o,"//VTK::Light::Impl",["  float df = max(0.0, normalVCVSOutput.z);","  float sf = pow(df, specularPower);","  vec3 diffuseL = df * diffuseColor;","  vec3 specularL = sf * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"],!1).result;break;case 2:for(let f=0;f<l;++f)u=u.concat([`uniform vec3 lightColor${f};`,`uniform vec3 lightDirectionVC${f}; // normalized`,`uniform vec3 lightHalfAngleVC${f}; // normalized`]);o=Ve.substitute(o,"//VTK::Light::Dec",u).result,u=["vec3 diffuseL = vec3(0,0,0);","  vec3 specularL = vec3(0,0,0);","  float df;"];for(let f=0;f<l;++f)u=u.concat([`  df = max(0.0, dot(normalVCVSOutput, -lightDirectionVC${f}));`,`  diffuseL += ((df${s}) * lightColor${f});`,`  if (dot(normalVCVSOutput, lightDirectionVC${f}) < 0.0)`,"    {",`    float sf = sign(df)*pow(max(1e-5,
                                              dot(reflect(lightDirectionVC${f},normalVCVSOutput),
                                                  normalize(-vertexVC.xyz))),
                                         specularPower);`,`    specularL += (sf${s} * lightColor${f});`,"    }"]);u=u.concat(["  diffuseL = diffuseL * diffuseColor;","  specularL = specularL * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"]),o=Ve.substitute(o,"//VTK::Light::Impl",u,!1).result;break;case 3:for(let f=0;f<l;++f)u=u.concat([`uniform vec3 lightColor${f};`,`uniform vec3 lightDirectionVC${f}; // normalized`,`uniform vec3 lightHalfAngleVC${f}; // normalized`,`uniform vec3 lightPositionVC${f};`,`uniform vec3 lightAttenuation${f};`,`uniform float lightConeAngle${f};`,`uniform float lightExponent${f};`,`uniform int lightPositional${f};`]);o=Ve.substitute(o,"//VTK::Light::Dec",u).result,u=["vec3 diffuseL = vec3(0,0,0);","  vec3 specularL = vec3(0,0,0);","  vec3 vertLightDirectionVC;","  float attenuation;","  float df;"];for(let f=0;f<l;++f)u=u.concat(["  attenuation = 1.0;",`  if (lightPositional${f} == 0)`,"    {",`      vertLightDirectionVC = lightDirectionVC${f};`,"    }","  else","    {",`    vertLightDirectionVC = vertexVC.xyz - lightPositionVC${f};`,"    float distanceVC = length(vertLightDirectionVC);","    vertLightDirectionVC = normalize(vertLightDirectionVC);","    attenuation = 1.0 /",`      (lightAttenuation${f}.x`,`       + lightAttenuation${f}.y * distanceVC`,`       + lightAttenuation${f}.z * distanceVC * distanceVC);`,"    // per OpenGL standard cone angle is 90 or less for a spot light",`    if (lightConeAngle${f} <= 90.0)`,"      {",`      float coneDot = dot(vertLightDirectionVC, lightDirectionVC${f});`,"      // if inside the cone",`      if (coneDot >= cos(radians(lightConeAngle${f})))`,"        {",`        attenuation = attenuation * pow(coneDot, lightExponent${f});`,"        }","      else","        {","        attenuation = 0.0;","        }","      }","    }","    df = max(0.0, attenuation*dot(normalVCVSOutput, -vertLightDirectionVC));",`    diffuseL += ((df${s}) * lightColor${f});`,"    if (dot(normalVCVSOutput, vertLightDirectionVC) < 0.0)","      {",`      float sf = sign(df)*attenuation*pow(max(1e-5,
                                                           dot(reflect(lightDirectionVC${f},
                                                                       normalVCVSOutput),
                                                               normalize(-vertexVC.xyz))),
                                                       specularPower);`,`    specularL += ((sf${s}) * lightColor${f});`,"    }"]);u=u.concat(["  diffuseL = diffuseL * diffuseColor;","  specularL = specularL * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"]),o=Ve.substitute(o,"//VTK::Light::Impl",u,!1).result;break;default:xu("bad light complexity")}r.Fragment=o},t.replaceShaderNormal=(r,a,i)=>{if(e.lastBoundBO.getReferenceByName("lastLightComplexity")>0){let s=r.Vertex,c=r.Geometry,l=r.Fragment;e.lastBoundBO.getCABO().getNormalOffset()?(s=Ve.substitute(s,"//VTK::Normal::Dec",["attribute vec3 normalMC;","uniform mat3 normalMatrix;","varying vec3 normalVCVSOutput;"]).result,s=Ve.substitute(s,"//VTK::Normal::Impl",["normalVCVSOutput = normalMatrix * normalMC;"]).result,c=Ve.substitute(c,"//VTK::Normal::Dec",["in vec3 normalVCVSOutput[];","out vec3 normalVCGSOutput;"]).result,c=Ve.substitute(c,"//VTK::Normal::Impl",["normalVCGSOutput = normalVCVSOutput[i];"]).result,l=Ve.substitute(l,"//VTK::Normal::Dec",["varying vec3 normalVCVSOutput;"]).result,l=Ve.substitute(l,"//VTK::Normal::Impl",["vec3 normalVCVSOutput = normalize(normalVCVSOutput);","  if (gl_FrontFacing == false) { normalVCVSOutput = -normalVCVSOutput; }"]).result):e.haveCellNormals?(l=Ve.substitute(l,"//VTK::Normal::Dec",["uniform mat3 normalMatrix;","uniform samplerBuffer textureN;"]).result,l=Ve.substitute(l,"//VTK::Normal::Impl",["vec3 normalVCVSOutput = normalize(normalMatrix *","    texelFetchBuffer(textureN, gl_PrimitiveID + PrimitiveIDOffset).xyz);","  if (gl_FrontFacing == false) { normalVCVSOutput = -normalVCVSOutput; }"]).result):e.lastBoundBO.getOpenGLMode(i.getProperty().getRepresentation())===e.context.LINES?(l=Ve.substitute(l,"//VTK::UniformFlow::Impl",["  vec3 fdx = dFdx(vertexVC.xyz);","  vec3 fdy = dFdy(vertexVC.xyz);","  //VTK::UniformFlow::Impl"]).result,l=Ve.substitute(l,"//VTK::Normal::Impl",["vec3 normalVCVSOutput;","  if (abs(fdx.x) > 0.0)","    { fdx = normalize(fdx); normalVCVSOutput = normalize(cross(vec3(fdx.y, -fdx.x, 0.0), fdx)); }","  else { fdy = normalize(fdy); normalVCVSOutput = normalize(cross(vec3(fdy.y, -fdy.x, 0.0), fdy));}"]).result):(l=Ve.substitute(l,"//VTK::Normal::Dec",["uniform int cameraParallel;"]).result,l=Ve.substitute(l,"//VTK::UniformFlow::Impl",["  vec3 fdx = dFdx(vertexVC.xyz);","  vec3 fdy = dFdy(vertexVC.xyz);","  //VTK::UniformFlow::Impl"]).result,l=Ve.substitute(l,"//VTK::Normal::Impl",["  fdx = normalize(fdx);","  fdy = normalize(fdy);","  vec3 normalVCVSOutput = normalize(cross(fdx,fdy));","  if (cameraParallel == 1 && normalVCVSOutput.z < 0.0) { normalVCVSOutput = -1.0*normalVCVSOutput; }","  if (cameraParallel == 0 && dot(normalVCVSOutput,vertexVC.xyz) > 0.0) { normalVCVSOutput = -1.0*normalVCVSOutput; }"]).result),r.Vertex=s,r.Geometry=c,r.Fragment=l}},t.replaceShaderPositionVC=(r,a,i)=>{e.lastBoundBO.replaceShaderPositionVC(r,a,i);let o=r.Vertex,s=r.Geometry,c=r.Fragment;e.lastBoundBO.getReferenceByName("lastLightComplexity")>0?(o=Ve.substitute(o,"//VTK::PositionVC::Dec",["varying vec4 vertexVCVSOutput;"]).result,o=Ve.substitute(o,"//VTK::PositionVC::Impl",["vertexVCVSOutput = MCVCMatrix * vertexMC;","  gl_Position = MCPCMatrix * vertexMC;"]).result,o=Ve.substitute(o,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;","uniform mat4 MCVCMatrix;"]).result,s=Ve.substitute(s,"//VTK::PositionVC::Dec",["in vec4 vertexVCVSOutput[];","out vec4 vertexVCGSOutput;"]).result,s=Ve.substitute(s,"//VTK::PositionVC::Impl",["vertexVCGSOutput = vertexVCVSOutput[i];"]).result,c=Ve.substitute(c,"//VTK::PositionVC::Dec",["varying vec4 vertexVCVSOutput;"]).result,c=Ve.substitute(c,"//VTK::PositionVC::Impl",["vec4 vertexVC = vertexVCVSOutput;"]).result):(o=Ve.substitute(o,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;"]).result,o=Ve.substitute(o,"//VTK::PositionVC::Impl",["  gl_Position = MCPCMatrix * vertexMC;"]).result),r.Vertex=o,r.Geometry=s,r.Fragment=c},t.replaceShaderTCoord=(r,a,i)=>{if(e.lastBoundBO.getCABO().getTCoordOffset()){let o=r.Vertex,s=r.Geometry,c=r.Fragment;if(e.drawingEdges)return;o=Ve.substitute(o,"//VTK::TCoord::Impl","tcoordVCVSOutput = tcoordMC;").result;const l=e.openGLActor.getActiveTextures();let u=2,f=2;if(l&&l.length>0&&(u=l[0].getComponents(),l[0].getTarget()===e.context.TEXTURE_CUBE_MAP&&(f=3)),e.renderable.getColorTextureMap()&&(u=e.renderable.getColorTextureMap().getPointData().getScalars().getNumberOfComponents(),f=2),f===2){if(o=Ve.substitute(o,"//VTK::TCoord::Dec","attribute vec2 tcoordMC; varying vec2 tcoordVCVSOutput;").result,s=Ve.substitute(s,"//VTK::TCoord::Dec",["in vec2 tcoordVCVSOutput[];","out vec2 tcoordVCGSOutput;"]).result,s=Ve.substitute(s,"//VTK::TCoord::Impl","tcoordVCGSOutput = tcoordVCVSOutput[i];").result,c=Ve.substitute(c,"//VTK::TCoord::Dec",["varying vec2 tcoordVCVSOutput;","uniform sampler2D texture1;"]).result,l&&l.length>=1)switch(u){case 1:c=Ve.substitute(c,"//VTK::TCoord::Impl",["  vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.r;","  diffuseColor = diffuseColor*tcolor.r;"]).result;break;case 2:c=Ve.substitute(c,"//VTK::TCoord::Impl",["  vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.r;","  diffuseColor = diffuseColor*tcolor.r;","  opacity = opacity * tcolor.g;"]).result;break;default:c=Ve.substitute(c,"//VTK::TCoord::Impl",["  vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.rgb;","  diffuseColor = diffuseColor*tcolor.rgb;","  opacity = opacity * tcolor.a;"]).result}}else switch(o=Ve.substitute(o,"//VTK::TCoord::Dec","attribute vec3 tcoordMC; varying vec3 tcoordVCVSOutput;").result,s=Ve.substitute(s,"//VTK::TCoord::Dec",["in vec3 tcoordVCVSOutput[];","out vec3 tcoordVCGSOutput;"]).result,s=Ve.substitute(s,"//VTK::TCoord::Impl","tcoordVCGSOutput = tcoordVCVSOutput[i];").result,c=Ve.substitute(c,"//VTK::TCoord::Dec",["varying vec3 tcoordVCVSOutput;","uniform samplerCube texture1;"]).result,u){case 1:c=Ve.substitute(c,"//VTK::TCoord::Impl",["  vec4 tcolor = textureCube(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.r;","  diffuseColor = diffuseColor*tcolor.r;"]).result;break;case 2:c=Ve.substitute(c,"//VTK::TCoord::Impl",["  vec4 tcolor = textureCube(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.r;","  diffuseColor = diffuseColor*tcolor.r;","  opacity = opacity * tcolor.g;"]).result;break;default:c=Ve.substitute(c,"//VTK::TCoord::Impl",["  vec4 tcolor = textureCube(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.rgb;","  diffuseColor = diffuseColor*tcolor.rgb;","  opacity = opacity * tcolor.a;"]).result}r.Vertex=o,r.Geometry=s,r.Fragment=c}},t.replaceShaderClip=(r,a,i)=>{let o=r.Vertex,s=r.Fragment;if(e.renderable.getNumberOfClippingPlanes()){const c=e.renderable.getNumberOfClippingPlanes();o=Ve.substitute(o,"//VTK::Clip::Dec",["uniform int numClipPlanes;",`uniform vec4 clipPlanes[${c}];`,`varying float clipDistancesVSOutput[${c}];`]).result,o=Ve.substitute(o,"//VTK::Clip::Impl",[`for (int planeNum = 0; planeNum < ${c}; planeNum++)`,"    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    clipDistancesVSOutput[planeNum] = dot(clipPlanes[planeNum], vertexMC);","    }"]).result,s=Ve.substitute(s,"//VTK::Clip::Dec",["uniform int numClipPlanes;",`varying float clipDistancesVSOutput[${c}];`]).result,s=Ve.substitute(s,"//VTK::Clip::Impl",[`for (int planeNum = 0; planeNum < ${c}; planeNum++)`,"    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    if (clipDistancesVSOutput[planeNum] < 0.0) discard;","    }"]).result}r.Vertex=o,r.Fragment=s},t.getCoincidentParameters=(r,a)=>{let i={factor:0,offset:0};const o=a.getProperty();if(e.renderable.getResolveCoincidentTopology()==f0.PolygonOffset||o.getEdgeVisibility()&&o.getRepresentation()===tf.SURFACE){const c=e.lastBoundBO.getPrimitiveType();c===di.Points||o.getRepresentation()===tf.POINTS?i=e.renderable.getCoincidentTopologyPointOffsetParameter():c===di.Lines||o.getRepresentation()===tf.WIREFRAME?i=e.renderable.getCoincidentTopologyLineOffsetParameters():(c===di.Tris||c===di.TriStrips)&&(i=e.renderable.getCoincidentTopologyPolygonOffsetParameters()),(c===di.TrisEdges||c===di.TriStripsEdges)&&(i=e.renderable.getCoincidentTopologyPolygonOffsetParameters(),i.factor/=2,i.offset/=2)}const s=e._openGLRenderer.getSelector();return s&&s.getFieldAssociation()===tE.FIELD_ASSOCIATION_POINTS&&(i.offset-=2),i},t.replaceShaderPicking=(r,a,i)=>{let o=r.Fragment,s=r.Vertex;if(o=Ve.substitute(o,"//VTK::Picking::Dec",["uniform int picking;","//VTK::Picking::Dec"]).result,!!e._openGLRenderer.getSelector()){switch((e.lastSelectionState===mo.ID_LOW24||e.lastSelectionState===mo.ID_HIGH24)&&(s=Ve.substitute(s,"//VTK::Picking::Dec",[`flat out int vertexIDVSOutput;
`,`uniform int VertexIDOffset;
`]).result,s=Ve.substitute(s,"//VTK::Picking::Impl",`  vertexIDVSOutput = gl_VertexID + VertexIDOffset;
`).result,o=Ve.substitute(o,"//VTK::Picking::Dec",`flat in int vertexIDVSOutput;
`).result,o=Ve.substitute(o,"//VTK::Picking::Impl",["  int idx = vertexIDVSOutput;","//VTK::Picking::Impl"]).result),e.lastSelectionState){case mo.ID_LOW24:o=Ve.substitute(o,"//VTK::Picking::Impl","  gl_FragData[0] = vec4(float(idx%256)/255.0, float((idx/256)%256)/255.0, float((idx/65536)%256)/255.0, 1.0);").result;break;case mo.ID_HIGH24:o=Ve.substitute(o,"//VTK::Picking::Impl","  gl_FragData[0] = vec4(float((idx/16777216)%256)/255.0, 0.0, 0.0, 1.0);").result;break;default:o=Ve.substitute(o,"//VTK::Picking::Dec","uniform vec3 mapperIndex;").result,o=Ve.substitute(o,"//VTK::Picking::Impl","  gl_FragData[0] = picking != 0 ? vec4(mapperIndex,1.0) : gl_FragData[0];").result}r.Fragment=o,r.Vertex=s}},t.replaceShaderValues=(r,a,i)=>{if(t.replaceShaderColor(r,a,i),t.replaceShaderNormal(r,a,i),t.replaceShaderLight(r,a,i),t.replaceShaderTCoord(r,a,i),t.replaceShaderPicking(r,a,i),t.replaceShaderClip(r,a,i),t.replaceShaderCoincidentOffset(r,a,i),t.replaceShaderPositionVC(r,a,i),e.haveSeenDepthRequest){let o=r.Fragment;o=Ve.substitute(o,"//VTK::ZBuffer::Dec","uniform int depthRequest;").result,o=Ve.substitute(o,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float iz = floor(gl_FragCoord.z*65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result,r.Fragment=o}},t.getNeedToRebuildShaders=(r,a,i)=>{let o=0,s=0;const c=r.getPrimitiveType(),l=e.currentInput;let u=!1;const f=l.getPointData().getNormals(),v=l.getCellData().getNormals(),g=i.getProperty().getInterpolation()===X8.FLAT,d=i.getProperty().getRepresentation(),m=r.getOpenGLMode(d,c);if((m===e.context.TRIANGLES||v&&!f||!g&&f||!g&&m===e.context.LINES)&&(u=!0),i.getProperty().getLighting()&&u){o=0;const S=a.getLightsByReference();for(let I=0;I<S.length;++I){const D=S[I];D.getSwitch()>0&&(s++,o===0&&(o=1)),o===1&&(s>1||D.getIntensity()!==1||!D.lightTypeIsHeadLight())&&(o=2),o<3&&D.getPositional()&&(o=3)}}let h=!1;const C=e.lastBoundBO.getReferenceByName("lastLightComplexity"),p=e.lastBoundBO.getReferenceByName("lastLightCount");return(C!==o||p!==s)&&(e.lastBoundBO.set({lastLightComplexity:o},!0),e.lastBoundBO.set({lastLightCount:s},!0),h=!0),(!e.currentRenderPass&&e.lastRenderPassShaderReplacement||e.currentRenderPass&&e.currentRenderPass.getShaderReplacement()!==e.lastRenderPassShaderReplacement)&&(h=!0),e.lastHaveSeenDepthRequest!==e.haveSeenDepthRequest||r.getShaderSourceTime().getMTime()<e.renderable.getMTime()||r.getShaderSourceTime().getMTime()<e.currentInput.getMTime()||r.getShaderSourceTime().getMTime()<e.selectionStateChanged.getMTime()||h?(e.lastHaveSeenDepthRequest=e.haveSeenDepthRequest,!0):!1},t.invokeShaderCallbacks=(r,a,i)=>{const o=e.renderable.getViewSpecificProperties().ShadersCallbacks;o&&o.forEach(s=>{s.callback(s.userData,r,a,i)})},t.setMapperShaderParameters=(r,a,i)=>{if(r.getProgram().isUniformUsed("PrimitiveIDOffset")&&r.getProgram().setUniformi("PrimitiveIDOffset",e.primitiveIDOffset),r.getProgram().isUniformUsed("VertexIDOffset")&&r.getProgram().setUniformi("VertexIDOffset",e.vertexIDOffset),r.getCABO().getElementCount()&&(e.VBOBuildTime.getMTime()>r.getAttributeUpdateTime().getMTime()||r.getShaderSourceTime().getMTime()>r.getAttributeUpdateTime().getMTime())){const c=e.lastBoundBO.getReferenceByName("lastLightComplexity");r.getProgram().isAttributeUsed("vertexMC")&&(r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"vertexMC",r.getCABO().getVertexOffset(),r.getCABO().getStride(),e.context.FLOAT,3,!1)||xu("Error setting vertexMC in shader VAO.")),r.getProgram().isAttributeUsed("normalMC")&&r.getCABO().getNormalOffset()&&c>0?r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"normalMC",r.getCABO().getNormalOffset(),r.getCABO().getStride(),e.context.FLOAT,3,!1)||xu("Error setting normalMC in shader VAO."):r.getVAO().removeAttributeArray("normalMC"),e.renderable.getCustomShaderAttributes().forEach((l,u)=>{r.getProgram().isAttributeUsed(`${l}MC`)&&(r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),`${l}MC`,r.getCABO().getCustomData()[u].offset,r.getCABO().getStride(),e.context.FLOAT,r.getCABO().getCustomData()[u].components,!1)||xu(`Error setting ${l}MC in shader VAO.`))}),r.getProgram().isAttributeUsed("tcoordMC")&&r.getCABO().getTCoordOffset()?r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"tcoordMC",r.getCABO().getTCoordOffset(),r.getCABO().getStride(),e.context.FLOAT,r.getCABO().getTCoordComponents(),!1)||xu("Error setting tcoordMC in shader VAO."):r.getVAO().removeAttributeArray("tcoordMC"),r.getProgram().isAttributeUsed("scalarColor")&&r.getCABO().getColorComponents()?r.getVAO().addAttributeArray(r.getProgram(),r.getCABO().getColorBO(),"scalarColor",r.getCABO().getColorOffset(),r.getCABO().getColorBOStride(),e.context.UNSIGNED_BYTE,4,!0)||xu("Error setting scalarColor in shader VAO."):r.getVAO().removeAttributeArray("scalarColor"),r.getAttributeUpdateTime().modified()}if(e.renderable.getNumberOfClippingPlanes()){const c=e.renderable.getNumberOfClippingPlanes(),l=[],f=r.getCABO().getCoordShiftAndScaleEnabled()?r.getCABO().getInverseShiftAndScaleMatrix():null,v=f?fa(e.tmpMat4,i.getMatrix()):i.getMatrix();f&&($n(v,v),Xn(v,v,f),$n(v,v));for(let g=0;g<c;g++){const d=[];e.renderable.getClippingPlaneInDataCoords(v,g,d);for(let m=0;m<4;m++)l.push(d[m])}r.getProgram().setUniformi("numClipPlanes",c),r.getProgram().setUniform4fv("clipPlanes",l)}e.internalColorTexture&&r.getProgram().isUniformUsed("texture1")&&r.getProgram().setUniformi("texture1",e.internalColorTexture.getTextureUnit());const o=e.openGLActor.getActiveTextures();if(o)for(let c=0;c<o.length;++c){const u=o[c].getTextureUnit(),f=`texture${u+1}`;r.getProgram().isUniformUsed(f)&&r.getProgram().setUniformi(f,u)}if(e.haveSeenDepthRequest&&r.getProgram().setUniformi("depthRequest",e.renderDepth?1:0),r.getProgram().isUniformUsed("coffset")){const c=t.getCoincidentParameters(a,i);r.getProgram().setUniformf("coffset",c.offset),r.getProgram().isUniformUsed("cfactor")&&r.getProgram().setUniformf("cfactor",c.factor)}r.setMapperShaderParameters(a,i,e._openGLRenderer.getTiledSizeAndOrigin());const s=e._openGLRenderer.getSelector();r.getProgram().setUniform3fArray("mapperIndex",s?s.getPropColorValue():[0,0,0]),r.getProgram().setUniformi("picking",s?s.getCurrentPass()+1:0)},t.setLightingShaderParameters=(r,a,i)=>{const o=e.lastBoundBO.getReferenceByName("lastLightComplexity");if(o<2)return;const s=r.getProgram();let c=0;const l=a.getLightsByReference();for(let v=0;v<l.length;++v){const g=l[v];if(g.getSwitch()>0){const m=g.getColorByReference(),h=g.getIntensity();e.lightColor[0]=m[0]*h,e.lightColor[1]=m[1]*h,e.lightColor[2]=m[2]*h;const C=g.getDirection(),p=a.getActiveCamera().getViewMatrix(),S=[...C];g.lightTypeIsSceneLight()&&(S[0]=p[0]*C[0]+p[1]*C[1]+p[2]*C[2],S[1]=p[4]*C[0]+p[5]*C[1]+p[6]*C[2],S[2]=p[8]*C[0]+p[9]*C[1]+p[10]*C[2],T1(S)),e.lightDirection[0]=S[0],e.lightDirection[1]=S[1],e.lightDirection[2]=S[2],T1(e.lightDirection),s.setUniform3fArray(`lightColor${c}`,e.lightColor),s.setUniform3fArray(`lightDirectionVC${c}`,e.lightDirection),c++}}if(o<3)return;const f=a.getActiveCamera().getViewMatrix();$n(f,f),c=0;for(let v=0;v<l.length;++v){const g=l[v];if(g.getSwitch()>0){const m=g.getTransformedPosition(),h=new Float64Array(3);un(h,m,f),s.setUniform3fArray(`lightAttenuation${c}`,g.getAttenuationValuesByReference()),s.setUniformi(`lightPositional${c}`,g.getPositional()),s.setUniformf(`lightExponent${c}`,g.getExponent()),s.setUniformf(`lightConeAngle${c}`,g.getConeAngle()),s.setUniform3fArray(`lightPositionVC${c}`,[h[0],h[1],h[2]]),c++}}};function n(r,a,i){return a.identity(i),r.reduce((o,s,c)=>c===0?s?a.copy(o,s):a.identity(o):s?a.multiply(o,o,s):o,i)}t.setCameraShaderParameters=(r,a,i)=>{const o=r.getProgram(),s=e.openGLCamera.getKeyMatrices(a),c=a.getActiveCamera(),l=e.openGLCamera.getKeyMatrixTime().getMTime(),u=o.getLastCameraMTime(),v=r.getCABO().getCoordShiftAndScaleEnabled()?r.getCABO().getInverseShiftAndScaleMatrix():null,g=i.getIsIdentity(),d=g?{mcwc:null,normalMatrix:null}:e.openGLActor.getKeyMatrices();if(i.getCoordinateSystem()===lne.DISPLAY){const m=e._openGLRenderer.getTiledSizeAndOrigin();zt(e.tmpMat4),e.tmpMat4[0]=2/m.usize,e.tmpMat4[12]=-1,e.tmpMat4[5]=2/m.vsize,e.tmpMat4[13]=-1,Xn(e.tmpMat4,e.tmpMat4,v),o.setUniformMatrix("MCPCMatrix",e.tmpMat4)}else o.setUniformMatrix("MCPCMatrix",n([s.wcpc,d.mcwc,v],Jd,e.tmpMat4));o.isUniformUsed("MCVCMatrix")&&o.setUniformMatrix("MCVCMatrix",n([s.wcvc,d.mcwc,v],Jd,e.tmpMat4)),o.isUniformUsed("normalMatrix")&&o.setUniformMatrix3x3("normalMatrix",n([s.normalMatrix,d.normalMatrix],fZ,e.tmpMat3)),u!==l&&(o.isUniformUsed("cameraParallel")&&o.setUniformi("cameraParallel",c.getParallelProjection()),o.setLastCameraMTime(l)),g||o.setLastCameraMTime(0)},t.setPropertyShaderParameters=(r,a,i)=>{const o=r.getProgram();let s=i.getProperty(),c=s.getOpacity(),l=e.drawingEdges?s.getEdgeColorByReference():s.getAmbientColorByReference(),u=e.drawingEdges?s.getEdgeColorByReference():s.getDiffuseColorByReference(),f=e.drawingEdges?1:s.getAmbient(),v=e.drawingEdges?0:s.getDiffuse(),g=e.drawingEdges?0:s.getSpecular();const d=s.getSpecularPower();o.setUniformf("opacityUniform",c),o.setUniform3fArray("ambientColorUniform",l),o.setUniform3fArray("diffuseColorUniform",u),o.setUniformf("ambient",f),o.setUniformf("diffuse",v);const m=e.lastBoundBO.getReferenceByName("lastLightComplexity");if(m<1)return;let h=s.getSpecularColorByReference();if(o.setUniform3fArray("specularColorUniform",h),o.setUniformf("specularPowerUniform",d),o.setUniformf("specular",g),o.isUniformUsed("ambientIntensityBF")){if(s=i.getBackfaceProperty(),c=s.getOpacity(),l=s.getAmbientColor(),f=s.getAmbient(),u=s.getDiffuseColor(),v=s.getDiffuse(),h=s.getSpecularColor(),g=s.getSpecular(),o.setUniformf("ambientIntensityBF",f),o.setUniformf("diffuseIntensityBF",v),o.setUniformf("opacityUniformBF",c),o.setUniform3fArray("ambientColorUniformBF",l),o.setUniform3fArray("diffuseColorUniformBF",u),m<1)return;o.setUniformf("specularIntensityBF",g),o.setUniform3fArray("specularColorUniformBF",h),o.setUniformf("specularPowerUniformBF",d)}},t.updateMaximumPointCellIds=(r,a)=>{var s,c,l,u;const i=e._openGLRenderer.getSelector();if(!i)return;if((c=(s=e.selectionWebGLIdsToVTKIds)==null?void 0:s.points)!=null&&c.length){const f=e.selectionWebGLIdsToVTKIds.points.length;i.setMaximumPointId(f-1)}if((u=(l=e.selectionWebGLIdsToVTKIds)==null?void 0:l.cells)!=null&&u.length){const f=e.selectionWebGLIdsToVTKIds.cells.length;i.setMaximumCellId(f-1)}i.getFieldAssociation()===tE.FIELD_ASSOCIATION_POINTS&&(e.pointPicking=!0)},t.renderPieceStart=(r,a)=>{e.primitiveIDOffset=0,e.vertexIDOffset=0;const i=une(e._openGLRenderer);if(e.lastSelectionState!==i&&(e.selectionStateChanged.modified(),e.lastSelectionState=i),e._openGLRenderer.getSelector())switch(i){default:e._openGLRenderer.getSelector().renderProp(a)}t.updateBufferObjects(r,a),e.renderable.getColorTextureMap()&&e.internalColorTexture.activate(),e.lastBoundBO=null},t.renderPieceDraw=(r,a)=>{const i=a.getProperty().getRepresentation(),o=a.getProperty().getEdgeVisibility()&&i===tf.SURFACE,s=e._openGLRenderer.getSelector(),c=s&&s.getFieldAssociation()===tE.FIELD_ASSOCIATION_POINTS&&(e.lastSelectionState===mo.ID_LOW24||e.lastSelectionState===mo.ID_HIGH24);for(let l=di.Start;l<di.End;l++)e.primitives[l].setPointPicking(c),e.primitives[l].getCABO().getElementCount()&&(e.drawingEdges=o&&(l===di.TrisEdges||l===di.TriStripsEdges),(!e.drawingEdges||!(e.renderDepth||e.lastSelectionState>=0))&&(e.lastBoundBO=e.primitives[l],e.primitiveIDOffset+=e.primitives[l].drawArrays(r,a,i,t),e.vertexIDOffset+=e.primitives[l].getCABO().getElementCount()))},t.renderPieceFinish=(r,a)=>{e.LastBoundBO&&e.LastBoundBO.getVAO().release(),e.renderable.getColorTextureMap()&&e.internalColorTexture.deactivate()},t.renderPiece=(r,a)=>{if(t.invokeEvent(sne),e.renderable.getStatic()||e.renderable.update(),e.currentInput=e.renderable.getInputData(),t.invokeEvent(cne),!e.currentInput){xu("No input!");return}if(!e.currentInput.getPoints||!e.currentInput.getPoints().getNumberOfValues())return;const i=e.context,o=a.getProperty().getBackfaceCulling(),s=a.getProperty().getFrontfaceCulling();!o&&!s?e._openGLRenderWindow.disableCullFace():s?(e._openGLRenderWindow.enableCullFace(),i.cullFace(i.FRONT)):(e._openGLRenderWindow.enableCullFace(),i.cullFace(i.BACK)),t.renderPieceStart(r,a),t.renderPieceDraw(r,a),t.renderPieceFinish(r,a)},t.computeBounds=(r,a)=>{if(!t.getInput()){Rv(e.bounds);return}e.bounds=t.getInput().getBounds()},t.updateBufferObjects=(r,a)=>{t.getNeedToRebuildBufferObjects(r,a)&&t.buildBufferObjects(r,a),t.updateMaximumPointCellIds()},t.getNeedToRebuildBufferObjects=(r,a)=>{const i=e.VBOBuildTime.getMTime();return i<t.getMTime()||i<e.renderable.getMTime()||i<a.getMTime()||i<e.currentInput.getMTime()},t.buildBufferObjects=(r,a)=>{const i=e.currentInput;if(i===null)return;e.renderable.mapScalars(i,1);const o=e.renderable.getColorMapColors();e.haveCellScalars=!1;const s=e.renderable.getScalarMode();e.renderable.getScalarVisibility()&&(s===lp.USE_CELL_DATA||s===lp.USE_CELL_FIELD_DATA||s===lp.USE_FIELD_DATA||!i.getPointData().getScalars())&&s!==lp.USE_POINT_FIELD_DATA&&o&&(e.haveCellScalars=!0);let c=a.getProperty().getInterpolation()!==X8.FLAT?i.getPointData().getNormals():null;c===null&&i.getCellData().getNormals()&&(e.haveCellNormals=!0,c=i.getCellData().getNormals());const l=a.getProperty().getRepresentation();let u=i.getPointData().getTCoords();e.openGLActor.getActiveTextures()||(u=null);let f=!1;if(e.renderable.getColorCoordinates()){u=e.renderable.getColorCoordinates(),f=e.renderable.getAreScalarsMappedFromCells(),e.internalColorTexture||(e.internalColorTexture=oa.newInstance({resizable:!0}));const g=e.internalColorTexture;g.setMinificationFilter(Y8.NEAREST),g.setMagnificationFilter(Y8.NEAREST),g.setWrapS(Z8.CLAMP_TO_EDGE),g.setWrapT(Z8.CLAMP_TO_EDGE),g.setOpenGLRenderWindow(e._openGLRenderWindow);const d=e.renderable.getColorTextureMap(),m=d.getExtent(),h=d.getPointData().getScalars();g.create2DFromRaw(m[1]-m[0]+1,m[3]-m[2]+1,h.getNumberOfComponents(),h.getDataType(),h.getData()),g.activate(),g.sendParameters(),g.deactivate()}const v=`${i.getMTime()}A${l}B${i.getMTime()}C${c?c.getMTime():1}D${o?o.getMTime():1}E${a.getProperty().getEdgeVisibility()}F${u?u.getMTime():1}`;if(e.VBOBuildString!==v){const d={points:i.getPoints(),normals:c,tcoords:u,colors:o,cellOffset:0,vertexOffset:0,useTCoordsPerCell:f,haveCellScalars:e.haveCellScalars,haveCellNormals:e.haveCellNormals,customAttributes:e.renderable.getCustomShaderAttributes().map(C=>i.getPointData().getArrayByName(C))};e.renderable.getPopulateSelectionSettings()&&(e.selectionWebGLIdsToVTKIds={points:null,cells:null});const m=[{inRep:"verts",cells:i.getVerts()},{inRep:"lines",cells:i.getLines()},{inRep:"polys",cells:i.getPolys()},{inRep:"strips",cells:i.getStrips()},{inRep:"polys",cells:i.getPolys()},{inRep:"strips",cells:i.getStrips()}],h=a.getProperty().getEdgeVisibility()&&l===tf.SURFACE;for(let C=di.Start;C<di.End;C++)C!==di.TrisEdges&&C!==di.TriStripsEdges?(d.cellOffset+=e.primitives[C].getCABO().createVBO(m[C].cells,m[C].inRep,l,d,e.selectionWebGLIdsToVTKIds),d.vertexOffset+=e.primitives[C].getCABO().getElementCount()):h?e.primitives[C].getCABO().createVBO(m[C].cells,m[C].inRep,tf.WIREFRAME,{...d,tcoords:null,colors:null,haveCellScalars:!1,haveCellNormals:!1}):e.primitives[C].releaseGraphicsResources();e.renderable.getPopulateSelectionSettings()&&e.renderable.setSelectionWebGLIdsToVTKIds(e.selectionWebGLIdsToVTKIds),e.VBOBuildString=v}e.VBOBuildTime.modified()},t.getAllocatedGPUMemoryInBytes=()=>{let r=0;return e.primitives.forEach(a=>{r+=a.getAllocatedGPUMemoryInBytes()}),r}}const vne={context:null,VBOBuildTime:0,VBOBuildString:null,primitives:null,primTypes:null,shaderRebuildString:null,tmpMat4:null,ambientColor:[],diffuseColor:[],specularColor:[],lightColor:[],lightDirection:[],lastHaveSeenDepthRequest:!1,haveSeenDepthRequest:!1,lastSelectionState:mo.MIN_KNOWN_PASS-1,selectionStateChanged:null,selectionWebGLIdsToVTKIds:null,pointPicking:!1};function bN(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,vne,n),Fr.extend(t,e,n),X0.implementReplaceShaderCoincidentOffset(t,e,n),X0.implementBuildShadersWithReplacements(t,e,n),e.primitives=[],e.primTypes=di,e.tmpMat3=Rs(new Float64Array(9)),e.tmpMat4=zt(new Float64Array(16));for(let r=di.Start;r<di.End;r++)e.primitives[r]=tc.newInstance(),e.primitives[r].setPrimitiveType(r),e.primitives[r].set({lastLightComplexity:0,lastLightCount:0,lastSelectionPass:!1},!0);Wa(t,e,["context"]),e.VBOBuildTime={},Yr(e.VBOBuildTime,{mtime:0}),e.selectionStateChanged={},Yr(e.selectionStateChanged,{mtime:0}),fne(t,e)}const NN=dr(bN,"vtkOpenGLPolyDataMapper");var gI={newInstance:NN,extend:bN};Za("vtkMapper",NN);const{vtkErrorMacro:gg}=Bi,{Representation:gne}=bv,{ObjectType:up}=Lc,{PassTypes:dne}=i5,mne={type:"StartEvent"},hne={type:"EndEvent"};function pne(t,e){e.classHierarchy.push("vtkOpenGLGlyph3DMapper");const n={...t};t.renderPiece=(r,a)=>{if(t.invokeEvent(mne),e.renderable.getStatic()||e.renderable.update(),e.currentInput=e.renderable.getInputData(1),t.invokeEvent(hne),!e.currentInput){gg("No input!");return}if(!e.currentInput.getPoints||!e.currentInput.getPoints().getNumberOfValues())return;const i=e.context;e._openGLRenderWindow.getWebgl2()?(e.hardwareSupport=!0,e.extension=null):e.extension||(e.extension=e.context.getExtension("ANGLE_instanced_arrays"),e.hardwareSupport=!!e.extension);const o=a.getProperty().getBackfaceCulling(),s=a.getProperty().getFrontfaceCulling();!o&&!s?e._openGLRenderWindow.disableCullFace():s?(e._openGLRenderWindow.enableCullFace(),i.cullFace(i.FRONT)):(e._openGLRenderWindow.enableCullFace(),i.cullFace(i.BACK)),t.renderPieceStart(r,a),t.renderPieceDraw(r,a),t.renderPieceFinish(r,a)},t.multiply4x4WithOffset=(r,a,i,o)=>{const s=a[0],c=a[1],l=a[2],u=a[3],f=a[4],v=a[5],g=a[6],d=a[7],m=a[8],h=a[9],C=a[10],p=a[11],S=a[12],I=a[13],D=a[14],E=a[15];let T=i[o],y=i[o+1],M=i[o+2],_=i[o+3];r[0]=T*s+y*f+M*m+_*S,r[1]=T*c+y*v+M*h+_*I,r[2]=T*l+y*g+M*C+_*D,r[3]=T*u+y*d+M*p+_*E,T=i[o+4],y=i[o+5],M=i[o+6],_=i[o+7],r[4]=T*s+y*f+M*m+_*S,r[5]=T*c+y*v+M*h+_*I,r[6]=T*l+y*g+M*C+_*D,r[7]=T*u+y*d+M*p+_*E,T=i[o+8],y=i[o+9],M=i[o+10],_=i[o+11],r[8]=T*s+y*f+M*m+_*S,r[9]=T*c+y*v+M*h+_*I,r[10]=T*l+y*g+M*C+_*D,r[11]=T*u+y*d+M*p+_*E,T=i[o+12],y=i[o+13],M=i[o+14],_=i[o+15],r[12]=T*s+y*f+M*m+_*S,r[13]=T*c+y*v+M*h+_*I,r[14]=T*l+y*g+M*C+_*D,r[15]=T*u+y*d+M*p+_*E},t.replaceShaderNormal=(r,a,i)=>{if(e.hardwareSupport&&e.lastBoundBO.getReferenceByName("lastLightComplexity")>0){let s=r.Vertex;e.lastBoundBO.getCABO().getNormalOffset()&&(s=Ve.substitute(s,"//VTK::Normal::Dec",["attribute vec3 normalMC;","attribute mat3 gNormal;","uniform mat3 normalMatrix;","varying vec3 normalVCVSOutput;"]).result,s=Ve.substitute(s,"//VTK::Normal::Impl",["normalVCVSOutput = normalMatrix * gNormal * normalMC;"]).result),r.Vertex=s}n.replaceShaderNormal(r,a,i)},t.replaceShaderColor=(r,a,i)=>{if(e.hardwareSupport&&e.renderable.getColorArray()){let o=r.Vertex,s=r.Geometry,c=r.Fragment;const l=e.lastBoundBO.getReferenceByName("lastLightComplexity");let u=["uniform float ambient;","uniform float diffuse;","uniform float specular;","uniform float opacityUniform; // the fragment opacity"];l&&(u=u.concat(["uniform vec3 specularColorUniform;","uniform float specularPowerUniform;"]));let f=["vec3 ambientColor;","  vec3 diffuseColor;","  float opacity;"];l&&(f=f.concat(["  vec3 specularColor;","  float specularPower;"])),f=f.concat(["  opacity = opacityUniform;"]),l&&(f=f.concat(["  specularColor = specularColorUniform;","  specularPower = specularPowerUniform;"])),e.drawingEdges||(u=u.concat(["varying vec4 vertexColorVSOutput;"]),o=Ve.substitute(o,"//VTK::Color::Dec",["attribute vec4 gColor;","varying vec4 vertexColorVSOutput;"]).result,o=Ve.substitute(o,"//VTK::Color::Impl",["vertexColorVSOutput = gColor;"]).result,s=Ve.substitute(s,"//VTK::Color::Dec",["in vec4 vertexColorVSOutput[];","out vec4 vertexColorGSOutput;"]).result,s=Ve.substitute(s,"//VTK::Color::Impl",["vertexColorGSOutput = vertexColorVSOutput[i];"]).result,f=f.concat(["  diffuseColor = vertexColorVSOutput.rgb;","  ambientColor = vertexColorVSOutput.rgb;","  opacity = opacity*vertexColorVSOutput.a;"])),c=Ve.substitute(c,"//VTK::Color::Impl",f).result,c=Ve.substitute(c,"//VTK::Color::Dec",u).result,r.Vertex=o,r.Geometry=s,r.Fragment=c}n.replaceShaderColor(r,a,i)},t.replaceShaderPositionVC=(r,a,i)=>{if(e.hardwareSupport){let o=r.Vertex;e.lastBoundBO.getReferenceByName("lastLightComplexity")>0?(o=Ve.substitute(o,"//VTK::PositionVC::Impl",["vec4 gVertexMC = gMatrix * vertexMC;","vertexVCVSOutput = MCVCMatrix * gVertexMC;","  gl_Position = MCPCMatrix * gVertexMC;"]).result,o=Ve.substitute(o,"//VTK::Camera::Dec",["attribute mat4 gMatrix;","uniform mat4 MCPCMatrix;","uniform mat4 MCVCMatrix;"]).result):(o=Ve.substitute(o,"//VTK::Camera::Dec",["attribute mat4 gMatrix;","uniform mat4 MCPCMatrix;"]).result,o=Ve.substitute(o,"//VTK::PositionVC::Impl",["vec4 gVertexMC = gMatrix * vertexMC;","  gl_Position = MCPCMatrix * gVertexMC;"]).result),r.Vertex=o}n.replaceShaderPositionVC(r,a,i)},t.replaceShaderPicking=(r,a,i)=>{if(e.hardwareSupport){let o=r.Fragment,s=r.Vertex;s=Ve.substitute(s,"//VTK::Picking::Dec",["attribute vec3 mapperIndexVS;","varying vec3 mapperIndexVSOutput;"]).result,s=Ve.substitute(s,"//VTK::Picking::Impl","  mapperIndexVSOutput = mapperIndexVS;").result,r.Vertex=s,o=Ve.substitute(o,"//VTK::Picking::Dec",["varying vec3 mapperIndexVSOutput;","uniform vec3 mapperIndex;","uniform int picking;"]).result,o=Ve.substitute(o,"//VTK::Picking::Impl",["  vec4 pickColor = picking == 2 ? vec4(mapperIndexVSOutput,1.0) : vec4(mapperIndex,1.0);","  gl_FragData[0] = picking != 0 ? pickColor : gl_FragData[0];"]).result,r.Fragment=o}else n.replaceShaderPicking(r,a,i)},t.updateGlyphShaderParameters=(r,a,i,o,s,c,l,u)=>{const f=i.getProgram();if(r){const v=e.normalMatrix,g=c,d=l*9,m=e.tmpMat3,h=v[0],C=v[1],p=v[2],S=v[3],I=v[4],D=v[5],E=v[6],T=v[7],y=v[8],M=g[d],_=g[d+1],O=g[d+2],w=g[d+3],x=g[d+4],P=g[d+5],R=g[d+6],L=g[d+7],H=g[d+8];m[0]=M*h+_*S+O*E,m[1]=M*C+_*I+O*T,m[2]=M*p+_*D+O*y,m[3]=w*h+x*S+P*E,m[4]=w*C+x*I+P*T,m[5]=w*p+x*D+P*y,m[6]=R*h+L*S+H*E,m[7]=R*C+L*I+H*T,m[8]=R*p+L*D+H*y,f.setUniformMatrix3x3("normalMatrix",e.tmpMat3)}if(t.multiply4x4WithOffset(e.tmpMat4,e.mcpcMatrix,s,l*16),f.setUniformMatrix("MCPCMatrix",e.tmpMat4),a&&(t.multiply4x4WithOffset(e.tmpMat4,e.mcvcMatrix,s,l*16),f.setUniformMatrix("MCVCMatrix",e.tmpMat4)),o){const v=o.getData();e.tmpColor[0]=v[l*4]/255,e.tmpColor[1]=v[l*4+1]/255,e.tmpColor[2]=v[l*4+2]/255,f.setUniform3fArray("ambientColorUniform",e.tmpColor),f.setUniform3fArray("diffuseColorUniform",e.tmpColor)}u&&f.setUniform3fArray("mapperIndex",u.getPropColorValue())},t.renderPieceDraw=(r,a)=>{const i=a.getProperty().getRepresentation(),o=e.context,s=a.getProperty().getEdgeVisibility()&&i===gne.SURFACE,c=e.openGLCamera.getKeyMatrices(r),l=e.openGLActor.getKeyMatrices();iv(e.normalMatrix,c.normalMatrix,l.normalMatrix),Xn(e.mcpcMatrix,c.wcpc,l.mcwc),Xn(e.mcvcMatrix,c.wcvc,l.mcwc);const u=e.renderable.getMatrixArray(),f=e.renderable.getNormalArray(),v=e.renderable.getColorArray(),g=u.length/16;let d=!1;e._openGLRenderer.getSelector()&&e._openGLRenderer.getSelector().getCurrentPass()===dne.COMPOSITE_INDEX_PASS&&(d=!0);for(let m=e.primTypes.Start;m<e.primTypes.End;m++){const h=e.primitives[m].getCABO();if(h.getElementCount()){e.drawingEdges=s&&(m===e.primTypes.TrisEdges||m===e.primTypes.TriStripsEdges),e.lastBoundBO=e.primitives[m],e.primitives[m].updateShaders(r,a,t);const C=e.primitives[m].getProgram(),p=e.primitives[m].getOpenGLMode(i),S=C.isUniformUsed("normalMatrix"),I=C.isUniformUsed("MCVCMatrix");if(e.hardwareSupport)e.extension?e.extension.drawArraysInstancedANGLE(p,0,h.getElementCount(),g):o.drawArraysInstanced(p,0,h.getElementCount(),g);else for(let D=0;D<g;++D)d&&e._openGLRenderer.getSelector().renderCompositeIndex(D),t.updateGlyphShaderParameters(S,I,e.primitives[m],v,u,f,D,d?e._openGLRenderer.getSelector():null),o.drawArrays(p,0,h.getElementCount())}}},t.setMapperShaderParameters=(r,a,i)=>{if(r.getCABO().getElementCount()&&(e.glyphBOBuildTime.getMTime()>r.getAttributeUpdateTime().getMTime()||r.getShaderSourceTime().getMTime()>r.getAttributeUpdateTime().getMTime())){r.getProgram().isAttributeUsed("gMatrix")?r.getVAO().addAttributeMatrixWithDivisor(r.getProgram(),e.matrixBuffer,"gMatrix",0,64,e.context.FLOAT,4,!1,1)||gg("Error setting gMatrix in shader VAO."):r.getVAO().removeAttributeArray("gMatrix"),r.getProgram().isAttributeUsed("gNormal")?r.getVAO().addAttributeMatrixWithDivisor(r.getProgram(),e.normalBuffer,"gNormal",0,36,e.context.FLOAT,3,!1,1)||gg("Error setting gNormal in shader VAO."):r.getVAO().removeAttributeArray("gNormal"),r.getProgram().isAttributeUsed("gColor")?r.getVAO().addAttributeArrayWithDivisor(r.getProgram(),e.colorBuffer,"gColor",0,4,e.context.UNSIGNED_BYTE,4,!0,1,!1)||gg("Error setting gColor in shader VAO."):r.getVAO().removeAttributeArray("gColor"),r.getProgram().isAttributeUsed("mapperIndexVS")?r.getVAO().addAttributeArrayWithDivisor(r.getProgram(),e.pickBuffer,"mapperIndexVS",0,4,e.context.UNSIGNED_BYTE,4,!0,1,!1)||gg("Error setting mapperIndexVS in shader VAO."):r.getVAO().removeAttributeArray("mapperIndexVS"),n.setMapperShaderParameters(r,a,i),r.getAttributeUpdateTime().modified();return}n.setMapperShaderParameters(r,a,i)},t.getNeedToRebuildBufferObjects=(r,a)=>(e.renderable.buildArrays(),e.VBOBuildTime.getMTime()<e.renderable.getBuildTime().getMTime()?!0:n.getNeedToRebuildBufferObjects(r,a)),t.getNeedToRebuildShaders=(r,a,i)=>!!(n.getNeedToRebuildShaders(r,a,i)||r.getShaderSourceTime().getMTime()<e.renderable.getMTime()||r.getShaderSourceTime().getMTime()<e.currentInput.getMTime()),t.buildBufferObjects=(r,a)=>{if(e.hardwareSupport){const i=e.renderable.getMatrixArray(),o=e.renderable.getNormalArray(),s=e.renderable.getColorArray();if(e.matrixBuffer||(e.matrixBuffer=Lc.newInstance(),e.matrixBuffer.setOpenGLRenderWindow(e._openGLRenderWindow),e.normalBuffer=Lc.newInstance(),e.normalBuffer.setOpenGLRenderWindow(e._openGLRenderWindow),e.colorBuffer=Lc.newInstance(),e.colorBuffer.setOpenGLRenderWindow(e._openGLRenderWindow),e.pickBuffer=Lc.newInstance(),e.pickBuffer.setOpenGLRenderWindow(e._openGLRenderWindow)),e.renderable.getBuildTime().getMTime()>e.glyphBOBuildTime.getMTime()){e.matrixBuffer.upload(i,up.ARRAY_BUFFER),e.normalBuffer.upload(o,up.ARRAY_BUFFER),s?e.colorBuffer.upload(s.getData(),up.ARRAY_BUFFER):e.colorBuffer.releaseGraphicsResources();const c=i.length/16,l=new Uint8Array(4*c);for(let u=0;u<c;++u){let f=u+1;const v=u*4;l[v]=f%256,f-=l[v],f/=256,l[v+1]=f%256,f-=l[v+1],f/=256,l[v+2]=f%256,l[v+3]=255}e.pickBuffer.upload(l,up.ARRAY_BUFFER),e.glyphBOBuildTime.modified()}}return n.buildBufferObjects(r,a)}}const Sne={normalMatrix:null,mcpcMatrix:null,mcwcMatrix:null};function LN(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Sne,n),gI.extend(t,e,n),e.tmpMat3=Rs(new Float64Array(9)),e.normalMatrix=Rs(new Float64Array(9)),e.mcpcMatrix=zt(new Float64Array(16)),e.mcvcMatrix=zt(new Float64Array(16)),e.tmpColor=[],e.glyphBOBuildTime={},Yr(e.glyphBOBuildTime,{mtime:0}),pne(t,e)}const UN=dr(LN,"vtkOpenGLGlyph3DMapper");var Cne={newInstance:UN,extend:LN};Za("vtkGlyph3DMapper",UN);const Ine={NONE:-1,I:0,J:1,K:2,X:3,Y:4,Z:5};var dI={SlicingMode:Ine};const u1={NEAREST:0,LINEAR:1};var Dne={InterpolationType:u1};function Y0(t,e,n){return t?`${t.getMTime()}-${e}-${n}`:"0"}function C5(t,e){return`${t.getMTime()}A${e.getMTime()}`}const{vtkErrorMacro:nf}=Bi,{SlicingMode:$s}=dI;function Ene(t){const e=t.split(`
`),n=[];for(let r=0;r<e.length;++r){const a=e[r].trim();a.length>0&&n.push(a)}return n}function Tne(t,e){e.classHierarchy.push("vtkOpenGLImageMapper");function n(r){e.openGLTexture.releaseGraphicsResources(r),[e._colorTransferFunc,e._pwFunc,e._labelOutlineThicknessArray].forEach(a=>r.unregisterGraphicsResourceUser(a,t))}t.buildPass=r=>{if(r){e.currentRenderPass=null,e.openGLImageSlice=t.getFirstAncestorOfType("vtkOpenGLImageSlice"),e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer");const a=e._openGLRenderWindow;e._openGLRenderWindow=e._openGLRenderer.getLastAncestorOfType("vtkOpenGLRenderWindow"),a&&!a.isDeleted()&&a!==e._openGLRenderWindow&&n(a),e.context=e._openGLRenderWindow.getContext(),e.tris.setOpenGLRenderWindow(e._openGLRenderWindow);const i=e._openGLRenderer.getRenderable();e.openGLCamera=e._openGLRenderer.getViewNodeFor(i.getActiveCamera()),e.renderable.isA("vtkImageMapper")&&e.renderable.getSliceAtFocalPoint()&&e.renderable.setSliceFromCamera(i.getActiveCamera())}},t.translucentPass=(r,a)=>{r&&(e.currentRenderPass=a,t.render())},t.zBufferPass=r=>{r&&(e.haveSeenDepthRequest=!0,e.renderDepth=!0,t.render(),e.renderDepth=!1)},t.opaqueZBufferPass=r=>t.zBufferPass(r),t.opaquePass=r=>{r&&t.render()},t.getCoincidentParameters=(r,a)=>e.renderable.getResolveCoincidentTopology()==f0.PolygonOffset?e.renderable.getCoincidentTopologyPolygonOffsetParameters():null,t.render=()=>{const r=e.openGLImageSlice.getRenderable(),a=e._openGLRenderer.getRenderable();t.renderPiece(a,r)},t.getShaderTemplate=(r,a,i)=>{r.Vertex=S5,r.Fragment=rh,r.Geometry=""},t.replaceShaderValues=(r,a,i)=>{let o=r.Vertex,s=r.Fragment;o=Ve.substitute(o,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;"]).result,o=Ve.substitute(o,"//VTK::PositionVC::Impl",["  gl_Position = MCPCMatrix * vertexMC;"]).result,o=Ve.substitute(o,"//VTK::TCoord::Impl","tcoordVCVSOutput = tcoordMC;").result,o=Ve.substitute(o,"//VTK::TCoord::Dec","attribute vec2 tcoordMC; varying vec2 tcoordVCVSOutput;").result;const c=e.openGLTexture.getComponents(),l=i.getProperty().getIndependentComponents();let u=["varying vec2 tcoordVCVSOutput;","uniform float cshift0;","uniform float cscale0;","uniform float pwfshift0;","uniform float pwfscale0;","uniform sampler2D texture1;","uniform sampler2D colorTexture1;","uniform sampler2D pwfTexture1;","uniform sampler2D labelOutlineTexture1;","uniform float opacity;","uniform float outlineOpacity;"];if(l){for(let v=1;v<c;v++)u=u.concat([`uniform float cshift${v};`,`uniform float cscale${v};`,`uniform float pwfshift${v};`,`uniform float pwfscale${v};`]);switch(c){case 1:u=u.concat(["uniform float mix0;","#define height0 0.5"]);break;case 2:u=u.concat(["uniform float mix0;","uniform float mix1;","#define height0 0.25","#define height1 0.75"]);break;case 3:u=u.concat(["uniform float mix0;","uniform float mix1;","uniform float mix2;","#define height0 0.17","#define height1 0.5","#define height2 0.83"]);break;case 4:u=u.concat(["uniform float mix0;","uniform float mix1;","uniform float mix2;","uniform float mix3;","#define height0 0.125","#define height1 0.375","#define height2 0.625","#define height3 0.875"]);break;default:nf("Unsupported number of independent coordinates.")}}if(s=Ve.substitute(s,"//VTK::TCoord::Dec",u).result,i.getProperty().getUseLabelOutline()===!0&&(s=Ve.substitute(s,"//VTK::LabelOutline::Dec",["uniform int outlineThickness;","uniform float vpWidth;","uniform float vpHeight;","uniform float vpOffsetX;","uniform float vpOffsetY;","uniform mat4 PCWCMatrix;","uniform mat4 vWCtoIDX;","uniform ivec3 imageDimensions;"]).result,s=Ve.substitute(s,"//VTK::ImageLabelOutlineOn","#define vtkImageLabelOutlineOn").result,s=Ve.substitute(s,"//VTK::LabelOutlineHelperFunction",["#ifdef vtkImageLabelOutlineOn","vec3 fragCoordToIndexSpace(vec4 fragCoord) {","  vec4 pcPos = vec4(","    (fragCoord.x / vpWidth - vpOffsetX - 0.5) * 2.0,","    (fragCoord.y / vpHeight - vpOffsetY - 0.5) * 2.0,","    (fragCoord.z - 0.5) * 2.0,","    1.0);","","  vec4 worldCoord = PCWCMatrix * pcPos;","  vec4 vertex = (worldCoord/worldCoord.w);","","  vec3 index = (vWCtoIDX * vertex).xyz;","","  // half voxel fix for labelmapOutline","  return (index + vec3(0.5)) / vec3(imageDimensions);","}","#endif"]).result),l){const v=["r","g","b","a"];let g=["vec4 tvalue = texture2D(texture1, tcoordVCVSOutput);"];for(let d=0;d<c;d++)g=g.concat([`vec3 tcolor${d} = mix${d} * texture2D(colorTexture1, vec2(tvalue.${v[d]} * cscale${d} + cshift${d}, height${d})).rgb;`,`float compWeight${d} = mix${d} * texture2D(pwfTexture1, vec2(tvalue.${v[d]} * pwfscale${d} + pwfshift${d}, height${d})).r;`]);switch(c){case 1:g=g.concat(["gl_FragData[0] = vec4(tcolor0.rgb, opacity);"]);break;case 2:g=g.concat(["float weightSum = compWeight0 + compWeight1;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum))), opacity);"]);break;case 3:g=g.concat(["float weightSum = compWeight0 + compWeight1 + compWeight2;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum)) + (tcolor2.rgb * (compWeight2 / weightSum))), opacity);"]);break;case 4:g=g.concat(["float weightSum = compWeight0 + compWeight1 + compWeight2 + compWeight3;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum)) + (tcolor2.rgb * (compWeight2 / weightSum)) + (tcolor3.rgb * (compWeight3 / weightSum))), opacity);"]);break;default:nf("Unsupported number of independent coordinates.")}s=Ve.substitute(s,"//VTK::TCoord::Impl",g).result}else switch(c){case 1:s=Ve.substitute(s,"//VTK::TCoord::Impl",[...Ene(`
                #ifdef vtkImageLabelOutlineOn
                  vec3 centerPosIS = fragCoordToIndexSpace(gl_FragCoord);
                  float centerValue = texture2D(texture1, centerPosIS.xy).r;
                  bool pixelOnBorder = false;
                  vec3 tColor = texture2D(colorTexture1, vec2(centerValue * cscale0 + cshift0, 0.5)).rgb;
                  float scalarOpacity = texture2D(pwfTexture1, vec2(centerValue * pwfscale0 + pwfshift0, 0.5)).r;
                  float opacityToUse = scalarOpacity * opacity;
                  int segmentIndex = int(centerValue * 255.0);
                  float textureCoordinate = float(segmentIndex - 1) / 1024.0;
                  float textureValue = texture2D(labelOutlineTexture1, vec2(textureCoordinate, 0.5)).r;
                  int actualThickness = int(textureValue * 255.0);

                  if (segmentIndex == 0){
                    gl_FragData[0] = vec4(0.0, 1.0, 1.0, 0.0);
                    return;
                  }

                  for (int i = -actualThickness; i <= actualThickness; i++) {
                    for (int j = -actualThickness; j <= actualThickness; j++) {
                      if (i == 0 || j == 0) {
                        continue;
                      }
                      vec4 neighborPixelCoord = vec4(gl_FragCoord.x + float(i),
                        gl_FragCoord.y + float(j),
                        gl_FragCoord.z, gl_FragCoord.w);
                      vec3 neighborPosIS = fragCoordToIndexSpace(neighborPixelCoord);
                      float value = texture2D(texture1, neighborPosIS.xy).r;
                      if (value != centerValue) {
                        pixelOnBorder = true;
                        break;
                      }
                    }
                    if (pixelOnBorder == true) {
                      break;
                    }
                  }
                  if (pixelOnBorder == true) {
                    gl_FragData[0] = vec4(tColor, outlineOpacity);
                  }
                  else {
                    gl_FragData[0] = vec4(tColor, opacityToUse);
                  }
                #else
                  float intensity = texture2D(texture1, tcoordVCVSOutput).r;
                  vec3 tcolor = texture2D(colorTexture1, vec2(intensity * cscale0 + cshift0, 0.5)).rgb;
                  float scalarOpacity = texture2D(pwfTexture1, vec2(intensity * pwfscale0 + pwfshift0, 0.5)).r;
                  gl_FragData[0] = vec4(tcolor, scalarOpacity * opacity);
                #endif
                `)]).result;break;case 2:s=Ve.substitute(s,"//VTK::TCoord::Impl",["vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","float intensity = tcolor.r*cscale0 + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(intensity, 0.5)).rgb, pwfscale0*tcolor.g + pwfshift0);"]).result;break;case 3:s=Ve.substitute(s,"//VTK::TCoord::Impl",["vec4 tcolor = cscale0*texture2D(texture1, tcoordVCVSOutput.st) + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(tcolor.r,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.g,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.b,0.5)).r, opacity);"]).result;break;default:s=Ve.substitute(s,"//VTK::TCoord::Impl",["vec4 tcolor = cscale0*texture2D(texture1, tcoordVCVSOutput.st) + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(tcolor.r,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.g,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.b,0.5)).r, tcolor.a);"]).result}e.haveSeenDepthRequest&&(s=Ve.substitute(s,"//VTK::ZBuffer::Dec","uniform int depthRequest;").result,s=Ve.substitute(s,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float iz = floor(gl_FragCoord.z*65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result),r.Vertex=o,r.Fragment=s,t.replaceShaderClip(r,a,i),t.replaceShaderCoincidentOffset(r,a,i)},t.replaceShaderClip=(r,a,i)=>{let o=r.Vertex,s=r.Fragment;if(e.renderable.getNumberOfClippingPlanes()){let c=e.renderable.getNumberOfClippingPlanes();c>6&&(Kn("OpenGL has a limit of 6 clipping planes"),c=6),o=Ve.substitute(o,"//VTK::Clip::Dec",["uniform int numClipPlanes;","uniform vec4 clipPlanes[6];","varying float clipDistancesVSOutput[6];"]).result,o=Ve.substitute(o,"//VTK::Clip::Impl",["for (int planeNum = 0; planeNum < 6; planeNum++)","    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    clipDistancesVSOutput[planeNum] = dot(clipPlanes[planeNum], vertexMC);","    }"]).result,s=Ve.substitute(s,"//VTK::Clip::Dec",["uniform int numClipPlanes;","varying float clipDistancesVSOutput[6];"]).result,s=Ve.substitute(s,"//VTK::Clip::Impl",["for (int planeNum = 0; planeNum < 6; planeNum++)","    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    if (clipDistancesVSOutput[planeNum] < 0.0) discard;","    }"]).result}r.Vertex=o,r.Fragment=s},t.getNeedToRebuildShaders=(r,a,i)=>{var l;const o=e.openGLTexture.getComponents(),s=i.getProperty().getIndependentComponents();let c=!1;return(!e.currentRenderPass&&e.lastRenderPassShaderReplacement||e.currentRenderPass&&e.currentRenderPass.getShaderReplacement()!==e.lastRenderPassShaderReplacement)&&(c=!0),c||e.lastHaveSeenDepthRequest!==e.haveSeenDepthRequest||((l=r.getProgram())==null?void 0:l.getHandle())===0||e.lastTextureComponents!==o||e.lastIndependentComponents!==s?(e.lastHaveSeenDepthRequest=e.haveSeenDepthRequest,e.lastTextureComponents=o,e.lastIndependentComponents=s,!0):!1},t.updateShaders=(r,a,i)=>{if(e.lastBoundBO=r,t.getNeedToRebuildShaders(r,a,i)){const o={Vertex:null,Fragment:null,Geometry:null};t.buildShaders(o,a,i);const s=e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(o.Vertex,o.Fragment,o.Geometry);s!==r.getProgram()&&(r.setProgram(s),r.getVAO().releaseGraphicsResources()),r.getShaderSourceTime().modified()}else e._openGLRenderWindow.getShaderCache().readyShaderProgram(r.getProgram());r.getVAO().bind(),t.setMapperShaderParameters(r,a,i),t.setCameraShaderParameters(r,a,i),t.setPropertyShaderParameters(r,a,i)},t.setMapperShaderParameters=(r,a,i)=>{r.getCABO().getElementCount()&&(e.VBOBuildTime>r.getAttributeUpdateTime().getMTime()||r.getShaderSourceTime().getMTime()>r.getAttributeUpdateTime().getMTime())&&(r.getProgram().isAttributeUsed("vertexMC")&&(r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"vertexMC",r.getCABO().getVertexOffset(),r.getCABO().getStride(),e.context.FLOAT,3,e.context.FALSE)||nf("Error setting vertexMC in shader VAO.")),r.getProgram().isAttributeUsed("tcoordMC")&&r.getCABO().getTCoordOffset()&&(r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"tcoordMC",r.getCABO().getTCoordOffset(),r.getCABO().getStride(),e.context.FLOAT,r.getCABO().getTCoordComponents(),e.context.FALSE)||nf("Error setting tcoordMC in shader VAO.")),r.getAttributeUpdateTime().modified());const o=e.openGLTexture.getTextureUnit();r.getProgram().setUniformi("texture1",o);const s=e.openGLTexture.getComponents(),c=i.getProperty().getIndependentComponents();if(c)for(let d=0;d<s;d++)r.getProgram().setUniformf(`mix${d}`,i.getProperty().getComponentWeight(d));const l=e.openGLTexture.getShiftAndScale();for(let d=0;d<s;d++){let m=i.getProperty().getColorWindow(),h=i.getProperty().getColorLevel();const C=c?d:0,p=i.getProperty().getRGBTransferFunction(C);if(p&&i.getProperty().getUseLookupTableScalarRange()){const D=p.getRange();m=D[1]-D[0],h=.5*(D[1]+D[0])}const S=l.scale/m,I=(l.shift-h)/m+.5;r.getProgram().setUniformf(`cshift${d}`,I),r.getProgram().setUniformf(`cscale${d}`,S)}for(let d=0;d<s;d++){let m=1,h=0;const C=c?d:0,p=i.getProperty().getPiecewiseFunction(C);if(p){const S=p.getRange(),I=S[1]-S[0],D=.5*(S[0]+S[1]);m=l.scale/I,h=(l.shift-D)/I+.5}r.getProgram().setUniformf(`pwfshift${d}`,h),r.getProgram().setUniformf(`pwfscale${d}`,m)}if(e.haveSeenDepthRequest&&r.getProgram().setUniformi("depthRequest",e.renderDepth?1:0),r.getProgram().isUniformUsed("coffset")){const d=t.getCoincidentParameters(a,i);r.getProgram().setUniformf("coffset",d.offset),r.getProgram().isUniformUsed("cfactor")&&r.getProgram().setUniformf("cfactor",d.factor)}const u=e.colorTexture.getTextureUnit();r.getProgram().setUniformi("colorTexture1",u);const f=e.pwfTexture.getTextureUnit();r.getProgram().setUniformi("pwfTexture1",f);const v=e.labelOutlineThicknessTexture.getTextureUnit();if(r.getProgram().setUniformi("labelOutlineTexture1",v),e.renderable.getNumberOfClippingPlanes()){let d=e.renderable.getNumberOfClippingPlanes();d>6&&(Kn("OpenGL has a limit of 6 clipping planes"),d=6);const h=r.getCABO().getCoordShiftAndScaleEnabled()?r.getCABO().getInverseShiftAndScaleMatrix():null,C=h?fa(e.imagematinv,i.getMatrix()):i.getMatrix();h&&($n(C,C),Xn(C,C,h),$n(C,C)),$n(e.imagemat,e.currentInput.getIndexToWorld()),Xn(e.imagematinv,C,e.imagemat);const p=[];for(let S=0;S<d;S++){const I=[];e.renderable.getClippingPlaneInDataCoords(e.imagematinv,S,I);for(let D=0;D<4;D++)p.push(I[D])}r.getProgram().setUniformi("numClipPlanes",d),r.getProgram().setUniform4fv("clipPlanes",p)}if(i.getProperty().getUseLabelOutline()===!0){const d=i.getProperty().getLabelOutlineOpacity();r.getProgram().setUniformf("outlineOpacity",d)}},t.setCameraShaderParameters=(r,a,i)=>{const o=r.getProgram(),s=e.openGLImageSlice.getKeyMatrices(),c=e.currentInput,l=c.getIndexToWorld();Xn(e.imagemat,s.mcwc,l);const u=e.openGLCamera.getKeyMatrices(a);if(Xn(e.imagemat,u.wcpc,e.imagemat),r.getCABO().getCoordShiftAndScaleEnabled()){const v=r.getCABO().getInverseShiftAndScaleMatrix();Xn(e.imagemat,e.imagemat,v)}if(o.setUniformMatrix("MCPCMatrix",e.imagemat),i.getProperty().getUseLabelOutline()===!0){const v=c.getWorldToIndex(),g=c.getDimensions();o.setUniform3i("imageDimensions",g[0],g[1],1),o.setUniformMatrix("vWCtoIDX",v);const d=e.openGLCamera.getKeyMatrices(a);ba(e.projectionToWorld,d.wcpc),e.openGLCamera.getKeyMatrices(a),o.setUniformMatrix("PCWCMatrix",e.projectionToWorld);const m=t.getRenderTargetSize();o.setUniformf("vpWidth",m[0]),o.setUniformf("vpHeight",m[1]);const h=t.getRenderTargetOffset();o.setUniformf("vpOffsetX",h[0]/m[0]),o.setUniformf("vpOffsetY",h[1]/m[1])}},t.setPropertyShaderParameters=(r,a,i)=>{const o=r.getProgram(),c=i.getProperty().getOpacity();o.setUniformf("opacity",c)},t.renderPieceStart=(r,a)=>{t.updateBufferObjects(r,a),e.lastBoundBO=null},t.renderPieceDraw=(r,a)=>{const i=e.context;e.openGLTexture.activate(),e.colorTexture.activate(),e.labelOutlineThicknessTexture.activate(),e.pwfTexture.activate(),e.tris.getCABO().getElementCount()&&(t.updateShaders(e.tris,r,a),i.drawArrays(i.TRIANGLES,0,e.tris.getCABO().getElementCount()),e.tris.getVAO().release()),e.openGLTexture.deactivate(),e.colorTexture.deactivate(),e.labelOutlineThicknessTexture.deactivate(),e.pwfTexture.deactivate()},t.renderPieceFinish=(r,a)=>{},t.renderPiece=(r,a)=>{if(t.invokeEvent({type:"StartEvent"}),e.renderable.update(),e.currentInput=e.renderable.getCurrentImage(),t.invokeEvent({type:"EndEvent"}),!e.currentInput){nf("No input!");return}t.renderPieceStart(r,a),t.renderPieceDraw(r,a),t.renderPieceFinish(r,a)},t.computeBounds=(r,a)=>{if(!t.getInput()){Rv(e.bounds);return}e.bounds=t.getInput().getBounds()},t.updateBufferObjects=(r,a)=>{t.getNeedToRebuildBufferObjects(r,a)&&t.buildBufferObjects(r,a)},t.getNeedToRebuildBufferObjects=(r,a)=>{var i,o,s,c;return e.VBOBuildTime.getMTime()<t.getMTime()||e.VBOBuildTime.getMTime()<a.getMTime()||e.VBOBuildTime.getMTime()<e.renderable.getMTime()||e.VBOBuildTime.getMTime()<a.getProperty().getMTime()||e.VBOBuildTime.getMTime()<e.currentInput.getMTime()||!((i=e.openGLTexture)!=null&&i.getHandle())||!((o=e.colorTexture)!=null&&o.getHandle())||!((s=e.labelOutlineThicknessTexture)!=null&&s.getHandle())||!((c=e.pwfTexture)!=null&&c.getHandle())},t.buildBufferObjects=(r,a)=>{var w,x,P,R;const i=e.currentInput;if(!i)return;const o=i.getPointData()&&i.getPointData().getScalars();if(!o)return;const s=o.getDataType(),c=o.getNumberOfComponents(),l=a.getProperty(),u=l.getInterpolationType(),f=l.getIndependentComponents(),v=f?c:1,g=f?2*v:1,d=l.getRGBTransferFunction(),m=Y0(d,f,v),h=e._openGLRenderWindow.getGraphicsResourceForObject(d);if(!((w=h==null?void 0:h.oglObject)!=null&&w.getHandle())||(h==null?void 0:h.hash)!==m){e.colorTexture=oa.newInstance({resizable:!0}),e.colorTexture.setOpenGLRenderWindow(e._openGLRenderWindow);const L=1024,H=L*g*3,F=new Uint8ClampedArray(H);if(u===u1.NEAREST?(e.colorTexture.setMinificationFilter(en.NEAREST),e.colorTexture.setMagnificationFilter(en.NEAREST)):(e.colorTexture.setMinificationFilter(en.LINEAR),e.colorTexture.setMagnificationFilter(en.LINEAR)),d){const U=new Float32Array(L*3);for(let V=0;V<v;V++){const X=l.getRGBTransferFunction(V),re=X.getRange();if(X.getTable(re[0],re[1],L,U,1),f)for(let ue=0;ue<L*3;ue++)F[V*L*6+ue]=255*U[ue],F[V*L*6+ue+L*3]=255*U[ue];else for(let ue=0;ue<L*3;ue++)F[V*L*6+ue]=255*U[ue]}e.colorTexture.resetFormatAndType(),e.colorTexture.create2DFromRaw(L,g,3,Vn.UNSIGNED_CHAR,F)}else{for(let U=0;U<L*3;++U)F[U]=255*U/((L-1)*3),F[U+1]=255*U/((L-1)*3),F[U+2]=255*U/((L-1)*3);e.colorTexture.create2DFromRaw(L,1,3,Vn.UNSIGNED_CHAR,F)}d&&(e._openGLRenderWindow.setGraphicsResourceForObject(d,e.colorTexture,m),d!==e._colorTransferFunc&&(e._openGLRenderWindow.registerGraphicsResourceUser(d,t),e._openGLRenderWindow.unregisterGraphicsResourceUser(e._colorTransferFunc,t)),e._colorTransferFunc=d)}else e.colorTexture=h.oglObject;const p=l.getPiecewiseFunction(),S=Y0(p,f,v),I=e._openGLRenderWindow.getGraphicsResourceForObject(p);if(!((x=I==null?void 0:I.oglObject)!=null&&x.getHandle())||(I==null?void 0:I.hash)!==S){const H=1024*g,F=new Uint8ClampedArray(H);if(e.pwfTexture=oa.newInstance({resizable:!0}),e.pwfTexture.setOpenGLRenderWindow(e._openGLRenderWindow),u===u1.NEAREST?(e.pwfTexture.setMinificationFilter(en.NEAREST),e.pwfTexture.setMagnificationFilter(en.NEAREST)):(e.pwfTexture.setMinificationFilter(en.LINEAR),e.pwfTexture.setMagnificationFilter(en.LINEAR)),p){const U=new Float32Array(H),V=new Float32Array(1024);for(let X=0;X<v;++X){const re=l.getPiecewiseFunction(X);if(re===null)U.fill(1);else{const ue=re.getRange();if(re.getTable(ue[0],ue[1],1024,V,1),f)for(let De=0;De<1024;De++)U[X*1024*2+De]=V[De],U[X*1024*2+De+1024]=V[De];else for(let De=0;De<1024;De++)U[X*1024*2+De]=V[De]}}e.pwfTexture.resetFormatAndType(),e.pwfTexture.create2DFromRaw(1024,g,1,Vn.FLOAT,U)}else F.fill(255),e.pwfTexture.create2DFromRaw(1024,1,1,Vn.UNSIGNED_CHAR,F);p&&(e._openGLRenderWindow.setGraphicsResourceForObject(p,e.pwfTexture,S),p!==e._pwFunc&&(e._openGLRenderWindow.registerGraphicsResourceUser(p,t),e._openGLRenderWindow.unregisterGraphicsResourceUser(e._pwFunc,t)),e._pwFunc=p)}else e.pwfTexture=I.oglObject;t.updatelabelOutlineThicknessTexture(a);const{ijkMode:E}=e.renderable.getClosestIJKAxis();let T=e.renderable.getSlice();E!==e.renderable.getSlicingMode()&&(T=e.renderable.getSliceAtPosition(T));const y=e.renderable.isA("vtkImageArrayMapper")?e.renderable.getSubSlice():Math.round(T),M=i.getExtent();let _;E===$s.I&&(_=y-M[0]),E===$s.J&&(_=y-M[2]),(E===$s.K||E===$s.NONE)&&(_=y-M[4]);const O=`${T}A${i.getMTime()}A${o.getMTime()}B${t.getMTime()}C${e.renderable.getSlicingMode()}D${a.getProperty().getInterpolationType()}`;if(e.VBOBuildString!==O){const L=i.getDimensions();e.openGLTexture||(e.openGLTexture=oa.newInstance({resizable:!0})),e.openGLTexture.setOpenGLRenderWindow(e._openGLRenderWindow),e.openGLTexture.setOglNorm16Ext(e.context.getExtension("EXT_texture_norm16")),u===u1.NEAREST?(new Set([1,3,4]).has(c)&&s===Vn.UNSIGNED_CHAR&&!f&&e.openGLTexture.setGenerateMipmap(!0),e.openGLTexture.setMinificationFilter(en.NEAREST),e.openGLTexture.setMagnificationFilter(en.NEAREST)):(c===4&&s===Vn.UNSIGNED_CHAR&&!f?(e.openGLTexture.setGenerateMipmap(!0),e.openGLTexture.setMinificationFilter(en.LINEAR_MIPMAP_LINEAR)):e.openGLTexture.setMinificationFilter(en.LINEAR),e.openGLTexture.setMagnificationFilter(en.LINEAR)),e.openGLTexture.setWrapS(Zd.CLAMP_TO_EDGE),e.openGLTexture.setWrapT(Zd.CLAMP_TO_EDGE);const H=L[0]*L[1]*c,F=new Float32Array(12),U=new Float32Array(8);for(let Ne=0;Ne<4;Ne++)U[Ne*2]=Ne%2?1:0,U[Ne*2+1]=Ne>1?1:0;const V=[$s.X,$s.Y,$s.Z].includes(e.renderable.getSlicingMode())?T:y,X=i.getSpatialExtent(),re=o.getData();let ue=null;if(E===$s.I){ue=new re.constructor(L[2]*L[1]*c);let Ne=0;for(let Re=0;Re<L[2];Re++)for(let k=0;k<L[1];k++){let A=(_+k*L[0]+Re*L[0]*L[1])*c;Ne=(Re*L[1]+k)*c;const b=A+c;for(;A<b;)ue[Ne++]=re[A++]}L[0]=L[1],L[1]=L[2],F[0]=V,F[1]=X[2],F[2]=X[4],F[3]=V,F[4]=X[3],F[5]=X[4],F[6]=V,F[7]=X[2],F[8]=X[5],F[9]=V,F[10]=X[3],F[11]=X[5]}else if(E===$s.J){ue=new re.constructor(L[2]*L[0]*c);let Ne=0;for(let Re=0;Re<L[2];Re++)for(let k=0;k<L[0];k++){let A=(k+_*L[0]+Re*L[0]*L[1])*c;Ne=(Re*L[0]+k)*c;const b=A+c;for(;A<b;)ue[Ne++]=re[A++]}L[1]=L[2],F[0]=X[0],F[1]=V,F[2]=X[4],F[3]=X[1],F[4]=V,F[5]=X[4],F[6]=X[0],F[7]=V,F[8]=X[5],F[9]=X[1],F[10]=V,F[11]=X[5]}else E===$s.K||E===$s.NONE?(ue=re.subarray(_*H,(_+1)*H),F[0]=X[0],F[1]=X[2],F[2]=V,F[3]=X[1],F[4]=X[2],F[5]=V,F[6]=X[0],F[7]=X[3],F[8]=V,F[9]=X[1],F[10]=X[3],F[11]=V):nf("Reformat slicing not yet supported.");e.openGLTexture.resetFormatAndType(),e.openGLTexture.create2DFilterableFromRaw(L[0],L[1],c,o.getDataType(),ue,(R=(P=e.renderable).getPreferSizeOverAccuracy)==null?void 0:R.call(P)),e.openGLTexture.activate(),e.openGLTexture.sendParameters(),e.openGLTexture.deactivate();const De=fn.newInstance({numberOfComponents:3,values:F});De.setName("points");const pe=fn.newInstance({numberOfComponents:2,values:U});pe.setName("tcoords");const Te=new Uint16Array(8);Te[0]=3,Te[1]=0,Te[2]=1,Te[3]=3,Te[4]=3,Te[5]=0,Te[6]=3,Te[7]=2;const Fe=fn.newInstance({numberOfComponents:1,values:Te});e.tris.getCABO().createVBO(Fe,"polys",Fi.SURFACE,{points:De,tcoords:pe,cellOffset:0}),e.VBOBuildTime.modified(),e.VBOBuildString=O}},t.updatelabelOutlineThicknessTexture=r=>{var c;const a=r.getProperty().getLabelOutlineThickness(),i=e._openGLRenderWindow.getGraphicsResourceForObject(a),o=`${a.join("-")}`;if(!((c=i==null?void 0:i.oglObject)!=null&&c.getHandle())||(i==null?void 0:i.hash)!==o){const v=new Uint8Array(1024);for(let g=0;g<1024;++g){const d=typeof a[g]<"u"?a[g]:a[0];v[g]=d}e.labelOutlineThicknessTexture=oa.newInstance({resizable:!1}),e.labelOutlineThicknessTexture.setOpenGLRenderWindow(e._openGLRenderWindow),e.labelOutlineThicknessTexture.resetFormatAndType(),e.labelOutlineThicknessTexture.setMinificationFilter(en.NEAREST),e.labelOutlineThicknessTexture.setMagnificationFilter(en.NEAREST),e.labelOutlineThicknessTexture.create2DFromRaw(1024,1,1,Vn.UNSIGNED_CHAR,v),a&&(e._openGLRenderWindow.setGraphicsResourceForObject(a,e.labelOutlineThicknessTexture,o),a!==e._labelOutlineThicknessArray&&(e._openGLRenderWindow.registerGraphicsResourceUser(a,t),e._openGLRenderWindow.unregisterGraphicsResourceUser(e._labelOutlineThicknessArray,t)),e._labelOutlineThicknessArray=a)}else e.labelOutlineThicknessTexture=i.oglObject},t.getRenderTargetSize=()=>{if(e._useSmallViewport)return[e._smallViewportWidth,e._smallViewportHeight];const{usize:r,vsize:a}=e._openGLRenderer.getTiledSizeAndOrigin();return[r,a]},t.getRenderTargetOffset=()=>{const{lowerLeftU:r,lowerLeftV:a}=e._openGLRenderer.getTiledSizeAndOrigin();return[r,a]},t.delete=Ym(()=>{e._openGLRenderWindow&&n(e._openGLRenderWindow)},t.delete)}const yne={VBOBuildTime:0,VBOBuildString:null,openGLTexture:null,tris:null,imagemat:null,imagematinv:null,colorTexture:null,pwfTexture:null,labelOutlineThicknessTexture:null,labelOutlineThicknessTextureString:null,lastHaveSeenDepthRequest:!1,haveSeenDepthRequest:!1,lastTextureComponents:0};function FN(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,yne,n),Fr.extend(t,e,n),X0.implementReplaceShaderCoincidentOffset(t,e,n),X0.implementBuildShadersWithReplacements(t,e,n),e.tris=tc.newInstance(),e.imagemat=zt(new Float64Array(16)),e.imagematinv=zt(new Float64Array(16)),e.projectionToWorld=zt(new Float64Array(16)),e.idxToView=zt(new Float64Array(16)),e.idxNormalMatrix=Rs(new Float64Array(9)),e.modelToView=zt(new Float64Array(16)),e.projectionToView=zt(new Float64Array(16)),Wa(t,e,[]),e.VBOBuildTime={},Yr(e.VBOBuildTime),Tne(t,e)}const VN=dr(FN,"vtkOpenGLImageMapper");var Mne={newInstance:VN,extend:FN};Za("vtkAbstractImageMapper",VN);const Ru={MAX:0,MIN:1,AVERAGE:2},{vtkErrorMacro:fp}=J;function _ne(t,e){e.classHierarchy.push("vtkOpenGLImageCPRMapper");function n(r){[e._scalars,e._colorTransferFunc,e._pwFunc].forEach(a=>r.unregisterGraphicsResourceUser(a,t))}t.buildPass=r=>{if(r){e.currentRenderPass=null,e.openGLImageSlice=t.getFirstAncestorOfType("vtkOpenGLImageSlice"),e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer");const a=e._openGLRenderWindow;e._openGLRenderWindow=e._openGLRenderer.getLastAncestorOfType("vtkOpenGLRenderWindow"),a&&!a.isDeleted()&&a!==e._openGLRenderWindow&&n(a),e.context=e._openGLRenderWindow.getContext(),e.openGLCamera=e._openGLRenderer.getViewNodeFor(e._openGLRenderer.getRenderable().getActiveCamera()),e.tris.setOpenGLRenderWindow(e._openGLRenderWindow)}},t.opaquePass=(r,a)=>{r&&(e.currentRenderPass=a,t.render())},t.opaqueZBufferPass=r=>{r&&(e.haveSeenDepthRequest=!0,e.renderDepth=!0,t.render(),e.renderDepth=!1)},t.getCoincidentParameters=(r,a)=>e.renderable.getResolveCoincidentTopology()===f0.PolygonOffset?e.renderable.getCoincidentTopologyPolygonOffsetParameters():null,t.render=()=>{const r=e.openGLImageSlice.getRenderable(),a=e._openGLRenderer.getRenderable();t.renderPiece(a,r)},t.renderPiece=(r,a)=>{t.invokeEvent({type:"StartEvent"}),e.renderable.update(),t.invokeEvent({type:"EndEvent"}),e.renderable.preRenderCheck()&&(e.currentImageDataInput=e.renderable.getInputData(0),e.currentCenterlineInput=e.renderable.getOrientedCenterline(),t.renderPieceStart(r,a),t.renderPieceDraw(r,a),t.renderPieceFinish(r,a))},t.renderPieceStart=(r,a)=>{t.updateBufferObjects(r,a)},t.renderPieceDraw=(r,a)=>{const i=e.context;e.volumeTexture.activate(),e.colorTexture.activate(),e.pwfTexture.activate(),e.tris.getCABO().getElementCount()&&(t.updateShaders(e.tris,r,a),i.drawArrays(i.TRIANGLES,0,e.tris.getCABO().getElementCount()),e.tris.getVAO().release()),e.volumeTexture.deactivate(),e.colorTexture.deactivate(),e.pwfTexture.deactivate()},t.renderPieceFinish=(r,a)=>{},t.updateBufferObjects=(r,a)=>{t.getNeedToRebuildBufferObjects(r,a)&&t.buildBufferObjects(r,a),a.getProperty().getInterpolationType()===u1.NEAREST?(e.volumeTexture.setMinificationFilter(en.NEAREST),e.volumeTexture.setMagnificationFilter(en.NEAREST),e.colorTexture.setMinificationFilter(en.NEAREST),e.colorTexture.setMagnificationFilter(en.NEAREST),e.pwfTexture.setMinificationFilter(en.NEAREST),e.pwfTexture.setMagnificationFilter(en.NEAREST)):(e.volumeTexture.setMinificationFilter(en.LINEAR),e.volumeTexture.setMagnificationFilter(en.LINEAR),e.colorTexture.setMinificationFilter(en.LINEAR),e.colorTexture.setMagnificationFilter(en.LINEAR),e.pwfTexture.setMinificationFilter(en.LINEAR),e.pwfTexture.setMagnificationFilter(en.LINEAR))},t.getNeedToRebuildBufferObjects=(r,a)=>{var o;const i=e.VBOBuildTime.getMTime();return i<t.getMTime()||i<e.renderable.getMTime()||i<a.getMTime()||i<e.currentImageDataInput.getMTime()||i<e.currentCenterlineInput.getMTime()||!((o=e.volumeTexture)!=null&&o.getHandle())},t.buildBufferObjects=(r,a)=>{var y,M,_,O;const i=e.currentImageDataInput,o=e.currentCenterlineInput,s=(y=i==null?void 0:i.getPointData())==null?void 0:y.getScalars();if(!s)return;const c=e._openGLRenderWindow.getGraphicsResourceForObject(s),l=C5(i,s);if(!((M=c==null?void 0:c.oglObject)!=null&&M.getHandle())||(c==null?void 0:c.hash)!==l){e.volumeTexture=oa.newInstance(),e.volumeTexture.setOpenGLRenderWindow(e._openGLRenderWindow);const w=i.getDimensions();e.volumeTexture.setOglNorm16Ext(e.context.getExtension("EXT_texture_norm16")),e.volumeTexture.resetFormatAndType(),e.volumeTexture.create3DFilterableFromDataArray(w[0],w[1],w[2],s,e.renderable.getPreferSizeOverAccuracy()),e._openGLRenderWindow.setGraphicsResourceForObject(s,e.volumeTexture,l),s!==e._scalars&&(e._openGLRenderWindow.registerGraphicsResourceUser(s,t),e._openGLRenderWindow.unregisterGraphicsResourceUser(e._scalars,t)),e._scalars=s}else e.volumeTexture=c.oglObject;const f=s.getNumberOfComponents(),v=a.getProperty(),g=v.getIndependentComponents(),d=g?f:1,m=g?2*d:1,h=v.getRGBTransferFunction(),C=Y0(h,g,d),p=e._openGLRenderWindow.getGraphicsResourceForObject(h);if(!((_=p==null?void 0:p.oglObject)!=null&&_.getHandle())||(p==null?void 0:p.hash)!==C){const x=1024*m*3,P=new Uint8ClampedArray(x);if(e.colorTexture=oa.newInstance(),e.colorTexture.setOpenGLRenderWindow(e._openGLRenderWindow),h){const R=new Float32Array(3072);for(let L=0;L<d;L++){const H=v.getRGBTransferFunction(L),F=H.getRange();if(H.getTable(F[0],F[1],1024,R,1),g)for(let U=0;U<1024*3;U++)P[L*1024*6+U]=255*R[U],P[L*1024*6+U+1024*3]=255*R[U];else for(let U=0;U<1024*3;U++)P[L*1024*6+U]=255*R[U]}e.colorTexture.resetFormatAndType(),e.colorTexture.create2DFromRaw(1024,m,3,Vn.UNSIGNED_CHAR,P)}else{for(let R=0;R<1024*3;++R)P[R]=255*R/(1023*3),P[R+1]=255*R/(1023*3),P[R+2]=255*R/(1023*3);e.colorTexture.resetFormatAndType(),e.colorTexture.create2DFromRaw(1024,1,3,Vn.UNSIGNED_CHAR,P)}h&&(e._openGLRenderWindow.setGraphicsResourceForObject(h,e.colorTexture,C),h!==e._colorTransferFunc&&(e._openGLRenderWindow.registerGraphicsResourceUser(h,t),e._openGLRenderWindow.unregisterGraphicsResourceUser(e._colorTransferFunc,t)),e._colorTransferFunc=h)}else e.colorTexture=p.oglObject;const I=v.getPiecewiseFunction(),D=Y0(I,g,d),E=e._openGLRenderWindow.getGraphicsResourceForObject(I);if(!((O=E==null?void 0:E.oglObject)!=null&&O.getHandle())||(E==null?void 0:E.hash)!==D){const x=1024*m,P=new Uint8ClampedArray(x);if(e.pwfTexture=oa.newInstance(),e.pwfTexture.setOpenGLRenderWindow(e._openGLRenderWindow),I){const R=new Float32Array(x),L=new Float32Array(1024);for(let H=0;H<d;++H){const F=v.getPiecewiseFunction(H);if(F===null)R.fill(1);else{const U=F.getRange();if(F.getTable(U[0],U[1],1024,L,1),g)for(let V=0;V<1024;V++)R[H*1024*2+V]=L[V],R[H*1024*2+V+1024]=L[V];else for(let V=0;V<1024;V++)R[H*1024*2+V]=L[V]}}e.pwfTexture.resetFormatAndType(),e.pwfTexture.create2DFromRaw(1024,m,1,Vn.FLOAT,R)}else P.fill(255),e.pwfTexture.resetFormatAndType(),e.pwfTexture.create2DFromRaw(1024,1,1,Vn.UNSIGNED_CHAR,P);I&&(e._openGLRenderWindow.setGraphicsResourceForObject(I,e.pwfTexture,D),I!==e._pwFunc&&(e._openGLRenderWindow.registerGraphicsResourceUser(I,t),e._openGLRenderWindow.unregisterGraphicsResourceUser(e._pwFunc,t)),e._pwFunc=I)}else e.pwfTexture=E.oglObject;if(e.VBOBuildTime.getMTime()<e.renderable.getMTime()||e.VBOBuildTime.getMTime()<o.getMTime()){const w=o.getNumberOfPoints(),x=w<=1?0:w-1,P=o.getDistancesToFirstPoint(),R=e.renderable.getHeight(),L=4*x,H=new Float32Array(3*L),F=e.renderable.getWidth();for(let k=0,A=0;k<x;++k)H.set([0,R-P[k],0],A),A+=3,H.set([F,R-P[k],0],A),A+=3,H.set([F,R-P[k+1],0],A),A+=3,H.set([0,R-P[k+1],0],A),A+=3;const U=fn.newInstance({numberOfComponents:3,values:H});U.setName("points");const V=new Uint16Array(5*x);for(let k=0,A=0,b=0;k<x;++k)V.set([4,b+3,b+2,b+1,b],A),A+=5,b+=4;const X=fn.newInstance({numberOfComponents:1,values:V}),re=o.getPoints(),ue=new Float32Array(3*L),De=new Array(3),pe=new Array(3);for(let k=0,A=0;k<x;++k)re.getPoint(k,De),re.getPoint(k+1,pe),ue.set(De,A),A+=3,ue.set(De,A),A+=3,ue.set(pe,A),A+=3,ue.set(pe,A),A+=3;const Te=fn.newInstance({numberOfComponents:3,values:ue,name:"centerlinePosition"}),Fe=new Float32Array(L);for(let k=0,A=0;k<x;++k)Fe.set([0,1,3,2],A),A+=4;const Ne=fn.newInstance({numberOfComponents:1,values:Fe,name:"quadIndex"}),Re=[Te,Ne];if(!e.renderable.getUseUniformOrientation()){const k=e.renderable.getOrientedCenterline().getOrientations()??[],A=new Float32Array(4*L),b=new Float32Array(4*L);for(let j=0;j<x;++j){const K=k[j],ge=k[j+1];for(let ye=0;ye<4;++ye){const be=4*(ye+4*j);A.set(K,be),b.set(ge,be)}}const N=fn.newInstance({numberOfComponents:4,values:A,name:"centerlineTopOrientation"}),W=fn.newInstance({numberOfComponents:4,values:b,name:"centerlineBotOrientation"});Re.push(N,W)}e.tris.getCABO().createVBO(X,"polys",Fi.SURFACE,{points:U,customAttributes:Re}),e.VBOBuildTime.modified()}},t.getNeedToRebuildShaders=(r,a,i)=>{const o=e.volumeTexture.getComponents(),s=i.getProperty().getIndependentComponents(),c=!!e.renderable.getCenterPoint(),l=e.renderable.getUseUniformOrientation(),u=e.renderable.isProjectionEnabled()&&e.renderable.getProjectionMode();return r.getProgram()===0||e.lastUseCenterPoint!==c||e.lastUseUniformOrientation!==l||e.lastProjectionMode!==u||e.lastHaveSeenDepthRequest!==e.haveSeenDepthRequest||e.lastTextureComponents!==o||e.lastIndependentComponents!==s?(e.lastUseCenterPoint=c,e.lastUseUniformOrientation=l,e.lastProjectionMode=u,e.lastHaveSeenDepthRequest=e.haveSeenDepthRequest,e.lastTextureComponents=o,e.lastIndependentComponents=s,!0):!1},t.buildShaders=(r,a,i)=>{t.getShaderTemplate(r,a,i),t.replaceShaderValues(r,a,i)},t.replaceShaderValues=(r,a,i)=>{let o=r.Vertex,s=r.Fragment;const c=["vec3 applyQuaternionToVec(vec4 q, vec3 v) {","  float uvx = q.y * v.z - q.z * v.y;","  float uvy = q.z * v.x - q.x * v.z;","  float uvz = q.x * v.y - q.y * v.x;","  float uuvx = q.y * uvz - q.z * uvy;","  float uuvy = q.z * uvx - q.x * uvz;","  float uuvz = q.x * uvy - q.y * uvx;","  float w2 = q.w * 2.0;","  uvx *= w2;","  uvy *= w2;","  uvz *= w2;","  uuvx *= 2.0;","  uuvy *= 2.0;","  uuvz *= 2.0;","  return vec3(v.x + uvx + uuvx, v.y + uvy + uuvy, v.z + uvz + uuvz);","}"];o=Ve.substitute(o,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;"]).result,o=Ve.substitute(o,"//VTK::PositionVC::Impl",["  gl_Position = MCPCMatrix * vertexMC;"]).result;const l=["attribute vec3 centerlinePosition;","attribute float quadIndex;","uniform float width;","out vec2 quadOffsetVSOutput;","out vec3 centerlinePosVSOutput;"],u=e.renderable.isProjectionEnabled(),f=e.renderable.getUseUniformOrientation();f?(l.push("out vec3 samplingDirVSOutput;","uniform vec4 centerlineOrientation;","uniform vec3 tangentDirection;",...c),u&&l.push("out vec3 projectionDirVSOutput;","uniform vec3 bitangentDirection;")):l.push("out vec4 centerlineTopOrientationVSOutput;","out vec4 centerlineBotOrientationVSOutput;","attribute vec4 centerlineTopOrientation;","attribute vec4 centerlineBotOrientation;"),o=Ve.substitute(o,"//VTK::Color::Dec",l).result;const v=["quadOffsetVSOutput = vec2(width * (mod(quadIndex, 2.0) == 0.0 ? -0.5 : 0.5), quadIndex > 1.0 ? 0.0 : 1.0);","centerlinePosVSOutput = centerlinePosition;"];f?(v.push("samplingDirVSOutput = applyQuaternionToVec(centerlineOrientation, tangentDirection);"),u&&v.push("projectionDirVSOutput = applyQuaternionToVec(centerlineOrientation, bitangentDirection);")):v.push("centerlineTopOrientationVSOutput = centerlineTopOrientation;","centerlineBotOrientationVSOutput = centerlineBotOrientation;"),o=Ve.substitute(o,"//VTK::Color::Impl",v).result;const g=e.volumeTexture.getComponents(),d=i.getProperty().getIndependentComponents();let m=["uniform mat4 MCTCMatrix; // Model coordinates to texture coordinates","in vec2 quadOffsetVSOutput;","in vec3 centerlinePosVSOutput;","uniform highp sampler3D volumeTexture;","uniform sampler2D colorTexture1;","uniform sampler2D pwfTexture1;","uniform float opacity;","uniform vec4 backgroundColor;","uniform float cshift0;","uniform float cscale0;","uniform float pwfshift0;","uniform float pwfscale0;"];u&&m.push("uniform vec3 volumeSizeMC;","uniform int projectionSlabNumberOfSamples;","uniform float projectionConstantOffset;","uniform float projectionStepLength;"),f?(m.push("in vec3 samplingDirVSOutput;"),u&&m.push("in vec3 projectionDirVSOutput;")):(m.push("uniform vec3 tangentDirection;","in vec4 centerlineTopOrientationVSOutput;","in vec4 centerlineBotOrientationVSOutput;",...c),u&&m.push("uniform vec3 bitangentDirection;"));const h=e.renderable.getCenterPoint();if(h&&m.push("uniform vec3 globalCenterPoint;"),d){for(let p=1;p<g;p++)m=m.concat([`uniform float cshift${p};`,`uniform float cscale${p};`,`uniform float pwfshift${p};`,`uniform float pwfscale${p};`]);switch(g){case 1:m=m.concat(["uniform float mix0;","#define height0 0.5"]);break;case 2:m=m.concat(["uniform float mix0;","uniform float mix1;","#define height0 0.25","#define height1 0.75"]);break;case 3:m=m.concat(["uniform float mix0;","uniform float mix1;","uniform float mix2;","#define height0 0.17","#define height1 0.5","#define height2 0.83"]);break;case 4:m=m.concat(["uniform float mix0;","uniform float mix1;","uniform float mix2;","uniform float mix3;","#define height0 0.125","#define height1 0.375","#define height2 0.625","#define height3 0.875"]);break;default:fp("Unsupported number of independent coordinates.")}}s=Ve.substitute(s,"//VTK::TCoord::Dec",m).result;let C=[];if(f?(C.push("vec3 samplingDirection = samplingDirVSOutput;"),u&&C.push("vec3 projectionDirection = projectionDirVSOutput;")):(C.push("vec4 q0 = centerlineBotOrientationVSOutput;","vec4 q1 = centerlineTopOrientationVSOutput;","float qCosAngle = dot(q0, q1);","vec4 interpolatedOrientation;","if (qCosAngle > 0.999 || qCosAngle < -0.999) {","  // Use LERP instead of SLERP when the two quaternions are close or opposite","  interpolatedOrientation = normalize(mix(q0, q1, quadOffsetVSOutput.y));","} else {","  float omega = acos(qCosAngle);","  interpolatedOrientation = normalize(sin((1.0 - quadOffsetVSOutput.y) * omega) * q0 + sin(quadOffsetVSOutput.y * omega) * q1);","}","vec3 samplingDirection = applyQuaternionToVec(interpolatedOrientation, tangentDirection);"),u&&C.push("vec3 projectionDirection = applyQuaternionToVec(interpolatedOrientation, bitangentDirection);")),h?C.push("float baseOffset = dot(samplingDirection, globalCenterPoint - centerlinePosVSOutput);","float horizontalOffset = quadOffsetVSOutput.x + baseOffset;"):C.push("float horizontalOffset = quadOffsetVSOutput.x;"),C.push("vec3 volumePosMC = centerlinePosVSOutput + horizontalOffset * samplingDirection;","vec3 volumePosTC = (MCTCMatrix * vec4(volumePosMC, 1.0)).xyz;","if (any(lessThan(volumePosTC, vec3(0.0))) || any(greaterThan(volumePosTC, vec3(1.0))))","{","  // set the background color and exit","  gl_FragData[0] = backgroundColor;","  return;","}"),u){const p=e.renderable.getProjectionMode();switch(p){case Ru.MIN:C.push("const vec4 initialProjectionTextureValue = vec4(1.0);");break;case Ru.MAX:case Ru.AVERAGE:default:C.push("const vec4 initialProjectionTextureValue = vec4(0.0);");break}switch(C.push("vec3 projectionScaledDirection = projectionDirection / volumeSizeMC;","vec3 projectionStep = projectionStepLength * projectionScaledDirection;","vec3 projectionStartPosition = volumePosTC + projectionConstantOffset * projectionScaledDirection;","vec4 tvalue = initialProjectionTextureValue;","for (int projectionSampleIdx = 0; projectionSampleIdx < projectionSlabNumberOfSamples; ++projectionSampleIdx) {","  vec3 projectionSamplePosition = projectionStartPosition + float(projectionSampleIdx) * projectionStep;","  vec4 sampledTextureValue = texture(volumeTexture, projectionSamplePosition);"),p){case Ru.MAX:C.push("  tvalue = max(tvalue, sampledTextureValue);");break;case Ru.MIN:C.push("  tvalue = min(tvalue, sampledTextureValue);");break;case Ru.AVERAGE:default:C.push("  tvalue = tvalue + sampledTextureValue;");break}C.push("}"),p===Ru.AVERAGE&&C.push("tvalue = tvalue / float(projectionSlabNumberOfSamples);")}else C.push("vec4 tvalue = texture(volumeTexture, volumePosTC);");if(d){const p=["r","g","b","a"];for(let S=0;S<g;++S)C=C.concat([`vec3 tcolor${S} = mix${S} * texture2D(colorTexture1, vec2(tvalue.${p[S]} * cscale${S} + cshift${S}, height${S})).rgb;`,`float compWeight${S} = mix${S} * texture2D(pwfTexture1, vec2(tvalue.${p[S]} * pwfscale${S} + pwfshift${S}, height${S})).r;`]);switch(g){case 1:C=C.concat(["gl_FragData[0] = vec4(tcolor0.rgb, compWeight0 * opacity);"]);break;case 2:C=C.concat(["float weightSum = compWeight0 + compWeight1;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum))), opacity);"]);break;case 3:C=C.concat(["float weightSum = compWeight0 + compWeight1 + compWeight2;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum)) + (tcolor2.rgb * (compWeight2 / weightSum))), opacity);"]);break;case 4:C=C.concat(["float weightSum = compWeight0 + compWeight1 + compWeight2 + compWeight3;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum)) + (tcolor2.rgb * (compWeight2 / weightSum)) + (tcolor3.rgb * (compWeight3 / weightSum))), opacity);"]);break;default:fp("Unsupported number of independent coordinates.")}}else switch(g){case 1:C=C.concat(["// Dependent components","float intensity = tvalue.r;","vec3 tcolor = texture2D(colorTexture1, vec2(intensity * cscale0 + cshift0, 0.5)).rgb;","float scalarOpacity = texture2D(pwfTexture1, vec2(intensity * pwfscale0 + pwfshift0, 0.5)).r;","gl_FragData[0] = vec4(tcolor, scalarOpacity * opacity);"]);break;case 2:C=C.concat(["float intensity = tvalue.r*cscale0 + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(intensity, 0.5)).rgb, pwfscale0*tvalue.g + pwfshift0);"]);break;case 3:C=C.concat(["vec4 tcolor = cscale0*tvalue + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(tcolor.r,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.g,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.b,0.5)).r, opacity);"]);break;default:C=C.concat(["vec4 tcolor = cscale0*tvalue + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(tcolor.r,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.g,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.b,0.5)).r, tcolor.a);"])}s=Ve.substitute(s,"//VTK::TCoord::Impl",C).result,e.haveSeenDepthRequest&&(s=Ve.substitute(s,"//VTK::ZBuffer::Dec","uniform int depthRequest;").result,s=Ve.substitute(s,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float iz = floor(gl_FragCoord.z*65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result),r.Vertex=o,r.Fragment=s,t.replaceShaderClip(r,a,i),t.replaceShaderCoincidentOffset(r,a,i)},t.replaceShaderClip=(r,a,i)=>{let o=r.Vertex,s=r.Fragment;if(e.renderable.getNumberOfClippingPlanes()){let c=e.renderable.getNumberOfClippingPlanes();c>6&&(J.vtkErrorMacro("OpenGL has a limit of 6 clipping planes"),c=6),o=Ve.substitute(o,"//VTK::Clip::Dec",["uniform int numClipPlanes;","uniform vec4 clipPlanes[6];","varying float clipDistancesVSOutput[6];"]).result,o=Ve.substitute(o,"//VTK::Clip::Impl",["for (int planeNum = 0; planeNum < 6; planeNum++)","    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    clipDistancesVSOutput[planeNum] = dot(clipPlanes[planeNum], vertexMC);","    }"]).result,s=Ve.substitute(s,"//VTK::Clip::Dec",["uniform int numClipPlanes;","varying float clipDistancesVSOutput[6];"]).result,s=Ve.substitute(s,"//VTK::Clip::Impl",["for (int planeNum = 0; planeNum < 6; planeNum++)","    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    if (clipDistancesVSOutput[planeNum] < 0.0) discard;","    }"]).result}r.Vertex=o,r.Fragment=s},t.getShaderTemplate=(r,a,i)=>{r.Vertex=S5,r.Fragment=rh,r.Geometry=""},t.setMapperShaderParameters=(r,a,i)=>{const o=r.getProgram(),s=r.getCABO();s.getElementCount()&&(e.VBOBuildTime.getMTime()>r.getAttributeUpdateTime().getMTime()||r.getShaderSourceTime().getMTime()>r.getAttributeUpdateTime().getMTime())&&(o.isAttributeUsed("vertexMC")&&(r.getVAO().addAttributeArray(o,s,"vertexMC",s.getVertexOffset(),s.getStride(),e.context.FLOAT,3,e.context.FALSE)||fp("Error setting vertexMC in shader VAO.")),r.getCABO().getCustomData().forEach(g=>{g&&o.isAttributeUsed(g.name)&&!r.getVAO().addAttributeArray(o,s,g.name,g.offset,s.getStride(),e.context.FLOAT,g.components,e.context.FALSE)&&fp(`Error setting ${g.name} in shader VAO.`)}),r.getAttributeUpdateTime().modified());const c=e.volumeTexture.getTextureUnit();if(o.setUniformi("volumeTexture",c),o.setUniformf("width",e.renderable.getWidth()),r.getProgram().setUniform4fv("backgroundColor",e.renderable.getBackgroundColor()),o.isUniformUsed("tangentDirection")){const g=e.renderable.getTangentDirection();r.getProgram().setUniform3fArray("tangentDirection",g)}if(o.isUniformUsed("bitangentDirection")){const g=e.renderable.getBitangentDirection();r.getProgram().setUniform3fArray("bitangentDirection",g)}if(o.isUniformUsed("centerlineOrientation")){const g=e.renderable.getUniformOrientation();r.getProgram().setUniform4fv("centerlineOrientation",g)}if(o.isUniformUsed("globalCenterPoint")){const g=e.renderable.getCenterPoint();o.setUniform3fArray("globalCenterPoint",g)}if(e.renderable.isProjectionEnabled()){const g=e.currentImageDataInput,d=g.getSpacing(),m=g.getDimensions(),h=e.renderable.getProjectionSlabThickness(),C=e.renderable.getProjectionSlabNumberOfSamples(),p=f7([],d,m);o.setUniform3fArray("volumeSizeMC",p),o.setUniformi("projectionSlabNumberOfSamples",C);const S=-.5*h;o.setUniformf("projectionConstantOffset",S);const I=h/(C-1);o.setUniformf("projectionStepLength",I)}const l=e.currentImageDataInput,u=l.getWorldToIndex(),f=YM(new Float32Array(16),u7([],l.getDimensions())),v=yS(f,f,u);if(o.setUniformMatrix("MCTCMatrix",v),e.haveSeenDepthRequest&&r.getProgram().setUniformi("depthRequest",e.renderDepth?1:0),e.renderable.getNumberOfClippingPlanes()){let g=e.renderable.getNumberOfClippingPlanes();g>6&&(J.vtkErrorMacro("OpenGL has a limit of 6 clipping planes"),g=6);const m=s.getCoordShiftAndScaleEnabled()?s.getInverseShiftAndScaleMatrix():null,h=m?fa(e.imagematinv,i.getMatrix()):i.getMatrix();m&&($n(h,h),Xn(h,h,m),$n(h,h)),$n(e.imagemat,e.currentImageDataInput.getIndexToWorld()),Xn(e.imagematinv,h,e.imagemat);const C=[];for(let p=0;p<g;p++){const S=[];e.renderable.getClippingPlaneInDataCoords(e.imagematinv,p,S);for(let I=0;I<4;I++)C.push(S[I])}o.setUniformi("numClipPlanes",g),o.setUniform4fv("clipPlanes",C)}if(o.isUniformUsed("coffset")){const g=t.getCoincidentParameters(a,i);o.setUniformf("coffset",g.offset),o.isUniformUsed("cfactor")&&o.setUniformf("cfactor",g.factor)}},t.setCameraShaderParameters=(r,a,i)=>{const o=e.openGLImageSlice.getKeyMatrices().mcwc,s=e.openGLCamera.getKeyMatrices(a).wcpc;if(Xn(e.imagemat,s,o),r.getCABO().getCoordShiftAndScaleEnabled()){const c=r.getCABO().getInverseShiftAndScaleMatrix();Xn(e.imagemat,e.imagemat,c)}r.getProgram().setUniformMatrix("MCPCMatrix",e.imagemat)},t.setPropertyShaderParameters=(r,a,i)=>{const o=r.getProgram(),s=i.getProperty(),c=s.getOpacity();o.setUniformf("opacity",c);const l=e.volumeTexture.getComponents(),u=s.getIndependentComponents();if(u)for(let d=0;d<l;++d)o.setUniformf(`mix${d}`,s.getComponentWeight(d));const f=e.volumeTexture.getVolumeInfo();for(let d=0;d<l;d++){let m=s.getColorWindow(),h=s.getColorLevel();const C=u?d:0,p=s.getRGBTransferFunction(C);if(p&&s.getUseLookupTableScalarRange()){const D=p.getRange();m=D[1]-D[0],h=.5*(D[1]+D[0])}const S=f.scale[d]/m,I=(f.offset[d]-h)/m+.5;o.setUniformf(`cshift${d}`,I),o.setUniformf(`cscale${d}`,S)}const v=e.colorTexture.getTextureUnit();o.setUniformi("colorTexture1",v);for(let d=0;d<l;d++){let m=1,h=0;const C=u?d:0,p=s.getPiecewiseFunction(C);if(p){const S=p.getRange(),I=S[1]-S[0],D=.5*(S[0]+S[1]);m=f.scale[d]/I,h=(f.offset[d]-D)/I+.5}o.setUniformf(`pwfshift${d}`,h),o.setUniformf(`pwfscale${d}`,m)}const g=e.pwfTexture.getTextureUnit();o.setUniformi("pwfTexture1",g)},t.updateShaders=(r,a,i)=>{if(t.getNeedToRebuildShaders(r,a,i)){const o={Vertex:null,Fragment:null,Geometry:null};t.buildShaders(o,a,i);const s=e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(o.Vertex,o.Fragment,o.Geometry);s!==r.getProgram()&&(r.setProgram(s),r.getVAO().releaseGraphicsResources()),r.getShaderSourceTime().modified()}else e._openGLRenderWindow.getShaderCache().readyShaderProgram(r.getProgram());r.getVAO().bind(),t.setMapperShaderParameters(r,a,i),t.setCameraShaderParameters(r,a,i),t.setPropertyShaderParameters(r,a,i)},t.delete=J.chain(()=>{e._openGLRenderWindow&&n(e._openGLRenderWindow)},t.delete)}const One={currentRenderPass:null,volumeTexture:null,colorTexture:null,pwfTexture:null,tris:null,lastHaveSeenDepthRequest:!1,haveSeenDepthRequest:!1,lastTextureComponents:0,lastIndependentComponents:0,imagemat:null,imagematinv:null};function kN(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,One,n),Fr.extend(t,e,n),X0.implementReplaceShaderCoincidentOffset(t,e,n),J.algo(t,e,2,0),e.tris=tc.newInstance(),e.volumeTexture=null,e.colorTexture=null,e.pwfTexture=null,e.imagemat=zt(new Float64Array(16)),e.imagematinv=zt(new Float64Array(16)),e.VBOBuildTime={},J.obj(e.VBOBuildTime,{mtime:0}),_ne(t,e)}const GN=J.newInstance(kN,"vtkOpenGLImageCPRMapper"),wne={};var Pne={newInstance:GN,extend:kN,...wne};Za("vtkImageCPRMapper",GN);function Ane(t,e){e.classHierarchy.push("vtkOpenGLImageSlice"),t.buildPass=n=>{if(!(!e.renderable||!e.renderable.getVisibility())&&n){if(!e.renderable)return;e._openGLRenderWindow=t.getLastAncestorOfType("vtkOpenGLRenderWindow"),e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e.context=e._openGLRenderWindow.getContext(),t.prepareNodes(),t.addMissingNode(e.renderable.getMapper()),t.removeUnusedNodes()}},t.traverseZBufferPass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.children.forEach(r=>{r.traverse(n)}),t.apply(n,!1))},t.traverseOpaqueZBufferPass=n=>t.traverseOpaquePass(n),t.traverseOpaquePass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||!e.renderable.getIsOpaque()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.children.forEach(r=>{r.traverse(n)}),t.apply(n,!1))},t.traverseTranslucentPass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||e.renderable.getIsOpaque()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.children.forEach(r=>{r.traverse(n)}),t.apply(n,!1))},t.queryPass=(n,r)=>{if(n){if(!e.renderable||!e.renderable.getVisibility())return;e.renderable.getIsOpaque()?r.incrementOpaqueActorCount():r.incrementTranslucentActorCount()}},t.zBufferPass=(n,r)=>t.opaquePass(n,r),t.opaqueZBufferPass=(n,r)=>t.opaquePass(n,r),t.opaquePass=(n,r)=>{n&&e.context.depthMask(!0)},t.translucentPass=(n,r)=>{e.context.depthMask(!n)},t.getKeyMatrices=()=>(e.renderable.getMTime()>e.keyMatrixTime.getMTime()&&(fa(e.keyMatrices.mcwc,e.renderable.getMatrix()),$n(e.keyMatrices.mcwc,e.keyMatrices.mcwc),e.keyMatrixTime.modified()),e.keyMatrices)}const xne={context:null,keyMatrixTime:null,keyMatrices:null};function BN(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,xne,n),Fr.extend(t,e,n),e.keyMatrixTime={},Yr(e.keyMatrixTime,{mtime:0}),e.keyMatrices={mcwc:zt(new Float64Array(16))},Wa(t,e,["context"]),Ane(t,e)}const WN=dr(BN,"vtkOpenGLImageSlice");var Rne={newInstance:WN,extend:BN};Za("vtkImageSlice",WN);const{vtkDebugMacro:bne}=Bi;function Nne(t,e){e.classHierarchy.push("vtkOpenGLPixelSpaceCallbackMapper"),t.opaquePass=(n,r)=>{e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getLastAncestorOfType("vtkOpenGLRenderWindow");const a=e._openGLRenderer.getAspectRatio(),i=e._openGLRenderer?e._openGLRenderer.getRenderable().getActiveCamera():null,o=e._openGLRenderer.getTiledSizeAndOrigin();let s=null;if(e.renderable.getUseZValues()){const c=r.getZBufferTexture(),l=Math.floor(c.getWidth()),u=Math.floor(c.getHeight()),f=e._openGLRenderWindow.getContext();c.bind();const v=r.getFramebuffer();v?v.saveCurrentBindingsAndBuffers():bne("No framebuffer to save/restore");const g=f.createFramebuffer();f.bindFramebuffer(f.FRAMEBUFFER,g),f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,c.getHandle(),0),f.checkFramebufferStatus(f.FRAMEBUFFER)===f.FRAMEBUFFER_COMPLETE&&(s=new Uint8Array(l*u*4),f.viewport(0,0,l,u),f.readPixels(0,0,l,u,f.RGBA,f.UNSIGNED_BYTE,s)),v&&v.restorePreviousBindingsAndBuffers(),f.deleteFramebuffer(g)}e.renderable.invokeCallback(e.renderable.getInputData(),i,a,o,s)},t.queryPass=(n,r)=>{n&&e.renderable.getUseZValues()&&r.requestDepth()}}const Lne={};function HN(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Lne,n),Fr.extend(t,e,n),Nne(t,e)}const $N=dr(HN,"vtkOpenGLPixelSpaceCallbackMapper");var Une={newInstance:$N,extend:HN};Za("vtkPixelSpaceCallbackMapper",$N);const{vtkDebugMacro:Fne}=Bi;function Vne(t,e){e.classHierarchy.push("vtkOpenGLRenderer"),t.buildPass=n=>{if(n){if(!e.renderable)return;t.updateLights(),t.prepareNodes(),t.addMissingNode(e.renderable.getActiveCamera()),t.addMissingNodes(e.renderable.getViewPropsWithNestedProps()),t.removeUnusedNodes()}},t.updateLights=()=>{let n=0;const r=e.renderable.getLightsByReference();for(let a=0;a<r.length;++a)r[a].getSwitch()>0&&n++;return n||(Fne("No lights are on, creating one."),e.renderable.createLight()),n},t.zBufferPass=n=>{if(n){let r=0;const a=e.context;e.renderable.getTransparent()||(e.context.clearColor(1,0,0,1),r|=a.COLOR_BUFFER_BIT),e.renderable.getPreserveDepthBuffer()||(a.clearDepth(1),r|=a.DEPTH_BUFFER_BIT,e.context.depthMask(!0));const i=t.getTiledSizeAndOrigin();a.enable(a.SCISSOR_TEST),a.scissor(i.lowerLeftU,i.lowerLeftV,i.usize,i.vsize),a.viewport(i.lowerLeftU,i.lowerLeftV,i.usize,i.vsize),a.colorMask(!0,!0,!0,!0),r&&a.clear(r),a.enable(a.DEPTH_TEST)}},t.opaqueZBufferPass=n=>t.zBufferPass(n),t.cameraPass=n=>{n&&t.clear()},t.getAspectRatio=()=>{const n=e._parent.getSizeByReference(),r=e.renderable.getViewportByReference();return n[0]*(r[2]-r[0])/((r[3]-r[1])*n[1])},t.getTiledSizeAndOrigin=()=>{const n=e.renderable.getViewportByReference(),r=[0,0,1,1],a=n[0]-r[0],i=n[1]-r[1],o=e._parent.normalizedDisplayToDisplay(a,i),s=Math.round(o[0]),c=Math.round(o[1]),l=n[2]-r[0],u=n[3]-r[1],f=e._parent.normalizedDisplayToDisplay(l,u);let v=Math.round(f[0])-s,g=Math.round(f[1])-c;return v<0&&(v=0),g<0&&(g=0),{usize:v,vsize:g,lowerLeftU:s,lowerLeftV:c}},t.clear=()=>{let n=0;const r=e.context;if(!e.renderable.getTransparent()){const i=e.renderable.getBackgroundByReference();r.clearColor(i[0],i[1],i[2],i[3]),n|=r.COLOR_BUFFER_BIT}e.renderable.getPreserveDepthBuffer()||(r.clearDepth(1),n|=r.DEPTH_BUFFER_BIT,r.depthMask(!0)),r.colorMask(!0,!0,!0,!0);const a=t.getTiledSizeAndOrigin();r.enable(r.SCISSOR_TEST),r.scissor(a.lowerLeftU,a.lowerLeftV,a.usize,a.vsize),r.viewport(a.lowerLeftU,a.lowerLeftV,a.usize,a.vsize),n&&r.clear(n),r.enable(r.DEPTH_TEST)},t.releaseGraphicsResources=()=>{e.selector!==null&&e.selector.releaseGraphicsResources(),e.renderable&&e.renderable.getViewProps().forEach(n=>{n.modified()})},t.setOpenGLRenderWindow=n=>{e._openGLRenderWindow!==n&&(t.releaseGraphicsResources(),e._openGLRenderWindow=n,e.context=null,n&&(e.context=e._openGLRenderWindow.getContext()))}}const kne={context:null,_openGLRenderWindow:null,selector:null};function zN(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,kne,n),Fr.extend(t,e,n),_o(t,e,["shaderCache"]),Wa(t,e,["selector"]),Xm(t,e,["openGLRenderWindow"]),Vne(t,e)}const qN=dr(zN,"vtkOpenGLRenderer");var Gne={newInstance:qN,extend:zN};Za("vtkRenderer",qN);const{vtkErrorMacro:J8}=Bi;function Bne(t,e){e.classHierarchy.push("vtkOpenGLSkybox"),t.buildPass=n=>{if(n){e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.context=e._openGLRenderWindow.getContext(),e.tris.setOpenGLRenderWindow(e._openGLRenderWindow),e.openGLTexture.setOpenGLRenderWindow(e._openGLRenderWindow);const r=e._openGLRenderer.getRenderable();e.openGLCamera=e._openGLRenderer.getViewNodeFor(r.getActiveCamera())}},t.queryPass=(n,r)=>{if(n){if(!e.renderable||!e.renderable.getVisibility())return;r.incrementOpaqueActorCount()}},t.opaquePass=(n,r)=>{if(n&&!e._openGLRenderer.getSelector()){t.updateBufferObjects(),e.context.depthMask(!0),e._openGLRenderWindow.getShaderCache().readyShaderProgram(e.tris.getProgram()),e.openGLTexture.render(e._openGLRenderWindow);const a=e.openGLTexture.getTextureUnit();e.tris.getProgram().setUniformi("sbtexture",a);const i=e._openGLRenderer.getRenderable(),o=e.openGLCamera.getKeyMatrices(i),s=new Float64Array(16);if(ba(s,o.wcpc),e.tris.getProgram().setUniformMatrix("IMCPCMatrix",s),e.lastFormat==="box"){const c=i.getActiveCamera().getPosition();e.tris.getProgram().setUniform3f("camPos",c[0],c[1],c[2])}e.tris.getVAO().bind(),e.context.drawArrays(e.context.TRIANGLES,0,e.tris.getCABO().getElementCount()),e.tris.getVAO().release(),e.openGLTexture.deactivate()}},t.updateBufferObjects=()=>{if(!e.tris.getCABO().getElementCount()){const r=new Float32Array(12);for(let s=0;s<4;s++)r[s*3]=s%2*2-1,r[s*3+1]=s>1?1:-1,r[s*3+2]=1;const a=fn.newInstance({numberOfComponents:3,values:r});a.setName("points");const i=new Uint16Array(8);i[0]=3,i[1]=0,i[2]=1,i[3]=3,i[4]=3,i[5]=0,i[6]=3,i[7]=2;const o=fn.newInstance({numberOfComponents:1,values:i});e.tris.getCABO().createVBO(o,"polys",Fi.SURFACE,{points:a,cellOffset:0})}e.renderable.getFormat()!==e.lastFormat&&(e.lastFormat=e.renderable.getFormat(),e.lastFormat==="box"&&e.tris.setProgram(e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(`//VTK::System::Dec
             attribute vec3 vertexMC;
             uniform mat4 IMCPCMatrix;
             varying vec3 TexCoords;
             void main () {
              gl_Position = vec4(vertexMC.xyz, 1.0);
              vec4 wpos = IMCPCMatrix * gl_Position;
              TexCoords = wpos.xyz/wpos.w;
             }`,`//VTK::System::Dec
             //VTK::Output::Dec
             varying vec3 TexCoords;
             uniform samplerCube sbtexture;
             uniform vec3 camPos;
             void main () {
               // skybox looks from inside out
               // which means we have to adjust
               // our tcoords. Otherwise text would
               // be flipped
               vec3 tc = normalize(TexCoords - camPos);
               if (abs(tc.z) < max(abs(tc.x),abs(tc.y)))
               {
                 tc = vec3(1.0, 1.0, -1.0) * tc;
               }
               else
               {
                 tc = vec3(-1.0, 1.0, 1.0) * tc;
               }
               gl_FragData[0] = textureCube(sbtexture, tc);
             }`,"")),e.lastFormat==="background"&&e.tris.setProgram(e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(`//VTK::System::Dec
             attribute vec3 vertexMC;
             uniform mat4 IMCPCMatrix;
             varying vec2 TexCoords;
             void main () {
              gl_Position = vec4(vertexMC.xyz, 1.0);
              vec4 wpos = IMCPCMatrix * gl_Position;
              TexCoords = vec2(vertexMC.x, vertexMC.y)*0.5 + 0.5;
             }`,`//VTK::System::Dec
             //VTK::Output::Dec
             varying vec2 TexCoords;
             uniform sampler2D sbtexture;
             void main () {
               gl_FragData[0] = texture2D(sbtexture, TexCoords);
             }`,"")),e.tris.getShaderSourceTime().modified(),e.tris.getVAO().bind(),e.tris.getVAO().addAttributeArray(e.tris.getProgram(),e.tris.getCABO(),"vertexMC",e.tris.getCABO().getVertexOffset(),e.tris.getCABO().getStride(),e.context.FLOAT,3,e.context.FALSE)||J8("Error setting vertexMC in shader VAO."));const n=e.renderable.getTextures();n.length||J8("vtkSkybox requires a texture map"),e.openGLTexture.getRenderable()!==n[0]&&(e.openGLTexture.releaseGraphicsResources(e._openGLRenderWindow),e.openGLTexture.setRenderable(n[0]))}}const Wne={context:null};function jN(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Wne,n),Fr.extend(t,e,n),e.openGLTexture=oa.newInstance(),e.tris=tc.newInstance(),e.keyMatrixTime={},Yr(e.keyMatrixTime,{mtime:0}),e.keyMatrices={normalMatrix:Rs(new Float64Array(9)),mcwc:zt(new Float64Array(16))},Wa(t,e,["context"]),_o(t,e,["activeTextures"]),Bne(t,e)}const QN=dr(jN);var Hne={newInstance:QN,extend:jN};Za("vtkSkybox",QN);var $ne=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkSphereMapperVS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/
// this shader implements imposters in OpenGL for Spheres

attribute vec4 vertexMC;
attribute vec2 offsetMC;

// optional normal declaration
//VTK::Normal::Dec

//VTK::Picking::Dec

// Texture coordinates
//VTK::TCoord::Dec

uniform mat3 normalMatrix; // transform model coordinate directions to view coordinates

// material property values
//VTK::Color::Dec

// clipping plane vars
//VTK::Clip::Dec

// camera and actor matrix values
//VTK::Camera::Dec

varying vec4 vertexVCVSOutput;
varying float radiusVCVSOutput;
varying vec3 centerVCVSOutput;

uniform int cameraParallel;
uniform float scaleFactor;

void main()
{
  //VTK::Picking::Impl

  //VTK::Color::Impl

  //VTK::Normal::Impl

  //VTK::TCoord::Impl

  //VTK::Clip::Impl

  // compute the projected vertex position
  vec2 scaledOffsetMC = scaleFactor * offsetMC;
  vertexVCVSOutput = MCVCMatrix * vertexMC;
  centerVCVSOutput = vertexVCVSOutput.xyz;
  radiusVCVSOutput = length(scaledOffsetMC)*0.5;

  // make the triangle face the camera
  if (cameraParallel == 0)
    {
    vec3 dir = normalize(-vertexVCVSOutput.xyz);
    vec3 base2 = normalize(cross(dir,vec3(1.0,0.0,0.0)));
    vec3 base1 = cross(base2,dir);
    vertexVCVSOutput.xyz = vertexVCVSOutput.xyz + scaledOffsetMC.x*base1 + scaledOffsetMC.y*base2;
    }
  else
    {
    // add in the offset
    vertexVCVSOutput.xy = vertexVCVSOutput.xy + scaledOffsetMC;
    }

  gl_Position = VCPCMatrix * vertexVCVSOutput;
}
`;const{vtkErrorMacro:zne}=Bi;function qne(t,e){e.classHierarchy.push("vtkOpenGLSphereMapper");const n={...t};t.getShaderTemplate=(r,a,i)=>{r.Vertex=$ne,r.Fragment=rh,r.Geometry=""},t.replaceShaderValues=(r,a,i)=>{let o=r.Vertex,s=r.Fragment;o=Ve.substitute(o,"//VTK::Camera::Dec",[`uniform mat4 VCPCMatrix;
`,"uniform mat4 MCVCMatrix;"]).result,s=Ve.substitute(s,"//VTK::PositionVC::Dec",["varying vec4 vertexVCVSOutput;"]).result,s=Ve.substitute(s,"//VTK::PositionVC::Impl",[`vec4 vertexVC = vertexVCVSOutput;
`]).result;const c=[`uniform float invertedDepth;
`,`uniform int cameraParallel;
`,`varying float radiusVCVSOutput;
`,`varying vec3 centerVCVSOutput;
`,`uniform mat4 VCPCMatrix;
`];s=Ve.substitute(s,"//VTK::Normal::Dec",c).result;let l="";e.context.getExtension("EXT_frag_depth")&&(l=`gl_FragDepthEXT = (pos.z / pos.w + 1.0) / 2.0;
`),e._openGLRenderWindow.getWebgl2()&&(l=`gl_FragDepth = (pos.z / pos.w + 1.0) / 2.0;
`),s=Ve.substitute(s,"//VTK::Depth::Impl",[`  vec3 EyePos;
`,`  vec3 EyeDir;
`,`  if (cameraParallel != 0) {
`,`    EyePos = vec3(vertexVC.x, vertexVC.y, vertexVC.z + 3.0*radiusVCVSOutput);
`,`    EyeDir = vec3(0.0,0.0,-1.0); }
`,`  else {
`,`    EyeDir = vertexVC.xyz;
`,`    EyePos = vec3(0.0,0.0,0.0);
`,`    float lengthED = length(EyeDir);
`,`    EyeDir = normalize(EyeDir);
`,`    if (lengthED > radiusVCVSOutput*3.0) {
`,`      EyePos = vertexVC.xyz - EyeDir*3.0*radiusVCVSOutput; }
`,`    }
`,`  EyePos = EyePos - centerVCVSOutput;
`,`  EyePos = EyePos/radiusVCVSOutput;
`,`  float b = 2.0*dot(EyePos,EyeDir);
`,`  float c = dot(EyePos,EyePos) - 1.0;
`,`  float d = b*b - 4.0*c;
`,`  vec3 normalVCVSOutput = vec3(0.0,0.0,1.0);
`,`  if (d < 0.0) { discard; }
`,`  else {
`,`    float t = (-b - invertedDepth*sqrt(d))*0.5;
`,`    normalVCVSOutput = invertedDepth*normalize(EyePos + t*EyeDir);
`,`    vertexVC.xyz = normalVCVSOutput*radiusVCVSOutput + centerVCVSOutput;
`,`    }
`,`  vec4 pos = VCPCMatrix * vertexVC;
`,l]).result,s=Ve.substitute(s,"//VTK::Normal::Impl","").result,e.haveSeenDepthRequest&&(s=Ve.substitute(s,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float computedZ = (pos.z / pos.w + 1.0) / 2.0;","float iz = floor(computedZ * 65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result),r.Vertex=o,r.Fragment=s,n.replaceShaderValues(r,a,i)},t.setMapperShaderParameters=(r,a,i)=>{if(r.getCABO().getElementCount()&&(e.VBOBuildTime>r.getAttributeUpdateTime().getMTime()||r.getShaderSourceTime().getMTime()>r.getAttributeUpdateTime().getMTime())&&r.getProgram().isAttributeUsed("offsetMC")&&(r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"offsetMC",12,r.getCABO().getStride(),e.context.FLOAT,2,!1)||zne("Error setting 'offsetMC' in shader VAO.")),r.getProgram().isUniformUsed("invertedDepth")&&r.getProgram().setUniformf("invertedDepth",e.invert?-1:1),r.getProgram().isUniformUsed("scaleFactor")){const s=e.currentInput.getPointData();e.renderable.getScaleArray()!=null&&s.hasArray(e.renderable.getScaleArray())?r.getProgram().setUniformf("scaleFactor",e.renderable.getScaleFactor()):r.getProgram().setUniformf("scaleFactor",1)}n.setMapperShaderParameters(r,a,i)},t.setCameraShaderParameters=(r,a,i)=>{const o=r.getProgram(),s=a.getActiveCamera(),c=e.openGLCamera.getKeyMatrices(a);if(o.isUniformUsed("VCPCMatrix")&&o.setUniformMatrix("VCPCMatrix",c.vcpc),o.isUniformUsed("MCVCMatrix"))if(i.getIsIdentity())o.setUniformMatrix("MCVCMatrix",c.wcvc);else{const l=e.openGLActor.getKeyMatrices(),u=new Float64Array(16);Xn(u,c.wcvc,l.mcwc),o.setUniformMatrix("MCVCMatrix",u)}o.isUniformUsed("cameraParallel")&&r.getProgram().setUniformi("cameraParallel",s.getParallelProjection())},t.getOpenGLMode=(r,a)=>e.context.TRIANGLES,t.buildBufferObjects=(r,a)=>{const i=e.currentInput;if(i===null)return;e.renderable.mapScalars(i,1);const o=e.renderable.getColorMapColors(),s=e.primitives[e.primTypes.Tris].getCABO(),c=i.getPointData(),l=i.getPoints(),u=l.getNumberOfPoints(),f=l.getData(),v=5;let g=null;e.renderable.getScaleArray()!=null&&c.hasArray(e.renderable.getScaleArray())&&(g=c.getArray(e.renderable.getScaleArray()).getData());let d=null,m=0,h=null;o?(m=o.getNumberOfComponents(),s.setColorOffset(0),s.setColorBOStride(4),d=o.getData(),h=new Uint8Array(3*u*4),s.getColorBO()||s.setColorBO(Lc.newInstance()),s.getColorBO().setOpenGLRenderWindow(e._openGLRenderWindow)):s.getColorBO()&&s.setColorBO(null),s.setColorComponents(m);const C=new Float32Array(v*u*3);s.setStride(v*4);const p=Math.cos(Oa(30));let S=0,I=0,D=0,E=0;for(let T=0;T<u;++T){let y=e.renderable.getRadius();g&&(y=g[T]),S=T*3,C[D++]=f[S++],C[D++]=f[S++],C[D++]=f[S++],C[D++]=-2*y*p,C[D++]=-y,d&&(I=T*m,h[E++]=d[I],h[E++]=d[I+1],h[E++]=d[I+2],h[E++]=d[I+3]),S=T*3,C[D++]=f[S++],C[D++]=f[S++],C[D++]=f[S++],C[D++]=2*y*p,C[D++]=-y,d&&(h[E++]=d[I],h[E++]=d[I+1],h[E++]=d[I+2],h[E++]=d[I+3]),S=T*3,C[D++]=f[S++],C[D++]=f[S++],C[D++]=f[S++],C[D++]=0,C[D++]=2*y,d&&(h[E++]=d[I],h[E++]=d[I+1],h[E++]=d[I+2],h[E++]=d[I+3])}s.setElementCount(D/v),s.upload(C,Gc.ARRAY_BUFFER),o&&s.getColorBO().upload(h,Gc.ARRAY_BUFFER),e.VBOBuildTime.modified()}}const jne={};function KN(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,jne,n),gI.extend(t,e,n),qne(t,e)}const XN=dr(KN,"vtkOpenGLSphereMapper");var Qne={newInstance:XN,extend:KN};Za("vtkSphereMapper",XN);var Kne=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkStickMapperVS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/
// this shader implements imposters in OpenGL for Sticks

attribute vec4 vertexMC;
attribute vec3 orientMC;
attribute vec4 offsetMC;
attribute float radiusMC;

// optional normal declaration
//VTK::Normal::Dec

//VTK::Picking::Dec

// Texture coordinates
//VTK::TCoord::Dec

uniform mat3 normalMatrix; // transform model coordinate directions to view coordinates

// material property values
//VTK::Color::Dec

// clipping plane vars
//VTK::Clip::Dec

// camera and actor matrix values
//VTK::Camera::Dec

varying vec4 vertexVCVSOutput;
varying float radiusVCVSOutput;
varying float lengthVCVSOutput;
varying vec3 centerVCVSOutput;
varying vec3 orientVCVSOutput;

uniform int cameraParallel;

void main()
{
  //VTK::Picking::Impl

  //VTK::Color::Impl

  //VTK::Normal::Impl

  //VTK::TCoord::Impl

  //VTK::Clip::Impl

  vertexVCVSOutput = MCVCMatrix * vertexMC;
  centerVCVSOutput = vertexVCVSOutput.xyz;
  radiusVCVSOutput = radiusMC;
  lengthVCVSOutput = length(orientMC);
  orientVCVSOutput = normalMatrix * normalize(orientMC);

  // make sure it is pointing out of the screen
  if (orientVCVSOutput.z < 0.0)
    {
    orientVCVSOutput = -orientVCVSOutput;
    }

  // make the basis
  vec3 xbase;
  vec3 ybase;
  vec3 dir = vec3(0.0,0.0,1.0);
  if (cameraParallel == 0)
    {
    dir = normalize(-vertexVCVSOutput.xyz);
    }
  if (abs(dot(dir,orientVCVSOutput)) == 1.0)
    {
    xbase = normalize(cross(vec3(0.0,1.0,0.0),orientVCVSOutput));
    ybase = cross(xbase,orientVCVSOutput);
    }
  else
    {
    xbase = normalize(cross(orientVCVSOutput,dir));
    ybase = cross(orientVCVSOutput,xbase);
    }

  vec3 offsets = offsetMC.xyz*2.0-1.0;
  vertexVCVSOutput.xyz = vertexVCVSOutput.xyz +
    radiusVCVSOutput*offsets.x*xbase +
    radiusVCVSOutput*offsets.y*ybase +
    0.5*lengthVCVSOutput*offsets.z*orientVCVSOutput;

  gl_Position = VCPCMatrix * vertexVCVSOutput;
}
`;const{vtkErrorMacro:vp}=Bi;function Xne(t,e){e.classHierarchy.push("vtkOpenGLStickMapper");const n={...t};t.getShaderTemplate=(r,a,i)=>{r.Vertex=Kne,r.Fragment=rh,r.Geometry=""},t.replaceShaderValues=(r,a,i)=>{let o=r.Vertex,s=r.Fragment;o=Ve.substitute(o,"//VTK::Camera::Dec",[`uniform mat4 VCPCMatrix;
`,"uniform mat4 MCVCMatrix;"]).result,s=Ve.substitute(s,"//VTK::PositionVC::Dec","varying vec4 vertexVCVSOutput;").result,s=Ve.substitute(s,"//VTK::PositionVC::Impl",`  vec4 vertexVC = vertexVCVSOutput;
`).result;const c=[`uniform int cameraParallel;
`,`varying float radiusVCVSOutput;
`,`varying vec3 orientVCVSOutput;
`,`varying float lengthVCVSOutput;
`,`varying vec3 centerVCVSOutput;
`,`uniform mat4 VCPCMatrix;
`];s=Ve.substitute(s,"//VTK::Normal::Dec",c).result;let l="";e.context.getExtension("EXT_frag_depth")&&(l=`  gl_FragDepthEXT = (pos.z / pos.w + 1.0) / 2.0;
`),e._openGLRenderWindow.getWebgl2()&&(l=`gl_FragDepth = (pos.z / pos.w + 1.0) / 2.0;
`),s=Ve.substitute(s,"//VTK::Depth::Impl",[`  vec3 EyePos;
`,`  vec3 EyeDir;
`,`  if (cameraParallel != 0) {
`,`    EyePos = vec3(vertexVC.x, vertexVC.y, vertexVC.z + 3.0*radiusVCVSOutput);
`,`    EyeDir = vec3(0.0,0.0,-1.0); }
`,`  else {
`,`    EyeDir = vertexVC.xyz;
`,`    EyePos = vec3(0.0,0.0,0.0);
`,`    float lengthED = length(EyeDir);
`,`    EyeDir = normalize(EyeDir);
`,`    if (lengthED > radiusVCVSOutput*3.0) {
`,`      EyePos = vertexVC.xyz - EyeDir*3.0*radiusVCVSOutput; }
`,`    }
`,`  EyePos = EyePos - centerVCVSOutput;
`,`  vec3 base1;
`,`  if (abs(orientVCVSOutput.z) < 0.99) {
`,`    base1 = normalize(cross(orientVCVSOutput,vec3(0.0,0.0,1.0))); }
`,`  else {
`,`    base1 = normalize(cross(orientVCVSOutput,vec3(0.0,1.0,0.0))); }
`,`  vec3 base2 = cross(orientVCVSOutput,base1);
`,`  EyePos = vec3(dot(EyePos,base1),dot(EyePos,base2),dot(EyePos,orientVCVSOutput));
`,`  EyeDir = vec3(dot(EyeDir,base1),dot(EyeDir,base2),dot(EyeDir,orientVCVSOutput));
`,`  EyePos = EyePos/radiusVCVSOutput;
`,`  float a = EyeDir.x*EyeDir.x + EyeDir.y*EyeDir.y;
`,`  float b = 2.0*(EyePos.x*EyeDir.x + EyePos.y*EyeDir.y);
`,`  float c = EyePos.x*EyePos.x + EyePos.y*EyePos.y - 1.0;
`,`  float d = b*b - 4.0*a*c;
`,`  vec3 normalVCVSOutput = vec3(0.0,0.0,1.0);
`,`  if (d < 0.0) { discard; }
`,`  else {
`,`    float t =  (-b - sqrt(d))/(2.0*a);
`,`    float tz = EyePos.z + t*EyeDir.z;
`,`    vec3 iPoint = EyePos + t*EyeDir;
`,`    if (abs(iPoint.z)*radiusVCVSOutput > lengthVCVSOutput*0.5) {
`,`      float t2 = (-b + sqrt(d))/(2.0*a);
`,`      float tz2 = EyePos.z + t2*EyeDir.z;
`,`      if (tz2*radiusVCVSOutput > lengthVCVSOutput*0.5 || tz*radiusVCVSOutput < -0.5*lengthVCVSOutput) { discard; }
`,`      else {
`,`        normalVCVSOutput = orientVCVSOutput;
`,`        float t3 = (lengthVCVSOutput*0.5/radiusVCVSOutput - EyePos.z)/EyeDir.z;
`,`        iPoint = EyePos + t3*EyeDir;
`,`        vertexVC.xyz = radiusVCVSOutput*(iPoint.x*base1 + iPoint.y*base2 + iPoint.z*orientVCVSOutput) + centerVCVSOutput;
`,`        }
`,`      }
`,`    else {
`,`      normalVCVSOutput = iPoint.x*base1 + iPoint.y*base2;
`,`      vertexVC.xyz = radiusVCVSOutput*(normalVCVSOutput + iPoint.z*orientVCVSOutput) + centerVCVSOutput;
`,`      }
`,`    }
`,`  vec4 pos = VCPCMatrix * vertexVC;
`,l]).result,s=Ve.substitute(s,"//VTK::Normal::Impl","").result,e.haveSeenDepthRequest&&(s=Ve.substitute(s,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float computedZ = (pos.z / pos.w + 1.0) / 2.0;","float iz = floor(computedZ * 65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result),r.Vertex=o,r.Fragment=s,n.replaceShaderValues(r,a,i)},t.setMapperShaderParameters=(r,a,i)=>{r.getCABO().getElementCount()&&(e.VBOBuildTime>r.getAttributeUpdateTime().getMTime()||r.getShaderSourceTime().getMTime()>r.getAttributeUpdateTime().getMTime())&&(r.getProgram().isAttributeUsed("orientMC")&&(r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"orientMC",12,r.getCABO().getStride(),e.context.FLOAT,3,!1)||vp("Error setting 'orientMC' in shader VAO.")),r.getProgram().isAttributeUsed("offsetMC")&&(r.getVAO().addAttributeArray(r.getProgram(),r.getCABO().getColorBO(),"offsetMC",0,r.getCABO().getColorBOStride(),e.context.UNSIGNED_BYTE,3,!0)||vp("Error setting 'offsetMC' in shader VAO.")),r.getProgram().isAttributeUsed("radiusMC")&&(r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"radiusMC",24,r.getCABO().getStride(),e.context.FLOAT,1,!1)||vp("Error setting 'radiusMC' in shader VAO."))),n.setMapperShaderParameters(r,a,i)},t.setCameraShaderParameters=(r,a,i)=>{const o=r.getProgram(),s=a.getActiveCamera(),c=e.openGLCamera.getKeyMatrices(a);if(o.isUniformUsed("VCPCMatrix")&&o.setUniformMatrix("VCPCMatrix",c.vcpc),i.getIsIdentity())o.isUniformUsed("MCVCMatrix")&&o.setUniformMatrix("MCVCMatrix",c.wcvc),o.isUniformUsed("normalMatrix")&&o.setUniformMatrix3x3("normalMatrix",c.normalMatrix);else{const l=e.openGLActor.getKeyMatrices();if(o.isUniformUsed("MCVCMatrix")){const u=new Float64Array(16);Xn(u,c.wcvc,l.mcwc),o.setUniformMatrix("MCVCMatrix",u)}if(o.isUniformUsed("normalMatrix")){const u=new Float64Array(9);iv(u,c.normalMatrix,l.normalMatrix),o.setUniformMatrix3x3("normalMatrix",u)}}o.isUniformUsed("cameraParallel")&&r.getProgram().setUniformi("cameraParallel",s.getParallelProjection())},t.getOpenGLMode=(r,a)=>e.context.TRIANGLES,t.buildBufferObjects=(r,a)=>{const i=e.currentInput;if(i===null)return;e.renderable.mapScalars(i,1);const o=e.renderable.getColorMapColors(),s=e.primitives[e.primTypes.Tris].getCABO(),c=i.getPointData(),l=i.getPoints(),u=l.getNumberOfPoints(),f=l.getData();let v=3;v+=4;let g=null,d=0;s.setColorBOStride(4),s.getColorBO()||s.setColorBO(Lc.newInstance()),s.getColorBO().setOpenGLRenderWindow(e._openGLRenderWindow),o&&(d=o.getNumberOfComponents(),s.setColorOffset(4),g=o.getData(),s.setColorBOStride(8)),s.setColorComponents(d),s.setStride(v*4);const m=new Float32Array(v*u*12),h=new Uint8Array(12*u*(g?8:4));let C=null,p=null;e.renderable.getScaleArray()!=null&&c.hasArray(e.renderable.getScaleArray())&&(C=c.getArray(e.renderable.getScaleArray()).getData()),e.renderable.getOrientationArray()!=null&&c.hasArray(e.renderable.getOrientationArray())?p=c.getArray(e.renderable.getOrientationArray()).getData():vp([`Error setting orientationArray.
`,"You have to specify the stick orientation"]);const S=[0,1,3,0,3,2,2,3,5,2,5,4];let I=0,D=0,E=0,T=0;for(let y=0;y<u;++y){let M=e.renderable.getLength(),_=e.renderable.getRadius();C&&(M=C[y*2],_=C[y*2+1]);for(let O=0;O<S.length;++O)I=y*3,m[E++]=f[I++],m[E++]=f[I++],m[E++]=f[I++],I=y*3,m[E++]=p[I++]*M,m[E++]=p[I++]*M,m[E++]=p[I++]*M,m[E++]=_,h[T++]=255*(S[O]%2),h[T++]=S[O]>=4?255:0,h[T++]=S[O]>=2?255:0,h[T++]=255,D=y*d,g&&(h[T++]=g[D],h[T++]=g[D+1],h[T++]=g[D+2],h[T++]=g[D+3])}s.setElementCount(E/v),s.upload(m,Gc.ARRAY_BUFFER),s.getColorBO().upload(h,Gc.ARRAY_BUFFER),e.VBOBuildTime.modified()}}const Yne={};function YN(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Yne,n),gI.extend(t,e,n),Xne(t,e)}const ZN=dr(YN,"vtkOpenGLStickMapper");var Zne={newInstance:ZN,extend:YN};Za("vtkStickMapper",ZN);function Jne(t,e){e.classHierarchy.push("vtkOpenGLVolume"),t.buildPass=n=>{!e.renderable||!e.renderable.getVisibility()||n&&(e._openGLRenderWindow=t.getLastAncestorOfType("vtkOpenGLRenderWindow"),e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e.context=e._openGLRenderWindow.getContext(),t.prepareNodes(),t.addMissingNode(e.renderable.getMapper()),t.removeUnusedNodes())},t.queryPass=(n,r)=>{if(n){if(!e.renderable||!e.renderable.getVisibility())return;r.incrementVolumeCount()}},t.traverseVolumePass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.children[0].traverse(n),t.apply(n,!1))},t.volumePass=n=>{!e.renderable||!e.renderable.getVisibility()||e.context.depthMask(!n)},t.getKeyMatrices=()=>(e.renderable.getMTime()>e.keyMatrixTime.getMTime()&&(e.renderable.computeMatrix(),fa(e.MCWCMatrix,e.renderable.getMatrix()),$n(e.MCWCMatrix,e.MCWCMatrix),e.renderable.getIsIdentity()?Rs(e.normalMatrix):(rI(e.normalMatrix,e.MCWCMatrix),th(e.normalMatrix,e.normalMatrix),qM(e.normalMatrix,e.normalMatrix)),e.keyMatrixTime.modified()),{mcwc:e.MCWCMatrix,normalMatrix:e.normalMatrix})}const ere={};function JN(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,ere,n),Fr.extend(t,e,n),e.keyMatrixTime={},Yr(e.keyMatrixTime,{mtime:0}),e.normalMatrix=new Float64Array(9),e.MCWCMatrix=new Float64Array(16),Wa(t,e,["context"]),Jne(t,e)}const eL=dr(JN,"vtkOpenGLVolume");var tre={newInstance:eL,extend:JN};Za("vtkVolume",eL);const NT={NEAREST:0,LINEAR:1,FAST_LINEAR:2},tL={FRACTIONAL:0,PROPORTIONAL:1},F2={CUSTOM:0,ADDITIVE:1,COLORIZE:2};var nL={InterpolationType:NT,OpacityMode:tL,ColorMixPreset:F2},nre=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkPolyDataVS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/

attribute vec4 vertexDC;

varying vec3 vertexVCVSOutput;
uniform mat4 PCVCMatrix;

uniform float dcxmin;
uniform float dcxmax;
uniform float dcymin;
uniform float dcymax;

void main()
{
  // dcsmall is the device coords reduced to the
  // x y area covered by the volume
  vec4 dcsmall = vec4(
    dcxmin + 0.5 * (vertexDC.x + 1.0) * (dcxmax - dcxmin),
    dcymin + 0.5 * (vertexDC.y + 1.0) * (dcymax - dcymin),
    vertexDC.z,
    vertexDC.w);
  vec4 vcpos = PCVCMatrix * dcsmall;
  vertexVCVSOutput = vcpos.xyz/vcpos.w;
  gl_Position = dcsmall;
}
`,rre=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkVolumeFS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/
// Template for the volume mappers fragment shader

// the output of this shader
//VTK::Output::Dec

varying vec3 vertexVCVSOutput;

// first declare the settings from the mapper
// that impact the code paths in here

// always set vtkNumComponents 1,2,3,4
//VTK::NumComponents

// possibly define vtkTrilinearOn
//VTK::TrilinearOn

// possibly define UseIndependentComponents
//VTK::IndependentComponentsOn

// possibly define vtkCustomComponentsColorMix
//VTK::CustomComponentsColorMixOn

// possibly define any "proportional" components
//VTK::vtkProportionalComponents

// possibly define any components that are forced to nearest interpolation
//VTK::vtkForceNearestComponents

// Define the blend mode to use
#define vtkBlendMode //VTK::BlendMode

// Possibly define vtkImageLabelOutlineOn
//VTK::ImageLabelOutlineOn

// Possibly define vtkLabelEdgeProjectionOn
//VTK::LabelEdgeProjectionOn


#ifdef vtkImageLabelOutlineOn
  uniform float outlineOpacity;
  uniform float vpWidth;
  uniform float vpHeight;
  uniform float vpOffsetX;
  uniform float vpOffsetY;
  uniform mat4 PCWCMatrix;
  uniform mat4 vWCtoIDX;

  const int MAX_SEGMENT_INDEX = 256; // Define as per expected maximum
  // bool seenSegmentsByOriginalPos[MAX_SEGMENT_INDEX];
  #define MAX_SEGMENTS 256
  #define UINT_SIZE 32
  #define BITMASK_SIZE ((MAX_SEGMENTS + UINT_SIZE - 1) / UINT_SIZE)

  uint bitmask[BITMASK_SIZE];

  // Set the corresponding bit in the bitmask
  void setBit(int segmentIndex) {
    int index = segmentIndex / UINT_SIZE;
    int bitIndex = segmentIndex % UINT_SIZE;
    bitmask[index] |= 1u << bitIndex;
  }

  // Check if a bit is set in the bitmask
  bool isBitSet(int segmentIndex) {
    int index = segmentIndex / UINT_SIZE;
    int bitIndex = segmentIndex % UINT_SIZE;
    return ((bitmask[index] & (1u << bitIndex)) != 0u);
  }
#endif

// define vtkLightComplexity
//VTK::LightComplexity
#if vtkLightComplexity > 0
uniform float vSpecularPower;
uniform float vAmbient;
uniform float vDiffuse;
uniform float vSpecular;
//VTK::Light::Dec
#endif

//VTK::VolumeShadowOn
//VTK::SurfaceShadowOn
//VTK::localAmbientOcclusionOn
//VTK::LAO::Dec
//VTK::VolumeShadow::Dec

// define vtkComputeNormalFromOpacity
//VTK::vtkComputeNormalFromOpacity

// possibly define vtkGradientOpacityOn
//VTK::GradientOpacityOn
#ifdef vtkGradientOpacityOn
uniform float goscale0;
uniform float goshift0;
uniform float gomin0;
uniform float gomax0;
#ifdef UseIndependentComponents
#if vtkNumComponents > 1
uniform float goscale1;
uniform float goshift1;
uniform float gomin1;
uniform float gomax1;
#if vtkNumComponents > 2
uniform float goscale2;
uniform float goshift2;
uniform float gomin2;
uniform float gomax2;
#if vtkNumComponents > 3
uniform float goscale3;
uniform float goshift3;
uniform float gomin3;
uniform float gomax3;
#endif
#endif
#endif
#endif
#endif

// if you want to see the raw tiled
// data in webgl1 uncomment the following line
// #define debugtile

// camera values
uniform float camThick;
uniform float camNear;
uniform float camFar;
uniform int cameraParallel;

// values describing the volume geometry
uniform vec3 vOriginVC;
uniform vec3 vSpacing;
uniform ivec3 volumeDimensions; // 3d texture dimensions
uniform vec3 vPlaneNormal0;
uniform float vPlaneDistance0;
uniform vec3 vPlaneNormal1;
uniform float vPlaneDistance1;
uniform vec3 vPlaneNormal2;
uniform float vPlaneDistance2;
uniform vec3 vPlaneNormal3;
uniform float vPlaneDistance3;
uniform vec3 vPlaneNormal4;
uniform float vPlaneDistance4;
uniform vec3 vPlaneNormal5;
uniform float vPlaneDistance5;

//VTK::ClipPlane::Dec

// opacity and color textures
uniform sampler2D otexture;
uniform float oshift0;
uniform float oscale0;
uniform sampler2D ctexture;
uniform float cshift0;
uniform float cscale0;

#if vtkNumComponents >= 2
uniform float oshift1;
uniform float oscale1;
uniform float cshift1;
uniform float cscale1;
#endif
#if vtkNumComponents >= 3
uniform float oshift2;
uniform float oscale2;
uniform float cshift2;
uniform float cscale2;
#endif
#if vtkNumComponents >= 4
uniform float oshift3;
uniform float oscale3;
uniform float cshift3;
uniform float cscale3;
#endif

// jitter texture
uniform sampler2D jtexture;
uniform sampler2D ttexture;


// some 3D texture values
uniform float sampleDistance;
uniform vec3 vVCToIJK;
uniform vec3 volumeSpacings; // spacing in the world coorindates


// the heights defined below are the locations
// for the up to four components of the tfuns
// the tfuns have a height of 2XnumComps pixels so the
// values are computed to hit the middle of the two rows
// for that component
#ifdef UseIndependentComponents
#if vtkNumComponents == 1
uniform float mix0;
#define height0 0.5
#endif
#if vtkNumComponents == 2
uniform float mix0;
uniform float mix1;
#define height0 0.25
#define height1 0.75
#endif
#if vtkNumComponents == 3
uniform float mix0;
uniform float mix1;
uniform float mix2;
#define height0 0.17
#define height1 0.5
#define height2 0.83
#endif
#if vtkNumComponents == 4
uniform float mix0;
uniform float mix1;
uniform float mix2;
uniform float mix3;
#define height0 0.125
#define height1 0.375
#define height2 0.625
#define height3 0.875
#endif
#endif

uniform vec4 ipScalarRangeMin;
uniform vec4 ipScalarRangeMax;

// declaration for intermixed geometry
//VTK::ZBuffer::Dec

//=======================================================================
// global and custom variables (a temporary section before photorealistics rendering module is complete)
vec3 rayDirVC;
float sampleDistanceISVS;
float sampleDistanceIS;

#define SQRT3    1.7321
#define INV4PI   0.0796
#define EPSILON  0.001
#define PI       3.1415
#define PI2      9.8696

//=======================================================================
// Webgl2 specific version of functions
#if __VERSION__ == 300

uniform highp sampler3D texture1;

vec4 getTextureValue(vec3 pos)
{
  vec4 tmp = texture(texture1, pos);

  #if defined(vtkComponent0ForceNearest) || \\
      defined(vtkComponent1ForceNearest) || \\
      defined(vtkComponent2ForceNearest) || \\
      defined(vtkComponent3ForceNearest)
    vec3 nearestPos = (floor(pos * vec3(volumeDimensions)) + 0.5) / vec3(volumeDimensions);
    vec4 nearestValue = texture(texture1, nearestPos);
    #ifdef vtkComponent0ForceNearest
      tmp[0] = nearestValue[0];
    #endif
    #ifdef vtkComponent1ForceNearest
      tmp[1] = nearestValue[1];
    #endif
    #ifdef vtkComponent2ForceNearest
      tmp[2] = nearestValue[2];
    #endif
    #ifdef vtkComponent3ForceNearest
      tmp[3] = nearestValue[3];
    #endif
  #endif

  #ifndef UseIndependentComponents
    #if vtkNumComponents == 1
      tmp.a = tmp.r;
    #endif
    #if vtkNumComponents == 2
      tmp.a = tmp.g;
    #endif
    #if vtkNumComponents == 3
      tmp.a = length(tmp.rgb);
    #endif
  #endif

  return tmp;
}

//=======================================================================
// WebGL1 specific version of functions
#else

uniform sampler2D texture1;

uniform float texWidth;
uniform float texHeight;
uniform int xreps;
uniform int xstride;
uniform int ystride;

// if computing trilinear values from multiple z slices
#ifdef vtkTrilinearOn
vec4 getTextureValue(vec3 ijk)
{
  float zoff = 1.0/float(volumeDimensions.z);
  vec4 val1 = getOneTextureValue(ijk);
  vec4 val2 = getOneTextureValue(vec3(ijk.xy, ijk.z + zoff));

  float indexZ = float(volumeDimensions)*ijk.z;
  float zmix =  indexZ - floor(indexZ);

  return mix(val1, val2, zmix);
}

vec4 getOneTextureValue(vec3 ijk)
#else // nearest or fast linear
vec4 getTextureValue(vec3 ijk)
#endif
{
  vec3 tdims = vec3(volumeDimensions);

#ifdef debugtile
  vec2 tpos = vec2(ijk.x, ijk.y);
  vec4 tmp = texture2D(texture1, tpos);
  tmp.a = 1.0;

#else
  int z = int(ijk.z * tdims.z);
  int yz = z / xreps;
  int xz = z - yz*xreps;

  int tileWidth = volumeDimensions.x/xstride;
  int tileHeight = volumeDimensions.y/ystride;

  xz *= tileWidth;
  yz *= tileHeight;

  float ni = float(xz) + (ijk.x*float(tileWidth));
  float nj = float(yz) + (ijk.y*float(tileHeight));

  vec2 tpos = vec2(ni/texWidth, nj/texHeight);

  vec4 tmp = texture2D(texture1, tpos);

#if vtkNumComponents == 1
  tmp.a = tmp.r;
#endif
#if vtkNumComponents == 2
  tmp.g = tmp.a;
#endif
#if vtkNumComponents == 3
  tmp.a = length(tmp.rgb);
#endif
#endif

  return tmp;
}

// End of Webgl1 specific code
//=======================================================================
#endif

//=======================================================================
// transformation between VC and IS space

// convert vector position from idx to vc
#if (vtkLightComplexity > 0) || (defined vtkClippingPlanesOn)
vec3 IStoVC(vec3 posIS){
  vec3 posVC = posIS / vVCToIJK;
  return posVC.x * vPlaneNormal0 +
         posVC.y * vPlaneNormal2 +
         posVC.z * vPlaneNormal4 +
         vOriginVC;
}

// convert vector position from vc to idx
vec3 VCtoIS(vec3 posVC){
  posVC = posVC - vOriginVC;
  posVC = vec3(
    dot(posVC, vPlaneNormal0),
    dot(posVC, vPlaneNormal2),
    dot(posVC, vPlaneNormal4));
  return posVC * vVCToIJK;
}
#endif

//Rotate vector to view coordinate
#if (vtkLightComplexity > 0) || (defined vtkGradientOpacityOn)
void rotateToViewCoord(inout vec3 dirIS){
  dirIS.xyz =
    dirIS.x * vPlaneNormal0 +
    dirIS.y * vPlaneNormal2 +
    dirIS.z * vPlaneNormal4;
}

//Rotate vector to idx coordinate
vec3 rotateToIDX(vec3 dirVC){
  vec3 dirIS;
  dirIS.xyz = vec3(
    dot(dirVC, vPlaneNormal0),
    dot(dirVC, vPlaneNormal2),
    dot(dirVC, vPlaneNormal4));
  return dirIS;
}
#endif

//=======================================================================
// Given a normal compute the gradient opacity factors
float computeGradientOpacityFactor(
  float normalMag, float goscale, float goshift, float gomin, float gomax)
{
  return clamp(normalMag * goscale + goshift, gomin, gomax);
}

//=======================================================================
// compute the normal and gradient magnitude for a position, uses forward difference
#if (vtkLightComplexity > 0) || (defined vtkGradientOpacityOn)
  #ifdef vtkClippingPlanesOn
    void adjustClippedVoxelValues(vec3 pos, vec3 texPos[3], inout vec3 g1)
    {
      vec3 g1VC[3];
      for (int i = 0; i < 3; ++i)
      {
        g1VC[i] = IStoVC(texPos[i]);
      }
      vec3 posVC = IStoVC(pos);
      for (int i = 0; i < clip_numPlanes; ++i)
      {
        for (int j = 0; j < 3; ++j)
        {
          if(dot(vec3(vClipPlaneOrigins[i] - g1VC[j].xyz), vClipPlaneNormals[i]) > 0.0)
          {
            g1[j] = 0.0;
          }
        }
      }
    }
  #endif

  #ifdef vtkComputeNormalFromOpacity
    vec4 computeDensityNormal(vec3 opacityUCoords[2], float opactityTextureHeight, float gradientOpacity) {
      vec3 opacityG1, opacityG2;
      opacityG1.x = texture2D(otexture, vec2(opacityUCoords[0].x, opactityTextureHeight)).r;
      opacityG1.y = texture2D(otexture, vec2(opacityUCoords[0].y, opactityTextureHeight)).r;
      opacityG1.z = texture2D(otexture, vec2(opacityUCoords[0].z, opactityTextureHeight)).r;
      opacityG2.x = texture2D(otexture, vec2(opacityUCoords[1].x, opactityTextureHeight)).r;
      opacityG2.y = texture2D(otexture, vec2(opacityUCoords[1].y, opactityTextureHeight)).r;
      opacityG2.z = texture2D(otexture, vec2(opacityUCoords[1].z, opactityTextureHeight)).r;
      opacityG1.xyz *= gradientOpacity;
      opacityG2.xyz *= gradientOpacity;

      vec4 opacityG = vec4(opacityG1 - opacityG2, 1.0f);
      // divide by spacing
      opacityG.xyz /= vSpacing;
      opacityG.w = length(opacityG.xyz);
      // rotate to View Coords
      rotateToViewCoord(opacityG.xyz);
      if (!all(equal(opacityG.xyz, vec3(0.0)))) {
        return vec4(normalize(opacityG.xyz),opacityG.w);
      } else {
        return vec4(0.0);
      }
    }

    vec4 computeNormalForDensity(vec3 pos, vec3 tstep, out vec3 scalarInterp[2], const int opacityComponent)
    {
      vec3 xvec = vec3(tstep.x, 0.0, 0.0);
      vec3 yvec = vec3(0.0, tstep.y, 0.0);
      vec3 zvec = vec3(0.0, 0.0, tstep.z);
      vec3 texPosPVec[3];
      texPosPVec[0] = pos + xvec;
      texPosPVec[1] = pos + yvec;
      texPosPVec[2] = pos + zvec;
      vec3 texPosNVec[3];
      texPosNVec[0] = pos - xvec;
      texPosNVec[1] = pos - yvec;
      texPosNVec[2] = pos - zvec;
      vec3 g1, g2;

      scalarInterp[0].x = getTextureValue(texPosPVec[0])[opacityComponent];
      scalarInterp[0].y = getTextureValue(texPosPVec[1])[opacityComponent];
      scalarInterp[0].z = getTextureValue(texPosPVec[2])[opacityComponent];
      scalarInterp[1].x = getTextureValue(texPosNVec[0])[opacityComponent];
      scalarInterp[1].y = getTextureValue(texPosNVec[1])[opacityComponent];
      scalarInterp[1].z = getTextureValue(texPosNVec[2])[opacityComponent];

      #ifdef vtkClippingPlanesOn
        adjustClippedVoxelValues(pos, texPosPVec, scalarInterp[0]);
        adjustClippedVoxelValues(pos, texPosNVec, scalarInterp[1]);
      #endif
      vec4 result;
      result.x = scalarInterp[0].x - scalarInterp[1].x;
      result.y = scalarInterp[0].y - scalarInterp[1].y;
      result.z = scalarInterp[0].z - scalarInterp[1].z;
      // divide by spacing
      result.xyz /= vSpacing;
      result.w = length(result.xyz);
      // rotate to View Coords
      rotateToViewCoord(result.xyz);
      if (length(result.xyz) > 0.0) {
        return vec4(normalize(result.xyz),result.w);
      } else {
        return vec4(0.0);
      }
    }
  #endif

  // only works with dependent components
  vec4 computeNormal(vec3 pos, vec3 tstep)
  {
    vec3 xvec = vec3(tstep.x, 0.0, 0.0);
    vec3 yvec = vec3(0.0, tstep.y, 0.0);
    vec3 zvec = vec3(0.0, 0.0, tstep.z);
    vec3 texPosPVec[3];
    texPosPVec[0] = pos + xvec;
    texPosPVec[1] = pos + yvec;
    texPosPVec[2] = pos + zvec;
    vec3 texPosNVec[3];
    texPosNVec[0] = pos - xvec;
    texPosNVec[1] = pos - yvec;
    texPosNVec[2] = pos - zvec;
    vec3 g1, g2;
    g1.x = getTextureValue(texPosPVec[0]).a;
    g1.y = getTextureValue(texPosPVec[1]).a;
    g1.z = getTextureValue(texPosPVec[2]).a;
    g2.x = getTextureValue(texPosNVec[0]).a;
    g2.y = getTextureValue(texPosNVec[1]).a;
    g2.z = getTextureValue(texPosNVec[2]).a;
    #ifdef vtkClippingPlanesOn
      adjustClippedVoxelValues(pos, texPosPVec, g1);
      adjustClippedVoxelValues(pos, texPosNVec, g2);
    #endif
    vec4 result;
    result = vec4(g1 - g2, -1.0);
    // divide by spacing
    result.xyz /= vSpacing;
    result.w = length(result.xyz);
    if (result.w > 0.0){
      // rotate to View Coords
      rotateToViewCoord(result.xyz);
      return vec4(normalize(result.xyz),result.w);
    } else {
      return vec4(0.0);
    }
  }
#endif


#ifdef vtkImageLabelOutlineOn
  vec4 fragCoordToPCPos(vec4 fragCoord) {
    return vec4(
      (fragCoord.x / vpWidth - vpOffsetX - 0.5) * 2.0,
      (fragCoord.y / vpHeight - vpOffsetY - 0.5) * 2.0,
      (fragCoord.z - 0.5) * 2.0,
      1.0);
  }

  vec4 pcPosToWorldCoord(vec4 pcPos) {
    return PCWCMatrix * pcPos;
  }

  vec3 fragCoordToIndexSpace(vec4 fragCoord) {
    vec4 pcPos = fragCoordToPCPos(fragCoord);
    vec4 worldCoord = pcPosToWorldCoord(pcPos);
    vec4 vertex = (worldCoord / worldCoord.w);

    vec3 index = (vWCtoIDX * vertex).xyz;

    // half voxel fix for labelmapOutline
    return (index + vec3(0.5)) / vec3(volumeDimensions);
  }

  vec3 fragCoordToWorld(vec4 fragCoord) {
    vec4 pcPos = fragCoordToPCPos(fragCoord);
    vec4 worldCoord = pcPosToWorldCoord(pcPos);
    return worldCoord.xyz;
  }
#endif

//=======================================================================
// compute the normals and gradient magnitudes for a position
// for independent components
mat4 computeMat4Normal(vec3 pos, vec4 tValue, vec3 tstep)
{
  mat4 result;
  vec4 distX = getTextureValue(pos + vec3(tstep.x, 0.0, 0.0)) - tValue;
  vec4 distY = getTextureValue(pos + vec3(0.0, tstep.y, 0.0)) - tValue;
  vec4 distZ = getTextureValue(pos + vec3(0.0, 0.0, tstep.z)) - tValue;

  // divide by spacing
  distX /= vSpacing.x;
  distY /= vSpacing.y;
  distZ /= vSpacing.z;

  mat3 rot;
  rot[0] = vPlaneNormal0;
  rot[1] = vPlaneNormal2;
  rot[2] = vPlaneNormal4;

#if !defined(vtkComponent0Proportional)
  result[0].xyz = vec3(distX.r, distY.r, distZ.r);
  result[0].a = length(result[0].xyz);
  result[0].xyz *= rot;
  if (result[0].w > 0.0)
  {
    result[0].xyz /= result[0].w;
  }
#endif

// optionally compute the 2nd component
#if vtkNumComponents >= 2 && !defined(vtkComponent1Proportional)
  result[1].xyz = vec3(distX.g, distY.g, distZ.g);
  result[1].a = length(result[1].xyz);
  result[1].xyz *= rot;
  if (result[1].w > 0.0)
  {
    result[1].xyz /= result[1].w;
  }
#endif

// optionally compute the 3rd component
#if vtkNumComponents >= 3 && !defined(vtkComponent2Proportional)
  result[2].xyz = vec3(distX.b, distY.b, distZ.b);
  result[2].a = length(result[2].xyz);
  result[2].xyz *= rot;
  if (result[2].w > 0.0)
  {
    result[2].xyz /= result[2].w;
  }
#endif

// optionally compute the 4th component
#if vtkNumComponents >= 4 && !defined(vtkComponent3Proportional)
  result[3].xyz = vec3(distX.a, distY.a, distZ.a);
  result[3].a = length(result[3].xyz);
  result[3].xyz *= rot;
  if (result[3].w > 0.0)
  {
    result[3].xyz /= result[3].w;
  }
#endif

  return result;
}

//=======================================================================
// global shadow - secondary ray
#if defined(VolumeShadowOn) || defined(localAmbientOcclusionOn)
float random()
{
  float rand = fract(sin(dot(gl_FragCoord.xy,vec2(12.9898,78.233)))*43758.5453123);
  float jitter=texture2D(jtexture,gl_FragCoord.xy/32.).r;
  uint pcg_state = floatBitsToUint(jitter);
  uint state = pcg_state;
  pcg_state = pcg_state * uint(747796405) + uint(2891336453);
  uint word = ((state >> ((state >> uint(28)) + uint(4))) ^ state) * uint(277803737);
  return (float((((word >> uint(22)) ^ word) >> 1 ))/float(2147483647) + rand)/2.0;
}
#endif

#ifdef VolumeShadowOn
// henyey greenstein phase function
float phase_function(float cos_angle)
{
  // divide by 2.0 instead of 4pi to increase intensity
  return ((1.0-anisotropy2)/pow(1.0+anisotropy2-2.0*anisotropy*cos_angle, 1.5))/2.0;
}

// Computes the intersection between a ray and a box
struct Hit
{
  float tmin;
  float tmax;
};

struct Ray
{
  vec3 origin;
  vec3 dir;
  vec3 invDir;
};

bool BBoxIntersect(vec3 boundMin, vec3 boundMax, const Ray r, out Hit hit)
{
  vec3 tbot = r.invDir * (boundMin - r.origin);
  vec3 ttop = r.invDir * (boundMax - r.origin);
  vec3 tmin = min(ttop, tbot);
  vec3 tmax = max(ttop, tbot);
  vec2 t = max(tmin.xx, tmin.yz);
  float t0 = max(t.x, t.y);
  t = min(tmax.xx, tmax.yz);
  float t1 = min(t.x, t.y);
  hit.tmin = t0;
  hit.tmax = t1;
  return t1 > max(t0,0.0);
}

// As BBoxIntersect requires the inverse of the ray coords,
// this function is used to avoid numerical issues
void safe_0_vector(inout Ray ray)
{
  if(abs(ray.dir.x) < EPSILON) ray.dir.x = sign(ray.dir.x) * EPSILON;
  if(abs(ray.dir.y) < EPSILON) ray.dir.y = sign(ray.dir.y) * EPSILON;
  if(abs(ray.dir.z) < EPSILON) ray.dir.z = sign(ray.dir.z) * EPSILON;
}

float volume_shadow(vec3 posIS, vec3 lightDirNormIS)
{
  float shadow = 1.0;
  float opacity = 0.0;

  // modify sample distance with a random number between 1.5 and 3.0
  float sampleDistanceISVS_jitter = sampleDistanceISVS * mix(1.5, 3.0, random());
  float opacityPrev = texture2D(otexture, vec2(getTextureValue(posIS).r * oscale0 + oshift0, 0.5)).r;

  // in case the first sample near surface has a very tiled light ray, we need to offset start position
  posIS += sampleDistanceISVS_jitter * lightDirNormIS;

  // compute the start and end points for the ray
  Ray ray;
  Hit hit;
  ray.origin = posIS;
  ray.dir = lightDirNormIS;
  safe_0_vector(ray);
  ray.invDir = 1.0/ray.dir;

  if(!BBoxIntersect(vec3(0.0),vec3(1.0), ray, hit))
  {
    return 1.0;
  }
  float maxdist = hit.tmax;

  // interpolate shadow ray length between: 1 unit of sample distance in IS to SQRT3, based on globalIlluminationReach
  float maxgi = mix(sampleDistanceISVS_jitter,SQRT3,giReach);
  maxdist = min(maxdist,maxgi);
  if(maxdist < EPSILON) {
    return 1.0;
  }

  float current_dist = 0.0;
  float current_step = length(sampleDistanceISVS_jitter * lightDirNormIS);
  float clamped_step = 0.0;

  vec4 scalar = vec4(0.0);
  while(current_dist < maxdist)
  {
#ifdef vtkClippingPlanesOn
    vec3 posVC = IStoVC(posIS);
    for (int i = 0; i < clip_numPlanes; ++i)
    {
      if (dot(vec3(vClipPlaneOrigins[i] - posVC), vClipPlaneNormals[i]) > 0.0)
      {
        current_dist = maxdist;
      }
    }
#endif
    scalar = getTextureValue(posIS);
    opacity = texture2D(otexture, vec2(scalar.r * oscale0 + oshift0, 0.5)).r;
    #if defined(vtkGradientOpacityOn) && !defined(UseIndependentComponents)
      vec4 normal = computeNormal(posIS, vec3(1.0/vec3(volumeDimensions)));
      opacity *= computeGradientOpacityFactor(normal.w, goscale0, goshift0, gomin0, gomax0);
    #endif
    shadow *= 1.0 - opacity;

    // optimization: early termination
    if (shadow < EPSILON){
      return 0.0;
    }

    clamped_step = min(maxdist - current_dist, current_step);
    posIS += clamped_step * lightDirNormIS;
    current_dist += current_step;
  }

  return shadow;
}

vec3 applyShadowRay(vec3 tColor, vec3 posIS, vec3 viewDirectionVC)
{
  vec3 vertLight = vec3(0.0);
  vec3 secondary_contrib = vec3(0.0);
  // here we assume only positional light, no effect of cones
  for (int i = 0; i < lightNum; i++)
  {
    #if(vtkLightComplexity==3)
      if (lightPositional[i] == 1){
        vertLight = lightPositionVC[i] - IStoVC(posIS);
      }else{
        vertLight = - lightDirectionVC[i];
      }
    #else
      vertLight = - lightDirectionVC[i];
    #endif
    // here we assume achromatic light, only intensity
    float dDotL = dot(viewDirectionVC, normalize(vertLight));
    // isotropic scatter returns 0.5 instead of 1/4pi to increase intensity
    float phase_attenuation = 0.5;
    if (abs(anisotropy) > EPSILON){
      phase_attenuation = phase_function(dDotL);
    }
    float vol_shadow = volume_shadow(posIS, normalize(rotateToIDX(vertLight)));
    secondary_contrib += tColor * vDiffuse * lightColor[i] * vol_shadow * phase_attenuation;
    secondary_contrib += tColor * vAmbient;
  }
  return secondary_contrib;
}
#endif

//=======================================================================
// local ambient occlusion
#ifdef localAmbientOcclusionOn
vec3 sample_direction_uniform(int i)
{
  float rand = random() * 0.5;
  float theta = PI2 * (kernelSample[i][0] + rand);
  float phi = acos(2.0 * (kernelSample[i][1] + rand) -1.0) / 2.5;
  return normalize(vec3(cos(theta)*sin(phi), sin(theta)*sin(phi), cos(phi)));
}

// return a matrix that transform startDir into z axis; startDir should be normalized
mat3 zBaseRotationalMatrix(vec3 startDir){
  vec3 axis = cross(startDir, vec3(0.0,0.0,1.0));
  float cosA = startDir.z;
  float k = 1.0 / (1.0 + cosA);
  mat3 matrix = mat3((axis.x * axis.x * k) + cosA, (axis.y * axis.x * k) - axis.z, (axis.z * axis.x * k) + axis.y,
              (axis.x * axis.y * k) + axis.z, (axis.y * axis.y * k) + cosA, (axis.z * axis.y * k) - axis.x,
              (axis.x * axis.z * k) - axis.y, (axis.y * axis.z * k) + axis.x, (axis.z * axis.z * k) + cosA);
  return matrix;
}

float computeLAO(vec3 posIS, float op, vec3 lightDir, vec4 normal){
  // apply LAO only at selected locations, otherwise return full brightness
  if (normal.w > 0.0 && op > 0.05){
    float total_transmittance = 0.0;
    mat3 inverseRotateBasis = inverse(zBaseRotationalMatrix(normalize(-normal.xyz)));
    vec3 currPos, randomDirStep;
    float weight, transmittance, opacity;
    for (int i = 0; i < kernelSize; i++)
    {
      randomDirStep = inverseRotateBasis * sample_direction_uniform(i) * sampleDistanceIS;
      weight = 1.0 - dot(normalize(lightDir), normalize(randomDirStep));
      currPos = posIS;
      transmittance = 1.0;
      for (int j = 0; j < kernelRadius ; j++){
        currPos += randomDirStep;
        // check if it's at clipping plane, if so return full brightness
        if (all(greaterThan(currPos, vec3(EPSILON))) && all(lessThan(currPos,vec3(1.0-EPSILON)))){
          opacity = texture2D(otexture, vec2(getTextureValue(currPos).r * oscale0 + oshift0, 0.5)).r;
          #ifdef vtkGradientOpacityOn
             opacity *= computeGradientOpacityFactor(normal.w, goscale0, goshift0, gomin0, gomax0);
          #endif
          transmittance *= 1.0 - opacity;
        }
        else{
          break;
        }
      }
      total_transmittance += transmittance / float(kernelRadius) * weight;

      // early termination if fully translucent
      if (total_transmittance > 1.0 - EPSILON){
        return 1.0;
      }
    }
    // average transmittance and reduce variance
    return clamp(total_transmittance / float(kernelSize), 0.3, 1.0);
  } else {
    return 1.0;
  }
}
#endif

//=======================================================================
// surface light contribution
#if vtkLightComplexity > 0
  void applyLighting(inout vec3 tColor, vec4 normal)
  {
    vec3 diffuse = vec3(0.0, 0.0, 0.0);
    vec3 specular = vec3(0.0, 0.0, 0.0);
    float df, sf = 0.0;
    for (int i = 0; i < lightNum; i++){
        df = abs(dot(normal.rgb, -lightDirectionVC[i]));
        diffuse += df * lightColor[i];
        sf = pow( abs(dot(lightHalfAngleVC[i],normal.rgb)), vSpecularPower);
        specular += sf * lightColor[i];
    }
    tColor.rgb = tColor.rgb*(diffuse*vDiffuse + vAmbient) + specular*vSpecular;
  }
  #ifdef SurfaceShadowOn
  #if vtkLightComplexity < 3
    vec3 applyLightingDirectional(vec3 posIS, vec4 tColor, vec4 normal)
    {
      // everything in VC
      vec3 diffuse = vec3(0.0);
      vec3 specular = vec3(0.0);
      #ifdef localAmbientOcclusionOn
        vec3 ambient = vec3(0.0);
      #endif
      vec3 vertLightDirection;
      for (int i = 0; i < lightNum; i++){
        float ndotL,vdotR;
        vertLightDirection = lightDirectionVC[i];
        ndotL = dot(normal.xyz, vertLightDirection);
        if (ndotL < 0.0 && twoSidedLighting)
        {
          ndotL = -ndotL;
        }
        if (ndotL > 0.0)
        {
          diffuse += ndotL * lightColor[i];
          //specular
          vdotR = dot(-rayDirVC, normalize(2.0 * ndotL * -normal.xyz + vertLightDirection));
          if (vdotR > 0.0)
          {
            specular += pow(vdotR, vSpecularPower) * lightColor[i];
          }
        }
        #ifdef localAmbientOcclusionOn
            ambient += computeLAO(posIS, tColor.a, vertLightDirection, normal);
        #endif
      }
      #ifdef localAmbientOcclusionOn
        return tColor.rgb * (diffuse * vDiffuse + vAmbient * ambient) + specular*vSpecular;
      #else
        return tColor.rgb * (diffuse * vDiffuse + vAmbient) + specular*vSpecular;
      #endif
    }
  #else
    vec3 applyLightingPositional(vec3 posIS, vec4 tColor, vec4 normal, vec3 posVC)
    {
      // everything in VC
      vec3 diffuse = vec3(0.0);
      vec3 specular = vec3(0.0);
      #ifdef localAmbientOcclusionOn
        vec3 ambient = vec3(0.0);
      #endif
      vec3 vertLightDirection;
      for (int i = 0; i < lightNum; i++){
        float distance,attenuation,ndotL,vdotR;
        vec3 lightDir;
        if (lightPositional[i] == 1){
          lightDir = lightDirectionVC[i];
          vertLightDirection = posVC - lightPositionVC[i];
          distance = length(vertLightDirection);
          vertLightDirection = normalize(vertLightDirection);
          attenuation = 1.0 / (lightAttenuation[i].x
                              + lightAttenuation[i].y * distance
                              + lightAttenuation[i].z * distance * distance);
          // per OpenGL standard cone angle is 90 or less for a spot light
          if (lightConeAngle[i] <= 90.0){
            float coneDot = dot(vertLightDirection, lightDir);
            if (coneDot >= cos(radians(lightConeAngle[i]))){  // if inside cone
              attenuation = attenuation * pow(coneDot, lightExponent[i]);
            }
            else {
              attenuation = 0.0;
            }
          }
          ndotL = dot(normal.xyz, vertLightDirection);
          if (ndotL < 0.0 && twoSidedLighting)
          {
            ndotL = -ndotL;
          }
          if (ndotL > 0.0)
          {
            diffuse += ndotL * attenuation * lightColor[i];
            //specular
            vdotR = dot(-rayDirVC, normalize(2.0 * ndotL * -normal.xyz + vertLightDirection));
            if (vdotR > 0.0)
            {
              specular += pow(vdotR, vSpecularPower) * attenuation * lightColor[i];
            }
          }
          #ifdef localAmbientOcclusionOn
            ambient += computeLAO(posIS, tColor.a, vertLightDirection, normal);
          #endif
        } else {
          vertLightDirection = lightDirectionVC[i];
          ndotL = dot(normal.xyz, vertLightDirection);
          if (ndotL < 0.0 && twoSidedLighting)
          {
            ndotL = -ndotL;
          }
          if (ndotL > 0.0)
          {
            diffuse += ndotL * lightColor[i];
            //specular
            vdotR = dot(-rayDirVC, normalize(2.0 * ndotL * -normal.xyz + vertLightDirection));
            if (vdotR > 0.0)
            {
              specular += pow(vdotR, vSpecularPower) * lightColor[i];
            }
          }
          #ifdef localAmbientOcclusionOn
            ambient += computeLAO(posIS, tColor.a, vertLightDirection, normal);
          #endif
        }
      }
      #ifdef localAmbientOcclusionOn
        return tColor.rgb * (diffuse * vDiffuse + vAmbient * ambient) + specular*vSpecular;
      #else
        return tColor.rgb * (diffuse * vDiffuse + vAmbient) + specular*vSpecular;
      #endif
    }
  #endif
  #endif
#endif

// LAO of surface shadows and volume shadows only work with dependent components
vec3 applyAllLightning(vec3 tColor, float alpha, vec3 posIS, vec4 normalLight) {
  #if vtkLightComplexity > 0
    // surface shadows if needed
    #ifdef SurfaceShadowOn
      #if vtkLightComplexity < 3
        vec3 tColorS = applyLightingDirectional(posIS, vec4(tColor, alpha), normalLight);
      #else
        vec3 tColorS = applyLightingPositional(posIS, vec4(tColor, alpha), normalLight, IStoVC(posIS));
      #endif
    #endif

    // volume shadows if needed
    #ifdef VolumeShadowOn
      vec3 tColorVS = applyShadowRay(tColor, posIS, rayDirVC);
    #endif

    // merge
    #ifdef VolumeShadowOn
      #ifdef SurfaceShadowOn
        // surface shadows + volumetric shadows
        float vol_coef = volumetricScatteringBlending * (1.0 - alpha / 2.0) * (1.0 - atan(normalLight.w) * INV4PI);
        tColor = (1.0-vol_coef) * tColorS + vol_coef * tColorVS;
      #else
        // volumetric shadows only
        tColor = tColorVS;
      #endif
    #else
      #ifdef SurfaceShadowOn
        // surface shadows only
        tColor = tColorS;
      #else
        // no shadows
        applyLighting(tColor, normal3);
      #endif
    #endif
  #endif
  return tColor;
}

  
vec4 getColorForValue(vec4 tValue, vec3 posIS, vec3 tstep)
{

// If labeloutline and not the edge labelmap, since in the edge labelmap blend
// we need the underlying data to sample through
#if defined(vtkImageLabelOutlineOn) && !defined(vtkLabelEdgeProjectionOn)
  vec3 centerPosIS = fragCoordToIndexSpace(gl_FragCoord); // pos in texture space
  vec4 centerValue = getTextureValue(centerPosIS);
  bool pixelOnBorder = false;
  vec4 tColor = texture2D(ctexture, vec2(centerValue.r * cscale0 + cshift0, 0.5));

  // Get alpha of segment from opacity function.
  tColor.a = texture2D(otexture, vec2(centerValue.r * oscale0 + oshift0, 0.5)).r;

  int segmentIndex = int(centerValue.r * 255.0);
  
  // Use texture sampling for outlineThickness
  float textureCoordinate = float(segmentIndex - 1) / 1024.0;
  float textureValue = texture2D(ttexture, vec2(textureCoordinate, 0.5)).r;

  int actualThickness = int(textureValue * 255.0);


  // If it is the background (segment index 0), we should quickly bail out. 
  // Previously, this was determined by tColor.a, which was incorrect as it
  // prevented the outline from appearing when the fill is 0.
  if (segmentIndex == 0){
    return vec4(0, 0, 0, 0);
  }

  // Only perform outline check on fragments rendering voxels that aren't invisible.
  // Saves a bunch of needless checks on the background.
  // TODO define epsilon when building shader?
  for (int i = -actualThickness; i <= actualThickness; i++) {
    for (int j = -actualThickness; j <= actualThickness; j++) {
      if (i == 0 || j == 0) {
        continue;
      }

      vec4 neighborPixelCoord = vec4(gl_FragCoord.x + float(i),
        gl_FragCoord.y + float(j),
        gl_FragCoord.z, gl_FragCoord.w);

      vec3 neighborPosIS = fragCoordToIndexSpace(neighborPixelCoord);
      vec4 value = getTextureValue(neighborPosIS);

      // If any of my neighbours are not the same value as I
      // am, this means I am on the border of the segment.
      // We can break the loops
      if (any(notEqual(value, centerValue))) {
        pixelOnBorder = true;
        break;
      }
    }

    if (pixelOnBorder == true) {
      break;
    }
  }

  // If I am on the border, I am displayed at full opacity
  if (pixelOnBorder == true) {
    tColor.a = outlineOpacity;
  }

  return tColor;

#else
  // compute the normal and gradient magnitude if needed
  // We compute it as a vec4 if possible otherwise a mat4

  #ifdef UseIndependentComponents

    // sample textures
    vec3 tColor0 = texture2D(ctexture, vec2(tValue.r * cscale0 + cshift0, height0)).rgb;
    float pwfValue0 = texture2D(otexture, vec2(tValue.r * oscale0 + oshift0, height0)).r;

    #if vtkNumComponents > 1
      vec3 tColor1 = texture2D(ctexture, vec2(tValue.g * cscale1 + cshift1, height1)).rgb;
      float pwfValue1 = texture2D(otexture, vec2(tValue.g * oscale1 + oshift1, height1)).r;

      #if vtkNumComponents > 2
        vec3 tColor2 = texture2D(ctexture, vec2(tValue.b * cscale2 + cshift2, height2)).rgb;
        float pwfValue2 = texture2D(otexture, vec2(tValue.b * oscale2 + oshift2, height2)).r;

        #if vtkNumComponents > 3
          vec3 tColor3 = texture2D(ctexture, vec2(tValue.a * cscale3 + cshift3, height3)).rgb;
          float pwfValue3 = texture2D(otexture, vec2(tValue.a * oscale3 + oshift3, height3)).r;
        #endif
      #endif
    #endif

    #if !defined(vtkCustomComponentsColorMix)
      // default path for component color mix

      // compute the normal vectors as needed
      #if (vtkLightComplexity > 0) || defined(vtkGradientOpacityOn)
        mat4 normalMat = computeMat4Normal(posIS, tValue, tstep);
      #endif

      // compute gradient opacity factors as needed
      vec4 goFactor = vec4(1.0, 1.0 ,1.0 ,1.0);
      #if defined(vtkGradientOpacityOn)
        #if !defined(vtkComponent0Proportional)
          goFactor.x =
            computeGradientOpacityFactor(normalMat[0].a, goscale0, goshift0, gomin0, gomax0);
        #endif
        #if vtkNumComponents > 1
          #if !defined(vtkComponent1Proportional)
            goFactor.y =
              computeGradientOpacityFactor(normalMat[1].a, goscale1, goshift1, gomin1, gomax1);
          #endif
          #if vtkNumComponents > 2
            #if !defined(vtkComponent2Proportional)
              goFactor.z =
                computeGradientOpacityFactor(normalMat[2].a, goscale2, goshift2, gomin2, gomax2);
            #endif
            #if vtkNumComponents > 3
              #if !defined(vtkComponent3Proportional)
                goFactor.w =
                  computeGradientOpacityFactor(normalMat[3].a, goscale3, goshift3, gomin3, gomax3);
              #endif
            #endif
          #endif
        #endif
      #endif

      // process color and opacity for each component
      #if !defined(vtkComponent0Proportional)
        float alpha = goFactor.x*mix0*pwfValue0;
        #if vtkLightComplexity > 0
          applyLighting(tColor0, normalMat[0]);
        #endif
      #else
        tColor0 *= pwfValue0;
        float alpha = mix(pwfValue0, 1.0, (1.0 - mix0));
      #endif

      #if vtkNumComponents > 1
        #if !defined(vtkComponent1Proportional)
          alpha += goFactor.y*mix1*pwfValue1;
          #if vtkLightComplexity > 0
            applyLighting(tColor1, normalMat[1]);
          #endif
        #else
          tColor1 *= pwfValue1;
          alpha *= mix(pwfValue1, 1.0, (1.0 - mix1));
        #endif

        #if vtkNumComponents > 2
          #if !defined(vtkComponent2Proportional)
            alpha += goFactor.z*mix2*pwfValue2;
            #if vtkLightComplexity > 0
              applyLighting(tColor2, normalMat[2]);
            #endif
          #else
            tColor2 *= pwfValue2;
            alpha *= mix(pwfValue2, 1.0, (1.0 - mix2));
          #endif
        #endif

        #if vtkNumComponents > 3
          #if !defined(vtkComponent3Proportional)
            alpha += goFactor.w*mix3*pwfValue3;
            #if vtkLightComplexity > 0
              applyLighting(tColor3, normalMat[3]);
            #endif
          #else
            tColor3 *= pwfValue3;
            alpha *= mix(pwfValue3, 1.0, (1.0 - mix3));
          #endif
        #endif
      #endif

      // perform final independent blend
      vec3 tColor = mix0 * tColor0;
      #if vtkNumComponents > 1
        tColor += mix1 * tColor1;
        #if vtkNumComponents > 2
          tColor += mix2 * tColor2;
          #if vtkNumComponents > 3
            tColor += mix3 * tColor3;
          #endif
        #endif
      #endif

      return vec4(tColor, alpha);
    #else
      /*
       * Mix the color information from all the independent components to get a single rgba output
       * Gradient opactity factors and normals are not computed
       *
       * You can compute these using:
       * - computeMat4Normal: always available, compute normal only for non proportional components, used by default independent component mix
       * - computeDensityNormal & computeNormalForDensity: available if ((LightComplexity > 0) || GradientOpacityOn) && ComputeNormalFromOpacity),
       *                                                   used by dependent component color mix, see code for Additive preset in OpenGl/VolumeMapper
       * - computeGradientOpacityFactor: always available, used in a lot of places
       *
       * Using applyAllLightning() is advised for shading but some features don't work well with it (volume shadows, LAO)
       * mix0, mix1, ... are defined for each component that is used and correspond to the componentWeight
       */
      //VTK::CustomComponentsColorMix::Impl
    #endif
  #else
    // dependent components

    // compute normal if needed
    #if (vtkLightComplexity > 0) || defined(vtkGradientOpacityOn)
      // use component 3 of the opacity texture as getTextureValue() sets alpha to the opacity value
      #ifdef vtkComputeNormalFromOpacity
        vec3 scalarInterp[2];
        vec4 normal0 = computeNormalForDensity(posIS, tstep, scalarInterp, 3);
      #else
        vec4 normal0 = computeNormal(posIS, tstep);
      #endif
    #endif

    // compute gradient opacity factor enabled
    #if defined(vtkGradientOpacityOn)
      float gradientOpacity = computeGradientOpacityFactor(normal0.a, goscale0, goshift0, gomin0, gomax0);
    #else
      const float gradientOpacity = 1.0;
    #endif

    // get color and opacity
    #if vtkNumComponents == 1
      vec3 tColor = texture2D(ctexture, vec2(tValue.r * cscale0 + cshift0, 0.5)).rgb;
      float alpha = gradientOpacity*texture2D(otexture, vec2(tValue.r * oscale0 + oshift0, 0.5)).r;
      if (alpha < EPSILON){
        return vec4(0.0);
      }
    #endif
    #if vtkNumComponents == 2
      vec3 tColor = vec3(tValue.r * cscale0 + cshift0);
      float alpha = gradientOpacity*texture2D(otexture, vec2(tValue.a * oscale1 + oshift1, 0.5)).r;
    #endif
    #if vtkNumComponents == 3
      vec3 tColor;
      tColor.r = tValue.r * cscale0 + cshift0;
      tColor.g = tValue.g * cscale1 + cshift1;
      tColor.b = tValue.b * cscale2 + cshift2;
      float alpha = gradientOpacity*texture2D(otexture, vec2(tValue.a * oscale0 + oshift0, 0.5)).r;
    #endif
    #if vtkNumComponents == 4
      vec3 tColor;
      tColor.r = tValue.r * cscale0 + cshift0;
      tColor.g = tValue.g * cscale1 + cshift1;
      tColor.b = tValue.b * cscale2 + cshift2;
      float alpha = gradientOpacity*texture2D(otexture, vec2(tValue.a * oscale3 + oshift3, 0.5)).r;
    #endif

    // lighting
    #if (vtkLightComplexity > 0)
      #ifdef vtkComputeNormalFromOpacity
        vec4 normalLight;
        if (!all(equal(normal0, vec4(0.0)))) {
          scalarInterp[0] = scalarInterp[0] * oscale0 + oshift0;
          scalarInterp[1] = scalarInterp[1] * oscale0 + oshift0;
          normalLight = computeDensityNormal(scalarInterp, 0.5, gradientOpacity);
          if (all(equal(normalLight, vec4(0.0)))) {
            normalLight = normal0;
          }
        }
      #else
        vec4 normalLight = normal0;
      #endif
      tColor = applyAllLightning(tColor, alpha, posIS, normalLight);
    #endif

    return vec4(tColor, alpha);
  #endif // dependent
#endif
}

bool valueWithinScalarRange(vec4 val, vec4 min, vec4 max) {
  bool withinRange = false;
  #if vtkNumComponents == 1
    if (val.r >= min.r && val.r <= max.r) {
      withinRange = true;
    }
  #else
    #ifdef UseIndependentComponents
      #if vtkNumComponents == 2
        if (val.r >= min.r && val.r <= max.r &&
            val.g >= min.g && val.g <= max.g) {
          withinRange = true;
        }
      #else
        if (all(greaterThanEqual(val, ipScalarRangeMin)) &&
            all(lessThanEqual(val, ipScalarRangeMax))) {
          withinRange = true;
        }
      #endif
    #endif
  #endif
  return withinRange;
}

#if vtkBlendMode == 6 
bool checkOnEdgeForNeighbor(int i, int j, int s, vec3 stepIS) {
    vec4 neighborPixelCoord = vec4(gl_FragCoord.x + float(i), gl_FragCoord.y + float(j), gl_FragCoord.z, gl_FragCoord.w);
    vec3 originalNeighborPosIS = fragCoordToIndexSpace(neighborPixelCoord);

    bool justSawIt = false;

    vec3 neighborPosIS = originalNeighborPosIS;

    float stepsTraveled = 0.0;


    // float neighborValue;
    for (int k = 0; k < //VTK::MaximumSamplesValue /2 ; ++k) {
        ivec3 texCoord = ivec3(neighborPosIS * vec3(volumeDimensions));
        vec4 texValue = texelFetch(texture1, texCoord, 0);

        if (int(texValue.g) == s) {
            justSawIt = true;
            break;
        }
        neighborPosIS += stepIS;
    }

    if (justSawIt){
      return false;
    }

   
    neighborPosIS = originalNeighborPosIS;
    for (int k = 0; k < //VTK::MaximumSamplesValue /2 ; ++k) {
        ivec3 texCoord = ivec3(neighborPosIS * vec3(volumeDimensions));
        vec4 texValue = texelFetch(texture1, texCoord, 0);

        if (int(texValue.g) == s) {
            justSawIt = true;
            break;
        }
        neighborPosIS -= stepIS;
    }


    if (!justSawIt) {
        // onedge
        vec3 tColorSegment = texture2D(ctexture, vec2(float(s) * cscale1 + cshift1, height1)).rgb;
        float pwfValueSegment = texture2D(otexture, vec2(float(s) * oscale1 + oshift1, height1)).r;
        gl_FragData[0] = vec4(tColorSegment, pwfValueSegment);
        return true;
    }

    // not on edge
    return false;
}

#endif


//=======================================================================
// Apply the specified blend mode operation along the ray's path.
//
void applyBlend(vec3 posIS, vec3 endIS, vec3 tdims)
{
  vec3 tstep = 1.0/tdims;

  // start slightly inside and apply some jitter
  vec3 delta = endIS - posIS;
  vec3 stepIS = normalize(delta)*sampleDistanceIS;
  float raySteps = length(delta)/sampleDistanceIS;

  // Initialize arrays to false
  // avoid 0.0 jitter
  float jitter = 0.01 + 0.99*texture2D(jtexture, gl_FragCoord.xy/32.0).r;
  float stepsTraveled = jitter;

  // local vars for the loop
  vec4 color = vec4(0.0, 0.0, 0.0, 0.0);
  vec4 tValue;
  vec4 tColor;

  // if we have less than one step then pick the middle point
  // as our value
  // if (raySteps <= 1.0)
  // {
  //   posIS = (posIS + endIS)*0.5;
  // }

  // Perform initial step at the volume boundary
  // compute the scalar
  tValue = getTextureValue(posIS);
  
  #if vtkBlendMode == 6 
    if (raySteps <= 1.0)
    {
      gl_FragData[0] = getColorForValue(tValue, posIS, tstep);
      return;
    }

    vec4 value = tValue;
    posIS += (jitter*stepIS);
    vec3 maxPosIS = posIS; // Store the position of the max value
    int segmentIndex = int(value.g);
    bool originalPosHasSeenNonZero = false;

    uint bitmask = 0u;

    if (segmentIndex != 0) {
      // Tried using the segment index in an boolean array but reading 
      // from the array by dynamic indexing was horrondously slow
      // so use bit masking instead and assign 1 to the bit corresponding to the segment index
      // and later check if the bit is set via bit operations
      setBit(segmentIndex);
    }
    
    // Sample along the ray until MaximumSamplesValue,
    // ending slightly inside the total distance
    for (int i = 0; i < //VTK::MaximumSamplesValue ; ++i)
    {
      // If we have reached the last step, break
      if (stepsTraveled + 1.0 >= raySteps) { break; }

      // compute the scalar
      tValue = getTextureValue(posIS);
      segmentIndex = int(tValue.g);

      if (segmentIndex != 0) {
        originalPosHasSeenNonZero = true;
        setBit(segmentIndex);
      }

      if (tValue.r > value.r) {
        value =  tValue; // Update the max value
        maxPosIS = posIS; // Update the position where max occurred
      }

      // Otherwise, continue along the ray
      stepsTraveled++;
      posIS += stepIS;
    }

    // Perform the last step along the ray using the
    // residual distance
    posIS = endIS;
    tValue = getTextureValue(posIS);

    if (tValue.r > value.r) {
      value = tValue; // Update the max value
      maxPosIS = posIS; // Update the position where max occurred
    }  

    // If we have not seen any non-zero segments, we can return early
    // and grab color from the actual center value first component (image)
    if (!originalPosHasSeenNonZero) {
      gl_FragData[0] = getColorForValue(value, maxPosIS, tstep);
      return;
    }

    // probably we can make this configurable but for now we will use the same
    // sample distance as the original sample distance
    float neighborSampleDistanceIS = sampleDistanceIS;

    vec3 neighborRayStepsIS = stepIS;
    float neighborRaySteps = raySteps;
    bool shouldLookInAllNeighbors = false;

    float minVoxelSpacing = min(volumeSpacings[0], min(volumeSpacings[1], volumeSpacings[2]));
    vec4 base = vec4(gl_FragCoord.x, gl_FragCoord.y, gl_FragCoord.z, gl_FragCoord.w);

    vec4 baseXPlus = vec4(gl_FragCoord.x + 1.0, gl_FragCoord.y, gl_FragCoord.z, gl_FragCoord.w);
    vec4 baseYPlus = vec4(gl_FragCoord.x, gl_FragCoord.y + 1.0, gl_FragCoord.z, gl_FragCoord.w);

    vec3 baseWorld = fragCoordToWorld(base);
    vec3 baseXPlusWorld = fragCoordToWorld(baseXPlus);
    vec3 baseYPlusWorld = fragCoordToWorld(baseYPlus);

    float XPlusDiff = length(baseXPlusWorld - baseWorld);
    float YPlusDiff = length(baseYPlusWorld - baseWorld);

    float minFragSpacingWorld = min(XPlusDiff, YPlusDiff);

    for (int s = 1; s < MAX_SEGMENT_INDEX; s++) {
      // bail out quickly if the segment index has not 
      // been seen by the center segment
      if (!isBitSet(s)) {
       continue;
      }

      // Use texture sampling for outlineThickness so that we can have 
      // per segment thickness
      float textureCoordinate = float(s - 1) / 1024.0;
      float textureValue = texture2D(ttexture, vec2(textureCoordinate, 0.5)).r;

      int actualThickness = int(textureValue * 255.0);

      // check the extreme points in the neighborhood since there is a better
      // chance of finding the edge there, so that we can bail out 
      // faster if we find the edge
      bool onEdge =
          checkOnEdgeForNeighbor(-actualThickness, -actualThickness, s, stepIS) ||
          checkOnEdgeForNeighbor(actualThickness, actualThickness, s, stepIS) ||
          checkOnEdgeForNeighbor(actualThickness, -actualThickness, s, stepIS) ||
          checkOnEdgeForNeighbor(-actualThickness, +actualThickness, s, stepIS);

      if (onEdge) {
        return;
      }

      // since the next step is computationally expensive, we need to perform
      // some optimizations to avoid it if possible. One of the optimizations
      // is to check the whether the minimum of the voxel spacing is greater than 
      // the 2 * the thickness of the outline segment. If that is the case
      // then we can safely skip the next step since we can be sure that the
      // the previous 4 checks on the extreme points would caught the entirety 
      // of the all the fragments inside. i.e., this happens when we zoom out, 
      if (minVoxelSpacing > (2.0 * float(actualThickness) - 1.0) * minFragSpacingWorld) {
        continue;
      }
      
      // Loop through the rest, skipping the processed extremes and the center
      for (int i = -actualThickness; i <= actualThickness; i++) {
            for (int j = -actualThickness; j <= actualThickness; j++) {
                if (i == 0 && j == 0) continue; // Skip the center
                if (abs(i) == actualThickness && abs(j) == actualThickness) continue; // Skip corners
                if (checkOnEdgeForNeighbor(i, j, s, stepIS )) {
                    return;
                }
          }
      }
    }

    vec3 tColor0 = texture2D(ctexture, vec2(value.r * cscale0 + cshift0, height0)).rgb;
    float pwfValue0 = texture2D(otexture, vec2(value.r * oscale0 + oshift0, height0)).r;
    gl_FragData[0] = vec4(tColor0, pwfValue0);
  #endif
  #if vtkBlendMode == 0 // COMPOSITE_BLEND
    // now map through opacity and color
    tColor = getColorForValue(tValue, posIS, tstep);

    // handle very thin volumes
    if (raySteps <= 1.0)
    {
      tColor.a = 1.0 - pow(1.0 - tColor.a, raySteps);
      gl_FragData[0] = tColor;
      return;
    }

    tColor.a = 1.0 - pow(1.0 - tColor.a, jitter);
    color = vec4(tColor.rgb*tColor.a, tColor.a);
    posIS += (jitter*stepIS);

    for (int i = 0; i < //VTK::MaximumSamplesValue ; ++i)
    {
      if (stepsTraveled + 1.0 >= raySteps) { break; }

      // compute the scalar
      tValue = getTextureValue(posIS);

      // now map through opacity and color
      tColor = getColorForValue(tValue, posIS, tstep);

      float mix = (1.0 - color.a);

      // this line should not be needed but nvidia seems to not handle
      // the break correctly on windows/chrome 58 angle
      //mix = mix * sign(max(raySteps - stepsTraveled - 1.0, 0.0));

      color = color + vec4(tColor.rgb*tColor.a, tColor.a)*mix;
      stepsTraveled++;
      posIS += stepIS;
      if (color.a > 0.99) { color.a = 1.0; break; }
    }

    if (color.a < 0.99 && (raySteps - stepsTraveled) > 0.0)
    {
      posIS = endIS;

      // compute the scalar
      tValue = getTextureValue(posIS);

      // now map through opacity and color
      tColor = getColorForValue(tValue, posIS, tstep);
      tColor.a = 1.0 - pow(1.0 - tColor.a, raySteps - stepsTraveled);

      float mix = (1.0 - color.a);
      color = color + vec4(tColor.rgb*tColor.a, tColor.a)*mix;
    }

    gl_FragData[0] = vec4(color.rgb/color.a, color.a);
  #endif
  #if vtkBlendMode == 1 || vtkBlendMode == 2
    // MAXIMUM_INTENSITY_BLEND || MINIMUM_INTENSITY_BLEND
    // Find maximum/minimum intensity along the ray.

    // Define the operation we will use (min or max)
    #if vtkBlendMode == 1
    #define OP max
    #else
    #define OP min
    #endif

    // If the clipping range is shorter than the sample distance
    // we can skip the sampling loop along the ray.
    if (raySteps <= 1.0)
    {
      gl_FragData[0] = getColorForValue(tValue, posIS, tstep);
      return;
    }

    vec4 value = tValue;
    posIS += (jitter*stepIS);

    // Sample along the ray until MaximumSamplesValue,
    // ending slightly inside the total distance
    for (int i = 0; i < //VTK::MaximumSamplesValue ; ++i)
    {
      // If we have reached the last step, break
      if (stepsTraveled + 1.0 >= raySteps) { break; }

      // compute the scalar
      tValue = getTextureValue(posIS);

      // Update the maximum value if necessary
      value = OP(tValue, value);

      // Otherwise, continue along the ray
      stepsTraveled++;
      posIS += stepIS;
    }

    // Perform the last step along the ray using the
    // residual distance
    posIS = endIS;
    tValue = getTextureValue(posIS);
    value = OP(tValue, value);

    // Now map through opacity and color
    gl_FragData[0] = getColorForValue(value, posIS, tstep);
  #endif
  #if vtkBlendMode == 3 || vtkBlendMode == 4 //AVERAGE_INTENSITY_BLEND || ADDITIVE_BLEND
    vec4 sum = vec4(0.);

    if (valueWithinScalarRange(tValue, ipScalarRangeMin, ipScalarRangeMax)) {
      sum += tValue;
    }

    if (raySteps <= 1.0) {
      gl_FragData[0] = getColorForValue(sum, posIS, tstep);
      return;
    }

    posIS += (jitter*stepIS);

    // Sample along the ray until MaximumSamplesValue,
    // ending slightly inside the total distance
    for (int i = 0; i < //VTK::MaximumSamplesValue ; ++i)
    {
      // If we have reached the last step, break
      if (stepsTraveled + 1.0 >= raySteps) { break; }

      // compute the scalar
      tValue = getTextureValue(posIS);

      // One can control the scalar range by setting the AverageIPScalarRange to disregard scalar values, not in the range of interest, from the average computation.
      // Notes:
      // - We are comparing all values in the texture to see if any of them
      //   are outside of the scalar range. In the future we might want to allow
      //   scalar ranges for each component.
      if (valueWithinScalarRange(tValue, ipScalarRangeMin, ipScalarRangeMax)) {
        // Sum the values across each step in the path
        sum += tValue;
      }
      stepsTraveled++;
      posIS += stepIS;
    }

    // Perform the last step along the ray using the
    // residual distance
    posIS = endIS;

    // compute the scalar
    tValue = getTextureValue(posIS);

    // One can control the scalar range by setting the IPScalarRange to disregard scalar values, not in the range of interest, from the average computation
    if (valueWithinScalarRange(tValue, ipScalarRangeMin, ipScalarRangeMax)) {
      sum += tValue;

      stepsTraveled++;
    }

    #if vtkBlendMode == 3 // Average
      sum /= vec4(stepsTraveled, stepsTraveled, stepsTraveled, 1.0);
    #endif

    gl_FragData[0] = getColorForValue(sum, posIS, tstep);
  #endif
  #if vtkBlendMode == 5 // RADON
    float normalizedRayIntensity = 1.0;

    // handle very thin volumes
    if (raySteps <= 1.0)
    {
      tValue = getTextureValue(posIS);
      normalizedRayIntensity = normalizedRayIntensity - sampleDistance*texture2D(otexture, vec2(tValue.r * oscale0 + oshift0, 0.5)).r;
      gl_FragData[0] = texture2D(ctexture, vec2(normalizedRayIntensity, 0.5));
      return;
    }

    posIS += (jitter*stepIS);

    for (int i = 0; i < //VTK::MaximumSamplesValue ; ++i)
    {
      if (stepsTraveled + 1.0 >= raySteps) { break; }

      // compute the scalar value
      tValue = getTextureValue(posIS);

      // Convert scalar value to normalizedRayIntensity coefficient and accumulate normalizedRayIntensity
      normalizedRayIntensity = normalizedRayIntensity - sampleDistance*texture2D(otexture, vec2(tValue.r * oscale0 + oshift0, 0.5)).r;

      posIS += stepIS;
      stepsTraveled++;
    }

    // map normalizedRayIntensity to color
    gl_FragData[0] = texture2D(ctexture, vec2(normalizedRayIntensity , 0.5));

  #endif
}

//=======================================================================
// Compute a new start and end point for a given ray based
// on the provided bounded clipping plane (aka a rectangle)
void getRayPointIntersectionBounds(
  vec3 rayPos, vec3 rayDir,
  vec3 planeDir, float planeDist,
  inout vec2 tbounds, vec3 vPlaneX, vec3 vPlaneY,
  float vSize1, float vSize2)
{
  float result = dot(rayDir, planeDir);
  if (abs(result) < 1e-6)
  {
    return;
  }
  result = -1.0 * (dot(rayPos, planeDir) + planeDist) / result;
  vec3 xposVC = rayPos + rayDir*result;
  vec3 vxpos = xposVC - vOriginVC;
  vec2 vpos = vec2(
    dot(vxpos, vPlaneX),
    dot(vxpos, vPlaneY));

  // on some apple nvidia systems this does not work
  // if (vpos.x < 0.0 || vpos.x > vSize1 ||
  //     vpos.y < 0.0 || vpos.y > vSize2)
  // even just
  // if (vpos.x < 0.0 || vpos.y < 0.0)
  // fails
  // so instead we compute a value that represents in and out
  //and then compute the return using this value
  float xcheck = max(0.0, vpos.x * (vpos.x - vSize1)); //  0 means in bounds
  float check = sign(max(xcheck, vpos.y * (vpos.y - vSize2))); //  0 means in bounds, 1 = out

  tbounds = mix(
   vec2(min(tbounds.x, result), max(tbounds.y, result)), // in value
   tbounds, // out value
   check);  // 0 in 1 out
}

//=======================================================================
// given a
// - ray direction (rayDir)
// - starting point (vertexVCVSOutput)
// - bounding planes of the volume
// - optionally depth buffer values
// - far clipping plane
// compute the start/end distances of the ray we need to cast
vec2 computeRayDistances(vec3 rayDir, vec3 tdims)
{
  vec2 dists = vec2(100.0*camFar, -1.0);

  vec3 vSize = vSpacing*tdims;

  // all this is in View Coordinates
  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,
    vPlaneNormal0, vPlaneDistance0, dists, vPlaneNormal2, vPlaneNormal4,
    vSize.y, vSize.z);
  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,
    vPlaneNormal1, vPlaneDistance1, dists, vPlaneNormal2, vPlaneNormal4,
    vSize.y, vSize.z);
  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,
    vPlaneNormal2, vPlaneDistance2, dists, vPlaneNormal0, vPlaneNormal4,
    vSize.x, vSize.z);
  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,
    vPlaneNormal3, vPlaneDistance3, dists, vPlaneNormal0, vPlaneNormal4,
    vSize.x, vSize.z);
  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,
    vPlaneNormal4, vPlaneDistance4, dists, vPlaneNormal0, vPlaneNormal2,
    vSize.x, vSize.y);
  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,
    vPlaneNormal5, vPlaneDistance5, dists, vPlaneNormal0, vPlaneNormal2,
    vSize.x, vSize.y);

  //VTK::ClipPlane::Impl

  // do not go behind front clipping plane
  dists.x = max(0.0,dists.x);

  // do not go PAST far clipping plane
  float farDist = -camThick/rayDir.z;
  dists.y = min(farDist,dists.y);

  // Do not go past the zbuffer value if set
  // This is used for intermixing opaque geometry
  //VTK::ZBuffer::Impl

  return dists;
}

//=======================================================================
// Compute the index space starting position (pos) and end
// position
//
void computeIndexSpaceValues(out vec3 pos, out vec3 endPos, vec3 rayDir, vec2 dists)
{
  // compute starting and ending values in volume space
  pos = vertexVCVSOutput + dists.x*rayDir;
  pos = pos - vOriginVC;
  // convert to volume basis and origin
  pos = vec3(
    dot(pos, vPlaneNormal0),
    dot(pos, vPlaneNormal2),
    dot(pos, vPlaneNormal4));

  endPos = vertexVCVSOutput + dists.y*rayDir;
  endPos = endPos - vOriginVC;
  endPos = vec3(
    dot(endPos, vPlaneNormal0),
    dot(endPos, vPlaneNormal2),
    dot(endPos, vPlaneNormal4));

  float delta = length(endPos - pos);

  pos *= vVCToIJK;
  endPos *= vVCToIJK;

  float delta2 = length(endPos - pos);
  sampleDistanceIS = sampleDistance*delta2/delta;
  #ifdef VolumeShadowOn
    sampleDistanceISVS = sampleDistanceIS * volumeShadowSamplingDistFactor;
  #endif
}

void main()
{

  if (cameraParallel == 1)
  {
    // Camera is parallel, so the rayDir is just the direction of the camera.
    rayDirVC = vec3(0.0, 0.0, -1.0);
  } else {
    // camera is at 0,0,0 so rayDir for perspective is just the vc coord
    rayDirVC = normalize(vertexVCVSOutput);
  }

  vec3 tdims = vec3(volumeDimensions);

  // compute the start and end points for the ray
  vec2 rayStartEndDistancesVC = computeRayDistances(rayDirVC, tdims);

  // do we need to composite? aka does the ray have any length
  // If not, bail out early
  if (rayStartEndDistancesVC.y <= rayStartEndDistancesVC.x)
  {
    discard;
  }

  // IS = Index Space
  vec3 posIS;
  vec3 endIS;
  computeIndexSpaceValues(posIS, endIS, rayDirVC, rayStartEndDistancesVC);

  // Perform the blending operation along the ray
  applyBlend(posIS, endIS, tdims);
}
`;const{vtkWarningMacro:are,vtkErrorMacro:nE}=Bi;function ire(t){switch(t){case F2.CUSTOM:return"//VTK::CustomColorMix";case F2.ADDITIVE:return`
        // compute normals
        mat4 normalMat = computeMat4Normal(posIS, tValue, tstep);
        #if (vtkLightComplexity > 0) && defined(vtkComputeNormalFromOpacity)
          vec3 scalarInterp0[2];
          vec4 normalLight0 = computeNormalForDensity(posIS, tstep, scalarInterp0, 0);
          scalarInterp0[0] = scalarInterp0[0] * oscale0 + oshift0;
          scalarInterp0[1] = scalarInterp0[1] * oscale0 + oshift0;
          normalLight0 = computeDensityNormal(scalarInterp0, height0, 1.0);

          vec3 scalarInterp1[2];
          vec4 normalLight1 = computeNormalForDensity(posIS, tstep, scalarInterp1, 1);
          scalarInterp1[0] = scalarInterp1[0] * oscale1 + oshift1;
          scalarInterp1[1] = scalarInterp1[1] * oscale1 + oshift1;
          normalLight1 = computeDensityNormal(scalarInterp1, height1, 1.0);
        #else
          vec4 normalLight0 = normalMat[0];
          vec4 normalLight1 = normalMat[1];
        #endif

        // compute opacities
        float opacity0 = pwfValue0;
        float opacity1 = pwfValue1;
        #ifdef vtkGradientOpacityOn
          float gof0 = computeGradientOpacityFactor(normalMat[0].a, goscale0, goshift0, gomin0, gomax0);
          opacity0 *= gof0;
          float gof1 = computeGradientOpacityFactor(normalMat[1].a, goscale1, goshift1, gomin1, gomax1);
          opacity1 *= gof1;
        #endif
        float opacitySum = opacity0 + opacity1;
        if (opacitySum <= 0.0) {
          return vec4(0.0);
        }

        // mix the colors and opacities
        tColor0 = applyAllLightning(tColor0, opacity0, posIS, normalLight0);
        tColor1 = applyAllLightning(tColor1, opacity1, posIS, normalLight1);
        vec3 mixedColor = (opacity0 * tColor0 + opacity1 * tColor1) / opacitySum;
        return vec4(mixedColor, min(1.0, opacitySum));
`;case F2.COLORIZE:return`
        // compute normals
        mat4 normalMat = computeMat4Normal(posIS, tValue, tstep);
        #if (vtkLightComplexity > 0) && defined(vtkComputeNormalFromOpacity)
          vec3 scalarInterp0[2];
          vec4 normalLight0 = computeNormalForDensity(posIS, tstep, scalarInterp0, 0);
          scalarInterp0[0] = scalarInterp0[0] * oscale0 + oshift0;
          scalarInterp0[1] = scalarInterp0[1] * oscale0 + oshift0;
          normalLight0 = computeDensityNormal(scalarInterp0, height0, 1.0);
        #else
          vec4 normalLight0 = normalMat[0];
        #endif

        // compute opacities
        float opacity0 = pwfValue0;
        #ifdef vtkGradientOpacityOn
          float gof0 = computeGradientOpacityFactor(normalMat[0].a, goscale0, goshift0, gomin0, gomax0);
          opacity0 *= gof0;
        #endif

        // mix the colors and opacities
        vec3 color = tColor0 * mix(vec3(1.0), tColor1, pwfValue1);
        color = applyAllLightning(color, opacity0, posIS, normalLight0);
        return vec4(color, opacity0);
`;default:return null}}function ore(t,e){e.classHierarchy.push("vtkOpenGLVolumeMapper");function n(a){[e._scalars,e._scalarOpacityFunc,e._colorTransferFunc,e._labelOutlineThicknessArray].forEach(i=>a.unregisterGraphicsResourceUser(i,t))}t.buildPass=()=>{e.zBufferTexture=null},t.zBufferPass=(a,i)=>{if(a){const o=i.getZBufferTexture();o!==e.zBufferTexture&&(e.zBufferTexture=o)}},t.opaqueZBufferPass=(a,i)=>t.zBufferPass(a,i),t.volumePass=(a,i)=>{if(a){const o=e._openGLRenderWindow;e._openGLRenderWindow=t.getLastAncestorOfType("vtkOpenGLRenderWindow"),o&&!o.isDeleted()&&o!==e._openGLRenderWindow&&n(o),e.context=e._openGLRenderWindow.getContext(),e.tris.setOpenGLRenderWindow(e._openGLRenderWindow),e.jitterTexture.setOpenGLRenderWindow(e._openGLRenderWindow),e.framebuffer.setOpenGLRenderWindow(e._openGLRenderWindow),e.openGLVolume=t.getFirstAncestorOfType("vtkOpenGLVolume");const s=e.openGLVolume.getRenderable();e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer");const c=e._openGLRenderer.getRenderable();e.openGLCamera=e._openGLRenderer.getViewNodeFor(c.getActiveCamera()),t.renderPiece(c,s)}},t.getShaderTemplate=(a,i,o)=>{a.Vertex=nre,a.Fragment=rre,a.Geometry=""},t.useIndependentComponents=a=>{var l,u;const i=a.getIndependentComponents(),o=e.currentInput,s=(u=(l=o==null?void 0:o.getPointData())==null?void 0:l.getScalars())==null?void 0:u.getNumberOfComponents(),c=a.getColorMixPreset();return i&&s>=2||!!c},t.replaceShaderValues=(a,i,o)=>{const s=o.getProperty();let c=a.Fragment;s.getInterpolationType()===NT.LINEAR&&(c=Ve.substitute(c,"//VTK::TrilinearOn","#define vtkTrilinearOn").result),t.isLabelmapOutlineRequired(o)===!0&&(c=Ve.substitute(c,"//VTK::ImageLabelOutlineOn","#define vtkImageLabelOutlineOn").result),e.renderable.getBlendMode()===D2.LABELMAP_EDGE_PROJECTION_BLEND&&(c=Ve.substitute(c,"//VTK::LabelEdgeProjectionOn","#define vtkLabelEdgeProjectionOn").result);const v=e.scalarTexture.getComponents();c=Ve.substitute(c,"//VTK::NumComponents",`#define vtkNumComponents ${v}`).result;const g=t.useIndependentComponents(s);g&&(c=Ve.substitute(c,"//VTK::IndependentComponentsOn","#define UseIndependentComponents").result);const d=[],m=[];for(let T=0;T<v;T++)s.getOpacityMode(T)===tL.PROPORTIONAL&&d.push(`#define vtkComponent${T}Proportional`),s.getForceNearestInterpolation(T)&&m.push(`#define vtkComponent${T}ForceNearest`);c=Ve.substitute(c,"//VTK::vtkProportionalComponents",d.join(`
`)).result,c=Ve.substitute(c,"//VTK::vtkForceNearestComponents",m.join(`
`)).result;const h=s.getColorMixPreset(),C=ire(h);C&&(c=Ve.substitute(c,"//VTK::CustomComponentsColorMixOn","#define vtkCustomComponentsColorMix").result,c=Ve.substitute(c,"//VTK::CustomComponentsColorMix::Impl",C).result);const p=e.currentInput.getSpatialExtent(),S=e.currentInput.getSpacing(),I=new Float64Array(3);or(I,(p[1]-p[0])*S[0],(p[3]-p[2])*S[1],(p[5]-p[4])*S[2]);const D=Eo(I)/t.getCurrentSampleDistance(i);c=Ve.substitute(c,"//VTK::MaximumSamplesValue",`${Math.ceil(D)}`).result,c=Ve.substitute(c,"//VTK::LightComplexity",`#define vtkLightComplexity ${e.lightComplexity}`).result,e.lightComplexity>0&&(e.renderable.getVolumetricScatteringBlending()>0&&(c=Ve.substitute(c,"//VTK::VolumeShadowOn","#define VolumeShadowOn").result),e.renderable.getVolumetricScatteringBlending()<1&&(c=Ve.substitute(c,"//VTK::SurfaceShadowOn","#define SurfaceShadowOn").result),e.renderable.getLocalAmbientOcclusion()&&s.getAmbient()>0&&(c=Ve.substitute(c,"//VTK::localAmbientOcclusionOn","#define localAmbientOcclusionOn").result));const E=g?v:1;e.gopacity=!1;for(let T=0;!e.gopacity&&T<E;++T)e.gopacity||(e.gopacity=s.getUseGradientOpacity(T));e.gopacity&&(c=Ve.substitute(c,"//VTK::GradientOpacityOn","#define vtkGradientOpacityOn").result),e.renderable.getComputeNormalFromOpacity()&&(c=Ve.substitute(c,"//VTK::vtkComputeNormalFromOpacity","#define vtkComputeNormalFromOpacity").result),e.zBufferTexture!==null&&(c=Ve.substitute(c,"//VTK::ZBuffer::Dec",["uniform sampler2D zBufferTexture;","uniform float vpZWidth;","uniform float vpZHeight;"]).result,c=Ve.substitute(c,"//VTK::ZBuffer::Impl",["vec4 depthVec = texture2D(zBufferTexture, vec2(gl_FragCoord.x / vpZWidth, gl_FragCoord.y/vpZHeight));","float zdepth = (depthVec.r*256.0 + depthVec.g)/257.0;","zdepth = zdepth * 2.0 - 1.0;","if (cameraParallel == 0) {","zdepth = -2.0 * camFar * camNear / (zdepth*(camFar-camNear)-(camFar+camNear)) - camNear;}","else {",`zdepth = (zdepth + 1.0) * 0.5 * (camFar - camNear);}
`,"zdepth = -zdepth/rayDir.z;","dists.y = min(zdepth,dists.y);"]).result),c=Ve.substitute(c,"//VTK::BlendMode",`${e.renderable.getBlendMode()}`).result,a.Fragment=c,t.replaceShaderLight(a,i,o),t.replaceShaderClippingPlane(a,i,o)},t.replaceShaderLight=(a,i,o)=>{if(e.lightComplexity===0)return;let s=a.Fragment,c=0;i.getLights().forEach(l=>{l.getSwitch()&&(c+=1)}),s=Ve.substitute(s,"//VTK::Light::Dec",["uniform int lightNum;","uniform bool twoSidedLighting;",`uniform vec3 lightColor[${c}];`,`uniform vec3 lightDirectionVC[${c}]; // normalized`,`uniform vec3 lightHalfAngleVC[${c}];`,"//VTK::Light::Dec"],!1).result,e.lightComplexity===3&&(s=Ve.substitute(s,"//VTK::Light::Dec",[`uniform vec3 lightPositionVC[${c}];`,`uniform vec3 lightAttenuation[${c}];`,`uniform float lightConeAngle[${c}];`,`uniform float lightExponent[${c}];`,`uniform int lightPositional[${c}];`],!1).result),e.renderable.getVolumetricScatteringBlending()>0&&(s=Ve.substitute(s,"//VTK::VolumeShadow::Dec",["uniform float volumetricScatteringBlending;","uniform float giReach;","uniform float volumeShadowSamplingDistFactor;","uniform float anisotropy;","uniform float anisotropy2;"],!1).result),e.renderable.getLocalAmbientOcclusion()&&o.getProperty().getAmbient()>0&&(s=Ve.substitute(s,"//VTK::LAO::Dec",["uniform int kernelRadius;",`uniform vec2 kernelSample[${e.renderable.getLAOKernelRadius()}];`,"uniform int kernelSize;"],!1).result),a.Fragment=s},t.replaceShaderClippingPlane=(a,i,o)=>{let s=a.Fragment;if(e.renderable.getClippingPlanes().length>0){const c=e.renderable.getClippingPlanes().length;s=Ve.substitute(s,"//VTK::ClipPlane::Dec",["uniform vec3 vClipPlaneNormals[6];","uniform float vClipPlaneDistances[6];","uniform vec3 vClipPlaneOrigins[6];","uniform int clip_numPlanes;","//VTK::ClipPlane::Dec","#define vtkClippingPlanesOn"],!1).result,s=Ve.substitute(s,"//VTK::ClipPlane::Impl",[`for(int i = 0; i < ${c}; i++) {`,"  float rayDirRatio = dot(rayDir, vClipPlaneNormals[i]);","  float equationResult = dot(vertexVCVSOutput, vClipPlaneNormals[i]) + vClipPlaneDistances[i];","  if (rayDirRatio == 0.0)","  {","    if (equationResult < 0.0) dists.x = dists.y;","    continue;","  }","  float result = -1.0 * equationResult / rayDirRatio;","  if (rayDirRatio < 0.0) dists.y = min(dists.y, result);","  else dists.x = max(dists.x, result);","}","//VTK::ClipPlane::Impl"],!1).result}a.Fragment=s};const r=(a,i)=>{let o=0;a.getProperty().getShade()&&e.renderable.getBlendMode()===D2.COMPOSITE_BLEND&&(o=0,e.numberOfLights=0,i.forEach(s=>{s.getSwitch()>0&&(e.numberOfLights++,o===0&&(o=1)),o===1&&(e.numberOfLights>1||s.getIntensity()!==1||!s.lightTypeIsHeadLight())&&(o=2),o<3&&s.getPositional()&&(o=3)})),o!==e.lightComplexity&&(e.lightComplexity=o,t.modified())};t.getNeedToRebuildShaders=(a,i,o)=>{var C;const s=o.getProperty();r(o,i.getLights());const c=e.scalarTexture.getComponents(),l=[],u=[];for(let p=0;p<c;p++)l.push(s.getOpacityMode(p)),u.push(s.getForceNearestInterpolation(p));const f=e.currentInput.getSpatialExtent(),v=e.currentInput.getSpacing(),g=new Float64Array(3);or(g,(f[1]-f[0])*v[0],(f[3]-f[2])*v[1],(f[5]-f[4])*v[2]);const d=Eo(g)/t.getCurrentSampleDistance(i),m=!!e.zBufferTexture,h={iComps:s.getIndependentComponents(),colorMixPreset:s.getColorMixPreset(),interpolationType:s.getInterpolationType(),useLabelOutline:t.isLabelmapOutlineRequired(o),numComp:c,maxSamples:d,useGradientOpacity:s.getUseGradientOpacity(0),blendMode:e.renderable.getBlendMode(),hasZBufferTexture:m,opacityModes:l,forceNearestInterps:u};return((C=a.getProgram())==null?void 0:C.getHandle())===0||a.getShaderSourceTime().getMTime()<t.getMTime()||a.getShaderSourceTime().getMTime()<e.renderable.getMTime()||!e.previousState||!GR(e.previousState,h)?(e.previousState=h,!0):!1},t.updateShaders=(a,i,o)=>{if(t.getNeedToRebuildShaders(a,i,o)){const s={Vertex:null,Fragment:null,Geometry:null};t.buildShaders(s,i,o);const c=e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(s.Vertex,s.Fragment,s.Geometry);c!==a.getProgram()&&(a.setProgram(c),a.getVAO().releaseGraphicsResources()),a.getShaderSourceTime().modified()}else e._openGLRenderWindow.getShaderCache().readyShaderProgram(a.getProgram());a.getVAO().bind(),t.setMapperShaderParameters(a,i,o),t.setCameraShaderParameters(a,i,o),t.setPropertyShaderParameters(a,i,o),t.getClippingPlaneShaderParameters(a,i,o)},t.setMapperShaderParameters=(a,i,o)=>{var u;const s=a.getProgram();a.getCABO().getElementCount()&&(e.VBOBuildTime.getMTime()>a.getAttributeUpdateTime().getMTime()||a.getShaderSourceTime().getMTime()>a.getAttributeUpdateTime().getMTime())&&(s.isAttributeUsed("vertexDC")&&(a.getVAO().addAttributeArray(s,a.getCABO(),"vertexDC",a.getCABO().getVertexOffset(),a.getCABO().getStride(),e.context.FLOAT,3,e.context.FALSE)||nE("Error setting vertexDC in shader VAO.")),a.getAttributeUpdateTime().modified()),s.setUniformi("texture1",e.scalarTexture.getTextureUnit()),s.setUniformf("sampleDistance",t.getCurrentSampleDistance(i));const c=e.scalarTexture.getVolumeInfo(),l=e.renderable.getIpScalarRange();if((u=c==null?void 0:c.dataComputedScale)!=null&&u.length){const f=[],v=[];for(let g=0;g<4;g++)f[g]=l[0]*c.dataComputedScale[g]+c.dataComputedOffset[g],v[g]=l[1]*c.dataComputedScale[g]+c.dataComputedOffset[g],f[g]=(f[g]-c.offset[g])/c.scale[g],v[g]=(v[g]-c.offset[g])/c.scale[g];s.setUniform4f("ipScalarRangeMin",f[0],f[1],f[2],f[3]),s.setUniform4f("ipScalarRangeMax",v[0],v[1],v[2],v[3])}if(e.zBufferTexture!==null){s.setUniformi("zBufferTexture",e.zBufferTexture.getTextureUnit());const f=e._useSmallViewport?[e._smallViewportWidth,e._smallViewportHeight]:e._openGLRenderWindow.getFramebufferSize();s.setUniformf("vpZWidth",f[0]),s.setUniformf("vpZHeight",f[1])}},t.setCameraShaderParameters=(a,i,o)=>{const s=e.openGLCamera.getKeyMatrices(i),c=e.openGLVolume.getKeyMatrices();Xn(e.modelToView,s.wcvc,c.mcwc);const l=a.getProgram(),u=e.openGLCamera.getRenderable(),f=u.getClippingRange();l.setUniformf("camThick",f[1]-f[0]),l.setUniformf("camNear",f[0]),l.setUniformf("camFar",f[1]);const v=e.currentInput.getBounds(),g=e.currentInput.getDimensions(),d=new Float64Array(3),m=new Float64Array(3);let h=1,C=-1,p=1,S=-1;for(let L=0;L<8;++L){if(or(d,v[L%2],v[2+Math.floor(L/2)%2],v[4+Math.floor(L/4)]),un(d,d,e.modelToView),!u.getParallelProjection()){Ar(m,d);const H=-f[0]/d[2];Ia(d,m,H)}un(d,d,s.vcpc),h=Math.min(d[0],h),C=Math.max(d[0],C),p=Math.min(d[1],p),S=Math.max(d[1],S)}l.setUniformf("dcxmin",h),l.setUniformf("dcxmax",C),l.setUniformf("dcymin",p),l.setUniformf("dcymax",S),l.isUniformUsed("cameraParallel")&&l.setUniformi("cameraParallel",u.getParallelProjection());const I=e.currentInput.getSpatialExtent(),D=e.currentInput.getSpacing(),E=new Float64Array(3);or(E,(I[1]-I[0])*D[0],(I[3]-I[2])*D[1],(I[5]-I[4])*D[2]),l.setUniform3f("vSpacing",D[0],D[1],D[2]),or(d,I[0],I[2],I[4]),e.currentInput.indexToWorldVec3(d,d),un(d,d,e.modelToView),l.setUniform3f("vOriginVC",d[0],d[1],d[2]);const T=e.currentInput.getIndexToWorld();Xn(e.idxToView,e.modelToView,T),iv(e.idxNormalMatrix,s.normalMatrix,c.normalMatrix),iv(e.idxNormalMatrix,e.idxNormalMatrix,e.currentInput.getDirectionByReference());const y=Eo(E)/t.getCurrentSampleDistance(i);y>e.renderable.getMaximumSamplesPerRay()&&are(`The number of steps required ${Math.ceil(y)} is larger than the
        specified maximum number of steps ${e.renderable.getMaximumSamplesPerRay()}.
        Please either change the
        volumeMapper sampleDistance or its maximum number of samples.`);const M=new Float64Array(3);if(or(M,1,1,1),VZ(M,M,E),l.setUniform3f("vVCToIJK",M[0],M[1],M[2]),l.setUniform3i("volumeDimensions",g[0],g[1],g[2]),l.setUniform3f("volumeSpacings",D[0],D[1],D[2]),!e._openGLRenderWindow.getWebgl2()){const L=e.scalarTexture.getVolumeInfo();l.setUniformf("texWidth",e.scalarTexture.getWidth()),l.setUniformf("texHeight",e.scalarTexture.getHeight()),l.setUniformi("xreps",L.xreps),l.setUniformi("xstride",L.xstride),l.setUniformi("ystride",L.ystride)}const _=new Float64Array(3),O=new Float64Array(3);for(let L=0;L<6;++L){switch(L){case 1:or(_,-1,0,0),or(O,I[0],I[2],I[4]);break;case 2:or(_,0,1,0),or(O,I[1],I[3],I[5]);break;case 3:or(_,0,-1,0),or(O,I[0],I[2],I[4]);break;case 4:or(_,0,0,1),or(O,I[1],I[3],I[5]);break;case 5:or(_,0,0,-1),or(O,I[0],I[2],I[4]);break;case 0:default:or(_,1,0,0),or(O,I[1],I[3],I[5]);break}b2(_,_,e.idxNormalMatrix),un(O,O,e.idxToView);const H=-1*Gt(O,_);l.setUniform3f(`vPlaneNormal${L}`,_[0],_[1],_[2]),l.setUniformf(`vPlaneDistance${L}`,H)}if(t.isLabelmapOutlineRequired(o)){const H=e.currentInput.getWorldToIndex();l.setUniformMatrix("vWCtoIDX",H);const F=i.getActiveCamera(),[U,V]=F.getClippingRange(),X=F.getDistance();F.setClippingRange(X,X+.1);const re=e.openGLCamera.getKeyMatrices(i);ba(e.projectionToWorld,re.wcpc),F.setClippingRange(U,V),e.openGLCamera.getKeyMatrices(i),l.setUniformMatrix("PCWCMatrix",e.projectionToWorld);const ue=t.getRenderTargetSize();l.setUniformf("vpWidth",ue[0]),l.setUniformf("vpHeight",ue[1]);const De=t.getRenderTargetOffset();l.setUniformf("vpOffsetX",De[0]/ue[0]),l.setUniformf("vpOffsetY",De[1]/ue[1])}if(ba(e.projectionToView,s.vcpc),l.setUniformMatrix("PCVCMatrix",e.projectionToView),e.lightComplexity===0)return;let w=0;const x=[],P=[],R=[];if(i.getLights().forEach(L=>{if(L.getSwitch()>0){const F=L.getColor(),U=L.getIntensity();x[0+w*3]=F[0]*U,x[1+w*3]=F[1]*U,x[2+w*3]=F[2]*U;const V=L.getDirection();or(_,V[0],V[1],V[2]),b2(_,_,s.normalMatrix),Ar(_,_),P[0+w*3]=_[0],P[1+w*3]=_[1],P[2+w*3]=_[2],R[0+w*3]=-.5*_[0],R[1+w*3]=-.5*_[1],R[2+w*3]=-.5*(_[2]-1),w++}}),l.setUniformi("twoSidedLighting",i.getTwoSidedLighting()),l.setUniformi("lightNum",w),l.setUniform3fv("lightColor",x),l.setUniform3fv("lightDirectionVC",P),l.setUniform3fv("lightHalfAngleVC",R),e.lightComplexity===3){w=0;const L=[],H=[],F=[],U=[],V=[];i.getLights().forEach(X=>{if(X.getSwitch()>0){const ue=X.getAttenuationValues();H[0+w*3]=ue[0],H[1+w*3]=ue[1],H[2+w*3]=ue[2],U[w]=X.getExponent(),F[w]=X.getConeAngle(),V[w]=X.getPositional();const De=X.getTransformedPosition();un(De,De,e.modelToView),L[0+w*3]=De[0],L[1+w*3]=De[1],L[2+w*3]=De[2],w+=1}}),l.setUniform3fv("lightPositionVC",L),l.setUniform3fv("lightAttenuation",H),l.setUniformfv("lightConeAngle",F),l.setUniformfv("lightExponent",U),l.setUniformiv("lightPositional",V)}if(e.renderable.getVolumetricScatteringBlending()>0&&(l.setUniformf("giReach",e.renderable.getGlobalIlluminationReach()),l.setUniformf("volumetricScatteringBlending",e.renderable.getVolumetricScatteringBlending()),l.setUniformf("volumeShadowSamplingDistFactor",e.renderable.getVolumeShadowSamplingDistFactor()),l.setUniformf("anisotropy",e.renderable.getAnisotropy()),l.setUniformf("anisotropy2",e.renderable.getAnisotropy()**2)),e.renderable.getLocalAmbientOcclusion()&&o.getProperty().getAmbient()>0){const L=e.renderable.getLAOKernelSize();l.setUniformi("kernelSize",L);const H=[];for(let F=0;F<L;F++)H[F*2]=Math.random()*.5,H[F*2+1]=Math.random()*.5;l.setUniform2fv("kernelSample",H),l.setUniformi("kernelRadius",e.renderable.getLAOKernelRadius())}},t.setPropertyShaderParameters=(a,i,o)=>{const s=a.getProgram();s.setUniformi("ctexture",e.colorTexture.getTextureUnit()),s.setUniformi("otexture",e.opacityTexture.getTextureUnit()),s.setUniformi("jtexture",e.jitterTexture.getTextureUnit()),s.setUniformi("ttexture",e.labelOutlineThicknessTexture.getTextureUnit());const c=e.scalarTexture.getVolumeInfo(),l=o.getProperty(),u=e.scalarTexture.getComponents(),f=t.useIndependentComponents(l);if(f)for(let g=0;g<u;g++)s.setUniformf(`mix${g}`,o.getProperty().getComponentWeight(g));for(let g=0;g<u;g++){const d=f?g:0,m=c.scale[g],C=l.getScalarOpacity(d).getRange(),p=m/(C[1]-C[0]),S=(c.offset[g]-C[0])/(C[1]-C[0]);s.setUniformf(`oshift${g}`,S),s.setUniformf(`oscale${g}`,p);const D=l.getRGBTransferFunction(d).getRange(),E=(c.offset[g]-D[0])/(D[1]-D[0]),T=m/(D[1]-D[0]);s.setUniformf(`cshift${g}`,E),s.setUniformf(`cscale${g}`,T)}if(e.gopacity)if(f)for(let g=0;g<u;++g){const d=c.scale[g];if(l.getUseGradientOpacity(g)){const h=l.getGradientOpacityMinimumOpacity(g),C=l.getGradientOpacityMaximumOpacity(g);s.setUniformf(`gomin${g}`,h),s.setUniformf(`gomax${g}`,C);const p=[l.getGradientOpacityMinimumValue(g),l.getGradientOpacityMaximumValue(g)];s.setUniformf(`goscale${g}`,d*(C-h)/(p[1]-p[0])),s.setUniformf(`goshift${g}`,-p[0]*(C-h)/(p[1]-p[0])+h)}else s.setUniformf(`gomin${g}`,1),s.setUniformf(`gomax${g}`,1),s.setUniformf(`goscale${g}`,0),s.setUniformf(`goshift${g}`,1)}else{const g=c.scale[u-1],d=l.getGradientOpacityMinimumOpacity(0),m=l.getGradientOpacityMaximumOpacity(0);s.setUniformf("gomin0",d),s.setUniformf("gomax0",m);const h=[l.getGradientOpacityMinimumValue(0),l.getGradientOpacityMaximumValue(0)];s.setUniformf("goscale0",g*(m-d)/(h[1]-h[0])),s.setUniformf("goshift0",-h[0]*(m-d)/(h[1]-h[0])+d)}if(t.isLabelmapOutlineRequired(o)===!0){const g=o.getProperty().getLabelOutlineOpacity();s.setUniformf("outlineOpacity",g)}e.lightComplexity>0&&(s.setUniformf("vAmbient",l.getAmbient()),s.setUniformf("vDiffuse",l.getDiffuse()),s.setUniformf("vSpecular",l.getSpecular()),s.setUniformf("vSpecularPower",l.getSpecularPower()))},t.getClippingPlaneShaderParameters=(a,i,o)=>{if(e.renderable.getClippingPlanes().length>0){const s=e.openGLCamera.getKeyMatrices(i),c=[],l=[],u=[],f=e.renderable.getClippingPlanes(),v=f.length;for(let d=0;d<v;++d){const m=f[d].getNormal(),h=f[d].getOrigin();b2(m,m,s.normalMatrix),un(h,h,s.wcvc);const C=-1*Gt(h,m);c.push(m[0]),c.push(m[1]),c.push(m[2]),l.push(C),u.push(h[0]),u.push(h[1]),u.push(h[2])}const g=a.getProgram();g.setUniform3fv("vClipPlaneNormals",c),g.setUniformfv("vClipPlaneDistances",l),g.setUniform3fv("vClipPlaneOrigins",u),g.setUniformi("clip_numPlanes",v)}},t.delete=Ym(()=>{e._animationRateSubscription&&(e._animationRateSubscription.unsubscribe(),e._animationRateSubscription=null)},()=>{e._openGLRenderWindow&&n(e._openGLRenderWindow)},t.delete),t.getRenderTargetSize=()=>{if(e._useSmallViewport)return[e._smallViewportWidth,e._smallViewportHeight];const{usize:a,vsize:i}=e._openGLRenderer.getTiledSizeAndOrigin();return[a,i]},t.getRenderTargetOffset=()=>{const{lowerLeftU:a,lowerLeftV:i}=e._openGLRenderer.getTiledSizeAndOrigin();return[a,i]},t.getCurrentSampleDistance=a=>{const i=a.getVTKWindow().getInteractor(),o=e.renderable.getSampleDistance();if(i.isAnimating()){const s=e.renderable.getInteractionSampleDistanceFactor();return o*s}return o},t.renderPieceStart=(a,i)=>{const o=a.getVTKWindow().getInteractor();if(e._lastScale||(e._lastScale=e.renderable.getInitialInteractionScale()),e._useSmallViewport=!1,o.isAnimating()&&e._lastScale>1.5&&(e._useSmallViewport=!0),e._animationRateSubscription||(e._animationRateSubscription=o.onAnimationFrameRateUpdate(()=>{if(e.renderable.getAutoAdjustSampleDistances()){const c=o.getRecentAnimationFrameRate(),l=o.getDesiredUpdateRate()/c;(l>1.15||l<.85)&&(e._lastScale*=l),e._lastScale>400&&(e._lastScale=400),e._lastScale<1.5&&(e._lastScale=1.5)}else e._lastScale=e.renderable.getImageSampleDistance()*e.renderable.getImageSampleDistance()})),e._useSmallViewport){const c=e._openGLRenderWindow.getFramebufferSize(),l=1/Math.sqrt(e._lastScale);if(e._smallViewportWidth=Math.ceil(l*c[0]),e._smallViewportHeight=Math.ceil(l*c[1]),e._smallViewportHeight>c[1]&&(e._smallViewportHeight=c[1]),e._smallViewportWidth>c[0]&&(e._smallViewportWidth=c[0]),e.framebuffer.saveCurrentBindingsAndBuffers(),e.framebuffer.getGLFramebuffer()===null)e.framebuffer.create(c[0],c[1]),e.framebuffer.populateFramebuffer();else{const f=e.framebuffer.getSize();(!f||f[0]!==c[0]||f[1]!==c[1])&&(e.framebuffer.create(c[0],c[1]),e.framebuffer.populateFramebuffer())}e.framebuffer.bind();const u=e.context;u.clearColor(0,0,0,0),u.colorMask(!0,!0,!0,!0),u.clear(u.COLOR_BUFFER_BIT),u.viewport(0,0,e._smallViewportWidth,e._smallViewportHeight),e.fvp=[e._smallViewportWidth/c[0],e._smallViewportHeight/c[1]]}e.context.disable(e.context.DEPTH_TEST),t.updateBufferObjects(a,i),i.getProperty().getInterpolationType()===NT.NEAREST?(e.scalarTexture.setMinificationFilter(en.NEAREST),e.scalarTexture.setMagnificationFilter(en.NEAREST)):(e.scalarTexture.setMinificationFilter(en.LINEAR),e.scalarTexture.setMagnificationFilter(en.LINEAR)),e.zBufferTexture!==null&&e.zBufferTexture.activate()},t.renderPieceDraw=(a,i)=>{const o=e.context;e.scalarTexture.activate(),e.opacityTexture.activate(),e.labelOutlineThicknessTexture.activate(),e.colorTexture.activate(),e.jitterTexture.activate(),t.updateShaders(e.tris,a,i),o.drawArrays(o.TRIANGLES,0,e.tris.getCABO().getElementCount()),e.tris.getVAO().release(),e.scalarTexture.deactivate(),e.colorTexture.deactivate(),e.opacityTexture.deactivate(),e.labelOutlineThicknessTexture.deactivate(),e.jitterTexture.deactivate()},t.renderPieceFinish=(a,i)=>{if(e.zBufferTexture!==null&&e.zBufferTexture.deactivate(),e._useSmallViewport){if(e.framebuffer.restorePreviousBindingsAndBuffers(),e.copyShader===null){e.copyShader=e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(["//VTK::System::Dec","attribute vec4 vertexDC;","uniform vec2 tfactor;","varying vec2 tcoord;","void main() { tcoord = vec2(vertexDC.x*0.5 + 0.5, vertexDC.y*0.5 + 0.5) * tfactor; gl_Position = vertexDC; }"].join(`
`),["//VTK::System::Dec","//VTK::Output::Dec","uniform sampler2D texture1;","varying vec2 tcoord;","void main() { gl_FragData[0] = texture2D(texture1,tcoord); }"].join(`
`),"");const l=e.copyShader;e.copyVAO=a5.newInstance(),e.copyVAO.setOpenGLRenderWindow(e._openGLRenderWindow),e.tris.getCABO().bind(),e.copyVAO.addAttributeArray(l,e.tris.getCABO(),"vertexDC",e.tris.getCABO().getVertexOffset(),e.tris.getCABO().getStride(),e.context.FLOAT,3,e.context.FALSE)||nE("Error setting vertexDC in copy shader VAO.")}else e._openGLRenderWindow.getShaderCache().readyShaderProgram(e.copyShader);const o=e._openGLRenderWindow.getFramebufferSize();e.context.viewport(0,0,o[0],o[1]);const s=e.framebuffer.getColorTexture();s.activate(),e.copyShader.setUniformi("texture",s.getTextureUnit()),e.copyShader.setUniform2f("tfactor",e.fvp[0],e.fvp[1]);const c=e.context;c.blendFuncSeparate(c.ONE,c.ONE_MINUS_SRC_ALPHA,c.ONE,c.ONE_MINUS_SRC_ALPHA),e.context.drawArrays(e.context.TRIANGLES,0,e.tris.getCABO().getElementCount()),s.deactivate(),c.blendFuncSeparate(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA,c.ONE,c.ONE_MINUS_SRC_ALPHA)}},t.renderPiece=(a,i)=>{if(t.invokeEvent({type:"StartEvent"}),e.renderable.update(),e.currentInput=e.renderable.getInputData(),t.invokeEvent({type:"EndEvent"}),!e.currentInput){nE("No input!");return}t.renderPieceStart(a,i),t.renderPieceDraw(a,i),t.renderPieceFinish(a,i)},t.computeBounds=(a,i)=>{if(!t.getInput()){Rv(e.Bounds);return}e.bounds=t.getInput().getBounds()},t.updateBufferObjects=(a,i)=>{t.getNeedToRebuildBufferObjects(a,i)&&t.buildBufferObjects(a,i)},t.getNeedToRebuildBufferObjects=(a,i)=>{var o,s,c;return e.VBOBuildTime.getMTime()<t.getMTime()||e.VBOBuildTime.getMTime()<i.getMTime()||e.VBOBuildTime.getMTime()<e.renderable.getMTime()||e.VBOBuildTime.getMTime()<i.getProperty().getMTime()||e.VBOBuildTime.getMTime()<e.currentInput.getMTime()||!((o=e.scalarTexture)!=null&&o.getHandle())||!((s=e.colorTexture)!=null&&s.getHandle())||!((c=e.labelOutlineThicknessTexture)!=null&&c.getHandle())},t.buildBufferObjects=(a,i)=>{var D,E;const o=e.currentInput;if(!o)return;const s=o.getPointData()&&o.getPointData().getScalars();if(!s)return;const c=i.getProperty();if(!e.jitterTexture.getHandle()){const T=new Uint8Array(1024);for(let y=0;y<32*32;++y)T[y]=255*Math.random();e.jitterTexture.setMinificationFilter(en.LINEAR),e.jitterTexture.setMagnificationFilter(en.LINEAR),e.jitterTexture.create2DFromRaw(32,32,1,Vn.UNSIGNED_CHAR,T)}const l=s.getNumberOfComponents(),u=t.useIndependentComponents(c),f=u?l:1,v=c.getScalarOpacity(),g=e._openGLRenderWindow.getGraphicsResourceForObject(v);let d=Y0(v,u,f);if(!(g!=null&&g.oglObject)||g.hash!==d){e.opacityTexture=oa.newInstance(),e.opacityTexture.setOpenGLRenderWindow(e._openGLRenderWindow);const T=1024,y=T*2*f,M=new Float32Array(y),_=new Float32Array(T);for(let O=0;O<f;++O){const w=c.getScalarOpacity(O),x=t.getCurrentSampleDistance(a)/c.getScalarOpacityUnitDistance(O),P=w.getRange();w.getTable(P[0],P[1],T,_,1);for(let R=0;R<T;++R)M[O*T*2+R]=1-(1-_[R])**x,M[O*T*2+R+T]=M[O*T*2+R]}if(e.opacityTexture.resetFormatAndType(),e.opacityTexture.setMinificationFilter(en.LINEAR),e.opacityTexture.setMagnificationFilter(en.LINEAR),e._openGLRenderWindow.getWebgl2()||e.context.getExtension("OES_texture_float")&&e.context.getExtension("OES_texture_float_linear"))e.opacityTexture.create2DFromRaw(T,2*f,1,Vn.FLOAT,M);else{const O=new Uint8ClampedArray(y);for(let w=0;w<y;++w)O[w]=255*M[w];e.opacityTexture.create2DFromRaw(T,2*f,1,Vn.UNSIGNED_CHAR,O)}v&&(e._openGLRenderWindow.setGraphicsResourceForObject(v,e.opacityTexture,d),v!==e._scalarOpacityFunc&&(e._openGLRenderWindow.registerGraphicsResourceUser(v,t),e._openGLRenderWindow.unregisterGraphicsResourceUser(e._scalarOpacityFunc,t)),e._scalarOpacityFunc=v)}else e.opacityTexture=g.oglObject;const h=c.getRGBTransferFunction();d=Y0(h,u,f);const C=e._openGLRenderWindow.getGraphicsResourceForObject(h);if(!((D=C==null?void 0:C.oglObject)!=null&&D.getHandle())||(C==null?void 0:C.hash)!==d){e.colorTexture=oa.newInstance(),e.colorTexture.setOpenGLRenderWindow(e._openGLRenderWindow);const T=1024,y=T*2*f*3,M=new Uint8ClampedArray(y),_=new Float32Array(T*3);for(let O=0;O<f;++O){const w=c.getRGBTransferFunction(O),x=w.getRange();w.getTable(x[0],x[1],T,_,1);for(let P=0;P<T*3;++P)M[O*T*6+P]=255*_[P],M[O*T*6+P+T*3]=255*_[P]}e.colorTexture.resetFormatAndType(),e.colorTexture.setMinificationFilter(en.LINEAR),e.colorTexture.setMagnificationFilter(en.LINEAR),e.colorTexture.create2DFromRaw(T,2*f,3,Vn.UNSIGNED_CHAR,M),h&&(e._openGLRenderWindow.setGraphicsResourceForObject(h,e.colorTexture,d),h!==e._colorTransferFunc&&(e._openGLRenderWindow.registerGraphicsResourceUser(h,t),e._openGLRenderWindow.unregisterGraphicsResourceUser(e._colorTransferFunc,t)),e._colorTransferFunc=h)}else e.colorTexture=C.oglObject;t.updateLabelOutlineThicknessTexture(i);const S=e._openGLRenderWindow.getGraphicsResourceForObject(s);if(d=C5(o,s),!((E=S==null?void 0:S.oglObject)!=null&&E.getHandle())||(S==null?void 0:S.hash)!==d){e.scalarTexture=oa.newInstance(),e.scalarTexture.setOpenGLRenderWindow(e._openGLRenderWindow);const T=o.getDimensions();e.scalarTexture.setOglNorm16Ext(e.context.getExtension("EXT_texture_norm16")),e.scalarTexture.resetFormatAndType(),e.scalarTexture.create3DFilterableFromDataArray(T[0],T[1],T[2],s,e.renderable.getPreferSizeOverAccuracy()),s&&(e._openGLRenderWindow.setGraphicsResourceForObject(s,e.scalarTexture,d),s!==e._scalars&&(e._openGLRenderWindow.registerGraphicsResourceUser(s,t),e._openGLRenderWindow.unregisterGraphicsResourceUser(e._scalars,t)),e._scalars=s)}else e.scalarTexture=S.oglObject;if(!e.tris.getCABO().getElementCount()){const T=new Float32Array(12);for(let O=0;O<4;O++)T[O*3]=O%2*2-1,T[O*3+1]=O>1?1:-1,T[O*3+2]=-1;const y=new Uint16Array(8);y[0]=3,y[1]=0,y[2]=1,y[3]=3,y[4]=3,y[5]=0,y[6]=3,y[7]=2;const M=fn.newInstance({numberOfComponents:3,values:T});M.setName("points");const _=fn.newInstance({numberOfComponents:1,values:y});e.tris.getCABO().createVBO(_,"polys",Fi.SURFACE,{points:M,cellOffset:0})}e.VBOBuildTime.modified()},t.updateLabelOutlineThicknessTexture=a=>{var l;const i=a.getProperty().getLabelOutlineThickness(),o=e._openGLRenderWindow.getGraphicsResourceForObject(i),s=`${i.join("-")}`;if(!((l=o==null?void 0:o.oglObject)!=null&&l.getHandle())||(o==null?void 0:o.hash)!==s){e.labelOutlineThicknessTexture=oa.newInstance(),e.labelOutlineThicknessTexture.setOpenGLRenderWindow(e._openGLRenderWindow);const u=1024,f=1,v=u*f,g=new Uint8Array(v);for(let d=0;d<u;++d){const m=typeof i[d]<"u"?i[d]:i[0];g[d]=m}e.labelOutlineThicknessTexture.resetFormatAndType(),e.labelOutlineThicknessTexture.setMinificationFilter(en.NEAREST),e.labelOutlineThicknessTexture.setMagnificationFilter(en.NEAREST),e.labelOutlineThicknessTexture.create2DFromRaw(u,f,1,Vn.UNSIGNED_CHAR,g),i&&(e._openGLRenderWindow.setGraphicsResourceForObject(i,e.labelOutlineThicknessTexture,s),i!==e._labelOutlineThicknessArray&&(e._openGLRenderWindow.registerGraphicsResourceUser(i,t),e._openGLRenderWindow.unregisterGraphicsResourceUser(e._labelOutlineThicknessArray,t)),e._labelOutlineThicknessArray=i)}else e.labelOutlineThicknessTexture=o.oglObject},t.isLabelmapOutlineRequired=a=>{const i=a.getProperty(),o=e.renderable;return i.getUseLabelOutline()||o.getBlendMode()===D2.LABELMAP_EDGE_PROJECTION_BLEND}}const sre={context:null,VBOBuildTime:null,scalarTexture:null,opacityTexture:null,opacityTextureString:null,colorTexture:null,colorTextureString:null,jitterTexture:null,labelOutlineThicknessTexture:null,labelOutlineThicknessTextureString:null,tris:null,framebuffer:null,copyShader:null,copyVAO:null,lastXYF:1,targetXYF:1,zBufferTexture:null,lastZBufferTexture:null,lightComplexity:0,fullViewportTime:1,idxToView:null,idxNormalMatrix:null,modelToView:null,projectionToView:null,avgWindowArea:0,avgFrameTime:0};function rL(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,sre,n),Fr.extend(t,e,n),X0.implementBuildShadersWithReplacements(t,e,n),e.VBOBuildTime={},Yr(e.VBOBuildTime,{mtime:0}),e.tris=tc.newInstance(),e.jitterTexture=oa.newInstance(),e.jitterTexture.setWrapS(Zd.REPEAT),e.jitterTexture.setWrapT(Zd.REPEAT),e.framebuffer=nI.newInstance(),e.idxToView=zt(new Float64Array(16)),e.idxNormalMatrix=Rs(new Float64Array(9)),e.modelToView=zt(new Float64Array(16)),e.projectionToView=zt(new Float64Array(16)),e.projectionToWorld=zt(new Float64Array(16)),Wa(t,e,["context"]),ore(t,e)}const aL=dr(rL,"vtkOpenGLVolumeMapper");var iL={newInstance:aL,extend:rL};Za("vtkVolumeMapper",aL);function I5(t,e){switch(t){case"Float32Array":return Float32Array;case"Uint8Array":return Uint8Array;case"Uint16Array":case"Int16Array":return e?(console.debug(`${t} is not supported for volume rendering, switching back to Float32Array`),Float32Array):t==="Uint16Array"?Uint16Array:Int16Array;default:if(t)throw new Error("TargetBuffer should be Float32Array, Uint8Array, Uint16Array, or Int16Array");return Float32Array}}function D5(t,e,n={}){const{isVolumeBuffer:r=!1}=n,a=I5(t,r),i=a.BYTES_PER_ELEMENT;return{numBytes:e*i,TypedArrayConstructor:a}}function cre(t,e){e.classHierarchy.push("vtkStreamingOpenGLVolumeMapper"),t.buildBufferObjects=(n,r)=>{var m;const a=e.currentInput;if(!a)return;const i=r.getProperty();if(!e.jitterTexture.getHandle()){const h=new Uint8Array(1024);for(let C=0;C<32*32;++C)h[C]=255*Math.random();e.jitterTexture.setMinificationFilter(en.LINEAR),e.jitterTexture.setMagnificationFilter(en.LINEAR),e.jitterTexture.create2DFromRaw(32,32,1,Vn.UNSIGNED_CHAR,h)}const{numberOfComponents:o}=a.get("numberOfComponents"),s=t.useIndependentComponents(i),c=i.getScalarOpacity(),l=e._openGLRenderWindow.getGraphicsResourceForObject(c);let u=Y0(c,s,o);if(!(l!=null&&l.oglObject)||l.hash!==u){e.opacityTexture=oa.newInstance(),e.opacityTexture.setOpenGLRenderWindow(e._openGLRenderWindow);const h=1024,C=h*2*o,p=new Float32Array(C),S=new Float32Array(h);for(let I=0;I<o;++I){const D=i.getScalarOpacity(I),E=t.getCurrentSampleDistance(n)/i.getScalarOpacityUnitDistance(I),T=D.getRange();D.getTable(T[0],T[1],h,S,1);for(let y=0;y<h;++y)p[I*h*2+y]=1-(1-S[y])**E,p[I*h*2+y+h]=p[I*h*2+y]}if(e.opacityTexture.resetFormatAndType(),e.opacityTexture.setMinificationFilter(en.LINEAR),e.opacityTexture.setMagnificationFilter(en.LINEAR),e._openGLRenderWindow.getWebgl2()&&e.context.getExtension("OES_texture_float")&&e.context.getExtension("OES_texture_float_linear"))e.opacityTexture.create2DFromRaw(h,2*o,1,Vn.FLOAT,p);else{const I=new Uint8ClampedArray(C);for(let D=0;D<C;++D)I[D]=255*p[D];e.opacityTexture.create2DFromRaw(h,2*o,1,Vn.UNSIGNED_CHAR,I)}c&&(e._openGLRenderWindow.setGraphicsResourceForObject(c,e.opacityTexture,u),c!==e._scalarOpacityFunc&&(e._openGLRenderWindow.registerGraphicsResourceUser(c,t),e._openGLRenderWindow.unregisterGraphicsResourceUser(e._scalarOpacityFunc,t)),e._scalarOpacityFunc=c)}else e.opacityTexture=l.oglObject;const v=i.getRGBTransferFunction();u=Y0(v,s,o);const g=e._openGLRenderWindow.getGraphicsResourceForObject(v);if(!((m=g==null?void 0:g.oglObject)!=null&&m.getHandle())||(g==null?void 0:g.hash)!==u){e.colorTexture=oa.newInstance(),e.colorTexture.setOpenGLRenderWindow(e._openGLRenderWindow);const h=1024,C=h*2*o*3,p=new Uint8ClampedArray(C),S=new Float32Array(h*3);for(let I=0;I<o;++I){const D=i.getRGBTransferFunction(I),E=D.getRange();D.getTable(E[0],E[1],h,S,1);for(let T=0;T<h*3;++T)p[I*h*6+T]=255*S[T],p[I*h*6+T+h*3]=255*S[T]}e.colorTexture.resetFormatAndType(),e.colorTexture.setMinificationFilter(en.LINEAR),e.colorTexture.setMagnificationFilter(en.LINEAR),e.colorTexture.create2DFromRaw(h,2*o,3,Vn.UNSIGNED_CHAR,p),v&&(e._openGLRenderWindow.setGraphicsResourceForObject(v,e.colorTexture,u),v!==e._colorTransferFunc&&(e._openGLRenderWindow.registerGraphicsResourceUser(v,t),e._openGLRenderWindow.unregisterGraphicsResourceUser(e._colorTransferFunc,t)),e._colorTransferFunc=v)}else e.colorTexture=g.oglObject;if(t.updateLabelOutlineThicknessTexture(r),u=`${a.getMTime()}-${e.scalarTexture.getMTime()}`,e.scalarTextureString!==u){const h=a.getDimensions();e.scalarTexture.setOpenGLRenderWindow(e._openGLRenderWindow),e.scalarTexture.enableUseHalfFloat(!1);const C=e.scalarTexture.getTextureParameters(),p=a.get("dataType").dataType;let S=!0;if((C==null?void 0:C.dataType)===p&&(C==null?void 0:C.width)===h[0]&&(C==null?void 0:C.height)===h[1]&&(C==null?void 0:C.depth)===h[2]&&(S=!1),S){const I=e.context.getExtension("EXT_texture_norm16");e.scalarTexture.setOglNorm16Ext(I),e.scalarTexture.resetFormatAndType(),e.scalarTexture.setTextureParameters({width:h[0],height:h[1],depth:h[2],numberOfComponents:o,dataType:p}),e.scalarTexture.create3DFromRaw(h[0],h[1],h[2],o,p,null),e.scalarTexture.update3DFromRaw()}else e.scalarTexture.deactivate(),e.scalarTexture.update3DFromRaw();e.scalarTextureString=u}if(!e.tris.getCABO().getElementCount()){const h=new Float32Array(12);for(let I=0;I<4;I++)h[I*3]=I%2*2-1,h[I*3+1]=I>1?1:-1,h[I*3+2]=-1;const C=new Uint16Array(8);C[0]=3,C[1]=0,C[2]=1,C[3]=3,C[4]=3,C[5]=0,C[6]=3,C[7]=2;const p=fn.newInstance({numberOfComponents:3,values:h});p.setName("points");const S=fn.newInstance({numberOfComponents:1,values:C});e.tris.getCABO().createVBO(S,"polys",Fi.SURFACE,{points:p,cellOffset:0})}e.VBOBuildTime.modified()},t.getNeedToRebuildBufferObjects=(n,r)=>{var a,i,o,s,c,l;return e.VBOBuildTime.getMTime()<t.getMTime()||e.VBOBuildTime.getMTime()<r.getMTime()||e.VBOBuildTime.getMTime()<e.renderable.getMTime()||e.VBOBuildTime.getMTime()<r.getProperty().getMTime()||e.VBOBuildTime.getMTime()<e.currentInput.getMTime()||e.VBOBuildTime.getMTime()<((a=e.scalarTexture)==null?void 0:a.getMTime())||e.VBOBuildTime.getMTime()<((i=e.colorTexture)==null?void 0:i.getMTime())||e.VBOBuildTime.getMTime()<((o=e.labelOutlineThicknessTexture)==null?void 0:o.getMTime())||!((s=e.scalarTexture)!=null&&s.getHandle())||!((c=e.colorTexture)!=null&&c.getHandle())||!((l=e.labelOutlineThicknessTexture)!=null&&l.getHandle())}}const lre={};function oL(t,e,n={}){Object.assign(e,lre,n),iL.extend(t,e,n),e.scalarTexture=n.scalarTexture,e.previousState={},cre(t,e)}const ure=J.newInstance(oL,"vtkStreamingOpenGLVolumeMapper"),fre={newInstance:ure,extend:oL},sL=Object.create(null);function Ti(t,e){sL[t]=e}function vre(t,e){e.classHierarchy.push("vtkStreamingOpenGLViewNodeFactory"),t.createNode=n=>{if(n.isDeleted())return null;let r=0,a=n.getClassName(r++),i=!1;const o=Object.keys(e.overrides);for(;a&&!i;)o.includes(a)?i=!0:a=n.getClassName(r++);if(!i)return null;const s=e.getModelInitialValues(n),c=e.overrides[a](s);return c.setMyFactory(t),c},e.overrides=sL,e.getModelInitialValues=n=>{const r={};return n.getClassName()==="vtkSharedVolumeMapper"&&(r.scalarTexture=n.getScalarTexture()),r}}const gre={};function cL(t,e,n={}){Object.assign(e,gre,n),HM.extend(t,e,n),vre(t,e),Ti("vtkActor",qee.newInstance),Ti("vtkActor2D",Kee.newInstance),Ti("vtkCamera",Zee.newInstance),Ti("vtkGlyph3DMapper",Cne.newInstance),Ti("vtkImageMapper",Mne.newInstance),Ti("vtkImageCPRMapper",Pne.newInstance),Ti("vtkImageSlice",Rne.newInstance),Ti("vtkMapper",gI.newInstance),Ti("vtkPixelSpaceCallbackMapper",Une.newInstance),Ti("vtkRenderer",Gne.newInstance),Ti("vtkSkybox",Hne.newInstance),Ti("vtkSphereMapper",Qne.newInstance),Ti("vtkStickMapper",Zne.newInstance),Ti("vtkTexture",oa.newInstance),Ti("vtkVolume",tre.newInstance),Ti("vtkVolumeMapper",iL.newInstance),Ti("vtkSharedVolumeMapper",fre.newInstance)}const dre=J.newInstance(cL,"vtkStreamingOpenGLViewNodeFactory"),mre={newInstance:dre,extend:cL};function hre(t,e){e.classHierarchy.push("vtkStreamingOpenGLRenderWindow")}function lL(t,e,n={}){Object.assign(e,n),Hee.extend(t,e,n),e.myFactory=mre.newInstance(),Ti("vtkRenderWindow",uL),hre(t,e)}const uL=J.newInstance(lL,"vtkStreamingOpenGLRenderWindow"),pre={newInstance:uL,extend:lL},{vtkDebugMacro:gp}=J;function Sre(t,e){e.classHierarchy.push("vtkCamera");const n=new Float64Array(3),r=new Float64Array([0,0,-1]),a=new Float64Array([0,1,0]),i=zt(new Float64Array(16)),o=zt(new Float64Array(16)),s=new Float64Array(3),c=new Float64Array(3),l=new Float64Array(3),u=zt(new Float64Array(16)),f=zt(new Float64Array(16)),v=new Float64Array(3),g=new Float64Array(3);function d(){e.viewPlaneNormal[0]=-e.directionOfProjection[0],e.viewPlaneNormal[1]=-e.directionOfProjection[1],e.viewPlaneNormal[2]=-e.directionOfProjection[2]}t.orthogonalizeViewUp=()=>{const m=t.getViewMatrix();e.viewUp[0]=m[4],e.viewUp[1]=m[5],e.viewUp[2]=m[6],t.modified()},t.setPosition=(m,h,C)=>{m===e.position[0]&&h===e.position[1]&&C===e.position[2]||(e.position[0]=m,e.position[1]=h,e.position[2]=C,t.computeDistance(),t.modified())},t.setFocalPoint=(m,h,C)=>{m===e.focalPoint[0]&&h===e.focalPoint[1]&&C===e.focalPoint[2]||(e.focalPoint[0]=m,e.focalPoint[1]=h,e.focalPoint[2]=C,t.computeDistance(),t.modified())},t.setDistance=m=>{if(e.distance===m)return;e.distance=m,e.distance<1e-20&&(e.distance=1e-20,gp("Distance is set to minimum."));const h=e.directionOfProjection;e.focalPoint[0]=e.position[0]+h[0]*e.distance,e.focalPoint[1]=e.position[1]+h[1]*e.distance,e.focalPoint[2]=e.position[2]+h[2]*e.distance,t.modified()},t.computeDistance=()=>{const m=e.focalPoint[0]-e.position[0],h=e.focalPoint[1]-e.position[1],C=e.focalPoint[2]-e.position[2];if(e.distance=Math.sqrt(m*m+h*h+C*C),e.distance<1e-20){e.distance=1e-20,gp("Distance is set to minimum.");const p=e.directionOfProjection;e.focalPoint[0]=e.position[0]+p[0]*e.distance,e.focalPoint[1]=e.position[1]+p[1]*e.distance,e.focalPoint[2]=e.position[2]+p[2]*e.distance}e.directionOfProjection[0]=m/e.distance,e.directionOfProjection[1]=h/e.distance,e.directionOfProjection[2]=C/e.distance,d()},t.dolly=m=>{if(m<=0)return;const h=e.distance/m;t.setPosition(e.focalPoint[0]-h*e.directionOfProjection[0],e.focalPoint[1]-h*e.directionOfProjection[1],e.focalPoint[2]-h*e.directionOfProjection[2])},t.roll=m=>{const h=e.position,C=e.focalPoint,p=e.viewUp,S=new Float64Array([p[0],p[1],p[2],0]);zt(u);const I=new Float64Array([C[0]-h[0],C[1]-h[1],C[2]-h[2]]);Ki(u,u,Oa(m),I),Nl(S,S,u),e.viewUp[0]=S[0],e.viewUp[1]=S[1],e.viewUp[2]=S[2],t.modified()},t.azimuth=m=>{const h=e.focalPoint;zt(f),kr(f,f,h),Ki(f,f,Oa(m),e.viewUp),kr(f,f,[-h[0],-h[1],-h[2]]),un(v,e.position,f),t.setPosition(v[0],v[1],v[2])},t.yaw=m=>{const h=e.position;zt(f),kr(f,f,h),Ki(f,f,Oa(m),e.viewUp),kr(f,f,[-h[0],-h[1],-h[2]]),un(g,e.focalPoint,f),t.setFocalPoint(g[0],g[1],g[2])},t.elevation=m=>{const h=e.focalPoint,C=t.getViewMatrix(),p=[-C[0],-C[1],-C[2]];zt(f),kr(f,f,h),Ki(f,f,Oa(m),p),kr(f,f,[-h[0],-h[1],-h[2]]),un(v,e.position,f),t.setPosition(v[0],v[1],v[2])},t.pitch=m=>{const h=e.position,C=t.getViewMatrix(),p=[C[0],C[1],C[2]];zt(f),kr(f,f,h),Ki(f,f,Oa(m),p),kr(f,f,[-h[0],-h[1],-h[2]]),un(g,e.focalPoint,f),t.setFocalPoint(...g)},t.zoom=m=>{m<=0||(e.parallelProjection?e.parallelScale/=m:e.viewAngle/=m,t.modified())},t.translate=(m,h,C)=>{const p=[m,h,C];IS(e.position,p,e.position),IS(e.focalPoint,p,e.focalPoint),t.computeDistance(),t.modified()},t.applyTransform=m=>{const h=[...e.viewUp,1],C=[],p=[],S=[];h[0]+=e.position[0],h[1]+=e.position[1],h[2]+=e.position[2],Nl(C,[...e.position,1],m),Nl(p,[...e.focalPoint,1],m),Nl(S,h,m),S[0]-=C[0],S[1]-=C[1],S[2]-=C[2],t.setPosition(...C.slice(0,3)),t.setFocalPoint(...p.slice(0,3)),t.setViewUp(...S.slice(0,3))},t.getThickness=()=>e.clippingRange[1]-e.clippingRange[0],t.setThickness=m=>{let h=m;h<1e-20&&(h=1e-20,gp("Thickness is set to minimum.")),t.setClippingRange(e.clippingRange[0],e.clippingRange[0]+h)},t.setThicknessFromFocalPoint=m=>{let h=m;h<1e-20&&(h=1e-20,gp("Thickness is set to minimum.")),t.setClippingRange(e.distance-h/2,e.distance+h/2)},t.setRoll=m=>{},t.getRoll=()=>{},t.setObliqueAngles=(m,h)=>{},t.getOrientation=()=>{},t.getOrientationWXYZ=()=>{},t.getFrustumPlanes=m=>{},t.getCameraLightTransformMatrix=m=>(fa(m,e.cameraLightTransform),m),t.computeCameraLightTransform=()=>{fa(i,t.getViewMatrix()),ba(i,i),YM(o,[e.distance,e.distance,e.distance]),Xn(i,i,o),zt(e.cameraLightTransform),kr(e.cameraLightTransform,i,[0,0,-1])},t.deepCopy=m=>{},t.physicalOrientationToWorldDirection=m=>{const h=w8(m[0],m[1],m[2],m[3]),C=au(),p=w8(0,0,1,0);return HZ(C,h),O8(p,h,p),O8(p,p,C),[p[0],p[1],p[2]]},t.getPhysicalToWorldMatrix=m=>{t.getWorldToPhysicalMatrix(m),ba(m,m)},t.getWorldToPhysicalMatrix=m=>{zt(m);const h=[3];Q0(e.physicalViewNorth,e.physicalViewUp,h),m[0]=h[0],m[1]=h[1],m[2]=h[2],m[4]=e.physicalViewUp[0],m[5]=e.physicalViewUp[1],m[6]=e.physicalViewUp[2],m[8]=-e.physicalViewNorth[0],m[9]=-e.physicalViewNorth[1],m[10]=-e.physicalViewNorth[2],$n(m,m),or(s,1/e.physicalScale,1/e.physicalScale,1/e.physicalScale),$c(m,m,s),kr(m,m,e.physicalTranslation)},t.computeViewParametersFromViewMatrix=m=>{ba(i,m),un(s,n,i),t.computeDistance();const h=e.distance;t.setPosition(s[0],s[1],s[2]),un(c,r,i),fr(c,c,s),Ar(c,c),t.setDirectionOfProjection(c[0],c[1],c[2]),un(l,a,i),fr(l,l,s),Ar(l,l),t.setViewUp(l[0],l[1],l[2]),t.setDistance(h)},t.computeViewParametersFromPhysicalMatrix=m=>{t.getWorldToPhysicalMatrix(i),Xn(i,m,i),t.computeViewParametersFromViewMatrix(i)},t.setViewMatrix=m=>{e.viewMatrix=m,e.viewMatrix&&(fa(i,e.viewMatrix),t.computeViewParametersFromViewMatrix(i),$n(e.viewMatrix,e.viewMatrix))},t.getViewMatrix=()=>{if(e.viewMatrix)return e.viewMatrix;e5(i,e.position,e.focalPoint,e.viewUp),$n(i,i);const m=new Float64Array(16);return fa(m,i),m},t.setProjectionMatrix=m=>{e.projectionMatrix=m},t.getProjectionMatrix=(m,h,C)=>{const p=new Float64Array(16);if(zt(p),e.projectionMatrix){const D=1/e.physicalScale;return or(s,D,D,D),fa(p,e.projectionMatrix),$c(p,p,s),$n(p,p),p}zt(i);const S=e.clippingRange[1]-e.clippingRange[0],I=[e.clippingRange[0]+(h+1)*S/2,e.clippingRange[0]+(C+1)*S/2];if(e.parallelProjection){const D=e.parallelScale*m,E=e.parallelScale,T=(e.windowCenter[0]-1)*D,y=(e.windowCenter[0]+1)*D,M=(e.windowCenter[1]-1)*E,_=(e.windowCenter[1]+1)*E;JM(i,T,y,M,_,I[0],I[1]),$n(i,i)}else{if(e.useOffAxisProjection)throw new Error("Off-Axis projection is not supported at this time");{const D=Math.tan(Oa(e.viewAngle)/2);let E,T;e.useHorizontalViewAngle===!0?(E=e.clippingRange[0]*D,T=e.clippingRange[0]*D/m):(E=e.clippingRange[0]*D*m,T=e.clippingRange[0]*D);const y=(e.windowCenter[0]-1)*E,M=(e.windowCenter[0]+1)*E,_=(e.windowCenter[1]-1)*T,O=(e.windowCenter[1]+1)*T,w=I[0],x=I[1];i[0]=2*w/(M-y),i[5]=2*w/(O-_),i[2]=(y+M)/(M-y),i[6]=(_+O)/(O-_),i[10]=-(w+x)/(x-w),i[14]=-1,i[11]=-2*w*x/(x-w),i[15]=0}}return fa(p,i),p},t.getCompositeProjectionMatrix=(m,h,C)=>{const p=t.getViewMatrix(),S=t.getProjectionMatrix(m,h,C);return Xn(S,p,S),S},t.setDirectionOfProjection=(m,h,C)=>{if(e.directionOfProjection[0]===m&&e.directionOfProjection[1]===h&&e.directionOfProjection[2]===C)return;e.directionOfProjection[0]=m,e.directionOfProjection[1]=h,e.directionOfProjection[2]=C;const p=e.directionOfProjection;e.focalPoint[0]=e.position[0]+p[0]*e.distance,e.focalPoint[1]=e.position[1]+p[1]*e.distance,e.focalPoint[2]=e.position[2]+p[2]*e.distance,d()},t.setDeviceAngles=(m,h,C,p)=>{const S=[3];Q0(e.physicalViewNorth,e.physicalViewUp,S);const I=zt(new Float64Array(16));Ki(I,I,Oa(m),e.physicalViewUp),Ki(I,I,Oa(h),S),Ki(I,I,Oa(C),e.physicalViewNorth),Ki(I,I,Oa(-p),e.physicalViewUp);const D=new Float64Array([-e.physicalViewUp[0],-e.physicalViewUp[1],-e.physicalViewUp[2]]),E=new Float64Array(e.physicalViewNorth);un(D,D,I),un(E,E,I),t.setDirectionOfProjection(D[0],D[1],D[2]),t.setViewUp(E[0],E[1],E[2]),t.modified()},t.setOrientationWXYZ=(m,h,C,p)=>{const S=zt(new Float64Array(16));if(m!==0&&(h!==0||C!==0||p!==0)){const E=Oa(m),T=au();iI(T,[h,C,p],E),TS(S,T)}const I=new Float64Array(3);un(I,[0,0,-1],S);const D=new Float64Array(3);un(D,[0,1,0],S),t.setDirectionOfProjection(...I),t.setViewUp(...D),t.modified()},t.computeClippingRange=m=>{let h=null,C=null;h=e.viewPlaneNormal,C=e.position;const p=-h[0],S=-h[1],I=-h[2],D=-(p*C[0]+S*C[1]+I*C[2]),E=[p*m[0]+S*m[2]+I*m[4]+D,1e-18];for(let T=0;T<2;T++)for(let y=0;y<2;y++)for(let M=0;M<2;M++){const _=p*m[M]+S*m[2+y]+I*m[4+T]+D;E[0]=_<E[0]?_:E[0],E[1]=_>E[1]?_:E[1]}return E}}const Cre={position:[0,0,1],focalPoint:[0,0,0],viewUp:[0,1,0],directionOfProjection:[0,0,-1],parallelProjection:!1,useHorizontalViewAngle:!1,viewAngle:30,parallelScale:1,clippingRange:[.01,1000.01],windowCenter:[0,0],viewPlaneNormal:[0,0,1],useOffAxisProjection:!1,screenBottomLeft:[-.5,-.5,-.5],screenBottomRight:[.5,-.5,-.5],screenTopRight:[.5,.5,-.5],freezeFocalPoint:!1,projectionMatrix:null,viewMatrix:null,cameraLightTransform:Fs(),physicalTranslation:[0,0,0],physicalScale:1,physicalViewUp:[0,1,0],physicalViewNorth:[0,0,-1]};function fL(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Cre,n),J.obj(t,e),J.get(t,e,["distance"]),J.setGet(t,e,["parallelProjection","useHorizontalViewAngle","viewAngle","parallelScale","useOffAxisProjection","freezeFocalPoint","physicalScale"]),J.getArray(t,e,["directionOfProjection","viewPlaneNormal","position","focalPoint"]),J.setGetArray(t,e,["clippingRange","windowCenter"],2),J.setGetArray(t,e,["viewUp","screenBottomLeft","screenBottomRight","screenTopRight","physicalTranslation","physicalViewUp","physicalViewNorth"],3),Sre(t,e)}const Ire=J.newInstance(fL,"vtkCamera");var E5={newInstance:Ire,extend:fL};const Dre=["HeadLight","CameraLight","SceneLight"];function Ere(t,e){e.classHierarchy.push("vtkLight");const n=new Float64Array(3);t.getTransformedPosition=()=>(e.transformMatrix?un(n,e.position,e.transformMatrix):or(n,e.position[0],e.position[1],e.position[2]),n),t.getTransformedFocalPoint=()=>(e.transformMatrix?un(n,e.focalPoint,e.transformMatrix):or(n,e.focalPoint[0],e.focalPoint[1],e.focalPoint[2]),n),t.getDirection=()=>(e.directionMTime<e.mtime&&(Dr(e.direction,e.focalPoint,e.position),T1(e.direction),e.directionMTime=e.mtime),e.direction),t.setDirection=r=>{const a=new Float64Array(3);Dr(a,e.position,r),e.focalPoint=a},t.setDirectionAngle=(r,a)=>{const i=Oa(r),o=Oa(a);t.setPosition(Math.cos(i)*Math.sin(o),Math.sin(i),Math.cos(i)*Math.cos(o)),t.setFocalPoint(0,0,0),t.setPositional(0)},t.setLightTypeToHeadLight=()=>{t.setLightType("HeadLight")},t.setLightTypeToCameraLight=()=>{t.setLightType("CameraLight")},t.setLightTypeToSceneLight=()=>{t.setTransformMatrix(null),t.setLightType("SceneLight")},t.lightTypeIsHeadLight=()=>e.lightType==="HeadLight",t.lightTypeIsSceneLight=()=>e.lightType==="SceneLight",t.lightTypeIsCameraLight=()=>e.lightType==="CameraLight"}const Tre={switch:!0,intensity:1,color:[1,1,1],position:[0,0,1],focalPoint:[0,0,0],positional:!1,exponent:1,coneAngle:30,coneFalloff:5,attenuationValues:[1,0,0],transformMatrix:null,lightType:"SceneLight",shadowAttenuation:1,direction:[0,0,0],directionMTime:0};function vL(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Tre,n),J.obj(t,e),J.setGet(t,e,["intensity","switch","positional","exponent","coneAngle","coneFalloff","transformMatrix","lightType","shadowAttenuation","attenuationValues"]),J.setGetArray(t,e,["color","position","focalPoint","attenuationValues"],3),Ere(t,e)}const yre=J.newInstance(vL,"vtkLight");var Mre={newInstance:yre,extend:vL,LIGHT_TYPES:Dre};const{vtkErrorMacro:V2}=J;function _re(t){return()=>V2(`vtkViewport::${t} - NOT IMPLEMENTED`)}function Ore(t,e){e.classHierarchy.push("vtkViewport"),t.getViewProps=()=>e.props,t.hasViewProp=r=>e.props.includes(r),t.addViewProp=r=>{r&&!t.hasViewProp(r)&&e.props.push(r)},t.removeViewProp=r=>{const a=e.props.filter(i=>i!==r);e.props.length!==a.length&&(e.props=a)},t.removeAllViewProps=()=>{e.props=[]};function n(r){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];a.push(r);const i=r.getNestedProps();if(i&&i.length)for(let o=0;o<i.length;o++)n(i[o],a);return a}t.getViewPropsWithNestedProps=()=>{const r=[];for(let a=0;a<e.props.length;a++)n(e.props[a],r);return r},t.addActor2D=t.addViewProp,t.removeActor2D=r=>{t.removeViewProp(r)},t.getActors2D=()=>(e.actors2D=[],e.props.forEach(r=>{e.actors2D=e.actors2D.concat(r.getActors2D())}),e.actors2D),t.displayToView=()=>V2("call displayToView on your view instead"),t.viewToDisplay=()=>V2("callviewtodisplay on your view instead"),t.getSize=()=>V2("call getSize on your View instead"),t.normalizedDisplayToProjection=(r,a,i)=>{const o=t.normalizedDisplayToNormalizedViewport(r,a,i);return t.normalizedViewportToProjection(o[0],o[1],o[2])},t.normalizedDisplayToNormalizedViewport=(r,a,i)=>{const o=[e.viewport[2]-e.viewport[0],e.viewport[3]-e.viewport[1]];return[(r-e.viewport[0])/o[0],(a-e.viewport[1])/o[1],i]},t.normalizedViewportToProjection=(r,a,i)=>[r*2-1,a*2-1,i*2-1],t.projectionToNormalizedDisplay=(r,a,i)=>{const o=t.projectionToNormalizedViewport(r,a,i);return t.normalizedViewportToNormalizedDisplay(o[0],o[1],o[2])},t.normalizedViewportToNormalizedDisplay=(r,a,i)=>{const o=[e.viewport[2]-e.viewport[0],e.viewport[3]-e.viewport[1]];return[r*o[0]+e.viewport[0],a*o[1]+e.viewport[1],i]},t.projectionToNormalizedViewport=(r,a,i)=>[(r+1)*.5,(a+1)*.5,(i+1)*.5],t.PickPropFrom=_re("PickPropFrom")}const wre={background:[0,0,0],background2:[.2,.2,.2],gradientBackground:!1,viewport:[0,0,1,1],aspect:[1,1],pixelAspect:[1,1],props:[],actors2D:[]};function gL(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,wre,n),J.obj(t,e),J.event(t,e,"event"),J.setGetArray(t,e,["viewport"],4),J.setGetArray(t,e,["background","background2"],3),Ore(t,e)}const Pre=J.newInstance(gL,"vtkViewport");var Are={newInstance:Pre,extend:gL};const{vtkDebugMacro:dg,vtkErrorMacro:Dl,vtkWarningMacro:xre}=Bi;function ew(t){return()=>Dl(`vtkRenderer::${t} - NOT IMPLEMENTED`)}function Rre(t,e){e.classHierarchy.push("vtkRenderer");const n={type:"ComputeVisiblePropBoundsEvent",renderer:t},r={type:"ResetCameraClippingRangeEvent",renderer:t},a={type:"ResetCameraEvent",renderer:t};t.updateCamera=()=>(e.activeCamera||(dg("No cameras are on, creating one."),t.getActiveCameraAndResetIfCreated()),e.activeCamera.render(t),!0),t.updateLightsGeometryToFollowCamera=()=>{const i=t.getActiveCameraAndResetIfCreated();e.lights.forEach(o=>{o.lightTypeIsSceneLight()||(o.lightTypeIsHeadLight()?(o.setPositionFrom(i.getPositionByReference()),o.setFocalPointFrom(i.getFocalPointByReference()),o.modified(i.getMTime())):o.lightTypeIsCameraLight()?o.setTransformMatrix(i.getCameraLightTransformMatrix(Fs())):Dl("light has unknown light type",o.get()))})},t.updateLightGeometry=()=>e.lightFollowCamera?t.updateLightsGeometryToFollowCamera():!0,t.allocateTime=ew("allocateTime"),t.updateGeometry=ew("updateGeometry"),t.getVTKWindow=()=>e._renderWindow,t.setLayer=i=>{dg(t.getClassName(),t,"setting Layer to ",i),e.layer!==i&&(e.layer=i,t.modified()),t.setPreserveColorBuffer(!!i)},t.setActiveCamera=i=>e.activeCamera===i?!1:(e.activeCamera=i,t.modified(),t.invokeEvent({type:"ActiveCameraEvent",camera:i}),!0),t.makeCamera=()=>{const i=E5.newInstance();return t.invokeEvent({type:"CreateCameraEvent",camera:i}),i},t.getActiveCamera=()=>(e.activeCamera||(e.activeCamera=t.makeCamera()),e.activeCamera),t.getActiveCameraAndResetIfCreated=()=>(e.activeCamera||(t.getActiveCamera(),t.resetCamera()),e.activeCamera),t.getActors=()=>(e.actors=[],e.props.forEach(i=>{e.actors=e.actors.concat(i.getActors())}),e.actors),t.addActor=t.addViewProp,t.removeActor=i=>{e.actors=e.actors.filter(o=>o!==i),t.removeViewProp(i),t.modified()},t.removeAllActors=()=>{t.getActors().forEach(o=>{t.removeViewProp(o)}),e.actors=[],t.modified()},t.getVolumes=()=>(e.volumes=[],e.props.forEach(i=>{e.volumes=e.volumes.concat(i.getVolumes())}),e.volumes),t.addVolume=t.addViewProp,t.removeVolume=i=>{e.volumes=e.volumes.filter(o=>o!==i),t.removeViewProp(i),t.modified()},t.removeAllVolumes=()=>{t.getVolumes().forEach(o=>{t.removeViewProp(o)}),e.volumes=[],t.modified()},t.hasLight=i=>e.lights.includes(i),t.addLight=i=>{i&&!t.hasLight(i)&&(e.lights.push(i),t.modified())},t.removeLight=i=>{e.lights=e.lights.filter(o=>o!==i),t.modified()},t.removeAllLights=()=>{e.lights=[],t.modified()},t.setLightCollection=i=>{e.lights=i,t.modified()},t.makeLight=Mre.newInstance,t.createLight=()=>{e.automaticLightCreation&&(e._createdLight&&(t.removeLight(e._createdLight),e._createdLight.delete(),e._createdLight=null),e._createdLight=t.makeLight(),t.addLight(e._createdLight),e._createdLight.setLightTypeToHeadLight(),e._createdLight.setPosition(t.getActiveCamera().getPosition()),e._createdLight.setFocalPoint(t.getActiveCamera().getFocalPoint()))},t.normalizedDisplayToWorld=(i,o,s,c)=>{let l=t.normalizedDisplayToProjection(i,o,s);return l=t.projectionToView(l[0],l[1],l[2],c),t.viewToWorld(l[0],l[1],l[2])},t.worldToNormalizedDisplay=(i,o,s,c)=>{let l=t.worldToView(i,o,s);return l=t.viewToProjection(l[0],l[1],l[2],c),t.projectionToNormalizedDisplay(l[0],l[1],l[2])},t.viewToWorld=(i,o,s)=>{if(e.activeCamera===null)return Dl("ViewToWorld: no active camera, cannot compute view to world, returning 0,0,0"),[0,0,0];const c=e.activeCamera.getViewMatrix();ba(c,c),$n(c,c);const l=new Float64Array([i,o,s]);return un(l,l,c),l},t.projectionToView=(i,o,s,c)=>{if(e.activeCamera===null)return Dl("ProjectionToView: no active camera, cannot compute projection to view, returning 0,0,0"),[0,0,0];const l=e.activeCamera.getProjectionMatrix(c,-1,1);ba(l,l),$n(l,l);const u=new Float64Array([i,o,s]);return un(u,u,l),u},t.worldToView=(i,o,s)=>{if(e.activeCamera===null)return Dl("WorldToView: no active camera, cannot compute view to world, returning 0,0,0"),[0,0,0];const c=e.activeCamera.getViewMatrix();$n(c,c);const l=new Float64Array([i,o,s]);return un(l,l,c),l},t.viewToProjection=(i,o,s,c)=>{if(e.activeCamera===null)return Dl("ViewToProjection: no active camera, cannot compute view to projection, returning 0,0,0"),[0,0,0];const l=e.activeCamera.getProjectionMatrix(c,-1,1);$n(l,l);const u=new Float64Array([i,o,s]);return un(u,u,l),u},t.computeVisiblePropBounds=()=>{e.allBounds[0]=Pr.INIT_BOUNDS[0],e.allBounds[1]=Pr.INIT_BOUNDS[1],e.allBounds[2]=Pr.INIT_BOUNDS[2],e.allBounds[3]=Pr.INIT_BOUNDS[3],e.allBounds[4]=Pr.INIT_BOUNDS[4],e.allBounds[5]=Pr.INIT_BOUNDS[5];let i=!0;t.invokeEvent(n);for(let o=0;o<e.props.length;++o){const s=e.props[o];if(s.getVisibility()&&s.getUseBounds()){const c=s.getBounds();c&&x2(c)&&(i=!1,c[0]<e.allBounds[0]&&(e.allBounds[0]=c[0]),c[1]>e.allBounds[1]&&(e.allBounds[1]=c[1]),c[2]<e.allBounds[2]&&(e.allBounds[2]=c[2]),c[3]>e.allBounds[3]&&(e.allBounds[3]=c[3]),c[4]<e.allBounds[4]&&(e.allBounds[4]=c[4]),c[5]>e.allBounds[5]&&(e.allBounds[5]=c[5]))}}return i&&(Rv(e.allBounds),dg("Can't compute bounds, no 3D props are visible")),e.allBounds},t.resetCamera=function(){const o=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:null)||t.computeVisiblePropBounds(),s=[0,0,0];if(!x2(o))return dg("Cannot reset camera!"),!1;let c=null;if(t.getActiveCamera())c=e.activeCamera.getViewPlaneNormal();else return Dl("Trying to reset non-existent camera"),!1;e.activeCamera.setViewAngle(30),s[0]=(o[0]+o[1])/2,s[1]=(o[2]+o[3])/2,s[2]=(o[4]+o[5])/2;let l=o[1]-o[0],u=o[3]-o[2],f=o[5]-o[4];l*=l,u*=u,f*=f;let v=l+u+f;v=v===0?1:v,v=Math.sqrt(v)*.5;const g=Oa(e.activeCamera.getViewAngle()),d=v,m=v/Math.sin(g*.5),h=e.activeCamera.getViewUp();return Math.abs(Wn(h,c))>.999&&(xre("Resetting view-up since view plane normal is parallel"),e.activeCamera.setViewUp(-h[2],h[0],h[1])),e.activeCamera.setFocalPoint(s[0],s[1],s[2]),e.activeCamera.setPosition(s[0]+m*c[0],s[1]+m*c[1],s[2]+m*c[2]),t.resetCameraClippingRange(o),e.activeCamera.setParallelScale(d),e.activeCamera.setPhysicalScale(v),e.activeCamera.setPhysicalTranslation(-s[0],-s[1],-s[2]),t.invokeEvent(a),!0},t.resetCameraClippingRange=function(){const o=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:null)||t.computeVisiblePropBounds();if(!x2(o))return dg("Cannot reset camera clipping range!"),!1;if(t.getActiveCameraAndResetIfCreated(),!e.activeCamera)return Dl("Trying to reset clipping range of non-existent camera"),!1;const s=e.activeCamera.computeClippingRange(o);let c=0;if(e.activeCamera.getParallelProjection())c=.2*e.activeCamera.getParallelScale();else{const l=Oa(e.activeCamera.getViewAngle());c=.2*Math.tan(l/2)*s[1]}return s[1]-s[0]<c&&(c=c-s[1]+s[0],s[1]+=c/2,s[0]-=c/2),s[0]<0&&(s[0]=0),s[0]=.99*s[0]-(s[1]-s[0])*e.clippingRangeExpansion,s[1]=1.01*s[1]+(s[1]-s[0])*e.clippingRangeExpansion,s[0]=s[0]>=s[1]?.01*s[1]:s[0],e.nearClippingPlaneTolerance||(e.nearClippingPlaneTolerance=.01),s[0]<e.nearClippingPlaneTolerance*s[1]&&(s[0]=e.nearClippingPlaneTolerance*s[1]),e.activeCamera.setClippingRange(s[0],s[1]),t.invokeEvent(r),!1},t.setRenderWindow=i=>{i!==e._renderWindow&&(e._vtkWindow=i,e._renderWindow=i)},t.visibleActorCount=()=>e.props.filter(i=>i.getVisibility()).length,t.visibleVolumeCount=t.visibleActorCount,t.getMTime=()=>{let i=e.mtime;const o=e.activeCamera?e.activeCamera.getMTime():0;o>i&&(i=o);const s=e._createdLight?e._createdLight.getMTime():0;return s>i&&(i=s),i},t.getTransparent=()=>!!e.preserveColorBuffer,t.isActiveCameraCreated=()=>!!e.activeCamera}const bre={pickedProp:null,activeCamera:null,allBounds:[],ambient:[1,1,1],allocatedRenderTime:100,timeFactor:1,automaticLightCreation:!0,twoSidedLighting:!0,lastRenderTimeInSeconds:-1,renderWindow:null,lights:[],actors:[],volumes:[],lightFollowCamera:!0,numberOfPropsRendered:0,propArray:null,pathArray:null,layer:0,preserveColorBuffer:!1,preserveDepthBuffer:!1,computeVisiblePropBounds:nu(),interactive:!0,nearClippingPlaneTolerance:0,clippingRangeExpansion:.05,erase:!0,draw:!0,useShadows:!1,useDepthPeeling:!1,occlusionRatio:0,maximumNumberOfPeels:4,selector:null,delegate:null,texturedBackground:!1,backgroundTexture:null,environmentTexture:null,environmentTextureDiffuseStrength:1,environmentTextureSpecularStrength:1,useEnvironmentTextureAsBackground:!1,pass:0};function dL(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};for(Object.assign(e,bre,n),Are.extend(t,e,n),e.background||(e.background=[0,0,0,1]);e.background.length<3;)e.background.push(0);e.background.length===3&&e.background.push(1),_o(t,e,["_renderWindow","allocatedRenderTime","timeFactor","lastRenderTimeInSeconds","numberOfPropsRendered","lastRenderingUsedDepthPeeling","selector"]),Wa(t,e,["twoSidedLighting","lightFollowCamera","automaticLightCreation","erase","draw","nearClippingPlaneTolerance","clippingRangeExpansion","backingStore","interactive","layer","preserveColorBuffer","preserveDepthBuffer","useDepthPeeling","occlusionRatio","maximumNumberOfPeels","delegate","backgroundTexture","texturedBackground","environmentTexture","environmentTextureDiffuseStrength","environmentTextureSpecularStrength","useEnvironmentTextureAsBackground","useShadows","pass"]),xv(t,e,["actors","volumes","lights"]),xM(t,e,["background"],4,1),Xm(t,e,["renderWindow"]),Rre(t,e)}const Nre=dr(dL,"vtkRenderer");var mL={newInstance:Nre,extend:dL};const Lre={Unknown:0,LeftController:1,RightController:2},Ure={Unknown:0,Trigger:1,TrackPad:2,Grip:3,Thumbstick:4,A:5,B:6,ApplicationMenu:7},Fre={Unknown:0,TouchpadX:1,TouchpadY:2,ThumbstickX:3,ThumbstickY:4};var hL={Device:Lre,Input:Ure,Axis:Fre};const{Device:dp,Input:Wu}=hL,{vtkWarningMacro:mp,vtkErrorMacro:hp,normalizeWheel:Vre,vtkOnceErrorMacro:kre}=J,rf={ctrlKey:!1,altKey:!1,shiftKey:!1},rE={"xr-standard":[Wu.Trigger,Wu.Grip,Wu.TrackPad,Wu.Thumbstick,Wu.A,Wu.B]},T5=["StartAnimation","Animation","EndAnimation","PointerEnter","PointerLeave","MouseEnter","MouseLeave","StartMouseMove","MouseMove","EndMouseMove","LeftButtonPress","LeftButtonRelease","MiddleButtonPress","MiddleButtonRelease","RightButtonPress","RightButtonRelease","KeyPress","KeyDown","KeyUp","StartMouseWheel","MouseWheel","EndMouseWheel","StartPinch","Pinch","EndPinch","StartPan","Pan","EndPan","StartRotate","Rotate","EndRotate","Button3D","Move3D","StartPointerLock","EndPointerLock","StartInteraction","Interaction","EndInteraction","AnimationFrameRateUpdate"];function mg(t){t.cancelable&&t.preventDefault()}function pp(t){const e=Object.create(null);return t.forEach(n=>{let{pointerId:r,position:a}=n;e[r]=a}),e}function Gre(t,e){e.classHierarchy.push("vtkRenderWindowInteractor");const n={...t},r=new Set,a=new Map;let i=1;t.start=()=>{!e.initialized&&(t.initialize(),!e.initialized)||t.startEventLoop()},t.setRenderWindow=m=>{hp("you want to call setView(view) instead of setRenderWindow on a vtk.js interactor")},t.setInteractorStyle=m=>{e.interactorStyle!==m&&(e.interactorStyle!=null&&e.interactorStyle.setInteractor(null),e.interactorStyle=m,e.interactorStyle!=null&&e.interactorStyle.getInteractor()!==t&&e.interactorStyle.setInteractor(t))},t.initialize=()=>{e.initialized=!0,t.enable(),t.render()},t.enable=()=>t.setEnabled(!0),t.disable=()=>t.setEnabled(!1),t.startEventLoop=()=>mp("empty event loop");function o(m,h){e._forcedRenderer||(e.currentRenderer=t.findPokedRenderer(m,h))}t.getCurrentRenderer=()=>(e.currentRenderer||o(0,0),e.currentRenderer);function s(m){const h=e._view.getCanvas(),C=h.getBoundingClientRect(),p=h.width/C.width,S=h.height/C.height,I={x:p*(m.clientX-C.left),y:S*(C.height-m.clientY+C.top),z:0};return(a.size<=1||!e.currentRenderer)&&o(I.x,I.y),I}const c=e._getScreenEventPositionFor||s;function l(m){return{controlKey:m.ctrlKey,altKey:m.altKey,shiftKey:m.shiftKey}}function u(m){const h=l(m);return{key:m.key,keyCode:m.charCode,...h}}function f(m){return m.pointerType||""}const v=()=>{if(e.container===null)return;const{container:m}=e;m.addEventListener("contextmenu",mg),m.addEventListener("wheel",t.handleWheel),m.addEventListener("DOMMouseScroll",t.handleWheel),m.addEventListener("pointerenter",t.handlePointerEnter),m.addEventListener("pointerleave",t.handlePointerLeave),m.addEventListener("pointermove",t.handlePointerMove,{passive:!1}),m.addEventListener("pointerdown",t.handlePointerDown,{passive:!1}),m.addEventListener("pointerup",t.handlePointerUp),m.addEventListener("pointercancel",t.handlePointerCancel),document.addEventListener("keypress",t.handleKeyPress),document.addEventListener("keydown",t.handleKeyDown),document.addEventListener("keyup",t.handleKeyUp),document.addEventListener("pointerlockchange",t.handlePointerLockChange),m.style.touchAction="none",m.style.userSelect="none",m.style.webkitTapHighlightColor="rgba(0,0,0,0)"};t.bindEvents=m=>{if(m===null)return;n.setContainer(m)&&v()};const g=()=>{clearTimeout(e.moveTimeoutID),clearTimeout(e.wheelTimeoutID),e.moveTimeoutID=0,e.wheelTimeoutID=0,i=1;const{container:m}=e;m&&(m.removeEventListener("contextmenu",mg),m.removeEventListener("wheel",t.handleWheel),m.removeEventListener("DOMMouseScroll",t.handleWheel),m.removeEventListener("pointerenter",t.handlePointerEnter),m.removeEventListener("pointerleave",t.handlePointerLeave),m.removeEventListener("pointermove",t.handlePointerMove,{passive:!1}),m.removeEventListener("pointerdown",t.handlePointerDown,{passive:!1}),m.removeEventListener("pointerup",t.handlePointerUp),m.removeEventListener("pointercancel",t.handlePointerCancel)),document.removeEventListener("keypress",t.handleKeyPress),document.removeEventListener("keydown",t.handleKeyDown),document.removeEventListener("keyup",t.handleKeyUp),document.removeEventListener("pointerlockchange",t.handlePointerLockChange),a.clear()};t.unbindEvents=()=>{g(),n.setContainer(null)},t.handleKeyPress=m=>{const h=u(m);t.keyPressEvent(h)},t.handleKeyDown=m=>{const h=u(m);t.keyDownEvent(h)},t.handleKeyUp=m=>{const h=u(m);t.keyUpEvent(h)},t.handlePointerEnter=m=>{const h={...l(m),position:c(m),deviceType:f(m)};t.pointerEnterEvent(h),h.deviceType==="mouse"&&t.mouseEnterEvent(h)},t.handlePointerLeave=m=>{const h={...l(m),position:c(m),deviceType:f(m)};t.pointerLeaveEvent(h),h.deviceType==="mouse"&&t.mouseLeaveEvent(h)},t.handlePointerDown=m=>{if(!(m.button>2||t.isPointerLocked()))switch(e.preventDefaultOnPointerDown&&mg(m),m.target.hasPointerCapture(m.pointerId)&&m.target.releasePointerCapture(m.pointerId),e.container.setPointerCapture(m.pointerId),a.has(m.pointerId)&&mp("[RenderWindowInteractor] duplicate pointerId detected"),a.set(m.pointerId,{pointerId:m.pointerId,position:c(m)}),m.pointerType){case"pen":case"touch":t.handleTouchStart(m);break;case"mouse":default:t.handleMouseDown(m);break}},t.handlePointerUp=m=>{if(a.has(m.pointerId))switch(e.preventDefaultOnPointerUp&&mg(m),a.delete(m.pointerId),e.container.releasePointerCapture(m.pointerId),m.pointerType){case"pen":case"touch":t.handleTouchEnd(m);break;case"mouse":default:t.handleMouseUp(m);break}},t.handlePointerCancel=m=>{if(a.has(m.pointerId))switch(a.delete(m.pointerId),m.pointerType){case"pen":case"touch":t.handleTouchEnd(m);break;case"mouse":default:t.handleMouseUp(m);break}},t.handlePointerMove=m=>{if(a.has(m.pointerId)){const h=a.get(m.pointerId);h.position=c(m)}switch(m.pointerType){case"pen":case"touch":t.handleTouchMove(m);break;case"mouse":default:t.handleMouseMove(m);break}},t.handleMouseDown=m=>{const h={...l(m),position:c(m),deviceType:f(m)};switch(m.button){case 0:t.leftButtonPressEvent(h);break;case 1:t.middleButtonPressEvent(h);break;case 2:t.rightButtonPressEvent(h);break;default:hp(`Unknown mouse button pressed: ${m.button}`);break}},t.requestPointerLock=()=>{e.container&&e.container.requestPointerLock()},t.exitPointerLock=()=>{var m;return(m=document.exitPointerLock)==null?void 0:m.call(document)},t.isPointerLocked=()=>!!e.container&&document.pointerLockElement===e.container,t.handlePointerLockChange=()=>{t.isPointerLocked()?t.startPointerLockEvent():t.endPointerLockEvent()};function d(){e._view&&e.enabled&&e.enableRender&&(e.inRender=!0,e._view.traverseAllPasses(),e.inRender=!1),t.invokeRenderEvent()}t.requestAnimation=m=>{if(m===void 0){hp("undefined requester, can not start animating");return}if(r.has(m)){mp("requester is already registered for animating");return}r.add(m),!e.animationRequest&&r.size===1&&!e.xrAnimation&&(e._animationStartTime=Date.now(),e._animationFrameCount=0,e.animationRequest=requestAnimationFrame(t.handleAnimation),t.startAnimationEvent())},t.extendAnimation=m=>{const h=Date.now()+m;e._animationExtendedEnd=Math.max(e._animationExtendedEnd,h),!e.animationRequest&&r.size===0&&!e.xrAnimation&&(e._animationStartTime=Date.now(),e._animationFrameCount=0,e.animationRequest=requestAnimationFrame(t.handleAnimation),t.startAnimationEvent())},t.isAnimating=()=>e.xrAnimation||e.animationRequest!==null,t.cancelAnimation=function(m){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!r.has(m)){if(!h){const C=m&&m.getClassName?m.getClassName():m;mp(`${C} did not request an animation`)}return}r.delete(m),e.animationRequest&&r.size===0&&Date.now()>e._animationExtendedEnd&&(cancelAnimationFrame(e.animationRequest),e.animationRequest=null,t.endAnimationEvent(),t.render())},t.switchToXRAnimation=()=>{e.animationRequest&&(cancelAnimationFrame(e.animationRequest),e.animationRequest=null),e.xrAnimation=!0},t.returnFromXRAnimation=()=>{e.xrAnimation=!1,r.size!==0&&(e.recentAnimationFrameRate=10,e.animationRequest=requestAnimationFrame(t.handleAnimation))},t.updateXRGamepads=(m,h,C)=>{m.inputSources.forEach(p=>{const S=p.gripSpace==null?null:h.getPose(p.gripSpace,C),I=p.gripSpace==null?null:h.getPose(p.targetRaySpace,C),D=p.gamepad,E=p.handedness;if(D){D.index in e.lastGamepadValues||(e.lastGamepadValues[D.index]={left:{buttons:{}},right:{buttons:{}},none:{buttons:{}}});for(let T=0;T<D.buttons.length;++T)T in e.lastGamepadValues[D.index][E].buttons||(e.lastGamepadValues[D.index][E].buttons[T]=!1),e.lastGamepadValues[D.index][E].buttons[T]!==D.buttons[T].pressed&&S!=null&&(t.button3DEvent({gamepad:D,position:S.transform.position,orientation:S.transform.orientation,targetPosition:I.transform.position,targetOrientation:I.transform.orientation,pressed:D.buttons[T].pressed,device:p.handedness==="left"?dp.LeftController:dp.RightController,input:rE[D.mapping]&&rE[D.mapping][T]?rE[D.mapping][T]:Wu.Trigger}),e.lastGamepadValues[D.index][E].buttons[T]=D.buttons[T].pressed),e.lastGamepadValues[D.index][E].buttons[T]&&S!=null&&t.move3DEvent({gamepad:D,position:S.transform.position,orientation:S.transform.orientation,targetPosition:I.transform.position,targetOrientation:I.transform.orientation,device:p.handedness==="left"?dp.LeftController:dp.RightController})}})},t.handleMouseMove=m=>{const h={...l(m),position:c(m),deviceType:f(m)};e.moveTimeoutID===0?t.startMouseMoveEvent(h):(t.mouseMoveEvent(h),clearTimeout(e.moveTimeoutID)),e.moveTimeoutID=setTimeout(()=>{t.endMouseMoveEvent(),e.moveTimeoutID=0},200)},t.handleAnimation=()=>{const m=Date.now();e._animationFrameCount++,m-e._animationStartTime>1e3&&e._animationFrameCount>1&&(e.recentAnimationFrameRate=1e3*(e._animationFrameCount-1)/(m-e._animationStartTime),e.lastFrameTime=1/e.recentAnimationFrameRate,t.animationFrameRateUpdateEvent(),e._animationStartTime=m,e._animationFrameCount=1),t.animationEvent(),d(),r.size>0||Date.now()<e._animationExtendedEnd?e.animationRequest=requestAnimationFrame(t.handleAnimation):(cancelAnimationFrame(e.animationRequest),e.animationRequest=null,t.endAnimationEvent(),t.render())},t.handleWheel=m=>{mg(m);const h={...Vre(m),...l(m),position:c(m),deviceType:f(m)};e.wheelTimeoutID===0&&(Math.abs(h.spinY)>=.3?i=Math.abs(h.spinY):i=1),h.spinY/=i,e.wheelTimeoutID===0?(t.startMouseWheelEvent(h),t.mouseWheelEvent(h)):(t.mouseWheelEvent(h),clearTimeout(e.wheelTimeoutID)),e.mouseScrollDebounceByPass?(t.extendAnimation(600),t.endMouseWheelEvent(),e.wheelTimeoutID=0):e.wheelTimeoutID=setTimeout(()=>{t.extendAnimation(600),t.endMouseWheelEvent(),e.wheelTimeoutID=0},200)},t.handleMouseUp=m=>{const h={...l(m),position:c(m),deviceType:f(m)};switch(m.button){case 0:t.leftButtonReleaseEvent(h);break;case 1:t.middleButtonReleaseEvent(h);break;case 2:t.rightButtonReleaseEvent(h);break;default:hp(`Unknown mouse button released: ${m.button}`);break}},t.handleTouchStart=m=>{const h=[...a.values()];if(e.recognizeGestures&&h.length>1){const C=pp(a);if(h.length===2){const p={...l(rf),position:h[0].position,deviceType:f(m)};t.leftButtonReleaseEvent(p)}t.recognizeGesture("TouchStart",C)}else if(h.length===1){const C={...l(rf),position:c(m),deviceType:f(m)};t.leftButtonPressEvent(C)}},t.handleTouchMove=m=>{const h=[...a.values()];if(e.recognizeGestures&&h.length>1){const C=pp(a);t.recognizeGesture("TouchMove",C)}else if(h.length===1){const C={...l(rf),position:h[0].position,deviceType:f(m)};t.mouseMoveEvent(C)}},t.handleTouchEnd=m=>{const h=[...a.values()];if(e.recognizeGestures)if(h.length===0){const C={...l(rf),position:c(m),deviceType:f(m)};t.leftButtonReleaseEvent(C)}else if(h.length===1){const C=pp(a);t.recognizeGesture("TouchEnd",C);const p={...l(rf),position:h[0].position,deviceType:f(m)};t.leftButtonPressEvent(p)}else{const C=pp(a);t.recognizeGesture("TouchMove",C)}else if(h.length===1){const C={...l(rf),position:h[0].position,deviceType:f(m)};t.leftButtonReleaseEvent(C)}},t.setView=m=>{e._view!==m&&(e._view=m,e._view.getRenderable().setInteractor(t),t.modified())},t.getFirstRenderer=()=>{var m,h,C;return(C=(h=(m=e._view)==null?void 0:m.getRenderable())==null?void 0:h.getRenderersByReference())==null?void 0:C[0]},t.findPokedRenderer=function(){var E,T;let m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!e._view)return null;const C=(T=(E=e._view)==null?void 0:E.getRenderable())==null?void 0:T.getRenderers();if(!C||C.length===0)return null;C.sort((y,M)=>y.getLayer()-M.getLayer());let p=null,S=null,I=null,D=C.length;for(;D--;){const y=C[D];if(e._view.isInViewport(m,h,y)&&y.getInteractive()){I=y;break}p===null&&y.getInteractive()&&(p=y),S===null&&e._view.isInViewport(m,h,y)&&(S=y)}return I===null&&(I=p),I===null&&(I=S),I==null&&(I=C[0]),I},t.render=()=>{!t.isAnimating()&&!e.inRender&&d()},T5.forEach(m=>{const h=m.charAt(0).toLowerCase()+m.slice(1);t[`${h}Event`]=C=>{if(!e.enabled)return;if(!t.getCurrentRenderer()){kre(`
          Can not forward events without a current renderer on the interactor.
        `);return}const S={type:m,pokedRenderer:e.currentRenderer,firstRenderer:t.getFirstRenderer(),...C};t[`invoke${m}`](S)}}),t.recognizeGesture=(m,h)=>{if(Object.keys(h).length>2)return;if(e.startingEventPositions||(e.startingEventPositions={}),m==="TouchStart"){Object.keys(h).forEach(_=>{e.startingEventPositions[_]=h[_]}),e.currentGesture="Start";return}if(m==="TouchEnd"){e.currentGesture==="Pinch"&&(t.render(),t.endPinchEvent()),e.currentGesture==="Rotate"&&(t.render(),t.endRotateEvent()),e.currentGesture==="Pan"&&(t.render(),t.endPanEvent()),e.currentGesture="Start",e.startingEventPositions={};return}let C=0;const p=[],S=[];Object.keys(h).forEach(_=>{p[C]=h[_],S[C]=e.startingEventPositions[_],C++});const I=Math.sqrt((S[0].x-S[1].x)*(S[0].x-S[1].x)+(S[0].y-S[1].y)*(S[0].y-S[1].y)),D=Math.sqrt((p[0].x-p[1].x)*(p[0].x-p[1].x)+(p[0].y-p[1].y)*(p[0].y-p[1].y));let E=CS(Math.atan2(S[1].y-S[0].y,S[1].x-S[0].x)),T=CS(Math.atan2(p[1].y-p[0].y,p[1].x-p[0].x)),y=T-E;T=T+180>=360?T-180:T+180,E=E+180>=360?E-180:E+180,Math.abs(T-E)<Math.abs(y)&&(y=T-E);const M=[];if(M[0]=(p[0].x-S[0].x+p[1].x-S[1].x)/2,M[1]=(p[0].y-S[0].y+p[1].y-S[1].y)/2,m==="TouchMove")if(e.currentGesture==="Start"){let _=.01*Math.sqrt(e.container.clientWidth*e.container.clientWidth+e.container.clientHeight*e.container.clientHeight);_<15&&(_=15);const O=Math.abs(D-I),w=D*3.1415926*Math.abs(y)/360,x=Math.sqrt(M[0]*M[0]+M[1]*M[1]);if(O>_&&O>w&&O>x){e.currentGesture="Pinch";const P={scale:1,touches:h};t.startPinchEvent(P)}else if(w>_&&w>x){e.currentGesture="Rotate";const P={rotation:0,touches:h};t.startRotateEvent(P)}else if(x>_){e.currentGesture="Pan";const P={translation:[0,0],touches:h};t.startPanEvent(P)}}else{if(e.currentGesture==="Rotate"){const _={rotation:y,touches:h};t.rotateEvent(_)}if(e.currentGesture==="Pinch"){const _={scale:D/I,touches:h};t.pinchEvent(_)}if(e.currentGesture==="Pan"){const _={translation:M,touches:h};t.panEvent(_)}}},t.handleVisibilityChange=()=>{e._animationStartTime=Date.now(),e._animationFrameCount=0},t.setCurrentRenderer=m=>{e._forcedRenderer=!!m,e.currentRenderer=m},t.setContainer=m=>{g();const h=n.setContainer(m??null);return h&&v(),h},t.delete=()=>{for(;r.size;)t.cancelAnimation(r.values().next().value);typeof document.hidden<"u"&&document.removeEventListener("visibilitychange",t.handleVisibilityChange),e.container&&t.setContainer(null),n.delete()},typeof document.hidden<"u"&&document.addEventListener("visibilitychange",t.handleVisibilityChange,!1)}const Bre={renderWindow:null,interactorStyle:null,picker:null,pickingManager:null,initialized:!1,enabled:!1,enableRender:!0,currentRenderer:null,lightFollowCamera:!0,desiredUpdateRate:30,stillUpdateRate:2,container:null,recognizeGestures:!0,currentGesture:"Start",animationRequest:null,lastFrameTime:.1,recentAnimationFrameRate:10,wheelTimeoutID:0,moveTimeoutID:0,lastGamepadValues:{},preventDefaultOnPointerDown:!1,preventDefaultOnPointerUp:!1,mouseScrollDebounceByPass:!1};function pL(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Bre,n),J.obj(t,e),e._animationExtendedEnd=0,J.event(t,e,"RenderEvent"),T5.forEach(r=>J.event(t,e,r)),J.get(t,e,["initialized","interactorStyle","lastFrameTime","recentAnimationFrameRate","_view"]),J.setGet(t,e,["container","lightFollowCamera","enabled","enableRender","recognizeGestures","desiredUpdateRate","stillUpdateRate","picker","preventDefaultOnPointerDown","preventDefaultOnPointerUp","mouseScrollDebounceByPass"]),J.moveToProtected(t,e,["view"]),Gre(t,e)}const Wre=J.newInstance(pL,"vtkRenderWindowInteractor");var Hre={newInstance:Wre,extend:pL,handledEvents:T5,...hL};const{vtkErrorMacro:$re}=J,zre=[1,-1,1,-1,1,-1];function qre(t,e){e.classHierarchy.push("vtkPoints"),t.getNumberOfPoints=t.getNumberOfTuples,t.setNumberOfPoints=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3;t.getNumberOfPoints()!==n&&(e.size=n*r,e.values=J.newTypedArray(e.dataType,e.size),t.setNumberOfComponents(r),t.modified())},t.setPoint=function(n){for(var r=arguments.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];t.setTuple(n,a)},t.getPoint=t.getTuple,t.findPoint=t.findTuple,t.insertNextPoint=(n,r,a)=>t.insertNextTuple([n,r,a]),t.getBounds=()=>{if(t.getNumberOfComponents()===3){const a=t.getRange(0);e.bounds[0]=a[0],e.bounds[1]=a[1];const i=t.getRange(1);e.bounds[2]=i[0],e.bounds[3]=i[1];const o=t.getRange(2);return e.bounds[4]=o[0],e.bounds[5]=o[1],e.bounds}if(t.getNumberOfComponents()!==2)return $re(`getBounds called on an array with components of
        ${t.getNumberOfComponents()}`),zre;const n=t.getRange(0);e.bounds[0]=n[0],e.bounds[1]=n[1];const r=t.getRange(1);return e.bounds[2]=r[0],e.bounds[3]=r[1],e.bounds[4]=0,e.bounds[5]=0,e.bounds},t.computeBounds=t.getBounds,t.setNumberOfComponents(e.numberOfComponents<2?3:e.numberOfComponents)}const jre={empty:!0,numberOfComponents:3,dataType:Vn.FLOAT,bounds:[1,-1,1,-1,1,-1]};function SL(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,jre,n),fn.extend(t,e,n),qre(t,e)}const Qre=J.newInstance(SL,"vtkPoints");var em={newInstance:Qre,extend:SL};function CL(t){let e=0;return t.filter((n,r)=>r===e?(e+=n+1,!0):!1)}function IL(t){let e=0;for(let n=0;n<t.length;)n+=t[n]+1,e++;return e}const Kre={extractCellSizes:CL,getNumberOfCells:IL};function Xre(t,e){e.classHierarchy.push("vtkCellArray");const n={...t};t.getNumberOfCells=r=>(e.numberOfCells!==void 0&&!r||(e.cellSizes?e.numberOfCells=e.cellSizes.length:e.numberOfCells=IL(t.getData())),e.numberOfCells),t.getCellSizes=r=>(e.cellSizes!==void 0&&!r||(e.cellSizes=CL(t.getData())),e.cellSizes),t.resize=r=>{const a=t.getNumberOfTuples();n.resize(r);const i=t.getNumberOfTuples();i<a&&(i===0?(e.numberOfCells=0,e.cellSizes=[]):(e.numberOfCells=void 0,e.cellSizes=void 0))},t.setData=r=>{n.setData(r,1),e.numberOfCells=void 0,e.cellSizes=void 0},t.getCell=r=>{let a=r;const i=e.values[a++];return e.values.subarray(a,a+i)},t.insertNextCell=r=>{const a=t.getNumberOfCells();return t.insertNextTuples([r.length,...r]),++e.numberOfCells,e.cellSizes!=null&&e.cellSizes.push(r.length),a}}function Yre(t){return{empty:!0,numberOfComponents:1,dataType:Vn.UNSIGNED_INT,...t}}function DL(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};fn.extend(t,e,Yre(n)),Xre(t,e)}const Zre=J.newInstance(DL,"vtkCellArray");var y1={newInstance:Zre,extend:DL,...Kre};function Jre(t,e){e.classHierarchy.push("vtkCell"),t.initialize=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(r){e.pointsIds=r;let a=e.points.getData();a.length!==3*e.pointsIds.length&&(a=J.newTypedArray(n.getDataType(),3*e.pointsIds.length));const i=n.getData();e.pointsIds.forEach((o,s)=>{let c=3*o,l=3*s;a[l]=i[c],a[++l]=i[++c],a[++l]=i[++c]}),e.points.setData(a)}else{e.points=n,e.pointsIds=new Array(n.getNumberOfPoints());for(let a=n.getNumberOfPoints()-1;a>=0;--a)e.pointsIds[a]=a}},t.getBounds=()=>{const n=e.points.getNumberOfPoints(),r=[];if(n){e.points.getPoint(0,r),e.bounds[0]=r[0],e.bounds[1]=r[0],e.bounds[2]=r[1],e.bounds[3]=r[1],e.bounds[4]=r[2],e.bounds[5]=r[2];for(let a=1;a<n;a++)e.points.getPoint(a,r),e.bounds[0]=r[0]<e.bounds[0]?r[0]:e.bounds[0],e.bounds[1]=r[0]>e.bounds[1]?r[0]:e.bounds[1],e.bounds[2]=r[1]<e.bounds[2]?r[1]:e.bounds[2],e.bounds[3]=r[1]>e.bounds[3]?r[1]:e.bounds[3],e.bounds[4]=r[2]<e.bounds[4]?r[2]:e.bounds[4],e.bounds[5]=r[2]>e.bounds[5]?r[2]:e.bounds[5]}else Rv(e.bounds);return e.bounds},t.getLength2=()=>{t.getBounds();let n=0,r=0;for(let a=0;a<3;a++)r=e.bounds[2*a+1]-e.bounds[2*a],n+=r*r;return n},t.getParametricDistance=n=>{let r,a=0;for(let i=0;i<3;i++)n[i]<0?r=-n[i]:n[i]>1?r=n[i]-1:r=0,r>a&&(a=r);return a},t.getNumberOfPoints=()=>e.points.getNumberOfPoints(),t.deepCopy=n=>{n.initialize(e.points,e.pointsIds)},t.getCellDimension=()=>{},t.intersectWithLine=(n,r,a,i,o,s,c)=>{},t.evaluatePosition=(n,r,a,i,o,s)=>{J.vtkErrorMacro("vtkCell.evaluatePosition is not implemented.")}}const eae={bounds:[-1,-1,-1,-1,-1,-1],pointsIds:[]};function EL(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,eae,n),J.obj(t,e),e.points||(e.points=em.newInstance()),J.get(t,e,["points","pointsIds"]),Jre(t,e)}const tae=J.newInstance(EL,"vtkCell");var bS={newInstance:tae,extend:EL};function nae(t,e){let n=e;for(e>=t.array.length&&(n+=t.array.length);n>t.array.length;)t.array.push({ncells:0,cells:null});t.array.length=n}function rae(t,e){e.classHierarchy.push("vtkCellLinks"),t.buildLinks=n=>{const r=n.getPoints().getNumberOfPoints(),a=n.getNumberOfCells(),i=new Uint32Array(r);if(n.isA("vtkPolyData")){for(let o=0;o<a;++o){const{cellPointIds:s}=n.getCellPoints(o);s.forEach(c=>{t.incrementLinkCount(c)})}t.allocateLinks(r),e.maxId=r-1;for(let o=0;o<a;++o){const{cellPointIds:s}=n.getCellPoints(o);s.forEach(c=>{t.insertCellReference(c,i[c]++,o)})}}else{for(let o=0;o<a;o++)bS.newInstance().getPointsIds().forEach(c=>{t.incrementLinkCount(c)});t.allocateLinks(r),e.maxId=r-1;for(let o=0;o<a;++o)bS.newInstance().getPointsIds().forEach(c=>{t.insertCellReference(c,i[c]++,o)})}},t.allocate=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;e.array=Array(n).fill().map(()=>({ncells:0,cells:null})),e.extend=r,e.maxId=-1},t.initialize=()=>{e.array=null},t.getLink=n=>e.array[n],t.getNcells=n=>e.array[n].ncells,t.getCells=n=>e.array[n].cells,t.insertNextPoint=n=>{e.array.push({ncells:n,cells:Array(n)}),++e.maxId},t.insertNextCellReference=(n,r)=>{e.array[n].cells[e.array[n].ncells++]=r},t.deletePoint=n=>{e.array[n].ncells=0,e.array[n].cells=null},t.removeCellReference=(n,r)=>{e.array[r].cells=e.array[r].cells.filter(a=>a!==n),e.array[r].ncells=e.array[r].cells.length},t.addCellReference=(n,r)=>{e.array[r].cells[e.array[r].ncells++]=n},t.resizeCellList=(n,r)=>{e.array[n].cells.length=r},t.squeeze=()=>{nae(e,e.maxId+1)},t.reset=()=>{e.maxId=-1},t.deepCopy=n=>{e.array=[...n.array],e.extend=n.extend,e.maxId=n.maxId},t.incrementLinkCount=n=>{++e.array[n].ncells},t.allocateLinks=n=>{for(let r=0;r<n;++r)e.array[r].cells=new Array(e.array[r].ncells)},t.insertCellReference=(n,r,a)=>{e.array[n].cells[r]=a}}const aae={array:null,maxId:0,extend:0};function TL(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,aae,n),J.obj(t,e),rae(t,e)}const iae=J.newInstance(TL,"vtkCellLinks");var oae={newInstance:iae,extend:TL};const ta={VTK_EMPTY_CELL:0,VTK_VERTEX:1,VTK_POLY_VERTEX:2,VTK_LINE:3,VTK_POLY_LINE:4,VTK_TRIANGLE:5,VTK_TRIANGLE_STRIP:6,VTK_POLYGON:7,VTK_PIXEL:8,VTK_QUAD:9,VTK_TETRA:10,VTK_VOXEL:11,VTK_HEXAHEDRON:12,VTK_WEDGE:13,VTK_PYRAMID:14,VTK_PENTAGONAL_PRISM:15,VTK_HEXAGONAL_PRISM:16,VTK_QUADRATIC_EDGE:21,VTK_QUADRATIC_TRIANGLE:22,VTK_QUADRATIC_QUAD:23,VTK_QUADRATIC_POLYGON:36,VTK_QUADRATIC_TETRA:24,VTK_QUADRATIC_HEXAHEDRON:25,VTK_QUADRATIC_WEDGE:26,VTK_QUADRATIC_PYRAMID:27,VTK_BIQUADRATIC_QUAD:28,VTK_TRIQUADRATIC_HEXAHEDRON:29,VTK_QUADRATIC_LINEAR_QUAD:30,VTK_QUADRATIC_LINEAR_WEDGE:31,VTK_BIQUADRATIC_QUADRATIC_WEDGE:32,VTK_BIQUADRATIC_QUADRATIC_HEXAHEDRON:33,VTK_BIQUADRATIC_TRIANGLE:34,VTK_CUBIC_LINE:35,VTK_CONVEX_POINT_SET:41,VTK_POLYHEDRON:42,VTK_PARAMETRIC_CURVE:51,VTK_PARAMETRIC_SURFACE:52,VTK_PARAMETRIC_TRI_SURFACE:53,VTK_PARAMETRIC_QUAD_SURFACE:54,VTK_PARAMETRIC_TETRA_REGION:55,VTK_PARAMETRIC_HEX_REGION:56,VTK_HIGHER_ORDER_EDGE:60,VTK_HIGHER_ORDER_TRIANGLE:61,VTK_HIGHER_ORDER_QUAD:62,VTK_HIGHER_ORDER_POLYGON:63,VTK_HIGHER_ORDER_TETRAHEDRON:64,VTK_HIGHER_ORDER_WEDGE:65,VTK_HIGHER_ORDER_PYRAMID:66,VTK_HIGHER_ORDER_HEXAHEDRON:67,VTK_LAGRANGE_CURVE:68,VTK_LAGRANGE_TRIANGLE:69,VTK_LAGRANGE_QUADRILATERAL:70,VTK_LAGRANGE_TETRAHEDRON:71,VTK_LAGRANGE_HEXAHEDRON:72,VTK_LAGRANGE_WEDGE:73,VTK_LAGRANGE_PYRAMID:74,VTK_NUMBER_OF_CELL_TYPES:75},LT=["vtkEmptyCell","vtkVertex","vtkPolyVertex","vtkLine","vtkPolyLine","vtkTriangle","vtkTriangleStrip","vtkPolygon","vtkPixel","vtkQuad","vtkTetra","vtkVoxel","vtkHexahedron","vtkWedge","vtkPyramid","vtkPentagonalPrism","vtkHexagonalPrism","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkQuadraticEdge","vtkQuadraticTriangle","vtkQuadraticQuad","vtkQuadraticTetra","vtkQuadraticHexahedron","vtkQuadraticWedge","vtkQuadraticPyramid","vtkBiQuadraticQuad","vtkTriQuadraticHexahedron","vtkQuadraticLinearQuad","vtkQuadraticLinearWedge","vtkBiQuadraticQuadraticWedge","vtkBiQuadraticQuadraticHexahedron","vtkBiQuadraticTriangle","vtkCubicLine","vtkQuadraticPolygon","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkConvexPointSet","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkParametricCurve","vtkParametricSurface","vtkParametricTriSurface","vtkParametricQuadSurface","vtkParametricTetraRegion","vtkParametricHexRegion","UnknownClass","UnknownClass","UnknownClass","vtkHigherOrderEdge","vtkHigherOrderTriangle","vtkHigherOrderQuad","vtkHigherOrderPolygon","vtkHigherOrderTetrahedron","vtkHigherOrderWedge","vtkHigherOrderPyramid","vtkHigherOrderHexahedron"];function sae(t){return t<LT.length?LT[t]:"UnknownClass"}function cae(t){return LT.findIndex(t)}function lae(t){return t<ta.VTK_QUADRATIC_EDGE||t===ta.VTK_CONVEX_POINT_SET||t===ta.VTK_POLYHEDRON}function uae(t){return t===ta.VTK_TRIANGLE_STRIP||t===ta.VTK_POLY_LINE||t===ta.VTK_POLY_VERTEX}const fae={getClassNameFromTypeId:sae,getTypeIdFromClassName:cae,isLinear:lae,hasSubCells:uae};function vae(t,e){e.classHierarchy.push("vtkCellTypes"),t.allocate=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:512,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;e.size=n>0?n:1,e.extend=r>0?r:1,e.maxId=-1,e.typeArray=new Uint8Array(n),e.locationArray=new Uint32Array(n)},t.insertCell=(n,r,a)=>{e.typeArray[n]=r,e.locationArray[n]=a,n>e.maxId&&(e.maxId=n)},t.insertNextCell=(n,r)=>(t.insertCell(++e.maxId,n,r),e.maxId),t.setCellTypes=(n,r,a)=>{e.size=n,e.typeArray=r,e.locationArray=a,e.maxId=n-1},t.getCellLocation=n=>e.locationArray[n],t.deleteCell=n=>{e.typeArray[n]=ta.VTK_EMPTY_CELL},t.getNumberOfTypes=()=>e.maxId+1,t.isType=n=>{const r=t.getNumberOfTypes();for(let a=0;a<r;++a)if(n===t.getCellType(a))return!0;return!1},t.insertNextType=n=>t.insertNextCell(n,-1),t.getCellType=n=>e.typeArray[n],t.reset=()=>{e.maxId=-1},t.deepCopy=n=>{t.allocate(n.getSize(),n.getExtend()),e.typeArray.set(n.getTypeArray()),e.locationArray.set(n.getLocationArray()),e.maxId=n.getMaxId()}}const gae={size:0,maxId:-1,extend:1e3};function yL(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,gae,n),J.obj(t,e),J.get(t,e,["size","maxId","extend"]),J.getArray(t,e,["typeArray","locationArray"]),vae(t,e)}const dae=J.newInstance(yL,"vtkCellTypes");var mae={newInstance:dae,extend:yL,...fae};const hae={NO_INTERSECTION:0,YES_INTERSECTION:1,ON_LINE:2};var ML={IntersectionState:hae};const{IntersectionState:k2}=ML;function Mf(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;const a={t:Number.MIN_VALUE,distance:0},i=[];let o;i[0]=n[0]-e[0],i[1]=n[1]-e[1],i[2]=n[2]-e[2];const s=i[0]*(t[0]-e[0])+i[1]*(t[1]-e[1])+i[2]*(t[2]-e[2]),c=Wn(i,i);let l=1e-5*s;return c!==0&&(a.t=s/c),l<0&&(l=-l),-l<c&&c<l||c<=0||a.t<0?o=e:a.t>1?o=n:(o=i,i[0]=e[0]+a.t*i[0],i[1]=e[1]+a.t*i[1],i[2]=e[2]+a.t*i[2]),r&&(r[0]=o[0],r[1]=o[1],r[2]=o[2]),a.distance=O0(o,t),a}function _L(t,e,n,r,a,i){const o=[],s=[],c=[];a[0]=0,i[0]=0,kc(e,t,o),kc(r,n,s),kc(n,t,c);const l=[Wn(o,o),-Wn(o,s),-Wn(o,s),Wn(s,s)],u=[];if(u[0]=Wn(o,c),u[1]=-Wn(s,c),bb(l,u,2)===0){let f=Number.MAX_VALUE;const v=[t,e,n,r],g=[n,n,t,t],d=[r,r,e,e];i[0],i[0],a[0],a[0],a[0],a[0],i[0],i[0];let m;for(let h=0;h<4;h++)m=Mf(v[h],g[h],d[h]),m.distance<f&&(f=m.distance);return k2.ON_LINE}return a[0]=u[0],i[0]=u[1],a[0]>=0&&a[0]<=1&&i[0]>=0&&i[0]<=1?k2.YES_INTERSECTION:k2.NO_INTERSECTION}const pae={distanceToLine:Mf,intersection:_L};function Sae(t,e){e.classHierarchy.push("vtkLine");function n(r){return r>=0&&r<=1}t.getCellDimension=()=>1,t.intersectWithLine=(r,a,i,o,s)=>{const c={intersect:0,t:Number.MAX_VALUE,subId:0,betweenPoints:null};s[1]=0,s[2]=0;const l=[],u=[],f=[];e.points.getPoint(0,u),e.points.getPoint(1,f);const v=[],g=[],d=_L(r,a,u,f,v,g);if(c.t=v[0],c.betweenPoints=n(c.t),s[0]=g[0],d===k2.YES_INTERSECTION){for(let m=0;m<3;m++)o[m]=u[m]+s[0]*(f[m]-u[m]),l[m]=r[m]+c.t*(a[m]-r[m]);if(O0(o,l)<=i*i)return c.intersect=1,c}else{let m;if(c.t<0)return m=Mf(r,u,f,o),m.distance<=i*i&&(c.t=0,c.intersect=1,c.betweenPoints=!0),c;if(c.t>1)return m=Mf(a,u,f,o),m.distance<=i*i&&(c.t=1,c.intersect=1,c.betweenPoints=!0),c;if(s[0]<0)return s[0]=0,m=Mf(u,r,a,o),c.t=m.t,m.distance<=i*i&&(c.intersect=1),c;if(s[0]>1)return s[0]=1,m=Mf(f,r,a,o),c.t=m.t,m.distance<=i*i&&(c.intersect=1),c}return c},t.evaluateLocation=(r,a,i)=>{const o=[],s=[];e.points.getPoint(0,o),e.points.getPoint(1,s);for(let c=0;c<3;c++)a[c]=o[c]+r[0]*(s[c]-o[c]);i[0]=1-r[0],i[1]=r[0]},t.evaluateOrientation=(r,a,i)=>e.orientations?(L2(a,e.orientations[0],e.orientations[1],r[0]),i[0]=1-r[0],i[1]=r[0],!0):!1}const Cae={orientations:null};function OL(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Cae,n),bS.extend(t,e,n),J.setGet(t,e,["orientations"]),Sae(t,e)}const Iae=J.newInstance(OL,"vtkLine");var Ds={newInstance:Iae,extend:OL,...pae,...ML};function Dae(t,e){e.classHierarchy.push("vtkPointSet"),e.points?e.points=Js(e.points):e.points=em.newInstance(),t.getNumberOfPoints=()=>e.points.getNumberOfPoints(),t.getBounds=()=>e.points.getBounds(),t.computeBounds=()=>{t.getBounds()};const n=t.shallowCopy;t.shallowCopy=function(r){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;n(r,a),e.points=em.newInstance(),e.points.shallowCopy(r.getPoints())}}const Eae={};function wL(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Eae,n),Nv.extend(t,e,n),J.setGet(t,e,["points"]),Dae(t,e)}const Tae=J.newInstance(wL,"vtkPointSet");var yae={newInstance:Tae,extend:wL};function y5(t,e,n,r){const a=n[0]-e[0],i=n[1]-e[1],o=n[2]-e[2],s=t[0]-e[0],c=t[1]-e[1],l=t[2]-e[2];r[0]=i*l-o*c,r[1]=o*s-a*l,r[2]=a*c-i*s}function NS(t,e,n,r){y5(t,e,n,r);const a=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);a!==0&&(r[0]/=a,r[1]/=a,r[2]/=a)}function Mae(t,e,n,r,a,i){let o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:1e-6,s=!1;const c=[],l=[],u=[],f=[],v=[];NS(t,e,n,f),NS(r,a,i,v);const g=-Wn(f,t),d=-Wn(v,r),m=[Wn(v,t)+d,Wn(v,e)+d,Wn(v,n)+d];if(m[0]*m[1]>o&&m[0]*m[2]>o)return{intersect:!1,coplanar:s,pt1:c,pt2:l,surfaceId:u};const h=[Wn(f,r)+g,Wn(f,a)+g,Wn(f,i)+g];if(h[0]*h[1]>o&&h[0]*h[2]>o)return{intersect:!1,coplanar:s,pt1:c,pt2:l,surfaceId:u};if(Math.abs(f[0]-v[0])<1e-9&&Math.abs(f[1]-v[1])<1e-9&&Math.abs(f[2]-v[2])<1e-9&&Math.abs(g-d)<1e-9)return s=!0,{intersect:!1,coplanar:s,pt1:c,pt2:l,surfaceId:u};const C=[t,e,n],p=[r,a,i],S=Wn(f,v),I=(g-d*S)/(S*S-1),D=(d-g*S)/(S*S-1),E=[I*f[0]+D*v[0],I*f[1]+D*v[1],I*f[2]+D*v[2]],T=Q0(f,v,[]);T1(T);let y=0,M=0;const _=[],O=[];let w=50,x=50;for(let L=0;L<3;L++){const H=L,F=(L+1)%3,U=Ji.intersectWithLine(C[H],C[F],r,v);U.intersection&&U.t>0-o&&U.t<1+o&&(U.t<1+o&&U.t>1-o&&(w=y),_[y++]=Wn(U.x,T)-Wn(E,T));const V=Ji.intersectWithLine(p[H],p[F],t,f);V.intersection&&V.t>0-o&&V.t<1+o&&(V.t<1+o&&V.t>1-o&&(x=M),O[M++]=Wn(V.x,T)-Wn(E,T))}if(y>2){y--;const L=_[2];_[2]=_[w],_[w]=L}if(M>2){M--;const L=O[2];O[2]=O[x],O[x]=L}if(y!==2||M!==2)return{intersect:!1,coplanar:s,pt1:c,pt2:l,surfaceId:u};if(Number.isNaN(_[0])||Number.isNaN(_[1])||Number.isNaN(O[0])||Number.isNaN(O[1]))return{intersect:!1,coplanar:s,pt1:c,pt2:l,surfaceId:u};if(_[0]>_[1]){const L=_[1];_[1]=_[0],_[0]=L}if(O[0]>O[1]){const L=O[1];O[1]=O[0],O[0]=L}let P,R;return _[1]<O[0]||O[1]<_[0]?{intersect:!1,coplanar:s,pt1:c,pt2:l,surfaceId:u}:(_[0]<O[0]?_[1]<O[1]?(u[0]=2,u[1]=1,P=O[0],R=_[1]):(u[0]=2,u[1]=2,P=O[0],R=O[1]):_[1]<O[1]?(u[0]=1,u[1]=1,P=_[0],R=_[1]):(u[0]=1,u[1]=2,P=_[0],R=O[1]),hT(E,T,P,c),hT(E,T,R,l),{intersect:!0,coplanar:s,pt1:c,pt2:l,surfaceId:u})}const _ae={computeNormalDirection:y5,computeNormal:NS,intersectWithTriangle:Mae};function Oae(t,e){e.classHierarchy.push("vtkTriangle"),t.getCellDimension=()=>2,t.intersectWithLine=(n,r,a,i,o)=>{const s={subId:0,t:Number.MAX_VALUE,intersect:0,betweenPoints:!1};o[2]=0;const c=[],l=a*a,u=[],f=[],v=[];e.points.getPoint(0,u),e.points.getPoint(1,f),e.points.getPoint(2,v);const g=[],d=[];if(NS(u,f,v,g),g[0]!==0||g[1]!==0||g[2]!==0){const S=Ji.intersectWithLine(n,r,u,g);if(s.betweenPoints=S.betweenPoints,s.t=S.t,i[0]=S.x[0],i[1]=S.x[1],i[2]=S.x[2],!S.intersection)return o[0]=0,o[1]=0,s.intersect=0,s;const I=t.evaluatePosition(i,c,o,d);if(I.evaluation>=0)return I.dist2<=l?(s.intersect=1,s):(s.intersect=I.evaluation,s)}const m=O0(u,f),h=O0(f,v),C=O0(v,u);e.line||(e.line=Ds.newInstance()),m>h&&m>C?(e.line.getPoints().setPoint(0,u),e.line.getPoints().setPoint(1,f)):h>C&&h>m?(e.line.getPoints().setPoint(0,f),e.line.getPoints().setPoint(1,v)):(e.line.getPoints().setPoint(0,v),e.line.getPoints().setPoint(1,u));const p=e.line.intersectWithLine(n,r,a,i,o);if(s.betweenPoints=p.betweenPoints,s.t=p.t,p.intersect){const S=[],I=[],D=[];for(let E=0;E<3;E++)S[E]=u[E]-v[E],I[E]=f[E]-v[E],D[E]=i[E]-v[E];return o[0]=Wn(D,S)/C,o[1]=Wn(D,I)/h,s.intersect=1,s}return o[0]=0,o[1]=0,s.intersect=0,s},t.evaluatePosition=(n,r,a,i)=>{const o={subId:0,dist2:0,evaluation:-1};let s,c;const l=[],u=[],f=[],v=[];let g;const d=[],m=[],h=[];let C=0,p=0;const S=[];let I,D,E,T=[];const y=[],M=[],_=[];o.subId=0,a[2]=0,e.points.getPoint(1,l),e.points.getPoint(2,u),e.points.getPoint(0,f),y5(l,u,f,v),Ji.generalizedProjectPoint(n,l,v,_);let O=0;for(s=0;s<3;s++)v[s]<0?g=-v[s]:g=v[s],g>O&&(O=g,p=s);for(c=0,s=0;s<3;s++)s!==p&&(S[c++]=s);for(s=0;s<2;s++)d[s]=_[S[s]]-f[S[s]],m[s]=l[S[s]]-f[S[s]],h[s]=u[S[s]]-f[S[s]];if(C=Pa(m,h),C===0)return a[0]=0,a[1]=0,o.evaluation=-1,o;if(a[0]=Pa(d,h)/C,a[1]=Pa(m,d)/C,i[0]=1-(a[0]+a[1]),i[1]=a[0],i[2]=a[1],i[0]>=0&&i[0]<=1&&i[1]>=0&&i[1]<=1&&i[2]>=0&&i[2]<=1)r&&(o.dist2=O0(_,n),r[0]=_[0],r[1]=_[1],r[2]=_[2]),o.evaluation=1;else{let w;if(r){if(i[1]<0&&i[2]<0)for(I=O0(n,f),D=Ds.distanceToLine(n,l,f,w,y),E=Ds.distanceToLine(n,f,u,w,M),I<D?(o.dist2=I,T=f):(o.dist2=D,T=y),E<o.dist2&&(o.dist2=E,T=M),s=0;s<3;s++)r[s]=T[s];else if(i[2]<0&&i[0]<0)for(I=O0(n,l),D=Ds.distanceToLine(n,l,f,w,y),E=Ds.distanceToLine(n,l,u,w,M),I<D?(o.dist2=I,T=l):(o.dist2=D,T=y),E<o.dist2&&(o.dist2=E,T=M),s=0;s<3;s++)r[s]=T[s];else if(i[1]<0&&i[0]<0)for(I=O0(n,u),D=Ds.distanceToLine(n,u,f,w,y),E=Ds.distanceToLine(n,l,u,w,M),I<D?(o.dist2=I,T=u):(o.dist2=D,T=y),E<o.dist2&&(o.dist2=E,T=M),s=0;s<3;s++)r[s]=T[s];else if(i[0]<0){const x=Ds.distanceToLine(n,l,u,r);o.dist2=x.distance}else if(i[1]<0){const x=Ds.distanceToLine(n,u,f,r);o.dist2=x.distance}else if(i[2]<0){const x=Ds.distanceToLine(n,l,f,r);o.dist2=x.distance}}o.evaluation=0}return o},t.evaluateLocation=(n,r,a)=>{const i=[],o=[],s=[];e.points.getPoint(0,i),e.points.getPoint(1,o),e.points.getPoint(2,s);const c=1-n[0]-n[1];for(let l=0;l<3;l++)r[l]=i[l]*c+o[l]*n[0]+s[l]*n[1];a[0]=c,a[1]=n[0],a[2]=n[1]},t.getParametricDistance=n=>{let r,a=0;const i=[];i[0]=n[0],i[1]=n[1],i[2]=1-n[0]-n[1];for(let o=0;o<3;o++)i[o]<0?r=-i[o]:i[o]>1?r=i[o]-1:r=0,r>a&&(a=r);return a}}const wae={};function PL(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,wae,n),bS.extend(t,e,n),Oae(t,e)}const Pae=J.newInstance(PL,"vtkTriangle");var Aae={newInstance:Pae,extend:PL,..._ae};const aE=["verts","lines","polys","strips"],{vtkWarningMacro:tw}=J,xae={[ta.VTK_LINE]:Ds,[ta.VTK_POLY_LINE]:Ds,[ta.VTK_TRIANGLE]:Aae};function Rae(t,e){e.classHierarchy.push("vtkPolyData");function n(a){return a.replace(/(?:^\w|[A-Z]|\b\w)/g,i=>i.toUpperCase()).replace(/\s+/g,"")}aE.forEach(a=>{t[`getNumberOf${n(a)}`]=()=>e[a].getNumberOfCells(),e[a]?e[a]=Js(e[a]):e[a]=y1.newInstance()}),t.getNumberOfCells=()=>aE.reduce((a,i)=>a+e[i].getNumberOfCells(),0);const r=t.shallowCopy;t.shallowCopy=function(a){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;r(a,i),aE.forEach(o=>{e[o]=y1.newInstance(),e[o].shallowCopy(a.getReferenceByName(o))})},t.buildCells=()=>{const a=t.getNumberOfVerts(),i=t.getNumberOfLines(),o=t.getNumberOfPolys(),s=t.getNumberOfStrips(),c=a+i+o+s,l=new Uint8Array(c);let u=l;const f=new Uint32Array(c);let v=f;if(a){let g=0;e.verts.getCellSizes().forEach((d,m)=>{v[m]=g,u[m]=d>1?ta.VTK_POLY_VERTEX:ta.VTK_VERTEX,g+=d+1}),v=v.subarray(a),u=u.subarray(a)}if(i){let g=0;e.lines.getCellSizes().forEach((d,m)=>{v[m]=g,u[m]=d>2?ta.VTK_POLY_LINE:ta.VTK_LINE,d===1&&tw("Building VTK_LINE ",m," with only one point, but VTK_LINE needs at least two points. Check the input."),g+=d+1}),v=v.subarray(i),u=u.subarray(i)}if(o){let g=0;e.polys.getCellSizes().forEach((d,m)=>{switch(v[m]=g,d){case 3:u[m]=ta.VTK_TRIANGLE;break;case 4:u[m]=ta.VTK_QUAD;break;default:u[m]=ta.VTK_POLYGON;break}d<3&&tw("Building VTK_TRIANGLE ",m," with less than three points, but VTK_TRIANGLE needs at least three points. Check the input."),g+=d+1}),v+=v.subarray(o),u+=u.subarray(o)}if(s){let g=0;u.fill(ta.VTK_TRIANGLE_STRIP,0,s),e.strips.getCellSizes().forEach((d,m)=>{v[m]=g,g+=d+1})}e.cells=mae.newInstance(),e.cells.setCellTypes(c,l,f)},t.buildLinks=function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;e.cells===void 0&&t.buildCells(),e.links=oae.newInstance(),a>0?e.links.allocate(a):e.links.allocate(t.getPoints().getNumberOfPoints()),e.links.buildLinks(t)},t.getCellType=a=>e.cells.getCellType(a),t.getCellPoints=a=>{const i=t.getCellType(a);let o=null;switch(i){case ta.VTK_VERTEX:case ta.VTK_POLY_VERTEX:o=e.verts;break;case ta.VTK_LINE:case ta.VTK_POLY_LINE:o=e.lines;break;case ta.VTK_TRIANGLE:case ta.VTK_QUAD:case ta.VTK_POLYGON:o=e.polys;break;case ta.VTK_TRIANGLE_STRIP:o=e.strips;break;default:return o=null,{type:0,cellPointIds:null}}const s=e.cells.getCellLocation(a),c=o.getCell(s);return{cellType:i,cellPointIds:c}},t.getPointCells=a=>e.links.getCells(a),t.getCellEdgeNeighbors=(a,i,o)=>{const s=e.links.getLink(i),c=e.links.getLink(o);return s.cells.filter(l=>l!==a&&c.cells.indexOf(l)!==-1)},t.getCell=function(a){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const o=t.getCellPoints(a),s=i||xae[o.cellType].newInstance();return s.initialize(t.getPoints(),o.cellPointIds),s}}const bae={};function AL(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,bae,n),yae.extend(t,e,n),J.get(t,e,["cells","links"]),J.setGet(t,e,["verts","lines","polys","strips"]),Rae(t,e)}const Nae=J.newInstance(AL,"vtkPolyData");var ci={newInstance:Nae,extend:AL};const Lae=1e-6;function Uae(t,e){e.classHierarchy.push("vtkProp3D"),t.addPosition=r=>{e.position=e.position.map((a,i)=>a+r[i]),t.modified()},t.getOrientationWXYZ=()=>{const r=au();yT(r,e.rotation);const a=new Float64Array(3),i=WZ(a,r);return[CS(i),a[0],a[1],a[2]]},t.getOrientationQuaternion=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return yT(r,e.rotation)},t.rotateX=r=>{r!==0&&(QM(e.rotation,e.rotation,Oa(r)),t.modified())},t.rotateY=r=>{r!==0&&(KM(e.rotation,e.rotation,Oa(r)),t.modified())},t.rotateZ=r=>{r!==0&&(XM(e.rotation,e.rotation,Oa(r)),t.modified())},t.rotateWXYZ=(r,a,i,o)=>{if(r===0||a===0&&i===0&&o===0)return;const s=Oa(r),c=au();iI(c,[a,i,o],s);const l=new Float64Array(16);TS(l,c),Xn(e.rotation,e.rotation,l),t.modified()},t.rotateQuaternion=r=>{if(Math.abs(r[3])>=1-Lae)return;const a=TS(new Float64Array(16),r);Xn(e.rotation,e.rotation,a),t.modified()},t.setOrientation=(r,a,i)=>r===e.orientation[0]&&a===e.orientation[1]&&i===e.orientation[2]?!1:(e.orientation=[r,a,i],zt(e.rotation),t.rotateZ(i),t.rotateX(r),t.rotateY(a),t.modified(),!0),t.setUserMatrix=r=>Jm(e.userMatrix,r)?!1:(fa(e.userMatrix,r),t.modified(),!0),t.getMatrix=()=>(t.computeMatrix(),e.matrix),t.computeMatrix=()=>{if(t.getMTime()>e.matrixMTime.getMTime()){zt(e.matrix),e.userMatrix&&Xn(e.matrix,e.matrix,e.userMatrix),kr(e.matrix,e.matrix,e.origin),kr(e.matrix,e.matrix,e.position),Xn(e.matrix,e.matrix,e.rotation),$c(e.matrix,e.matrix,e.scale),kr(e.matrix,e.matrix,[-e.origin[0],-e.origin[1],-e.origin[2]]),$n(e.matrix,e.matrix),e.isIdentity=!0;for(let r=0;r<4;++r)for(let a=0;a<4;++a)(r===a?1:0)!==e.matrix[r+a*4]&&(e.isIdentity=!1);e.matrixMTime.modified()}},t.getCenter=()=>Pr.getCenter(e.bounds),t.getLength=()=>Pr.getLength(e.bounds),t.getXRange=()=>Pr.getXRange(e.bounds),t.getYRange=()=>Pr.getYRange(e.bounds),t.getZRange=()=>Pr.getZRange(e.bounds),t.getUserMatrix=()=>e.userMatrix;function n(){t.computeMatrix()}t.onModified(n)}const Fae={origin:[0,0,0],position:[0,0,0],orientation:[0,0,0],rotation:null,scale:[1,1,1],bounds:[1,-1,1,-1,1,-1],userMatrix:null,userMatrixMTime:null,cachedProp3D:null,isIdentity:!0,matrixMTime:null};function xL(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Fae,n),nh.extend(t,e,n),e.matrixMTime={},J.obj(e.matrixMTime),J.get(t,e,["bounds","isIdentity"]),J.getArray(t,e,["orientation"]),J.setGetArray(t,e,["origin","position","scale"],3),e.matrix=zt(new Float64Array(16)),e.rotation=zt(new Float64Array(16)),e.userMatrix=zt(new Float64Array(16)),e.transform=null,Uae(t,e)}const Vae=J.newInstance(xL,"vtkProp3D");var M5={newInstance:Vae,extend:xL};const{vtkDebugMacro:kae}=J;function Gae(t,e){e.classHierarchy.push("vtkActor");const n={...t};t.getActors=()=>[t],t.getIsOpaque=()=>{if(e.forceOpaque)return!0;if(e.forceTranslucent)return!1;e.property||t.getProperty();let r=e.property.getOpacity()>=1;return r=r&&(!e.texture||!e.texture.isTranslucent()),r=r&&(!e.mapper||e.mapper.getIsOpaque()),r},t.hasTranslucentPolygonalGeometry=()=>e.mapper===null?!1:(e.property===null&&t.setProperty(t.makeProperty()),!t.getIsOpaque()),t.makeProperty=bv.newInstance,t.getProperty=()=>(e.property===null&&(e.property=t.makeProperty()),e.property),t.getBounds=()=>{if(e.mapper===null)return e.bounds;const r=e.mapper.getBounds();if(!r||r.length!==6)return r;if(r[0]>r[1])return e.mapperBounds=r.concat(),e.bounds=[1,-1,1,-1,1,-1],e.boundsMTime.modified(),r;if(!e.mapperBounds||r[0]!==e.mapperBounds[0]||r[1]!==e.mapperBounds[1]||r[2]!==e.mapperBounds[2]||r[3]!==e.mapperBounds[3]||r[4]!==e.mapperBounds[4]||r[5]!==e.mapperBounds[5]||t.getMTime()>e.boundsMTime.getMTime()){kae("Recomputing bounds..."),e.mapperBounds=r.concat();const a=[];Pr.getCorners(r,a),t.computeMatrix();const i=new Float64Array(16);$n(i,e.matrix),a.forEach(o=>un(o,o,i)),e.bounds[0]=e.bounds[2]=e.bounds[4]=Number.MAX_VALUE,e.bounds[1]=e.bounds[3]=e.bounds[5]=-Number.MAX_VALUE,e.bounds=e.bounds.map((o,s)=>s%2===0?a.reduce((c,l)=>c>l[s/2]?l[s/2]:c,o):a.reduce((c,l)=>c<l[(s-1)/2]?l[(s-1)/2]:c,o)),e.boundsMTime.modified()}return e.bounds},t.getMTime=()=>{let r=n.getMTime();if(e.property!==null){const a=e.property.getMTime();r=a>r?a:r}if(e.backfaceProperty!==null){const a=e.backfaceProperty.getMTime();r=a>r?a:r}return r},t.getRedrawMTime=()=>{let r=e.mtime;if(e.mapper!==null){let a=e.mapper.getMTime();r=a>r?a:r,e.mapper.getInput()!==null&&(e.mapper.getInputAlgorithm().update(),a=e.mapper.getInput().getMTime(),r=a>r?a:r)}return r},t.getSupportsSelection=()=>e.mapper?e.mapper.getSupportsSelection():!1,t.processSelectorPixelBuffers=(r,a)=>{e.mapper&&e.mapper.processSelectorPixelBuffers&&e.mapper.processSelectorPixelBuffers(r,a)}}const Bae={mapper:null,property:null,backfaceProperty:null,forceOpaque:!1,forceTranslucent:!1,bounds:[1,-1,1,-1,1,-1]};function RL(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Bae,n),M5.extend(t,e,n),e.boundsMTime={},J.obj(e.boundsMTime),J.set(t,e,["property"]),J.setGet(t,e,["backfaceProperty","forceOpaque","forceTranslucent","mapper"]),Gae(t,e)}const Wae=J.newInstance(RL,"vtkActor");var Z0={newInstance:Wae,extend:RL};function Hae(t,e){const n=t.invokeResize;delete t.invokeResize,e.renderWindow=$K.newInstance(),e.rendererMap={},e.openGLRenderWindow=pre.newInstance(),e.renderWindow.addView(e.openGLRenderWindow),e.interactor=Hre.newInstance(),e.interactor.setView(e.openGLRenderWindow),e.interactor.initialize(),t.addRenderer=({viewport:r,id:a,background:i})=>{const o=mL.newInstance({viewport:r,background:i||e.background});e.renderWindow.addRenderer(o),e.rendererMap[a]=o},t.destroy=()=>{e.renderWindow.getInteractor().delete()},t.removeRenderer=r=>{const a=t.getRenderer(r);e.renderWindow.removeRenderer(a),a.delete(),delete e.rendererMap[r]},t.getRenderer=r=>e.rendererMap[r],t.getRenderers=()=>{const{rendererMap:r}=e;return Object.keys(r).map(i=>({id:i,renderer:r[i]}))},t.resize=()=>{if(e.container){const{width:r,height:a}=e.container;e.openGLRenderWindow.setSize(Math.floor(r),Math.floor(a)),n(),e.renderWindow.render()}},t.setContainer=r=>{e.container=r,e.openGLRenderWindow.setContainer(e.container)},t.delete=J.chain(t.setContainer,t.destroy,e.openGLRenderWindow.delete,t.delete),t.resize()}const $ae={background:[0,0,0],container:null};function bL(t,e,n={}){Object.assign(e,$ae,n),J.obj(t,e),J.get(t,e,["renderWindow","openGLRenderWindow","interactor","container"]),J.event(t,e,"resize"),Hae(t,e)}const zae=J.newInstance(bL),qae={newInstance:zae,extend:bL},{vtkErrorMacro:Sp}=J;function jae(t,e){e.classHierarchy.push("vtkPiecewiseFunction"),t.getSize=()=>e.nodes.length,t.getType=()=>{let n,r=0,a=0;e.nodes.length>0&&(r=e.nodes[0].y);for(let i=1;i<e.nodes.length;i++){if(n=e.nodes[i].y,n!==r)if(n>r)switch(a){case 0:case 1:a=1;break;case 2:default:a=3;break}else switch(a){case 0:case 2:a=2;break;case 1:default:a=3;break}if(r=n,a===3)break}switch(a){case 0:return"Constant";case 1:return"NonDecreasing";case 2:return"NonIncreasing";case 3:default:return"Varied"}},t.getDataPointer=()=>{const n=e.nodes.length;if(e.function=null,n>0){e.function=[];for(let r=0;r<n;r++)e.function[2*r]=e.nodes[r].x,e.function[2*r+1]=e.nodes[r].y}return e.function},t.getFirstNonZeroValue=()=>{if(e.nodes.length===0)return 0;let n=1,r=0,a=0;for(;a<e.nodes.length;a++)if(e.nodes[a].y!==0){n=0;break}return n?r=Number.MAX_VALUE:a>0?r=e.nodes[a-1].x:e.clamping?r=-Number.MAX_VALUE:r=e.nodes[0].x,r},t.getNodeValue=(n,r)=>{const a=e.nodes.length;return n<0||n>=a?(Sp("Index out of range!"),-1):(r[0]=e.nodes[n].x,r[1]=e.nodes[n].y,r[2]=e.nodes[n].midpoint,r[3]=e.nodes[n].sharpness,1)},t.setNodeValue=(n,r)=>{const a=e.nodes.length;if(n<0||n>=a)return Sp("Index out of range!"),-1;const i=e.nodes[n].x;return e.nodes[n].x=r[0],e.nodes[n].y=r[1],e.nodes[n].midpoint=r[2],e.nodes[n].sharpness=r[3],i!==r[0]?t.sortAndUpdateRange():t.modified(),1},t.addPoint=(n,r)=>t.addPointLong(n,r,.5,0),t.addPointLong=(n,r,a,i)=>{if(a<0||a>1)return Sp("Midpoint outside range [0.0, 1.0]"),-1;if(i<0||i>1)return Sp("Sharpness outside range [0.0, 1.0]"),-1;e.allowDuplicateScalars||t.removePoint(n);const o={x:n,y:r,midpoint:a,sharpness:i};e.nodes.push(o),t.sortAndUpdateRange();let s;for(s=0;s<e.nodes.length&&e.nodes[s].x!==n;s++);return s<e.nodes.length?s:-1},t.setNodes=n=>{e.nodes!==n&&(e.nodes=n,t.sortAndUpdateRange())},t.sortAndUpdateRange=()=>{e.nodes.sort((r,a)=>r.x-a.x),t.updateRange()||t.modified()},t.updateRange=()=>{const n=e.range.slice(),r=e.nodes.length;return r?(e.range[0]=e.nodes[0].x,e.range[1]=e.nodes[r-1].x):(e.range[0]=0,e.range[1]=0),n[0]===e.range[0]&&n[1]===e.range[1]?!1:(t.modified(),!0)},t.removePoint=n=>{let r;for(r=0;r<e.nodes.length&&e.nodes[r].x!==n;r++);if(r>=e.nodes.length)return-1;const a=r;let i=!1;return e.nodes.splice(r,1),(r===0||r===e.nodes.length)&&(i=t.updateRange()),i||t.modified(),a},t.removeAllPoints=()=>{e.nodes=[],t.sortAndUpdateRange()},t.addSegment=(n,r,a,i)=>{t.sortAndUpdateRange();for(let o=0;o<e.nodes.length;)e.nodes[o].x>=n&&e.nodes[o].x<=a?e.nodes.splice(o,1):o++;t.addPoint(n,r,.5,0),t.addPoint(a,i,.5,0)},t.getValue=n=>{const r=[];return t.getTable(n,n,1,r),r[0]},t.adjustRange=n=>{if(n.length<2)return 0;const r=t.getRange();r[0]<n[0]?t.addPoint(n[0],t.getValue(n[0])):t.addPoint(n[0],t.getValue(r[0])),r[1]>n[1]?t.addPoint(n[1],t.getValue(n[1])):t.addPoint(n[1],t.getValue(r[1])),t.sortAndUpdateRange();for(let a=0;a<e.nodes.length;)e.nodes[a].x>=n[0]&&e.nodes[a].x<=n[1]?e.nodes.splice(a,1):++a;return t.sortAndUpdateRange(),1},t.estimateMinNumberOfSamples=(n,r)=>{const a=t.findMinimumXDistance();return Math.ceil((r-n)/a)},t.findMinimumXDistance=()=>{const n=e.nodes.length;if(n<2)return-1;let r=e.nodes[1].x-e.nodes[0].x;for(let a=0;a<n-1;a++){const i=e.nodes[a+1].x-e.nodes[a].x;i<r&&(r=i)}return r},t.getTable=function(n,r,a,i){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1,s,c=0;const l=e.nodes.length;let u=0;l!==0&&(u=e.nodes[l-1].y);let f=0,v=0,g=0,d=0,m=0,h=0,C=0;for(s=0;s<a;s++){const p=o*s;for(a>1?f=n+s/(a-1)*(r-n):f=.5*(n+r);c<l&&f>e.nodes[c].x;)c++,c<l&&(v=e.nodes[c-1].x,g=e.nodes[c].x,d=e.nodes[c-1].y,m=e.nodes[c].y,h=e.nodes[c-1].midpoint,C=e.nodes[c-1].sharpness,h<1e-5&&(h=1e-5),h>.99999&&(h=.99999));if(c>=l)i[p]=e.clamping?u:0;else if(c===0)i[p]=e.clamping?e.nodes[0].y:0;else{let S=(f-v)/(g-v);if(S<h?S=.5*S/h:S=.5+.5*(S-h)/(1-h),C>.99)if(S<.5){i[p]=d;continue}else{i[p]=m;continue}if(C<.01){i[p]=(1-S)*d+S*m;continue}S<.5?S=.5*(S*2)**(1+10*C):S>.5&&(S=1-.5*((1-S)*2)**(1+10*C));const I=S*S,D=I*S,E=2*D-3*I+1,T=-2*D+3*I,y=D-2*I+S,M=D-I,_=m-d,O=(1-C)*_;i[p]=E*d+T*m+y*O+M*O;const w=d<m?d:m,x=d>m?d:m;i[p]=i[p]<w?w:i[p],i[p]=i[p]>x?x:i[p]}}}}const Qae={range:[0,0],clamping:!0,allowDuplicateScalars:!1};function NL(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Qae,n),J.obj(t,e),e.nodes=[],J.setGet(t,e,["allowDuplicateScalars","clamping"]),J.setArray(t,e,["range"],2),J.getArray(t,e,["range"]),jae(t,e)}const Kae=J.newInstance(NL,"vtkPiecewiseFunction");var sv={newInstance:Kae,extend:NL};const{BlendMode:El,FilterMode:$g}=LR;function Xae(t,e,n,r,a){let i=null;return a?(i=a,i.removeAllPoints()):i=sv.newInstance(),i.addPointLong(-1024,0,1,1),i.addPoint(t,e),i.addPoint(n,r),i}const Yae={createRadonTransferFunction:Xae};function Zae(t,e){e.classHierarchy.push("vtkVolumeMapper");const n={...t};t.getBounds=()=>{const r=t.getInputData();return r?(e.static||t.update(),e.bounds=r.getBounds()):e.bounds=nu(),e.bounds},t.update=()=>{t.getInputData()},t.setBlendModeToComposite=()=>{t.setBlendMode(El.COMPOSITE_BLEND)},t.setBlendModeToMaximumIntensity=()=>{t.setBlendMode(El.MAXIMUM_INTENSITY_BLEND)},t.setBlendModeToMinimumIntensity=()=>{t.setBlendMode(El.MINIMUM_INTENSITY_BLEND)},t.setBlendModeToAverageIntensity=()=>{t.setBlendMode(El.AVERAGE_INTENSITY_BLEND)},t.setBlendModeToAdditiveIntensity=()=>{t.setBlendMode(El.ADDITIVE_INTENSITY_BLEND)},t.setBlendModeToRadonTransform=()=>{t.setBlendMode(El.RADON_TRANSFORM_BLEND)},t.getBlendModeAsString=()=>J.enumToString(El,e.blendMode),t.setAverageIPScalarRange=(r,a)=>{console.warn("setAverageIPScalarRange is deprecated use setIpScalarRange"),t.setIpScalarRange(r,a)},t.getFilterModeAsString=()=>J.enumToString($g,e.filterMode),t.setFilterModeToOff=()=>{t.setFilterMode($g.OFF)},t.setFilterModeToNormalized=()=>{t.setFilterMode($g.NORMALIZED)},t.setFilterModeToRaw=()=>{t.setFilterMode($g.RAW)},t.setGlobalIlluminationReach=r=>n.setGlobalIlluminationReach(e0(r,0,1)),t.setVolumetricScatteringBlending=r=>n.setVolumetricScatteringBlending(e0(r,0,1)),t.setVolumeShadowSamplingDistFactor=r=>n.setVolumeShadowSamplingDistFactor(r>=1?r:1),t.setAnisotropy=r=>n.setAnisotropy(e0(r,-.99,.99)),t.setLAOKernelSize=r=>n.setLAOKernelSize(kM(e0(r,1,32))),t.setLAOKernelRadius=r=>n.setLAOKernelRadius(r>=1?r:1)}const Jae={bounds:[1,-1,1,-1,1,-1],sampleDistance:1,imageSampleDistance:1,maximumSamplesPerRay:1e3,autoAdjustSampleDistances:!0,initialInteractionScale:1,interactionSampleDistanceFactor:1,blendMode:El.COMPOSITE_BLEND,ipScalarRange:[-1e6,1e6],filterMode:$g.OFF,preferSizeOverAccuracy:!1,computeNormalFromOpacity:!1,volumetricScatteringBlending:0,globalIlluminationReach:0,volumeShadowSamplingDistFactor:5,anisotropy:0,localAmbientOcclusion:!1,LAOKernelSize:15,LAOKernelRadius:7};function LL(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Jae,n),m5.extend(t,e,n),J.setGet(t,e,["sampleDistance","imageSampleDistance","maximumSamplesPerRay","autoAdjustSampleDistances","initialInteractionScale","interactionSampleDistanceFactor","blendMode","filterMode","preferSizeOverAccuracy","computeNormalFromOpacity","volumetricScatteringBlending","globalIlluminationReach","volumeShadowSamplingDistFactor","anisotropy","localAmbientOcclusion","LAOKernelSize","LAOKernelRadius"]),J.setGetArray(t,e,["ipScalarRange"],2),J.event(t,e,"lightingActivated"),Zae(t,e)}const eie=J.newInstance(LL,"vtkVolumeMapper");var UL={newInstance:eie,extend:LL,...Yae};function tie(t,e){e.classHierarchy.push("vtkSharedVolumeMapper");const n=t.delete;t.delete=()=>{e.scalarTexture=null,n()}}const nie={scalarTexture:null};function FL(t,e,n={}){Object.assign(e,nie,n),UL.extend(t,e,n),J.setGet(t,e,["scalarTexture"]),tie(t,e)}const rie=J.newInstance(FL,"vtkSharedVolumeMapper"),aie={newInstance:rie,extend:FL};function ca(t){const e=t.indexOf(":");return t.substring(e+1)}const iie=1073741824;class oie{constructor(){this._imageCache=new Map,this._volumeCache=new Map,this._geometryCache=new Map,this._imageCacheSize=0,this._maxCacheSize=3*iie,this._geometryCacheSize=0,this.setMaxCacheSize=e=>{if(!e||typeof e!="number"){const n=`New max cacheSize ${this._maxCacheSize} should be defined and should be a number.`;throw new Error(n)}this._maxCacheSize=e},this.isCacheable=e=>{const n=this.getBytesAvailable(),r=Array.from(this._imageCache.values()).reduce((i,o)=>o.sharedCacheKey?i:i+o.sizeInBytes,0);return n+r>=e},this.getMaxCacheSize=()=>this._maxCacheSize,this.getCacheSize=()=>this._imageCacheSize,this._decacheImage=(e,n=!1)=>{const r=this._imageCache.get(e);if(!r)return;if(r.sharedCacheKey&&!n)throw new Error("Cannot decache an image with a shared cache key. You need to manually decache the volume first.");const{imageLoadObject:a}=r;a!=null&&a.cancelFn&&a.cancelFn(),a!=null&&a.decache&&a.decache(),this._imageCache.delete(e)},this._decacheVolume=e=>{const n=this._volumeCache.get(e);if(!n)return;const{volumeLoadObject:r,volume:a}=n;a&&(a.cancelLoading&&a.cancelLoading(),a.imageData&&a.imageData.delete(),r.cancelFn&&r.cancelFn(),a.imageIds&&a.imageIds.forEach(i=>{const o=this._imageCache.get(i);o&&o.sharedCacheKey===e&&(o.sharedCacheKey=void 0)}),this._volumeCache.delete(e))},this.purgeCache=()=>{const e=this._imageCache.keys();for(this.purgeVolumeCache();;){const{value:n,done:r}=e.next();if(r)break;this.removeImageLoadObject(n,{force:!0}),Dt(ot,vt.IMAGE_CACHE_IMAGE_REMOVED,{imageId:n})}},this.purgeVolumeCache=()=>{const e=this._volumeCache.keys();for(;;){const{value:n,done:r}=e.next();if(r)break;this.removeVolumeLoadObject(n),Dt(ot,vt.VOLUME_CACHE_VOLUME_REMOVED,{volumeId:n})}},this.getVolumeLoadObject=e=>{if(e===void 0)throw new Error("getVolumeLoadObject: volumeId must not be undefined");const n=this._volumeCache.get(e);if(n)return n.timeStamp=Date.now(),n.volumeLoadObject},this.putGeometryLoadObject=(e,n)=>{if(e===void 0)throw new Error("putGeometryLoadObject: geometryId must not be undefined");if(n.promise===void 0)throw new Error("putGeometryLoadObject: geometryLoadObject.promise must not be undefined");if(this._geometryCache.has(e))throw new Error("putGeometryLoadObject: geometryId already present in geometryCache");if(n.cancelFn&&typeof n.cancelFn!="function")throw new Error("putGeometryLoadObject: geometryLoadObject.cancel must be a function");const r={loaded:!1,geometryId:e,geometryLoadObject:n,timeStamp:Date.now(),sizeInBytes:0};return this._geometryCache.set(e,r),n.promise.then(a=>{try{this._putGeometryCommon(e,a,r)}catch(i){throw console.debug(`Error in _putGeometryCommon for geometry ${e}:`,i),i}}).catch(a=>{throw console.debug(`Error caching geometry ${e}:`,a),this._geometryCache.delete(e),a})},this.getGeometry=e=>{if(e===void 0)throw new Error("getGeometry: geometryId must not be undefined");const n=this._geometryCache.get(e);if(n)return n.timeStamp=Date.now(),n.geometry},this.removeGeometryLoadObject=e=>{if(e===void 0)throw new Error("removeGeometryLoadObject: geometryId must not be undefined");const n=this._geometryCache.get(e);if(!n)throw new Error("removeGeometryLoadObject: geometryId was not present in geometryCache");this.decrementGeometryCacheSize(n.sizeInBytes);const r={geometry:n,geometryId:e};Dt(ot,vt.GEOMETRY_CACHE_GEOMETRY_REMOVED,r),this._decacheGeometry(e)},this._decacheGeometry=e=>{const n=this._geometryCache.get(e);if(!n)return;const{geometryLoadObject:r}=n;r.cancelFn&&r.cancelFn(),r.decache&&r.decache(),this._geometryCache.delete(e)},this.incrementGeometryCacheSize=e=>{this._geometryCacheSize+=e},this.decrementGeometryCacheSize=e=>{this._geometryCacheSize-=e},this.getImage=(e,n=No.FAR_REPLICATE)=>{var a;if(e===void 0)throw new Error("getImage: imageId must not be undefined");const r=this._imageCache.get(e);if(r&&(r.timeStamp=Date.now(),!(((a=r.image)==null?void 0:a.imageQualityStatus)<n)))return r.image},this.getVolume=(e,n=!1)=>{var a;if(e===void 0)throw new Error("getVolume: volumeId must not be undefined");const r=this._volumeCache.get(e);return r?(r.timeStamp=Date.now(),r.volume):n?(a=[...this._volumeCache.values()].find(i=>i.volumeId.includes(e)))==null?void 0:a.volume:void 0},this.getVolumes=()=>Array.from(this._volumeCache.values()).map(n=>n.volume),this.filterVolumesByReferenceId=e=>this.getVolumes().filter(r=>r.referencedVolumeId===e),this.removeImageLoadObject=(e,{force:n=!1}={})=>{if(e===void 0)throw new Error("removeImageLoadObject: imageId must not be undefined");const r=this._imageCache.get(e);if(!r)throw new Error("removeImageLoadObject: imageId was not present in imageCache");this._decacheImage(e,n),this.incrementImageCacheSize(-r.sizeInBytes);const a={image:r,imageId:e};Dt(ot,vt.IMAGE_CACHE_IMAGE_REMOVED,a)},this.removeVolumeLoadObject=e=>{if(e===void 0)throw new Error("removeVolumeLoadObject: volumeId must not be undefined");const n=this._volumeCache.get(e);if(!n)throw new Error("removeVolumeLoadObject: volumeId was not present in volumeCache");const r={volume:n,volumeId:e};Dt(ot,vt.VOLUME_CACHE_VOLUME_REMOVED,r),this._decacheVolume(e)},this.incrementImageCacheSize=e=>{this._imageCacheSize+=e},this.decrementImageCacheSize=e=>{this._imageCacheSize-=e},this.getGeometryLoadObject=e=>{if(e===void 0)throw new Error("getGeometryLoadObject: geometryId must not be undefined");const n=this._geometryCache.get(e);if(n)return n.timeStamp=Date.now(),n.geometryLoadObject}}getBytesAvailable(){return this.getMaxCacheSize()-this.getCacheSize()}decacheIfNecessaryUntilBytesAvailable(e,n){let r=this.getBytesAvailable();if(r>=e)return r;const a=Array.from(this._imageCache.values()).filter(c=>!c.sharedCacheKey);function i(c,l){return c.timeStamp>l.timeStamp?1:c.timeStamp<l.timeStamp?-1:0}a.sort(i);const o=a.map(c=>c.imageId);let s=o;n&&(s=o.filter(c=>!n.includes(c)));for(const c of s)if(this.removeImageLoadObject(c),Dt(ot,vt.IMAGE_CACHE_IMAGE_REMOVED,{imageId:c}),r=this.getBytesAvailable(),r>=e)return r;for(const c of o)if(this.removeImageLoadObject(c),Dt(ot,vt.IMAGE_CACHE_IMAGE_REMOVED,{imageId:c}),r=this.getBytesAvailable(),r>=e)return r}_putImageCommon(e,n,r){if(!this._imageCache.has(e)){console.warn("The image was purged from the cache before it completed loading.");return}if(!n){console.warn("Image is undefined");return}if(n.sizeInBytes===void 0||Number.isNaN(n.sizeInBytes))throw new Error("_putImageCommon: image.sizeInBytes must not be undefined");if(n.sizeInBytes.toFixed===void 0)throw new Error("_putImageCommon: image.sizeInBytes is not a number");if(!this.isCacheable(n.sizeInBytes))throw new Error(vt.CACHE_SIZE_EXCEEDED);this.decacheIfNecessaryUntilBytesAvailable(n.sizeInBytes),r.loaded=!0,r.image=n,r.sizeInBytes=n.sizeInBytes,this.incrementImageCacheSize(r.sizeInBytes);const a={image:r};Dt(ot,vt.IMAGE_CACHE_IMAGE_ADDED,a),r.sharedCacheKey=n.sharedCacheKey}async putImageLoadObject(e,n){if(e===void 0)throw console.error("putImageLoadObject: imageId must not be undefined"),new Error("putImageLoadObject: imageId must not be undefined");if(n.promise===void 0)throw console.error("putImageLoadObject: imageLoadObject.promise must not be undefined"),new Error("putImageLoadObject: imageLoadObject.promise must not be undefined");const r=this._imageCache.get(e);if(r!=null&&r.imageLoadObject)throw console.warn(`putImageLoadObject: imageId ${e} already in cache`),new Error("putImageLoadObject: imageId already in cache");if(n.cancelFn&&typeof n.cancelFn!="function")throw console.error("putImageLoadObject: imageLoadObject.cancel must be a function"),new Error("putImageLoadObject: imageLoadObject.cancel must be a function");const a={...r,loaded:!1,imageId:e,sharedCacheKey:void 0,imageLoadObject:n,timeStamp:Date.now(),sizeInBytes:0};return this._imageCache.set(e,a),this._imageCache.set(e,a),n.promise.then(i=>{try{this._putImageCommon(e,i,a)}catch(o){throw console.debug(`Error in _putImageCommon for image ${e}:`,o),o}}).catch(i=>{throw console.debug(`Error caching image ${e}:`,i),this._imageCache.delete(e),i})}putImageSync(e,n){if(e===void 0)throw new Error("putImageSync: imageId must not be undefined");if(this._imageCache.has(e))throw new Error("putImageSync: imageId already in cache");const r={loaded:!1,imageId:e,sharedCacheKey:void 0,imageLoadObject:{promise:Promise.resolve(n)},timeStamp:Date.now(),sizeInBytes:0};this._imageCache.set(e,r);try{this._putImageCommon(e,n,r)}catch(a){throw this._imageCache.delete(e),a}}getImageLoadObject(e){if(e===void 0)throw new Error("getImageLoadObject: imageId must not be undefined");const n=this._imageCache.get(e);if(n)return n.timeStamp=Date.now(),n.imageLoadObject}isLoaded(e){const n=this._imageCache.get(e);return n?n.loaded:!1}getVolumeContainingImageId(e){const n=Array.from(this._volumeCache.keys()),r=ca(e);for(const a of n){const i=this._volumeCache.get(a);if(!i)return;const{volume:o}=i;if(!o.imageIds.length)return;const s=o.getImageURIIndex(r);if(s>-1)return{volume:o,imageIdIndex:s}}}getCachedImageBasedOnImageURI(e){const n=ca(e),a=Array.from(this._imageCache.keys()).find(i=>ca(i)===n);if(a)return this._imageCache.get(a)}_putVolumeCommon(e,n,r){var i;if(!this._volumeCache.get(e)){console.warn("The volume was purged from the cache before it completed loading.");return}r.loaded=!0,r.volume=n,(i=n.imageIds)==null||i.forEach(o=>{const s=this._imageCache.get(o);s&&(s.sharedCacheKey=e)});const a={volume:r};Dt(ot,vt.VOLUME_CACHE_VOLUME_ADDED,a)}putVolumeSync(e,n){if(e===void 0)throw new Error("putVolumeSync: volumeId must not be undefined");if(this._volumeCache.has(e))throw new Error("putVolumeSync: volumeId already in cache");const r={loaded:!1,volumeId:e,volumeLoadObject:{promise:Promise.resolve(n)},timeStamp:Date.now(),sizeInBytes:0};this._volumeCache.set(e,r);try{this._putVolumeCommon(e,n,r)}catch(a){throw this._volumeCache.delete(e),a}}async putVolumeLoadObject(e,n){if(e===void 0)throw new Error("putVolumeLoadObject: volumeId must not be undefined");if(n.promise===void 0)throw new Error("putVolumeLoadObject: volumeLoadObject.promise must not be undefined");if(this._volumeCache.has(e))throw new Error(`putVolumeLoadObject: volumeId:${e} already in cache`);if(n.cancelFn&&typeof n.cancelFn!="function")throw new Error("putVolumeLoadObject: volumeLoadObject.cancel must be a function");const r={loaded:!1,volumeId:e,volumeLoadObject:n,timeStamp:Date.now(),sizeInBytes:0};return this._volumeCache.set(e,r),n.promise.then(a=>{try{this._putVolumeCommon(e,a,r)}catch(i){throw console.error(`Error in _putVolumeCommon for volume ${e}:`,i),this._volumeCache.delete(e),i}}).catch(a=>{throw this._volumeCache.delete(e),a})}_putGeometryCommon(e,n,r){if(!this._geometryCache.get(e)){console.warn("The geometry was purged from the cache before it completed loading.");return}if(!n){console.warn("Geometry is undefined");return}if(n.sizeInBytes===void 0||Number.isNaN(n.sizeInBytes))throw new Error("_putGeometryCommon: geometry.sizeInBytes must not be undefined");if(n.sizeInBytes.toFixed===void 0)throw new Error("_putGeometryCommon: geometry.sizeInBytes is not a number");if(!this.isCacheable(n.sizeInBytes))throw new Error(vt.CACHE_SIZE_EXCEEDED);this.decacheIfNecessaryUntilBytesAvailable(n.sizeInBytes),r.loaded=!0,r.geometry=n,r.sizeInBytes=n.sizeInBytes,this.incrementGeometryCacheSize(r.sizeInBytes);const a={geometry:r};Dt(ot,vt.GEOMETRY_CACHE_GEOMETRY_ADDED,a)}putGeometrySync(e,n){if(e===void 0)throw new Error("putGeometrySync: geometryId must not be undefined");if(this._geometryCache.has(e))throw new Error("putGeometrySync: geometryId already in cache");const r={loaded:!1,geometryId:e,geometryLoadObject:{promise:Promise.resolve(n)},timeStamp:Date.now(),sizeInBytes:0};this._geometryCache.set(e,r);try{this._putGeometryCommon(e,n,r)}catch(a){throw this._geometryCache.delete(e),a}}setPartialImage(e,n){const r=this._imageCache.get(e);if(!r){n&&this._imageCache.set(e,{image:n,imageId:e,loaded:!1,timeStamp:Date.now(),sizeInBytes:0});return}r.loaded&&(r.loaded=!1,r.imageLoadObject=null,this.incrementImageCacheSize(-r.sizeInBytes),r.sizeInBytes=0),r.image=n||r.image}getImageQuality(e){var r;const n=(r=this._imageCache.get(e))==null?void 0:r.image;return n?n.imageQualityStatus||No.FULL_RESOLUTION:void 0}}const Ye=new oie;function nw(t,e){const n=I5(e),r=new n(t.length);return r.set(t),r}function sie(t,e){e.classHierarchy.push("vtkStreamingOpenGLTexture"),e.updatedFrames=[],e.volumeId=null;const n=t.create3DFilterableFromRaw;t.create3DFilterableFromRaw=(s,c,l,u,f,v,g)=>{e.inputDataType=f,e.inputNumComps=u,n(s,c,l,u,f,v,g)};const r=t.updateVolumeInfoForGL;t.updateVolumeInfoForGL=(s,c)=>{const l=r(s,c);return e.volumeInfo.dataComputedScale=[1],e.volumeInfo.dataComputedOffset=[0],l},t.update3DFromRaw=()=>{const{volumeId:s}=e;if(!s)return;const c=Ye.getVolume(s);if(e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind(),c.isDynamicVolume()){o();return}return t.hasUpdatedFrames()&&i()};const a=t.modified;t.setUpdatedFrame=s=>{e.updatedFrames[s]=!0,a()},t.modified=()=>{a();const s=Ye.getVolume(e.volumeId);if(!s)return;const c=s.imageIds;for(let l=0;l<c.length;l++)e.updatedFrames[l]=!0};function i(){const s=Ye.getVolume(e.volumeId),c=s.imageIds;for(let l=0;l<e.updatedFrames.length;l++)if(e.updatedFrames[l]){const u=Ye.getImage(c[l]);if(!u)continue;let f=u.voxelManager.getScalarData();const v=e.context;s.dataType!==f.constructor.name&&(f=nw(f,s.dataType));const[g]=t.updateArrayDataTypeForGL(s.dataType,[f]);t.bind();const d=l;v.texSubImage3D(e.target,0,0,0,d,e.width,e.height,1,e.format,e.openGLDataType,g),t.deactivate(),e.updatedFrames[l]=null}return e.generateMipmap&&e.context.generateMipmap(e.target),t.deactivate(),!0}function o(){const s=Ye.getVolume(e.volumeId),c=s.getCurrentTimePointImageIds();if(!c.length)return!1;let l;for(let u=0;u<c.length;u++){const f=c[u],v=Ye.getImage(f);let g;v?(g=v.voxelManager.getScalarData(),l=g.constructor):(l=I5(s.dataType,!0),g=new l(e.width*e.height));const d=e.context;s.dataType!==g.constructor.name&&(g=nw(g,s.dataType));const[m]=t.updateArrayDataTypeForGL(s.dataType,[g]);t.bind();let h=u;d.texSubImage3D(e.target,0,0,0,h,e.width,e.height,1,e.format,e.openGLDataType,m),t.deactivate()}return e.generateMipmap&&e.context.generateMipmap(e.target),t.deactivate(),!0}t.hasUpdatedFrames=()=>!e.updatedFrames.length||e.updatedFrames.some(s=>s),t.getUpdatedFrames=()=>e.updatedFrames,t.setVolumeId=s=>{e.volumeId=s},t.getVolumeId=()=>e.volumeId,t.setTextureParameters=({width:s,height:c,depth:l,numberOfComponents:u,dataType:f})=>{e.width??(e.width=s),e.height??(e.height=c),e.depth??(e.depth=l),e.inputNumComps??(e.inputNumComps=u),e.inputDataType??(e.inputDataType=f)},t.getTextureParameters=()=>({width:e.width,height:e.height,depth:e.depth,numberOfComponents:e.inputNumComps,dataType:e.inputDataType})}const cie={updatedFrames:[]};function VL(t,e,n={}){Object.assign(e,cie,n),oa.extend(t,e,n),sie(t,e)}const lie=J.newInstance(VL,"vtkStreamingOpenGLTexture"),uie={newInstance:lie,extend:VL},fie={isPerformingCoordinateTransformation:!1};function kL(t,e,n={}){Object.assign(e,fie,n),E5.extend(t,e,n),J.setGet(t,e,["isPerformingCoordinateTransformation"]),gie(t,e)}const vie=J.newInstance(kL,"vtkSlabCamera");function gie(t,e){e.classHierarchy.push("vtkSlabCamera");const n=zt(new Float64Array(16)),r=new Float64Array(3);t.getProjectionMatrix=(a,i,o)=>{const s=Fs();if(e.projectionMatrix){const v=1/e.physicalScale;return or(r,v,v,v),fa(s,e.projectionMatrix),$c(s,s,r),$n(s,s),s}zt(n);let c=e.clippingRange[0],l=e.clippingRange[1];e.isPerformingCoordinateTransformation&&(c=e.distance,l=e.distance+.1);const u=l-c,f=[c+(i+1)*u/2,c+(o+1)*u/2];if(e.parallelProjection){const v=e.parallelScale*a,g=e.parallelScale,d=(e.windowCenter[0]-1)*v,m=(e.windowCenter[0]+1)*v,h=(e.windowCenter[1]-1)*g,C=(e.windowCenter[1]+1)*g;JM(n,d,m,h,C,f[0],f[1]),$n(n,n)}else{if(e.useOffAxisProjection)throw new Error("Off-Axis projection is not supported at this time");{const v=Math.tan(Cn.radiansFromDegrees(e.viewAngle)/2);let g,d;e.useHorizontalViewAngle===!0?(g=c*v,d=c*v/a):(g=c*v*a,d=c*v);const m=(e.windowCenter[0]-1)*g,h=(e.windowCenter[0]+1)*g,C=(e.windowCenter[1]-1)*d,p=(e.windowCenter[1]+1)*d,S=f[0],I=f[1];n[0]=2*S/(h-m),n[5]=2*S/(p-C),n[2]=(m+h)/(h-m),n[6]=(C+p)/(p-C),n[10]=-(S+I)/(I-S),n[14]=-1,n[11]=-2*S*I/(I-S),n[15]=0}}return fa(s,n),s}}const die={newInstance:vie,extend:kL};function A0(t){return Vo(t,"vtkVolume")||Vo(t,"vtkImageSlice")}function Vo(t,e){return!!("isA"in t?t:t.actor).isA(e)}const V0=[];function qc(t,e=0){let n;for(n=0;n<V0.length&&!(V0[n].priority<=e);n++);V0.splice(n,0,{priority:e,provider:t})}function mie(t){for(let e=0;e<V0.length;e++)if(V0[e].provider===t){V0.splice(e,1);break}}function hie(){for(;V0.length>0;)V0.pop()}function Lt(t,...e){for(let n=0;n<V0.length;n++){const r=V0[n].provider(t,...e);if(r!==void 0)return r}}const GL=Object.freeze(Object.defineProperty({__proto__:null,addProvider:qc,get:Lt,removeAllProviders:hie,removeProvider:mie},Symbol.toStringTag,{value:"Module"}));function vu(t,e){const{direction:n,spacing:r}=t,a=n.slice(0,3),i=n.slice(3,6),o=n.slice(6,9),s=[Gt(a,e),Gt(i,e),Gt(o,e)],c=Xe();return or(c,s[0]*r[0],s[1]*r[1],s[2]*r[2]),Eo(c)}function jc(t,e,n){const{direction:r,spacing:a,imageIds:i}=t;if(!i.length)return;const o=r.slice(6,9),s=Gt(o,n);if(Math.abs(s)<1-o0)return;const l=vu({direction:r,spacing:a},n)/2;let u;for(let f=0;f<i.length;f++){const v=i[f],{imagePositionPatient:g}=Lt("imagePlaneModule",v),d=Xe();Dr(d,e,g);const m=Gt(d,n);Math.abs(m)<l&&(u=v)}return u}const pie=t=>t,rw=1e-6;let BL=class{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.matrix=zt(new Float64Array(16)),this.tmp=new Float64Array(3),this.angleConv=e?WY:pie}rotateFromDirections(e,n){const r=new Float64Array(3),a=new Float64Array(3),i=new Float64Array(16);or(r,e[0],e[1],e[2]),or(a,n[0],n[1],n[2]),Ar(r,r),Ar(a,a);const o=Gt(r,a);return o>=1?this:(gr(this.tmp,r,a),Eo(this.tmp)<rw&&(gr(this.tmp,[1,0,0],e),Eo(this.tmp)<rw&&gr(this.tmp,[0,1,0],e)),ZM(i,Math.acos(o),this.tmp),Xn(this.matrix,this.matrix,i),this)}rotate(e,n){return or(this.tmp,...n),Ar(this.tmp,this.tmp),Ki(this.matrix,this.matrix,this.angleConv(e),this.tmp),this}rotateX(e){return QM(this.matrix,this.matrix,this.angleConv(e)),this}rotateY(e){return KM(this.matrix,this.matrix,this.angleConv(e)),this}rotateZ(e){return XM(this.matrix,this.matrix,this.angleConv(e)),this}translate(e,n,r){return or(this.tmp,e,n,r),kr(this.matrix,this.matrix,this.tmp),this}scale(e,n,r){return or(this.tmp,e,n,r),$c(this.matrix,this.matrix,this.tmp),this}multiply(e){return Xn(this.matrix,this.matrix,e),this}multiply3x3(e){return Xn(this.matrix,this.matrix,[e[0],e[1],e[2],0,e[3],e[4],e[5],0,e[6],e[7],e[8],0,0,0,0,1]),this}invert(){return ba(this.matrix,this.matrix),this}identity(){return zt(this.matrix),this}apply(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1;if(Jm(UM,this.matrix))return this;const a=r===-1?e.length:n+r*3;for(let i=n;i<a;i+=3)or(this.tmp,e[i],e[i+1],e[i+2]),un(this.tmp,this.tmp,this.matrix),e[i]=this.tmp[0],e[i+1]=this.tmp[1],e[i+2]=this.tmp[2];return this}getMatrix(){return this.matrix}setMatrix(e){return e&&e.length===16&&fa(this.matrix,e),this}};function Sie(){return new BL(!0)}function Cie(){return new BL(!1)}var _i={buildFromDegree:Sie,buildFromRadian:Cie};function WL(t){const e=t.getMapper().getInputData(),n=e.extentToBounds(e.getExtent());return[[n[0],n[2],n[4]],[n[0],n[2],n[5]],[n[0],n[3],n[4]],[n[0],n[3],n[5]],[n[1],n[2],n[4]],[n[1],n[2],n[5]],[n[1],n[3],n[4]],[n[1],n[3],n[5]]]}const Iie=o0*o0,iE=t=>Math.abs(Math.abs(t)-1)<Iie,oE=(t,e)=>iE(t[e])||iE(t[e+1])||iE(t[e+2]),Die=t=>oE(t,0)&&oE(t,3)&&oE(t,6);function mI(t,e,n){const r=t.getMapper().getInputData();let a;const i=r.getDirection();if(Die(i))a=WL(t);else{const[f,v,g]=r.getDimensions();a=[[0,0,0],[f-1,0,0],[0,v-1,0],[f-1,v-1,0],[0,0,g-1],[f-1,0,g-1],[0,v-1,g-1],[f-1,v-1,g-1]].map(m=>r.indexToWorld(m))}const o=_i.buildFromDegree().identity().rotateFromDirections(e,[1,0,0]);a.forEach(f=>o.apply(f));const s=[...n];o.apply(s);const c=s[0];let l=1/0,u=-1/0;for(let f=0;f<8;f++){const v=a[f][0];v>u&&(u=v),v<l&&(l=v)}return{min:l,max:u,current:c,actor:t,viewPlaneNormal:e,focalPoint:n}}function Wf(t,e,n,r,a,i){const{min:o,max:s,current:c}=n,l=Xe();Dr(l,e,t);const u=Math.round((s-o)/a),v=(c-o)/(s-o)*u;let g=Math.round(v),d=[t[0]-r[0]*v*a,t[1]-r[1]*v*a,t[2]-r[2]*v*a];g+=i,g>u?g=u:g<0&&(g=0);const m=g*a;d=[d[0]+r[0]*m,d[1]+r[1]*m,d[2]+r[2]*m];const h=[d[0]+l[0],d[1]+l[1],d[2]+l[2]];return{newFocalPoint:d,newPosition:h}}const Eie={RGB:0,HSV:1,LAB:2,DIVERGING:3},Tie={LINEAR:0,LOG10:1};var HL={ColorSpace:Eie,Scale:Tie};const{ColorSpace:Es,Scale:_5}=HL,{ScalarMappingTarget:Cp}=uI,{vtkDebugMacro:yie,vtkErrorMacro:vc,vtkWarningMacro:Mie}=J;function aw(t,e){const n=t[0],r=t[1],a=t[2],i=Math.sqrt(n*n+r*r+a*a),o=i>.001?Math.acos(n/i):0,s=o>.001?Math.atan2(a,r):0;e[0]=i,e[1]=o,e[2]=s}function _ie(t,e){const n=t[0],r=t[1],a=t[2];e[0]=n*Math.cos(r),e[1]=n*Math.sin(r)*Math.cos(a),e[2]=n*Math.sin(r)*Math.sin(a)}function iw(t,e){if(t[0]>=e-.1)return t[2];const n=t[1]*Math.sqrt(e*e-t[0]*t[0])/(t[0]*Math.sin(t[1]));return t[2]>-.3*Math.PI?t[2]+n:t[2]-n}function Oie(t,e){let n=t-e;for(n<0&&(n=-n);n>=2*Math.PI;)n-=2*Math.PI;return n>Math.PI&&(n=2*Math.PI-n),n}function ow(t,e,n,r){const a=[],i=[];Zu(e,a),Zu(n,i);const o=[],s=[];aw(a,o),aw(i,s);let c=t;if(o[1]>.05&&s[1]>.05&&Oie(o[2],s[2])>.33*Math.PI){let f=Math.max(o[0],s[0]);f=Math.max(88,f),t<.5?(s[0]=f,s[1]=0,s[2]=0,c*=2):(o[0]=f,o[1]=0,o[2]=0,c=2*c-1)}o[1]<.05&&s[1]>.05?o[2]=iw(s,o[0]):s[1]<.05&&o[1]>.05&&(s[2]=iw(o,s[0]));const l=[];l[0]=(1-c)*o[0]+c*s[0],l[1]=(1-c)*o[1]+c*s[1],l[2]=(1-c)*o[2]+c*s[2];const u=[];_ie(l,u),DS(u,r)}function wie(t,e){e.classHierarchy.push("vtkColorTransferFunction"),t.getSize=()=>e.nodes.length,t.addRGBPoint=(n,r,a,i)=>t.addRGBPointLong(n,r,a,i,.5,0),t.addRGBPointLong=function(n,r,a,i){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.5,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0;if(o<0||o>1)return vc("Midpoint outside range [0.0, 1.0]"),-1;if(s<0||s>1)return vc("Sharpness outside range [0.0, 1.0]"),-1;e.allowDuplicateScalars||t.removePoint(n);const c={x:n,r,g:a,b:i,midpoint:o,sharpness:s};e.nodes.push(c),t.sortAndUpdateRange();let l=0;for(;l<e.nodes.length&&e.nodes[l].x!==n;l++);return l<e.nodes.length?l:-1},t.addHSVPoint=(n,r,a,i)=>t.addHSVPointLong(n,r,a,i,.5,0),t.addHSVPointLong=function(n,r,a,i){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.5,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0;const c=[];return qu([r,a,i],c),t.addRGBPoint(n,c[0],c[1],c[2],o,s)},t.setNodes=n=>{if(e.nodes!==n){const r=JSON.stringify(e.nodes);e.nodes=n;const a=JSON.stringify(e.nodes);if(t.sortAndUpdateRange()||r!==a)return t.modified(),!0}return!1},t.sortAndUpdateRange=()=>{const n=JSON.stringify(e.nodes);e.nodes.sort((i,o)=>i.x-o.x);const r=JSON.stringify(e.nodes),a=t.updateRange();return!a&&n!==r?(t.modified(),!0):a},t.updateRange=()=>{const n=[2];n[0]=e.mappingRange[0],n[1]=e.mappingRange[1];const r=e.nodes.length;return r?(e.mappingRange[0]=e.nodes[0].x,e.mappingRange[1]=e.nodes[r-1].x):(e.mappingRange[0]=0,e.mappingRange[1]=0),n[0]===e.mappingRange[0]&&n[1]===e.mappingRange[1]?!1:(t.modified(),!0)},t.removePoint=n=>{let r=0;for(;r<e.nodes.length&&e.nodes[r].x!==n;r++);const a=r;if(r>=e.nodes.length)return-1;let i=!1;return e.nodes.splice(r,1),(r===0||r===e.nodes.length)&&(i=t.updateRange()),i||t.modified(),a},t.movePoint=(n,r)=>{if(n!==r){t.removePoint(r);for(let a=0;a<e.nodes.length;a++)if(e.nodes[a].x===n){e.nodes[a].x=r,t.sortAndUpdateRange();break}}},t.removeAllPoints=()=>{e.nodes=[],t.sortAndUpdateRange()},t.addRGBSegment=(n,r,a,i,o,s,c,l)=>{t.sortAndUpdateRange();for(let u=0;u<e.nodes.length;)e.nodes[u].x>=n&&e.nodes[u].x<=o?e.nodes.splice(u,1):u++;t.addRGBPointLong(n,r,a,i,.5,0),t.addRGBPointLong(o,s,c,l,.5,0),t.modified()},t.addHSVSegment=(n,r,a,i,o,s,c,l)=>{const u=[r,a,i],f=[s,c,l],v=[],g=[];qu(u,v),qu(f,g),t.addRGBSegment(n,v[0],v[1],v[2],o,g[0],g[1],g[2])},t.mapValue=n=>{const r=[];return t.getColor(n,r),[Math.floor(255*r[0]+.5),Math.floor(255*r[1]+.5),Math.floor(255*r[2]+.5),255]},t.getColor=(n,r)=>{if(e.indexedLookup){const a=t.getSize(),i=t.getAnnotatedValueIndexInternal(n);if(i<0||a===0){const o=t.getNanColorByReference();r[0]=o[0],r[1]=o[1],r[2]=o[2]}else{const o=[];t.getNodeValue(i%a,o),r[0]=o[1],r[1]=o[2],r[2]=o[3]}return}t.getTable(n,n,1,r)},t.getRedValue=n=>{const r=[];return t.getColor(n,r),r[0]},t.getGreenValue=n=>{const r=[];return t.getColor(n,r),r[1]},t.getBlueValue=n=>{const r=[];return t.getColor(n,r),r[2]},t.getTable=(n,r,a,i)=>{const o=Number(n),s=Number(r);if(ES(o)||ES(s)){for(let M=0;M<a;M++)i[M*3+0]=e.nanColor[0],i[M*3+1]=e.nanColor[1],i[M*3+2]=e.nanColor[2];return}let c=0;const l=e.nodes.length;let u=0,f=0,v=0;l!==0&&(u=e.nodes[l-1].r,f=e.nodes[l-1].g,v=e.nodes[l-1].b);let g=0,d=0,m=0;const h=[0,0,0],C=[0,0,0];let p=0,S=0;const I=[];let D=e.scale===_5.LOG10;D&&(D=e.mappingRange[0]>0);let E=0,T=0,y=0;D&&(E=Math.log10(o),T=Math.log10(s));for(let M=0;M<a;M++){const _=3*M;if(a>1?D?(y=E+M/(a-1)*(T-E),g=10**y):g=o+M/(a-1)*(s-o):D?(y=.5*(E+T),g=10**y):g=.5*(o+s),e.discretize){const O=e.mappingRange;if(g>=O[0]&&g<=O[1]){const w=e.numberOfValues,x=O[1]-O[0];if(w<=1)g=O[0]+x/2;else{const P=(g-O[0])/x,R=kM(w*P);g=O[0]+R/(w-1)*x}}}for(;c<l&&g>e.nodes[c].x;)c++,c<l&&(d=e.nodes[c-1].x,m=e.nodes[c].x,D&&(d=Math.log10(d),m=Math.log10(m)),h[0]=e.nodes[c-1].r,C[0]=e.nodes[c].r,h[1]=e.nodes[c-1].g,C[1]=e.nodes[c].g,h[2]=e.nodes[c-1].b,C[2]=e.nodes[c].b,p=e.nodes[c-1].midpoint,S=e.nodes[c-1].sharpness,p<1e-5&&(p=1e-5),p>.99999&&(p=.99999));if(g>e.mappingRange[1])i[_]=0,i[_+1]=0,i[_+2]=0,e.clamping&&(t.getUseAboveRangeColor()?(i[_]=e.aboveRangeColor[0],i[_+1]=e.aboveRangeColor[1],i[_+2]=e.aboveRangeColor[2]):(i[_]=u,i[_+1]=f,i[_+2]=v));else if(g<e.mappingRange[0]||kb(g)&&g<0)i[_]=0,i[_+1]=0,i[_+2]=0,e.clamping&&(t.getUseBelowRangeColor()?(i[_]=e.belowRangeColor[0],i[_+1]=e.belowRangeColor[1],i[_+2]=e.belowRangeColor[2]):l>0&&(i[_]=e.nodes[0].r,i[_+1]=e.nodes[0].g,i[_+2]=e.nodes[0].b));else if(c===0&&(Math.abs(g-o)<1e-6||e.discretize))l>0?(i[_]=e.nodes[0].r,i[_+1]=e.nodes[0].g,i[_+2]=e.nodes[0].b):(i[_]=0,i[_+1]=0,i[_+2]=0);else{let O=0;if(D?O=(y-d)/(m-d):O=(g-d)/(m-d),O<p?O=.5*O/p:O=.5+.5*(O-p)/(1-p),S>.99)if(O<.5){i[_]=h[0],i[_+1]=h[1],i[_+2]=h[2];continue}else{i[_]=C[0],i[_+1]=C[1],i[_+2]=C[2];continue}if(S<.01){if(e.colorSpace===Es.RGB)i[_]=(1-O)*h[0]+O*C[0],i[_+1]=(1-O)*h[1]+O*C[1],i[_+2]=(1-O)*h[2]+O*C[2];else if(e.colorSpace===Es.HSV){const V=[],X=[];Gg(h,V),Gg(C,X),e.hSVWrap&&(V[0]-X[0]>.5||X[0]-V[0]>.5)&&(V[0]>X[0]?V[0]-=1:X[0]-=1);const re=[];re[0]=(1-O)*V[0]+O*X[0],re[0]<0&&(re[0]+=1),re[1]=(1-O)*V[1]+O*X[1],re[2]=(1-O)*V[2]+O*X[2],qu(re,I),i[_]=I[0],i[_+1]=I[1],i[_+2]=I[2]}else if(e.colorSpace===Es.LAB){const V=[],X=[];Zu(h,V),Zu(C,X);const re=[];re[0]=(1-O)*V[0]+O*X[0],re[1]=(1-O)*V[1]+O*X[1],re[2]=(1-O)*V[2]+O*X[2],DS(re,I),i[_]=I[0],i[_+1]=I[1],i[_+2]=I[2]}else e.colorSpace===Es.DIVERGING?(ow(O,h,C,I),i[_]=I[0],i[_+1]=I[1],i[_+2]=I[2]):vc("ColorSpace set to invalid value.",e.colorSpace);continue}O<.5?O=.5*(O*2)**(1+10*S):O>.5&&(O=1-.5*((1-O)*2)**(1+10*S));const w=O*O,x=w*O,P=2*x-3*w+1,R=-2*x+3*w,L=x-2*w+O,H=x-w;let F,U;if(e.colorSpace===Es.RGB)for(let V=0;V<3;V++)F=C[V]-h[V],U=(1-S)*F,i[_+V]=P*h[V]+R*C[V]+L*U+H*U;else if(e.colorSpace===Es.HSV){const V=[],X=[];Gg(h,V),Gg(C,X),e.hSVWrap&&(V[0]-X[0]>.5||X[0]-V[0]>.5)&&(V[0]>X[0]?V[0]-=1:X[0]-=1);const re=[];for(let ue=0;ue<3;ue++)F=X[ue]-V[ue],U=(1-S)*F,re[ue]=P*V[ue]+R*X[ue]+L*U+H*U,ue===0&&re[ue]<0&&(re[ue]+=1);qu(re,I),i[_]=I[0],i[_+1]=I[1],i[_+2]=I[2]}else if(e.colorSpace===Es.LAB){const V=[],X=[];Zu(h,V),Zu(C,X);const re=[];for(let ue=0;ue<3;ue++)F=X[ue]-V[ue],U=(1-S)*F,re[ue]=P*V[ue]+R*X[ue]+L*U+H*U;DS(re,I),i[_]=I[0],i[_+1]=I[1],i[_+2]=I[2]}else e.colorSpace===Es.DIVERGING?(ow(O,h,C,I),i[_]=I[0],i[_+1]=I[1],i[_+2]=I[2]):vc("ColorSpace set to invalid value.");for(let V=0;V<3;V++)i[_+V]=i[_+V]<0?0:i[_+V],i[_+V]=i[_+V]>1?1:i[_+V]}}},t.getUint8Table=function(n,r,a){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(t.getMTime()<=e.buildTime&&e.tableSize===a&&e.tableWithAlpha!==i)return e.table;if(e.nodes.length===0)return vc("Attempting to lookup a value with no points in the function"),e.table;const o=i?4:3;(e.tableSize!==a||e.tableWithAlpha!==i)&&(e.table=new Uint8Array(a*o),e.tableSize=a,e.tableWithAlpha=i);const s=[];t.getTable(n,r,a,s);for(let c=0;c<a;c++)e.table[c*o+0]=Math.floor(s[c*3+0]*255+.5),e.table[c*o+1]=Math.floor(s[c*3+1]*255+.5),e.table[c*o+2]=Math.floor(s[c*3+2]*255+.5),i&&(e.table[c*o+3]=255);return e.buildTime.modified(),e.table},t.buildFunctionFromArray=n=>{t.removeAllPoints();const r=n.getNumberOfComponents();for(let a=0;a<n.getNumberOfTuples();a++)switch(r){case 3:{e.nodes.push({x:a,r:n.getComponent(a,0),g:n.getComponent(a,1),b:n.getComponent(a,2),midpoint:.5,sharpness:0});break}case 4:{e.nodes.push({x:n.getComponent(a,0),r:n.getComponent(a,1),g:n.getComponent(a,2),b:n.getComponent(a,3),midpoint:.5,sharpness:0});break}case 5:{e.nodes.push({x:a,r:n.getComponent(a,0),g:n.getComponent(a,1),b:n.getComponent(a,2),midpoint:n.getComponent(a,4),sharpness:n.getComponent(a,5)});break}case 6:{e.nodes.push({x:n.getComponent(a,0),r:n.getComponent(a,1),g:n.getComponent(a,2),b:n.getComponent(a,3),midpoint:n.getComponent(a,4),sharpness:n.getComponent(a,5)});break}}t.sortAndUpdateRange()},t.buildFunctionFromTable=(n,r,a,i)=>{let o=0;t.removeAllPoints(),a>1&&(o=(r-n)/(a-1));for(let s=0;s<a;s++){const c={x:n+o*s,r:i[s*3],g:i[s*3+1],b:i[s*3+2],sharpness:0,midpoint:.5};e.nodes.push(c)}t.sortAndUpdateRange()},t.getNodeValue=(n,r)=>n<0||n>=e.nodes.length?(vc("Index out of range!"),-1):(r[0]=e.nodes[n].x,r[1]=e.nodes[n].r,r[2]=e.nodes[n].g,r[3]=e.nodes[n].b,r[4]=e.nodes[n].midpoint,r[5]=e.nodes[n].sharpness,1),t.setNodeValue=(n,r)=>{if(n<0||n>=e.nodes.length)return vc("Index out of range!"),-1;const a=e.nodes[n].x;return e.nodes[n].x=r[0],e.nodes[n].r=r[1],e.nodes[n].g=r[2],e.nodes[n].b=r[3],e.nodes[n].midpoint=r[4],e.nodes[n].sharpness=r[5],a!==r[0]?t.sortAndUpdateRange():t.modified(),1},t.getNumberOfAvailableColors=()=>{var r;if(e.indexedLookup&&t.getSize())return t.getSize();if(e.tableSize)return e.tableSize;const n=((r=e.nodes)==null?void 0:r.length)??0;return Math.max(4094,n)},t.getIndexedColor=(n,r)=>{const a=t.getSize();if(a>0&&n>=0){const o=[];t.getNodeValue(n%a,o);for(let s=0;s<3;++s)r[s]=o[s+1];r[3]=1;return}const i=t.getNanColorByReference();r[0]=i[0],r[1]=i[1],r[2]=i[2],r[3]=1},t.fillFromDataPointer=(n,r)=>{if(!(n<=0||!r)){t.removeAllPoints();for(let a=0;a<n;a++)t.addRGBPoint(r[a*4],r[a*4+1],r[a*4+2],r[a*4+3])}},t.setMappingRange=(n,r)=>{const a=[n,r],i=t.getRange();if(i[1]===a[1]&&i[0]===a[0])return;if(a[1]===a[0]){vc("attempt to set zero width color range");return}const o=(a[1]-a[0])/(i[1]-i[0]),s=a[0]-i[0]*o;for(let c=0;c<e.nodes.length;++c)e.nodes[c].x=e.nodes[c].x*o+s;e.mappingRange[0]=a[0],e.mappingRange[1]=a[1],t.modified()},t.adjustRange=n=>{const r=t.getRange(),a=[];r[0]<n[0]?(t.getColor(n[0],a),t.addRGBPoint(n[0],a[0],a[1],a[2])):(t.getColor(r[0],a),t.addRGBPoint(n[0],a[0],a[1],a[2])),r[1]>n[1]?(t.getColor(n[1],a),t.addRGBPoint(n[1],a[0],a[1],a[2])):(t.getColor(r[1],a),t.addRGBPoint(n[1],a[0],a[1],a[2])),t.sortAndUpdateRange();for(let i=0;i<e.nodes.length;)e.nodes[i].x>=n[0]&&e.nodes[i].x<=n[1]?e.nodes.splice(i,1):++i;return 1},t.estimateMinNumberOfSamples=(n,r)=>{const a=t.findMinimumXDistance();return Math.ceil((r-n)/a)},t.findMinimumXDistance=()=>{if(e.nodes.length<2)return-1;let n=Number.MAX_VALUE;for(let r=0;r<e.nodes.length-1;r++){const a=e.nodes[r+1].x-e.nodes[r].x;a<n&&(n=a)}return n},t.mapScalarsThroughTable=(n,r,a,i)=>{if(t.getSize()===0){yie("Transfer Function Has No Points!");return}e.indexedLookup?t.mapDataIndexed(n,r,a,i):t.mapData(n,r,a,i)},t.mapData=(n,r,a,i)=>{if(t.getSize()===0){Mie("Transfer Function Has No Points!");return}const o=Math.floor(t.getAlpha()*255+.5),s=n.getNumberOfTuples(),c=n.getNumberOfComponents(),l=r.getData(),u=n.getData(),f=[];if(a===Cp.RGBA)for(let v=0;v<s;v++){const g=u[v*c+i];t.getColor(g,f),l[v*4]=Math.floor(f[0]*255+.5),l[v*4+1]=Math.floor(f[1]*255+.5),l[v*4+2]=Math.floor(f[2]*255+.5),l[v*4+3]=o}if(a===Cp.RGB)for(let v=0;v<s;v++){const g=u[v*c+i];t.getColor(g,f),l[v*3]=Math.floor(f[0]*255+.5),l[v*3+1]=Math.floor(f[1]*255+.5),l[v*3+2]=Math.floor(f[2]*255+.5)}if(a===Cp.LUMINANCE)for(let v=0;v<s;v++){const g=u[v*c+i];t.getColor(g,f),l[v]=Math.floor(f[0]*76.5+f[1]*150.45+f[2]*28.05+.5)}if(a===Cp.LUMINANCE_ALPHA)for(let v=0;v<s;v++){const g=u[v*c+i];t.getColor(g,f),l[v*2]=Math.floor(f[0]*76.5+f[1]*150.45+f[2]*28.05+.5),l[v*2+1]=o}},t.applyColorMap=n=>{const r=JSON.stringify(e.colorSpace);n.ColorSpace&&(e.colorSpace=Es[n.ColorSpace.toUpperCase()],e.colorSpace===void 0&&(vc(`ColorSpace ${n.ColorSpace} not supported, using RGB instead`),e.colorSpace=Es.RGB));let a=r!==JSON.stringify(e.colorSpace);const i=a||JSON.stringify(e.nanColor);if(n.NanColor)for(e.nanColor=[].concat(n.NanColor);e.nanColor.length<4;)e.nanColor.push(1);a=a||i!==JSON.stringify(e.nanColor);const o=a||JSON.stringify(e.nodes);if(n.RGBPoints){const l=n.RGBPoints.length;e.nodes=[];const u=.5,f=0;for(let v=0;v<l;v+=4)e.nodes.push({x:n.RGBPoints[v],r:n.RGBPoints[v+1],g:n.RGBPoints[v+2],b:n.RGBPoints[v+3],midpoint:u,sharpness:f})}const s=t.sortAndUpdateRange(),c=!s&&(a||o!==JSON.stringify(e.nodes));return c&&t.modified(),s||c}}const Pie={clamping:!0,colorSpace:Es.RGB,hSVWrap:!0,scale:_5.LINEAR,nanColor:null,belowRangeColor:null,aboveRangeColor:null,useAboveRangeColor:!1,useBelowRangeColor:!1,allowDuplicateScalars:!1,table:null,tableSize:0,buildTime:null,nodes:null,discretize:!1,numberOfValues:256};function $L(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Pie,n),uI.extend(t,e,n),e.table=[],e.nodes=[],e.nanColor=[.5,0,0,1],e.belowRangeColor=[0,0,0,1],e.aboveRangeColor=[1,1,1,1],e.buildTime={},J.obj(e.buildTime),J.get(t,e,["buildTime","mappingRange"]),J.setGet(t,e,["useAboveRangeColor","useBelowRangeColor","discretize","numberOfValues",{type:"enum",name:"colorSpace",enum:Es},{type:"enum",name:"scale",enum:_5}]),J.setArray(t,e,["nanColor","belowRangeColor","aboveRangeColor"],4),J.getArray(t,e,["nanColor","belowRangeColor","aboveRangeColor"]),wie(t,e)}const Aie=J.newInstance($L,"vtkColorTransferFunction");var iu={newInstance:Aie,extend:$L,...HL},xie=[{Name:"KAAMS",IndexedColors:[1,1,1,1,0,0,0,1,0,0,0,1,1,1,0,1,0,1,0,1,1,.63,.63,1,.67,.5,.33,1,.5,.75,.53,.35,.7,1,.75,.5],Annotations:[0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11]},{ColorSpace:"Diverging",Name:"Cool to Warm",NanColor:[1,1,0],RGBPoints:[0,.23137254902,.298039215686,.752941176471,.5,.865,.865,.865,1,.705882352941,.0156862745098,.149019607843]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Cool to Warm (Extended)",NanColor:[.25,0,0],RGBPoints:[0,0,0,.34902,.03125,.039216,.062745,.380392,.0625,.062745,.117647,.411765,.09375,.090196,.184314,.45098,.125,.12549,.262745,.501961,.15625,.160784,.337255,.541176,.1875,.2,.396078,.568627,.21875,.239216,.454902,.6,.25,.286275,.521569,.65098,.28125,.337255,.592157,.701961,.3125,.388235,.654902,.74902,.34375,.466667,.737255,.819608,.375,.572549,.819608,.878431,.40625,.654902,.866667,.909804,.4375,.752941,.917647,.941176,.46875,.823529,.956863,.968627,.5,.988235,.960784,.901961,.5,.941176,.984314,.988235,.52,.988235,.945098,.85098,.54,.980392,.898039,.784314,.5625,.968627,.835294,.698039,.59375,.94902,.733333,.588235,.625,.929412,.65098,.509804,.65625,.909804,.564706,.435294,.6875,.878431,.458824,.352941,.71875,.839216,.388235,.286275,.75,.760784,.294118,.211765,.78125,.701961,.211765,.168627,.8125,.65098,.156863,.129412,.84375,.6,.094118,.094118,.875,.54902,.066667,.098039,.90625,.501961,.05098,.12549,.9375,.45098,.054902,.172549,.96875,.4,.054902,.192157,1,.34902,.070588,.211765]},{ColorSpace:"Diverging",Name:"Warm to Cool",NanColor:[1,1,0],RGBPoints:[0,.705882352941,.0156862745098,.149019607843,.5,.865,.865,.865,1,.23137254902,.298039215686,.752941176471]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Warm to Cool (Extended)",NanColor:[.250004,0,0],RGBPoints:[0,.34902,0,.129412,.025,.4,.00392157,.101961,.05,.470588,.0156863,.0901961,.075,.54902,.027451,.0705882,.1,.619608,.0627451,.0431373,.125,.690196,.12549,.0627451,.15,.741176,.184314,.0745098,.175,.788235,.266667,.0941176,.2,.811765,.345098,.113725,.225,.831373,.411765,.133333,.25,.85098,.47451,.145098,.275,.870588,.54902,.156863,.3,.878431,.619608,.168627,.325,.890196,.658824,.196078,.35,.909804,.717647,.235294,.375,.929412,.776471,.278431,.395522,.94902,.823529,.321569,.418905,.968627,.87451,.407843,.444278,.980392,.917647,.509804,.470149,.988235,.956863,.643137,.483582,.992157,.964706,.713725,.499,.988235,.980392,.870588,.5,1,1,1,.501,.913725,.988235,.937255,.516418,.827451,.980392,.886275,.531343,.764706,.980392,.866667,.546766,.658824,.980392,.843137,.564179,.572549,.964706,.835294,.587562,.423529,.941176,.87451,.60597,.262745,.901961,.862745,.629851,.0705882,.854902,.870588,.651741,.0509804,.8,.85098,.681592,.0235294,.709804,.831373,.712935,.0313725,.615686,.811765,.75,.0313725,.537255,.788235,.775,.0392157,.466667,.768627,.8,.0509804,.396078,.741176,.825,.054902,.317647,.709804,.85,.054902,.243137,.678431,.875,.0431373,.164706,.639216,.9,.0313725,.0980392,.6,.925,.0392157,.0392157,.560784,.95,.105882,.0509804,.509804,.975,.113725,.0235294,.45098,1,.12549,0,.380392]},{ColorSpace:"RGB",Name:"Rainbow Desaturated",NanColor:[1,1,0],RGBPoints:[0,.278431372549,.278431372549,.858823529412,.143,0,0,.360784313725,.285,0,1,1,.429,0,.501960784314,0,.571,1,1,0,.714,1,.380392156863,0,.857,.419607843137,0,0,1,.878431372549,.301960784314,.301960784314]},{ColorSpace:"RGB",Name:"Cold and Hot",NanColor:[1,1,0],RGBPoints:[0,0,1,1,.45,0,0,1,.5,0,0,.501960784314,.55,1,0,0,1,1,1,0]},{ColorSpace:"RGB",Name:"Black-Body Radiation",NanColor:[0,.498039215686,1],RGBPoints:[0,0,0,0,.4,.901960784314,0,0,.8,.901960784314,.901960784314,0,1,1,1,1]},{ColorSpace:"RGB",Name:"X Ray",NanColor:[1,0,0],RGBPoints:[0,1,1,1,1,0,0,0]},{ColorSpace:"RGB",Name:"Grayscale",NanColor:[1,0,0],RGBPoints:[0,0,0,0,1,1,1,1]},{ColorSpace:"RGB",Name:"BkRd",NanColor:[0,1,1],RGBPoints:[0,0,0,0,1,1,0,0]},{ColorSpace:"RGB",Name:"BkGn",NanColor:[1,0,1],RGBPoints:[0,0,0,0,1,0,1,0]},{ColorSpace:"RGB",Name:"BkBu",NanColor:[1,1,0],RGBPoints:[0,0,0,0,1,0,0,1]},{ColorSpace:"RGB",Name:"BkMa",NanColor:[0,1,0],RGBPoints:[0,0,0,0,1,1,0,1]},{ColorSpace:"RGB",Name:"BkCy",NanColor:[0,1,1],RGBPoints:[0,0,0,0,1,0,1,1]},{ColorSpace:"RGB",Name:"Black, Blue and White",NanColor:[1,1,0],RGBPoints:[0,0,0,0,.333,0,0,.501960784314,.666,0,.501960784314,1,1,1,1,1]},{ColorSpace:"RGB",Name:"Black, Orange and White",NanColor:[1,1,0],RGBPoints:[0,0,0,0,.333,.501960784314,0,0,.666,1,.501960784314,0,1,1,1,1]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Linear YGB 1211g",NanColor:[.25,0,0],RGBPoints:[0,1,.988235,.968627,.02,1,.952941,.878431,.05,.968627,.905882,.776471,.1,.94902,.898039,.647059,.15,.901961,.878431,.556863,.2,.847059,.858824,.482353,.25,.690196,.819608,.435294,.3,.513725,.768627,.384314,.35,.337255,.721569,.337255,.4,.278431,.658824,.392157,.45,.231373,.639216,.435294,.5,.203922,.6,.486275,.55,.172549,.568627,.537255,.6,.141176,.517647,.54902,.65,.133333,.458824,.541176,.7,.12549,.396078,.529412,.75,.117647,.321569,.521569,.8,.121569,.258824,.509804,.85,.133333,.227451,.501961,.9,.145098,.192157,.490196,.95,.188235,.164706,.470588,1,.258824,.196078,.439216]},{ColorSpace:"CIELAB",Creator:"Francesca Samsel",Name:"Linear Green (Gr4L)",NanColor:[.25,0,0],RGBPoints:[0,.054902,.109804,.121569,.05,.07451,.172549,.180392,.1,.086275,.231373,.219608,.15,.094118,.278431,.25098,.2,.109804,.34902,.278431,.25,.113725,.4,.278431,.3,.117647,.45098,.270588,.35,.117647,.490196,.243137,.4,.113725,.521569,.203922,.45,.109804,.54902,.152941,.5,.082353,.588235,.082353,.55,.109804,.631373,.05098,.6,.211765,.678431,.082353,.65,.317647,.721569,.113725,.7,.431373,.760784,.160784,.75,.556863,.8,.239216,.8,.666667,.839216,.294118,.85,.784314,.878431,.396078,.9,.886275,.921569,.533333,.95,.960784,.94902,.670588,1,1,.984314,.901961]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Linear Blue (8_31f)",NanColor:[.25,0,0],RGBPoints:[0,.960784,1,.980392,.05,.815686,.960784,.913725,.1,.670588,.929412,.870588,.15,.556863,.901961,.843137,.2,.478431,.870588,.823529,.25,.439216,.831373,.803922,.3,.4,.8,.788235,.35,.376471,.768627,.768627,.4,.34902,.709804,.729412,.45,.32549,.654902,.690196,.5,.301961,.607843,.658824,.55,.247059,.545098,.619608,.6,.239216,.494118,.580392,.65,.227451,.439216,.541176,.7,.227451,.403922,.521569,.75,.231373,.368627,.501961,.8,.227451,.321569,.470588,.85,.219608,.282353,.439216,.9,.192157,.235294,.4,.95,.160784,.184314,.34902,1,.133333,.12549,.301961]},{ColorSpace:"HSV",Name:"Blue to Red Rainbow",NanColor:[.498039215686,.498039215686,.498039215686],RGBPoints:[0,0,0,1,1,1,0,0]},{ColorSpace:"HSV",Name:"Red to Blue Rainbow",NanColor:[.498039215686,.498039215686,.498039215686],RGBPoints:[0,1,0,0,1,0,0,1]},{ColorSpace:"RGB",Name:"Rainbow Blended White",NanColor:[1,1,0],RGBPoints:[0,1,1,1,.17,0,0,1,.34,0,1,1,.5,0,1,0,.67,1,1,0,.84,1,0,0,1,.878431372549,0,1]},{ColorSpace:"RGB",Name:"Rainbow Blended Grey",NanColor:[1,1,0],RGBPoints:[0,.317647058824,.341176470588,.43137254902,.17,0,0,1,.34,0,1,1,.5,0,1,0,.67,1,1,0,.84,1,0,0,1,.878431372549,0,1]},{ColorSpace:"RGB",Name:"Rainbow Blended Black",NanColor:[1,1,0],RGBPoints:[0,0,0,0,.17,0,0,1,.34,0,1,1,.5,0,1,0,.67,1,1,0,.84,1,0,0,1,.878431372549,0,1]},{ColorSpace:"RGB",Name:"Blue to Yellow",NanColor:[1,0,0],RGBPoints:[0,.0392156862745,.0392156862745,.949019607843,1,.949019607843,.949019607843,.0392156862745]},{ColorSpace:"HSV",Name:"blot",RGBPoints:[0,0,0,1,.166,0,0,1,.167,1,0,1,.332,1,0,1,.333,0,1,1,.5,0,1,1,.501,0,1,0,.666,0,1,0,.667,1,1,0,.832,1,1,0,.833,1,0,0,1,1,0,0]},{ColorSpace:"Lab",Name:"CIELab Blue to Red",NanColor:[1,1,0],RGBPoints:[0,0,.6,.749019607843,1,.76862745098,.466666666667,.341176470588]},{ColorSpace:"RGB",Name:"jet",RGBPoints:[-1,0,0,.5625,-.777778,0,0,1,-.269841,0,1,1,-.015873,.5,1,.5,.238095,1,1,0,.746032,1,0,0,1,.5,0,0]},{ColorSpace:"RGB",Name:"rainbow",RGBPoints:[-1,0,0,1,-.5,0,1,1,0,0,1,0,.5,1,1,0,1,1,0,0]},{ColorSpace:"Lab",Name:"erdc_rainbow_bright",RGBPoints:[-1,.32549,.14902,.960784,-.866221,.297047,.375586,.963836,-.732441,.180302,.536818,.964627,-.598662,.1302,.649207,.929647,-.464883,.0445143,.749654,.855998,-.331104,.0271325,.830713,.721527,-.197324,.259504,.866145,.543555,-.0635452,.428364,.890725,.329819,.0702341,.568503,.898508,.187623,.204013,.738259,.890317,.0825461,.337793,.84546,.86136,.0147555,.471572,.912191,.808018,0,.605351,.962848,.710445,0,.73913,.999469,.600258,.0176284,.87291,.994156,.445975,.193912,1,.980407,.247105,.262699]},{ColorSpace:"Lab",Name:"erdc_rainbow_dark",RGBPoints:[-1,0,0,.423499,-.866221,0,.119346,.529237,-.732441,0,.238691,.634976,-.598662,0,.346852,.68788,-.464883,0,.45022,.718141,-.331104,0,.553554,.664839,-.197324,0,.651082,.519303,-.0635452,.115841,.72479,.352857,.0702341,.326771,.781195,.140187,.204013,.522765,.798524,.0284624,.337793,.703162,.788685,.00885756,.471572,.845118,.751133,0,.605351,.955734,.690825,0,.73913,.995402,.567916,.0618524,.87291,.987712,.403398,.164851,1,.980407,.247105,.262699]},{ColorSpace:"Lab",Name:"nic_CubicL",RGBPoints:[-1,.479965,.0118108,.5307,-.87451,.522213,.0551282,.706919,-.74902,.50839,.237278,.867764,-.623529,.451617,.373834,.987255,-.498039,.39365,.497255,.97506,-.372549,.328631,.599639,.891843,-.247059,.250043,.690286,.778553,-.121569,.249656,.764905,.645857,.00392157,.297954,.821466,.50449,.129412,.337509,.872595,.358447,.254902,.430011,.913789,.297079,.380392,.587191,.931381,.333353,.505882,.727937,.93591,.353742,.631373,.826403,.921081,.365066,.756863,.893201,.846317,.372662,.882353,.965347,.73884,.378506,1,.983235,.597451,.366856]},{ColorSpace:"Lab",Name:"nic_CubicYF",RGBPoints:[-1,.5151,.0482,.6697,-.87451,.520711,.168955,.800574,-.74902,.493694,.278596,.911824,-.623529,.440026,.369475,.984978,-.498039,.398932,.457593,.987053,-.372549,.350651,.540644,.929608,-.247059,.298827,.615625,.857729,-.121569,.239928,.685061,.769531,.00392157,.228832,.739349,.673287,.129412,.263297,.78608,.569988,.254902,.298107,.828337,.460214,.380392,.33092,.864071,.352674,.505882,.38306,.898169,.287309,.631373,.49023,.917481,.307961,.756863,.62372,.926026,.332309,.882353,.717458,.92527,.342476,1,.8,.9255,.3529]},{ColorSpace:"Lab",Name:"gist_earth",RGBPoints:[-1,0,0,0,-.87451,.239216,.027451,.415686,-.74902,.0901961,.254902,.556863,-.623529,.0941176,.352941,.54902,-.498039,.105882,.435294,.533333,-.372549,.12549,.52549,.501961,-.247059,.156863,.596078,.443137,-.121569,.196078,.65098,.380392,.00392157,.282353,.717647,.301961,.129412,.466667,.772549,.27451,.254902,.678431,.784314,.309804,.380392,.901961,.756863,.376471,.505882,.992157,.705882,.521569,.631373,1,.721569,.701961,.756863,1,.784314,.784314,.882353,1,.866667,.866667,1,1,1,1]},{ColorSpace:"Lab",Name:"2hot",RGBPoints:[-1,.0416667,0,0,-.873016,.208333,0,0,-.746032,.375,0,0,-.619048,.541667,0,0,-.492063,.708333,0,0,-.365079,.854137,0,0,-.238095,.937488,.039062,0,-.111111,1,.208333,0,.015873,1,.375,0,.142857,1,.541667,0,.269841,1,.708333,0,.396825,1,.858805,.03125,.52381,1,.947392,.15625,.650794,1,1,.3125,.777778,1,1,.5625,.904762,1,1,.8125,1,1,1,1]},{ColorSpace:"Lab",Name:"erdc_red2yellow_BW",RGBPoints:[-1,754296e-12,0,109827e-10,-.87451,.18285,.0264094,0,-.74902,.3066,0,0,-.623529,.422841,0,0,-.498039,.522945,0,0,-.372549,.605721,0,0,-.247059,.672502,.14168,0,-.121569,.728167,.244025,0,.00392157,.781215,.333454,0,.129412,.825,.423586,0,.254902,.855893,.516793,0,.380392,.880491,.608846,0,.505882,.910305,.695505,0,.631373,.94109,.779067,.223528,.756863,.967873,.858572,.473521,.882353,.986815,.933211,.751583,1,1,1,.999997]},{ColorSpace:"Lab",Name:"erdc_marine2gold_BW",RGBPoints:[-1,111641e-12,0,162551e-11,-.87451,.0413146,.0619808,.209857,-.74902,.0185557,.101341,.350684,-.623529,.00486405,.149847,.461054,-.498039,.0836345,.210845,.517906,-.372549,.173222,.276134,.541793,-.247059,.259857,.343877,.535869,-.121569,.362299,.408124,.504293,.00392157,.468266,.468276,.468257,.129412,.582781,.527545,.374914,.254902,.691591,.585251,.274266,.380392,.784454,.645091,.247332,.505882,.862299,.710383,.27518,.631373,.920863,.782923,.351563,.756863,.955792,.859699,.533541,.882353,.976162,.93433,.780671,1,1,1,.999983]},{ColorSpace:"Lab",Name:"erdc_blue2gold_BW",RGBPoints:[-1,0,0,0,-.87451,.0742735,.0440331,.230013,-.74902,.125276,.0258685,.415826,-.623529,.143879,.0163031,.591346,-.498039,.212261,.0627855,.705239,-.372549,.306048,.141178,.763636,-.247059,.391537,.232286,.773263,-.121569,.461734,.336633,.708321,.00392157,.54209,.427581,.590007,.129412,.61704,.508623,.460978,.254902,.702703,.579586,.309117,.380392,.790336,.644811,.170397,.505882,.870173,.710733,.117134,.631373,.93656,.781991,.157144,.756863,.965672,.862068,.409836,.882353,.985751,.936296,.714162,1,1,1,.999999]},{ColorSpace:"Lab",Name:"erdc_sapphire2gold_BW",RGBPoints:[-1,.107704,.107708,.107694,-.87451,.1851,.112354,.308554,-.74902,.236782,.114233,.48788,-.623529,.28296,.126187,.639464,-.498039,.344787,.171643,.739713,-.372549,.413325,.242371,.76913,-.247059,.481863,.3131,.719841,-.121569,.550402,.383829,.612222,.00392157,.61894,.454558,.51126,.129412,.687478,.525287,.39993,.254902,.756017,.596016,.289923,.380392,.824555,.666745,.255498,.505882,.892979,.736822,.27696,.631373,.938851,.804966,.351734,.756863,.966491,.874853,.53572,.882353,.982105,.94153,.782579,1,1,1,.999986]},{ColorSpace:"Lab",Name:"erdc_red2purple_BW",RGBPoints:[-1,0,0,0,-.87451,.167793,.0166271,.0431278,-.74902,.262608,.0107595,.0791181,-.623529,.351902,.0101858,.100926,-.498039,.441257,.0160835,.131919,-.372549,.5221,.0555972,.195625,-.247059,.593852,.104294,.310234,-.121569,.654628,.158115,.448486,.00392157,.707443,.220914,.570253,.129412,.749504,.293268,.67897,.254902,.781587,.370517,.779269,.380392,.809951,.451099,.855831,.505882,.84424,.531462,.900451,.631373,.865174,.620901,.91606,.756863,.875041,.714054,.910284,.882353,.880764,.80554,.896276,1,.887572,.887591,.887556]},{ColorSpace:"Lab",Name:"erdc_purple2pink_BW",RGBPoints:[-1,0,0,0,-.87451,.117562,.0291202,.175876,-.74902,.178368,.0458476,.285454,-.623529,.237731,.0680173,.387717,-.498039,.300877,.0956291,.484802,-.372549,.370929,.136858,.554985,-.247059,.449033,.189273,.58863,-.121569,.529971,.245796,.598587,.00392157,.609914,.300643,.610244,.129412,.697079,.351286,.616371,.254902,.785858,.401991,.617376,.380392,.862517,.45745,.64463,.505882,.91359,.525462,.705336,.631373,.932583,.61064,.767412,.756863,.922478,.706966,.817522,.882353,.901302,.803071,.856311,1,.887571,.887591,.887549]},{ColorSpace:"Lab",Name:"erdc_pbj_lin",RGBPoints:[-1,0,0,0,-.87451,.091821,.0611476,.10617,-.74902,.160311,.0900022,.192713,-.623529,.22484,.12126,.272128,-.498039,.291263,.157469,.340828,-.372549,.360015,.200388,.388903,-.247059,.437497,.250058,.387201,-.121569,.512636,.304969,.355955,.00392157,.582603,.360874,.33488,.129412,.655126,.416374,.306351,.254902,.725889,.473329,.279051,.380392,.778125,.537928,.302697,.505882,.815894,.606931,.382431,.631373,.839159,.679308,.497608,.756863,.854748,.751666,.631792,.882353,.869483,.822508,.768592,1,.887572,.887589,.887565]},{ColorSpace:"Lab",Name:"erdc_blue2green_muted",RGBPoints:[-1,.107704,.107708,.107695,-.87451,.141522,.13066,.270741,-.74902,.180123,.146119,.42308,-.623529,.210161,.169674,.551795,-.498039,.239701,.212939,.634969,-.372549,.253916,.282947,.653641,-.247059,.242791,.366933,.608521,-.121569,.226302,.446776,.52693,.00392157,.236237,.514689,.458798,.129412,.274641,.577589,.376069,.254902,.349625,.633993,.288131,.380392,.4437,.683677,.260497,.505882,.536247,.731214,.285424,.631373,.628472,.777128,.349151,.756863,.718259,.819287,.496825,.882353,.804768,.856164,.703299,1,.887571,.887591,.887548]},{ColorSpace:"Lab",Name:"erdc_blue2green_BW",RGBPoints:[-1,363578e-12,0,529374e-11,-.87451,.0539915,.0577948,.212806,-.74902,.0620393,.0758942,.388959,-.623529,.0697499,.102032,.54177,-.498039,.113295,.156156,.64334,-.372549,.152047,.243196,.670283,-.247059,.158096,.344084,.622864,-.121569,.151142,.43922,.532767,.00392157,.17155,.521588,.457719,.129412,.225861,.599141,.363997,.254902,.32328,.67007,.259083,.380392,.442344,.733697,.223754,.505882,.558409,.794941,.257411,.631373,.673875,.854344,.340822,.756863,.787244,.909326,.524717,.882353,.896483,.958063,.775914,1,1,1,.999982]},{ColorSpace:"Lab",Name:"GREEN-WHITE_LINEAR",RGBPoints:[-1,0,0,0,-.87451,0,.062745,0,-.74902,0,.12549,0,-.623529,0,.188235,0,-.498039,0,.25098,0,-.372549,0,.313725,0,-.247059,0,.376471,0,-.121569,.094118,.439216,0,.00392157,.196078,.501961,0,.129412,.294118,.564706,0,.254902,.396078,.627451,0,.380392,.498039,.690196,0,.505882,.6,.752941,.145098,.631373,.701961,.815686,.364706,.756863,.8,.878431,.580392,.882353,.901961,.941176,.796078,1,1,1,1]},{ColorSpace:"Lab",Name:"erdc_green2yellow_BW",RGBPoints:[-1,0,0,0,-.87451,0,.105542,.0603919,-.74902,0,.159454,.104148,-.623529,0,.219502,.15542,-.498039,0,.282276,.203811,-.372549,0,.346331,.235652,-.247059,0,.411765,.235428,-.121569,0,.477177,.217977,.00392157,.0593644,.541635,.21361,.129412,.233081,.604722,.210591,.254902,.369803,.664942,.226536,.380392,.498446,.722367,.288237,.505882,.601929,.782244,.380815,.631373,.703207,.840497,.512134,.756863,.803186,.896433,.674462,.882353,.903834,.950266,.846715,1,1,1,.999981]},{ColorSpace:"Lab",Name:"blue2cyan",RGBPoints:[-1,0,0,0,-.87451,0,.152941,.364706,-.74902,0,.254902,.470588,-.623529,0,.34902,.572549,-.498039,0,.443137,.670588,-.372549,0,.537255,.772549,-.247059,0,.627451,.870588,-.121569,0,.717647,.964706,.00392157,.0784314,.772549,1,.129412,.207843,.858824,1,.254902,.32549,.941176,1,.380392,.45098,1,1,.505882,.560784,1,1,.631373,.662745,1,1,.756863,.760784,1,1,.882353,.870588,1,1,1,1,1,1]},{ColorSpace:"Lab",Name:"erdc_blue2cyan_BW",RGBPoints:[-1,405298e-12,0,59012e-10,-.87451,.0207526,.0740933,.18093,-.74902,0,.121033,.30343,-.623529,0,.166892,.416095,-.498039,0,.216768,.524796,-.372549,.0164769,.275471,.608585,-.247059,.0544527,.344824,.659267,-.121569,.0880643,.419118,.688675,.00392157,.127938,.492556,.720256,.129412,.149476,.566946,.756918,.254902,.188961,.641333,.792122,.380392,.245482,.715336,.827609,.505882,.329216,.786235,.874761,.631373,.453558,.852803,.918466,.756863,.626281,.910493,.954,.882353,.82257,.958709,.980146,1,1,1,.999989]},{ColorSpace:"Lab",Name:"erdc_blue_BW",RGBPoints:[-1,0,0,0,-.87451,.0425591,.0763529,.150682,-.74902,.0569472,.119154,.275403,-.623529,.0635978,.164772,.395427,-.498039,.0774342,.213851,.510014,-.372549,.106815,.267034,.615102,-.247059,.122093,.324649,.720068,-.121569,.160851,.387068,.806956,.00392157,.213754,.453516,.878012,.129412,.26722,.524656,.932436,.254902,.326844,.599279,.968038,.380392,.403403,.674712,.984784,.505882,.499703,.745519,1,.631373,.615055,.813983,1,.756863,.74405,.879228,1,.882353,.877909,.941913,1,1,1,1,.999996]},{ColorSpace:"Lab",Name:"BLUE-WHITE",RGBPoints:[-1,0,0,0,-.87451,0,0,.082353,-.74902,0,0,.168627,-.623529,0,0,.254902,-.498039,0,0,.337255,-.372549,0,0,.423529,-.247059,0,0,.509804,-.121569,0,.101961,.592157,.00392157,0,.203922,.678431,.129412,0,.301961,.764706,.254902,0,.403922,.85098,.380392,0,.505882,.933333,.505882,0,.603922,1,.631373,.254902,.705882,1,.756863,.509804,.807843,1,.882353,.764706,.905882,1,1,1,1,1]},{ColorSpace:"Lab",Name:"erdc_purple_BW",RGBPoints:[-1,4264e-11,0,620844e-12,-.87451,.100579,.0593111,.145666,-.74902,.167794,.0889224,.254953,-.623529,.231446,.123339,.360511,-.498039,.296699,.163027,.461278,-.372549,.363211,.209286,.55306,-.247059,.431136,.260776,.637195,-.121569,.498202,.320012,.705799,.00392157,.567456,.380459,.778091,.129412,.629381,.445284,.8448,.254902,.688373,.517374,.895694,.380392,.74891,.590906,.93976,.505882,.805017,.667956,.977626,.631373,.850914,.752618,.992396,.756863,.89724,.838454,.994093,.882353,.948461,.922603,.994449,1,1,1,.999967]},{ColorSpace:"Lab",Name:"erdc_magenta_BW",RGBPoints:[-1,0,0,254023e-10,-.87451,.128696,.0456782,.11635,-.74902,.228133,.0476299,.201452,-.623529,.327273,.0374065,.282107,-.498039,.420953,.0408166,.35709,-.372549,.511562,.0642203,.430511,-.247059,.599552,.102686,.504257,-.121569,.684646,.150536,.579429,.00392157,.765817,.205978,.656062,.129412,.839176,.27229,.731807,.254902,.89536,.357594,.797309,.380392,.930238,.457825,.846984,.505882,.945921,.564536,.880571,.631373,.948995,.670753,.902279,.756863,.947124,.772819,.918171,.882353,.947265,.869424,.934352,1,.954719,.95475,.954726]},{ColorSpace:"Lab",Name:"magenta",RGBPoints:[-1,0,0,0,-.87451,.364706,0,.152941,-.74902,.470588,0,.254902,-.623529,.572549,0,.34902,-.498039,.670588,0,.443137,-.372549,.772549,0,.537255,-.247059,.870588,0,.627451,-.121569,.964706,0,.717647,.00392157,1,.0784314,.772549,.129412,1,.207843,.858824,.254902,1,.32549,.941176,.380392,1,.45098,1,.505882,1,.560784,1,.631373,1,.662745,1,.756863,1,.760784,1,.882353,1,.870588,1,1,1,1,1]},{ColorSpace:"Lab",Name:"RED-PURPLE",RGBPoints:[-1,0,0,0,-.87451,.188235,0,.007843,-.74902,.345098,0,.035294,-.623529,.439216,0,.098039,-.498039,.533333,0,.152941,-.372549,.627451,.015686,.211765,-.247059,.721569,.031373,.266667,-.121569,.8,.047059,.329412,.00392157,.862745,.047059,.403922,.129412,.941176,.062745,.466667,.254902,.988235,.078431,.54902,.380392,.988235,.141176,.643137,.505882,.988235,.25098,.729412,.631373,.988235,.376471,.811765,.756863,.988235,.54902,.886275,.882353,.988235,.752941,.952941,1,.996078,.996078,.996078]},{ColorSpace:"Lab",Name:"erdc_red_BW",RGBPoints:[-1,0,0,0,-.87451,.147204,.0480135,.0401815,-.74902,.253411,.0617478,.0301333,-.623529,.356059,.0746331,.0446897,-.498039,.457731,.0934935,.0636931,-.372549,.557199,.122714,.0860013,-.247059,.665179,.144238,.105585,-.121569,.763833,.187056,.138326,.00392157,.847035,.254558,.189407,.129412,.905663,.345937,.258215,.254902,.941431,.447111,.346277,.380392,.962608,.546927,.457571,.505882,.987833,.637276,.569944,.631373,.994202,.732176,.687958,.756863,.993304,.826268,.800567,.882353,.994413,.917205,.906393,1,1,1,.999979]},{ColorSpace:"Lab",Name:"RED_TEMPERATURE",RGBPoints:[-1,0,0,0,-.87451,.090196,0,0,-.74902,.180392,0,0,-.623529,.270588,0,0,-.498039,.360784,0,0,-.372549,.45098,0,0,-.247059,.545098,0,0,-.121569,.635294,0,0,.00392157,.72549,.058824,0,.129412,.815686,.176471,0,.254902,.905882,.294118,0,.380392,1,.411765,0,.505882,1,.533333,.027451,.631373,1,.65098,.27451,.756863,1,.768627,.521569,.882353,1,.886275,.768627,1,1,1,1]},{ColorSpace:"Lab",Name:"erdc_orange_BW",RGBPoints:[-1,0,0,253806e-10,-.87451,.135871,.0593824,0,-.74902,.224328,.0907216,0,-.623529,.318083,.119647,0,-.498039,.414443,.150246,0,-.372549,.511077,.184884,0,-.247059,.605501,.226033,0,-.121569,.695274,.275491,0,.00392157,.777826,.334445,0,.129412,.851498,.402441,0,.254902,.915899,.47759,602975e-9,.380392,.971984,.557882,.0361443,.505882,1,.641287,.135967,.631373,1,.725198,.27997,.756863,1,.808205,.438135,.882353,1,.89306,.587036,1,1,.977928,.721599]},{ColorSpace:"Lab",Name:"heated_object",RGBPoints:[-1,0,0,0,-.87451,.34902,.0862745,0,-.74902,.45098,.172549,0,-.623529,.52549,.231373,0,-.498039,.580392,.278431,0,-.372549,.623529,.313725,0,-.247059,.670588,.352941,0,-.121569,.717647,.392157,0,.00392157,.772549,.439216,0,.129412,.839216,.494118,0,.254902,.901961,.541176,0,.380392,.968627,.6,0,.505882,1,.658824,0,.631373,1,.721569,0,.756863,1,.827451,.298039,.882353,1,.976471,.72549,1,1,1,1]},{ColorSpace:"Lab",Name:"erdc_gold_BW",RGBPoints:[-1,0,0,190933e-10,-.87451,.128363,.0636265,0,-.74902,.193795,.111057,0,-.623529,.25976,.15987,0,-.498039,.328546,.210589,0,-.372549,.399726,.26332,0,-.247059,.472969,.318261,0,-.121569,.546245,.375827,0,.00392157,.61745,.436719,0,.129412,.685545,.501113,0,.254902,.749578,.568799,0,.380392,.80962,.6394,0,.505882,.865572,.712699,.10257,.631373,.917709,.787569,.233665,.756863,.966914,.863138,.369608,.882353,1,.939405,.496104,1,.999225,1,.612275]},{ColorSpace:"Lab",Name:"erdc_brown_BW",RGBPoints:[-1,33216e-11,0,483629e-11,-.87451,.14693,.0518172,0,-.74902,.225806,.0814996,0,-.623529,.301681,.111452,0,-.498039,.370487,.150664,0,-.372549,.43108,.199477,0,-.247059,.4849,.255107,0,-.121569,.536798,.313486,0,.00392157,.59286,.371167,0,.129412,.653119,.428135,0,.254902,.714589,.485917,.0379541,.380392,.774667,.54565,.116634,.505882,.831222,.608047,.183895,.631373,.880305,.674199,.260298,.756863,.922314,.742472,.367086,.882353,.959408,.811222,.497258,1,.993548,.875183,.622093]},{ColorSpace:"Lab",Name:"copper_Matlab",RGBPoints:[-1,0,0,0,-.87451,.0784314,.0501961,.0313725,-.74902,.156863,.100392,.0627451,-.623529,.235294,.150588,.0941176,-.498039,.313725,.200784,.12549,-.372549,.392157,.25098,.156863,-.247059,.470588,.301176,.188235,-.121569,.54902,.351373,.219608,.00392157,.627451,.401569,.25098,.129412,.705882,.451765,.282353,.254902,.784314,.501961,.313725,.380392,.862745,.552157,.345098,.505882,.941176,.602353,.376471,.631373,1,.652549,.407843,.756863,1,.702745,.439216,.882353,1,.752941,.470588,1,1,.8,.5]},{ColorSpace:"Lab",Name:"pink_Matlab",RGBPoints:[-1,0,0,0,-.87451,.312416,.204524,.204524,-.74902,.441822,.289241,.289241,-.623529,.54112,.354246,.354246,-.498039,.624831,.409048,.409048,-.372549,.698582,.45733,.45733,-.247059,.764404,.502282,.500979,-.121569,.791292,.591516,.54112,.00392157,.817297,.66895,.578481,.129412,.842499,.738308,.613572,.254902,.866968,.801687,.646762,.380392,.890766,.86041,.678329,.505882,.913944,.913944,.711254,.631373,.936549,.936549,.79459,.756863,.958621,.958621,.869979,.882353,.980196,.980196,.939336,1,1,1,1]},{ColorSpace:"Lab",Name:"bone_Matlab",RGBPoints:[-1,0,0,0,-.87451,.054902,.054902,.075817,-.74902,.109804,.109804,.151634,-.623529,.164706,.164706,.227451,-.498039,.219608,.219608,.303268,-.372549,.27451,.27451,.379085,-.247059,.329412,.329902,.454412,-.121569,.384314,.405719,.509314,.00392157,.439216,.481536,.564216,.129412,.494118,.557353,.619118,.254902,.54902,.63317,.67402,.380392,.603922,.708987,.728922,.505882,.660294,.783824,.783824,.631373,.746569,.838725,.838725,.756863,.832843,.893627,.893627,.882353,.919118,.948529,.948529,1,1,1,1]},{ColorSpace:"Lab",Name:"gray_Matlab",RGBPoints:[-1,0,0,0,-.87451,.0627451,.0627451,.0627451,-.74902,.12549,.12549,.12549,-.623529,.188235,.188235,.188235,-.498039,.25098,.25098,.25098,-.372549,.313725,.313725,.313725,-.247059,.376471,.376471,.376471,-.121569,.439216,.439216,.439216,.00392157,.501961,.501961,.501961,.129412,.564706,.564706,.564706,.254902,.627451,.627451,.627451,.380392,.690196,.690196,.690196,.505882,.752941,.752941,.752941,.631373,.815686,.815686,.815686,.756863,.878431,.878431,.878431,.882353,.941176,.941176,.941176,1,1,1,1]},{ColorSpace:"Lab",Name:"Purples",RGBPoints:[-1,.247059,0,.490196,-.87451,.288397,.07677,.525629,-.74902,.32975,.153587,.561092,-.623529,.373057,.236263,.600461,-.498039,.416363,.319,.639923,-.372549,.459669,.405613,.685198,-.247059,.503345,.491534,.730058,-.121569,.562399,.54862,.757616,.00392157,.621453,.606075,.785544,.129412,.680508,.674971,.824914,.254902,.739562,.743406,.863899,.380392,.798616,.800492,.893426,.505882,.85684,.856655,.922491,.631373,.898178,.894056,.942176,.756863,.938654,.930919,.961646,.882353,.964245,.958478,.977393,1,.988235,.984314,.992157]},{ColorSpace:"Lab",Name:"Blues",RGBPoints:[-1,.031373,.188235,.419608,-.87451,.031373,.253195,.516063,-.74902,.031757,.318139,.612149,-.623529,.080969,.38113,.661361,-.498039,.130427,.444152,.710327,-.372549,.195386,.509112,.743791,-.247059,.260715,.573841,.777209,-.121569,.341423,.628958,.808704,.00392157,.422745,.684075,.839892,.129412,.523137,.739193,.861546,.254902,.622684,.793464,.883429,.380392,.701423,.826928,.910988,.505882,.778685,.8603,.937993,.631373,.825928,.891795,.953741,.756863,.87328,.923291,.969489,.882353,.922491,.954787,.985236,1,.968627,.984314,1]},{ColorSpace:"Lab",Name:"Greens",RGBPoints:[-1,0,.266667,.105882,-.87451,0,.347374,.139346,-.74902,538e-6,.427912,.172933,-.623529,.069435,.486967,.222145,-.498039,.138178,.546082,.271326,-.372549,.197232,.609073,.31857,-.247059,.257255,.671742,.365859,-.121569,.357647,.720953,.415071,.00392157,.45767,.769919,.465021,.129412,.546251,.811257,.537855,.254902,.634295,.852211,.610688,.380392,.709097,.883706,.683522,.505882,.78316,.914833,.755894,.631373,.842215,.938454,.818885,.756863,.899977,.961538,.880692,.882353,.935409,.975317,.92203,1,.968627,.988235,.960784]},{ColorSpace:"Lab",Name:"PuBu",RGBPoints:[-1,.301961,0,.294118,-.87451,.404321,.029527,.390573,-.74902,.50599,.059592,.486782,-.623529,.519769,.158016,.551742,-.498039,.533456,.256194,.616301,-.372549,.54133,.33887,.655671,-.247059,.54902,.421592,.695087,-.121569,.54902,.506236,.736424,.00392157,.550127,.590573,.777701,.129412,.585559,.665375,.81707,.254902,.622145,.739023,.855825,.380392,.687105,.784298,.879446,.505882,.752065,.829758,.903253,.631373,.817024,.87897,.930811,.756863,.880907,.927213,.957832,.882353,.926182,.958708,.975548,1,.968627,.988235,.992157]},{ColorSpace:"Lab",Name:"BuPu",RGBPoints:[-1,.007843,.219608,.345098,-.87451,.01178,.286536,.449427,-.74902,.015702,.35328,.553479,-.623529,.01767,.396586,.622376,-.498039,.021115,.4402,.690688,-.372549,.11757,.503191,.722184,-.247059,.214625,.565859,.753633,-.121569,.336671,.615071,.78316,.00392157,.457978,.663975,.812503,.129412,.556401,.703345,.836125,.254902,.65421,.742714,.859669,.380392,.736886,.782084,.881323,.505882,.81827,.821638,.903068,.631373,.873387,.864944,.92669,.756863,.927536,.907605,.949988,.882353,.964937,.9391,.967705,1,1,.968627,.984314]},{ColorSpace:"Lab",Name:"BuGn",RGBPoints:[-1,.031373,.25098,.505882,-.87451,.031373,.329719,.590527,-.74902,.031911,.408397,.674787,-.623529,.100807,.479262,.710219,-.498039,.169704,.550219,.745744,-.372549,.238601,.62699,.787082,-.247059,.307958,.703114,.826759,-.121569,.39654,.752326,.797232,.00392157,.485121,.801046,.767705,.129412,.573702,.83451,.738178,.254902,.661592,.867743,.711034,.380392,.732457,.895302,.74253,.505882,.801845,.922307,.774579,.631373,.841215,.938055,.817885,.756863,.880907,.95391,.861084,.882353,.926182,.971626,.902422,1,.968627,.988235,.941176]},{ColorSpace:"Lab",Name:"GnBu",RGBPoints:[-1,0,.266667,.105882,-.87451,0,.347374,.139346,-.74902,538e-6,.427912,.172933,-.623529,.069435,.486967,.222145,-.498039,.138178,.546175,.272095,-.372549,.197232,.615071,.368551,-.247059,.256609,.683276,.464867,-.121569,.329443,.722645,.555417,.00392157,.403137,.762138,.645413,.129412,.503529,.805444,.718247,.254902,.603922,.848597,.790465,.380392,.704314,.887966,.847551,.505882,.802307,.926321,.903714,.631373,.851519,.944037,.941115,.756863,.899977,.961538,.976901,.882353,.935409,.975317,.984775,1,.968627,.988235,.992157]},{ColorSpace:"Lab",Name:"GnBuPu",RGBPoints:[-1,.003922,.27451,.211765,-.87451,.003922,.349312,.280661,-.74902,.003937,.423852,.349773,-.623529,.005905,.46519,.446228,-.498039,.009443,.506344,.542837,-.372549,.111803,.535871,.649135,-.247059,.214025,.565859,.753633,-.121569,.310481,.615071,.78316,.00392157,.407797,.663975,.812503,.129412,.531811,.703345,.836125,.254902,.65421,.742714,.859669,.380392,.736886,.782084,.881323,.505882,.81827,.821176,.902884,.631373,.873387,.854641,.922568,.756863,.927536,.888535,.942361,.882353,.964937,.929873,.964014,1,1,.968627,.984314]},{ColorSpace:"Lab",Name:"BuGnYl",RGBPoints:[-1,.031373,.113725,.345098,-.87451,.088458,.159,.463206,-.74902,.145052,.204567,.5807,-.623529,.139146,.287243,.620069,-.498039,.13318,.370196,.659562,-.372549,.123337,.470588,.706805,-.247059,.115386,.570335,.753126,-.121569,.186251,.643168,.761,.00392157,.258716,.71514,.768074,.129412,.380761,.760415,.750358,.254902,.503576,.806075,.732795,.380392,.645306,.861192,.719016,.505882,.783899,.91511,.705606,.631373,.858701,.944637,.6997,.756863,.931349,.973303,.698424,.882353,.966782,.987082,.777163,1,1,1,.85098]},{ColorSpace:"Lab",Name:"PuRd",RGBPoints:[-1,.286275,0,.415686,-.87451,.38273,.001968,.441276,-.74902,.479231,.003922,.466774,-.623529,.581592,.003922,.480554,-.498039,.683799,.00549,.494887,-.372549,.776317,.105882,.544098,-.247059,.867866,.206321,.592618,-.121569,.919047,.308681,.612303,.00392157,.968812,.411226,.632603,.129412,.974717,.519493,.671972,.254902,.980546,.626451,.71065,.380392,.984483,.701253,.732303,.505882,.988328,.77504,.755617,.631373,.990296,.828189,.812703,.756863,.992372,.880907,.869035,.882353,.996309,.926182,.912341,1,1,.968627,.952941]},{ColorSpace:"Lab",Name:"RdPu",RGBPoints:[-1,.403922,0,.121569,-.87451,.500377,0,.192434,-.74902,.596909,277e-6,.263037,-.623529,.703206,.035709,.300438,-.498039,.808612,.071296,.338854,-.372549,.857824,.116571,.441215,-.247059,.905513,.163552,.54293,-.121569,.889765,.281661,.617732,.00392157,.873156,.39897,.691611,.129412,.82985,.491488,.736886,.254902,.789081,.583237,.781853,.380392,.810734,.656071,.819254,.505882,.833126,.729181,.85684,.631373,.870527,.80792,.898178,.756863,.907605,.884398,.938331,.882353,.9391,.921799,.958016,1,.968627,.956863,.976471]},{ColorSpace:"Lab",Name:"Oranges",RGBPoints:[-1,.498039,.152941,.015686,-.87451,.57481,.182468,.013718,-.74902,.651765,.212042,.011734,-.623529,.752157,.247474,.007797,-.498039,.851719,.283368,.004475,-.372549,.898962,.348328,.039908,-.247059,.945652,.413426,.076401,-.121569,.969273,.484291,.157109,.00392157,.992157,.554971,.238185,.129412,.992157,.619931,.330704,.254902,.992157,.684967,.423837,.380392,.992157,.751895,.532103,.505882,.992249,.817716,.639354,.631373,.994218,.861023,.725967,.756863,.996186,.903576,.810965,.882353,.998155,.933103,.868051,1,1,.960784,.921569]},{ColorSpace:"Lab",Name:"Reds",RGBPoints:[-1,.403922,0,.05098,-.87451,.525967,.029527,.066728,-.74902,.647643,.058962,.082476,-.623529,.722445,.076678,.098224,-.498039,.797186,.095194,.114187,-.372549,.868051,.164091,.143714,-.247059,.937809,.233541,.173933,-.121569,.96143,.326059,.232987,.00392157,.984375,.418147,.292657,.129412,.986344,.496886,.371396,.254902,.988235,.575702,.450673,.380392,.988235,.656409,.543191,.505882,.98842,.736747,.635894,.631373,.992357,.809581,.732349,.756863,.996186,.880692,.826759,.882353,.998155,.92203,.885813,1,1,.960784,.941176]},{ColorSpace:"Lab",Name:"RdOr",RGBPoints:[-1,.498039,0,0,-.87451,.6004,0,0,-.74902,.702514,738e-6,477e-6,-.623529,.773379,.095225,.061499,-.498039,.843875,.189865,.12283,-.372549,.891119,.294195,.203537,-.247059,.937855,.397924,.283137,-.121569,.963445,.476663,.316601,.00392157,.988297,.555771,.351665,.129412,.990265,.646321,.436309,.254902,.992157,.735256,.519646,.380392,.992157,.784468,.570827,.505882,.992249,.833218,.623483,.631373,.994218,.872587,.706159,.756863,.996186,.911419,.788189,.882353,.998155,.940946,.859054,1,1,.968627,.92549]},{ColorSpace:"Lab",Name:"BrOrYl",RGBPoints:[-1,.4,.145098,.023529,-.87451,.500392,.174625,.019592,-.74902,.600784,.204291,.015656,-.623529,.701176,.251534,.011719,-.498039,.800984,.299146,.008397,-.372549,.863975,.370012,.043829,-.247059,.926321,.441107,.0794,-.121569,.961753,.521815,.120738,.00392157,.996078,.602645,.163122,.129412,.996078,.68729,.237924,.254902,.996078,.771011,.314879,.380392,.996078,.832034,.444798,.505882,.996171,.892042,.572595,.631373,.998139,.931411,.65724,.756863,1,.969489,.741669,.882353,1,.985236,.822376,1,1,1,.898039]},{ColorSpace:"Lab",Name:"RdOrYl",RGBPoints:[-1,.501961,0,.14902,-.87451,.622038,0,.14902,-.74902,.741761,4e-4,.148866,-.623529,.816563,.05158,.129181,-.498039,.890965,.10356,.110235,-.372549,.940177,.205921,.137793,-.247059,.988281,.308789,.165536,-.121569,.99025,.432803,.200969,.00392157,.992218,.555217,.236278,.129412,.994187,.628051,.267774,.254902,.996078,.701038,.301269,.380392,.996078,.777809,.383945,.505882,.996171,.852826,.466621,.631373,.998139,.892195,.549296,.756863,1,.931349,.632188,.882353,1,.966782,.7188,1,1,1,.8]},{ColorSpace:"Lab",Name:"CIELab_blue2red",RGBPoints:[-1,0,.6,.74902,1,.76863,.46667,.34118]},{ColorSpace:"Lab",Name:"blue2yellow",RGBPoints:[-1,0,0,1,0,.5,.5,.5,1,1,1,0]},{ColorSpace:"Lab",Name:"erdc_blue2gold",RGBPoints:[-1,.175119,.0438468,1,-.874016,.22383,.159771,.94557,-.748031,.27254,.233611,.891216,-.622047,.321251,.296526,.836857,-.496063,.369962,.354296,.782359,-.370079,.418672,.409139,.72754,-.244094,.467383,.462152,.672148,-.11811,.51609,.51396,.615825,.00787402,.572863,.55452,.559172,.133858,.630269,.593822,.517729,.259843,.689588,.624668,.47446,.385827,.745394,.656113,.428638,.511811,.798624,.688104,.379105,.637795,.849926,.720593,.323834,.76378,.899765,.753543,.258657,.889764,.948487,.78692,.171778,1,.990413,.816451,.00729848]},{ColorSpace:"Lab",Name:"erdc_blue2yellow",RGBPoints:[-1,.0830122,0,.495617,-.87451,.141973,.0551288,.57363,-.74902,.193048,.110258,.604561,-.623529,.234231,.165386,.57643,-.498039,.275413,.220515,.548299,-.372549,.316596,.275644,.520169,-.247059,.357778,.330773,.492038,-.121569,.398961,.385901,.463908,.00392157,.449929,.438487,.426815,.129412,.511572,.488299,.379944,.254902,.581222,.53603,.325741,.380392,.650871,.583761,.271538,.505882,.720521,.631493,.217335,.631373,.79017,.679224,.163132,.756863,.85982,.726955,.108929,.882353,.910254,.774159,.14112,1,.927513,.81759,.306289]},{ColorSpace:"Lab",Name:"erdc_cyan2orange",RGBPoints:[-1,.0471513,.213874,.414329,-.87451,.0674702,.256648,.439027,-.74902,.0959957,.299331,.462089,-.623529,.132428,.341872,.483212,-.498039,.188743,.38277,.500597,-.372549,.268511,.420229,.512179,-.247059,.352945,.455602,.519101,-.121569,.43893,.489368,.521538,.00392157,.522445,.522495,.522436,.129412,.600089,.555682,.53205,.254902,.67988,.587981,.539163,.380392,.761011,.619586,.544439,.505882,.84278,.650741,.548567,.631373,.910713,.687347,.557822,.756863,.952232,.734972,.577775,.882353,.975642,.789858,.604868,1,.990752,.843643,.632857]},{ColorSpace:"Lab",Name:"erdc_purple2green",RGBPoints:[-1,.235006,.0483128,.530899,-.87451,.302968,.108419,.552391,-.74902,.360241,.166059,.569502,-.623529,.406746,.226782,.579373,-.498039,.444073,.28964,.582094,-.372549,.473648,.353774,.577947,-.247059,.497636,.418154,.567911,-.121569,.519086,.481741,.553968,.00392157,.542884,.542914,.542875,.129412,.566303,.603989,.527499,.254902,.595218,.662965,.516857,.380392,.628641,.720701,.510673,.505882,.665373,.777849,.508165,.631373,.704182,.834921,.508303,.756863,.743846,.892328,.50999,.882353,.783158,.950422,.512181,1,.818617,1,.513888]},{ColorSpace:"Lab",Name:"erdc_purple2green_dark",RGBPoints:[-1,.107656,0,.428682,-.87451,.1924,0,.449799,-.74902,.255118,.0648939,.466726,-.623529,.304256,.133066,.476703,-.498039,.343202,.19716,.479793,-.372549,.373876,.260353,.476241,-.247059,.398497,.322872,.466953,-.121569,.420016,.384252,.453785,.00392157,.44319,.443216,.443186,.129412,.465553,.502139,.428233,.254902,.492959,.559151,.417591,.380392,.524654,.615092,.411016,.505882,.55959,.670583,.40779,.631373,.596614,.726102,.406948,.756863,.634544,.782032,.407439,.882353,.672183,.838703,.408237,1,.706131,.892759,.408452]},{ColorSpace:"Lab",Name:"coolwarm",RGBPoints:[-1,.229806,.298718,.753683,-.875,.303869,.406535,.844959,-.75,.383013,.509419,.917388,-.625,.466667,.604563,.968155,-.5,.552953,.688929,.995376,-.375,.639176,.7596,.998151,-.25,.722193,.813953,.976575,-.125,.798692,.849786,.931689,0,.865395,.86541,.865396,.125,.924128,.827385,.774508,.25,.958853,.769768,.678008,.375,.969954,.694267,.579375,.5,.958003,.602842,.481776,.625,.923945,.497309,.38797,.75,.869187,.378313,.300267,.875,.795632,.241284,.220526,1,.705673,.0155562,.150233]},{ColorSpace:"Lab",Name:"BuRd",RGBPoints:[-1,.019608,.188235,.380392,-.87451,.088504,.321107,.564937,-.74902,.163399,.444983,.697501,-.623529,.247059,.555709,.754095,-.498039,.420684,.676432,.818685,-.372549,.606459,.789773,.880277,-.247059,.761476,.868512,.924567,-.121569,.878047,.925721,.951942,.00392157,.969089,.966474,.964937,.129412,.983852,.897578,.846828,.254902,.982468,.800692,.706113,.380392,.960323,.66782,.536332,.505882,.894579,.503806,.399769,.631373,.81707,.33218,.281046,.756863,.728489,.155017,.197386,.882353,.576932,.055363,.14925,1,.403922,0,.121569]},{ColorSpace:"Lab",Name:"Spectral_lowBlue",RGBPoints:[-1,.368627,.309804,.635294,-.87451,.260361,.450058,.70173,-.74902,.248058,.591311,.717186,-.623529,.376009,.734025,.658132,-.498039,.537947,.814764,.64506,-.372549,.702345,.879585,.636678,-.247059,.84752,.938639,.607151,-.121569,.940408,.976163,.656055,.00392157,.999923,.997616,.745021,.129412,.997463,.921338,.61707,.254902,.995002,.824606,.499885,.380392,.992541,.701576,.39654,.505882,.973472,.547405,.318108,.631373,.937793,.398539,.270127,.756863,.861515,.282891,.299654,.882353,.746482,.144637,.288812,1,.619608,.003922,.258824]},{ColorSpace:"Lab",Name:"GnRP",RGBPoints:[-1,0,.266667,.105882,-.87451,.066436,.394617,.174779,-.74902,.168858,.524567,.25767,-.623529,.323875,.657439,.361015,-.498039,.504883,.772318,.506344,-.372549,.678431,.870127,.654902,-.247059,.803922,.921799,.780392,-.121569,.897116,.951942,.882814,.00392157,.967397,.965936,.967474,.129412,.928028,.879815,.930565,.254902,.866052,.780777,.882891,.380392,.77501,.665129,.821376,.505882,.675663,.537024,.737024,.631373,.57847,.396155,.645982,.756863,.492349,.223914,.547559,.882353,.375548,.096886,.423299,1,.25098,0,.294118]},{ColorSpace:"Lab",Name:"GYPi",RGBPoints:[-1,.152941,.392157,.098039,-.87451,.246444,.505344,.117724,-.74902,.351942,.614533,.161399,-.623529,.474971,.717878,.240138,-.498039,.611995,.811226,.392849,-.372549,.746328,.893118,.565321,-.247059,.859516,.94233,.747405,-.121569,.928105,.96386,.875663,.00392157,.969089,.966859,.968012,.129412,.983852,.910265,.948328,.254902,.979239,.833218,.914648,.380392,.949712,.729873,.862976,.505882,.905652,.58293,.763552,.631373,.85521,.410073,.652211,.756863,.793695,.183699,.531642,.882353,.683737,.063899,.420761,1,.556863,.003922,.321569]},{ColorSpace:"Lab",Name:"GnYlRd",RGBPoints:[-1,0,.407843,.215686,-.87451,.063975,.525952,.277201,-.74902,.177932,.633064,.332718,-.623529,.364937,.724106,.379469,-.498039,.527951,.797155,.40223,-.372549,.678431,.862822,.433449,-.247059,.803922,.916955,.514648,-.121569,.909419,.961861,.625067,.00392157,.999923,.997616,.745021,.129412,.997463,.921338,.61707,.254902,.995002,.824606,.499885,.380392,.992541,.701576,.39654,.505882,.973472,.547405,.318108,.631373,.939023,.389927,.245521,.756863,.867666,.239831,.176624,.882353,.762399,.110727,.151326,1,.647059,0,.14902]},{ColorSpace:"Lab",Name:"GBBr",RGBPoints:[-1,0,.235294,.188235,-.87451,.002461,.338639,.301423,-.74902,.055902,.448981,.417609,-.623529,.183852,.56955,.538178,-.498039,.357785,.700115,.660746,-.372549,.540177,.819531,.77624,-.247059,.714879,.890888,.864821,-.121569,.851134,.934564,.922645,.00392157,.960861,.959785,.95694,.129412,.963322,.927797,.83391,.254902,.939946,.868897,.68935,.380392,.883353,.775394,.517109,.505882,.808074,.625836,.324106,.631373,.717647,.476355,.15494,.756863,.592157,.358247,.06882,.882353,.458593,.26436,.031142,1,.329412,.188235,.019608]},{ColorSpace:"Lab",Name:"PuOr",RGBPoints:[-1,.498039,.231373,.031373,-.87451,.62599,.30273,.026451,-.74902,.746943,.387082,.037524,-.623529,.85767,.490427,.071972,-.498039,.936409,.617762,.236371,-.372549,.992695,.743099,.43291,-.247059,.995156,.841523,.63714,-.121569,.985313,.913802,.813687,.00392157,.966244,.966398,.967705,.129412,.889965,.89504,.938178,.254902,.806151,.804306,.894656,.380392,.712649,.688658,.833141,.505882,.594233,.554325,.744637,.631373,.474894,.404229,.652364,.756863,.366628,.217224,.563783,.882353,.266436,.089965,.434833,1,.176471,0,.294118]},{ColorSpace:"Lab",Name:"PRGn",RGBPoints:[-1,.25098,0,.294118,-.87451,.383852,.103345,.431911,-.74902,.497732,.234679,.55371,-.623529,.583852,.40692,.652134,-.498039,.681968,.545175,.742561,-.372549,.7807,.672357,.825221,-.247059,.871742,.788005,.886736,-.121569,.930488,.885198,.932872,.00392157,.966321,.968089,.965859,.129412,.892503,.950865,.877278,.254902,.796078,.91857,.772549,.380392,.670588,.866897,.647059,.505882,.493195,.765398,.496655,.631373,.314187,.649135,.354556,.756863,.15917,.516263,.251211,.882353,.062284,.386621,.170473,1,0,.266667,.105882]},{ColorSpace:"Lab",Name:"PiYG",RGBPoints:[-1,.556863,.003922,.321569,-.87451,.692195,.067897,.427374,-.74902,.797539,.197847,.539177,-.623529,.859054,.424221,.659746,-.498039,.908574,.592618,.770319,-.372549,.951557,.736332,.866205,-.247059,.981084,.839677,.917878,-.121569,.98293,.913802,.949558,.00392157,.96732,.968474,.965629,.129412,.92549,.963552,.869666,.254902,.852441,.939254,.736025,.380392,.739254,.890042,.553941,.505882,.60323,.805536,.382238,.631373,.467282,.711419,.235217,.756863,.344252,.608074,.156478,.882353,.2406,.49827,.116494,1,.152941,.392157,.098039]},{ColorSpace:"Lab",Name:"OrPu",RGBPoints:[-1,.176471,0,.294118,-.87451,.272434,.095963,.444214,-.74902,.373395,.228912,.56932,-.623529,.481661,.415917,.657901,-.498039,.601922,.562937,.750481,-.372549,.718493,.695886,.836986,-.247059,.811995,.811534,.898501,-.121569,.894733,.8995,.940023,.00392157,.969166,.966859,.963629,.129412,.98639,.910265,.803691,.254902,.995002,.835371,.624375,.380392,.992541,.736947,.420146,.505882,.931949,.609458,.224221,.631373,.85075,.483968,.069819,.756863,.740023,.380623,.035371,.882353,.617993,.29827,.026759,1,.498039,.231373,.031373]},{ColorSpace:"Lab",Name:"BrBG",RGBPoints:[-1,.329412,.188235,.019608,-.87451,.467205,.269435,.031911,-.74902,.6,.365629,.074202,-.623529,.72549,.483737,.160323,-.498039,.812995,.635832,.336409,-.372549,.88689,.781238,.527874,-.247059,.943483,.87474,.700115,-.121569,.963168,.929796,.841599,.00392157,.957247,.959938,.959554,.129412,.84406,.932872,.920185,.254902,.70396,.886428,.859285,.380392,.529258,.815071,.770704,.505882,.346251,.691811,.653057,.631373,.175855,.562015,.530642,.756863,.047905,.441446,.410073,.882353,.002307,.33218,.294348,1,0,.235294,.188235]},{ColorSpace:"Lab",Name:"GyRd",RGBPoints:[-1,.101961,.101961,.101961,-.87451,.227451,.227451,.227451,-.74902,.359939,.359939,.359939,-.623529,.502653,.502653,.502653,-.498039,.631373,.631373,.631373,-.372549,.749865,.749865,.749865,-.247059,.843368,.843368,.843368,-.121569,.926105,.926105,.926105,.00392157,.999846,.997232,.995694,.129412,.994925,.908651,.857901,.254902,.982468,.800692,.706113,.380392,.960323,.66782,.536332,.505882,.894579,.503806,.399769,.631373,.81707,.33218,.281046,.756863,.728489,.155017,.197386,.882353,.576932,.055363,.14925,1,.403922,0,.121569]},{ColorSpace:"Lab",Name:"erdc_divHi_purpleGreen",RGBPoints:[-1,.297553,0,.489074,-.87451,.40259,.151146,.567754,-.74902,.516038,.284843,.658231,-.623529,.629783,.423646,.750938,-.498039,.735198,.563697,.835956,-.372549,.82408,.695541,.903582,-.247059,.889091,.807454,.944862,-.121569,.92334,.886917,.951839,.00392157,.921045,.921084,.921003,.129412,.877324,.907455,.845381,.254902,.797649,.849713,.734695,.380392,.691646,.75964,.600532,.505882,.568981,.649159,.453807,.631373,.438945,.529756,.304259,.756863,.30973,.412001,.158303,.882353,.187078,.305111,.00251458,1,.101655,.220836,0]},{ColorSpace:"Lab",Name:"erdc_divHi_purpleGreen_dim",RGBPoints:[-1,.404088,.131038,.592767,-.87451,.486469,.230957,.651243,-.74902,.575165,.339335,.717723,-.623529,.662741,.454332,.784263,-.498039,.742071,.570213,.842918,-.372549,.806935,.678992,.886227,-.247059,.852219,.771315,.90763,-.121569,.873345,.837327,.901572,.00392157,.866783,.86682,.866745,.129412,.82839,.858225,.796812,.254902,.762578,.814287,.700202,.380392,.676429,.744229,.585735,.505882,.577033,.65732,.461526,.631373,.47128,.562476,.33476,.756863,.365461,.467957,.21076,.882353,.264758,.381138,.0878313,1,.182591,.312249,0]},{ColorSpace:"Lab",Name:"erdc_divLow_icePeach",RGBPoints:[-1,.480048,.817441,.998056,-.87451,.425898,.726921,.883187,-.74902,.366682,.629445,.761936,-.623529,.308756,.531002,.640217,-.498039,.258021,.43705,.523433,-.372549,.219244,.352381,.416348,-.247059,.195127,.281032,.322979,-.121569,.186286,.22627,.246525,.00392157,.192352,.19236,.192364,.129412,.255927,.214469,.191756,.254902,.340459,.254426,.206666,.380392,.444655,.309315,.234029,.505882,.565353,.376004,.270969,.631373,.697917,.450748,.314293,.756863,.836657,.529064,.360227,.882353,.972695,.614884,.413123,1,1,.705904,.472699]},{ColorSpace:"Lab",Name:"erdc_divLow_purpleGreen",RGBPoints:[-1,.956034,.666487,.952663,-.87451,.874457,.572698,.936352,-.74902,.753465,.488253,.909063,-.623529,.63309,.413507,.763833,-.498039,.514491,.345878,.620015,-.372549,.405008,.288141,.484376,-.247059,.311388,.241986,.363556,-.121569,.238722,.209044,.263449,.00392157,.192352,.192366,.192362,.129412,.200379,.233201,.168618,.254902,.230151,.291737,.165227,.380392,.279481,.366076,.178607,.505882,.344927,.453267,.205703,.631373,.421554,.549449,.242643,.756863,.503334,.649999,.284377,.882353,.583497,.749672,.324969,1,.650705,.837228,.356264]},{ColorSpace:"Lab",Name:"Haze_green",RGBPoints:[-1,1,.835294,.886275,-.87451,.937255,.756863,.870443,-.74902,.875817,.666376,.857807,-.623529,.778359,.583007,.808134,-.498039,.676253,.494118,.745098,-.372549,.561365,.390123,.682353,-.247059,.438344,.262745,.621496,-.121569,.321133,.141031,.558751,.00392157,.203922,.0217865,.495861,.129412,.265505,.129412,.433261,.254902,.311692,.255338,.37008,.380392,.356282,.377342,.310821,.505882,.39971,.488889,.258243,.631373,.442556,.604357,.205519,.756863,.48671,.71968,.152941,.882353,.529847,.830356,.100944,1,.572549,.933333,.054902]},{ColorSpace:"Lab",Name:"Haze_lime",RGBPoints:[-1,.704034,.784196,1,-.87451,.633111,.691418,.956078,-.74902,.564021,.600606,.912157,-.623529,.496827,.51189,.868235,-.498039,.43157,.425416,.824314,-.372549,.368248,.341347,.780392,-.247059,.306767,.259855,.736471,-.121569,.246862,.181069,.692549,.00392157,.191619,.109542,.648627,.129412,.257404,.194031,.604706,.254902,.321794,.278775,.560784,.380392,.387909,.364617,.516863,.505882,.456569,.451881,.472941,.631373,.527424,.540773,.42902,.756863,.599759,.631427,.385098,.882353,.673065,.723898,.341176,1,.742751,.812252,.3]},{ColorSpace:"RGB",Name:"Haze",RGBPoints:[-1,1,.835294,.996078,-.00392157,.023529,.141176,.498039,.00392157,.015686,.137255,.494118,1,.984314,.764706,0]},{ColorSpace:"Lab",Name:"Haze_cyan",RGBPoints:[-1,.956863,1,.835294,-.87451,.933188,.921714,.760784,-.74902,.870588,.803486,.671605,-.623529,.807843,.684096,.583297,-.498039,.745098,.569208,.494118,-.372549,.682353,.437763,.390123,-.247059,.621496,.288163,.262745,-.121569,.558751,.144517,.141031,.00392157,.495861,.0217865,.0413943,.129412,.433261,.137255,.129412,.254902,.37008,.263181,.255338,.380392,.306318,.381845,.372694,.505882,.243137,.503994,.494263,.631373,.180392,.629484,.619753,.756863,.117647,.754975,.747131,.882353,.054902,.876398,.866812,1,0,.988235,.976471]},{ColorSpace:"Lab",Name:"nic_Edge",RGBPoints:[-1,.191208,.191208,.191208,-.87451,.239484,.00545035,.614821,-.74902,.220593,.0617459,.863547,-.623529,.17509,.278988,.97794,-.498039,.143526,.576069,.998553,-.372549,.166456,.871883,.96594,-.247059,.376202,.993555,.981833,-.121569,.681996,.991297,.999239,.00392157,.954172,.952734,.94374,.129412,.999735,.99301,.662896,.254902,.979399,.991466,.357973,.380392,.968771,.854967,.162659,.505882,.999245,.556697,.144323,.631373,.973959,.26223,.177946,.756863,.852358,.0526707,.222974,.882353,.593889,.00912724,.238855,1,.191208,.191208,.191208]},{ColorSpace:"Lab",Name:"erdc_iceFire_H",RGBPoints:[-1,405432e-12,0,590122e-11,-.87451,0,.120401,.302675,-.74902,0,.216583,.524574,-.623529,.0552475,.345025,.6595,-.498039,.128047,.492588,.720288,-.372549,.188955,.641309,.792092,-.247059,.327673,.784935,.873434,-.121569,.60824,.892164,.935547,.00392157,.881371,.912178,.818099,.129412,.951407,.835621,.449279,.254902,.904481,.690489,0,.380392,.85407,.510864,0,.505882,.777093,.33018,88199e-8,.631373,.672862,.139087,.00269398,.756863,.508815,0,0,.882353,.299417,366289e-9,547829e-9,1,.0157519,.00332021,455569e-13]},{ColorSpace:"Lab",Name:"erdc_iceFire_L",RGBPoints:[-1,.870485,.913768,.832905,-.87451,.586919,.887865,.934003,-.74902,.31583,.776442,.867858,-.623529,.18302,.632034,.787722,-.498039,.117909,.484134,.713825,-.372549,.0507239,.335979,.654741,-.247059,0,.209874,.511832,-.121569,0,.114689,.28935,.00392157,.0157519,.00332021,455569e-13,.129412,.312914,0,0,.254902,.520865,0,0,.380392,.680105,.15255,.0025996,.505882,.785109,.339479,797922e-9,.631373,.857354,.522494,0,.756863,.910974,.699774,0,.882353,.951921,.842817,.478545,1,.881371,.912178,.818099]},{ColorSpace:"RGB",Name:"hsv",RGBPoints:[-1,1,0,0,-.666666,1,0,1,-.333333,0,0,1,0,0,1,1,.33333,0,1,0,.66666,1,1,0,1,1,0,0]},{ColorSpace:"Lab",Name:"hue_L60",RGBPoints:[-1,.964784,.400592,.349549,-.87451,.964915,.372498,.53785,-.74902,.892353,.401039,.759569,-.623529,.79263,.446956,.903017,-.498039,.682208,.49954,.966673,-.372549,.56392,.553082,.968836,-.247059,.442031,.606396,.901601,-.121569,.305499,.65701,.765784,.00392157,.197251,.687914,.620914,.129412,.193882,.701887,.472654,.254902,.249866,.706123,.320005,.380392,.35132,.697417,.202919,.505882,.498097,.669467,.125232,.631373,.637477,.626239,.107431,.756863,.762115,.56872,.155812,.882353,.889434,.481116,.240445,1,.964784,.400592,.349549]},{IndexedColors:[0,0,0,.8941176470588236,.1019607843137255,.1098039215686274,.2156862745098039,.4941176470588236,.7215686274509804,.3019607843137255,.6862745098039216,.2901960784313726,.596078431372549,.3058823529411765,.6392156862745098,1,.4980392156862745,0,.6509803921568628,.3372549019607843,.1568627450980392],Name:"Spectrum",NanColor:[.6509803921568628,.3372549019607843,.1568627450980392]},{IndexedColors:[.4745098039215686,.09019607843137255,.09019607843137255,.7098039215686275,.00392156862745098,.00392156862745098,.9372549019607843,.2784313725490196,.09803921568627451,.9764705882352941,.5137254901960784,.1411764705882353,1,.7058823529411765,0,1,.8980392156862745,.02352941176470588],Name:"Warm",NanColor:[1,.8980392156862745,.02352941176470588]},{IndexedColors:[.4588235294117647,.6941176470588235,.00392156862745098,.3450980392156863,.5019607843137255,.1607843137254902,.3137254901960784,.8431372549019608,.7490196078431373,.1098039215686274,.5843137254901961,.803921568627451,.2313725490196079,.407843137254902,.6705882352941176,.6039215686274509,.407843137254902,1,.3725490196078431,.2,.5019607843137255],Name:"Cool",NanColor:[.3725490196078431,.2,.5019607843137255]},{IndexedColors:[.2313725490196079,.407843137254902,.6705882352941176,.1098039215686274,.5843137254901961,.803921568627451,.3058823529411765,.8509803921568627,.9176470588235294,.4509803921568628,.6039215686274509,.8352941176470589,.2588235294117647,.2392156862745098,.6627450980392157,.3137254901960784,.3294117647058823,.5294117647058824,.06274509803921569,.1647058823529412,.3215686274509804],Name:"Blues",NanColor:[.06274509803921569,.1647058823529412,.3215686274509804]},{IndexedColors:[.1098039215686274,.5843137254901961,.803921568627451,.2313725490196079,.407843137254902,.6705882352941176,.4,.2431372549019608,.7176470588235294,.6352941176470588,.3294117647058823,.8117647058823529,.8705882352941177,.3803921568627451,.807843137254902,.8627450980392157,.3803921568627451,.5843137254901961,.2392156862745098,.06274509803921569,.3215686274509804],Name:"Wild Flower",NanColor:[.2392156862745098,.06274509803921569,.3215686274509804]},{IndexedColors:[.396078431372549,.4862745098039216,.2156862745098039,.4588235294117647,.6941176470588235,.00392156862745098,.6980392156862745,.7294117647058823,.1882352941176471,1,.8980392156862745,.02352941176470588,1,.7058823529411765,0,.9764705882352941,.5137254901960784,.1411764705882353],Name:"Citrus",NanColor:[.9764705882352941,.5137254901960784,.1411764705882353]},{IndexedColors:[.4980392156862745,.2313725490196079,.03137254901960784,.7019607843137254,.3450980392156863,.02352941176470588,.8784313725490196,.5098039215686274,.0784313725490196,.9921568627450981,.7215686274509804,.3882352941176471,.996078431372549,.8784313725490196,.7137254901960784,.9686274509803922,.9686274509803922,.9686274509803922,.8470588235294118,.8549019607843137,.9215686274509803,.6980392156862745,.6705882352941176,.8235294117647058,.5019607843137255,.4509803921568628,.6745098039215687,.3294117647058823,.1529411764705882,.5333333333333333,.1764705882352941,0,.2941176470588235],Name:"Brewer Diverging Purple-Orange (11)",NanColor:[.1764705882352941,0,.2941176470588235]},{IndexedColors:[.4980392156862745,.2313725490196079,.03137254901960784,.7019607843137254,.3450980392156863,.02352941176470588,.8784313725490196,.5098039215686274,.0784313725490196,.9921568627450981,.7215686274509804,.3882352941176471,.996078431372549,.8784313725490196,.7137254901960784,.8470588235294118,.8549019607843137,.9215686274509803,.6980392156862745,.6705882352941176,.8235294117647058,.5019607843137255,.4509803921568628,.6745098039215687,.3294117647058823,.1529411764705882,.5333333333333333,.1764705882352941,0,.2941176470588235],Name:"Brewer Diverging Purple-Orange (10)",NanColor:[.1764705882352941,0,.2941176470588235]},{IndexedColors:[.7019607843137254,.3450980392156863,.02352941176470588,.8784313725490196,.5098039215686274,.0784313725490196,.9921568627450981,.7215686274509804,.3882352941176471,.996078431372549,.8784313725490196,.7137254901960784,.9686274509803922,.9686274509803922,.9686274509803922,.8470588235294118,.8549019607843137,.9215686274509803,.6980392156862745,.6705882352941176,.8235294117647058,.5019607843137255,.4509803921568628,.6745098039215687,.3294117647058823,.1529411764705882,.5333333333333333],Name:"Brewer Diverging Purple-Orange (9)",NanColor:[.3294117647058823,.1529411764705882,.5333333333333333]},{IndexedColors:[.7019607843137254,.3450980392156863,.02352941176470588,.8784313725490196,.5098039215686274,.0784313725490196,.9921568627450981,.7215686274509804,.3882352941176471,.996078431372549,.8784313725490196,.7137254901960784,.8470588235294118,.8549019607843137,.9215686274509803,.6980392156862745,.6705882352941176,.8235294117647058,.5019607843137255,.4509803921568628,.6745098039215687,.3294117647058823,.1529411764705882,.5333333333333333],Name:"Brewer Diverging Purple-Orange (8)",NanColor:[.3294117647058823,.1529411764705882,.5333333333333333]},{IndexedColors:[.7019607843137254,.3450980392156863,.02352941176470588,.9450980392156862,.6392156862745098,.2509803921568627,.996078431372549,.8784313725490196,.7137254901960784,.9686274509803922,.9686274509803922,.9686274509803922,.8470588235294118,.8549019607843137,.9215686274509803,.6,.5568627450980392,.7647058823529411,.3294117647058823,.1529411764705882,.5333333333333333],Name:"Brewer Diverging Purple-Orange (7)",NanColor:[.3294117647058823,.1529411764705882,.5333333333333333]},{IndexedColors:[.7019607843137254,.3450980392156863,.02352941176470588,.9450980392156862,.6392156862745098,.2509803921568627,.996078431372549,.8784313725490196,.7137254901960784,.8470588235294118,.8549019607843137,.9215686274509803,.6,.5568627450980392,.7647058823529411,.3294117647058823,.1529411764705882,.5333333333333333],Name:"Brewer Diverging Purple-Orange (6)",NanColor:[.3294117647058823,.1529411764705882,.5333333333333333]},{IndexedColors:[.9019607843137255,.3803921568627451,.00392156862745098,.9921568627450981,.7215686274509804,.3882352941176471,.9686274509803922,.9686274509803922,.9686274509803922,.6980392156862745,.6705882352941176,.8235294117647058,.3686274509803922,.2352941176470588,.6],Name:"Brewer Diverging Purple-Orange (5)",NanColor:[.3686274509803922,.2352941176470588,.6]},{IndexedColors:[.9019607843137255,.3803921568627451,.00392156862745098,.9921568627450981,.7215686274509804,.3882352941176471,.6980392156862745,.6705882352941176,.8235294117647058,.3686274509803922,.2352941176470588,.6],Name:"Brewer Diverging Purple-Orange (4)",NanColor:[.3686274509803922,.2352941176470588,.6]},{IndexedColors:[.9450980392156862,.6392156862745098,.2509803921568627,.9686274509803922,.9686274509803922,.9686274509803922,.6,.5568627450980392,.7647058823529411],Name:"Brewer Diverging Purple-Orange (3)",NanColor:[.6,.5568627450980392,.7647058823529411]},{IndexedColors:[.6196078431372549,.00392156862745098,.2588235294117647,.8352941176470589,.2431372549019608,.3098039215686275,.9568627450980393,.4274509803921568,.2627450980392157,.9921568627450981,.6823529411764706,.3803921568627451,.996078431372549,.8784313725490196,.5450980392156862,1,1,.7490196078431373,.9019607843137255,.9607843137254902,.596078431372549,.6705882352941176,.8666666666666667,.6431372549019608,.4,.7607843137254902,.6470588235294118,.196078431372549,.5333333333333333,.7411764705882353,.3686274509803922,.3098039215686275,.6352941176470588],Name:"Brewer Diverging Spectral (11)",NanColor:[.3686274509803922,.3098039215686275,.6352941176470588]},{IndexedColors:[.6196078431372549,.00392156862745098,.2588235294117647,.8352941176470589,.2431372549019608,.3098039215686275,.9568627450980393,.4274509803921568,.2627450980392157,.9921568627450981,.6823529411764706,.3803921568627451,.996078431372549,.8784313725490196,.5450980392156862,.9019607843137255,.9607843137254902,.596078431372549,.6705882352941176,.8666666666666667,.6431372549019608,.4,.7607843137254902,.6470588235294118,.196078431372549,.5333333333333333,.7411764705882353,.3686274509803922,.3098039215686275,.6352941176470588],Name:"Brewer Diverging Spectral (10)",NanColor:[.3686274509803922,.3098039215686275,.6352941176470588]},{IndexedColors:[.8352941176470589,.2431372549019608,.3098039215686275,.9568627450980393,.4274509803921568,.2627450980392157,.9921568627450981,.6823529411764706,.3803921568627451,.996078431372549,.8784313725490196,.5450980392156862,1,1,.7490196078431373,.9019607843137255,.9607843137254902,.596078431372549,.6705882352941176,.8666666666666667,.6431372549019608,.4,.7607843137254902,.6470588235294118,.196078431372549,.5333333333333333,.7411764705882353],Name:"Brewer Diverging Spectral (9)",NanColor:[.196078431372549,.5333333333333333,.7411764705882353]},{IndexedColors:[.8352941176470589,.2431372549019608,.3098039215686275,.9568627450980393,.4274509803921568,.2627450980392157,.9921568627450981,.6823529411764706,.3803921568627451,.996078431372549,.8784313725490196,.5450980392156862,.9019607843137255,.9607843137254902,.596078431372549,.6705882352941176,.8666666666666667,.6431372549019608,.4,.7607843137254902,.6470588235294118,.196078431372549,.5333333333333333,.7411764705882353],Name:"Brewer Diverging Spectral (8)",NanColor:[.196078431372549,.5333333333333333,.7411764705882353]},{IndexedColors:[.8352941176470589,.2431372549019608,.3098039215686275,.9882352941176471,.5529411764705883,.3490196078431372,.996078431372549,.8784313725490196,.5450980392156862,1,1,.7490196078431373,.9019607843137255,.9607843137254902,.596078431372549,.6,.8352941176470589,.5803921568627451,.196078431372549,.5333333333333333,.7411764705882353],Name:"Brewer Diverging Spectral (7)",NanColor:[.196078431372549,.5333333333333333,.7411764705882353]},{IndexedColors:[.8352941176470589,.2431372549019608,.3098039215686275,.9882352941176471,.5529411764705883,.3490196078431372,.996078431372549,.8784313725490196,.5450980392156862,.9019607843137255,.9607843137254902,.596078431372549,.6,.8352941176470589,.5803921568627451,.196078431372549,.5333333333333333,.7411764705882353],Name:"Brewer Diverging Spectral (6)",NanColor:[.196078431372549,.5333333333333333,.7411764705882353]},{IndexedColors:[.8431372549019608,.09803921568627451,.1098039215686274,.9921568627450981,.6823529411764706,.3803921568627451,1,1,.7490196078431373,.6705882352941176,.8666666666666667,.6431372549019608,.1686274509803922,.5137254901960784,.7294117647058823],Name:"Brewer Diverging Spectral (5)",NanColor:[.1686274509803922,.5137254901960784,.7294117647058823]},{IndexedColors:[.8431372549019608,.09803921568627451,.1098039215686274,.9921568627450981,.6823529411764706,.3803921568627451,.6705882352941176,.8666666666666667,.6431372549019608,.1686274509803922,.5137254901960784,.7294117647058823],Name:"Brewer Diverging Spectral (4)",NanColor:[.1686274509803922,.5137254901960784,.7294117647058823]},{IndexedColors:[.9882352941176471,.5529411764705883,.3490196078431372,1,1,.7490196078431373,.6,.8352941176470589,.5803921568627451],Name:"Brewer Diverging Spectral (3)",NanColor:[.6,.8352941176470589,.5803921568627451]},{IndexedColors:[.3294117647058823,.1882352941176471,.0196078431372549,.5490196078431373,.3176470588235294,.0392156862745098,.7490196078431373,.5058823529411764,.1764705882352941,.8745098039215686,.7607843137254902,.4901960784313725,.9647058823529412,.9098039215686274,.7647058823529411,.9607843137254902,.9607843137254902,.9607843137254902,.7803921568627451,.9176470588235294,.8980392156862745,.5019607843137255,.803921568627451,.7568627450980392,.207843137254902,.592156862745098,.5607843137254902,.00392156862745098,.4,.3686274509803922,0,.2352941176470588,.1882352941176471],Name:"Brewer Diverging Brown-Blue-Green (11)",NanColor:[0,.2352941176470588,.1882352941176471]},{IndexedColors:[.3294117647058823,.1882352941176471,.0196078431372549,.5490196078431373,.3176470588235294,.0392156862745098,.7490196078431373,.5058823529411764,.1764705882352941,.8745098039215686,.7607843137254902,.4901960784313725,.9647058823529412,.9098039215686274,.7647058823529411,.7803921568627451,.9176470588235294,.8980392156862745,.5019607843137255,.803921568627451,.7568627450980392,.207843137254902,.592156862745098,.5607843137254902,.00392156862745098,.4,.3686274509803922,0,.2352941176470588,.1882352941176471],Name:"Brewer Diverging Brown-Blue-Green (10)",NanColor:[0,.2352941176470588,.1882352941176471]},{IndexedColors:[.5490196078431373,.3176470588235294,.0392156862745098,.7490196078431373,.5058823529411764,.1764705882352941,.8745098039215686,.7607843137254902,.4901960784313725,.9647058823529412,.9098039215686274,.7647058823529411,.9607843137254902,.9607843137254902,.9607843137254902,.7803921568627451,.9176470588235294,.8980392156862745,.5019607843137255,.803921568627451,.7568627450980392,.207843137254902,.592156862745098,.5607843137254902,.00392156862745098,.4,.3686274509803922],Name:"Brewer Diverging Brown-Blue-Green (9)",NanColor:[.00392156862745098,.4,.3686274509803922]},{IndexedColors:[.5490196078431373,.3176470588235294,.0392156862745098,.7490196078431373,.5058823529411764,.1764705882352941,.8745098039215686,.7607843137254902,.4901960784313725,.9647058823529412,.9098039215686274,.7647058823529411,.7803921568627451,.9176470588235294,.8980392156862745,.5019607843137255,.803921568627451,.7568627450980392,.207843137254902,.592156862745098,.5607843137254902,.00392156862745098,.4,.3686274509803922],Name:"Brewer Diverging Brown-Blue-Green (8)",NanColor:[.00392156862745098,.4,.3686274509803922]},{IndexedColors:[.5490196078431373,.3176470588235294,.0392156862745098,.8470588235294118,.7019607843137254,.396078431372549,.9647058823529412,.9098039215686274,.7647058823529411,.9607843137254902,.9607843137254902,.9607843137254902,.7803921568627451,.9176470588235294,.8980392156862745,.3529411764705883,.7058823529411765,.6745098039215687,.00392156862745098,.4,.3686274509803922],Name:"Brewer Diverging Brown-Blue-Green (7)",NanColor:[.00392156862745098,.4,.3686274509803922]},{IndexedColors:[.5490196078431373,.3176470588235294,.0392156862745098,.8470588235294118,.7019607843137254,.396078431372549,.9647058823529412,.9098039215686274,.7647058823529411,.7803921568627451,.9176470588235294,.8980392156862745,.3529411764705883,.7058823529411765,.6745098039215687,.00392156862745098,.4,.3686274509803922],Name:"Brewer Diverging Brown-Blue-Green (6)",NanColor:[.00392156862745098,.4,.3686274509803922]},{IndexedColors:[.6509803921568628,.3803921568627451,.1019607843137255,.8745098039215686,.7607843137254902,.4901960784313725,.9607843137254902,.9607843137254902,.9607843137254902,.5019607843137255,.803921568627451,.7568627450980392,.00392156862745098,.5215686274509804,.4431372549019608],Name:"Brewer Diverging Brown-Blue-Green (5)",NanColor:[.00392156862745098,.5215686274509804,.4431372549019608]},{IndexedColors:[.6509803921568628,.3803921568627451,.1019607843137255,.8745098039215686,.7607843137254902,.4901960784313725,.5019607843137255,.803921568627451,.7568627450980392,.00392156862745098,.5215686274509804,.4431372549019608],Name:"Brewer Diverging Brown-Blue-Green (4)",NanColor:[.00392156862745098,.5215686274509804,.4431372549019608]},{IndexedColors:[.8470588235294118,.7019607843137254,.396078431372549,.9607843137254902,.9607843137254902,.9607843137254902,.3529411764705883,.7058823529411765,.6745098039215687],Name:"Brewer Diverging Brown-Blue-Green (3)",NanColor:[.3529411764705883,.7058823529411765,.6745098039215687]},{IndexedColors:[.9686274509803922,.9882352941176471,.9921568627450981,.8980392156862745,.9607843137254902,.9764705882352941,.8,.9254901960784314,.9019607843137255,.6,.8470588235294118,.788235294117647,.4,.7607843137254902,.6431372549019608,.2549019607843137,.6823529411764706,.4627450980392157,.1372549019607843,.5450980392156862,.2705882352941176,0,.4274509803921568,.1725490196078431,0,.2666666666666667,.1058823529411765],Name:"Brewer Sequential Blue-Green (9)",NanColor:[0,.2666666666666667,.1058823529411765]},{IndexedColors:[.9686274509803922,.9882352941176471,.9921568627450981,.8980392156862745,.9607843137254902,.9764705882352941,.8,.9254901960784314,.9019607843137255,.6,.8470588235294118,.788235294117647,.4,.7607843137254902,.6431372549019608,.2549019607843137,.6823529411764706,.4627450980392157,.1372549019607843,.5450980392156862,.2705882352941176,0,.3450980392156863,.1411764705882353],Name:"Brewer Sequential Blue-Green (8)",NanColor:[0,.3450980392156863,.1411764705882353]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.8,.9254901960784314,.9019607843137255,.8,.9254901960784314,.9019607843137255,.4,.7607843137254902,.6431372549019608,.2549019607843137,.6823529411764706,.4627450980392157,.1372549019607843,.5450980392156862,.2705882352941176,0,.3450980392156863,.1411764705882353],Name:"Brewer Sequential Blue-Green (7)",NanColor:[0,.3450980392156863,.1411764705882353]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.8,.9254901960784314,.9019607843137255,.6,.8470588235294118,.788235294117647,.4,.7607843137254902,.6431372549019608,.1725490196078431,.6352941176470588,.3725490196078431,0,.4274509803921568,.1725490196078431],Name:"Brewer Sequential Blue-Green (6)",NanColor:[0,.4274509803921568,.1725490196078431]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.6980392156862745,.8862745098039215,.8862745098039215,.4,.7607843137254902,.6431372549019608,.1725490196078431,.6352941176470588,.3725490196078431,0,.4274509803921568,.1725490196078431],Name:"Brewer Sequential Blue-Green (5)",NanColor:[0,.4274509803921568,.1725490196078431]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.6980392156862745,.8862745098039215,.8862745098039215,.4,.7607843137254902,.6431372549019608,.1372549019607843,.5450980392156862,.2705882352941176],Name:"Brewer Sequential Blue-Green (4)",NanColor:[.1372549019607843,.5450980392156862,.2705882352941176]},{IndexedColors:[.8980392156862745,.9607843137254902,.9764705882352941,.6,.8470588235294118,.788235294117647,.1725490196078431,.6352941176470588,.3725490196078431],Name:"Brewer Sequential Blue-Green (3)",NanColor:[.1725490196078431,.6352941176470588,.3725490196078431]},{IndexedColors:[1,1,.8980392156862745,1,.9686274509803922,.7372549019607844,.996078431372549,.8901960784313725,.5686274509803921,.996078431372549,.7686274509803922,.3098039215686275,.996078431372549,.6,.1607843137254902,.9254901960784314,.4392156862745098,.0784313725490196,.8,.2980392156862745,.00784313725490196,.6,.203921568627451,.01568627450980392,.4,.1450980392156863,.02352941176470588],Name:"Brewer Sequential Yellow-Orange-Brown (9)",NanColor:[.4,.1450980392156863,.02352941176470588]},{IndexedColors:[1,1,.8980392156862745,1,.9686274509803922,.7372549019607844,.996078431372549,.8901960784313725,.5686274509803921,.996078431372549,.7686274509803922,.3098039215686275,.996078431372549,.6,.1607843137254902,.9254901960784314,.4392156862745098,.0784313725490196,.8,.2980392156862745,.00784313725490196,.5490196078431373,.1764705882352941,.01568627450980392],Name:"Brewer Sequential Yellow-Orange-Brown (8)",NanColor:[.5490196078431373,.1764705882352941,.01568627450980392]},{IndexedColors:[1,1,.8313725490196079,.996078431372549,.8901960784313725,.5686274509803921,.996078431372549,.7686274509803922,.3098039215686275,.996078431372549,.6,.1607843137254902,.9254901960784314,.4392156862745098,.0784313725490196,.8,.2980392156862745,.00784313725490196,.5490196078431373,.1764705882352941,.01568627450980392],Name:"Brewer Sequential Yellow-Orange-Brown (7)",NanColor:[.5490196078431373,.1764705882352941,.01568627450980392]},{IndexedColors:[1,1,.8313725490196079,.996078431372549,.8901960784313725,.5686274509803921,.996078431372549,.7686274509803922,.3098039215686275,.996078431372549,.6,.1607843137254902,.8509803921568627,.3725490196078431,.05490196078431372,.6,.203921568627451,.01568627450980392],Name:"Brewer Sequential Yellow-Orange-Brown (6)",NanColor:[.6,.203921568627451,.01568627450980392]},{IndexedColors:[1,1,.8313725490196079,.996078431372549,.8509803921568627,.5568627450980392,.996078431372549,.6,.1607843137254902,.8509803921568627,.3725490196078431,.05490196078431372,.6,.203921568627451,.01568627450980392],Name:"Brewer Sequential Yellow-Orange-Brown (5)",NanColor:[.6,.203921568627451,.01568627450980392]},{IndexedColors:[1,1,.8313725490196079,.996078431372549,.8509803921568627,.5568627450980392,.996078431372549,.6,.1607843137254902,.8,.2980392156862745,.00784313725490196],Name:"Brewer Sequential Yellow-Orange-Brown (4)",NanColor:[.8,.2980392156862745,.00784313725490196]},{IndexedColors:[1,.9686274509803922,.7372549019607844,.996078431372549,.7686274509803922,.3098039215686275,.8509803921568627,.3725490196078431,.05490196078431372],Name:"Brewer Sequential Yellow-Orange-Brown (3)",NanColor:[.8509803921568627,.3725490196078431,.05490196078431372]},{IndexedColors:[.9686274509803922,.9882352941176471,.9921568627450981,.8784313725490196,.9254901960784314,.9568627450980393,.7490196078431373,.8274509803921568,.9019607843137255,.6196078431372549,.7372549019607844,.8549019607843137,.5490196078431373,.5882352941176471,.7764705882352941,.5490196078431373,.4196078431372549,.6941176470588235,.5333333333333333,.2549019607843137,.615686274509804,.5058823529411764,.05882352941176471,.4862745098039216,.3019607843137255,0,.2941176470588235],Name:"Brewer Sequential Blue-Purple (9)",NanColor:[.3019607843137255,0,.2941176470588235]},{IndexedColors:[.9686274509803922,.9882352941176471,.9921568627450981,.8784313725490196,.9254901960784314,.9568627450980393,.7490196078431373,.8274509803921568,.9019607843137255,.6196078431372549,.7372549019607844,.8549019607843137,.5490196078431373,.5882352941176471,.7764705882352941,.5490196078431373,.4196078431372549,.6941176470588235,.5333333333333333,.2549019607843137,.615686274509804,.4313725490196079,.00392156862745098,.4196078431372549],Name:"Brewer Sequential Blue-Purple (8)",NanColor:[.4313725490196079,.00392156862745098,.4196078431372549]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.7490196078431373,.8274509803921568,.9019607843137255,.6196078431372549,.7372549019607844,.8549019607843137,.5490196078431373,.5882352941176471,.7764705882352941,.5490196078431373,.4196078431372549,.6941176470588235,.5333333333333333,.2549019607843137,.615686274509804,.4313725490196079,.00392156862745098,.4196078431372549],Name:"Brewer Sequential Blue-Purple (7)",NanColor:[.4313725490196079,.00392156862745098,.4196078431372549]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.7490196078431373,.8274509803921568,.9019607843137255,.6196078431372549,.7372549019607844,.8549019607843137,.5490196078431373,.5882352941176471,.7764705882352941,.5333333333333333,.3372549019607843,.6549019607843137,.5058823529411764,.05882352941176471,.4862745098039216],Name:"Brewer Sequential Blue-Purple (6)",NanColor:[.5058823529411764,.05882352941176471,.4862745098039216]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.7019607843137254,.803921568627451,.8901960784313725,.5490196078431373,.5882352941176471,.7764705882352941,.5333333333333333,.3372549019607843,.6549019607843137,.5058823529411764,.05882352941176471,.4862745098039216],Name:"Brewer Sequential Blue-Purple (5)",NanColor:[.5058823529411764,.05882352941176471,.4862745098039216]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.7019607843137254,.803921568627451,.8901960784313725,.5490196078431373,.5882352941176471,.7764705882352941,.5333333333333333,.2549019607843137,.615686274509804],Name:"Brewer Sequential Blue-Purple (4)",NanColor:[.5333333333333333,.2549019607843137,.615686274509804]},{IndexedColors:[.8784313725490196,.9254901960784314,.9568627450980393,.6196078431372549,.7372549019607844,.8549019607843137,.5333333333333333,.3372549019607843,.6549019607843137],Name:"Brewer Sequential Blue-Purple (3)",NanColor:[.5333333333333333,.3372549019607843,.6549019607843137]},{IndexedColors:[.4980392156862745,.788235294117647,.4980392156862745,.7450980392156863,.6823529411764706,.8313725490196079,.9921568627450981,.7529411764705882,.5254901960784314,1,1,.6,.2196078431372549,.4235294117647059,.6901960784313725,.9411764705882353,.00784313725490196,.4980392156862745,.7490196078431373,.3568627450980392,.09019607843137255,.4,.4,.4],Name:"Brewer Qualitative Accent",NanColor:[.4,.4,.4]},{IndexedColors:[.1058823529411765,.6196078431372549,.4666666666666667,.8509803921568627,.3725490196078431,.00784313725490196,.4588235294117647,.4392156862745098,.7019607843137254,.9058823529411765,.1607843137254902,.5411764705882353,.4,.6509803921568628,.1176470588235294,.9019607843137255,.6705882352941176,.00784313725490196,.6509803921568628,.4627450980392157,.1137254901960784,.4,.4,.4],Name:"Brewer Qualitative Dark2",NanColor:[.4,.4,.4]},{IndexedColors:[.4,.7607843137254902,.6470588235294118,.9882352941176471,.5529411764705883,.3843137254901961,.5529411764705883,.6274509803921569,.796078431372549,.9058823529411765,.5411764705882353,.7647058823529411,.6509803921568628,.8470588235294118,.3294117647058823,1,.8509803921568627,.1843137254901961,.8980392156862745,.7686274509803922,.5803921568627451,.7019607843137254,.7019607843137254,.7019607843137254],Name:"Brewer Qualitative Set2",NanColor:[.7019607843137254,.7019607843137254,.7019607843137254]},{IndexedColors:[.7019607843137254,.8862745098039215,.803921568627451,.9921568627450981,.803921568627451,.6745098039215687,.796078431372549,.8352941176470589,.9098039215686274,.9568627450980393,.792156862745098,.8941176470588236,.9019607843137255,.9607843137254902,.788235294117647,1,.9490196078431372,.6823529411764706,.9450980392156862,.8862745098039215,.8,.8,.8,.8],Name:"Brewer Qualitative Pastel2",NanColor:[.8,.8,.8]},{IndexedColors:[.984313725490196,.7058823529411765,.6823529411764706,.7019607843137254,.803921568627451,.8901960784313725,.8,.9215686274509803,.7725490196078432,.8705882352941177,.796078431372549,.8941176470588236,.996078431372549,.8509803921568627,.6509803921568628,1,1,.8,.8980392156862745,.8470588235294118,.7411764705882353,.9921568627450981,.8549019607843137,.9254901960784314,.9490196078431372,.9490196078431372,.9490196078431372],Name:"Brewer Qualitative Pastel1",NanColor:[.9490196078431372,.9490196078431372,.9490196078431372]},{IndexedColors:[.8941176470588236,.1019607843137255,.1098039215686274,.2156862745098039,.4941176470588236,.7215686274509804,.3019607843137255,.6862745098039216,.2901960784313726,.596078431372549,.3058823529411765,.6392156862745098,1,.4980392156862745,0,1,1,.2,.6509803921568628,.3372549019607843,.1568627450980392,.9686274509803922,.5058823529411764,.7490196078431373,.6,.6,.6],Name:"Brewer Qualitative Set1",NanColor:[.6,.6,.6]},{IndexedColors:[.6509803921568628,.807843137254902,.8901960784313725,.1215686274509804,.4705882352941176,.7058823529411765,.6980392156862745,.8745098039215686,.5411764705882353,.2,.6274509803921569,.1725490196078431,.984313725490196,.6039215686274509,.6,.8901960784313725,.1019607843137255,.1098039215686274,.9921568627450981,.7490196078431373,.4352941176470588,1,.4980392156862745,0,.792156862745098,.6980392156862745,.8392156862745098,.4156862745098039,.2392156862745098,.6039215686274509,1,1,.6],Name:"Brewer Qualitative Paired",NanColor:[1,1,.6]},{IndexedColors:[.5529411764705883,.8274509803921568,.7803921568627451,1,1,.7019607843137254,.7450980392156863,.7294117647058823,.8549019607843137,.984313725490196,.5019607843137255,.4470588235294118,.5019607843137255,.6941176470588235,.8274509803921568,.9921568627450981,.7058823529411765,.3843137254901961,.7019607843137254,.8705882352941177,.4117647058823529,.9882352941176471,.803921568627451,.8980392156862745,.8509803921568627,.8509803921568627,.8509803921568627,.7372549019607844,.5019607843137255,.7411764705882353,.8,.9215686274509803,.7725490196078432,1,.9294117647058824,.4352941176470588],Name:"Brewer Qualitative Set3",NanColor:[1,.9294117647058824,.4352941176470588]},{IndexedColors:[1,0,0,1,.862745,0,0,.695201,0],Name:"Traffic Lights",NanColor:[.803922,0,.803922]},{IndexedColors:[.908659,.604013,.581857,1,.862745,0,0,.695201,0],Name:"Traffic Lights For Deuteranopes",NanColor:[.803922,0,.803922]},{IndexedColors:[.4196078431372549,0,.07058823529411765,.9019607843137255,.9411764705882353,.0196078431372549,.01568627450980392,.6196078431372549,.00784313725490196],Name:"Traffic Lights For Deuteranopes 2",NanColor:[.803922,0,.803922]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Muted Blue-Green",NanColor:[.25,0,0],RGBPoints:[0,.109804,.27451,.301961,.02,.129412,.309804,.341176,.05,.14902,.341176,.380392,.1,.188235,.403922,.458824,.15,.227451,.447059,.521569,.2,.290196,.494118,.588235,.25,.368627,.552941,.670588,.3,.458824,.619608,.74902,.35,.588235,.713725,.85098,.4,.72549,.815686,.941176,.45,.831373,.882353,.980392,.475,.909804,.933333,1,.5,.980392,.984314,1,.5,.996078,1,.94902,.5,1,1,.980392,.5,.980392,.984314,1,.525,.972549,.988235,.890196,.55,.917647,.960784,.835294,.6,.835294,.921569,.772549,.65,.768627,.901961,.737255,.7,.670588,.831373,.654902,.75,.576471,.760784,.584314,.8,.498039,.678431,.521569,.85,.392157,.560784,.427451,.9,.294118,.45098,.333333,.95,.211765,.34902,.254902,1,.152941,.278431,.196078]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Green-Blue Asymmetric Divergent (62Blbc)",NanColor:[.25,0,0],RGBPoints:[0,.121569,.2,.145098,.05,.196078,.301961,.223529,.1,.258824,.4,.278431,.2,.341176,.54902,.341176,.25,.419608,.619608,.376471,.3,.545098,.701961,.392157,.35,.643137,.780392,.403922,.4,.729412,.819608,.45098,.45,.811765,.870588,.521569,.5,.898039,.909804,.564706,.55,.941176,.92549,.686275,.6,.960784,.94902,.776471,.64,1,1,1,.65,.890196,.988235,.972549,.7,.721569,.894118,.901961,.75,.631373,.823529,.839216,.8,.517647,.662745,.701961,.85,.384314,.494118,.54902,.9,.298039,.360784,.45098,.95,.223529,.25098,.34902,.99,.156863,.172549,.25098,1,.137255,.137255,.188235]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Asymmtrical Earth Tones (6_21b)",NanColor:[.25,0,0],RGBPoints:[0,.141176,.14902,.2,.05,.215686,.258824,.321569,.1,.243137,.368627,.380392,.15,.27451,.439216,.4,.2,.32549,.501961,.384314,.25,.403922,.6,.419608,.3,.486275,.701961,.454902,.35,.556863,.74902,.494118,.4,.670588,.8,.545098,.5,.854902,.901961,.631373,.55,.92549,.941176,.694118,.6,.960784,.94902,.776471,.65,.988235,.968627,.909804,.7,.839216,.815686,.772549,.75,.701961,.662745,.615686,.8,.6,.529412,.478431,.85,.501961,.403922,.360784,.9,.439216,.313725,.290196,1,.301961,.164706,.176471]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Yellow 15",NanColor:[.25,0,0],RGBPoints:[0,1,1,.988235,.002,1,1,.988235,.05,.984314,.988235,.843137,.1,.988235,.988235,.741176,.15,.980392,.968627,.654902,.2,.980392,.945098,.576471,.25,.968627,.905882,.486275,.3,.968627,.862745,.388235,.35,.960784,.803922,.286275,.4,.94902,.741176,.219608,.45,.941176,.678431,.14902,.5,.929412,.607843,.094118,.55,.921569,.545098,.054902,.6,.909804,.486275,.035294,.65,.890196,.411765,.019608,.7,.8,.305882,0,.75,.760784,.239216,0,.8,.678431,.180392,.011765,.85,.6,.121569,.023529,.9,.501961,.054902,.031373,.95,.4,.039216,.058824,1,.301961,.047059,.090196]},{ColorSpace:"Diverging",Name:"Magma (matplotlib)",NanColor:[0,1,0],Source:"https://github.com/BIDS/colormap/blob/master/colormaps.py",License:"CC0",Creator:"Nathaniel J. Smith & Stefan van der Walt",RGBPoints:[0,.001462,466e-6,.013866,.003922,.002258,.001295,.018331,.007843,.003279,.002305,.023708,.011765,.004512,.00349,.029965,.015686,.00595,.004843,.03713,.019608,.007588,.006356,.044973,.023529,.009426,.008022,.052844,.027451,.011465,.009828,.06075,.031373,.013708,.011771,.068667,.035294,.016156,.01384,.076603,.039216,.018815,.016026,.084584,.043137,.021692,.01832,.09261,.047059,.024792,.020715,.100676,.05098,.028123,.023201,.108787,.054902,.031696,.025765,.116965,.058824,.03552,.028397,.125209,.062745,.039608,.03109,.133515,.066667,.04383,.03383,.141886,.070588,.048062,.036607,.150327,.07451,.05232,.039407,.158841,.078431,.056615,.04216,.167446,.082353,.060949,.044794,.176129,.086275,.06533,.047318,.184892,.090196,.069764,.049726,.193735,.094118,.074257,.052017,.20266,.098039,.078815,.054184,.211667,.101961,.083446,.056225,.220755,.105882,.088155,.058133,.229922,.109804,.092949,.059904,.239164,.113725,.097833,.061531,.248477,.117647,.102815,.06301,.257854,.121569,.107899,.064335,.267289,.12549,.113094,.065492,.276784,.129412,.118405,.066479,.286321,.133333,.123833,.067295,.295879,.137255,.12938,.067935,.305443,.141176,.135053,.068391,.315,.145098,.140858,.068654,.324538,.14902,.146785,.068738,.334011,.152941,.152839,.068637,.343404,.156863,.159018,.068354,.352688,.160784,.165308,.067911,.361816,.164706,.171713,.067305,.370771,.168627,.178212,.066576,.379497,.172549,.184801,.065732,.387973,.176471,.19146,.064818,.396152,.180392,.198177,.063862,.404009,.184314,.204935,.062907,.411514,.188235,.211718,.061992,.418647,.192157,.218512,.061158,.425392,.196078,.225302,.060445,.431742,.2,.232077,.059889,.437695,.203922,.238826,.059517,.443256,.207843,.245543,.059352,.448436,.211765,.25222,.059415,.453248,.215686,.258857,.059706,.45771,.219608,.265447,.060237,.46184,.223529,.271994,.060994,.46566,.227451,.278493,.061978,.46919,.231373,.284951,.063168,.472451,.235294,.291366,.064553,.475462,.239216,.29774,.066117,.478243,.243137,.304081,.067835,.480812,.247059,.310382,.069702,.483186,.25098,.316654,.07169,.48538,.254902,.322899,.073782,.487408,.258824,.329114,.075972,.489287,.262745,.335308,.078236,.491024,.266667,.341482,.080564,.492631,.270588,.347636,.082946,.494121,.27451,.353773,.085373,.495501,.278431,.359898,.087831,.496778,.282353,.366012,.090314,.49796,.286275,.372116,.092816,.499053,.290196,.378211,.095332,.500067,.294118,.384299,.097855,.501002,.298039,.390384,.100379,.501864,.301961,.396467,.102902,.502658,.305882,.402548,.10542,.503386,.309804,.408629,.10793,.504052,.313725,.414709,.110431,.504662,.317647,.420791,.11292,.505215,.321569,.426877,.115395,.505714,.32549,.432967,.117855,.50616,.329412,.439062,.120298,.506555,.333333,.445163,.122724,.506901,.337255,.451271,.125132,.507198,.341176,.457386,.127522,.507448,.345098,.463508,.129893,.507652,.34902,.46964,.132245,.507809,.352941,.47578,.134577,.507921,.356863,.481929,.136891,.507989,.360784,.488088,.139186,.508011,.364706,.494258,.141462,.507988,.368627,.500438,.143719,.50792,.372549,.506629,.145958,.507806,.376471,.512831,.148179,.507648,.380392,.519045,.150383,.507443,.384314,.52527,.152569,.507192,.388235,.531507,.154739,.506895,.392157,.537755,.156894,.506551,.396078,.544015,.159033,.506159,.4,.550287,.161158,.505719,.403922,.556571,.163269,.50523,.407843,.562866,.165368,.504692,.411765,.569172,.167454,.504105,.415686,.57549,.16953,.503466,.419608,.581819,.171596,.502777,.423529,.588158,.173652,.502035,.427451,.594508,.175701,.501241,.431373,.600868,.177743,.500394,.435294,.607238,.179779,.499492,.439216,.613617,.181811,.498536,.443137,.620005,.18384,.497524,.447059,.626401,.185867,.496456,.45098,.632805,.187893,.495332,.454902,.639216,.189921,.49415,.458824,.645633,.191952,.49291,.462745,.652056,.193986,.491611,.466667,.658483,.196027,.490253,.470588,.664915,.198075,.488836,.47451,.671349,.200133,.487358,.478431,.677786,.202203,.485819,.482353,.684224,.204286,.484219,.486275,.690661,.206384,.482558,.490196,.697098,.208501,.480835,.494118,.703532,.210638,.479049,.498039,.709962,.212797,.477201,.501961,.716387,.214982,.47529,.505882,.722805,.217194,.473316,.509804,.729216,.219437,.471279,.513725,.735616,.221713,.46918,.517647,.742004,.224025,.467018,.521569,.748378,.226377,.464794,.52549,.754737,.228772,.462509,.529412,.761077,.231214,.460162,.533333,.767398,.233705,.457755,.537255,.773695,.236249,.455289,.541176,.779968,.238851,.452765,.545098,.786212,.241514,.450184,.54902,.792427,.244242,.447543,.552941,.798608,.24704,.444848,.556863,.804752,.249911,.442102,.560784,.810855,.252861,.439305,.564706,.816914,.255895,.436461,.568627,.822926,.259016,.433573,.572549,.828886,.262229,.430644,.576471,.834791,.26554,.427671,.580392,.840636,.268953,.424666,.584314,.846416,.272473,.421631,.588235,.852126,.276106,.418573,.592157,.857763,.279857,.415496,.596078,.86332,.283729,.412403,.6,.868793,.287728,.409303,.603922,.874176,.291859,.406205,.607843,.879464,.296125,.403118,.611765,.884651,.30053,.400047,.615686,.889731,.305079,.397002,.619608,.8947,.309773,.393995,.623529,.899552,.314616,.391037,.627451,.904281,.31961,.388137,.631373,.908884,.324755,.385308,.635294,.913354,.330052,.382563,.639216,.917689,.3355,.379915,.643137,.921884,.341098,.377376,.647059,.925937,.346844,.374959,.65098,.929845,.352734,.372677,.654902,.933606,.358764,.370541,.658824,.937221,.364929,.368567,.662745,.940687,.371224,.366762,.666667,.944006,.377643,.365136,.670588,.94718,.384178,.363701,.67451,.95021,.39082,.362468,.678431,.953099,.397563,.361438,.682353,.955849,.4044,.360619,.686275,.958464,.411324,.360014,.690196,.960949,.418323,.35963,.694118,.96331,.42539,.359469,.698039,.965549,.432519,.359529,.701961,.967671,.439703,.35981,.705882,.96968,.446936,.360311,.709804,.971582,.45421,.36103,.713725,.973381,.46152,.361965,.717647,.975082,.468861,.363111,.721569,.97669,.476226,.364466,.72549,.97821,.483612,.366025,.729412,.979645,.491014,.367783,.733333,.981,.498428,.369734,.737255,.982279,.505851,.371874,.741176,.983485,.51328,.374198,.745098,.984622,.520713,.376698,.74902,.985693,.528148,.379371,.752941,.9867,.535582,.38221,.756863,.987646,.543015,.38521,.760784,.988533,.550446,.388365,.764706,.989363,.557873,.391671,.768627,.990138,.565296,.395122,.772549,.990871,.572706,.398714,.776471,.991558,.580107,.402441,.780392,.992196,.587502,.406299,.784314,.992785,.594891,.410283,.788235,.993326,.602275,.41439,.792157,.993834,.609644,.418613,.796078,.994309,.616999,.42295,.8,.994738,.62435,.427397,.803922,.995122,.631696,.431951,.807843,.99548,.639027,.436607,.811765,.99581,.646344,.441361,.815686,.996096,.653659,.446213,.819608,.996341,.660969,.45116,.823529,.99658,.668256,.456192,.827451,.996775,.675541,.461314,.831373,.996925,.682828,.466526,.835294,.997077,.690088,.471811,.839216,.997186,.697349,.477182,.843137,.997254,.704611,.482635,.847059,.997325,.711848,.488154,.85098,.997351,.719089,.493755,.854902,.997351,.726324,.499428,.858824,.997341,.733545,.505167,.862745,.997285,.740772,.510983,.866667,.997228,.747981,.516859,.870588,.997138,.75519,.522806,.87451,.997019,.762398,.528821,.878431,.996898,.769591,.534892,.882353,.996727,.776795,.541039,.886275,.996571,.783977,.547233,.890196,.996369,.791167,.553499,.894118,.996162,.798348,.55982,.898039,.995932,.805527,.566202,.901961,.99568,.812706,.572645,.905882,.995424,.819875,.57914,.909804,.995131,.827052,.585701,.913725,.994851,.834213,.592307,.917647,.994524,.841387,.598983,.921569,.994222,.84854,.605696,.92549,.993866,.855711,.612482,.929412,.993545,.862859,.619299,.933333,.99317,.870024,.626189,.937255,.992831,.877168,.633109,.941176,.99244,.88433,.640099,.945098,.992089,.89147,.647116,.94902,.991688,.898627,.654202,.952941,.991332,.905763,.661309,.956863,.99093,.912915,.668481,.960784,.99057,.920049,.675675,.964706,.990175,.927196,.682926,.968627,.989815,.934329,.690198,.972549,.989434,.94147,.697519,.976471,.989077,.948604,.704863,.980392,.988717,.955742,.712242,.984314,.988367,.962878,.719649,.988235,.988033,.970012,.727077,.992157,.987691,.977154,.734536,.996078,.987387,.984288,.742002,1,.987053,.991438,.749504]},{ColorSpace:"Diverging",Name:"Inferno (matplotlib)",NanColor:[0,1,0],Source:"https://github.com/BIDS/colormap/blob/master/colormaps.py",License:"CC0",Creator:"Nathaniel J. Smith & Stefan van der Walt",RGBPoints:[0,.001462,466e-6,.013866,.003922,.002267,.00127,.01857,.007843,.003299,.002249,.024239,.011765,.004547,.003392,.030909,.015686,.006006,.004692,.038558,.019608,.007676,.006136,.046836,.023529,.009561,.007713,.055143,.027451,.011663,.009417,.06346,.031373,.013995,.011225,.071862,.035294,.016561,.013136,.080282,.039216,.019373,.015133,.088767,.043137,.022447,.017199,.097327,.047059,.025793,.019331,.10593,.05098,.029432,.021503,.114621,.054902,.033385,.023702,.123397,.058824,.037668,.025921,.132232,.062745,.042253,.028139,.141141,.066667,.046915,.030324,.150164,.070588,.051644,.032474,.159254,.07451,.056449,.034569,.168414,.078431,.06134,.03659,.177642,.082353,.066331,.038504,.186962,.086275,.071429,.040294,.196354,.090196,.076637,.041905,.205799,.094118,.081962,.043328,.215289,.098039,.087411,.044556,.224813,.101961,.09299,.045583,.234358,.105882,.098702,.046402,.243904,.109804,.104551,.047008,.25343,.113725,.110536,.047399,.262912,.117647,.116656,.047574,.272321,.121569,.122908,.047536,.281624,.12549,.129285,.047293,.290788,.129412,.135778,.046856,.299776,.133333,.142378,.046242,.308553,.137255,.149073,.045468,.317085,.141176,.15585,.044559,.325338,.145098,.162689,.043554,.333277,.14902,.169575,.042489,.340874,.152941,.176493,.041402,.348111,.156863,.183429,.040329,.354971,.160784,.190367,.039309,.361447,.164706,.197297,.0384,.367535,.168627,.204209,.037632,.373238,.172549,.211095,.03703,.378563,.176471,.217949,.036615,.383522,.180392,.224763,.036405,.388129,.184314,.231538,.036405,.3924,.188235,.238273,.036621,.396353,.192157,.244967,.037055,.400007,.196078,.25162,.037705,.403378,.2,.258234,.038571,.406485,.203922,.26481,.039647,.409345,.207843,.271347,.040922,.411976,.211765,.27785,.042353,.414392,.215686,.284321,.043933,.416608,.219608,.290763,.045644,.418637,.223529,.297178,.04747,.420491,.227451,.303568,.049396,.422182,.231373,.309935,.051407,.423721,.235294,.316282,.05349,.425116,.239216,.32261,.055634,.426377,.243137,.328921,.057827,.427511,.247059,.335217,.06006,.428524,.25098,.3415,.062325,.429425,.254902,.347771,.064616,.430217,.258824,.354032,.066925,.430906,.262745,.360284,.069247,.431497,.266667,.366529,.071579,.431994,.270588,.372768,.073915,.4324,.27451,.379001,.076253,.432719,.278431,.385228,.078591,.432955,.282353,.391453,.080927,.433109,.286275,.397674,.083257,.433183,.290196,.403894,.08558,.433179,.294118,.410113,.087896,.433098,.298039,.416331,.090203,.432943,.301961,.422549,.092501,.432714,.305882,.428768,.09479,.432412,.309804,.434987,.097069,.432039,.313725,.441207,.099338,.431594,.317647,.447428,.101597,.43108,.321569,.453651,.103848,.430498,.32549,.459875,.106089,.429846,.329412,.4661,.108322,.429125,.333333,.472328,.110547,.428334,.337255,.478558,.112764,.427475,.341176,.484789,.114974,.426548,.345098,.491022,.117179,.425552,.34902,.497257,.119379,.424488,.352941,.503493,.121575,.423356,.356863,.50973,.123769,.422156,.360784,.515967,.12596,.420887,.364706,.522206,.12815,.419549,.368627,.528444,.130341,.418142,.372549,.534683,.132534,.416667,.376471,.54092,.134729,.415123,.380392,.547157,.136929,.413511,.384314,.553392,.139134,.411829,.388235,.559624,.141346,.410078,.392157,.565854,.143567,.408258,.396078,.572081,.145797,.406369,.4,.578304,.148039,.404411,.403922,.584521,.150294,.402385,.407843,.590734,.152563,.40029,.411765,.59694,.154848,.398125,.415686,.603139,.157151,.395891,.419608,.60933,.159474,.393589,.423529,.615513,.161817,.391219,.427451,.621685,.164184,.388781,.431373,.627847,.166575,.386276,.435294,.633998,.168992,.383704,.439216,.640135,.171438,.381065,.443137,.64626,.173914,.378359,.447059,.652369,.176421,.375586,.45098,.658463,.178962,.372748,.454902,.66454,.181539,.369846,.458824,.670599,.184153,.366879,.462745,.676638,.186807,.363849,.466667,.682656,.189501,.360757,.470588,.688653,.192239,.357603,.47451,.694627,.195021,.354388,.478431,.700576,.197851,.351113,.482353,.7065,.200728,.347777,.486275,.712396,.203656,.344383,.490196,.718264,.206636,.340931,.494118,.724103,.20967,.337424,.498039,.729909,.212759,.333861,.501961,.735683,.215906,.330245,.505882,.741423,.219112,.326576,.509804,.747127,.222378,.322856,.513725,.752794,.225706,.319085,.517647,.758422,.229097,.315266,.521569,.76401,.232554,.311399,.52549,.769556,.236077,.307485,.529412,.775059,.239667,.303526,.533333,.780517,.243327,.299523,.537255,.785929,.247056,.295477,.541176,.791293,.250856,.29139,.545098,.796607,.254728,.287264,.54902,.801871,.258674,.283099,.552941,.807082,.262692,.278898,.556863,.812239,.266786,.274661,.560784,.817341,.270954,.27039,.564706,.822386,.275197,.266085,.568627,.827372,.279517,.26175,.572549,.832299,.283913,.257383,.576471,.837165,.288385,.252988,.580392,.841969,.292933,.248564,.584314,.846709,.297559,.244113,.588235,.851384,.30226,.239636,.592157,.855992,.307038,.235133,.596078,.860533,.311892,.230606,.6,.865006,.316822,.226055,.603922,.869409,.321827,.221482,.607843,.873741,.326906,.216886,.611765,.878001,.33206,.212268,.615686,.882188,.337287,.207628,.619608,.886302,.342586,.202968,.623529,.890341,.347957,.198286,.627451,.894305,.353399,.193584,.631373,.898192,.358911,.18886,.635294,.902003,.364492,.184116,.639216,.905735,.37014,.17935,.643137,.90939,.375856,.174563,.647059,.912966,.381636,.169755,.65098,.916462,.387481,.164924,.654902,.919879,.393389,.16007,.658824,.923215,.399359,.155193,.662745,.92647,.405389,.150292,.666667,.929644,.411479,.145367,.670588,.932737,.417627,.140417,.67451,.935747,.423831,.13544,.678431,.938675,.430091,.130438,.682353,.941521,.436405,.125409,.686275,.944285,.442772,.120354,.690196,.946965,.449191,.115272,.694118,.949562,.45566,.110164,.698039,.952075,.462178,.105031,.701961,.954506,.468744,.099874,.705882,.956852,.475356,.094695,.709804,.959114,.482014,.089499,.713725,.961293,.488716,.084289,.717647,.963387,.495462,.079073,.721569,.965397,.502249,.073859,.72549,.967322,.509078,.068659,.729412,.969163,.515946,.063488,.733333,.970919,.522853,.058367,.737255,.97259,.529798,.053324,.741176,.974176,.53678,.048392,.745098,.975677,.543798,.043618,.74902,.977092,.55085,.03905,.752941,.978422,.557937,.034931,.756863,.979666,.565057,.031409,.760784,.980824,.572209,.028508,.764706,.981895,.579392,.02625,.768627,.982881,.586606,.024661,.772549,.983779,.593849,.02377,.776471,.984591,.601122,.023606,.780392,.985315,.608422,.024202,.784314,.985952,.61575,.025592,.788235,.986502,.623105,.027814,.792157,.986964,.630485,.030908,.796078,.987337,.63789,.034916,.8,.987622,.64532,.039886,.803922,.987819,.652773,.045581,.807843,.987926,.66025,.05175,.811765,.987945,.667748,.058329,.815686,.987874,.675267,.065257,.819608,.987714,.682807,.072489,.823529,.987464,.690366,.07999,.827451,.987124,.697944,.087731,.831373,.986694,.70554,.095694,.835294,.986175,.713153,.103863,.839216,.985566,.720782,.112229,.843137,.984865,.728427,.120785,.847059,.984075,.736087,.129527,.85098,.983196,.743758,.138453,.854902,.982228,.751442,.147565,.858824,.981173,.759135,.156863,.862745,.980032,.766837,.166353,.866667,.978806,.774545,.176037,.870588,.977497,.782258,.185923,.87451,.976108,.789974,.196018,.878431,.974638,.797692,.206332,.882353,.973088,.805409,.216877,.886275,.971468,.813122,.227658,.890196,.969783,.820825,.238686,.894118,.968041,.828515,.249972,.898039,.966243,.836191,.261534,.901961,.964394,.843848,.273391,.905882,.962517,.851476,.285546,.909804,.960626,.859069,.29801,.913725,.95872,.866624,.31082,.917647,.956834,.874129,.323974,.921569,.954997,.881569,.337475,.92549,.953215,.888942,.351369,.929412,.951546,.896226,.365627,.933333,.950018,.903409,.380271,.937255,.948683,.910473,.395289,.941176,.947594,.917399,.410665,.945098,.946809,.924168,.426373,.94902,.946392,.930761,.442367,.952941,.946403,.937159,.458592,.956863,.946903,.943348,.47497,.960784,.947937,.949318,.491426,.964706,.949545,.955063,.50786,.968627,.95174,.960587,.524203,.972549,.954529,.965896,.540361,.976471,.957896,.971003,.556275,.980392,.961812,.975924,.571925,.984314,.966249,.980678,.587206,.988235,.971162,.985282,.602154,.992157,.976511,.989753,.61676,.996078,.982257,.994109,.631017,1,.988362,.998364,.644924]},{ColorSpace:"Diverging",Name:"Plasma (matplotlib)",NanColor:[0,1,0],Source:"https://github.com/BIDS/colormap/blob/master/colormaps.py",License:"CC0",Creator:"Nathaniel J. Smith & Stefan van der Walt",RGBPoints:[0,.050383,.029803,.527975,.003922,.063536,.028426,.533124,.007843,.075353,.027206,.538007,.011765,.086222,.026125,.542658,.015686,.096379,.025165,.547103,.019608,.10598,.024309,.551368,.023529,.115124,.023556,.555468,.027451,.123903,.022878,.559423,.031373,.132381,.022258,.56325,.035294,.140603,.021687,.566959,.039216,.148607,.021154,.570562,.043137,.156421,.020651,.574065,.047059,.16407,.020171,.577478,.05098,.171574,.019706,.580806,.054902,.17895,.019252,.584054,.058824,.186213,.018803,.587228,.062745,.193374,.018354,.59033,.066667,.200445,.017902,.593364,.070588,.207435,.017442,.596333,.07451,.21435,.016973,.599239,.078431,.221197,.016497,.602083,.082353,.227983,.016007,.604867,.086275,.234715,.015502,.607592,.090196,.241396,.014979,.610259,.094118,.248032,.014439,.612868,.098039,.254627,.013882,.615419,.101961,.261183,.013308,.617911,.105882,.267703,.012716,.620346,.109804,.274191,.012109,.622722,.113725,.280648,.011488,.625038,.117647,.287076,.010855,.627295,.121569,.293478,.010213,.62949,.12549,.299855,.009561,.631624,.129412,.30621,.008902,.633694,.133333,.312543,.008239,.6357,.137255,.318856,.007576,.63764,.141176,.32515,.006915,.639512,.145098,.331426,.006261,.641316,.14902,.337683,.005618,.643049,.152941,.343925,.004991,.64471,.156863,.35015,.004382,.646298,.160784,.356359,.003798,.64781,.164706,.362553,.003243,.649245,.168627,.368733,.002724,.650601,.172549,.374897,.002245,.651876,.176471,.381047,.001814,.653068,.180392,.387183,.001434,.654177,.184314,.393304,.001114,.655199,.188235,.399411,859e-6,.656133,.192157,.405503,678e-6,.656977,.196078,.41158,577e-6,.65773,.2,.417642,564e-6,.65839,.203922,.423689,646e-6,.658956,.207843,.429719,831e-6,.659425,.211765,.435734,.001127,.659797,.215686,.441732,.00154,.660069,.219608,.447714,.00208,.66024,.223529,.453677,.002755,.66031,.227451,.459623,.003574,.660277,.231373,.46555,.004545,.660139,.235294,.471457,.005678,.659897,.239216,.477344,.00698,.659549,.243137,.48321,.00846,.659095,.247059,.489055,.010127,.658534,.25098,.494877,.01199,.657865,.254902,.500678,.014055,.657088,.258824,.506454,.016333,.656202,.262745,.512206,.018833,.655209,.266667,.517933,.021563,.654109,.270588,.523633,.024532,.652901,.27451,.529306,.027747,.651586,.278431,.534952,.031217,.650165,.282353,.54057,.03495,.64864,.286275,.546157,.038954,.64701,.290196,.551715,.043136,.645277,.294118,.557243,.047331,.643443,.298039,.562738,.051545,.641509,.301961,.568201,.055778,.639477,.305882,.573632,.060028,.637349,.309804,.579029,.064296,.635126,.313725,.584391,.068579,.632812,.317647,.589719,.072878,.630408,.321569,.595011,.07719,.627917,.32549,.600266,.081516,.625342,.329412,.605485,.085854,.622686,.333333,.610667,.090204,.619951,.337255,.615812,.094564,.61714,.341176,.620919,.098934,.614257,.345098,.625987,.103312,.611305,.34902,.631017,.107699,.608287,.352941,.636008,.112092,.605205,.356863,.640959,.116492,.602065,.360784,.645872,.120898,.598867,.364706,.650746,.125309,.595617,.368627,.65558,.129725,.592317,.372549,.660374,.134144,.588971,.376471,.665129,.138566,.585582,.380392,.669845,.142992,.582154,.384314,.674522,.147419,.578688,.388235,.67916,.151848,.575189,.392157,.683758,.156278,.57166,.396078,.688318,.160709,.568103,.4,.69284,.165141,.564522,.403922,.697324,.169573,.560919,.407843,.701769,.174005,.557296,.411765,.706178,.178437,.553657,.415686,.710549,.182868,.550004,.419608,.714883,.187299,.546338,.423529,.719181,.191729,.542663,.427451,.723444,.196158,.538981,.431373,.72767,.200586,.535293,.435294,.731862,.205013,.531601,.439216,.736019,.209439,.527908,.443137,.740143,.213864,.524216,.447059,.744232,.218288,.520524,.45098,.748289,.222711,.516834,.454902,.752312,.227133,.513149,.458824,.756304,.231555,.509468,.462745,.760264,.235976,.505794,.466667,.764193,.240396,.502126,.470588,.76809,.244817,.498465,.47451,.771958,.249237,.494813,.478431,.775796,.253658,.491171,.482353,.779604,.258078,.487539,.486275,.783383,.2625,.483918,.490196,.787133,.266922,.480307,.494118,.790855,.271345,.476706,.498039,.794549,.27577,.473117,.501961,.798216,.280197,.469538,.505882,.801855,.284626,.465971,.509804,.805467,.289057,.462415,.513725,.809052,.293491,.45887,.517647,.812612,.297928,.455338,.521569,.816144,.302368,.451816,.52549,.819651,.306812,.448306,.529412,.823132,.311261,.444806,.533333,.826588,.315714,.441316,.537255,.830018,.320172,.437836,.541176,.833422,.324635,.434366,.545098,.836801,.329105,.430905,.54902,.840155,.33358,.427455,.552941,.843484,.338062,.424013,.556863,.846788,.342551,.420579,.560784,.850066,.347048,.417153,.564706,.853319,.351553,.413734,.568627,.856547,.356066,.410322,.572549,.85975,.360588,.406917,.576471,.862927,.365119,.403519,.580392,.866078,.36966,.400126,.584314,.869203,.374212,.396738,.588235,.872303,.378774,.393355,.592157,.875376,.383347,.389976,.596078,.878423,.387932,.3866,.6,.881443,.392529,.383229,.603922,.884436,.397139,.37986,.607843,.887402,.401762,.376494,.611765,.89034,.406398,.37313,.615686,.89325,.411048,.369768,.619608,.896131,.415712,.366407,.623529,.898984,.420392,.363047,.627451,.901807,.425087,.359688,.631373,.904601,.429797,.356329,.635294,.907365,.434524,.35297,.639216,.910098,.439268,.34961,.643137,.9128,.444029,.346251,.647059,.915471,.448807,.34289,.65098,.918109,.453603,.339529,.654902,.920714,.458417,.336166,.658824,.923287,.463251,.332801,.662745,.925825,.468103,.329435,.666667,.928329,.472975,.326067,.670588,.930798,.477867,.322697,.67451,.933232,.48278,.319325,.678431,.93563,.487712,.315952,.682353,.93799,.492667,.312575,.686275,.940313,.497642,.309197,.690196,.942598,.502639,.305816,.694118,.944844,.507658,.302433,.698039,.947051,.512699,.299049,.701961,.949217,.517763,.295662,.705882,.951344,.52285,.292275,.709804,.953428,.52796,.288883,.713725,.95547,.533093,.28549,.717647,.957469,.53825,.282096,.721569,.959424,.543431,.278701,.72549,.961336,.548636,.275305,.729412,.963203,.553865,.271909,.733333,.965024,.559118,.268513,.737255,.966798,.564396,.265118,.741176,.968526,.5697,.261721,.745098,.970205,.575028,.258325,.74902,.971835,.580382,.254931,.752941,.973416,.585761,.25154,.756863,.974947,.591165,.248151,.760784,.976428,.596595,.244767,.764706,.977856,.602051,.241387,.768627,.979233,.607532,.238013,.772549,.980556,.613039,.234646,.776471,.981826,.618572,.231287,.780392,.983041,.624131,.227937,.784314,.984199,.629718,.224595,.788235,.985301,.63533,.221265,.792157,.986345,.640969,.217948,.796078,.987332,.646633,.214648,.8,.98826,.652325,.211364,.803922,.989128,.658043,.2081,.807843,.989935,.663787,.204859,.811765,.990681,.669558,.201642,.815686,.991365,.675355,.198453,.819608,.991985,.681179,.195295,.823529,.992541,.68703,.19217,.827451,.993032,.692907,.189084,.831373,.993456,.69881,.186041,.835294,.993814,.704741,.183043,.839216,.994103,.710698,.180097,.843137,.994324,.716681,.177208,.847059,.994474,.722691,.174381,.85098,.994553,.728728,.171622,.854902,.994561,.734791,.168938,.858824,.994495,.74088,.166335,.862745,.994355,.746995,.163821,.866667,.994141,.753137,.161404,.870588,.993851,.759304,.159092,.87451,.993482,.765499,.156891,.878431,.993033,.77172,.154808,.882353,.992505,.777967,.152855,.886275,.991897,.784239,.151042,.890196,.991209,.790537,.149377,.894118,.990439,.796859,.14787,.898039,.989587,.803205,.146529,.901961,.988648,.809579,.145357,.905882,.987621,.815978,.144363,.909804,.986509,.822401,.143557,.913725,.985314,.828846,.142945,.917647,.984031,.835315,.142528,.921569,.982653,.841812,.142303,.92549,.98119,.848329,.142279,.929412,.979644,.854866,.142453,.933333,.977995,.861432,.142808,.937255,.976265,.868016,.143351,.941176,.974443,.874622,.144061,.945098,.97253,.88125,.144923,.94902,.970533,.887896,.145919,.952941,.968443,.894564,.147014,.956863,.966271,.901249,.14818,.960784,.964021,.90795,.14937,.964706,.961681,.914672,.15052,.968627,.959276,.921407,.151566,.972549,.956808,.928152,.152409,.976471,.954287,.934908,.152921,.980392,.951726,.941671,.152925,.984314,.949151,.948435,.152178,.988235,.946602,.95519,.150328,.992157,.944152,.961916,.146861,.996078,.941896,.96859,.140956,1,.940015,.975158,.131326]},{ColorSpace:"Diverging",Name:"Viridis (matplotlib)",NanColor:[1,0,0],Source:"https://github.com/BIDS/colormap/blob/master/colormaps.py",License:"CC0",Creator:"Eric Firing",RGBPoints:[0,.267004,.004874,.329415,.003922,.26851,.009605,.335427,.007843,.269944,.014625,.341379,.011765,.271305,.019942,.347269,.015686,.272594,.025563,.353093,.019608,.273809,.031497,.358853,.023529,.274952,.037752,.364543,.027451,.276022,.044167,.370164,.031373,.277018,.050344,.375715,.035294,.277941,.056324,.381191,.039216,.278791,.062145,.386592,.043137,.279566,.067836,.391917,.047059,.280267,.073417,.397163,.05098,.280894,.078907,.402329,.054902,.281446,.08432,.407414,.058824,.281924,.089666,.412415,.062745,.282327,.094955,.417331,.066667,.282656,.100196,.42216,.070588,.28291,.105393,.426902,.07451,.283091,.110553,.431554,.078431,.283197,.11568,.436115,.082353,.283229,.120777,.440584,.086275,.283187,.125848,.44496,.090196,.283072,.130895,.449241,.094118,.282884,.13592,.453427,.098039,.282623,.140926,.457517,.101961,.28229,.145912,.46151,.105882,.281887,.150881,.465405,.109804,.281412,.155834,.469201,.113725,.280868,.160771,.472899,.117647,.280255,.165693,.476498,.121569,.279574,.170599,.479997,.12549,.278826,.17549,.483397,.129412,.278012,.180367,.486697,.133333,.277134,.185228,.489898,.137255,.276194,.190074,.493001,.141176,.275191,.194905,.496005,.145098,.274128,.199721,.498911,.14902,.273006,.20452,.501721,.152941,.271828,.209303,.504434,.156863,.270595,.214069,.507052,.160784,.269308,.218818,.509577,.164706,.267968,.223549,.512008,.168627,.26658,.228262,.514349,.172549,.265145,.232956,.516599,.176471,.263663,.237631,.518762,.180392,.262138,.242286,.520837,.184314,.260571,.246922,.522828,.188235,.258965,.251537,.524736,.192157,.257322,.25613,.526563,.196078,.255645,.260703,.528312,.2,.253935,.265254,.529983,.203922,.252194,.269783,.531579,.207843,.250425,.27429,.533103,.211765,.248629,.278775,.534556,.215686,.246811,.283237,.535941,.219608,.244972,.287675,.53726,.223529,.243113,.292092,.538516,.227451,.241237,.296485,.539709,.231373,.239346,.300855,.540844,.235294,.237441,.305202,.541921,.239216,.235526,.309527,.542944,.243137,.233603,.313828,.543914,.247059,.231674,.318106,.544834,.25098,.229739,.322361,.545706,.254902,.227802,.326594,.546532,.258824,.225863,.330805,.547314,.262745,.223925,.334994,.548053,.266667,.221989,.339161,.548752,.270588,.220057,.343307,.549413,.27451,.21813,.347432,.550038,.278431,.21621,.351535,.550627,.282353,.214298,.355619,.551184,.286275,.212395,.359683,.55171,.290196,.210503,.363727,.552206,.294118,.208623,.367752,.552675,.298039,.206756,.371758,.553117,.301961,.204903,.375746,.553533,.305882,.203063,.379716,.553925,.309804,.201239,.38367,.554294,.313725,.19943,.387607,.554642,.317647,.197636,.391528,.554969,.321569,.19586,.395433,.555276,.32549,.1941,.399323,.555565,.329412,.192357,.403199,.555836,.333333,.190631,.407061,.556089,.337255,.188923,.41091,.556326,.341176,.187231,.414746,.556547,.345098,.185556,.41857,.556753,.34902,.183898,.422383,.556944,.352941,.182256,.426184,.55712,.356863,.180629,.429975,.557282,.360784,.179019,.433756,.55743,.364706,.177423,.437527,.557565,.368627,.175841,.44129,.557685,.372549,.174274,.445044,.557792,.376471,.172719,.448791,.557885,.380392,.171176,.45253,.557965,.384314,.169646,.456262,.55803,.388235,.168126,.459988,.558082,.392157,.166617,.463708,.558119,.396078,.165117,.467423,.558141,.4,.163625,.471133,.558148,.403922,.162142,.474838,.55814,.407843,.160665,.47854,.558115,.411765,.159194,.482237,.558073,.415686,.157729,.485932,.558013,.419608,.15627,.489624,.557936,.423529,.154815,.493313,.55784,.427451,.153364,.497,.557724,.431373,.151918,.500685,.557587,.435294,.150476,.504369,.55743,.439216,.149039,.508051,.55725,.443137,.147607,.511733,.557049,.447059,.14618,.515413,.556823,.45098,.144759,.519093,.556572,.454902,.143343,.522773,.556295,.458824,.141935,.526453,.555991,.462745,.140536,.530132,.555659,.466667,.139147,.533812,.555298,.470588,.13777,.537492,.554906,.47451,.136408,.541173,.554483,.478431,.135066,.544853,.554029,.482353,.133743,.548535,.553541,.486275,.132444,.552216,.553018,.490196,.131172,.555899,.552459,.494118,.129933,.559582,.551864,.498039,.128729,.563265,.551229,.501961,.127568,.566949,.550556,.505882,.126453,.570633,.549841,.509804,.125394,.574318,.549086,.513725,.124395,.578002,.548287,.517647,.123463,.581687,.547445,.521569,.122606,.585371,.546557,.52549,.121831,.589055,.545623,.529412,.121148,.592739,.544641,.533333,.120565,.596422,.543611,.537255,.120092,.600104,.54253,.541176,.119738,.603785,.5414,.545098,.119512,.607464,.540218,.54902,.119423,.611141,.538982,.552941,.119483,.614817,.537692,.556863,.119699,.61849,.536347,.560784,.120081,.622161,.534946,.564706,.120638,.625828,.533488,.568627,.12138,.629492,.531973,.572549,.122312,.633153,.530398,.576471,.123444,.636809,.528763,.580392,.12478,.640461,.527068,.584314,.126326,.644107,.525311,.588235,.128087,.647749,.523491,.592157,.130067,.651384,.521608,.596078,.132268,.655014,.519661,.6,.134692,.658636,.517649,.603922,.137339,.662252,.515571,.607843,.14021,.665859,.513427,.611765,.143303,.669459,.511215,.615686,.146616,.67305,.508936,.619608,.150148,.676631,.506589,.623529,.153894,.680203,.504172,.627451,.157851,.683765,.501686,.631373,.162016,.687316,.499129,.635294,.166383,.690856,.496502,.639216,.170948,.694384,.493803,.643137,.175707,.6979,.491033,.647059,.180653,.701402,.488189,.65098,.185783,.704891,.485273,.654902,.19109,.708366,.482284,.658824,.196571,.711827,.479221,.662745,.202219,.715272,.476084,.666667,.20803,.718701,.472873,.670588,.214,.722114,.469588,.67451,.220124,.725509,.466226,.678431,.226397,.728888,.462789,.682353,.232815,.732247,.459277,.686275,.239374,.735588,.455688,.690196,.24607,.73891,.452024,.694118,.252899,.742211,.448284,.698039,.259857,.745492,.444467,.701961,.266941,.748751,.440573,.705882,.274149,.751988,.436601,.709804,.281477,.755203,.432552,.713725,.288921,.758394,.428426,.717647,.296479,.761561,.424223,.721569,.304148,.764704,.419943,.72549,.311925,.767822,.415586,.729412,.319809,.770914,.411152,.733333,.327796,.77398,.40664,.737255,.335885,.777018,.402049,.741176,.344074,.780029,.397381,.745098,.35236,.783011,.392636,.74902,.360741,.785964,.387814,.752941,.369214,.788888,.382914,.756863,.377779,.791781,.377939,.760784,.386433,.794644,.372886,.764706,.395174,.797475,.367757,.768627,.404001,.800275,.362552,.772549,.412913,.803041,.357269,.776471,.421908,.805774,.35191,.780392,.430983,.808473,.346476,.784314,.440137,.811138,.340967,.788235,.449368,.813768,.335384,.792157,.458674,.816363,.329727,.796078,.468053,.818921,.323998,.8,.477504,.821444,.318195,.803922,.487026,.823929,.312321,.807843,.496615,.826376,.306377,.811765,.506271,.828786,.300362,.815686,.515992,.831158,.294279,.819608,.525776,.833491,.288127,.823529,.535621,.835785,.281908,.827451,.545524,.838039,.275626,.831373,.555484,.840254,.269281,.835294,.565498,.84243,.262877,.839216,.575563,.844566,.256415,.843137,.585678,.846661,.249897,.847059,.595839,.848717,.243329,.85098,.606045,.850733,.236712,.854902,.616293,.852709,.230052,.858824,.626579,.854645,.223353,.862745,.636902,.856542,.21662,.866667,.647257,.8584,.209861,.870588,.657642,.860219,.203082,.87451,.668054,.861999,.196293,.878431,.678489,.863742,.189503,.882353,.688944,.865448,.182725,.886275,.699415,.867117,.175971,.890196,.709898,.868751,.169257,.894118,.720391,.87035,.162603,.898039,.730889,.871916,.156029,.901961,.741388,.873449,.149561,.905882,.751884,.874951,.143228,.909804,.762373,.876424,.137064,.913725,.772852,.877868,.131109,.917647,.783315,.879285,.125405,.921569,.79376,.880678,.120005,.92549,.804182,.882046,.114965,.929412,.814576,.883393,.110347,.933333,.82494,.88472,.106217,.937255,.83527,.886029,.102646,.941176,.845561,.887322,.099702,.945098,.85581,.888601,.097452,.94902,.866013,.889868,.095953,.952941,.876168,.891125,.09525,.956863,.886271,.892374,.095374,.960784,.89632,.893616,.096335,.964706,.906311,.894855,.098125,.968627,.916242,.896091,.100717,.972549,.926106,.89733,.104071,.976471,.935904,.89857,.108131,.980392,.945636,.899815,.112838,.984314,.9553,.901065,.118128,.988235,.964894,.902323,.123941,.992157,.974417,.90359,.130215,.996078,.983868,.904867,.136897,1,.993248,.906157,.143936]},{ShowIndexedColorActiveValues:1,IndexedColors:[.07,.5,.7,1,1,1,.85,1,1,.8,.5,1,.76,1,0,1,.71,.71,.5,.5,.5,.05,.05,1,1,.05,.05,.7,1,1,.7,.89,.96,.67,.36,.95,.54,1,0,.75,.65,.65,.5,.6,.6,1,.5,0,1,1,.19,.12,.94,.12,.5,.82,.89,.56,.25,.83,.24,1,0,.9,.9,.9,.75,.76,.78,.65,.65,.67,.54,.6,.78,.61,.48,.78,.5,.48,.78,.44,.48,.78,.36,.48,.76,1,.48,.38,.49,.5,.69,.76,.56,.56,.4,.56,.56,.74,.5,.89,1,.63,0,.65,.16,.16,.36,.72,.82,.44,.18,.69,0,1,0,.58,1,1,.58,.88,.88,.45,.76,.79,.33,.71,.71,.23,.62,.62,.14,.56,.56,.04,.49,.55,0,.41,.52,.88,.88,1,1,.85,.56,.65,.46,.45,.4,.5,.5,.62,.39,.71,.83,.48,0,.58,0,.58,.26,.62,.69,.34,.09,.56,0,.79,0,.44,.83,1,1,1,.78,.85,1,.78,.78,1,.78,.64,1,.78,.56,1,.78,.38,1,.78,.27,1,.78,.19,1,.78,.12,1,.78,0,1,.61,0,.9,.46,0,.83,.32,0,.75,.22,0,.67,.14,.3,.76,1,.3,.65,1,.13,.58,.84,.15,.49,.67,.15,.4,.59,.09,.33,.53,.96,.93,.82,.8,.82,.12,.71,.71,.76,.65,.33,.3,.34,.35,.38,.62,.31,.71,.67,.36,0,.46,.31,.27,.26,.51,.59,.26,0,.4,0,.49,0,.44,.67,.98,0,.73,1,0,.63,1,0,.56,1,0,.5,1,0,.42,1,.33,.36,.95,.47,.36,.89,.54,.31,.89,.63,.21,.83,.7,.12,.83,.7,.12,.73,.7,.05,.65,.74,.05,.53,.78,0,.4,.8,0,.35,.82,0,.31,.85,0,.27,.88,0,.22,.9,0,.18,.91,0,.15,.92,0,.14,.93,0,.13,.94,0,.12,.95,0,.11,.96,0,.1,.97,0,.09,.98,0,.08,.99,0,.07,1,0,.06],Annotations:[0,"Xx",1,"H",2,"He",3,"Li",4,"Be",5,"B",6,"C",7,"N",8,"O",9,"F",10,"Ne",11,"Na",12,"Mg",13,"Al",14,"Si",15,"P",16,"S",17,"Cl",18,"Ar",19,"K",20,"Ca",21,"Sc",22,"Ti",23,"V",24,"Cr",25,"Mn",26,"Fe",27,"Co",28,"Ni",29,"Cu",30,"Zn",31,"Ga",32,"Ge",33,"As",34,"Se",35,"Br",36,"Kr",37,"Rb",38,"Sr",39,"Y",40,"Zr",41,"Nb",42,"Mo",43,"Tc",44,"Ru",45,"Rh",46,"Pd",47,"Ag",48,"Cd",49,"In",50,"Sn",51,"Sb",52,"Te",53,"I",54,"Xe",55,"Cs",56,"Ba",57,"La",58,"Ce",59,"Pr",60,"Nd",61,"Pm",62,"Sm",63,"Eu",64,"Gd",65,"Tb",66,"Dy",67,"Ho",68,"Er",69,"Tm",70,"Yb",71,"Lu",72,"Hf",73,"Ta",74,"W",75,"Re",76,"Os",77,"Ir",78,"Pt",79,"Au",80,"Hg",81,"Tl",82,"Pb",83,"Bi",84,"Po",85,"At",86,"Rn",87,"Fr",88,"Ra",89,"Ac",90,"Th",91,"Pa",92,"U",93,"Np",94,"Pu",95,"Am",96,"Cm",97,"Bk",98,"Cf",99,"Es",100,"Fm",101,"Md",102,"No",103,"Lr",104,"Rf",105,"Db",106,"Sg",107,"Bh",108,"Hs",109,"Mt",110,"Ds",111,"Rg",112,"Cn",113,"Uut",114,"Uuq",115,"Uup",116,"Uuh",117,"Uus",118,"Uuo"],Name:"BlueObeliskElements"}];const cv=Object.create(null);xie.filter(t=>t.RGBPoints).filter(t=>t.ColorSpace!=="CIELAB").forEach(t=>{cv[t.Name]=t});const lv=Object.keys(cv);lv.sort();function Rie(t){return cv[t]}function bie(t){!t.RGBPoints||t.ColorSpace==="CIELAB"||(cv[t.Name]||(lv.push(t.Name),lv.sort()),cv[t.Name]=t)}function Nie(t){const e=lv.indexOf(t);e>-1&&lv.splice(e,1),delete cv[t]}var LS={addPreset:bie,removePresetByName:Nie,getPresetByName:Rie,rgbPresetNames:lv};function da(t){return Yd.get(t)}function to(){return Yd.getAll()}const US=t=>t&&typeof t=="object"&&Object.prototype.toString.call(t)!=="[object RegExp]"&&Object.prototype.toString.call(t)!=="[object Date]",Lie=t=>Array.isArray(t)?[]:{},tm=(t,e)=>e&&e.clone===!0&&US(t)?pi(Lie(t),t,e):t,sw=(t,e,n)=>{const r=t.slice();return e.forEach(function(a,i){typeof r[i]>"u"?r[i]=tm(a,n):US(a)?r[i]=pi(t[i],a,n):t.indexOf(a)===-1&&(r[i]=tm(a,n))}),r},Uie=(t,e,n)=>{const r={};return US(t)&&Object.keys(t).forEach(function(a){r[a]=tm(t[a],n)}),Object.keys(e).forEach(function(a){!US(e[a])||!t[a]?r[a]=tm(e[a],n):r[a]=pi(t[a],e[a],n)}),r},pi=(t={},e={},n=void 0)=>{const r=Array.isArray(e),i=(n||{arrayMerge:sw}).arrayMerge||sw;return r?Array.isArray(t)?i(t,e,n):tm(e,n):Uie(t,e,n)};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const zL=Symbol("Comlink.proxy"),Fie=Symbol("Comlink.endpoint"),qL=Symbol("Comlink.releaseProxy"),sE=Symbol("Comlink.finalizer"),G2=Symbol("Comlink.thrown"),jL=t=>typeof t=="object"&&t!==null||typeof t=="function",Vie={canHandle:t=>jL(t)&&t[zL],serialize(t){const{port1:e,port2:n}=new MessageChannel;return O5(t,e),[n,[n]]},deserialize(t){return t.start(),UT(t)}},kie={canHandle:t=>jL(t)&&G2 in t,serialize({value:t}){let e;return t instanceof Error?e={isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:e={isError:!1,value:t},[e,[]]},deserialize(t){throw t.isError?Object.assign(new Error(t.value.message),t.value):t.value}},QL=new Map([["proxy",Vie],["throw",kie]]);function Gie(t,e){for(const n of t)if(e===n||n==="*"||n instanceof RegExp&&n.test(e))return!0;return!1}function O5(t,e=globalThis,n=["*"]){e.addEventListener("message",function r(a){if(!a||!a.data)return;if(!Gie(n,a.origin)){console.warn(`Invalid origin '${a.origin}' for comlink proxy`);return}const{id:i,type:o,path:s}=Object.assign({path:[]},a.data),c=(a.data.argumentList||[]).map(Qu);let l;try{const u=s.slice(0,-1).reduce((v,g)=>v[g],t),f=s.reduce((v,g)=>v[g],t);switch(o){case"GET":l=f;break;case"SET":u[s.slice(-1)[0]]=Qu(a.data.value),l=!0;break;case"APPLY":l=f.apply(u,c);break;case"CONSTRUCT":{const v=new f(...c);l=ZL(v)}break;case"ENDPOINT":{const{port1:v,port2:g}=new MessageChannel;O5(t,g),l=zie(v,[v])}break;case"RELEASE":l=void 0;break;default:return}}catch(u){l={value:u,[G2]:0}}Promise.resolve(l).catch(u=>({value:u,[G2]:0})).then(u=>{const[f,v]=kS(u);e.postMessage(Object.assign(Object.assign({},f),{id:i}),v),o==="RELEASE"&&(e.removeEventListener("message",r),KL(e),sE in t&&typeof t[sE]=="function"&&t[sE]())}).catch(u=>{const[f,v]=kS({value:new TypeError("Unserializable return value"),[G2]:0});e.postMessage(Object.assign(Object.assign({},f),{id:i}),v)})}),e.start&&e.start()}function Bie(t){return t.constructor.name==="MessagePort"}function KL(t){Bie(t)&&t.close()}function UT(t,e){const n=new Map;return t.addEventListener("message",function(a){const{data:i}=a;if(!i||!i.id)return;const o=n.get(i.id);if(o)try{o(i)}finally{n.delete(i.id)}}),FT(t,n,[],e)}function Ip(t){if(t)throw new Error("Proxy has been released and is not useable")}function XL(t){return Df(t,new Map,{type:"RELEASE"}).then(()=>{KL(t)})}const FS=new WeakMap,VS="FinalizationRegistry"in globalThis&&new FinalizationRegistry(t=>{const e=(FS.get(t)||0)-1;FS.set(t,e),e===0&&XL(t)});function Wie(t,e){const n=(FS.get(e)||0)+1;FS.set(e,n),VS&&VS.register(t,e,t)}function Hie(t){VS&&VS.unregister(t)}function FT(t,e,n=[],r=function(){}){let a=!1;const i=new Proxy(r,{get(o,s){if(Ip(a),s===qL)return()=>{Hie(i),XL(t),e.clear(),a=!0};if(s==="then"){if(n.length===0)return{then:()=>i};const c=Df(t,e,{type:"GET",path:n.map(l=>l.toString())}).then(Qu);return c.then.bind(c)}return FT(t,e,[...n,s])},set(o,s,c){Ip(a);const[l,u]=kS(c);return Df(t,e,{type:"SET",path:[...n,s].map(f=>f.toString()),value:l},u).then(Qu)},apply(o,s,c){Ip(a);const l=n[n.length-1];if(l===Fie)return Df(t,e,{type:"ENDPOINT"}).then(Qu);if(l==="bind")return FT(t,e,n.slice(0,-1));const[u,f]=cw(c);return Df(t,e,{type:"APPLY",path:n.map(v=>v.toString()),argumentList:u},f).then(Qu)},construct(o,s){Ip(a);const[c,l]=cw(s);return Df(t,e,{type:"CONSTRUCT",path:n.map(u=>u.toString()),argumentList:c},l).then(Qu)}});return Wie(i,t),i}function $ie(t){return Array.prototype.concat.apply([],t)}function cw(t){const e=t.map(kS);return[e.map(n=>n[0]),$ie(e.map(n=>n[1]))]}const YL=new WeakMap;function zie(t,e){return YL.set(t,e),t}function ZL(t){return Object.assign(t,{[zL]:!0})}function kS(t){for(const[e,n]of QL)if(n.canHandle(t)){const[r,a]=n.serialize(t);return[{type:"HANDLER",name:e,value:r},a]}return[{type:"RAW",value:t},YL.get(t)||[]]}function Qu(t){switch(t.type){case"HANDLER":return QL.get(t.name).deserialize(t.value);case"RAW":return t.value}}function Df(t,e,n,r){return new Promise(a=>{const i=qie();e.set(i,a),t.start&&t.start(),t.postMessage(Object.assign({id:i},n),r)})}function qie(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}class w5{constructor(e){this.numRequests={[bn.Interaction]:0,[bn.Thumbnail]:0,[bn.Prefetch]:0,[bn.Compute]:0},this.id=e||Cr(),this.requestPool={[bn.Interaction]:{0:[]},[bn.Thumbnail]:{0:[]},[bn.Prefetch]:{0:[]},[bn.Compute]:{0:[]}},this.grabDelay=5,this.awake=!1,this.numRequests={[bn.Interaction]:0,[bn.Thumbnail]:0,[bn.Prefetch]:0,[bn.Compute]:0},this.maxNumRequests={[bn.Interaction]:6,[bn.Thumbnail]:6,[bn.Prefetch]:5,[bn.Compute]:1e3}}setMaxSimultaneousRequests(e,n){this.maxNumRequests[e]=n}getMaxSimultaneousRequests(e){return this.maxNumRequests[e]}destroy(){this.timeoutHandle&&window.clearTimeout(this.timeoutHandle)}addRequest(e,n,r,a=0){const i={requestFn:e,type:n,additionalDetails:r};this.requestPool[n][a]===void 0&&(this.requestPool[n][a]=[]),this.requestPool[n][a].push(i),this.startGrabbing()}filterRequests(e){Object.keys(this.requestPool).forEach(n=>{const r=this.requestPool[n];Object.keys(r).forEach(a=>{r[a]=r[a].filter(i=>e(i))})})}clearRequestStack(e){if(!this.requestPool[e])throw new Error(`No category for the type ${e} found`);this.requestPool[e]={0:[]}}sendRequests(e){const n=this.maxNumRequests[e]-this.numRequests[e];let r=0;for(let a=0;a<n;a++){const i=this.getNextRequest(e);if(i===null)return!1;if(i){this.numRequests[e]++,this.awake=!0;let o;try{o=i.requestFn()}catch(s){console.warn("sendRequest failed",s)}o!=null&&o.finally?o.finally(()=>{this.numRequests[e]--,this.startAgain()}):(this.numRequests[e]--,r++)}}return r&&this.startAgain(),!0}getNextRequest(e){const n=this.getSortedPriorityGroups(e);for(const r of n)if(this.requestPool[e][r].length)return this.requestPool[e][r].shift();return null}startGrabbing(){const e=this.sendRequests(bn.Interaction),n=this.sendRequests(bn.Thumbnail),r=this.sendRequests(bn.Prefetch),a=this.sendRequests(bn.Compute);!e&&!n&&!r&&!a&&(this.awake=!1)}startAgain(){this.awake&&(this.grabDelay!==void 0?this.timeoutHandle||(this.timeoutHandle=window.setTimeout(()=>{this.timeoutHandle=null,this.startGrabbing()},this.grabDelay)):this.startGrabbing())}getSortedPriorityGroups(e){return Object.keys(this.requestPool[e]).map(Number).filter(r=>this.requestPool[e][r].length).sort((r,a)=>r-a)}getRequestPool(){return this.requestPool}}class JL{constructor(){this.workerRegistry={},this.workerPoolManager=new w5("webworker")}registerWorker(e,n,r={}){var c;const{maxWorkerInstances:a=1,overwrite:i=!1,autoTerminateOnIdle:o={enabled:!1,idleTimeThreshold:3e3}}=r;if(this.workerRegistry[e]&&!i){console.warn(`Worker type '${e}' is already registered...`);return}i&&((c=this.workerRegistry[e])!=null&&c.idleCheckIntervalId)&&clearInterval(this.workerRegistry[e].idleCheckIntervalId);const s={workerFn:null,instances:[],loadCounters:[],lastActiveTime:[],nativeWorkers:[],autoTerminateOnIdle:o.enabled,idleCheckIntervalId:null,idleTimeThreshold:o.idleTimeThreshold};s.loadCounters=Array(a).fill(0),s.lastActiveTime=Array(a).fill(null);for(let l=0;l<a;l++){const u=n();s.instances.push(UT(u)),s.nativeWorkers.push(u),s.workerFn=n}this.workerRegistry[e]=s}getNextWorkerAPI(e){const n=this.workerRegistry[e];if(!n)return console.error(`Worker type '${e}' is not registered.`),null;const r=n.instances.filter(o=>o!==null);let a=0,i=n.loadCounters[0]||0;for(let o=1;o<r.length;o++){const s=n.loadCounters[o]||0;s<i&&(a=o,i=s)}if(n.instances[a]===null){const o=n.workerFn();n.instances[a]=UT(o),n.nativeWorkers[a]=o}return n.loadCounters[a]+=1,{api:n.instances[a],index:a}}executeTask(e,n,r={},{requestType:a=bn.Compute,priority:i=0,options:o={},callbacks:s=[]}={}){return new Promise((c,l)=>{const u=async()=>{const{api:f,index:v}=this.getNextWorkerAPI(e);if(!f){const g=new Error(`No available worker instance for '${e}'`);console.error(g),l(g);return}try{let g=[];s.length&&(g=s.map(h=>ZL(h)));const d=this.workerRegistry[e];d.processing=!0;const m=await f[n](r,...g);d.processing=!1,d.lastActiveTime[v]=Date.now(),d.autoTerminateOnIdle&&!d.idleCheckIntervalId&&d.idleTimeThreshold&&(d.idleCheckIntervalId=setInterval(()=>{this.terminateIdleWorkers(e,d.idleTimeThreshold)},d.idleTimeThreshold)),c(m)}catch(g){console.error(`Error executing method '${n}' on worker '${e}':`,g),l(g)}finally{this.workerRegistry[e].loadCounters[v]--}};this.workerPoolManager.addRequest(u,a,o,i)})}terminateIdleWorkers(e,n){const r=this.workerRegistry[e];if(r.processing)return;const a=Date.now();r.instances.forEach((i,o)=>{const s=r.lastActiveTime[o],c=s!==null&&r.loadCounters[o]>0,l=a-s;!c&&l>n&&this.terminateWorkerInstance(e,o)})}terminate(e){const n=this.workerRegistry[e];if(!n){console.error(`Worker type '${e}' is not registered.`);return}n.instances.forEach((r,a)=>{this.terminateWorkerInstance(e,a)})}terminateWorkerInstance(e,n){const r=this.workerRegistry[e],a=r.instances[n];a!==null&&(a[qL](),r.nativeWorkers[n].terminate(),r.instances[n]=null,r.lastActiveTime[n]=null)}}let Ll=!1;const VT={gpuTier:{tier:2},isMobile:!1,rendering:{useCPURendering:!1,preferSizeOverAccuracy:!1,strictZSpacingForVolumeViewport:!0},peerImport:t=>null};let t0={...VT,rendering:{...VT.rendering}},dd=null;function jie(){const t=document.createElement("canvas");return t.getContext("webgl2")||t.getContext("webgl")||t.getContext("experimental-webgl")}function eU(){const t=jie();return t instanceof WebGLRenderingContext||t instanceof WebGL2RenderingContext}function tU(){return/iPad|iPhone|iPod/.test(navigator.platform)?!0:navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&navigator.platform.includes("MacIntel")}function nU(t=t0){var n;return Ll||(t0=pi(VT,t),tU()&&((n=t.rendering)!=null&&n.preferSizeOverAccuracy?t0.rendering.preferSizeOverAccuracy=!0:console.log("norm16 texture not supported, you can turn on the preferSizeOverAccuracy flag to use native data type, but be aware of the inaccuracy of the rendering in high bits")),eU()?console.log("CornerstoneRender: using GPU rendering"):(console.log("CornerstoneRender: GPU not detected, using CPU rendering"),t0.rendering.useCPURendering=!0),Ll=!0,dd||(dd=new JL),Ll)}function Qie(t,e=!0){t0.rendering.useCPURendering=t,Ll=!0,e&&SI()}function Kie(t){t0.rendering.preferSizeOverAccuracy=t,Ll=!0,SI()}function hI(){return!tU()}function Xie(){t0.rendering.useCPURendering=!eU(),SI()}function Hf(){return t0.rendering.useCPURendering}function rU(){return Ll}function Yie(){Ll=!1}function pI(){return t0}function Zie(t){t0=t,SI()}function SI(){to().forEach(t=>{t.getViewports().forEach(e=>{e.updateRenderingPipeline()})})}function Zc(){return dd||(dd=new JL),dd}function aU(t){return t0.peerImport(t)}function iU(t,e,n){return Math.abs(t-e)<=n}function Jie(t,e,n=1e-5){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!iU(t[r],e[r],n))return!1;return!0}function lw(t){return typeof t=="number"}function uw(t){return t&&typeof t=="object"&&"length"in t&&typeof t.length=="number"&&t.length>0&&typeof t[0]=="number"}function gn(t,e,n=1e-5){return typeof t!=typeof e||t===null||e===null?!1:lw(t)&&lw(e)?iU(t,e,n):uw(t)&&uw(e)?Jie(t,e,n):!1}const oU=t=>typeof t=="number"?-t:t!=null&&t.map?t.map(oU):!t,kT=t=>typeof t=="number"?Math.abs(t):t!=null&&t.map?t.map(kT):t,sU=(t,e,n=void 0)=>gn(t,oU(e),n),eoe=(t,e,n=void 0)=>gn(kT(t),kT(e),n),P5=new Map;function toe(t){P5.set(t.Name,t)}function nm(t){return P5.get(t)}function cU(){return Array.from(P5.keys())}function A5(t,e){const n=LS.rgbPresetNames.map(s=>LS.getPresetByName(s)),r=cU().map(s=>nm(s)),i=n.concat(r).find(s=>{const{RGBPoints:c}=s;if(c.length!==t.length)return!1;for(let l=0;l<c.length;l+=4)if(!gn(c.slice(l+1,l+4),t.slice(l+1,l+4)))return!1;return!0});if(!i)return null;const o=[];if(Vo(e,"vtkVolume")){const s=e.getProperty().getScalarOpacity(0).getDataPointer();if(!s)return{name:i.Name};for(let c=0;c<s.length;c+=2)o.push({value:s[c],opacity:s[c+1]})}return{name:i.Name,opacity:o}}const noe=Object.freeze(Object.defineProperty({__proto__:null,findMatchingColormap:A5,getColormap:nm,getColormapNames:cU,registerColormap:toe},Symbol.toStringTag,{value:"Module"}));function md(t){if(!t)return;const e=t.getSize();for(let n=0;n<e;n++){const r=[];t.getNodeValue(n,r),r[1]=1-r[1],r[2]=1-r[2],r[3]=1-r[3],t.setNodeValue(n,r)}}const GT=(t,e,n)=>e-n/4*Math.log((1-t)/t);function Uv(t,e){const n=Math.abs(e-t)+1,r=(t+e+1)/2;return{windowWidth:n,windowCenter:r}}function Bl(t,e,n=So.LINEAR){if(n===So.LINEAR)return{lower:e-.5-(t-1)/2,upper:e-.5+(t-1)/2};if(n===So.LINEAR_EXACT)return{lower:e-t/2,upper:e+t/2};if(n===So.SAMPLED_SIGMOID){const r=GT(.01,e,t),a=GT(.99,e,t);return{lower:r,upper:a}}else throw new Error("Invalid VOI LUT function")}const roe=Object.freeze(Object.defineProperty({__proto__:null,toLowHighRange:Bl,toWindowLevel:Uv},Symbol.toStringTag,{value:"Module"}));function x5(t,e=1024){const{windowWidth:n,windowCenter:r}=Uv(t.lower,t.upper),i=Array.from({length:e},(s,c)=>(c+1)/(e+2)).flatMap(s=>[GT(s,r,n),s,s,s,.5,0]),o=iu.newInstance();return o.buildFunctionFromArray(fn.newInstance({values:i,numberOfComponents:6})),o}function Da(t,e){return t.worldToIndex(e).map(Math.round)}function B2(t,e){return t.worldToIndex(e)}function GS(t){const e=t.getSize(),n=[];for(let r=0;r<e;r++){const a=[];t.getNodeValue(r,a),n.push(a)}return n}function CI(t,e){e!=null&&e.length&&(t.removeAllPoints(),e.forEach(n=>{t.addRGBPoint(...n)}))}const aoe=Object.freeze(Object.defineProperty({__proto__:null,getTransferFunctionNodes:GS,setTransferFunctionNodes:CI},Symbol.toStringTag,{value:"Module"})),{InterpolationType:zg,OpacityMode:ioe}=nL,{vtkErrorMacro:cE}=J,W2=4;function ooe(t,e){e.classHierarchy.push("vtkVolumeProperty"),t.getMTime=()=>{let a=e.mtime,i;for(let o=0;o<W2;o++)e.componentData[o].colorChannels===1?e.componentData[o].grayTransferFunction&&(i=e.componentData[o].grayTransferFunction.getMTime(),a=a>i?a:i):e.componentData[o].colorChannels===3&&e.componentData[o].rGBTransferFunction&&(i=e.componentData[o].rGBTransferFunction.getMTime(),a=a>i?a:i),e.componentData[o].scalarOpacity&&(i=e.componentData[o].scalarOpacity.getMTime(),a=a>i?a:i),e.componentData[o].gradientOpacity&&(e.componentData[o].disableGradientOpacity||(i=e.componentData[o].gradientOpacity.getMTime(),a=a>i?a:i));return a},t.getColorChannels=a=>a<0||a>3?(cE("Bad index - must be between 0 and 3"),0):e.componentData[a].colorChannels,t.setGrayTransferFunction=function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,o=!1;return e.componentData[a].grayTransferFunction!==i&&(e.componentData[a].grayTransferFunction=i,o=!0),e.componentData[a].colorChannels!==1&&(e.componentData[a].colorChannels=1,o=!0),o&&t.modified(),o},t.getGrayTransferFunction=function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.componentData[a].grayTransferFunction===null&&(e.componentData[a].grayTransferFunction=sv.newInstance(),e.componentData[a].grayTransferFunction.addPoint(0,0),e.componentData[a].grayTransferFunction.addPoint(1024,1),e.componentData[a].colorChannels!==1&&(e.componentData[a].colorChannels=1),t.modified()),e.componentData[a].grayTransferFunction},t.setRGBTransferFunction=function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,o=!1;return e.componentData[a].rGBTransferFunction!==i&&(e.componentData[a].rGBTransferFunction=i,o=!0),e.componentData[a].colorChannels!==3&&(e.componentData[a].colorChannels=3,o=!0),o&&t.modified(),o},t.getRGBTransferFunction=function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.componentData[a].rGBTransferFunction===null&&(e.componentData[a].rGBTransferFunction=iu.newInstance(),e.componentData[a].rGBTransferFunction.addRGBPoint(0,0,0,0),e.componentData[a].rGBTransferFunction.addRGBPoint(1024,1,1,1),e.componentData[a].colorChannels!==3&&(e.componentData[a].colorChannels=3),t.modified()),e.componentData[a].rGBTransferFunction},t.setScalarOpacity=function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return e.componentData[a].scalarOpacity!==i?(e.componentData[a].scalarOpacity=i,t.modified(),!0):!1},t.getScalarOpacity=function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.componentData[a].scalarOpacity===null&&(e.componentData[a].scalarOpacity=sv.newInstance(),e.componentData[a].scalarOpacity.addPoint(0,1),e.componentData[a].scalarOpacity.addPoint(1024,1),t.modified()),e.componentData[a].scalarOpacity},t.setComponentWeight=function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;if(a<0||a>=W2)return cE("Invalid index"),!1;const o=Math.min(1,Math.max(0,i));return e.componentData[a].componentWeight!==o?(e.componentData[a].componentWeight=o,t.modified(),!0):!1},t.getComponentWeight=function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return a<0||a>=W2?(cE("Invalid index"),0):e.componentData[a].componentWeight},t.setInterpolationTypeToNearest=()=>t.setInterpolationType(zg.NEAREST),t.setInterpolationTypeToLinear=()=>t.setInterpolationType(zg.LINEAR),t.setInterpolationTypeToFastLinear=()=>t.setInterpolationType(zg.FAST_LINEAR),t.getInterpolationTypeAsString=()=>J.enumToString(zg,e.interpolationType),["useGradientOpacity","scalarOpacityUnitDistance","gradientOpacityMinimumValue","gradientOpacityMinimumOpacity","gradientOpacityMaximumValue","gradientOpacityMaximumOpacity","opacityMode","forceNearestInterpolation"].forEach(a=>{const i=J.capitalize(a);t[`set${i}`]=(o,s)=>e.componentData[o][`${a}`]!==s?(e.componentData[o][`${a}`]=s,t.modified(),!0):!1}),["useGradientOpacity","scalarOpacityUnitDistance","gradientOpacityMinimumValue","gradientOpacityMinimumOpacity","gradientOpacityMaximumValue","gradientOpacityMaximumOpacity","opacityMode","forceNearestInterpolation"].forEach(a=>{const i=J.capitalize(a);t[`get${i}`]=o=>e.componentData[o][`${a}`]})}const soe={colorMixPreset:null,independentComponents:!0,interpolationType:zg.FAST_LINEAR,shade:!1,ambient:.1,diffuse:.7,specular:.2,specularPower:10,useLabelOutline:!1,labelOutlineThickness:[1],labelOutlineOpacity:1};function lU(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Object.assign(e,soe,n),J.obj(t,e),!e.componentData){e.componentData=[];for(let r=0;r<W2;++r)e.componentData.push({colorChannels:1,grayTransferFunction:null,rGBTransferFunction:null,scalarOpacity:null,scalarOpacityUnitDistance:1,opacityMode:ioe.FRACTIONAL,gradientOpacityMinimumValue:0,gradientOpacityMinimumOpacity:0,gradientOpacityMaximumValue:1,gradientOpacityMaximumOpacity:1,useGradientOpacity:!1,componentWeight:1,forceNearestInterpolation:!1})}J.setGet(t,e,["colorMixPreset","independentComponents","interpolationType","shade","ambient","diffuse","specular","specularPower","useLabelOutline","labelOutlineOpacity"]),J.setGetArray(t,e,["labelOutlineThickness"]),ooe(t,e)}const coe=J.newInstance(lU,"vtkVolumeProperty");var loe={newInstance:coe,extend:lU,...nL};const{vtkDebugMacro:uoe}=J;function foe(t,e){e.classHierarchy.push("vtkVolume"),t.getVolumes=()=>t,t.makeProperty=loe.newInstance,t.getProperty=()=>(e.property===null&&(e.property=t.makeProperty()),e.property),t.getBounds=()=>{if(e.mapper===null)return e.bounds;const n=e.mapper.getBounds();if(!n||n.length!==6)return n;if(n[0]>n[1])return e.mapperBounds=n.concat(),e.bounds=[1,-1,1,-1,1,-1],e.boundsMTime.modified(),n;const r=a=>a[0].map((i,o)=>a.map(s=>s[o]));if(!e.mapperBounds||!r([n,e.mapperBounds]).reduce((a,i)=>a&&i[0]===i[1],!0)||t.getMTime()>e.boundsMTime.getMTime()){uoe("Recomputing bounds..."),e.mapperBounds=n.map(o=>o);const a=[];Pr.getCorners(n,a),t.computeMatrix();const i=new Float64Array(16);$n(i,e.matrix),a.forEach(o=>un(o,o,i)),e.bounds[0]=e.bounds[2]=e.bounds[4]=Number.MAX_VALUE,e.bounds[1]=e.bounds[3]=e.bounds[5]=-Number.MAX_VALUE,e.bounds=e.bounds.map((o,s)=>s%2===0?a.reduce((c,l)=>c>l[s/2]?l[s/2]:c,o):a.reduce((c,l)=>c<l[(s-1)/2]?l[(s-1)/2]:c,o)),e.boundsMTime.modified()}return e.bounds},t.getMTime=()=>{let n=e.mtime;if(e.property!==null){const r=e.property.getMTime();n=r>n?r:n}return n},t.getRedrawMTime=()=>{let n=e.mtime;if(e.mapper!==null){let r=e.mapper.getMTime();n=r>n?r:n,e.mapper.getInput()!==null&&(e.mapper.getInputAlgorithm().update(),r=e.mapper.getInput().getMTime(),n=r>n?r:n)}return n}}const voe={mapper:null,property:null,bounds:[1,-1,1,-1,1,-1]};function uU(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,voe,n),M5.extend(t,e,n),e.boundsMTime={},J.obj(e.boundsMTime),J.set(t,e,["property"]),J.setGet(t,e,["mapper"]),J.getArray(t,e,["bounds"],6),foe(t,e)}const goe=J.newInstance(uU,"vtkVolume");var doe={newInstance:goe,extend:uU};const{vtkErrorMacro:moe}=J;class hoe{constructor(){this.segmentMapping={},this.segments=[null],this.faces=[]}addSegment(e){const n=e[0],r=e[e.length-1];if(n===r||e.length<2)return;const a=this.segmentMapping[n],i=this.segmentMapping[r];if(a!==void 0&&i!==void 0)if(Math.abs(a)===Math.abs(i)){const o=a<i?i:a,s=this.segments[o];if(a>0)for(let c=1;c<e.length-1;c++)s.push(e[c]);else for(let c=1;c<e.length-1;c++)s.unshift(e[e.length-1-c]);this.faces.push(s),this.segments[o]=null,this.segmentMapping[n]=void 0,this.segmentMapping[r]=void 0}else{const o=Math.abs(a),s=Math.abs(i),c=this.segments[o],l=this.segments[s];this.segments[o]=null,this.segments[s]=null,this.segmentMapping[c[0]]=void 0,this.segmentMapping[l[0]]=void 0,this.segmentMapping[c[c.length-1]]=void 0,this.segmentMapping[l[l.length-1]]=void 0,this.addSegment(e),this.addSegment(c),this.addSegment(l)}else if(a!==void 0){if(a>0){const o=this.segments[a];for(let s=1;s<e.length;s++)o.push(e[s]);this.segmentMapping[r]=a}else{const o=this.segments[-a];this.segmentMapping[r]=a;for(let s=1;s<e.length;s++)o.unshift(e[s])}this.segmentMapping[n]=void 0}else if(i!==void 0){if(i>0){const o=this.segments[i];for(let s=1;s<e.length;s++)o.push(e[e.length-1-s]);this.segmentMapping[n]=i}else{const o=this.segments[-i];this.segmentMapping[n]=i;for(let s=1;s<e.length;s++)o.unshift(e[e.length-s-1])}this.segmentMapping[r]=void 0}else{const o=this.segments.length;this.segments.push(e),this.segmentMapping[n]=-o,this.segmentMapping[r]=o}}}function poe(t,e){e.classHierarchy.push("vtkClosedPolyLineToSurfaceFilter"),t.requestData=(n,r)=>{const a=n[0];if(!a){moe("Invalid or missing input");return}const i=ci.newInstance();i.shallowCopy(a);const o=new hoe,s=a.getLines().getData();let c=0;for(;c<s.length;){const v=s[c++],g=[];for(let d=0;d<v;d++)g.push(s[c+d]);o.addSegment(g),c+=v}const{faces:l}=o;let u=l.length;for(let v=0;v<l.length;v++)u+=l[v].length;const f=new Uint16Array(u);c=0;for(let v=0;v<l.length;v++){const g=l[v];f[c++]=g.length;for(let d=0;d<g.length;d++)f[c++]=g[d]}i.setPolys(y1.newInstance({values:f,name:"faces"})),r[0]=i}}const Soe={};function fU(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Soe,n),J.obj(t,e),J.algo(t,e,1,1),poe(t,e)}const Coe=J.newInstance(fU,"vtkClosedPolyLineToSurfaceFilter");var Ioe={newInstance:Coe,extend:fU};const{vtkErrorMacro:fw}=Bi;function Doe(t){const e=t.getPolys().getData(),n=t.getStrips().getData(),r={cellSize:0,cell:[],done:!1,polyIdx:0,stripIdx:0,remainingStripLength:0,next(){if(r.polyIdx<e.length){r.cellSize=e[r.polyIdx];const a=r.polyIdx+1,i=a+r.cellSize;r.polyIdx=i;let o=0;for(let s=a;s<i;++s)r.cell[o++]=e[s]}else if(r.stripIdx<n.length){r.cellSize=3,r.remainingStripLength===0&&(r.remainingStripLength=n[r.stripIdx]-2,r.stripIdx+=3);const a=r.stripIdx-2,i=r.stripIdx+1;r.stripIdx++,r.remainingStripLength--;let o=0;for(let s=a;s<i;++s)r.cell[o++]=n[s]}else if(!r.done)r.done=!0;else throw new Error("Iterator is done")}};return r.next(),r}function Eoe(t,e){e.classHierarchy.push("vtkCutter");const n={...t};t.getMTime=()=>{let a=n.getMTime();return e.cutFunction&&(a=Math.max(a,e.cutFunction.getMTime())),a};function r(a,i){const o=a.getPoints(),s=o.getData(),c=o.getNumberOfPoints(),l=[],u=[],f=[];(!e.cutScalars||e.cutScalars.length<c)&&(e.cutScalars=new Float32Array(c));let v=0,g=0;for(;v<s.length;)e.cutScalars[g++]=e.cutFunction.evaluateFunction(s[v++],s[v++],s[v++]);const d=[],m=new Array(3),h=new Array(3),C=[];for(const S=Doe(a);!S.done;S.next()){if(S.cellSize<=2)continue;for(let y=0;y<S.cellSize;)C[y]=e.cutScalars[S.cell[y++]];const I=C[0]>0;let D=!0;for(let y=1;y<S.cell.length;y++)if(C[y]>0!==I){D=!1;break}if(D)continue;const E=[];for(let y=0;y<S.cellSize;y++){const M=y+1===S.cellSize?0:y+1,_=C[y]>0;if(C[M]>0===_)continue;let w=y,x=M,P=C[x]-C[w];P<=0&&(w=M,x=y,P*=-1);let R=0;P!==0&&(R=(e.cutValue-C[w])/P);const L=S.cell[w],H=S.cell[x];m[0]=s[L*3],m[1]=s[L*3+1],m[2]=s[L*3+2],h[0]=s[H*3],h[1]=s[H*3+1],h[2]=s[H*3+2];const F=[m[0]+R*(h[0]-m[0]),m[1]+R*(h[1]-m[1]),m[2]+R*(h[2]-m[2])];E.push({pointEdge1:L,pointEdge2:H,intersectedPoint:F,newPointID:-1})}for(let y=0;y<E.length;y++){const M=E[y];let _=!1;for(let O=0;O<d.length;O++){const w=d[O],x=M.pointEdge1===w.pointEdge1&&M.pointEdge2===w.pointEdge2,P=M.intersectedPoint[0]===w.intersectedPoint[0]&&M.intersectedPoint[1]===w.intersectedPoint[1]&&M.intersectedPoint[2]===w.intersectedPoint[2];if(x||P){_=!0,E[y].newPointID=d[O].newPointID;break}}_||(l.push(M.intersectedPoint[0]),l.push(M.intersectedPoint[1]),l.push(M.intersectedPoint[2]),E[y].newPointID=l.length/3-1,d.push(E[y]))}const T=E.length;T===2?u.push(T,E[0].newPointID,E[1].newPointID):T>2&&(f.push(T),E.forEach(y=>{f.push(y.newPointID)}))}i.getPoints().setData(JC(o.getDataType(),l),3),u.length!==0&&i.getLines().setData(Uint16Array.from(u)),f.length!==0&&i.getPolys().setData(Uint16Array.from(f))}t.requestData=(a,i)=>{const o=a[0];if(!o){fw("Invalid or missing input");return}if(!e.cutFunction){fw("Missing cut function");return}const s=ci.newInstance();r(o,s),i[0]=s}}const Toe={cutFunction:null,cutScalars:null,cutValue:0};function vU(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Toe,n),Yr(t,e),RM(t,e,1,1),Wa(t,e,["cutFunction","cutValue"]),Eoe(t,e)}const yoe=dr(vU,"vtkCutter");var Moe={newInstance:yoe,extend:vU};const _oe=[2,0,1,2,2,3,2,4,5,2,6,7,2,0,2,2,1,3,2,4,6,2,5,7,2,0,4,2,1,5,2,2,6,2,3,7],Ooe=[4,0,1,3,2,4,4,6,7,5,4,8,10,11,9,4,12,13,15,14,4,16,18,19,17,4,20,21,23,22];function woe(t,e){e.classHierarchy.push("vtkCubeSource");function n(r,a){if(e.deleted)return;const i=ci.newInstance();a[0]=i;const o=24,s=J.newTypedArray(e.pointType,o*3);i.getPoints().setData(s,3);const c=J.newTypedArray(e.pointType,o*3),l=fn.newInstance({name:"Normals",values:c,numberOfComponents:3});i.getPointData().setNormals(l);let u=2;e.generate3DTextureCoordinates===!0&&(u=3);const f=J.newTypedArray(e.pointType,o*u),v=fn.newInstance({name:"TextureCoordinates",values:f,numberOfComponents:u});i.getPointData().setTCoords(v);const g=[0,0,0],d=[0,0,0],m=[0,0];let h=0;g[0]=-e.xLength/2,d[0]=-1,d[1]=0,d[2]=0;for(let C=0;C<2;C++){g[1]=-e.yLength/2;for(let p=0;p<2;p++){m[1]=g[1]+.5,g[2]=-e.zLength/2;for(let S=0;S<2;S++)m[0]=(g[2]+.5)*(1-2*C),s[h*3]=g[0],s[h*3+1]=g[1],s[h*3+2]=g[2],c[h*3]=d[0],c[h*3+1]=d[1],c[h*3+2]=d[2],u===2?(f[h*u]=m[0],f[h*u+1]=m[1]):(f[h*u]=2*C-1,f[h*u+1]=2*p-1,f[h*u+2]=2*S-1),h++,g[2]+=e.zLength;g[1]+=e.yLength}g[0]+=e.xLength,d[0]+=2}g[1]=-e.yLength/2,d[1]=-1,d[0]=0,d[2]=0;for(let C=0;C<2;C++){g[0]=-e.xLength/2;for(let p=0;p<2;p++){m[0]=(g[0]+.5)*(2*C-1),g[2]=-e.zLength/2;for(let S=0;S<2;S++)m[1]=(g[2]+.5)*-1,s[h*3]=g[0],s[h*3+1]=g[1],s[h*3+2]=g[2],c[h*3]=d[0],c[h*3+1]=d[1],c[h*3+2]=d[2],u===2?(f[h*u]=m[0],f[h*u+1]=m[1]):(f[h*u]=2*p-1,f[h*u+1]=2*C-1,f[h*u+2]=2*S-1),h++,g[2]+=e.zLength;g[0]+=e.xLength}g[1]+=e.yLength,d[1]+=2}g[2]=-e.zLength/2,d[2]=-1,d[0]=0,d[1]=0;for(let C=0;C<2;C++){g[1]=-e.yLength/2;for(let p=0;p<2;p++){m[1]=g[1]+.5,g[0]=-e.xLength/2;for(let S=0;S<2;S++)m[0]=(g[0]+.5)*(2*C-1),s[h*3]=g[0],s[h*3+1]=g[1],s[h*3+2]=g[2],c[h*3]=d[0],c[h*3+1]=d[1],c[h*3+2]=d[2],u===2?(f[h*u]=m[0],f[h*u+1]=m[1]):(f[h*u]=2*S-1,f[h*u+1]=2*p-1,f[h*u+2]=2*C-1),h++,g[0]+=e.xLength;g[1]+=e.yLength}g[2]+=e.zLength,d[2]+=2}if(e.rotations&&_i.buildFromDegree().rotateX(e.rotations[0]).rotateY(e.rotations[1]).rotateZ(e.rotations[2]).apply(s).apply(c),e.center&&_i.buildFromRadian().translate(...e.center).apply(s),e.matrix){_i.buildFromRadian().setMatrix(e.matrix).apply(s);const C=[e.matrix[0],e.matrix[1],e.matrix[2],0,e.matrix[4],e.matrix[5],e.matrix[6],0,e.matrix[8],e.matrix[9],e.matrix[10],0,0,0,0,1];_i.buildFromRadian().setMatrix(C).apply(c)}e.generateFaces?i.getPolys().deepCopy(e._polys):i.getPolys().initialize(),e.generateLines?(i.getLines().deepCopy(e._lineCells),i.getPointData().setNormals(null)):i.getLines().initialize(),i.modified()}t.setBounds=function(){let r=[];if(Array.isArray(arguments.length<=0?void 0:arguments[0]))r=arguments.length<=0?void 0:arguments[0];else for(let a=0;a<arguments.length;a++)r.push(a<0||arguments.length<=a?void 0:arguments[a]);r.length===6&&(t.setXLength(r[1]-r[0]),t.setYLength(r[3]-r[2]),t.setZLength(r[5]-r[4]),t.setCenter([(r[0]+r[1])/2,(r[2]+r[3])/2,(r[4]+r[5])/2]))},t.requestData=n}const Poe={xLength:1,yLength:1,zLength:1,pointType:"Float64Array",generate3DTextureCoordinates:!1,generateFaces:!0,generateLines:!1};function gU(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Poe,n),J.obj(t,e),J.setGet(t,e,["xLength","yLength","zLength","generate3DTextureCoordinates","generateFaces","generateLines"]),J.setGetArray(t,e,["center","rotations"],3),J.setGetArray(t,e,["matrix"],16),e._polys=y1.newInstance({values:Uint16Array.from(Ooe)}),e._lineCells=y1.newInstance({values:Uint16Array.from(_oe)}),J.moveToProtected(t,e,["polys","lineCells"]),J.algo(t,e,0,1),woe(t,e)}const Aoe=J.newInstance(gU,"vtkCubeSource");var dU={newInstance:Aoe,extend:gU};const{vtkErrorMacro:vw}=J;function xoe(t,e){e.classHierarchy.push("vtkImageDataOutlineFilter");const n={...t};t.requestData=(r,a)=>{const i=r[0];if(!i||!i.isA("vtkImageData")){vw("Invalid or missing input");return}const o=i.getSpatialExtent();if(!o){vw("Unable to fetch spatial extents of input image.");return}e._cubeSource.setBounds(o),e._cubeSource.setMatrix(i.getIndexToWorld()),a[0]=e._cubeSource.getOutputData()},t.getMTime=()=>Math.max(n.getMTime(),e._cubeSource.getMTime()),t.setGenerateFaces=e._cubeSource.setGenerateFaces,t.setGenerateLines=e._cubeSource.setGenerateLines,t.getGenerateFaces=e._cubeSource.getGenerateFaces,t.getGenerateLines=e._cubeSource.getGenerateLines}const Roe={};function mU(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Roe,n),J.obj(t,e),J.algo(t,e,1,1),e._cubeSource=dU.newInstance(),J.moveToProtected(t,e,["cubeSource","tmpOut"]),xoe(t,e)}const boe=J.newInstance(mU,"vtkImageDataOutlineFilter");var Noe={newInstance:boe,extend:mU};let R5;function Loe(t,e){e.classHierarchy.push("vtkAbstractTransform","vtkHomogeneousTransform","vtkTransform"),t.transformPoint=(n,r)=>(un(r,n,e.matrix),r),t.transformPoints=(n,r)=>{const a=new Float64Array(3),i=new Float64Array(3);for(let o=0;o<n.length;o+=3)a[0]=n[o],a[1]=n[o+1],a[2]=n[o+2],un(i,a,e.matrix),r[o]=i[0],r[o+1]=i[1],r[o+2]=i[2];return r},t.preMultiply=()=>{t.setPreMultiplyFlag(!0)},t.postMultiply=()=>{t.setPreMultiplyFlag(!1)},t.transformMatrix=(n,r)=>(e.preMultiplyFlag?Xn(r,e.matrix,n):Xn(r,n,e.matrix),r),t.transformMatrices=(n,r)=>{const a=new Float64Array(16),i=new Float64Array(16),o=e.preMultiplyFlag?()=>Xn(i,e.matrix,a):()=>Xn(i,a,e.matrix);for(let s=0;s<n.length;s+=16){for(let c=0;c<16;++c)a[c]=n[s+c];o();for(let c=0;c<16;++c)r[s+c]=i[c]}return r},t.getInverse=()=>R5({matrix:Cn.invertMatrix(Array.from(e.matrix),[],4),preMultiplyFlag:e.preMultiplyFlag})}const Uoe={preMultiplyFlag:!1,matrix:[...UM]};function hU(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Uoe,n),J.obj(t,e),J.setGet(t,e,["preMultiplyFlag"]),J.setGetArray(t,e,["matrix"],16),Loe(t,e)}R5=J.newInstance(hU,"vtkTransform");var Foe={newInstance:R5,extend:hU},Voe=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkImageResliceMapperVS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/

// all variables that represent positions or directions have a suffix
// indicating the coordinate system they are in. The possible values are
// MC - Model coordinates
// WC - World coordinates
// VC - View coordinates
// DC - Display coordinates
// TC - Texture coordinates

// frag position in VC
//VTK::PositionVC::Dec

// Texture coordinates
//VTK::TCoord::Dec

// picking support
//VTK::Picking::Dec

// camera and actor matrix values
//VTK::Camera::Dec

void main()
{
  //VTK::PositionVC::Impl

  //VTK::TCoord::Impl

  //VTK::Picking::Impl
}
`,koe=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkImageResliceMapperFS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/
// Template for the gpu image mapper fragment shader

// VC position of this fragment
//VTK::PositionVC::Dec

// Texture coordinates
//VTK::TCoord::Dec

// picking support
//VTK::Picking::Dec

// handle coincident offsets
//VTK::Coincident::Dec

//VTK::ZBuffer::Dec

// the output of this shader
//VTK::Output::Dec

void main()
{
  // VC position of this fragment. This should not branch/return/discard.
  //VTK::PositionVC::Impl

  // Place any calls that require uniform flow (e.g. dFdx) here.
  //VTK::UniformFlow::Impl

  // Set gl_FragDepth here (gl_FragCoord.z by default)
  //VTK::Depth::Impl

  // Early depth peeling abort:
  //VTK::DepthPeeling::PreColor

  //VTK::TCoord::Impl

  if (gl_FragData[0].a <= 0.0)
    {
    discard;
    }

  //VTK::DepthPeeling::Impl

  //VTK::Picking::Impl

  // handle coincident offsets
  //VTK::Coincident::Impl

  //VTK::ZBuffer::Impl

  //VTK::RenderPassFragmentShader::Impl
}
`;const{vtkErrorMacro:bu}=Bi;function gw(t,e,n){return e.identity(n),t.reduce((r,a,i)=>i===0?a?e.copy(r,a):e.identity(r):a?e.multiply(r,r,a):r,n)}function Goe(t,e){e.classHierarchy.push("vtkOpenGLImageResliceMapper");function n(a){[e._scalars,e._colorTransferFunc,e._pwFunc].forEach(i=>a.unregisterGraphicsResourceUser(i,t))}t.buildPass=a=>{if(a){e.currentRenderPass=null,e._openGLImageSlice=t.getFirstAncestorOfType("vtkOpenGLImageSlice"),e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer");const i=e._openGLRenderer.getRenderable();e._openGLCamera=e._openGLRenderer.getViewNodeFor(i.getActiveCamera());const o=e._openGLRenderWindow;e._openGLRenderWindow=e._openGLRenderer.getLastAncestorOfType("vtkOpenGLRenderWindow"),o&&!o.isDeleted()&&o!==e._openGLRenderWindow&&n(o),e.context=e._openGLRenderWindow.getContext(),e.tris.setOpenGLRenderWindow(e._openGLRenderWindow)}},t.translucentPass=(a,i)=>{a&&(e.currentRenderPass=i,t.render())},t.zBufferPass=a=>{a&&(e.haveSeenDepthRequest=!0,e.renderDepth=!0,t.render(),e.renderDepth=!1)},t.opaqueZBufferPass=a=>t.zBufferPass(a),t.opaquePass=a=>{a&&t.render()},t.getCoincidentParameters=(a,i)=>e.renderable.getResolveCoincidentTopology()==f0.PolygonOffset?e.renderable.getCoincidentTopologyPolygonOffsetParameters():null,t.render=()=>{const a=e._openGLImageSlice.getRenderable(),i=e._openGLRenderer.getRenderable();t.renderPiece(i,a)},t.renderPiece=(a,i)=>{if(t.invokeEvent({type:"StartEvent"}),e.renderable.update(),e.currentInput=e.renderable.getInputData(),!e.currentInput){bu("No input!");return}t.updateResliceGeometry(),t.renderPieceStart(a,i),t.renderPieceDraw(a,i),t.renderPieceFinish(a,i),t.invokeEvent({type:"EndEvent"})},t.renderPieceStart=(a,i)=>{t.updateBufferObjects(a,i),i.getProperty().getInterpolationType()===u1.NEAREST?(e.openGLTexture.setMinificationFilter(en.NEAREST),e.openGLTexture.setMagnificationFilter(en.NEAREST),e.colorTexture.setMinificationFilter(en.NEAREST),e.colorTexture.setMagnificationFilter(en.NEAREST),e.pwfTexture.setMinificationFilter(en.NEAREST),e.pwfTexture.setMagnificationFilter(en.NEAREST)):(e.openGLTexture.setMinificationFilter(en.LINEAR),e.openGLTexture.setMagnificationFilter(en.LINEAR),e.colorTexture.setMinificationFilter(en.LINEAR),e.colorTexture.setMagnificationFilter(en.LINEAR),e.pwfTexture.setMinificationFilter(en.LINEAR),e.pwfTexture.setMagnificationFilter(en.LINEAR)),e.lastBoundBO=null},t.renderPieceDraw=(a,i)=>{const o=e.context;e.openGLTexture.activate(),e.colorTexture.activate(),e.pwfTexture.activate(),t.updateShaders(e.tris,a,i),o.drawArrays(o.TRIANGLES,0,e.tris.getCABO().getElementCount()),e.tris.getVAO().release(),e.openGLTexture.deactivate(),e.colorTexture.deactivate(),e.pwfTexture.deactivate()},t.renderPieceFinish=(a,i)=>{},t.updateBufferObjects=(a,i)=>{t.getNeedToRebuildBufferObjects(a,i)&&t.buildBufferObjects(a,i)},t.getNeedToRebuildBufferObjects=(a,i)=>{var o,s,c;return e.VBOBuildTime.getMTime()<t.getMTime()||e.VBOBuildTime.getMTime()<i.getMTime()||e.VBOBuildTime.getMTime()<e.renderable.getMTime()||e.VBOBuildTime.getMTime()<i.getProperty().getMTime()||e.VBOBuildTime.getMTime()<e.currentInput.getMTime()||e.VBOBuildTime.getMTime()<e.resliceGeom.getMTime()||!((o=e.openGLTexture)!=null&&o.getHandle())||!((s=e.colorTexture)!=null&&s.getHandle())||!((c=e.pwfTexture)!=null&&c.getHandle())},t.buildBufferObjects=(a,i)=>{var T,y,M,_;const o=e.currentInput;if(!o)return;const s=(T=o.getPointData())==null?void 0:T.getScalars();if(!s)return;const c=s.getNumberOfComponents();let l=C5(o,s);const u=e._openGLRenderWindow.getGraphicsResourceForObject(s);if(!((y=u==null?void 0:u.oglObject)!=null&&y.getHandle())||(u==null?void 0:u.hash)!==l){e.openGLTexture=oa.newInstance(),e.openGLTexture.setOpenGLRenderWindow(e._openGLRenderWindow);const O=o.getDimensions();e.openGLTexture.setOglNorm16Ext(e.context.getExtension("EXT_texture_norm16")),e.openGLTexture.resetFormatAndType(),e.openGLTexture.create3DFilterableFromDataArray(O[0],O[1],O[2],s),e._openGLRenderWindow.setGraphicsResourceForObject(s,e.openGLTexture,l),s!==e._scalars&&(e._openGLRenderWindow.registerGraphicsResourceUser(s,t),e._openGLRenderWindow.unregisterGraphicsResourceUser(e._scalars,t)),e._scalars=s}else e.openGLTexture=u.oglObject;const v=i.getProperty(),g=v.getIndependentComponents(),d=g?c:1,m=g?2*d:1,h=v.getRGBTransferFunction();l=Y0(h,g,d);const C=e._openGLRenderWindow.getGraphicsResourceForObject(h);if(!((M=C==null?void 0:C.oglObject)!=null&&M.getHandle())||(C==null?void 0:C.hash)!==l){const w=1024*m*3,x=new Uint8ClampedArray(w);if(e.colorTexture=oa.newInstance(),e.colorTexture.setOpenGLRenderWindow(e._openGLRenderWindow),h){const P=new Float32Array(3072);for(let R=0;R<d;R++){const L=v.getRGBTransferFunction(R),H=L.getRange();if(L.getTable(H[0],H[1],1024,P,1),g)for(let F=0;F<1024*3;F++)x[R*1024*6+F]=255*P[F],x[R*1024*6+F+1024*3]=255*P[F];else for(let F=0;F<1024*3;F++)x[R*1024*6+F]=255*P[F]}e.colorTexture.resetFormatAndType(),e.colorTexture.create2DFromRaw(1024,m,3,Vn.UNSIGNED_CHAR,x)}else{for(let P=0;P<1024*3;++P)x[P]=255*P/(1023*3),x[P+1]=255*P/(1023*3),x[P+2]=255*P/(1023*3);e.colorTexture.resetFormatAndType(),e.colorTexture.create2DFromRaw(1024,1,3,Vn.UNSIGNED_CHAR,x)}h&&(e._openGLRenderWindow.setGraphicsResourceForObject(h,e.colorTexture,l),h!==e._colorTransferFunc&&(e._openGLRenderWindow.registerGraphicsResourceUser(h,t),e._openGLRenderWindow.unregisterGraphicsResourceUser(e._colorTransferFunc,t)),e._colorTransferFunc=h)}else e.colorTexture=C.oglObject;const S=v.getPiecewiseFunction();l=Y0(S,g,d);const I=e._openGLRenderWindow.getGraphicsResourceForObject(S);if(!((_=I==null?void 0:I.oglObject)!=null&&_.getHandle())||(I==null?void 0:I.hash)!==l){const w=1024*m,x=new Uint8ClampedArray(w);if(e.pwfTexture=oa.newInstance(),e.pwfTexture.setOpenGLRenderWindow(e._openGLRenderWindow),S){const P=new Float32Array(w),R=new Float32Array(1024);for(let L=0;L<d;++L){const H=v.getPiecewiseFunction(L);if(H===null)P.fill(1);else{const F=H.getRange();if(H.getTable(F[0],F[1],1024,R,1),g)for(let U=0;U<1024;U++)P[L*1024*2+U]=R[U],P[L*1024*2+U+1024]=R[U];else for(let U=0;U<1024;U++)P[L*1024*2+U]=R[U]}}e.pwfTexture.resetFormatAndType(),e.pwfTexture.create2DFromRaw(1024,m,1,Vn.FLOAT,P)}else x.fill(255),e.pwfTexture.resetFormatAndType(),e.pwfTexture.create2DFromRaw(1024,1,1,Vn.UNSIGNED_CHAR,x);S&&(e._openGLRenderWindow.setGraphicsResourceForObject(S,e.pwfTexture,l),S!==e._pwFunc&&(e._openGLRenderWindow.registerGraphicsResourceUser(S,t),e._openGLRenderWindow.unregisterGraphicsResourceUser(e._pwFunc,t)),e._pwFunc=S)}else e.pwfTexture=I.oglObject;const E=`${e.resliceGeom.getMTime()}A${e.renderable.getSlabThickness()}`;if(!e.tris.getCABO().getElementCount()||e.VBOBuildString!==E){const O=fn.newInstance({numberOfComponents:3,values:e.resliceGeom.getPoints().getData()});O.setName("points");const w=fn.newInstance({numberOfComponents:1,values:e.resliceGeom.getPolys().getData()}),x={points:O,cellOffset:0};if(e.renderable.getSlabThickness()>0){const P=e.resliceGeom.getPointData().getNormals();P?x.normals=P:bu("Slab mode requested without normals")}e.tris.getCABO().createVBO(w,"polys",Fi.SURFACE,x)}e.VBOBuildString=E,e.VBOBuildTime.modified()},t.updateShaders=(a,i,o)=>{if(e.lastBoundBO=a,t.getNeedToRebuildShaders(a,i,o)){const s={Vertex:null,Fragment:null,Geometry:null};t.buildShaders(s,i,o);const c=e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(s.Vertex,s.Fragment,s.Geometry);c!==a.getProgram()&&(a.setProgram(c),a.getVAO().releaseGraphicsResources()),a.getShaderSourceTime().modified()}else e._openGLRenderWindow.getShaderCache().readyShaderProgram(a.getProgram());a.getVAO().bind(),t.setMapperShaderParameters(a,i,o),t.setCameraShaderParameters(a,i,o),t.setPropertyShaderParameters(a,i,o)},t.setMapperShaderParameters=(a,i,o)=>{const s=a.getProgram();if(a.getCABO().getElementCount()&&(e.VBOBuildTime.getMTime()>a.getAttributeUpdateTime().getMTime()||a.getShaderSourceTime().getMTime()>a.getAttributeUpdateTime().getMTime())){s.isUniformUsed("texture1")&&s.setUniformi("texture1",e.openGLTexture.getTextureUnit()),s.isAttributeUsed("vertexWC")&&(a.getVAO().addAttributeArray(s,a.getCABO(),"vertexWC",a.getCABO().getVertexOffset(),a.getCABO().getStride(),e.context.FLOAT,3,e.context.FALSE)||bu("Error setting vertexWC in shader VAO.")),s.isAttributeUsed("normalWC")&&(a.getVAO().addAttributeArray(s,a.getCABO(),"normalWC",a.getCABO().getNormalOffset(),a.getCABO().getStride(),e.context.FLOAT,3,e.context.FALSE)||bu("Error setting normalWC in shader VAO.")),s.isUniformUsed("slabThickness")&&s.setUniformf("slabThickness",e.renderable.getSlabThickness()),s.isUniformUsed("spacing")&&s.setUniform3fv("spacing",e.currentInput.getSpacing()),s.isUniformUsed("slabType")&&s.setUniformi("slabType",e.renderable.getSlabType()),s.isUniformUsed("slabType")&&s.setUniformi("slabType",e.renderable.getSlabType()),s.isUniformUsed("slabTrapezoid")&&s.setUniformi("slabTrapezoid",e.renderable.getSlabTrapezoidIntegration());const l=a.getCABO().getCoordShiftAndScaleEnabled()?a.getCABO().getInverseShiftAndScaleMatrix():null;if(s.isUniformUsed("WCTCMatrix")){const u=e.currentInput,f=u.getDimensions();fa(e.tmpMat4,u.getIndexToWorld()),kr(e.tmpMat4,e.tmpMat4,[-.5,-.5,-.5]),$c(e.tmpMat4,e.tmpMat4,f),ba(e.tmpMat4,e.tmpMat4),l&&Xn(e.tmpMat4,e.tmpMat4,l),s.setUniformMatrix("WCTCMatrix",e.tmpMat4)}s.isUniformUsed("vboScaling")&&s.setUniform3fv("vboScaling",a.getCABO().getCoordScale()??[1,1,1]),a.getAttributeUpdateTime().modified()}if(e.haveSeenDepthRequest&&a.getProgram().setUniformi("depthRequest",e.renderDepth?1:0),a.getProgram().isUniformUsed("coffset")){const c=t.getCoincidentParameters(i,o);a.getProgram().setUniformf("coffset",c.offset),a.getProgram().isUniformUsed("cfactor")&&a.getProgram().setUniformf("cfactor",c.factor)}},t.setCameraShaderParameters=(a,i,o)=>{const s=e._openGLCamera.getKeyMatrices(i),c=e._openGLImageSlice.getKeyMatrices(),u=a.getCABO().getCoordShiftAndScaleEnabled()?a.getCABO().getInverseShiftAndScaleMatrix():null,f=a.getProgram();f.isUniformUsed("MCPCMatrix")&&(zt(e.tmpMat4),f.setUniformMatrix("MCPCMatrix",gw([s.wcpc,c.mcwc,u],Jd,e.tmpMat4))),f.isUniformUsed("MCVCMatrix")&&(zt(e.tmpMat4),f.setUniformMatrix("MCVCMatrix",gw([s.wcvc,c.mcwc,u],Jd,e.tmpMat4)))},t.setPropertyShaderParameters=(a,i,o)=>{const s=a.getProgram(),c=o.getProperty(),l=c.getOpacity();s.setUniformf("opacity",l);const u=e.openGLTexture.getComponents(),f=c.getIndependentComponents();if(f)for(let m=0;m<u;++m)s.setUniformf(`mix${m}`,c.getComponentWeight(m));const v=e.openGLTexture.getVolumeInfo();for(let m=0;m<u;m++){let h=c.getColorWindow(),C=c.getColorLevel();const p=f?m:0,S=c.getRGBTransferFunction(p);if(S&&c.getUseLookupTableScalarRange()){const E=S.getRange();h=E[1]-E[0],C=.5*(E[1]+E[0])}const I=v.scale[m]/h,D=(v.offset[m]-C)/h+.5;s.setUniformf(`cshift${m}`,D),s.setUniformf(`cscale${m}`,I)}const g=e.colorTexture.getTextureUnit();s.setUniformi("colorTexture1",g);for(let m=0;m<u;m++){let h=1,C=0;const p=f?m:0,S=c.getPiecewiseFunction(p);if(S){const I=S.getRange(),D=I[1]-I[0],E=.5*(I[0]+I[1]);h=v.scale[m]/D,C=(v.offset[m]-E)/D+.5}s.setUniformf(`pwfshift${m}`,C),s.setUniformf(`pwfscale${m}`,h)}const d=e.pwfTexture.getTextureUnit();s.setUniformi("pwfTexture1",d),s.setUniform4fv("backgroundColor",e.renderable.getBackgroundColor())},t.getNeedToRebuildShaders=(a,i,o)=>{var g;const s=e.openGLTexture.getComponents(),c=o.getProperty().getIndependentComponents(),l=e.renderable.getSlabThickness(),u=e.renderable.getSlabType(),f=e.renderable.getSlabTrapezoidIntegration();let v=!1;return(!e.currentRenderPass&&e.lastRenderPassShaderReplacement||e.currentRenderPass&&e.currentRenderPass.getShaderReplacement()!==e.lastRenderPassShaderReplacement)&&(v=!0),v||e.lastHaveSeenDepthRequest!==e.haveSeenDepthRequest||((g=a.getProgram())==null?void 0:g.getHandle())===0||e.lastTextureComponents!==s||e.lastIndependentComponents!==c||e.lastSlabThickness!==l||e.lastSlabType!==u||e.lastSlabTrapezoidIntegration!==f?(e.lastHaveSeenDepthRequest=e.haveSeenDepthRequest,e.lastTextureComponents=s,e.lastIndependentComponents=c,e.lastSlabThickness=l,e.lastSlabType=u,e.lastSlabTrapezoidIntegration=f,!0):!1},t.getShaderTemplate=(a,i,o)=>{a.Vertex=Voe,a.Fragment=koe,a.Geometry=""},t.replaceShaderValues=(a,i,o)=>{if(t.replaceShaderTCoord(a,i,o),t.replaceShaderPositionVC(a,i,o),e.haveSeenDepthRequest){let s=a.Fragment;s=Ve.substitute(s,"//VTK::ZBuffer::Dec","uniform int depthRequest;").result,s=Ve.substitute(s,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float iz = floor(gl_FragCoord.z*65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result,a.Fragment=s}t.replaceShaderCoincidentOffset(a,i,o)},t.replaceShaderTCoord=(a,i,o)=>{let s=a.Vertex;const c=a.Geometry;let l=a.Fragment;const u=["uniform mat4 WCTCMatrix;","out vec3 fragTexCoord;"],f=e.renderable.getSlabThickness();s=Ve.substitute(s,"//VTK::TCoord::Dec",u).result;const v=["fragTexCoord = (WCTCMatrix * vertexWC).xyz;"];s=Ve.substitute(s,"//VTK::TCoord::Impl",v).result;const g=e.openGLTexture.getComponents(),d=o.getProperty().getIndependentComponents();let m=["in vec3 fragTexCoord;","uniform highp sampler3D texture1;","uniform mat4 WCTCMatrix;","uniform float cshift0;","uniform float cscale0;","uniform float pwfshift0;","uniform float pwfscale0;","uniform sampler2D colorTexture1;","uniform sampler2D pwfTexture1;","uniform float opacity;","uniform vec4 backgroundColor;"];if(d){for(let C=1;C<g;C++)m=m.concat([`uniform float cshift${C};`,`uniform float cscale${C};`,`uniform float pwfshift${C};`,`uniform float pwfscale${C};`]);switch(g){case 1:m=m.concat(["uniform float mix0;","#define height0 0.5"]);break;case 2:m=m.concat(["uniform float mix0;","uniform float mix1;","#define height0 0.25","#define height1 0.75"]);break;case 3:m=m.concat(["uniform float mix0;","uniform float mix1;","uniform float mix2;","#define height0 0.17","#define height1 0.5","#define height2 0.83"]);break;case 4:m=m.concat(["uniform float mix0;","uniform float mix1;","uniform float mix2;","uniform float mix3;","#define height0 0.125","#define height1 0.375","#define height2 0.625","#define height3 0.875"]);break;default:bu("Unsupported number of independent coordinates.")}}f>0&&(m=m.concat(["uniform vec3 spacing;","uniform float slabThickness;","uniform int slabType;","uniform int slabTrapezoid;","uniform vec3 vboScaling;"]),m=m.concat(["vec4 compositeValue(vec4 currVal, vec4 valToComp, int trapezoid)","{","  vec4 retVal = vec4(1.0);","  if (slabType == 0) // min","  {","    retVal = min(currVal, valToComp);","  }","  else if (slabType == 1) // max","  {","    retVal = max(currVal, valToComp);","  }","  else if (slabType == 3) // sum","  {","    retVal = currVal + (trapezoid > 0 ? 0.5 * valToComp : valToComp); ","  }","  else // mean","  {","    retVal = currVal + (trapezoid > 0 ? 0.5 * valToComp : valToComp); ","  }","  return retVal;","}"])),l=Ve.substitute(l,"//VTK::TCoord::Dec",m).result;let h=["if (any(greaterThan(fragTexCoord, vec3(1.0))) || any(lessThan(fragTexCoord, vec3(0.0))))","{","  // set the background color and exit","  gl_FragData[0] = backgroundColor;","  return;","}","vec4 tvalue = texture(texture1, fragTexCoord);"];if(f>0&&(h=h.concat(["// Get the first and last samples","int numSlices = 1;","float scaling = min(min(spacing.x, spacing.y), spacing.z) * 0.5;","vec3 normalxspacing = scaling * normalWCVSOutput;","float distTraveled = length(normalxspacing);","int trapezoid = 0;","while (distTraveled < slabThickness * 0.5)","{","  distTraveled += length(normalxspacing);","  float fnumSlices = float(numSlices);","  if (distTraveled > slabThickness * 0.5)","  {","    // Before stepping outside the slab, sample at the boundaries","    normalxspacing = normalWCVSOutput * slabThickness * 0.5 / fnumSlices;","    trapezoid = slabTrapezoid;","  }","  vec3 fragTCoordNeg = (WCTCMatrix * vec4(vertexWCVSOutput.xyz - fnumSlices * normalxspacing * vboScaling, 1.0)).xyz;","  if (!any(greaterThan(fragTCoordNeg, vec3(1.0))) && !any(lessThan(fragTCoordNeg, vec3(0.0))))","  {","    vec4 newVal = texture(texture1, fragTCoordNeg);","    tvalue = compositeValue(tvalue, newVal, trapezoid);","    numSlices += 1;","  }","  vec3 fragTCoordPos = (WCTCMatrix * vec4(vertexWCVSOutput.xyz + fnumSlices * normalxspacing * vboScaling, 1.0)).xyz;","  if (!any(greaterThan(fragTCoordNeg, vec3(1.0))) && !any(lessThan(fragTCoordNeg, vec3(0.0))))","  {","    vec4 newVal = texture(texture1, fragTCoordPos);","    tvalue = compositeValue(tvalue, newVal, trapezoid);","    numSlices += 1;","  }","}","// Finally, if slab type is *mean*, divide the sum by the numSlices","if (slabType == 2)","{","  tvalue = tvalue / float(numSlices);","}"])),d){const C=["r","g","b","a"];for(let p=0;p<g;++p)h=h.concat([`vec3 tcolor${p} = mix${p} * texture2D(colorTexture1, vec2(tvalue.${C[p]} * cscale${p} + cshift${p}, height${p})).rgb;`,`float compWeight${p} = mix${p} * texture2D(pwfTexture1, vec2(tvalue.${C[p]} * pwfscale${p} + pwfshift${p}, height${p})).r;`]);switch(g){case 1:h=h.concat(["gl_FragData[0] = vec4(tcolor0.rgb, compWeight0 * opacity);"]);break;case 2:h=h.concat(["float weightSum = compWeight0 + compWeight1;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum))), opacity);"]);break;case 3:h=h.concat(["float weightSum = compWeight0 + compWeight1 + compWeight2;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum)) + (tcolor2.rgb * (compWeight2 / weightSum))), opacity);"]);break;case 4:h=h.concat(["float weightSum = compWeight0 + compWeight1 + compWeight2 + compWeight3;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum)) + (tcolor2.rgb * (compWeight2 / weightSum)) + (tcolor3.rgb * (compWeight3 / weightSum))), opacity);"]);break;default:bu("Unsupported number of independent coordinates.")}}else switch(g){case 1:h=h.concat(["// Dependent components","float intensity = tvalue.r;","vec3 tcolor = texture2D(colorTexture1, vec2(intensity * cscale0 + cshift0, 0.5)).rgb;","float scalarOpacity = texture2D(pwfTexture1, vec2(intensity * pwfscale0 + pwfshift0, 0.5)).r;","gl_FragData[0] = vec4(tcolor, scalarOpacity * opacity);"]);break;case 2:h=h.concat(["float intensity = tvalue.r*cscale0 + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(intensity, 0.5)).rgb, pwfscale0*tvalue.g + pwfshift0);"]);break;case 3:h=h.concat(["vec4 tcolor = cscale0*tvalue + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(tcolor.r,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.g,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.b,0.5)).r, opacity);"]);break;default:h=h.concat(["vec4 tcolor = cscale0*tvalue + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(tcolor.r,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.g,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.b,0.5)).r, tcolor.a);"])}l=Ve.substitute(l,"//VTK::TCoord::Impl",h).result,a.Vertex=s,a.Fragment=l,a.Geometry=c},t.replaceShaderPositionVC=(a,i,o)=>{let s=a.Vertex;const c=a.Geometry;let l=a.Fragment;const u=e.renderable.getSlabThickness();let f=["attribute vec4 vertexWC;"];f=f.concat([`//${t.getMTime()}${e.resliceGeomUpdateString}`]),u>0&&(f=f.concat(["attribute vec3 normalWC;","varying vec3 normalWCVSOutput;","varying vec4 vertexWCVSOutput;"])),s=Ve.substitute(s,"//VTK::PositionVC::Dec",f).result;let v=["gl_Position = MCPCMatrix * vertexWC;"];u>0&&(v=v.concat(["normalWCVSOutput = normalWC;","vertexWCVSOutput = vertexWC;"])),s=Ve.substitute(s,"//VTK::PositionVC::Impl",v).result,s=Ve.substitute(s,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;","uniform mat4 MCVCMatrix;"]).result;let g=[];u>0&&(g=g.concat(["varying vec3 normalWCVSOutput;","varying vec4 vertexWCVSOutput;"])),l=Ve.substitute(l,"//VTK::PositionVC::Dec",g).result,a.Vertex=s,a.Geometry=c,a.Fragment=l};function r(a){Cn.normalize(a);const i=[0,0,0];for(let o=0;o<3;++o){GZ(i),i[o]=1;const s=Cn.dot(a,i);if(s<-.999||s>.999)return[!0,o]}return[!1,2]}t.updateResliceGeometry=()=>{var f;let a="";const i=e.currentInput,o=i==null?void 0:i.getBounds();let s=!0,c=2;const l=e.renderable.getSlicePolyData(),u=e.renderable.getSlicePlane();if(l)a=a.concat(`PolyData${l.getMTime()}`);else if(u){a=a.concat(`Plane${u.getMTime()}`);const v=zM();i&&(a=a.concat(`Image${i.getMTime()}`),Jb(v,...i.getDirection()),th(v,v));const g=[...u.getNormal()];b2(g,g,v),[s,c]=r(g)}else{const v=Ji.newInstance();v.setNormal(0,0,1);let g=[0,1,0,1,0,1];i&&(g=o),v.setOrigin(g[0],g[2],.5*(g[5]+g[4])),e.renderable.setSlicePlane(v),a=a.concat(`Plane${u==null?void 0:u.getMTime()}`),i&&(a=a.concat(`Image${i.getMTime()}`))}if(!e.resliceGeom||e.resliceGeomUpdateString!==a){if(l)e.resliceGeom||(e.resliceGeom=ci.newInstance()),e.resliceGeom.getPoints().setData(l.getPoints().getData(),3),e.resliceGeom.getPolys().setData(l.getPolys().getData(),1),e.resliceGeom.getPointData().setNormals(l.getPointData().getNormals());else if(u)if(s){const v=new Float32Array(12),g=i.worldToIndex(u.getOrigin(),[0,0,0]),d=[(c+1)%3,(c+2)%3].sort(),m=i.getSpatialExtent();let h=0;for(let D=0;D<2;++D)for(let E=0;E<2;++E)v[h+c]=g[c],v[h+d[0]]=m[2*d[0]+E],v[h+d[1]]=m[2*d[1]+D],h+=3;e.transform.setMatrix(i.getIndexToWorld()),e.transform.transformPoints(v,v);const C=new Uint16Array(8);C[0]=3,C[1]=0,C[2]=1,C[3]=3,C[4]=3,C[5]=0,C[6]=3,C[7]=2;const p=u.getNormal();Cn.normalize(p);const S=new Float32Array(12);for(let D=0;D<4;++D)S[3*D]=p[0],S[3*D+1]=p[1],S[3*D+2]=p[2];e.resliceGeom||(e.resliceGeom=ci.newInstance()),e.resliceGeom.getPoints().setData(v,3),e.resliceGeom.getPolys().setData(C,1);const I=fn.newInstance({numberOfComponents:3,values:S,name:"Normals"});e.resliceGeom.getPointData().setNormals(I)}else{e.outlineFilter.setInputData(i),e.cutter.setInputConnection(e.outlineFilter.getOutputPort()),e.cutter.setCutFunction(u),e.lineToSurfaceFilter.setInputConnection(e.cutter.getOutputPort()),e.lineToSurfaceFilter.update(),e.resliceGeom||(e.resliceGeom=ci.newInstance());const v=e.lineToSurfaceFilter.getOutputData();e.resliceGeom.getPoints().setData(v.getPoints().getData(),3),e.resliceGeom.getPolys().setData(v.getPolys().getData(),1),e.resliceGeom.getPointData().setNormals(v.getPointData().getNormals());const g=u.getNormal(),d=e.resliceGeom.getNumberOfPoints();Cn.normalize(g);const m=new Float32Array(d*3);for(let C=0;C<d;++C)m[3*C]=g[0],m[3*C+1]=g[1],m[3*C+2]=g[2];const h=fn.newInstance({numberOfComponents:3,values:m,name:"Normals"});e.resliceGeom.getPointData().setNormals(h)}else bu("Something went wrong.","A default slice plane should have been created in the beginning of","updateResliceGeometry.");e.resliceGeomUpdateString=a,(f=e.resliceGeom)==null||f.modified()}},t.setOpenGLTexture=a=>{a&&(e.openGLTexture=a,e._externalOpenGLTexture=!0)},t.delete=Ym(()=>{e._openGLRenderWindow&&n(e._openGLRenderWindow)},t.delete)}const Boe={VBOBuildTime:{},VBOBuildString:null,haveSeenDepthRequest:!1,lastHaveSeenDepthRequest:!1,lastIndependentComponents:!1,lastTextureComponents:0,lastSlabThickness:0,lastSlabTrapezoidIntegration:0,lastSlabType:-1,openGLTexture:null,colorTextureString:null,pwfTextureString:null,resliceGeom:null,resliceGeomUpdateString:null,tris:null,colorTexture:null,pwfTexture:null,_externalOpenGLTexture:!1};function Woe(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Boe,n),Fr.extend(t,e,n),X0.implementReplaceShaderCoincidentOffset(t,e,n),X0.implementBuildShadersWithReplacements(t,e,n),e.tris=tc.newInstance(),e.openGLTexture=null,e.colorTexture=null,e.pwfTexture=null,e.VBOBuildTime={},Yr(e.VBOBuildTime),e.tmpMat4=zt(new Float64Array(16)),e.outlineFilter=Noe.newInstance(),e.outlineFilter.setGenerateFaces(!0),e.outlineFilter.setGenerateLines(!1),e.cubePolyData=ci.newInstance(),e.cutter=Moe.newInstance(),e.lineToSurfaceFilter=Ioe.newInstance(),e.transform=Foe.newInstance(),_o(t,e,["openGLTexture"]),Goe(t,e)}const Hoe=dr(Woe,"vtkOpenGLImageResliceMapper");Za("vtkImageResliceMapper",Hoe);const pU=Object.create(null);function Vs(t,e){pU[t]=e}function $oe(t,e){e.classHierarchy.push("vtkWebGPUViewNodeFactory")}const zoe={};function qoe(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,zoe,n),e.overrides=pU,HM.extend(t,e,n),$oe(t,e)}J.newInstance(qoe,"vtkWebGPUViewNodeFactory");function joe(t,e){e.classHierarchy.push("vtkWebGPUCamera"),t.getProjectionMatrix=(n,r,a,i)=>{if(zt(n),e.renderable.getParallelProjection()){const o=e.renderable.getParallelScale(),s=o*r,c=o,l=(i[0]-1)*s,u=(i[0]+1)*s,f=(i[1]-1)*c,v=(i[1]+1)*c,g=1/(u-l),d=1/(v-f);n[0]=2*g,n[5]=2*d,n[10]=1/(a[1]-a[0]),n[12]=(u+l)*g,n[13]=(v+f)*d,n[14]=a[1]/(a[1]-a[0])}else{const o=Math.tan(Math.PI*e.renderable.getViewAngle()/360);let s,c;e.renderable.getUseHorizontalViewAngle()===!0?(s=a[0]*o,c=a[0]*o/r):(s=a[0]*o*r,c=a[0]*o);const l=(i[0]-1)*s,u=(i[0]+1)*s,f=(i[1]-1)*c,v=(i[1]+1)*c;n[0]=2*a[0]/(u-l),n[5]=2*a[0]/(v-f),n[12]=(l+u)/(u-l),n[13]=(f+v)/(v-f),n[10]=0,n[14]=a[0],n[11]=-1,n[15]=0}},t.convertToOpenGLDepth=n=>{if(e.renderable.getParallelProjection())return 1-n;const r=e.renderable.getClippingRangeByReference();let a=-r[0]/n;return a=(r[0]+r[1])/(r[1]-r[0])+2*r[0]*r[1]/(a*(r[1]-r[0])),.5*a+.5},t.getKeyMatrices=n=>{const r=n.getRenderable(),a=n.getParent();if(Math.max(a.getMTime(),t.getMTime(),r.getMTime(),e.renderable.getMTime(),n.getStabilizedTime())>e.keyMatrixTime.getMTime()){const i=e.renderable.getViewMatrix();fa(e.keyMatrices.normalMatrix,i),e.keyMatrices.normalMatrix[3]=0,e.keyMatrices.normalMatrix[7]=0,e.keyMatrices.normalMatrix[11]=0,ba(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix),$n(e.keyMatrices.wcvc,i);const o=n.getStabilizedCenterByReference();kr(e.keyMatrices.scvc,e.keyMatrices.wcvc,o);const s=n.getAspectRatio(),c=e.renderable.getClippingRangeByReference();t.getProjectionMatrix(e.keyMatrices.vcpc,s,c,e.renderable.getWindowCenterByReference()),Xn(e.keyMatrices.scpc,e.keyMatrices.vcpc,e.keyMatrices.scvc),ba(e.keyMatrices.pcsc,e.keyMatrices.scpc),e.keyMatrixTime.modified()}return e.keyMatrices}}const Qoe={keyMatrixTime:null,keyMatrices:null};function Koe(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Qoe,n),Fr.extend(t,e,n),e.keyMatrixTime={},J.obj(e.keyMatrixTime),e.keyMatrices={normalMatrix:new Float64Array(16),vcpc:new Float64Array(16),pcsc:new Float64Array(16),wcvc:new Float64Array(16),scpc:new Float64Array(16),scvc:new Float64Array(16)},J.setGet(t,e,["keyMatrixTime"]),joe(t,e)}const Xoe=J.newInstance(Koe);Vs("vtkCamera",Xoe);function Yoe(t,e){e.classHierarchy.push("vtkWebGPUBindGroup"),t.setBindables=n=>{if(e.bindables.length===n.length){let r=!0;for(let a=0;a<e.bindables.length;a++)e.bindables[a]!==n[a]&&(r=!1);if(r)return}e.bindables=n,t.modified()},t.getBindGroupLayout=n=>{const r=[];for(let a=0;a<e.bindables.length;a++){const i=e.bindables[a].getBindGroupLayoutEntry();i.binding=a,r.push(i)}return n.getBindGroupLayout({entries:r})},t.getBindGroup=n=>{let r=t.getMTime();for(let i=0;i<e.bindables.length;i++){const o=e.bindables[i].getBindGroupTime().getMTime();r=o>r?o:r}if(r<e.bindGroupTime.getMTime())return e.bindGroup;const a=[];for(let i=0;i<e.bindables.length;i++){const o=e.bindables[i].getBindGroupEntry();o.binding=i,a.push(o)}return e.bindGroup=n.getHandle().createBindGroup({layout:t.getBindGroupLayout(n),entries:a,label:e.label}),e.bindGroupTime.modified(),e.bindGroup},t.getShaderCode=n=>{const r=[],a=n.getBindGroupLayoutCount(e.label);for(let i=0;i<e.bindables.length;i++)r.push(e.bindables[i].getShaderCode(i,a));return r.join(`
`)}}const Zoe={device:null,handle:null,label:null};function SU(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Zoe,n),J.obj(t,e),e.bindables=[],e.bindGroupTime={},J.obj(e.bindGroupTime,{mtime:0}),J.get(t,e,["bindGroupTime","handle","sizeInBytes","usage"]),J.setGet(t,e,["label","device","arrayInformation"]),Yoe(t,e)}const Joe=J.newInstance(SU);var CU={newInstance:Joe,extend:SU};function ese(t,e){e.classHierarchy.push("vtkWebGPUShaderModule"),t.initialize=(n,r)=>{e.device=n,e.handle=e.device.getHandle().createShaderModule({code:r.getCode()})}}const tse={device:null,handle:null};function IU(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,tse,n),J.obj(t,e),J.get(t,e,["lastCameraMTime"]),J.setGet(t,e,["device","handle"]),ese(t,e)}const nse=J.newInstance(IU,"vtkWebGPUShaderModule");var rse={newInstance:nse,extend:IU};function ase(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;const a=Array.isArray(n)?n.join(`
`):n;let i=!1;t.search(e)!==-1&&(i=!0);let o="";r&&(o="g");const s=new RegExp(e,o),c=t.replace(s,a);return{replace:i,result:c}}function ise(t,e){e.classHierarchy.push("vtkWebGPUShaderCache"),t.getShaderModule=n=>{const r=n.getType(),a=n.getHash(),i=e._shaderModules.keys();for(let s=0;s<i.length;s++){const c=i[s];if(c.getHash()===a&&c.getType()===r)return e._shaderModules.get(c)}const o=rse.newInstance();return o.initialize(e.device,n),e._shaderModules.set(n,o),o}}const ose={shaderModules:null,device:null,window:null};function DU(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,ose,n),e._shaderModules=new Map,J.obj(t,e),J.setGet(t,e,["device","window"]),ise(t,e)}const sse=J.newInstance(DU,"vtkWebGPUShaderCache");var Nr={newInstance:sse,extend:DU,substitute:ase};function cse(t,e){e.classHierarchy.push("vtkWebGPUPipeline"),t.getShaderDescriptions=()=>e.shaderDescriptions,t.initialize=(n,r)=>{e.pipelineDescription=e.renderEncoder.getPipelineSettings(),e.pipelineDescription.primitive.topology=e.topology,e.pipelineDescription.vertex=e.vertexState,e.pipelineDescription.label=r;const a=[];for(let i=0;i<e.layouts.length;i++)a.push(e.layouts[i].layout);e.pipelineLayout=n.getHandle().createPipelineLayout({bindGroupLayouts:a}),e.pipelineDescription.layout=e.pipelineLayout;for(let i=0;i<e.shaderDescriptions.length;i++){const o=e.shaderDescriptions[i],s=n.getShaderModule(o);o.getType()==="vertex"&&(e.pipelineDescription.vertex.module=s.getHandle(),e.pipelineDescription.vertex.entryPoint="main"),o.getType()==="fragment"&&(e.pipelineDescription.fragment.module=s.getHandle(),e.pipelineDescription.fragment.entryPoint="main")}e.handle=n.getHandle().createRenderPipeline(e.pipelineDescription)},t.getShaderDescription=n=>{for(let r=0;r<e.shaderDescriptions.length;r++)if(e.shaderDescriptions[r].getType()===n)return e.shaderDescriptions[r];return null},t.addBindGroupLayout=n=>{n&&e.layouts.push({layout:n.getBindGroupLayout(e.device),label:n.getLabel()})},t.getBindGroupLayout=n=>e.layouts[n].layout,t.getBindGroupLayoutCount=n=>{for(let r=0;r<e.layouts.length;r++)if(e.layouts[r].label===n)return r;return 0},t.bindVertexInput=(n,r)=>{r.bindBuffers(n)}}const lse={handle:null,layouts:null,renderEncoder:null,shaderDescriptions:null,vertexState:null,topology:null,pipelineDescription:null};function EU(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,lse,n),Yr(t,e),e.layouts=[],e.shaderDescriptions=[],_o(t,e,["handle","pipelineDescription"]),Wa(t,e,["device","renderEncoder","topology","vertexState"]),cse(t,e)}const use=dr(EU,"vtkWebGPUPipeline");var fse={newInstance:use,extend:EU};function vse(t,e){e.classHierarchy.push("vtkWebGPUShaderDescription"),t.hasOutput=n=>e.outputNames.includes(n),t.addOutput=function(n,r){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;e.outputTypes.push(n),e.outputNames.push(r),e.outputInterpolations.push(a)},t.addBuiltinOutput=(n,r)=>{e.builtinOutputTypes.push(n),e.builtinOutputNames.push(r)},t.addBuiltinInput=(n,r)=>{e.builtinInputTypes.push(n),e.builtinInputNames.push(r)},t.replaceShaderCode=(n,r)=>{const a=[];let i=[];if(r&&a.push(r.getShaderCode()),n||e.builtinInputNames.length){const o=[];if(o.push(`struct ${e.type}Input
{`),n){const s=n.getOutputNamesByReference(),c=n.getOutputTypesByReference(),l=n.getOutputInterpolationsByReference();for(let u=0;u<s.length;u++)l[u]!==void 0?o.push(`  @location(${u}) @interpolate(${l[u]}) ${s[u]} : ${c[u]},`):o.push(`  @location(${u}) ${s[u]} : ${c[u]},`)}for(let s=0;s<e.builtinInputNames.length;s++)o.push(`  ${e.builtinInputNames[s]} : ${e.builtinInputTypes[s]},`);o.length>1&&(o.push("};"),i=o,a[a.length-1]+=",",a.push(`input: ${e.type}Input`))}if(a.length&&(e.code=Nr.substitute(e.code,"//VTK::IOStructs::Input",a).result),e.outputNames.length+e.builtinOutputNames.length){const o=[`struct ${e.type}Output
{`];for(let s=0;s<e.outputNames.length;s++)e.outputInterpolations[s]!==void 0?o.push(`  @location(${s}) @interpolate(${e.outputInterpolations[s]}) ${e.outputNames[s]} : ${e.outputTypes[s]},`):o.push(`  @location(${s}) ${e.outputNames[s]} : ${e.outputTypes[s]},`);for(let s=0;s<e.builtinOutputNames.length;s++)o.push(`  ${e.builtinOutputNames[s]} : ${e.builtinOutputTypes[s]},`);o.push("};"),i=i.concat(o),e.code=Nr.substitute(e.code,"//VTK::IOStructs::Output",[`-> ${e.type}Output`]).result}e.code=Nr.substitute(e.code,"//VTK::IOStructs::Dec",i).result}}const gse={type:null,hash:null,code:null,outputNames:null,outputTypes:null};function TU(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,gse,n),e.outputNames=[],e.outputTypes=[],e.outputInterpolations=[],e.builtinOutputNames=[],e.builtinOutputTypes=[],e.builtinInputNames=[],e.builtinInputTypes=[],J.obj(t,e),J.setGet(t,e,["type","hash","code"]),J.getArray(t,e,["outputTypes","outputNames","outputInterpolations"]),vse(t,e)}const dse=J.newInstance(TU,"vtkWebGPUShaderDescription");var dw={newInstance:dse,extend:TU};const mw={r8unorm:{numComponents:1,nativeType:Uint8Array,stride:1,elementSize:1,sampleType:"float"},r8snorm:{numComponents:1,nativeType:Int8Array,stride:1,elementSize:1,sampleType:"float"},r8uint:{numComponents:1,nativeType:Uint8Array,stride:1,elementSize:1,sampleType:"uint"},r8sint:{numComponents:1,nativeType:Int8Array,stride:1,elementSize:1,sampleType:"sint"},r16uint:{numComponents:1,nativeType:Uint16Array,stride:2,elementSize:2,sampleType:"uint"},r16sint:{numComponents:1,nativeType:Int16Array,stride:2,elementSize:2,sampleType:"sint"},r16float:{numComponents:1,nativeType:Float32Array,stride:2,elementSize:2,sampleType:"float"},rg8unorm:{numComponents:2,nativeType:Uint8Array,stride:2,elementSize:1,sampleType:"float"},rg8snorm:{numComponents:2,nativeType:Int8Array,stride:2,elementSize:1,sampleType:"float"},rg8uint:{numComponents:2,nativeType:Uint8Array,stride:2,elementSize:1,sampleType:"uint"},rg8sint:{numComponents:2,nativeType:Int8Array,stride:2,elementSize:1,sampleType:"sint"},r32uint:{numComponents:1,nativeType:Uint32Array,stride:4,elementSize:4,sampleType:"uint"},r32sint:{numComponents:1,nativeType:Int32Array,stride:4,elementSize:4,sampleType:"sint"},r32float:{numComponents:1,nativeType:Float32Array,stride:4,elementSize:4,sampleType:"unfilterable-float"},rg16uint:{numComponents:2,nativeType:Uint16Array,stride:4,elementSize:2,sampleType:"uint"},rg16sint:{numComponents:2,nativeType:Int16Array,stride:4,elementSize:2,sampleType:"sint"},rg16float:{numComponents:2,nativeType:Float32Array,stride:4,elementSize:2,sampleType:"float"},rgba8unorm:{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"float"},"rgba8unorm-srgb":{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"float"},rgba8snorm:{numComponents:4,nativeType:Int8Array,stride:4,elementSize:1,sampleType:"float"},rgba8uint:{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"uint"},rgba8sint:{numComponents:4,nativeType:Int8Array,stride:4,elementSize:1,sampleType:"sint"},bgra8unorm:{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"float"},"bgra8unorm-srgb":{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"float"},rgb9e5ufloat:{numComponents:4,nativeType:Uint32Array,stride:4,sampleType:"float"},rgb10a2unorm:{numComponents:4,nativeType:Uint32Array,stride:4,sampleType:"float"},rg11b10ufloat:{numComponents:4,nativeType:Float32Array,stride:4,sampleType:"float"},rg32uint:{numComponents:2,nativeType:Uint32Array,stride:8,elementSize:4,sampleType:"uint"},rg32sint:{numComponents:2,nativeType:Int32Array,stride:8,elementSize:4,sampleType:"sint"},rg32float:{numComponents:2,nativeType:Float32Array,stride:8,elementSize:4,sampleType:"unfilterable-float"},rgba16uint:{numComponents:4,nativeType:Uint16Array,stride:8,elementSize:2,sampleType:"uint"},rgba16sint:{numComponents:4,nativeType:Int16Array,stride:8,elementSize:2,sampleType:"sint"},rgba16float:{numComponents:4,nativeType:Float32Array,stride:8,elementSize:2,sampleType:"float"},rgba32uint:{numComponents:4,nativeType:Uint32Array,stride:16,elementSize:4,sampleType:"uint"},rgba32sint:{numComponents:4,nativeType:Int32Array,stride:16,elementSize:4,sampleType:"sint"},rgba32float:{numComponents:4,nativeType:Float32Array,stride:16,elementSize:4,sampleType:"unfilterable-float"},stencil8:{numComponents:1,nativeType:Uint8Array,stride:1,elementSize:1,sampleType:"uint"},depth16unorm:{numComponents:1,nativeType:Uint16Array,stride:2,elementSize:2,sampleType:"depth"},depth24plus:{numComponents:1,nativeType:Uint32Array,stride:4,elementSize:3,sampleType:"depth"},"depth24plus-stencil8":{numComponents:2,nativeType:Uint32Array,stride:4,sampleType:"mixed"},depth32float:{numComponents:1,nativeType:Float32Array,stride:4,elementSize:4,sampleType:"depth"}};function mse(t){return!t||t.length<6?0:t in mw?mw[t]:(Kn(`unknown format ${t}`),null)}function hse(t){if(!t||t.length<5)return 0;let e=1;t[t.length-2]==="x"&&(e=Number(t[t.length-1]));const n=e===1?t.length-1:t.length-3,r=Number(t[n]);if(Number.isNaN(r))return Kn(`unknown format ${t}`),0;const a=5-r/2;return e*a}function pse(t){if(!t||t.length<5)return 0;let e=1;return t[t.length-2]==="x"&&(e=Number(t[t.length-1])),e}function Sse(t){if(!t||t.length<5)return 0;let e;if(t[0]==="f")e="Float";else if(t[0]==="s")e="Int";else if(t[0]==="u")e="Uint";else{Kn(`unknown format ${t}`);return}const n=t.split("x")[0],r=Number(n[n.length-1]);if(Number.isNaN(r)){Kn(`unknown format ${t}`);return}return e+=8*(5-r/2),e+="Array",e}function Cse(t){let e;if(t[0]==="f"||t[1]==="n")e="f32";else if(t[0]==="s"&&t[1]==="i")e="i32";else if(t[0]==="u"&&t[1]==="i")e="u32";else{Kn(`unknown format ${t}`);return}let n=1;return t[t.length-2]==="x"&&(n=Number(t[t.length-1])),n===4?`vec4<${e}>`:n===3?`vec3<${e}>`:n===2?`vec2<${e}>`:e}function Ise(t){if(!t)return 0;let e=1;return t.substring(0,3)==="vec"?e=Number(t[3]):t.substring(0,3)==="mat"&&(e=t[3]*t[5]),e*4}function Dse(t){if(t){if(t.includes("f32"))return"Float32Array";if(t.includes("i32"))return"Int32Array";if(t.includes("u32"))return"Uint32Array";Kn(`unknown format ${t}`)}}var Ui={getDetailsFromTextureFormat:mse,getByteStrideFromBufferFormat:hse,getNumberOfComponentsFromBufferFormat:pse,getNativeTypeFromBufferFormat:Sse,getShaderTypeFromBufferFormat:Cse,getByteStrideFromShaderFormat:Ise,getNativeTypeFromShaderFormat:Dse};function Ese(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!e.includes(t[n]))return!1;return!0}function Tse(t,e){e.classHierarchy.push("vtkWebGPUVertexInput"),t.addBuffer=function(n,r){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"vertex",i=r;Array.isArray(i)||(i=[i]);for(let o=0;o<e.inputs.length;o++)if(Ese(e.inputs[o].names,i)){if(e.inputs[o].buffer===n)return;e.inputs[o].buffer=n;return}e.inputs.push({buffer:n,stepMode:a,names:i}),e.inputs=e.inputs.sort((o,s)=>o.names[0]<s.names[0]?-1:o.names[0]>s.names[0]?1:0)},t.removeBufferIfPresent=n=>{for(let r=0;r<e.inputs.length;r++)e.inputs[r].names.includes(n)&&e.inputs.splice(r,1)},t.getBuffer=n=>{for(let r=0;r<e.inputs.length;r++)if(e.inputs[r].names.includes(n))return e.inputs[r].buffer;return null},t.hasAttribute=n=>{for(let r=0;r<e.inputs.length;r++)if(e.inputs[r].names.includes(n))return!0;return!1},t.getAttributeTime=n=>{for(let r=0;r<e.inputs.length;r++)if(e.inputs[r].names.includes(n))return e.inputs[r].buffer.getSourceTime();return 0},t.getShaderCode=()=>{let n="",r=0;for(let a=0;a<e.inputs.length;a++)for(let i=0;i<e.inputs[a].names.length;i++){const o=e.inputs[a].buffer.getArrayInformation()[i],s=Ui.getShaderTypeFromBufferFormat(o.format);r>0&&(n+=`,
`),n=`${n}  @location(${r}) ${e.inputs[a].names[i]} : ${s}`,r++}return n},t.getVertexInputInformation=()=>{const n={};if(e.inputs.length){const r=[];let a=0;for(let i=0;i<e.inputs.length;i++){const o=e.inputs[i].buffer,s={arrayStride:o.getStrideInBytes(),stepMode:e.inputs[i].stepMode,attributes:[]},c=o.getArrayInformation();for(let l=0;l<e.inputs[i].names.length;l++)s.attributes.push({shaderLocation:a,offset:c[l].offset,format:c[l].format}),a++;r.push(s)}n.buffers=r}return n},t.bindBuffers=n=>{for(let r=0;r<e.inputs.length;r++)n.setVertexBuffer(r,e.inputs[r].buffer.getHandle());e.indexBuffer&&n.setIndexBuffer(e.indexBuffer.getHandle(),e.indexBuffer.getArrayInformation()[0].format)},t.getReady=()=>{},t.releaseGraphicsResources=()=>{e.created&&(e.inputs=[],e.bindingDescriptions=[],e.attributeDescriptions=[])}}const yse={inputs:null,bindingDescriptions:!1,attributeDescriptions:null,indexBuffer:null};function yU(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,yse,n),Yr(t,e),e.bindingDescriptions=[],e.attributeDescriptions=[],e.inputs=[],Wa(t,e,["created","device","handle","indexBuffer"]),Tse(t,e)}const Mse=dr(yU,"vtkWebGPUVertexInput");var _se={newInstance:Mse,extend:yU};const Ose=`
//VTK::Renderer::Dec

//VTK::Color::Dec

//VTK::Normal::Dec

//VTK::TCoord::Dec

//VTK::Select::Dec

//VTK::Mapper::Dec

//VTK::IOStructs::Dec

@vertex
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output : vertexOutput;

  // var vertex: vec4<f32> = vertexBC;

  //VTK::Color::Impl

  //VTK::Normal::Impl

  //VTK::TCoord::Impl

  //VTK::Select::Impl

  //VTK::Position::Impl

  return output;
}
`,wse=`
//VTK::Renderer::Dec

//VTK::Color::Dec

//VTK::Normal::Dec

//VTK::TCoord::Dec

//VTK::Select::Dec

//VTK::RenderEncoder::Dec

//VTK::Mapper::Dec

//VTK::IOStructs::Dec

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output : fragmentOutput;

  //VTK::Color::Impl

  //VTK::Normal::Impl

  //VTK::Light::Impl

  //VTK::TCoord::Impl

  //VTK::Select::Impl

  // var computedColor:vec4<f32> = vec4<f32>(1.0,0.5,0.5,1.0);

  //VTK::RenderEncoder::Impl
  return output;
}
`;function Pse(t,e){e.classHierarchy.push("vtkWebGPUSimpleMapper"),t.generateShaderDescriptions=(n,r,a)=>{const i=dw.newInstance({type:"vertex",hash:n,code:e.vertexShaderTemplate}),o=dw.newInstance({type:"fragment",hash:n,code:e.fragmentShaderTemplate}),s=r.getShaderDescriptions();s.push(i),s.push(o);const c=e.vertexShaderTemplate+e.fragmentShaderTemplate,l=new RegExp("//VTK::[^:]*::","g"),f=c.match(l).filter((v,g,d)=>d.indexOf(v)===g).map(v=>`replaceShader${v.substring(7,v.length-2)}`);for(let v=0;v<f.length;v++){const g=f[v];g!=="replaceShaderIOStructs"&&e.shaderReplacements.has(g)&&e.shaderReplacements.get(g)(n,r,a)}t.replaceShaderIOStructs(n,r,a)},t.replaceShaderIOStructs=(n,r,a)=>{const i=r.getShaderDescription("vertex");i.replaceShaderCode(null,a),r.getShaderDescription("fragment").replaceShaderCode(i)},t.replaceShaderRenderEncoder=(n,r,a)=>{e.renderEncoder.replaceShaderCode(r)},e.shaderReplacements.set("replaceShaderRenderEncoder",t.replaceShaderRenderEncoder),t.replaceShaderRenderer=(n,r,a)=>{if(!e.WebGPURenderer)return;const i=e.WebGPURenderer.getBindGroup().getShaderCode(r),o=r.getShaderDescription("vertex");let s=o.getCode();s=Nr.substitute(s,"//VTK::Renderer::Dec",[i]).result,o.setCode(s);const c=r.getShaderDescription("fragment");s=c.getCode(),s=Nr.substitute(s,"//VTK::Renderer::Dec",[i]).result,c.setCode(s)},e.shaderReplacements.set("replaceShaderRenderer",t.replaceShaderRenderer),t.replaceShaderMapper=(n,r,a)=>{const i=e.bindGroup.getShaderCode(r),o=r.getShaderDescription("vertex");let s=o.getCode();s=Nr.substitute(s,"//VTK::Mapper::Dec",[i]).result,o.setCode(s);const c=r.getShaderDescription("fragment");c.addBuiltinInput("bool","@builtin(front_facing) frontFacing"),s=c.getCode(),s=Nr.substitute(s,"//VTK::Mapper::Dec",[i]).result,c.setCode(s)},e.shaderReplacements.set("replaceShaderMapper",t.replaceShaderMapper),t.replaceShaderPosition=(n,r,a)=>{const i=r.getShaderDescription("vertex");i.addBuiltinOutput("vec4<f32>","@builtin(position) Position");let o=i.getCode();o=Nr.substitute(o,"//VTK::Position::Impl",["    output.Position = rendererUBO.SCPCMatrix*vertexBC;"]).result,i.setCode(o)},e.shaderReplacements.set("replaceShaderPosition",t.replaceShaderPosition),t.replaceShaderTCoord=(n,r,a)=>{r.getShaderDescription("vertex").addOutput("vec2<f32>","tcoordVS")},e.shaderReplacements.set("replaceShaderTCoord",t.replaceShaderTCoord),t.addTextureView=n=>{e.textureViews.includes(n)||e.textureViews.push(n)},t.prepareToDraw=n=>{e.renderEncoder=n,t.updateInput(),t.updateBuffers(),t.updateBindings(),t.updatePipeline()},t.updateInput=()=>{},t.updateBuffers=()=>{},t.updateBindings=()=>{e.bindGroup.setBindables(t.getBindables())},t.computePipelineHash=()=>{},t.registerDrawCallback=n=>{n.registerDrawCallback(e.pipeline,t.draw)},t.prepareAndDraw=n=>{t.prepareToDraw(n),n.setPipeline(e.pipeline),t.draw(n)},t.draw=n=>{const r=n.getBoundPipeline();n.activateBindGroup(e.bindGroup),e.WebGPURenderer&&e.WebGPURenderer.bindUBO(n),r.bindVertexInput(n,e.vertexInput);const a=e.vertexInput.getIndexBuffer();a?n.drawIndexed(a.getIndexCount(),e.numberOfInstances,0,0,0):n.draw(e.numberOfVertices,e.numberOfInstances,0,0)},t.getBindables=()=>{const n=[...e.additionalBindables];e.UBO&&n.push(e.UBO),e.SSBO&&n.push(e.SSBO);for(let r=0;r<e.textureViews.length;r++){n.push(e.textureViews[r]);const a=e.textureViews[r].getSampler();a&&n.push(a)}return n},t.updatePipeline=()=>{t.computePipelineHash(),e.pipeline=e.device.getPipeline(e.pipelineHash),e.pipeline||(e.pipeline=fse.newInstance(),e.pipeline.setDevice(e.device),e.WebGPURenderer&&e.pipeline.addBindGroupLayout(e.WebGPURenderer.getBindGroup()),e.pipeline.addBindGroupLayout(e.bindGroup),t.generateShaderDescriptions(e.pipelineHash,e.pipeline,e.vertexInput),e.pipeline.setTopology(e.topology),e.pipeline.setRenderEncoder(e.renderEncoder),e.pipeline.setVertexState(e.vertexInput.getVertexInputInformation()),e.device.createPipeline(e.pipelineHash,e.pipeline))}}const Ase={additionalBindables:void 0,bindGroup:null,device:null,fragmentShaderTemplate:null,numberOfInstances:1,numberOfVertices:0,pipelineHash:null,shaderReplacements:null,SSBO:null,textureViews:null,topology:"triangle-list",UBO:null,vertexShaderTemplate:null,WebGPURenderer:null};function MU(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Ase,n),Fr.extend(t,e,n),e.textureViews=[],e.vertexInput=_se.newInstance(),e.bindGroup=CU.newInstance({label:"mapperBG"}),e.additionalBindables=[],e.fragmentShaderTemplate=e.fragmentShaderTemplate||wse,e.vertexShaderTemplate=e.vertexShaderTemplate||Ose,e.shaderReplacements=new Map,J.get(t,e,["pipeline","vertexInput"]),J.setGet(t,e,["additionalBindables","device","fragmentShaderTemplate","interpolate","numberOfInstances","numberOfVertices","pipelineHash","shaderReplacements","SSBO","textureViews","topology","UBO","vertexShaderTemplate","WebGPURenderer"]),Pse(t,e)}const xse=J.newInstance(MU,"vtkWebGPUSimpleMapper");var _U={newInstance:xse,extend:MU};function Rse(t,e){e.classHierarchy.push("vtkWebGPUFullScreenQuad"),t.replaceShaderPosition=(n,r,a)=>{const i=r.getShaderDescription("vertex");i.addBuiltinOutput("vec4<f32>","@builtin(position) Position"),i.addOutput("vec4<f32>","vertexVC");let o=i.getCode();o=Nr.substitute(o,"//VTK::Position::Impl",["output.tcoordVS = vec2<f32>(vertexBC.x * 0.5 + 0.5, 1.0 - vertexBC.y * 0.5 - 0.5);","output.Position = vec4<f32>(vertexBC, 1.0);","output.vertexVC = vec4<f32>(vertexBC, 1);"]).result,i.setCode(o)},e.shaderReplacements.set("replaceShaderPosition",t.replaceShaderPosition),t.updateBuffers=()=>{const n=e.device.getBufferManager().getFullScreenQuadBuffer();e.vertexInput.addBuffer(n,["vertexBC"]),e.numberOfVertices=6}}const bse={};function OU(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,bse,n),_U.extend(t,e,n),Rse(t,e)}const Nse=J.newInstance(OU,"vtkWebGPUFullScreenQuad");var BT={newInstance:Nse,extend:OU};const Lse={Verts:0,Lines:1,Triangles:2,Strips:3,LinesFromStrips:4,LinesFromTriangles:5,Points:6,UniformArray:7,PointArray:8,NormalsFromPoints:9,Texture:10,RawVertex:11,Storage:12,Index:13},Use={Start:0,Points:0,Lines:1,Triangles:2,TriangleStrips:3,TriangleEdges:4,TriangleStripEdges:5,End:6};var ah={BufferUsage:Lse,PrimitiveTypes:Use};const lE=["getMappedRange","mapAsync","unmap"];function Fse(t,e,n,r){const a=r.byteLength,i=t.createBuffer({size:a,usage:GPUBufferUsage.COPY_SRC,mappedAtCreation:!0}),o=i.getMappedRange(0,a);new Uint8Array(o).set(new Uint8Array(r)),i.unmap();const s=t.createCommandEncoder();s.copyBufferToBuffer(i,0,e,n,a);const c=s.finish();t.queue.submit([c]),i.destroy()}function Vse(t,e){e.classHierarchy.push("vtkWebGPUBuffer"),t.create=(n,r)=>{e.handle=e.device.getHandle().createBuffer({size:n,usage:r,label:e.label}),e.sizeInBytes=n,e.usage=r},t.write=n=>{Fse(e.device.getHandle(),e.handle,0,n.buffer)},t.createAndWrite=(n,r)=>{e.handle=e.device.getHandle().createBuffer({size:n.byteLength,usage:r,mappedAtCreation:!0,label:e.label}),e.sizeInBytes=n.byteLength,e.usage=r,new Uint8Array(e.handle.getMappedRange()).set(new Uint8Array(n.buffer)),e.handle.unmap()};for(let n=0;n<lE.length;n++)t[lE[n]]=function(){return e.handle[lE[n]](...arguments)}}const kse={device:null,handle:null,sizeInBytes:0,strideInBytes:0,arrayInformation:null,usage:null,label:null,sourceTime:null};function wU(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,kse,n),J.obj(t,e),J.get(t,e,["handle","sizeInBytes","usage"]),J.setGet(t,e,["strideInBytes","device","arrayInformation","label","sourceTime"]),Vse(t,e)}const Gse=J.newInstance(wU);var WT={newInstance:Gse,extend:wU,...ah};const{Representation:hw}=bv,{PrimitiveTypes:Ml}=ah;class Bse{constructor(){this.keys=new Uint32Array(10),this.values=new Uint32Array(10),this.count=0}clear(){this.count=0}has(e){for(let n=0;n<this.count;n++)if(this.keys[n]===e)return!0}get(e){for(let n=0;n<this.count;n++)if(this.keys[n]===e)return this.values[n]}set(e,n){this.count<9&&(this.keys[this.count]=e,this.values[this.count++]=n)}}function Wse(t){switch(t){case Ml.Points:return"points";case Ml.Lines:return"lines";case Ml.Triangles:case Ml.TriangleEdges:return"polys";case Ml.TriangleStripEdges:case Ml.TriangleStrips:return"strips";default:return""}}function Dp(t,e,n){let r=t.pointIdToFlatId[e];return r<0&&(r=t.flatId,t.pointIdToFlatId[e]=r,t.flatIdToPointId[t.flatId]=e,t.flatIdToCellId[t.flatId]=n,t.flatId++),r}function Hse(t,e,n){const r=t.length;for(let o=0;o<r;o++){let s=t[o];if(n.cellProvokedMap.has(s)){n.ibo[n.iboId++]=n.cellProvokedMap.get(s);for(let c=o+1;c<o+r;c++){s=t[c%r];const l=Dp(n,s,e);n.ibo[n.iboId++]=l}return}}for(let o=0;o<r;o++){let s=t[o];if(!n.provokedPointIds[s]){let c=Dp(n,s,e);n.provokedPointIds[s]=1,n.cellProvokedMap.set(s,c),n.flatIdToCellId[c]=e,n.ibo[n.iboId++]=c;for(let l=o+1;l<o+r;l++)s=t[l%r],c=Dp(n,s,e),n.ibo[n.iboId++]=c;return}}let a=t[0],i=n.flatId;n.cellProvokedMap.set(a,i),n.flatIdToPointId[n.flatId]=a,n.flatIdToCellId[n.flatId]=e,n.flatId++,n.ibo[n.iboId++]=i;for(let o=1;o<r;o++)a=t[o],i=Dp(n,a,e),n.ibo[n.iboId++]=i}function $se(t,e,n){const r=t.length;n.iboSize+=r;for(let a=0;a<r;a++){const i=t[a];if(n.cellProvokedMap.has(i))return}for(let a=0;a<r;a++){const i=t[a];if(!n.provokedPointIds[i]){n.provokedPointIds[i]=1,n.cellProvokedMap.set(i,1);return}}n.cellProvokedMap.set(t[0],1),n.extraPoints++}let Dc;const pw=new Uint32Array(1),Cs=new Uint32Array(2),dl=new Uint32Array(3),uE={anythingToPoints(t,e,n,r,a){for(let i=0;i<t;++i)pw[0]=e[n+i],Dc(pw,r,a)},linesToWireframe(t,e,n,r,a){for(let i=0;i<t-1;++i)Cs[0]=e[n+i],Cs[1]=e[n+i+1],Dc(Cs,r,a)},polysToWireframe(t,e,n,r,a){if(t>2)for(let i=0;i<t;++i)Cs[0]=e[n+i],Cs[1]=e[n+(i+1)%t],Dc(Cs,r,a)},stripsToWireframe(t,e,n,r,a){if(t>2){for(let i=0;i<t-1;++i)Cs[0]=e[n+i],Cs[1]=e[n+i+1],Dc(Cs,r,a);for(let i=0;i<t-2;i++)Cs[0]=e[n+i],Cs[1]=e[n+i+2],Dc(Cs,r,a)}},polysToSurface(t,e,n,r,a){for(let i=0;i<t-2;i++)dl[0]=e[n],dl[1]=e[n+i+1],dl[2]=e[n+i+2],Dc(dl,r,a)},stripsToSurface(t,e,n,r,a){for(let i=0;i<t-2;i++)dl[0]=e[n+i],dl[1]=e[n+i+1+i%2],dl[2]=e[n+i+1+(i+1)%2],Dc(dl,r,a)}};function zse(t,e){e.classHierarchy.push("vtkWebGPUIndexBuffer"),t.buildIndexBuffer=n=>{const r=n.cells,a=n.primitiveType,i=n.representation,o=n.cellOffset,s=r.getData(),c=s.length,l=Wse(a),u=n.numberOfPoints,f={provokedPointIds:new Uint8Array(u),extraPoints:0,iboSize:0,flatId:0,iboId:0,cellProvokedMap:new Bse};let v=null;i===hw.POINTS||a===Ml.Points?v=uE.anythingToPoints:i===hw.WIREFRAME||a===Ml.Lines?v=uE[`${l}ToWireframe`]:v=uE[`${l}ToSurface`],Dc=$se;let g=o||0;for(let d=0;d<c;)f.cellProvokedMap.clear(),v(s[d],s,d+1,g,f),d+=s[d]+1,g++;u<=65535?f.flatIdToPointId=new Uint16Array(u+f.extraPoints):f.flatIdToPointId=new Uint32Array(u+f.extraPoints),u+f.extraPoints<36863?f.pointIdToFlatId=new Int16Array(u):f.pointIdToFlatId=new Int32Array(u),u+f.extraPoints<=65535?(f.ibo=new Uint16Array(f.iboSize),n.format="uint16"):(f.ibo=new Uint32Array(f.iboSize),n.format="uint32"),g<=65535?f.flatIdToCellId=new Uint16Array(u+f.extraPoints):f.flatIdToCellId=new Uint32Array(u+f.extraPoints),f.pointIdToFlatId.fill(-1),f.provokedPointIds.fill(0),Dc=Hse,g=o||0;for(let d=0;d<c;)f.cellProvokedMap.clear(),v(s[d],s,d+1,g,f),d+=s[d]+1,g++;delete f.provokedPointIds,delete f.pointIdToFlatId,n.nativeArray=f.ibo,e.flatIdToPointId=f.flatIdToPointId,e.flatIdToCellId=f.flatIdToCellId,e.flatSize=f.flatId,e.indexCount=f.iboId}}const qse={flatIdToPointId:null,flatIdToCellId:null,flatSize:0,indexCount:0};function PU(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,qse,n),WT.extend(t,e,n),J.setGet(t,e,["flatIdToPointId","flatIdToCellId","flatSize","indexCount"]),zse(t,e)}const jse=J.newInstance(PU);var Qse={newInstance:jse,extend:PU,...ah};const{BufferUsage:ml}=ah,{vtkErrorMacro:Kse}=Bi,{VtkDataTypes:Nu}=fn,Xse={};function Yse(t){let e;switch(t.getDataType()){case Nu.UNSIGNED_CHAR:e="uint8";break;case Nu.FLOAT:e="float32";break;case Nu.UNSIGNED_INT:e="uint32";break;case Nu.INT:e="sint32";break;case Nu.DOUBLE:e="float32";break;case Nu.UNSIGNED_SHORT:e="uint16";break;case Nu.SHORT:e="sin16";break;default:e="float32";break}switch(t.getNumberOfComponents()){case 2:e+="x2";break;case 3:e.includes("32")||Kse(`unsupported x3 type for ${e}`),e+="x3";break;case 4:e+="x4";break}return e}function Sw(t,e,n,r,a){const i={},o=t.getFlatSize();if(!o)return i;let s=[0,0,0,0];a.shift&&(a.shift.length?s=a.shift:s.fill(a.shift));let c=[1,1,1,1];a.scale&&(a.scale.length?c=a.scale:c.fill(a.scale));const l=Object.prototype.hasOwnProperty.call(a,"packExtra")?a.packExtra:!1;let u,f=0;const v=n+(l?1:0),g=Av(r,o*v);let d=t.getFlatIdToPointId();a.cellData&&(d=t.getFlatIdToCellId()),n===1?u=function(h){g[f++]=c[0]*e[h]+s[0]}:n===2?u=function(h){g[f++]=c[0]*e[h]+s[0],g[f++]=c[1]*e[h+1]+s[1]}:n===3&&!l?u=function(h){g[f++]=c[0]*e[h]+s[0],g[f++]=c[1]*e[h+1]+s[1],g[f++]=c[2]*e[h+2]+s[2]}:n===3&&l?u=function(h){g[f++]=c[0]*e[h]+s[0],g[f++]=c[1]*e[h+1]+s[1],g[f++]=c[2]*e[h+2]+s[2],g[f++]=c[3]*1+s[3]}:n===4&&(u=function(h){g[f++]=c[0]*e[h]+s[0],g[f++]=c[1]*e[h+1]+s[1],g[f++]=c[2]*e[h+2]+s[2],g[f++]=c[3]*e[h+3]+s[3]});for(let m=0;m<o;m++){const h=n*d[m];u(h)}return i.nativeArray=g,i}function Zse(t,e,n,r){const a=[t[r*3]-t[n*3],t[r*3+1]-t[n*3+1],t[r*3+2]-t[n*3+2]],i=[t[e*3]-t[n*3],t[e*3+1]-t[n*3+1],t[e*3+2]-t[n*3+2]],o=[];return Q0(a,i,o),T1(o),o}function Jse(t,e){const n=e.getData(),r=t.getData();if(!r||!n)return null;const a=new Int8Array(t.getNumberOfCells()*4),i=r.length;let o=0;for(let s=0;s<i;){const c=Zse(n,r[s+1],r[s+2],r[s+3]);a[o++]=127*c[0],a[o++]=127*c[1],a[o++]=127*c[2],a[o++]=127,s+=r[s]+1}return a}function e0e(t,e){e.classHierarchy.push("vtkWebGPUBufferManager");function n(r){r.dataArray&&!r.nativeArray&&(r.nativeArray=r.dataArray.getData());let a,i;if(r.usage===ml.Index&&(a=Qse.newInstance({label:r.label}),a.setDevice(e.device),i=GPUBufferUsage.INDEX|GPUBufferUsage.COPY_DST,a.buildIndexBuffer(r),a.createAndWrite(r.nativeArray,i),a.setArrayInformation([{format:r.format}])),a||(a=WT.newInstance({label:r.label}),a.setDevice(e.device)),r.usage===ml.UniformArray&&(i=GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,a.createAndWrite(r.nativeArray,i)),r.usage===ml.Storage&&(i=GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST,a.createAndWrite(r.nativeArray,i)),r.usage===ml.Texture&&(i=GPUBufferUsage.COPY_SRC,a.createAndWrite(r.nativeArray,i)),r.usage===ml.PointArray){i=GPUBufferUsage.VERTEX;const o=Ui.getNativeTypeFromBufferFormat(r.format),s=Sw(r.indexBuffer,r.dataArray.getData(),r.dataArray.getNumberOfComponents(),o,{packExtra:r.packExtra,shift:r.shift,scale:r.scale,cellData:r.cellData,cellOffset:r.cellOffset});a.createAndWrite(s.nativeArray,i),a.setStrideInBytes(Ui.getByteStrideFromBufferFormat(r.format)),a.setArrayInformation([{offset:0,format:r.format,interpolation:r.cellData?"flat":"perspective"}])}if(r.usage===ml.NormalsFromPoints){i=GPUBufferUsage.VERTEX;const o=Ui.getNativeTypeFromBufferFormat(r.format),s=Jse(r.cells,r.dataArray),c=Sw(r.indexBuffer,s,4,o,{cellData:!0});a.createAndWrite(c.nativeArray,i),a.setStrideInBytes(Ui.getByteStrideFromBufferFormat(r.format)),a.setArrayInformation([{offset:0,format:r.format,interpolation:"flat"}])}return r.usage===ml.RawVertex&&(i=GPUBufferUsage.VERTEX,a.createAndWrite(r.nativeArray,i),a.setStrideInBytes(Ui.getByteStrideFromBufferFormat(r.format)),a.setArrayInformation([{offset:0,format:r.format}])),a.setSourceTime(r.time),a}t.hasBuffer=r=>e.device.hasCachedObject(r),t.getBuffer=r=>r.hash?e.device.getCachedObject(r.hash,n,r):n(r),t.getBufferForPointArray=(r,a)=>{const i=Yse(r),o={hash:`${r.getMTime()}I${a.getMTime()}${i}`,usage:ml.PointArray,format:i,dataArray:r,indexBuffer:a};return t.getBuffer(o)},t.getFullScreenQuadBuffer=()=>{if(e.fullScreenQuadBuffer)return e.fullScreenQuadBuffer;e.fullScreenQuadBuffer=WT.newInstance(),e.fullScreenQuadBuffer.setDevice(e.device);const r=new Float32Array([-1,-1,0,1,-1,0,1,1,0,-1,-1,0,1,1,0,-1,1,0]);return e.fullScreenQuadBuffer.createAndWrite(r,GPUBufferUsage.VERTEX),e.fullScreenQuadBuffer.setStrideInBytes(12),e.fullScreenQuadBuffer.setArrayInformation([{offset:0,format:"float32x3"}]),e.fullScreenQuadBuffer}}const t0e={device:null,fullScreenQuadBuffer:null};function AU(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,t0e,n),Yr(t,e),Wa(t,e,["device"]),e0e(t,e)}const n0e=dr(AU);var Fv={newInstance:n0e,extend:AU,...Xse,...ah};const{BufferUsage:r0e}=Fv,{vtkErrorMacro:af}=J;function a0e(t,e){e.classHierarchy.push("vtkWebGPUStorageBuffer"),t.addEntry=(n,r)=>{if(e._bufferEntryNames.has(n)){af(`entry named ${n} already exists`);return}e._bufferEntryNames.set(n,e.bufferEntries.length);const a=Ui.getByteStrideFromShaderFormat(r);e.bufferEntries.push({name:n,type:r,sizeInBytes:a,offset:e.sizeInBytes,nativeType:Ui.getNativeTypeFromShaderFormat(r)}),e.sizeInBytes+=a},t.send=n=>{if(!e._buffer){const r={nativeArray:e.Float32Array,usage:r0e.Storage,label:e.label};e._buffer=n.getBufferManager().getBuffer(r),e.bindGroupTime.modified(),e._sendTime.modified();return}n.getHandle().queue.writeBuffer(e._buffer.getHandle(),0,e.arrayBuffer,0,e.sizeInBytes*e.numberOfInstances),e._sendTime.modified()},t.createView=n=>{n in e||(e.arrayBuffer||(e.arrayBuffer=new ArrayBuffer(e.sizeInBytes*e.numberOfInstances)),e[n]=J.newTypedArray(n,e.arrayBuffer))},t.setValue=(n,r,a)=>{const i=e._bufferEntryNames.get(n);if(i===void 0){af(`entry named ${n} not found in UBO`);return}const o=e.bufferEntries[i];t.createView(o.nativeType);const s=e[o.nativeType];s[(o.offset+r*e.sizeInBytes)/s.BYTES_PER_ELEMENT]=a},t.setArray=(n,r,a)=>{const i=e._bufferEntryNames.get(n);if(i===void 0){af(`entry named ${n} not found in UBO`);return}const o=e.bufferEntries[i];t.createView(o.nativeType);const s=e[o.nativeType],c=(o.offset+r*e.sizeInBytes)/s.BYTES_PER_ELEMENT;for(let l=0;l<a.length;l++)s[c+l]=a[l]},t.setAllInstancesFromArray=(n,r)=>{const a=e._bufferEntryNames.get(n);if(a===void 0){af(`entry named ${n} not found in UBO`);return}const i=e.bufferEntries[a];t.createView(i.nativeType);const o=e[i.nativeType],s=r.length/e.numberOfInstances;for(let c=0;c<e.numberOfInstances;c++){const l=(i.offset+c*e.sizeInBytes)/o.BYTES_PER_ELEMENT;for(let u=0;u<s;u++)o[l+u]=r[c*s+u]}},t.setAllInstancesFromArrayColorToFloat=(n,r)=>{const a=e._bufferEntryNames.get(n);if(a===void 0){af(`entry named ${n} not found in UBO`);return}const i=e.bufferEntries[a];t.createView(i.nativeType);const o=e[i.nativeType],s=r.length/e.numberOfInstances;for(let c=0;c<e.numberOfInstances;c++){const l=(i.offset+c*e.sizeInBytes)/o.BYTES_PER_ELEMENT;for(let u=0;u<s;u++)o[l+u]=r[c*s+u]/255}},t.setAllInstancesFromArray3x3To4x4=(n,r)=>{const a=e._bufferEntryNames.get(n);if(a===void 0){af(`entry named ${n} not found in UBO`);return}const i=e.bufferEntries[a];t.createView(i.nativeType);const o=e[i.nativeType],s=9;for(let c=0;c<e.numberOfInstances;c++){const l=(i.offset+c*e.sizeInBytes)/o.BYTES_PER_ELEMENT;for(let u=0;u<3;u++)for(let f=0;f<3;f++)o[l+u*4+f]=r[c*s+u*3+f]}},t.getSendTime=()=>e._sendTime.getMTime(),t.getShaderCode=(n,r)=>{const a=[`struct ${e.label}StructEntry
{`];for(let i=0;i<e.bufferEntries.length;i++){const o=e.bufferEntries[i];a.push(`  ${o.name}: ${o.type},`)}return a.push(`
};
struct ${e.label}Struct
{
  values: array<${e.label}StructEntry>,
};
@binding(${n}) @group(${r}) var<storage, read> ${e.label}: ${e.label}Struct;
`),a.join(`
`)},t.getBindGroupEntry=()=>({resource:{buffer:e._buffer.getHandle()}}),t.clearData=()=>{e.numberOfInstances=0,e.sizeInBytes=0,e.bufferEntries=[],e._bufferEntryNames=new Map,e._buffer=null,delete e.arrayBuffer,delete e.Float32Array}}const i0e={bufferEntries:null,bufferEntryNames:null,sizeInBytes:0,label:null,numberOfInstances:1};function xU(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,i0e,n),J.obj(t,e),e._bufferEntryNames=new Map,e.bufferEntries=[],e._sendTime={},J.obj(e._sendTime,{mtime:0}),e.bindGroupTime={},J.obj(e.bindGroupTime,{mtime:0}),e.bindGroupLayoutEntry=e.bindGroupLayoutEntry||{buffer:{type:"read-only-storage"}},J.get(t,e,["bindGroupTime"]),J.setGet(t,e,["device","bindGroupLayoutEntry","label","numberOfInstances","sizeInBytes"]),a0e(t,e)}const o0e=J.newInstance(xU,"vtkWebGPUStorageBuffer");var s0e={newInstance:o0e,extend:xU};const{BufferUsage:c0e}=Fv,{vtkErrorMacro:fE}=J;function l0e(t,e){e.classHierarchy.push("vtkWebGPUUniformBuffer"),t.addEntry=(n,r)=>{if(e._bufferEntryNames.has(n)){fE(`entry named ${n} already exists`);return}e.sortDirty=!0,e._bufferEntryNames.set(n,e.bufferEntries.length),e.bufferEntries.push({name:n,type:r,sizeInBytes:Ui.getByteStrideFromShaderFormat(r),offset:-1,nativeType:Ui.getNativeTypeFromShaderFormat(r),packed:!1})},t.sortBufferEntries=()=>{if(!e.sortDirty)return;let n=0;const r=[];let a=4;for(let i=0;i<e.bufferEntries.length;i++){const o=e.bufferEntries[i];o.sizeInBytes%16===0&&(a=Math.max(16,a)),o.sizeInBytes%8===0&&(a=Math.max(8,a))}for(let i=0;i<e.bufferEntries.length;i++){const o=e.bufferEntries[i];o.packed===!1&&o.sizeInBytes%16===0&&(o.packed=!0,o.offset=n,r.push(o),n+=o.sizeInBytes)}for(let i=0;i<e.bufferEntries.length;i++){const o=e.bufferEntries[i];if(o.packed===!1&&o.sizeInBytes===12)for(let s=0;s<e.bufferEntries.length;s++){const c=e.bufferEntries[s];if(c.packed===!1&&c.sizeInBytes===4){o.packed=!0,o.offset=n,r.push(o),n+=o.sizeInBytes,c.packed=!0,c.offset=n,r.push(c),n+=c.sizeInBytes;break}}}for(let i=0;i<e.bufferEntries.length;i++){const o=e.bufferEntries[i];if(!o.packed&&o.sizeInBytes%8===0)for(let s=i+1;s<e.bufferEntries.length;s++){const c=e.bufferEntries[s];if(!c.packed&&c.sizeInBytes%8===0){o.packed=!0,o.offset=n,r.push(o),n+=o.sizeInBytes,c.packed=!0,c.offset=n,r.push(c),n+=c.sizeInBytes;break}}}for(let i=0;i<e.bufferEntries.length;i++){const o=e.bufferEntries[i];if(!o.packed&&o.sizeInBytes%8===0){let s=!1;for(let c=0;!s&&c<e.bufferEntries.length;c++){const l=e.bufferEntries[c];if(!l.packed&&l.sizeInBytes===4)for(let u=c+1;u<e.bufferEntries.length;u++){const f=e.bufferEntries[u];if(!f.packed&&f.sizeInBytes===4){o.packed=!0,o.offset=n,r.push(o),n+=o.sizeInBytes,l.packed=!0,l.offset=n,r.push(l),n+=l.sizeInBytes,f.packed=!0,f.offset=n,r.push(f),n+=f.sizeInBytes,s=!0;break}}}}}for(let i=0;i<e.bufferEntries.length;i++){const o=e.bufferEntries[i];!o.packed&&o.sizeInBytes>4&&(o.packed=!0,o.offset=n,r.push(o),n+=o.sizeInBytes)}for(let i=0;i<e.bufferEntries.length;i++){const o=e.bufferEntries[i];o.packed||(o.packed=!0,o.offset=n,r.push(o),n+=o.sizeInBytes)}e.bufferEntries=r,e._bufferEntryNames.clear();for(let i=0;i<e.bufferEntries.length;i++)e._bufferEntryNames.set(e.bufferEntries[i].name,i);e.sizeInBytes=n,e.sizeInBytes=a*Math.ceil(e.sizeInBytes/a),e.sortDirty=!1},t.sendIfNeeded=n=>{if(!e.UBO){const r={nativeArray:e.Float32Array,usage:c0e.UniformArray,label:e.label};e.UBO=n.getBufferManager().getBuffer(r),e.bindGroupTime.modified(),e.sendDirty=!1}e.sendDirty&&(n.getHandle().queue.writeBuffer(e.UBO.getHandle(),0,e.arrayBuffer,0,e.sizeInBytes),e.sendDirty=!1),e.sendTime.modified()},t.createView=n=>{n in e||(e.arrayBuffer||(e.arrayBuffer=new ArrayBuffer(e.sizeInBytes)),e[n]=J.newTypedArray(n,e.arrayBuffer))},t.setValue=(n,r)=>{t.sortBufferEntries();const a=e._bufferEntryNames.get(n);if(a===void 0){fE(`entry named ${n} not found in UBO`);return}const i=e.bufferEntries[a];t.createView(i.nativeType);const o=e[i.nativeType];i.lastValue!==r&&(o[i.offset/o.BYTES_PER_ELEMENT]=r,e.sendDirty=!0),i.lastValue=r},t.setArray=(n,r)=>{t.sortBufferEntries();const a=e._bufferEntryNames.get(n);if(a===void 0){fE(`entry named ${n} not found in UBO`);return}const i=e.bufferEntries[a];t.createView(i.nativeType);const o=e[i.nativeType];let s=!1;for(let c=0;c<r.length;c++)(!i.lastValue||i.lastValue[c]!==r[c])&&(o[i.offset/o.BYTES_PER_ELEMENT+c]=r[c],s=!0);s&&(e.sendDirty=!0,i.lastValue=[...r])},t.getBindGroupEntry=()=>({resource:{buffer:e.UBO.getHandle()}}),t.getSendTime=()=>e.sendTime.getMTime(),t.getShaderCode=(n,r)=>{t.sortBufferEntries();const a=[`struct ${e.label}Struct
{`];for(let i=0;i<e.bufferEntries.length;i++){const o=e.bufferEntries[i];a.push(`  ${o.name}: ${o.type},`)}return a.push(`};
@binding(${n}) @group(${r}) var<uniform> ${e.label}: ${e.label}Struct;`),a.join(`
`)}}const u0e={bufferEntries:null,bufferEntryNames:null,sizeInBytes:0,label:null,bindGroupLayoutEntry:null,bindGroupEntry:null};function RU(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,u0e,n),J.obj(t,e),e._bufferEntryNames=new Map,e.bufferEntries=[],e.bindGroupLayoutEntry=e.bindGroupLayoutEntry||{buffer:{type:"uniform"}},e.sendTime={},J.obj(e.sendTime,{mtime:0}),e.bindGroupTime={},J.obj(e.bindGroupTime,{mtime:0}),e.sendDirty=!0,e.sortDirty=!0,J.get(t,e,["binding","bindGroupTime"]),J.setGet(t,e,["bindGroupLayoutEntry","device","label","sizeInBytes"]),l0e(t,e)}const f0e=J.newInstance(RU,"vtkWebGPUUniformBuffer");var $f={newInstance:f0e,extend:RU};const{vtkDebugMacro:v0e}=Bi,Cw=`
//VTK::Renderer::Dec

//VTK::Mapper::Dec

//VTK::TCoord::Dec

//VTK::RenderEncoder::Dec

//VTK::IOStructs::Dec

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output: fragmentOutput;

  var computedColor: vec4<f32> = mapperUBO.BackgroundColor;

  //VTK::RenderEncoder::Impl
  return output;
}
`,g0e=`
fn vecToRectCoord(dir: vec3<f32>) -> vec2<f32> {
  var tau: f32 = 6.28318530718;
  var pi: f32 = 3.14159265359;
  var out: vec2<f32> = vec2<f32>(0.0);

  out.x = atan2(dir.z, dir.x) / tau;
  out.x += 0.5;

  var phix: f32 = length(vec2(dir.x, dir.z));
  out.y = atan2(dir.y, phix) / pi + 0.5;

  return out;
}

//VTK::Renderer::Dec

//VTK::Mapper::Dec

//VTK::TCoord::Dec

//VTK::RenderEncoder::Dec

//VTK::IOStructs::Dec

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output: fragmentOutput;

  var tcoord: vec4<f32> = vec4<f32>(input.vertexVC.xy, -1, 1);
  var V: vec4<f32> = normalize(mapperUBO.FSQMatrix * tcoord); // vec2<f32>((input.tcoordVS.x - 0.5) * 2, -(input.tcoordVS.y - 0.5) * 2);
  // textureSampleLevel gets rid of some ugly artifacts
  var background = textureSampleLevel(EnvironmentTexture, EnvironmentTextureSampler, vecToRectCoord(V.xyz), 0.0);
  var computedColor: vec4<f32> = vec4<f32>(background.rgb, 1);

  //VTK::RenderEncoder::Impl
  return output;
}
`,Ep=new Float64Array(16),Iw=new Float64Array(16);function d0e(t){return t.getPositional()?t.getConeAngle()>=90?0:2:1}function m0e(t,e){e.classHierarchy.push("vtkWebGPURenderer"),t.buildPass=n=>{if(n){if(!e.renderable)return;e.camera=e.renderable.getActiveCamera(),t.updateLights(),t.prepareNodes(),t.addMissingNode(e.camera),t.addMissingNodes(e.renderable.getViewPropsWithNestedProps()),t.removeUnusedNodes(),e.webgpuCamera=t.getViewNodeFor(e.camera),t.updateStabilizedMatrix()}},t.updateStabilizedMatrix=()=>{const n=e.camera.getClippingRange(),r=e.camera.getPositionByReference(),a=e.camera.getDirectionOfProjectionByReference(),i=[],o=[];Ia(o,a,.5*(n[0]+n[1])),Ra(i,r,o),Dr(o,i,e.stabilizedCenter),ov(o)/(n[1]-n[0])>e.recenterThreshold&&(e.stabilizedCenter=i,e.stabilizedTime.modified())},t.updateLights=()=>{let n=0;const r=e.renderable.getLightsByReference();for(let a=0;a<r.length;++a)r[a].getSwitch()>0&&n++;return n||(v0e("No lights are on, creating one."),e.renderable.createLight()),n},t.updateUBO=()=>{var r;const n=e.UBO.getSendTime();if(e._parent.getMTime()>n||t.getMTime()>n||e.camera.getMTime()>n||e.renderable.getMTime()>n){const a=e.webgpuCamera.getKeyMatrices(t);e.UBO.setArray("WCVCMatrix",a.wcvc),e.UBO.setArray("SCPCMatrix",a.scpc),e.UBO.setArray("PCSCMatrix",a.pcsc),e.UBO.setArray("SCVCMatrix",a.scvc),e.UBO.setArray("VCPCMatrix",a.vcpc),e.UBO.setArray("WCVCNormals",a.normalMatrix),e.UBO.setValue("LightCount",e.renderable.getLights().length),e.UBO.setValue("MaxEnvironmentMipLevel",(r=e.renderable.getEnvironmentTexture())==null?void 0:r.getMipLevel()),e.UBO.setValue("BackgroundDiffuseStrength",e.renderable.getEnvironmentTextureDiffuseStrength()),e.UBO.setValue("BackgroundSpecularStrength",e.renderable.getEnvironmentTextureSpecularStrength());const i=t.getYInvertedTiledSizeAndOrigin();e.UBO.setArray("viewportSize",[i.usize,i.vsize]),e.UBO.setValue("cameraParallel",e.camera.getParallelProjection());const o=e._parent.getDevice();e.UBO.sendIfNeeded(o)}},t.updateSSBO=()=>{const n=e.renderable.getLights(),r=e.webgpuCamera.getKeyMatrices(t);let a=`${e.renderable.getMTime()}`;for(let i=0;i<n.length;i++)a+=n[i].getMTime();if(a!==e.lightTimeString){const i=new Float32Array(n.length*4),o=new Float32Array(n.length*4),s=new Float32Array(n.length*4),c=new Float32Array(n.length*4);for(let u=0;u<n.length;u++){const f=u*4,v=n[u].getPosition();un(v,v,r.wcvc),i[f]=v[0],i[f+1]=v[1],i[f+2]=v[2],i[f+3]=0,o[f]=-n[u].getDirection()[0],o[f+1]=-n[u].getDirection()[1],o[f+2]=-n[u].getDirection()[2],o[f+3]=0,s[f]=n[u].getColor()[0],s[f+1]=n[u].getColor()[1],s[f+2]=n[u].getColor()[2],s[f+3]=n[u].getIntensity()*5,c[f]=d0e(n[u]),c[f+1]=Math.cos(Oa(n[u].getConeAngle())),c[f+2]=Math.cos(Oa(n[u].getConeAngle()+n[u].getConeFalloff())),c[f+3]=0}e.SSBO.clearData(),e.SSBO.setNumberOfInstances(n.length),e.SSBO.addEntry("LightPos","vec4<f32>"),e.SSBO.addEntry("LightDir","vec4<f32>"),e.SSBO.addEntry("LightColor","vec4<f32>"),e.SSBO.addEntry("LightData","vec4<f32>"),e.SSBO.setAllInstancesFromArray("LightPos",i),e.SSBO.setAllInstancesFromArray("LightDir",o),e.SSBO.setAllInstancesFromArray("LightColor",s),e.SSBO.setAllInstancesFromArray("LightData",c);const l=e._parent.getDevice();e.SSBO.send(l)}e.lightTimeString=a},t.scissorAndViewport=n=>{const r=t.getYInvertedTiledSizeAndOrigin();n.getHandle().setViewport(r.lowerLeftU,r.lowerLeftV,r.usize,r.vsize,0,1),n.getHandle().setScissorRect(r.lowerLeftU,r.lowerLeftV,r.usize,r.vsize)},t.bindUBO=n=>{n.activateBindGroup(e.bindGroup)},t.opaquePass=n=>{n?(e.renderEncoder.begin(e._parent.getCommandEncoder()),t.updateUBO(),t.updateSSBO()):(t.scissorAndViewport(e.renderEncoder),t.clear(),e.renderEncoder.end())},t.clear=()=>{var i;if(e.renderable.getTransparent()||e.suppressClear)return;const n=e._parent.getDevice();if(!e.clearFSQ){e.clearFSQ=BT.newInstance(),e.clearFSQ.setDevice(n),e.clearFSQ.setPipelineHash("clearfsq"),e.clearFSQ.setFragmentShaderTemplate(Cw);const o=$f.newInstance({label:"mapperUBO"});o.addEntry("FSQMatrix","mat4x4<f32>"),o.addEntry("BackgroundColor","vec4<f32>"),e.clearFSQ.setUBO(o),e.backgroundTex=e.renderable.getEnvironmentTexture()}if(e.clearFSQ.getPipelineHash()!=="clearfsqwithtexture"&&e.renderable.getUseEnvironmentTextureAsBackground()&&((i=e.backgroundTex)!=null&&i.getImageLoaded())){e.clearFSQ.setFragmentShaderTemplate(g0e);const o=$f.newInstance({label:"mapperUBO"});o.addEntry("FSQMatrix","mat4x4<f32>"),o.addEntry("BackgroundColor","vec4<f32>"),e.clearFSQ.setUBO(o);const s=n.getTextureManager().getTextureForVTKTexture(e.backgroundTex);if(s.getReady()){const c=s.createView("EnvironmentTexture");e.clearFSQ.setTextureViews([c]),e.backgroundTexLoaded=!0;const l=e.backgroundTex.getInterpolate()?"linear":"nearest";c.addSampler(n,{addressModeU:"repeat",addressModeV:"clamp-to-edge",addressModeW:"repeat",minFilter:l,magFilter:l,mipmapFilter:"linear"})}e.clearFSQ.setPipelineHash("clearfsqwithtexture")}else if(e.clearFSQ.getPipelineHash()==="clearfsqwithtexture"&&!e.renderable.getUseEnvironmentTextureAsBackground()){e.clearFSQ=BT.newInstance(),e.clearFSQ.setDevice(n),e.clearFSQ.setPipelineHash("clearfsq"),e.clearFSQ.setFragmentShaderTemplate(Cw);const o=$f.newInstance({label:"mapperUBO"});o.addEntry("FSQMatrix","mat4x4<f32>"),o.addEntry("BackgroundColor","vec4<f32>"),e.clearFSQ.setUBO(o)}const r=e.webgpuCamera.getKeyMatrices(t),a=e.renderable.getBackgroundByReference();e.clearFSQ.getUBO().setArray("BackgroundColor",a),$n(Iw,r.normalMatrix),yS(Ep,r.scvc,r.pcsc),yS(Ep,Iw,Ep),e.clearFSQ.getUBO().setArray("FSQMatrix",Ep),e.clearFSQ.getUBO().sendIfNeeded(n),e.clearFSQ.prepareAndDraw(e.renderEncoder)},t.translucentPass=n=>{n?e.renderEncoder.begin(e._parent.getCommandEncoder()):(t.scissorAndViewport(e.renderEncoder),e.renderEncoder.end())},t.volumeDepthRangePass=n=>{n?e.renderEncoder.begin(e._parent.getCommandEncoder()):(t.scissorAndViewport(e.renderEncoder),e.renderEncoder.end())},t.getAspectRatio=()=>{const n=e._parent.getSizeByReference(),r=e.renderable.getViewportByReference();return n[0]*(r[2]-r[0])/((r[3]-r[1])*n[1])},t.convertToOpenGLDepth=n=>e.webgpuCamera.convertToOpenGLDepth(n),t.getYInvertedTiledSizeAndOrigin=()=>{const n=t.getTiledSizeAndOrigin(),r=e._parent.getSizeByReference();return n.lowerLeftV=r[1]-n.vsize-n.lowerLeftV,n},t.getTiledSizeAndOrigin=()=>{const n=e.renderable.getViewportByReference(),r=[0,0,1,1],a=n[0]-r[0],i=n[1]-r[1],o=e._parent.normalizedDisplayToDisplay(a,i),s=Math.round(o[0]),c=Math.round(o[1]),l=n[2]-r[0],u=n[3]-r[1],f=e._parent.normalizedDisplayToDisplay(l,u);let v=Math.round(f[0])-s,g=Math.round(f[1])-c;return v<0&&(v=0),g<0&&(g=0),{usize:v,vsize:g,lowerLeftU:s,lowerLeftV:c}},t.getPropFromID=n=>{for(let r=0;r<e.children.length;r++)if((e.children[r].getPropID?e.children[r].getPropID():-1)===n)return e.children[r];return null},t.getStabilizedTime=()=>e.stabilizedTime.getMTime(),t.releaseGraphicsResources=()=>{e.selector!==null&&e.selector.releaseGraphicsResources()}}const h0e={bindGroup:null,selector:null,renderEncoder:null,recenterThreshold:20,suppressClear:!1,stabilizedCenter:[0,0,0]};function p0e(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,h0e,n),Fr.extend(t,e,n),e.UBO=$f.newInstance({label:"rendererUBO"}),e.UBO.addEntry("WCVCMatrix","mat4x4<f32>"),e.UBO.addEntry("SCPCMatrix","mat4x4<f32>"),e.UBO.addEntry("PCSCMatrix","mat4x4<f32>"),e.UBO.addEntry("SCVCMatrix","mat4x4<f32>"),e.UBO.addEntry("VCPCMatrix","mat4x4<f32>"),e.UBO.addEntry("WCVCNormals","mat4x4<f32>"),e.UBO.addEntry("viewportSize","vec2<f32>"),e.UBO.addEntry("LightCount","i32"),e.UBO.addEntry("MaxEnvironmentMipLevel","f32"),e.UBO.addEntry("BackgroundDiffuseStrength","f32"),e.UBO.addEntry("BackgroundSpecularStrength","f32"),e.UBO.addEntry("cameraParallel","u32"),e.SSBO=s0e.newInstance({label:"rendererLightSSBO"}),e.lightTimeString="",e.bindGroup=CU.newInstance({label:"rendererBG"}),e.bindGroup.setBindables([e.UBO,e.SSBO]),e.tmpMat4=zt(new Float64Array(16)),e.stabilizedTime={},Yr(e.stabilizedTime,{mtime:0}),_o(t,e,["bindGroup","stabilizedTime"]),xv(t,e,["stabilizedCenter"]),Wa(t,e,["renderEncoder","selector","suppressClear","UBO"]),m0e(t,e)}const S0e=dr(p0e,"vtkWebGPURenderer");Vs("vtkRenderer",S0e);function C0e(t,e){e.classHierarchy.push("vtkWebGPUSampler"),t.create=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.device=n,e.options.addressModeU=r.addressModeU?r.addressModeU:"clamp-to-edge",e.options.addressModeV=r.addressModeV?r.addressModeV:"clamp-to-edge",e.options.addressModeW=r.addressModeW?r.addressModeW:"clamp-to-edge",e.options.magFilter=r.magFilter?r.magFilter:"nearest",e.options.minFilter=r.minFilter?r.minFilter:"nearest",e.options.mipmapFilter=r.mipmapFilter?r.mipmapFilter:"nearest",e.options.label=e.label,e.handle=e.device.getHandle().createSampler(e.options),e.bindGroupTime.modified()},t.getShaderCode=(n,r)=>`@binding(${n}) @group(${r}) var ${e.label}: sampler;`,t.getBindGroupEntry=()=>({resource:e.handle})}const I0e={device:null,handle:null,label:null,options:null};function bU(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,I0e,n),J.obj(t,e),e.options={},e.bindGroupLayoutEntry={visibility:GPUShaderStage.VERTEX|GPUShaderStage.FRAGMENT,sampler:{}},e.bindGroupTime={},J.obj(e.bindGroupTime,{mtime:0}),J.get(t,e,["bindGroupTime","handle","options"]),J.setGet(t,e,["bindGroupLayoutEntry","device","label"]),C0e(t,e)}const D0e=J.newInstance(bU);var NU={newInstance:D0e,extend:bU};const{SlicingMode:Dw}=dI,E0e=`
//VTK::Renderer::Dec

//VTK::Mapper::Dec

//VTK::TCoord::Dec

//VTK::Image::Dec

//VTK::RenderEncoder::Dec

//VTK::IOStructs::Dec

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output: fragmentOutput;

  //VTK::Image::Sample

  // var computedColor: vec4<f32> = vec4<f32>(1.0,0.7, 0.5, 1.0);

//VTK::RenderEncoder::Impl

  return output;
}
`;function T0e(t,e,n){if(e.apply(t)){const a=t.getIndependentComponents();return`${t.getMTime()}-${a}-${n}`}return"0"}const Qo=new Float64Array(16),I0=new Float64Array(16),Tp=new Float64Array(16),gc=new Float64Array(4),ii=new Float64Array(4);function y0e(t,e){e.classHierarchy.push("vtkWebGPUImageMapper"),t.buildPass=a=>{if(a){e.WebGPUImageSlice=t.getFirstAncestorOfType("vtkWebGPUImageSlice"),e.WebGPURenderer=e.WebGPUImageSlice.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getParent(),e.device=e.WebGPURenderWindow.getDevice();const i=e.WebGPURenderer.getRenderable();e.renderable.getSliceAtFocalPoint()&&e.renderable.setSliceFromCamera(i.getActiveCamera())}},t.translucentPass=a=>{a&&t.render()},t.opaquePass=a=>{a&&t.render()},t.render=()=>{e.renderable.update(),e.currentInput=e.renderable.getInputData(),t.prepareToDraw(e.WebGPURenderer.getRenderEncoder()),e.renderEncoder.registerDrawCallback(e.pipeline,t.draw)},t.computePipelineHash=()=>{const a=e.currentInput.getExtent();a[0]===a[1]||a[2]===a[3]||a[4]===a[5]?(e.dimensions=2,e.pipelineHash="img2"):(e.dimensions=3,e.pipelineHash="img3")},t.updateUBO=()=>{const a=e.UBO.getSendTime(),i=e.WebGPUImageSlice.getRenderable(),o=i.getMapper();if(t.getMTime()>a||e.renderable.getMTime()>a||i.getProperty().getMTime()>a){const s=o.getInputData(),c=e.WebGPURenderer.getStabilizedCenterByReference();zt(Qo),kr(Qo,Qo,c);const l=i.getMatrix();$n(I0,l),ba(I0,I0),Xn(Qo,I0,Qo);const u=s.getWorldToIndex();Xn(Qo,u,Qo),ba(Tp,Qo),aI(I0,[.5,.5,.5]),Xn(Qo,I0,Qo);const f=s.getDimensions();zt(I0),$c(I0,I0,[1/f[0],1/f[1],1/f[2]]),Xn(Qo,I0,Qo),e.UBO.setArray("SCTCMatrix",Qo);const v=e.currentInput.getExtent(),{ijkMode:g}=e.renderable.getClosestIJKAxis();let d=e.renderable.getSlice();g!==e.renderable.getSlicingMode()&&(d=e.renderable.getSliceAtPosition(d));let m=2,h=0,C=1;g===Dw.I?(m=0,h=1,C=2):g===Dw.J&&(m=1,h=2,C=0),gc[m]=d,gc[h]=v[h*2]-.5,gc[C]=v[C*2]-.5,gc[3]=1,Nl(gc,gc,Tp),e.UBO.setArray("Origin",gc),ii[m]=d,ii[h]=v[h*2+1]+.5,ii[C]=v[C*2]-.5,ii[3]=1,Nl(ii,ii,Tp),M8(ii,ii,gc),ii[3]=1,e.UBO.setArray("Axis1",ii),ii[m]=d,ii[h]=v[h*2]-.5,ii[C]=v[C*2+1]+.5,ii[3]=1,Nl(ii,ii,Tp),M8(ii,ii,gc),ii[3]=1,e.UBO.setArray("Axis2",ii);const p=[1,1,1,1],S=[0,0,0,0],I=e.textureViews[0],D=I.getTexture().getScale(),E=I.getTexture().getNumberOfComponents();for(let T=0;T<E;T++){let y=i.getProperty().getColorWindow(),M=i.getProperty().getColorLevel();const O=i.getProperty().getRGBTransferFunction(0);if(O){const w=O.getRange();y=w[1]-w[0],M=.5*(w[1]+w[0])}p[T]=D/y,S[T]=-M/y+.5}e.UBO.setArray("cScale",p),e.UBO.setArray("cShift",S),e.UBO.sendIfNeeded(e.device)}},t.updateLUTImage=()=>{const a=e.WebGPUImageSlice.getRenderable().getProperty();t.getTextureViews()[0].getTexture().getNumberOfComponents();const o=1,s=T0e(a,a.getRGBTransferFunction,o);if(e.colorTextureString!==s){e.numRows=o;const c=new Uint8ClampedArray(e.numRows*2*e.rowLength*4);let l=a.getRGBTransferFunction();if(l){const u=new Float32Array(e.rowLength*3);for(let f=0;f<o;f++){l=a.getRGBTransferFunction(f);const v=l.getRange();l.getTable(v[0],v[1],e.rowLength,u,1);for(let g=0;g<e.rowLength;g++){const d=f*e.rowLength*8+g*4;c[d]=255*u[g*3],c[d+1]=255*u[g*3+1],c[d+2]=255*u[g*3+2],c[d+3]=255;for(let m=0;m<4;m++)c[d+e.rowLength*4+m]=c[d+m]}}}else for(let u=0;u<e.rowLength;++u){const f=255*u/(e.rowLength-1);c[u*4]=f,c[u*4+1]=f,c[u*4+2]=f,c[u*4+3]=255;for(let v=0;v<4;v++)c[u*4+e.rowLength*4+v]=c[u*4+v]}{const u={nativeArray:c,width:e.rowLength,height:e.numRows*2,depth:1,format:"rgba8unorm"},v=e.device.getTextureManager().getTexture(u).createView("tfunTexture");e.textureViews[1]=v}e.colorTextureString=s}};const n=t.updateBuffers;t.updateBuffers=()=>{n();const a=e.device.getTextureManager().getTextureForImageData(e.currentInput),i=e.textureViews;if(!i[0]||i[0].getTexture()!==a){const c=a.createView("imgTexture");i[0]=c}t.updateLUTImage(),t.updateUBO();const s=e.WebGPUImageSlice.getRenderable().getProperty().getInterpolationType()===u1.NEAREST?"nearest":"linear";(!e.clampSampler||s!==e.clampSampler.getOptions().minFilter)&&(e.clampSampler=NU.newInstance({label:"clampSampler"}),e.clampSampler.create(e.device,{minFilter:s,magFilter:s}),e.additionalBindables=[e.clampSampler])};const r=t.getShaderReplacements();t.replaceShaderPosition=(a,i,o)=>{const s=i.getShaderDescription("vertex");s.addBuiltinOutput("vec4<f32>","@builtin(position) Position");let c=s.getCode();const l=["var pos: vec4<f32> = mapperUBO.Origin +","   (vertexBC.x * 0.5 + 0.5) * mapperUBO.Axis1 + (vertexBC.y * 0.5 + 0.5) * mapperUBO.Axis2;","pos.w = 1.0;"];e.dimensions===2?l.push("var tcoord : vec2<f32> = (mapperUBO.SCTCMatrix * pos).xy;"):l.push("var tcoord : vec3<f32> = (mapperUBO.SCTCMatrix * pos).xyz;"),l.push("output.tcoordVS = tcoord;","output.Position = rendererUBO.SCPCMatrix * pos;"),c=Nr.substitute(c,"//VTK::Position::Impl",l).result,s.setCode(c)},r.set("replaceShaderPosition",t.replaceShaderPosition),t.replaceShaderTCoord=(a,i,o)=>{const s=i.getShaderDescription("vertex");e.dimensions===2?s.addOutput("vec2<f32>","tcoordVS"):s.addOutput("vec3<f32>","tcoordVS")},r.set("replaceShaderTCoord",t.replaceShaderTCoord),t.replaceShaderImage=(a,i,o)=>{const s=i.getShaderDescription("fragment");let c=s.getCode();e.dimensions===3?c=Nr.substitute(c,"//VTK::Image::Sample",["    var computedColor: vec4<f32> =","      textureSampleLevel(imgTexture, clampSampler, input.tcoordVS, 0.0);","//VTK::Image::Sample"]).result:c=Nr.substitute(c,"//VTK::Image::Sample",["    var computedColor: vec4<f32> =","      textureSampleLevel(imgTexture, clampSampler, input.tcoordVS, 0.0);","//VTK::Image::Sample"]).result,c=Nr.substitute(c,"//VTK::Image::Sample",["    var coord: vec2<f32> =","      vec2<f32>(computedColor.r * mapperUBO.cScale.r + mapperUBO.cShift.r, 0.5);","    computedColor = textureSampleLevel(tfunTexture, clampSampler, coord, 0.0);"]).result,s.setCode(c)},r.set("replaceShaderImage",t.replaceShaderImage)}const M0e={rowLength:1024};function _0e(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,M0e,n),BT.extend(t,e,n),t.setFragmentShaderTemplate(E0e),e.UBO=$f.newInstance({label:"mapperUBO"}),e.UBO.addEntry("SCTCMatrix","mat4x4<f32>"),e.UBO.addEntry("Origin","vec4<f32>"),e.UBO.addEntry("Axis2","vec4<f32>"),e.UBO.addEntry("Axis1","vec4<f32>"),e.UBO.addEntry("cScale","vec4<f32>"),e.UBO.addEntry("cShift","vec4<f32>"),e.lutBuildTime={},Yr(e.lutBuildTime,{mtime:0}),e.imagemat=zt(new Float64Array(16)),e.imagematinv=zt(new Float64Array(16)),e.VBOBuildTime={},Yr(e.VBOBuildTime),y0e(t,e)}const O0e=dr(_0e,"vtkWebGPUImageMapper");Vs("vtkImageMapper",O0e);function w0e(t,e){e.classHierarchy.push("vtkWebGPUImageSlice"),t.buildPass=n=>{if(!(!e.renderable||!e.renderable.getVisibility())&&n){if(!e.renderable)return;e.WebGPURenderer=t.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getFirstAncestorOfType("vtkWebGPURenderWindow"),e.propID===void 0&&(e.propID=e.WebGPURenderWindow.getUniquePropID()),t.prepareNodes(),t.addMissingNode(e.renderable.getMapper()),t.removeUnusedNodes()}},t.traverseOpaquePass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||!e.renderable.getIsOpaque()||e.WebGPURenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.children.forEach(r=>{r.traverse(n)}),t.apply(n,!1))},t.traverseTranslucentPass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||e.renderable.getIsOpaque()||e.WebGPURenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.children.forEach(r=>{r.traverse(n)}),t.apply(n,!1))},t.queryPass=(n,r)=>{if(n){if(!e.renderable||!e.renderable.getVisibility())return;e.renderable.getIsOpaque()?r.incrementOpaqueActorCount():r.incrementTranslucentActorCount()}},t.getBufferShift=n=>(t.getKeyMatrices(n),e.bufferShift),t.getKeyMatrices=n=>{if(Math.max(e.renderable.getMTime(),n.getStabilizedTime())>e.keyMatricesTime.getMTime()){e.renderable.computeMatrix();const r=e.renderable.getMatrix(),a=n.getStabilizedCenterByReference();e.bufferShift[0]=r[3]-a[0],e.bufferShift[1]=r[7]-a[1],e.bufferShift[2]=r[11]-a[2],$n(e.keyMatrices.bcwc,r),e.renderable.getIsIdentity()?zt(e.keyMatrices.normalMatrix):(fa(e.keyMatrices.normalMatrix,e.keyMatrices.bcwc),e.keyMatrices.normalMatrix[3]=0,e.keyMatrices.normalMatrix[7]=0,e.keyMatrices.normalMatrix[11]=0,ba(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix),$n(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix)),kr(e.keyMatrices.bcwc,e.keyMatrices.bcwc,[-e.bufferShift[0],-e.bufferShift[1],-e.bufferShift[2]]),kr(e.keyMatrices.bcsc,e.keyMatrices.bcwc,[-a[0],-a[1],-a[2]]),e.keyMatricesTime.modified()}return e.keyMatrices}}const P0e={bufferShift:void 0,keyMatrixTime:null,keyMatrices:null,propID:void 0};function A0e(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,P0e,n),Fr.extend(t,e,n),e.keyMatricesTime={},Yr(e.keyMatricesTime,{mtime:0}),e.keyMatrices={normalMatrix:new Float64Array(16),bcwc:new Float64Array(16),bcsc:new Float64Array(16)},e.keyMatrixTime={},Yr(e.keyMatrixTime,{mtime:0}),e.keyMatrices={mcwc:zt(new Float64Array(16))},e.bufferShift=[0,0,0,0],_o(t,e,["propID","keyMatricesTime"]),w0e(t,e)}const x0e=dr(A0e,"vtkWebGPUImageSlice");Vs("vtkImageSlice",x0e);function R0e(t,e){e.classHierarchy.push("vtkWebGPUVolume"),t.buildPass=a=>{!e.renderable||!e.renderable.getVisibility()||a&&(e.WebGPURenderer=t.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getFirstAncestorOfType("vtkWebGPURenderWindow"),e.propID===void 0&&(e.propID=e.WebGPURenderWindow.getUniquePropID()),e.renderable.getMapper().update())},t.queryPass=(a,i)=>{if(a){if(!e.renderable||!e.renderable.getVisibility())return;const o=e.renderable.getMapper().getBounds();if(!o||o.length!==6||o[0]>o[1])return;i.addVolume(t)}};const n=new Float64Array(3),r=new Float64Array(3);t.getBoundingCubePoints=(a,i)=>{const o=e.renderable.getMapper().getInputData();if(!o)return;const s=o.getExtent(),c=e.renderable.getMatrix();let l=0;for(let u=4;u<6;u++){n[2]=s[u];for(let f=2;f<4;f++){n[1]=s[f];for(let v=0;v<2;v++){n[0]=s[v],o.indexToWorld(n,r);let g=i+l*3;a[g++]=c[0]*r[0]+c[1]*r[1]+c[2]*r[2]+c[3],a[g++]=c[4]*r[0]+c[5]*r[1]+c[6]*r[2]+c[7],a[g++]=c[8]*r[0]+c[9]*r[1]+c[10]*r[2]+c[11],l++}}}},t.getKeyMatrices=a=>{if(Math.max(e.renderable.getMTime(),a.getStabilizedTime())>e.keyMatricesTime.getMTime()){e.renderable.computeMatrix();const i=e.renderable.getMatrix(),o=a.getStabilizedCenterByReference();$n(e.keyMatrices.bcwc,i),kr(e.keyMatrices.bcsc,e.keyMatrices.bcwc,[-o[0],-o[1],-o[2]]),e.keyMatricesTime.modified()}return e.keyMatrices}}const b0e={propID:void 0,keyMatricesTime:null};function N0e(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,b0e,n),Fr.extend(t,e,n),e.keyMatricesTime={},J.obj(e.keyMatricesTime,{mtime:0}),e.keyMatrices={bcwc:new Float64Array(16),bcsc:new Float64Array(16)},J.get(t,e,["propID","keyMatricesTime"]),R0e(t,e)}const L0e=J.newInstance(N0e,"vtkWebGPUVolume");Vs("vtkVolume",L0e);function U0e(t,e){e.classHierarchy.push("vtkWebGPUPixelSpaceCallbackMapper"),t.opaquePass=(n,r)=>{e.WebGPURenderer=t.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getParent();const a=e.WebGPURenderer.getAspectRatio(),i=e.WebGPURenderer?e.WebGPURenderer.getRenderable().getActiveCamera():null,o=e.WebGPURenderer.getTiledSizeAndOrigin(),s=null;e.renderable.getUseZValues(),e.renderable.invokeCallback(e.renderable.getInputData(),i,a,o,s)}}const F0e={};function V0e(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,F0e,n),Fr.extend(t,e,n),U0e(t,e)}const k0e=J.newInstance(V0e,"vtkWebGPUPixelSpaceCallbackMapper");Vs("vtkPixelSpaceCallbackMapper",k0e);const Ew=[[0,-1,0],[0,1,0],[0,0,-1],[0,0,1]],Tw=[[0,-1,0],[0,1,0]],G0e=[[0,-1,0],[0,1,0],[0,0,-1]],B0e=[[0,-1,0],[0,1,0],[0,0,1]];var nv;let Ef=(nv=class{static copyMap(e,n){for(const[r,a]of n.rows)e.rows.set(r,structuredClone(a))}constructor(e,n,r=1){this.rows=new Map,this.height=1,this.width=1,this.depth=1,this.jMultiple=1,this.kMultiple=1,this.numComps=1,this.pixelDataConstructor=Uint8Array,this.updateScalarData=function(a){a.fill(0);const i=(o,s,c)=>{const{start:l,end:u,value:f}=s;for(let v=l;v<u;v++)a[o+v]=f};this.forEach(i)},this.get=a=>{const i=a%this.jMultiple,o=(a-i)/this.jMultiple,s=this.getRLE(i,o);return(s==null?void 0:s.value)??this.defaultValue},this.getRun=(a,i)=>{const o=a+i*this.height;return this.rows.get(o)},this.set=(a,i)=>{if(i===void 0)return;const o=a%this.width,s=(a-o)/this.width,c=this.rows.get(s);if(!c){this.rows.set(s,[{start:o,end:o+1,value:i}]);return}const l=this.findIndex(c,o),u=c[l],f=c[l-1];if(!u){if(!f||f.value!==i||f.end!==o){c[l]={start:o,end:o+1,value:i};return}f.end++;return}const{start:v,end:g,value:d}=u;if(i===d&&o>=v)return;const m={start:o,end:o+1,value:i},h=o>v,C=h?l+1:l,p=h?u:f;let S=h?c[l+1]:u;if((p==null?void 0:p.value)===i&&(p==null?void 0:p.end)===o){p.end++,(S==null?void 0:S.value)===i&&S.start===o+1?(p.end=S.end,c.splice(l,1)):(S==null?void 0:S.start)===o&&(S.start++,S.start===S.end&&(c.splice(l,1),S=c[l],(S==null?void 0:S.start)===o+1&&S.value===i&&(p.end=S.end,c.splice(l,1))));return}if((S==null?void 0:S.value)===i&&S.start===o+1){S.start--,(p==null?void 0:p.end)>o&&(p.end=o,p.end===p.start&&c.splice(l,1));return}if((S==null?void 0:S.start)===o&&S.end===o+1){S.value=i;const I=c[l+1];(I==null?void 0:I.start)==o+1&&I.value===i&&(c.splice(l+1,1),S.end=I.end);return}o===(S==null?void 0:S.start)&&S.start++,h&&g>o+1?c.splice(C,0,m,{start:o+1,end:p.end,value:p.value}):c.splice(C,0,m),(p==null?void 0:p.end)>o&&(p.end=o)},this.width=e,this.height=n,this.depth=r,this.jMultiple=e,this.kMultiple=this.jMultiple*n}toIJK(e){const n=e%this.jMultiple,r=(e-n)/this.jMultiple%this.height,a=Math.floor(e/this.kMultiple);return[n,r,a]}toIndex([e,n,r]){return e+r*this.kMultiple+n*this.jMultiple}getRLE(e,n,r=0){const a=this.rows.get(n+r*this.height);if(!a)return;const i=this.findIndex(a,e),o=a[i];return e>=(o==null?void 0:o.start)?o:void 0}has(e){const n=e%this.jMultiple,r=(e-n)/this.jMultiple,a=this.getRLE(n,r);return(a==null?void 0:a.value)!==void 0}delete(e){const n=e%this.width,r=(e-n)/this.width,a=this.rows.get(r);if(!a)return;const i=this.findIndex(a,n),o=a[i];if(!o||o.start>n)return;if(o.end===n+1){o.end--,o.start>=o.end&&(a.splice(i,1),a.length||this.rows.delete(r));return}if(o.start===n){o.start++;return}const s={value:o.value,start:n+1,end:o.end};o.end=n,a.splice(i+1,0,s)}findIndex(e,n){for(let r=0;r<e.length;r++){const{end:a}=e[r];if(n<a)return r}return e.length}forEach(e,n){const r=n==null?void 0:n.rowModified;for(const[a,i]of this.rows){const o=r?[...i]:i;for(const s of o)e(a*this.width,s,i)}}forEachRow(e){for(const[n,r]of this.rows)e(n*this.width,r)}clear(){this.rows.clear()}keys(){return[...this.rows.keys()]}getPixelData(e=0,n){n?n.fill(0):n=new this.pixelDataConstructor(this.width*this.height*this.numComps);const{width:r,height:a,numComps:i}=this;for(let o=0;o<a;o++){const s=this.getRun(o,e);if(s)if(i===1)for(const c of s){const l=o*r,{start:u,end:f,value:v}=c;for(let g=u;g<f;g++)n[l+g]=v}else for(const c of s){const l=o*r*i,{start:u,end:f,value:v}=c;for(let g=u;g<f;g+=i)for(let d=0;d<i;d++)n[l+g+d]=v[d]}}return n}floodFill(e,n,r,a,i){const o=this.getRLE(e,n,r);if(!o)throw new Error(`Initial point ${e},${n},${r} isn't in the RLE`);const s=[[o,n,r]],c=o.value;if(c===a)throw new Error(`source (${c}) and destination (${a}) are identical`);return this.flood(s,c,a,i)}flood(e,n,r,a){let i=0;const{planar:o=!0,diagonals:s=!0,singlePlane:c=!1}=a||{},l={planar:o,diagonals:s,singlePlane:c};for(;e.length;){const u=e.pop(),[f]=u;if(f.value!==n)continue;f.value=r,i+=f.end-f.start;const v=this.findAdjacents(u,l).filter(g=>g&&g[0].value===n);e.push(...v)}return i}fillFrom(e,n){for(let r=n[2][0];r<=n[2][1];r++)for(let a=n[1][0];a<=n[1][1];a++){let i,o;for(let s=n[0][0];s<=n[0][1];s++){const c=e(s,a,r);if(c===void 0){i=void 0;continue}o||(o=[],this.rows.set(a+r*this.height,o)),i&&i.value!==c&&(i=void 0),i||(i={start:s,end:s,value:c},o.push(i)),i.end++}}}findAdjacents(e,{diagonals:n=!0,planar:r=!0,singlePlane:a=!1}){const[i,o,s,c]=e,{start:l,end:u}=i,f=l>0&&this.getRLE(l-1,o,s),v=u<this.width&&this.getRLE(u,o,s),g=n?[l>0?l-1:l,u<this.width?u+1:u]:[l,u],d=[];f&&d.push([f,o,s]),v&&d.push([v,o,s]);for(const m of c||(a?Tw:Ew)){const[,h,C]=m,p=h+o,S=C+s;if(p<0||p>=this.height||S<0||S>=this.depth)continue;const I=this.getRun(p,S);if(I)for(const D of I){const E=c||a&&Tw||r&&C>0&&B0e||r&&C<0&&G0e||Ew;D.end<=g[0]||D.start>=g[1]||d.push([D,p,S,E])}}return d}},nv.getScalarData=function(e=Uint8ClampedArray){const n=new e(this.frameSize);return this.map.updateScalarData(n),n},nv),H2=class qg{constructor(e={}){this._dimensions=3,this._length=0,this._byteSize=4,this.growSize=128;const{initialSize:n=1024,dimensions:r=3,growSize:a=128}=e,i=n*r;this.growSize=a,this.array=new ArrayBuffer(i*this._byteSize),this.data=new Float32Array(this.array),this._dimensions=r}forEach(e){for(let n=0;n<this._length;n++)e(this.getPoint(n),n)}get length(){return this._length}get dimensions(){return this._dimensions}get dimensionLength(){return this._length*this._dimensions}getPoint(e){if(e<0&&(e+=this._length),e<0||e>=this._length)return;const n=this._dimensions*e;return this.data.subarray(n,n+this._dimensions)}getPointArray(e){const n=[];if(e<0&&(e+=this._length),e<0||e>=this._length)return;const r=this._dimensions*e;for(let a=0;a<this._dimensions;a++)n.push(this.data[a+r]);return n}grow(e=1,n=this.growSize){if(this.dimensionLength+e*this._dimensions<=this.data.length)return;const r=this.data.length+n,a=new ArrayBuffer(r*this._dimensions*this._byteSize),i=new Float32Array(a);i.set(this.data),this.data=i,this.array=a}reverse(){const e=Math.floor(this._length/2);for(let n=0;n<e;n++){const r=n*this._dimensions,a=(this._length-1-n)*this._dimensions;for(let i=0;i<this._dimensions;i++){const o=this.data[r+i];this.data[r+i]=this.data[a+i],this.data[a+i]=o}}}getTypedArray(){return this.data}push(e){this.grow(1);const n=this.length*this._dimensions;for(let r=0;r<this._dimensions;r++)this.data[r+n]=e[r];this._length++}map(e){const n=[];for(let r=0;r<this._length;r++)n.push(e(this.getPoint(r),r));return n}get points(){return this.map(e=>e)}toXYZ(){const e={x:[],y:[]};this._dimensions>=3&&(e.z=[]);const{x:n,y:r,z:a}=e;return this.forEach(i=>{n.push(i[0]),r.push(i[1]),a&&a.push(i[2])}),e}static fromXYZ({x:e,y:n,z:r}){const a=qg.create3(e.length);let i=0;for(let o=0;o<e.length;o++)a.data[i++]=e[o],a.data[i++]=n[o],a.data[i++]=r?r[o]:0;return a._length=e.length,a}subselect(e=10,n=0){const r=new qg({initialSize:e,dimensions:this._dimensions});for(let a=0;a<e;a++){const i=(n+Math.floor(this.length*a/e))%this.length;r.push(this.getPoint(i))}return r}static create3(e=128,n){e=Math.max(e,(n==null?void 0:n.length)||0);const r=new qg({initialSize:e,dimensions:3});return n&&n.forEach(a=>r.push(a)),r}static create2(e=128){return new qg({initialSize:e,dimensions:2})}};function LU(t){const e=Xe(),n=t.getDimensions(),r=H2.create3(n[0]),a=H2.create3(n[1]),i=H2.create3(n[2]),o=t.getDirection(),s=o.slice(0,3),c=o.slice(3,6),l=o.slice(6,9),u=t.getSpacing(),[f,v,g]=u,d=t.indexToWorld([0,0,0]),m=qt(s[0]*f,s[1]*f,s[2]*f),h=qt(c[0]*v,c[1]*v,c[2]*v),C=qt(l[0]*g,l[1]*g,l[2]*g),p=Xe();for(let E=0;E<n[0];E++)r.push(Ra(p,d,Ia(p,m,E)));for(let E=0;E<n[1];E++)a.push(Ia(p,h,E));for(let E=0;E<n[2];E++)i.push(Ia(p,C,E));const S=r.getTypedArray(),I=a.getTypedArray(),D=i.getTypedArray();return(E,T=e)=>{const[y,M,_]=E,O=y*3,w=M*3,x=_*3;return T[0]=S[O]+I[w]+D[x],T[1]=S[O+1]+I[w+1]+D[x+1],T[2]=S[O+2]+I[w+2]+D[x+2],T}}function II(t,e){const{pointInShapeFn:n,callback:r,boundsIJK:a,returnPoints:i=!1}=e;let o;t.getScalarData?o=t.getScalarData():o=t.getPointData().getScalars().getData();const s=t.getDimensions(),c=[[0,s[0]],[0,s[1]],[0,s[2]]],u=W0e({imageData:t,bounds:a||c,scalarData:o,pointInShapeFn:n,callback:r});return i?u:void 0}function W0e({imageData:t,bounds:e,scalarData:n,pointInShapeFn:r,callback:a}){const[[i,o],[s,c],[l,u]]=e,{numComps:f}=t,v=t.getDimensions(),g=LU(t),d=[0,0,0],m=f||n.length/v[2]/v[1]/v[0],h=v[0]*m,C=v[1]*h,p=[];for(let S=l;S<=u;S++){d[2]=S;const I=S*C;for(let D=s;D<=c;D++){d[1]=D;const E=I+D*h;for(let T=i;T<=o;T++){d[0]=T;const y=g(d);if(r(y,d)){const M=E+T*m;let _;m>2?_=[n[M],n[M+1],n[M+2]]:_=n[M],p.push({value:_,index:M,pointIJK:d,pointLPS:y.slice()}),a({value:_,index:M,pointIJK:d,pointLPS:y})}}}}return p}function H0e({voxelManager:t,bounds:e,imageData:n,pointInShapeFn:r,callback:a}){const[[i,o],[s,c],[l,u]]=e,f=LU(n),v=[0,0,0],g=[];for(let d=l;d<=u;d++){v[2]=d;for(let m=s;m<=c;m++){v[1]=m;for(let h=i;h<=o;h++){v[0]=h;const C=f(v);if(r(C,v)){const p=t.toIndex(v),S=t.getAtIndex(p);g.push({value:S,index:p,pointIJK:[...v],pointLPS:C.slice()}),a==null||a({value:S,index:p,pointIJK:v,pointLPS:C})}}}}return g}const $0e=5*1024;let yo=class oi{constructor(e,n){this.modifiedSlices=new Set,this.boundsIJK=[[1/0,-1/0],[1/0,-1/0],[1/0,-1/0]],this.scalarData=null,this._sliceDataCache=null,this.getAtIJK=(r,a,i)=>{const o=this.toIndex([r,a,i]);return this._get(o)},this.setAtIJK=(r,a,i,o)=>{const s=this.toIndex([r,a,i]),c=this._set(s,o);return c!==!1&&(this.modifiedSlices.add(i),oi.addBounds(this.boundsIJK,[r,a,i])),c},this.getAtIJKPoint=([r,a,i])=>this.getAtIJK(r,a,i),this.setAtIJKPoint=([r,a,i],o)=>{this.setAtIJK(r,a,i,o)},this.getAtIndex=r=>this._get(r),this.setAtIndex=(r,a)=>{const i=this._set(r,a);if(i!==!1){const o=this.toIJK(r);this.modifiedSlices.add(o[2]),oi.addBounds(this.boundsIJK,o)}return i},this.getMiddleSliceData=()=>{const r=Math.floor(this.dimensions[2]/2);return this.getSliceData({sliceIndex:r,slicePlane:2})},this.forEach=(r,a={})=>{const i=a.boundsIJK||this.getBoundsIJK(),o=a.isInObject||this.isInObject||(()=>!0),s=a.returnPoints||!1,c=a.imageData,l=Math.min(i[0][0],i[0][1]),u=Math.max(i[0][0],i[0][1]),f=Math.min(i[1][0],i[1][1]),v=Math.max(i[1][0],i[1][1]),g=Math.min(i[2][0],i[2][1]),d=Math.max(i[2][0],i[2][1]),m=[];if(c)return H0e({voxelManager:this,imageData:a.imageData,bounds:[[l,u],[f,v],[g,d]],pointInShapeFn:o,callback:r});if(this.map){if(this.map instanceof Ef)return this.rleForEach(r,a);for(const h of this.map.keys()){const C=this.toIJK(h);if(!o(null,C))continue;const p=this._get(h);s&&m.push({value:p,index:h,pointIJK:C,pointLPS:null}),r({value:p,index:h,pointIJK:C,pointLPS:null})}return m}else{for(let h=g;h<=d;h++){const C=h*this.frameSize;for(let p=f;p<=v;p++){const S=C+p*this.width;for(let I=l,D=S+I;I<=u;I++,D++){const E=this.getAtIndex(D),T=[I,p,h];o(null,T)&&(s&&m.push({value:E,index:D,pointIJK:T,pointLPS:null}),r({value:E,index:D,pointIJK:[I,p,h],pointLPS:null}))}}}return m}},this.getSliceData=({sliceIndex:r,slicePlane:a})=>{const[i,o,s]=this.dimensions,c=i*o,l=r*c;let u;const f=this.getConstructor();function v(d){return typeof d=="function"}if(!v(f))return new Uint8Array(0);let g;switch(a){case 0:u=o*s,g=new f(u);for(let d=0;d<o;d++)for(let m=0;m<s;m++){const h=r+d*i+m*c;this.setSliceDataValue(g,d*s+m,this._get(h))}break;case 1:u=i*s,g=new f(u);for(let d=0;d<i;d++)for(let m=0;m<s;m++){const h=d+r*i+m*c;this.setSliceDataValue(g,d+m*i,this._get(h))}break;case 2:u=i*o,g=new f(u);for(let d=0;d<u;d++)this.setSliceDataValue(g,d,this._get(l+d));break;default:throw new Error("Oblique plane - todo - implement as ortho normal vector")}return g},this.dimensions=e,this.width=e[0],this.frameSize=this.width*e[1],this._get=n._get,this._set=n._set,this._id=n._id||"",this._getConstructor=n._getConstructor,this.numberOfComponents=this.numberOfComponents||1,this.scalarData=n.scalarData,this._getScalarData=n._getScalarData,this._updateScalarData=n._updateScalarData}getMinMax(){let e,n;const r=({value:a})=>{const i=Array.isArray(a);if(e===void 0&&(e=i?[...a]:a,n=i?[...a]:a),i)for(let o=0;o<a.length;o++)e[o]=Math.min(e[o],a[o]),n[o]=Math.max(n[o],a[o]);else e=Math.min(e,a),n=Math.max(n,a)};return this.forEach(r,{boundsIJK:this.getDefaultBounds()}),{min:e,max:n}}toIJK(e){return[e%this.width,Math.floor(e%this.frameSize/this.width),Math.floor(e/this.frameSize)]}toIndex(e){return e[0]+e[1]*this.width+e[2]*this.frameSize}getDefaultBounds(){return this.dimensions.map(e=>[0,e-1])}getBoundsIJK(){return this.boundsIJK[0][0]<this.dimensions[0]?this.boundsIJK:this.getDefaultBounds()}rleForEach(e,n){const r=(n==null?void 0:n.boundsIJK)||this.getBoundsIJK(),{isWithinObject:a}=n||{},i=this.map;i.defaultValue=void 0;for(let o=r[2][0];o<=r[2][1];o++)for(let s=r[1][0];s<=r[1][1];s++){const c=i.getRun(s,o);if(c)for(const l of c){const{start:u,end:f,value:v}=l,g=this.toIndex([0,s,o]);for(let d=u;d<f;d++){const m={value:v,index:g+d,pointIJK:[d,s,o]};(a==null?void 0:a(m))!==!1&&e(m)}}}}getScalarData(e=!1){var n;if(this.scalarData)return(n=this._updateScalarData)==null||n.call(this,this.scalarData),this.scalarData;if(this._getScalarData){const r=this._getScalarData();return e&&console.log("Not transient, should store value",r),r}throw new Error("No scalar data available")}setScalarData(e){this.scalarData=e}getScalarDataLength(){if(this.scalarData)return this.scalarData.length;if(this._getScalarDataLength)return this._getScalarDataLength();throw new Error("No scalar data available")}get sizeInBytes(){return this.getScalarDataLength()*this.bytePerVoxel}get bytePerVoxel(){return this.scalarData?this.scalarData.BYTES_PER_ELEMENT:this._get(0).BYTES_PER_ELEMENT}clear(){var e,n;(e=this.map)==null||e.clear(),this.boundsIJK.map(r=>{r[0]=1/0,r[1]=-1/0}),this.modifiedSlices.clear(),(n=this.points)==null||n.clear()}getConstructor(){return this.scalarData?this.scalarData.constructor:this._getConstructor?this._getConstructor():(console.warn("No scalar data available or can be used to get the constructor"),Float32Array)}getArrayOfModifiedSlices(){return Array.from(this.modifiedSlices)}resetModifiedSlices(){this.modifiedSlices.clear()}static addBounds(e,n){e||(e=[[1/0,-1/0],[1/0,-1/0],[1/0,-1/0]]),e[0][0]=Math.min(n[0],e[0][0]),e[0][1]=Math.max(n[0],e[0][1]),e[1][0]=Math.min(n[1],e[1][0]),e[1][1]=Math.max(n[1],e[1][1]),e[2][0]=Math.min(n[2],e[2][0]),e[2][1]=Math.max(n[2],e[2][1])}addPoint(e){const n=Array.isArray(e)?e[0]+this.width*e[1]+this.frameSize*e[2]:e;this.points||(this.points=new Set),this.points.add(n)}getPoints(){return this.points?[...this.points].map(e=>this.toIJK(e)):[]}setSliceDataValue(e,n,r){if(Array.isArray(r))for(let a=0;a<r.length;a++)e[n*r.length+a]=this.toNumber(r[a]);else e[n]=this.toNumber(r)}toNumber(e){return typeof e=="number"?e:Array.isArray(e)&&e[0]||0}static _createRGBScalarVolumeVoxelManager({dimensions:e,scalarData:n,numberOfComponents:r=3}){const a=new oi(e,{_get:i=>(i*=r,[n[i++],n[i++],n[i++]]),_id:"_createRGBScalarVolumeVoxelManager",_set:(i,o)=>{i*=3;const s=!gn(n[i],o);return n[i++]=o[0],n[i++]=o[1],n[i++]=o[2],s},numberOfComponents:r,scalarData:n});return a.clear=()=>{n.fill(0)},a}static createImageVolumeVoxelManager({dimensions:e,imageIds:n,numberOfComponents:r=1}){const a=e[0]*e[1];function i(u){const f=Math.floor(u/a);if(f<0||f>=e[2])return{};const v=n[f];if(!v)return console.warn(`ImageId not found for sliceIndex: ${f}`),{pixelData:null,pixelIndex:null};const g=Ye.getImage(v);if(!g)return console.warn(`Image not found for imageId: ${v}`),{pixelData:null,pixelIndex:null};const d=g.voxelManager,m=u%a;return{voxelManager:d,pixelIndex:m}}function o(u){const{voxelManager:f,pixelIndex:v}=i(u);return!f||v===null?null:f.getAtIndex(v)}function s(u,f){const{voxelManager:v,pixelIndex:g}=i(u);if(!v||g===null)return!1;const d=v.getAtIndex(g),m=!gn(f,d);return m&&(v.setAtIndex(g,f),!0)}const c=()=>{const{voxelManager:u}=i(0);return u?u.getConstructor():null},l=new oi(e,{_get:o,_set:s,numberOfComponents:r,_getConstructor:c,_id:"createImageVolumeVoxelManager"});return l.getMiddleSliceData=()=>{const u=Math.floor(e[2]/2);return l.getSliceData({sliceIndex:u,slicePlane:2})},l.clear=()=>{for(const u of n)Ye.getImage(u).voxelManager.clear()},l.getRange=()=>{let u=1/0,f=-1/0;for(const v of n){const g=Ye.getImage(v);g&&(g.minPixelValue<u&&(u=g.minPixelValue),g.maxPixelValue>f&&(f=g.maxPixelValue))}return u===1/0&&f===-1/0?[0,0]:[u,f]},l._getScalarDataLength=()=>{const{voxelManager:u}=i(0);return u?u.getScalarDataLength()*e[2]:0},l.getCompleteScalarDataArray=()=>{const u=l._getConstructor();if(!u)return new Uint8Array(0);const f=l.getScalarDataLength(),v=new u(f),g=e[0]*e[1]*r;for(let d=0;d<e[2];d++){const{voxelManager:m}=i(d*g/r);if(m){const h=d*g,C=m.getScalarData();if(r===1)v.set(C,h);else for(let p=0;p<C.length;p+=r)for(let S=0;S<r;S++)v[h+p+S]=C[p+S]}}return v},l.setCompleteScalarDataArray=u=>{const f=e[0]*e[1]*r,v=l._getConstructor();let g=1/0,d=-1/0;for(let m=0;m<e[2];m++){const{voxelManager:h}=i(m*f/r);if(h&&v){const C=m*f,p=C+f,S=new v(f);S.set(u.subarray(C,p)),h.scalarData=S;for(let E=0;E<S.length;E++){const T=S[E];g=Math.min(g,T),d=Math.max(d,T)}const I=n[m],D=Ye.getImage(I);D&&(D.minPixelValue=g,D.maxPixelValue=d)}}for(let m=0;m<e[2];m++)l.modifiedSlices.add(m);l.boundsIJK=[[0,e[0]-1],[0,e[1]-1],[0,e[2]-1]]},l}static createScalarVolumeVoxelManager({dimensions:e,scalarData:n,numberOfComponents:r=1}){if(e.length!==3)throw new Error("Dimensions must be provided as [number, number, number] for [width, height, depth]");if(!r&&(r=n.length/e[0]/e[1]/e[2],r>4||r<1||r===2))throw new Error(`Number of components ${r} must be 1, 3 or 4`);return r>1?oi._createRGBScalarVolumeVoxelManager({dimensions:e,scalarData:n,numberOfComponents:r}):oi._createNumberVolumeVoxelManager({dimensions:e,scalarData:n})}static createScalarDynamicVolumeVoxelManager({imageIdGroups:e,dimensions:n,timePoint:r=0,numberOfComponents:a=1}){if(!a){const s=Ye.getImage(e[0][0]);if(!s)throw new Error("Unable to determine number of components: No image found");if(a=s.getPixelData().length/(n[0]*n[1]),a>4||a<1||a===2)throw new Error(`Number of components ${a} must be 1, 3 or 4`)}const i=e.map(s=>oi.createImageVolumeVoxelManager({dimensions:n,imageIds:s,numberOfComponents:a})),o=new oi(n,{_get:s=>i[r]._get(s),_set:(s,c)=>i[r]._set(s,c),numberOfComponents:a,_id:"createScalarDynamicVolumeVoxelManager"});return o.getScalarDataLength=()=>i[r].getScalarDataLength(),o.getConstructor=()=>i[r].getConstructor(),o.getRange=()=>i[r].getRange(),o.getMiddleSliceData=()=>i[r].getMiddleSliceData(),o.setTimePoint=s=>{r=s,o._get=c=>i[r]._get(c),o._set=(c,l)=>i[r]._set(c,l)},o.getAtIndexAndTimePoint=(s,c)=>i[c]._get(s),o.getTimePointScalarData=s=>i[s].getCompleteScalarDataArray(),o.getTimePointScalarData=s=>i[s].getCompleteScalarDataArray(),o.getCurrentTimePointScalarData=()=>i[r].getCompleteScalarDataArray(),o}static createImageVoxelManager({width:e,height:n,scalarData:r,numberOfComponents:a=1}){const i=[e,n,1];if(!a&&(a=r.length/e/n,a>4||a<1||a===2))throw new Error(`Number of components ${a} must be 1, 3 or 4`);return a>1?oi._createRGBScalarVolumeVoxelManager({dimensions:i,scalarData:r,numberOfComponents:a}):oi._createNumberVolumeVoxelManager({dimensions:i,scalarData:r})}static _createNumberVolumeVoxelManager({dimensions:e,scalarData:n}){const r=new oi(e,{_get:a=>n[a],_set:(a,i)=>{const o=n[a]!==i;return n[a]=i,o},_getConstructor:()=>n.constructor,_id:"_createNumberVolumeVoxelManager"});return r.scalarData=n,r.clear=()=>{r.scalarData.fill(0)},r.getMiddleSliceData=()=>{const a=Math.floor(e[2]/2);return r.getSliceData({sliceIndex:a,slicePlane:2})},r}static createMapVoxelManager({dimension:e}){const n=new Map,r=new oi(e,{_get:n.get.bind(n),_set:(a,i)=>n.set(a,i)&&!0,_id:"createMapVoxelManager"});return r.map=n,r}static createHistoryVoxelManager({sourceVoxelManager:e}){const n=new Map,{dimensions:r}=e,a=new oi(r,{_get:i=>n.get(i),_set:function(i,o){if(n.has(i))o===n.get(i)&&n.delete(i);else{const s=this.sourceVoxelManager.getAtIndex(i);if(s===o)return!1;n.set(i,s)}this.sourceVoxelManager.setAtIndex(i,o)},_id:"createHistoryVoxelManager"});return a.map=n,a.scalarData=e.scalarData,a.sourceVoxelManager=e,a}static createRLEHistoryVoxelManager(e){const{dimensions:n}=e,r=new Ef(n[0],n[1],n[2]),a=new oi(n,{_get:i=>r.get(i),_set:function(i,o){const s=r.get(i);if(s===void 0){const c=this.sourceVoxelManager.getAtIndex(i);if(c===o||c===void 0&&o===0||o===null)return!1;r.set(i,c??0)}else(o===s||o===null)&&(r.delete(i),o=s);this.sourceVoxelManager.setAtIndex(i,o)},_getScalarData:Ef.getScalarData,_updateScalarData:i=>(r.updateScalarData(i),i),_id:"createRLEHistoryVoxelManager"});return a.map=r,a.sourceVoxelManager=e,a}static createLazyVoxelManager({dimensions:e,planeFactory:n}){const r=new Map,[a,i]=e,o=a*i,s=new oi(e,{_get:c=>r.get(Math.floor(c/o))[c%o],_set:(c,l)=>{const u=Math.floor(c/o);let f=r.get(u);return f||(f=n(a,i),r.set(u,f)),f[c%o]=l,!0},_id:"createLazyVoxelManager"});return s.map=r,s}static createRLEVolumeVoxelManager({dimensions:e}){const[n,r,a]=e,i=new Ef(n,r,a),o=new oi(e,{_get:s=>i.get(s),_set:(s,c)=>(i.set(s,c),!0),_getScalarData:Ef.getScalarData,_updateScalarData:s=>(i.updateScalarData(s),s),_id:"createRLEVolumeVoxelManager"});return o.map=i,o.getPixelData=i.getPixelData.bind(i),o}static createRLEImageVoxelManager({dimensions:e}){const[n,r]=e;return oi.createRLEVolumeVoxelManager({dimensions:[n,r,1]})}static addInstanceToImage(e){const{width:n,height:r}=e,a=e.voxelManager.getScalarData();if(a.length>=n*r){e.voxelManager=oi.createScalarVolumeVoxelManager({dimensions:[n,r,1],scalarData:a});return}e.voxelManager=oi.createRLEVolumeVoxelManager({dimensions:[n,r,1]}),e.getPixelData=e.voxelManager.getPixelData,e.sizeInBytes=$0e}};class H1{constructor(e){this._imageIdsIndexMap=new Map,this._imageURIsIndexMap=new Map,this.cornerstoneImageMetaData=null,this.isPreScaled=!1,this.numTimePoints=null;const{imageIds:n,scaling:r,dimensions:a,spacing:i,origin:o,direction:s,dataType:c,volumeId:l,referencedVolumeId:u,metadata:f,referencedImageIds:v,additionalDetails:g,voxelManager:d,numberOfComponents:m}=e;if(!c)throw new Error('Data type is required, please provide a data type as string such as "Uint8Array", "Float32Array", etc.');let{imageData:h}=e;this.imageIds=n,this.volumeId=l,this.metadata=f,this.dimensions=a,this.spacing=i,this.origin=o,this.direction=s,this.dataType=c,this.vtkOpenGLTexture=uie.newInstance(),this.vtkOpenGLTexture.setVolumeId(l),this.voxelManager=d??yo.createImageVolumeVoxelManager({dimensions:a,imageIds:n,numberOfComponents:m}),this.numVoxels=this.dimensions[0]*this.dimensions[1]*this.dimensions[2],h||(h=Lv.newInstance(),h.setDimensions(a),h.setSpacing(i),h.setDirection(s),h.setOrigin(o)),h.set({dataType:c,voxelManager:this.voxelManager,id:l,numberOfComponents:m||1}),h.set({hasScalarVolume:!1}),this.imageData=h,this.numFrames=this._getNumFrames(),this._reprocessImageIds(),r&&(this.scaling=r),u&&(this.referencedVolumeId=u),v&&(this.referencedImageIds=v),g&&(this.additionalDetails=g)}get sizeInBytes(){return this.voxelManager.sizeInBytes}get imageIds(){return this._imageIds}set imageIds(e){this._imageIds=e,this._reprocessImageIds()}_reprocessImageIds(){this._imageIdsIndexMap.clear(),this._imageURIsIndexMap.clear(),this._imageIds.forEach((e,n)=>{const r=ca(e);this._imageIdsIndexMap.set(e,n),this._imageURIsIndexMap.set(r,n)})}isDynamicVolume(){return this.numTimePoints>1}getImageIdIndex(e){return this._imageIdsIndexMap.get(e)}getImageIdByIndex(e){return this._imageIds[e]}getImageURIIndex(e){return this._imageURIsIndexMap.get(e)}load(e){}destroy(){this.imageData.delete(),this.imageData=null,this.voxelManager.clear(),this.vtkOpenGLTexture.releaseGraphicsResources(),this.vtkOpenGLTexture.delete()}invalidate(){for(let e=0;e<this.imageIds.length;e++)this.vtkOpenGLTexture.setUpdatedFrame(e);this.imageData.modified()}modified(){this.imageData.modified(),this.vtkOpenGLTexture.modified(),this.numFrames=this._getNumFrames()}removeFromCache(){Ye.removeVolumeLoadObject(this.volumeId)}getScalarDataLength(){return this.voxelManager.getScalarDataLength()}_getNumFrames(){return this.isDynamicVolume()?this.numTimePoints:this.imageIds.length}imageIdIndexToFrameIndex(e){return e%this.numFrames}getCornerstoneImages(){const{imageIds:e}=this;return e.map(n=>Ye.getImage(n))}}let hg={};const rs={add:(t,e)=>{rs.addRaw(t,{...e,metadata:structuredClone(e.metadata)})},addRaw:(t,e)=>{const n=e.type;hg[t]||(hg[t]={}),hg[t][n]=e.metadata},get:(t,e)=>{var n;return(n=hg[e])==null?void 0:n[t]},clear:()=>{hg={}}};qc(rs.get);const ui=new w5("imageLoadPool");ui.grabDelay=0;ui.setMaxSimultaneousRequests(bn.Interaction,1e3);ui.setMaxSimultaneousRequests(bn.Thumbnail,1e3);ui.setMaxSimultaneousRequests(bn.Prefetch,1e3);const BS={};let WS;function UU(t,e){const n=Ye.getImageLoadObject(t);if(n)return yw(n.promise,t),n;const r=t.split(":")[0],a=BS[r]||WS;if(!a)throw new Error(`loadImageFromImageLoader: No image loader found for scheme '${r}'`);const i=a(t,e);return yw(i.promise,t),i}function yw(t,e){Promise.resolve(t).then(n=>{z0e(n),Dt(ot,vt.IMAGE_LOADED,{image:n})}).catch(n=>{const r={imageId:e,error:n};Dt(ot,vt.IMAGE_LOAD_FAILED,r)})}function z0e(t){if(!t.voxelManager){const{width:e,height:n,numberOfComponents:r}=t,a=yo.createImageVoxelManager({scalarData:t.getPixelData(),width:e,height:n,numberOfComponents:r});t.voxelManager=a,t.getPixelData=()=>a.getScalarData(),delete t.imageFrame.pixelData}}function FU(t,e={priority:0,requestType:"prefetch"}){if(t===void 0)throw new Error("loadImage: parameter imageId must not be undefined");return UU(t,e).promise}function J0(t,e={priority:0,requestType:"prefetch"}){if(t===void 0)throw new Error("loadAndCacheImage: parameter imageId must not be undefined");const n=UU(t,e);return Ye.getImageLoadObject(t)||Ye.putImageLoadObject(t,n),n.promise}function q0e(t,e={priority:0,requestType:"prefetch"}){if(!t||t.length===0)throw new Error("loadAndCacheImages: parameter imageIds must be list of image Ids");return t.map(r=>J0(r,e))}function b5(t,e={}){var m;if(t===void 0)throw new Error("createAndCacheDerivedImage: parameter imageId must not be undefined");e.imageId===void 0&&(e.imageId=`derived:${Cr()}`);const{imageId:n,skipCreateBuffer:r,onCacheAdd:a,voxelRepresentation:i}=e,o=Lt("imagePlaneModule",t),s=o.rows*o.columns,{TypedArrayConstructor:c}=D5((m=e.targetBuffer)==null?void 0:m.type,s),l=new c(r?1:s),u=n,f=Lt("imagePlaneModule",t);rs.add(u,{type:"imagePlaneModule",metadata:f});const v=Lt("generalSeriesModule",t);rs.add(u,{type:"generalSeriesModule",metadata:v}),rs.add(u,{type:"generalImageModule",metadata:{instanceNumber:e.instanceNumber}});const g=Lt("imagePixelModule",t);rs.add(u,{type:"imagePixelModule",metadata:{...g,bitsAllocated:8,bitsStored:8,highBit:7,samplesPerPixel:1,pixelRepresentation:0}});const d=L5(n,{scalarData:l,onCacheAdd:a,skipCreateBuffer:r,targetBuffer:{type:l.constructor.name},voxelRepresentation:i,dimensions:[o.columns,o.rows],spacing:[o.columnPixelSpacing,o.rowPixelSpacing],origin:o.imagePositionPatient,direction:o.imageOrientationPatient,frameOfReferenceUID:o.frameOfReferenceUID});return d.referencedImageId=t,Ye.getImageLoadObject(n)||Ye.putImageSync(n,d),d}function N5(t,e={}){if(t.length===0)throw new Error("createAndCacheDerivedImages: parameter imageIds must be list of image Ids");return t.map((r,a)=>{var o;const i={imageId:((o=e==null?void 0:e.getDerivedImageId)==null?void 0:o.call(e,r))||`derived:${Cr()}`,...e};return b5(r,{...i,instanceNumber:a+1})})}function L5(t,e){const{scalarData:n,origin:r,direction:a,targetBuffer:i,skipCreateBuffer:o,onCacheAdd:s,frameOfReferenceUID:c,voxelRepresentation:l}=e,u=e.dimensions,f=e.spacing;if(!u||!f)throw new Error("createAndCacheLocalImage: dimensions and spacing are required");const v=u[0],g=u[1],d=f[0],m=f[1],h={frameOfReferenceUID:c,rows:g,columns:v,imageOrientationPatient:a??[1,0,0,0,1,0],rowCosines:a?a.slice(0,3):[1,0,0],columnCosines:a?a.slice(3,6):[0,1,0],imagePositionPatient:r??[0,0,0],pixelSpacing:[m,d],rowPixelSpacing:m,columnPixelSpacing:d},C=v*g,p=n.length/C;let S;if(n){if(!(n instanceof Uint8Array||n instanceof Float32Array||n instanceof Uint16Array||n instanceof Int16Array))throw new Error("createAndCacheLocalImage: scalarData must be of type Uint8Array, Uint16Array, Int16Array or Float32Array");S=n}else if(!o){const{TypedArrayConstructor:x}=D5(i==null?void 0:i.type,C);S=new x(C)}let I,D,E;if(S instanceof Uint8Array)I=8,D=8,E=7;else if(S instanceof Uint16Array)I=16,D=16,E=15;else if(S instanceof Int16Array)I=16,D=16,E=15;else if(S instanceof Float32Array)I=32,D=32,E=31;else throw new Error("Unsupported scalarData type");const T={samplesPerPixel:1,photometricInterpretation:S.length>u[0]*u[1]?"RGB":"MONOCHROME2",rows:g,columns:v,bitsAllocated:I,bitsStored:D,highBit:E},y={imagePlaneModule:h,imagePixelModule:T};["imagePlaneModule","imagePixelModule"].forEach(x=>{rs.add(t,{type:x,metadata:y[x]||{}})});const M=l===UR.RLE&&yo.createRLEImageVoxelManager({dimensions:u})||yo.createImageVoxelManager({height:g,width:v,numberOfComponents:p,scalarData:S});let _=S[0],O=S[0];for(let x=1;x<S.length;x++)S[x]<_&&(_=S[x]),S[x]>O&&(O=S[x]);const w={imageId:t,intercept:0,windowCenter:0,windowWidth:0,color:T.photometricInterpretation==="RGB",numberOfComponents:T.samplesPerPixel,dataType:i==null?void 0:i.type,slope:1,minPixelValue:_,maxPixelValue:O,rows:T.rows,columns:T.columns,getCanvas:void 0,height:T.rows,width:T.columns,rgba:void 0,columnPixelSpacing:h.columnPixelSpacing,rowPixelSpacing:h.rowPixelSpacing,FrameOfReferenceUID:h.frameOfReferenceUID,invert:!1,getPixelData:()=>M.getScalarData(),voxelManager:M,sizeInBytes:n.byteLength};return s==null||s(w),Ye.putImageSync(w.imageId,w),w}function VU(t){const e=({additionalDetails:r})=>r.imageId?r.imageId!==t:!0;ui.filterRequests(e);const n=Ye.getImageLoadObject(t);n&&n.cancelFn()}function j0e(t){t.forEach(e=>{VU(e)})}function Q0e(){const t=ui.getRequestPool();Object.keys(t).forEach(e=>{const n=t[e];Object.keys(n).forEach(r=>{const i=n[r].pop().additionalDetails,{imageId:o,volumeId:s}=i;let c;o?c=Ye.getImageLoadObject(o):s&&(c=Ye.getVolumeLoadObject(s)),c&&c.cancel()}),ui.clearRequestStack(e)})}function Wl(t,e){BS[t]=e}function K0e(t){const e=WS;return WS=t,e}function X0e(){Object.keys(BS).forEach(t=>delete BS[t]),WS=void 0}function U5(t,e={}){return N5(t,{...e,targetBuffer:{type:"Uint8Array"}})}function Y0e(t,e={}){return b5(t,{...e,targetBuffer:{type:"Uint8Array"}})}const Z0e=Object.freeze(Object.defineProperty({__proto__:null,cancelLoadAll:Q0e,cancelLoadImage:VU,cancelLoadImages:j0e,createAndCacheDerivedImage:b5,createAndCacheDerivedImages:N5,createAndCacheDerivedLabelmapImage:Y0e,createAndCacheDerivedLabelmapImages:U5,createAndCacheLocalImage:L5,loadAndCacheImage:J0,loadAndCacheImages:q0e,loadImage:FU,registerImageLoader:Wl,registerUnknownImageLoader:K0e,unregisterAllImageLoaders:X0e},Symbol.toStringTag,{value:"Module"}));function kU(t){const e=t[0],{pixelRepresentation:n,bitsAllocated:r,bitsStored:a,highBit:i,photometricInterpretation:o,samplesPerPixel:s}=Lt("imagePixelModule",e),c=[],l=Lt("voiLutModule",e);let u;if(l){const{windowWidth:p,windowCenter:S}=l;if(u=l==null?void 0:l.voiLUTFunction,Array.isArray(p))for(let I=0;I<p.length;I++)c.push({windowWidth:p[I],windowCenter:S[I]});else c.push({windowWidth:p,windowCenter:S})}else c.push({windowWidth:void 0,windowCenter:void 0});const{modality:f,seriesInstanceUID:v}=Lt("generalSeriesModule",e),{imageOrientationPatient:g,pixelSpacing:d,frameOfReferenceUID:m,columns:h,rows:C}=Lt("imagePlaneModule",e);return{BitsAllocated:r,BitsStored:a,SamplesPerPixel:s,HighBit:i,PhotometricInterpretation:o,PixelRepresentation:n,Modality:f,ImageOrientationPatient:g,PixelSpacing:d,FrameOfReferenceUID:m,Columns:h,Rows:C,voiLut:c,VOILUTFunction:u,SeriesInstanceUID:v}}function F5(t,e){const{imagePositionPatient:n,imageOrientationPatient:r}=Lt("imagePlaneModule",t[0]);if(!e){const d=qt(r[0],r[1],r[2]),m=qt(r[3],r[4],r[5]);e=Xe(),gr(e,d,m)}const a=Xe(),i=t[0].split(":")[0]==="wadouri";or(a,n[0],n[1],n[2]);let o,s;function c(d){const{imagePositionPatient:m}=Lt("imagePlaneModule",d),h=Xe();return Dr(h,n,m),Gt(h,e)}if(i){const d=[t[0],t[Math.floor(t.length/2)]];o=t;const m=c(d[0]),h=c(d[1]);m-h<0&&o.reverse();const C=Lt("imagePlaneModule",d[1]);if(!C)throw new Error("Incomplete metadata required for volume construction.");const p=Xe();Dr(p,n,C.imagePositionPatient);const S=Gt(p,e);s=Math.abs(S)/Math.floor(t.length/2)}else{const d=t.map(h=>({distance:c(h),imageId:h}));d.sort((h,C)=>C.distance-h.distance),o=d.map(h=>h.imageId);const m=d.length;s=Math.abs(d[m-1].distance-d[0].distance)/(m-1)}const{imagePositionPatient:l,sliceThickness:u,spacingBetweenSlices:f}=Lt("imagePlaneModule",o[0]),{strictZSpacingForVolumeViewport:v}=pI().rendering;return s===0&&!v&&(u&&f?(console.log("Could not calculate zSpacing. Using spacingBetweenSlices"),s=f):u?(console.log("Could not calculate zSpacing and no spacingBetweenSlices. Using sliceThickness"),s=u):(console.log("Could not calculate zSpacing. The VolumeViewport visualization is compromised. Setting zSpacing to 1 to render"),s=1)),{zSpacing:s,origin:l,sortedImageIds:o}}function GU(t){const e=Lt("modalityLutModule",t)||{},n=Lt("generalSeriesModule",t)||{},{modality:r}=n,a={rescaleSlope:e.rescaleSlope||1,rescaleIntercept:e.rescaleIntercept??0,modality:r},i=Lt("scalingModule",t)||{};return{...a,...r==="PT"&&{suvbw:i.suvbw,suvbsa:i.suvbsa,suvlbm:i.suvlbm}}}const V5=t=>Object.values(t).some(n=>typeof n=="number"&&!Number.isInteger(n)),Mw={Uint8Array:"Uint8Array",Int16Array:"Int16Array",Uint16Array:"Uint16Array",Float32Array:"Float32Array"};function DI(t,e){const n=kU(t),{ImageOrientationPatient:r,PixelSpacing:a,Columns:i,Rows:o}=n,s=qt(r[0],r[1],r[2]),c=qt(r[3],r[4],r[5]),l=Xe();gr(l,s,c);const{zSpacing:u,origin:f,sortedImageIds:v}=F5(t,l),g=t.length,d=[a[1],a[0],u],m=[i,o,g].map(C=>Math.floor(C)),h=[...s,...c,...l];return{dimensions:m,spacing:d,origin:f,dataType:J0e(v,n),direction:h,metadata:n,imageIds:v,volumeId:e,voxelManager:null,numberOfComponents:n.PhotometricInterpretation==="RGB"?3:1}}function J0e(t,e){const{BitsAllocated:n,PixelRepresentation:r}=e,a=r===1,i=ece(t);if(i)return i;const[o,s,c]=[0,Math.floor(t.length/2),t.length-1],l=[o,s,c].map(g=>GU(t[g])),u=l.some(g=>g.rescaleIntercept<0||g.rescaleSlope<0),f=l.some(g=>V5(g)),v=hI();switch(n){case 8:return"Uint8Array";case 16:return v&&f?"Float32Array":a||u?"Int16Array":!a&&!u?"Uint16Array":"Float32Array";case 24:return"Uint8Array";case 32:return"Float32Array";default:throw new Error(`Bits allocated of ${n} is not defined to generate scalarData for the volume.`)}}function ece(t){const n=[0,Math.floor(t.length/2),t.length-1].map(a=>Ye.getImage(t[a]));if(!n.every(Boolean))return null;const r=n[0].getPixelData().constructor.name;return n.every(a=>a.getPixelData().constructor.name===r)&&r in Mw?Mw[r]:null}let HS=class BU{constructor(e){this.name=e||"unknown"}static as(e){if(e.iterator)return e.iterator;const n=new BU("as iterator");return e.then(r=>{try{n.add(r,!0)}catch(a){n.reject(a)}},r=>{n.reject(r)}),n}add(e,n=!1){this.nextValue=e,this.done||(this.done=n),this.waiting&&(this.waiting.resolve(e),this.waiting=void 0)}resolve(){this.done=!0,this.waiting&&(this.waiting.resolve(this.nextValue),this.waiting=void 0)}reject(e){var n;this.rejectReason=e,(n=this.waiting)==null||n.reject(e)}getRecent(){if(this.rejectReason)throw this.rejectReason;return this.nextValue}async*[Symbol.asyncIterator](){for(;!this.done;){if(this.rejectReason)throw this.rejectReason;if(this.nextValue!==void 0&&(yield this.nextValue,this.done))break;this.waiting||(this.waiting={},this.waiting.promise=new Promise((e,n)=>{this.waiting.resolve=e,this.waiting.reject=n})),await this.waiting.promise}yield this.nextValue}async forEach(e,n){let r=0;try{for await(const a of this){const{done:i}=this;try{await e(a,i,r),r++}catch(o){if(!i){console.warn("Caught exception in intermediate value",o);continue}if(n)n(o,i);else throw o}}}catch(a){if(n)n(a,!0);else throw a}}generate(e,n){return e(this,this.reject.bind(this)).then(()=>{this.done||this.resolve()},r=>{this.reject(r),n?n(r):console.warn("Couldn't process because",r)})}async nextPromise(){for await(const e of this)if(e)return e;return this.nextValue}async donePromise(){for await(const e of this);return this.nextValue}getNextPromise(){const e=this.nextPromise();return e.iterator=this,e}getDonePromise(){const e=this.donePromise();return e.iterator=this,e}};const of=new Map,_w="imageRetrieveConfiguration",rm={IMAGE_RETRIEVE_CONFIGURATION:_w,clear:()=>{of.clear()},add:(t,e)=>{of.set(t,e)},clone:()=>new Map(of),restore:t=>{of.clear(),t.forEach((e,n)=>{of.set(n,e)})},get:(t,...e)=>{if(t===_w)return e.map(n=>of.get(n)).find(n=>n!==void 0)}};qc(rm.get.bind(rm));function ih(t){const e=to(),n=[];return e.forEach(r=>{const i=r.getVolumeViewports().filter(o=>o.hasVolumeId(t));n.push(...i)}),n}const HT=t=>{const e=tce(t);e!=null&&e.length&&e.forEach(({renderingEngine:n,viewportIds:r})=>{n.hasBeenDestroyed||n.renderViewports(r)})};function tce(t){const e=to(),n=[];return e.forEach(r=>{const a=ih(t);a.length&&n.push({renderingEngine:r,viewportIds:a.map(i=>i.id)})}),n}const Ow=[{id:"initialImages",retrieveType:"single"}],nce=[{id:"lossySequential",retrieveType:"singleFast"},{id:"finalSequential",retrieveType:"singleFinal"}],vE=[{offset:-1,imageQualityStatus:No.ADJACENT_REPLICATE},{offset:1,imageQualityStatus:No.ADJACENT_REPLICATE},{offset:2,imageQualityStatus:No.FAR_REPLICATE}],rce=[{id:"initialImages",positions:[.5,0,-1],retrieveType:"default",requestType:bn.Thumbnail,priority:5,nearbyFrames:vE},{id:"quarterThumb",decimate:4,offset:3,requestType:bn.Thumbnail,retrieveType:"multipleFast",priority:6,nearbyFrames:vE},{id:"halfThumb",decimate:4,offset:1,priority:7,requestType:bn.Thumbnail,retrieveType:"multipleFast",nearbyFrames:vE},{id:"quarterFull",decimate:4,offset:2,priority:8,requestType:bn.Thumbnail,retrieveType:"multipleFinal"},{id:"halfFull",decimate:4,offset:0,priority:9,requestType:bn.Thumbnail,retrieveType:"multipleFinal"},{id:"threeQuarterFull",decimate:4,offset:1,priority:10,requestType:bn.Thumbnail,retrieveType:"multipleFinal"},{id:"finalFull",decimate:4,offset:3,priority:11,requestType:bn.Thumbnail,retrieveType:"multipleFinal"},{id:"errorRetrieve"}];function WU(t,e,n=0){const r=[];for(let a=n;a<t.length;a+=e)r.push(a);return r}function ace(t,e,n){var r;if((r=e==null?void 0:e.nearbyRequests)!=null&&r.length)for(const a of e.nearbyRequests)try{const{itemId:i,imageQualityStatus:o}=a,s=Ye.getImageQuality(i);if(s!==void 0&&s>=o)continue;const c={...n,imageId:i,imageQualityStatus:o};Ye.setPartialImage(i,c),t.successCallback(i,c)}catch(i){console.warn("Couldn't fill nearby item ",a.itemId,i)}}const Nf=class Nf{constructor(e){this.stages=e.stages||Ow,this.retrieveOptions=e.retrieveOptions||{}}loadImages(e,n){return new ice(this,e,n).loadImages()}};Nf.createProgressive=HU,Nf.interleavedRetrieveStages={stages:rce},Nf.singleRetrieveStages={stages:Ow},Nf.sequentialRetrieveStages={stages:nce};let am=Nf;class ice{constructor(e,n,r){this.outstandingRequests=0,this.stageStatusMap=new Map,this.displayedIterator=new HS("displayed"),this.stages=e.stages,this.retrieveOptions=e.retrieveOptions,this.imageIds=n,this.listener=r}async loadImages(){const e=this.createStageRequests();this.outstandingRequests=e.length;for(const n of e)this.addRequest(n);return this.outstandingRequests===0?Promise.resolve(null):this.displayedIterator.getDonePromise()}sendRequest(e,n){const{imageId:r,next:a}=e,i=(u,f)=>{this.listener.errorCallback(r,c||!a,u),f&&this.updateStageStatus(e.stage,u)},o=(n.loader||J0)(r,n),s=HS.as(o);let c=!1;return s.forEach(async(u,f)=>{const v=Ye.getImageQuality(r);if(!u){console.warn("No image retrieved",r);return}const{imageQualityStatus:g}=u;if(c||(c=g===No.FULL_RESOLUTION),v!==void 0&&v>g){this.updateStageStatus(e.stage,null,!0);return}this.listener.successCallback(r,u),this.displayedIterator.add(u),f&&this.updateStageStatus(e.stage),ace(this.listener,e,u)},i).finally(()=>{if(!c&&a)Ye.setPartialImage(r),this.addRequest(a,n.streamingData);else{c||this.listener.errorCallback(r,!0,"Couldn't decode"),this.outstandingRequests--;for(let u=a;u;u=u.next)this.updateStageStatus(u.stage,null,!0)}this.outstandingRequests<=0&&this.displayedIterator.resolve()}),s.getDonePromise().catch(u=>null)}addRequest(e,n={}){const{imageId:r,stage:a}=e,i=this.listener.getLoaderImageOptions(r);if(!i)return;const{retrieveType:o="default"}=a,{retrieveOptions:s}=this,c=s[o]||s.default,l={...i,retrieveType:o,retrieveOptions:c,streamingData:n},u=a.priority??-5,f=a.requestType||bn.Interaction,v={imageId:r};ui.addRequest(this.sendRequest.bind(this,e,l),f,v,u)}updateStageStatus(e,n,r=!1){const{id:a}=e,i=this.stageStatusMap.get(a);if(i&&(i.imageLoadPendingCount--,n?i.imageLoadFailedCount++:r||i.totalImageCount++,!r&&!i.stageStartTime&&(i.stageStartTime=Date.now()),!i.imageLoadPendingCount)){const{imageLoadFailedCount:o,totalImageCount:s,stageStartTime:c=Date.now(),startTime:l}=i,u={stageId:a,numberOfFailures:o,numberOfImages:s,stageDurationInMS:c?Date.now()-c:null,startDurationInMS:Date.now()-l};Dt(ot,vt.IMAGE_RETRIEVAL_STAGE,u),this.stageStatusMap.delete(a)}}createStageRequests(){const e=new Array,n=new Map,r=(a,i)=>{const o=i<0?this.imageIds.length+i:i<1?Math.floor((this.imageIds.length-1)*i):i,s=this.imageIds[o];if(!s)throw new Error(`No value found to add to requests at ${i}`);const c={imageId:s,stage:a,index:o,nearbyRequests:this.findNearbyRequests(o,a)};this.addStageStatus(a);const l=n.get(s);l?l.next=c:e.push(c),n.set(s,c)};for(const a of this.stages)(a.positions||WU(this.imageIds,a.decimate||1,a.offset??0)).forEach(o=>{r(a,o)});return e}findNearbyRequests(e,n){const r=new Array;if(!n.nearbyFrames)return r;for(const a of n.nearbyFrames){const i=e+a.offset;i<0||i>=this.imageIds.length||r.push({itemId:this.imageIds[i],imageQualityStatus:a.imageQualityStatus,index:i})}return r}addStageStatus(e){const{id:n}=e,r=this.stageStatusMap.get(n)||{stageId:n,startTime:Date.now(),stageStartTime:null,totalImageCount:0,imageLoadFailedCount:0,imageLoadPendingCount:0};return r.imageLoadPendingCount++,this.stageStatusMap.set(n,r),r}}function HU(t){return new am(t)}const ww=bn.Prefetch;class $U extends H1{constructor(e,n){super(e),this.framesLoaded=0,this.framesProcessed=0,this.framesUpdated=0,this.autoRenderOnLoad=!0,this.cachedFrames=[],this.reRenderTarget=0,this.reRenderFraction=2,this.imagesLoader=this,this.cancelLoading=()=>{const{loadStatus:r}=this;if(!r||!r.loading)return;r.loading=!1,r.cancelled=!0,this.clearLoadCallbacks();const a=({additionalDetails:i})=>i.volumeId!==this.volumeId;ui.filterRequests(a)},this.loadStatus=n.loadStatus}invalidateVolume(e){const{vtkOpenGLTexture:n}=this,{numFrames:r}=this;for(let a=0;a<r;a++)n.setUpdatedFrame(a);this.modified(),e&&HT(this.volumeId)}clearLoadCallbacks(){this.loadStatus.callbacks=[]}callLoadStatusCallback(e){const{framesUpdated:n,framesProcessed:r,totalNumFrames:a}=e,{volumeId:i,reRenderFraction:o,loadStatus:s,metadata:c}=this,{FrameOfReferenceUID:l}=c;if(this.autoRenderOnLoad&&(n>this.reRenderTarget||r===a)&&(this.reRenderTarget+=o,HT(i)),r===a){s.callbacks.forEach(f=>f(e));const u={FrameOfReferenceUID:l,volumeId:i};Dt(ot,vt.IMAGE_VOLUME_LOADING_COMPLETED,u)}}updateTextureAndTriggerEvents(e,n,r=No.FULL_RESOLUTION){const a=this.imageIdIndexToFrameIndex(e),{cachedFrames:i,numFrames:o,totalNumFrames:s}=this,{FrameOfReferenceUID:c}=this.metadata;if(i[a]>r||i[a]===No.FULL_RESOLUTION)return;const u=r===No.FULL_RESOLUTION;i[e]=r,this.framesUpdated++,u&&(this.framesLoaded++,this.framesProcessed++);const f={FrameOfReferenceUID:c,volumeId:this.volumeId,numberOfFrames:o,framesProcessed:this.framesProcessed};Dt(ot,vt.IMAGE_VOLUME_MODIFIED,f),u&&this.framesProcessed===this.totalNumFrames&&(this.loadStatus.loaded=!0,this.loadStatus.loading=!1),this.callLoadStatusCallback({success:!0,imageIdIndex:e,imageId:n,framesLoaded:this.framesLoaded,framesProcessed:this.framesProcessed,framesUpdated:this.framesUpdated,numFrames:o,totalNumFrames:s,complete:u,imageQualityStatus:r}),this.vtkOpenGLTexture.setUpdatedFrame(a),this.loadStatus.loaded&&(this.loadStatus.callbacks=[])}successCallback(e,n){const r=this.getImageIdIndex(e),{imageQualityStatus:a}=n;if(this.loadStatus.cancelled){console.warn("volume load cancelled, returning for imageIdIndex: ",r);return}this.updateTextureAndTriggerEvents(r,e,a),this.isDynamicVolume()&&this.checkTimePointCompletion(r)}errorCallback(e,n,r){if(!n)return;const{totalNumFrames:a,numFrames:i}=this,o=this.getImageIdIndex(e);this.framesProcessed++,this.framesProcessed===a&&(this.loadStatus.loaded=!0,this.loadStatus.loading=!1),this.callLoadStatusCallback({success:!1,imageId:e,imageIdIndex:o,error:r,framesLoaded:this.framesLoaded,framesProcessed:this.framesProcessed,framesUpdated:this.framesUpdated,numFrames:i,totalNumFrames:a}),this.loadStatus.loaded&&(this.loadStatus.callbacks=[]);const s={error:r,imageIdIndex:o,imageId:e};Dt(ot,vt.IMAGE_LOAD_ERROR,s)}load(e){const{imageIds:n,loadStatus:r,numFrames:a}=this,{transferSyntaxUID:i}=Lt("transferSyntax",n[0])||{},o=Lt(rm.IMAGE_RETRIEVE_CONFIGURATION,this.volumeId,i,"volume");if(this.imagesLoader=this.isDynamicVolume()?this:o?(o.create||am.createProgressive)(o):this,r.loading===!0)return;const{loaded:s}=this.loadStatus,c=n.length;if(s){e&&e({success:!0,framesLoaded:c,framesProcessed:c,numFrames:a,totalNumFrames:c});return}e&&this.loadStatus.callbacks.push(e),this._prefetchImageIds()}getLoaderImageOptions(e){const{transferSyntaxUID:n}=Lt("transferSyntax",e)||{},r=Lt("imagePlaneModule",e)||{},{rows:a,columns:i}=r,o=this.getImageIdIndex(e),s=Lt("modalityLutModule",e)||{},c=Lt("generalSeriesModule",e)||{},l={rescaleSlope:s.rescaleSlope,rescaleIntercept:s.rescaleIntercept,modality:c.modality};if(l.modality==="PT"){const g=Lt("scalingModule",e);g&&(this._addScalingToVolume(g),l.suvbw=g.suvbw)}const u=V5(l),f=hI();if(this.isPreScaled=!0,l.rescaleSlope!==void 0&&l.rescaleIntercept!==void 0){const{rescaleSlope:g,rescaleIntercept:d}=l;this.isPreScaled=typeof g=="number"&&typeof d=="number"}return!f&&u&&(this.isPreScaled=!1),{targetBuffer:{type:this.dataType,rows:a,columns:i},allowFloatRendering:f,preScale:{enabled:this.isPreScaled,scalingParameters:l},transferPixelData:!0,requestType:ww,transferSyntaxUID:n,additionalDetails:{imageId:e,imageIdIndex:o,volumeId:this.volumeId}}}callLoadImage(e,n,r){const{cachedFrames:a}=this;if(a[n]===No.FULL_RESOLUTION)return;const i=s=>{const{image:c}=s.detail;c.imageId===e&&(this.vtkOpenGLTexture.setUpdatedFrame(n),ot.removeEventListener(vt.IMAGE_CACHE_IMAGE_ADDED,i))};return ot.addEventListener(vt.IMAGE_CACHE_IMAGE_ADDED,i),HS.as(J0(e,r)).forEach(s=>{this.successCallback(e,s)},this.errorCallback.bind(this,n,e))}getImageIdsRequests(e,n){this.totalNumFrames=this.imageIds.length;const r=2;return this.autoRenderOnLoad&&(this.reRenderFraction=this.totalNumFrames*(r/100),this.reRenderTarget=this.reRenderFraction),e.map(i=>{const o=this.getImageIdIndex(i),s=ww,c=n,l=this.getLoaderImageOptions(i);return{callLoadImage:this.callLoadImage.bind(this),imageId:i,imageIdIndex:o,options:l,priority:c,requestType:s,additionalDetails:{volumeId:this.volumeId}}})}getImageLoadRequests(e){throw new Error("Abstract method")}getImageIdsToLoad(){throw new Error("Abstract method")}loadImages(){return this.loadStatus.loading=!0,this.getImageLoadRequests(5).reverse().forEach(n=>{if(!n)return;const{callLoadImage:r,imageId:a,imageIdIndex:i,options:o,priority:s,requestType:c,additionalDetails:l}=n;ui.addRequest(r.bind(this,a,i,o),c,l,s)}),Promise.resolve(!0)}_prefetchImageIds(){this.loadStatus.loading=!0;const e=[...this.getImageIdsToLoad()];this.totalNumFrames=this.imageIds.length;const n=2;return this.autoRenderOnLoad&&(this.reRenderFraction=this.totalNumFrames*(n/100),this.reRenderTarget=this.reRenderFraction),this.imagesLoader.loadImages(e,this).catch(r=>{console.debug("progressive loading failed to complete",r)})}_addScalingToVolume(e){if(this.scaling)return;const{suvbw:n,suvlbm:r,suvbsa:a}=e,i={};r&&(i.suvbwToSuvlbm=r/n),a&&(i.suvbwToSuvbsa=a/n),n&&(i.suvbw=n),this.scaling={PT:i}}checkTimePointCompletion(e){}}class zU extends $U{constructor(e,n){e.imageIds||(e.imageIds=n.imageIds),super(e,n),this.getImageIdsToLoad=()=>{const{imageIds:r}=this;return this.numFrames=r.length,r}}getScalarData(){return this.voxelManager.getScalarData()}getImageLoadRequests(e){const{imageIds:n}=this;return this.getImageIdsRequests(n,e)}}function $S(t,e){if(!e||!e.imageIds||!e.imageIds.length)throw new Error("ImageIds must be provided to create a streaming image volume");async function n(){if(e.imageIds[0].split(":")[0]==="wadouri"){const[d,m]=[Math.floor(e.imageIds.length/2),e.imageIds.length-1],h=[0,d,m];await Promise.all(h.map(C=>new Promise((p,S)=>{const I=e.imageIds[C];ui.addRequest(async()=>{FU(I).then(()=>{console.log(`Prefetched imageId: ${I}`),p(!0)}).catch(D=>{S(D)})},bn.Prefetch,{volumeId:t},1)}))).catch(console.error)}const a=DI(e.imageIds,t),{dimensions:i,spacing:o,origin:s,direction:c,metadata:l,imageIds:u,dataType:f,numberOfComponents:v}=a;return new zU({volumeId:t,metadata:l,dimensions:i,spacing:o,origin:s,direction:c,imageIds:u,dataType:f,numberOfComponents:v},{imageIds:u,loadStatus:{loaded:!1,loading:!1,cancelled:!1,cachedFrames:[],callbacks:[]}})}const r=n();return{promise:r,decache:()=>{r.then(a=>{a.destroy(),a=null})},cancel:()=>{r.then(a=>{a.cancelLoading()})}}}const k5={};let zf=$S;function qU(t,e){const n=t.indexOf(":"),r=t.substring(0,n);let a=k5[r];if(a==null){if(zf==null||typeof zf!="function")throw new Error(`No volume loader for scheme ${r} has been registered`);a=zf}const i=a(t,e);return i.promise.then(function(o){Dt(ot,vt.VOLUME_LOADED,{volume:o})},function(o){const s={volumeId:t,error:o};Dt(ot,vt.VOLUME_LOADED_FAILED,s)}),i}function G5(t,e={imageIds:[]}){if(t===void 0)throw new Error("loadVolume: parameter volumeId must not be undefined");let n=Ye.getVolumeLoadObject(t);return n!==void 0?n.promise:(n=qU(t,e),n.promise.then(r=>r))}async function im(t,e){if(t===void 0)throw new Error("createAndCacheVolume: parameter volumeId must not be undefined");let n=Ye.getVolumeLoadObject(t);return n!==void 0||(n=qU(t,e),Ye.putVolumeLoadObject(t,n)),n.promise}function jU(t,e){const n=Ye.getVolume(t);if(!n)throw new Error(`Cannot created derived volume: Referenced volume with id ${t} does not exist.`);let{volumeId:r}=e;const{voxelRepresentation:a}=e;r===void 0&&(r=Cr());const{metadata:i,dimensions:o,spacing:s,origin:c,direction:l}=n,u=n.isDynamicVolume()?n.getCurrentTimePointImageIds():n.imageIds??[],f=N5(u,{targetBuffer:e.targetBuffer,voxelRepresentation:a}),v=f[0].dataType,g=f.map(m=>m.imageId),d=new H1({volumeId:r,dataType:v,metadata:structuredClone(i),dimensions:[o[0],o[1],o[2]],spacing:s,origin:c,direction:l,referencedVolumeId:t,imageIds:g,referencedImageIds:n.imageIds??[]});return Ye.putVolumeSync(r,d),d}async function EI(t,e){if(e===void 0)throw new Error("createAndCacheVolumeFromImages: parameter imageIds must not be undefined");if(t===void 0)throw new Error("createAndCacheVolumeFromImages: parameter volumeId must not be undefined");const n=Ye.getVolume(t);return n||(e.filter(i=>!Ye.getImage(i)).length===0?B5(t,e):await im(t,{imageIds:e}))}function B5(t,e){if(e===void 0)throw new Error("createAndCacheVolumeFromImagesSync: parameter imageIds must not be undefined");if(t===void 0)throw new Error("createAndCacheVolumeFromImagesSync: parameter volumeId must not be undefined");const n=Ye.getVolume(t);if(n)return n;const r=DI(e,t),a=new H1({volumeId:t,dataType:r.dataType,metadata:structuredClone(r.metadata),dimensions:r.dimensions,spacing:r.spacing,origin:r.origin,direction:r.direction,referencedVolumeId:r.referencedVolumeId,imageIds:r.imageIds,referencedImageIds:r.referencedImageIds});return Ye.putVolumeSync(t,a),a}function oh(t,e={}){const{metadata:n,dimensions:r,spacing:a,origin:i,direction:o,scalarData:s,targetBuffer:c,preventCache:l=!1}=e,u=Ye.getVolume(t);if(u)return u;const f=r[0]*r[1],v=s?s.constructor.name:(c==null?void 0:c.type)??"Float32Array",g=f*r[2];let d;switch(v){case"Uint8Array":case"Int8Array":d=g;break;case"Uint16Array":case"Int16Array":d=g*2;break;case"Float32Array":d=g*4;break}if(!Ye.isCacheable(d))throw new Error(`Cannot created derived volume: Volume with id ${t} is not cacheable.`);const h=[];for(let S=0;S<r[2];S++){const I=`${t}_slice_${S}`;h.push(I);const D=s.subarray(S*f,(S+1)*f);L5(I,{scalarData:D,dimensions:[r[0],r[1]],spacing:[a[0],a[1]],origin:i,direction:o,targetBuffer:{type:v}})}const C=new H1({volumeId:t,metadata:structuredClone(n),dimensions:[r[0],r[1],r[2]],spacing:a,origin:i,direction:o,imageIds:h,dataType:v}),p=yo.createImageVolumeVoxelManager({imageIds:h,dimensions:r,numberOfComponents:1});return C.voxelManager=p,l||Ye.putVolumeSync(t,C),C}function zS(t,e){k5[t]=e}function QU(){return Object.keys(k5)}function KU(t){const e=zf;return zf=t,e}function XU(){return zf.name}function $1(t,e={}){return jU(t,{...e,targetBuffer:{type:"Uint8Array",...e==null?void 0:e.targetBuffer}})}function oce(t,e,n=!1){return t.scalarData||(t.scalarData=new Uint8Array(t.dimensions[0]*t.dimensions[1]*t.dimensions[2])),oh(e,{...t,preventCache:n})}const sce=Object.freeze(Object.defineProperty({__proto__:null,createAndCacheDerivedLabelmapVolume:$1,createAndCacheDerivedVolume:jU,createAndCacheVolume:im,createAndCacheVolumeFromImages:EI,createAndCacheVolumeFromImagesSync:B5,createLocalLabelmapVolume:oce,createLocalVolume:oh,getUnknownVolumeLoaderSchema:XU,getVolumeLoaderSchemes:QU,loadVolume:G5,registerUnknownVolumeLoader:KU,registerVolumeLoader:zS},Symbol.toStringTag,{value:"Module"}));function YU(t,e){const n=aie.newInstance();pI().rendering.preferSizeOverAccuracy&&n.setPreferSizeOverAccuracy(!0),n.setInputData(t);const r=t.getSpacing(),a=(r[0]+r[1]+r[2])/6;return n.setMaximumSamplesPerRay(4e3),n.setSampleDistance(a),n.setScalarTexture(e),n}function ZU(t){const e=UL.newInstance();e.setBlendMode(t.getBlendMode());const n=t.getInputData(),{voxelManager:r}=n.get("voxelManager"),a=r.getCompleteScalarDataArray(),i=fn.newInstance({name:"Pixels",values:a});return n.getPointData().setScalars(i),e.setInputData(n),e.setMaximumSamplesPerRay(t.getMaximumSamplesPerRay()),e.setSampleDistance(t.getSampleDistance()),e}const cce=0,lce=bn.Prefetch;async function W5(t,e){let n=fce(e);!n&&e.imageIds.length&&(n=await vce(e),n=uce(e,n)),!(n.lower===0&&n.upper===0||n.lower===void 0||n.upper===void 0)&&t.getProperty().getRGBTransferFunction(0).setMappingRange(n.lower,n.upper)}function uce(t,e){const n=t.imageIds,r=Math.floor(n.length/2),a=n[r],i=Lt("generalSeriesModule",a)||{};return gce(i.modality,t)?{lower:0,upper:5}:e}function fce(t){const{imageIds:e,metadata:n}=t;let r;if(e!=null&&e.length){const a=Math.floor(e.length/2),i=e[a],o=Lt("voiLutModule",i);if(o&&o.windowWidth&&o.windowCenter){r={},r.voiLUTFunction=o==null?void 0:o.voiLUTFunction;const{windowWidth:s,windowCenter:c}=o,l=Array.isArray(s)?s[0]:s,u=Array.isArray(c)?c[0]:c;l!==0&&(r={windowWidth:l,windowCenter:u})}}else r=n.voiLut[0];if(r&&(r.windowWidth!==0||r.windowCenter!==0)){const{lower:a,upper:i}=Bl(Number(r.windowWidth),Number(r.windowCenter),r.voiLUTFunction);return{lower:a,upper:i}}}async function vce(t){var g;const{imageIds:e}=t,n=Math.floor(e.length/2),r=t.imageIds[n],a=Lt("generalSeriesModule",r)||{},{modality:i}=a,o=Lt("modalityLutModule",r)||{},s={rescaleSlope:o.rescaleSlope,rescaleIntercept:o.rescaleIntercept,modality:i};let c;if(i==="PT"){const d=Lt("scalingModule",r);d&&(c={...s,suvbw:d.suvbw})}const l={priority:cce,requestType:lce,preScale:{scalingParameters:c}};let u=Ye.getImage(r);(g=t.referencedImageIds)!=null&&g.length||(u=await J0(r,{...l,ignoreCache:!0}));let{min:f,max:v}=u.voxelManager.getMinMax();return(f==null?void 0:f.length)>1&&(f=Math.min(...f),v=Math.max(...v)),{lower:f,upper:v}}function gce(t,e){var n;return!(t!=="PT"||!e.isPreScaled||!((n=e.scaling)!=null&&n.PT.suvbw))}async function qS(t,e,n,r=!1){const{volumeId:a,callback:i,blendMode:o}=t,s=await G5(a);if(!s)throw new Error(`imageVolume with id: ${s.volumeId} does not exist`);const{imageData:c,vtkOpenGLTexture:l}=s,u=YU(c,l);o&&u.setBlendMode(o);const f=doe.newInstance();f.setMapper(u);const{numberOfComponents:v}=c.get("numberOfComponents");return f.getProperty().set({viewportId:n}),v===3&&f.getProperty().setIndependentComponents(!1),await W5(f,s),i&&i({volumeActor:f,volumeId:a}),r||dce(e,n,f,a),f}function dce(t,e,n,r){const a=n.getProperty().getRGBTransferFunction(0).getRange(),i={viewportId:e,range:{lower:a[0],upper:a[1]},volumeId:r};Dt(t,vt.VOI_MODIFIED,i)}const nc=t=>{const e="volumeId:",n=t.includes(e)?t.substring(e.length):t,r=n.indexOf("sliceIndex=");return r===-1?n:n.substring(0,r-1)},mce=1+o0,hce=(t,e)=>e===t.substring(0,Math.min(t.length,e.length)),Pw=t=>!!QU().find(e=>hce(t.volumeId,e));function Vv(t,e,n,r=!1){const{viewPlaneNormal:a}=e,i=t.getActors();if(!i.length)return{spacingInNormalDirection:null,imageVolume:null,actorUID:null};const o=i.map(l=>{const u=l.referencedId??l.uid;return Ye.getVolume(u)}).filter(l=>!!l);if(n){const l=nc(n),u=o.findIndex(d=>l.includes(d.volumeId)),f=o[u],{uid:v}=i[u],g=Aw(f,a,t,r);return{imageVolume:f,spacingInNormalDirection:g,actorUID:v}}if(!o.length)return{spacingInNormalDirection:null,imageVolume:null,actorUID:null};const s={spacingInNormalDirection:1/0,imageVolume:null,actorUID:null},c=o.find(Pw);for(let l=0;l<o.length;l++){const u=o[l];if(c&&!Pw(u))continue;const f=Aw(u,a,t);f*mce<s.spacingInNormalDirection&&(s.spacingInNormalDirection=f,s.imageVolume=u,s.actorUID=i[l].uid)}return s}function Aw(t,e,n,r=!1){const{slabThickness:a}=n.getProperties();let i=a;return(!a||!r)&&(i=vu(t,e)),i}function jS(t){const e=t.getCamera(),{spacingInNormalDirection:n,imageVolume:r}=Vv(t,e);if(!r)return;const{viewPlaneNormal:a,focalPoint:i}=e,o=t.getActors().find(d=>d.referencedId===r.volumeId||d.uid===r.volumeId);o||console.warn("No actor found for with actorUID of",r.volumeId);const s=o.actor,c=mI(s,a,i),{min:l,max:u,current:f}=c,v=Math.round((u-l)/n)+1;let g=(f-l)/(u-l)*v;return g=Math.floor(g),g>v-1?g=v-1:g<0&&(g=0),{numberOfSlices:v,imageIndex:g}}const _f={};function pce(t){_f[t]!==void 0&&delete _f[t]}function Sce(t){const{renderingEngineId:e,viewportId:n}=t.detail,a=da(e).getViewport(n);if(!("setVolumes"in a))throw new Error("volumeNewImageEventDispatcher: viewport does not have setVolumes method");_f[a.id]===void 0&&(_f[a.id]=0);const i=jS(a);if(!i){console.warn(`volumeNewImageEventDispatcher: sliceData is undefined for viewport ${a.id}`);return}const{numberOfSlices:o,imageIndex:s}=i;if(_f[a.id]===s)return;_f[a.id]=s;const c={imageIndex:s,viewportId:n,renderingEngineId:e,numberOfSlices:o};Dt(a.element,vt.VOLUME_NEW_IMAGE,c)}function uv(t,e,n){const[r,a,i]=t,[o,s,c]=e,[l,u,f,v]=n,g=o-r,d=s-a,m=c-i,h=-1*(l*r+u*a+f*i-v)/(l*g+u*d+f*m),C=g*h+r,p=d*h+a,S=m*h+i;return[C,p,S]}function Bc(t,e,n=!1){const[r,a,i]=t,o=r*e[0]+a*e[1]+i*e[2];if(n){const s=Math.sqrt(r*r+a*a+i*i);return[r/s,a/s,i/s,o/s]}return[r,a,i,o]}function JU(t,e,n){const[r,a,i,o]=t,[s,c,l,u]=e,[f,v,g,d]=n,m=Bg(r,s,f,a,c,v,i,l,g),h=Bg(o,u,d,a,c,v,i,l,g),C=Bg(r,s,f,o,u,d,i,l,g),p=Bg(r,s,f,a,c,v,o,u,d),S=Bu(h)/Bu(m),I=Bu(C)/Bu(m),D=Bu(p)/Bu(m);return[S,I,D]}function QS(t,e,n=!1){const[r,a,i,o]=t,[s,c,l]=e,u=r*s+a*c+i*l-o,f=Math.abs(u)/Math.sqrt(r*r+a*a+i*i);return(n?Math.sign(u):1)*f}const Cce=Object.freeze(Object.defineProperty({__proto__:null,linePlaneIntersection:uv,planeDistanceToPoint:QS,planeEquation:Bc,threePlaneIntersection:JU},Symbol.toStringTag,{value:"Module"}));function $T(t){return Array.isArray(t)?t.some(e=>Number.isNaN(e)):Number.isNaN(t)}function _s(t){if(t===null||typeof t!="object"||typeof t=="function"||typeof structuredClone=="function")return t;if(Array.isArray(t))return t.map(_s);{const e={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=_s(t[n]));return e}}const Fd=class Fd{constructor(e){this.insetImageMultiplier=1.1,this.flipHorizontal=!1,this.flipVertical=!1,this.viewportStatus=es.NO_DATA,this._suppressCameraModifiedEvents=!1,this.hasPixelSpacing=!0,this.getProperties=()=>({}),this.setRotation=n=>{},this.viewportWidgets=new Map,this.addWidget=(n,r)=>{this.viewportWidgets.set(n,r)},this.getWidget=n=>this.viewportWidgets.get(n),this.getWidgets=()=>Array.from(this.viewportWidgets.values()),this.removeWidgets=()=>{this.getWidgets().forEach(r=>{if(r.getEnabled()&&r.setEnabled(!1),r.getActor&&r.getRenderer){const a=r.getActor(),i=r.getRenderer();i&&a&&i.removeActor(a)}})},this.id=e.id,this.renderingEngineId=e.renderingEngineId,this.type=e.type,this.element=e.element,this.canvas=e.canvas,this.sx=e.sx,this.sy=e.sy,this.sWidth=e.sWidth,this.sHeight=e.sHeight,this._actors=new Map,this.element.setAttribute("data-viewport-uid",this.id),this.element.setAttribute("data-rendering-engine-uid",this.renderingEngineId),this.defaultOptions=_s(e.defaultOptions),this.suppressEvents=e.defaultOptions.suppressEvents?e.defaultOptions.suppressEvents:!1,this.options=_s(e.defaultOptions),this.isDisabled=!1}static get useCustomRenderingPipeline(){return!1}setRendered(){this.viewportStatus===es.NO_DATA||this.viewportStatus===es.LOADING||(this.viewportStatus=es.RENDERED)}getRenderingEngine(){return Yd.get(this.renderingEngineId)}getRenderer(){var n;const e=this.getRenderingEngine();if(!e||e.hasBeenDestroyed)throw new Error("Rendering engine has been destroyed");return(n=e.offscreenMultiRenderWindow)==null?void 0:n.getRenderer(this.id)}render(){this.getRenderingEngine().renderViewport(this.id)}setOptions(e,n=!1){var r,a;this.options=structuredClone(e),(r=this.options)!=null&&r.displayArea&&this.setDisplayArea((a=this.options)==null?void 0:a.displayArea),n&&this.render()}reset(e=!1){this.options=structuredClone(this.defaultOptions),e&&this.render()}getSliceViewInfo(){throw new Error("Method not implemented.")}flip({flipHorizontal:e,flipVertical:n}){const r=this.getDefaultImageData();if(!r)return;const a=this.getCamera(),{viewPlaneNormal:i,viewUp:o,focalPoint:s,position:c}=a,l=gr(Xe(),i,o);let u=UZ(Xe(),o);const f=r0(Xe(),i),v=Si(c,s),d=r.getDimensions().map(D=>Math.floor(D/2)),m=[d[0],d[1],d[2]],h=r.indexToWorld(m,Xe()),C=this._getFocalPointForResetCamera(h,a,{resetPan:!0,resetToCenter:!1}),p=fr(Xe(),s,C),S=Eo(p),I=D=>{const E=Ia(Xe(),D,2*Gt(p,D));return fr(E,E,p),Ar(E,E),E};if(e){const D=I(u),E=Hn(Xe(),C,D,S),T=Hn(Xe(),E,f,v);this.setCamera({viewPlaneNormal:f,position:T,focalPoint:E}),this.flipHorizontal=!this.flipHorizontal}if(n){u=r0(u,o);const D=I(l),E=Hn(Xe(),C,D,S),T=Hn(Xe(),E,f,v);this.setCamera({focalPoint:E,viewPlaneNormal:f,viewUp:u,position:T}),this.flipVertical=!this.flipVertical}this.render()}getDefaultImageData(){const e=this.getDefaultActor();if(e&&A0(e))return e.actor.getMapper().getInputData()}getDefaultActor(){return this.getActors()[0]}getActors(){return Array.from(this._actors.values())}getActorUIDs(){return Array.from(this._actors.keys())}getActor(e){return this._actors.get(e)}getImageActor(e){const n=this.getActors();let r=n[0];return e&&(r=n.find(i=>i.referencedId===e)),!r||!A0(r)?null:r.actor}getActorUIDByIndex(e){const n=this.getActors()[e];if(n)return n.uid}getActorByIndex(e){return this.getActors()[e]}setActors(e){this.removeAllActors(),this.addActors(e,{resetCamera:!0})}_removeActor(e){const n=this.getActor(e);if(!n){console.warn(`Actor ${e} does not exist for this viewport`);return}this.getRenderer().removeViewProp(n.actor),this._actors.delete(e)}removeActors(e){e.forEach(n=>{this._removeActor(n)})}addActors(e,n={}){const{resetCamera:r=!1}=n,a=this.getRenderingEngine();if(!a||a.hasBeenDestroyed){console.warn("Viewport::addActors::Rendering engine has not been initialized or has been destroyed");return}e.forEach(s=>{this.addActor(s)});const i=this.getViewPresentation(),o=this.getViewReference();this.resetCamera(),r||(this.setViewReference(o),this.setViewPresentation(i))}addActor(e){const{uid:n,actor:r}=e,a=this.getRenderingEngine();if(!a||a.hasBeenDestroyed){console.warn(`Cannot add actor UID of ${n} Rendering Engine has been destroyed`);return}if(!n||!r)throw new Error("Actors should have uid and vtk Actor properties");if(this.getActor(n)){console.warn(`Actor ${n} already exists for this viewport`);return}const i=this.getRenderer();i==null||i.addActor(r),this._actors.set(n,Object.assign({},e)),this.updateCameraClippingPlanesAndRange()}removeAllActors(){var e;(e=this.getRenderer())==null||e.removeAllViewProps(),this._actors=new Map}resetCameraNoEvent(){this._suppressCameraModifiedEvents=!0,this.resetCamera(),this._suppressCameraModifiedEvents=!1}setCameraNoEvent(e){this._suppressCameraModifiedEvents=!0,this.setCamera(e),this._suppressCameraModifiedEvents=!1}_getViewImageDataIntersections(e,n,r){const a=r[0],i=r[1],o=r[2],s=a*n[0]+i*n[1]+o*n[2],c=e.getBounds(),l=this._getEdges(c),u=[];for(const f of l){const[[v,g,d],[m,h,C]]=f;if(a*(m-v)+i*(h-g)+o*(C-d)===0)continue;const p=uv([v,g,d],[m,h,C],[a,i,o,s]);this._isInBounds(p,c)&&u.push(p)}return u}setInterpolationType(e,n){}setDisplayArea(e,n=!1){var o;if(!e)return;const{storeAsInitialCamera:r,type:a}=e;r&&(this.options.displayArea=e);const{_suppressCameraModifiedEvents:i}=this;if(this._suppressCameraModifiedEvents=!0,this.setCamera(this.fitToCanvasCamera),a==="SCALE"?this.setDisplayAreaScale(e):(this.setInterpolationType(((o=this.getProperties())==null?void 0:o.interpolationType)??Yu.LINEAR),this.setDisplayAreaFit(e)),r&&(this.initialCamera=this.getCamera()),this._suppressCameraModifiedEvents=i,!n&&!i){const s={viewportId:this.id,displayArea:e,storeAsInitialCamera:r};Dt(this.element,vt.DISPLAY_AREA_MODIFIED,s),this.setCamera(this.getCamera())}}setDisplayAreaScale(e){const{scale:n=1}=e,r=this.canvas,a=r.height,i=r.width;if(a<8||i<8)return;const c=this.getDefaultImageData().getSpacing()[1];this.setInterpolationType(Yu.NEAREST),this.setCamera({parallelScale:a*c/(2*n)}),delete e.imageArea,this.setDisplayAreaFit(e);const{focalPoint:l,position:u,viewUp:f,viewPlaneNormal:v}=this.getCamera(),g=Xe();if(r.height%2&&Hn(g,g,f,n*.5*c),r.width%2){const d=gr(Xe(),f,v);Hn(g,g,d,n*.5*c)}!g[0]&&!g[1]&&!g[2]||this.setCamera({focalPoint:Ra(Xe(),l,g),position:Ra(Xe(),u,g)})}setDisplayAreaFit(e){const{imageArea:n,imageCanvasPoint:r}=e,a=(window==null?void 0:window.devicePixelRatio)||1,i=this.getDefaultImageData();if(!i)return;const o=this.sWidth/a,s=this.sHeight/a,c=i.getDimensions(),l=this.worldToCanvas(i.indexToWorld([0,0,0])),u=this.worldToCanvas(i.indexToWorld([c[0]-1,c[1]-1,c[2]])),f=[Math.abs(u[0]-l[0]),Math.abs(u[1]-l[1])],[v,g]=f;if(n){const[d,m]=n,h=Math.abs(d*v/o),C=Math.abs(m*g/s),p=this.getZoom(),S=this.getZoom(this.fitToCanvasCamera),D=Math.min(1/h,1/C)*p/S;this.setZoom(D,!1)}if(r){const{imagePoint:d,canvasPoint:m=d||[.5,.5]}=r,[h,C]=m,p=o*(h-.5),S=s*(C-.5),[I,D]=d||m,E=1,T=E*v*(.5-I),y=E*g*(.5-D),M=T+p,_=y+S,O=[M,_];Ri(O,O,this.getPan()),this.setPan(O,!1)}}getDisplayArea(){var e;return(e=this.options)==null?void 0:e.displayArea}resetCamera(e){const{resetPan:n=!0,resetZoom:r=!0,resetToCenter:a=!0,storeAsInitialCamera:i=!0}=e||{},o=this.getRenderer();this.setCameraNoEvent({flipHorizontal:!1,flipVertical:!1});const s=this.getCamera(),c=o.computeVisiblePropBounds(),l=[0,0,0],u=this.getDefaultImageData();if(u){const x=u.getSpacing();c[0]=c[0]+x[0]/2,c[1]=c[1]-x[0]/2,c[2]=c[2]+x[1]/2,c[3]=c[3]-x[1]/2,c[4]=c[4]+x[2]/2,c[5]=c[5]-x[2]/2}const f=this.getVtkActiveCamera(),v=f.getViewPlaneNormal(),g=f.getViewUp();if(l[0]=(c[0]+c[1])/2,l[1]=(c[2]+c[3])/2,l[2]=(c[4]+c[5])/2,u){const P=u.getDimensions().map(L=>Math.floor(L/2)),R=[P[0],P[1],P[2]];u.indexToWorld(R,l)}const{widthWorld:d,heightWorld:m}=this._getWorldDistanceViewUpAndViewRight(c,g,v),h=[this.sWidth,this.sHeight],C=d/m,p=h[0]/h[1],S=C/p,I=S<1?this.insetImageMultiplier*m/2:this.insetImageMultiplier*m*S/2,D=Fd.boundsRadius(c)*(this.type===Kr.VOLUME_3D?10:1),E=this.insetImageMultiplier*D,T=Math.abs(Cn.dot(g,v))>.999?[-g[2],g[0],g[1]]:g,y=this._getFocalPointForResetCamera(l,s,{resetPan:n,resetToCenter:a}),M=[y[0]+E*v[0],y[1]+E*v[1],y[2]+E*v[2]];o.resetCameraClippingRange(c);const _=[-wa.MAXIMUM_RAY_DISTANCE,wa.MAXIMUM_RAY_DISTANCE];f.setPhysicalScale(D),f.setPhysicalTranslation(-y[0],-y[1],-y[2]),this.setCamera({parallelScale:r?I:s.parallelScale,focalPoint:y,position:M,viewAngle:90,viewUp:T,clippingRange:_});const O=this.getCamera();this.setFitToCanvasCamera(this.getCamera()),i&&this.setInitialCamera(O),r&&this.setZoom(1,i);const w={type:"ResetCameraEvent",renderer:o};return o.invokeEvent(w),this.triggerCameraModifiedEventIfNecessary(s,O),u&&this.options.displayArea&&r&&n&&a&&this.setDisplayArea(this.options.displayArea),!0}setInitialCamera(e){this.initialCamera=e}setFitToCanvasCamera(e){this.fitToCanvasCamera=e}getPan(e=this.initialCamera){if(!e)return[0,0];const r=this.getVtkActiveCamera().getFocalPoint(),a=this.canvasToWorld([0,0]),i=this.worldToCanvas(fr([0,0,0],e.focalPoint,a)),o=this.worldToCanvas(fr([0,0,0],r,a));return _a([0,0],i,o)}getCurrentImageIdIndex(){throw new Error("Not implemented")}getSliceIndex(){throw new Error("Not implemented")}getImageData(){throw new Error("Not implemented")}getViewReferenceId(e){return null}setPan(e,n=!1){const r=this.getCamera(),{focalPoint:a,position:i}=r,o=this.canvasToWorld([0,0]),s=_a([0,0],e,this.getPan());if(Math.abs(s[0])<1&&Math.abs(s[1])<1&&!n)return;const c=fr(Xe(),this.canvasToWorld(s),o),l=fr(Xe(),a,c),u=fr(Xe(),i,c);this.setCamera({...r,focalPoint:l,position:u},n)}getZoom(e=this.initialCamera){if(!e)return 1;const n=this.getVtkActiveCamera(),{parallelScale:r}=e;return r/n.getParallelScale()}setZoom(e,n=!1){const r=this.getCamera(),{parallelScale:a}=this.initialCamera,i=a/e;r.parallelScale===i&&!n||this.setCamera({...r,parallelScale:i},n)}_getFocalPointForViewPlaneReset(e){const{focalPoint:n,viewPlaneNormal:r}=this.getCamera(),a=this._getViewImageDataIntersections(e,n,r);let i=0,o=0,s=0;return a.forEach(([l,u,f])=>{i+=l,o+=u,s+=f}),[i/a.length,o/a.length,s/a.length]}getCanvas(){return this.canvas}getVtkActiveCamera(){const e=this.getRenderer();return e?e.getActiveCamera():(console.warn("No renderer found for the viewport"),null)}getCameraNoRotation(){const e=this.getVtkActiveCamera(),n=(s,c)=>s.some(l=>isNaN(l))?c:s,r=n([...e.getViewUp()],[0,1,0]),a=n([...e.getViewPlaneNormal()],[0,0,-1]),i=n([...e.getPosition()],[0,0,1]),o=n([...e.getFocalPoint()],[0,0,0]);return{viewUp:r,viewPlaneNormal:a,position:i,focalPoint:o,parallelProjection:e.getParallelProjection(),parallelScale:e.getParallelScale(),viewAngle:e.getViewAngle(),flipHorizontal:this.flipHorizontal,flipVertical:this.flipVertical}}getCamera(){return{...this.getCameraNoRotation(),rotation:this.getRotation()}}setCamera(e,n=!1){const r=this.getVtkActiveCamera(),a=this.getCamera(),i=Object.assign({},a,e),{viewUp:o,viewPlaneNormal:s,position:c,focalPoint:l,parallelScale:u,viewAngle:f,flipHorizontal:v,flipVertical:g,clippingRange:d}=e;if(v!==void 0){const C=v&&!this.flipHorizontal||!v&&this.flipHorizontal;C&&this.flip({flipHorizontal:C})}if(g!==void 0){const C=g&&!this.flipVertical||!g&&this.flipVertical;C&&this.flip({flipVertical:C})}o!==void 0&&r.setViewUp(o),s!==void 0&&r.setDirectionOfProjection(-s[0],-s[1],-s[2]),c!==void 0&&r.setPosition(...c),l!==void 0&&r.setFocalPoint(...l),u!==void 0&&r.setParallelScale(u),f!==void 0&&r.setViewAngle(f),d!==void 0&&r.setClippingRange(d);const m=a.focalPoint,h=a.viewUp;if(m&&l||h&&o){const C=r.getViewPlaneNormal(),p=r.getViewUp();let S=!1,I=!1;if(l){const D=[l[0]-m[0],l[1]-m[1],l[2]-m[2]];S=Math.abs(Cn.dot(D,C))>0}if(o&&(I=!gn(p,h)),S||I){const D=this.getDefaultActor();if(!(D!=null&&D.actor))return;Vo(D,"vtkActor")||this.updateClippingPlanesForActors(i),(Vo(D,"vtkImageSlice")||this.type===Kr.VOLUME_3D)&&this.getRenderer().resetCameraClippingRange()}}n&&this.setInitialCamera(i),this.triggerCameraModifiedEventIfNecessary(a,this.getCamera())}triggerCameraModifiedEventIfNecessary(e,n){if(!this._suppressCameraModifiedEvents&&!this.suppressEvents){const r={previousCamera:e,camera:n,element:this.element,viewportId:this.id,renderingEngineId:this.renderingEngineId};Dt(this.element,vt.CAMERA_MODIFIED,r)}}updateCameraClippingPlanesAndRange(){const e=this.getCamera();this.updateClippingPlanesForActors(e),this.getRenderer().resetCameraClippingRange()}async updateClippingPlanesForActors(e){this.getActors().map(r=>{if(!r.actor)return;const a=r.actor.getMapper();let i=r!=null&&r.clippingFilter?r==null?void 0:r.clippingFilter.getClippingPlanes():a.getClippingPlanes();i.length===0&&(r!=null&&r.clippingFilter)&&(i=[Ji.newInstance(),Ji.newInstance()]);let o=wa.MINIMUM_SLAB_THICKNESS;r.slabThickness&&(o=r.slabThickness);const{viewPlaneNormal:s,focalPoint:c}=e;this.setOrientationOfClippingPlanes(i,o,s,c),Dt(this.element,vt.CLIPPING_PLANES_UPDATED,{actorEntry:r,focalPoint:c,vtkPlanes:i,viewport:this})})}setOrientationOfClippingPlanes(e,n,r,a){if(e.length<2)return;const i=[r[0],r[1],r[2]];Cn.multiplyScalar(i,n),e[0].setNormal(r);const o=[0,0,0];Cn.subtract(a,i,o),e[0].setOrigin(o),e[1].setNormal(-r[0],-r[1],-r[2]);const s=[0,0,0];Cn.add(a,i,s),e[1].setOrigin(s)}getClippingPlanesForActor(e){if(e||(e=this.getDefaultActor()),!e.actor)throw new Error("Invalid actor entry: Actor is undefined");const n=e.actor.getMapper();let r=e!=null&&e.clippingFilter?e==null?void 0:e.clippingFilter.getClippingPlanes():n.getClippingPlanes();return r.length===0&&(e!=null&&e.clippingFilter)&&(r=[Ji.newInstance(),Ji.newInstance()]),r}_getWorldDistanceViewUpAndViewRight(e,n,r){const a=this._getCorners(e),i=this._getCorners(e),o=gr(Xe(),n,r);let s=_i.buildFromDegree().identity().rotateFromDirections(n,[1,0,0]);a.forEach(v=>s.apply(v));let c=1/0,l=-1/0;for(let v=0;v<8;v++){const g=a[v][0];g>l&&(l=g),g<c&&(c=g)}s=_i.buildFromDegree().identity().rotateFromDirections([o[0],o[1],o[2]],[1,0,0]),i.forEach(v=>s.apply(v));let u=1/0,f=-1/0;for(let v=0;v<8;v++){const g=i[v][0];g>f&&(f=g),g<u&&(u=g)}return{widthWorld:f-u,heightWorld:l-c}}getViewReference(e={}){const{focalPoint:n,viewPlaneNormal:r,viewUp:a}=this.getCamera();return{FrameOfReferenceUID:this.getFrameOfReferenceUID(),cameraFocalPoint:n,viewPlaneNormal:r,viewUp:a,sliceIndex:e.sliceIndex??this.getSliceIndex()}}isReferenceViewable(e,n){if(e.FrameOfReferenceUID&&e.FrameOfReferenceUID!==this.getFrameOfReferenceUID())return!1;const{viewPlaneNormal:r}=e,a=this.getCamera();return r&&!gn(r,a.viewPlaneNormal)&&!gn(r0(a.viewPlaneNormal,a.viewPlaneNormal),r)?n==null?void 0:n.withOrientation:!0}getViewPresentation(e={rotation:!0,displayArea:!0,zoom:!0,pan:!0}){const n={},{rotation:r,displayArea:a,zoom:i,pan:o}=e;r&&(n.rotation=this.getRotation()),a&&(n.displayArea=this.getDisplayArea());const s=this.getZoom();return i&&(n.zoom=s),o&&(n.pan=this.getPan(),Mc(n.pan,n.pan,1/s)),n}setViewReference(e){}setViewPresentation(e){if(!e)return;const{displayArea:n,zoom:r=this.getZoom(),pan:a,rotation:i}=e;n!==this.getDisplayArea()&&this.setDisplayArea(n),this.setZoom(r),a&&this.setPan(Mc([0,0],a,r)),i>=0&&this.setRotation(i)}_getCorners(e){return[[e[0],e[2],e[4]],[e[0],e[2],e[5]],[e[0],e[3],e[4]],[e[0],e[3],e[5]],[e[1],e[2],e[4]],[e[1],e[2],e[5]],[e[1],e[3],e[4]],[e[1],e[3],e[5]]]}_getFocalPointForResetCamera(e,n,{resetPan:r=!0,resetToCenter:a=!0}){if(a&&r)return e;if(a&&!r)return $T(n.focalPoint)?e:n.focalPoint;if(!a&&r){const i=n,o=i.focalPoint,s=i.viewPlaneNormal,c=fr(Xe(),e,o),l=Gt(c,s),u=Hn(Xe(),e,s,-1*l);return[u[0],u[1],u[2]]}if(!r&&!a)return $T(n.focalPoint)?e:n.focalPoint}_isInBounds(e,n){const[r,a,i,o,s,c]=n,[l,u,f]=e;return!(l<r||l>a||u<i||u>o||f<s||f>c)}_getEdges(e){const[n,r,a,i,o,s,c,l]=this._getCorners(e);return[[n,r],[n,o],[n,a],[r,i],[r,s],[a,i],[a,c],[i,l],[o,c],[o,s],[s,l],[c,l]]}static boundsRadius(e){const n=(e[1]-e[0])**2,r=(e[3]-e[2])**2,a=(e[5]-e[4])**2;return Math.sqrt(n+r+a||1)*.5}setDataIds(e,n){throw new Error("Unsupported operatoin setDataIds")}};Fd.CameraViewPresentation={rotation:!0,pan:!0,zoom:!0,displayArea:!0},Fd.TransferViewPresentation={windowLevel:!0,paletteLut:!0};let M1=Fd;function eF(t,e,n=!1){const r=t.getCamera(),{focalPoint:a,viewPlaneNormal:i}=r,{spacingInNormalDirection:o,actorUID:s}=Vv(t,r,e,n);if(!s)throw new Error(`Could not find image volume with id ${e} in the viewport`);const c=t.getActor(s);if(!c)return console.warn("No actor found for with actorUID of",s),null;const l=c.actor;return{sliceRange:mI(l,i,a),spacingInNormalDirection:o,camera:r}}function f1(t,e,n=!1){const{sliceRange:r,spacingInNormalDirection:a,camera:i}=eF(t,e,n),{min:o,max:s,current:c}=r,l=Math.round((s-o)/a),f=(c-o)/(s-o)*l,v=Math.round(f);return{numScrollSteps:l,currentStepIndex:v,sliceRangeInfo:{sliceRange:r,spacingInNormalDirection:a,camera:i}}}function tF(t){let e=[];const[n,r]=t.getRange();t.getTable(n,r,1024,e),e=e.filter((g,d)=>d%3===0);const a=[...Array(1024).keys()].map((g,d)=>n+(r-n)/1023*d),i=e[256],o=Math.log((1-i)/i),s=a[256],c=e[256*3],l=Math.log((1-c)/c),u=a[256*3],f=Math.round(4*(u-s)/(o-l)),v=Math.round(s+f*o/4);return[Math.round(v-f/2),Math.round(v+f/2)]}function nF(t,e){const n=e.colorTransfer.split(" ").splice(1).map(parseFloat),{shiftRange:r}=Ice(n),a=r[0],i=r[1]-r[0],o=iu.newInstance(),s=[];for(let I=0;I<n.length;I+=4){let D=n[I];const E=n[I+1],T=n[I+2],y=n[I+3];D=(D-a)/i,s.push([D,E,T,y])}Dce(s,r,o),t.getProperty().setRGBTransferFunction(0,o);const c=e.scalarOpacity.split(" ").splice(1).map(parseFloat),l=sv.newInstance(),u=[];for(let I=0;I<c.length;I+=2){let D=c[I];const E=c[I+1];D=(D-a)/i,u.push([D,E])}Ece(u,r,l);const f=t.getProperty();f.setScalarOpacity(0,l);const[v,g,d,m]=e.gradientOpacity.split(" ").splice(1).map(parseFloat);f.setUseGradientOpacity(0,!0),f.setGradientOpacityMinimumValue(0,v),f.setGradientOpacityMinimumOpacity(0,g),f.setGradientOpacityMaximumValue(0,d),f.setGradientOpacityMaximumOpacity(0,m),e.interpolation==="1"&&f.setInterpolationTypeToFastLinear(),f.setShade(e.shade==="1");const h=parseFloat(e.ambient),C=parseFloat(e.diffuse),p=parseFloat(e.specular),S=parseFloat(e.specularPower);f.setAmbient(h),f.setDiffuse(C),f.setSpecular(p),f.setSpecularPower(S)}function Ice(t){let e=1/0,n=-1/0;for(let a=0;a<t.length;a+=4)e=Math.min(e,t[a]),n=Math.max(n,t[a]);const r=(n-e)/2;return{shiftRange:[-r,r],min:e,max:n}}function Dce(t,e,n){const r=e[1]-e[0],a=t.map(([i,o,s,c])=>[i*r+e[0],o,s,c]);return n.removeAllPoints(),a.forEach(([i,o,s,c])=>n.addRGBPoint(i,o,s,c)),a}function Ece(t,e,n){const r=e[1]-e[0],a=t.map(([i,o])=>[i*r+e[0],o]);return n.removeAllPoints(),a.forEach(([i,o])=>n.addPoint(i,o)),a}class zr extends M1{constructor(e){if(super(e),this.useCPURendering=!1,this.perVolumeIdDefaultProperties=new Map,this.viewportProperties={},this.volumeIds=new Set,this.setRotation=a=>{const i=this.getPan(this.fitToCanvasCamera),o=this.getPan(),s=this.getCamera(),c=Ps([0,0],i,o);this.setPan(c,!1);const{flipVertical:l}=this.getCamera(),u=l?r0([0,0,0],this.initialViewUp):this.initialViewUp;this.setCameraNoEvent({viewUp:u}),this.rotateCamera(a);const f=this.getPan(),v=this.getPan(this.fitToCanvasCamera),g=Ps([0,0],f,v),d=Ri([0,0],i,g);if(this.setPan(d,!1),this._suppressCameraModifiedEvents)return;const m=this.getCamera(),h={previousCamera:s,camera:m,element:this.element,viewportId:this.id,renderingEngineId:this.renderingEngineId};Dt(this.element,vt.CAMERA_MODIFIED,h)},this.getDefaultProperties=a=>{let i;return a!==void 0&&(i=this.perVolumeIdDefaultProperties.get(a)),i!==void 0?i:{...this.globalDefaultProperties}},this.getProperties=a=>{var D;if(!this._getApplicableVolumeActor(a))return;const{colormap:o,VOILUTFunction:s,interpolationType:c,invert:l,slabThickness:u,preset:f}=this.viewportProperties;if(a||(a=this.getVolumeId()),!Ye.getVolume(a))return null;const g=this.getActors().find(E=>E.referencedId===a);if(!g)return;const m=g.actor.getProperty().getRGBTransferFunction(0),[h,C]=((D=this.viewportProperties)==null?void 0:D.VOILUTFunction)==="SIGMOID"?tF(m):m.getRange(),p={lower:h,upper:C},S=this.getColormap(a);return{colormap:a&&S?S:o,voiRange:p,VOILUTFunction:s,interpolationType:c,invert:l,slabThickness:u,preset:f}},this.getColormap=a=>{const i=this._getApplicableVolumeActor(a);if(!i)return;const{volumeActor:o}=i,s=this._getOrCreateColorTransferFunction(a),{nodes:c}=s.getState(),l=c.reduce((f,v)=>(f.push(v.x,v.r,v.g,v.b),f),[]);return A5(l,o)},this.getRotation=()=>{const{viewUp:a,viewPlaneNormal:i,flipVertical:o}=this.getCameraNoRotation(),s=o?r0([0,0,0],this.initialViewUp):this.initialViewUp;if(!s)return 0;const c=t5(s,a)*180/Math.PI,l=gr([0,0,0],s,a);return Gt(l,i)>=0?c:(360-c)%360},this.getFrameOfReferenceUID=()=>this._FrameOfReferenceUID,this.canvasToWorld=a=>{var d,m;const i=this.getVtkActiveCamera();(d=i.setIsPerformingCoordinateTransformation)==null||d.call(i,!0);const o=this.getRenderer(),c=this.getRenderingEngine().offscreenMultiRenderWindow.getOpenGLRenderWindow(),l=c.getSize(),u=window.devicePixelRatio||1,f=[a[0]*u,a[1]*u],v=[f[0]+this.sx,f[1]+this.sy];v[1]=l[1]-v[1];const g=c.displayToWorld(v[0],v[1],0,o);return(m=i.setIsPerformingCoordinateTransformation)==null||m.call(i,!1),[g[0],g[1],g[2]]},this.worldToCanvas=a=>{var d;const i=this.getVtkActiveCamera();(d=i.setIsPerformingCoordinateTransformation)==null||d.call(i,!0);const o=this.getRenderer(),c=this.getRenderingEngine().offscreenMultiRenderWindow.getOpenGLRenderWindow(),l=c.getSize(),u=c.worldToDisplay(...a,o);u[1]=l[1]-u[1];const f=[u[0]-this.sx,u[1]-this.sy],v=window.devicePixelRatio||1,g=[f[0]/v,f[1]/v];return i.setIsPerformingCoordinateTransformation(!1),g},this.hasImageURI=a=>this.getActors().filter(o=>Vo(o,"vtkVolume")).some(({uid:o,referencedId:s})=>{const c=Ye.getVolume(s||o);return c!=null&&c.imageIds?c.imageIds.map(ca).includes(a):!1}),this.getImageIds=a=>{const i=this._getApplicableVolumeActor(a);if(!i)throw new Error(`No actor found for the given volumeId: ${a}`);const o=i.volumeId,s=Ye.getVolume(o);if(!s)throw new Error(`imageVolume with id: ${o} does not exist in cache`);return s.imageIds},this.useCPURendering=Hf(),this.useCPURendering)throw new Error("VolumeViewports cannot be used whilst CPU Fallback Rendering is enabled.");const n=this.getRenderer(),r=die.newInstance();switch(n.setActiveCamera(r),this.type){case Kr.ORTHOGRAPHIC:r.setParallelProjection(!0);break;case Kr.VOLUME_3D:r.setParallelProjection(!0);break;case Kr.PERSPECTIVE:r.setParallelProjection(!1);break;default:throw new Error(`Unrecognized viewport type: ${this.type}`)}this.initializeVolumeNewImageEventDispatcher()}static get useCustomRenderingPipeline(){return!1}getSliceViewInfo(){throw new Error("Method not implemented.")}applyViewOrientation(e,n=!0){const{viewPlaneNormal:r,viewUp:a}=this._getOrientationVectors(e),i=this.getVtkActiveCamera();i.setDirectionOfProjection(-r[0],-r[1],-r[2]),i.setViewUpFrom(a),this.initialViewUp=a,n&&this.resetCamera()}initializeVolumeNewImageEventDispatcher(){const e=r.bind(this),n=a.bind(this);function r(i){const{viewportId:o}=i.detail;o!==this.id||this.isDisabled||!this.getImageData()||Sce(i)}function a(i){const{viewportId:o}=i.detail;o===this.id&&(this.element.removeEventListener(vt.CAMERA_MODIFIED,e),ot.removeEventListener(vt.ELEMENT_DISABLED,n),pce(o))}this.element.removeEventListener(vt.CAMERA_MODIFIED,e),this.element.addEventListener(vt.CAMERA_MODIFIED,e),ot.addEventListener(vt.ELEMENT_DISABLED,n)}setVOILUTFunction(e,n,r){Object.values(So).includes(e)||(e=So.LINEAR);const{voiRange:a}=this.getProperties();this.setVOI(a,n,r),this.viewportProperties.VOILUTFunction=e}setColormap(e,n,r){const a=this._getApplicableVolumeActor(n);if(!a)return;const{volumeActor:i}=a,o=iu.newInstance();let s=nm(e.name);const{name:c}=e;if(s||(s=LS.getPresetByName(c)),!s)throw new Error(`Colormap ${e} not found`);const l=i.getProperty().getRGBTransferFunction(0).getRange();if(o.applyColorMap(s),o.setMappingRange(l[0],l[1]),i.getProperty().setRGBTransferFunction(0,o),this.viewportProperties.colormap=e,!r){const u={viewportId:this.id,colormap:e,volumeId:n};Dt(this.element,vt.VOI_MODIFIED,u),Dt(this.element,vt.COLORMAP_MODIFIED,u)}}setOpacity(e,n){const r=this._getApplicableVolumeActor(n);if(!r)return;const{volumeActor:a}=r,i=sv.newInstance();if(typeof e.opacity=="number"){const o=a.getProperty().getRGBTransferFunction(0).getRange();i.addPoint(o[0],e.opacity),i.addPoint(o[1],e.opacity)}else e.opacity.forEach(({opacity:o,value:s})=>{i.addPoint(s,o)});a.getProperty().setScalarOpacity(0,i),this.viewportProperties.colormap||(this.viewportProperties.colormap={}),this.viewportProperties.colormap.opacity=e.opacity}setInvert(e,n,r){const a=this._getApplicableVolumeActor(n);if(!a)return;const i=a.volumeId,o=this._getOrCreateColorTransferFunction(i);if(md(o),this.viewportProperties.invert=e,!r){const s={...this.getVOIModifiedEventDetail(i),invertStateChanged:!0};Dt(this.element,vt.VOI_MODIFIED,s)}}getVOIModifiedEventDetail(e){const n=this._getApplicableVolumeActor(e);if(!n)throw new Error(`No actor found for the given volumeId: ${e}`);const i=n.volumeActor.getProperty().getRGBTransferFunction(0).getMappingRange(),o=this.getColormap(e),{VOILUTFunction:s,invert:c}=this.getProperties(e);return{viewportId:this.id,range:{lower:i[0],upper:i[1]},volumeId:n.volumeId,VOILUTFunction:s,colormap:o,invert:c}}_getOrCreateColorTransferFunction(e){const n=this._getApplicableVolumeActor(e);if(!n)return null;const{volumeActor:r}=n,a=r.getProperty().getRGBTransferFunction(0);if(a)return a;const i=iu.newInstance();return r.getProperty().setRGBTransferFunction(0,i),i}setInterpolationType(e,n){const r=this._getApplicableVolumeActor(n);if(!r)return;const{volumeActor:a}=r;a.getProperty().setInterpolationType(e),this.viewportProperties.interpolationType=e}setVOI(e,n,r=!1){const a=this._getApplicableVolumeActor(n);if(!a)return;const{volumeActor:i}=a,o=a.volumeId,s=e;if(typeof s>"u")throw new Error("voiRangeToUse is undefined, need to implement this in the new volume model");const{VOILUTFunction:c}=this.getProperties(o);if(c===So.SAMPLED_SIGMOID){const l=x5(s);i.getProperty().setRGBTransferFunction(0,l)}else{const{lower:l,upper:u}=s;i.getProperty().getRGBTransferFunction(0).setRange(l,u)}if(!r){const l={...this.getVOIModifiedEventDetail(o)};Dt(this.element,vt.VOI_MODIFIED,l)}this.viewportProperties.voiRange=s}rotateCamera(e){const n=e-this.getRotation();this.getVtkActiveCamera().roll(-n)}setDefaultProperties(e,n){n==null?this.globalDefaultProperties=e:this.perVolumeIdDefaultProperties.set(n,e)}clearDefaultProperties(e){e==null?(this.globalDefaultProperties={},this.resetProperties()):(this.perVolumeIdDefaultProperties.delete(e),this.resetToDefaultProperties(e))}getViewReference(e={}){const n=super.getViewReference(e),r=this.getVolumeId(e);if((e==null?void 0:e.forFrameOfReference)!==!1&&(n.volumeId=r),typeof(e==null?void 0:e.sliceIndex)!="number")return n;const{viewPlaneNormal:a}=n,i=(e==null?void 0:e.sliceIndex)-this.getSliceIndex(),{sliceRangeInfo:o}=f1(this,r,!0),{sliceRange:s,spacingInNormalDirection:c,camera:l}=o,{focalPoint:u,position:f}=l,{newFocalPoint:v}=Wf(u,f,s,a,c,i);return n.cameraFocalPoint=v,n}isReferenceViewable(e,n){if(!e.FrameOfReferenceUID||!super.isReferenceViewable(e,n))return!1;if(n!=null&&n.withNavigation)return!0;const r=this.getSliceIndex(),{sliceIndex:a}=e;return Array.isArray(a)?a[0]<=r&&r<=a[1]:a===void 0||a===r}scroll(e=1){const n=this.getVolumeId(),{sliceRangeInfo:r}=f1(this,n,!0);if(!r)return;const{sliceRange:a,spacingInNormalDirection:i,camera:o}=r,{focalPoint:s,viewPlaneNormal:c,position:l}=o,{newFocalPoint:u,newPosition:f}=Wf(s,l,a,c,i,e);this.setCamera({focalPoint:u,position:f})}setViewReference(e){if(!e)return;const n=this.getVolumeId(),{viewPlaneNormal:r,FrameOfReferenceUID:a,cameraFocalPoint:i,viewUp:o}=e;let{sliceIndex:s}=e;const{focalPoint:c,viewPlaneNormal:l,position:u}=this.getCamera(),f=sU(l,r),v=gn(l,r);if(typeof s=="number"&&e.volumeId===n&&(f||v)){const{currentStepIndex:g,sliceRangeInfo:d,numScrollSteps:m}=f1(this,n,!0),{sliceRange:h,spacingInNormalDirection:C}=d;f&&(s=m-s-1);const p=s-g,{newFocalPoint:S,newPosition:I}=Wf(c,u,h,l,C,p);this.setCamera({focalPoint:S,position:I})}else if(a===this.getFrameOfReferenceUID()){if(r&&!f&&!v){this.setOrientation({viewPlaneNormal:r,viewUp:o}),this.setViewReference(e);return}if(i){const g=fr([0,0,0],i,c),d=r??l,m=Gt(g,d);gn(m,0)||Ia(g,d,m);const h=Ra([0,0,0],c,g),C=Ra([0,0,0],u,g);this.setCamera({focalPoint:h,position:C})}}else throw new Error(`Incompatible view refs: ${a}!==${this.getFrameOfReferenceUID()}`)}setProperties({voiRange:e,VOILUTFunction:n,invert:r,colormap:a,preset:i,interpolationType:o,slabThickness:s}={},c,l=!1){this.globalDefaultProperties==null&&this.setDefaultProperties({voiRange:e,VOILUTFunction:n,invert:r,colormap:a,preset:i,slabThickness:s}),r!==void 0&&this.viewportProperties.invert!==r&&this.setInvert(r,c,l),a!=null&&a.name&&this.setColormap(a,c,l),(a==null?void 0:a.opacity)!=null&&this.setOpacity(a,c),e!==void 0&&this.setVOI(e,c,l),typeof o<"u"&&this.setInterpolationType(o),n!==void 0&&this.setVOILUTFunction(n,c,l),i!==void 0&&this.setPreset(i,c,l),s!==void 0&&this.setSlabThickness(s)}resetToDefaultProperties(e){var r,a;const n=this.globalDefaultProperties;(r=n.colormap)!=null&&r.name&&this.setColormap(n.colormap,e),((a=n.colormap)==null?void 0:a.opacity)!=null&&this.setOpacity(n.colormap,e),n.voiRange!==void 0&&this.setVOI(n.voiRange,e),n.VOILUTFunction!==void 0&&this.setVOILUTFunction(n.VOILUTFunction,e),n.invert!==void 0&&this.setInvert(n.invert,e),n.slabThickness!==void 0&&(this.setSlabThickness(n.slabThickness),this.viewportProperties.slabThickness=n.slabThickness),n.preset!==void 0&&this.setPreset(n.preset,e,!1),n.preset!==void 0&&this.setPreset(n.preset,e,!1),this.render()}setPreset(e,n,r){const a=this._getApplicableVolumeActor(n);if(!a)return;const{volumeActor:i}=a;let o=e;typeof o=="string"&&(o=VR.find(s=>s.name===e)),o&&(nF(i,o),this.viewportProperties.preset=o,this.render(),r||Dt(this.element,vt.PRESET_MODIFIED,{viewportId:this.id,volumeId:a.volumeId,actor:i,presetName:o.name}))}async setVolumes(e,n=!1,r=!1){const a=Ye.getVolume(e[0].volumeId);if(!a)throw new Error(`imageVolume with id: ${a.volumeId} does not exist, you need to create/allocate the volume first`);const i=a.metadata.FrameOfReferenceUID;this._isValidVolumeInputArray(e,i),this._FrameOfReferenceUID=i,e.forEach(s=>{this._addVolumeId(s.volumeId)});const o=[];for(let s=0;s<e.length;s++){const{volumeId:c,actorUID:l,slabThickness:u,...f}=e[s],v=await qS(e[s],this.element,this.id,r),g=l||Cr();o.push({uid:g,actor:v,slabThickness:u,referencedId:c,...f})}this._setVolumeActors(o),this.viewportStatus=es.PRE_RENDER,this.initializeColorTransferFunction(e),Dt(this.element,vt.VOLUME_VIEWPORT_NEW_VOLUME,{viewportId:this.id,volumeActors:o}),n&&this.render()}async addVolumes(e,n=!1,r=!1){const a=Ye.getVolume(e[0].volumeId);if(!a)throw new Error(`imageVolume with id: ${a.volumeId} does not exist`);const i=[];this._isValidVolumeInputArray(e,this._FrameOfReferenceUID),e.forEach(o=>{this._addVolumeId(o.volumeId)});for(let o=0;o<e.length;o++){const{volumeId:s,visibility:c,actorUID:l,slabThickness:u,...f}=e[o],v=await qS(e[o],this.element,this.id,r);c||v.setVisibility(!1);const g=l||Cr();i.push({uid:g,actor:v,slabThickness:u,referencedId:s,...f})}this.addActors(i),this.initializeColorTransferFunction(e),n&&this.render()}removeVolumeActors(e,n=!1){this.removeActors(e),n&&this.render()}setOrientation(e,n=!0){console.warn('Method "setOrientation" needs implementation')}initializeColorTransferFunction(e){const n=e[0].volumeId,r=this._getOrCreateColorTransferFunction(n);!this.initialTransferFunctionNodes&&r&&(this.initialTransferFunctionNodes=GS(r))}_getApplicableVolumeActor(e){const n=this.getActors();if(!(n!=null&&n.length))return;if(e){const a=n.find(i=>i.referencedId===e);return a?{volumeActor:a.actor,volumeId:e,actorUID:a.uid}:void 0}const r=n[0];return{volumeActor:r.actor,volumeId:r.referencedId,actorUID:r.uid}}async _isValidVolumeInputArray(e,n){const r=e.length;for(let a=1;a<r;a++){const i=Ye.getVolume(e[a].volumeId);if(n!==i.metadata.FrameOfReferenceUID)throw new Error(`Volumes being added to viewport ${this.id} do not share the same FrameOfReferenceUID. This is not yet supported`)}return!0}getBounds(){return this.getRenderer().computeVisiblePropBounds()}flip(e){super.flip(e)}hasVolumeId(e){return this.volumeIds.has(e)}hasVolumeURI(e){for(const n of this.volumeIds)if(n.includes(e))return!0;return!1}getImageData(e){var s,c,l;if(!this.getDefaultActor())return;e||(e=this.getVolumeId());const r=(s=this.getActors())==null?void 0:s.find(u=>u.referencedId===e);if(!Vo(r,"vtkVolume"))return;const a=r.actor,i=Ye.getVolume(e),o=a.getMapper().getInputData();return{dimensions:o.getDimensions(),spacing:o.getSpacing(),origin:o.getOrigin(),direction:o.getDirection(),imageData:a.getMapper().getInputData(),metadata:{Modality:(c=i==null?void 0:i.metadata)==null?void 0:c.Modality,FrameOfReferenceUID:(l=i==null?void 0:i.metadata)==null?void 0:l.FrameOfReferenceUID},get scalarData(){var u;return(u=i==null?void 0:i.voxelManager)==null?void 0:u.getScalarData()},scaling:i==null?void 0:i.scaling,hasPixelSpacing:!0,voxelManager:i==null?void 0:i.voxelManager}}setCameraClippingRange(){throw new Error("Method not implemented.")}getSliceIndex(){throw new Error("Method not implemented.")}setCamera(e,n){super.setCamera(e,n),this.setCameraClippingRange()}_setVolumeActors(e){for(let n=0;n<e.length;n++)this.viewportProperties.invert=!1;this.setActors(e)}_getOrientationVectors(e){if(typeof e=="object"){if(e.viewPlaneNormal&&e.viewUp)return e;throw new Error("Invalid orientation object. It must contain viewPlaneNormal and viewUp")}else{if(typeof e=="string"&&Rl[e])return this.viewportProperties.orientation=e,Rl[e];throw new Error(`Invalid orientation: ${e}. Valid orientations are: ${Object.keys(Rl).join(", ")}`)}}getSlabThickness(){const e=this.getActors();let n=wa.MINIMUM_SLAB_THICKNESS;return e.forEach(r=>{r.slabThickness>n&&(n=r.slabThickness)}),n}getIntensityFromWorld(e){const n=this.getDefaultActor();if(!Vo(n,"vtkVolume"))return;const{actor:r}=n,a=r.getMapper().getInputData(),i=Ye.getVolume(this.getVolumeId()),o=Da(a,e);return i.voxelManager.getAtIJKPoint(o)}getVolumeId(e){const n=this.getActors();if(!n)return;if(!(e!=null&&e.volumeId)){const a=n.find(i=>i.actor.getClassName()==="vtkVolume");return(a==null?void 0:a.referencedId)||(a==null?void 0:a.uid)}const r=n.find(a=>a.actor.getClassName()==="vtkVolume"&&a.referencedId===(e==null?void 0:e.volumeId));return(r==null?void 0:r.referencedId)||(r==null?void 0:r.uid)}getViewReferenceId(e={}){var c;let{volumeId:n,sliceIndex:r}=e;if(!n){const l=this.getActors();if(!l)return;n=(c=l.find(u=>u.actor.getClassName()==="vtkVolume"))==null?void 0:c.referencedId}const a=this.getSliceIndex();r??(r=a);const{viewPlaneNormal:i,focalPoint:o}=this.getCamera(),s=n.includes("?")?"&":"?";return`volumeId:${n}${s}sliceIndex=${r}&viewPlaneNormal=${i.join(",")}`}_addVolumeId(e){this.volumeIds.add(e)}getAllVolumeIds(){return Array.from(this.volumeIds)}}function wl(t,e){const{imageData:n}=t.getImageData(),r=t.canvasToWorld(e);return Da(n,r)}function fv(t,e){return t.indexToWorld(e)}function Tce(t,e){const{imageData:n}=t.getImageData(),r=fv(n,e);return t.worldToCanvas(r)}class yr extends zr{constructor(e){super(e),this._useAcquisitionPlaneForViewPlane=!1,this.getNumberOfSlices=()=>{const{numberOfSlices:r}=jS(this)||{};return r},this.resetCameraForResize=()=>this.resetCamera({resetPan:!0,resetZoom:!0,resetToCenter:!0,resetRotation:!1,suppressEvents:!0}),this.getCurrentImageIdIndex=(r,a=!0)=>{const{currentStepIndex:i}=f1(this,r||this.getVolumeId(),a);return i},this.getSliceIndex=()=>{const{imageIndex:r}=jS(this)||{};return r},this.getCurrentImageId=()=>{const r=this.getDefaultActor();if(!r||!Vo(r,"vtkVolume"))return;const a=Ye.getVolume(this.getVolumeId());if(!a)return;const{viewPlaneNormal:i,focalPoint:o}=this.getCamera();return jc(a,o,i)},this.getSlicePlaneCoordinates=()=>{const r=this.getDefaultActor();if(!(r!=null&&r.actor))return console.warn("No image data found for calculating vtkPlanes."),[];const a=this.getVolumeId(),i=Ye.getVolume(a),o=this.getCamera(),{focalPoint:s,position:c,viewPlaneNormal:l}=o,u=vu(i,l),f=mI(r.actor,l,s),v=Math.round((f.current-f.min)/u),g=Math.round((f.max-f.current)/u),d=this.getSliceIndex(),m=[];for(let h=-v;h<=g;h++){const{newFocalPoint:C}=Wf(s,c,f,l,u,h);m.push({sliceIndex:d+h,point:C})}return m};const{orientation:n}=this.options;if(n&&n!==xl.ACQUISITION){this.applyViewOrientation(n);return}this._useAcquisitionPlaneForViewPlane=!0}async setVolumes(e,n=!1,r=!1){const a=Ye.getVolume(e[0].volumeId);if(!a)throw new Error(`imageVolume with id: ${a.volumeId} does not exist`);return this._useAcquisitionPlaneForViewPlane&&(this._setViewPlaneToAcquisitionPlane(a),this._useAcquisitionPlaneForViewPlane=!1),super.setVolumes(e,n,r)}async addVolumes(e,n=!1,r=!1){const a=Ye.getVolume(e[0].volumeId);if(!a)throw new Error(`imageVolume with id: ${a.volumeId} does not exist`);return this._useAcquisitionPlaneForViewPlane&&(this._setViewPlaneToAcquisitionPlane(a),this._useAcquisitionPlaneForViewPlane=!1),super.addVolumes(e,n,r)}jumpToWorld(e){const{focalPoint:n}=this.getCamera(),r=[0,0,0];Dr(r,e,n);const a=this.getCamera(),i=a.viewPlaneNormal,o=Gt(r,i),s=qt(i[0],i[1],i[2]);if(Ia(s,s,o),Math.abs(s[0])>.001||Math.abs(s[1])>.001||Math.abs(s[2])>.001){const c=[0,0,0],l=[0,0,0];Ra(c,a.focalPoint,s),Ra(l,a.position,s),this.setCamera({focalPoint:c,position:l}),this.render()}return!0}setOrientation(e,n=!0){let r,a;if(typeof e=="string"){if(Rl[e])({viewPlaneNormal:r,viewUp:a}=Rl[e]);else if(e==="acquisition")({viewPlaneNormal:r,viewUp:a}=this._getAcquisitionPlaneOrientation());else throw new Error(`Invalid orientation: ${e}. Use Enums.OrientationAxis instead.`);this.setCamera({viewPlaneNormal:r,viewUp:a}),this.viewportProperties.orientation=e,this.resetCamera()}else({viewPlaneNormal:r,viewUp:a}=e),this.applyViewOrientation(e);n&&this.render()}setCameraClippingRange(){const e=this.getVtkActiveCamera();if(!e){console.warn("No active camera found");return}e.getParallelProjection()?e.setClippingRange(-wa.MAXIMUM_RAY_DISTANCE,wa.MAXIMUM_RAY_DISTANCE):e.setClippingRange(wa.MINIMUM_SLAB_THICKNESS,wa.MAXIMUM_RAY_DISTANCE)}_getAcquisitionPlaneOrientation(){if(!this.getDefaultActor())return;const n=this.getVolumeId(),r=Ye.getVolume(n);if(!r)throw new Error(`imageVolume with id: ${n} does not exist in cache`);const{direction:a}=r,i=a.slice(6,9).map(s=>-s),o=a.slice(3,6).map(s=>-s);return{viewPlaneNormal:i,viewUp:o}}_setViewPlaneToAcquisitionPlane(e){let n,r;if(e){const{direction:a}=e;n=a.slice(6,9).map(i=>-i),r=a.slice(3,6).map(i=>-i)}else({viewPlaneNormal:n,viewUp:r}=this._getAcquisitionPlaneOrientation());this.setCamera({viewPlaneNormal:n,viewUp:r}),this.initialViewUp=r,this.resetCamera()}getBlendMode(e){const n=this.getActors(),r=(e==null?void 0:e.length)>0?n.find(a=>e.includes(a.uid)):n[0];return(r==null?void 0:r.blendMode)||(r==null?void 0:r.actor.getMapper().getBlendMode())}setBlendMode(e,n=[],r=!1){let a=this.getActors();(n==null?void 0:n.length)>0&&(a=a.filter(i=>n.includes(i.uid))),a.forEach(i=>{var c;const{actor:o}=i,s=o.getMapper();(c=s.setBlendMode)==null||c.call(s,e),i.blendMode=e}),r&&this.render()}resetCamera(e){const{resetPan:n=!0,resetZoom:r=!0,resetRotation:a=!0,resetToCenter:i=!0,suppressEvents:o=!1,resetOrientation:s=!0}=e||{},{orientation:c}=this.viewportProperties;c&&s&&this.applyViewOrientation(c,!1),super.resetCamera({resetPan:n,resetZoom:r,resetToCenter:i});const l=this.getVtkActiveCamera(),u=l.getViewPlaneNormal(),f=l.getFocalPoint();if(this.getActors().forEach(g=>{if(!g.actor)return;const d=g.actor.getMapper();if(d.getClippingPlanes().length===0&&!(g!=null&&g.clippingFilter)){const h=Ji.newInstance(),C=Ji.newInstance(),p=[h,C];let S=wa.MINIMUM_SLAB_THICKNESS;g.slabThickness&&(S=g.slabThickness),this.setOrientationOfClippingPlanes(p,S,u,f),d.addClippingPlane(h),d.addClippingPlane(C)}}),a&&Rl[this.viewportProperties.orientation]!==void 0){const g=Rl[this.viewportProperties.orientation];this.setCameraNoEvent({viewUp:g.viewUp,viewPlaneNormal:g.viewPlaneNormal})}if(!o){const g={viewportId:this.id,camera:this.getCamera(),renderingEngineId:this.renderingEngineId,element:this.element};Dt(this.element,vt.CAMERA_RESET,g)}return!0}setSlabThickness(e,n=[]){e<.1&&(e=.1);let r=this.getActors();(n==null?void 0:n.length)>0&&(r=r.filter(i=>n.includes(i.uid))),r.forEach(i=>{Vo(i,"vtkVolume")&&(i.slabThickness=e)});const a=this.getCamera();this.updateClippingPlanesForActors(a),this.triggerCameraModifiedEventIfNecessary(a,a),this.viewportProperties.slabThickness=e}resetSlabThickness(){this.getActors().forEach(r=>{Vo(r,"vtkVolume")&&(r.slabThickness=wa.MINIMUM_SLAB_THICKNESS)});const n=this.getCamera();this.updateClippingPlanesForActors(n),this.triggerCameraModifiedEventIfNecessary(n,n),this.viewportProperties.slabThickness=void 0}getSliceViewInfo(){const{width:e,height:n}=this.getCanvas(),r=wl(this,[0,0]),a=wl(this,[e-1,0]),i=wl(this,[0,n-1]),o=Dr(Xe(),a,r),s=Dr(Xe(),i,r),c=gr(Xe(),o,s);Ar(o,o),Ar(s,s),Ar(c,c);const{dimensions:l}=this.getImageData(),[u,f,v]=l,m=[[0,0,0],[u-1,0,0],[0,f-1,0],[u-1,f-1,0],[0,0,v-1],[u-1,0,v-1],[0,f-1,v-1],[u-1,f-1,v-1]].map(_=>Tce(this,_)).reduce((_,O)=>(_.minX=Math.min(_.minX,O[0]),_.minY=Math.min(_.minY,O[1]),_.maxX=Math.max(_.maxX,O[0]),_.maxY=Math.max(_.maxY,O[1]),_),{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}),h=wl(this,[m.minX,m.minY]),C=jM(o[0],o[1],o[2],0,s[0],s[1],s[2],0,c[0],c[1],c[2],0,h[0],h[1],h[2],1),p=wl(this,[m.maxX,m.maxY]),S=Dr(Xe(),p,h),I=ba(Fs(),C),{viewPlaneNormal:D}=this.getCamera();if(D.filter(_=>Math.abs(_)>o0).length>1)throw new Error("getSliceInfo is not supported for oblique views");const T=D.findIndex(_=>Math.abs(_)>1-o0);if(T===-1)throw new Error("Unable to determine slice axis");const y=Gt(o,S)+1,M=Gt(s,S)+1;return{sliceIndex:this.getSliceIndex(),width:y,height:M,slicePlane:T,sliceToIndexMatrix:C,indexToSliceMatrix:I}}getCurrentSlicePixelData(){const{voxelManager:e}=this.getImageData();return e.getSliceData(this.getSliceViewInfo())}getViewReference(e={}){const n=super.getViewReference(e);if(!(n!=null&&n.volumeId))return;const r=Ye.getVolume(n.volumeId);return n.referencedImageId=jc(r,n.cameraFocalPoint,n.viewPlaneNormal),n}resetProperties(e){this._resetProperties(e)}_resetProperties(e){const n=e?this.getActor(e):this.getDefaultActor();if(!n)throw new Error(`No actor found for the given volumeId: ${e}`);n.slabThickness&&(n.slabThickness=wa.MINIMUM_SLAB_THICKNESS,this.viewportProperties.slabThickness=void 0,this.updateClippingPlanesForActors(this.getCamera())),e||(e=this.getVolumeId());const r=Ye.getVolume(e);if(!r)throw new Error(`imageVolume with id: ${e} does not exist in cache`);if(W5(n.actor,r),A0(n)){const l=n.actor.getProperty().getRGBTransferFunction(0);CI(l,this.initialTransferFunctionNodes)}const a={...super.getVOIModifiedEventDetail(e)};this.resetCamera({resetPan:!0,resetZoom:!0,resetToCenter:!0,resetCameraRotation:!0}),Dt(this.element,vt.VOI_MODIFIED,a)}getSlicesClippingPlanes(){const e=this.getSlicePlaneCoordinates(),{viewPlaneNormal:n}=this.getCamera(),r=wa.MINIMUM_SLAB_THICKNESS;return e.map(({point:a,sliceIndex:i})=>{const o=[Ji.newInstance(),Ji.newInstance()];return this.setOrientationOfClippingPlanes(o,r,n,a),{sliceIndex:i,planes:o.map(s=>({normal:s.getNormal(),origin:s.getOrigin()}))}})}}function yce(t,e){e.classHierarchy.push("vtkAbstractImageMapper"),t.getIsOpaque=()=>!0,t.getCurrentImage=()=>null,t.getBoundsForSlice=()=>(J.vtkErrorMacro("vtkAbstractImageMapper.getBoundsForSlice - NOT IMPLEMENTED"),nu())}const Mce={slice:0,customDisplayExtent:[0,0,0,0,0,0],useCustomExtents:!1,backgroundColor:[0,0,0,1]};function _ce(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Mce,n),m5.extend(t,e,n),J.setGet(t,e,["slice","useCustomExtents"]),J.setGetArray(t,e,["customDisplayExtent"],6),J.setGetArray(t,e,["backgroundColor"],4),yce(t,e)}var Oce={extend:_ce};function rF(t,e,n){const r=n.getCurrentImage(),a=r.getExtent(),i=[a[0],a[2],a[4]],{ijkMode:o}=n.getClosestIJKAxis();let s=n.isA("vtkImageArrayMapper")?n.getSubSlice():n.getSlice();o!==n.getSlicingMode()&&(s=n.getSliceAtPosition(s)),i[o]+=s;const c=[0,0,0];r.indexToWorld(i,c),i[o]+=1;const l=[0,0,0];r.indexToWorld(i,l),l[0]-=c[0],l[1]-=c[1],l[2]-=c[2],Ar(l,l);const u=Ji.intersectWithLine(t,e,c,l);if(u.intersection){const f=u.x,v=[0,0,0];return r.worldToIndex(f,v),{t:u.t,absoluteIJK:v}}return null}function wce(t,e,n){const r=rF(t,e,n);if(r){const i=n.getCurrentImage().getExtent(),o=[Math.round(r.absoluteIJK[0]),Math.round(r.absoluteIJK[1]),Math.round(r.absoluteIJK[2])];return o[0]<i[0]||o[0]>i[1]||o[1]<i[2]||o[1]>i[3]||o[2]<i[4]||o[2]>i[5]?null:{t:r.t,ijk:o}}return null}function Pce(t,e,n){const r=rF(t,e,n);if(r){const i=n.getCurrentImage().getExtent(),o=r.absoluteIJK,s=[Math.floor(o[0]),Math.floor(o[1]),Math.floor(o[2])];if(s[0]<i[0]||s[0]>i[1]-1||s[1]<i[2]||s[1]>i[3]-1||s[2]<i[4]||s[2]>(i[5]?i[5]-1:i[5]))return null;const c=[o[0]-s[0],o[1]-s[1],o[2]-s[2]];return{t:r.t,ijk:s,pCoords:c}}return null}const{staticOffsetAPI:Ace,otherStaticMethods:xce}=vI,{SlicingMode:lr}=dI;function Rce(t,e){e.classHierarchy.push("vtkImageMapper"),t.getSliceAtPosition=r=>{const a=t.getCurrentImage();let i;if(r.length===3)i=r;else if(Number.isFinite(r)){const u=a.getBounds();switch(e.slicingMode){case lr.X:i=[r,(u[3]+u[2])/2,(u[5]+u[4])/2];break;case lr.Y:i=[(u[1]+u[0])/2,r,(u[5]+u[4])/2];break;case lr.Z:i=[(u[1]+u[0])/2,(u[3]+u[2])/2,r];break}}const o=[0,0,0];a.worldToIndex(i,o);const s=a.getExtent(),{ijkMode:c}=t.getClosestIJKAxis();let l=0;switch(c){case lr.I:l=e0(o[0],s[0],s[1]);break;case lr.J:l=e0(o[1],s[2],s[3]);break;case lr.K:l=e0(o[2],s[4],s[5]);break;default:return 0}return l},t.setSliceFromCamera=r=>{const a=r.getFocalPoint();switch(e.slicingMode){case lr.I:case lr.J:case lr.K:{const i=t.getSliceAtPosition(a);t.setSlice(i)}break;case lr.X:t.setSlice(a[0]);break;case lr.Y:t.setSlice(a[1]);break;case lr.Z:t.setSlice(a[2]);break}},t.setXSlice=r=>{t.setSlicingMode(lr.X),t.setSlice(r)},t.setYSlice=r=>{t.setSlicingMode(lr.Y),t.setSlice(r)},t.setZSlice=r=>{t.setSlicingMode(lr.Z),t.setSlice(r)},t.setISlice=r=>{t.setSlicingMode(lr.I),t.setSlice(r)},t.setJSlice=r=>{t.setSlicingMode(lr.J),t.setSlice(r)},t.setKSlice=r=>{t.setSlicingMode(lr.K),t.setSlice(r)},t.getSlicingModeNormal=()=>{const r=[0,0,0],a=t.getCurrentImage().getDirection();switch(e.slicingMode){case lr.X:r[0]=1;break;case lr.Y:r[1]=1;break;case lr.Z:r[2]=1;break;case lr.I:P2(a,[1,0,0],r);break;case lr.J:P2(a,[0,1,0],r);break;case lr.K:P2(a,[0,0,1],r);break}return r};function n(){let r;switch(e.slicingMode){case lr.X:r=0;break;case lr.Y:r=1;break;case lr.Z:r=2;break;default:e.closestIJKAxis={ijkMode:e.slicingMode,flip:!1};return}const a=t.getCurrentImage().getDirection(),i=Gb(a);let o=0;for(;o<3&&i[r+3*o]===0;++o);const s=i[r+3*o]<0;e.closestIJKAxis={ijkMode:o,flip:s}}t.setSlicingMode=r=>{e.slicingMode!==r&&(e.slicingMode=r,t.getCurrentImage()&&n(),t.modified())},t.getClosestIJKAxis=()=>((e.closestIJKAxis===void 0||e.closestIJKAxis.ijkMode===lr.NONE)&&t.getCurrentImage()&&n(),e.closestIJKAxis),t.getBounds=()=>{const r=t.getCurrentImage();if(!r)return nu();if(!e.useCustomExtents)return r.getBounds();const a=e.customDisplayExtent.slice(),{ijkMode:i}=t.getClosestIJKAxis();let o=e.slice;switch(i!==e.slicingMode&&(o=t.getSliceAtPosition(e.slice)),i){case lr.I:a[0]=o,a[1]=o;break;case lr.J:a[2]=o,a[3]=o;break;case lr.K:a[4]=o,a[5]=o;break}return r.extentToBounds(a)},t.getBoundsForSlice=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.slice,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const i=t.getCurrentImage();if(!i)return nu();const o=i.getSpatialExtent(),{ijkMode:s}=t.getClosestIJKAxis();let c=r;switch(s!==e.slicingMode&&(c=t.getSliceAtPosition(r)),s){case lr.I:o[0]=c-a,o[1]=c+a;break;case lr.J:o[2]=c-a,o[3]=c+a;break;case lr.K:o[4]=c-a,o[5]=c+a;break}return i.extentToBounds(o)},t.intersectWithLineForPointPicking=(r,a)=>wce(r,a,t),t.intersectWithLineForCellPicking=(r,a)=>Pce(r,a,t),t.getCurrentImage=()=>t.getInputData()}const bce={slicingMode:lr.NONE,closestIJKAxis:{ijkMode:lr.NONE,flip:!1},renderToRectangle:!1,sliceAtFocalPoint:!1,preferSizeOverAccuracy:!1};function aF(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,bce,n),Oce.extend(t,e,n),J.get(t,e,["slicingMode"]),J.setGet(t,e,["closestIJKAxis","renderToRectangle","sliceAtFocalPoint","preferSizeOverAccuracy"]),vI.implementCoincidentTopologyMethods(t,e),Rce(t,e)}const Nce=J.newInstance(aF,"vtkImageMapper");var Lce={newInstance:Nce,extend:aF,...Ace,...xce,...dI};const{InterpolationType:$2}=Dne,{vtkErrorMacro:xw}=J,z2=4;function Uce(t,e){e.classHierarchy.push("vtkImageProperty"),t.getMTime=()=>{let n=e.mtime,r;for(let a=0;a<z2;a++)e.componentData[a].rGBTransferFunction&&(r=e.componentData[a].rGBTransferFunction.getMTime(),n=n>r?n:r),e.componentData[a].piecewiseFunction&&(r=e.componentData[a].piecewiseFunction.getMTime(),n=n>r?n:r);return n},t.setRGBTransferFunction=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,a=n,i=r;return Number.isInteger(n)||(i=n,a=0),e.componentData[a].rGBTransferFunction!==i?(e.componentData[a].rGBTransferFunction=i,t.modified(),!0):!1},t.getRGBTransferFunction=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.componentData[n].rGBTransferFunction},t.setPiecewiseFunction=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,a=n,i=r;return Number.isInteger(n)||(i=n,a=0),e.componentData[a].piecewiseFunction!==i?(e.componentData[a].piecewiseFunction=i,t.modified(),!0):!1},t.getPiecewiseFunction=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.componentData[n].piecewiseFunction},t.setScalarOpacity=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,a=n,i=r;return Number.isInteger(n)||(i=n,a=0),t.setPiecewiseFunction(a,i)},t.getScalarOpacity=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return t.getPiecewiseFunction(n)},t.setComponentWeight=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;if(n<0||n>=z2)return xw("Invalid index"),!1;const a=Math.min(1,Math.max(0,r));return e.componentData[n].componentWeight!==a?(e.componentData[n].componentWeight=a,t.modified(),!0):!1},t.getComponentWeight=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return n<0||n>=z2?(xw("Invalid index"),0):e.componentData[n].componentWeight},t.setInterpolationTypeToNearest=()=>t.setInterpolationType($2.NEAREST),t.setInterpolationTypeToLinear=()=>t.setInterpolationType($2.LINEAR),t.getInterpolationTypeAsString=()=>J.enumToString($2,e.interpolationType)}const Fce={independentComponents:!1,interpolationType:$2.LINEAR,colorWindow:255,colorLevel:127.5,ambient:1,diffuse:0,opacity:1,useLookupTableScalarRange:!1,useLabelOutline:!1,labelOutlineThickness:[1],labelOutlineOpacity:1};function iF(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Object.assign(e,Fce,n),J.obj(t,e),!e.componentData){e.componentData=[];for(let r=0;r<z2;r++)e.componentData.push({rGBTransferFunction:null,piecewiseFunction:null,componentWeight:1})}J.setGet(t,e,["independentComponents","interpolationType","colorWindow","colorLevel","ambient","diffuse","opacity","useLookupTableScalarRange","useLabelOutline","labelOutlineOpacity"]),J.setGetArray(t,e,["labelOutlineThickness"]),Uce(t,e)}const Vce=J.newInstance(iF,"vtkImageProperty");var kce={newInstance:Vce,extend:iF};const{vtkDebugMacro:Gce}=J;function Bce(t,e){e.classHierarchy.push("vtkImageSlice"),t.getActors=()=>t,t.getImages=()=>t,t.getIsOpaque=()=>{if(e.forceOpaque)return!0;if(e.forceTranslucent)return!1;e.property||t.getProperty();let n=e.property.getOpacity()>=1;return n=n&&(!e.mapper||e.mapper.getIsOpaque()),n},t.hasTranslucentPolygonalGeometry=()=>!1,t.makeProperty=kce.newInstance,t.getProperty=()=>(e.property===null&&(e.property=t.makeProperty()),e.property),t.getBounds=()=>{if(e.mapper===null)return e.bounds;const n=e.mapper.getBounds();if(!n||n.length!==6)return n;if(n[0]>n[1])return e.mapperBounds=n.concat(),e.bounds=[1,-1,1,-1,1,-1],e.boundsMTime.modified(),n;const r=a=>a[0].map((i,o)=>a.map(s=>s[o]));if(!e.mapperBounds||!r([n,e.mapperBounds]).reduce((a,i)=>a&&i[0]===i[1],!0)||t.getMTime()>e.boundsMTime.getMTime()){Gce("Recomputing bounds..."),e.mapperBounds=n.map(i=>i),t.computeMatrix();const a=new Float64Array(16);$n(a,e.matrix),Pr.transformBounds(n,a,e.bounds),e.boundsMTime.modified()}return e.bounds},t.getBoundsForSlice=(n,r)=>{const a=e.mapper.getBoundsForSlice(n,r);if(!Pr.isValid(a))return a;t.computeMatrix();const i=new Float64Array(16);return $n(i,e.matrix),Pr.transformBounds(a,i)},t.getMinXBound=()=>t.getBounds()[0],t.getMaxXBound=()=>t.getBounds()[1],t.getMinYBound=()=>t.getBounds()[2],t.getMaxYBound=()=>t.getBounds()[3],t.getMinZBound=()=>t.getBounds()[4],t.getMaxZBound=()=>t.getBounds()[5],t.getMTime=()=>{let n=e.mtime;if(e.property!==null){const r=e.property.getMTime();n=r>n?r:n}return n},t.getRedrawMTime=()=>{let n=e.mtime;if(e.mapper!==null){let r=e.mapper.getMTime();n=r>n?r:n,e.mapper.getInput()!==null&&(e.mapper.getInputAlgorithm().update(),r=e.mapper.getInput().getMTime(),n=r>n?r:n)}if(e.property!==null){let r=e.property.getMTime();n=r>n?r:n,e.property.getRGBTransferFunction()!==null&&(r=e.property.getRGBTransferFunction().getMTime(),n=r>n?r:n)}return n},t.getSupportsSelection=()=>e.mapper?e.mapper.getSupportsSelection():!1}const Wce={mapper:null,property:null,bounds:[...Pr.INIT_BOUNDS]};function oF(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Wce,n),M5.extend(t,e,n),e.boundsMTime={},J.obj(e.boundsMTime),J.set(t,e,["property"]),J.setGet(t,e,["mapper"]),J.getArray(t,e,["bounds"],6),Bce(t,e)}const Hce=J.newInstance(oF,"vtkImageSlice");var $ce={newInstance:Hce,extend:oF};function sF(t){const e=iu.newInstance();let n=0,r=1024;return t.lower!==void 0&&t.upper!==void 0&&(n=t.lower,r=t.upper),e.addRGBPoint(n,0,0,0),e.addRGBPoint(r,1,1,1),e}function TI(t,e){const n=e.voxelManager.getScalarData();if(!t.getPointData)return;const r=t.getPointData().getScalars().getData();if(e.color&&e.rgba){const a=new Uint8Array(e.columns*e.rows*3);for(let i=0;i<e.columns*e.rows;i++)a[i*3]=n[i*4],a[i*3+1]=n[i*4+1],a[i*3+2]=n[i*4+2];e.rgba=!1,e.getPixelData=()=>a,r.set(a)}else r.set(n);t.modified()}function zn(){return window.performance?performance.now():Date.now()}function zce(t,e){return function(n){const r=((n-(e-.5))/(t-1)+.5)*255;return Math.min(Math.max(r,0),255)}}function qce(t){const n=Math.max(...t.lut).toString(2).length-8,r=t.lut[0]>>n,a=t.lut[t.lut.length-1]>>n,i=t.firstValueMapped+t.lut.length-1;return function(o){return o<t.firstValueMapped?r:o>=i?a:t.lut[o-t.firstValueMapped]>>n}}function cF(t,e,n){return n?qce(n):zce(t,e)}function jce(t,e,n,r,a){const i=t.maxPixelValue,o=t.minPixelValue,s=Math.min(o,0);if(t.cachedLut===void 0){const u=i-s+1;t.cachedLut={},t.cachedLut.lutArray=new Uint8ClampedArray(u)}const c=t.cachedLut.lutArray,l=cF(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n,a);if(r)for(let u=o;u<=i;u++)c[u+-s]=255-l(u);else for(let u=o;u<=i;u++)c[u+-s]=l(u);return c}function Qce(t,e,n){let r=zn();const a=t.voxelManager.getScalarData();t.stats.lastGetPixelDataTime=zn()-r;const i=t.minPixelValue;let o=0,s=0;const c=a.length;if(r=zn(),i<0)for(;s<c;)n[o++]=e[a[s++]+-i],n[o++]=e[a[s++]+-i],n[o]=e[a[s]+-i],s+=2,o+=2;else for(;s<c;)n[o++]=e[a[s++]],n[o++]=e[a[s++]],n[o]=e[a[s]],s+=2,o+=2;t.stats.lastStoredPixelDataToCanvasImageDataTime=zn()-r}function Kce(t,e,n){let r=zn();const a=t.getPixelData();t.stats.lastGetPixelDataTime=zn()-r;const i=t.minPixelValue;let o=0,s=0;const c=a.length;if(r=zn(),i<0)for(;s<c;)n[o++]=e[a[s++]+-i],n[o++]=e[a[s++]+-i],n[o++]=e[a[s++]+-i],n[o++]=a[s++];else for(;s<c;)n[o++]=e[a[s++]],n[o++]=e[a[s++]],n[o++]=e[a[s++]],n[o++]=a[s++];t.stats.lastStoredPixelDataToCanvasImageDataTime=zn()-r}class kv{constructor(){this.reset()}getMatrix(){return this.m}reset(){this.m=[1,0,0,1,0,0]}clone(){const e=new kv;return e.m[0]=this.m[0],e.m[1]=this.m[1],e.m[2]=this.m[2],e.m[3]=this.m[3],e.m[4]=this.m[4],e.m[5]=this.m[5],e}multiply(e){const n=this.m[0]*e[0]+this.m[2]*e[1],r=this.m[1]*e[0]+this.m[3]*e[1],a=this.m[0]*e[2]+this.m[2]*e[3],i=this.m[1]*e[2]+this.m[3]*e[3],o=this.m[0]*e[4]+this.m[2]*e[5]+this.m[4],s=this.m[1]*e[4]+this.m[3]*e[5]+this.m[5];this.m[0]=n,this.m[1]=r,this.m[2]=a,this.m[3]=i,this.m[4]=o,this.m[5]=s}invert(){const e=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),n=this.m[3]*e,r=-this.m[1]*e,a=-this.m[2]*e,i=this.m[0]*e,o=e*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),s=e*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);this.m[0]=n,this.m[1]=r,this.m[2]=a,this.m[3]=i,this.m[4]=o,this.m[5]=s}rotate(e){const n=Math.cos(e),r=Math.sin(e),a=this.m[0]*n+this.m[2]*r,i=this.m[1]*n+this.m[3]*r,o=this.m[0]*-r+this.m[2]*n,s=this.m[1]*-r+this.m[3]*n;this.m[0]=a,this.m[1]=i,this.m[2]=o,this.m[3]=s}translate(e,n){this.m[4]+=this.m[0]*e+this.m[2]*n,this.m[5]+=this.m[1]*e+this.m[3]*n}scale(e,n){this.m[0]*=e,this.m[1]*=e,this.m[2]*=n,this.m[3]*=n}transformPoint(e){const n=e[0],r=e[1];return[n*this.m[0]+r*this.m[2]+this.m[4],n*this.m[1]+r*this.m[3]+this.m[5]]}}function om(t,e){const n=new kv;if(!t.viewport.displayedArea)return n;n.translate(t.canvas.width/2,t.canvas.height/2);const r=t.viewport.rotation;r!==0&&n.rotate(r*Math.PI/180);let a=t.viewport.scale,i=t.viewport.scale;const o=t.viewport.displayedArea.brhc.x-(t.viewport.displayedArea.tlhc.x-1),s=t.viewport.displayedArea.brhc.y-(t.viewport.displayedArea.tlhc.y-1);if(t.viewport.displayedArea.presentationSizeMode==="NONE")t.image.rowPixelSpacing<t.image.columnPixelSpacing?a*=t.image.columnPixelSpacing/t.image.rowPixelSpacing:t.image.columnPixelSpacing<t.image.rowPixelSpacing&&(i*=t.image.rowPixelSpacing/t.image.columnPixelSpacing);else if(a=t.viewport.displayedArea.columnPixelSpacing,i=t.viewport.displayedArea.rowPixelSpacing,t.viewport.displayedArea.presentationSizeMode==="SCALE TO FIT"){const c=t.canvas.height/(s*i),l=t.canvas.width/(o*a);a=i=Math.min(l,c),t.viewport.displayedArea.rowPixelSpacing<t.viewport.displayedArea.columnPixelSpacing?a*=t.viewport.displayedArea.columnPixelSpacing/t.viewport.displayedArea.rowPixelSpacing:t.viewport.displayedArea.columnPixelSpacing<t.viewport.displayedArea.rowPixelSpacing&&(i*=t.viewport.displayedArea.rowPixelSpacing/t.viewport.displayedArea.columnPixelSpacing)}return n.scale(a,i),r!==0&&n.rotate(-r*Math.PI/180),n.translate(t.viewport.translation.x,t.viewport.translation.y),r!==0&&n.rotate(r*Math.PI/180),t.viewport.hflip&&n.scale(-1,1),t.viewport.vflip&&n.scale(1,-1),n.translate(-o/2,-s/2),n}function H5(t,e,n){if(t===void 0)throw new Error("setToPixelCoordinateSystem: parameter enabledElement must not be undefined");if(e===void 0)throw new Error("setToPixelCoordinateSystem: parameter context must not be undefined");const a=om(t).getMatrix();e.setTransform(a[0],a[1],a[2],a[3],a[4],a[5])}function $5(t,e){const n=t.renderingTools.lastRenderedImageId,r=t.renderingTools.lastRenderedViewport;return e.imageId!==n||!r||r.windowCenter!==t.viewport.voi.windowCenter||r.windowWidth!==t.viewport.voi.windowWidth||r.invert!==t.viewport.invert||r.rotation!==t.viewport.rotation||r.hflip!==t.viewport.hflip||r.vflip!==t.viewport.vflip||r.modalityLUT!==t.viewport.modalityLUT||r.voiLUT!==t.viewport.voiLUT||r.colormap!==t.viewport.colormap}function KS(t,e){const n=t.renderingTools.renderCanvas;n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.fillStyle="white",r.fillRect(0,0,n.width,n.height);const a=r.getImageData(0,0,e.width,e.height);t.renderingTools.renderCanvasContext=r,t.renderingTools.renderCanvasData=a}function z5(t){const e=t.image.imageId,n=t.viewport,r=t.image.color;return t.renderingTools.lastRenderedImageId=e,t.renderingTools.lastRenderedIsColor=r,t.renderingTools.lastRenderedViewport={windowCenter:n.voi.windowCenter,windowWidth:n.voi.windowWidth,invert:n.invert,rotation:n.rotation,hflip:n.hflip,vflip:n.vflip,modalityLUT:n.modalityLUT,voiLUT:n.voiLUT,colormap:n.colormap},t.renderingTools}function Xce(t,e){return t.cachedLut!==void 0&&t.cachedLut.windowCenter===e.voi.windowCenter&&t.cachedLut.windowWidth===e.voi.windowWidth&&t.cachedLut.invert===e.invert||(jce(t,e.voi.windowWidth,e.voi.windowCenter,e.invert),t.cachedLut.windowWidth=e.voi.windowWidth,t.cachedLut.windowCenter=e.voi.windowCenter,t.cachedLut.invert=e.invert),t.cachedLut.lutArray}function Yce(t,e,n){const r=t.renderingTools.lastRenderedIsColor;(!t.renderingTools.renderCanvas||!r)&&(t.renderingTools.renderCanvas=document.createElement("canvas"));const a=t.renderingTools.renderCanvas,{windowWidth:i,windowCenter:o}=t.viewport.voi;if((i===256||i===255)&&(o===128||o===127)&&!t.viewport.invert&&e.getCanvas&&e.getCanvas())return e.getCanvas();if(!$5(t,e)&&!n)return a;(a.width!==e.width||a.height!==e.height)&&KS(t,e);let s=zn();const c=Xce(e,t.viewport);e.stats=e.stats||{},e.stats.lastLutGenerateTime=zn()-s;const l=t.renderingTools.renderCanvasData,u=t.renderingTools.renderCanvasContext;return e.rgba?Kce(e,c,l.data):Qce(e,c,l.data),s=zn(),u.putImageData(l,0,0),e.stats.lastPutImageDataTime=zn()-s,a}function Zce(t,e){if(t===void 0)throw new Error("renderColorImage: enabledElement parameter must not be undefined");const n=t.image;if(n===void 0)throw new Error("renderColorImage: image must be loaded before it can be drawn");const r=t.canvas.getContext("2d");r.setTransform(1,0,0,1,0,0),r.fillStyle="black",r.fillRect(0,0,t.canvas.width,t.canvas.height),r.imageSmoothingEnabled=!t.viewport.pixelReplication,H5(t,r);const a=Yce(t,n,e),i=t.viewport.displayedArea.tlhc.x-1,o=t.viewport.displayedArea.tlhc.y-1,s=t.viewport.displayedArea.brhc.x-i,c=t.viewport.displayedArea.brhc.y-o;r.drawImage(a,i,o,s,c,0,0,s,c),t.renderingTools=z5(t)}function Jce(t,e,n){let r=zn();const a=t.voxelManager.getScalarData();t.stats.lastGetPixelDataTime=zn()-r;const i=a.length,o=t.minPixelValue;let s=3,c=0;if(r=zn(),a instanceof Int16Array)if(o<0)for(;c<i;)n[s]=e[a[c++]+-o],s+=4;else for(;c<i;)n[s]=e[a[c++]],s+=4;else if(a instanceof Uint16Array)for(;c<i;)n[s]=e[a[c++]],s+=4;else if(o<0)for(;c<i;)n[s]=e[a[c++]+-o],s+=4;else for(;c<i;)n[s]=e[a[c++]],s+=4;t.stats.lastStoredPixelDataToCanvasImageDataTime=zn()-r}function ele(t,e,n){let r=zn();const a=t.voxelManager.getScalarData();t.stats.lastGetPixelDataTime=zn()-r;const i=a.length;let o=3,s=0;for(r=zn();s<i;)n[o]=e(a[s++]),o+=4;t.stats.lastStoredPixelDataToCanvasImageDataTime=zn()-r}function tle(t,e,n){let r=zn();const a=t.voxelManager.getScalarData();t.stats.lastGetPixelDataTime=zn()-r;const i=a.length,o=t.minPixelValue;let s=0,c=0,l;if(r=zn(),a instanceof Int16Array)if(o<0)for(;c<i;)l=e[a[c++]+-o],n[s++]=l,n[s++]=l,n[s++]=l,n[s++]=255;else for(;c<i;)l=e[a[c++]],n[s++]=l,n[s++]=l,n[s++]=l,n[s++]=255;else if(a instanceof Uint16Array)for(;c<i;)l=e[a[c++]],n[s++]=l,n[s++]=l,n[s++]=l,n[s++]=255;else if(o<0)for(;c<i;)l=e[a[c++]+-o],n[s++]=l,n[s++]=l,n[s++]=l,n[s++]=255;else for(;c<i;)l=e[a[c++]],n[s++]=l,n[s++]=l,n[s++]=l,n[s++]=255;t.stats.lastStoredPixelDataToCanvasImageDataTime=zn()-r}function nle(t,e){if(rle(t))return;const n=e.maxPixelValue*e.slope+e.intercept,r=e.minPixelValue*e.slope+e.intercept,a=n-r,i=(n+r)/2;t.voi===void 0?t.voi={windowWidth:a,windowCenter:i,voiLUTFunction:e.voiLUTFunction}:(t.voi.windowWidth=a,t.voi.windowCenter=i)}function rle(t){return t.voiLUT&&t.voiLUT.lut&&t.voiLUT.lut.length>0||t.voi.windowWidth!==void 0&&t.voi.windowCenter!==void 0}function Rw(t,e){return!t&&!e?!0:!t||!e?!1:t.id===e.id}function ale(t,e){return n=>n*t+e}function ile(t){const e=t.lut[0],n=t.lut[t.lut.length-1],r=t.firstValueMapped+t.lut.length;return a=>a<t.firstValueMapped?e:a>=r?n:t.lut[a]}function ole(t,e,n){return n?ile(n):ale(t,e)}function sle(t,e,n,r,a,i){const o=t.maxPixelValue,s=t.minPixelValue,c=Math.min(s,0);if(t.cachedLut===void 0){const v=o-c+1;t.cachedLut={},t.cachedLut.lutArray=new Uint8ClampedArray(v)}const l=t.cachedLut.lutArray,u=ole(t.slope,t.intercept,a),f=cF(e,n,i);if(t.isPreScaled)if(r)for(let v=s;v<=o;v++)l[v+-c]=255-f(v);else for(let v=s;v<=o;v++)l[v+-c]=f(v);else if(r)for(let v=s;v<=o;v++)l[v+-c]=255-f(u(v));else for(let v=s;v<=o;v++)l[v+-c]=f(u(v));return l}function lF(t,e,n){return t.cachedLut!==void 0&&t.cachedLut.windowCenter===e.voi.windowCenter&&t.cachedLut.windowWidth===e.voi.windowWidth&&Rw(t.cachedLut.modalityLUT,e.modalityLUT)&&Rw(t.cachedLut.voiLUT,e.voiLUT)&&t.cachedLut.invert===e.invert&&!n||(nle(e,t),sle(t,e.voi.windowWidth,e.voi.windowCenter,e.invert,e.modalityLUT,e.voiLUT),t.cachedLut.windowWidth=e.voi.windowWidth,t.cachedLut.windowCenter=e.voi.windowCenter,t.cachedLut.invert=e.invert,t.cachedLut.voiLUT=e.voiLUT,t.cachedLut.modalityLUT=e.modalityLUT),t.cachedLut.lutArray}function cle(t,e,n,r=!0){const a=t.renderingTools.lastRenderedIsColor;(!t.renderingTools.renderCanvas||a)&&(t.renderingTools.renderCanvas=document.createElement("canvas"),KS(t,e));const i=t.renderingTools.renderCanvas;if(!$5(t,e)&&!n)return i;(i.width!==e.width||i.height!==e.height)&&KS(t,e),e.stats=e.stats||{};const o=t.renderingTools.renderCanvasData,s=t.renderingTools.renderCanvasContext;let c=zn();e.stats.lastLutGenerateTime=zn()-c;const{viewport:l}=t;if(l.modality==="PT"&&e.isPreScaled){const{windowWidth:u,windowCenter:f}=l.voi,v=f-u/2,m=255/(f+u/2-v);let h;l.invert?h=C=>255-(C-v)*m:h=C=>(C-v)*m,ele(e,h,o.data)}else{const u=lF(e,l,n);r?Jce(e,u,o.data):tle(e,u,o.data)}return c=zn(),s.putImageData(o,0,0),e.stats.lastPutImageDataTime=zn()-c,i}function lle(t,e){if(t===void 0)throw new Error("drawImage: enabledElement parameter must not be undefined");const n=t.image;if(n===void 0)throw new Error("drawImage: image must be loaded before it can be drawn");const r=t.canvas.getContext("2d");r.setTransform(1,0,0,1,0,0),r.fillStyle="black",r.fillRect(0,0,t.canvas.width,t.canvas.height),r.imageSmoothingEnabled=!t.viewport.pixelReplication,H5(t,r);const a=cle(t,n,e),i=t.viewport.displayedArea.tlhc.x-1,o=t.viewport.displayedArea.tlhc.y-1,s=t.viewport.displayedArea.brhc.x-i,c=t.viewport.displayedArea.brhc.y-o;r.drawImage(a,i,o,s,c,0,0,s,c),t.renderingTools=z5(t)}const zT=0,qT=1,ule=2;function fle(t,e,n){if(t>1)throw new Error("HSVToRGB expects hue < 1");const r=[];if(e===0)return r[0]=n,r[1]=n,r[2]=n,r;const a=Math.floor(t*6),i=6*t-a,o=n*(1-e),s=n*(1-e*i),c=n*(1-e*(1-i));switch(a){case 0:case 6:r[0]=n,r[1]=c,r[2]=o;break;case 1:r[0]=s,r[1]=n,r[2]=o;break;case 2:r[0]=o,r[1]=n,r[2]=c;break;case 3:r[0]=o,r[1]=s,r[2]=n;break;case 4:r[0]=c,r[1]=o,r[2]=n;break;case 5:r[0]=n,r[1]=o,r[2]=s;break}return r}function vle(t,e){let n;return t<e.Range[0]?n=e.MaxIndex+zT+1.5:t>e.Range[1]?n=e.MaxIndex+qT+1.5:n=(t+e.Shift)*e.Scale,Math.floor(n)}class q5{constructor(){this.NumberOfColors=256,this.Ramp="linear",this.TableRange=[0,255],this.HueRange=[0,.66667],this.SaturationRange=[1,1],this.ValueRange=[1,1],this.AlphaRange=[1,1],this.NaNColor=[128,0,0,255],this.BelowRangeColor=[0,0,0,255],this.UseBelowRangeColor=!0,this.AboveRangeColor=[255,255,255,255],this.UseAboveRangeColor=!0,this.InputRange=[0,255],this.Table=[]}setNumberOfTableValues(e){this.NumberOfColors=e}setRamp(e){this.Ramp=e}setTableRange(e,n){this.TableRange[0]=e,this.TableRange[1]=n}setHueRange(e,n){this.HueRange[0]=e,this.HueRange[1]=n}setSaturationRange(e,n){this.SaturationRange[0]=e,this.SaturationRange[1]=n}setValueRange(e,n){this.ValueRange[0]=e,this.ValueRange[1]=n}setRange(e,n){this.InputRange[0]=e,this.InputRange[1]=n}setAlphaRange(e,n){this.AlphaRange[0]=e,this.AlphaRange[1]=n}getColor(e){return this.mapValue(e)}build(e){if(this.Table.length>1&&!e)return;this.Table=[];const n=this.NumberOfColors-1;let r,a,i,o;n?(r=(this.HueRange[1]-this.HueRange[0])/n,a=(this.SaturationRange[1]-this.SaturationRange[0])/n,i=(this.ValueRange[1]-this.ValueRange[0])/n,o=(this.AlphaRange[1]-this.AlphaRange[0])/n):r=a=i=o=0;for(let s=0;s<=n;s++){const c=this.HueRange[0]+s*r,l=this.SaturationRange[0]+s*a,u=this.ValueRange[0]+s*i,f=this.AlphaRange[0]+s*o,v=fle(c,l,u),g=[0,0,0,0];switch(this.Ramp){case"scurve":g[0]=Math.floor(127.5*(1+Math.cos((1-v[0])*Math.PI))),g[1]=Math.floor(127.5*(1+Math.cos((1-v[1])*Math.PI))),g[2]=Math.floor(127.5*(1+Math.cos((1-v[2])*Math.PI))),g[3]=Math.floor(f*255);break;case"linear":g[0]=Math.floor(v[0]*255+.5),g[1]=Math.floor(v[1]*255+.5),g[2]=Math.floor(v[2]*255+.5),g[3]=Math.floor(f*255+.5);break;case"sqrt":g[0]=Math.floor(Math.sqrt(v[0])*255+.5),g[1]=Math.floor(Math.sqrt(v[1])*255+.5),g[2]=Math.floor(Math.sqrt(v[2])*255+.5),g[3]=Math.floor(Math.sqrt(f)*255+.5);break;default:throw new Error(`Invalid Ramp value (${this.Ramp})`)}this.Table.push(g)}this.buildSpecialColors()}buildSpecialColors(){const e=this.NumberOfColors,n=e+zT,r=e+qT,a=e+ule;this.UseBelowRangeColor||e===0?this.Table[n]=this.BelowRangeColor:this.Table[n]=this.Table[0],this.UseAboveRangeColor||e===0?this.Table[r]=this.AboveRangeColor:this.Table[r]=this.Table[e-1],this.Table[a]=this.NaNColor}mapValue(e){const n=this.getIndex(e);if(n<0)return this.NaNColor;if(n===0){if(this.UseBelowRangeColor&&e<this.TableRange[0])return this.BelowRangeColor}else if(n===this.NumberOfColors-1&&this.UseAboveRangeColor&&e>this.TableRange[1])return this.AboveRangeColor;return this.Table[n]}getIndex(e){const n={Range:[],MaxIndex:this.NumberOfColors-1,Shift:-this.TableRange[0],Scale:1};if(this.TableRange[1]<=this.TableRange[0]?n.Scale=Number.MAX_VALUE:n.Scale=n.MaxIndex/(this.TableRange[1]-this.TableRange[0]),n.Range[0]=this.TableRange[0],n.Range[1]=this.TableRange[1],isNaN(e))return-1;let r=vle(e,n);return r===this.NumberOfColors+zT?r=0:r===this.NumberOfColors+qT&&(r=this.NumberOfColors-1),r}setTableValue(e,n,r,a,i){let o;if(typeof n=="number"&&r!==void 0&&a!==void 0&&i!==void 0)o=[n,r,a,i];else if(Array.isArray(n))o=n;else throw new Error("Invalid arguments for setTableValue");if(e<0)throw new Error(`Can't set the table value for negative index (${e})`);if(e>=this.NumberOfColors)throw new Error(`Index ${e} is greater than the number of colors ${this.NumberOfColors}`);this.Table[e]=o,(e===0||e===this.NumberOfColors-1)&&this.buildSpecialColors()}}const bw=[0,0,0,0];function gle(t,e,n){n=n===null?100:n;const r=(e-t)/(n-1),a=[];for(;n-- >0;)a.push(t),t+=r;return a[a.length-1]=e,a}function dle(t,e){let n=0,r=t.length-1;for(;n<=r;){const a=n+Math.floor((r-n)/2),i=t[a];if(i===e)return a;e<i?r=a-1:n=a+1}return n}function mle(t,e){let n;const r=[],a=e.length;for(t.sort(function(i,o){return i-o}),n=0;n<a;n++)r[n]=dle(t,e[n]);return r}function gE(t,e,n){let r;const a=[],i=[],o=[],s=[];for(n=n===null?1:n,r=0;r<e.length;r++){const u=e[r];a.push((t-1)*u[0]),i.push(u[1]),o.push(u[1])}const c=gle(0,1,t);for(r=0;r<t;r++)c[r]=(t-1)*Math.pow(c[r],n);const l=mle(a,c);for(r=1;r<t-1;r++){const u=l[r],f=(c[r]-a[u-1])/(a[u]-a[u-1]),v=i[u]-o[u-1];s[r]=f*v+o[u-1]}return s[0]=o[0],s[t-1]=i[e.length-1],s}function hle(t,e,n){let r;const a=[];e=e===null?256:e,n=n===null?1:n;const i=gE(e,t.red,n),o=gE(e,t.green,n),s=gE(e,t.blue,n);for(r=0;r<e;r++){const c=Math.round(i[r]*255),l=Math.round(o[r]*255),u=Math.round(s[r]*255),f=[c,l,u,255];a.push(f)}return a}function ple(t,e){let n=dT[t];return n||(n=dT[t]={name:"",colors:[]}),!n.colors&&n.segmentedData&&(n.colors=hle(n.segmentedData,n.numColors,n.gamma)),{getId(){return t},getColorSchemeName(){return n.name},setColorSchemeName(a){n.name=a},getNumberOfColors(){return n.colors.length},setNumberOfColors(a){for(;n.colors.length<a;)n.colors.push(bw);n.colors.length=a},getColor(a){return this.isValidIndex(a)?n.colors[a]:bw},getColorRepeating(a){const i=n.colors.length;return a=i?a%i:0,this.getColor(a)},setColor(a,i){this.isValidIndex(a)&&(n.colors[a]=i)},addColor(a){n.colors.push(a)},insertColor(a,i){this.isValidIndex(a)&&n.colors.splice(a,1,i)},removeColor(a){this.isValidIndex(a)&&n.colors.splice(a,1)},clearColors(){n.colors=[]},buildLookupTable(a){if(!a)return;const i=n.colors.length;a.setNumberOfTableValues(i);for(let o=0;o<i;o++)a.setTableValue(o,n.colors[o])},createLookupTable(){const a=new q5;return this.buildLookupTable(a),a},isValidIndex(a){return a>=0&&a<n.colors.length}}}function Sle(t,e,n,r){let a=zn();const i=t.voxelManager.getScalarData();t.stats.lastGetPixelDataTime=zn()-a;const o=i.length,s=t.minPixelValue;let c=0,l=0,u,f,v;if(a=zn(),n instanceof q5?v=n.Table:v=n,s<0)for(;l<o;)u=e[i[l++]+-s],f=v[u],r[c++]=f[0],r[c++]=f[1],r[c++]=f[2],r[c++]=f[3];else for(;l<o;)u=e[i[l++]],f=v[u],r[c++]=f[0],r[c++]=f[1],r[c++]=f[2],r[c++]=f[3];t.stats.lastStoredPixelDataToCanvasImageDataTime=zn()-a}function Cle(t,e,n,r){let a=zn();const i=t.voxelManager.getScalarData();t.stats.lastGetPixelDataTime=zn()-a;const o=i.length,s=t.minPixelValue;let c=0,l=0,u,f,v;if(a=zn(),n instanceof q5?v=n.Table:v=n,s<0)for(;l<o;)u=e(i[l++]+-s),f=v[u],r[c++]=f[0],r[c++]=f[1],r[c++]=f[2],r[c++]=f[3];else for(;l<o;)u=e(i[l++]),f=v[u],r[c++]=f[0],r[c++]=f[1],r[c++]=f[2],r[c++]=f[3];t.stats.lastStoredPixelDataToCanvasImageDataTime=zn()-a}function jT(t,e,n){return Math.max(e,Math.min(n,t))}function Ile(t,e,n){t.renderingTools.renderCanvas||(t.renderingTools.renderCanvas=document.createElement("canvas"));const r=t.renderingTools.renderCanvas;let a=t.viewport.colormap||t.options.colormap;if(t.options&&t.options.colormap&&console.warn("enabledElement.options.colormap is deprecated. Use enabledElement.viewport.colormap instead"),a&&typeof a=="string"&&(a=ple(a)),!a)throw new Error("renderPseudoColorImage: colormap not found.");const i=a.getId();if(!$5(t,e)&&!n&&t.renderingTools.colormapId===i)return r;(r.width!==e.width||r.height!==e.height)&&KS(t,e);let o=zn();(!t.renderingTools.colorLUT||n||t.renderingTools.colormapId!==i)&&(a.setNumberOfColors(256),t.renderingTools.colorLUT=a.createLookupTable(),t.renderingTools.colormapId=i);const s=t.renderingTools.renderCanvasData,c=t.renderingTools.renderCanvasContext,{viewport:l}=t,u=t.renderingTools.colorLUT;if(l.modality==="PT"){const{windowWidth:f,windowCenter:v}=l.voi,g=v-f/2,h=255/(v+f/2-g);let C;l.invert?C=p=>jT(Math.floor(255-(p-g)*h),0,255):C=p=>jT(Math.floor((p-g)*h),0,255),Cle(e,C,u,s.data)}else{const f=lF(e,t.viewport,n);e.stats=e.stats||{},e.stats.lastLutGenerateTime=zn()-o,Sle(e,f,u,s.data)}return o=zn(),c.putImageData(s,0,0),e.stats.lastPutImageDataTime=zn()-o,r}function Dle(t,e){if(t===void 0)throw new Error("drawImage: enabledElement parameter must not be undefined");const n=t.image;if(n===void 0)throw new Error("drawImage: image must be loaded before it can be drawn");const r=t.canvas.getContext("2d");r.setTransform(1,0,0,1,0,0),r.fillStyle="black",r.fillRect(0,0,t.canvas.width,t.canvas.height),r.imageSmoothingEnabled=!t.viewport.pixelReplication,H5(t,r);const a=Ile(t,n,e),i=t.viewport.displayedArea.tlhc.x-1,o=t.viewport.displayedArea.tlhc.y-1,s=t.viewport.displayedArea.brhc.x-i,c=t.viewport.displayedArea.brhc.y-o;r.drawImage(a,i,o,s,c,0,0,s,c),t.renderingTools=z5(t)}function uF(t,e){const n=t.image;if(!t.canvas||!t.image)return;const r=zn();if(n.stats={lastGetPixelDataTime:-1,lastStoredPixelDataToCanvasImageDataTime:-1,lastPutImageDataTime:-1,lastRenderTime:-1,lastLutGenerateTime:-1},n){let i=n.render;i||(t.viewport.colormap?i=Dle:n.color?i=Zce:i=lle),i(t,e)}const a=zn()-r;n.stats.lastRenderTime=a,t.invalid=!1,t.needsRedraw=!1}function fF(t){return om(t)}function yp(t,e){const n=fF(t);return n.invert(),n.transformPoint(e)}const Ele={viewport:{}};function Tle(){return{tlhc:{x:1,y:1},brhc:{x:1,y:1},rowPixelSpacing:1,columnPixelSpacing:1,presentationSizeMode:"NONE"}}function yle(){const t=Tle(),e={scale:1,translation:{x:0,y:0},voi:{windowWidth:void 0,windowCenter:void 0,voiLUTFunction:So.LINEAR},invert:!1,pixelReplication:!1,rotation:0,hflip:!1,vflip:!1,modalityLUT:void 0,voiLUT:void 0,colormap:void 0,labelmap:!1,displayedArea:t};return Object.assign({},e,Ele.viewport)}function hd(t,e){if(t==null)throw new Error(e)}function Mle(t){return!(t==null||t===0||t===180)}function vF(t,e=null){return hd(t,"getImageSize: parameter image must not be undefined"),hd(t.width,"getImageSize: parameter image must have width"),hd(t.height,"getImageSize: parameter image must have height"),Mle(e)?{height:t.width,width:t.height}:{width:t.width,height:t.height}}function j5(t,e,n=null){hd(t,"getImageScale: parameter canvas must not be undefined"),hd(e,"getImageScale: parameter image must not be undefined");const r=vF(e,n),a=e.rowPixelSpacing||1,i=e.columnPixelSpacing||1;let o=1,s=1;a<i?s=i/a:o=a/i;const c=t.height/r.height/o,l=t.width/r.width/s;return{verticalScale:c,horizontalScale:l,scaleFactor:Math.min(l,c)}}function gF(t,e,n,r){if(t===void 0)throw new Error("getDefaultViewport: parameter canvas must not be undefined");if(e===void 0)return yle();const a=j5(t,e,0).scaleFactor;let i;return n==="PT"&&e.isPreScaled?i={windowWidth:5,windowCenter:2.5}:e.windowWidth!==void 0&&e.windowCenter!==void 0&&(i={windowWidth:Array.isArray(e.windowWidth)?e.windowWidth[0]:e.windowWidth,windowCenter:Array.isArray(e.windowCenter)?e.windowCenter[0]:e.windowCenter}),{scale:a,translation:{x:0,y:0},voi:i,invert:e.invert,pixelReplication:!1,rotation:0,hflip:!1,vflip:!1,modalityLUT:e.modalityLUT,modality:n,voiLUT:e.voiLUT,colormap:r!==void 0?r:e.colormap,displayedArea:{tlhc:{x:1,y:1},brhc:{x:e.columns,y:e.rows},rowPixelSpacing:e.rowPixelSpacing===void 0?1:e.rowPixelSpacing,columnPixelSpacing:e.columnPixelSpacing===void 0?1:e.columnPixelSpacing,presentationSizeMode:"NONE"}}}function Nw(t,e){return fF(t).transformPoint(e)}function _le(t){const{image:e}=t;t.viewport.scale=j5(t.canvas,e,t.viewport.rotation).scaleFactor,t.viewport.translation.x=0,t.viewport.translation.y=0}function Ole(t){const{canvas:e}=t,{clientWidth:n,clientHeight:r}=e;(e.width!==n||e.height!==r)&&(e.width=n,e.height=r)}function wle(t,e,n){const r=t.viewport.scale,a=vF(t.image,t.viewport.rotation),i=Math.round(a.width*r),o=Math.round(a.height*r),s=t.viewport.translation.x,c=t.viewport.translation.y;return i===e&&o<=n||i<=e&&o===n&&s===0&&c===0}function Ple(t,e,n){const r=t.viewport.scale,a=t.canvas.width,i=t.canvas.height,o=a/e,s=i/n,c=Math.sqrt(o*s);t.viewport.scale=c*r}function Ale(t,e=!1){const n=t.canvas.width,r=t.canvas.height;Ole(t),t.image!==void 0&&(e||wle(t,n,r)?_le(t):Ple(t,n,r))}function xle(t,e){const{hflip:n,vflip:r,rotation:a}=e;if(t.x*=n?-1:1,t.y*=r?-1:1,a!==0){const i=a*Math.PI/180,o=Math.cos(i),s=Math.sin(i),c=t.x*o-t.y*s,l=t.x*s+t.y*o;t.x=c,t.y=l}return t}function Rle(t,e=!0,n=!0){const{canvas:r,image:a,viewport:i}=t,o=j5(r,a,0).scaleFactor;i.vflip=!1,i.hflip=!1,e&&(i.translation.x=0,i.translation.y=0),n&&(i.displayedArea.tlhc.x=1,i.displayedArea.tlhc.y=1,i.displayedArea.brhc.x=a.columns,i.displayedArea.brhc.y=a.rows,i.scale=o)}const ble=1;class Xr extends M1{constructor(e){super(e),this.imagesLoader=this,this.globalDefaultProperties={},this.perImageIdDefaultProperties=new Map,this.voiUpdatedWithSetProperties=!1,this.invert=!1,this.initialInvert=!1,this.initialTransferFunctionNodes=null,this.stackInvalidated=!1,this._publishCalibratedEvent=!1,this.updateRenderingPipeline=()=>{this._configureRenderingPipeline()},this.resize=()=>{this.useCPURendering&&this._resizeCPU()},this._resizeCPU=()=>{this._cpuFallbackEnabledElement.viewport&&Ale(this._cpuFallbackEnabledElement)},this.getFrameOfReferenceUID=n=>{var r;return(r=this.getImagePlaneReferenceData(n))==null?void 0:r.FrameOfReferenceUID},this.getCornerstoneImage=()=>this.csImage,this.createActorMapper=n=>{const r=Lce.newInstance();r.setInputData(n);const a=$ce.newInstance();a.setMapper(r);const{preferSizeOverAccuracy:i}=pI().rendering;return i&&r.setPreferSizeOverAccuracy(!0),n.getPointData().getScalars().getNumberOfComponents()>1&&a.getProperty().setIndependentComponents(!1),a},this.getNumberOfSlices=()=>this.imageIds.length,this.getDefaultProperties=n=>{let r;return n!==void 0&&(r=this.perImageIdDefaultProperties.get(n)),r!==void 0?r:{...this.globalDefaultProperties}},this.getProperties=()=>{const{colormap:n,voiRange:r,VOILUTFunction:a,interpolationType:i,invert:o,voiUpdatedWithSetProperties:s}=this;return{colormap:n,voiRange:r,VOILUTFunction:a,interpolationType:i,invert:o,isComputedVOI:!s}},this.resetCameraForResize=()=>this.resetCamera({resetPan:!0,resetZoom:!0,resetToCenter:!0,suppressEvents:!0}),this.getRotationCPU=()=>{const{viewport:n}=this._cpuFallbackEnabledElement;return n.rotation},this.getRotationGPU=()=>{const{viewUp:n,viewPlaneNormal:r,flipVertical:a}=this.getCameraNoRotation(),i=a?r0(Xe(),this.initialViewUp):this.initialViewUp,o=t5(i,n)*180/Math.PI,s=gr(Xe(),i,n);return Gt(s,r)>=0?o:(360-o)%360},this.setRotation=n=>{const r=this.getCamera();if(this.useCPURendering?this.setRotationCPU(n):this.setRotationGPU(n),this._suppressCameraModifiedEvents)return;const a=this.getCamera(),i={previousCamera:r,camera:a,element:this.element,viewportId:this.id,renderingEngineId:this.renderingEngineId};Dt(this.element,vt.CAMERA_MODIFIED,i)},this.renderImageObject=n=>{this._setCSImage(n),(this.useCPURendering?this._updateToDisplayImageCPU:this._updateActorToDisplayImageId).call(this,n)},this._setCSImage=n=>{var r;n.isPreScaled=(r=n.preScale)==null?void 0:r.scaled,this.csImage=n},this.canvasToWorldCPU=(n,r=[0,0,0])=>{if(!this._cpuFallbackEnabledElement.image)return;const[a,i]=yp(this._cpuFallbackEnabledElement,n),{origin:o,spacing:s,direction:c}=this.getImageData(),l=c.slice(0,3),u=c.slice(3,6);return Hn(r,o,l,a*s[0]),Hn(r,r,u,i*s[1]),r},this.worldToCanvasCPU=n=>{const{spacing:r,direction:a,origin:i}=this.getImageData(),o=a.slice(0,3),s=a.slice(3,6),c=fr(Xe(),n,i),l=[Gt(c,o)/r[0],Gt(c,s)/r[1]];return Nw(this._cpuFallbackEnabledElement,l)},this.canvasToWorldGPU=n=>{const r=this.getRenderer(),a=this.getVtkActiveCamera(),i=a.getClippingRange(),o=a.getDistance();a.setClippingRange(o,o+.1);const c=this.getRenderingEngine().offscreenMultiRenderWindow.getOpenGLRenderWindow(),l=c.getSize(),u=window.devicePixelRatio||1,f=[n[0]*u,n[1]*u],v=[f[0]+this.sx,f[1]+this.sy];v[1]=l[1]-v[1];const g=c.displayToWorld(v[0],v[1],0,r);return a.setClippingRange(i[0],i[1]),[g[0],g[1],g[2]]},this.worldToCanvasGPU=n=>{const r=this.getRenderer(),a=this.getVtkActiveCamera(),i=a.getClippingRange(),o=a.getDistance();a.setClippingRange(o,o+.1);const c=this.getRenderingEngine().offscreenMultiRenderWindow.getOpenGLRenderWindow(),l=c.getSize(),u=c.worldToDisplay(...n,r);u[1]=l[1]-u[1];const f=[u[0]-this.sx,u[1]-this.sy];a.setClippingRange(i[0],i[1]);const v=window.devicePixelRatio||1;return[f[0]/v,f[1]/v]},this.getCurrentImageIdIndex=()=>this.currentImageIdIndex,this.getSliceIndex=()=>this.currentImageIdIndex,this.getTargetImageIdIndex=()=>this.targetImageIdIndex,this.getImageIds=()=>this.imageIds,this.getCurrentImageId=()=>this.imageIds[this.currentImageIdIndex],this.hasImageId=n=>this.imageIds.includes(n),this.hasImageURI=n=>{const r=this.imageIds;for(let a=0;a<r.length;a++)if(ca(r[a])===n)return!0;return!1},this.customRenderViewportToCanvas=()=>{if(!this.useCPURendering)throw new Error("Custom cpu rendering pipeline should only be hit in CPU rendering mode");return this._cpuFallbackEnabledElement.image?(uF(this._cpuFallbackEnabledElement,this.cpuRenderingInvalidated),this.cpuRenderingInvalidated=!1):this.fillWithBackgroundColor(),{canvas:this.canvas,element:this.element,viewportId:this.id,renderingEngineId:this.renderingEngineId,viewportStatus:this.viewportStatus}},this.renderingPipelineFunctions={getImageData:{cpu:this.getImageDataCPU,gpu:this.getImageDataGPU},setColormap:{cpu:this.setColormapCPU,gpu:this.setColormapGPU},getCamera:{cpu:this.getCameraCPU,gpu:super.getCamera},setCamera:{cpu:this.setCameraCPU,gpu:super.setCamera},getPan:{cpu:this.getPanCPU,gpu:super.getPan},setPan:{cpu:this.setPanCPU,gpu:super.setPan},getZoom:{cpu:this.getZoomCPU,gpu:super.getZoom},setZoom:{cpu:this.setZoomCPU,gpu:super.setZoom},setVOI:{cpu:this.setVOICPU,gpu:this.setVOIGPU},getRotation:{cpu:this.getRotationCPU,gpu:this.getRotationGPU},setInterpolationType:{cpu:this.setInterpolationTypeCPU,gpu:this.setInterpolationTypeGPU},setInvertColor:{cpu:this.setInvertColorCPU,gpu:this.setInvertColorGPU},resetCamera:{cpu:(n={})=>{const{resetPan:r=!0,resetZoom:a=!0}=n;return this.resetCameraCPU({resetPan:r,resetZoom:a}),!0},gpu:(n={})=>{const{resetPan:r=!0,resetZoom:a=!0}=n;return this.resetCameraGPU({resetPan:r,resetZoom:a}),!0}},canvasToWorld:{cpu:this.canvasToWorldCPU,gpu:this.canvasToWorldGPU},worldToCanvas:{cpu:this.worldToCanvasCPU,gpu:this.worldToCanvasGPU},getRenderer:{cpu:()=>this.getCPUFallbackError("getRenderer"),gpu:super.getRenderer},getDefaultActor:{cpu:()=>this.getCPUFallbackError("getDefaultActor"),gpu:super.getDefaultActor},getActors:{cpu:()=>this.getCPUFallbackError("getActors"),gpu:super.getActors},getActor:{cpu:()=>this.getCPUFallbackError("getActor"),gpu:super.getActor},setActors:{cpu:()=>this.getCPUFallbackError("setActors"),gpu:super.setActors},addActors:{cpu:()=>this.getCPUFallbackError("addActors"),gpu:super.addActors},addActor:{cpu:()=>this.getCPUFallbackError("addActor"),gpu:super.addActor},removeAllActors:{cpu:()=>this.getCPUFallbackError("removeAllActors"),gpu:super.removeAllActors},unsetColormap:{cpu:this.unsetColormapCPU,gpu:this.unsetColormapGPU}},this.scaling={},this.modality=null,this.useCPURendering=Hf(),this._configureRenderingPipeline(),this.useCPURendering?this._resetCPUFallbackElement():this._resetGPUViewport(),this.imageIds=[],this.currentImageIdIndex=0,this.targetImageIdIndex=0,this.resetCamera(),this.initializeElementDisabledHandler()}setUseCPURendering(e){this.useCPURendering=e,this._configureRenderingPipeline(e)}static get useCustomRenderingPipeline(){return Hf()}_configureRenderingPipeline(e){this.useCPURendering=e??Hf();for(const n in this.renderingPipelineFunctions)if(Object.prototype.hasOwnProperty.call(this.renderingPipelineFunctions,n)){const r=this.renderingPipelineFunctions[n];this[n]=this.useCPURendering?r.cpu:r.gpu}this.useCPURendering?this._resetCPUFallbackElement():this._resetGPUViewport()}_resetCPUFallbackElement(){this._cpuFallbackEnabledElement={canvas:this.canvas,renderingTools:{},transform:new kv,viewport:{rotation:0}}}_resetGPUViewport(){const e=this.getRenderer(),n=E5.newInstance();e.setActiveCamera(n);const r=[0,0,-1];this.initialViewUp=[0,-1,0],n.setDirectionOfProjection(-r[0],-r[1],-r[2]),n.setViewUp(...this.initialViewUp),n.setParallelProjection(!0),n.setThicknessFromFocalPoint(.1),n.setFreezeFocalPoint(!0)}initializeElementDisabledHandler(){ot.addEventListener(vt.ELEMENT_DISABLED,function e(){clearTimeout(this.debouncedTimeout),ot.removeEventListener(vt.ELEMENT_DISABLED,e)})}getImageDataGPU(){const e=this.getDefaultActor();if(!e||!A0(e))return;const{actor:n}=e,r=n.getMapper().getInputData(),a=this.csImage;return{dimensions:r.getDimensions(),spacing:r.getSpacing(),origin:r.getOrigin(),direction:r.getDirection(),get scalarData(){return a==null?void 0:a.voxelManager.getScalarData()},imageData:n.getMapper().getInputData(),metadata:{Modality:this.modality,FrameOfReferenceUID:this.getFrameOfReferenceUID()},scaling:this.scaling,hasPixelSpacing:this.hasPixelSpacing,calibration:{...a==null?void 0:a.calibration,...this.calibration},preScale:{...a==null?void 0:a.preScale},voxelManager:a==null?void 0:a.voxelManager}}getImageDataCPU(){const{metadata:e}=this._cpuFallbackEnabledElement;if(!e)return;const n=e.spacing,r=this.csImage;return{dimensions:e.dimensions,spacing:n,origin:e.origin,direction:e.direction,metadata:{Modality:this.modality,FrameOfReferenceUID:this.getFrameOfReferenceUID()},scaling:this.scaling,imageData:{getDirection:()=>e.direction,getDimensions:()=>e.dimensions,getScalarData:()=>this.cpuImagePixelData,getSpacing:()=>n,worldToIndex:a=>{const i=this.worldToCanvasCPU(a),o=yp(this._cpuFallbackEnabledElement,i);return[o[0],o[1],0]},indexToWorld:(a,i)=>{const o=Nw(this._cpuFallbackEnabledElement,[a[0],a[1]]);return this.canvasToWorldCPU(o,i)}},scalarData:this.cpuImagePixelData,hasPixelSpacing:this.hasPixelSpacing,calibration:{...r==null?void 0:r.calibration,...this.calibration},preScale:{...r==null?void 0:r.preScale},voxelManager:r==null?void 0:r.voxelManager}}buildMetadata(e){const n=e.imageId,{pixelRepresentation:r,bitsAllocated:a,bitsStored:i,highBit:o,photometricInterpretation:s,samplesPerPixel:c}=Lt("imagePixelModule",n),{windowWidth:l,windowCenter:u,voiLUTFunction:f}=e,{modality:v}=Lt("generalSeriesModule",n),g=Lt("scalingModule",n),d=Lt(po.CALIBRATION,n);v==="PT"&&g&&this._addScalingToViewport(g),this.modality=v;const m=this._getValidVOILUTFunction(f);this.VOILUTFunction=m,this.calibration=d;let h=this._getImagePlaneModule(n);return this.useCPURendering||(h=this.calibrateIfNecessary(n,h)),{imagePlaneModule:h,imagePixelModule:{bitsAllocated:a,bitsStored:i,samplesPerPixel:c,highBit:o,photometricInterpretation:s,pixelRepresentation:r,windowWidth:l,windowCenter:u,modality:v,voiLUTFunction:m}}}calibrateIfNecessary(e,n){const r=Lt("calibratedPixelSpacing",e),a=this.calibration!==r,{scale:i}=r||{};return this.hasPixelSpacing=i>0||n.rowPixelSpacing>0,n.calibration=r,a&&(this.calibration=r,this._publishCalibratedEvent=!0,this._calibrationEvent={scale:i,calibration:r}),n}setDefaultProperties(e,n){n==null?this.globalDefaultProperties=e:(this.perImageIdDefaultProperties.set(n,e),this.getCurrentImageId()===n&&this.setProperties(e))}clearDefaultProperties(e){e==null?(this.globalDefaultProperties={},this.resetProperties()):(this.perImageIdDefaultProperties.delete(e),this.resetToDefaultProperties())}setProperties({colormap:e,voiRange:n,VOILUTFunction:r,invert:a,interpolationType:i}={},o=!1){this.viewportStatus=this.csImage?es.PRE_RENDER:es.LOADING,this.globalDefaultProperties={colormap:this.globalDefaultProperties.colormap??e,voiRange:this.globalDefaultProperties.voiRange??n,VOILUTFunction:this.globalDefaultProperties.VOILUTFunction??r,invert:this.globalDefaultProperties.invert??a,interpolationType:this.globalDefaultProperties.interpolationType??i},typeof e<"u"&&this.setColormap(e),typeof n<"u"&&this.setVOI(n,{suppressEvents:o,voiUpdatedWithSetProperties:!0}),typeof r<"u"&&this.setVOILUTFunction(r,o),typeof a<"u"&&this.setInvertColor(a),typeof i<"u"&&this.setInterpolationType(i)}resetProperties(){this.cpuRenderingInvalidated=!0,this.voiUpdatedWithSetProperties=!1,this.viewportStatus=es.PRE_RENDER,this.fillWithBackgroundColor(),this.useCPURendering&&(this._cpuFallbackEnabledElement.renderingTools={}),this._resetProperties(),this.render()}_resetProperties(){let e;this._isCurrentImagePTPrescaled()?e=this._getDefaultPTPrescaledVOIRange():e=this._getVOIRangeForCurrentImage(),this.setVOI(e),this.setInvertColor(this.initialInvert),this.setInterpolationType(Yu.LINEAR);const n=this.getTransferFunction();CI(n,this.initialTransferFunctionNodes);const a=GS(n).reduce((s,c)=>(s.push(c[0],c[1],c[2],c[3]),s),[]),i=this.getDefaultActor(),o=A5(a,i.actor);this.setColormap(o)}resetToDefaultProperties(){var a;this.cpuRenderingInvalidated=!0,this.viewportStatus=es.PRE_RENDER,this.fillWithBackgroundColor(),this.useCPURendering&&(this._cpuFallbackEnabledElement.renderingTools={});const e=this.getCurrentImageId(),n=this.perImageIdDefaultProperties.get(e)||this.globalDefaultProperties;(a=n.colormap)!=null&&a.name&&this.setColormap(n.colormap);let r;n.voiRange==null?r=this._getVOIRangeForCurrentImage():r=n.voiRange,this.setVOI(r),this.setInterpolationType(Yu.LINEAR),this.setInvertColor(!1),this.render()}_getVOIFromCache(){let e;return this.voiUpdatedWithSetProperties?e=this.voiRange:this._isCurrentImagePTPrescaled()?e=this._getDefaultPTPrescaledVOIRange():e=this._getVOIRangeForCurrentImage()??this.voiRange,e}_setPropertiesFromCache(){const e=this._getVOIFromCache(),{interpolationType:n,invert:r}=this;this.setVOI(e),this.setInterpolationType(n),this.setInvertColor(r)}getCameraCPU(){const{metadata:e,viewport:n}=this._cpuFallbackEnabledElement;if(!e)return{};const{direction:r}=e,a=r.slice(6,9).map(f=>-f);let i=r.slice(3,6).map(f=>-f);if(n.rotation){const f=ZM(Fs(),n.rotation*Math.PI/180,a);i=un(Xe(),i,f)}const o=[this.element.clientWidth/2,this.element.clientHeight/2],s=this.canvasToWorld(o),c=this.canvasToWorld([0,0]),l=this.canvasToWorld([0,this.element.clientHeight]),u=Si(c,l)/2;return{parallelProjection:!0,focalPoint:s,position:[0,0,0],parallelScale:u,scale:n.scale,viewPlaneNormal:[a[0],a[1],a[2]],viewUp:[i[0],i[1],i[2]],flipHorizontal:this.flipHorizontal,flipVertical:this.flipVertical}}setCameraCPU(e){const{viewport:n,image:r}=this._cpuFallbackEnabledElement,a=this.getCameraCPU(),{focalPoint:i,parallelScale:o,scale:s,flipHorizontal:c,flipVertical:l}=e,{clientHeight:u}=this.element;if(i){const v=this.worldToCanvasCPU(i),g=yp(this._cpuFallbackEnabledElement,v),d=this.worldToCanvasCPU(a.focalPoint),m=yp(this._cpuFallbackEnabledElement,d),h=In();_a(h,P8(g[0],g[1]),P8(m[0],m[1]));const C=xle({x:h[0],y:h[1]},n);n.translation.x-=C.x,n.translation.y-=C.y}if(o){const{rowPixelSpacing:v}=r,g=u*v*.5/o;n.scale=g,n.parallelScale=o}if(s){const{rowPixelSpacing:v}=r;n.scale=s,n.parallelScale=u*v*.5/s}(c!==void 0||l!==void 0)&&this.setFlipCPU({flipHorizontal:c,flipVertical:l}),this._cpuFallbackEnabledElement.transform=om(this._cpuFallbackEnabledElement);const f={previousCamera:a,camera:this.getCamera(),element:this.element,viewportId:this.id,renderingEngineId:this.renderingEngineId};Dt(this.element,vt.CAMERA_MODIFIED,f)}getPanCPU(){const{viewport:e}=this._cpuFallbackEnabledElement;return[e.translation.x,e.translation.y]}setPanCPU(e){const n=this.getCameraCPU();this.setCameraCPU({...n,focalPoint:[...e.map(r=>-r),0]})}getZoomCPU(){const{viewport:e}=this._cpuFallbackEnabledElement;return e.scale}setZoomCPU(e){const n=this.getCameraCPU();this.setCameraCPU({...n,scale:e})}setFlipCPU({flipHorizontal:e,flipVertical:n}){const{viewport:r}=this._cpuFallbackEnabledElement;e!==void 0&&(r.hflip=e,this.flipHorizontal=r.hflip),n!==void 0&&(r.vflip=n,this.flipVertical=r.vflip)}setVOILUTFunction(e,n){if(this.useCPURendering)throw new Error("VOI LUT function is not supported in CPU rendering");const r=this._getValidVOILUTFunction(e);let a=!1;this.VOILUTFunction!==r&&(a=!0),this.VOILUTFunction=r;const{voiRange:i}=this.getProperties();this.setVOI(i,{suppressEvents:n,forceRecreateLUTFunction:a})}setRotationCPU(e){const{viewport:n}=this._cpuFallbackEnabledElement;n.rotation=e}setRotationGPU(e){const n=this.getPan(this.fitToCanvasCamera),r=this.getPan(),a=Ps([0,0],n,r);this.setPan(a,!1);const{flipVertical:i}=this.getCamera(),o=i?r0(Xe(),this.initialViewUp):this.initialViewUp;this.setCameraNoEvent({viewUp:o}),this.getVtkActiveCamera().roll(-e);const s=this.getPan(),c=this.getPan(this.fitToCanvasCamera),l=Ps([0,0],s,c),u=Ri([0,0],n,l);this.setPan(u,!1)}setInterpolationTypeGPU(e){const n=this.getDefaultActor();if(!n||!A0(n))return;const{actor:r}=n;r.getProperty().setInterpolationType(e),this.interpolationType=e}setInterpolationTypeCPU(e){const{viewport:n}=this._cpuFallbackEnabledElement;n.pixelReplication=e!==Yu.LINEAR,this.interpolationType=e}setInvertColorCPU(e){const{viewport:n}=this._cpuFallbackEnabledElement;n&&(n.invert=e,this.invert=e)}setInvertColorGPU(e){const n=this.getDefaultActor();if(n&&A0(n)){if(Vo(n,"vtkVolume")){const a=n.actor.getProperty().getRGBTransferFunction(0);(!this.invert&&e||this.invert&&!e)&&md(a),this.invert=e}else if(Vo(n,"vtkImageSlice")){const a=n.actor.getProperty().getRGBTransferFunction(0);(!this.invert&&e||this.invert&&!e)&&md(a),this.invert=e}}}setVOICPU(e,n={}){const{suppressEvents:r=!1}=n,{viewport:a,image:i}=this._cpuFallbackEnabledElement;if(!a||!i)return;if(typeof e>"u"){const{windowWidth:s,windowCenter:c}=i,l=Array.isArray(s)?s[0]:s,u=Array.isArray(c)?c[0]:c;a.voi={windowWidth:l,windowCenter:u,voiLUTFunction:i.voiLUTFunction};const{lower:f,upper:v}=Bl(l,u,i.voiLUTFunction);e={lower:f,upper:v}}else{const{lower:s,upper:c}=e,{windowCenter:l,windowWidth:u}=Uv(s,c);a.voi||(a.voi={windowWidth:0,windowCenter:0,voiLUTFunction:i.voiLUTFunction}),a.voi.windowWidth=u,a.voi.windowCenter=l}this.voiRange=e;const o={viewportId:this.id,range:e};r||Dt(this.element,vt.VOI_MODIFIED,o)}getTransferFunction(){const e=this.getDefaultActor();return!e||!A0(e)?void 0:e.actor.getProperty().getRGBTransferFunction(0)}setVOIGPU(e,n={}){const{suppressEvents:r=!1,forceRecreateLUTFunction:a=!1,voiUpdatedWithSetProperties:i=!1}=n;if(e&&this.voiRange&&this.voiRange.lower===e.lower&&this.voiRange.upper===e.upper&&!a&&!this.stackInvalidated)return;const o=this.getDefaultActor();if(!o||!A0(o))return;const s=o.actor;let c=e;if(typeof c>"u"){const g=s.getMapper().getInputData().getPointData().getScalars().getRange();c={lower:g[0],upper:g[1]}}s.getProperty().setUseLookupTableScalarRange(!0);let l=s.getProperty().getRGBTransferFunction(0);const u=this.VOILUTFunction===So.SAMPLED_SIGMOID;if((u||!l||a)&&(l=(u?x5:sF)(c),this.invert&&md(l),s.getProperty().setRGBTransferFunction(0,l),this.initialTransferFunctionNodes=GS(l)),u||l.setRange(c.lower,c.upper),this.voiRange=c,this.voiUpdatedWithSetProperties||(this.voiUpdatedWithSetProperties=i),r)return;const f={viewportId:this.id,range:c,VOILUTFunction:this.VOILUTFunction};Dt(this.element,vt.VOI_MODIFIED,f)}_addScalingToViewport(e){if(this.scaling.PT)return;const{suvbw:n,suvlbm:r,suvbsa:a}=e,i={};r&&(i.suvbwToSuvlbm=r/n),a&&(i.suvbwToSuvbsa=a/n),this.scaling.PT=i}_getNumCompsFromPhotometricInterpretation(e){let n=1;return(e==="RGB"||e.includes("YBR")||e==="PALETTE COLOR")&&(n=3),n}getImageDataMetadata(e){const{imagePlaneModule:n,imagePixelModule:r}=this.buildMetadata(e);let{rowCosines:a,columnCosines:i}=n;(a==null||i==null)&&(a=[1,0,0],i=[0,1,0]);const o=qt(a[0],a[1],a[2]),s=qt(i[0],i[1],i[2]),c=Xe();gr(c,o,s);let l=n.imagePositionPatient;l==null&&(l=[0,0,0]);const u=n.columnPixelSpacing||e.columnPixelSpacing,f=n.rowPixelSpacing||e.rowPixelSpacing,v=e.columns,g=e.rows,d=ble,m=1,h=e.numberOfComponents||this._getNumCompsFromPhotometricInterpretation(r.photometricInterpretation);return{bitsAllocated:r.bitsAllocated,numberOfComponents:h,origin:l,direction:[...o,...s,...c],dimensions:[v,g,m],spacing:[u,f,d],numVoxels:v*g*m,imagePlaneModule:n,imagePixelModule:r}}matchImagesForOverlay(e,n){return(a=>{const i=Lt(po.IMAGE_PLANE,n),o=Lt(po.IMAGE_PLANE,a),s=i.imageOrientationPatient,c=o.imageOrientationPatient;if(s&&c){if(gn(i.imageOrientationPatient,o.imageOrientationPatient)){const u=i.imagePositionPatient,f=o.imagePositionPatient;if(u&&f&&gn(u,f)){const g=i.rows,d=i.columns,m=o.rows,h=o.columns;if(g===m&&d===h)return a}}}else{const l=i.rows,u=i.columns,f=o.rows,v=o.columns;if(l===f&&u===v)return a}})(e)}getImagePlaneReferenceData(e=this.getCurrentImageIdIndex()){const n=this.imageIds[e];if(!n)return;const r=Lt(po.IMAGE_PLANE,n);if(!r)return;const{imagePositionPatient:a,frameOfReferenceUID:i}=r;let{rowCosines:o,columnCosines:s}=r;o||(o=[1,0,0]),s||(s=[0,1,0]);const c=gr([0,0,0],s,o);return{FrameOfReferenceUID:i,viewPlaneNormal:c,cameraFocalPoint:a,referencedImageId:n,sliceIndex:e}}_getCameraOrientation(e){const n=e.slice(6,9).map(a=>-a),r=e.slice(3,6).map(a=>-a);return{viewPlaneNormal:[n[0],n[1],n[2]],viewUp:[r[0],r[1],r[2]]}}createVTKImageData({origin:e,direction:n,dimensions:r,spacing:a,numberOfComponents:i,pixelArray:o}){const s=new o.constructor(o.length),c=fn.newInstance({name:"Pixels",numberOfComponents:i,values:s}),l=Lv.newInstance();return l.setDimensions(r),l.setSpacing(a),l.setDirection(n),l.setOrigin(e),l.getPointData().setScalars(c),l}_createVTKImageData({origin:e,direction:n,dimensions:r,spacing:a,numberOfComponents:i,pixelArray:o}){try{this._imageData=this.createVTKImageData({origin:e,direction:n,dimensions:r,spacing:a,numberOfComponents:i,pixelArray:o})}catch(s){console.error(s)}}async setStack(e,n=0){this._throwIfDestroyed(),this.imageIds=e,this.currentImageIdIndex=n,this.targetImageIdIndex=n;const r=Lt(rm.IMAGE_RETRIEVE_CONFIGURATION,e[n],"stack");this.imagesLoader=r?(r.create||HU)(r):this,this.stackInvalidated=!0,this.flipVertical=!1,this.flipHorizontal=!1,this.voiRange=null,this.interpolationType=Yu.LINEAR,this.invert=!1,this.viewportStatus=es.LOADING,this.fillWithBackgroundColor(),this.useCPURendering&&(this._cpuFallbackEnabledElement.renderingTools={},delete this._cpuFallbackEnabledElement.viewport.colormap);const a=await this._setImageIdIndex(n),i={imageIds:e,viewportId:this.id,element:this.element,currentImageIdIndex:n};return Dt(this.element,vt.VIEWPORT_NEW_IMAGE_SET,i),a}_throwIfDestroyed(){if(this.isDisabled)throw new Error("The stack viewport has been destroyed and is no longer usable. Renderings will not be performed. If you are using the same viewportId and have re-enabled the viewport, you need to grab the new viewport instance using renderingEngine.getViewport(viewportId), instead of using your lexical scoped reference to the viewport instance.")}_checkVTKImageDataMatchesCornerstoneImage(e,n){if(!n)return!1;const[r,a]=n.getSpacing(),[i,o]=n.getDimensions(),s=this._getImagePlaneModule(e.imageId),c=n.getDirection(),l=c.slice(0,3),u=c.slice(3,6),f=n.getPointData().getScalars().getDataType(),v=gn(r,e.columnPixelSpacing),g=gn(a,e.rowPixelSpacing),d=v||e.columnPixelSpacing===null&&r===1,m=g||e.rowPixelSpacing===null&&a===1,h=i===e.columns,C=o===e.rows,p=gn(s.rowCosines,l),S=gn(s.columnCosines,u),I=f===e.voxelManager.getScalarData().constructor.name;return d&&m&&h&&C&&p&&S&&I}_updateVTKImageDataFromCornerstoneImage(e){let r=this._getImagePlaneModule(e.imageId).imagePositionPatient;r==null&&(r=[0,0,0]),this._imageData.setOrigin(r),TI(this._imageData,e)}_loadAndDisplayImage(e,n){return this.useCPURendering?this._loadAndDisplayImageCPU(e,n):this._loadAndDisplayImageGPU(e,n)}_loadAndDisplayImageCPU(e,n){return new Promise((r,a)=>{function i(g,d,m){if(this.currentImageIdIndex!==d)return;const h=g.voxelManager.getScalarData(),C=g.preScale,p=C==null?void 0:C.scalingParameters,S=(C==null?void 0:C.scaled)&&(p==null?void 0:p.rescaleIntercept)%1!==0||(p==null?void 0:p.rescaleSlope)%1!==0;if(h instanceof Float32Array&&S){const D={min:g.maxPixelValue,max:g.minPixelValue},y=Math.abs(D.max-D.min)/65535,M=D.min,_=h.length,O=new Uint16Array(_);let w=65535,x=0;for(let P=0;P<_;P++){const R=Math.floor((h[P]-M)/y);O[P]=R,w=Math.min(w,R),x=Math.max(x,R)}g.minPixelValue=w,g.maxPixelValue=x,g.slope=y,g.intercept=M,g.getPixelData=()=>O,g.preScale={...g.preScale,scaled:!1}}this._setCSImage(g),this.viewportStatus=es.PRE_RENDER;const I={image:g,imageId:m,imageIdIndex:d,viewportId:this.id,renderingEngineId:this.renderingEngineId};Dt(this.element,vt.STACK_NEW_IMAGE,I),this._updateToDisplayImageCPU(g),this.render(),this.currentImageIdIndex=d,r(m)}function o(g,d,m){const h={error:g,imageIdIndex:d,imageId:m};this.suppressEvents||Dt(ot,vt.IMAGE_LOAD_ERROR,h),a(g)}function s(g,d,m){return J0(g,m).then(h=>{i.call(this,h,d,g)},h=>{o.call(this,h,d,g)})}const c=-5,l=bn.Interaction,u={imageId:e,imageIdIndex:n},f={useRGBA:!0,requestType:l},v={imageId:e,imageIdIndex:n,viewportId:this.id,renderingEngineId:this.renderingEngineId};Dt(this.element,vt.PRE_STACK_NEW_IMAGE,v),ui.addRequest(s.bind(this,e,n,f),l,u,c)})}successCallback(e,n){var l,u;const r=this.imageIds.indexOf(e);if(this.currentImageIdIndex!==r)return;const a=(l=this.csImage)==null?void 0:l.imageFrame,i=n==null?void 0:n.imageFrame,o=(a==null?void 0:a.photometricInterpretation)||((u=this.csImage)==null?void 0:u.photometricInterpretation),s=(i==null?void 0:i.photometricInterpretation)||(n==null?void 0:n.photometricInterpretation);o!==s&&(this.stackInvalidated=!0),this._setCSImage(n);const c={image:n,imageId:e,imageIdIndex:r,viewportId:this.id,renderingEngineId:this.renderingEngineId};this._updateActorToDisplayImageId(n),Dt(this.element,vt.STACK_NEW_IMAGE,c),this.render(),this.currentImageIdIndex=r}errorCallback(e,n,r){if(!n)return;const a=this.imageIds.indexOf(e),i={error:r,imageIdIndex:a,imageId:e};Dt(ot,vt.IMAGE_LOAD_ERROR,i)}getLoaderImageOptions(e){const n=this.imageIds.indexOf(e),{transferSyntaxUID:r}=Lt("transferSyntax",e)||{};return{useRGBA:!1,transferSyntaxUID:r,priority:5,requestType:bn.Interaction,additionalDetails:{imageId:e,imageIdIndex:n}}}async loadImages(e,n){const r=await Promise.allSettled(e.map(i=>{const o=this.getLoaderImageOptions(i);return J0(i,o).then(s=>(n.successCallback(i,s),i),s=>(n.errorCallback(i,!0,s),i))})),a=r.filter(i=>i.status==="rejected");if(a&&a.length){const i=new CustomEvent(vt.IMAGE_LOAD_ERROR,{detail:a,cancelable:!0});ot.dispatchEvent(i)}return r}_loadAndDisplayImageGPU(e,n){const r={imageId:e,imageIdIndex:n,viewportId:this.id,renderingEngineId:this.renderingEngineId};return Dt(this.element,vt.PRE_STACK_NEW_IMAGE,r),this.imagesLoader.loadImages([e],this).then(a=>e)}_updateToDisplayImageCPU(e){const n=this.getImageDataMetadata(e),r=gF(this.canvas,e,this.modality,this._cpuFallbackEnabledElement.viewport.colormap),{windowCenter:a,windowWidth:i,voiLUTFunction:o}=r.voi;this.voiRange=Bl(i,a,o),this._cpuFallbackEnabledElement.image=e,this._cpuFallbackEnabledElement.metadata={...n},this.cpuImagePixelData=e.voxelManager.getScalarData();const s=Object.assign({},r,this._cpuFallbackEnabledElement.viewport);this._cpuFallbackEnabledElement.viewport=this.stackInvalidated?r:s,this.stackInvalidated=!1,this.cpuRenderingInvalidated=!0,this._cpuFallbackEnabledElement.transform=om(this._cpuFallbackEnabledElement)}getSliceViewInfo(){throw new Error("Method not implemented.")}addImages(e){const n=[];e.forEach(r=>{const{imageId:a,...i}=r,o=Ye.getImage(a),{origin:s,dimensions:c,direction:l,spacing:u,numberOfComponents:f}=this.getImageDataMetadata(o),v=this.createVTKImageData({origin:s,dimensions:c,direction:l,spacing:u,numberOfComponents:f,pixelArray:o.voxelManager.getScalarData()}),g=this.createActorMapper(v);g&&(n.push({uid:r.actorUID??Cr(),actor:g,referencedId:a,...i}),r.callback&&r.callback({imageActor:g,imageId:r.imageId}))}),this.addActors(n)}_updateActorToDisplayImageId(e){const n=this._checkVTKImageDataMatchesCornerstoneImage(e,this._imageData),r=this.getViewPresentation();if(n&&!this.stackInvalidated){this._updateVTKImageDataFromCornerstoneImage(e),this.resetCameraNoEvent(),this.setViewPresentation(r),this._setPropertiesFromCache(),this.stackActorReInitialized=!1;return}const{origin:a,direction:i,dimensions:o,spacing:s,numberOfComponents:c,imagePixelModule:l}=this.getImageDataMetadata(e),u=e.voxelManager.getScalarData();this._createVTKImageData({origin:a,direction:i,dimensions:o,spacing:s,numberOfComponents:c,pixelArray:u}),this._updateVTKImageDataFromCornerstoneImage(e);const f=this.createActorMapper(this._imageData),v=this.getActors();v.length&&v[0].uid===this.id?v[0].actor=f:v.unshift({uid:this.id,actor:f}),this.setActors(v);const{viewPlaneNormal:g,viewUp:d}=this._getCameraOrientation(i),m=this.getCamera();this.setCameraNoEvent({viewUp:d,viewPlaneNormal:g}),this.initialViewUp=d,this.resetCameraNoEvent(),this.setViewPresentation(r),this.triggerCameraEvent(this.getCamera(),m);const h=l.photometricInterpretation==="MONOCHROME1";this.stackInvalidated=!0;const C=this._getInitialVOIRange(e);this.setVOI(C,{forceRecreateLUTFunction:!!h}),this.initialInvert=!!h,this.setInvertColor(this.invert||this.initialInvert),this.stackInvalidated=!1,this.stackActorReInitialized=!0,this._publishCalibratedEvent&&this.triggerCalibrationEvent()}_getInitialVOIRange(e){if(this.voiRange&&this.voiUpdatedWithSetProperties)return this.globalDefaultProperties.voiRange;const{windowCenter:n,windowWidth:r,voiLUTFunction:a}=e;let i=this._getVOIRangeFromWindowLevel(r,n,a);return i=this._getPTPreScaledRange()||i,i}_getPTPreScaledRange(){if(this._isCurrentImagePTPrescaled())return this._getDefaultPTPrescaledVOIRange()}_isCurrentImagePTPrescaled(){var e;return!(this.modality!=="PT"||!this.csImage.isPreScaled||!((e=this.csImage.preScale)!=null&&e.scalingParameters.suvbw))}_getDefaultPTPrescaledVOIRange(){return{lower:0,upper:5}}_getVOIRangeFromWindowLevel(e,n,r=So.LINEAR){let a,i;if(typeof n=="number"&&typeof e=="number"?(a=n,i=e):Array.isArray(n)&&Array.isArray(e)&&(a=n[0],i=e[0]),a!==void 0&&i!==void 0)return Bl(i,a,r)}async _setImageIdIndex(e){if(e>=this.imageIds.length)throw new Error(`ImageIdIndex provided ${e} is invalid, the stack only has ${this.imageIds.length} elements`);this.currentImageIdIndex=e,this.hasPixelSpacing=!0,this.viewportStatus=es.PRE_RENDER;const n=await this._loadAndDisplayImage(this.imageIds[e],e);if(this.perImageIdDefaultProperties.size>=1){const r=this.perImageIdDefaultProperties.get(n);r!==void 0?this.setProperties(r):this.globalDefaultProperties!==void 0&&this.setProperties(this.globalDefaultProperties)}return n}resetCameraCPU({resetPan:e=!0,resetZoom:n=!0}){const{image:r}=this._cpuFallbackEnabledElement;if(!r)return;Rle(this._cpuFallbackEnabledElement,e,n);const{scale:a}=this._cpuFallbackEnabledElement.viewport,{clientWidth:i,clientHeight:o}=this.element,s=[i/2,o/2],c=this.canvasToWorldCPU(s);this.setCameraCPU({focalPoint:c,scale:a})}resetCameraGPU({resetPan:e,resetZoom:n}){return this.setCamera({flipHorizontal:!1,flipVertical:!1,viewUp:this.initialViewUp}),super.resetCamera({resetPan:e,resetZoom:n,resetToCenter:!0})}scroll(e,n=!0,r=!1){const a=this.imageIds,i=this.targetImageIdIndex,o=a.length;let s=i+e;s=Math.max(0,s),r?s=s%o:s=Math.min(o-1,s),this.targetImageIdIndex=s;const c=a[s];Ye.isLoaded(c)||!n?this.setImageIdIndex(s):(clearTimeout(this.debouncedTimeout),this.debouncedTimeout=window.setTimeout(()=>{this.setImageIdIndex(s)},40));const u={newImageIdIndex:s,imageId:c,direction:e};s!==i&&Dt(this.element,vt.STACK_VIEWPORT_SCROLL,u)}setImageIdIndex(e){return this._throwIfDestroyed(),this.currentImageIdIndex===e?Promise.resolve(this.getCurrentImageId()):this._setImageIdIndex(e)}calibrateSpacing(e){const n=this.getImageIds().indexOf(e);this.stackInvalidated=!0,this._loadAndDisplayImage(e,n)}triggerCameraEvent(e,n){const r={previousCamera:n,camera:e,element:this.element,viewportId:this.id,renderingEngineId:this.renderingEngineId};this.suppressEvents||Dt(this.element,vt.CAMERA_MODIFIED,r)}triggerCalibrationEvent(){const{imageData:e}=this.getImageData(),n={element:this.element,viewportId:this.id,renderingEngineId:this.renderingEngineId,imageId:this.getCurrentImageId(),imageData:e,worldToIndex:e.getWorldToIndex(),...this._calibrationEvent};this.suppressEvents||Dt(this.element,vt.IMAGE_SPACING_CALIBRATED,n),this._publishCalibratedEvent=!1}jumpToWorld(e){const n=this.getImageIds(),r=this.getImageData(),{direction:a,spacing:i}=r,o=jc({direction:a,spacing:i,imageIds:n},e,this.getCamera().viewPlaneNormal),s=n.indexOf(o);return s===-1?!1:(this.setImageIdIndex(s),this.render(),!0)}_getVOIRangeForCurrentImage(){const{windowCenter:e,windowWidth:n,voiLUTFunction:r}=this.csImage;return this._getVOIRangeFromWindowLevel(n,e,r)}_getValidVOILUTFunction(e){return Object.values(So).includes(e)?e:So.LINEAR}getSliceInfo(){const e=this.getSliceIndex(),{dimensions:n}=this.getImageData();return{width:n[0],height:n[1],sliceIndex:e,slicePlane:2}}isReferenceViewable(e,n={}){if(!super.isReferenceViewable(e,n))return!1;const{referencedImageId:r,sliceIndex:a}=e;if(e.volumeId&&!r)return n.asVolume;let i=this.getCurrentImageIdIndex(),o=this.imageIds[i];if(n.withNavigation&&typeof a=="number"&&(i=a,o=this.imageIds[i]),!o)return!1;if(n.asOverlay&&r&&this.matchImagesForOverlay(o,r))return!0;let{imageURI:s}=n;s||(s=ca(o));const l=ca(r)===s;if(l)return l;const{cameraFocalPoint:u}=e;if(n.asNearbyProjection&&u){const{spacing:f,direction:v,origin:g}=this.getImageData(),d=v.slice(6,9),m=vu({direction:v,spacing:f},d),h=fr(Xe(),u,g),C=Gt(h,d),p=m/2;if(Math.abs(C)<=p)return!0}return!1}getViewReference(e={}){const{sliceIndex:n=this.getCurrentImageIdIndex()}=e,r=super.getViewReference(e),a=this.imageIds[n];if(a){if(r.referencedImageId=a,this.getCurrentImageIdIndex()!==n){const i=this.getImagePlaneReferenceData(n);if(!i)return;Object.assign(r,i)}return r}}setViewReference(e){if(!e)return;const{referencedImageId:n,sliceIndex:r}=e;if(typeof r=="number"&&n&&n===this.imageIds[r])this.scroll(r-this.targetImageIdIndex);else{const a=this.imageIds.indexOf(n);if(a!==-1)this.scroll(a-this.targetImageIdIndex);else throw new Error("Unsupported - referenced image id not found")}}getViewReferenceId(e={}){const{sliceIndex:n=this.currentImageIdIndex}=e;if(Array.isArray(n))throw new Error("Use of slice ranges for stacks not supported");return`imageId:${this.imageIds[n]}`}getCPUFallbackError(e){return new Error(`method ${e} cannot be used during CPU Fallback mode`)}fillWithBackgroundColor(){const e=this.getRenderingEngine();e&&e.fillCanvasWithBackgroundColor(this.canvas,this.options.background)}unsetColormapCPU(){delete this._cpuFallbackEnabledElement.viewport.colormap,this._cpuFallbackEnabledElement.renderingTools={},this.cpuRenderingInvalidated=!0,this.fillWithBackgroundColor(),this.render()}setColormapCPU(e){this.colormap=e;const n=nm(e.name);this._cpuFallbackEnabledElement.viewport.colormap=n,this._cpuFallbackEnabledElement.renderingTools={},this.fillWithBackgroundColor(),this.cpuRenderingInvalidated=!0,this.render();const r={viewportId:this.id,colormap:e};Dt(this.element,vt.COLORMAP_MODIFIED,r)}setColormapGPU(e){const a=this.getDefaultActor().actor.getProperty(),i=a.getRGBTransferFunction(),o=nm(e.name)||LS.getPresetByName(e.name);if(i)i.applyColorMap(o),i.setMappingRange(this.voiRange.lower,this.voiRange.upper),a.setRGBTransferFunction(0,i);else{const c=iu.newInstance();c.applyColorMap(o),c.setMappingRange(this.voiRange.lower,this.voiRange.upper),a.setRGBTransferFunction(0,c)}this.colormap=e,this.render();const s={viewportId:this.id,colormap:e};Dt(this.element,vt.COLORMAP_MODIFIED,s)}unsetColormapGPU(){throw new Error("unsetColormapGPU not implemented.")}_getImagePlaneModule(e){var a;const n=Lt(po.IMAGE_PLANE,e);this.hasPixelSpacing=!n.usingDefaultValues||((a=this.calibration)==null?void 0:a.scale)>0,this.calibration||(this.calibration=n.calibration);const r={...n};return r.columnPixelSpacing||(r.columnPixelSpacing=1),r.rowPixelSpacing||(r.rowPixelSpacing=1),r.columnCosines||(r.columnCosines=[0,1,0]),r.rowCosines||(r.rowCosines=[1,0,0]),r.imagePositionPatient||(r.imagePositionPatient=[0,0,0]),r.imageOrientationPatient||(r.imageOrientationPatient=new Float32Array([1,0,0,0,1,0])),r}}class Q5 extends zr{constructor(e){super(e),this.getNumberOfSlices=()=>1,this.getRotation=()=>0,this.getCurrentImageIdIndex=()=>0,this.getCurrentImageId=()=>null,this.resetCameraForResize=()=>this.resetCamera({resetPan:!0,resetZoom:!0,resetToCenter:!0});const{parallelProjection:n,orientation:r}=this.options,a=this.getVtkActiveCamera();n!=null&&a.setParallelProjection(n),r&&r!==xl.ACQUISITION&&this.applyViewOrientation(r)}resetCamera({resetPan:e=!0,resetZoom:n=!0,resetToCenter:r=!0}={}){super.resetCamera({resetPan:e,resetZoom:n,resetToCenter:r});const a=this.getVtkActiveCamera();return a.getParallelProjection()?a.setClippingRange(-wa.MAXIMUM_RAY_DISTANCE,wa.MAXIMUM_RAY_DISTANCE):a.setClippingRange(wa.MINIMUM_SLAB_THICKNESS,wa.MAXIMUM_RAY_DISTANCE),this.getRenderer().resetCameraClippingRange(),!0}setSlabThickness(e,n){return null}setBlendMode(e,n,r){return null}resetProperties(e){const n=e?this.getActor(e):this.getDefaultActor();if(!n)throw new Error(`No actor found for the given volumeId: ${e}`);n.slabThickness&&(n.slabThickness=wa.MINIMUM_SLAB_THICKNESS,this.viewportProperties.slabThickness=void 0,this.updateClippingPlanesForActors(this.getCamera())),e||(e=this.getVolumeId());const r=Ye.getVolume(e);if(!r)throw new Error(`imageVolume with id: ${e} does not exist in cache`);if(W5(n.actor,r),A0(n)){const a=n.actor.getProperty().getRGBTransferFunction(0);CI(a,this.initialTransferFunctionNodes)}this.setCamera(this.initialCamera),Dt(this.element,vt.VOI_MODIFIED,super.getVOIModifiedEventDetail(e))}getSliceIndex(){return null}setCamera(e){super.setCamera(e),this.getRenderer().resetCameraClippingRange(),this.render()}setCameraClippingRange(){const e=this.getVtkActiveCamera();e.getParallelProjection()?e.setClippingRange(-wa.MAXIMUM_RAY_DISTANCE,wa.MAXIMUM_RAY_DISTANCE):e.setClippingRange(wa.MINIMUM_SLAB_THICKNESS,wa.MAXIMUM_RAY_DISTANCE)}resetSlabThickness(){return null}}const dF="viewport-element",mF="cornerstone-canvas",Lw=1e-4;function Nle(t){const e=document.createElement("canvas");return e.style.position="absolute",e.style.width="100%",e.style.height="100%",e.style.imageRendering="pixelated",e.classList.add(mF),t.appendChild(e),e}function Lle(t){const e=document.createElement("div");return e.style.position="relative",e.style.width="100%",e.style.height="100%",e.style.overflow="hidden",e.classList.add(dF),t.appendChild(e),e}function P0(t){const e=`canvas.${mF}`,n=`div.${dF}`,r=t.querySelector(n)||Lle(t),a=r.querySelector(e);if(a)return a;const i=Nle(r),o=r.getBoundingClientRect(),s=window.devicePixelRatio||1,c=Math.ceil(o.width*s),l=Math.ceil(o.height*s);return i.width=c,i.height=l,i}async function XS(t,e,n,r=!1,a=!1){n.forEach(o=>{const s=t.getViewport(o);if(!s)throw new Error(`Viewport with Id ${o} does not exist`);if(!(s instanceof zr))throw new Error("setVolumesForViewports only supports VolumeViewport and VolumeViewport3D")});const i=n.map(async o=>{await t.getViewport(o).setVolumes(e,r,a)});await Promise.all(i)}async function hF(t,e,n,r=!1,a=!1){for(const o of n){const s=t.getViewport(o);if(!s)throw new Error(`Viewport with Id ${o} does not exist`);if(!(s instanceof zr)){console.warn(`Viewport with Id ${o} is not a BaseVolumeViewport. Cannot add volume to this viewport.`);return}}const i=n.map(async o=>{await t.getViewport(o).addVolumes(e,r,a)});await Promise.all(i)}function pF(t,e,n){for(const r of n){const a=t.getViewport(r);if(!a)throw new Error(`Viewport with Id ${r} does not exist`);if(!a.addImages){console.warn(`Viewport with Id ${r} does not have addImages. Cannot add image segmentation to this viewport.`);return}}n.forEach(r=>{t.getViewport(r).addImages(e)})}class Ule{constructor(e){this.opacity=.4,this.outlineOpacity=.4,this.transferFunction=[],this.actor=e}setRGBTransferFunction(e,n){this.transferFunction[e]=n}setScalarOpacity(e){}setInterpolationTypeToNearest(){}setUseLabelOutline(){}setLabelOutlineOpacity(e){this.outlineOpacity=e}setLabelOutlineThickness(){}getColor(e){const n=this.transferFunction[0],r=n.getRedValue(e),a=n.getGreenValue(e),i=n.getBlueValue(e);return[r,a,i,this.opacity]}}class Fle{constructor(e){this.actor=e}getInputData(){return this.actor.getImage()}}class Vle{constructor(e,n){this.canvasProperties=new Ule(this),this.visibility=!1,this.mapper=new Fle(this),this.className="CanvasActor",this.derivedImage=n,this.viewport=e}renderRLE(e,n,r){const{width:a,height:i}=this.image;let{canvas:o}=this;(!o||o.width!==a||o.height!==i)&&(this.canvas=o=new window.OffscreenCanvas(a,i));const s=o.getContext("2d"),c=s.createImageData(a,i),{data:l}=c;l.fill(0);const{map:u}=r;let f=1/0,v=1/0,g=-1/0,d=-1/0;for(let C=0;C<i;C++){const p=u.getRun(C,0);if(!p)continue;v=Math.min(v,C),d=Math.max(d,C);const S=C*a<<2;let I;for(const D of p){const{start:E,end:T,value:y}=D;if(y===0){I||(I=[]),I.push(p.indexOf(D));continue}f=Math.min(f,E),g=Math.max(g,T);const M=this.canvasProperties.getColor(y).map(O=>O*255);let _=S+(E<<2);for(let O=E;O<T;O++)l[_++]=M[0],l[_++]=M[1],l[_++]=M[2],l[_++]=M[3]}}if(f>a)return;const m=g-f,h=d-v;s.putImageData(c,0,0,f-1,v-1,m+2,h+2),n.drawImage(o,f,v,m,h,f,v,m,h)}setMapper(e){this.mapper=e}render(e,n){if(!this.visibility)return;const r=this.image||this.getImage(),{width:a,height:i}=r,o=r.getScalarData();if(!o)return;const{voxelManager:s}=r;if(s&&s.map.getRun){this.renderRLE(e,n,s);return}let{canvas:c}=this;(!c||c.width!==a||c.height!==i)&&(this.canvas=c=new window.OffscreenCanvas(a,i));const l=c.getContext("2d"),u=l.createImageData(a,i),{data:f}=u;let v=0,g=0,d=1/0,m=1/0,h=-1/0,C=-1/0;for(let I=0;I<i;I++)for(let D=0;D<a;D++){const E=o[v++];if(E){d=Math.min(D,d),m=Math.min(I,m),h=Math.max(D,h),C=Math.max(I,C);const T=this.canvasProperties.getColor(E);f[g]=T[0]*255,f[g+1]=T[1]*255,f[g+2]=T[2]*255,f[g+3]=127}g+=4}if(d>a)return;const p=h-d+1,S=C-m+1;l.putImageData(u,0,0,d,m,p,S),n.drawImage(c,d,m,p,S,d,m,p,S)}getClassName(){return this.className}getProperty(){return this.canvasProperties}setVisibility(e){this.visibility=e}getMapper(){return this.mapper}isA(e){return e===this.className}getImage(){if(this.image)return this.image;this.image={...this.derivedImage};const e=this.viewport.getImageData();return Object.assign(this.image,{worldToIndex:n=>e.imageData.worldToIndex(n),indexToWorld:(n,r)=>e.imageData.indexToWorld(n,r),getDimensions:()=>e.dimensions,getScalarData:()=>{var n;return(n=this.derivedImage)==null?void 0:n.getPixelData()},getDirection:()=>e.direction,getSpacing:()=>e.spacing,setOrigin:()=>null,setDerivedImage:n=>{this.derivedImage=n,this.image=null},modified:()=>null}),this.image}}const Vd=class Vd extends M1{constructor(e){super({...e,canvas:e.canvas||P0(e.element)}),this.videoWidth=0,this.videoHeight=0,this.loop=!0,this.mute=!0,this.isPlaying=!1,this.scrollSpeed=1,this.playbackRate=1,this.frameRange=[0,0],this.fps=30,this.videoCamera={panWorld:[0,0],parallelScale:1},this.voiRange={lower:0,upper:255},this.getProperties=()=>({loop:this.videoElement.loop,muted:this.videoElement.muted,playbackRate:this.playbackRate,scrollSpeed:this.scrollSpeed,voiRange:{...this.voiRange}}),this.getMiddleSliceData=()=>{throw new Error("Method not implemented.")},this.useCustomRenderingPipeline=!0,this.resetCamera=()=>(this.refreshRenderValues(),this.canvasContext.fillRect(0,0,this.canvas.width,this.canvas.height),this.isPlaying||this.renderFrame(),!0),this.getNumberOfSlices=()=>{const n=Math.round(this.videoElement.duration*this.fps/this.scrollSpeed);return isNaN(n)?this.numberOfFrames:n},this.getFrameOfReferenceUID=()=>this.videoElement.src,this.resize=()=>{const n=this.canvas,{clientWidth:r,clientHeight:a}=n;(n.width!==r||n.height!==a)&&(n.width=r,n.height=a),this.refreshRenderValues(),this.isPlaying||this.renderFrame()},this.canvasToWorld=(n,r=[0,0,0])=>{const a=this.videoCamera.panWorld,i=this.getWorldToCanvasRatio(),o=[a[0]*i,a[1]*i],s=[n[0]-o[0],n[1]-o[1]];return r.splice(0,2,s[0]/i,s[1]/i),r},this.worldToCanvas=n=>{const r=this.videoCamera.panWorld,a=this.getWorldToCanvasRatio();return[(n[0]+r[0])*a,(n[1]+r[1])*a]},this.getRotation=()=>0,this.canvasToIndex=n=>{const r=this.getTransform();return r.invert(),r.transformPoint(n.map(a=>a*devicePixelRatio))},this.indexToCanvas=n=>this.getTransform().transformPoint(n).map(a=>a/devicePixelRatio),this.customRenderViewportToCanvas=()=>{this.renderFrame()},this.renderFrame=()=>{var s;const n=window.devicePixelRatio||1,a=this.getTransform().getMatrix(),i=this.canvasContext;i.resetTransform(),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.transform(a[0]/n,a[1]/n,a[2]/n,a[3]/n,a[4]/n,a[5]/n),i.drawImage(this.videoElement,0,0,this.videoWidth,this.videoHeight);for(const c of this.getActors())c.actor.render(this,this.canvasContext);this.canvasContext.resetTransform(),Dt(this.element,vt.STACK_NEW_IMAGE,{element:this.element,viewportId:this.id,viewport:this,renderingEngineId:this.renderingEngineId,time:this.videoElement.currentTime,duration:this.videoElement.duration}),Dt(this.element,vt.IMAGE_RENDERED,{element:this.element,viewportId:this.id,viewport:this,imageIndex:this.getCurrentImageIdIndex(),numberOfSlices:this.numberOfFrames,renderingEngineId:this.renderingEngineId,time:this.videoElement.currentTime,duration:this.videoElement.duration}),(s=this.initialRender)==null||s.call(this);const o=this.getFrameNumber();this.isPlaying&&(o<this.frameRange[0]?this.setFrameNumber(this.frameRange[0]):o>this.frameRange[1]&&(this.loop?this.setFrameNumber(this.frameRange[0]):this.pause()))},this.renderWhilstPlaying=()=>{this.renderFrame(),this.isPlaying&&requestAnimationFrame(this.renderWhilstPlaying)},this.canvasContext=this.canvas.getContext("2d"),this.renderingEngineId=e.renderingEngineId,this.element.setAttribute("data-viewport-uid",this.id),this.element.setAttribute("data-rendering-engine-uid",this.renderingEngineId),this.videoElement=document.createElement("video"),this.videoElement.muted=this.mute,this.videoElement.loop=this.loop,this.videoElement.autoplay=!0,this.videoElement.crossOrigin="anonymous",this.addEventListeners(),this.resize()}static get useCustomRenderingPipeline(){return!0}addEventListeners(){this.canvas.addEventListener(vt.ELEMENT_DISABLED,this.elementDisabledHandler)}removeEventListeners(){this.canvas.removeEventListener(vt.ELEMENT_DISABLED,this.elementDisabledHandler)}elementDisabledHandler(){this.removeEventListeners(),this.videoElement.remove()}getImageDataMetadata(e){const n=typeof e=="string"?e:e.imageId,r=Lt(po.IMAGE_PLANE,n);let a=r.rowCosines,i=r.columnCosines;(r.usingDefaultValues||a==null||i==null)&&(a=[1,0,0],i=[0,1,0]);const s=qt(a[0],a[1],a[2]),c=qt(i[0],i[1],i[2]),{rows:l,columns:u}=r,f=Xe();gr(f,s,c);let v=r.imagePositionPatient;v==null&&(v=[0,0,0]);const g=r.columnPixelSpacing||1,d=r.rowPixelSpacing||1,m=r.columns,h=r.rows,C=1,p=1;return this.hasPixelSpacing=!!r.columnPixelSpacing,{bitsAllocated:8,numberOfComponents:3,origin:v,rows:l,columns:u,direction:[...s,...c,...f],dimensions:[m,h,p],spacing:[g,d,C],hasPixelSpacing:this.hasPixelSpacing,numVoxels:m*h*p,imagePlaneModule:r}}setDataIds(e,n){var r;this.setVideo(e[0],(((r=n.viewReference)==null?void 0:r.sliceIndex)||0)+1)}setVideo(e,n){this.imageId=Array.isArray(e)?e[0]:e;const r=Lt(po.IMAGE_URL,e);if(!(r!=null&&r.rendered))throw new Error(`Video Image ID ${e} does not have a rendered video view`);const{rendered:a}=r,i=Lt(po.GENERAL_SERIES,e);this.modality=i==null?void 0:i.Modality,this.metadata=this.getImageDataMetadata(e);let{cineRate:o,numberOfFrames:s}=Lt(po.CINE,e);return this.numberOfFrames=s,this.setVideoURL(a).then(()=>((!s||s===1)&&(s=Math.round(this.videoElement.duration*(o||30))),o||(o=Math.round(s/this.videoElement.duration)),this.fps=o,this.numberOfFrames=s,this.setFrameRange([1,s]),this.initialRender=()=>{this.initialRender=null,this.pause(),this.setFrameNumber(n||1)},new Promise(c=>{window.setTimeout(()=>{this.setFrameNumber(n||1),c(this)},25)})))}async setVideoURL(e){return new Promise(n=>{this.videoElement.src=e,this.videoElement.preload="auto";const r=()=>{this.videoWidth=this.videoElement.videoWidth,this.videoHeight=this.videoElement.videoHeight,this.videoElement.removeEventListener("loadedmetadata",r),this.refreshRenderValues(),n(!0)};this.videoElement.addEventListener("loadedmetadata",r)})}getImageIds(){const e=new Array(this.numberOfFrames),n=this.imageId.replace(/[0-9]+$/,"");for(let r=0;r<this.numberOfFrames;r++)e[r]=`${n}${r+1}`;return e}togglePlayPause(){return this.isPlaying?(this.pause(),!1):(this.play(),!0)}async play(){try{this.isPlaying||(this.isPlaying=!0,await this.videoElement.play(),this.renderWhilstPlaying())}catch{}}pause(){try{this.isPlaying=!1,this.videoElement.pause()}catch{}}async scroll(e=1){await this.pause();const n=this.videoElement,r=this.renderFrame,i=n.currentTime+e*this.scrollSpeed/this.fps;n.currentTime=i;const o=s=>{r(),n.removeEventListener("seeked",o)};n.addEventListener("seeked",o)}async start(){const e=this.videoElement,n=this.renderFrame;if(e.currentTime=0,e.paused){const r=a=>{n(),e.removeEventListener("seeked",r)};e.addEventListener("seeked",r)}}async end(){const e=this.videoElement,n=this.renderFrame;if(e.currentTime=e.duration,e.paused){const r=a=>{n(),e.removeEventListener("seeked",r)};e.addEventListener("seeked",r)}}async setTime(e){const n=this.videoElement,r=this.renderFrame;if(n.currentTime=e,n.paused){const a=i=>{r(),n.removeEventListener("seeked",a)};n.addEventListener("seeked",a)}}getSliceViewInfo(){throw new Error("Method not implemented.")}async setFrameNumber(e){this.setTime((e-1)/this.fps)}setFrameRange(e){if(!e){this.frameRange=[1,this.numberOfFrames];return}e.length!==2||e[0]===e[1]||(this.frameRange=[e[0],e[1]])}getFrameRange(){return this.frameRange}setProperties(e){e.loop!==void 0&&(this.videoElement.loop=e.loop),e.muted!==void 0&&(this.videoElement.muted=e.muted),e.playbackRate!==void 0&&this.setPlaybackRate(e.playbackRate),e.scrollSpeed!==void 0&&this.setScrollSpeed(e.scrollSpeed),e.voiRange&&this.setVOI(e.voiRange)}setPlaybackRate(e=1){if(this.playbackRate=e,e<.0625){this.pause();return}this.videoElement&&(this.videoElement.playbackRate=e,this.play())}setScrollSpeed(e=1,n=Xd.FRAME){this.scrollSpeed=n===Xd.SECOND?e*this.fps:e}resetProperties(){this.setProperties({loop:!1,muted:!0})}getScalarData(){var i;if(((i=this.scalarData)==null?void 0:i.frameNumber)===this.getFrameNumber())return this.scalarData;if(!this.videoElement||!this.videoElement.videoWidth||!this.videoElement.videoHeight){console.debug("Video not ready yet, returning empty scalar data");const o=new Uint8ClampedArray;return o.getRange=()=>[0,255],o.frameNumber=-1,o}const e=document.createElement("canvas");e.width=this.videoElement.videoWidth,e.height=this.videoElement.videoHeight;const n=e.getContext("2d");n.drawImage(this.videoElement,0,0);const a=n.getImageData(0,0,e.width,e.height).data;return a.getRange=()=>[0,255],a.frameNumber=this.getFrameNumber(),this.scalarData=a,a}getImageData(){const{metadata:e}=this,n=e.spacing,r={getDirection:()=>e.direction,getDimensions:()=>e.dimensions,getRange:()=>[0,255],getScalarData:()=>this.getScalarData(),getSpacing:()=>e.spacing,worldToIndex:i=>{const o=this.worldToCanvas(i),s=this.canvasToIndex(o);return[s[0],s[1],0]},indexToWorld:(i,o)=>{const s=this.indexToCanvas([i[0],i[1]]);return this.canvasToWorld(s,o)}},a={dimensions:e.dimensions,spacing:n,origin:e.origin,direction:e.direction,metadata:{Modality:this.modality,FrameOfReferenceUID:e.FrameOfReferenceUID},getScalarData:()=>this.getScalarData(),scalarData:this.getScalarData(),imageData:r,voxelManager:{forEach:(i,o)=>II(o.imageData,{pointInShapeFn:o.isInObject??(()=>!0),callback:i,boundsIJK:o.boundsIJK,returnPoints:o.returnPoints??!1})},hasPixelSpacing:this.hasPixelSpacing,calibration:this.calibration,preScale:{scaled:!1}};return Object.defineProperty(r,"scalarData",{get:()=>this.getScalarData(),enumerable:!0}),a}hasImageURI(e){const n=e.match(Vd.frameRangeExtractor),r=n?e.substring(0,n.index):e;return this.imageId.includes(r)}setVOI(e){this.voiRange=e,this.setColorTransform()}setWindowLevel(e=256,n=128){const r=n-e/2,a=n+e/2-1;this.setVOI({lower:r,upper:a}),this.setColorTransform()}setAverageWhite(e){this.averageWhite=e,this.setColorTransform()}setColorTransform(){if(!this.voiRange&&!this.averageWhite){this.feFilter=null;return}const e=this.averageWhite||[255,255,255],n=Math.max(...e),r=e.map(c=>n/c),{lower:a=0,upper:i=255}=this.voiRange||{},o=(i-a+1)/255,s=a/255;this.feFilter=`url('data:image/svg+xml,      <svg xmlns="http://www.w3.org/2000/svg">        <filter id="colour" color-interpolation-filters="linearRGB">        <feColorMatrix type="matrix"         values="          ${r[0]*o} 0 0 0 ${s}           0 ${r[1]*o} 0 0 ${s}           0 0 ${r[2]*o} 0 ${s}           0 0 0 1 0" />        </filter>      </svg>#colour')`,this.canvas.style.filter=this.feFilter}setCamera(e){const{parallelScale:n,focalPoint:r}=e;if(n&&(this.videoCamera.parallelScale=this.element.clientHeight/2/n),r!==void 0){const a=this.worldToCanvas(r),i=[this.element.clientWidth/2,this.element.clientHeight/2],o=[(a[0]-i[0])/this.videoCamera.parallelScale,(a[1]-i[1])/this.videoCamera.parallelScale];this.videoCamera.panWorld=[this.videoCamera.panWorld[0]-o[0],this.videoCamera.panWorld[1]-o[1]]}this.canvasContext.fillStyle="rgba(0,0,0,1)",this.canvasContext.fillRect(0,0,this.canvas.width,this.canvas.height),this.isPlaying||this.renderFrame()}getCurrentImageId(){return this.imageId.replace("/frames/1",this.isPlaying?`/frames/${this.frameRange[0]}-${this.frameRange[1]}`:`/frames/${this.getFrameNumber()}`)}getViewReferenceId(e={}){const{sliceIndex:n}=e;return n===void 0?`videoId:${this.getCurrentImageId()}`:Array.isArray(n)?`videoId:${this.imageId.substring(0,this.imageId.length-1)}${n[0]+1}-${n[1]+1}`:`videoId:${this.imageId.replace("/frames/1",`/frames/${1+n}`)}`}isReferenceViewable(e,n={}){let{imageURI:r}=n;const{referencedImageId:a,sliceIndex:i}=e;if(!super.isReferenceViewable(e))return!1;const o=this.getCurrentImageId();if(!r){const f=o.indexOf(":");r=o.substring(f+1,o.length-1)}if(n.withNavigation)return!0;const s=this.getSliceIndex();if(Array.isArray(i))return s>=i[0]&&s<=i[1];if(i!==void 0)return s===i;if(!a)return!1;const c=a.match(Vd.frameRangeExtractor);if(!c||!c[2])return!0;const l=c[2].split("-").map(f=>Number(f)),u=s+1;return l[0]<=u&&u<=(l[1]??l[0])}setViewReference(e){typeof e.sliceIndex=="number"?this.setFrameNumber(e.sliceIndex+1):Array.isArray(e.sliceIndex)&&this.setFrameRange(e.sliceIndex)}getViewReference(e){let n=(e==null?void 0:e.sliceIndex)??this.getSliceIndex();return n||(n=this.isPlaying?[this.frameRange[0]-1,this.frameRange[1]-1]:this.getCurrentImageIdIndex()),{...super.getViewReference(e),referencedImageId:this.getViewReferenceId(e),sliceIndex:n}}getFrameNumber(){return 1+this.getCurrentImageIdIndex()}getCurrentImageIdIndex(){return Math.round(this.videoElement.currentTime*this.fps)}getSliceIndex(){return this.getCurrentImageIdIndex()/this.scrollSpeed}getCamera(){const{parallelScale:e}=this.videoCamera,n=[this.element.clientWidth/2,this.element.clientHeight/2];return{parallelProjection:!0,focalPoint:this.canvasToWorld(n),position:[0,0,0],viewUp:[0,-1,0],parallelScale:this.element.clientHeight/2/e,viewPlaneNormal:[0,0,1]}}getFrameRate(){return this.fps}getPan(){const e=this.videoCamera.panWorld;return[e[0],e[1]]}refreshRenderValues(){let e=this.canvas.offsetWidth/this.videoWidth;this.videoHeight*e>this.canvas.height&&(e=this.canvas.offsetHeight/this.videoHeight);const n=Math.floor(this.videoWidth*e),r=Math.floor(this.videoHeight*e),a=(this.canvas.offsetWidth-n)/2,i=(this.canvas.offsetHeight-r)/2,o=a/e,s=i/e;this.videoCamera.panWorld=[o,s],this.videoCamera.parallelScale=e}getWorldToCanvasRatio(){return this.videoCamera.parallelScale}getCanvasToWorldRatio(){return 1/this.videoCamera.parallelScale}getTransform(){const e=this.videoCamera.panWorld,n=window.devicePixelRatio||1,r=this.getWorldToCanvasRatio(),a=this.getCanvasToWorldRatio(),i=[this.canvas.offsetWidth/2,this.canvas.offsetHeight/2],o=[i[0]*a,i[1]*a],s=new kv;return s.scale(n,n),s.translate(i[0],i[1]),s.scale(r,r),s.translate(e[0],e[1]),s.translate(-o[0],-o[1]),s}updateCameraClippingPlanesAndRange(){}addImages(e){const n=this.getActors();e.forEach(r=>{const{imageId:a,...i}=r,o=Ye.getImage(a),s=this.createActorMapper(o),c=r.actorUID??Cr();s&&(n.push({uid:c,actor:s,referencedId:a,...i}),r.callback&&r.callback({imageActor:s,imageId:a}))}),this.setActors(n)}createActorMapper(e){return new Vle(this,e)}};Vd.frameRangeExtractor=/(\/frames\/|[&?]frameNumber=)([^/&?]*)/i;let vv=Vd;const kle=`
.DicomMicroscopyViewer {
  --ol-partial-background-color: rgba(127, 127, 127, 0.7);
  --ol-foreground-color: #000000;
  --ol-subtle-foreground-color: #000;
  --ol-subtle-background-color: rgba(78, 78, 78, 0.5);
}

.DicomMicroscopyViewer .ol-box {
  box-sizing: border-box;
  border-radius: 2px;
  border: 1.5px solid var(--ol-background-color);
  background-color: var(--ol-partial-background-color);
}

.DicomMicroscopyViewer .ol-mouse-position {
  top: 8px;
  right: 8px;
  position: absolute;
}

.DicomMicroscopyViewer .ol-scale-line {
  background: var(--ol-partial-background-color);
  border-radius: 4px;
  bottom: 8px;
  left: 8px;
  padding: 2px;
  position: absolute;
}

.DicomMicroscopyViewer .ol-scale-line-inner {
  border: 1px solid var(--ol-subtle-foreground-color);
  border-top: none;
  color: var(--ol-foreground-color);
  font-size: 10px;
  text-align: center;
  margin: 1px;
  will-change: contents, width;
  transition: all 0.25s;
}

.DicomMicroscopyViewer .ol-scale-bar {
  position: absolute;
  bottom: 8px;
  left: 8px;
}

.DicomMicroscopyViewer .ol-scale-bar-inner {
  display: flex;
}

.DicomMicroscopyViewer .ol-scale-step-marker {
  width: 1px;
  height: 15px;
  background-color: var(--ol-foreground-color);
  float: right;
  z-index: 10;
}

.DicomMicroscopyViewer .ol-scale-step-text {
  position: absolute;
  bottom: -5px;
  font-size: 10px;
  z-index: 11;
  color: var(--ol-foreground-color);
  text-shadow:
    -1.5px 0 var(--ol-partial-background-color),
    0 1.5px var(--ol-partial-background-color),
    1.5px 0 var(--ol-partial-background-color),
    0 -1.5px var(--ol-partial-background-color);
}

.DicomMicroscopyViewer .ol-scale-text {
  position: absolute;
  font-size: 12px;
  text-align: center;
  bottom: 25px;
  color: var(--ol-foreground-color);
  text-shadow:
    -1.5px 0 var(--ol-partial-background-color),
    0 1.5px var(--ol-partial-background-color),
    1.5px 0 var(--ol-partial-background-color),
    0 -1.5px var(--ol-partial-background-color);
}

.DicomMicroscopyViewer .ol-scale-singlebar {
  position: relative;
  height: 10px;
  z-index: 9;
  box-sizing: border-box;
  border: 1px solid var(--ol-foreground-color);
}

.DicomMicroscopyViewer .ol-scale-singlebar-even {
  background-color: var(--ol-subtle-foreground-color);
}

.DicomMicroscopyViewer .ol-scale-singlebar-odd {
  background-color: var(--ol-background-color);
}

.DicomMicroscopyViewer .ol-unsupported {
  display: none;
}

.DicomMicroscopyViewer .ol-viewport,
.DicomMicroscopyViewer .ol-unselectable {
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  user-select: none;
  -webkit-tap-highlight-color: transparent;
}

.DicomMicroscopyViewer .ol-viewport canvas {
  all: unset;
}

.DicomMicroscopyViewer .ol-selectable {
  -webkit-touch-callout: default;
  -webkit-user-select: text;
  -moz-user-select: text;
  user-select: text;
}

.DicomMicroscopyViewer .ol-grabbing {
  cursor: -webkit-grabbing;
  cursor: -moz-grabbing;
  cursor: grabbing;
}

.DicomMicroscopyViewer .ol-grab {
  cursor: move;
  cursor: -webkit-grab;
  cursor: -moz-grab;
  cursor: grab;
}

.DicomMicroscopyViewer .ol-control {
  position: absolute;
  background-color: var(--ol-subtle-background-color);
  border-radius: 4px;
}

.DicomMicroscopyViewer .ol-zoom {
  top: 0.5em;
  left: 0.5em;
}

.DicomMicroscopyViewer .ol-rotate {
  top: 0.5em;
  right: 0.5em;
  transition:
    opacity 0.25s linear,
    visibility 0s linear;
}

.DicomMicroscopyViewer .ol-rotate.ol-hidden {
  opacity: 0;
  visibility: hidden;
  transition:
    opacity 0.25s linear,
    visibility 0s linear 0.25s;
}

.DicomMicroscopyViewer .ol-zoom-extent {
  top: 4.643em;
  left: 0.5em;
}

.DicomMicroscopyViewer .ol-full-screen {
  right: 0.5em;
  top: 0.5em;
}

.DicomMicroscopyViewer .ol-control button {
  display: block;
  margin: 1px;
  padding: 0;
  color: var(--ol-subtle-foreground-color);
  font-weight: bold;
  text-decoration: none;
  font-size: inherit;
  text-align: center;
  height: 1.375em;
  width: 1.375em;
  line-height: 0.4em;
  background-color: var(--ol-background-color);
  border: none;
  border-radius: 2px;
}

.DicomMicroscopyViewer .ol-control button::-moz-focus-inner {
  border: none;
  padding: 0;
}

.DicomMicroscopyViewer .ol-zoom-extent button {
  line-height: 1.4em;
}

.DicomMicroscopyViewer .ol-compass {
  display: block;
  font-weight: normal;
  will-change: transform;
}

.DicomMicroscopyViewer .ol-touch .ol-control button {
  font-size: 1.5em;
}

.DicomMicroscopyViewer .ol-touch .ol-zoom-extent {
  top: 5.5em;
}

.DicomMicroscopyViewer .ol-control button:hover,
.DicomMicroscopyViewer .ol-control button:focus {
  text-decoration: none;
  outline: 1px solid var(--ol-subtle-foreground-color);
  color: var(--ol-foreground-color);
}

.DicomMicroscopyViewer .ol-zoom .ol-zoom-in {
  border-radius: 2px 2px 0 0;
}

.DicomMicroscopyViewer .ol-zoom .ol-zoom-out {
  border-radius: 0 0 2px 2px;
}

.DicomMicroscopyViewer .ol-attribution {
  text-align: right;
  bottom: 0.5em;
  right: 0.5em;
  max-width: calc(100% - 1.3em);
  display: flex;
  flex-flow: row-reverse;
  align-items: center;
}

.DicomMicroscopyViewer .ol-attribution a {
  color: var(--ol-subtle-foreground-color);
  text-decoration: none;
}

.DicomMicroscopyViewer .ol-attribution ul {
  margin: 0;
  padding: 1px 0.5em;
  color: var(--ol-foreground-color);
  text-shadow: 0 0 2px var(--ol-background-color);
  font-size: 12px;
}

.DicomMicroscopyViewer .ol-attribution li {
  display: inline;
  list-style: none;
}

.DicomMicroscopyViewer .ol-attribution li:not(:last-child):after {
  content: ' ';
}

.DicomMicroscopyViewer .ol-attribution img {
  max-height: 2em;
  max-width: inherit;
  vertical-align: middle;
}

.DicomMicroscopyViewer .ol-attribution button {
  flex-shrink: 0;
}

.DicomMicroscopyViewer .ol-attribution.ol-collapsed ul {
  display: none;
}

.DicomMicroscopyViewer .ol-attribution:not(.ol-collapsed) {
  background: var(--ol-partial-background-color);
}

.DicomMicroscopyViewer .ol-attribution.ol-uncollapsible {
  bottom: 0;
  right: 0;
  border-radius: 4px 0 0;
}

.DicomMicroscopyViewer .ol-attribution.ol-uncollapsible img {
  margin-top: -0.2em;
  max-height: 1.6em;
}

.DicomMicroscopyViewer .ol-attribution.ol-uncollapsible button {
  display: none;
}

.DicomMicroscopyViewer .ol-zoomslider {
  top: 4.5em;
  left: 0.5em;
  height: 200px;
}

.DicomMicroscopyViewer .ol-zoomslider button {
  position: relative;
  height: 10px;
}

.DicomMicroscopyViewer .ol-touch .ol-zoomslider {
  top: 5.5em;
}

.DicomMicroscopyViewer .ol-overviewmap {
  left: 0.5em;
  bottom: 0.5em;
}

.DicomMicroscopyViewer .ol-overviewmap.ol-uncollapsible {
  bottom: 0;
  left: 0;
  border-radius: 0 4px 0 0;
}

.DicomMicroscopyViewer .ol-overviewmap .ol-overviewmap-map,
.DicomMicroscopyViewer .ol-overviewmap button {
  display: block;
}

.DicomMicroscopyViewer .ol-overviewmap .ol-overviewmap-map {
  border: 1px solid var(--ol-subtle-foreground-color);
  height: 150px;
  width: 150px;
}

.DicomMicroscopyViewer .ol-overviewmap:not(.ol-collapsed) button {
  bottom: 0;
  left: 0;
  position: absolute;
}

.DicomMicroscopyViewer .ol-overviewmap.ol-collapsed .ol-overviewmap-map,
.DicomMicroscopyViewer .ol-overviewmap.ol-uncollapsible button {
  display: none;
}

.DicomMicroscopyViewer .ol-overviewmap:not(.ol-collapsed) {
  background: var(--ol-subtle-background-color);
}

.DicomMicroscopyViewer .ol-overviewmap-box {
  border: 0.5px dotted var(--ol-subtle-foreground-color);
}

.DicomMicroscopyViewer .ol-overviewmap .ol-overviewmap-box:hover {
  cursor: move;
}

@layout-header-background: #007ea3;
@primary-color: #007ea3;
@processing-color: #8cb8c6;
@success-color: #3f9c35;
@warning-color: #eeaf30;
@error-color: #96172e;
@font-size-base: 14px;

.DicomMicroscopyViewer .ol-tooltip {
  font-size: 16px !important;
}
`,Uw=Symbol.for("map"),Gle="postrender",Lf=class Lf extends M1{constructor(e){super({...e,canvas:e.canvas||P0(e.element)}),this.internalCamera={rotation:0,centerIndex:[0,0],extent:[0,-2,1,-1],xSpacing:1,ySpacing:1,resolution:1,zoom:1},this.voiRange={lower:0,upper:255},this.getProperties=()=>({}),this.resetCamera=()=>!0,this.getNumberOfSlices=()=>1,this.getFrameOfReferenceUID=()=>this.frameOfReferenceUID,this.resize=()=>{const r=this.canvas,{clientWidth:a,clientHeight:i}=r;(r.width!==a||r.height!==i)&&(r.width=a,r.height=i),this.refreshRenderValues()},this.canvasToWorld=r=>{if(!this.metadata)return;const[a,i]=this.canvasToIndex(r),{origin:o,spacing:s,direction:c}=this.getImageData(),l=qt(0,0,0),u=c.slice(0,3),f=c.slice(3,6);return Hn(l,o,u,a*s[0]),Hn(l,l,f,i*s[1]),[l[0],l[1],l[2]]},this.worldToCanvas=r=>{if(!this.metadata)return;const{spacing:a,direction:i,origin:o}=this.metadata,s=i.slice(0,3),c=i.slice(3,6),l=fr([0,0,0],r,o),u=[Gt(l,s)/a[0],Gt(l,c)/a[1]];return this.indexToCanvas(u)},this.postrender=()=>{this.refreshRenderValues(),Dt(this.element,vt.IMAGE_RENDERED,{element:this.element,viewportId:this.id,viewport:this,renderingEngineId:this.renderingEngineId})},this.getRotation=()=>0,this.canvasToIndex=r=>{const a=this.getTransform();return a.invert(),a.transformPoint(r)},this.indexToCanvas=r=>this.getTransform().transformPoint(r),this.customRenderViewportToCanvas=()=>{},this.getImageIds=()=>[this.imageIds[0]],this.renderingEngineId=e.renderingEngineId,this.element.setAttribute("data-viewport-uid",this.id),this.element.setAttribute("data-rendering-engine-uid",this.renderingEngineId),this.element.style.position="relative",this.microscopyElement=document.createElement("div"),this.microscopyElement.setAttribute("class","DicomMicroscopyViewer"),this.microscopyElement.id=Cr(),this.microscopyElement.innerText="Initial",this.microscopyElement.style.background="grey",this.microscopyElement.style.width="100%",this.microscopyElement.style.height="100%",this.microscopyElement.style.position="absolute",this.microscopyElement.style.left="0",this.microscopyElement.style.top="0";const n=this.element.firstElementChild;n.insertBefore(this.microscopyElement,n.childNodes[1]),this.addEventListeners(),this.addWidget("DicomMicroscopyViewer",{getEnabled:()=>!!this.viewer,setEnabled:()=>{this.elementDisabledHandler()}}),this.resize()}static get useCustomRenderingPipeline(){return!0}addEventListeners(){this.canvas.addEventListener(vt.ELEMENT_DISABLED,this.elementDisabledHandler)}removeEventListeners(){this.canvas.removeEventListener(vt.ELEMENT_DISABLED,this.elementDisabledHandler)}elementDisabledHandler(){var n;this.removeEventListeners(),(n=this.viewer)==null||n.cleanup(),this.viewer=null,this.element.firstElementChild.removeChild(this.microscopyElement),this.microscopyElement=null}getImageDataMetadata(e=0){var M;const n=this.metadataDicomweb.reduce((_,O)=>(_==null?void 0:_.NumberOfFrames)<O.NumberOfFrames?O:_),{TotalPixelMatrixColumns:r,TotalPixelMatrixRows:a,ImageOrientationSlide:i,ImagedVolumeWidth:o,ImagedVolumeHeight:s,ImagedVolumeDepth:c}=n,l=Lt(po.IMAGE_PLANE,this.imageIds[e]);let u=i.slice(0,3),f=i.slice(3,6);(u==null||f==null)&&(u=[1,0,0],f=[0,1,0]);const v=qt(u[0],u[1],u[2]),g=qt(f[0],f[1],f[2]),d=Xe();gr(d,v,g);const{XOffsetInSlideCoordinateSystem:m=0,YOffsetInSlideCoordinateSystem:h=0,ZOffsetInSlideCoordinateSystem:C=0}=((M=n.TotalPixelMatrixOriginSequence)==null?void 0:M[0])||{},p=[m,h,C],S=o/r,I=s/a,D=r,E=a,T=c,y=1;return this.hasPixelSpacing=!!(o&&s),{bitsAllocated:8,numberOfComponents:3,origin:p,direction:[...v,...g,...d],dimensions:[D,E,y],spacing:[S,I,T],hasPixelSpacing:this.hasPixelSpacing,numVoxels:D*E*y,imagePlaneModule:l}}async setFrameNumber(e){}setProperties(e){}resetProperties(){this.setProperties({})}getScalarData(){return null}getImageData(){const{metadata:e}=this;if(!e)return null;const{spacing:n}=e,r={getDirection:()=>e.direction,getDimensions:()=>e.dimensions,getRange:()=>[0,255],getScalarData:()=>this.getScalarData(),getSpacing:()=>e.spacing,worldToIndex:i=>{const o=this.worldToCanvas(i),s=this.canvasToIndex(o);return[s[0],s[1],0]},indexToWorld:i=>{const o=this.indexToCanvas([i[0],i[1]]);return this.canvasToWorld(o)}};return{dimensions:e.dimensions,spacing:n,numberOfComponents:3,origin:e.origin,direction:e.direction,metadata:{Modality:this.modality,FrameOfReferenceUID:this.frameOfReferenceUID},hasPixelSpacing:this.hasPixelSpacing,calibration:this.calibration,preScale:{scaled:!1},scalarData:this.getScalarData(),imageData:r,voxelManager:{forEach:(i,o)=>II(o.imageData,{pointInShapeFn:o.isInObject??(()=>!0),callback:i,boundsIJK:o.boundsIJK,returnPoints:o.returnPoints??!1})}}}hasImageURI(e){return!0}setCamera(e){const n=this.getCamera(),{parallelScale:r,focalPoint:a}=e,i=this.getView(),{xSpacing:o}=this.internalCamera;if(r){const c=this.element.clientHeight/r,l=1/o/c;i.setResolution(l)}if(a){const c=this.worldToCanvas(a),l=this.canvasToIndex(c);i.setCenter(l)}const s=this.getCamera();this.triggerCameraModifiedEventIfNecessary(n,s)}getCurrentImageId(){return this.imageIds[0]}getFrameNumber(){return 1}getCamera(){this.refreshRenderValues();const{resolution:e,xSpacing:n}=this.internalCamera,r=e*n,a=[this.element.clientWidth/2,this.element.clientHeight/2],i=this.canvasToWorld(a);return{parallelProjection:!0,focalPoint:i,position:i,viewUp:[0,-1,0],parallelScale:this.element.clientHeight*r,viewPlaneNormal:[0,0,1]}}setDataIds(e,n){(n==null?void 0:n.miniNavigationOverlay)!==!1&&Lf.addMiniNavigationOverlayCss();const r=(n==null?void 0:n.webClient)||Lt(po.WADO_WEB_CLIENT,e[0]);if(!r)throw new Error(`To use setDataIds on WSI data, you must provide metaData.webClient for ${e[0]}`);return this.setWSI(e,r)}async setWSI(e,n){this.microscopyElement.style.background="black",this.microscopyElement.innerText="Loading",this.imageIds=e;const r=await Lf.getDicomMicroscopyViewer();this.frameOfReferenceUID=null;const a=this.imageIds.map(s=>{var f,v,g;const c=n.getDICOMwebMetadata(s);Object.defineProperty(c,"isMultiframe",{value:c.isMultiframe,enumerable:!1}),Object.defineProperty(c,"frameNumber",{value:void 0,enumerable:!1});const l=(f=c["00080008"])==null?void 0:f.Value;(l==null?void 0:l.length)===1&&(c["00080008"].Value=l[0].split("\\"));const u=(g=(v=c["00200052"])==null?void 0:v.Value)==null?void 0:g[0];return this.frameOfReferenceUID?u!==this.frameOfReferenceUID&&(c["00200052"].Value=[this.frameOfReferenceUID]):this.frameOfReferenceUID=u,c}),i=[];a.forEach(s=>{const c=new r.metadata.VLWholeSlideMicroscopyImage({metadata:s}),l=c.ImageType[2];l==="VOLUME"||l==="THUMBNAIL"?i.push(c):console.log("Unknown image type",c.ImageType)}),this.metadataDicomweb=i;const o=new r.viewer.VolumeImageViewer({client:n,metadata:i,controls:["overview","position"],retrieveRendered:!1,bindings:{}});o.render({container:this.microscopyElement}),this.metadata=this.getImageDataMetadata(),o.deactivateDragPanInteraction(),this.viewer=o,this.map=o[Uw],this.map.on(Gle,this.postrender),this.resize(),this.microscopyElement.innerText="",Object.assign(this.microscopyElement.style,{"--ol-partial-background-color":"rgba(127, 127, 127, 0.7)","--ol-foreground-color":"#000000","--ol-subtle-foreground-color":"#000","--ol-subtle-background-color":"rgba(78, 78, 78, 0.5)",background:"none"})}scroll(e){const n=this.getCamera();this.setCamera({parallelScale:n.parallelScale*(1+.1*e)})}getSliceIndex(){return 0}getView(){if(!this.viewer)return;const e=this.viewer[Uw],n=window;return n.map=e,n.viewer=this.viewer,n.view=e==null?void 0:e.getView(),n.wsi=this,e==null?void 0:e.getView()}refreshRenderValues(){const e=this.getView();if(!e)return;const n=e.getResolution();if(!n||n<o0)return;const r=e.getCenter(),a=e.getProjection().getExtent(),i=e.getRotation(),o=e.getZoom(),{metadata:{spacing:[s,c]}}=this,l=1/n/s;Object.assign(this.internalCamera,{extent:a,centerIndex:r,worldToCanvasRatio:l,xSpacing:s,ySpacing:c,resolution:n,rotation:i,zoom:o})}getZoom(){var e;return(e=this.getView())==null?void 0:e.getZoom()}setZoom(e){var n;(n=this.getView())==null||n.setZoom(e)}getTransform(){this.refreshRenderValues();const{centerIndex:e,resolution:n,rotation:r}=this.internalCamera,a=[this.canvas.width/2,this.canvas.height/2],i=new kv;return i.translate(a[0],a[1]),i.rotate(r),i.scale(1/n,-1/n),i.translate(-e[0],-e[1]),i}getViewReferenceId(){return`imageId:${this.getCurrentImageId()}`}getCurrentImageIdIndex(){return 0}static addMiniNavigationOverlayCss(){if(document.getElementById(this.overlayCssId))return;const e=document.createElement("style");e.innerText=kle,e.setAttribute("id",this.overlayCssId),document.getElementsByTagName("head")[0].append(e)}};Lf.getDicomMicroscopyViewer=async()=>aU("dicom-microscopy-viewer"),Lf.overlayCssId="overlayCss";let YS=Lf;const SF={[Kr.ORTHOGRAPHIC]:yr,[Kr.PERSPECTIVE]:yr,[Kr.STACK]:Xr,[Kr.VOLUME_3D]:Q5,[Kr.VIDEO]:vv,[Kr.WHOLE_SLIDE]:YS};function sf(t){return SF[t].useCustomRenderingPipeline}const Fw=2;class K5{constructor(e){if(this._needsRender=new Set,this._animationFrameSet=!1,this._animationFrameHandle=null,this.renderFrameOfReference=n=>{const a=this._getViewportsAsArray().map(i=>{if(i.getFrameOfReferenceUID()===n)return i.id});this.renderViewports(a)},this._renderFlaggedViewports=()=>{this._throwIfDestroyed(),this.useCPURendering||this.performVtkDrawCall();const n=this._getViewportsAsArray(),r=[];for(let a=0;a<n.length;a++){const i=n[a];if(this._needsRender.has(i.id)){const o=this.renderViewportUsingCustomOrVtkPipeline(i);if(r.push(o),i.setRendered(),this._needsRender.delete(i.id),this._needsRender.size===0)break}}this._animationFrameSet=!1,this._animationFrameHandle=null,r.forEach(a=>{a!=null&&a.element&&Dt(a.element,vt.IMAGE_RENDERED,a)})},this.id=e||Cr(),this.useCPURendering=Hf(),Yd.set(this),!rU())throw new Error("@cornerstonejs/core is not initialized, run init() first");this.useCPURendering||(this.offscreenMultiRenderWindow=qae.newInstance(),this.offScreenCanvasContainer=document.createElement("div"),this.offscreenMultiRenderWindow.setContainer(this.offScreenCanvasContainer)),this._viewports=new Map,this.hasBeenDestroyed=!1}enableElement(e){const n=this._normalizeViewportInputEntry(e);this._throwIfDestroyed();const{element:r,viewportId:a}=n;if(!r)throw new Error("No element provided");this.getViewport(a)&&this.disableElement(a);const{type:o}=n,s=sf(o);!this.useCPURendering&&!s?this.enableVTKjsDrivenViewport(n):this.addCustomViewport(n);const c=P0(r),{background:l}=n.defaultOptions;this.fillCanvasWithBackgroundColor(c,l)}disableElement(e){this._throwIfDestroyed();const n=this.getViewport(e);if(!n){console.warn(`viewport ${e} does not exist`);return}this._resetViewport(n),!sf(n.type)&&!this.useCPURendering&&this.offscreenMultiRenderWindow.removeRenderer(e),this._removeViewport(e),n.isDisabled=!0,this._needsRender.delete(e),this.getViewports().length||this._clearAnimationFrame()}setViewports(e){const n=this._normalizeViewportInputEntries(e);this._throwIfDestroyed(),this._reset();const r=[],a=[];n.forEach(i=>{!this.useCPURendering&&!sf(i.type)?r.push(i):a.push(i)}),this.setVtkjsDrivenViewports(r),this.setCustomViewports(a),n.forEach(i=>{const o=P0(i.element),{background:s}=i.defaultOptions;this.fillCanvasWithBackgroundColor(o,s)})}resize(e=!0,n=!0){this._throwIfDestroyed();const r=this._getViewportsAsArray(),a=[],i=[];r.forEach(o=>{sf(o.type)?i.push(o):a.push(o)}),a.length&&this._resizeVTKViewports(a,n,e),i.length&&this._resizeUsingCustomResizeHandler(i,n,e)}getViewport(e){return this._viewports.get(e)}getViewports(){return this._throwIfDestroyed(),this._getViewportsAsArray()}getStackViewport(e){this._throwIfDestroyed();const n=this.getViewport(e);if(!n)throw new Error(`Viewport with Id ${e} does not exist`);if(!(n instanceof Xr))throw new Error(`Viewport with Id ${e} is not a StackViewport.`);return n}getStackViewports(){return this._throwIfDestroyed(),this.getViewports().filter(n=>n instanceof Xr)}getVolumeViewports(){this._throwIfDestroyed();const e=this.getViewports(),n=r=>r instanceof zr;return e.filter(n)}render(){const n=this.getViewports().map(r=>r.id);this._setViewportsToBeRenderedNextFrame(n)}renderViewports(e){this._setViewportsToBeRenderedNextFrame(e)}renderViewport(e){this._setViewportsToBeRenderedNextFrame([e])}destroy(){this.hasBeenDestroyed||(this.useCPURendering||(this._getViewportsAsArray().forEach(n=>{this.offscreenMultiRenderWindow.removeRenderer(n.id)}),this.offscreenMultiRenderWindow.delete(),delete this.offscreenMultiRenderWindow),this._reset(),Yd.delete(this.id),this.hasBeenDestroyed=!0)}fillCanvasWithBackgroundColor(e,n){const r=e.getContext("2d");let a;if(n){const i=n.map(o=>Math.floor(255*o));a=`rgb(${i[0]}, ${i[1]}, ${i[2]})`}else a="black";r.fillStyle=a,r.fillRect(0,0,e.width,e.height)}_normalizeViewportInputEntry(e){const{type:n,defaultOptions:r}=e;let a=r;return(!a||Object.keys(a).length===0)&&(a={background:[0,0,0],orientation:null,displayArea:null},n===Kr.ORTHOGRAPHIC&&(a={...a,orientation:xl.AXIAL})),{...e,defaultOptions:a}}_normalizeViewportInputEntries(e){const n=[];return e.forEach(r=>{n.push(this._normalizeViewportInputEntry(r))}),n}_resizeUsingCustomResizeHandler(e,n=!0,r=!0){e.forEach(a=>{typeof a.resize=="function"&&a.resize()}),e.forEach(a=>{const i=a.getCamera();a.resetCamera(),n&&a.setCamera(i)}),r&&this.render()}_resizeVTKViewports(e,n=!0,r=!0){const a=e.map(i=>P0(i.element));if(a.forEach(i=>{const o=window.devicePixelRatio||1;i.width=i.clientWidth*o,i.height=i.clientHeight*o}),a.length){const{offScreenCanvasWidth:i,offScreenCanvasHeight:o}=this._resizeOffScreenCanvas(a);this._resize(e,i,o)}e.forEach(i=>{const o=i.getCamera(),s=i.getRotation(),{flipHorizontal:c}=o;i.resetCameraForResize();const l=i.getDisplayArea();n&&(l?(c&&i.setCamera({flipHorizontal:c}),s&&i.setViewPresentation({rotation:s})):i.setCamera(o))}),r&&this.render()}enableVTKjsDrivenViewport(e){const r=this._getViewportsAsArray().filter(u=>sf(u.type)===!1),a=r.map(u=>u.canvas),i=P0(e.element);a.push(i);const{offScreenCanvasWidth:o,offScreenCanvasHeight:s}=this._resizeOffScreenCanvas(a),c=this._resize(r,o,s),l={...e,canvas:i};this.addVtkjsDrivenViewport(l,{offScreenCanvasWidth:o,offScreenCanvasHeight:s,xOffset:c})}_removeViewport(e){if(!this.getViewport(e)){console.warn(`viewport ${e} does not exist`);return}this._viewports.delete(e)}addVtkjsDrivenViewport(e,n){const{element:r,canvas:a,viewportId:i,type:o,defaultOptions:s}=e;r.tabIndex=-1;const{offScreenCanvasWidth:c,offScreenCanvasHeight:l,xOffset:u}=n,{sxStartDisplayCoords:f,syStartDisplayCoords:v,sxEndDisplayCoords:g,syEndDisplayCoords:d,sx:m,sy:h,sWidth:C,sHeight:p}=this._getViewportCoordsOnOffScreenCanvas(e,c,l,u);this.offscreenMultiRenderWindow.addRenderer({viewport:[f,v,g,d],id:i,background:s.background?s.background:[0,0,0]});const S={id:i,element:r,renderingEngineId:this.id,type:o,canvas:a,sx:m,sy:h,sWidth:C,sHeight:p,defaultOptions:s||{}};let I;if(o===Kr.STACK)I=new Xr(S);else if(o===Kr.ORTHOGRAPHIC||o===Kr.PERSPECTIVE)I=new yr(S);else if(o===Kr.VOLUME_3D)I=new Q5(S);else throw new Error(`Viewport Type ${o} is not supported`);this._viewports.set(i,I);const D={element:r,viewportId:i,renderingEngineId:this.id};I.suppressEvents||Dt(ot,vt.ELEMENT_ENABLED,D)}addCustomViewport(e){const{element:n,viewportId:r,type:a,defaultOptions:i}=e;n.tabIndex=-1;const o=P0(n),{clientWidth:s,clientHeight:c}=o;(o.width!==s||o.height!==c)&&(o.width=s,o.height=c);const l={id:r,renderingEngineId:this.id,element:n,type:a,canvas:o,sx:0,sy:0,sWidth:s,sHeight:c,defaultOptions:i||{}},u=SF[a],f=new u(l);this._viewports.set(r,f);const v={element:n,viewportId:r,renderingEngineId:this.id};Dt(ot,vt.ELEMENT_ENABLED,v)}setCustomViewports(e){e.forEach(n=>{this.addCustomViewport(n)})}setVtkjsDrivenViewports(e){if(e.length){const n=e.map(o=>P0(o.element));n.forEach(o=>{const s=window.devicePixelRatio||1,c=o.getBoundingClientRect();o.width=c.width*s,o.height=c.height*s});const{offScreenCanvasWidth:r,offScreenCanvasHeight:a}=this._resizeOffScreenCanvas(n);let i=0;for(let o=0;o<e.length;o++){const s=e[o],c=n[o],l={...s,canvas:c};this.addVtkjsDrivenViewport(l,{offScreenCanvasWidth:r,offScreenCanvasHeight:a,xOffset:i}),i+=c.width}}}_resizeOffScreenCanvas(e){const{offScreenCanvasContainer:n,offscreenMultiRenderWindow:r}=this,a=Math.max(...e.map(o=>o.height));let i=0;return e.forEach(o=>{i+=o.width}),n.width=i,n.height=a,r.resize(),{offScreenCanvasWidth:i,offScreenCanvasHeight:a}}_resize(e,n,r){let a=0;for(let i=0;i<e.length;i++){const o=e[i],{sxStartDisplayCoords:s,syStartDisplayCoords:c,sxEndDisplayCoords:l,syEndDisplayCoords:u,sx:f,sy:v,sWidth:g,sHeight:d}=this._getViewportCoordsOnOffScreenCanvas(o,n,r,a);a+=o.canvas.width,o.sx=f,o.sy=v,o.sWidth=g,o.sHeight=d,this.offscreenMultiRenderWindow.getRenderer(o.id).setViewport([s,c,l,u])}return a}_getViewportCoordsOnOffScreenCanvas(e,n,r,a){const{canvas:i}=e,{width:o,height:s}=i,c=a,l=0,u=c/n,f=l+(r-s)/r,v=o/n,g=s/r;return{sxStartDisplayCoords:u,syStartDisplayCoords:f,sxEndDisplayCoords:u+v,syEndDisplayCoords:f+g,sx:c,sy:l,sWidth:o,sHeight:s}}_getViewportsAsArray(){return Array.from(this._viewports.values())}_setViewportsToBeRenderedNextFrame(e){e.forEach(n=>{this._needsRender.add(n)}),this._render()}_render(){this._needsRender.size>0&&!this._animationFrameSet&&(this._animationFrameHandle=window.requestAnimationFrame(this._renderFlaggedViewports),this._animationFrameSet=!0)}performVtkDrawCall(){const{offscreenMultiRenderWindow:e}=this,n=e.getRenderWindow(),r=e.getRenderers();if(r.length){for(let a=0;a<r.length;a++){const{renderer:i,id:o}=r[a];this._needsRender.has(o)?i.setDraw(!0):i.setDraw(!1)}n.render();for(let a=0;a<r.length;a++)r[a].renderer.setDraw(!1)}}renderViewportUsingCustomOrVtkPipeline(e){let n;if(e.sWidth<Fw||e.sHeight<Fw){console.warn("Viewport is too small",e.sWidth,e.sHeight);return}if(sf(e.type)===!0)n=e.customRenderViewportToCanvas();else{if(this.useCPURendering)throw new Error("GPU not available, and using a viewport with no custom render pipeline.");const{offscreenMultiRenderWindow:r}=this,o=r.getOpenGLRenderWindow().get3DContext().canvas;n=this._renderViewportFromVtkCanvasToOnscreenCanvas(e,o)}return n}_renderViewportFromVtkCanvasToOnscreenCanvas(e,n){const{element:r,canvas:a,sx:i,sy:o,sWidth:s,sHeight:c,id:l,renderingEngineId:u,suppressEvents:f}=e,{width:v,height:g}=a;return a.getContext("2d").drawImage(n,i,o,s,c,0,0,v,g),{element:r,suppressEvents:f,viewportId:l,renderingEngineId:u,viewportStatus:e.viewportStatus}}_resetViewport(e){const n=this.id,{element:r,canvas:a,id:i}=e,o={element:r,viewportId:i,renderingEngineId:n};e.removeWidgets(),Dt(ot,vt.ELEMENT_DISABLED,o),r.removeAttribute("data-viewport-uid"),r.removeAttribute("data-rendering-engine-uid"),a.getContext("2d").clearRect(0,0,a.width,a.height)}_clearAnimationFrame(){window.cancelAnimationFrame(this._animationFrameHandle),this._needsRender.clear(),this._animationFrameSet=!1,this._animationFrameHandle=null}_reset(){this._getViewportsAsArray().forEach(n=>{this._resetViewport(n)}),this._clearAnimationFrame(),this._viewports=new Map}_throwIfDestroyed(){if(this.hasBeenDestroyed)throw new Error("this.destroy() has been manually called to free up memory, can not longer use this instance. Instead make a new one.")}_downloadOffScreenCanvas(){const e=this._debugRender();Ble(e)}_debugRender(){const{offscreenMultiRenderWindow:e}=this,n=e.getRenderWindow(),r=e.getRenderers();for(let c=0;c<r.length;c++)r[c].renderer.setDraw(!0);n.render();const o=e.getOpenGLRenderWindow().get3DContext().canvas,s=o.toDataURL();return this._getViewportsAsArray().forEach(c=>{const{sx:l,sy:u,sWidth:f,sHeight:v}=c,g=c.canvas,{width:d,height:m}=g;g.getContext("2d").drawImage(o,l,u,f,v,0,0,d,m)}),s}}function Ble(t){const e=document.createElement("a");e.download="viewport.png",e.href=t,document.body.appendChild(e),e.click(),document.body.removeChild(e)}class CF{constructor(e){this._color=[200,0,0],this.id=e.id,this._points=e.points,this._polys=e.polys,this._color=e.color??this._color,this.frameOfReferenceUID=e.frameOfReferenceUID,this._segmentIndex=e.segmentIndex,this.sizeInBytes=this._getSizeInBytes(),this._updateCentroid()}_getSizeInBytes(){return this._points.length*4+this._polys.length*4}_updateCentroid(){const e=this._points.length/3;let n=0,r=0,a=0;for(let i=0;i<this._points.length;i+=3)n+=this._points[i],r+=this._points[i+1],a+=this._points[i+2];this._centroid=[n/e,r/e,a/e]}get color(){return this._color}set color(e){this._color=e}get points(){return this._points}set points(e){this._points=e,this._updateCentroid()}get polys(){return this._polys}set polys(e){this._polys=e}get segmentIndex(){return this._segmentIndex}get centroid(){return this._centroid}get flatPointsArray(){return this._points}get totalNumberOfPoints(){return this._points.length/3}}var Qs;(function(t){t[t.None=0]="None",t[t.Capture=1]="Capture",t[t.Bubble=2]="Bubble"})(Qs||(Qs={}));class yI{constructor(e){this._eventListeners=new Map,this._children=new Map,this._target=e}get isEmpty(){return this._eventListeners.size===0&&this._children.size===0}addEventListener(e,n,r){const a=e.indexOf(".");if(a!==-1){const o=e.substring(0,a);let s=this._children.get(o);s||(s=new yI(this._target),this._children.set(o,s)),e=e.substring(a+1),s.addEventListener(e,n,r)}else this._addEventListener(e,n,r)}removeEventListener(e,n,r){const a=e.indexOf(".");if(a!==-1){const o=e.substring(0,a),s=this._children.get(o);if(!s)return;e=e.substring(a+1),s.removeEventListener(e,n,r),s.isEmpty&&this._children.delete(o)}else this._removeEventListener(e,n,r)}reset(){Array.from(this._children.entries()).forEach(([e,n])=>{if(n.reset(),n.isEmpty)this._children.delete(e);else throw new Error("Child is not empty and cannot be removed")}),this._unregisterAllEvents()}_addEventListener(e,n,r){let a=this._eventListeners.get(e);a||(a=new Map,this._eventListeners.set(e,a));const o=(r==null?void 0:r.capture)??!1?Qs.Capture:Qs.Bubble,s=a.get(n)??Qs.None;if(s&o){console.warn("A listener is already registered for this phase");return}a.set(n,s|o),this._target.addEventListener(e,n,r)}_removeEventListener(e,n,r){const i=(r==null?void 0:r.capture)??!1?Qs.Capture:Qs.Bubble,o=this._eventListeners.get(e);if(!o)return;(n?[n]:Array.from(o.keys())).forEach(c=>{const l=o.get(c)??Qs.None;if(!!!(l&i))return;this._target.removeEventListener(e,c,r);const f=l^i;f===Qs.None?o.delete(c):o.set(c,f)}),o.size||this._eventListeners.delete(e)}_unregisterAllListeners(e,n){Array.from(n.entries()).forEach(([r,a])=>{const i=Qs.Capture;for(let o=i;a;o<<=1){if(!(a&o))continue;const s=o===Qs.Capture;this.removeEventListener(e,r,{capture:s}),a^=o}})}_unregisterAllEvents(){Array.from(this._eventListeners.entries()).forEach(([e,n])=>{this._unregisterAllListeners(e,n)})}}class IF{constructor(){this._targetsEventListeners=new Map}addEventListener(e,n,r,a){let i=this._targetsEventListeners.get(e);i||(i=new yI(e),this._targetsEventListeners.set(e,i)),i.addEventListener(n,r,a)}removeEventListener(e,n,r,a){const i=this._targetsEventListeners.get(e);i&&(i.removeEventListener(n,r,a),i.isEmpty&&this._targetsEventListeners.delete(e))}reset(){Array.from(this._targetsEventListeners.entries()).forEach(([e,n])=>{n.reset(),this._targetsEventListeners.delete(e)})}}const Wle=Object.freeze(Object.defineProperty({__proto__:null,MultiTargetEventListenerManager:IF,TargetEventListeners:yI},Symbol.toStringTag,{value:"Module"}));function Hle(t,e){const n=t.getSize();for(let r=0;r<n;r++){const a=[];t.getNodeValue(r,a),a[1]=a[1]*e,a[2]=a[2]*e,a[3]=a[3]*e,t.setNodeValue(r,a)}}function X5(t){let e=t[0],n=t[0],r;const a=t.length;for(let i=1;i<a;i++)r=t[i],e=Math.min(e,r),n=Math.max(n,r);return{min:e,max:n}}const $le=Symbol("LastRuntimeId"),zle={},qle=4294967295,jle="-";function DF(t,e,n){return Qle(t!==null&&typeof t=="object"?t:zle,$le,(typeof n=="number"&&n>0?n:qle)>>>0).join(typeof e=="string"?e:jle)}function Qle(t,e,n){let r=t[e];r instanceof Array||(r=[0],Object.defineProperty(t,e,{value:r}));for(let a=!0,i=0;a&&i<r.length;++i){let o=r[i]|0;o<n?(a=!1,o=o+1):(o=0,i+1===r.length&&r.push(0)),r[i]=o}return r}const Vw={},Kle={add:(t,e)=>{const n=ca(t);Vw[n]=e},get:(t,e)=>{if(t==="calibratedPixelSpacing"){const n=ca(e);return Vw[n]}}};function jg(t,e,n=1e-5){return Math.abs(t[0]+e[0])<n&&Math.abs(t[1]+e[1])<n&&Math.abs(t[2]+e[2])<n}function ga(t,e){return!(t[0]<0||t[0]>=e[0]||t[1]<0||t[1]>=e[1]||t[2]<0||t[2]>=e[2])}function Xle(t,e){let n;e?n=[da(e)]:n=to();const r=[];return n.forEach(a=>{const i=t.getActors(),o=a.getVolumeViewports();for(const s of o){const c=s.getActors();if(c.length!==i.length)continue;i.every(({uid:u})=>c.find(f=>u===f.uid))&&r.push(s)}}),r}const EF=t=>t.preScale.scaled&&t.preScale.scalingParameters.suvbw;function TF(t,e,n=void 0,r="_thumbnails",a={displayArea:{imageArea:[1,1]}}){if(!t||!(t instanceof HTMLCanvasElement))throw new Error("canvas element is required");const i=!e.imageId,o=!i&&e,s=i&&e,l=`renderGPUViewport-${o.imageId||s.volumeId}`,u=document.createElement("div"),f=window.devicePixelRatio||1;a.displayArea||(a.displayArea={imageArea:[1,1]});const v=t.width,g=t.height;u.style.width=`${v/f+Lw}px`,u.style.height=`${g/f+Lw}px`,u.style.visibility="hidden",u.style.position="absolute",document.body.appendChild(u);const d=l.split(":").join("-");u.setAttribute("viewport-id-for-remove",d);const m=P0(u),h=da(r)||new K5(r);let C=h.getViewport(l);if(!C){const p={viewportId:l,type:i?Kr.ORTHOGRAPHIC:Kr.STACK,element:u,defaultOptions:{...a,suppressEvents:!0}};h.enableElement(p),C=h.getViewport(l)}return new Promise(p=>{let S=!1,{viewReference:I}=a;const D=E=>{if(S)return;if(I){const w=I;I=null,C.setViewReference(w),C.render();return}t.getContext("2d").drawImage(m,0,0,m.width,m.height,0,0,t.width,t.height);const y=C.canvasToWorld([0,0]),M=C.canvasToWorld([m.width/f,0]),_=C.canvasToWorld([0,m.height/f]),O=1;S=!0,u.removeEventListener(vt.IMAGE_RENDERED,D),setTimeout(()=>{h.disableElement(l),document.querySelectorAll(`[viewport-id-for-remove="${d}"]`).forEach(x=>{x.remove()})},0),p({origin:y,bottomLeft:_,topRight:M,thicknessMm:O})};u.addEventListener(vt.IMAGE_RENDERED,D),i?C.setVolumes([s],!1,!0):C.renderImageObject(e),C.resetCamera(),n==="PT"&&!EF(o)&&C.setProperties({voiRange:{lower:o.minPixelValue,upper:o.maxPixelValue}}),C.render()})}function yF(t,e,n,r,a){if(e.volumeId)throw new Error("Unsupported volume rendering for CPU");const o=e,s=gF(t,o,n),c={canvas:t,viewport:s,image:o,renderingTools:{}};c.transform=om(c);const l=!0;return new Promise((u,f)=>{uF(c,l),u(null)})}function Yle(t){const{canvas:e,imageId:n,viewReference:r,requestType:a=bn.Thumbnail,priority:i=-5,renderingEngineId:o="_thumbnails",useCPURendering:s=!1,thumbnail:c=!1,imageAspect:l=!1,viewportOptions:u}=t,f=r==null?void 0:r.volumeId,v=f&&!n,g=r&&u?{...u,viewReference:r}:u,d=s?yF:TF;return new Promise((m,h)=>{function C(D,E){var _;const{modality:T}=Lt("generalSeriesModule",E)||{},y=!v&&D,M=v&&D;y&&(y.isPreScaled=y.isPreScaled||((_=y.preScale)==null?void 0:_.scaled)),c&&(e.height=256,e.width=256),l&&y&&(e.width=y&&e.height*y.width/y.height),e.style.width=`${e.width/devicePixelRatio}px`,e.style.height=`${e.height/devicePixelRatio}px`,M&&s&&h(new Error("CPU rendering of volume not supported")),d(e,D,T,o,g).then(m)}function p(D,E){console.error(D,E),h(D)}function S(D,E,T){return J0(D,T).then(y=>{C.call(this,y,D)},y=>{p.call(this,y,D)})}const I={useRGBA:!!s,requestType:a};if(f){const D=Ye.getVolume(f);D||h(new Error(`Volume id ${f} not found in cache`));const E=D.imageIds[0];C(D,E)}else ui.addRequest(S.bind(null,n,null,I),a,{imageId:n},i)})}class MF{constructor(e="Tools",n=50){this.position=-1,this.redoAvailable=0,this.undoAvailable=0,this.ring=new Array,this.label=e,this._size=n}get size(){return this._size}set size(e){this.ring=new Array(e),this._size=e,this.position=-1,this.redoAvailable=0,this.undoAvailable=0}undo(e=1){for(;e>0&&this.undoAvailable>0;)this.ring[this.position].restoreMemo(!0),e--,this.redoAvailable++,this.undoAvailable--,this.position=(this.position-1+this.size)%this.size}redo(e=1){for(;e>0&&this.redoAvailable>0;){const n=(this.position+1)%this.size;this.ring[n].restoreMemo(!1),e--,this.position=n,this.undoAvailable++,this.redoAvailable--}}push(e){var r;if(!e)return;const n=e.restoreMemo?e:(r=e.createMemo)==null?void 0:r.call(e);if(n)return this.redoAvailable=0,this.undoAvailable<this._size&&this.undoAvailable++,this.position=(this.position+1)%this._size,this.ring[this.position]=n,n}}const Zle=new MF,Y5=Object.freeze(Object.defineProperty({__proto__:null,DefaultHistoryMemo:Zle,HistoryMemo:MF},Symbol.toStringTag,{value:"Module"}));function QT(t,e){const n=Lt("imagePlaneModule",t);if(!n)throw new Error(`No imagePlaneModule found for imageId: ${t}`);const{columnCosines:r,rowCosines:a,imagePositionPatient:i}=n;let{columnPixelSpacing:o,rowPixelSpacing:s}=n;o||(o=1),s||(s=1);const c=Xe();Hn(c,i,r,-o/2),Hn(c,c,a,-s/2);const l=Xe();Dr(l,e,c);const u=Gt(l,a),f=Gt(l,r);return[u/s,f/o]}function _F(t,e){const n=Lt("imagePlaneModule",t);if(!n)throw new Error(`No imagePlaneModule found for imageId: ${t}`);const{columnCosines:r,rowCosines:a,imagePositionPatient:i}=n;let{columnPixelSpacing:o,rowPixelSpacing:s}=n;o||(o=1),s||(s=1);const c=Xe();return Hn(c,i,a,s*(e[0]-.5)),Hn(c,c,r,o*(e[1]-.5)),Array.from(c)}function ZS(t){const e=to(),n=[];return e.forEach(r=>{r.getViewports().forEach(i=>{i.hasImageURI(t)&&n.push(i)})}),n}function OF(t,e){const n=Jle(t,e);return n?n.index:null}function Jle(t,e){const n=e.getImageIds(),r=e.getCurrentImageIdIndex();if(n.length===0)return null;const a=c=>{const l=eue(c);if(!l)return null;const u=Bc(l.planeNormal,l.imagePositionPatient);return QS(u,t)},i={distance:a(n[r])??1/0,index:r},o=n.slice(r+1);for(let c=0;c<o.length;c++){const l=o[c],u=a(l);if(u!==null)if(u<=i.distance)i.distance=u,i.index=c+r+1;else break}const s=n.slice(0,r);for(let c=s.length-1;c>=0;c--){const l=s[c],u=a(l);if(!(u===null||u===i.distance))if(u<i.distance)i.distance=u,i.index=c;else break}return i.distance===1/0?null:i}function eue(t){const e=Lt("imagePlaneModule",t);if(!e||!(e.rowCosines instanceof Array&&e.rowCosines.length===3)||!(e.columnCosines instanceof Array&&e.columnCosines.length===3)||!(e.imagePositionPatient instanceof Array&&e.imagePositionPatient.length===3))return null;const{rowCosines:n,columnCosines:r,imagePositionPatient:a}=e,i=or(Xe(),...n),o=or(Xe(),...r),s=gr(Xe(),i,o);return{rowCosines:n,columnCosines:r,imagePositionPatient:a,planeNormal:s}}function Z5(t){const{width:e,height:n}=t.getCanvas(),{sliceToIndexMatrix:r,indexToSliceMatrix:a}=t.getSliceViewInfo(),i=wl(t,[0,0]),o=wl(t,[e-1,0]),s=wl(t,[0,n-1]),c=Dr(Xe(),o,i),l=Dr(Xe(),s,i),u=gr(Xe(),c,l);Ar(c,c),Ar(l,l),Ar(u,u);const f=Math.max(Math.abs(c[0]),Math.abs(c[1]),Math.abs(c[2])),v=Math.max(Math.abs(l[0]),Math.abs(l[1]),Math.abs(l[2]));if(!ru(1,f)||!ru(1,v))throw new Error("Livewire is not available for rotate/oblique viewports");const{voxelManager:g}=t.getImageData(),d=t.getSliceViewInfo(),m=g.getSliceData(d);return{width:d.width,height:d.height,scalarData:m,sliceToIndexMatrix:r,indexToSliceMatrix:a}}const Lu={},sm={add:(t,e)=>{const[n,r]=t,a=`${n}_${r}`;Lu[a]||(Lu[a]={}),Lu[a]=e},get:(t,e,n)=>{if(t!=="spatialRegistrationModule")return;const r=`${e}_${n}`;if(Lu[r])return Lu[r];const a=`${n}_${e}`;if(Lu[a])return ba(Fs(),Lu[a])}};qc(sm.get.bind(sm));const tue=.05;function wF(t,e){const n=t.getSliceIndex(),r=e.getSliceIndex(),a=Lt("imagePlaneModule",n.toString()),i=Lt("imagePlaneModule",r.toString());if(!a||!i){console.log("Viewport spatial registration requires image plane module");return}const{imageOrientationPatient:o}=i;if(!a.imageOrientationPatient.every((v,g)=>Math.abs(v-o[g])<tue)){console.log("Viewport spatial registration only supported for same orientation (hence translation only) for now",a==null?void 0:a.imageOrientationPatient,i==null?void 0:i.imageOrientationPatient);return}const c=a.imagePositionPatient,l=i.imagePositionPatient,u=fr(Xe(),c,l),f=aI(Fs(),u);sm.add([t.id,e.id],f)}function JS(t){const{imageData:e,dimensions:n}=t.getImageData()||{};if(!e||!n)return[];const{canvas:r}=t,a=window.devicePixelRatio,i=[0,0],o=[r.width/a,0],s=[r.width/a,r.height/a],c=[0,r.height/a],l=t.canvasToWorld(i),u=t.canvasToWorld(o),f=t.canvasToWorld(s),v=t.canvasToWorld(c),g=e.worldToIndex(l),d=e.worldToIndex(u),m=e.worldToIndex(f),h=e.worldToIndex(v);return nue({dimensions:n,imageData:e,topLeftImage:g,topRightImage:d,bottomRightImage:m,bottomLeftImage:h,topLeftWorld:l,topRightWorld:u,bottomRightWorld:f,bottomLeftWorld:v})}function nue({dimensions:t,imageData:e,topLeftImage:n,topRightImage:r,bottomRightImage:a,bottomLeftImage:i,topLeftWorld:o,topRightWorld:s,bottomRightWorld:c,bottomLeftWorld:l}){const u=Mp(n,t)?o:e.indexToWorld([0,0,0]),f=Mp(r,t)?s:e.indexToWorld([t[0]-1,0,0]),v=Mp(a,t)?c:e.indexToWorld([t[0]-1,t[1]-1,0]),g=Mp(i,t)?l:e.indexToWorld([0,t[1]-1,0]);return[u,f,g,v]}function Mp(t,e){return t[0]>0||t[0]<e[0]-1||t[1]>0||t[1]<e[1]-1||t[2]>0||t[2]<e[2]-1}function Ae(t){if(!t)return;const{viewportUid:e,renderingEngineUid:n}=t.dataset;return Ka(e,n)}function Ka(t,e){if(!e||!t)return;const n=da(e);if(!n||n.hasBeenDestroyed)return;const r=n.getViewport(t);if(!r)return;const a=r.getFrameOfReferenceUID();return{viewport:r,renderingEngine:n,viewportId:t,renderingEngineId:e,FrameOfReferenceUID:a}}function wr(t){const e=to();for(let n=0;n<e.length;n++){const r=e[n];if(r.getViewport(t))return Ka(t,r.id)}}function PF(){const t=[];return to().forEach(n=>{n.getViewports().forEach(({element:a})=>{t.push(Ae(a))})}),t}function rue(t){const e=Ae(t);if(!e)return;const{viewport:n}=e;if(!(n instanceof Xr))throw new Error(`An image can only be fetched for a stack viewport and not for a viewport of type: ${n.type}`);return n.getCornerstoneImage()}function AF(t){const e=t[0],{modality:n,seriesInstanceUID:r}=Lt("generalSeriesModule",e),{imageOrientationPatient:a,pixelSpacing:i,frameOfReferenceUID:o,columns:s,rows:c}=Lt("imagePlaneModule",e),l={modality:n,imageOrientationPatient:a,pixelSpacing:i,frameOfReferenceUID:o,columns:s,rows:c,seriesInstanceUID:r};return t.every(f=>{const{modality:v,seriesInstanceUID:g}=Lt("generalSeriesModule",f),{imageOrientationPatient:d,pixelSpacing:m,columns:h,rows:C}=Lt("imagePlaneModule",f);return g===l.seriesInstanceUID&&v===l.modality&&h===l.columns&&C===l.rows&&gn(d,l.imageOrientationPatient)&&gn(m,l.pixelSpacing)})}const aue=new Set(["1.2.840.10008.1.2.4.100","1.2.840.10008.1.2.4.100.1","1.2.840.10008.1.2.4.101","1.2.840.10008.1.2.4.101.1","1.2.840.10008.1.2.4.102","1.2.840.10008.1.2.4.102.1","1.2.840.10008.1.2.4.103","1.2.840.10008.1.2.4.103.1","1.2.840.10008.1.2.4.104","1.2.840.10008.1.2.4.104.1","1.2.840.10008.1.2.4.105","1.2.840.10008.1.2.4.105.1","1.2.840.10008.1.2.4.106","1.2.840.10008.1.2.4.106.1","1.2.840.10008.1.2.4.107","1.2.840.10008.1.2.4.108"]);function xF(t){return t?(Array.isArray(t)?t:[t]).find(n=>aue.has(n)):!1}async function iue({viewport:t,options:e={}}){const n=t.getRenderingEngine();let r=e.volumeId||`${Cr()}`;r.split(":").length===0&&(r=`${XU()}:${r}`);const{id:a,element:i}=t,o=e.viewportId||a,s=t.getImageIds(),c=t.getViewPresentation(),l=t.getViewReference();n.enableElement({viewportId:o,type:Kr.ORTHOGRAPHIC,element:i,defaultOptions:{background:e.background,orientation:e.orientation}}),(await im(r,{imageIds:s})).load();const f=n.getViewport(o);await XS(n,[{volumeId:r}],[o]);const v=()=>{f.render(),i.removeEventListener(vt.VOLUME_VIEWPORT_NEW_VOLUME,v)};return(()=>{i.addEventListener(vt.VOLUME_VIEWPORT_NEW_VOLUME,v)})(),f.setViewPresentation(c),f.setViewReference(l),f.render(),f}async function oue({viewport:t,options:e}){const n=t,{id:r,element:a}=n,i=t.getRenderingEngine(),{background:o}=e,s=e.viewportId||r,c=Ye.getVolume(n.getVolumeId());if(!(c instanceof H1))throw new Error("Currently, you cannot decache a volume that is not an ImageVolume. So, unfortunately, volumes such as nifti  (which are basic Volume, without imageIds) cannot be decached.");const l={viewportId:s,type:Kr.STACK,element:a,defaultOptions:{background:o}},u=n.getViewReference();i.enableElement(l);const f=i.getViewport(s);return await f.setStack(c.imageIds),f.setViewReference(u),f.render(),f}function kn(t,e=2){if(Array.isArray(t))return t.map(a=>kn(a,e)).join(", ");if(t==null||t==="")return"NaN";t=Number(t);const n=Math.abs(t);if(n<1e-4)return`${t}`;const r=n>=100?e-2:n>=10?e-1:n>=1?e:n>=.1?e+1:n>=.01?e+2:n>=.001?e+3:e+4;return t.toFixed(r)}function Ul(t){return Math.round(t/o0)*o0}function RF(t,e,n){const r=t.length===e*n*4,a=t.length===e*n*3;if(r||a){const i=new Float32Array(e*n);let o=0,s=0;const c=r?4:3;for(let l=0;l<e;l++)for(let u=0;u<n;u++){const f=t[o],v=t[o+1],g=t[o+2];i[s]=(f+v+g)/3,o+=c,s++}return i}else return t}function bF(t){if(t instanceof yr)return Ye.getVolume(t.getVolumeId()).imageIds;if(t.getImageIds)return t.getImageIds()}function NF(t,e){const n=[...t];return e>=n.length?(kw(n),n):(kw(n),n.slice(0,e))}function kw(t){for(let e=t.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}}function dE(t){const e=t.toString(16);return e.length==1?"0"+e:e}function sue(t,e,n){return"#"+dE(t)+dE(e)+dE(n)}function cue(t){const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}const lue=Object.freeze(Object.defineProperty({__proto__:null,hexToRgb:cue,rgbToHex:sue},Symbol.toStringTag,{value:"Module"}));function LF(t,e){if(t===e)return!0;if(t==null||e==null)return!1;try{return JSON.stringify(t)===JSON.stringify(e)}catch(n){return console.debug("Error in JSON.stringify during deep comparison:",n),t===e}}function uue(t,e,n){if(!n)throw new Error("getVolume is required, use the utilities export instead ");if(t.modality)return t.modality;if(t.setVolumes)return e=e??t.getVolumeId(),!e||!n?void 0:n(e).metadata.Modality;throw new Error("Invalid viewport type")}const fue=(t,e)=>t.reduce((n,r)=>((n[r[e]]=n[r[e]]||[]).push(r),n),{});function vue(t){const e=t.map(o=>{const{imagePositionPatient:s}=Lt("imagePlaneModule",o)||{};return{imageId:o,imagePositionPatient:s}});if(!e.every(o=>o.imagePositionPatient))return null;const n=fue(e,"imagePositionPatient"),r=Object.keys(n),a=n[r[0]].length;return a===1||!r.every(o=>n[o].length===a)?null:n}function gue(t,e){const n={};let r=[];const a=Object.keys(t);for(let i=0;i<a.length;i++){const o=new Set,s=t[a[i]];for(let c=0;c<s.length;c++){const l=e(s[c].imageId)||0;if(n[l]=n[l]||[],n[l].push({imageId:s[c].imageId}),o.add(l),o.size-1<c)return}if(i==0)r=Array.from(o);else if(!pue(r,o))return}return n}function pg(t,e){const n=Lt(e,t);try{return parseFloat(n)}catch{return}}function due(t){const e=Lt("20011003",t);try{const{InlineBinary:n}=e;if(n){const r=atob(n),a=new ArrayBuffer(r.length),i=new DataView(a);for(let o=0;o<r.length;o++)i.setUint8(o,r.charCodeAt(o));return new Float32Array(a)[0]}return parseFloat(e)}catch{return}}function mue(t){let e=Lt("0019100c",t)||Lt("0019100C",t);try{const{InlineBinary:n}=e;return n&&(e=atob(n)),parseFloat(e)}catch{return}}function hue(t){let e=Lt("00431039",t);try{const{InlineBinary:n}=e;return n&&(e=atob(n).split("//")),parseFloat(e[0])%1e5}catch{return}}function pue(t,e){if(t.length!=e.size)return!1;for(let n=0;n<t.length;n++)if(!e.has(t[n]))return!1;return!0}function Sue(t){const e=Lt("petImageModule",t);return e?e.frameReferenceTime:0}function J5(t){const e=vue(t);if(!e)return{imageIdGroups:[t],splittingTag:null};const n=["TemporalPositionIdentifier","DiffusionBValue","TriggerTime","EchoTime","EchoNumber","PhilipsPrivateBValue","SiemensPrivateBValue","GEPrivateBValue","PetFrameReferenceTime"],r=[a=>pg(a,n[0]),a=>pg(a,n[1]),a=>pg(a,n[2]),a=>pg(a,n[3]),a=>pg(a,n[4]),due,mue,hue,Sue];for(let a=0;a<r.length;a++){const i=gue(e,r[a]);if(i)return{imageIdGroups:Object.keys(i).map(Number.parseFloat).sort((c,l)=>c-l).map(c=>i[c].map(l=>l.imageId)),splittingTag:n[a]}}return{imageIdGroups:[t],splittingTag:null}}function Cue(t){const{imageIdGroups:e,splittingTag:n}=J5(t);return{isDynamicVolume:e.length>1,timePoints:e,splittingTag:n}}function Iue(t,e){const n=t.length,{rescaleSlope:r,rescaleIntercept:a,suvbw:i}=e;if(e.modality==="PT"&&typeof i=="number")for(let o=0;o<n;o++)t[o]=i*(t[o]*r+a);else for(let o=0;o<n;o++)t[o]=t[o]*r+a;return t}function eC(t,e,n){return Math.min(Math.max(e,t),n)}function _1(t,e){if(!Ae(t.element))throw new Error("Scroll::Viewport is not enabled (it might be disabled)");if(t instanceof Xr&&t.getImageIds().length===0)throw new Error("Scroll::Stack Viewport has no images");const{volumeId:r,delta:a,scrollSlabs:i}=e;if(t instanceof yr)Due(t,r,a,i);else{const o=t.getCurrentImageIdIndex();if(o+a>t.getImageIds().length-1||o+a<0){const s={imageIdIndex:o,direction:a};Dt(ot,vt.STACK_SCROLL_OUT_OF_BOUNDS,s)}t.scroll(a,e.debounceLoading,e.loop)}}function Due(t,e,n,r=!1){const a=r,{numScrollSteps:i,currentStepIndex:o,sliceRangeInfo:s}=f1(t,e,a);if(!s)return;const{sliceRange:c,spacingInNormalDirection:l,camera:u}=s,{focalPoint:f,viewPlaneNormal:v,position:g}=u,{newFocalPoint:d,newPosition:m}=Wf(f,g,c,v,l,n);t.setCamera({focalPoint:d,position:m}),t.render();const h=o+n,C={volumeId:e,viewport:t,delta:n,desiredStepIndex:h,currentStepIndex:o,numScrollSteps:i,currentImageId:t.getCurrentImageId()};(h>i||h<0)&&t.getCurrentImageId()?Dt(ot,vt.VOLUME_VIEWPORT_SCROLL_OUT_OF_BOUNDS,C):Dt(ot,vt.VOLUME_VIEWPORT_SCROLL,C)}async function e_(t,e={}){const{imageIndex:n,debounceLoading:r,volumeId:a}=e,i=Ae(t);if(!i)throw new Error("Element has been disabled");const{viewport:o}=i,{imageIndex:s,numberOfSlices:c}=Eue(o,r),u=Tue(c,n)-s;_1(o,{delta:u,debounceLoading:r,volumeId:a})}function Eue(t,e){return t instanceof Xr?{numberOfSlices:t.getImageIds().length,imageIndex:e?t.getTargetImageIdIndex():t.getCurrentImageIdIndex()}:{numberOfSlices:t.getNumberOfSlices(),imageIndex:t.getSliceIndex()}}function Tue(t,e){const n=t-1;return eC(e,0,n)}function MI(t,e,n={}){const r=Ye.getVolume(t);if(!r)throw new Error(`Referenced volume with id ${t} does not exist.`);const{metadata:a,spacing:i,direction:o,dimensions:s}=r,{minX:c,maxX:l,minY:u,maxY:f,minZ:v,maxZ:g}=e,d=[Math.min(c,l),Math.min(u,f),Math.min(v,g)],m=fv(r.imageData,d),h=[Math.abs(l-c)+1,Math.abs(f-u)+1,Math.abs(g-v)+1],{targetBuffer:C}=n,p={metadata:a,dimensions:h,spacing:i,origin:m,direction:o,targetBuffer:C,scalarData:(C==null?void 0:C.type)==="Float32Array"?new Float32Array(h[0]*h[1]*h[2]):void 0},S=oh(Cr(),p),I=S.voxelManager.getCompleteScalarDataArray(),D=h[0]*h[1],E=s[0]*s[1],T=r.voxelManager.getCompleteScalarDataArray();for(let y=0;y<h[2];y++)for(let M=0;M<h[1];M++){const _=fv(S.imageData,[0,M,y]),O=Da(r.imageData,_),w=O[2]*E+O[1]*s[0]+O[0],x=T.slice(w,w+h[0]),P=y*D+M*h[0];I.set(x,P)}return S.voxelManager.setCompleteScalarDataArray(I),S}function _I(t,e){const{viewUp:n,viewPlaneNormal:r}=e,a=B2(t,[0,0,0]),i=r0(Xe(),n),o=r0(Xe(),r),s=gr(Xe(),i,o),c=Dr(Xe(),B2(t,i),a),l=Dr(Xe(),B2(t,o),a);Ar(c,c),Ar(l,l);const u=gr(Xe(),c,l);return{worldVecRowDir:s,worldVecColDir:i,worldVecSliceDir:o,ijkVecRowDir:u,ijkVecColDir:c,ijkVecSliceDir:l}}const UF=(t,e)=>uue(t,e,Ye.getVolume),Zn=Object.freeze(Object.defineProperty({__proto__:null,HistoryMemo:Y5,PointsManager:H2,ProgressiveIterator:HS,RLEVoxelMap:Ef,VoxelManager:yo,actorIsA:Vo,applyPreset:nF,autoLoad:HT,calculateViewportsSpatialRegistration:wF,calibratedPixelSpacingMetadataProvider:Kle,clamp:jT,clip:eC,color:lue,colormap:noe,convertStackToVolumeViewport:iue,convertToGrayscale:RF,convertVolumeToStackViewport:oue,createLinearRGBTransferFunction:sF,createSigmoidRGBTransferFunction:x5,createSubVolume:MI,decimate:WU,deepClone:_s,deepEqual:LF,deepMerge:pi,eventListener:Wle,generateVolumePropsFromImageIds:DI,genericMetadataProvider:rs,getBufferConfiguration:D5,getClosestImageId:jc,getClosestStackImageIndexForPoint:OF,getCurrentVolumeViewportSlice:Z5,getDynamicVolumeInfo:Cue,getImageLegacy:rue,getImageSliceDataForVolumeViewport:jS,getMinMax:X5,getRandomSampleFromArray:NF,getRuntimeId:DF,getScalingParameters:GU,getSliceRange:mI,getSpacingInNormalDirection:vu,getTargetVolumeAndSpacingInNormalDir:Vv,getViewportImageCornersInWorld:JS,getViewportImageIds:bF,getViewportModality:UF,getViewportsWithImageURI:ZS,getViewportsWithVolumeId:ih,getVoiFromSigmoidRGBTransferFunction:tF,getVolumeActorCorners:WL,getVolumeDirectionVectors:_I,getVolumeId:nc,getVolumeSliceRangeInfo:eF,getVolumeViewportScrollInfo:f1,getVolumeViewportsContainingSameVolumes:Xle,hasFloatScalingParameters:V5,hasNaNValues:$T,imageIdToURI:ca,imageRetrieveMetadataProvider:rm,imageToWorldCoords:_F,indexWithinDimensions:ga,invertRgbTransferFunction:md,isEqual:gn,isEqualAbs:eoe,isEqualNegative:sU,isImageActor:A0,isOpposite:jg,isPTPrescaledWithSUV:EF,isValidVolume:AF,isVideoTransferSyntax:xF,jumpToSlice:e_,loadImageToCanvas:Yle,makeVolumeMetadata:kU,planar:Cce,pointInShapeCallback:II,renderToCanvasCPU:yF,renderToCanvasGPU:TF,roundNumber:kn,roundToPrecision:Ul,scaleArray:Iue,scaleRgbTransferFunction:Hle,scroll:_1,snapFocalPointToSlice:Wf,sortImageIdsAndGetSpacing:F5,spatialRegistrationMetadataProvider:sm,splitImageIdsBy4DTags:J5,transferFunctionUtils:aoe,transformIndexToWorld:fv,transformWorldToIndex:Da,transformWorldToIndexContinuous:B2,triggerEvent:Dt,updateVTKImageDataWithCornerstoneImage:TI,uuidv4:Cr,windowLevel:roe,worldToImageCoords:QT},Symbol.toStringTag,{value:"Module"}));class FF extends $U{constructor(e,n){super(e,n),this._timePointIndex=0,this._loadedTimePoints=new Set,this._getImageIdRequests=(i,o)=>this.getImageIdsRequests(i,o),this.getImageLoadRequests=i=>{const o=this.getImageIdsToLoad();return this._getImageIdRequests(o,i)};const{imageIdGroups:r,splittingTag:a}=e;this._splittingTag=a,this._imageIdGroups=r,this.numTimePoints=this._imageIdGroups.length}_getImageIdsToLoad(){const e=this._imageIdGroups,n=this._timePointIndex,r=[...e[n]];let a=n-1,i=n+1;for(;a>=0||i<e.length;)a>=0&&r.push(...e[a--]),i<e.length&&r.push(...e[i++]);return r}getImageIdsToLoad(){return this._getImageIdsToLoad()}get timePointIndex(){return this._timePointIndex}set timePointIndex(e){this._timePointIndex!==e&&(this._timePointIndex=e,this.voxelManager.setTimePoint(e),this.invalidateVolume(!0),Dt(ot,vt.DYNAMIC_VOLUME_TIME_POINT_INDEX_CHANGED,{volumeId:this.volumeId,timePointIndex:e,numTimePoints:this.numTimePoints,imageIdGroupIndex:e,numImageIdGroups:this.numTimePoints,splittingTag:this.splittingTag}))}scroll(e){const n=this._timePointIndex+e;n<0?this.timePointIndex=this.numTimePoints-1:n>=this.numTimePoints?this.timePointIndex=0:this.timePointIndex=n}getCurrentTimePointImageIds(){return this._imageIdGroups[this._timePointIndex]}flatImageIdIndexToTimePointIndex(e){return Math.floor(e/this._imageIdGroups[0].length)}flatImageIdIndexToImageIdIndex(e){return e%this._imageIdGroups[0].length}get splittingTag(){return this._splittingTag}isTimePointLoaded(e){return this._loadedTimePoints.has(e)}markTimePointAsLoaded(e){this._loadedTimePoints.add(e),Dt(ot,vt.DYNAMIC_VOLUME_TIME_POINT_LOADED,{volumeId:this.volumeId,timePointIndex:e})}checkTimePointCompletion(e){const n=this.flatImageIdIndexToTimePointIndex(e);this._imageIdGroups[n].every(i=>{const o=this.getImageIdIndex(i);return this.cachedFrames[o]===No.FULL_RESOLUTION})&&!this.isTimePointLoaded(n)&&this.markTimePointAsLoaded(n)}}const Gv=new w5("imageRetrievalPool");Gv.setMaxSimultaneousRequests(bn.Interaction,200);Gv.setMaxSimultaneousRequests(bn.Thumbnail,200);Gv.setMaxSimultaneousRequests(bn.Prefetch,200);Gv.grabDelay=0;const Gw=Symbol("DefaultSettings"),Bw=Symbol("RuntimeSettings"),Ww=Symbol("ObjectSettingsMap"),dc=Symbol("Dictionary");class Qr{constructor(e){const n=Object.create(e instanceof Qr&&dc in e?e[dc]:null);Object.seal(Object.defineProperty(this,dc,{value:n}))}set(e,n){return tC(this[dc],e,n,null)}get(e){return _ue(this[dc],e)}unset(e){return yue(this[dc],e+"")}forEach(e){Hw(this[dc],e)}extend(){return new Qr(this)}import(e){VF(e)&&Object.keys(e).forEach(n=>{tC(this[dc],n,e[n],null)})}dump(){const e={};return Hw(this[dc],(n,r)=>{typeof r<"u"&&kF(e,n,r)}),e}static assert(e){return e instanceof Qr?e:Qr.getRuntimeSettings()}static getDefaultSettings(e=null){let n=Qr[Gw];if(n instanceof Qr||(n=new Qr,Qr[Gw]=n),e){const r={};return n.forEach(a=>{if(a.startsWith(e)){const i=a.split(`${e}.`)[1];r[i]=n.get(a)}}),r}return n}static getRuntimeSettings(){let e=Qr[Bw];return e instanceof Qr||(e=new Qr(Qr.getDefaultSettings()),Qr[Bw]=e),e}static getObjectSettings(e,n){let r=null;if(e instanceof Qr)r=e;else if(typeof e=="object"&&e!==null){let a=Qr[Ww];a instanceof WeakMap||(a=new WeakMap,Qr[Ww]=a),r=a.get(e),r instanceof Qr||(r=new Qr(Qr.assert(Qr.getObjectSettings(n))),a.set(e,r))}return r}static extendRuntimeSettings(){return Qr.getRuntimeSettings().extend()}}function yue(t,e){if(e.endsWith(".")){let n=0;const r=e,a=r.slice(0,-1),i=a.length===0;for(const o in t)Object.prototype.hasOwnProperty.call(t,o)&&(i||o.startsWith(r)||o===a)&&(delete t[o],++n);return n>0}return delete t[e]}function Hw(t,e){for(const n in t)e(n,t[n])}function Mue(t,e,n,r){let a;if(r.has(n))return tC(t,e,null,r);r.add(n),a=0;for(const i in n)if(Object.prototype.hasOwnProperty.call(n,i)){const o=i.length===0?e:`${e}.${i}`;tC(t,o,n[i],r)||++a}return r.delete(n),a===0}function tC(t,e,n,r){return Oue(e)?VF(n)?Mue(t,e,n,r instanceof WeakSet?r:new WeakSet):(t[e]=n,!0):!1}function _ue(t,e){return t[e]}function Oue(t){let e,n,r;if(typeof t!="string"||(e=t.length-1)<0)return!1;for(r=-1;(n=t.indexOf(".",r+1))>=0;){if(n-r<2||n===e)return!1;r=n}return!0}function VF(t){if(typeof t=="object"&&t!==null){const e=Object.getPrototypeOf(t);if(e===Object.prototype||e===null)return!0}return!1}function kF(t,e,n){const r=e.indexOf(".");if(r>=0){const a=e.slice(0,r);let i=t[a];if(typeof i!="object"||i===null){const o=i;i={},typeof o<"u"&&(i[""]=o),t[a]=i}kF(i,e.slice(r+1,e.length),n)}else t[e]=n}Qr.getDefaultSettings().set("useCursors",!0);function q2(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function wue(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function GF(t){let e,n,r;t.length!==2?(e=q2,n=(s,c)=>q2(t(s),c),r=(s,c)=>t(s)-c):(e=t===q2||t===wue?t:Pue,n=t,r=t);function a(s,c,l=0,u=s.length){if(l<u){if(e(c,c)!==0)return u;do{const f=l+u>>>1;n(s[f],c)<0?l=f+1:u=f}while(l<u)}return l}function i(s,c,l=0,u=s.length){if(l<u){if(e(c,c)!==0)return u;do{const f=l+u>>>1;n(s[f],c)<=0?l=f+1:u=f}while(l<u)}return l}function o(s,c,l=0,u=s.length){const f=a(s,c,l,u-1);return f>l&&r(s[f-1],c)>-r(s[f],c)?f-1:f}return{left:a,center:o,right:i}}function Pue(){return 0}function Aue(t){return t===null?NaN:+t}const xue=GF(q2),Rue=xue.right;GF(Aue).center;const bue=Math.sqrt(50),Nue=Math.sqrt(10),Lue=Math.sqrt(2);function nC(t,e,n){const r=(e-t)/Math.max(0,n),a=Math.floor(Math.log10(r)),i=r/Math.pow(10,a),o=i>=bue?10:i>=Nue?5:i>=Lue?2:1;let s,c,l;return a<0?(l=Math.pow(10,-a)/o,s=Math.round(t*l),c=Math.round(e*l),s/l<t&&++s,c/l>e&&--c,l=-l):(l=Math.pow(10,a)*o,s=Math.round(t/l),c=Math.round(e/l),s*l<t&&++s,c*l>e&&--c),c<s&&.5<=n&&n<2?nC(t,e,n*2):[s,c,l]}function Uue(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[a,i,o]=r?nC(e,t,n):nC(t,e,n);if(!(i>=a))return[];const s=i-a+1,c=new Array(s);if(r)if(o<0)for(let l=0;l<s;++l)c[l]=(i-l)/-o;else for(let l=0;l<s;++l)c[l]=(i-l)*o;else if(o<0)for(let l=0;l<s;++l)c[l]=(a+l)/-o;else for(let l=0;l<s;++l)c[l]=(a+l)*o;return c}function KT(t,e,n){return e=+e,t=+t,n=+n,nC(t,e,n)[2]}function Fue(t,e,n){e=+e,t=+t,n=+n;const r=e<t,a=r?KT(e,t,n):KT(t,e,n);return(r?-1:1)*(a<0?1/-a:a)}function Vue(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let a of t)(a=e(a,++r,t))!=null&&(n>a||n===void 0&&a>=a)&&(n=a)}return n}function kue(t){if(!(i=t.length))return[];for(var e=-1,n=Vue(t,Gue),r=new Array(n);++e<n;)for(var a=-1,i,o=r[e]=new Array(i);++a<i;)o[a]=t[a][e];return r}function Gue(t){return t.length}function $w(){return kue(arguments)}function Bue(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function t_(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function BF(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function sh(){}var cm=.7,rC=1/cm,qf="\\s*([+-]?\\d+)\\s*",lm="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",k0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Wue=/^#([0-9a-f]{3,8})$/,Hue=new RegExp(`^rgb\\(${qf},${qf},${qf}\\)$`),$ue=new RegExp(`^rgb\\(${k0},${k0},${k0}\\)$`),zue=new RegExp(`^rgba\\(${qf},${qf},${qf},${lm}\\)$`),que=new RegExp(`^rgba\\(${k0},${k0},${k0},${lm}\\)$`),jue=new RegExp(`^hsl\\(${lm},${k0},${k0}\\)$`),Que=new RegExp(`^hsla\\(${lm},${k0},${k0},${lm}\\)$`),zw={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};t_(sh,um,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:qw,formatHex:qw,formatHex8:Kue,formatHsl:Xue,formatRgb:jw,toString:jw});function qw(){return this.rgb().formatHex()}function Kue(){return this.rgb().formatHex8()}function Xue(){return WF(this).formatHsl()}function jw(){return this.rgb().formatRgb()}function um(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Wue.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Qw(e):n===3?new Lo(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?_p(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?_p(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Hue.exec(t))?new Lo(e[1],e[2],e[3],1):(e=$ue.exec(t))?new Lo(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=zue.exec(t))?_p(e[1],e[2],e[3],e[4]):(e=que.exec(t))?_p(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=jue.exec(t))?Yw(e[1],e[2]/100,e[3]/100,1):(e=Que.exec(t))?Yw(e[1],e[2]/100,e[3]/100,e[4]):zw.hasOwnProperty(t)?Qw(zw[t]):t==="transparent"?new Lo(NaN,NaN,NaN,0):null}function Qw(t){return new Lo(t>>16&255,t>>8&255,t&255,1)}function _p(t,e,n,r){return r<=0&&(t=e=n=NaN),new Lo(t,e,n,r)}function Yue(t){return t instanceof sh||(t=um(t)),t?(t=t.rgb(),new Lo(t.r,t.g,t.b,t.opacity)):new Lo}function XT(t,e,n,r){return arguments.length===1?Yue(t):new Lo(t,e,n,r??1)}function Lo(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}t_(Lo,XT,BF(sh,{brighter(t){return t=t==null?rC:Math.pow(rC,t),new Lo(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?cm:Math.pow(cm,t),new Lo(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Lo(v1(this.r),v1(this.g),v1(this.b),aC(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Kw,formatHex:Kw,formatHex8:Zue,formatRgb:Xw,toString:Xw}));function Kw(){return`#${Ju(this.r)}${Ju(this.g)}${Ju(this.b)}`}function Zue(){return`#${Ju(this.r)}${Ju(this.g)}${Ju(this.b)}${Ju((isNaN(this.opacity)?1:this.opacity)*255)}`}function Xw(){const t=aC(this.opacity);return`${t===1?"rgb(":"rgba("}${v1(this.r)}, ${v1(this.g)}, ${v1(this.b)}${t===1?")":`, ${t})`}`}function aC(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function v1(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ju(t){return t=v1(t),(t<16?"0":"")+t.toString(16)}function Yw(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Zs(t,e,n,r)}function WF(t){if(t instanceof Zs)return new Zs(t.h,t.s,t.l,t.opacity);if(t instanceof sh||(t=um(t)),!t)return new Zs;if(t instanceof Zs)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,a=Math.min(e,n,r),i=Math.max(e,n,r),o=NaN,s=i-a,c=(i+a)/2;return s?(e===i?o=(n-r)/s+(n<r)*6:n===i?o=(r-e)/s+2:o=(e-n)/s+4,s/=c<.5?i+a:2-i-a,o*=60):s=c>0&&c<1?0:o,new Zs(o,s,c,t.opacity)}function Jue(t,e,n,r){return arguments.length===1?WF(t):new Zs(t,e,n,r??1)}function Zs(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}t_(Zs,Jue,BF(sh,{brighter(t){return t=t==null?rC:Math.pow(rC,t),new Zs(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?cm:Math.pow(cm,t),new Zs(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,a=2*n-r;return new Lo(mE(t>=240?t-240:t+120,a,r),mE(t,a,r),mE(t<120?t+240:t-120,a,r),this.opacity)},clamp(){return new Zs(Zw(this.h),Op(this.s),Op(this.l),aC(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=aC(this.opacity);return`${t===1?"hsl(":"hsla("}${Zw(this.h)}, ${Op(this.s)*100}%, ${Op(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Zw(t){return t=(t||0)%360,t<0?t+360:t}function Op(t){return Math.max(0,Math.min(1,t||0))}function mE(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}function e1e(t,e,n,r,a){var i=t*t,o=i*t;return((1-3*t+3*i-o)*e+(4-6*i+3*o)*n+(1+3*t+3*i-3*o)*r+o*a)/6}function hE(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),a=t[r],i=t[r+1],o=r>0?t[r-1]:2*a-i,s=r<e-1?t[r+2]:2*i-a;return e1e((n-r/e)*e,o,a,i,s)}}const n_=t=>()=>t;function t1e(t,e){return function(n){return t+n*e}}function n1e(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function r1e(t){return(t=+t)==1?HF:function(e,n){return n-e?n1e(e,n,t):n_(isNaN(e)?n:e)}}function HF(t,e){var n=e-t;return n?t1e(t,n):n_(isNaN(t)?e:t)}const Jw=function t(e){var n=r1e(e);function r(a,i){var o=n((a=XT(a)).r,(i=XT(i)).r),s=n(a.g,i.g),c=n(a.b,i.b),l=HF(a.opacity,i.opacity);return function(u){return a.r=o(u),a.g=s(u),a.b=c(u),a.opacity=l(u),a+""}}return r.gamma=t,r}(1);function a1e(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),a;return function(i){for(a=0;a<n;++a)r[a]=t[a]*(1-i)+e[a]*i;return r}}function i1e(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function o1e(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,a=new Array(r),i=new Array(n),o;for(o=0;o<r;++o)a[o]=r_(t[o],e[o]);for(;o<n;++o)i[o]=e[o];return function(s){for(o=0;o<r;++o)i[o]=a[o](s);return i}}function s1e(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function iC(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function c1e(t,e){var n={},r={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?n[a]=r_(t[a],e[a]):r[a]=e[a];return function(i){for(a in n)r[a]=n[a](i);return r}}var YT=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,pE=new RegExp(YT.source,"g");function l1e(t){return function(){return t}}function u1e(t){return function(e){return t(e)+""}}function f1e(t,e){var n=YT.lastIndex=pE.lastIndex=0,r,a,i,o=-1,s=[],c=[];for(t=t+"",e=e+"";(r=YT.exec(t))&&(a=pE.exec(e));)(i=a.index)>n&&(i=e.slice(n,i),s[o]?s[o]+=i:s[++o]=i),(r=r[0])===(a=a[0])?s[o]?s[o]+=a:s[++o]=a:(s[++o]=null,c.push({i:o,x:iC(r,a)})),n=pE.lastIndex;return n<e.length&&(i=e.slice(n),s[o]?s[o]+=i:s[++o]=i),s.length<2?c[0]?u1e(c[0].x):l1e(e):(e=c.length,function(l){for(var u=0,f;u<e;++u)s[(f=c[u]).i]=f.x(l);return s.join("")})}function r_(t,e){var n=typeof e,r;return e==null||n==="boolean"?n_(e):(n==="number"?iC:n==="string"?(r=um(e))?(e=r,Jw):f1e:e instanceof um?Jw:e instanceof Date?s1e:i1e(e)?a1e:Array.isArray(e)?o1e:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?c1e:iC)(t,e)}function v1e(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Sg(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n}function g1e(t){return function(){return t}}function d1e(t){return+t}var e9=[0,1];function Of(t){return t}function ZT(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:g1e(isNaN(e)?NaN:.5)}function m1e(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function h1e(t,e,n){var r=t[0],a=t[1],i=e[0],o=e[1];return a<r?(r=ZT(a,r),i=n(o,i)):(r=ZT(r,a),i=n(i,o)),function(s){return i(r(s))}}function p1e(t,e,n){var r=Math.min(t.length,e.length)-1,a=new Array(r),i=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)a[o]=ZT(t[o],t[o+1]),i[o]=n(e[o],e[o+1]);return function(s){var c=Rue(t,s,1,r)-1;return i[c](a[c](s))}}function S1e(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function C1e(){var t=e9,e=e9,n=r_,r,a,i,o=Of,s,c,l;function u(){var v=Math.min(t.length,e.length);return o!==Of&&(o=m1e(t[0],t[v-1])),s=v>2?p1e:h1e,c=l=null,f}function f(v){return v==null||isNaN(v=+v)?i:(c||(c=s(t.map(r),e,n)))(r(o(v)))}return f.invert=function(v){return o(a((l||(l=s(e,t.map(r),iC)))(v)))},f.domain=function(v){return arguments.length?(t=Array.from(v,d1e),u()):t.slice()},f.range=function(v){return arguments.length?(e=Array.from(v),u()):e.slice()},f.rangeRound=function(v){return e=Array.from(v),n=v1e,u()},f.clamp=function(v){return arguments.length?(o=v?!0:Of,u()):o!==Of},f.interpolate=function(v){return arguments.length?(n=v,u()):n},f.unknown=function(v){return arguments.length?(i=v,f):i},function(v,g){return r=v,a=g,u()}}function I1e(){return C1e()(Of,Of)}function D1e(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function oC(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function gv(t){return t=oC(Math.abs(t)),t?t[1]:NaN}function E1e(t,e){return function(n,r){for(var a=n.length,i=[],o=0,s=t[0],c=0;a>0&&s>0&&(c+s+1>r&&(s=Math.max(1,r-c)),i.push(n.substring(a-=s,a+s)),!((c+=s+1)>r));)s=t[o=(o+1)%t.length];return i.reverse().join(e)}}function T1e(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var y1e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function sC(t){if(!(e=y1e.exec(t)))throw new Error("invalid format: "+t);var e;return new a_({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}sC.prototype=a_.prototype;function a_(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}a_.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function M1e(t){e:for(var e=t.length,n=1,r=-1,a;n<e;++n)switch(t[n]){case".":r=a=n;break;case"0":r===0&&(r=n),a=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(a+1):t}var $F;function _1e(t,e){var n=oC(t,e);if(!n)return t+"";var r=n[0],a=n[1],i=a-($F=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=r.length;return i===o?r:i>o?r+new Array(i-o+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+oC(t,Math.max(0,e+i-1))[0]}function t9(t,e){var n=oC(t,e);if(!n)return t+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}const n9={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:D1e,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>t9(t*100,e),r:t9,s:_1e,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function r9(t){return t}var a9=Array.prototype.map,i9=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function O1e(t){var e=t.grouping===void 0||t.thousands===void 0?r9:E1e(a9.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?r9:T1e(a9.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function l(f){f=sC(f);var v=f.fill,g=f.align,d=f.sign,m=f.symbol,h=f.zero,C=f.width,p=f.comma,S=f.precision,I=f.trim,D=f.type;D==="n"?(p=!0,D="g"):n9[D]||(S===void 0&&(S=12),I=!0,D="g"),(h||v==="0"&&g==="=")&&(h=!0,v="0",g="=");var E=m==="$"?n:m==="#"&&/[boxX]/.test(D)?"0"+D.toLowerCase():"",T=m==="$"?r:/[%p]/.test(D)?o:"",y=n9[D],M=/[defgprs%]/.test(D);S=S===void 0?6:/[gprs]/.test(D)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function _(O){var w=E,x=T,P,R,L;if(D==="c")x=y(O)+x,O="";else{O=+O;var H=O<0||1/O<0;if(O=isNaN(O)?c:y(Math.abs(O),S),I&&(O=M1e(O)),H&&+O==0&&d!=="+"&&(H=!1),w=(H?d==="("?d:s:d==="-"||d==="("?"":d)+w,x=(D==="s"?i9[8+$F/3]:"")+x+(H&&d==="("?")":""),M){for(P=-1,R=O.length;++P<R;)if(L=O.charCodeAt(P),48>L||L>57){x=(L===46?a+O.slice(P+1):O.slice(P))+x,O=O.slice(0,P);break}}}p&&!h&&(O=e(O,1/0));var F=w.length+O.length+x.length,U=F<C?new Array(C-F+1).join(v):"";switch(p&&h&&(O=e(U+O,U.length?C-x.length:1/0),U=""),g){case"<":O=w+O+x+U;break;case"=":O=w+U+O+x;break;case"^":O=U.slice(0,F=U.length>>1)+w+O+x+U.slice(F);break;default:O=U+w+O+x;break}return i(O)}return _.toString=function(){return f+""},_}function u(f,v){var g=l((f=sC(f),f.type="f",f)),d=Math.max(-8,Math.min(8,Math.floor(gv(v)/3)))*3,m=Math.pow(10,-d),h=i9[8+d/3];return function(C){return g(m*C)+h}}return{format:l,formatPrefix:u}}var wp,zF,qF;w1e({thousands:",",grouping:[3],currency:["$",""]});function w1e(t){return wp=O1e(t),zF=wp.format,qF=wp.formatPrefix,wp}function P1e(t){return Math.max(0,-gv(Math.abs(t)))}function A1e(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(gv(e)/3)))*3-gv(Math.abs(t)))}function x1e(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,gv(e)-gv(t))+1}function R1e(t,e,n,r){var a=Fue(t,e,n),i;switch(r=sC(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(i=A1e(a,o))&&(r.precision=i),qF(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(i=x1e(a,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=i-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(i=P1e(a))&&(r.precision=i-(r.type==="%")*2);break}}return zF(r)}function b1e(t){var e=t.domain;return t.ticks=function(n){var r=e();return Uue(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var a=e();return R1e(a[0],a[a.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),a=0,i=r.length-1,o=r[a],s=r[i],c,l,u=10;for(s<o&&(l=o,o=s,s=l,l=a,a=i,i=l);u-- >0;){if(l=KT(o,s,n),l===c)return r[a]=o,r[i]=s,e(r);if(l>0)o=Math.floor(o/l)*l,s=Math.ceil(s/l)*l;else if(l<0)o=Math.ceil(o*l)/l,s=Math.floor(s*l)/l;else break;c=l}return t},t}function i_(){var t=I1e();return t.copy=function(){return S1e(t,i_())},Bue.apply(t,arguments),b1e(t)}function N1e(t,e){e.classHierarchy.push("vtkTexture"),t.imageLoaded=()=>{e.image.removeEventListener("load",t.imageLoaded),e.imageLoaded=!0,t.modified()},t.setJsImageData=n=>{e.jsImageData!==n&&(n!==null&&(t.setInputData(null),t.setInputConnection(null),e.image=null,e.canvas=null),e.jsImageData=n,e.imageLoaded=!0,t.modified())},t.setCanvas=n=>{e.canvas!==n&&(n!==null&&(t.setInputData(null),t.setInputConnection(null),e.image=null,e.jsImageData=null),e.canvas=n,t.modified())},t.setImage=n=>{e.image!==n&&(n!==null&&(t.setInputData(null),t.setInputConnection(null),e.canvas=null,e.jsImageData=null),e.image=n,e.imageLoaded=!1,n.complete?t.imageLoaded():n.addEventListener("load",t.imageLoaded),t.modified())},t.getDimensionality=()=>{let n=0,r=0,a=1;if(t.getInputData()){const o=t.getInputData();n=o.getDimensions()[0],r=o.getDimensions()[1],a=o.getDimensions()[2]}return e.jsImageData&&(n=e.jsImageData.width,r=e.jsImageData.height),e.canvas&&(n=e.canvas.width,r=e.canvas.height),e.image&&(n=e.image.width,r=e.image.height),(n>1)+(r>1)+(a>1)},t.getInputAsJsImageData=()=>{if(!e.imageLoaded||t.getInputData())return null;if(e.jsImageData)return e.jsImageData();if(e.canvas)return e.canvas.getContext("2d").getImageData(0,0,e.canvas.width,e.canvas.height);if(e.image){const n=document.createElement("canvas");n.width=e.image.width,n.height=e.image.height;const r=n.getContext("2d");return r.translate(0,n.height),r.scale(1,-1),r.drawImage(e.image,0,0,e.image.width,e.image.height),r.getImageData(0,0,n.width,n.height)}return null}}const L1e=(t,e,n,r)=>{const a=[1,2,1],i=4,o=a,s=i,c=t.length/(e*n);let l=e,u=n,f=t;const v=[f];for(let g=0;g<r;g++){const d=[...f];l/=2,u/=2,f=new Uint8ClampedArray(l*u*c);const m=c*l;let h=0;for(let p=0;p<f.length;p+=c){p%m===0&&(h+=2*c*l);for(let S=0;S<c;S++){let I=d[h+S];I+=d[h+c+S],I+=d[h-2*m+S],I+=d[h-2*m+c+S],I/=4,f[p+S]=I}h+=2*c}let C=[...f];for(let p=0;p<f.length;p+=c)for(let S=0;S<c;S++){let I=-(o.length-1)/2,D=s,E=0;for(let T=0;T<o.length;T++){let y=p+S+I*c;const M=y%m-(p+S)%m;M>c&&(y+=m),M<-c&&(y-=m),C[y]?E+=C[y]*o[T]:D-=o[T],I+=1}f[p+S]=E/D}C=[...f];for(let p=0;p<f.length;p+=c)for(let S=0;S<c;S++){let I=-(o.length-1)/2,D=s,E=0;for(let T=0;T<o.length;T++){const y=p+S+I*m;C[y]?E+=C[y]*o[T]:D-=o[T],I+=1}f[p+S]=E/D}v.push(f)}return v},U1e={image:null,canvas:null,jsImageData:null,imageLoaded:!1,repeat:!1,interpolate:!1,edgeClamp:!1,mipLevel:0,resizable:!1};function jF(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,U1e,n),J.obj(t,e),J.algo(t,e,6,0),J.get(t,e,["canvas","image","jsImageData","imageLoaded","resizable"]),J.setGet(t,e,["repeat","edgeClamp","interpolate","mipLevel"]),N1e(t,e)}const F1e=J.newInstance(jF,"vtkTexture"),V1e={generateMipmaps:L1e};var ch={newInstance:F1e,extend:jF,...V1e};const k1e=[[-1,0,0],[1,0,0],[0,-1,0],[0,1,0],[0,0,-1],[0,0,1]],o9=[[8,7,11,3],[9,1,10,5],[4,9,0,8],[2,11,6,10],[0,3,2,1],[4,5,6,7]],Pp=[[0,1],[1,3],[2,3],[0,2],[4,5],[5,7],[6,7],[4,6],[0,4],[1,5],[3,7],[2,6]],s9=[0,1,0,1,0,1,0,1,2,2,2,2],pa=[[1,2],[1,2],[0,2],[0,2],[0,1],[0,1]],Ln=new Float64Array(3),Ap=new Float64Array(3),br=new Float64Array(3),Ku=new Float64Array(3),Uu=new Float64Array(3),xp=new Float64Array(3),SE=new Float64Array(16);function CE(t,e){t.strokeStyle=e.strokeColor,t.lineWidth=e.strokeSize,t.fillStyle=e.fontColor,t.font=`${e.fontStyle} ${e.fontSize}px ${e.fontFamily}`}function QF(t){const e=[],n=[];for(let r=0;r<3;r++){const a=i_().domain([t[r*2],t[r*2+1]]);e[r]=a.ticks(5);const i=a.tickFormat(5);n[r]=e[r].map(i)}return{ticks:e,tickStrings:n}}function G1e(t,e){e.classHierarchy.push("vtkCubeAxesActorHelper"),t.setRenderable=n=>{e.renderable!==n&&(e.renderable=n,e.tmActor.addTexture(e.renderable.getTmTexture()),e.tmActor.setProperty(n.getProperty()),e.tmActor.setParentProp(n),t.modified())},t.createPolyDataForOneLabel=(n,r,a,i,o,s,c)=>{const l=e.renderable.get_tmAtlas().get(n);if(!l)return;const u=e.renderable.getTextPolyData().getPoints().getData(),f=e.lastSize;Ln[0]=u[r*3],Ln[1]=u[r*3+1],Ln[2]=u[r*3+2],un(br,Ln,a),br[0]+=.1,un(Ap,br,i),fr(Uu,Ap,Ln),br[0]-=.1,br[1]+=.1,un(Ap,br,i),fr(xp,Ap,Ln);for(let d=0;d<3;d++)Uu[d]/=.5*.1*f[0],xp[d]/=.5*.1*f[1];let v=c.ptIdx,g=c.cellIdx;Ln[0]=u[r*3],Ln[1]=u[r*3+1],Ln[2]=u[r*3+2],o[0]<-.5?Ia(br,Uu,o[0]*s-l.width):o[0]>.5?Ia(br,Uu,o[0]*s):Ia(br,Uu,o[0]*s-l.width/2),Ra(Ln,Ln,br),Ia(br,xp,o[1]*s-l.height/2),Ra(Ln,Ln,br),c.points[v*3]=Ln[0],c.points[v*3+1]=Ln[1],c.points[v*3+2]=Ln[2],c.tcoords[v*2]=l.tcoords[0],c.tcoords[v*2+1]=l.tcoords[1],v++,Ia(br,Uu,l.width),Ra(Ln,Ln,br),c.points[v*3]=Ln[0],c.points[v*3+1]=Ln[1],c.points[v*3+2]=Ln[2],c.tcoords[v*2]=l.tcoords[2],c.tcoords[v*2+1]=l.tcoords[3],v++,Ia(br,xp,l.height),Ra(Ln,Ln,br),c.points[v*3]=Ln[0],c.points[v*3+1]=Ln[1],c.points[v*3+2]=Ln[2],c.tcoords[v*2]=l.tcoords[4],c.tcoords[v*2+1]=l.tcoords[5],v++,Ia(br,Uu,l.width),fr(Ln,Ln,br),c.points[v*3]=Ln[0],c.points[v*3+1]=Ln[1],c.points[v*3+2]=Ln[2],c.tcoords[v*2]=l.tcoords[6],c.tcoords[v*2+1]=l.tcoords[7],v++,c.polys[g*4]=3,c.polys[g*4+1]=v-4,c.polys[g*4+2]=v-3,c.polys[g*4+3]=v-2,g++,c.polys[g*4]=3,c.polys[g*4+1]=v-4,c.polys[g*4+2]=v-2,c.polys[g*4+3]=v-1,c.ptIdx+=4,c.cellIdx+=2},t.updateTexturePolyData=()=>{const n=e.camera.getCompositeProjectionMatrix(e.lastAspectRatio,-1,1);$n(n,n);const r=e.renderable.getTextValues().length,a=r*4,i=r*2,o=new Float64Array(a*3),s=new Uint16Array(i*4),c=new Float32Array(a*2);ba(SE,n);const l={ptIdx:0,cellIdx:0,polys:s,points:o,tcoords:c};let u=0,f=0,v=0;const g=e.renderable.getTextPolyData().getPoints().getData(),d=e.renderable.getTextValues();for(;u<g.length/3;){Ln[0]=g[u*3],Ln[1]=g[u*3+1],Ln[2]=g[u*3+2],un(br,Ln,n),Ln[0]=g[u*3+3],Ln[1]=g[u*3+4],Ln[2]=g[u*3+5],un(Ku,Ln,n),fr(br,br,Ku);const h=[br[0],br[1]];Mb(h),t.createPolyDataForOneLabel(d[f],u,n,SE,h,e.renderable.getAxisTitlePixelOffset(),l),u+=2,f++;for(let C=0;C<e.renderable.getTickCounts()[v];C++)t.createPolyDataForOneLabel(d[f],u,n,SE,h,e.renderable.getTickLabelPixelOffset(),l),u++,f++;v++}const m=fn.newInstance({numberOfComponents:2,values:c,name:"TextureCoordinates"});e.tmPolyData.getPointData().setTCoords(m),e.tmPolyData.getPoints().setData(o,3),e.tmPolyData.getPoints().modified(),e.tmPolyData.getPolys().setData(s,1),e.tmPolyData.getPolys().modified(),e.tmPolyData.modified()},t.updateAPISpecificData=(n,r,a)=>{(e.lastSize[0]!==n[0]||e.lastSize[1]!==n[1])&&(e.lastSize[0]=n[0],e.lastSize[1]=n[1],e.lastAspectRatio=n[0]/n[1],e.forceUpdate=!0),e.camera=r,t.updateTexturePolyData()}}const B1e=J.newInstance(function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{renderable:null};Object.assign(e,{},n),J.obj(t,e),e.tmPolyData=ci.newInstance(),e.tmMapper=K0.newInstance(),e.tmMapper.setInputData(e.tmPolyData),e.tmActor=Z0.newInstance({parentProp:t}),e.tmActor.setMapper(e.tmMapper),J.setGet(t,e,["renderable"]),J.get(t,e,["lastSize","lastAspectRatio","axisTextStyle","tickTextStyle","tmActor","ticks"]),e.forceUpdate=!1,e.lastRedrawTime={},J.obj(e.lastRedrawTime,{mtime:0}),e.lastRebuildTime={},J.obj(e.lastRebuildTime,{mtime:0}),e.lastSize=[-1,-1],e.lastTickBounds=[],G1e(t,e)},"vtkCubeAxesActorHelper");function W1e(t,e){e.classHierarchy.push("vtkCubeAxesActor"),t.setCamera=r=>{e.camera!==r&&(e.cameraModifiedSub&&(e.cameraModifiedSub.unsubscribe(),e.cameraModifiedSub=null),e.camera=r,r&&(e.cameraModifiedSub=r.onModified(t.update)),t.update(),t.modified())},t.computeFacesToDraw=()=>{const r=e.camera.getViewMatrix();$n(r,r);let a=!1;const i=Pr.getDiagonalLength(e.dataBounds),o=Math.sin(e.faceVisibilityAngle*Math.PI/180);for(let s=0;s<6;s++){let c=!1;const l=Math.floor(s/2),u=(l+1)%3,f=(l+2)%3;e.dataBounds[u*2]!==e.dataBounds[u*2+1]&&e.dataBounds[f*2]!==e.dataBounds[f*2+1]&&(Ln[l]=e.dataBounds[s]-.1*i*k1e[s][l],Ln[u]=.5*(e.dataBounds[u*2]+e.dataBounds[u*2+1]),Ln[f]=.5*(e.dataBounds[f*2]+e.dataBounds[f*2+1]),un(br,Ln,r),Ln[l]=e.dataBounds[s],un(Ku,Ln,r),fr(br,Ku,br),Ar(br,br),c=br[2]>o,e.camera.getParallelProjection()||(Ar(Ku,Ku),c=Gt(Ku,br)>o)),c!==e.lastFacesToDraw[s]&&(e.lastFacesToDraw[s]=c,a=!0)}return a},t.updatePolyData=(r,a,i)=>{let o=0,s=0;o+=8;let c=0;for(let g=0;g<12;g++)a[g]>0&&c++;if(s+=c,e.gridLines)for(let g=0;g<6;g++)r[g]&&(o+=i[pa[g][0]].length*2+i[pa[g][1]].length*2,s+=i[pa[g][0]].length+i[pa[g][1]].length);const l=new Float64Array(o*3),u=new Uint32Array(s*3);let f=0,v=0;for(let g=0;g<2;g++)for(let d=0;d<2;d++)for(let m=0;m<2;m++)l[f*3]=e.dataBounds[m],l[f*3+1]=e.dataBounds[2+d],l[f*3+2]=e.dataBounds[4+g],f++;for(let g=0;g<12;g++)a[g]>0&&(u[v*3]=2,u[v*3+1]=Pp[g][0],u[v*3+2]=Pp[g][1],v++);if(e.gridLines){for(let g=0;g<6;g++)if(r[g]){const d=Math.floor(g/2);let m=i[pa[g][0]];for(let h=0;h<m.length;h++)l[f*3+d]=e.dataBounds[g],l[f*3+pa[g][0]]=m[h],l[f*3+pa[g][1]]=e.dataBounds[pa[g][1]*2],f++,l[f*3+d]=e.dataBounds[g],l[f*3+pa[g][0]]=m[h],l[f*3+pa[g][1]]=e.dataBounds[pa[g][1]*2+1],f++,u[v*3]=2,u[v*3+1]=f-2,u[v*3+2]=f-1,v++;m=i[pa[g][1]];for(let h=0;h<m.length;h++)l[f*3+d]=e.dataBounds[g],l[f*3+pa[g][1]]=m[h],l[f*3+pa[g][0]]=e.dataBounds[pa[g][0]*2],f++,l[f*3+d]=e.dataBounds[g],l[f*3+pa[g][1]]=m[h],l[f*3+pa[g][0]]=e.dataBounds[pa[g][0]*2+1],f++,u[v*3]=2,u[v*3+1]=f-2,u[v*3+2]=f-1,v++}}e.polyData.getPoints().setData(l,3),e.polyData.getPoints().modified(),e.polyData.getLines().setData(u,1),e.polyData.getLines().modified(),e.polyData.modified()},t.updateTextData=(r,a,i,o)=>{let s=0;for(let g=0;g<12;g++)a[g]===1&&(s+=2,s+=i[s9[g]].length);const c=e.polyData.getPoints().getData(),l=new Float64Array(s*3);let u=0,f=0,v=0;for(let g=0;g<6;g++)if(r[g])for(let d=0;d<4;d++){const m=o9[g][d];if(a[m]===1){const h=s9[m],C=Pp[m][0]*3,p=Pp[m][1]*3;l[u*3]=.5*(c[C]+c[p]),l[u*3+1]=.5*(c[C+1]+c[p+1]),l[u*3+2]=.5*(c[C+2]+c[p+2]),u++;const S=Math.floor(g/2);l[u*3+S]=e.dataBounds[g],l[u*3+pa[g][0]]=.5*(e.dataBounds[pa[g][0]*2]+e.dataBounds[pa[g][0]*2+1]),l[u*3+pa[g][1]]=.5*(e.dataBounds[pa[g][1]*2]+e.dataBounds[pa[g][1]*2+1]),u++,e.textValues[f]=e.axisLabels[h],f++;const I=(h+1)%3,D=(h+2)%3,E=i[h],T=o[h];e.tickCounts[v]=E.length;for(let y=0;y<E.length;y++)l[u*3+h]=E[y],l[u*3+I]=c[C+I],l[u*3+D]=c[C+D],u++,e.textValues[f]=T[y],f++;v++}}e.textPolyData.getPoints().setData(l,3),e.textPolyData.modified()},t.update=()=>{if(!e.camera)return;const r=t.computeFacesToDraw(),a=e.lastFacesToDraw;let i=!1;for(let o=0;o<6;o++)e.dataBounds[o]!==e.lastTickBounds[o]&&(i=!0,e.lastTickBounds[o]=e.dataBounds[o]);if(r||i||e.forceUpdate){const o=new Array(12).fill(0);for(let c=0;c<6;c++)if(a[c])for(let l=0;l<4;l++)o[o9[c][l]]++;const s=e.generateTicks(e.dataBounds);t.updatePolyData(a,o,s.ticks),t.updateTextData(a,o,s.ticks,s.tickStrings),(i||e.forceUpdate)&&t.updateTextureAtlas(s.tickStrings)}e.forceUpdate=!1},t.updateTextureAtlas=r=>{e.tmContext.textBaseline="bottom",e.tmContext.textAlign="left",e._tmAtlas.clear();let a=0,i=1;for(let o=0;o<3;o++){if(!e._tmAtlas.has(e.axisLabels[o])){CE(e.tmContext,e.axisTextStyle);const s=e.tmContext.measureText(e.axisLabels[o]),c={height:s.actualBoundingBoxAscent+2,startingHeight:i,width:s.width+2,textStyle:e.axisTextStyle};e._tmAtlas.set(e.axisLabels[o],c),i+=c.height,a<c.width&&(a=c.width)}CE(e.tmContext,e.tickTextStyle);for(let s=0;s<r[o].length;s++)if(!e._tmAtlas.has(r[o][s])){const c=e.tmContext.measureText(r[o][s]),l={height:c.actualBoundingBoxAscent+2,startingHeight:i,width:c.width+2,textStyle:e.tickTextStyle};e._tmAtlas.set(r[o][s],l),i+=l.height,a<l.width&&(a=l.width)}}a=ys(a),i=ys(i),e._tmAtlas.forEach(o=>{o.tcoords=[0,(i-o.startingHeight-o.height)/i,o.width/a,(i-o.startingHeight-o.height)/i,o.width/a,(i-o.startingHeight)/i,0,(i-o.startingHeight)/i]}),e.tmCanvas.width=a,e.tmCanvas.height=i,e.tmContext.textBaseline="bottom",e.tmContext.textAlign="left",e.tmContext.clearRect(0,0,a,i),e._tmAtlas.forEach((o,s)=>{CE(e.tmContext,o.textStyle),e.tmContext.fillText(s,1,o.startingHeight+o.height-1)}),e.tmTexture.setCanvas(e.tmCanvas),e.tmTexture.modified()},t.onModified(()=>{e.forceUpdate=!0,t.update()}),t.setTickTextStyle=r=>{e.tickTextStyle={...e.tickTextStyle,...r},t.modified()},t.setAxisTextStyle=r=>{e.axisTextStyle={...e.axisTextStyle,...r},t.modified()},t.get_tmAtlas=()=>e._tmAtlas,t.getBounds=()=>(t.update(),Pr.setBounds(e.bounds,e.gridActor.getBounds()),Pr.scaleAboutCenter(e.bounds,e.boundsScaleFactor,e.boundsScaleFactor,e.boundsScaleFactor),e.bounds);const n=J.chain(t.setProperty,e.gridActor.setProperty);t.setProperty=r=>n(r)[0]}function H1e(t,e,n){return{boundsScaleFactor:1.3,camera:null,dataBounds:[...Pr.INIT_BOUNDS],faceVisibilityAngle:8,gridLines:!0,axisLabels:null,axisTitlePixelOffset:35,tickLabelPixelOffset:12,generateTicks:QF,...n,axisTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:18,fontFamily:"serif",...n==null?void 0:n.axisTextStyle},tickTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:14,fontFamily:"serif",...n==null?void 0:n.tickTextStyle}}}function KF(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Z0.extend(t,e,H1e(t,e,n)),e.lastFacesToDraw=[!1,!1,!1,!1,!1,!1],e.axisLabels=["X-Axis","Y-Axis","Z-Axis"],e.tickCounts=[],e.textValues=[],e.lastTickBounds=[],e.tmCanvas=document.createElement("canvas"),e.tmContext=e.tmCanvas.getContext("2d"),e._tmAtlas=new Map,e.tmTexture=ch.newInstance({resizable:!0}),e.tmTexture.setInterpolate(!1),t.getProperty().setDiffuse(0),t.getProperty().setAmbient(1),e.gridMapper=K0.newInstance(),e.polyData=ci.newInstance(),e.gridMapper.setInputData(e.polyData),e.gridActor=Z0.newInstance(),e.gridActor.setMapper(e.gridMapper),e.gridActor.setProperty(t.getProperty()),e.gridActor.setParentProp(t),e.textPolyData=ci.newInstance(),J.setGet(t,e,["axisTitlePixelOffset","boundsScaleFactor","faceVisibilityAngle","gridLines","tickLabelPixelOffset","generateTicks"]),J.setGetArray(t,e,["dataBounds"],6),J.setGetArray(t,e,["axisLabels"],3),J.get(t,e,["axisTextStyle","tickTextStyle","camera","tmTexture","textValues","textPolyData","tickCounts","gridActor"]),W1e(t,e)}const $1e=J.newInstance(KF,"vtkCubeAxesActor");var XF={newInstance:$1e,extend:KF,newCubeAxesActorHelper:B1e,defaultGenerateTicks:QF};function z1e(t,e){e.classHierarchy.push("vtkOpenGLCubeAxesActor"),t.buildPass=n=>{n&&(e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.CubeAxesActorHelper.getRenderable()||e.CubeAxesActorHelper.setRenderable(e.renderable),t.prepareNodes(),t.addMissingNode(e.CubeAxesActorHelper.getTmActor()),t.addMissingNode(e.renderable.getGridActor()),t.removeUnusedNodes())},t.opaquePass=(n,r)=>{if(n){const a=e._openGLRenderer?e._openGLRenderer.getRenderable().getActiveCamera():null,i=e._openGLRenderer.getTiledSizeAndOrigin();e.CubeAxesActorHelper.updateAPISpecificData([i.usize,i.vsize],a,e._openGLRenderWindow.getRenderable())}}}const q1e={};function j1e(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,q1e,n),Fr.extend(t,e,n),e.CubeAxesActorHelper=XF.newCubeAxesActorHelper(),z1e(t,e)}const Q1e=dr(j1e,"vtkOpenGLCubeAxesActor");Za("vtkCubeAxesActor",Q1e);const{ColorMode:K1e,ScalarMode:Fu,GetArray:IE}=lI;function X1e(t,e){e.classHierarchy.push("vtkMapper2D"),t.createDefaultLookupTable=()=>{e.lookupTable=xS.newInstance()},t.getColorModeAsString=()=>J.enumToString(K1e,e.colorMode),t.setColorModeToDefault=()=>t.setColorMode(0),t.setColorModeToMapScalars=()=>t.setColorMode(1),t.setColorModeToDirectScalars=()=>t.setColorMode(2),t.getScalarModeAsString=()=>J.enumToString(Fu,e.scalarMode),t.setScalarModeToDefault=()=>t.setScalarMode(0),t.setScalarModeToUsePointData=()=>t.setScalarMode(1),t.setScalarModeToUseCellData=()=>t.setScalarMode(2),t.setScalarModeToUsePointFieldData=()=>t.setScalarMode(3),t.setScalarModeToUseCellFieldData=()=>t.setScalarMode(4),t.setScalarModeToUseFieldData=()=>t.setScalarMode(5),t.getAbstractScalars=(n,r,a,i,o)=>{if(!n||!e.scalarVisibility)return{scalars:null,cellFLag:!1};let s=null,c=!1;if(r===Fu.DEFAULT)s=n.getPointData().getScalars(),s||(s=n.getCellData().getScalars(),c=!0);else if(r===Fu.USE_POINT_DATA)s=n.getPointData().getScalars();else if(r===Fu.USE_CELL_DATA)s=n.getCellData().getScalars(),c=!0;else if(r===Fu.USE_POINT_FIELD_DATA){const l=n.getPointData();a===IE.BY_ID?s=l.getArrayByIndex(i):s=l.getArrayByName(o)}else if(r===Fu.USE_CELL_FIELD_DATA){const l=n.getCellData();c=!0,a===IE.BY_ID?s=l.getArrayByIndex(i):s=l.getArrayByName(o)}else if(r===Fu.USE_FIELD_DATA){const l=n.getFieldData();a===IE.BY_ID?s=l.getArrayByIndex(i):s=l.getArrayByName(o)}return{scalars:s,cellFlag:c}},t.getLookupTable=()=>(e.lookupTable||t.createDefaultLookupTable(),e.lookupTable),t.getMTime=()=>{let n=e.mtime;if(e.lookupTable!==null){const r=e.lookupTable.getMTime();n=r>n?r:n}return n},t.mapScalars=(n,r)=>{const a=t.getAbstractScalars(n,e.scalarMode,e.arrayAccessMode,e.arrayId,e.colorByArrayName).scalars;if(!a){e.colorMapColors=null;return}const i=`${t.getMTime()}${a.getMTime()}${r}`;if(e.colorBuildString===i)return;e.useLookupTableScalarRange||t.getLookupTable().setRange(e.scalarRange[0],e.scalarRange[1]);const o=t.getLookupTable();o&&(o.build(),e.colorMapColors=o.mapScalars(a,e.colorMode,e.fieldDataTupleId)),e.colorBuildString=`${t.getMTime()}${a.getMTime()}${r}`},t.getPrimitiveCount=()=>{const n=t.getInputData();return{points:n.getPoints().getNumberOfValues()/3,verts:n.getVerts().getNumberOfValues()-n.getVerts().getNumberOfCells(),lines:n.getLines().getNumberOfValues()-2*n.getLines().getNumberOfCells(),triangles:n.getPolys().getNumberOfValues()-3*n.getPolys().getNumberOfCells()}}}const Y1e={static:!1,lookupTable:null,scalarVisibility:!1,scalarRange:[0,1],useLookupTableScalarRange:!1,colorMode:0,scalarMode:0,arrayAccessMode:1,renderTime:0,colorByArrayName:null,transformCoordinate:null,viewSpecificProperties:null,customShaderAttributes:[]};function YF(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Y1e,n),X7.extend(t,e,n),J.get(t,e,["colorMapColors"]),J.setGet(t,e,["arrayAccessMode","colorByArrayName","colorMode","lookupTable","renderTime","scalarMode","scalarVisibility","static","transformCoordinate","useLookupTableScalarRange","viewSpecificProperties","customShaderAttributes"]),J.setGetArray(t,e,["scalarRange"],2),e.viewSpecificProperties||(e.viewSpecificProperties={}),X1e(t,e)}const Z1e=J.newInstance(YF,"vtkMapper2D");var J1e={newInstance:Z1e,extend:YF},efe=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkPolyData2DFS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/

uniform int PrimitiveIDOffset;

// Texture coordinates
//VTK::TCoord::Dec

// Scalar coloring
//VTK::Color::Dec

// Depth Peeling
//VTK::DepthPeeling::Dec

// picking support
//VTK::Picking::Dec

// the output of this shader
//VTK::Output::Dec

// Apple Bug
//VTK::PrimID::Dec

void main()
{
  // Apple Bug
  //VTK::PrimID::Impl

  //VTK::Color::Impl
  //VTK::TCoord::Impl

  //VTK::DepthPeeling::Impl
  //VTK::Picking::Impl

  if (gl_FragData[0].a <= 0.0)
    {
    discard;
    }
}
`,tfe=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkPolyData2DVS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/

// all variables that represent positions or directions have a suffix
// indicating the coordinate system they are in. The possible values are
// MC - Model Coordinates
// WC - WC world coordinates
// VC - View Coordinates
// DC - Display Coordinates

in vec4 vertexWC;

// frag position in VC
//VTK::PositionVC::Dec

// material property values
//VTK::Color::Dec

// Texture coordinates
//VTK::TCoord::Dec

// Apple Bug
//VTK::PrimID::Dec

uniform mat4 WCVCMatrix;  // World to view matrix

void main()
{
  // Apple Bug
  //VTK::PrimID::Impl

  gl_Position = WCVCMatrix*vertexWC;

  //VTK::TCoord::Impl

  //VTK::Color::Impl

  //VTK::PositionVC::Impl
}
`;const ZF={BACKGROUND:0,FOREGROUND:1};var JF={DisplayLocation:ZF};const{primTypes:Ks}=tc,{ScalarMode:Rp}=J1e,{vtkErrorMacro:bp}=Bi,nfe={type:"StartEvent"},rfe={type:"EndEvent"};function afe(t,e){e.classHierarchy.push("vtkOpenGLPolyDataMapper2D"),t.buildPass=r=>{r&&(e.openGLActor2D=t.getFirstAncestorOfType("vtkOpenGLActor2D"),e._openGLRenderer=e.openGLActor2D.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getLastAncestorOfType("vtkOpenGLRenderWindow"),e.openGLCamera=e._openGLRenderer.getViewNodeFor(e._openGLRenderer.getRenderable().getActiveCamera()))},t.overlayPass=r=>{r&&t.render()},t.getShaderTemplate=(r,a,i)=>{r.Vertex=tfe,r.Fragment=efe,r.Geometry=""},t.render=()=>{const r=e._openGLRenderWindow.getContext();if(e.context!==r){e.context=r;for(let o=Ks.Start;o<Ks.End;o++)e.primitives[o].setOpenGLRenderWindow(e._openGLRenderWindow)}const a=e.openGLActor2D.getRenderable(),i=e._openGLRenderer.getRenderable();t.renderPiece(i,a)},t.renderPiece=(r,a)=>{if(t.invokeEvent(nfe),e.renderable.getStatic()||e.renderable.update(),e.currentInput=e.renderable.getInputData(),t.invokeEvent(rfe),!e.currentInput){bp("No input!");return}!e.currentInput.getPoints||!e.currentInput.getPoints().getNumberOfValues()||(t.renderPieceStart(r,a),t.renderPieceDraw(r,a),t.renderPieceFinish(r,a))},t.renderPieceStart=(r,a)=>{if(e.primitiveIDOffset=0,e._openGLRenderer.getSelector())switch(e._openGLRenderer.getSelector().getCurrentPass()){default:e._openGLRenderer.getSelector().renderProp(a)}t.updateBufferObjects(r,a),e.lastBoundBO=null},t.getNeedToRebuildShaders=(r,a,i)=>r.getShaderSourceTime().getMTime()<e.renderable.getMTime()||r.getShaderSourceTime().getMTime()<e.currentInput.getMTime(),t.updateBufferObjects=(r,a)=>{t.getNeedToRebuildBufferObjects(r,a)&&t.buildBufferObjects(r,a)},t.getNeedToRebuildBufferObjects=(r,a)=>{const i=e.VBOBuildTime.getMTime();return!!(i<t.getMTime()||i<e._openGLRenderWindow.getMTime()||i<e.renderable.getMTime()||i<a.getMTime()||i<e.currentInput.getMTime()||e.renderable.getTransformCoordinate()&&i<r.getMTime())},t.buildBufferObjects=(r,a)=>{const i=e.currentInput;if(i===null)return;e.renderable.mapScalars(i,a.getProperty().getOpacity());const o=e.renderable.getColorMapColors();e.haveCellScalars=!1;const s=e.renderable.getScalarMode();e.renderable.getScalarVisibility()&&(s===Rp.USE_CELL_DATA||s===Rp.USE_CELL_FIELD_DATA||s===Rp.USE_FIELD_DATA||!i.getPointData().getScalars())&&s!==Rp.USE_POINT_FIELD_DATA&&o&&(e.haveCellScalars=!0);const c=a.getProperty().getRepresentation();let l=i.getPointData().getTCoords();e.openGLActor2D.getActiveTextures()||(l=null);const u=e.renderable.getTransformCoordinate(),v=r.getRenderWindow().getViews()[0].getViewportSize(r),g=`${i.getMTime()}A${c}B${i.getMTime()}C${o?o.getMTime():1}D${l?l.getMTime():1}E${u?r.getMTime():1}F${v}`;if(e.VBOBuildString!==g){let d=i.getPoints();if(u){const h=em.newInstance(),C=d.getNumberOfPoints();h.setNumberOfPoints(C);const p=[];for(let S=0;S<C;++S){d.getPoint(S,p),u.setValue(p);const I=u.getComputedDoubleViewportValue(r);h.setPoint(S,I[0],I[1],0)}d=h}const m={points:d,tcoords:l,colors:o,cellOffset:0,haveCellScalars:e.haveCellSCalars,customAttributes:e.renderable.getCustomShaderAttributes().map(h=>i.getPointData().getArrayByName(h))};m.cellOffset+=e.primitives[Ks.Points].getCABO().createVBO(i.getVerts(),"verts",c,m),m.cellOffset+=e.primitives[Ks.Lines].getCABO().createVBO(i.getLines(),"lines",c,m),m.cellOffset+=e.primitives[Ks.Tris].getCABO().createVBO(i.getPolys(),"polys",c,m),m.cellOffset+=e.primitives[Ks.TriStrips].getCABO().createVBO(i.getStrips(),"strips",c,m),e.VBOBuildTime.modified(),e.VBOBuildString=g}},t.renderPieceDraw=(r,a)=>{const i=a.getProperty().getRepresentation();e.context.depthMask(!0);for(let s=Ks.Start;s<Ks.End;s++)e.primitives[s].getCABO().getElementCount()&&(e.lastBoundBO=e.primitives[s],e.primitiveIDOffset+=e.primitives[s].drawArrays(r,a,i,t))},t.renderPieceFinish=(r,a)=>{e.lastBoundBO&&e.lastBoundBO.getVAO().release()},t.replaceShaderValues=(r,a,i)=>{t.replaceShaderColor(r,a,i),t.replaceShaderTCoord(r,a,i),t.replaceShaderPicking(r,a,i),t.replaceShaderPositionVC(r,a,i)},t.replaceShaderColor=(r,a,i)=>{let o=r.Vertex,s=r.Geometry,c=r.Fragment;e.haveCellScalars&&(c=Ve.substitute(c,"//VTK::Color::Dec",["uniform samplerBuffer texture1;"]).result,c=Ve.substitute(c,"//VTK::Color::Impl",["gl_FragData[0] = texelFetchBuffer(texture1, gl_PrimitiveID + PrimitiveIDOffset);"]).result),e.lastBoundBO.getCABO().getColorComponents()!==0?(o=Ve.substitute(o,"//VTK::Color::Dec",["in vec4 diffuseColor;","out vec4 fcolorVSOutput;"]).result,o=Ve.substitute(o,"//VTK::Color::Impl",["fcolorVSOutput = diffuseColor;"]).result,s=Ve.substitute(s,"//VTK::Color::Dec",[`in vec4 fcolorVSOutput[];
`,"out vec4 fcolorGSOutput;"]).result,s=Ve.substitute(s,"//VTK::Color::Impl",["fcolorGSOutput = fcolorVSOutput[i];"]).result,c=Ve.substitute(c,"//VTK::Color::Dec",["in vec4 fcolorVSOutput;"]).result,c=Ve.substitute(c,"//VTK::Color::Impl",["gl_FragData[0] = fcolorVSOutput;"]).result):(c=Ve.substitute(c,"//VTK::Color::Dec",["uniform vec4 diffuseColor;"]).result,c=Ve.substitute(c,"//VTK::Color::Impl",["gl_FragData[0] = diffuseColor;"]).result),r.Vertex=o,r.Geometry=s,r.Fragment=c},t.replaceShaderTCoord=(r,a,i)=>{if(e.lastBoundBO.getCABO().getTCoordOffset()){let o=r.Vertex,s=r.Geometry,c=r.Fragment;const l=e.lastBoundBO.getCABO().getTCoordComponents();l===1?(o=Ve.substitute(o,"//VTK::TCoord::Dec",["in float tcoordMC;","out float tcoordVCVSOutput;"]).result,o=Ve.substitute(o,"//VTK::TCoord::Impl",["tcoordVCVSOutput = tcoordMC;"]).result,s=Ve.substitute(s,"//VTK::TCoord::Dec",[`in float tcoordVCVSOutput[];
`,"out float tcoordVCGSOutput;"]).result,s=Ve.substitute(s,["//VTK::TCoord::Impl","tcoordVCGSOutput = tcoordVCVSOutput[i];"]).result,c=Ve.substitute(c,"//VTK::TCoord::Dec",["in float tcoordVCVSOutput;","uniform sampler2D texture1;"]).result,c=Ve.substitute(c,"//VTK::TCoord::Impl",["gl_FragData[0] = gl_FragData[0]*texture2D(texture1, vec2(tcoordVCVSOutput,0));"]).result):l===2&&(o=Ve.substitute(o,"//VTK::TCoord::Dec",["in vec2 tcoordMC;","out vec2 tcoordVCVSOutput;"]).result,o=Ve.substitute(o,"//VTK::TCoord::Impl",["tcoordVCVSOutput = tcoordMC;"]).result,s=Ve.substitute(s,"//VTK::TCoord::Dec",[`in vec2 tcoordVCVSOutput[];
`,"out vec2 tcoordVCGSOutput;"]).result,s=Ve.substitute(s,"//VTK::TCoord::Impl",["tcoordVCGSOutput = tcoordVCVSOutput[i];"]).result,c=Ve.substitute(c,"//VTK::TCoord::Dec",["in vec2 tcoordVCVSOutput;","uniform sampler2D texture1;"]).result,c=Ve.substitute(c,"//VTK::TCoord::Impl",["gl_FragData[0] = gl_FragData[0]*texture2D(texture1, tcoordVCVSOutput.st);"]).result),e.haveCellScalars&&(s=Ve.substitute(s,"//VTK::PrimID::Impl",["gl_PrimitiveID = gl_PrimitiveIDIn;"]).result),r.Vertex=o,r.Geometry=s,r.Fragment=c}},t.replaceShaderPicking=(r,a,i)=>{let o=r.Fragment;o=Ve.substitute(o,"//VTK::Picking::Dec",["uniform vec3 mapperIndex;","uniform int picking;"]).result,o=Ve.substitute(o,"//VTK::Picking::Impl","  gl_FragData[0] = picking != 0 ? vec4(mapperIndex,1.0) : gl_FragData[0];").result,r.Fragment=o},t.replaceShaderPositionVC=(r,a,i)=>{e.lastBoundBO.replaceShaderPositionVC(r,a,i)},t.invokeShaderCallbacks=(r,a,i)=>{const o=e.renderable.getViewSpecificProperties().ShadersCallbacks;o&&o.forEach(s=>{s.callback(s.userData,r,a,i)})},t.setMapperShaderParameters=(r,a,i)=>{if(r.getProgram().isUniformUsed("PrimitiveIDOffset")&&r.getProgram().setUniformi("PrimitiveIDOffset",e.primitiveIDOffset),r.getProgram().isAttributeUsed("vertexWC")&&(r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"vertexWC",r.getCABO().getVertexOffset(),r.getCABO().getStride(),e.context.FLOAT,3,!1)||bp("Error setting vertexWC in shader VAO.")),r.getCABO().getElementCount()&&(e.VBOBuildTime.getMTime()>r.getAttributeUpdateTime().getMTime()||r.getShaderSourceTime().getMTime()>r.getAttributeUpdateTime().getMTime())){e.renderable.getCustomShaderAttributes().forEach((c,l)=>{r.getProgram().isAttributeUsed(`${c}MC`)&&(r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),`${c}MC`,r.getCABO().getCustomData()[l].offset,r.getCABO().getStride(),e.context.FLOAT,r.getCABO().getCustomData()[l].components,!1)||bp(`Error setting ${c}MC in shader VAO.`))}),r.getProgram().isAttributeUsed("tcoordMC")&&r.getCABO().getTCoordOffset()?r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"tcoordMC",r.getCABO().getTCoordOffset(),r.getCABO().getStride(),e.context.FLOAT,r.getCABO().getTCoordComponents(),!1)||bp("Error setting tcoordMC in shader VAO."):r.getVAO().removeAttributeArray("tcoordMC"),e.internalColorTexture&&r.getProgram().isUniformUsed("texture1")&&r.getProgram().setUniformi("texture1",e.internalColorTexture.getTextureUnit());const o=e.openGLActor2D.getActiveTextures();if(o)for(let c=0;c<o.length;++c){const u=o[c].getTextureUnit(),f=`texture${u+1}`;r.getProgram().isUniformUsed(f)&&r.getProgram().setUniformi(f,u)}r.setMapperShaderParameters(a,i,e._openGLRenderer.getTiledSizeAndOrigin());const s=e._openGLRenderer.getSelector();r.getProgram().setUniform3fArray("mapperIndex",s?s.getPropColorValue():[0,0,0]),r.getProgram().setUniformi("picking",s?s.getCurrentPass()+1:0)}},t.setPropertyShaderParameters=(r,a,i)=>{const o=e.renderable.getColorMapColors();if(!o||o.getNumberOfComponents()===0){const s=r.getProgram(),c=i.getProperty(),l=c.getOpacity(),u=c.getColor(),f=[u[0],u[1],u[2],l];s.setUniform4f("diffuseColor",f)}},t.setLightingShaderParameters=(r,a,i)=>{};function n(r,a,i){return a.identity(i),r.reduce((o,s,c)=>c===0?s?a.copy(o,s):a.identity(o):s?a.multiply(o,o,s):o,i)}t.setCameraShaderParameters=(r,a,i)=>{const o=r.getProgram(),c=r.getCABO().getCoordShiftAndScaleEnabled()?r.getCABO().getInverseShiftAndScaleMatrix():null,u=a.getRenderWindow().getViews()[0].getViewportSize(a),f=a.getViewport(),v=i.getActualPositionCoordinate().getComputedDoubleViewportValue(a),g=[0,0,1,1],d=[0,0,1,1];if(d[0]=f[0]>=g[0]?f[0]:g[0],d[1]=f[1]>=g[1]?f[1]:g[1],d[2]=f[2]<=g[2]?f[2]:g[2],d[3]=f[3]<=g[3]?f[3]:g[3],d[0]>=d[2]||d[1]>=d[3])return;u[0]=Vg(u[0]*(d[2]-d[0])/(f[2]-f[0])),u[1]=Vg(u[1]*(d[3]-d[1])/(f[3]-f[1]));const m=e._openGLRenderer.getParent().getSize(),h=Vg(v[0]-(d[0]-f[0])*m[0]),C=Vg(v[1]-(d[1]-f[1])*m[1]),p=-h;let S=-h+u[0];const I=-C;let D=-C+u[1];p===S&&(S=p+1),I===D&&(D=I+1);const E=zt(new Float64Array(16));E[0]=2/(S-p),E[1*4+1]=2/(D-I),E[0*4+3]=-1*(S+p)/(S-p),E[1*4+3]=-1*(D+I)/(D-I),E[2*4+2]=0,E[2*4+3]=i.getProperty().getDisplayLocation()===ZF.FOREGROUND?-1:1,E[3*4+3]=1,$n(E,E),o.setUniformMatrix("WCVCMatrix",n([E,c],Jd,e.tmpMat4))},t.getAllocatedGPUMemoryInBytes=()=>{let r=0;return e.primitives.forEach(a=>{r+=a.getAllocatedGPUMemoryInBytes()}),r}}const ife={context:null,VBOBuildTime:0,VBOBuildString:null,primitives:null,primTypes:null,shaderRebuildString:null};function ofe(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,ife,n),Fr.extend(t,e,n),X0.implementReplaceShaderCoincidentOffset(t,e,n),X0.implementBuildShadersWithReplacements(t,e,n),e.primitives=[],e.primTypes=Ks,e.tmpMat4=zt(new Float64Array(16));for(let r=Ks.Start;r<Ks.End;r++)e.primitives[r]=tc.newInstance(),e.primitives[r].setPrimitiveType(r),e.primitives[r].set({lastLightComplexity:0,lastLightCount:0,lastSelectionPass:!1},!0);Wa(t,e,["context"]),e.VBOBuildTime={},Yr(e.VBOBuildTime,{mtime:0}),afe(t,e)}const sfe=dr(ofe,"vtkOpenGLPolyDataMapper2D");Za("vtkMapper2D",sfe);const{VectorMode:cfe}=uI;function DE(t,e){t.strokeStyle=e.strokeColor,t.lineWidth=e.strokeSize,t.fillStyle=e.fontColor,t.font=`${e.fontStyle} ${e.fontSize}px ${e.fontFamily}`}function eV(t,e){return n=>{const r=n.getLastSize(),a=(r[0]/700)**.8,i=(r[1]/700)**.8,o=Math.min(a,i),s=n.getAxisTextStyle(),c=n.getTickTextStyle();Object.assign(s,e.axisTextStyle),Object.assign(c,e.tickTextStyle),s.fontSize=Math.max(24*o,12),n.getLastAspectRatio()>1?c.fontSize=Math.max(20*o,10):c.fontSize=Math.max(16*o,10);const l=n.updateTextureAtlas();n.setTopTitle(!1);const u=n.getBoxSizeByReference();if(n.getLastAspectRatio()>1)n.setTickLabelPixelOffset(.3*c.fontSize),l.titleWidth<=l.tickWidth+n.getTickLabelPixelOffset()+.8*c.fontSize?(n.setTopTitle(!0),n.setAxisTitlePixelOffset(.2*c.fontSize),u[0]=2*(l.tickWidth+n.getTickLabelPixelOffset()+.8*c.fontSize)/r[0],n.setBoxPosition([.98-u[0],-.92])):(n.setAxisTitlePixelOffset(.2*c.fontSize),u[0]=2*(l.titleHeight+n.getAxisTitlePixelOffset()+l.tickWidth+n.getTickLabelPixelOffset()+.8*c.fontSize)/r[0],n.setBoxPosition([.99-u[0],-.92])),u[1]=Math.max(1.2,Math.min(1.84/i,1.84));else{n.setAxisTitlePixelOffset(1.2*c.fontSize),n.setTickLabelPixelOffset(.1*c.fontSize);const f=2*(.8*c.fontSize+l.titleHeight+n.getAxisTitlePixelOffset())/r[1],v=2*l.tickWidth/r[0];u[0]=Math.min(1.9,Math.max(1.4,1.4*v*(n.getTicks().length+3))),u[1]=f,n.setBoxPosition([-.5*u[0],-.97])}n.recomputeBarSegments(l)}}function tV(t,e){return n=>{const r=n.getLastTickBounds(),a=i_().domain([r[0],r[1]]),i=a.ticks(5),o=a.tickFormat(5);n.setTicks(i),n.setTickStrings(i.map(o))}}function lfe(t,e){e.classHierarchy.push("vtkScalarBarActorHelper"),t.setRenderable=a=>{e.renderable!==a&&(e.renderable=a,e.barActor.setProperty(a.getProperty()),e.barActor.setParentProp(a),e.barActor.setCoordinateSystemToDisplay(),e.tmActor.setProperty(a.getProperty()),e.tmActor.setParentProp(a),e.tmActor.setCoordinateSystemToDisplay(),e.generateTicks=a.generateTicks,e.axisTextStyle={...a.getAxisTextStyle()},e.tickTextStyle={...a.getTickTextStyle()},t.modified())},t.updateAPISpecificData=(a,i,o)=>{(e.lastSize[0]!==a[0]||e.lastSize[1]!==a[1])&&(e.lastSize[0]=a[0],e.lastSize[1]=a[1],e.lastAspectRatio=a[0]/a[1],e.forceUpdate=!0);const s=e.renderable.getScalarsToColors();if(!(!s||!e.renderable.getVisibility())&&(e.barMapper.setLookupTable(s),e.camera=i,e.renderWindow=o,e.forceUpdate||Math.max(s.getMTime(),t.getMTime(),e.renderable.getMTime())>e.lastRebuildTime.getMTime())){const c=s.getMappingRange();if(e.lastTickBounds=[...c],e.renderable.getGenerateTicks()(t),e.renderable.getAutomated())e.renderable.getAutoLayout()(t);else{e.axisTextStyle={...e.renderable.getAxisTextStyle()},e.tickTextStyle={...e.renderable.getTickTextStyle()},e.barPosition=[...e.renderable.getBarPosition()],e.barSize=[...e.renderable.getBarSize()],e.boxPosition=[...e.renderable.getBoxPosition()],e.boxSize=[...e.renderable.getBoxSize()],e.axisTitlePixelOffset=e.renderable.getAxisTitlePixelOffset(),e.tickLabelPixelOffset=e.renderable.getTickLabelPixelOffset();const l=t.updateTextureAtlas();t.recomputeBarSegments(l)}t.updatePolyDataForLabels(),t.updatePolyDataForBarSegments(),e.lastRebuildTime.modified(),e.forceUpdate=!1}},t.updateTextureAtlas=()=>{e.tmContext.textBaseline="bottom",e.tmContext.textAlign="left";const a={},i=new Map;let o=0,s=1;DE(e.tmContext,e.axisTextStyle);let c=e.tmContext.measureText(e.renderable.getAxisLabel()),l={height:c.actualBoundingBoxAscent+2,startingHeight:s,width:c.width+2,textStyle:e.axisTextStyle};i.set(e.renderable.getAxisLabel(),l),s+=l.height,o=l.width,a.titleWidth=l.width,a.titleHeight=l.height,a.tickWidth=0,a.tickHeight=0,DE(e.tmContext,e.tickTextStyle);const u=[...t.getTickStrings(),"NaN","Below","Above"];for(let f=0;f<u.length;f++)i.has(u[f])||(c=e.tmContext.measureText(u[f]),l={height:c.actualBoundingBoxAscent+2,startingHeight:s,width:c.width+2,textStyle:e.tickTextStyle},i.set(u[f],l),s+=l.height,o<l.width&&(o=l.width),a.tickWidth<l.width&&(a.tickWidth=l.width),a.tickHeight<l.height&&(a.tickHeight=l.height));return o=ys(o),s=ys(s),i.forEach(f=>{f.tcoords=[0,(s-f.startingHeight-f.height)/s,f.width/o,(s-f.startingHeight-f.height)/s,f.width/o,(s-f.startingHeight)/s,0,(s-f.startingHeight)/s]}),e.tmCanvas.width=o,e.tmCanvas.height=s,e.tmContext.textBaseline="bottom",e.tmContext.textAlign="left",e.tmContext.clearRect(0,0,o,s),i.forEach((f,v)=>{DE(e.tmContext,f.textStyle),e.tmContext.fillText(v,1,f.startingHeight+f.height-1)}),e.tmTexture.setCanvas(e.tmCanvas),e.tmTexture.modified(),e._tmAtlas=i,a},t.computeBarSize=a=>{e.vertical=e.boxSize[1]>e.boxSize[0];const i=2*a.tickHeight/e.lastSize[1],o=[1,1];if(e.vertical){const s=2*(a.tickWidth+e.tickLabelPixelOffset)/e.lastSize[0];if(e.topTitle){const c=2*(a.titleHeight+e.axisTitlePixelOffset)/e.lastSize[1];e.barSize[0]=e.boxSize[0]-s,e.barSize[1]=e.boxSize[1]-c}else{const c=2*(a.titleHeight+e.axisTitlePixelOffset)/e.lastSize[0];e.barSize[0]=e.boxSize[0]-c-s,e.barSize[1]=e.boxSize[1]}e.barPosition[0]=e.boxPosition[0]+s,e.barPosition[1]=e.boxPosition[1],o[1]=i}else{const s=(2*a.tickWidth-8)/e.lastSize[0],c=2*(a.titleHeight+e.axisTitlePixelOffset)/e.lastSize[1];e.barSize[0]=e.boxSize[0],e.barPosition[0]=e.boxPosition[0],e.barSize[1]=e.boxSize[1]-c,e.barPosition[1]=e.boxPosition[1],o[0]=s}return o},t.recomputeBarSegments=a=>{var v,g,d,m;const i=t.computeBarSize(a);e.barSegments=[];const o=[0,0],s=e.vertical?1:0,c=e.vertical?.01:.02;function l(h,C){e.barSegments.push({corners:[[...o],[o[0]+i[0],o[1]],[o[0]+i[0],o[1]+i[1]],[o[0],o[1]+i[1]]],scalars:C,title:h}),o[s]+=i[s]+c}e.renderable.getDrawNanAnnotation()&&e.renderable.getScalarsToColors().getNanColor()&&l("NaN",[NaN,NaN,NaN,NaN]),e.renderable.getDrawBelowRangeSwatch()&&((g=(v=e.renderable.getScalarsToColors()).getUseBelowRangeColor)!=null&&g.call(v))&&l("Below",[-.1,-.1,-.1,-.1]);const u=(m=(d=e.renderable.getScalarsToColors()).getUseAboveRangeColor)==null?void 0:m.call(d);o[s]+=c;const f=i[s];i[s]=u?1-2*c-i[s]-o[s]:1-c-o[s],l("ticks",e.vertical?[0,0,.995,.995]:[0,.995,.995,0]),e.renderable.getDrawAboveRangeSwatch()&&u&&(i[s]=f,o[s]+=c,l("Above",[1.1,1.1,1.1,1.1]))};const n=new Float64Array(3);t.createPolyDataForOneLabel=(a,i,o,s,c,l)=>{const u=e._tmAtlas.get(a);if(!u)return;let f=l.ptIdx,v=l.cellIdx;n[0]=(.5*i[0]+.5)*e.lastSize[0],n[1]=(.5*i[1]+.5)*e.lastSize[1],n[2]=i[2],n[0]+=c[0],n[1]+=c[1];const g=[],d=s==="vertical"?[1,0]:[0,1];s==="vertical"?(g[0]=u.width,g[1]=-u.height,o[0]==="middle"?n[1]-=u.width/2:o[0]==="right"&&(n[1]-=u.width),o[1]==="middle"?n[0]+=u.height/2:o[1]==="top"&&(n[0]+=u.height)):(g[0]=u.width,g[1]=u.height,o[0]==="middle"?n[0]-=u.width/2:o[0]==="right"&&(n[0]-=u.width),o[1]==="middle"?n[1]-=u.height/2:o[1]==="top"&&(n[1]-=u.height)),l.points[f*3]=n[0],l.points[f*3+1]=n[1],l.points[f*3+2]=n[2],l.tcoords[f*2]=u.tcoords[0],l.tcoords[f*2+1]=u.tcoords[1],f++,n[d[0]]+=g[0],l.points[f*3]=n[0],l.points[f*3+1]=n[1],l.points[f*3+2]=n[2],l.tcoords[f*2]=u.tcoords[2],l.tcoords[f*2+1]=u.tcoords[3],f++,n[d[1]]+=g[1],l.points[f*3]=n[0],l.points[f*3+1]=n[1],l.points[f*3+2]=n[2],l.tcoords[f*2]=u.tcoords[4],l.tcoords[f*2+1]=u.tcoords[5],f++,n[d[0]]-=g[0],l.points[f*3]=n[0],l.points[f*3+1]=n[1],l.points[f*3+2]=n[2],l.tcoords[f*2]=u.tcoords[6],l.tcoords[f*2+1]=u.tcoords[7],f++,l.polys[v*4]=3,l.polys[v*4+1]=f-4,l.polys[v*4+2]=f-3,l.polys[v*4+3]=f-2,v++,l.polys[v*4]=3,l.polys[v*4+1]=f-4,l.polys[v*4+2]=f-2,l.polys[v*4+3]=f-1,l.ptIdx+=4,l.cellIdx+=2};const r=new Float64Array(3);t.updatePolyDataForLabels=()=>{const a=t.getTickStrings().length+e.barSegments.length,i=a*4,o=a*2,s=new Float64Array(i*3),c=new Uint16Array(o*4),l=new Float32Array(i*2),u={ptIdx:0,cellIdx:0,polys:c,points:s,tcoords:l},f=e.vertical?0:1,v=e.vertical?1:0;r[2]=-.99;const g=e.vertical?["right","middle"]:["middle","bottom"];let d=[0,1];const m=[0,0];e.vertical?(m[0]=-e.tickLabelPixelOffset,e.topTitle?(r[0]=e.boxPosition[0]+.5*e.boxSize[0],r[1]=e.barPosition[1]+e.barSize[1],t.createPolyDataForOneLabel(e.renderable.getAxisLabel(),r,["middle","bottom"],"horizontal",[0,e.axisTitlePixelOffset],u)):(r[0]=e.barPosition[0]+e.barSize[0],r[1]=e.barPosition[1]+.5*e.barSize[1],t.createPolyDataForOneLabel(e.renderable.getAxisLabel(),r,["middle","top"],"vertical",[e.axisTitlePixelOffset,0],u)),d=[-1,0]):(m[1]=e.tickLabelPixelOffset,r[0]=e.barPosition[0]+.5*e.barSize[0],r[1]=e.barPosition[1]+e.barSize[1],t.createPolyDataForOneLabel(e.renderable.getAxisLabel(),r,["middle","bottom"],"horizontal",[0,e.axisTitlePixelOffset],u)),r[f]=e.barPosition[f]+(.5*d[f]+.5)*e.barSize[f],r[v]=e.barPosition[v]+e.barSize[v]*.5;let h=null;for(let E=0;E<e.barSegments.length;E++){const T=e.barSegments[E];T.title==="ticks"?h=T:(r[v]=e.barPosition[v]+.5*e.barSize[v]*(T.corners[2][v]+T.corners[0][v]),t.createPolyDataForOneLabel(T.title,r,g,"horizontal",m,u))}const C=e.barPosition[v]+e.barSize[v]*h.corners[0][v],p=e.barSize[v]*(h.corners[2][v]-h.corners[0][v]),S=t.getTicks(),I=t.getTickStrings();for(let E=0;E<S.length;E++){const T=(S[E]-e.lastTickBounds[0])/(e.lastTickBounds[1]-e.lastTickBounds[0]);r[v]=C+p*T,t.createPolyDataForOneLabel(I[E],r,g,"horizontal",m,u)}const D=fn.newInstance({numberOfComponents:2,values:l,name:"TextureCoordinates"});e.tmPolyData.getPointData().setTCoords(D),e.tmPolyData.getPoints().setData(s,3),e.tmPolyData.getPoints().modified(),e.tmPolyData.getPolys().setData(c,1),e.tmPolyData.getPolys().modified(),e.tmPolyData.modified()},t.updatePolyDataForBarSegments=()=>{var m,h;const a=e.renderable.getScalarsToColors();let i=0;e.renderable.getDrawNanAnnotation()&&a.getNanColor()&&(i+=1),e.renderable.getDrawBelowRangeSwatch()&&((m=a.getUseBelowRangeColor)!=null&&m.call(a))&&(i+=1),e.renderable.getDrawAboveRangeSwatch()&&((h=a.getUseAboveRangeColor)!=null&&h.call(a))&&(i+=1);const o=4*(1+i),s=o;let c=1;a.getVectorMode()===cfe.COMPONENT&&(c=a.getVectorComponent()+1);const l=new Float64Array(o*3),u=new Uint16Array(s*5),f=new Float32Array(o*c);let v=0,g=0;for(let C=0;C<e.barSegments.length;C++){const p=e.barSegments[C];for(let S=0;S<4;S++){r[0]=e.barPosition[0]+p.corners[S][0]*e.barSize[0],r[1]=e.barPosition[1]+p.corners[S][1]*e.barSize[1],l[v*3]=(.5*r[0]+.5)*e.lastSize[0],l[v*3+1]=(.5*r[1]+.5)*e.lastSize[1],l[v*3+2]=r[2];for(let I=0;I<c;I++)f[v*c+I]=e.lastTickBounds[0]+p.scalars[S]*(e.lastTickBounds[1]-e.lastTickBounds[0]);v++}u[g*5]=4,u[g*5+1]=v-4,u[g*5+2]=v-3,u[g*5+3]=v-2,u[g*5+4]=v-1,g++}const d=fn.newInstance({numberOfComponents:c,values:f,name:"Scalars"});e.polyData.getPointData().setScalars(d),e.polyData.getPoints().setData(l,3),e.polyData.getPoints().modified(),e.polyData.getPolys().setData(u,1),e.polyData.getPolys().modified(),e.polyData.modified()}}const ufe=J.newInstance(function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{renderable:null};Object.assign(e,{},n),J.obj(t,e),J.setGet(t,e,["axisTitlePixelOffset","tickLabelPixelOffset","renderable","topTitle","ticks","tickStrings"]),J.get(t,e,["lastSize","lastAspectRatio","lastTickBounds","axisTextStyle","tickTextStyle","barActor","tmActor"]),J.getArray(t,e,["boxPosition","boxSize"]),J.setArray(t,e,["boxPosition","boxSize"],2),e.forceUpdate=!1,e.lastRebuildTime={},J.obj(e.lastRebuildTime,{mtime:0}),e.lastSize=[-1,-1],e.tmCanvas=document.createElement("canvas"),e.tmContext=e.tmCanvas.getContext("2d"),e._tmAtlas=new Map,e.barMapper=K0.newInstance(),e.barMapper.setInterpolateScalarsBeforeMapping(!0),e.barMapper.setUseLookupTableScalarRange(!0),e.polyData=ci.newInstance(),e.barMapper.setInputData(e.polyData),e.barActor=Z0.newInstance(),e.barActor.setMapper(e.barMapper),e.tmPolyData=ci.newInstance(),e.tmMapper=K0.newInstance(),e.tmMapper.setInputData(e.tmPolyData),e.tmTexture=ch.newInstance({resizable:!0}),e.tmTexture.setInterpolate(!1),e.tmActor=Z0.newInstance({parentProp:t}),e.tmActor.setMapper(e.tmMapper),e.tmActor.addTexture(e.tmTexture),e.barPosition=[0,0],e.barSize=[0,0],e.boxPosition=[.88,-.92],e.boxSize=[.1,1.1],e.lastTickBounds=[],lfe(t,e)},"vtkScalarBarActorHelper");function ffe(t,e){e.classHierarchy.push("vtkScalarBarActor"),t.setTickTextStyle=n=>{e.tickTextStyle={...e.tickTextStyle,...n},t.modified()},t.setAxisTextStyle=n=>{e.axisTextStyle={...e.axisTextStyle,...n},t.modified()},t.resetAutoLayoutToDefault=()=>{t.setAutoLayout(eV(t,e))},t.resetGenerateTicksToDefault=()=>{t.setGenerateTicks(tV())}}function vfe(t){return{automated:!0,autoLayout:null,axisLabel:"Scalar Value",barPosition:[0,0],barSize:[0,0],boxPosition:[.88,-.92],boxSize:[.1,1.1],scalarToColors:null,axisTitlePixelOffset:36,axisTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:18,fontFamily:"serif"},tickLabelPixelOffset:14,tickTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:14,fontFamily:"serif"},generateTicks:null,drawNanAnnotation:!0,drawBelowRangeSwatch:!0,drawAboveRangeSwatch:!0,...t}}function nV(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,vfe(n)),e.autoLayout||(e.autoLayout=eV(t,e)),e.generateTicks||(e.generateTicks=tV()),Z0.extend(t,e,n),t.getProperty().setDiffuse(0),t.getProperty().setAmbient(1),J.setGet(t,e,["automated","autoLayout","axisTitlePixelOffset","axisLabel","scalarsToColors","tickLabelPixelOffset","generateTicks","drawNanAnnotation","drawBelowRangeSwatch","drawAboveRangeSwatch"]),J.get(t,e,["axisTextStyle","tickTextStyle"]),J.getArray(t,e,["barPosition","barSize","boxPosition","boxSize"]),J.setArray(t,e,["barPosition","barSize","boxPosition","boxSize"],2),ffe(t,e)}const gfe=J.newInstance(nV,"vtkScalarBarActor");var rV={newInstance:gfe,extend:nV,newScalarBarActorHelper:ufe};function dfe(t,e){e.classHierarchy.push("vtkOpenGLScalarBarActor"),t.buildPass=n=>{n&&(e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.scalarBarActorHelper.getRenderable()||e.scalarBarActorHelper.setRenderable(e.renderable),t.prepareNodes(),t.addMissingNode(e.scalarBarActorHelper.getBarActor()),t.addMissingNode(e.scalarBarActorHelper.getTmActor()),t.removeUnusedNodes())},t.opaquePass=(n,r)=>{if(n){const a=e._openGLRenderer?e._openGLRenderer.getRenderable().getActiveCamera():null,i=e._openGLRenderer.getTiledSizeAndOrigin();e.scalarBarActorHelper.updateAPISpecificData([i.usize,i.vsize],a,e._openGLRenderWindow.getRenderable())}}}const mfe={};function hfe(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,mfe,n),Fr.extend(t,e,n),e.scalarBarActorHelper=rV.newScalarBarActorHelper(),dfe(t,e)}const pfe=dr(hfe,"vtkOpenGLScalarBarActor");Za("vtkScalarBarActor",pfe);const{CoordinateSystem:c9}=nh;function Sfe(t,e){e.classHierarchy.push("vtkWebGPUActor"),t.buildPass=n=>{n&&(e.WebGPURenderer=t.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getFirstAncestorOfType("vtkWebGPURenderWindow"),e.propID===void 0&&(e.propID=e.WebGPURenderWindow.getUniquePropID()),t.prepareNodes(),t.addMissingNode(e.renderable.getMapper()),t.removeUnusedNodes())},t.traverseOpaquePass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||!e.renderable.getIsOpaque()||e.WebGPURenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.children[0]&&e.children[0].traverse(n),t.apply(n,!1))},t.traverseTranslucentPass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||e.renderable.getIsOpaque()||e.WebGPURenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.children[0]&&e.children[0].traverse(n),t.apply(n,!1))},t.queryPass=(n,r)=>{if(n){if(!e.renderable||!e.renderable.getVisibility())return;e.renderable.getIsOpaque()?r.incrementOpaqueActorCount():r.incrementTranslucentActorCount()}},t.getBufferShift=n=>(t.getKeyMatrices(n),e.bufferShift),t.getKeyMatrices=n=>{if(Math.max(e.renderable.getMTime(),n.getStabilizedTime())>e.keyMatricesTime.getMTime()){e.renderable.computeMatrix();const r=e.renderable.getMatrix();e.bufferShift[0]=r[3],e.bufferShift[1]=r[7],e.bufferShift[2]=r[11];const a=n.getStabilizedCenterByReference();e.renderable.getCoordinateSystem()===c9.WORLD&&(e.bufferShift[0]-=a[0],e.bufferShift[1]-=a[1],e.bufferShift[2]-=a[2]),$n(e.keyMatrices.bcwc,r),e.renderable.getIsIdentity()?zt(e.keyMatrices.normalMatrix):(fa(e.keyMatrices.normalMatrix,e.keyMatrices.bcwc),e.keyMatrices.normalMatrix[3]=0,e.keyMatrices.normalMatrix[7]=0,e.keyMatrices.normalMatrix[11]=0,ba(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix),$n(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix)),kr(e.keyMatrices.bcwc,e.keyMatrices.bcwc,[-e.bufferShift[0],-e.bufferShift[1],-e.bufferShift[2]]),e.renderable.getCoordinateSystem()===c9.WORLD?kr(e.keyMatrices.bcsc,e.keyMatrices.bcwc,[-a[0],-a[1],-a[2]]):fa(e.keyMatrices.bcsc,e.keyMatrices.bcwc),e.keyMatricesTime.modified()}return e.keyMatrices}}const Cfe={keyMatricesTime:null,keyMatrices:null,propID:void 0,bufferShift:void 0};function Ife(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Cfe,n),Fr.extend(t,e,n),e.keyMatricesTime={},J.obj(e.keyMatricesTime,{mtime:0}),e.keyMatrices={normalMatrix:new Float64Array(16),bcwc:new Float64Array(16),bcsc:new Float64Array(16)},J.get(t,e,["propID","keyMatricesTime"]),e.bufferShift=[0,0,0,0],Sfe(t,e)}const Dfe=J.newInstance(Ife);Vs("vtkActor",Dfe);const{CoordinateSystem:l9}=nh;function Efe(t,e){e.classHierarchy.push("vtkWebGPUActor2D"),t.buildPass=n=>{n&&(e.WebGPURenderer=t.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getFirstAncestorOfType("vtkWebGPURenderWindow"),e.propID===void 0&&(e.propID=e.WebGPURenderWindow.getUniquePropID()),t.prepareNodes(),t.addMissingNode(e.renderable.getMapper()),t.removeUnusedNodes())},t.traverseOpaquePass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||!e.renderable.getIsOpaque()||e.WebGPURenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.children[0]&&e.children[0].traverse(n),t.apply(n,!1))},t.traverseTranslucentPass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||e.renderable.getIsOpaque()||e.WebGPURenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.children[0]&&e.children[0].traverse(n),t.apply(n,!1))},t.queryPass=(n,r)=>{if(n){if(!e.renderable||!e.renderable.getVisibility())return;e.renderable.getIsOpaque()?r.incrementOpaqueActorCount():r.incrementTranslucentActorCount()}},t.getBufferShift=n=>(t.getKeyMatrices(n),e.bufferShift),t.getKeyMatrices=n=>{if(Math.max(e.renderable.getMTime(),n.getStabilizedTime())>e.keyMatricesTime.getMTime()){e.bufferShift[0]=0,e.bufferShift[1]=0,e.bufferShift[2]=0;const r=n.getStabilizedCenterByReference();e.renderable.getCoordinateSystem()===l9.WORLD&&(e.bufferShift[0]-=r[0],e.bufferShift[1]-=r[1],e.bufferShift[2]-=r[2]),zt(e.keyMatrices.bcwc),zt(e.keyMatrices.normalMatrix),kr(e.keyMatrices.bcwc,e.keyMatrices.bcwc,[-e.bufferShift[0],-e.bufferShift[1],-e.bufferShift[2]]),e.renderable.getCoordinateSystem()===l9.WORLD?kr(e.keyMatrices.bcsc,e.keyMatrices.bcwc,[-r[0],-r[1],-r[2]]):fa(e.keyMatrices.bcsc,e.keyMatrices.bcwc),e.keyMatricesTime.modified()}return e.keyMatrices}}const Tfe={keyMatricesTime:null,keyMatrices:null,propID:void 0,bufferShift:void 0};function yfe(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Tfe,n),Fr.extend(t,e,n),e.keyMatricesTime={},J.obj(e.keyMatricesTime,{mtime:0}),e.keyMatrices={normalMatrix:new Float64Array(16),bcwc:new Float64Array(16),bcsc:new Float64Array(16)},J.get(t,e,["propID","keyMatricesTime"]),e.bufferShift=[0,0,0,0],Efe(t,e)}const Mfe=J.newInstance(yfe);Vs("vtkActor2D",Mfe);function _fe(t,e){e.classHierarchy.push("vtkWebGPUCubeAxesActor"),t.buildPass=n=>{n&&(e.WebGPURenderer=t.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getParent(),e.CubeAxesActorHelper.getRenderable()||e.CubeAxesActorHelper.setRenderable(e.renderable),t.prepareNodes(),t.addMissingNode(e.CubeAxesActorHelper.getTmActor()),t.addMissingNode(e.renderable.getGridActor()),t.removeUnusedNodes())},t.opaquePass=(n,r)=>{if(n){const a=e.WebGPURenderer?e.WebGPURenderer.getRenderable().getActiveCamera():null,i=e.WebGPURenderer.getTiledSizeAndOrigin();e.CubeAxesActorHelper.updateAPISpecificData([i.usize,i.vsize],a,e.WebGPURenderWindow.getRenderable())}}}const Ofe={};function wfe(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Ofe,n),Fr.extend(t,e,n),e.CubeAxesActorHelper=XF.newCubeAxesActorHelper(),_fe(t,e)}const Pfe=dr(wfe,"vtkWebGPUCubeAxesActor");Vs("vtkCubeAxesActor",Pfe);const{DisplayLocation:JT}=JF;function Afe(t,e){e.classHierarchy.push("vtkProperty2D"),t.setDisplayLocationToBackground=()=>t.setDisplayLocation(JT.BACKGROUND),t.setDisplayLocationToForeground=()=>t.setDisplayLocation(JT.FOREGROUND),t.setRepresentationToWireframe=()=>t.setRepresentation(Fi.WIREFRAME),t.setRepresentationToSurface=()=>t.setRepresentation(Fi.SURFACE),t.setRepresentationToPoints=()=>t.setRepresentation(Fi.POINTS),t.getRepresentationAsString=()=>J.enumToString(Fi,e.representation)}const xfe={color:[1,1,1],opacity:1,pointSize:1,lineWidth:1,representation:Fi.SURFACE,displayLocation:JT.FOREGROUND};function aV(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,xfe,n),J.obj(t,e),J.setGet(t,e,["opacity","lineWidth","pointSize","displayLocation","representation"]),J.setGetArray(t,e,["color"],3),Afe(t,e)}const Rfe=J.newInstance(aV,"vtkProperty2D");var bfe={newInstance:Rfe,extend:aV,...JF};const{BufferUsage:Ei,PrimitiveTypes:fo}=Fv,{Representation:Np}=bv,{ScalarMode:Lp}=K0,{CoordinateSystem:Nfe}=nh,{DisplayLocation:Lfe}=bfe,Ufe=`
//VTK::Renderer::Dec

//VTK::Color::Dec

//VTK::Normal::Dec

//VTK::TCoord::Dec

//VTK::Select::Dec

//VTK::Mapper::Dec

//VTK::IOStructs::Dec

@vertex
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output : vertexOutput;

  var vertex: vec4<f32> = vertexBC;

  //VTK::Color::Impl

  //VTK::Normal::Impl

  //VTK::TCoord::Impl

  //VTK::Select::Impl

  //VTK::Position::Impl

  return output;
}
`,Ffe=`
struct PBRData {
  diffuse: vec3<f32>,
  specular: vec3<f32>,
}

// Dot product with the max already in it
fn mdot(a: vec3<f32>, b: vec3<f32>) -> f32 {
  return max(0.0, dot(a, b));
}
// Dot product with a max in it that does not allow for negative values
// Physically based rendering is accurate as long as normals are accurate,
// however this is pretty often not the case. In order to prevent negative
// values from ruining light calculations and creating zones of zero light,
// this remapping is used, which smoothly clamps the dot product between
// zero and one while still maintaining a good amount of accuracy.
fn cdot(a: vec3<f32>, b: vec3<f32>) -> f32 {
  var d: f32 = max(0.0, dot(a, b));
  d = pow((d + 1.0) / 2.0, 2.6);
  return d;
}

// Lambertian diffuse model
fn lambertDiffuse(base: vec3<f32>, N: vec3<f32>, L: vec3<f32>) -> vec3<f32> {
  var pi: f32 = 3.14159265359; 
  var NdotL: f32 = mdot(N, L);
  NdotL = pow(NdotL, 1.5);
  return (base/pi)*NdotL;
}

// Yasuhiro Fujii improvement on the Oren-Nayar model
// https://mimosa-pudica.net/improved-oren-nayar.html
// p is surface color, o is roughness
fn fujiiOrenNayar(p: vec3<f32>, o: f32, N: vec3<f32>, L: vec3<f32>, V: vec3<f32>) -> vec3<f32> {
  var invpi: f32 = 0.31830988618; // 1/pi

  var o2 = o*o;
  var NdotL: f32 = mdot(N, L);
  NdotL = pow(NdotL, 1.5); // Less physically accurate, but hides the "seams" between lights better

  var NdotV: f32 = mdot(N, V);
  var LdotV: f32 = mdot(L, V);

  var s: f32 = LdotV - NdotL*NdotV;
  var t: f32 = mix(1.0, max(NdotL, NdotV), step(0.0, s)); // Mix with step is the equivalent of an if statement
  var A: vec3<f32> = 0.5*(o2 / (o2 + 0.33)) + 0.17*p*(o2 / (o2 + 0.13));
  A = invpi*(1 - A);
  var B: f32 = 0.45*(o2 / (o2 + 0.09));
  B = invpi*B;

  return p*NdotL*(A + B*(s/t));
}

// Fresnel portion of BRDF (IOR only, simplified)
fn schlickFresnelIOR(V: vec3<f32>, N: vec3<f32>, ior: f32, k: f32) -> f32 {
  var NdotV: f32 = mdot(V, N);
  var F0: f32 = (pow((ior - 1.0), 2.0) + k*k) / (pow((ior + 1.0), 2.0) + k*k); // This takes into account the roughness, which the other one does not
  return F0 + (1.0 - F0) * pow((1.0-NdotV), 5.0);
}

// Fresnel portion of BRDF (Color ior, better)
fn schlickFresnelRGB(V: vec3<f32>, N: vec3<f32>, F0: vec3<f32>) -> vec3<f32> {
  var NdotV: f32 = mdot(V, N);
  return F0 + (1.0 - F0) * pow((1-NdotV), 5.0);
}

// Normal portion of BRDF
// https://learnopengl.com/PBR/Theory
// Trowbridge-Reitz GGX functions: normal, halfway, roughness^2
fn trGGX(N: vec3<f32>, H: vec3<f32>, a: f32) -> f32 {
  var pi: f32 = 3.14159265359; 

  var a2: f32 = a*a;
  var NdotH = mdot(N, H);
  var NdotH2 = NdotH*NdotH;
  
  var denom: f32 = NdotH2 * (a2 - 1.0) + 1.0;

  return a2 / max((pi*denom*denom), 0.000001);
}

// A VERY bad approximation of anisotropy. Real anisotropic calculations require tangent and bitangent
fn anisotrophicTrGGX(N: vec3<f32>, H: vec3<f32>, O: vec3<f32>, s: f32, a: f32) -> f32 {
  var Op: vec3<f32> = (rendererUBO.WCVCNormals * vec4<f32>(normalize(O) * s, 0.)).xyz;

  var ggx1: f32 = trGGX(N + Op*s, H, a);
  var ggx2: f32 = trGGX(N - Op*s, H, a);
  return (0.5 * ggx1 + 0.5 * ggx2);
}

// Geometry portion of BRDF
fn schlickGGX(N: vec3<f32>, X: vec3<f32>, k: f32) -> f32 {
  var NdotX = cdot(N, X);
  return NdotX / max(0.000001, (NdotX*(1.0-k) + k));
}

fn smithSurfaceRoughness(N: vec3<f32>, V: vec3<f32>, L: vec3<f32>, k: f32) -> f32 {
  var ggx1: f32 = min(1.0, schlickGGX(N, V, k));
  var ggx2: f32 = min(1.0, schlickGGX(N, L, k));
  return ggx1*ggx2;
}

// BRDF Combination
fn cookTorrance(D: f32, F: f32, G: f32, N: vec3<f32>, V: vec3<f32>, L: vec3<f32>) -> f32 {
  var num: f32 = D*F*G;
  var denom: f32 = 4*cdot(V, N)*cdot(L, N);

  return num / max(denom, 0.000001);
}

// Different lighting calculations for different light sources
fn calcDirectionalLight(N: vec3<f32>, V: vec3<f32>, ior: f32, roughness: f32, metallic: f32, direction: vec3<f32>, color: vec3<f32>, base: vec3<f32>) -> PBRData {  
  var L: vec3<f32> = normalize(direction); // Light Vector
  var H: vec3<f32> = normalize(L + V); // Halfway Vector

  var alpha = roughness*roughness;
  var k: f32 = alpha*alpha / 2;

  var D: f32 = trGGX(N, H, alpha); // Distribution
  // var F: f32 = schlickFresnelIOR(V, N, ior, k); // Fresnel
  var G: f32 = smithSurfaceRoughness(N, V, L, k); // Geometry

  var brdf: f32 = cookTorrance(D, 1.0, G, N, V, L); // Fresnel term is replaced with 1 because it is added later
  var incoming: vec3<f32> = color;
  var angle: f32 = mdot(L, N);
  angle = pow(angle, 1.5);

  var specular: vec3<f32> = brdf*incoming*angle;
  // Oren-Nayar gives a clay-like effect when fully rough which some people may not want, so it might be better to give a separate
  // control property for the diffuse vs specular roughness
  var diffuse: vec3<f32> = incoming*fujiiOrenNayar(base, roughness, N, L, V); 
  // Stores the specular and diffuse separately to allow for finer post processing
  var out = PBRData(diffuse, specular);
  
  return out; // Returns angle along with color of light so the final color can be multiplied by angle as well (creates black areas)
}

// TODO: find some way to reduce the number of arguments going in here
fn calcPointLight(N: vec3<f32>, V: vec3<f32>, fragPos: vec3<f32>, ior: f32, roughness: f32, metallic: f32, position: vec3<f32>, color: vec3<f32>, base: vec3<f32>) -> PBRData {
  var L: vec3<f32> = normalize(position - fragPos); // Light Vector
  var H: vec3<f32> = normalize(L + V); // Halfway Vector
  var dist = distance(position, fragPos);

  var alpha = roughness*roughness;
  var k: f32 = alpha*alpha / 2.0; // could also be pow(alpha + 1.0, 2) / 8

  var D: f32 = trGGX(N, H, alpha); // Distribution
  // var F: f32 = schlickFresnelIOR(V, N, ior, k); // Fresnel
  var G: f32 = smithSurfaceRoughness(N, V, L, k); // Geometry

  var brdf: f32 = cookTorrance(D, 1.0, G, N, V, L);
  var incoming: vec3<f32> = color * (1.0 / (dist*dist));
  var angle: f32 = mdot(L, N);
  angle = pow(angle, 1.5); // Smoothing factor makes it less accurate, but reduces ugly "seams" bewteen light sources

  var specular: vec3<f32> = brdf*incoming*angle;
  var diffuse: vec3<f32> = incoming*fujiiOrenNayar(base, roughness, N, L, V);

  // Stores the specular and diffuse separately to allow for finer post processing
  // Could also be done (propably more properly) with a struct
  var out = PBRData(diffuse, specular);
  
  return out; // Returns angle along with color of light so the final color can be multiplied by angle as well (creates black areas)
}

// For a reason unknown to me, spheres dont seem to behave propperly with head-on spot lights
fn calcSpotLight(N: vec3<f32>, V: vec3<f32>, fragPos: vec3<f32>, ior: f32, roughness: f32, metallic: f32, position: vec3<f32>, direction: vec3<f32>, cones: vec2<f32>, color: vec3<f32>, base: vec3<f32>) -> PBRData {
  var L: vec3<f32> = normalize(position - fragPos);
  var H: vec3<f32> = normalize(L + V); // Halfway Vector
  var dist = distance(position, fragPos);

  var alpha = roughness*roughness;
  var k: f32 = alpha*alpha / 2.0; // could also be pow(alpha + 1.0, 2) / 8

  var D: f32 = trGGX(N, H, alpha); // Distribution
  // var F: f32 = schlickFresnelIOR(V, N, ior, k); // Fresnel
  var G: f32 = smithSurfaceRoughness(N, V, L, k); // Geometry

  var brdf: f32 = cookTorrance(D, 1.0, G, N, V, L);
  
  // Cones.x is the inner phi and cones.y is the outer phi
  var theta: f32 = mdot(normalize(direction), L);
  var epsilon: f32 = cones.x - cones.y;
  var intensity: f32 = (theta - cones.y) / epsilon;
  intensity = clamp(intensity, 0.0, 1.0);
  intensity /= dist*dist;

  var incoming: vec3<f32> = color * intensity;

  var angle: f32 = mdot(L, N);
  angle = pow(angle, 1.5); // Smoothing factor makes it less accurate, but reduces ugly "seams" bewteen light sources

  var specular: vec3<f32> = brdf*incoming*angle;
  var diffuse: vec3<f32> = incoming*fujiiOrenNayar(base, roughness, N, L, V);

  // Stores the specular and diffuse separately to allow for finer post processing
  // Could also be done (propably more properly) with a struct
  var out = PBRData(diffuse, specular);
  
  return out; // Returns angle along with color of light so the final color can be multiplied by angle as well (creates black areas)
}

// Environment mapping stuff
// Takes in a vector and converts it to an equivalent coordinate in a rectilinear texture. Should be replaced with cubemaps at some point
fn vecToRectCoord(dir: vec3<f32>) -> vec2<f32> {
  var tau: f32 = 6.28318530718;
  var pi: f32 = 3.14159265359;
  var out: vec2<f32> = vec2<f32>(0.0);

  out.x = atan2(dir.z, dir.x) / tau;
  out.x += 0.5;

  var phix: f32 = length(vec2(dir.x, dir.z));
  out.y = atan2(dir.y, phix) / pi + 0.5;

  return out;
}

//VTK::Renderer::Dec

//VTK::Color::Dec

//VTK::TCoord::Dec

// optional surface normal declaration
//VTK::Normal::Dec

//VTK::Select::Dec

//VTK::RenderEncoder::Dec

//VTK::Mapper::Dec

//VTK::IOStructs::Dec

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output : fragmentOutput;

  // Temporary ambient, diffuse, and opacity
  var ambientColor: vec4<f32> = mapperUBO.AmbientColor;
  var diffuseColor: vec4<f32> = mapperUBO.DiffuseColor;
  var opacity: f32 = mapperUBO.Opacity;

  // This should be declared somewhere else
  var _diffuseMap: vec4<f32> = vec4<f32>(1.0);
  var _roughnessMap: vec4<f32> = vec4<f32>(1.0);
  var _metallicMap: vec4<f32> = vec4<f32>(1.0);
  var _normalMap: vec4<f32> = vec4<f32>(0.0, 0.0, 1.0, 0.0); // normal map was setting off the normal vector detection in fragment
  var _ambientOcclusionMap: vec4<f32> = vec4<f32>(1.);
  var _emissionMap: vec4<f32> = vec4<f32>(0.);

  //VTK::Color::Impl

  //VTK::TCoord::Impl

  //VTK::Normal::Impl

  var computedColor: vec4<f32> = vec4<f32>(diffuseColor.rgb, 1.0);

  //VTK::Light::Impl

  //VTK::Select::Impl

  if (computedColor.a == 0.0) { discard; };

  //VTK::Position::Impl

  //VTK::RenderEncoder::Impl

  return output;
}
`;function u9(t){return t.indexOf("edge")>=0}function Vfe(t,e){e.classHierarchy.push("vtkWebGPUCellArrayMapper"),t.buildPass=n=>{n&&(e.is2D?(e.WebGPUActor=t.getFirstAncestorOfType("vtkWebGPUActor2D"),e.forceZValue=!0):(e.WebGPUActor=t.getFirstAncestorOfType("vtkWebGPUActor"),e.forceZValue=!1),e.coordinateSystem=e.WebGPUActor.getRenderable().getCoordinateSystem(),e.useRendererMatrix=e.coordinateSystem!==Nfe.DISPLAY,e.WebGPURenderer=e.WebGPUActor.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getParent(),e.device=e.WebGPURenderWindow.getDevice())},t.translucentPass=n=>{n&&(t.prepareToDraw(e.WebGPURenderer.getRenderEncoder()),e.renderEncoder.registerDrawCallback(e.pipeline,t.draw))},t.opaquePass=n=>{n&&(t.prepareToDraw(e.WebGPURenderer.getRenderEncoder()),e.renderEncoder.registerDrawCallback(e.pipeline,t.draw))},t.updateUBO=()=>{var i;const r=e.WebGPUActor.getRenderable().getProperty(),a=e.UBO.getSendTime();if(t.getMTime()>a||r.getMTime()>a||e.renderable.getMTime()>a){const o=e.WebGPUActor.getKeyMatrices(e.WebGPURenderer);if(e.UBO.setArray("BCWCMatrix",o.bcwc),e.UBO.setArray("BCSCMatrix",o.bcsc),e.UBO.setArray("MCWCNormals",o.normalMatrix),e.is2D){e.UBO.setValue("ZValue",e.WebGPUActor.getRenderable().getProperty().getDisplayLocation()===Lfe.FOREGROUND?1:0);const l=r.getColorByReference();e.UBO.setValue("AmbientIntensity",1),e.UBO.setArray("DiffuseColor",[l[0],l[1],l[2],1]),e.UBO.setValue("DiffuseIntensity",0),e.UBO.setValue("SpecularIntensity",0)}else{let l=r.getAmbientColorByReference();e.UBO.setValue("AmbientIntensity",r.getAmbient()),e.UBO.setArray("AmbientColor",[l[0],l[1],l[2],1]),e.UBO.setValue("DiffuseIntensity",r.getDiffuse()),l=r.getDiffuseColorByReference(),e.UBO.setArray("DiffuseColor",[l[0],l[1],l[2],1]),e.UBO.setValue("Roughness",r.getRoughness()),e.UBO.setValue("BaseIOR",r.getBaseIOR()),e.UBO.setValue("Metallic",r.getMetallic()),e.UBO.setValue("NormalStrength",r.getNormalStrength()),e.UBO.setValue("Emission",r.getEmission()),e.UBO.setValue("SpecularIntensity",r.getSpecular()),l=r.getSpecularColorByReference(),e.UBO.setArray("SpecularColor",[l[0],l[1],l[2],1])}const s=(i=r.getEdgeColorByReference)==null?void 0:i.call(r);s&&e.UBO.setArray("EdgeColor",[s[0],s[1],s[2],1]),e.UBO.setValue("LineWidth",r.getLineWidth()),e.UBO.setValue("Opacity",r.getOpacity()),e.UBO.setValue("PropID",e.WebGPUActor.getPropID());const c=e.WebGPURenderWindow.getDevice();e.UBO.sendIfNeeded(c)}},t.haveWideLines=()=>{const n=e.WebGPUActor.getRenderable(),r=n.getProperty().getRepresentation();return n.getProperty().getLineWidth()<=1||e.primitiveType===fo.Verts?!1:e.primitiveType===fo.Triangles||e.primitiveType===fo.TriangleStrips?r===Np.WIREFRAME:!0},t.replaceShaderPosition=(n,r,a)=>{const i=r.getShaderDescription("vertex");i.addBuiltinOutput("vec4<f32>","@builtin(position) Position"),i.hasOutput("vertexVC")||i.addOutput("vec4<f32>","vertexVC");let o=i.getCode();e.useRendererMatrix?(o=Nr.substitute(o,"//VTK::Position::Impl",["    var pCoord: vec4<f32> = rendererUBO.SCPCMatrix*mapperUBO.BCSCMatrix*vertexBC;","    output.vertexVC = rendererUBO.SCVCMatrix * mapperUBO.BCSCMatrix * vec4<f32>(vertexBC.xyz, 1.0);","//VTK::Position::Impl"]).result,e.forceZValue&&(o=Nr.substitute(o,"//VTK::Position::Impl",["pCoord = vec4<f32>(pCoord.xyz/pCoord.w, 1.0);","pCoord.z = mapperUBO.ZValue;","//VTK::Position::Impl"]).result)):(o=Nr.substitute(o,"//VTK::Position::Impl",["    var pCoord: vec4<f32> = mapperUBO.BCSCMatrix*vertexBC;","    pCoord.x = 2.0* pCoord.x / rendererUBO.viewportSize.x - 1.0;","    pCoord.y = 2.0* pCoord.y / rendererUBO.viewportSize.y - 1.0;","    pCoord.z = 0.5 - 0.5 * pCoord.z;","//VTK::Position::Impl"]).result,e.forceZValue&&(o=Nr.substitute(o,"//VTK::Position::Impl",["    pCoord.z = mapperUBO.ZValue;","//VTK::Position::Impl"]).result)),t.haveWideLines()&&(i.addBuiltinInput("u32","@builtin(instance_index) instanceIndex"),o=Nr.substitute(o,"//VTK::Position::Impl",["    var tmpPos: vec4<f32> = pCoord;","    var numSteps: f32 = ceil(mapperUBO.LineWidth - 1.0);","    var offset: f32 = (mapperUBO.LineWidth - 1.0) * (f32(input.instanceIndex / 2u) - numSteps/2.0) / numSteps;","    var tmpPos2: vec3<f32> = tmpPos.xyz / tmpPos.w;","    tmpPos2.x = tmpPos2.x + 2.0 * (f32(input.instanceIndex) % 2.0) * offset / rendererUBO.viewportSize.x;","    tmpPos2.y = tmpPos2.y + 2.0 * (f32(input.instanceIndex + 1u) % 2.0) * offset / rendererUBO.viewportSize.y;","    tmpPos2.z = min(1.0, tmpPos2.z + 0.00001);","    pCoord = vec4<f32>(tmpPos2.xyz * tmpPos.w, tmpPos.w);","//VTK::Position::Impl"]).result),o=Nr.substitute(o,"//VTK::Position::Impl",["    output.Position = pCoord;"]).result,i.setCode(o)},e.shaderReplacements.set("replaceShaderPosition",t.replaceShaderPosition),t.replaceShaderNormal=(n,r,a)=>{const i=a.getBuffer("normalMC"),o=e.WebGPUActor.getRenderable();if(i){const s=r.getShaderDescription("vertex");s.hasOutput("normalVC")||s.addOutput("vec3<f32>","normalVC",i.getArrayInformation()[0].interpolation),s.hasOutput("tangentVC")||s.addOutput("vec3<f32>","tangentVC",i.getArrayInformation()[0].interpolation),s.hasOutput("bitangentVC")||s.addOutput("vec3<f32>","bitangentVC",i.getArrayInformation()[0].interpolation);let c=s.getCode();c=Nr.substitute(c,"//VTK::Normal::Impl",["  output.normalVC = normalize((rendererUBO.WCVCNormals * mapperUBO.MCWCNormals * normalMC).xyz);","  var c1: vec3<f32> = cross(output.normalVC, vec3<f32>(0, 0, 1));","  var c2: vec3<f32> = cross(output.normalVC, vec3<f32>(0, 1, 0));","  var tangent: vec3<f32> = mix(c1, c2, distance(c1, c2));","  output.tangentVC = normalize(tangent);","  output.bitangentVC = normalize(cross(output.normalVC, tangent));"]).result,s.setCode(c);const l=r.getShaderDescription("fragment");c=l.getCode(),o.getProperty().getNormalTexture()?c=Nr.substitute(c,"//VTK::Normal::Impl",["  var normal: vec3<f32> = input.normalVC;","  if (!input.frontFacing) { normal = -normal; }","  var tangent: vec3<f32> = input.tangentVC;","  var bitangent: vec3<f32> = input.bitangentVC;","  var TCVCMatrix: mat3x3<f32> = mat3x3<f32>(","    tangent.x, bitangent.x, normal.x,","    tangent.y, bitangent.y, normal.y,","    tangent.z, bitangent.z, normal.z,","  );","  var mappedNormal: vec3<f32> = TCVCMatrix * (_normalMap.xyz * 2 - 1);","  normal = mix(normal, mappedNormal, mapperUBO.NormalStrength);","  normal = normalize(normal);"]).result:c=Nr.substitute(c,"//VTK::Normal::Impl",["  var normal: vec3<f32> = input.normalVC;","  if (!input.frontFacing) { normal = -normal; }","  normal = normalize(normal);"]).result,l.setCode(c)}},e.shaderReplacements.set("replaceShaderNormal",t.replaceShaderNormal),t.replaceShaderLight=(n,r,a)=>{var l;if(n.includes("sel"))return;const i=r.getShaderDescription("vertex");i.hasOutput("vertexVC")||i.addOutput("vec4<f32>","vertexVC");const o=e.WebGPURenderer.getRenderable(),s=r.getShaderDescription("fragment");let c=s.getCode();if(c.includes("var normal:")&&e.useRendererMatrix&&!u9(n)&&!e.is2D&&!n.includes("sel")){const u=["  var pi: f32 = 3.14159265359;","  var fragPos: vec3<f32> = vec3<f32>(input.vertexVC.xyz);","  var V: vec3<f32> = mix(normalize(-fragPos), vec3<f32>(0, 0, 1), f32(rendererUBO.cameraParallel)); // View Vector","  var baseColor: vec3<f32> = _diffuseMap.rgb * diffuseColor.rgb;","  var roughness: f32 = max(0.000001, mapperUBO.Roughness * _roughnessMap.r);","  var metallic: f32 = mapperUBO.Metallic * _metallicMap.r;","  var alpha: f32 = roughness*roughness;","  var ior: f32 = mapperUBO.BaseIOR;","  var k: f32 = alpha*alpha / 2;","  var diffuse: vec3<f32> = vec3<f32>(0.);","  var specular: vec3<f32> = vec3<f32>(0.);","  var emission: vec3<f32> = _emissionMap.rgb * mapperUBO.Emission;","  {","    var i: i32 = 0;","    loop {","      if !(i < rendererUBO.LightCount) { break; }","      switch (i32(rendererLightSSBO.values[i].LightData.x)) {","         // Point Light","         case 0 {","           var color: vec3<f32> = rendererLightSSBO.values[i].LightColor.rgb * rendererLightSSBO.values[i].LightColor.w;","           var pos: vec3<f32> = (rendererLightSSBO.values[i].LightPos).xyz;","           var calculated: PBRData = calcPointLight(normal, V, fragPos, ior, roughness, metallic, pos, color, baseColor);","           diffuse += max(vec3<f32>(0), calculated.diffuse);","           specular += max(vec3<f32>(0), calculated.specular);","          }","         // Directional light","         case 1 {","           var dir: vec3<f32> = (rendererUBO.WCVCNormals * vec4<f32>(normalize(rendererLightSSBO.values[i].LightDir.xyz), 0.)).xyz;","           dir = normalize(dir);","           var color: vec3<f32> = rendererLightSSBO.values[i].LightColor.rgb * rendererLightSSBO.values[i].LightColor.w;","           var calculated: PBRData = calcDirectionalLight(normal, V, ior, roughness, metallic, dir, color, baseColor); // diffuseColor.rgb needs to be fixed with a more dynamic diffuse color","           diffuse += max(vec3<f32>(0), calculated.diffuse);","           specular += max(vec3<f32>(0), calculated.specular);","         }","         // Spot Light","         case 2 {","           var color: vec3<f32> = rendererLightSSBO.values[i].LightColor.rgb * rendererLightSSBO.values[i].LightColor.w;","           var pos: vec3<f32> = (rendererLightSSBO.values[i].LightPos).xyz;","           var dir: vec3<f32> = (rendererUBO.WCVCNormals * vec4<f32>(normalize(rendererLightSSBO.values[i].LightDir.xyz), 0.)).xyz;","           dir = normalize(dir);","           var cones: vec2<f32> = vec2<f32>(rendererLightSSBO.values[i].LightData.y, rendererLightSSBO.values[i].LightData.z);","           var calculated: PBRData = calcSpotLight(normal, V, fragPos, ior, roughness, metallic, pos, dir, cones, color, baseColor);","           diffuse += max(vec3<f32>(0), calculated.diffuse);","           specular += max(vec3<f32>(0), calculated.specular);","         }","         default { continue; }","       }","      continuing { i++; }","    }","  }","  var fresnel: f32 = schlickFresnelIOR(V, normal, ior, k); // Fresnel","  fresnel = min(1.0, fresnel);","  // This could be controlled with its own variable (that isnt base color) for better artistic control","  var fresnelMetallic: vec3<f32> = schlickFresnelRGB(V, normal, baseColor); // Fresnel for metal, takes color into account","  var kS: vec3<f32> = mix(vec3<f32>(fresnel), fresnelMetallic, metallic);","  kS = min(vec3<f32>(1.0), kS);","  var kD: vec3<f32> = (1.0 - kS) * (1.0 - metallic);","  var PBR: vec3<f32> = mapperUBO.DiffuseIntensity*kD*diffuse + kS*specular;","  PBR += emission;","  computedColor = vec4<f32>(PBR, mapperUBO.Opacity);"];(l=o.getEnvironmentTexture())!=null&&l.getImageLoaded()&&u.push("  // To get diffuse IBL, the texture is sampled with normals in worldspace","  var diffuseIBLCoords: vec3<f32> = (transpose(rendererUBO.WCVCNormals) * vec4<f32>(normal, 1.)).xyz;","  var diffuseCoords: vec2<f32> = vecToRectCoord(diffuseIBLCoords);","  // To get specular IBL, the texture is sampled as the worldspace reflection between the normal and view vectors","  // Reflections are first calculated in viewspace, then converted to worldspace to sample the environment","  var VreflN: vec3<f32> = normalize(reflect(-V, normal));","  var reflectionIBLCoords = (transpose(rendererUBO.WCVCNormals) * vec4<f32>(VreflN, 1.)).xyz;","  var specularCoords: vec2<f32> = vecToRectCoord(reflectionIBLCoords);","  var diffuseIBL = textureSampleLevel(EnvironmentTexture, EnvironmentTextureSampler, diffuseCoords, rendererUBO.MaxEnvironmentMipLevel);","  var level = roughness * rendererUBO.MaxEnvironmentMipLevel;","  var specularIBL = textureSampleLevel(EnvironmentTexture, EnvironmentTextureSampler, specularCoords, level);","  var specularIBLContribution: vec3<f32> = specularIBL.rgb*rendererUBO.BackgroundSpecularStrength;","  computedColor += vec4<f32>(specularIBLContribution*kS, 0);","  var diffuseIBLContribution: vec3<f32> = diffuseIBL.rgb*rendererUBO.BackgroundDiffuseStrength;","  diffuseIBLContribution *= baseColor * _ambientOcclusionMap.rgb;","  computedColor += vec4<f32>(diffuseIBLContribution*kD, 0);"),c=Nr.substitute(c,"//VTK::Light::Impl",u).result,s.setCode(c)}else c=Nr.substitute(c,"//VTK::Light::Impl",["  var diffuse: vec3<f32> = diffuseColor.rgb;","  var specular: vec3<f32> = mapperUBO.SpecularColor.rgb * mapperUBO.SpecularColor.a;","  computedColor = vec4<f32>(diffuse * _diffuseMap.rgb, mapperUBO.Opacity);"]).result,s.setCode(c)},e.shaderReplacements.set("replaceShaderLight",t.replaceShaderLight),t.replaceShaderColor=(n,r,a)=>{if(u9(n)){const l=r.getShaderDescription("fragment");let u=l.getCode();u=Nr.substitute(u,"//VTK::Color::Impl",["ambientColor = mapperUBO.EdgeColor;","diffuseColor = mapperUBO.EdgeColor;"]).result,l.setCode(u);return}const i=a.getBuffer("colorVI");if(!i)return;const o=r.getShaderDescription("vertex");o.addOutput("vec4<f32>","color",i.getArrayInformation()[0].interpolation);let s=o.getCode();s=Nr.substitute(s,"//VTK::Color::Impl",["  output.color = colorVI;"]).result,o.setCode(s);const c=r.getShaderDescription("fragment");s=c.getCode(),s=Nr.substitute(s,"//VTK::Color::Impl",["ambientColor = input.color;","diffuseColor = input.color;","opacity = mapperUBO.Opacity * input.color.a;"]).result,c.setCode(s)},e.shaderReplacements.set("replaceShaderColor",t.replaceShaderColor),t.replaceShaderTCoord=(n,r,a)=>{var g,d,m,h,C,p,S,I,D,E,T,y,M,_,O,w,x,P,R,L;if(!a.hasAttribute("tcoord"))return;const i=r.getShaderDescription("vertex"),o=a.getBuffer("tcoord"),s=Ui.getNumberOfComponentsFromBufferFormat(o.getArrayInformation()[0].format);let c=i.getCode();i.addOutput(`vec${s}<f32>`,"tcoordVS"),c=Nr.substitute(c,"//VTK::TCoord::Impl",["  output.tcoordVS = tcoord;"]).result,i.setCode(c);const l=r.getShaderDescription("fragment");c=l.getCode();const u=e.WebGPUActor.getRenderable(),f=H=>H?H.getDimensionality()===s:!1,v=[];((m=(d=(g=u.getProperty()).getDiffuseTexture)==null?void 0:d.call(g))!=null&&m.getImageLoaded()||u.getTextures()[0]||e.colorTexture)&&(f((C=(h=u.getProperty()).getDiffuseTexture)==null?void 0:C.call(h))||f(u.getTextures()[0])||f(e.colorTexture))&&v.push("_diffuseMap = textureSample(DiffuseTexture, DiffuseTextureSampler, input.tcoordVS);"),(I=(S=(p=u.getProperty()).getRoughnessTexture)==null?void 0:S.call(p))!=null&&I.getImageLoaded()&&f(u.getProperty().getRoughnessTexture())&&v.push("_roughnessMap = textureSample(RoughnessTexture, RoughnessTextureSampler, input.tcoordVS);"),(T=(E=(D=u.getProperty()).getMetallicTexture)==null?void 0:E.call(D))!=null&&T.getImageLoaded()&&f(u.getProperty().getMetallicTexture())&&v.push("_metallicMap = textureSample(MetallicTexture, MetallicTextureSampler, input.tcoordVS);"),(_=(M=(y=u.getProperty()).getNormalTexture)==null?void 0:M.call(y))!=null&&_.getImageLoaded()&&f(u.getProperty().getNormalTexture())&&v.push("_normalMap = textureSample(NormalTexture, NormalTextureSampler, input.tcoordVS);"),(x=(w=(O=u.getProperty()).getAmbientOcclusionTexture)==null?void 0:w.call(O))!=null&&x.getImageLoaded()&&f(u.getProperty().getAmbientOcclusionTexture())&&v.push("_ambientOcclusionMap = textureSample(AmbientOcclusionTexture, AmbientOcclusionTextureSampler, input.tcoordVS);"),(L=(R=(P=u.getProperty()).getEmissionTexture)==null?void 0:R.call(P))!=null&&L.getImageLoaded()&&f(u.getProperty().getEmissionTexture())&&v.push("_emissionMap = textureSample(EmissionTexture, EmissionTextureSampler, input.tcoordVS);"),c=Nr.substitute(c,"//VTK::TCoord::Impl",v).result,l.setCode(c)},e.shaderReplacements.set("replaceShaderTCoord",t.replaceShaderTCoord),t.replaceShaderSelect=(n,r,a)=>{if(n.includes("sel")){const i=r.getShaderDescription("fragment");let o=i.getCode();o=Nr.substitute(o,"//VTK::Select::Impl",["  var compositeID: u32 = 0u;"]).result,i.setCode(o)}},e.shaderReplacements.set("replaceShaderSelect",t.replaceShaderSelect),t.getUsage=(n,r)=>n===Np.POINTS||r===fo.Points?Ei.Verts:r===fo.Lines?Ei.Lines:n===Np.WIREFRAME?r===fo.Triangles?Ei.LinesFromTriangles:Ei.LinesFromStrips:r===fo.Triangles?Ei.Triangles:r===fo.TriangleStrips?Ei.Strips:r===fo.TriangleEdges?Ei.LinesFromTriangles:Ei.LinesFromStrips,t.getHashFromUsage=n=>`pt${n}`,t.getTopologyFromUsage=n=>{switch(n){case Ei.Triangles:return"triangle-list";case Ei.Verts:return"point-list";case Ei.Lines:default:return"line-list"}},t.buildVertexInput=()=>{var m,h;const n=e.currentInput,r=e.cellArray,a=e.primitiveType;let o=e.WebGPUActor.getRenderable().getProperty().getRepresentation();const s=e.WebGPURenderWindow.getDevice();let c=!1;a===fo.TriangleEdges&&(c=!0,o=Np.WIREFRAME);const l=e.vertexInput,u=n.getPoints();let f;if(r){const C={hash:`R${o}P${a}${r.getMTime()}`,usage:Ei.Index,cells:r,numberOfPoints:u.getNumberOfPoints(),primitiveType:a,representation:o};f=s.getBufferManager().getBuffer(C),l.setIndexBuffer(f)}else l.setIndexBuffer(null);if(u){const C=e.WebGPUActor.getBufferShift(e.WebGPURenderer),p={hash:`${u.getMTime()}I${f.getMTime()}${C.join()}float32x4`,usage:Ei.PointArray,format:"float32x4",dataArray:u,indexBuffer:f,shift:C,packExtra:!0},S=s.getBufferManager().getBuffer(p);l.addBuffer(S,["vertexBC"])}else l.removeBufferIfPresent("vertexBC");const v=t.getUsage(o,a);if(e._usesCellNormals=!1,!e.is2D&&(v===Ei.Triangles||v===Ei.Strips)){const C=n.getPointData().getNormals(),p={format:"snorm8x4",indexBuffer:f,packExtra:!0,shift:0,scale:127};if(C){p.hash=`${C.getMTime()}I${f.getMTime()}snorm8x4`,p.dataArray=C,p.usage=Ei.PointArray;const S=s.getBufferManager().getBuffer(p);l.addBuffer(S,["normalMC"])}else if(a===fo.Triangles){e._usesCellNormals=!0,p.hash=`PFN${u.getMTime()}I${f.getMTime()}snorm8x4`,p.dataArray=u,p.cells=r,p.usage=Ei.NormalsFromPoints;const S=s.getBufferManager().getBuffer(p);l.addBuffer(S,["normalMC"])}else l.removeBufferIfPresent("normalMC")}else l.removeBufferIfPresent("normalMC");let g=!1;if(e.renderable.getScalarVisibility()){const C=e.renderable.getColorMapColors();if(C&&!c){const p=e.renderable.getScalarMode();let S=!1;(p===Lp.USE_CELL_DATA||p===Lp.USE_CELL_FIELD_DATA||p===Lp.USE_FIELD_DATA||!n.getPointData().getScalars())&&p!==Lp.USE_POINT_FIELD_DATA&&C&&(S=!0);const I={usage:Ei.PointArray,format:"unorm8x4",hash:`${S}${C.getMTime()}I${f.getMTime()}unorm8x4`,dataArray:C,indexBuffer:f,cellData:S,cellOffset:0},D=s.getBufferManager().getBuffer(I);l.addBuffer(D,["colorVI"]),g=!0}}g||l.removeBufferIfPresent("colorVI");let d=null;if((h=(m=e.renderable).getInterpolateScalarsBeforeMapping)!=null&&h.call(m)&&e.renderable.getColorCoordinates()?d=e.renderable.getColorCoordinates():d=n.getPointData().getTCoords(),d&&!c){const C=s.getBufferManager().getBufferForPointArray(d,l.getIndexBuffer());l.addBuffer(C,["tcoord"])}else l.removeBufferIfPresent("tcoord")},t.updateTextures=()=>{var c,l,u,f,v,g,d,m,h,C,p,S,I,D,E;const n=[],r=[],a=(l=(c=e.renderable).getColorTextureMap)==null?void 0:l.call(c);a&&(e.colorTexture||(e.colorTexture=ch.newInstance({label:"polyDataColor"})),e.colorTexture.setInputData(a),r.push(["Diffuse",e.colorTexture]));const i=e.WebGPUActor.getRenderable(),o=e.WebGPURenderer.getRenderable(),s=[];if((f=(u=i.getProperty()).getDiffuseTexture)!=null&&f.call(u)){const T=["Diffuse",i.getProperty().getDiffuseTexture()];s.push(T)}if(i.getTextures()[0]){const T=["Diffuse",i.getTextures()[0]];s.push(T)}if(e.colorTexture){const T=["Diffuse",e.colorTexture];s.push(T)}if((g=(v=i.getProperty()).getRoughnessTexture)!=null&&g.call(v)){const T=["Roughness",i.getProperty().getRoughnessTexture()];s.push(T)}if((m=(d=i.getProperty()).getMetallicTexture)!=null&&m.call(d)){const T=["Metallic",i.getProperty().getMetallicTexture()];s.push(T)}if((C=(h=i.getProperty()).getNormalTexture)!=null&&C.call(h)){const T=["Normal",i.getProperty().getNormalTexture()];s.push(T)}if((S=(p=i.getProperty()).getAmbientOcclusionTexture)!=null&&S.call(p)){const T=["AmbientOcclusion",i.getProperty().getAmbientOcclusionTexture()];s.push(T)}if((D=(I=i.getProperty()).getEmissionTexture)!=null&&D.call(I)){const T=["Emission",i.getProperty().getEmissionTexture()];s.push(T)}if((E=o.getEnvironmentTexture)!=null&&E.call(o)){const T=["Environment",o.getEnvironmentTexture()];s.push(T)}for(let T=0;T<s.length;T++)(s[T][1].getInputData()||s[T][1].getJsImageData()||s[T][1].getCanvas())&&r.push(s[T]),s[T][1].getImage()&&s[T][1].getImageLoaded()&&r.push(s[T]);for(let T=0;T<r.length;T++){const y=r[T][1],M=r[T][0],_=e.device.getTextureManager().getTextureForVTKTexture(y);if(_.getReady()){let O=!1;for(let w=0;w<e.textures.length;w++)e.textures[w]===_&&(O=!0,n[w]=!0);if(!O){n[e.textures.length]=!0;const w=_.createView(`${M}Texture`);e.textures.push(_),e.textureViews.push(w);const x=y.getInterpolate()?"linear":"nearest";let P=null;!P&&y.getEdgeClamp()&&y.getRepeat()&&(P="mirror-repeat"),!P&&y.getEdgeClamp()&&(P="clamp-to-edge"),!P&&y.getRepeat()&&(P="repeat"),M!=="Environment"?w.addSampler(e.device,{addressModeU:P,addressModeV:P,addressModeW:P,minFilter:x,magFilter:x}):w.addSampler(e.device,{addressModeU:"repeat",addressModeV:"clamp-to-edge",addressModeW:"repeat",minFilter:x,magFilter:x,mipmapFilter:"linear"})}}}for(let T=e.textures.length-1;T>=0;T--)n[T]||(e.textures.splice(T,1),e.textureViews.splice(T,1))},t.computePipelineHash=()=>{let n=`pd${e.useRendererMatrix?"r":""}${e.forceZValue?"z":""}`;if(e.primitiveType===fo.TriangleEdges||e.primitiveType===fo.TriangleStripEdges)n+="edge";else{if(e.vertexInput.hasAttribute("normalMC")&&(n+="n"),e.vertexInput.hasAttribute("colorVI")&&(n+="c"),e.vertexInput.hasAttribute("tcoord")){const a=e.vertexInput.getBuffer("tcoord"),i=Ui.getNumberOfComponentsFromBufferFormat(a.getArrayInformation()[0].format);n+=`t${i}`}e.textures.length&&(n+=`tx${e.textures.length}`)}e._usesCellNormals&&(n+="cn"),e.SSBO&&(n+="ssbo");const r=t.getHashFromUsage(e.usage);n+=r,n+=e.renderEncoder.getPipelineHash(),e.pipelineHash=n},t.updateBuffers=()=>{e.primitiveType!==fo.TriangleEdges&&e.primitiveType!==fo.TriangleStripEdges&&t.updateTextures();const n=e.WebGPUActor.getRenderable(),r=n.getProperty().getRepresentation();e.usage=t.getUsage(r,e.primitiveType),t.buildVertexInput();const a=e.vertexInput.getBuffer("vertexBC");if(t.setNumberOfVertices(a.getSizeInBytes()/a.getStrideInBytes()),t.setTopology(t.getTopologyFromUsage(e.usage)),t.updateUBO(),t.haveWideLines()){const i=n.getProperty();t.setNumberOfInstances(Math.ceil(i.getLineWidth()*2))}else t.setNumberOfInstances(1)}}const kfe={is2D:!1,cellArray:null,currentInput:null,cellOffset:0,primitiveType:0,colorTexture:null,renderEncoder:null,textures:null};function iV(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,kfe,n),_U.extend(t,e,n),e.fragmentShaderTemplate=Ffe,e.vertexShaderTemplate=Ufe,e._tmpMat3=Rs(new Float64Array(9)),e._tmpMat4=zt(new Float64Array(16)),e.UBO=$f.newInstance({label:"mapperUBO"}),e.UBO.addEntry("BCWCMatrix","mat4x4<f32>"),e.UBO.addEntry("BCSCMatrix","mat4x4<f32>"),e.UBO.addEntry("MCWCNormals","mat4x4<f32>"),e.UBO.addEntry("AmbientColor","vec4<f32>"),e.UBO.addEntry("DiffuseColor","vec4<f32>"),e.UBO.addEntry("EdgeColor","vec4<f32>"),e.UBO.addEntry("SpecularColor","vec4<f32>"),e.UBO.addEntry("AmbientIntensity","f32"),e.UBO.addEntry("DiffuseIntensity","f32"),e.UBO.addEntry("Roughness","f32"),e.UBO.addEntry("Metallic","f32"),e.UBO.addEntry("Ambient","f32"),e.UBO.addEntry("Normal","f32"),e.UBO.addEntry("Emission","f32"),e.UBO.addEntry("NormalStrength","f32"),e.UBO.addEntry("BaseIOR","f32"),e.UBO.addEntry("SpecularIntensity","f32"),e.UBO.addEntry("LineWidth","f32"),e.UBO.addEntry("Opacity","f32"),e.UBO.addEntry("ZValue","f32"),e.UBO.addEntry("PropID","u32"),e.UBO.addEntry("ClipNear","f32"),e.UBO.addEntry("ClipFar","f32"),e.UBO.addEntry("Time","u32"),Wa(t,e,["cellArray","currentInput","cellOffset","is2D","primitiveType","renderEncoder"]),e.textures=[],Vfe(t,e)}const Gfe=dr(iV,"vtkWebGPUCellArrayMapper");var oV={newInstance:Gfe,extend:iV};const{PrimitiveTypes:Up}=Fv;function Bfe(t,e){e.classHierarchy.push("vtkWebGPUPolyDataMapper"),t.createCellArrayMapper=()=>oV.newInstance(),t.buildPass=n=>{if(n){e.WebGPUActor=t.getFirstAncestorOfType("vtkWebGPUActor"),e.renderable.getStatic()||e.renderable.update();const r=e.renderable.getInputData();e.renderable.mapScalars(r,1),t.updateCellArrayMappers(r)}},t.updateCellArrayMappers=n=>{const r=[n.getVerts(),n.getLines(),n.getPolys(),n.getStrips()],a=[];let i=0;for(let o=Up.Points;o<=Up.Triangles;o++)if(r[o].getNumberOfValues()>0){e.primitives[o]||(e.primitives[o]=t.createCellArrayMapper());const s=e.primitives[o];s.setCellArray(r[o]),s.setCurrentInput(n),s.setCellOffset(i),s.setPrimitiveType(o),s.setRenderable(e.renderable),i+=r[o].getNumberOfCells(),a.push(s)}else e.primitives[o]=null;if(e.WebGPUActor.getRenderable().getProperty().getEdgeVisibility())for(let o=Up.TriangleEdges;o<=Up.TriangleStripEdges;o++)if(r[o-2].getNumberOfValues()>0){e.primitives[o]||(e.primitives[o]=t.createCellArrayMapper());const s=e.primitives[o];s.setCellArray(r[o-2]),s.setCurrentInput(n),s.setCellOffset(e.primitives[o-2].getCellOffset()),s.setPrimitiveType(o),s.setRenderable(e.renderable),a.push(s)}else e.primitives[o]=null;t.prepareNodes(),t.addMissingChildren(a),t.removeUnusedNodes()}}const Wfe={primitives:null};function Hfe(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Wfe,n),Fr.extend(t,e,n),e.primitives=[],Bfe(t,e)}const $fe=dr(Hfe,"vtkWebGPUPolyDataMapper");Vs("vtkMapper",$fe);const{PrimitiveTypes:f9}=Fv;function zfe(t,e){e.classHierarchy.push("vtkWebGPUPolyDataMapper2D"),t.createCellArrayMapper=()=>oV.newInstance(),t.buildPass=n=>{if(n){e.WebGPUActor=t.getFirstAncestorOfType("vtkWebGPUActor2D"),e.renderable.getStatic()||e.renderable.update();const r=e.renderable.getInputData();e.renderable.mapScalars(r,1),t.updateCellArrayMappers(r)}},t.updateCellArrayMappers=n=>{const r=[n.getVerts(),n.getLines(),n.getPolys(),n.getStrips()],a=[];let i=0;for(let o=f9.Points;o<=f9.Triangles;o++)if(r[o].getNumberOfValues()>0){e.primitives[o]||(e.primitives[o]=t.createCellArrayMapper());const s=e.primitives[o];s.setCellArray(r[o]),s.setCurrentInput(n),s.setCellOffset(i),s.setPrimitiveType(o),s.setRenderable(e.renderable),s.setIs2D(!0),i+=r[o].getNumberOfCells(),a.push(s)}else e.primitives[o]=null;t.prepareNodes(),t.addMissingChildren(a),t.removeUnusedNodes()}}function qfe(t){return{primitives:[],...t}}function jfe(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,qfe(n)),Fr.extend(t,e,n),e.primitives=[],zfe(t,e)}const Qfe=dr(jfe,"vtkWebGPUPolyDataMapper2D");Vs("vtkMapper2D",Qfe);function Kfe(t,e){e.classHierarchy.push("vtkWebGPUScalarBarActor"),t.buildPass=n=>{n&&(e.WebGPURenderer=t.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getParent(),e.scalarBarActorHelper.getRenderable()||e.scalarBarActorHelper.setRenderable(e.renderable),t.prepareNodes(),t.addMissingNode(e.scalarBarActorHelper.getBarActor()),t.addMissingNode(e.scalarBarActorHelper.getTmActor()),t.removeUnusedNodes())},t.opaquePass=(n,r)=>{if(n){const a=e.WebGPURenderer?e.WebGPURenderer.getRenderable().getActiveCamera():null,i=e.WebGPURenderer.getTiledSizeAndOrigin();e.scalarBarActorHelper.updateAPISpecificData([i.usize,i.vsize],a,e.WebGPURenderWindow.getRenderable())}}}const Xfe={};function Yfe(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Xfe,n),Fr.extend(t,e,n),e.scalarBarActorHelper=rV.newScalarBarActorHelper(),Kfe(t,e)}const Zfe=dr(Yfe,"vtkWebGPUScalarBarActor");Vs("vtkScalarBarActor",Zfe);function Jfe(t,e){e.classHierarchy.push("vtkWebGPUTextureView"),t.create=(n,r)=>{e.texture=n,e.options=r,e.options.dimension=e.options.dimension||"2d",e.options.label=e.label,e.textureHandle=n.getHandle(),e.handle=e.textureHandle.createView(e.options),e.bindGroupLayoutEntry.texture.viewDimension=e.options.dimension;const a=Ui.getDetailsFromTextureFormat(e.texture.getFormat());e.bindGroupLayoutEntry.texture.sampleType=a.sampleType},t.createFromTextureHandle=(n,r)=>{e.texture=null,e.options=r,e.options.dimension=e.options.dimension||"2d",e.options.label=e.label,e.textureHandle=n,e.handle=e.textureHandle.createView(e.options),e.bindGroupLayoutEntry.texture.viewDimension=e.options.dimension;const a=Ui.getDetailsFromTextureFormat(r.format);e.bindGroupLayoutEntry.texture.sampleType=a.sampleType,e.bindGroupTime.modified()},t.getBindGroupEntry=()=>({resource:t.getHandle()}),t.getShaderCode=(n,r)=>{let a="f32";e.bindGroupLayoutEntry.texture.sampleType==="sint"?a="i32":e.bindGroupLayoutEntry.texture.sampleType==="uint"&&(a="u32");let i=`@binding(${n}) @group(${r}) var ${e.label}: texture_${e.options.dimension}<${a}>;`;return e.bindGroupLayoutEntry.texture.sampleType==="depth"&&(i=`@binding(${n}) @group(${r}) var ${e.label}: texture_depth_${e.options.dimension};`),i},t.addSampler=(n,r)=>{const a=NU.newInstance({label:`${e.label}Sampler`});a.create(n,r),t.setSampler(a)},t.getBindGroupTime=()=>(e.texture&&e.texture.getHandle()!==e.textureHandle&&(e.textureHandle=e.texture.getHandle(),e.handle=e.textureHandle.createView(e.options),e.bindGroupTime.modified()),e.bindGroupTime),t.getHandle=()=>(e.texture&&e.texture.getHandle()!==e.textureHandle&&(e.textureHandle=e.texture.getHandle(),e.handle=e.textureHandle.createView(e.options),e.bindGroupTime.modified()),e.handle)}const eve={texture:null,handle:null,sampler:null,label:null};function sV(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,eve,n),J.obj(t,e),e.bindGroupLayoutEntry={visibility:GPUShaderStage.VERTEX|GPUShaderStage.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d"}},e.bindGroupTime={},J.obj(e.bindGroupTime,{mtime:0}),J.get(t,e,["bindGroupTime","texture"]),J.setGet(t,e,["bindGroupLayoutEntry","label","sampler"]),Jfe(t,e)}const tve=J.newInstance(sV);var nve={newInstance:tve,extend:sV};const{BufferUsage:v9}=Fv;function rve(t,e){e.classHierarchy.push("vtkWebGPUTexture"),t.create=(n,r)=>{e.device=n,e.width=r.width,e.height=r.height,e.depth=r.depth?r.depth:1;const a=e.depth===1?"2d":"3d";e.format=r.format?r.format:"rgba8unorm",e.mipLevel=r.mipLevel?r.mipLevel:0,e.usage=r.usage?r.usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST,e.handle=e.device.getHandle().createTexture({size:[e.width,e.height,e.depth],format:e.format,usage:e.usage,label:e.label,dimension:a,mipLevelCount:e.mipLevel+1})},t.assignFromHandle=(n,r,a)=>{e.device=n,e.handle=r,e.width=a.width,e.height=a.height,e.depth=a.depth?a.depth:1,e.format=a.format?a.format:"rgba8unorm",e.usage=a.usage?a.usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST},t.writeImageData=n=>{let r=[];if(n.canvas){e.device.getHandle().queue.copyExternalImageToTexture({source:n.canvas,flipY:n.flip},{texture:e.handle,premultipliedAlpha:!0},[e.width,e.height,e.depth]),e.ready=!0;return}n.jsImageData&&!n.nativeArray&&(n.width=n.jsImageData.width,n.height=n.jsImageData.height,n.depth=1,n.format="rgba8unorm",n.flip=!0,n.nativeArray=n.jsImageData.data);const a=Ui.getDetailsFromTextureFormat(e.format);let i=e.width*a.stride;const o=(c,l,u)=>{const f=c.length/(l*u)*c.BYTES_PER_ELEMENT,v=a.elementSize===2&&a.sampleType==="float";if(v||f%256){const g=c,d=f/g.BYTES_PER_ELEMENT,m=a.elementSize,h=256*Math.floor((d*m+255)/256),C=h/m,p=J.newTypedArray(v?"Uint16Array":g.constructor.name,C*l*u);for(let S=0;S<l*u;S++)if(v)for(let I=0;I<d;I++)p[S*C+I]=zu.toHalf(g[S*d+I]);else p.set(g.subarray(S*d,(S+1)*d),S*C);return[p,h]}return[c,f]};if(n.nativeArray&&(r=n.nativeArray),n.image){const c=document.createElement("canvas");c.width=n.image.width,c.height=n.image.height;const l=c.getContext("2d");l.translate(0,c.height),l.scale(1,-1),l.drawImage(n.image,0,0,n.image.width,n.image.height,0,0,c.width,c.height),r=l.getImageData(0,0,n.image.width,n.image.height).data}const s=e.device.createCommandEncoder();if(t.getDimensionality()!==3){const c=ch.generateMipmaps(r,e.width,e.height,e.mipLevel);let l=e.width,u=e.height;for(let f=0;f<=e.mipLevel;f++){const v=o(c[f],u,1);i=v[1];const g={dataArray:n.dataArray?n.dataArray:null,nativeArray:v[0],usage:v9.Texture},d=e.device.getBufferManager().getBuffer(g);s.copyBufferToTexture({buffer:d.getHandle(),offset:0,bytesPerRow:i,rowsPerImage:u},{texture:e.handle,mipLevel:f},[l,u,1]),l/=2,u/=2}e.device.submitCommandEncoder(s),e.ready=!0}else{const c=o(r,e.height,e.depth);i=c[1];const l={dataArray:n.dataArray?n.dataArray:null,usage:v9.Texture};l.nativeArray=c[0];const u=e.device.getBufferManager().getBuffer(l);s.copyBufferToTexture({buffer:u.getHandle(),offset:0,bytesPerRow:i,rowsPerImage:e.height},{texture:e.handle},[e.width,e.height,e.depth]),e.device.submitCommandEncoder(s),e.ready=!0}},t.getScale=()=>{const n=Ui.getDetailsFromTextureFormat(e.format);return n.elementSize===2&&n.sampleType==="float"?1:255},t.getNumberOfComponents=()=>Ui.getDetailsFromTextureFormat(e.format).numComponents,t.getDimensionality=()=>{let n=0;return e.width>1&&n++,e.height>1&&n++,e.depth>1&&n++,n},t.resizeToMatch=n=>{(n.getWidth()!==e.width||n.getHeight()!==e.height||n.getDepth()!==e.depth)&&(e.width=n.getWidth(),e.height=n.getHeight(),e.depth=n.getDepth(),e.handle=e.device.getHandle().createTexture({size:[e.width,e.height,e.depth],format:e.format,usage:e.usage,label:e.label}))},t.resize=function(n,r){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;(n!==e.width||r!==e.height||a!==e.depth)&&(e.width=n,e.height=r,e.depth=a,e.handle=e.device.getHandle().createTexture({size:[e.width,e.height,e.depth],format:e.format,usage:e.usage,label:e.label}))},t.createView=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};r.dimension||(r.dimension=e.depth===1?"2d":"3d");const a=nve.newInstance({label:n});return a.create(t,r),a}}const ave={device:null,handle:null,buffer:null,ready:!1,label:null};function ive(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,ave,n),J.obj(t,e),J.get(t,e,["handle","ready","width","height","depth","format","usage"]),J.setGet(t,e,["device","label"]),rve(t,e)}J.newInstance(ive);function ove(t){if(!t||t.data.length===0)throw new Error("Invalid contour set data, see publicContourSetData type for more info");if(!t.id)throw new Error("Invalid contour set data, each contour set must have an id");if(!t.data||!Array.isArray(t.data))throw new Error("Invalid contour set data, each contour set must have an array of contours");t.data.forEach(e=>{if(!e.points||!Array.isArray(e.points))throw new Error("Invalid contour set data, each contour must have an array of points");e.points.forEach(n=>{if(!n||!Array.isArray(n)||n.length!==3)throw new Error("Invalid contour set data, each point must be an array of length 3")})})}class g9{constructor(e){const{points:n,type:r}=e.data;this.id=e.id,this._points=n,this._type=r,this._color=e.color,this._segmentIndex=e.segmentIndex,this.sizeInBytes=this._getSizeInBytes()}_getSizeInBytes(){return this._points.length*3}get points(){return this._points}set points(e){this._points=e}get color(){return this._color}set color(e){this._color=e}get type(){return this._type}set type(e){this._type=e}get segmentIndex(){return this._segmentIndex}set segmentIndex(e){this._segmentIndex=e}get flatPointsArray(){return this._points.map(e=>[...e]).flat()}}class sve{constructor(e){this._color=[200,0,0],this.id=e.id,this._contours=[],this._color=e.color??this._color,this.frameOfReferenceUID=e.frameOfReferenceUID,this._segmentIndex=e.segmentIndex,this._createEachContour(e.data),this.sizeInBytes=this._getSizeInBytes()}_createEachContour(e){e.forEach(n=>{const{points:r,type:a,color:i}=n,o=new g9({id:`${this.id}-segment-${this._segmentIndex}`,data:{points:r,type:a,segmentIndex:this._segmentIndex,color:i??this._color},segmentIndex:this._segmentIndex,color:i??this._color});this._contours.push(o)}),this._updateContourSetCentroid()}_updateContourSetCentroid(){const e=this.totalNumberOfPoints,n=this.flatPointsArray,r=n.reduce((o,s)=>[o[0]+s[0],o[1]+s[1],o[2]+s[2]],[0,0,0]),a=[r[0]/e,r[1]/e,r[2]/e],i=n.reduce((o,s)=>{const c=this._getDistance(a,s),l=this._getDistance(a,o);return c<l?s:o},n[0]);this._centroid=i}_getSizeInBytes(){return this._contours.reduce((e,n)=>e+n.sizeInBytes,0)}_getDistance(e,n){return Math.sqrt((e[0]-n[0])**2+(e[1]-n[1])**2+(e[2]-n[2])**2)}get centroid(){return this._centroid}get segmentIndex(){return this._segmentIndex}get color(){return this._color}set color(e){this._color=e,this._contours.forEach(n=>{n instanceof g9&&(n.color=e)})}get contours(){return this._contours}get flatPointsArray(){return this._contours.flatMap(e=>e.points)}get numberOfContours(){return this._contours.length}get totalNumberOfPoints(){return this._contours.reduce((e,n)=>e+n.points.length,0)}get numberOfPointsArray(){return this._contours.map(e=>e.points.length)}getPointsInContour(e){return this._contours[e].points}getNumberOfPointsInAContour(e){return this.getPointsInContour(e).length}}function cve(t,e){ove(e);const n=new sve({id:e.id,data:e.data,color:e.color,frameOfReferenceUID:e.frameOfReferenceUID,segmentIndex:e.segmentIndex??1});return{id:t,type:D1.CONTOUR,data:n,sizeInBytes:n.sizeInBytes}}function lve(t){var e,n;if(!t.id)throw new Error("Surface must have an id");if(((e=t.points)==null?void 0:e.length)===0)throw new Error("Surface must have non-empty points array");if(((n=t.polys)==null?void 0:n.length)===0)throw new Error("Surface must have non-empty polys array");if(!t.frameOfReferenceUID)throw new Error("Surface must have a frameOfReferenceUID")}function uve(t,e){lve(e);const n=new CF({id:e.id,points:e.points,polys:e.polys,color:e.color,frameOfReferenceUID:e.frameOfReferenceUID,segmentIndex:e.segmentIndex??1});return{id:t,type:D1.SURFACE,data:n,sizeInBytes:n.sizeInBytes}}const cV={};let pd;function lV(t,e){const n=t.indexOf(":"),r=t.substring(0,n);let a=cV[r];if(a==null){if(pd==null||typeof pd!="function")throw new Error(`No geometry loader for scheme ${r} has been registered`);a=pd}const i=a(t,e);return i.promise.then(function(o){Dt(ot,vt.GEOMETRY_LOADED,{geometry:o})},function(o){const s={geometryId:t,error:o};Dt(ot,vt.GEOMETRY_LOADED_FAILED,s)}),i}function fve(t,e){if(t===void 0)throw new Error("loadGeometry: parameter geometryId must not be undefined");let n=Ye.getGeometryLoadObject(t);return n!==void 0||(n=lV(t,e)),n.promise}async function vve(t,e){if(t===void 0)throw new Error("createAndCacheGeometry: parameter geometryId must not be undefined");let n=Ye.getGeometryLoadObject(t);return n!==void 0||(n=lV(t,e),await Ye.putGeometryLoadObject(t,n)),n.promise}function uV(t,e){if(t===void 0)throw new Error("createAndCacheGeometry: parameter geometryId must not be undefined");let n=Ye.getGeometry(t);if(n)return n;if(e.type===D1.CONTOUR)n=cve(t,e.geometryData);else if(e.type===D1.SURFACE)n=uve(t,e.geometryData);else throw new Error("Unknown geometry type");return Ye.putGeometrySync(t,n),n}function gve(t,e){cV[t]=e}function dve(t){const e=pd;return pd=t,e}const mve=Object.freeze(Object.defineProperty({__proto__:null,createAndCacheGeometry:uV,loadAndCacheGeometry:vve,loadGeometry:fve,registerGeometryLoader:gve,registerUnknownGeometryLoader:dve},Symbol.toStringTag,{value:"Module"}));function fV(t,e){if(!e||!e.imageIds||!e.imageIds.length)throw new Error("ImageIds must be provided to create a 4D streaming image volume");const{imageIds:n}=e,{splittingTag:r,imageIdGroups:a}=J5(n),i=Math.floor(a.length/2),o=DI(a[i],t),{metadata:s,dimensions:c,spacing:l,direction:u,sizeInBytes:f,origin:v,numberOfComponents:g,dataType:d}=o,m=u.slice(6,9),h=a.map(I=>F5(I,m).sortedImageIds),C=h.flat(),p=yo.createScalarDynamicVolumeVoxelManager({dimensions:c,imageIdGroups:h,timePoint:0,numberOfComponents:g});let S=new FF({volumeId:t,metadata:s,dimensions:c,spacing:l,origin:v,direction:u,sizeInBytes:f,imageIds:C,imageIdGroups:h,splittingTag:r,voxelManager:p,numberOfComponents:g,dataType:d},{imageIds:C,loadStatus:{loaded:!1,loading:!1,cancelled:!1,cachedFrames:[],callbacks:[]}});return{promise:Promise.resolve(S),decache:()=>{S.destroy(),S=null},cancel:()=>{S.cancelLoading()}}}const hve=Object.freeze(Object.defineProperty({__proto__:null,BaseVolumeViewport:zr,CONSTANTS:fu,EVENTS:vt,Enums:vs,ImageVolume:H1,ProgressiveRetrieveImages:am,RenderingEngine:K5,Settings:Qr,StackViewport:Xr,StreamingDynamicImageVolume:FF,StreamingImageVolume:zU,Surface:CF,VideoViewport:vv,Viewport:M1,VolumeViewport:yr,VolumeViewport3D:Q5,WSIViewport:YS,addImageSlicesToViewports:pF,addVolumesToViewports:hF,cache:Ye,canRenderFloatTextures:hI,convertMapperToNotSharedMapper:ZU,cornerstoneStreamingDynamicImageVolumeLoader:fV,cornerstoneStreamingImageVolumeLoader:$S,createVolumeActor:qS,createVolumeMapper:YU,eventTarget:ot,geometryLoader:mve,getConfiguration:pI,getEnabledElement:Ae,getEnabledElementByIds:Ka,getEnabledElementByViewportId:wr,getEnabledElements:PF,getOrCreateCanvas:P0,getRenderingEngine:da,getRenderingEngines:to,getShouldUseCPURendering:Hf,getWebWorkerManager:Zc,imageLoadPoolManager:ui,imageLoader:Z0e,imageRetrievalPoolManager:Gv,init:nU,isCornerstoneInitialized:rU,metaData:GL,peerImport:aU,registerImageLoader:Wl,requestPoolManager:ui,resetInitialization:Yie,resetUseCPURendering:Xie,setConfiguration:Zie,setPreferSizeOverAccuracy:Kie,setUseCPURendering:Qie,setVolumesForViewports:XS,triggerEvent:Dt,utilities:Zn,volumeLoader:sce},Symbol.toStringTag,{value:"Module"}));function vV(t,e,n){if(t===void 0)throw new Error("decodeRGB: rgbBuffer must be defined");if(t.length%3!==0)throw new Error(`decodeRGB: rgbBuffer length ${t.length} must be divisible by 3`);const r=t.length/3;let a=0,i=0;if(n){for(let o=0;o<r;o++)e[i++]=t[a++],e[i++]=t[a++],e[i++]=t[a++],e[i++]=255;return}e.set(t)}function gV(t,e,n){if(t===void 0)throw new Error("decodeRGB: rgbBuffer must be defined");if(t.length%3!==0)throw new Error(`decodeRGB: rgbBuffer length ${t.length} must be divisible by 3`);const r=t.length/3;let a=0,i=0,o=r,s=r*2;if(n)for(let c=0;c<r;c++)e[a++]=t[i++],e[a++]=t[o++],e[a++]=t[s++],e[a++]=255;else for(let c=0;c<r;c++)e[a++]=t[i++],e[a++]=t[o++],e[a++]=t[s++]}function dV(t,e,n){if(t===void 0)throw new Error("convertYBRFullByPixel: ybrBuffer must be defined");if(t.length%3!==0)throw new Error(`convertYBRFullByPixel: ybrBuffer length ${t.length} must be divisible by 3`);const r=t.length/3;let a=0,i=0;if(n){for(let o=0;o<r;o++){const s=t[a++],c=t[a++],l=t[a++];e[i++]=s+1.402*(l-128),e[i++]=s-.34414*(c-128)-.71414*(l-128),e[i++]=s+1.772*(c-128),e[i++]=255}return}for(let o=0;o<r;o++){const s=t[a++],c=t[a++],l=t[a++];e[i++]=s+1.402*(l-128),e[i++]=s-.34414*(c-128)-.71414*(l-128),e[i++]=s+1.772*(c-128)}}function mV(t,e,n){if(t===void 0)throw new Error("convertYBRFullByPlane: ybrBuffer must be defined");if(t.length%3!==0)throw new Error(`convertYBRFullByPlane: ybrBuffer length ${t.length} must be divisible by 3`);const r=t.length/3;let a=0,i=0,o=r,s=r*2;if(n){for(let c=0;c<r;c++){const l=t[i++],u=t[o++],f=t[s++];e[a++]=l+1.402*(f-128),e[a++]=l-.34414*(u-128)-.71414*(f-128),e[a++]=l+1.772*(u-128),e[a++]=255}return}for(let c=0;c<r;c++){const l=t[i++],u=t[o++],f=t[s++];e[a++]=l+1.402*(f-128),e[a++]=l-.34414*(u-128)-.71414*(f-128),e[a++]=l+1.772*(u-128)}}function pve(t,e,n){if(t===void 0)throw new Error("convertYBRFull422ByPixel: ybrBuffer must be defined");if(t.length%2!==0)throw new Error(`convertYBRFull422ByPixel: ybrBuffer length ${t.length} must be divisible by 2`);const r=t.length/2;let a=0,i=0;if(n){for(let o=0;o<r;o+=2){const s=t[a++],c=t[a++],l=t[a++],u=t[a++];e[i++]=s+1.402*(u-128),e[i++]=s-.34414*(l-128)-.71414*(u-128),e[i++]=s+1.772*(l-128),e[i++]=255,e[i++]=c+1.402*(u-128),e[i++]=c-.34414*(l-128)-.71414*(u-128),e[i++]=c+1.772*(l-128),e[i++]=255}return}for(let o=0;o<r;o+=2){const s=t[a++],c=t[a++],l=t[a++],u=t[a++];e[i++]=s+1.402*(u-128),e[i++]=s-.34414*(l-128)-.71414*(u-128),e[i++]=s+1.772*(l-128),e[i++]=c+1.402*(u-128),e[i++]=c-.34414*(l-128)-.71414*(u-128),e[i++]=c+1.772*(l-128)}}function EE(t,e){const n=t.length,r=new Uint8ClampedArray(n);for(let a=0;a<n;++a)r[a]=t[a]>>e;return r}function TE(t,e,n){const r=t[`${e}PaletteColorLookupTableData`];if(r)return Promise.resolve(r);const a=Lt("imagePixelModule",t.imageId);return a&&typeof a.then=="function"?a.then(i=>i?i[`${e}PaletteColorLookupTableData`]:n):Promise.resolve(a?a[`${e}PaletteColorLookupTableData`]:n)}function hV(t,e,n){const r=t.columns*t.rows,a=t.pixelData;Promise.all([TE(t,"red",null),TE(t,"green",null),TE(t,"blue",null)]).then(([i,o,s])=>{if(!i||!o||!s)throw new Error("The image does not have a complete color palette. R, G, and B palette data are required.");const c=i.length;let l=0,u=0;const f=t.redPaletteColorLookupTableDescriptor[1],v=t.redPaletteColorLookupTableDescriptor[2]===8?0:8,g=EE(i,v),d=EE(o,v),m=EE(s,v);if(n){for(let h=0;h<r;++h){let C=a[l++];C<f?C=0:C>f+c-1?C=c-1:C-=f,e[u++]=g[C],e[u++]=d[C],e[u++]=m[C],e[u++]=255}return}for(let h=0;h<r;++h){let C=a[l++];C<f?C=0:C>f+c-1?C=c-1:C-=f,e[u++]=g[C],e[u++]=d[C],e[u++]=m[C]}})}function yE(t,e){if(!(!t.elements[e]||t.elements[e].length!==6))return[t.uint16(e,0),t.uint16(e,1),t.uint16(e,2)]}function ME(t,e,n){const r=[],a=t.elements[e];for(let i=0;i<n[0];i++)n[2]===16?r[i]=t.uint16(e,i):r[i]=t.byteArray[i+a.dataOffset];return r}function Sve(t,e){e.redPaletteColorLookupTableDescriptor=yE(t,"x00281101"),e.greenPaletteColorLookupTableDescriptor=yE(t,"x00281102"),e.bluePaletteColorLookupTableDescriptor=yE(t,"x00281103"),e.redPaletteColorLookupTableDescriptor[0]===0&&(e.redPaletteColorLookupTableDescriptor[0]=65536,e.greenPaletteColorLookupTableDescriptor[0]=65536,e.bluePaletteColorLookupTableDescriptor[0]=65536);const n=e.redPaletteColorLookupTableDescriptor[0],a=t.elements.x00281201.length===n?8:16;e.redPaletteColorLookupTableDescriptor[2]!==a&&(e.redPaletteColorLookupTableDescriptor[2]=a,e.greenPaletteColorLookupTableDescriptor[2]=a,e.bluePaletteColorLookupTableDescriptor[2]=a),e.redPaletteColorLookupTableData=ME(t,"x00281201",e.redPaletteColorLookupTableDescriptor),e.greenPaletteColorLookupTableData=ME(t,"x00281202",e.greenPaletteColorLookupTableDescriptor),e.bluePaletteColorLookupTableData=ME(t,"x00281203",e.bluePaletteColorLookupTableDescriptor)}function Cve(t,e){t.uint16("x00280103")===0?(e.smallestPixelValue=t.uint16("x00280106"),e.largestPixelValue=t.uint16("x00280107")):(e.smallestPixelValue=t.int16("x00280106"),e.largestPixelValue=t.int16("x00280107"))}function pV(t){const e={samplesPerPixel:t.uint16("x00280002"),photometricInterpretation:t.string("x00280004"),rows:t.uint16("x00280010"),columns:t.uint16("x00280011"),bitsAllocated:t.uint16("x00280100"),bitsStored:t.uint16("x00280101"),highBit:t.uint16("x00280102"),pixelRepresentation:t.uint16("x00280103"),planarConfiguration:t.uint16("x00280006"),pixelAspectRatio:t.string("x00280034")};return Cve(t,e),e.photometricInterpretation==="PALETTE COLOR"&&t.elements.x00281101&&Sve(t,e),e}function Ive(t,e){let n=e.uint16("x00283002",0);n===0&&(n=65535);let r=0;t===0?r=e.uint16("x00283002",1):r=e.int16("x00283002",1);const a=e.uint16("x00283002",2),i={id:"1",firstValueMapped:r,numBitsPerEntry:a,lut:[]};for(let o=0;o<n;o++)t===0?i.lut[o]=e.uint16("x00283006",o):i.lut[o]=e.int16("x00283006",o);return i}function ey(t,e){if(!e||!e.items||!e.items.length)return;const n=[];for(let r=0;r<e.items.length;r++){const a=e.items[r].dataSet,i=Ive(t,a);i&&n.push(i)}return n}function Dve(t){const e=t.uint16("x00280103"),n=t.uint16("x00280101");return e===0?0:-1<<n-1}function SV(t){const e=t.string("x00080016");if(e==="1.2.840.10008.5.1.4.1.1.2"||e==="1.2.840.10008.5.1.4.1.1.2.1")return 1;const n=t.floatString("x00281052"),r=t.floatString("x00281053");return n!==void 0&&r!==void 0?Dve(t)*r+n<0?1:0:t.elements.x00283000&&t.elements.x00283000.length>0?0:t.uint16("x00280103")}function s0(t,e,n){const r=[],a=t.string(e);if(!a)return;const i=a.split("\\");if(!(n&&i.length<n)){for(let o=0;o<i.length;o++)r.push(parseFloat(i[o]));return r}}var j2={exports:{}};/*! dicom-parser - 1.8.12 - 2023-02-20 | (c) 2017 Chris Hafey | https://github.com/cornerstonejs/dicomParser */var Eve=j2.exports,d9;function Tve(){return d9||(d9=1,function(t,e){(function(n,r){t.exports=r(j0)})(Eve,function(n){return a=[function(o,s){o.exports=n},function(o,s,c){c.r(s),c.d(s,"isStringVr",function(){return u}),c.d(s,"isPrivateTag",function(){return f}),c.d(s,"parsePN",function(){return v}),c.d(s,"parseTM",function(){return g}),c.d(s,"parseDA",function(){return m}),c.d(s,"explicitElementToString",function(){return h}),c.d(s,"explicitDataSetToJS",function(){return C}),c.d(s,"createJPEGBasicOffsetTable",function(){return I}),c.d(s,"parseDicomDataSetExplicit",function(){return re}),c.d(s,"parseDicomDataSetImplicit",function(){return ue}),c.d(s,"readFixedString",function(){return y}),c.d(s,"alloc",function(){return De}),c.d(s,"version",function(){return pe}),c.d(s,"bigEndianByteArrayParser",function(){return Te}),c.d(s,"ByteStream",function(){return Re}),c.d(s,"sharedCopy",function(){return Fe}),c.d(s,"DataSet",function(){return O}),c.d(s,"findAndSetUNElementLength",function(){return T}),c.d(s,"findEndOfEncapsulatedElement",function(){return E}),c.d(s,"findItemDelimitationItemAndSetElementLength",function(){return w}),c.d(s,"littleEndianByteArrayParser",function(){return k}),c.d(s,"parseDicom",function(){return N}),c.d(s,"readDicomElementExplicit",function(){return X}),c.d(s,"readDicomElementImplicit",function(){return P}),c.d(s,"readEncapsulatedImageFrame",function(){return ye}),c.d(s,"readEncapsulatedPixelData",function(){return be}),c.d(s,"readEncapsulatedPixelDataFromFragments",function(){return j}),c.d(s,"readPart10Header",function(){return A}),c.d(s,"readSequenceItemsExplicit",function(){return U}),c.d(s,"readSequenceItemsImplicit",function(){return H}),c.d(s,"readSequenceItem",function(){return R}),c.d(s,"readTag",function(){return D});var l={AE:!0,AS:!0,AT:!1,CS:!0,DA:!0,DS:!0,DT:!0,FL:!1,FD:!1,IS:!0,LO:!0,LT:!0,OB:!1,OD:!1,OF:!1,OW:!1,PN:!0,SH:!0,SL:!1,SQ:!1,SS:!1,ST:!0,TM:!0,UI:!0,UL:!1,UN:void 0,UR:!0,US:!1,UT:!0},u=function(Z){return l[Z]},f=function(Z){if(Z=parseInt(Z[4],16),isNaN(Z))throw"dicomParser.isPrivateTag: cannot parse last character of group";return Z%2==1},v=function(Z){if(Z!==void 0)return Z=Z.split("^"),{familyName:Z[0],givenName:Z[1],middleName:Z[2],prefix:Z[3],suffix:Z[4]}};function g(Z,ie){if(2<=Z.length){var he=parseInt(Z.substring(0,2),10),se=4<=Z.length?parseInt(Z.substring(2,4),10):void 0,me=6<=Z.length?parseInt(Z.substring(4,6),10):void 0,fe=8<=Z.length?Z.substring(7,13):void 0,fe=fe?parseInt(fe,10)*Math.pow(10,6-fe.length):void 0;if(ie&&(isNaN(he)||se!==void 0&&isNaN(se)||me!==void 0&&isNaN(me)||fe!==void 0&&isNaN(fe)||he<0||23<he||se&&(se<0||59<se)||me&&(me<0||59<me)||fe&&(fe<0||999999<fe)))throw"invalid TM '".concat(Z,"'");return{hours:he,minutes:se,seconds:me,fractionalSeconds:fe}}if(ie)throw"invalid TM '".concat(Z,"'")}function d(Z,ie,he){return!isNaN(he)&&0<ie&&ie<=12&&0<Z&&Z<=function(se,me){switch(se){case 2:return me%4==0&&me%100||me%400==0?29:28;case 9:case 4:case 6:case 11:return 30;default:return 31}}(ie,he)}function m(Z,ie){if(Z&&Z.length===8){var he=parseInt(Z.substring(0,4),10),se=parseInt(Z.substring(4,6),10),me=parseInt(Z.substring(6,8),10);if(ie&&d(me,se,he)!==!0)throw"invalid DA '".concat(Z,"'");return{year:he,month:se,day:me}}if(ie)throw"invalid DA '".concat(Z,"'")}function h(Z,ie){if(Z===void 0||ie===void 0)throw"dicomParser.explicitElementToString: missing required parameters";if(ie.vr===void 0)throw"dicomParser.explicitElementToString: cannot convert implicit element to string";var he,se=ie.vr,me=ie.tag;function fe(Pe,Le){for(var Ue="",Me=0;Me<Pe;Me++)Me!==0&&(Ue+="/"),Ue+=Le.call(Z,me,Me).toString();return Ue}if(u(se)===!0)he=Z.string(me);else{if(se==="AT"){var q=Z.uint32(me);return q===void 0?void 0:"x".concat((q=q<0?4294967295+q+1:q).toString(16).toUpperCase())}se==="US"?he=fe(ie.length/2,Z.uint16):se==="SS"?he=fe(ie.length/2,Z.int16):se==="UL"?he=fe(ie.length/4,Z.uint32):se==="SL"?he=fe(ie.length/4,Z.int32):se==="FD"?he=fe(ie.length/8,Z.double):se==="FL"&&(he=fe(ie.length/4,Z.float))}return he}function C(Z,ie){if(Z===void 0)throw"dicomParser.explicitDataSetToJS: missing required parameter dataSet";ie=ie||{omitPrivateAttibutes:!0,maxElementLength:128};var he,se={};for(he in Z.elements){var me=Z.elements[he];if(ie.omitPrivateAttibutes!==!0||!f(he))if(me.items){for(var fe=[],q=0;q<me.items.length;q++)fe.push(C(me.items[q].dataSet,ie));se[he]=fe}else{var Pe=void 0;me.length<ie.maxElementLength&&(Pe=h(Z,me)),se[he]=Pe!==void 0?Pe:{dataOffset:me.dataOffset,length:me.length}}}return se}function p(Z,ie){return Z.byteArray[ie]===255&&Z.byteArray[ie+1]===217}function S(Z,ie,he){for(var se,me,fe=he;fe<ie.fragments.length;fe++)if(se=Z,me=fe,me=ie.fragments[me],!(!p(se,me.position+me.length-2)&&!p(se,me.position+me.length-3)))return fe}function I(Z,ie,he){if(Z===void 0)throw"dicomParser.createJPEGBasicOffsetTable: missing required parameter dataSet";if(ie===void 0)throw"dicomParser.createJPEGBasicOffsetTable: missing required parameter pixelDataElement";if(ie.tag!=="x7fe00010")throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to non pixel data tag (expected tag = x7fe00010'";if(ie.encapsulatedPixelData!==!0||ie.hadUndefinedLength!==!0||ie.basicOffsetTable===void 0||ie.fragments===void 0||ie.fragments.length<=0)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(he&&he.length<=0)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'fragments' must not be zero length";he=he||ie.fragments;for(var se=[],me=0;;){se.push(ie.fragments[me].offset);var fe=S(Z,ie,me);if(fe===void 0||fe===ie.fragments.length-1)return se;me=fe+1}}function D(he){if(he===void 0)throw"dicomParser.readTag: missing required parameter 'byteStream'";var ie=256*he.readUint16()*256,he=he.readUint16();return"x".concat("00000000".concat((ie+he).toString(16)).substr(-8))}function E(Z,ie,he){if(Z===void 0)throw"dicomParser.findEndOfEncapsulatedElement: missing required parameter 'byteStream'";if(ie===void 0)throw"dicomParser.findEndOfEncapsulatedElement: missing required parameter 'element'";if(ie.encapsulatedPixelData=!0,ie.basicOffsetTable=[],ie.fragments=[],D(Z)!=="xfffee000")throw"dicomParser.findEndOfEncapsulatedElement: basic offset table not found";for(var se=Z.readUint32()/4,me=0;me<se;me++){var fe=Z.readUint32();ie.basicOffsetTable.push(fe)}for(var q=Z.position;Z.position<Z.byteArray.length;){var Pe=D(Z),Le=Z.readUint32();if(Pe==="xfffee0dd")return Z.seek(Le),void(ie.length=Z.position-ie.dataOffset);if(Pe!=="xfffee000")return he&&he.push("unexpected tag ".concat(Pe," while searching for end of pixel data element with undefined length")),Le>Z.byteArray.length-Z.position&&(Le=Z.byteArray.length-Z.position),ie.fragments.push({offset:Z.position-q-8,position:Z.position,length:Le}),Z.seek(Le),void(ie.length=Z.position-ie.dataOffset);ie.fragments.push({offset:Z.position-q-8,position:Z.position,length:Le}),Z.seek(Le)}he&&he.push("pixel data element ".concat(ie.tag," missing sequence delimiter tag xfffee0dd"))}function T(Z,ie){if(Z===void 0)throw"dicomParser.findAndSetUNElementLength: missing required parameter 'byteStream'";for(var he=Z.byteArray.length-8;Z.position<=he;)if(Z.readUint16()===65534){var se=Z.readUint16();if(se===57565)return Z.readUint32()!==0&&Z.warnings("encountered non zero length following item delimiter at position ".concat(Z.position-4," while reading element of undefined length with tag ").concat(ie.tag)),void(ie.length=Z.position-ie.dataOffset)}ie.length=Z.byteArray.length-ie.dataOffset,Z.seek(Z.byteArray.length-Z.position)}function y(Z,ie,he){if(he<0)throw"dicomParser.readFixedString - length cannot be less than 0";if(ie+he>Z.length)throw"dicomParser.readFixedString: attempt to read past end of buffer";for(var se,me="",fe=0;fe<he;fe++){if((se=Z[ie+fe])===0)return ie+=he,me;me+=String.fromCharCode(se)}return me}function M(Z,ie){for(var he=0;he<ie.length;he++){var se=ie[he];se.enumerable=se.enumerable||!1,se.configurable=!0,"value"in se&&(se.writable=!0),Object.defineProperty(Z,se.key,se)}}function _(Z,ie){return Z.parser!==void 0?Z.parser:ie}var O=function(){function Z(se,me,fe){(function(q,Pe){if(!(q instanceof Pe))throw new TypeError("Cannot call a class as a function")})(this,Z),this.byteArrayParser=se,this.byteArray=me,this.elements=fe}var ie,he;return ie=Z,(he=[{key:"uint16",value:function(se,me){if(se=this.elements[se],me=me!==void 0?me:0,se&&se.length!==0)return _(se,this.byteArrayParser).readUint16(this.byteArray,se.dataOffset+2*me)}},{key:"int16",value:function(se,me){if(se=this.elements[se],me=me!==void 0?me:0,se&&se.length!==0)return _(se,this.byteArrayParser).readInt16(this.byteArray,se.dataOffset+2*me)}},{key:"uint32",value:function(se,me){if(se=this.elements[se],me=me!==void 0?me:0,se&&se.length!==0)return _(se,this.byteArrayParser).readUint32(this.byteArray,se.dataOffset+4*me)}},{key:"int32",value:function(se,me){if(se=this.elements[se],me=me!==void 0?me:0,se&&se.length!==0)return _(se,this.byteArrayParser).readInt32(this.byteArray,se.dataOffset+4*me)}},{key:"float",value:function(se,me){if(se=this.elements[se],me=me!==void 0?me:0,se&&se.length!==0)return _(se,this.byteArrayParser).readFloat(this.byteArray,se.dataOffset+4*me)}},{key:"double",value:function(se,me){if(se=this.elements[se],me=me!==void 0?me:0,se&&se.length!==0)return _(se,this.byteArrayParser).readDouble(this.byteArray,se.dataOffset+8*me)}},{key:"numStringValues",value:function(se){if(se=this.elements[se],se&&0<se.length)return se=y(this.byteArray,se.dataOffset,se.length).match(/\\/g),se===null?1:se.length+1}},{key:"string",value:function(se,me){if(se=this.elements[se],se&&se.Value)return se.Value;if(se&&0<se.length)return se=y(this.byteArray,se.dataOffset,se.length),0<=me?se.split("\\")[me].trim():se.trim()}},{key:"text",value:function(se,me){if(se=this.elements[se],se&&0<se.length)return se=y(this.byteArray,se.dataOffset,se.length),0<=me?se.split("\\")[me].replace(/ +$/,""):se.replace(/ +$/,"")}},{key:"floatString",value:function(se,me){var fe=this.elements[se];if(fe&&0<fe.length&&(me=this.string(se,me=me!==void 0?me:0),me!==void 0))return parseFloat(me)}},{key:"intString",value:function(se,me){var fe=this.elements[se];if(fe&&0<fe.length&&(me=this.string(se,me=me!==void 0?me:0),me!==void 0))return parseInt(me)}},{key:"attributeTag",value:function(se){var me=this.elements[se];if(me&&me.length===4){var fe=_(me,this.byteArrayParser).readUint16,se=this.byteArray,me=me.dataOffset;return"x".concat("00000000".concat((256*fe(se,me)*256+fe(se,me+2)).toString(16)).substr(-8))}}}])&&M(ie.prototype,he),Object.defineProperty(ie,"prototype",{writable:!1}),Z}();function w(Z,ie){if(Z===void 0)throw"dicomParser.readDicomElementImplicit: missing required parameter 'byteStream'";for(var he=Z.byteArray.length-8;Z.position<=he;)if(Z.readUint16()===65534){var se=Z.readUint16();if(se===57357)return Z.readUint32()!==0&&Z.warnings("encountered non zero length following item delimiter at position ".concat(Z.position-4," while reading element of undefined length with tag ").concat(ie.tag)),void(ie.length=Z.position-ie.dataOffset)}ie.length=Z.byteArray.length-ie.dataOffset,Z.seek(Z.byteArray.length-Z.position)}var x=function(Z,ie){return Z.vr!==void 0?Z.vr==="SQ":ie.position+4<=ie.byteArray.length?(Z=D(ie),ie.seek(-4),Z==="xfffee000"||Z==="xfffee0dd"):(ie.warnings.push("eof encountered before finding sequence item tag or sequence delimiter tag in peeking to determine VR"),!1)};function P(Z,ie,he){if(Z===void 0)throw"dicomParser.readDicomElementImplicit: missing required parameter 'byteStream'";var se=D(Z),se={tag:se,vr:he!==void 0?he(se):void 0,length:Z.readUint32(),dataOffset:Z.position};return se.length===4294967295&&(se.hadUndefinedLength=!0),se.tag===ie||(!x(se,Z)||f(se.tag)&&!se.hadUndefinedLength?se.hadUndefinedLength?w(Z,se):Z.seek(se.length):(H(Z,se,he),f(se.tag)&&(se.items=void 0))),se}function R(Z){if(Z===void 0)throw"dicomParser.readSequenceItem: missing required parameter 'byteStream'";var ie={tag:D(Z),length:Z.readUint32(),dataOffset:Z.position};if(ie.tag!=="xfffee000")throw"dicomParser.readSequenceItem: item tag (FFFE,E000) not found at offset ".concat(Z.position);return ie}function L(Z,ie){var he=R(Z);return he.length===4294967295?(he.hadUndefinedLength=!0,he.dataSet=function(se,me){for(var fe={};se.position<se.byteArray.length;){var q=P(se,void 0,me);if((fe[q.tag]=q).tag==="xfffee00d")return new O(se.byteArrayParser,se.byteArray,fe)}return se.warnings.push("eof encountered before finding sequence item delimiter in sequence item of undefined length"),new O(se.byteArrayParser,se.byteArray,fe)}(Z,ie),he.length=Z.position-he.dataOffset):(he.dataSet=new O(Z.byteArrayParser,Z.byteArray,{}),ue(he.dataSet,Z,Z.position+he.length,{vrCallback:ie})),he}function H(Z,ie,he){if(Z===void 0)throw"dicomParser.readSequenceItemsImplicit: missing required parameter 'byteStream'";if(ie===void 0)throw"dicomParser.readSequenceItemsImplicit: missing required parameter 'element'";ie.items=[],(ie.length===4294967295?function(se,me,fe){for(;se.position+4<=se.byteArray.length;){var q=D(se);if(se.seek(-4),q==="xfffee0dd")return me.length=se.position-me.dataOffset,se.seek(8);q=L(se,fe),me.items.push(q)}se.warnings.push("eof encountered before finding sequence delimiter in sequence of undefined length"),me.length=se.byteArray.length-me.dataOffset}:function(se,me,fe){for(var q=me.dataOffset+me.length;se.position<q;){var Pe=L(se,fe);me.items.push(Pe)}})(Z,ie,he)}function F(Z,ie){var he=R(Z);return he.length===4294967295?(he.hadUndefinedLength=!0,he.dataSet=function(se,me){for(var fe={};se.position<se.byteArray.length;){var q=X(se,me);if((fe[q.tag]=q).tag==="xfffee00d")return new O(se.byteArrayParser,se.byteArray,fe)}return me.push("eof encountered before finding item delimiter tag while reading sequence item of undefined length"),new O(se.byteArrayParser,se.byteArray,fe)}(Z,ie),he.length=Z.position-he.dataOffset):(he.dataSet=new O(Z.byteArrayParser,Z.byteArray,{}),re(he.dataSet,Z,Z.position+he.length)),he}function U(Z,ie,he){if(Z===void 0)throw"dicomParser.readSequenceItemsExplicit: missing required parameter 'byteStream'";if(ie===void 0)throw"dicomParser.readSequenceItemsExplicit: missing required parameter 'element'";ie.items=[],(ie.length===4294967295?function(se,me,fe){for(;se.position+4<=se.byteArray.length;){var q=D(se);if(se.seek(-4),q==="xfffee0dd")return me.length=se.position-me.dataOffset,se.seek(8);q=F(se,fe),me.items.push(q)}fe.push("eof encountered before finding sequence delimitation tag while reading sequence of undefined length"),me.length=se.position-me.dataOffset}:function(se,me,fe){for(var q=me.dataOffset+me.length;se.position<q;){var Pe=F(se,fe);me.items.push(Pe)}})(Z,ie,he)}var V=function(Z){return Z==="OB"||Z==="OD"||Z==="OL"||Z==="OW"||Z==="SQ"||Z==="OF"||Z==="UC"||Z==="UR"||Z==="UT"||Z==="UN"?4:2};function X(Z,ie,he){if(Z===void 0)throw"dicomParser.readDicomElementExplicit: missing required parameter 'byteStream'";var se={tag:D(Z),vr:Z.readFixedString(2)};return V(se.vr)===2?se.length=Z.readUint16():(Z.seek(2),se.length=Z.readUint32()),se.dataOffset=Z.position,se.length===4294967295&&(se.hadUndefinedLength=!0),se.tag===he||(se.vr==="SQ"?U(Z,se,ie):se.length===4294967295?se.tag==="x7fe00010"?E(Z,se,ie):(se.vr==="UN"?H:w)(Z,se):Z.seek(se.length)),se}function re(Z,ie,he){var se=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{};if(he=he===void 0?ie.byteArray.length:he,ie===void 0)throw"dicomParser.parseDicomDataSetExplicit: missing required parameter 'byteStream'";if(he<ie.position||he>ie.byteArray.length)throw"dicomParser.parseDicomDataSetExplicit: invalid value for parameter 'maxP osition'";for(var me=Z.elements;ie.position<he;){var fe=X(ie,Z.warnings,se.untilTag);if((me[fe.tag]=fe).tag===se.untilTag)return}if(ie.position>he)throw"dicomParser:parseDicomDataSetExplicit: buffer overrun"}function ue(Z,ie,he){var se=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{};if(he=he===void 0?Z.byteArray.length:he,ie===void 0)throw"dicomParser.parseDicomDataSetImplicit: missing required parameter 'byteStream'";if(he<ie.position||he>ie.byteArray.length)throw"dicomParser.parseDicomDataSetImplicit: invalid value for parameter 'maxPosition'";for(var me=Z.elements;ie.position<he;){var fe=P(ie,se.untilTag,se.vrCallback);if((me[fe.tag]=fe).tag===se.untilTag)return}}function De(Z,ie){if(typeof Buffer<"u"&&Z instanceof Buffer)return Buffer.alloc(ie);if(Z instanceof Uint8Array)return new Uint8Array(ie);throw"dicomParser.alloc: unknown type for byteArray"}var pe="1.8.12",Te={readUint16:function(Z,ie){if(ie<0)throw"bigEndianByteArrayParser.readUint16: position cannot be less than 0";if(ie+2>Z.length)throw"bigEndianByteArrayParser.readUint16: attempt to read past end of buffer";return(Z[ie]<<8)+Z[ie+1]},readInt16:function(Z,ie){if(ie<0)throw"bigEndianByteArrayParser.readInt16: position cannot be less than 0";if(ie+2>Z.length)throw"bigEndianByteArrayParser.readInt16: attempt to read past end of buffer";return ie=(Z[ie]<<8)+Z[ie+1],ie=32768&ie?ie-65535-1:ie},readUint32:function(Z,ie){if(ie<0)throw"bigEndianByteArrayParser.readUint32: position cannot be less than 0";if(ie+4>Z.length)throw"bigEndianByteArrayParser.readUint32: attempt to read past end of buffer";return 256*(256*(256*Z[ie]+Z[ie+1])+Z[ie+2])+Z[ie+3]},readInt32:function(Z,ie){if(ie<0)throw"bigEndianByteArrayParser.readInt32: position cannot be less than 0";if(ie+4>Z.length)throw"bigEndianByteArrayParser.readInt32: attempt to read past end of buffer";return(Z[ie]<<24)+(Z[ie+1]<<16)+(Z[ie+2]<<8)+Z[ie+3]},readFloat:function(Z,ie){if(ie<0)throw"bigEndianByteArrayParser.readFloat: position cannot be less than 0";if(ie+4>Z.length)throw"bigEndianByteArrayParser.readFloat: attempt to read past end of buffer";var he=new Uint8Array(4);return he[3]=Z[ie],he[2]=Z[ie+1],he[1]=Z[ie+2],he[0]=Z[ie+3],new Float32Array(he.buffer)[0]},readDouble:function(Z,ie){if(ie<0)throw"bigEndianByteArrayParser.readDouble: position cannot be less than 0";if(ie+8>Z.length)throw"bigEndianByteArrayParser.readDouble: attempt to read past end of buffer";var he=new Uint8Array(8);return he[7]=Z[ie],he[6]=Z[ie+1],he[5]=Z[ie+2],he[4]=Z[ie+3],he[3]=Z[ie+4],he[2]=Z[ie+5],he[1]=Z[ie+6],he[0]=Z[ie+7],new Float64Array(he.buffer)[0]}};function Fe(Z,ie,he){if(typeof Buffer<"u"&&Z instanceof Buffer)return Z.slice(ie,ie+he);if(Z instanceof Uint8Array)return new Uint8Array(Z.buffer,Z.byteOffset+ie,he);throw"dicomParser.from: unknown type for byteArray"}function Ne(Z,ie){for(var he=0;he<ie.length;he++){var se=ie[he];se.enumerable=se.enumerable||!1,se.configurable=!0,"value"in se&&(se.writable=!0),Object.defineProperty(Z,se.key,se)}}var Re=function(){function Z(se,me,fe){if(function(q,Pe){if(!(q instanceof Pe))throw new TypeError("Cannot call a class as a function")}(this,Z),se===void 0)throw"dicomParser.ByteStream: missing required parameter 'byteArrayParser'";if(me===void 0)throw"dicomParser.ByteStream: missing required parameter 'byteArray'";if(!(me instanceof Uint8Array)&&(typeof Buffer>"u"||!(me instanceof Buffer)))throw"dicomParser.ByteStream: parameter byteArray is not of type Uint8Array or Buffer";if(fe<0)throw"dicomParser.ByteStream: parameter 'position' cannot be less than 0";if(fe>=me.length)throw"dicomParser.ByteStream: parameter 'position' cannot be greater than or equal to 'byteArray' length";this.byteArrayParser=se,this.byteArray=me,this.position=fe||0,this.warnings=[]}var ie,he;return ie=Z,(he=[{key:"seek",value:function(se){if(this.position+se<0)throw"dicomParser.ByteStream.prototype.seek: cannot seek to position < 0";this.position+=se}},{key:"readByteStream",value:function(se){if(this.position+se>this.byteArray.length)throw"dicomParser.ByteStream.prototype.readByteStream: readByteStream - buffer overread";var me=Fe(this.byteArray,this.position,se);return this.position+=se,new Z(this.byteArrayParser,me)}},{key:"getSize",value:function(){return this.byteArray.length}},{key:"readUint16",value:function(){var se=this.byteArrayParser.readUint16(this.byteArray,this.position);return this.position+=2,se}},{key:"readUint32",value:function(){var se=this.byteArrayParser.readUint32(this.byteArray,this.position);return this.position+=4,se}},{key:"readFixedString",value:function(se){var me=y(this.byteArray,this.position,se);return this.position+=se,me}}])&&Ne(ie.prototype,he),Object.defineProperty(ie,"prototype",{writable:!1}),Z}(),k={readUint16:function(Z,ie){if(ie<0)throw"littleEndianByteArrayParser.readUint16: position cannot be less than 0";if(ie+2>Z.length)throw"littleEndianByteArrayParser.readUint16: attempt to read past end of buffer";return Z[ie]+256*Z[ie+1]},readInt16:function(Z,ie){if(ie<0)throw"littleEndianByteArrayParser.readInt16: position cannot be less than 0";if(ie+2>Z.length)throw"littleEndianByteArrayParser.readInt16: attempt to read past end of buffer";return ie=Z[ie]+(Z[ie+1]<<8),ie=32768&ie?ie-65535-1:ie},readUint32:function(Z,ie){if(ie<0)throw"littleEndianByteArrayParser.readUint32: position cannot be less than 0";if(ie+4>Z.length)throw"littleEndianByteArrayParser.readUint32: attempt to read past end of buffer";return Z[ie]+256*Z[ie+1]+256*Z[ie+2]*256+256*Z[ie+3]*256*256},readInt32:function(Z,ie){if(ie<0)throw"littleEndianByteArrayParser.readInt32: position cannot be less than 0";if(ie+4>Z.length)throw"littleEndianByteArrayParser.readInt32: attempt to read past end of buffer";return Z[ie]+(Z[ie+1]<<8)+(Z[ie+2]<<16)+(Z[ie+3]<<24)},readFloat:function(Z,ie){if(ie<0)throw"littleEndianByteArrayParser.readFloat: position cannot be less than 0";if(ie+4>Z.length)throw"littleEndianByteArrayParser.readFloat: attempt to read past end of buffer";var he=new Uint8Array(4);return he[0]=Z[ie],he[1]=Z[ie+1],he[2]=Z[ie+2],he[3]=Z[ie+3],new Float32Array(he.buffer)[0]},readDouble:function(Z,ie){if(ie<0)throw"littleEndianByteArrayParser.readDouble: position cannot be less than 0";if(ie+8>Z.length)throw"littleEndianByteArrayParser.readDouble: attempt to read past end of buffer";var he=new Uint8Array(8);return he[0]=Z[ie],he[1]=Z[ie+1],he[2]=Z[ie+2],he[3]=Z[ie+3],he[4]=Z[ie+4],he[5]=Z[ie+5],he[6]=Z[ie+6],he[7]=Z[ie+7],new Float64Array(he.buffer)[0]}};function A(Z){var ie=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};if(Z===void 0)throw"dicomParser.readPart10Header: missing required parameter 'byteArray'";var he=ie.TransferSyntaxUID,se=new Re(k,Z);return function(){var me=function(){if(se.getSize()<=132&&he)return!1;if(se.seek(128),se.readFixedString(4)==="DICM")return!0;if(!(ie||{}).TransferSyntaxUID)throw"dicomParser.readPart10Header: DICM prefix not found at location 132 - this is not a valid DICOM P10 file.";return se.seek(0),!1}(),fe=[],q={};if(!me)return se.position=0,{elements:{x00020010:{tag:"x00020010",vr:"UI",Value:he}},warnings:fe};for(;se.position<se.byteArray.length;){var Pe=se.position,Le=X(se,fe);if("x0002ffff"<Le.tag){se.position=Pe;break}Le.parser=k,q[Le.tag]=Le}return(me=new O(se.byteArrayParser,se.byteArray,q)).warnings=se.warnings,me.position=se.position,me}()}var b="1.2.840.10008.1.2.2";function N(Z){var ie=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};if(Z===void 0)throw new Error("dicomParser.parseDicom: missing required parameter 'byteArray'");var he,se=function(fe){if(fe.elements.x00020010===void 0)throw new Error("dicomParser.parseDicom: missing required meta header attribute 0002,0010");return fe=fe.elements.x00020010,fe&&fe.Value||y(Z,fe.dataOffset,fe.length)};function me(Le){var Pe=se(Le),q=Pe!=="1.2.840.10008.1.2",Pe=function(Ue,Me){var Be=Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]";if(Ue!=="1.2.840.10008.1.2.1.99")return new Re(Ue===b?Te:k,Z,Me);if(ie&&ie.inflater)return Ue=ie.inflater(Z,Me),new Re(k,Ue,0);if(Be==!0){var nt=c(0),Ze=Fe(Z,Me,Z.length-Me),nt=nt.inflateRawSync(Ze),Ze=De(Z,nt.length+Me);return Z.copy(Ze,0,0,Me),nt.copy(Ze,Me),new Re(k,Ze,0)}if(typeof pako>"u")throw"dicomParser.parseDicom: no inflater available to handle deflate transfer syntax";return nt=Z.slice(Me),Ze=pako.inflateRaw(nt),(nt=De(Z,Ze.length+Me)).set(Z.slice(0,Me),0),nt.set(Ze,Me),new Re(k,nt,0)}(Pe,Le.position),Le=new O(Pe.byteArrayParser,Pe.byteArray,{});Le.warnings=Pe.warnings;try{(q?re:ue)(Le,Pe,Pe.byteArray.length,ie)}catch(Ue){throw{exception:Ue,dataSet:Le}}return Le}return function(fe,q){for(var Pe in fe.elements)fe.elements.hasOwnProperty(Pe)&&(q.elements[Pe]=fe.elements[Pe]);return fe.warnings!==void 0&&(q.warnings=fe.warnings.concat(q.warnings)),q}(he=A(Z,ie),me(he))}var W=function(Z,ie,he){for(var se=0,me=ie;me<ie+he;me++)se+=Z[me].length;return se};function j(Z,q,he,se,me){if(me=me||q.fragments,Z===void 0)throw"dicomParser.readEncapsulatedPixelDataFromFragments: missing required parameter 'dataSet'";if(q===void 0)throw"dicomParser.readEncapsulatedPixelDataFromFragments: missing required parameter 'pixelDataElement'";if(he===void 0)throw"dicomParser.readEncapsulatedPixelDataFromFragments: missing required parameter 'startFragmentIndex'";if((se=se||1)===void 0)throw"dicomParser.readEncapsulatedPixelDataFromFragments: missing required parameter 'numFragments'";if(q.tag!=="x7fe00010")throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to non pixel data tag (expected tag = x7fe00010";if(q.encapsulatedPixelData!==!0||q.hadUndefinedLength!==!0||q.basicOffsetTable===void 0||q.fragments===void 0||q.fragments.length<=0)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(he<0)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'startFragmentIndex' must be >= 0";if(he>=q.fragments.length)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'startFragmentIndex' must be < number of fragments";if(se<1)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'numFragments' must be > 0";if(he+se>q.fragments.length)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'startFragment' + 'numFragments' < number of fragments";var fe=new Re(Z.byteArrayParser,Z.byteArray,q.dataOffset),q=R(fe);if(q.tag!=="xfffee000")throw"dicomParser.readEncapsulatedPixelData: missing basic offset table xfffee000";fe.seek(q.length);var Pe=fe.position;if(se===1)return Fe(fe.byteArray,Pe+me[he].offset+8,me[he].length);for(var q=W(me,he,se),Le=De(fe.byteArray,q),Ue=0,Me=he;Me<he+se;Me++)for(var Be=Pe+me[Me].offset+8,nt=0;nt<me[Me].length;nt++)Le[Ue++]=fe.byteArray[Be++];return Le}var K=function(Z,ie){for(var he=0;he<Z.length;he++)if(Z[he].offset===ie)return he},ge=function(Z,ie,he,se){if(Z===ie.length-1)return he.length-se;for(var me=ie[Z+1],fe=se+1;fe<he.length;fe++)if(he[fe].offset===me)return fe-se;throw"dicomParser.calculateNumberOfFragmentsForFrame: could not find fragment with offset matching basic offset table"};function ye(Z,ie,he,se,me){if(se=se||ie.basicOffsetTable,me=me||ie.fragments,Z===void 0)throw"dicomParser.readEncapsulatedImageFrame: missing required parameter 'dataSet'";if(ie===void 0)throw"dicomParser.readEncapsulatedImageFrame: missing required parameter 'pixelDataElement'";if(he===void 0)throw"dicomParser.readEncapsulatedImageFrame: missing required parameter 'frameIndex'";if(se===void 0)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' does not have basicOffsetTable";if(ie.tag!=="x7fe00010")throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' refers to non pixel data tag (expected tag = x7fe00010)";if(ie.encapsulatedPixelData!==!0)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(ie.hadUndefinedLength!==!0)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' refers to pixel data element that does not have undefined length";if(ie.fragments===void 0)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' refers to pixel data element that does not have fragments";if(se.length===0)throw"dicomParser.readEncapsulatedImageFrame: basicOffsetTable has zero entries";if(he<0)throw"dicomParser.readEncapsulatedImageFrame: parameter 'frameIndex' must be >= 0";if(he>=se.length)throw"dicomParser.readEncapsulatedImageFrame: parameter 'frameIndex' must be < basicOffsetTable.length";var fe=se[he],fe=K(me,fe);if(fe===void 0)throw"dicomParser.readEncapsulatedImageFrame: unable to find fragment that matches basic offset table entry";return j(Z,ie,fe,ge(he,se,me,fe),me)}var we=!1;function be(Z,ie,he){if(we||(we=!0,console&&console.log&&console.log("WARNING: dicomParser.readEncapsulatedPixelData() has been deprecated")),Z===void 0)throw"dicomParser.readEncapsulatedPixelData: missing required parameter 'dataSet'";if(ie===void 0)throw"dicomParser.readEncapsulatedPixelData: missing required parameter 'element'";if(he===void 0)throw"dicomParser.readEncapsulatedPixelData: missing required parameter 'frame'";if(ie.tag!=="x7fe00010")throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to non pixel data tag (expected tag = x7fe00010)";if(ie.encapsulatedPixelData!==!0||ie.hadUndefinedLength!==!0||ie.basicOffsetTable===void 0||ie.fragments===void 0)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to pixel data element that does not have encapsulated pixel data";if(he<0)throw"dicomParser.readEncapsulatedPixelData: parameter 'frame' must be >= 0";return ie.basicOffsetTable.length!==0?ye(Z,ie,he):j(Z,ie,0,ie.fragments.length)}s.default={isStringVr:u,isPrivateTag:f,parsePN:v,parseTM:g,parseDA:m,explicitElementToString:h,explicitDataSetToJS:C,createJPEGBasicOffsetTable:I,parseDicomDataSetExplicit:re,parseDicomDataSetImplicit:ue,readFixedString:y,alloc:De,version:pe,bigEndianByteArrayParser:Te,ByteStream:Re,sharedCopy:Fe,DataSet:O,findAndSetUNElementLength:T,findEndOfEncapsulatedElement:E,findItemDelimitationItemAndSetElementLength:w,littleEndianByteArrayParser:k,parseDicom:N,readDicomElementExplicit:X,readDicomElementImplicit:P,readEncapsulatedImageFrame:ye,readEncapsulatedPixelData:be,readEncapsulatedPixelDataFromFragments:j,readPart10Header:A,readSequenceItemsExplicit:U,readSequenceItemsImplicit:H,readSequenceItem:R,readTag:D,LEI:"1.2.840.10008.1.2",LEE:"1.2.840.10008.1.2.1"}}],i={},r.m=a,r.c=i,r.d=function(o,s,c){r.o(o,s)||Object.defineProperty(o,s,{enumerable:!0,get:c})},r.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},r.t=function(o,s){if(1&s&&(o=r(o)),8&s||4&s&&typeof o=="object"&&o&&o.__esModule)return o;var c=Object.create(null);if(r.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:o}),2&s&&typeof o!="string")for(var l in o)r.d(c,l,(function(u){return o[u]}).bind(null,l));return c},r.n=function(o){var s=o&&o.__esModule?function(){return o.default}:function(){return o};return r.d(s,"a",s),s},r.o=function(o,s){return Object.prototype.hasOwnProperty.call(o,s)},r.p="",r(r.s=1);function r(o){if(i[o])return i[o].exports;var s=i[o]={i:o,l:!1,exports:{}};return a[o].call(s.exports,s,s.exports,r),s.l=!0,s.exports}var a,i})}(j2)),j2.exports}var ka=Tve();function lh(t){const e=t.indexOf(":");let n=t.substring(e+1);const r=n.indexOf("frame=");let a;if(r!==-1){const s=n.substring(r+6);a=parseInt(s,10),n=n.substring(0,r-1)}const i=t.substring(0,e),o=a!==void 0?a-1:void 0;return{scheme:i,url:n,frame:a,pixelDataFrame:o}}let ty={open(t,e){t.open("get",e,!0)},beforeSend(){},beforeProcessing(t){return Promise.resolve(t.response)},imageCreated(){},strict:!1};function CV(t){ty=Object.assign(ty,t)}function uh(){return ty}function OI(t,e,n={},r={}){const a=uh(),i=c=>{if(typeof a.errorInterceptor=="function"){const l=new Error("request failed");l.request=c,l.response=c.response,l.status=c.status,a.errorInterceptor(l)}},o=new XMLHttpRequest,s=new Promise((c,l)=>{a.open(o,t,n,r);const u=a.beforeSend(o,e,n,r);o.responseType="arraybuffer";const f=Object.assign({},n,u);Object.keys(f).forEach(function(v){f[v]!==null&&(v==="Accept"&&t.indexOf("accept=")!==-1||o.setRequestHeader(v,f[v]))}),r.deferred={resolve:c,reject:l},r.url=t,r.imageId=e,o.onloadstart=function(v){a.onloadstart&&a.onloadstart(v,r),Dt(ot,"cornerstoneimageloadstart",{url:t,imageId:e})},o.onloadend=function(v){a.onloadend&&a.onloadend(v,r),Dt(ot,"cornerstoneimageloadend",{url:t,imageId:e})},o.onreadystatechange=function(v){if(a.onreadystatechange){a.onreadystatechange(v,r);return}o.readyState===4&&(o.status===200||o.status===206?a.beforeProcessing(o).then(c).catch(()=>{i(o),l(o)}):(i(o),l(o)))},o.onprogress=function(v){v.loaded,v.lengthComputable&&v.total,a.onprogress&&a.onprogress(v,r)},o.onerror=function(){i(o),l(o)},o.onabort=function(){i(o),l(o)},o.send()});return s.xhr=o,s}function yve(t,e,n){if(n+t.length>e.length)return!1;let r=n;for(let a=0;a<t.length;a++)if(t[a]!==e[r++])return!1;return!0}function Mve(t){const e=new Uint8Array(t.length);for(let n=0,r=t.length;n<r;n++)e[n]=t.charCodeAt(n);return e}function ny(t,e,n){n=n||0;const r=Mve(e);for(let a=n;a<t.length;a++)if(r[0]===t[a]&&yve(r,t,a))return a;return-1}const{ImageQualityStatus:m9}=vs;function o_(t,e,n){n||(n={});const r=new Uint8Array(e),a=!!(n!=null&&n.isPartial);if(t.indexOf("multipart")===-1)return{contentType:t,imageQualityStatus:a?m9.SUBRESOLUTION:m9.FULL_RESOLUTION,pixelData:r};let{tokenIndex:i,responseHeaders:o,boundary:s,multipartContentType:c}=n;if(i||(i=ny(r,`\r
\r
`)),i===-1)throw new Error("invalid response - no multipart mime header");if(!s&&(o=wve(r,0,i).split(`\r
`),s=_ve(o),!s))throw new Error("invalid response - no boundary marker");const l=i+4,u=ny(r,s,l);if(u===-1&&!a)throw new Error("invalid response - terminating boundary not found");return c||(c=Ove(o)),n.tokenIndex=i,n.boundary=s,n.responseHeaders=o,n.multipartContentType=c,n.isPartial=u===-1,{contentType:c,extractDone:!a||u!==-1,tokenIndex:i,responseHeaders:o,boundary:s,multipartContentType:c,pixelData:e.slice(l,u-2)}}function _ve(t){for(let e=0;e<t.length;e++)if(t[e].substr(0,2)==="--")return t[e]}function Ove(t){for(let e=0;e<t.length;e++)if(t[e].substr(0,13)==="Content-Type:")return t[e].substr(13).trim()}function wve(t,e,n){e=e||0,n=n||t.length-e;let r="";for(let a=e;a<e+n;a++)r+=String.fromCharCode(t[a]);return r}const{ImageQualityStatus:h9}=vs;function s_(t,e=!0){return e?t.imageQualityStatus??h9.FULL_RESOLUTION:h9.SUBRESOLUTION}const{ProgressiveIterator:Pve}=Zn;function IV(t,e,n={},r={}){const a=uh(),{retrieveOptions:i={},streamingData:o={}}=r,s=i.minChunkSize||128*1024,c=u=>{if(typeof a.errorInterceptor=="function"){const f=new Error("request failed");a.errorInterceptor(f)}},l=new Pve("streamRequest");return l.generate(async(u,f)=>{var d,m;const v=(d=a.beforeSend)==null?void 0:d.call(a,null,t,n,{}),g=Object.assign({},n,v);Object.keys(g).forEach(function(h){g[h]===null&&(g[h]=void 0),h==="Accept"&&t.indexOf("accept=")!==-1&&(g[h]=void 0)});try{const h=await fetch(t,{headers:g,signal:void 0});if(h.status!==200)throw new Error(`Couldn't retrieve ${t} got status ${h.status}`);const C=h.body.getReader(),p=h.headers,S=p.get("content-type"),I=Number(p.get("Content-Length"));let D=!1,E=o.encodedData,T=o.lastSize||0;for(o.isPartial=!0;!D;){const{done:y,value:M}=await C.read();if(E=Ave(E,M),!E){if(D)throw new Error(`Done but no image frame available ${e}`);continue}if(D=y||E.byteLength===I,!D&&E.length<T+s)continue;T=E.length,o.isPartial=!y;const _=o_(S,E,o),O=s_(i,D),w={url:t,imageId:e,..._,percentComplete:y?100:((m=_.pixelData)==null?void 0:m.length)*100/I,imageQualityStatus:O,done:D};u.add(w,D)}}catch(h){c(),console.error(h),f(h)}}),l.getNextPromise()}function Ave(t,e){if(!t)return e;if(!e)return t;const n=new Uint8Array(t.length+e.length);return n.set(t,0),n.set(e,t.length),n}const xve={xhrRequest:OI,streamRequest:IV,setOptions:CV,getOptions:uh};function Rve(t){const e=t.elements.x7fe00010.fragments,n=t.byteArray.length;for(const r of e){const{position:a,length:i}=r;i>n-a&&(console.log(`Truncated fragment, changing fragment length from ${r.length} to ${n-a}`),r.length=n-a)}return t}function bve(t){let e=ka.parseDicom(t,{untilTag:"x7fe00010"});e.elements.x7fe00010||console.warn("Pixel data not found!");let n;try{n=ka.parseDicom(t)}catch(r){console.error(r),console.log("pixel data dataset:",r.dataSet),n=r.dataSet}return e.elements.x7fe00010=n.elements.x7fe00010,e=Rve(e),e}async function DV(t,e,n){const r=bve(t),{uri:a,imageId:i,fileTotalLength:o}=n;return r.fetchMore=async function(s){const c=Object.assign({uri:a,imageId:i,fetchedLength:t.length,lengthToFetch:o-t.length},s),{fetchedLength:l,lengthToFetch:u}=c,{arrayBuffer:f}=await e(a,i,{byteRange:`${l}-${l+u}`}),v=new Uint8Array(f),g=new Uint8Array(r.byteArray.length+v.length);return g.set(r.byteArray),g.set(v,r.byteArray.length),DV(g,e,n)},r}function Nve(t,e){if(!t)return;const{NumberOfFrames:n,PerFrameFunctionalGroupsSequence:r,SharedFunctionalGroupsSequence:a}=TV(t);if(r||n>1){const{shared:i,perFrame:o}=EV(r,a,e);return{NumberOfFrames:n,PerFrameFunctionalInformation:o,SharedFunctionalInformation:i}}return{NumberOfFrames:n}}function EV(t,e,n){const r={};(e?Object.values(e.items[0].dataSet.elements):[]).map(i=>r[i.tag]=i);const a={};return(t?Object.values(t.items[n-1].dataSet.elements):[]).map(i=>a[i.tag]=i),{shared:r,perFrame:a}}function TV(t){if(!t)return;const{elements:e,...n}=t,{x52009230:r,x52009229:a,...i}=e;return{NumberOfFrames:t.intString("x00280008"),PerFrameFunctionalGroupsSequence:r,SharedFunctionalGroupsSequence:a,otherElements:i,otherAttributtes:n}}function Lve(t,e){if(!e)return;const{NumberOfFrames:n,PerFrameFunctionalGroupsSequence:r,SharedFunctionalGroupsSequence:a,otherElements:i}=TV(e);if(r||n>1){const{shared:o,perFrame:s}=EV(r,a,t),c={elements:{...i,...o,...s}},l=Object.create(e);return Object.assign(l,c)}return e}let hi={};const Uve=()=>{hi={}};function c_(t){if(hi[t])return hi[t]}function Fve(t){const e=c_(t);return yV(e)}function yV(t){if(!t)return!1;const e=t.intString("x00280008");return e&&e>1}function Vve(t){return t.indexOf("&frame=")}function kve(t){const e=Vve(t),n=e===-1?t:t.slice(0,e),r=parseInt(t.slice(e+7),10)||1;let a;return hi[n]?a=hi[n].dataSet:a=void 0,{dataSet:a,frame:r}}function Gve(t){const e=[],n=c_(t);if(yV(n)){const r=n.intString("x00280008");for(let a=1;a<=r;a++)e.push(`${t}&frame=${a}`)}else e.push(t);return e}const MV={_get:c_,generateMultiframeWADOURIs:Gve,retrieveMultiframeDataset:kve,isMultiframeDataset:Fve};let dv=0,Hu={};function Bve(t){return hi[t]!==void 0}function Wve(t){let e;if(t.includes("&frame=")){const{frame:n,dataSet:r}=MV.retrieveMultiframeDataset(t);e=Lve(n,r)}else hi[t]&&(e=hi[t].dataSet);return e}function Hve(t,e){const n=hi[t];if(!n){console.error(`No loaded dataSet for uri ${t}`);return}dv-=n.dataSet.byteArray.length,n.dataSet=e,dv+=e.byteArray.length,Dt(ot,"datasetscachechanged",{uri:t,action:"updated",cacheInfo:wI()})}function $ve(t,e=OI,n){if(hi[t])return new Promise(i=>{hi[t].cacheCount++,i(hi[t].dataSet)});if(Hu[t])return Hu[t].cacheCount++,Hu[t];const r=e(t,n),a=new Promise((i,o)=>{r.then(async function(s){const c={isPartialContent:!1,fileTotalLength:null};if(!(s instanceof ArrayBuffer)){if(!s.arrayBuffer)return o(new Error("If not returning ArrayBuffer, must return object with `arrayBuffer` parameter"));c.isPartialContent=s.flags.isPartialContent,c.fileTotalLength=s.flags.fileTotalLength,s=s.arrayBuffer}const l=new Uint8Array(s);let u;try{c.isPartialContent?u=await DV(l,e,{uri:t,imageId:n,fileTotalLength:c.fileTotalLength}):u=ka.parseDicom(l)}catch(f){return o(f)}hi[t]={dataSet:u,cacheCount:a.cacheCount},dv+=u.byteArray.length,i(u),Dt(ot,"datasetscachechanged",{uri:t,action:"loaded",cacheInfo:wI()})},o).then(()=>{delete Hu[t]},()=>{delete Hu[t]})});return a.cacheCount=1,Hu[t]=a,a}function zve(t){hi[t]&&(hi[t].cacheCount--,hi[t].cacheCount===0&&(dv-=hi[t].dataSet.byteArray.length,delete hi[t],Dt(ot,"datasetscachechanged",{uri:t,action:"unloaded",cacheInfo:wI()})))}function wI(){return{cacheSizeInBytes:dv,numberOfDataSetsCached:Object.keys(hi).length}}function qve(){Uve(),Hu={},dv=0}const jf={isLoaded:Bve,load:$ve,unload:zve,getInfo:wI,purge:qve,get:Wve,update:Hve};function jve(t){const e=[];for(let n=0;n<=30;n+=2){let r=`x60${n.toString(16)}`;r.length===4&&(r=`x600${n.toString(16)}`);const a=t.elements[`${r}3000`];if(!a)continue;const i=[];for(let o=0;o<a.length;o++)for(let s=0;s<8;s++){const c=t.byteArray[a.dataOffset+o];i[o*8+s]=c>>s&1}e.push({rows:t.uint16(`${r}0010`),columns:t.uint16(`${r}0011`),type:t.string(`${r}0040`),x:t.int16(`${r}0050`,1)-1,y:t.int16(`${r}0050`,0)-1,pixelData:i,description:t.string(`${r}0022`),label:t.string(`${r}1500`),roiArea:t.string(`${r}1301`),roiMean:t.string(`${r}1302`),roiStandardDeviation:t.string(`${r}1303`)})}return{overlays:e}}function Bv(t){return t==="RECON TOMO"||t==="RECON GATED TOMO"}function l_(t,e){const n=t.string("x00080008");if(n){const r=n.split("\\");if(r.length>e)return r[e]}}function Qve(t){let e;const n=t.string("x00080060");if(n!=null&&n.includes("NM")){const r=l_(t,2);r&&Bv(r)&&t.elements.x00540022&&(e=s0(t.elements.x00540022.items[0].dataSet,"x00200037",6))}return e}function Kve(t){let e;const n=t.string("x00080060");if(n!=null&&n.includes("NM")){const r=l_(t,2);r&&Bv(r)&&t.elements.x00540022&&(e=s0(t.elements.x00540022.items[0].dataSet,"x00200032",3))}return e}function p9(t){let e=s0(t,"x00200037",6);return!e&&t.elements.x00209116&&(e=s0(t.elements.x00209116.items[0].dataSet,"x00200037",6)),e||(e=Qve(t)),e}function S9(t){let e=s0(t,"x00200032",3);return!e&&t.elements.x00209113&&(e=s0(t.elements.x00209113.items[0].dataSet,"x00200032",3)),e||(e=Kve(t)),e}function C9(t){let e=s0(t,"x00280030",2);return!e&&t.elements.x00289110&&(e=s0(t.elements.x00289110.items[0].dataSet,"x00280030",2)),e}function I9(t){let e;return t.elements.x00180050?e=t.floatString("x00180050"):t.elements.x00289110&&t.elements.x00289110.items.length&&t.elements.x00289110.items[0].dataSet.elements.x00180050&&(e=t.elements.x00289110.items[0].dataSet.floatString("x00180050")),e}function _V(t,e,n){const r={};for(const a of n)try{const i=e(a,t);if(i){const o={};for(const s in i)if(s in i){const c=Xve(s);o[c]=i[s]}Object.assign(r,o)}}catch(i){console.error(`Error retrieving ${a} data:`,i)}return r}const Xve=t=>t.charAt(0).toUpperCase()+t.slice(1),OV=["multiframeModule","generalSeriesModule","patientStudyModule","imagePlaneModule","nmMultiframeGeometryModule","imagePixelModule","modalityLutModule","voiLutModule","sopCommonModule","petIsotopeModule","overlayPlaneModule","transferSyntax","petSeriesModule","petImageModule"];function D9(t){const e=t.elements.x00186011;return!e||!e.items?[]:e.items.map(r=>{const a=r.dataSet.double("x0018602c"),i=r.dataSet.double("x0018602e"),o=r.dataSet.uint16("x00186024"),s=r.dataSet.uint16("x00186026"),c=r.dataSet.uint16("x0018601a"),l=r.dataSet.uint16("x0018601e"),u=r.dataSet.uint16("x00186018"),f=r.dataSet.uint16("x0018601c"),v=r.dataSet.int32("x00186020")||null,g=r.dataSet.int32("x00186022")||null,d=r.dataSet.uint16("x0018602a"),m=r.dataSet.uint16("x00186028"),h=r.dataSet.uint16("x00186012"),C=r.dataSet.uint16("x00186014"),p=r.dataSet.uint16("x00186016"),S=r.dataSet.uint16("x00186030");return{regionLocationMinY0:c,regionLocationMaxY1:l,regionLocationMinX0:u,regionLocationMaxX1:f,referencePixelX0:v,referencePixelY0:g,physicalDeltaX:a,physicalDeltaY:i,physicalUnitsXDirection:o,physicalUnitsYDirection:s,referencePhysicalPixelValueY:d,referencePhysicalPixelValueX:m,regionSpatialFormat:h,regionDataType:C,regionFlags:p,transducerFrequency:S}})}function u_(t,e){const{MetadataModules:n}=vs;if(Array.isArray(e))return;const r=lh(e);if(t===n.MULTIFRAME){const o=MV.retrieveMultiframeDataset(r.url);return o.dataSet?Nve(o.dataSet,o.frame):void 0}let a=r.url;r.frame&&(a=`${a}&frame=${r.frame}`);const i=jf.get(a);if(i)return wV(t,e,i)}function wV(t,e,n){const{MetadataModules:r}=vs;if(t===r.GENERAL_STUDY)return{studyDescription:n.string("x00081030"),studyDate:ka.parseDA(n.string("x00080020")),studyTime:ka.parseTM(n.string("x00080030")||""),accessionNumber:n.string("x00080050")};if(t===r.GENERAL_SERIES)return{modality:n.string("x00080060"),seriesInstanceUID:n.string("x0020000e"),seriesNumber:n.intString("x00200011"),studyInstanceUID:n.string("x0020000d"),seriesDate:ka.parseDA(n.string("x00080021")),seriesTime:ka.parseTM(n.string("x00080031")||""),acquisitionDate:ka.parseDA(n.string("x00080022")),acquisitionTime:ka.parseTM(n.string("x00080032")||"")};if(t===r.GENERAL_IMAGE)return{sopInstanceUID:n.string("x00080018"),instanceNumber:n.intString("x00200013"),lossyImageCompression:n.string("x00282110"),lossyImageCompressionRatio:n.floatString("x00282112"),lossyImageCompressionMethod:n.string("x00282114")};if(t===r.PATIENT)return{patientID:n.string("x00100020"),patientName:n.string("x00100010")};if(t===r.PATIENT_STUDY)return{patientAge:n.intString("x00101010"),patientSize:n.floatString("x00101020"),patientSex:n.string("x00100040"),patientWeight:n.floatString("x00101030")};if(t===r.NM_MULTIFRAME_GEOMETRY){const a=n.string("x00080060"),i=l_(n,2);return{modality:a,imageType:n.string("x00080008"),imageSubType:i,imageOrientationPatient:p9(n),imagePositionPatient:S9(n),sliceThickness:I9(n),pixelSpacing:C9(n),numberOfFrames:n.uint16("x00280008"),isNMReconstructable:Bv(i)&&a.includes("NM")}}if(t===r.IMAGE_PLANE){const a=p9(n),i=S9(n),o=C9(n),s=I9(n);let c=null,l=null;o&&(l=o[0],c=o[1]);let u=null,f=null;return a&&(u=[parseFloat(a[0]),parseFloat(a[1]),parseFloat(a[2])],f=[parseFloat(a[3]),parseFloat(a[4]),parseFloat(a[5])]),{frameOfReferenceUID:n.string("x00200052"),rows:n.uint16("x00280010"),columns:n.uint16("x00280011"),imageOrientationPatient:a,rowCosines:u,columnCosines:f,imagePositionPatient:i,sliceThickness:s,sliceLocation:n.floatString("x00201041"),pixelSpacing:o,rowPixelSpacing:l,columnPixelSpacing:c}}if(t===r.CINE)return{frameTime:n.floatString("x00181063")};if(t===r.IMAGE_PIXEL)return pV(n);if(t===r.VOI_LUT){const a=SV(n);return{windowCenter:s0(n,"x00281050",1),windowWidth:s0(n,"x00281051",1),voiLUTSequence:ey(a,n.elements.x00283010),voiLUTFunction:n.string("x00281056")}}if(t===r.MODALITY_LUT)return{rescaleIntercept:n.floatString("x00281052"),rescaleSlope:n.floatString("x00281053"),rescaleType:n.string("x00281054"),modalityLUTSequence:ey(n.uint16("x00280103"),n.elements.x00283000)};if(t===r.SOP_COMMON)return{sopClassUID:n.string("x00080016"),sopInstanceUID:n.string("x00080018")};if(t===r.PET_ISOTOPE){const a=n.elements.x00540016;if(a===void 0)return;const i=a.items[0].dataSet;return{radiopharmaceuticalInfo:{radiopharmaceuticalStartTime:ka.parseTM(i.string("x00181072")||""),radionuclideTotalDose:i.floatString("x00181074"),radionuclideHalfLife:i.floatString("x00181075")}}}if(t===r.OVERLAY_PLANE)return jve(n);if(t==="transferSyntax"){let a;try{a=n.string("x00020010")}catch{}return{transferSyntaxUID:a}}if(t===r.PET_SERIES)return{correctedImage:n.string("x00280051"),units:n.string("x00541001"),decayCorrection:n.string("x00541102")};if(t===r.PET_IMAGE)return{frameReferenceTime:n.floatString(n.string("x00541300")||""),actualFrameDuration:n.intString(n.string("x00181242"))};if(t===r.ULTRASOUND_ENHANCED_REGION)return D9(n);if(t===r.CALIBRATION&&n.string("x00080060")==="US")return{sequenceOfUltrasoundRegions:D9(n)};if(t==="instance")return _V(e,u_,OV)}let PI=[];function Yve(t){return`dicomfile:${PI.push(t)-1}`}function Zve(t){return PI[t]}function Jve(t){PI[t]=void 0}function ege(){PI=[]}const PV={add:Yve,get:Zve,remove:Jve,purge:ege};function tge(t){const e=t.intString("x00280008"),n=t.elements.x7fe00010;return e!==n.fragments.length}function AV(t,e){if(t.elements.x7fe00010&&t.elements.x7fe00010.basicOffsetTable.length)return ka.readEncapsulatedImageFrame(t,t.elements.x7fe00010,e);if(tge(t)){const l=ka.createJPEGBasicOffsetTable(t,t.elements.x7fe00010);return ka.readEncapsulatedImageFrame(t,t.elements.x7fe00010,e,l)}const n=t.elements.x7fe00010.fragments,r=new ka.ByteStream(t.byteArrayParser,t.byteArray,t.elements.x7fe00010.dataOffset),a=ka.readSequenceItem(r);if(a.tag!=="xfffee000")throw"dicomParser.readEncapsulatedPixelData: missing basic offset table xfffee000";r.seek(a.length);const i=r.position;if(e+1>n.length)throw"dicomParser.readEncapsulatedPixelData: frame exceeds number of fragments";const s=i+n[e].offset+8,c=n[e].length;return new Uint8Array(r.byteArray.buffer.slice(r.byteArray.byteOffset+s,r.byteArray.byteOffset+s+c))}function nge(t,e){return t&1<<e}function xV(t,e,n){const r=new Uint8Array(n);for(let a=0;a<n;a++){const i=Math.floor(a/8),o=t[i+e],s=a%8;r[a]=nge(o,s)?1:0}return r}function RV(t,e){const n=t.elements.x7fe00010||t.elements.x7fe00008,r=t.uint16("x00280100"),a=t.uint16("x00280010"),i=t.uint16("x00280011");let o=t.uint16("x00280002");t.string("x00280004")==="YBR_FULL_422"&&(o=2,console.warn(`Using SamplesPerPixel of 2 for YBR_FULL_422 photometric interpretation.
      See http://dicom.nema.org/medical/dicom/current/output/chtml/part03/sect_C.7.6.3.html for more information.`));const c=n.dataOffset,l=a*i*o;let u;if(r===8){if(u=c+e*l,u>=t.byteArray.length)throw new Error("frame exceeds size of pixelData");return new Uint8Array(t.byteArray.buffer.slice(u,u+l))}else if(r===16){if(u=c+e*l*2,u>=t.byteArray.length)throw new Error("frame exceeds size of pixelData");return new Uint8Array(t.byteArray.buffer.slice(u,u+l*2))}else if(r===1){if(u=c+e*l*.125,u>=t.byteArray.length)throw new Error("frame exceeds size of pixelData");return xV(t.byteArray,u,l)}else if(r===32){if(u=c+e*l*4,u>=t.byteArray.length)throw new Error("frame exceeds size of pixelData");return new Uint8Array(t.byteArray.buffer.slice(u,u+l*4))}throw new Error("unsupported pixel format")}function bV(t){const e=lh(t),n=parseInt(e.url,10),r=PV.get(n);return new Promise((a,i)=>{const o=new FileReader;o.onload=s=>{const c=s.target.result;a(c)},o.onerror=i,o.readAsArrayBuffer(r)})}function f_(t,e=0){const n=t.elements.x7fe00010||t.elements.x7fe00008;return n?n.encapsulatedPixelData?AV(t,e):RV(t,e):null}function AI(t){let e=t[0],n=t[0],r;const a=t.length;for(let i=1;i<a;i++)r=t[i],e=Math.min(e,r),n=Math.max(n,r);return{min:e,max:n}}function v_(t,e){let n;return Number.isInteger(t)&&Number.isInteger(e)&&(t>=0?e<=255?n=Uint8Array:e<=65535&&(n=Uint16Array):t>=-128&&e<=127?n=Int8Array:t>=-32768&&e<=32767&&(n=Int16Array)),n||Float32Array}function rge(t,e,n){return v_(t,e)===n}function _E(t,e,n){t.planarConfiguration===0?vV(t.pixelData,e,n):gV(t.pixelData,e,n)}function age(t,e,n){t.planarConfiguration===0?dV(t.pixelData,e,n):mV(t.pixelData,e,n)}function NV(t,e,n){if(t.photometricInterpretation==="RGB")_E(t,e,n);else if(t.photometricInterpretation==="YBR_RCT")_E(t,e,n);else if(t.photometricInterpretation==="YBR_ICT")_E(t,e,n);else if(t.photometricInterpretation==="PALETTE COLOR")hV(t,e,n);else if(t.photometricInterpretation==="YBR_FULL_422")pve(t.pixelData,e,n);else if(t.photometricInterpretation==="YBR_FULL")age(t,e,n);else throw new Error(`No color space conversion for photometric interpretation ${t.photometricInterpretation}`)}function ige(t){if(t===void 0)return!1;const{rows:e,columns:n,photometricInterpretation:r,pixelDataLength:a,planarConfiguration:i}=t;return a===4*n*e||r==="PALETTE COLOR"?!1:r.endsWith("420")?a===(3*Math.ceil(n/2)+Math.floor(n/2))*e:r.endsWith("422")?a===(3*Math.ceil(n/2)+Math.floor(n/2))*Math.ceil(e/2)+Math.floor(e/2)*n:r!=="RGB"||i===1}function oge(t){return sge(String.fromCharCode.apply(null,Array.prototype.slice.apply(new Uint8Array(t))))}function sge(t){let e;try{return decodeURIComponent(escape(t))}catch(n){if(e=n,e instanceof URIError)return t;throw e}}function LV(t,e,n){const r=new Date().getTime(),a=new Blob([e],{type:"image/jpeg"});return new Promise((i,o)=>{const s=new FileReader;s.readAsBinaryString===void 0?s.readAsArrayBuffer(a):s.readAsBinaryString(a),s.onload=function(){const c=new Image;c.onload=function(){n.height=c.height,n.width=c.width,t.rows=c.height,t.columns=c.width;const l=n.getContext("2d");l.drawImage(this,0,0);const u=l.getImageData(0,0,c.width,c.height),f=new Date().getTime();t.pixelData=new Uint8Array(u.data.buffer),t.imageData=u,t.decodeTimeInMS=f-r;const v=AI(t.pixelData);t.smallestPixelValue=v.min,t.largestPixelValue=v.max,t.pixelDataLength=t.pixelData.length,i(t)},c.onerror=function(l){o(l)},s.readAsBinaryString===void 0?c.src=`data:image/jpeg;base64,${window.btoa(oge(s.result))}`:c.src=`data:image/jpeg;base64,${window.btoa(s.result)}`},s.onerror=c=>{o(c)}})}function Ro(t,e,n,r,a){const i={...r};delete i.loader,delete i.streamingData;const o=Zc(),s=i.priority||void 0;return i.transferPixelData&&n.buffer,o.executeTask("dicomImageLoader","decodeTask",{imageFrame:t,transferSyntax:e,pixelData:n,options:i,decodeConfig:a},{priority:s,requestType:i==null?void 0:i.requestType})}function cge(t,e,n,r,a={},i){switch(e){case"1.2.840.10008.1.2":return Ro(t,e,n,a,i);case"1.2.840.10008.1.2.1":return Ro(t,e,n,a,i);case"1.2.840.10008.1.2.2":return Ro(t,e,n,a,i);case"1.2.840.10008.1.2.1.99":return Ro(t,e,n,a,i);case"1.2.840.10008.1.2.5":return Ro(t,e,n,a,i);case"1.2.840.10008.1.2.4.50":return t.bitsAllocated===8&&(t.samplesPerPixel===3||t.samplesPerPixel===4)?LV(t,n,r):Ro(t,e,n,a,i);case"1.2.840.10008.1.2.4.51":return Ro(t,e,n,a,i);case"1.2.840.10008.1.2.4.57":return Ro(t,e,n,a,i);case"1.2.840.10008.1.2.4.70":return Ro(t,e,n,a,i);case"1.2.840.10008.1.2.4.80":return Ro(t,e,n,a,i);case"1.2.840.10008.1.2.4.81":return Ro(t,e,n,a,i);case"1.2.840.10008.1.2.4.90":return Ro(t,e,n,a,i);case"1.2.840.10008.1.2.4.91":return Ro(t,e,n,a,i);case"3.2.840.10008.1.2.4.96":case"1.2.840.10008.1.2.4.201":case"1.2.840.10008.1.2.4.202":case"1.2.840.10008.1.2.4.203":return Ro(t,e,n,a,i)}return Promise.reject(new Error(`No decoder for transfer syntax ${e}`))}function UV(t){const e=Lt("imagePixelModule",t);return{samplesPerPixel:e.samplesPerPixel,photometricInterpretation:e.photometricInterpretation,planarConfiguration:e.planarConfiguration,rows:e.rows,columns:e.columns,bitsAllocated:e.bitsAllocated,bitsStored:e.bitsStored,pixelRepresentation:e.pixelRepresentation,smallestPixelValue:e.smallestPixelValue,largestPixelValue:e.largestPixelValue,redPaletteColorLookupTableDescriptor:e.redPaletteColorLookupTableDescriptor,greenPaletteColorLookupTableDescriptor:e.greenPaletteColorLookupTableDescriptor,bluePaletteColorLookupTableDescriptor:e.bluePaletteColorLookupTableDescriptor,redPaletteColorLookupTableData:e.redPaletteColorLookupTableData,greenPaletteColorLookupTableData:e.greenPaletteColorLookupTableData,bluePaletteColorLookupTableData:e.bluePaletteColorLookupTableData,pixelData:void 0,imageId:t}}function lge(t,e){const n=t.get("modalityLutModule",e)||{},r=t.get("generalSeriesModule",e)||{},{modality:a}=r,i={rescaleSlope:n.rescaleSlope,rescaleIntercept:n.rescaleIntercept,modality:a},o=t.get("scalingModule",e)||{};return{...i,...a==="PT"&&{suvbw:o.suvbw}}}function g_(t){return t==="RGB"||t==="PALETTE COLOR"||t==="YBR_FULL"||t==="YBR_FULL_422"||t==="YBR_PARTIAL_422"||t==="YBR_PARTIAL_420"||t==="YBR_RCT"||t==="YBR_ICT"}let E9="";function uge(t){return t!=="1.2.840.10008.5.1.4.1.1.12.1"&&t!=="1.2.840.10008.5.1.4.1.1.12.2.1"}function fge(t){const e=t.smallestPixelValue,n=t.largestPixelValue,r=v_(e,n);if(r){const a=new r(t.pixelData);t.pixelData=a}else throw new Error("Could not apply a typed array to the pixel data")}function vge(t,e){const n=t.length/4;let r=0,a=0;for(let i=0;i<n;i++)e[a++]=t[r++],e[a++]=t[r++],e[a++]=t[r++],r++;return e}function xI(t,e,n,r={}){const a=r.useRGBA;if(r.preScale={enabled:r.preScale&&r.preScale.enabled!==void 0?r.preScale.enabled:!0},!(e!=null&&e.length))return Promise.reject(new Error("The pixel data is missing"));const{MetadataModules:i}=vs,o=document.createElement("canvas"),s=UV(t);if(s.decodeLevel=r.decodeLevel,r.allowFloatRendering=hI(),r.preScale.enabled){const f=lge(GL,t);r.preScale={...r.preScale,scalingParameters:f}}const{decodeConfig:c}=uh();Object.keys(s).forEach(f=>{(typeof s[f]=="function"||s[f]instanceof Promise)&&delete s[f]});const l=cge(s,n,e,o,r,c),u=g_(s.photometricInterpretation);return new Promise((f,v)=>{l.then(function(g){let d=!1;if(r.targetBuffer&&r.targetBuffer.type&&!u){const{arrayBuffer:y,type:M,offset:_=0,length:O}=r.targetBuffer,w=g.pixelDataLength,x=_,P=O??w-x,R={Uint8Array,Uint16Array,Int16Array,Float32Array};if(P!==g.pixelDataLength)throw new Error(`target array for image does not have the same length (${P}) as the decoded image length (${g.pixelDataLength}).`);const L=R[M],H=y?new L(y,x,P):new L(g.pixelData);if(P!==g.pixelDataLength)throw new Error("target array for image does not have the same length as the decoded image length.");g.pixelData=H,d=!0}d||fge(g);const m=Lt(i.IMAGE_PLANE,t)||{},h=Lt(i.VOI_LUT,t)||{},C=Lt(i.MODALITY_LUT,t)||{},p=Lt(i.SOP_COMMON,t)||{},S=Lt(i.CALIBRATION,t)||{},{rows:I,columns:D}=g;if(u){if(ige(g)){o.height=g.rows,o.width=g.columns;let _=o.getContext("2d").createImageData(g.columns,g.rows);a||(_={..._,data:new Uint8ClampedArray(3*g.columns*g.rows)}),NV(g,_.data,a),g.imageData=_,g.pixelData=_.data,g.pixelDataLength=_.data.length}else if(!a&&g.pixelDataLength===4*I*D){const M=new Uint8Array(g.pixelData.length/4*3);g.pixelData=vge(g.pixelData,M),g.pixelDataLength=g.pixelData.length}const y=AI(g.pixelData);g.smallestPixelValue=y.min,g.largestPixelValue=y.max}const E=yo.createImageVoxelManager({scalarData:g.pixelData,width:g.columns,height:g.rows,numberOfComponents:g.samplesPerPixel}),T={imageId:t,dataType:g.pixelData.constructor.name,color:u,calibration:S,columnPixelSpacing:m.columnPixelSpacing,columns:g.columns,height:g.rows,preScale:g.preScale,intercept:C.rescaleIntercept?C.rescaleIntercept:0,slope:C.rescaleSlope?C.rescaleSlope:1,invert:g.photometricInterpretation==="MONOCHROME1",minPixelValue:g.smallestPixelValue,maxPixelValue:g.largestPixelValue,rowPixelSpacing:m.rowPixelSpacing,rows:g.rows,sizeInBytes:g.pixelData.byteLength,width:g.columns,windowCenter:h.windowCenter?h.windowCenter[0]:void 0,windowWidth:h.windowWidth?h.windowWidth[0]:void 0,voiLUTFunction:h.voiLUTFunction?h.voiLUTFunction:void 0,decodeTimeInMS:g.decodeTimeInMS,floatPixelData:void 0,imageFrame:g,voxelManager:E,rgba:u&&a,getPixelData:()=>g.pixelData,getCanvas:void 0,numberOfComponents:g.samplesPerPixel};if(T.color&&(T.getCanvas=function(){if(E9===t)return o;const y=T.columns,M=T.rows;o.height=M,o.width=y;const _=o.getContext("2d"),O=_.createImageData(y,M),w=g.pixelData;if(w.length===y*M*4)for(let x=0;x<w.length;x++)O.data[x]=w[x];else if(w.length===y*M*3){let x=0;for(let P=0;P<w.length;P+=3)O.data[x++]=w[P],O.data[x++]=w[P+1],O.data[x++]=w[P+2],O.data[x++]=255}return g.pixelData=O.data,g.pixelDataLength=O.data.length,g.imageData=O,_.putImageData(g.imageData,0,0),E9=t,o}),C.modalityLUTSequence&&C.modalityLUTSequence.length>0&&uge(p.sopClassUID)&&(T.modalityLUT=C.modalityLUTSequence[0]),h.voiLUTSequence&&h.voiLUTSequence.length>0&&(T.voiLUT=h.voiLUTSequence[0]),T.color&&(T.windowWidth=256,T.windowCenter=128),T.windowCenter===void 0||T.windowWidth===void 0){const y=T.imageFrame.smallestPixelValue,M=T.imageFrame.largestPixelValue;T.windowWidth=M-y,T.windowCenter=(M+y)/2}f(T)},v)})}function gge(t,e){t.decache=function(){const n=lh(e);jf.unload(n.url)}}function FV(t,e,n=0,r,a,i){const o=new Date().getTime(),s={cancelFn:void 0,promise:void 0};return s.promise=new Promise((c,l)=>{t.then(u=>{const f=f_(u,n),v=u.string("x00020010"),g=new Date().getTime(),d=xI(e,f,v,a);gge(s,e),d.then(m=>{m=m,m.data=u,m.sharedCacheKey=r;const h=new Date().getTime();m.loadTimeInMS=g-o,m.totalTimeInMS=h-o,i!==void 0&&i.imageDoneCallback!==void 0&&i.imageDoneCallback(m),c(m)},function(m){l({error:m,dataSet:u})})},function(u){l({error:u})})}),s}function dge(t,e,n=0,r,a){const i=new Date().getTime();return{promise:new Promise((s,c)=>{const l=new Date().getTime();let u;try{const f=f_(t,n),v=t.string("x00020010");u=xI(e,f,v,a)}catch(f){c({error:f,dataSet:t});return}u.then(f=>{f=f,f.data=t,f.sharedCacheKey=r;const v=new Date().getTime();f.loadTimeInMS=l-i,f.totalTimeInMS=v-i,s(f)},c)}),cancelFn:void 0}}function VV(t){if(t==="dicomweb"||t==="wadouri")return OI;if(t==="dicomfile")return bV}function Q2(t,e={}){const n=lh(t);e=Object.assign({},e),delete e.loader;const r=VV(n.scheme);if(jf.isLoaded(n.url)){const i=jf.get(n.url,r,t);return dge(i,t,n.pixelDataFrame,n.url,e)}const a=jf.load(n.url,r,t);return FV(a,t,n.frame,n.url,e)}function kV(){Wl("dicomweb",Q2),Wl("wadouri",Q2),Wl("dicomfile",Q2),qc(u_)}const mge={getImagePixelModule:pV,getLUTs:ey,getModalityLUTOutputPixelRepresentation:SV,getNumberValues:s0,metaDataProvider:u_,metadataForDataset:wV},hge={metaData:mge,dataSetCacheManager:jf,fileManager:PV,getEncapsulatedImageFrame:AV,getUncompressedImageFrame:RV,loadFileRequest:bV,loadImageFromPromise:FV,getLoaderForScheme:VV,getPixelData:f_,loadImage:Q2,parseImageId:lh,unpackBinaryFrame:xV,register:kV};function Pn(t,e,n){return e=e||0,!t||!t.Value||Array.isArray(t.Value)&&t.Value.length<=e?n:t.Value[e]}function pge(t,e,n){const r=Pn(t,e,n);if(r!==void 0)return parseFloat(String(r))}function Ir(t,e){const n=Pn(t,e);if(n!==void 0)return parseFloat(n)}function Qi(t,e){if(!t||!t.Value||!Array.isArray(t.Value)||e&&t.Value.length<e)return;const n=[];for(let r=0;r<t.Value.length;r++)n.push(parseFloat(t.Value[r]));return n}function Sge(t){const e=[];for(let n=0;n<=30;n+=2){let r=`x60${n.toString(16)}`;r.length===4&&(r=`x600${n.toString(16)}`);const a=Pn(t[`${r}3000`]);if(!a)continue;const i=[];for(let o=0;o<a.length;o++)for(let s=0;s<8;s++){const c=t.Value[a.dataOffset+o];i[o*8+s]=c>>s&1}e.push({rows:Ir(t[`${r}0010`]),columns:Ir(t[`${r}0011`]),type:Pn(t[`${r}0040`]),x:Ir(t[`${r}0050`],1)-1,y:Ir(t[`${r}0050`],0)-1,pixelData:i,description:Pn(t[`${r}0022`]),label:Pn(t[`${r}1500`]),roiArea:Pn(t[`${r}1301`]),roiMean:Pn(t[`${r}1302`]),roiStandardDeviation:Pn(t[`${r}1303`])})}return{overlays:e}}function RI(t){const e=t.indexOf(":");return t.substring(e+1)}function Qf(t,e=!0){return t&&t.Value?t.Value[0]&&e?t.Value[0]:t.Value:t}function GV(t,e,n){const r=(e?Object.values(e[0]):[]).map(i=>i[0]).filter(i=>i!==void 0&&typeof i=="object"),a=(t?Object.values(t[n-1]):[]).map(i=>i.Value[0]).filter(i=>i!==void 0&&typeof i=="object");return{shared:r,perFrame:a}}function BV(t){let{52009230:e,52009229:n,"00280008":r,...a}=t;return e=Qf(e,!1),n=Qf(n,!1),r=Qf(r),{PerFrameFunctionalGroupsSequence:e,SharedFunctionalGroupsSequence:n,NumberOfFrames:r,rest:a}}function Cge(t,e){const{PerFrameFunctionalGroupsSequence:n,SharedFunctionalGroupsSequence:r,NumberOfFrames:a,rest:i}=BV(e);if(n||a>1){const{shared:o,perFrame:s}=GV(n,r,t),c=Object.assign(e,{frameNumber:t});return[...o,...s].forEach(l=>{Object.entries(l).forEach(([u,f])=>{c[u]=f})}),Object.assign(i,{"00280008":a},c)}return e}let fh=[],cC={};function WV(t){const e=t.indexOf("/frames/")+8,n=t.slice(0,e),r=parseInt(t.slice(e),10);return{metadata:fh[`${n}1`],frame:r}}function Ige(t){const e=RI(t);return WV(e)}function Dge(t){const e=Pn(t["00280008"]);return e&&e>1}function Ege(t,e){const n=RI(t);Object.defineProperty(e,"isMultiframe",{value:Dge(e),enumerable:!1}),fh[n]=e}function Tge(t){const e=RI(t),n=fh[e];if(n&&!(n!=null&&n.isMultiframe))return n;const r=cC[e];if(r)return r;const a=WV(e);if(!a||!a.metadata)return;const{metadata:i,frame:o}=a;if(i){const s=Cge(o,i);return cC[e]=s,s}}function yge(t){const e=RI(t);fh[e]=void 0,cC[e]=void 0}function Mge(){fh=[],cC={}}const d_={add:Ege,get:Tge,remove:yge,purge:Mge};function HV(t){return Pn(t["00080060"]).includes("NM")}function m_(t,e){const n=Qf(t["00080008"],!1);if(n)return n[e]}function _ge(t){let e;const n=m_(t,2);if(n&&Bv(n)){const r=Qf(t["00540022"]);r&&(e=Qi(r["00200037"],6))}return e}function Oge(t){let e;const n=m_(t,2);if(n&&Bv(n)){const r=Qf(t["00540022"]);r&&(e=Qi(r["00200032"],3))}return e}function T9(t){let e=Qi(t["00200037"],6);return!e&&HV(t)&&(e=_ge(t)),e}function y9(t){let e=Qi(t["00200032"],3);return!e&&HV(t)&&(e=Oge(t)),e}function ji(t,e){const n=Qi(t[e]);return n?n[0]:null}function wge(t){var e;return(e=t==null?void 0:t.Value)!=null&&e.length?Array.isArray(t.Value)?t.Value:typeof t.Value=="object"?(console.warn("Warning: Value should be an array, but an object was found. Encapsulating the object in an array."),[t.Value]):[]:[]}function M9(t){const e=wge(t["00186011"]);return!e||!e.length?null:e.map(r=>{const a=ji(r,"0018602C"),i=ji(r,"0018602E"),o=ji(r,"00186024"),s=ji(r,"00186026"),c=ji(r,"0018601A"),l=ji(r,"0018601E"),u=ji(r,"00186018"),f=ji(r,"0018601C"),v=ji(r,"00186020"),g=ji(r,"00186022"),d=ji(r,"0018602A"),m=ji(r,"00186028"),h=ji(r,"00186012"),C=ji(r,"00186014"),p=ji(r,"00186016"),S=ji(r,"00186030");return{regionLocationMinY0:c,regionLocationMaxY1:l,regionLocationMinX0:u,regionLocationMaxX1:f,referencePixelX0:v,referencePixelY0:g,physicalDeltaX:a,physicalDeltaY:i,physicalUnitsXDirection:o,physicalUnitsYDirection:s,referencePhysicalPixelValueY:d,referencePhysicalPixelValueX:m,regionSpatialFormat:h,regionDataType:C,regionFlags:p,transducerFrequency:S}})}function h_(t,e){const{MetadataModules:n}=vs;if(t===n.MULTIFRAME){const{metadata:a,frame:i}=Ige(e);if(!a)return;const{PerFrameFunctionalGroupsSequence:o,SharedFunctionalGroupsSequence:s,NumberOfFrames:c}=BV(a);if(o||c>1){const{shared:l,perFrame:u}=GV(o,s,i);return{NumberOfFrames:c,PerFrameFunctionalInformation:u,SharedFunctionalInformation:l}}return{NumberOfFrames:c}}const r=d_.get(e);if(r){if(t===n.GENERAL_STUDY)return{studyDescription:Pn(r["00081030"]),studyDate:ka.parseDA(Pn(r["00080020"])),studyTime:ka.parseTM(Pn(r["00080030"],0,"")),accessionNumber:Pn(r["00080050"])};if(t===n.GENERAL_SERIES)return{modality:Pn(r["00080060"]),seriesInstanceUID:Pn(r["0020000E"]),seriesNumber:Ir(r["00200011"]),studyInstanceUID:Pn(r["0020000D"]),seriesDate:ka.parseDA(Pn(r["00080021"])),seriesTime:ka.parseTM(Pn(r["00080031"],0,"")),acquisitionDate:ka.parseDA(Pn(r["00080022"])),acquisitionTime:ka.parseTM(Pn(r["00080032"],0,""))};if(t===n.GENERAL_IMAGE)return{sopInstanceUID:Pn(r["00080018"]),instanceNumber:Ir(r["00200013"]),lossyImageCompression:Pn(r["00282110"]),lossyImageCompressionRatio:Ir(r["00282112"]),lossyImageCompressionMethod:Pn(r["00282114"])};if(t===n.PATIENT)return{patientID:Pn(r["00100020"]),patientName:Pn(r["00100010"])};if(t===n.PATIENT_STUDY)return{patientAge:Ir(r["00101010"]),patientSize:Ir(r["00101020"]),patientSex:Pn(r["00100040"]),patientWeight:Ir(r["00101030"])};if(t===n.NM_MULTIFRAME_GEOMETRY){const a=Pn(r["00080060"]),i=m_(r,2);return{modality:a,imageType:Pn(r["00080008"]),imageSubType:i,imageOrientationPatient:T9(r),imagePositionPatient:y9(r),sliceThickness:Ir(r["00180050"]),spacingBetweenSlices:Ir(r["00180088"]),pixelSpacing:Qi(r["00280030"],2),numberOfFrames:Ir(r["00280008"]),isNMReconstructable:Bv(i)&&a.includes("NM")}}if(t===n.IMAGE_PLANE){let a=T9(r),i=y9(r);const o=Qi(r["00280030"],2);let s=null,c=null,l=null,u=null,f=!1;return o?(c=o[0],s=o[1]):(f=!0,c=1,s=1),a?(l=[parseFloat(a[0]),parseFloat(a[1]),parseFloat(a[2])],u=[parseFloat(a[3]),parseFloat(a[4]),parseFloat(a[5])]):(l=[0,1,0],u=[0,0,-1],f=!0,a=[...l,...u]),i||(i=[0,0,0],f=!0),{frameOfReferenceUID:Pn(r["00200052"]),rows:Ir(r["00280010"]),columns:Ir(r["00280011"]),imageOrientationPatient:a,rowCosines:l,columnCosines:u,imagePositionPatient:i,sliceThickness:Ir(r["00180050"]),sliceLocation:Ir(r["00201041"]),pixelSpacing:o,rowPixelSpacing:c,columnPixelSpacing:s,usingDefaultValues:f}}if(t===n.ULTRASOUND_ENHANCED_REGION)return M9(r);if(t===n.CALIBRATION&&Pn(r["00080060"])==="US")return{sequenceOfUltrasoundRegions:M9(r)};if(t===n.IMAGE_URL)return Pge(e,r);if(t===n.CINE)return Age(e,r);if(t===n.IMAGE_PIXEL)return{samplesPerPixel:Ir(r["00280002"]),photometricInterpretation:Pn(r["00280004"]),rows:Ir(r["00280010"]),columns:Ir(r["00280011"]),bitsAllocated:Ir(r["00280100"]),bitsStored:Ir(r["00280101"]),highBit:Pn(r["00280102"]),pixelRepresentation:Ir(r["00280103"]),planarConfiguration:Ir(r["00280006"]),pixelAspectRatio:Pn(r["00280034"]),smallestPixelValue:Ir(r["00280106"]),largestPixelValue:Ir(r["00280107"]),redPaletteColorLookupTableDescriptor:Qi(r["00281101"]),greenPaletteColorLookupTableDescriptor:Qi(r["00281102"]),bluePaletteColorLookupTableDescriptor:Qi(r["00281103"]),redPaletteColorLookupTableData:Qi(r["00281201"]),greenPaletteColorLookupTableData:Qi(r["00281202"]),bluePaletteColorLookupTableData:Qi(r["00281203"])};if(t===n.VOI_LUT)return{windowCenter:Qi(r["00281050"],1),windowWidth:Qi(r["00281051"],1),voiLUTFunction:Pn(r["00281056"])};if(t===n.MODALITY_LUT)return{rescaleIntercept:Ir(r["00281052"]),rescaleSlope:Ir(r["00281053"]),rescaleType:Pn(r["00281054"])};if(t===n.SOP_COMMON)return{sopClassUID:Pn(r["00080016"]),sopInstanceUID:Pn(r["00080018"])};if(t===n.PET_ISOTOPE){const a=Pn(r["00540016"]);return a===void 0?void 0:{radiopharmaceuticalInfo:{radiopharmaceuticalStartTime:ka.parseTM(Pn(a["00181072"],0,"")),radiopharmaceuticalStartDateTime:Pn(a["00181078"],0,""),radionuclideTotalDose:Ir(a["00181074"]),radionuclideHalfLife:Ir(a["00181075"])}}}if(t===n.OVERLAY_PLANE)return Sge(r);if(t==="transferSyntax")return $V(e,r);if(t===n.PET_SERIES)return{correctedImage:Pn(r["00280051"]),units:Pn(r["00541001"]),decayCorrection:Pn(r["00541102"])};if(t===n.PET_IMAGE)return{frameReferenceTime:Ir(r["00541300"]),actualFrameDuration:Ir(r["00181242"])};if(t==="instance")return _V(e,h_,OV)}}function Pge(t,e){const{transferSyntaxUID:n}=$V(t,e),r=xF(n),a=t.substring(7),i=a.replace("/frames/","/thumbnail/");let o=a.replace("/frames/","/rendered/");return r&&(o=o.replace("/rendered/1","/rendered")),{isVideo:r,rendered:o,thumbnail:i}}function Age(t,e){return{cineRate:Pn(e["00180040"]),numberOfFrames:Ir(e["00280008"])}}function $V(t,e){return{transferSyntaxUID:Pn(e["00020010"])||Pn(e["00083002"])}}function xge(t,e,n={},r={}){const a=uh(),{retrieveOptions:i={},streamingData:o}=r,s=o.chunkSize||bge(e,i,"chunkSize")||65536,c=u=>{if(typeof a.errorInterceptor=="function"){const f=new Error("request failed");a.errorInterceptor(f)}else console.warn("rangeRequest:Caught",u)};return new Promise(async(u,f)=>{const v=Object.assign({},n);Object.keys(v).forEach(function(g){(v[g]===null||v[g]===void 0)&&delete v[g]});try{o.encodedData||(o.chunkSize=s,o.rangesFetched=0);const g=Nge(o,i),{encodedData:d,responseHeaders:m}=await Rge(t,v,g,o),h=m.get("content-type"),{totalBytes:C}=o,p=C===d.byteLength,S=o_(h,d,{isPartial:!0}),I=s_(i,p||S.extractDone);u({...S,imageQualityStatus:I,percentComplete:S.extractDone?100:s*100/C})}catch(g){c(g),console.error(g),f(g)}})}async function Rge(t,e,n,r){n&&(e=Object.assign(e,{Range:`bytes=${n[0]}-${n[1]}`}));let{encodedData:a}=r;if(n[1]&&(a==null?void 0:a.byteLength)>n[1])return r;const i=await fetch(t,{headers:e,signal:void 0}),o=await i.arrayBuffer(),s=new Uint8Array(o),{status:c}=i;let l;a?(l=new Uint8Array(a.length+s.length),l.set(a,0),l.set(s,a.length),r.rangesFetched=1):(l=new Uint8Array(s.length),l.set(s,0),r.rangesFetched++),r.encodedData=a=l,r.responseHeaders=i.headers;const u=i.headers.get("Content-Range");return u?r.totalBytes=Number(u.split("/")[1]):c!==206||!n?r.totalBytes=a==null?void 0:a.byteLength:n[1]===""||(a==null?void 0:a.length)<n[1]?r.totalBytes=a.byteLength:r.totalBytes=Number.MAX_SAFE_INTEGER,r}function bge(t,e,n){const r=e[n];if(typeof r!="function")return r;const a=d_.get(t);return r(a,t)}function Nge(t,e){const{totalBytes:n,encodedData:r,chunkSize:a=65536}=t,{rangeIndex:i=0}=e;return i===-1&&(!n||!r)?[0,""]:i===-1||(r==null?void 0:r.byteLength)>n-a?[(r==null?void 0:r.byteLength)||0,""]:[(r==null?void 0:r.byteLength)||0,a*(i+1)-1]}function p_(t,e,n="application/octet-stream",r){const{streamingData:a,retrieveOptions:i={}}=r||{},o={Accept:n};let s=i.urlArguments?`${t}${t.indexOf("?")===-1?"?":"&"}${i.urlArguments}`:t;if(i.framesPath&&(s=s.replace("/frames/",i.framesPath)),(a==null?void 0:a.url)!==s&&(r.streamingData={url:s}),i.rangeIndex!==void 0)return xge(s,e,o,r);if(i.streaming)return IV(s,e,o,r);const c=OI(s,e,o),{xhr:l}=c;return c.then(function(u){const f=l.getResponseHeader("Content-Type")||"application/octet-stream",v=o_(f,new Uint8Array(u));return v.imageQualityStatus=s_(i,!0),v})}const{ProgressiveIterator:_9}=Zn,{ImageQualityStatus:O9}=vs,Lge=new Set(["3.2.840.10008.1.2.4.96","1.2.840.10008.1.2.4.202","1.2.840.10008.1.2.4.203"]);function Uge(t){const e="1.2.840.10008.1.2";if(!t)return e;const n=t.split(";"),r={};n.forEach(i=>{const o=i.split("=");if(o.length!==2)return;const s=o[1].trim().replace(/"/g,"");r[o[0].trim()]=s});const a={"image/jpeg":"1.2.840.10008.1.2.4.50","image/x-dicom-rle":"1.2.840.10008.1.2.5","image/x-jls":"1.2.840.10008.1.2.4.80","image/jls":"1.2.840.10008.1.2.4.80","image/jll":"1.2.840.10008.1.2.4.70","image/jp2":"1.2.840.10008.1.2.4.90","image/jpx":"1.2.840.10008.1.2.4.92","image/jphc":"3.2.840.10008.1.2.4.96","image/jxl":"1.2.840.10008.1.2.4.140"};return r["transfer-syntax"]?r["transfer-syntax"]:t&&!Object.keys(r).length&&a[t]?a[t]:r.type&&a[r.type]?a[r.type]:a[t]?a[t]:e}function Fge(){return Gv}const Vge="multipart/related; type=application/octet-stream; transfer-syntax=*";function zV(t,e={}){const n=Fge(),r=new Date().getTime(),a=new _9("decompress");async function i(u,f,v){a.generate(async g=>{var h;const d=_9.as(p_(u,f,v,e));let m=10;for await(const C of d){const{pixelData:p,imageQualityStatus:S=O9.FULL_RESOLUTION,percentComplete:I,done:D=!0,extractDone:E=!0}=C,T=Uge(C.contentType);if(!E&&!Lge.has(T))continue;const y=C.decodeLevel??(S===O9.FULL_RESOLUTION?0:kge(I,(h=e.retrieveOptions)==null?void 0:h.decodeLevel));if(!(!D&&m<=y))try{const M={...e,decodeLevel:y},_=await xI(f,p,T,M),O=new Date().getTime();_.loadTimeInMS=O-r,_.transferSyntaxUID=T,_.imageQualityStatus=S,g.add(_,D),m=y}catch(M){if(E)throw console.warn("Couldn't decode",M),M}}})}const o=e.requestType||bn.Interaction,s=e.additionalDetails||{imageId:t},c=e.priority===void 0?5:e.priority,l=t.substring(7);return n.addRequest(i.bind(this,l,t,Vge),o,s,c),{promise:a.getDonePromise(),cancelFn:void 0}}function kge(t,e=4){const n=t/100-.02;return n>1/4?Math.min(e,0):n>1/16?Math.min(e,1):n>1/64?Math.min(e,2):Math.min(e,3)}function qV(){Wl("wadors",zV),qc(h_)}const Gge={getNumberString:pge,getNumberValue:Ir,getNumberValues:Qi,getValue:Pn,metaDataProvider:h_},Bge={metaData:Gge,findIndexOfString:ny,getPixelData:p_,loadImage:zV,metaDataManager:d_,register:qV};function Wge(){qV(),kV()}const Hge=()=>new Worker(new URL("/nifti-viewer/assets/decodeImageFrameWorker-YOx_iSlk.js",import.meta.url),{type:"module"});function $ge(t={}){CV(t),Wge();const e=Zc(),n=(t==null?void 0:t.maxWebWorkers)||zge();e.registerWorker("dicomImageLoader",Hge,{maxWorkerInstances:n})}function zge(){return typeof navigator<"u"&&navigator.hardwareConcurrency?Math.max(1,Math.floor(navigator.hardwareConcurrency/2)):1}function qge(t,e){if(e=e||t.transferSyntax,t.bitsAllocated===8&&e==="1.2.840.10008.1.2.4.50"&&(t.samplesPerPixel===3||t.samplesPerPixel===4))return!0}const jge={IMPLICIT_VR_LITTLE_ENDIAN:"1.2.840.10008.1.2",EXPLICIT_VR_LITTLE_ENDIAN:"1.2.840.10008.1.2.1",DEFLATED_EXPLICIT_VR_LITTLE_ENDIAN:"1.2.840.10008.1.2.1.99",EXPLICIT_VR_BIG_ENDIAN:"1.2.840.10008.1.2.2",JPEG_BASELINE_PROCESS_1:"1.2.840.10008.1.2.4.50",JPEG_EXTENDED_PROCESS_2_4:"1.2.840.10008.1.2.4.51",JPEG_EXTENDED_PROCESSES_3_5:"1.2.840.10008.1.2.4.52",JPEG_SPECTRAL_SELECTION_NONHIERARCHICAL_PROCESSES_6_8:"1.2.840.10008.1.2.4.53",JPEG_SPECTRAL_SELECTION_NONHIERARCHICAL_PROCESSES_7_9:"1.2.840.10008.1.2.4.54",JPEG_FULL_PROGRESSION_NONHIERARCHICAL_PROCESSES_10_12:"1.2.840.10008.1.2.4.55",JPEG_FULL_PROGRESSION_NONHIERARCHICAL_PROCESSES_11_13:"1.2.840.10008.1.2.4.56",JPEG_LOSSLESS_NONHIERARCHICAL_PROCESS_14:"1.2.840.10008.1.2.4.57",JPEG_LOSSLESS_NONHIERARCHICAL_PROCESS_15:"1.2.840.10008.1.2.4.58",JPEG_EXTENDED_HIERARCHICAL_PROCESSES_16_18:"1.2.840.10008.1.2.4.59",JPEG_EXTENDED_HIERARCHICAL_PROCESSES_17_19:"1.2.840.10008.1.2.4.60",JPEG_SPECTRAL_SELECTION_HIERARCHICAL_PROCESSES_20_22:"1.2.840.10008.1.2.4.61",JPEG_SPECTRAL_SELECTION_HIERARCHICAL_PROCESSES_21_23:"1.2.840.10008.1.2.4.62",JPEG_FULL_PROGRESSION_HIERARCHICAL_PROCESSES_24_26:"1.2.840.10008.1.2.4.63",JPEG_FULL_PROGRESSION_HIERARCHICAL_PROCESSES_25_27:"1.2.840.10008.1.2.4.64",JPEG_LOSSLESS_NONHIERARCHICAL_PROCESS_28:"1.2.840.10008.1.2.4.65",JPEG_LOSSLESS_NONHIERARCHICAL_PROCESS_29:"1.2.840.10008.1.2.4.66",JPEG_LOSSLESS_NONHIERARCHICAL_FIRST_ORDER_PREDICTION_PROCESS_14:"1.2.840.10008.1.2.4.70",JPEG_LS_LOSSLESS_IMAGE_COMPRESSION:"1.2.840.10008.1.2.4.80",JPEG_LS_LOSSY_NEAR_LOSSLESS_IMAGE_COMPRESSION:"1.2.840.10008.1.2.4.81",JPEG_2000_IMAGE_COMPRESSION_LOSSLESS_ONLY:"1.2.840.10008.1.2.4.90",JPEG_2000_IMAGE_COMPRESSION:"1.2.840.10008.1.2.4.91",JPEG_2000_PART_2_MULTICOMPONENT_IMAGE_COMPRESSION_LOSSLESS_ONLY:"1.2.840.10008.1.2.4.92",JPEG_2000_PART_2_MULTICOMPONENT_IMAGE_COMPRESSION:"1.2.840.10008.1.2.4.93",JPIP_REFERENCED:"1.2.840.10008.1.2.4.94",JPIP_REFERENCED_DEFLATE:"1.2.840.10008.1.2.4.95",MPEG2_MAIN_PROFILE_MAIN_LEVEL:"1.2.840.10008.1.2.4.100",MPEG4_AVC_H264_HIGH_PROFILE_LEVEL_4_1:"1.2.840.10008.1.2.4.101",MPEG4_AVC_H264_BD_COMPATIBLE_HIGH_PROFILE_LEVEL_4_1:"1.2.840.10008.1.2.4.102",MPEG4_AVC_H264_HIGH_PROFILE_FOR_2D_VIDEO:"1.2.840.10008.1.2.4.103",MPEG4_AVC_H264_HIGH_PROFILE_FOR_3D_VIDEO:"1.2.840.10008.1.2.4.104",JPIP_LOSSLESS:"1.2.840.10008.1.2.4.96",JPIP_PART2_MULTICOMPONENT_IMAGE_COMPRESSION:"1.2.840.10008.1.2.4.97",RFC_2557_MIME_ENCAPSULATION:"1.2.840.10008.1.2.6.1",JPEG_XR_IMAGE_COMPRESSION:"1.2.840.10008.1.2.6.2",JPEG_2000_IMAGE_COMPRESSION_LOSSLESS_ONLY_RETIRED:"1.2.840.10008.1.2.4.90R",JPEG_2000_IMAGE_COMPRESSION_RETIRED:"1.2.840.10008.1.2.4.91R",JPEG_2000_PART_2_MULTICOMPONENT_IMAGE_COMPRESSION_LOSSLESS_ONLY_RETIRED:"1.2.840.10008.1.2.4.92R",JPEG_2000_PART_2_MULTICOMPONENT_IMAGE_COMPRESSION_RETIRED:"1.2.840.10008.1.2.4.93R"},Qge=Object.freeze(Object.defineProperty({__proto__:null,transferSyntaxes:jge},Symbol.toStringTag,{value:"Module"}));function Kge(t,e){const{rows:n,columns:r,data:a}=t,{rows:i,columns:o,data:s}=e,c=[],l=[],u=[];for(let f=0;f<o;f++){const v=f*(r-1)/(o-1);c[f]=Math.floor(v),l[f]=Math.min(c[f]+1,r-1),u[f]=v-c[f]}for(let f=0;f<i;f++){const v=f*(n-1)/(i-1),g=Math.floor(v)*r,d=Math.min(g+r,(n-1)*r),m=v-Math.floor(v),h=1-m,C=f*o;for(let p=0;p<o;p++){const S=a[g+c[p]],I=a[g+l[p]],D=a[d+c[p]],E=a[d+l[p]],T=1-u[p];s[C+p]=(S*T+I*u[p])*h+(D*T+E*u[p])*m}}return s}function Xge(t,e){const{rows:n,columns:r,pixelData:a,samplesPerPixel:i=1}=t,{rows:o,columns:s,pixelData:c}=e,l=[];for(let u=0;u<s;u++){const f=u*(r-1)/(s-1);l[u]=Math.floor(f)*i}for(let u=0;u<o;u++){const f=u*(n-1)/(o-1),v=Math.floor(f)*r*i,g=u*s;for(let d=0;d<s;d++)for(let m=0;m<i;m++)c[g+d+m]=a[v+l[d]+m]}return c}async function w9(t,e){let n=e.buffer,r=e.byteOffset;const a=e.length;return t.bitsAllocated===16?(r%2&&(n=n.slice(r),r=0),t.pixelRepresentation===0?t.pixelData=new Uint16Array(n,r,a/2):t.pixelData=new Int16Array(n,r,a/2)):t.bitsAllocated===8||t.bitsAllocated===1?t.pixelData=e:t.bitsAllocated===32&&(r%2&&(n=n.slice(r),r=0),t.pixelData=new Float32Array(n,r,a/4)),t}function Yge(t){return(t&255)<<8|t>>8&255}async function Zge(t,e){if(t.bitsAllocated===16){let n=e.buffer,r=e.byteOffset;const a=e.length;r%2&&(n=n.slice(r),r=0),t.pixelRepresentation===0?t.pixelData=new Uint16Array(n,r,a/2):t.pixelData=new Int16Array(n,r,a/2);for(let i=0;i<t.pixelData.length;i++)t.pixelData[i]=Yge(t.pixelData[i])}else t.bitsAllocated===8&&(t.pixelData=e);return t}async function Jge(t,e){if(t.bitsAllocated===8)return t.planarConfiguration?tde(t,e):ede(t,e);if(t.bitsAllocated===16)return nde(t,e);throw new Error("unsupported pixel format for RLE")}function ede(t,e){const n=e,r=t.rows*t.columns,a=new ArrayBuffer(r*t.samplesPerPixel),i=new DataView(n.buffer,n.byteOffset),o=new Int8Array(n.buffer,n.byteOffset),s=new Int8Array(a);let c=0;const l=i.getInt32(0,!0);for(let u=0;u<l;++u){c=u;let f=i.getInt32((u+1)*4,!0),v=i.getInt32((u+2)*4,!0);v===0&&(v=n.length);const g=r*l;for(;f<v;){const d=o[f++];if(d>=0&&d<=127)for(let m=0;m<d+1&&c<g;++m)s[c]=o[f++],c+=t.samplesPerPixel;else if(d<=-1&&d>=-127){const m=o[f++];for(let h=0;h<-d+1&&c<g;++h)s[c]=m,c+=t.samplesPerPixel}}}return t.pixelData=new Uint8Array(a),t}function tde(t,e){const n=e,r=t.rows*t.columns,a=new ArrayBuffer(r*t.samplesPerPixel),i=new DataView(n.buffer,n.byteOffset),o=new Int8Array(n.buffer,n.byteOffset),s=new Int8Array(a);let c=0;const l=i.getInt32(0,!0);for(let u=0;u<l;++u){c=u*r;let f=i.getInt32((u+1)*4,!0),v=i.getInt32((u+2)*4,!0);v===0&&(v=n.length);const g=r*l;for(;f<v;){const d=o[f++];if(d>=0&&d<=127)for(let m=0;m<d+1&&c<g;++m)s[c]=o[f++],c++;else if(d<=-1&&d>=-127){const m=o[f++];for(let h=0;h<-d+1&&c<g;++h)s[c]=m,c++}}}return t.pixelData=new Uint8Array(a),t}function nde(t,e){const n=e,r=t.rows*t.columns,a=new ArrayBuffer(r*t.samplesPerPixel*2),i=new DataView(n.buffer,n.byteOffset),o=new Int8Array(n.buffer,n.byteOffset),s=new Int8Array(a),c=i.getInt32(0,!0);for(let l=0;l<c;++l){let u=0;const f=l===0?1:0;let v=i.getInt32((l+1)*4,!0),g=i.getInt32((l+2)*4,!0);for(g===0&&(g=n.length);v<g;){const d=o[v++];if(d>=0&&d<=127)for(let m=0;m<d+1&&u<r;++m)s[u*2+f]=o[v++],u++;else if(d<=-1&&d>=-127){const m=o[v++];for(let h=0;h<-d+1&&u<r;++h)s[u*2+f]=m,u++}}}return t.pixelRepresentation===0?t.pixelData=new Uint16Array(a):t.pixelData=new Int16Array(a),t}var OE={exports:{}},P9;function rde(){return P9||(P9=1,function(t,e){var n=(()=>{var r=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(r=r||__filename),function(a){a=a||{};var i=typeof a<"u"?a:{},o,s;i.ready=new Promise(function(G,$){o=G,s=$});var c=Object.assign({},i),l="./this.program",u=(G,$)=>{throw $},f=typeof window=="object",v=typeof importScripts=="function",g=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",d="";function m(G){return i.locateFile?i.locateFile(G,d):d+G}var h,C,p;if(g){var S=j0,I=j0;v?d=I.dirname(d)+"/":d=__dirname+"/",h=(G,$)=>(G=fe(G)?new URL(G):I.normalize(G),S.readFileSync(G,$?void 0:"utf8")),p=G=>{var $=h(G,!0);return $.buffer||($=new Uint8Array($)),$},C=(G,$,oe)=>{G=fe(G)?new URL(G):I.normalize(G),S.readFile(G,function(ve,Ee){ve?oe(ve):$(Ee.buffer)})},process.argv.length>1&&(l=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",function(G){if(!(G instanceof Me))throw G}),process.on("unhandledRejection",function(G){throw G}),u=(G,$)=>{throw process.exitCode=G,$},i.inspect=function(){return"[Emscripten Module object]"}}else(f||v)&&(v?d=self.location.href:typeof document<"u"&&document.currentScript&&(d=document.currentScript.src),r&&(d=r),d.indexOf("blob:")!==0?d=d.substr(0,d.replace(/[?#].*/,"").lastIndexOf("/")+1):d="",h=G=>{var $=new XMLHttpRequest;return $.open("GET",G,!1),$.send(null),$.responseText},v&&(p=G=>{var $=new XMLHttpRequest;return $.open("GET",G,!1),$.responseType="arraybuffer",$.send(null),new Uint8Array($.response)}),C=(G,$,oe)=>{var ve=new XMLHttpRequest;ve.open("GET",G,!0),ve.responseType="arraybuffer",ve.onload=()=>{if(ve.status==200||ve.status==0&&ve.response){$(ve.response);return}oe()},ve.onerror=oe,ve.send(null)});var D=i.print||console.log.bind(console),E=i.printErr||console.warn.bind(console);Object.assign(i,c),c=null,i.arguments&&i.arguments,i.thisProgram&&(l=i.thisProgram),i.quit&&(u=i.quit);var T;i.wasmBinary&&(T=i.wasmBinary);var y=i.noExitRuntime||!0;typeof WebAssembly!="object"&&he("no native wasm support detected");var M,_=!1;function O(G,$){G||he($)}var w=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function x(G,$,oe){for(var ve=$+oe,Ee=$;G[Ee]&&!(Ee>=ve);)++Ee;if(Ee-$>16&&G.buffer&&w)return w.decode(G.subarray($,Ee));for(var Ge="";$<Ee;){var Ke=G[$++];if(!(Ke&128)){Ge+=String.fromCharCode(Ke);continue}var He=G[$++]&63;if((Ke&224)==192){Ge+=String.fromCharCode((Ke&31)<<6|He);continue}var tt=G[$++]&63;if((Ke&240)==224?Ke=(Ke&15)<<12|He<<6|tt:Ke=(Ke&7)<<18|He<<12|tt<<6|G[$++]&63,Ke<65536)Ge+=String.fromCharCode(Ke);else{var _t=Ke-65536;Ge+=String.fromCharCode(55296|_t>>10,56320|_t&1023)}}return Ge}function P(G,$){return G?x(V,G,$):""}function R(G,$,oe,ve){if(!(ve>0))return 0;for(var Ee=oe,Ge=oe+ve-1,Ke=0;Ke<G.length;++Ke){var He=G.charCodeAt(Ke);if(He>=55296&&He<=57343){var tt=G.charCodeAt(++Ke);He=65536+((He&1023)<<10)|tt&1023}if(He<=127){if(oe>=Ge)break;$[oe++]=He}else if(He<=2047){if(oe+1>=Ge)break;$[oe++]=192|He>>6,$[oe++]=128|He&63}else if(He<=65535){if(oe+2>=Ge)break;$[oe++]=224|He>>12,$[oe++]=128|He>>6&63,$[oe++]=128|He&63}else{if(oe+3>=Ge)break;$[oe++]=240|He>>18,$[oe++]=128|He>>12&63,$[oe++]=128|He>>6&63,$[oe++]=128|He&63}}return $[oe]=0,oe-Ee}function L(G,$,oe){return R(G,V,$,oe)}function H(G){for(var $=0,oe=0;oe<G.length;++oe){var ve=G.charCodeAt(oe);ve<=127?$++:ve<=2047?$+=2:ve>=55296&&ve<=57343?($+=4,++oe):$+=3}return $}var F,U,V,X,re,ue,De,pe,Te;function Fe(G){F=G,i.HEAP8=U=new Int8Array(G),i.HEAP16=X=new Int16Array(G),i.HEAP32=ue=new Int32Array(G),i.HEAPU8=V=new Uint8Array(G),i.HEAPU16=re=new Uint16Array(G),i.HEAPU32=De=new Uint32Array(G),i.HEAPF32=pe=new Float32Array(G),i.HEAPF64=Te=new Float64Array(G)}i.INITIAL_MEMORY;var Ne,Re=[],k=[],A=[];function b(){return y}function N(){if(i.preRun)for(typeof i.preRun=="function"&&(i.preRun=[i.preRun]);i.preRun.length;)K(i.preRun.shift());Be(Re)}function W(){Be(k)}function j(){if(i.postRun)for(typeof i.postRun=="function"&&(i.postRun=[i.postRun]);i.postRun.length;)ye(i.postRun.shift());Be(A)}function K(G){Re.unshift(G)}function ge(G){k.unshift(G)}function ye(G){A.unshift(G)}var we=0,be=null;function Z(G){we++,i.monitorRunDependencies&&i.monitorRunDependencies(we)}function ie(G){if(we--,i.monitorRunDependencies&&i.monitorRunDependencies(we),we==0&&be){var $=be;be=null,$()}}function he(G){i.onAbort&&i.onAbort(G),G="Aborted("+G+")",E(G),_=!0,G+=". Build with -sASSERTIONS for more info.";var $=new WebAssembly.RuntimeError(G);throw s($),$}var se="data:application/octet-stream;base64,";function me(G){return G.startsWith(se)}function fe(G){return G.startsWith("file://")}var q;q="libjpegturbowasm_decode.wasm",me(q)||(q=m(q));function Pe(G){try{if(G==q&&T)return new Uint8Array(T);if(p)return p(G);throw"both async and sync fetching of the wasm failed"}catch($){he($)}}function Le(){if(!T&&(f||v)){if(typeof fetch=="function"&&!fe(q))return fetch(q,{credentials:"same-origin"}).then(function(G){if(!G.ok)throw"failed to load wasm binary file at '"+q+"'";return G.arrayBuffer()}).catch(function(){return Pe(q)});if(C)return new Promise(function(G,$){C(q,function(oe){G(new Uint8Array(oe))},$)})}return Promise.resolve().then(function(){return Pe(q)})}function Ue(){var G={a:Nt};function $(Ke,He){var tt=Ke.exports;i.asm=tt,M=i.asm.K,Fe(M.buffer),Ne=i.asm.M,ge(i.asm.L),ie()}Z();function oe(Ke){$(Ke.instance)}function ve(Ke){return Le().then(function(He){return WebAssembly.instantiate(He,G)}).then(function(He){return He}).then(Ke,function(He){E("failed to asynchronously prepare wasm: "+He),he(He)})}function Ee(){return!T&&typeof WebAssembly.instantiateStreaming=="function"&&!me(q)&&!fe(q)&&!g&&typeof fetch=="function"?fetch(q,{credentials:"same-origin"}).then(function(Ke){var He=WebAssembly.instantiateStreaming(Ke,G);return He.then(oe,function(tt){return E("wasm streaming compile failed: "+tt),E("falling back to ArrayBuffer instantiation"),ve(oe)})}):ve(oe)}if(i.instantiateWasm)try{var Ge=i.instantiateWasm(G,$);return Ge}catch(Ke){E("Module.instantiateWasm callback failed with error: "+Ke),s(Ke)}return Ee().catch(s),{}}function Me(G){this.name="ExitStatus",this.message="Program terminated with exit("+G+")",this.status=G}function Be(G){for(;G.length>0;)G.shift()(i)}function nt(G){this.excPtr=G,this.ptr=G-24,this.set_type=function($){De[this.ptr+4>>2]=$},this.get_type=function(){return De[this.ptr+4>>2]},this.set_destructor=function($){De[this.ptr+8>>2]=$},this.get_destructor=function(){return De[this.ptr+8>>2]},this.set_refcount=function($){ue[this.ptr>>2]=$},this.set_caught=function($){$=$?1:0,U[this.ptr+12>>0]=$},this.get_caught=function(){return U[this.ptr+12>>0]!=0},this.set_rethrown=function($){$=$?1:0,U[this.ptr+13>>0]=$},this.get_rethrown=function(){return U[this.ptr+13>>0]!=0},this.init=function($,oe){this.set_adjusted_ptr(0),this.set_type($),this.set_destructor(oe),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var $=ue[this.ptr>>2];ue[this.ptr>>2]=$+1},this.release_ref=function(){var $=ue[this.ptr>>2];return ue[this.ptr>>2]=$-1,$===1},this.set_adjusted_ptr=function($){De[this.ptr+16>>2]=$},this.get_adjusted_ptr=function(){return De[this.ptr+16>>2]},this.get_exception_ptr=function(){var $=Je(this.get_type());if($)return De[this.excPtr>>2];var oe=this.get_adjusted_ptr();return oe!==0?oe:this.excPtr}}function Ze(G,$,oe){var ve=new nt(G);throw ve.init($,oe),G}var at={};function Ot(G){for(;G.length;){var $=G.pop(),oe=G.pop();oe($)}}function Oe(G){return this.fromWireType(ue[G>>2])}var $e={},ht={},Ut={},Qt=48,Rt=57;function Dn(G){if(G===void 0)return"_unknown";G=G.replace(/[^a-zA-Z0-9_]/g,"$");var $=G.charCodeAt(0);return $>=Qt&&$<=Rt?"_"+G:G}function jn(G,$){return G=Dn(G),new Function("body","return function "+G+`() {
    "use strict";    return body.apply(this, arguments);
};
`)($)}function xn(G,$){var oe=jn($,function(ve){this.name=$,this.message=ve;var Ee=new Error(ve).stack;Ee!==void 0&&(this.stack=this.toString()+`
`+Ee.replace(/^Error(:[^\n]*)?\n/,""))});return oe.prototype=Object.create(G.prototype),oe.prototype.constructor=oe,oe.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},oe}var Qe=void 0;function Et(G){throw new Qe(G)}function $t(G,$,oe){G.forEach(function(He){Ut[He]=$});function ve(He){var tt=oe(He);tt.length!==G.length&&Et("Mismatched type converter count");for(var _t=0;_t<G.length;++_t)ya(G[_t],tt[_t])}var Ee=new Array($.length),Ge=[],Ke=0;$.forEach((He,tt)=>{ht.hasOwnProperty(He)?Ee[tt]=ht[He]:(Ge.push(He),$e.hasOwnProperty(He)||($e[He]=[]),$e[He].push(()=>{Ee[tt]=ht[He],++Ke,Ke===Ge.length&&ve(Ee)}))}),Ge.length===0&&ve(Ee)}function Fn(G){var $=at[G];delete at[G];var oe=$.rawConstructor,ve=$.rawDestructor,Ee=$.fields,Ge=Ee.map(Ke=>Ke.getterReturnType).concat(Ee.map(Ke=>Ke.setterArgumentType));$t([G],Ge,Ke=>{var He={};return Ee.forEach((tt,_t)=>{var xt=tt.fieldName,Wt=Ke[_t],ln=tt.getter,Mr=tt.getterContext,rr=Ke[_t+Ee.length],Tr=tt.setter,Pi=tt.setterContext;He[xt]={read:jo=>Wt.fromWireType(ln(Mr,jo)),write:(jo,fl)=>{var Ss=[];Tr(Pi,jo,rr.toWireType(Ss,fl)),Ot(Ss)}}}),[{name:$.name,fromWireType:function(tt){var _t={};for(var xt in He)_t[xt]=He[xt].read(tt);return ve(tt),_t},toWireType:function(tt,_t){for(var xt in He)if(!(xt in _t))throw new TypeError('Missing field:  "'+xt+'"');var Wt=oe();for(xt in He)He[xt].write(Wt,_t[xt]);return tt!==null&&tt.push(ve,Wt),Wt},argPackAdvance:8,readValueFromPointer:Oe,destructorFunction:ve}]})}function Rr(G,$,oe,ve,Ee){}function Kt(G){switch(G){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+G)}}function qr(){for(var G=new Array(256),$=0;$<256;++$)G[$]=String.fromCharCode($);Rn=G}var Rn=void 0;function cr(G){for(var $="",oe=G;V[oe];)$+=Rn[V[oe++]];return $}var fi=void 0;function nn(G){throw new fi(G)}function ya(G,$,oe={}){if(!("argPackAdvance"in $))throw new TypeError("registerType registeredInstance requires argPackAdvance");var ve=$.name;if(G||nn('type "'+ve+'" must have a positive integer typeid pointer'),ht.hasOwnProperty(G)){if(oe.ignoreDuplicateRegistrations)return;nn("Cannot register type '"+ve+"' twice")}if(ht[G]=$,delete Ut[G],$e.hasOwnProperty(G)){var Ee=$e[G];delete $e[G],Ee.forEach(Ge=>Ge())}}function wi(G,$,oe,ve,Ee){var Ge=Kt(oe);$=cr($),ya(G,{name:$,fromWireType:function(Ke){return!!Ke},toWireType:function(Ke,He){return He?ve:Ee},argPackAdvance:8,readValueFromPointer:function(Ke){var He;if(oe===1)He=U;else if(oe===2)He=X;else if(oe===4)He=ue;else throw new TypeError("Unknown boolean type size: "+$);return this.fromWireType(He[Ke>>Ge])},destructorFunction:null})}function Wi(G){if(!(this instanceof za)||!(G instanceof za))return!1;for(var $=this.$$.ptrType.registeredClass,oe=this.$$.ptr,ve=G.$$.ptrType.registeredClass,Ee=G.$$.ptr;$.baseClass;)oe=$.upcast(oe),$=$.baseClass;for(;ve.baseClass;)Ee=ve.upcast(Ee),ve=ve.baseClass;return $===ve&&oe===Ee}function Oo(G){return{count:G.count,deleteScheduled:G.deleteScheduled,preservePointerOnDelete:G.preservePointerOnDelete,ptr:G.ptr,ptrType:G.ptrType,smartPtr:G.smartPtr,smartPtrType:G.smartPtrType}}function Ci(G){function $(oe){return oe.$$.ptrType.registeredClass.name}nn($(G)+" instance already deleted")}var mr=!1;function Ii(G){}function Gn(G){G.smartPtr?G.smartPtrType.rawDestructor(G.smartPtr):G.ptrType.registeredClass.rawDestructor(G.ptr)}function ma(G){G.count.value-=1;var $=G.count.value===0;$&&Gn(G)}function Hi(G,$,oe){if($===oe)return G;if(oe.baseClass===void 0)return null;var ve=Hi(G,$,oe.baseClass);return ve===null?null:oe.downcast(ve)}var Ha={};function ti(){return Object.keys(ua).length}function Di(){var G=[];for(var $ in ua)ua.hasOwnProperty($)&&G.push(ua[$]);return G}var La=[];function wo(){for(;La.length;){var G=La.pop();G.$$.deleteScheduled=!1,G.delete()}}var vi=void 0;function Ua(G){vi=G,La.length&&vi&&vi(wo)}function Po(){i.getInheritedInstanceCount=ti,i.getLiveInheritedInstances=Di,i.flushPendingDeletes=wo,i.setDelayFunction=Ua}var ua={};function oo(G,$){for($===void 0&&nn("ptr should not be undefined");G.baseClass;)$=G.upcast($),G=G.baseClass;return $}function $i(G,$){return $=oo(G,$),ua[$]}function $a(G,$){(!$.ptrType||!$.ptr)&&Et("makeClassHandle requires ptr and ptrType");var oe=!!$.smartPtrType,ve=!!$.smartPtr;return oe!==ve&&Et("Both smartPtrType and smartPtr must be specified"),$.count={value:1},ha(Object.create(G,{$$:{value:$}}))}function ni(G){var $=this.getPointee(G);if(!$)return this.destructor(G),null;var oe=$i(this.registeredClass,$);if(oe!==void 0){if(oe.$$.count.value===0)return oe.$$.ptr=$,oe.$$.smartPtr=G,oe.clone();var ve=oe.clone();return this.destructor(G),ve}function Ee(){return this.isSmartPointer?$a(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:$,smartPtrType:this,smartPtr:G}):$a(this.registeredClass.instancePrototype,{ptrType:this,ptr:G})}var Ge=this.registeredClass.getActualType($),Ke=Ha[Ge];if(!Ke)return Ee.call(this);var He;this.isConst?He=Ke.constPointerType:He=Ke.pointerType;var tt=Hi($,this.registeredClass,He.registeredClass);return tt===null?Ee.call(this):this.isSmartPointer?$a(He.registeredClass.instancePrototype,{ptrType:He,ptr:tt,smartPtrType:this,smartPtr:G}):$a(He.registeredClass.instancePrototype,{ptrType:He,ptr:tt})}function ha(G){return typeof FinalizationRegistry>"u"?(ha=$=>$,G):(mr=new FinalizationRegistry($=>{ma($.$$)}),ha=$=>{var oe=$.$$,ve=!!oe.smartPtr;if(ve){var Ee={$$:oe};mr.register($,Ee,$)}return $},Ii=$=>mr.unregister($),ha(G))}function ri(){if(this.$$.ptr||Ci(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var G=ha(Object.create(Object.getPrototypeOf(this),{$$:{value:Oo(this.$$)}}));return G.$$.count.value+=1,G.$$.deleteScheduled=!1,G}function zi(){this.$$.ptr||Ci(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&nn("Object already scheduled for deletion"),Ii(this),ma(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function Ma(){return!this.$$.ptr}function ms(){return this.$$.ptr||Ci(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&nn("Object already scheduled for deletion"),La.push(this),La.length===1&&vi&&vi(wo),this.$$.deleteScheduled=!0,this}function so(){za.prototype.isAliasOf=Wi,za.prototype.clone=ri,za.prototype.delete=zi,za.prototype.isDeleted=Ma,za.prototype.deleteLater=ms}function za(){}function Ao(G,$,oe){if(G[$].overloadTable===void 0){var ve=G[$];G[$]=function(){return G[$].overloadTable.hasOwnProperty(arguments.length)||nn("Function '"+oe+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+G[$].overloadTable+")!"),G[$].overloadTable[arguments.length].apply(this,arguments)},G[$].overloadTable=[],G[$].overloadTable[ve.argCount]=ve}}function qi(G,$,oe){i.hasOwnProperty(G)?(nn("Cannot register public name '"+G+"' twice"),Ao(i,G,G),i.hasOwnProperty(oe)&&nn("Cannot register multiple overloads of a function with the same number of arguments ("+oe+")!"),i[G].overloadTable[oe]=$):i[G]=$}function Gs(G,$,oe,ve,Ee,Ge,Ke,He){this.name=G,this.constructor=$,this.instancePrototype=oe,this.rawDestructor=ve,this.baseClass=Ee,this.getActualType=Ge,this.upcast=Ke,this.downcast=He,this.pureVirtualFunctions=[]}function Ho(G,$,oe){for(;$!==oe;)$.upcast||nn("Expected null or instance of "+oe.name+", got an instance of "+$.name),G=$.upcast(G),$=$.baseClass;return G}function Bs(G,$){if($===null)return this.isReference&&nn("null is not a valid "+this.name),0;$.$$||nn('Cannot pass "'+We($)+'" as a '+this.name),$.$$.ptr||nn("Cannot pass deleted object as a pointer of type "+this.name);var oe=$.$$.ptrType.registeredClass,ve=Ho($.$$.ptr,oe,this.registeredClass);return ve}function xo(G,$){var oe;if($===null)return this.isReference&&nn("null is not a valid "+this.name),this.isSmartPointer?(oe=this.rawConstructor(),G!==null&&G.push(this.rawDestructor,oe),oe):0;$.$$||nn('Cannot pass "'+We($)+'" as a '+this.name),$.$$.ptr||nn("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&$.$$.ptrType.isConst&&nn("Cannot convert argument of type "+($.$$.smartPtrType?$.$$.smartPtrType.name:$.$$.ptrType.name)+" to parameter type "+this.name);var ve=$.$$.ptrType.registeredClass;if(oe=Ho($.$$.ptr,ve,this.registeredClass),this.isSmartPointer)switch($.$$.smartPtr===void 0&&nn("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:$.$$.smartPtrType===this?oe=$.$$.smartPtr:nn("Cannot convert argument of type "+($.$$.smartPtrType?$.$$.smartPtrType.name:$.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:oe=$.$$.smartPtr;break;case 2:if($.$$.smartPtrType===this)oe=$.$$.smartPtr;else{var Ee=$.clone();oe=this.rawShare(oe,pn.toHandle(function(){Ee.delete()})),G!==null&&G.push(this.rawDestructor,oe)}break;default:nn("Unsupporting sharing policy")}return oe}function ai(G,$){if($===null)return this.isReference&&nn("null is not a valid "+this.name),0;$.$$||nn('Cannot pass "'+We($)+'" as a '+this.name),$.$$.ptr||nn("Cannot pass deleted object as a pointer of type "+this.name),$.$$.ptrType.isConst&&nn("Cannot convert argument of type "+$.$$.ptrType.name+" to parameter type "+this.name);var oe=$.$$.ptrType.registeredClass,ve=Ho($.$$.ptr,oe,this.registeredClass);return ve}function gi(G){return this.rawGetPointee&&(G=this.rawGetPointee(G)),G}function ee(G){this.rawDestructor&&this.rawDestructor(G)}function Y(G){G!==null&&G.delete()}function le(){Ce.prototype.getPointee=gi,Ce.prototype.destructor=ee,Ce.prototype.argPackAdvance=8,Ce.prototype.readValueFromPointer=Oe,Ce.prototype.deleteObject=Y,Ce.prototype.fromWireType=ni}function Ce(G,$,oe,ve,Ee,Ge,Ke,He,tt,_t,xt){this.name=G,this.registeredClass=$,this.isReference=oe,this.isConst=ve,this.isSmartPointer=Ee,this.pointeeType=Ge,this.sharingPolicy=Ke,this.rawGetPointee=He,this.rawConstructor=tt,this.rawShare=_t,this.rawDestructor=xt,!Ee&&$.baseClass===void 0?ve?(this.toWireType=Bs,this.destructorFunction=null):(this.toWireType=ai,this.destructorFunction=null):this.toWireType=xo}function ze(G,$,oe){i.hasOwnProperty(G)||Et("Replacing nonexistant public symbol"),i[G].overloadTable!==void 0&&oe!==void 0||(i[G]=$,i[G].argCount=oe)}function rt(G,$,oe){var ve=i["dynCall_"+G];return oe&&oe.length?ve.apply(null,[$].concat(oe)):ve.call(null,$)}var ct=[];function et(G){var $=ct[G];return $||(G>=ct.length&&(ct.length=G+1),ct[G]=$=Ne.get(G)),$}function It(G,$,oe){if(G.includes("j"))return rt(G,$,oe);var ve=et($).apply(null,oe);return ve}function gt(G,$){var oe=[];return function(){return oe.length=0,Object.assign(oe,arguments),It(G,$,oe)}}function mt(G,$){G=cr(G);function oe(){return G.includes("j")?gt(G,$):et($)}var ve=oe();return typeof ve!="function"&&nn("unknown function pointer with signature "+G+": "+$),ve}var bt=void 0;function kt(G){var $=wn(G),oe=cr($);return tn($),oe}function dn(G,$){var oe=[],ve={};function Ee(Ge){if(!ve[Ge]&&!ht[Ge]){if(Ut[Ge]){Ut[Ge].forEach(Ee);return}oe.push(Ge),ve[Ge]=!0}}throw $.forEach(Ee),new bt(G+": "+oe.map(kt).join([", "]))}function on(G,$,oe,ve,Ee,Ge,Ke,He,tt,_t,xt,Wt,ln){xt=cr(xt),Ge=mt(Ee,Ge),He&&(He=mt(Ke,He)),_t&&(_t=mt(tt,_t)),ln=mt(Wt,ln);var Mr=Dn(xt);qi(Mr,function(){dn("Cannot construct "+xt+" due to unbound types",[ve])}),$t([G,$,oe],ve?[ve]:[],function(rr){rr=rr[0];var Tr,Pi;ve?(Tr=rr.registeredClass,Pi=Tr.instancePrototype):Pi=za.prototype;var jo=jn(Mr,function(){if(Object.getPrototypeOf(this)!==fl)throw new fi("Use 'new' to construct "+xt);if(Ss.constructor_body===void 0)throw new fi(xt+" has no accessible constructor");var SO=Ss.constructor_body[arguments.length];if(SO===void 0)throw new fi("Tried to invoke ctor of "+xt+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(Ss.constructor_body).toString()+") parameters instead!");return SO.apply(this,arguments)}),fl=Object.create(Pi,{constructor:{value:jo}});jo.prototype=fl;var Ss=new Gs(xt,jo,fl,ln,Tr,Ge,He,_t),Lq=new Ce(xt,Ss,!0,!1,!1),hO=new Ce(xt+"*",Ss,!1,!1,!1),pO=new Ce(xt+" const*",Ss,!1,!0,!1);return Ha[G]={pointerType:hO,constPointerType:pO},ze(Mr,jo),[Lq,hO,pO]})}function sn(G,$){for(var oe=[],ve=0;ve<G;ve++)oe.push(De[$+ve*4>>2]);return oe}function Mt(G,$){if(!(G instanceof Function))throw new TypeError("new_ called with constructor type "+typeof G+" which is not a function");var oe=jn(G.name||"unknownFunctionName",function(){});oe.prototype=G.prototype;var ve=new oe,Ee=G.apply(ve,$);return Ee instanceof Object?Ee:ve}function mn(G,$,oe,ve,Ee){var Ge=$.length;Ge<2&&nn("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var Ke=$[1]!==null&&oe!==null,He=!1,tt=1;tt<$.length;++tt)if($[tt]!==null&&$[tt].destructorFunction===void 0){He=!0;break}for(var _t=$[0].name!=="void",xt="",Wt="",tt=0;tt<Ge-2;++tt)xt+=(tt!==0?", ":"")+"arg"+tt,Wt+=(tt!==0?", ":"")+"arg"+tt+"Wired";var ln="return function "+Dn(G)+"("+xt+`) {
if (arguments.length !== `+(Ge-2)+`) {
throwBindingError('function `+G+" called with ' + arguments.length + ' arguments, expected "+(Ge-2)+` args!');
}
`;He&&(ln+=`var destructors = [];
`);var Mr=He?"destructors":"null",rr=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],Tr=[nn,ve,Ee,Ot,$[0],$[1]];Ke&&(ln+="var thisWired = classParam.toWireType("+Mr+`, this);
`);for(var tt=0;tt<Ge-2;++tt)ln+="var arg"+tt+"Wired = argType"+tt+".toWireType("+Mr+", arg"+tt+"); // "+$[tt+2].name+`
`,rr.push("argType"+tt),Tr.push($[tt+2]);if(Ke&&(Wt="thisWired"+(Wt.length>0?", ":"")+Wt),ln+=(_t?"var rv = ":"")+"invoker(fn"+(Wt.length>0?", ":"")+Wt+`);
`,He)ln+=`runDestructors(destructors);
`;else for(var tt=Ke?1:2;tt<$.length;++tt){var Pi=tt===1?"thisWired":"arg"+(tt-2)+"Wired";$[tt].destructorFunction!==null&&(ln+=Pi+"_dtor("+Pi+"); // "+$[tt].name+`
`,rr.push(Pi+"_dtor"),Tr.push($[tt].destructorFunction))}_t&&(ln+=`var ret = retType.fromWireType(rv);
return ret;
`),ln+=`}
`,rr.push(ln);var jo=Mt(Function,rr).apply(null,Tr);return jo}function cn(G,$,oe,ve,Ee,Ge){O($>0);var Ke=sn($,oe);Ee=mt(ve,Ee),$t([],[G],function(He){He=He[0];var tt="constructor "+He.name;if(He.registeredClass.constructor_body===void 0&&(He.registeredClass.constructor_body=[]),He.registeredClass.constructor_body[$-1]!==void 0)throw new fi("Cannot register multiple constructors with identical number of parameters ("+($-1)+") for class '"+He.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return He.registeredClass.constructor_body[$-1]=()=>{dn("Cannot construct "+He.name+" due to unbound types",Ke)},$t([],Ke,function(_t){return _t.splice(1,0,null),He.registeredClass.constructor_body[$-1]=mn(tt,_t,null,Ee,Ge),[]}),[]})}function _n(G,$,oe,ve,Ee,Ge,Ke,He){var tt=sn(oe,ve);$=cr($),Ge=mt(Ee,Ge),$t([],[G],function(_t){_t=_t[0];var xt=_t.name+"."+$;$.startsWith("@@")&&($=Symbol[$.substring(2)]),He&&_t.registeredClass.pureVirtualFunctions.push($);function Wt(){dn("Cannot call "+xt+" due to unbound types",tt)}var ln=_t.registeredClass.instancePrototype,Mr=ln[$];return Mr===void 0||Mr.overloadTable===void 0&&Mr.className!==_t.name&&Mr.argCount===oe-2?(Wt.argCount=oe-2,Wt.className=_t.name,ln[$]=Wt):(Ao(ln,$,xt),ln[$].overloadTable[oe-2]=Wt),$t([],tt,function(rr){var Tr=mn(xt,rr,_t,Ge,Ke);return ln[$].overloadTable===void 0?(Tr.argCount=oe-2,ln[$]=Tr):ln[$].overloadTable[oe-2]=Tr,[]}),[]})}var rn=[],vn=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function Nn(G){G>4&&--vn[G].refcount===0&&(vn[G]=void 0,rn.push(G))}function an(){for(var G=0,$=5;$<vn.length;++$)vn[$]!==void 0&&++G;return G}function Vt(){for(var G=5;G<vn.length;++G)if(vn[G]!==void 0)return vn[G];return null}function Er(){i.count_emval_handles=an,i.get_first_emval=Vt}var pn={toValue:G=>(G||nn("Cannot use deleted val. handle = "+G),vn[G].value),toHandle:G=>{switch(G){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var $=rn.length?rn.pop():vn.length;return vn[$]={refcount:1,value:G},$}}}};function Se(G,$){$=cr($),ya(G,{name:$,fromWireType:function(oe){var ve=pn.toValue(oe);return Nn(oe),ve},toWireType:function(oe,ve){return pn.toHandle(ve)},argPackAdvance:8,readValueFromPointer:Oe,destructorFunction:null})}function We(G){if(G===null)return"null";var $=typeof G;return $==="object"||$==="array"||$==="function"?G.toString():""+G}function lt(G,$){switch($){case 2:return function(oe){return this.fromWireType(pe[oe>>2])};case 3:return function(oe){return this.fromWireType(Te[oe>>3])};default:throw new TypeError("Unknown float type: "+G)}}function wt(G,$,oe){var ve=Kt(oe);$=cr($),ya(G,{name:$,fromWireType:function(Ee){return Ee},toWireType:function(Ee,Ge){return Ge},argPackAdvance:8,readValueFromPointer:lt($,ve),destructorFunction:null})}function On(G,$,oe){switch($){case 0:return oe?function(Ee){return U[Ee]}:function(Ee){return V[Ee]};case 1:return oe?function(Ee){return X[Ee>>1]}:function(Ee){return re[Ee>>1]};case 2:return oe?function(Ee){return ue[Ee>>2]}:function(Ee){return De[Ee>>2]};default:throw new TypeError("Unknown integer type: "+G)}}function Sn(G,$,oe,ve,Ee){$=cr($);var Ge=Kt(oe),Ke=Wt=>Wt;if(ve===0){var He=32-8*oe;Ke=Wt=>Wt<<He>>>He}var tt=$.includes("unsigned"),_t=(Wt,ln)=>{},xt;tt?xt=function(Wt,ln){return _t(ln,this.name),ln>>>0}:xt=function(Wt,ln){return _t(ln,this.name),ln},ya(G,{name:$,fromWireType:Ke,toWireType:xt,argPackAdvance:8,readValueFromPointer:On($,Ge,ve!==0),destructorFunction:null})}function Bn(G,$,oe){var ve=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],Ee=ve[$];function Ge(Ke){Ke=Ke>>2;var He=De,tt=He[Ke],_t=He[Ke+1];return new Ee(F,_t,tt)}oe=cr(oe),ya(G,{name:oe,fromWireType:Ge,argPackAdvance:8,readValueFromPointer:Ge},{ignoreDuplicateRegistrations:!0})}function Qn(G,$){$=cr($);var oe=$==="std::string";ya(G,{name:$,fromWireType:function(ve){var Ee=De[ve>>2],Ge=ve+4,Ke;if(oe)for(var He=Ge,tt=0;tt<=Ee;++tt){var _t=Ge+tt;if(tt==Ee||V[_t]==0){var xt=_t-He,Wt=P(He,xt);Ke===void 0?Ke=Wt:(Ke+="\0",Ke+=Wt),He=_t+1}}else{for(var ln=new Array(Ee),tt=0;tt<Ee;++tt)ln[tt]=String.fromCharCode(V[Ge+tt]);Ke=ln.join("")}return tn(ve),Ke},toWireType:function(ve,Ee){Ee instanceof ArrayBuffer&&(Ee=new Uint8Array(Ee));var Ge,Ke=typeof Ee=="string";Ke||Ee instanceof Uint8Array||Ee instanceof Uint8ClampedArray||Ee instanceof Int8Array||nn("Cannot pass non-string to std::string"),oe&&Ke?Ge=H(Ee):Ge=Ee.length;var He=jt(4+Ge+1),tt=He+4;if(De[He>>2]=Ge,oe&&Ke)L(Ee,tt,Ge+1);else if(Ke)for(var _t=0;_t<Ge;++_t){var xt=Ee.charCodeAt(_t);xt>255&&(tn(tt),nn("String has UTF-16 code units that do not fit in 8 bits")),V[tt+_t]=xt}else for(var _t=0;_t<Ge;++_t)V[tt+_t]=Ee[_t];return ve!==null&&ve.push(tn,He),He},argPackAdvance:8,readValueFromPointer:Oe,destructorFunction:function(ve){tn(ve)}})}var Zr=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function jr(G,$){for(var oe=G,ve=oe>>1,Ee=ve+$/2;!(ve>=Ee)&&re[ve];)++ve;if(oe=ve<<1,oe-G>32&&Zr)return Zr.decode(V.subarray(G,oe));for(var Ge="",Ke=0;!(Ke>=$/2);++Ke){var He=X[G+Ke*2>>1];if(He==0)break;Ge+=String.fromCharCode(He)}return Ge}function Jr(G,$,oe){if(oe===void 0&&(oe=2147483647),oe<2)return 0;oe-=2;for(var ve=$,Ee=oe<G.length*2?oe/2:G.length,Ge=0;Ge<Ee;++Ge){var Ke=G.charCodeAt(Ge);X[$>>1]=Ke,$+=2}return X[$>>1]=0,$-ve}function Fa(G){return G.length*2}function qa(G,$){for(var oe=0,ve="";!(oe>=$/4);){var Ee=ue[G+oe*4>>2];if(Ee==0)break;if(++oe,Ee>=65536){var Ge=Ee-65536;ve+=String.fromCharCode(55296|Ge>>10,56320|Ge&1023)}else ve+=String.fromCharCode(Ee)}return ve}function ea(G,$,oe){if(oe===void 0&&(oe=2147483647),oe<4)return 0;for(var ve=$,Ee=ve+oe-4,Ge=0;Ge<G.length;++Ge){var Ke=G.charCodeAt(Ge);if(Ke>=55296&&Ke<=57343){var He=G.charCodeAt(++Ge);Ke=65536+((Ke&1023)<<10)|He&1023}if(ue[$>>2]=Ke,$+=4,$+4>Ee)break}return ue[$>>2]=0,$-ve}function Vr(G){for(var $=0,oe=0;oe<G.length;++oe){var ve=G.charCodeAt(oe);ve>=55296&&ve<=57343&&++oe,$+=4}return $}function $o(G,$,oe){oe=cr(oe);var ve,Ee,Ge,Ke,He;$===2?(ve=jr,Ee=Jr,Ke=Fa,Ge=()=>re,He=1):$===4&&(ve=qa,Ee=ea,Ke=Vr,Ge=()=>De,He=2),ya(G,{name:oe,fromWireType:function(tt){for(var _t=De[tt>>2],xt=Ge(),Wt,ln=tt+4,Mr=0;Mr<=_t;++Mr){var rr=tt+4+Mr*$;if(Mr==_t||xt[rr>>He]==0){var Tr=rr-ln,Pi=ve(ln,Tr);Wt===void 0?Wt=Pi:(Wt+="\0",Wt+=Pi),ln=rr+$}}return tn(tt),Wt},toWireType:function(tt,_t){typeof _t!="string"&&nn("Cannot pass non-string to C++ string type "+oe);var xt=Ke(_t),Wt=jt(4+xt+$);return De[Wt>>2]=xt>>He,Ee(_t,Wt+4,xt+$),tt!==null&&tt.push(tn,Wt),Wt},argPackAdvance:8,readValueFromPointer:Oe,destructorFunction:function(tt){tn(tt)}})}function zo(G,$,oe,ve,Ee,Ge){at[G]={name:cr($),rawConstructor:mt(oe,ve),rawDestructor:mt(Ee,Ge),fields:[]}}function co(G,$,oe,ve,Ee,Ge,Ke,He,tt,_t){at[G].fields.push({fieldName:cr($),getterReturnType:oe,getter:mt(ve,Ee),getterContext:Ge,setterArgumentType:Ke,setter:mt(He,tt),setterContext:_t})}function d0(G,$){$=cr($),ya(G,{isVoid:!0,name:$,argPackAdvance:0,fromWireType:function(){},toWireType:function(oe,ve){}})}function m0(){throw 1/0}var Ws={};function Hs(G){var $=Ws[G];return $===void 0?cr(G):$}function oc(){return typeof globalThis=="object"?globalThis:function(){return Function}()("return this")()}function hs(G){return G===0?pn.toHandle(oc()):(G=Hs(G),pn.toHandle(oc()[G]))}function Cu(G){G>4&&(vn[G].refcount+=1)}function sl(G,$){var oe=ht[G];return oe===void 0&&nn($+" has unknown type "+kt(G)),oe}function Iu(G){for(var $="",oe=0;oe<G;++oe)$+=(oe!==0?", ":"")+"arg"+oe;for(var ve=()=>De,Ee="return function emval_allocator_"+G+`(constructor, argTypes, args) {
  var HEAPU32 = getMemory();
`,oe=0;oe<G;++oe)Ee+="var argType"+oe+" = requireRegisteredType(HEAPU32[((argTypes)>>2)], 'parameter "+oe+`');
var arg`+oe+" = argType"+oe+`.readValueFromPointer(args);
args += argType`+oe+`['argPackAdvance'];
argTypes += 4;
`;return Ee+="var obj = new constructor("+$+`);
return valueToHandle(obj);
}
`,new Function("requireRegisteredType","Module","valueToHandle","getMemory",Ee)(sl,i,pn.toHandle,ve)}var sc={};function Du(G,$,oe,ve){G=pn.toValue(G);var Ee=sc[$];return Ee||(Ee=Iu($),sc[$]=Ee),Ee(G,oe,ve)}function Eu(G,$){G=sl(G,"_emval_take_value");var oe=G.readValueFromPointer($);return pn.toHandle(oe)}function Tu(){he("")}function yu(G,$,oe){V.copyWithin(G,$,$+oe)}function cc(){return 2147483648}function Mu(G){try{return M.grow(G-F.byteLength+65535>>>16),Fe(M.buffer),1}catch{}}function qo(G){var $=V.length;G=G>>>0;var oe=cc();if(G>oe)return!1;let ve=(tt,_t)=>tt+(_t-tt%_t)%_t;for(var Ee=1;Ee<=4;Ee*=2){var Ge=$*(1+.2/Ee);Ge=Math.min(Ge,G+100663296);var Ke=Math.min(oe,ve(Math.max(G,Ge),65536)),He=Mu(Ke);if(He)return!0}return!1}var h0={};function lo(){return l||"./this.program"}function ps(){if(!ps.strings){var G=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",$={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:G,_:lo()};for(var oe in h0)h0[oe]===void 0?delete $[oe]:$[oe]=h0[oe];var ve=[];for(var oe in $)ve.push(oe+"="+$[oe]);ps.strings=ve}return ps.strings}function cl(G,$,oe){for(var ve=0;ve<G.length;++ve)U[$++>>0]=G.charCodeAt(ve);U[$>>0]=0}function lc(G,$){var oe=0;return ps().forEach(function(ve,Ee){var Ge=$+oe;De[G+Ee*4>>2]=Ge,cl(ve,Ge),oe+=ve.length+1}),0}function ll(G,$){var oe=ps();De[G>>2]=oe.length;var ve=0;return oe.forEach(function(Ee){ve+=Ee.length+1}),De[$>>2]=ve,0}function p0(G){b()||(i.onExit&&i.onExit(G),_=!0),u(G,new Me(G))}function ul(G,$){p0(G)}var ae=ul;function ce(G){return 52}function _e(G,$,oe,ve,Ee){return 70}var je=[null,[],[]];function ut(G,$){var oe=je[G];$===0||$===10?((G===1?D:E)(x(oe,0)),oe.length=0):oe.push($)}function pt(G,$,oe,ve){for(var Ee=0,Ge=0;Ge<oe;Ge++){var Ke=De[$>>2],He=De[$+4>>2];$+=8;for(var tt=0;tt<He;tt++)ut(G,V[Ke+tt]);Ee+=He}return De[ve>>2]=Ee,0}function St(G){var $=i["_"+G];return $}function ft(G,$){U.set(G,$)}function Tt(G,$,oe,ve,Ee){var Ge={string:rr=>{var Tr=0;if(rr!=null&&rr!==0){var Pi=(rr.length<<2)+1;Tr=ke(Pi),L(rr,Tr,Pi)}return Tr},array:rr=>{var Tr=ke(rr.length);return ft(rr,Tr),Tr}};function Ke(rr){return $==="string"?P(rr):$==="boolean"?!!rr:rr}var He=St(G),tt=[],_t=0;if(ve)for(var xt=0;xt<ve.length;xt++){var Wt=Ge[oe[xt]];Wt?(_t===0&&(_t=te()),tt[xt]=Wt(ve[xt])):tt[xt]=ve[xt]}var ln=He.apply(null,tt);function Mr(rr){return _t!==0&&Ie(_t),Ke(rr)}return ln=Mr(ln),ln}Qe=i.InternalError=xn(Error,"InternalError"),qr(),fi=i.BindingError=xn(Error,"BindingError"),so(),Po(),le(),bt=i.UnboundTypeError=xn(Error,"UnboundTypeError"),Er();var Nt={g:Ze,A:Fn,w:Rr,F:wi,u:on,t:cn,c:_n,E:Se,m:wt,b:Sn,a:Bn,l:Qn,h:$o,J:zo,d:co,G:d0,x:m0,i:Nn,r:hs,p:Cu,q:Du,s:Eu,j:Tu,D:yu,y:qo,z:lc,B:ll,I:ae,C:ce,v:_e,k:pt,o:Ct,n:Q,H:z,f:yt,e:dt};Ue(),i.___wasm_call_ctors=function(){return(i.___wasm_call_ctors=i.asm.L).apply(null,arguments)};var jt=i._malloc=function(){return(jt=i._malloc=i.asm.N).apply(null,arguments)},tn=i._free=function(){return(tn=i._free=i.asm.O).apply(null,arguments)},wn=i.___getTypeName=function(){return(wn=i.___getTypeName=i.asm.P).apply(null,arguments)};i.__embind_initialize_bindings=function(){return(i.__embind_initialize_bindings=i.asm.Q).apply(null,arguments)};var ne=i._setThrew=function(){return(ne=i._setThrew=i.asm.R).apply(null,arguments)},te=i.stackSave=function(){return(te=i.stackSave=i.asm.S).apply(null,arguments)},Ie=i.stackRestore=function(){return(Ie=i.stackRestore=i.asm.T).apply(null,arguments)},ke=i.stackAlloc=function(){return(ke=i.stackAlloc=i.asm.U).apply(null,arguments)},Je=i.___cxa_is_pointer_type=function(){return(Je=i.___cxa_is_pointer_type=i.asm.V).apply(null,arguments)};i.dynCall_jiji=function(){return(i.dynCall_jiji=i.asm.W).apply(null,arguments)};function yt(G,$){var oe=te();try{et(G)($)}catch(ve){if(Ie(oe),ve!==ve+0)throw ve;ne(1,0)}}function Ct(G,$){var oe=te();try{return et(G)($)}catch(ve){if(Ie(oe),ve!==ve+0)throw ve;ne(1,0)}}function dt(G,$,oe,ve){var Ee=te();try{et(G)($,oe,ve)}catch(Ge){if(Ie(Ee),Ge!==Ge+0)throw Ge;ne(1,0)}}function z(G,$,oe,ve){var Ee=te();try{return et(G)($,oe,ve)}catch(Ge){if(Ie(Ee),Ge!==Ge+0)throw Ge;ne(1,0)}}function Q(G,$,oe){var ve=te();try{return et(G)($,oe)}catch(Ee){if(Ie(ve),Ee!==Ee+0)throw Ee;ne(1,0)}}i.ccall=Tt;var de;be=function G(){de||xe(),de||(be=G)};function xe(G){if(we>0||(N(),we>0))return;function $(){de||(de=!0,i.calledRun=!0,!_&&(W(),o(i),i.onRuntimeInitialized&&i.onRuntimeInitialized(),j()))}i.setStatus?(i.setStatus("Running..."),setTimeout(function(){setTimeout(function(){i.setStatus("")},1),$()},1)):$()}if(i.preInit)for(typeof i.preInit=="function"&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.pop()();return xe(),a.ready}})();t.exports=n}(OE)),OE.exports}var ade=rde();const ide=Yc(ade),ode=new URL("/nifti-viewer/assets/libjpegturbowasm_decode-daqMmuVl.wasm",import.meta.url),K2={codec:void 0,decoder:void 0};function sde(){if(K2.codec)return Promise.resolve();const t=ide({locateFile:e=>e.endsWith(".wasm")?ode.toString():e});return new Promise((e,n)=>{t.then(r=>{K2.codec=r,K2.decoder=new r.JPEGDecoder,e()},n)})}async function cde(t,e){await sde();const n=K2.decoder;n.getEncodedBuffer(t.length).set(t),n.decode();const a=n.getFrameInfo(),i=n.getDecodedBuffer(),o={columns:a.width,rows:a.height,bitsPerPixel:a.bitsPerSample,signed:e.signed,bytesPerPixel:e.bytesPerPixel,componentsPerPixel:a.componentCount},s=lde(a,i),c={frameInfo:a};return{...e,pixelData:s,imageInfo:o,encodeOptions:c,...c,...o}}function lde(t,e){return t.isSigned?new Int8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}const ude="modulepreload",fde=function(t){return"/nifti-viewer/"+t},A9={},S_=function(e,n,r){let a=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),s=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(n.map(c=>{if(c=fde(c),c in A9)return;A9[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const f=document.createElement("link");if(f.rel=l?"stylesheet":ude,l||(f.as="script"),f.crossOrigin="",f.href=c,s&&f.setAttribute("nonce",s),document.head.appendChild(f),l)return new Promise((v,g)=>{f.addEventListener("load",v),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o}return a.then(o=>{for(const s of o||[])s.status==="rejected"&&i(s.reason);return e().catch(i)})},Sd={JpegImage:void 0,decodeConfig:{}};function vde(t){return Sd.decodeConfig=t,Sd.JpegImage?Promise.resolve():new Promise((e,n)=>{S_(()=>import("./jpeg-HBGIxCW8.js"),[]).then(r=>{Sd.JpegImage=r.default,e()}).catch(n)})}async function gde(t,e){if(await vde(),typeof Sd.JpegImage>"u")throw new Error("No JPEG Baseline decoder loaded");const n=new Sd.JpegImage;if(n.parse(e),n.colorTransform=!1,t.bitsAllocated===8)return t.pixelData=n.getData(t.columns,t.rows),t;if(t.bitsAllocated===16)return t.pixelData=n.getData16(t.columns,t.rows),t}const Cd={jpeg:void 0,decodeConfig:{}};function dde(t){return Cd.decodeConfig=t,Cd.jpeg?Promise.resolve():new Promise((e,n)=>{S_(async()=>{const{Decoder:r}=await import("./lossless-BIYWXcdg.js");return{Decoder:r}},[]).then(({Decoder:r})=>{const a=new r;Cd.jpeg=a,e()},n)})}async function x9(t,e){if(await dde(),typeof Cd.jpeg>"u")throw new Error("No JPEG Lossless decoder loaded");const n=t.bitsAllocated<=8?1:2,r=e.buffer,a=Cd.jpeg.decode(r,e.byteOffset,e.length,n);return t.pixelRepresentation===0?t.bitsAllocated===16?(t.pixelData=new Uint16Array(a.buffer),t):(t.pixelData=new Uint8Array(a.buffer),t):(t.pixelData=new Int16Array(a.buffer),t)}var wE={exports:{}},R9;function mde(){return R9||(R9=1,function(t,e){var n=(()=>{var r=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(r=r||__filename),function(a){a=a||{};var i=typeof a<"u"?a:{},o,s;i.ready=new Promise(function(ae,ce){o=ae,s=ce});var c=Object.assign({},i),l=typeof window=="object",u=typeof importScripts=="function",f=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",v="";function g(ae){return i.locateFile?i.locateFile(ae,v):v+ae}var d,m,h;if(f){var C=j0,p=j0;u?v=p.dirname(v)+"/":v=__dirname+"/",d=(ae,ce)=>(ae=Z(ae)?new URL(ae):p.normalize(ae),C.readFileSync(ae,ce?void 0:"utf8")),h=ae=>{var ce=d(ae,!0);return ce.buffer||(ce=new Uint8Array(ce)),ce},m=(ae,ce,_e)=>{ae=Z(ae)?new URL(ae):p.normalize(ae),C.readFile(ae,function(je,ut){je?_e(je):ce(ut.buffer)})},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",function(ae){if(!(ae instanceof fe))throw ae}),process.on("unhandledRejection",function(ae){throw ae}),i.inspect=function(){return"[Emscripten Module object]"}}else(l||u)&&(u?v=self.location.href:typeof document<"u"&&document.currentScript&&(v=document.currentScript.src),r&&(v=r),v.indexOf("blob:")!==0?v=v.substr(0,v.replace(/[?#].*/,"").lastIndexOf("/")+1):v="",d=ae=>{var ce=new XMLHttpRequest;return ce.open("GET",ae,!1),ce.send(null),ce.responseText},u&&(h=ae=>{var ce=new XMLHttpRequest;return ce.open("GET",ae,!1),ce.responseType="arraybuffer",ce.send(null),new Uint8Array(ce.response)}),m=(ae,ce,_e)=>{var je=new XMLHttpRequest;je.open("GET",ae,!0),je.responseType="arraybuffer",je.onload=()=>{if(je.status==200||je.status==0&&je.response){ce(je.response);return}_e()},je.onerror=_e,je.send(null)});i.print||console.log.bind(console);var S=i.printErr||console.warn.bind(console);Object.assign(i,c),c=null,i.arguments&&i.arguments,i.thisProgram&&i.thisProgram,i.quit&&i.quit;var I;i.wasmBinary&&(I=i.wasmBinary),i.noExitRuntime,typeof WebAssembly!="object"&&ye("no native wasm support detected");var D,E=!1;function T(ae,ce){ae||ye(ce)}var y=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function M(ae,ce,_e){for(var je=ce+_e,ut=ce;ae[ut]&&!(ut>=je);)++ut;if(ut-ce>16&&ae.buffer&&y)return y.decode(ae.subarray(ce,ut));for(var pt="";ce<ut;){var St=ae[ce++];if(!(St&128)){pt+=String.fromCharCode(St);continue}var ft=ae[ce++]&63;if((St&224)==192){pt+=String.fromCharCode((St&31)<<6|ft);continue}var Tt=ae[ce++]&63;if((St&240)==224?St=(St&15)<<12|ft<<6|Tt:St=(St&7)<<18|ft<<12|Tt<<6|ae[ce++]&63,St<65536)pt+=String.fromCharCode(St);else{var Nt=St-65536;pt+=String.fromCharCode(55296|Nt>>10,56320|Nt&1023)}}return pt}function _(ae,ce){return ae?M(L,ae,ce):""}function O(ae,ce,_e,je){if(!(je>0))return 0;for(var ut=_e,pt=_e+je-1,St=0;St<ae.length;++St){var ft=ae.charCodeAt(St);if(ft>=55296&&ft<=57343){var Tt=ae.charCodeAt(++St);ft=65536+((ft&1023)<<10)|Tt&1023}if(ft<=127){if(_e>=pt)break;ce[_e++]=ft}else if(ft<=2047){if(_e+1>=pt)break;ce[_e++]=192|ft>>6,ce[_e++]=128|ft&63}else if(ft<=65535){if(_e+2>=pt)break;ce[_e++]=224|ft>>12,ce[_e++]=128|ft>>6&63,ce[_e++]=128|ft&63}else{if(_e+3>=pt)break;ce[_e++]=240|ft>>18,ce[_e++]=128|ft>>12&63,ce[_e++]=128|ft>>6&63,ce[_e++]=128|ft&63}}return ce[_e]=0,_e-ut}function w(ae,ce,_e){return O(ae,L,ce,_e)}function x(ae){for(var ce=0,_e=0;_e<ae.length;++_e){var je=ae.charCodeAt(_e);je<=127?ce++:je<=2047?ce+=2:je>=55296&&je<=57343?(ce+=4,++_e):ce+=3}return ce}var P,R,L,H,F,U,V,X,re;function ue(ae){P=ae,i.HEAP8=R=new Int8Array(ae),i.HEAP16=H=new Int16Array(ae),i.HEAP32=U=new Int32Array(ae),i.HEAPU8=L=new Uint8Array(ae),i.HEAPU16=F=new Uint16Array(ae),i.HEAPU32=V=new Uint32Array(ae),i.HEAPF32=X=new Float32Array(ae),i.HEAPF64=re=new Float64Array(ae)}i.INITIAL_MEMORY;var De,pe=[],Te=[],Fe=[];function Ne(){if(i.preRun)for(typeof i.preRun=="function"&&(i.preRun=[i.preRun]);i.preRun.length;)A(i.preRun.shift());q(pe)}function Re(){q(Te)}function k(){if(i.postRun)for(typeof i.postRun=="function"&&(i.postRun=[i.postRun]);i.postRun.length;)N(i.postRun.shift());q(Fe)}function A(ae){pe.unshift(ae)}function b(ae){Te.unshift(ae)}function N(ae){Fe.unshift(ae)}var W=0,j=null;function K(ae){W++,i.monitorRunDependencies&&i.monitorRunDependencies(W)}function ge(ae){if(W--,i.monitorRunDependencies&&i.monitorRunDependencies(W),W==0&&j){var ce=j;j=null,ce()}}function ye(ae){i.onAbort&&i.onAbort(ae),ae="Aborted("+ae+")",S(ae),E=!0,ae+=". Build with -sASSERTIONS for more info.";var ce=new WebAssembly.RuntimeError(ae);throw s(ce),ce}var we="data:application/octet-stream;base64,";function be(ae){return ae.startsWith(we)}function Z(ae){return ae.startsWith("file://")}var ie;ie="charlswasm_decode.wasm",be(ie)||(ie=g(ie));function he(ae){try{if(ae==ie&&I)return new Uint8Array(I);if(h)return h(ae);throw"both async and sync fetching of the wasm failed"}catch(ce){ye(ce)}}function se(){if(!I&&(l||u)){if(typeof fetch=="function"&&!Z(ie))return fetch(ie,{credentials:"same-origin"}).then(function(ae){if(!ae.ok)throw"failed to load wasm binary file at '"+ie+"'";return ae.arrayBuffer()}).catch(function(){return he(ie)});if(m)return new Promise(function(ae,ce){m(ie,function(_e){ae(new Uint8Array(_e))},ce)})}return Promise.resolve().then(function(){return he(ie)})}function me(){var ae={a:Mu};function ce(St,ft){var Tt=St.exports;i.asm=Tt,D=i.asm.z,ue(D.buffer),De=i.asm.C,b(i.asm.A),ge()}K();function _e(St){ce(St.instance)}function je(St){return se().then(function(ft){return WebAssembly.instantiate(ft,ae)}).then(function(ft){return ft}).then(St,function(ft){S("failed to asynchronously prepare wasm: "+ft),ye(ft)})}function ut(){return!I&&typeof WebAssembly.instantiateStreaming=="function"&&!be(ie)&&!Z(ie)&&!f&&typeof fetch=="function"?fetch(ie,{credentials:"same-origin"}).then(function(St){var ft=WebAssembly.instantiateStreaming(St,ae);return ft.then(_e,function(Tt){return S("wasm streaming compile failed: "+Tt),S("falling back to ArrayBuffer instantiation"),je(_e)})}):je(_e)}if(i.instantiateWasm)try{var pt=i.instantiateWasm(ae,ce);return pt}catch(St){S("Module.instantiateWasm callback failed with error: "+St),s(St)}return ut().catch(s),{}}function fe(ae){this.name="ExitStatus",this.message="Program terminated with exit("+ae+")",this.status=ae}function q(ae){for(;ae.length>0;)ae.shift()(i)}function Pe(ae){this.excPtr=ae,this.ptr=ae-24,this.set_type=function(ce){V[this.ptr+4>>2]=ce},this.get_type=function(){return V[this.ptr+4>>2]},this.set_destructor=function(ce){V[this.ptr+8>>2]=ce},this.get_destructor=function(){return V[this.ptr+8>>2]},this.set_refcount=function(ce){U[this.ptr>>2]=ce},this.set_caught=function(ce){ce=ce?1:0,R[this.ptr+12>>0]=ce},this.get_caught=function(){return R[this.ptr+12>>0]!=0},this.set_rethrown=function(ce){ce=ce?1:0,R[this.ptr+13>>0]=ce},this.get_rethrown=function(){return R[this.ptr+13>>0]!=0},this.init=function(ce,_e){this.set_adjusted_ptr(0),this.set_type(ce),this.set_destructor(_e),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var ce=U[this.ptr>>2];U[this.ptr>>2]=ce+1},this.release_ref=function(){var ce=U[this.ptr>>2];return U[this.ptr>>2]=ce-1,ce===1},this.set_adjusted_ptr=function(ce){V[this.ptr+16>>2]=ce},this.get_adjusted_ptr=function(){return V[this.ptr+16>>2]},this.get_exception_ptr=function(){var ce=ll(this.get_type());if(ce)return V[this.excPtr>>2];var _e=this.get_adjusted_ptr();return _e!==0?_e:this.excPtr}}function Le(ae,ce,_e){var je=new Pe(ae);throw je.init(ce,_e),ae}var Ue={};function Me(ae){for(;ae.length;){var ce=ae.pop(),_e=ae.pop();_e(ce)}}function Be(ae){return this.fromWireType(U[ae>>2])}var nt={},Ze={},at={},Ot=48,Oe=57;function $e(ae){if(ae===void 0)return"_unknown";ae=ae.replace(/[^a-zA-Z0-9_]/g,"$");var ce=ae.charCodeAt(0);return ce>=Ot&&ce<=Oe?"_"+ae:ae}function ht(ae,ce){return ae=$e(ae),new Function("body","return function "+ae+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(ce)}function Ut(ae,ce){var _e=ht(ce,function(je){this.name=ce,this.message=je;var ut=new Error(je).stack;ut!==void 0&&(this.stack=this.toString()+`
`+ut.replace(/^Error(:[^\n]*)?\n/,""))});return _e.prototype=Object.create(ae.prototype),_e.prototype.constructor=_e,_e.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},_e}var Qt=void 0;function Rt(ae){throw new Qt(ae)}function Dn(ae,ce,_e){ae.forEach(function(ft){at[ft]=ce});function je(ft){var Tt=_e(ft);Tt.length!==ae.length&&Rt("Mismatched type converter count");for(var Nt=0;Nt<ae.length;++Nt)qr(ae[Nt],Tt[Nt])}var ut=new Array(ce.length),pt=[],St=0;ce.forEach((ft,Tt)=>{Ze.hasOwnProperty(ft)?ut[Tt]=Ze[ft]:(pt.push(ft),nt.hasOwnProperty(ft)||(nt[ft]=[]),nt[ft].push(()=>{ut[Tt]=Ze[ft],++St,St===pt.length&&je(ut)}))}),pt.length===0&&je(ut)}function jn(ae){var ce=Ue[ae];delete Ue[ae];var _e=ce.rawConstructor,je=ce.rawDestructor,ut=ce.fields,pt=ut.map(St=>St.getterReturnType).concat(ut.map(St=>St.setterArgumentType));Dn([ae],pt,St=>{var ft={};return ut.forEach((Tt,Nt)=>{var jt=Tt.fieldName,tn=St[Nt],wn=Tt.getter,ne=Tt.getterContext,te=St[Nt+ut.length],Ie=Tt.setter,ke=Tt.setterContext;ft[jt]={read:Je=>tn.fromWireType(wn(ne,Je)),write:(Je,yt)=>{var Ct=[];Ie(ke,Je,te.toWireType(Ct,yt)),Me(Ct)}}}),[{name:ce.name,fromWireType:function(Tt){var Nt={};for(var jt in ft)Nt[jt]=ft[jt].read(Tt);return je(Tt),Nt},toWireType:function(Tt,Nt){for(var jt in ft)if(!(jt in Nt))throw new TypeError('Missing field:  "'+jt+'"');var tn=_e();for(jt in ft)ft[jt].write(tn,Nt[jt]);return Tt!==null&&Tt.push(je,tn),tn},argPackAdvance:8,readValueFromPointer:Be,destructorFunction:je}]})}function xn(ae,ce,_e,je,ut){}function Qe(ae){switch(ae){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+ae)}}function Et(){for(var ae=new Array(256),ce=0;ce<256;++ce)ae[ce]=String.fromCharCode(ce);$t=ae}var $t=void 0;function Fn(ae){for(var ce="",_e=ae;L[_e];)ce+=$t[L[_e++]];return ce}var Rr=void 0;function Kt(ae){throw new Rr(ae)}function qr(ae,ce,_e={}){if(!("argPackAdvance"in ce))throw new TypeError("registerType registeredInstance requires argPackAdvance");var je=ce.name;if(ae||Kt('type "'+je+'" must have a positive integer typeid pointer'),Ze.hasOwnProperty(ae)){if(_e.ignoreDuplicateRegistrations)return;Kt("Cannot register type '"+je+"' twice")}if(Ze[ae]=ce,delete at[ae],nt.hasOwnProperty(ae)){var ut=nt[ae];delete nt[ae],ut.forEach(pt=>pt())}}function Rn(ae,ce,_e,je,ut){var pt=Qe(_e);ce=Fn(ce),qr(ae,{name:ce,fromWireType:function(St){return!!St},toWireType:function(St,ft){return ft?je:ut},argPackAdvance:8,readValueFromPointer:function(St){var ft;if(_e===1)ft=R;else if(_e===2)ft=H;else if(_e===4)ft=U;else throw new TypeError("Unknown boolean type size: "+ce);return this.fromWireType(ft[St>>pt])},destructorFunction:null})}function cr(ae){if(!(this instanceof ri)||!(ae instanceof ri))return!1;for(var ce=this.$$.ptrType.registeredClass,_e=this.$$.ptr,je=ae.$$.ptrType.registeredClass,ut=ae.$$.ptr;ce.baseClass;)_e=ce.upcast(_e),ce=ce.baseClass;for(;je.baseClass;)ut=je.upcast(ut),je=je.baseClass;return ce===je&&_e===ut}function fi(ae){return{count:ae.count,deleteScheduled:ae.deleteScheduled,preservePointerOnDelete:ae.preservePointerOnDelete,ptr:ae.ptr,ptrType:ae.ptrType,smartPtr:ae.smartPtr,smartPtrType:ae.smartPtrType}}function nn(ae){function ce(_e){return _e.$$.ptrType.registeredClass.name}Kt(ce(ae)+" instance already deleted")}var ya=!1;function wi(ae){}function Wi(ae){ae.smartPtr?ae.smartPtrType.rawDestructor(ae.smartPtr):ae.ptrType.registeredClass.rawDestructor(ae.ptr)}function Oo(ae){ae.count.value-=1;var ce=ae.count.value===0;ce&&Wi(ae)}function Ci(ae,ce,_e){if(ce===_e)return ae;if(_e.baseClass===void 0)return null;var je=Ci(ae,ce,_e.baseClass);return je===null?null:_e.downcast(je)}var mr={};function Ii(){return Object.keys(La).length}function Gn(){var ae=[];for(var ce in La)La.hasOwnProperty(ce)&&ae.push(La[ce]);return ae}var ma=[];function Hi(){for(;ma.length;){var ae=ma.pop();ae.$$.deleteScheduled=!1,ae.delete()}}var Ha=void 0;function ti(ae){Ha=ae,ma.length&&Ha&&Ha(Hi)}function Di(){i.getInheritedInstanceCount=Ii,i.getLiveInheritedInstances=Gn,i.flushPendingDeletes=Hi,i.setDelayFunction=ti}var La={};function wo(ae,ce){for(ce===void 0&&Kt("ptr should not be undefined");ae.baseClass;)ce=ae.upcast(ce),ae=ae.baseClass;return ce}function vi(ae,ce){return ce=wo(ae,ce),La[ce]}function Ua(ae,ce){(!ce.ptrType||!ce.ptr)&&Rt("makeClassHandle requires ptr and ptrType");var _e=!!ce.smartPtrType,je=!!ce.smartPtr;return _e!==je&&Rt("Both smartPtrType and smartPtr must be specified"),ce.count={value:1},ua(Object.create(ae,{$$:{value:ce}}))}function Po(ae){var ce=this.getPointee(ae);if(!ce)return this.destructor(ae),null;var _e=vi(this.registeredClass,ce);if(_e!==void 0){if(_e.$$.count.value===0)return _e.$$.ptr=ce,_e.$$.smartPtr=ae,_e.clone();var je=_e.clone();return this.destructor(ae),je}function ut(){return this.isSmartPointer?Ua(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:ce,smartPtrType:this,smartPtr:ae}):Ua(this.registeredClass.instancePrototype,{ptrType:this,ptr:ae})}var pt=this.registeredClass.getActualType(ce),St=mr[pt];if(!St)return ut.call(this);var ft;this.isConst?ft=St.constPointerType:ft=St.pointerType;var Tt=Ci(ce,this.registeredClass,ft.registeredClass);return Tt===null?ut.call(this):this.isSmartPointer?Ua(ft.registeredClass.instancePrototype,{ptrType:ft,ptr:Tt,smartPtrType:this,smartPtr:ae}):Ua(ft.registeredClass.instancePrototype,{ptrType:ft,ptr:Tt})}function ua(ae){return typeof FinalizationRegistry>"u"?(ua=ce=>ce,ae):(ya=new FinalizationRegistry(ce=>{Oo(ce.$$)}),ua=ce=>{var _e=ce.$$,je=!!_e.smartPtr;if(je){var ut={$$:_e};ya.register(ce,ut,ce)}return ce},wi=ce=>ya.unregister(ce),ua(ae))}function oo(){if(this.$$.ptr||nn(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var ae=ua(Object.create(Object.getPrototypeOf(this),{$$:{value:fi(this.$$)}}));return ae.$$.count.value+=1,ae.$$.deleteScheduled=!1,ae}function $i(){this.$$.ptr||nn(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Kt("Object already scheduled for deletion"),wi(this),Oo(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function $a(){return!this.$$.ptr}function ni(){return this.$$.ptr||nn(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Kt("Object already scheduled for deletion"),ma.push(this),ma.length===1&&Ha&&Ha(Hi),this.$$.deleteScheduled=!0,this}function ha(){ri.prototype.isAliasOf=cr,ri.prototype.clone=oo,ri.prototype.delete=$i,ri.prototype.isDeleted=$a,ri.prototype.deleteLater=ni}function ri(){}function zi(ae,ce,_e){if(ae[ce].overloadTable===void 0){var je=ae[ce];ae[ce]=function(){return ae[ce].overloadTable.hasOwnProperty(arguments.length)||Kt("Function '"+_e+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+ae[ce].overloadTable+")!"),ae[ce].overloadTable[arguments.length].apply(this,arguments)},ae[ce].overloadTable=[],ae[ce].overloadTable[je.argCount]=je}}function Ma(ae,ce,_e){i.hasOwnProperty(ae)?((_e===void 0||i[ae].overloadTable!==void 0&&i[ae].overloadTable[_e]!==void 0)&&Kt("Cannot register public name '"+ae+"' twice"),zi(i,ae,ae),i.hasOwnProperty(_e)&&Kt("Cannot register multiple overloads of a function with the same number of arguments ("+_e+")!"),i[ae].overloadTable[_e]=ce):(i[ae]=ce,_e!==void 0&&(i[ae].numArguments=_e))}function ms(ae,ce,_e,je,ut,pt,St,ft){this.name=ae,this.constructor=ce,this.instancePrototype=_e,this.rawDestructor=je,this.baseClass=ut,this.getActualType=pt,this.upcast=St,this.downcast=ft,this.pureVirtualFunctions=[]}function so(ae,ce,_e){for(;ce!==_e;)ce.upcast||Kt("Expected null or instance of "+_e.name+", got an instance of "+ce.name),ae=ce.upcast(ae),ce=ce.baseClass;return ae}function za(ae,ce){if(ce===null)return this.isReference&&Kt("null is not a valid "+this.name),0;ce.$$||Kt('Cannot pass "'+an(ce)+'" as a '+this.name),ce.$$.ptr||Kt("Cannot pass deleted object as a pointer of type "+this.name);var _e=ce.$$.ptrType.registeredClass,je=so(ce.$$.ptr,_e,this.registeredClass);return je}function Ao(ae,ce){var _e;if(ce===null)return this.isReference&&Kt("null is not a valid "+this.name),this.isSmartPointer?(_e=this.rawConstructor(),ae!==null&&ae.push(this.rawDestructor,_e),_e):0;ce.$$||Kt('Cannot pass "'+an(ce)+'" as a '+this.name),ce.$$.ptr||Kt("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&ce.$$.ptrType.isConst&&Kt("Cannot convert argument of type "+(ce.$$.smartPtrType?ce.$$.smartPtrType.name:ce.$$.ptrType.name)+" to parameter type "+this.name);var je=ce.$$.ptrType.registeredClass;if(_e=so(ce.$$.ptr,je,this.registeredClass),this.isSmartPointer)switch(ce.$$.smartPtr===void 0&&Kt("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:ce.$$.smartPtrType===this?_e=ce.$$.smartPtr:Kt("Cannot convert argument of type "+(ce.$$.smartPtrType?ce.$$.smartPtrType.name:ce.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:_e=ce.$$.smartPtr;break;case 2:if(ce.$$.smartPtrType===this)_e=ce.$$.smartPtr;else{var ut=ce.clone();_e=this.rawShare(_e,vn.toHandle(function(){ut.delete()})),ae!==null&&ae.push(this.rawDestructor,_e)}break;default:Kt("Unsupporting sharing policy")}return _e}function qi(ae,ce){if(ce===null)return this.isReference&&Kt("null is not a valid "+this.name),0;ce.$$||Kt('Cannot pass "'+an(ce)+'" as a '+this.name),ce.$$.ptr||Kt("Cannot pass deleted object as a pointer of type "+this.name),ce.$$.ptrType.isConst&&Kt("Cannot convert argument of type "+ce.$$.ptrType.name+" to parameter type "+this.name);var _e=ce.$$.ptrType.registeredClass,je=so(ce.$$.ptr,_e,this.registeredClass);return je}function Gs(ae){return this.rawGetPointee&&(ae=this.rawGetPointee(ae)),ae}function Ho(ae){this.rawDestructor&&this.rawDestructor(ae)}function Bs(ae){ae!==null&&ae.delete()}function xo(){ai.prototype.getPointee=Gs,ai.prototype.destructor=Ho,ai.prototype.argPackAdvance=8,ai.prototype.readValueFromPointer=Be,ai.prototype.deleteObject=Bs,ai.prototype.fromWireType=Po}function ai(ae,ce,_e,je,ut,pt,St,ft,Tt,Nt,jt){this.name=ae,this.registeredClass=ce,this.isReference=_e,this.isConst=je,this.isSmartPointer=ut,this.pointeeType=pt,this.sharingPolicy=St,this.rawGetPointee=ft,this.rawConstructor=Tt,this.rawShare=Nt,this.rawDestructor=jt,!ut&&ce.baseClass===void 0?je?(this.toWireType=za,this.destructorFunction=null):(this.toWireType=qi,this.destructorFunction=null):this.toWireType=Ao}function gi(ae,ce,_e){i.hasOwnProperty(ae)||Rt("Replacing nonexistant public symbol"),i[ae].overloadTable!==void 0&&_e!==void 0?i[ae].overloadTable[_e]=ce:(i[ae]=ce,i[ae].argCount=_e)}function ee(ae,ce,_e){var je=i["dynCall_"+ae];return _e&&_e.length?je.apply(null,[ce].concat(_e)):je.call(null,ce)}var Y=[];function le(ae){var ce=Y[ae];return ce||(ae>=Y.length&&(Y.length=ae+1),Y[ae]=ce=De.get(ae)),ce}function Ce(ae,ce,_e){if(ae.includes("j"))return ee(ae,ce,_e);var je=le(ce).apply(null,_e);return je}function ze(ae,ce){var _e=[];return function(){return _e.length=0,Object.assign(_e,arguments),Ce(ae,ce,_e)}}function rt(ae,ce){ae=Fn(ae);function _e(){return ae.includes("j")?ze(ae,ce):le(ce)}var je=_e();return typeof je!="function"&&Kt("unknown function pointer with signature "+ae+": "+ce),je}var ct=void 0;function et(ae){var ce=h0(ae),_e=Fn(ce);return lo(ce),_e}function It(ae,ce){var _e=[],je={};function ut(pt){if(!je[pt]&&!Ze[pt]){if(at[pt]){at[pt].forEach(ut);return}_e.push(pt),je[pt]=!0}}throw ce.forEach(ut),new ct(ae+": "+_e.map(et).join([", "]))}function gt(ae,ce,_e,je,ut,pt,St,ft,Tt,Nt,jt,tn,wn){jt=Fn(jt),pt=rt(ut,pt),ft&&(ft=rt(St,ft)),Nt&&(Nt=rt(Tt,Nt)),wn=rt(tn,wn);var ne=$e(jt);Ma(ne,function(){It("Cannot construct "+jt+" due to unbound types",[je])}),Dn([ae,ce,_e],je?[je]:[],function(te){te=te[0];var Ie,ke;je?(Ie=te.registeredClass,ke=Ie.instancePrototype):ke=ri.prototype;var Je=ht(ne,function(){if(Object.getPrototypeOf(this)!==yt)throw new Rr("Use 'new' to construct "+jt);if(Ct.constructor_body===void 0)throw new Rr(jt+" has no accessible constructor");var de=Ct.constructor_body[arguments.length];if(de===void 0)throw new Rr("Tried to invoke ctor of "+jt+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(Ct.constructor_body).toString()+") parameters instead!");return de.apply(this,arguments)}),yt=Object.create(ke,{constructor:{value:Je}});Je.prototype=yt;var Ct=new ms(jt,Je,yt,wn,Ie,pt,ft,Nt),dt=new ai(jt,Ct,!0,!1,!1),z=new ai(jt+"*",Ct,!1,!1,!1),Q=new ai(jt+" const*",Ct,!1,!0,!1);return mr[ae]={pointerType:z,constPointerType:Q},gi(ne,Je),[dt,z,Q]})}function mt(ae,ce){for(var _e=[],je=0;je<ae;je++)_e.push(V[ce+je*4>>2]);return _e}function bt(ae,ce){if(!(ae instanceof Function))throw new TypeError("new_ called with constructor type "+typeof ae+" which is not a function");var _e=ht(ae.name||"unknownFunctionName",function(){});_e.prototype=ae.prototype;var je=new _e,ut=ae.apply(je,ce);return ut instanceof Object?ut:je}function kt(ae,ce,_e,je,ut){var pt=ce.length;pt<2&&Kt("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var St=ce[1]!==null&&_e!==null,ft=!1,Tt=1;Tt<ce.length;++Tt)if(ce[Tt]!==null&&ce[Tt].destructorFunction===void 0){ft=!0;break}for(var Nt=ce[0].name!=="void",jt="",tn="",Tt=0;Tt<pt-2;++Tt)jt+=(Tt!==0?", ":"")+"arg"+Tt,tn+=(Tt!==0?", ":"")+"arg"+Tt+"Wired";var wn="return function "+$e(ae)+"("+jt+`) {
if (arguments.length !== `+(pt-2)+`) {
throwBindingError('function `+ae+" called with ' + arguments.length + ' arguments, expected "+(pt-2)+` args!');
}
`;ft&&(wn+=`var destructors = [];
`);var ne=ft?"destructors":"null",te=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],Ie=[Kt,je,ut,Me,ce[0],ce[1]];St&&(wn+="var thisWired = classParam.toWireType("+ne+`, this);
`);for(var Tt=0;Tt<pt-2;++Tt)wn+="var arg"+Tt+"Wired = argType"+Tt+".toWireType("+ne+", arg"+Tt+"); // "+ce[Tt+2].name+`
`,te.push("argType"+Tt),Ie.push(ce[Tt+2]);if(St&&(tn="thisWired"+(tn.length>0?", ":"")+tn),wn+=(Nt?"var rv = ":"")+"invoker(fn"+(tn.length>0?", ":"")+tn+`);
`,ft)wn+=`runDestructors(destructors);
`;else for(var Tt=St?1:2;Tt<ce.length;++Tt){var ke=Tt===1?"thisWired":"arg"+(Tt-2)+"Wired";ce[Tt].destructorFunction!==null&&(wn+=ke+"_dtor("+ke+"); // "+ce[Tt].name+`
`,te.push(ke+"_dtor"),Ie.push(ce[Tt].destructorFunction))}Nt&&(wn+=`var ret = retType.fromWireType(rv);
return ret;
`),wn+=`}
`,te.push(wn);var Je=bt(Function,te).apply(null,Ie);return Je}function dn(ae,ce,_e,je,ut,pt){T(ce>0);var St=mt(ce,_e);ut=rt(je,ut),Dn([],[ae],function(ft){ft=ft[0];var Tt="constructor "+ft.name;if(ft.registeredClass.constructor_body===void 0&&(ft.registeredClass.constructor_body=[]),ft.registeredClass.constructor_body[ce-1]!==void 0)throw new Rr("Cannot register multiple constructors with identical number of parameters ("+(ce-1)+") for class '"+ft.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return ft.registeredClass.constructor_body[ce-1]=()=>{It("Cannot construct "+ft.name+" due to unbound types",St)},Dn([],St,function(Nt){return Nt.splice(1,0,null),ft.registeredClass.constructor_body[ce-1]=kt(Tt,Nt,null,ut,pt),[]}),[]})}function on(ae,ce,_e,je,ut,pt,St,ft){var Tt=mt(_e,je);ce=Fn(ce),pt=rt(ut,pt),Dn([],[ae],function(Nt){Nt=Nt[0];var jt=Nt.name+"."+ce;ce.startsWith("@@")&&(ce=Symbol[ce.substring(2)]),ft&&Nt.registeredClass.pureVirtualFunctions.push(ce);function tn(){It("Cannot call "+jt+" due to unbound types",Tt)}var wn=Nt.registeredClass.instancePrototype,ne=wn[ce];return ne===void 0||ne.overloadTable===void 0&&ne.className!==Nt.name&&ne.argCount===_e-2?(tn.argCount=_e-2,tn.className=Nt.name,wn[ce]=tn):(zi(wn,ce,jt),wn[ce].overloadTable[_e-2]=tn),Dn([],Tt,function(te){var Ie=kt(jt,te,Nt,pt,St);return wn[ce].overloadTable===void 0?(Ie.argCount=_e-2,wn[ce]=Ie):wn[ce].overloadTable[_e-2]=Ie,[]}),[]})}var sn=[],Mt=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function mn(ae){ae>4&&--Mt[ae].refcount===0&&(Mt[ae]=void 0,sn.push(ae))}function cn(){for(var ae=0,ce=5;ce<Mt.length;++ce)Mt[ce]!==void 0&&++ae;return ae}function _n(){for(var ae=5;ae<Mt.length;++ae)if(Mt[ae]!==void 0)return Mt[ae];return null}function rn(){i.count_emval_handles=cn,i.get_first_emval=_n}var vn={toValue:ae=>(ae||Kt("Cannot use deleted val. handle = "+ae),Mt[ae].value),toHandle:ae=>{switch(ae){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var ce=sn.length?sn.pop():Mt.length;return Mt[ce]={refcount:1,value:ae},ce}}}};function Nn(ae,ce){ce=Fn(ce),qr(ae,{name:ce,fromWireType:function(_e){var je=vn.toValue(_e);return mn(_e),je},toWireType:function(_e,je){return vn.toHandle(je)},argPackAdvance:8,readValueFromPointer:Be,destructorFunction:null})}function an(ae){if(ae===null)return"null";var ce=typeof ae;return ce==="object"||ce==="array"||ce==="function"?ae.toString():""+ae}function Vt(ae,ce){switch(ce){case 2:return function(_e){return this.fromWireType(X[_e>>2])};case 3:return function(_e){return this.fromWireType(re[_e>>3])};default:throw new TypeError("Unknown float type: "+ae)}}function Er(ae,ce,_e){var je=Qe(_e);ce=Fn(ce),qr(ae,{name:ce,fromWireType:function(ut){return ut},toWireType:function(ut,pt){return pt},argPackAdvance:8,readValueFromPointer:Vt(ce,je),destructorFunction:null})}function pn(ae,ce,_e,je,ut,pt){var St=mt(ce,_e);ae=Fn(ae),ut=rt(je,ut),Ma(ae,function(){It("Cannot call "+ae+" due to unbound types",St)},ce-1),Dn([],St,function(ft){var Tt=[ft[0],null].concat(ft.slice(1));return gi(ae,kt(ae,Tt,null,ut,pt),ce-1),[]})}function Se(ae,ce,_e){switch(ce){case 0:return _e?function(ut){return R[ut]}:function(ut){return L[ut]};case 1:return _e?function(ut){return H[ut>>1]}:function(ut){return F[ut>>1]};case 2:return _e?function(ut){return U[ut>>2]}:function(ut){return V[ut>>2]};default:throw new TypeError("Unknown integer type: "+ae)}}function We(ae,ce,_e,je,ut){ce=Fn(ce);var pt=Qe(_e),St=tn=>tn;if(je===0){var ft=32-8*_e;St=tn=>tn<<ft>>>ft}var Tt=ce.includes("unsigned"),Nt=(tn,wn)=>{},jt;Tt?jt=function(tn,wn){return Nt(wn,this.name),wn>>>0}:jt=function(tn,wn){return Nt(wn,this.name),wn},qr(ae,{name:ce,fromWireType:St,toWireType:jt,argPackAdvance:8,readValueFromPointer:Se(ce,pt,je!==0),destructorFunction:null})}function lt(ae,ce,_e){var je=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],ut=je[ce];function pt(St){St=St>>2;var ft=V,Tt=ft[St],Nt=ft[St+1];return new ut(P,Nt,Tt)}_e=Fn(_e),qr(ae,{name:_e,fromWireType:pt,argPackAdvance:8,readValueFromPointer:pt},{ignoreDuplicateRegistrations:!0})}function wt(ae,ce){ce=Fn(ce);var _e=ce==="std::string";qr(ae,{name:ce,fromWireType:function(je){var ut=V[je>>2],pt=je+4,St;if(_e)for(var ft=pt,Tt=0;Tt<=ut;++Tt){var Nt=pt+Tt;if(Tt==ut||L[Nt]==0){var jt=Nt-ft,tn=_(ft,jt);St===void 0?St=tn:(St+="\0",St+=tn),ft=Nt+1}}else{for(var wn=new Array(ut),Tt=0;Tt<ut;++Tt)wn[Tt]=String.fromCharCode(L[pt+Tt]);St=wn.join("")}return lo(je),St},toWireType:function(je,ut){ut instanceof ArrayBuffer&&(ut=new Uint8Array(ut));var pt,St=typeof ut=="string";St||ut instanceof Uint8Array||ut instanceof Uint8ClampedArray||ut instanceof Int8Array||Kt("Cannot pass non-string to std::string"),_e&&St?pt=x(ut):pt=ut.length;var ft=qo(4+pt+1),Tt=ft+4;if(V[ft>>2]=pt,_e&&St)w(ut,Tt,pt+1);else if(St)for(var Nt=0;Nt<pt;++Nt){var jt=ut.charCodeAt(Nt);jt>255&&(lo(Tt),Kt("String has UTF-16 code units that do not fit in 8 bits")),L[Tt+Nt]=jt}else for(var Nt=0;Nt<pt;++Nt)L[Tt+Nt]=ut[Nt];return je!==null&&je.push(lo,ft),ft},argPackAdvance:8,readValueFromPointer:Be,destructorFunction:function(je){lo(je)}})}var On=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function Sn(ae,ce){for(var _e=ae,je=_e>>1,ut=je+ce/2;!(je>=ut)&&F[je];)++je;if(_e=je<<1,_e-ae>32&&On)return On.decode(L.subarray(ae,_e));for(var pt="",St=0;!(St>=ce/2);++St){var ft=H[ae+St*2>>1];if(ft==0)break;pt+=String.fromCharCode(ft)}return pt}function Bn(ae,ce,_e){if(_e===void 0&&(_e=2147483647),_e<2)return 0;_e-=2;for(var je=ce,ut=_e<ae.length*2?_e/2:ae.length,pt=0;pt<ut;++pt){var St=ae.charCodeAt(pt);H[ce>>1]=St,ce+=2}return H[ce>>1]=0,ce-je}function Qn(ae){return ae.length*2}function Zr(ae,ce){for(var _e=0,je="";!(_e>=ce/4);){var ut=U[ae+_e*4>>2];if(ut==0)break;if(++_e,ut>=65536){var pt=ut-65536;je+=String.fromCharCode(55296|pt>>10,56320|pt&1023)}else je+=String.fromCharCode(ut)}return je}function jr(ae,ce,_e){if(_e===void 0&&(_e=2147483647),_e<4)return 0;for(var je=ce,ut=je+_e-4,pt=0;pt<ae.length;++pt){var St=ae.charCodeAt(pt);if(St>=55296&&St<=57343){var ft=ae.charCodeAt(++pt);St=65536+((St&1023)<<10)|ft&1023}if(U[ce>>2]=St,ce+=4,ce+4>ut)break}return U[ce>>2]=0,ce-je}function Jr(ae){for(var ce=0,_e=0;_e<ae.length;++_e){var je=ae.charCodeAt(_e);je>=55296&&je<=57343&&++_e,ce+=4}return ce}function Fa(ae,ce,_e){_e=Fn(_e);var je,ut,pt,St,ft;ce===2?(je=Sn,ut=Bn,St=Qn,pt=()=>F,ft=1):ce===4&&(je=Zr,ut=jr,St=Jr,pt=()=>V,ft=2),qr(ae,{name:_e,fromWireType:function(Tt){for(var Nt=V[Tt>>2],jt=pt(),tn,wn=Tt+4,ne=0;ne<=Nt;++ne){var te=Tt+4+ne*ce;if(ne==Nt||jt[te>>ft]==0){var Ie=te-wn,ke=je(wn,Ie);tn===void 0?tn=ke:(tn+="\0",tn+=ke),wn=te+ce}}return lo(Tt),tn},toWireType:function(Tt,Nt){typeof Nt!="string"&&Kt("Cannot pass non-string to C++ string type "+_e);var jt=St(Nt),tn=qo(4+jt+ce);return V[tn>>2]=jt>>ft,ut(Nt,tn+4,jt+ce),Tt!==null&&Tt.push(lo,tn),tn},argPackAdvance:8,readValueFromPointer:Be,destructorFunction:function(Tt){lo(Tt)}})}function qa(ae,ce,_e,je,ut,pt){Ue[ae]={name:Fn(ce),rawConstructor:rt(_e,je),rawDestructor:rt(ut,pt),fields:[]}}function ea(ae,ce,_e,je,ut,pt,St,ft,Tt,Nt){Ue[ae].fields.push({fieldName:Fn(ce),getterReturnType:_e,getter:rt(je,ut),getterContext:pt,setterArgumentType:St,setter:rt(ft,Tt),setterContext:Nt})}function Vr(ae,ce){ce=Fn(ce),qr(ae,{isVoid:!0,name:ce,argPackAdvance:0,fromWireType:function(){},toWireType:function(_e,je){}})}var $o={};function zo(ae){var ce=$o[ae];return ce===void 0?Fn(ae):ce}function co(){return typeof globalThis=="object"?globalThis:function(){return Function}()("return this")()}function d0(ae){return ae===0?vn.toHandle(co()):(ae=zo(ae),vn.toHandle(co()[ae]))}function m0(ae){ae>4&&(Mt[ae].refcount+=1)}function Ws(ae,ce){var _e=Ze[ae];return _e===void 0&&Kt(ce+" has unknown type "+et(ae)),_e}function Hs(ae){for(var ce="",_e=0;_e<ae;++_e)ce+=(_e!==0?", ":"")+"arg"+_e;for(var je=()=>V,ut="return function emval_allocator_"+ae+`(constructor, argTypes, args) {
  var HEAPU32 = getMemory();
`,_e=0;_e<ae;++_e)ut+="var argType"+_e+" = requireRegisteredType(HEAPU32[((argTypes)>>2)], 'parameter "+_e+`');
var arg`+_e+" = argType"+_e+`.readValueFromPointer(args);
args += argType`+_e+`['argPackAdvance'];
argTypes += 4;
`;return ut+="var obj = new constructor("+ce+`);
return valueToHandle(obj);
}
`,new Function("requireRegisteredType","Module","valueToHandle","getMemory",ut)(Ws,i,vn.toHandle,je)}var oc={};function hs(ae,ce,_e,je){ae=vn.toValue(ae);var ut=oc[ce];return ut||(ut=Hs(ce),oc[ce]=ut),ut(ae,_e,je)}function Cu(ae,ce){ae=Ws(ae,"_emval_take_value");var _e=ae.readValueFromPointer(ce);return vn.toHandle(_e)}function sl(){ye("")}function Iu(ae,ce,_e){L.copyWithin(ae,ce,ce+_e)}function sc(){return 2147483648}function Du(ae){try{return D.grow(ae-P.byteLength+65535>>>16),ue(D.buffer),1}catch{}}function Eu(ae){var ce=L.length;ae=ae>>>0;var _e=sc();if(ae>_e)return!1;let je=(Tt,Nt)=>Tt+(Nt-Tt%Nt)%Nt;for(var ut=1;ut<=4;ut*=2){var pt=ce*(1+.2/ut);pt=Math.min(pt,ae+100663296);var St=Math.min(_e,je(Math.max(ae,pt),65536)),ft=Du(St);if(ft)return!0}return!1}function Tu(ae){var ce=i["_"+ae];return ce}function yu(ae,ce){R.set(ae,ce)}function cc(ae,ce,_e,je,ut){var pt={string:te=>{var Ie=0;if(te!=null&&te!==0){var ke=(te.length<<2)+1;Ie=lc(ke),w(te,Ie,ke)}return Ie},array:te=>{var Ie=lc(te.length);return yu(te,Ie),Ie}};function St(te){return ce==="string"?_(te):ce==="boolean"?!!te:te}var ft=Tu(ae),Tt=[],Nt=0;if(je)for(var jt=0;jt<je.length;jt++){var tn=pt[_e[jt]];tn?(Nt===0&&(Nt=ps()),Tt[jt]=tn(je[jt])):Tt[jt]=je[jt]}var wn=ft.apply(null,Tt);function ne(te){return Nt!==0&&cl(Nt),St(te)}return wn=ne(wn),wn}Qt=i.InternalError=Ut(Error,"InternalError"),Et(),Rr=i.BindingError=Ut(Error,"BindingError"),ha(),Di(),xo(),ct=i.UnboundTypeError=Ut(Error,"UnboundTypeError"),rn();var Mu={h:Le,q:jn,r:xn,w:Rn,p:gt,o:dn,c:on,v:Nn,k:Er,e:pn,b:We,a:lt,j:wt,g:Fa,u:qa,d:ea,x:Vr,i:mn,m:d0,l:m0,y:hs,n:Cu,f:sl,t:Iu,s:Eu};me(),i.___wasm_call_ctors=function(){return(i.___wasm_call_ctors=i.asm.A).apply(null,arguments)};var qo=i._malloc=function(){return(qo=i._malloc=i.asm.B).apply(null,arguments)},h0=i.___getTypeName=function(){return(h0=i.___getTypeName=i.asm.D).apply(null,arguments)};i.__embind_initialize_bindings=function(){return(i.__embind_initialize_bindings=i.asm.E).apply(null,arguments)};var lo=i._free=function(){return(lo=i._free=i.asm.F).apply(null,arguments)},ps=i.stackSave=function(){return(ps=i.stackSave=i.asm.G).apply(null,arguments)},cl=i.stackRestore=function(){return(cl=i.stackRestore=i.asm.H).apply(null,arguments)},lc=i.stackAlloc=function(){return(lc=i.stackAlloc=i.asm.I).apply(null,arguments)},ll=i.___cxa_is_pointer_type=function(){return(ll=i.___cxa_is_pointer_type=i.asm.J).apply(null,arguments)};i.ccall=cc;var p0;j=function ae(){p0||ul(),p0||(j=ae)};function ul(ae){if(W>0||(Ne(),W>0))return;function ce(){p0||(p0=!0,i.calledRun=!0,!E&&(Re(),o(i),i.onRuntimeInitialized&&i.onRuntimeInitialized(),k()))}i.setStatus?(i.setStatus("Running..."),setTimeout(function(){setTimeout(function(){i.setStatus("")},1),ce()},1)):ce()}if(i.preInit)for(typeof i.preInit=="function"&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.pop()();return ul(),a.ready}})();t.exports=n}(wE)),wE.exports}var hde=mde();const pde=Yc(hde),Sde=new URL("/nifti-viewer/assets/charlswasm_decode-484ovEoR.wasm",import.meta.url),wf={codec:void 0,decoder:void 0,decodeConfig:{}};function Cde(t){return typeof t=="number"?wf.codec.getExceptionMessage(t):t}function Ide(t){if(wf.decodeConfig=t,wf.codec)return Promise.resolve();const e=pde({locateFile:n=>n.endsWith(".wasm")?Sde.toString():n});return new Promise((n,r)=>{e.then(a=>{wf.codec=a,wf.decoder=new a.JpegLSDecoder,n()},r)})}async function b9(t,e){try{await Ide();const n=wf.decoder;n.getEncodedBuffer(t.length).set(t),n.decode();const a=n.getFrameInfo(),i=n.getInterleaveMode(),o=n.getNearLossless(),s=n.getDecodedBuffer(),c={columns:a.width,rows:a.height,bitsPerPixel:a.bitsPerSample,signed:e.signed,bytesPerPixel:e.bytesPerPixel,componentsPerPixel:a.componentCount},l=Dde(a,s,e.signed),u={nearLossless:o,interleaveMode:i,frameInfo:a};return{...e,pixelData:l,imageInfo:c,encodeOptions:u,...u,...c}}catch(n){throw Cde(n)}}function Dde(t,e,n){return t.bitsPerSample>8?n?new Int16Array(e.buffer,e.byteOffset,e.byteLength/2):new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2):n?new Int8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}var PE={exports:{}},N9;function Ede(){return N9||(N9=1,function(t,e){var n=(()=>{var r=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(r=r||__filename),function(a){a=a||{};var i=typeof a<"u"?a:{},o,s;i.ready=new Promise(function(ne,te){o=ne,s=te});var c=Object.assign({},i),l="./this.program",u=typeof window=="object",f=typeof importScripts=="function",v=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",g="";function d(ne){return i.locateFile?i.locateFile(ne,g):g+ne}var m,h,C;if(v){var p=j0,S=j0;f?g=S.dirname(g)+"/":g=__dirname+"/",m=(ne,te)=>(ne=he(ne)?new URL(ne):S.normalize(ne),p.readFileSync(ne,te?void 0:"utf8")),C=ne=>{var te=m(ne,!0);return te.buffer||(te=new Uint8Array(te)),te},h=(ne,te,Ie)=>{ne=he(ne)?new URL(ne):S.normalize(ne),p.readFile(ne,function(ke,Je){ke?Ie(ke):te(Je.buffer)})},process.argv.length>1&&(l=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",function(ne){if(!(ne instanceof Pe))throw ne}),process.on("unhandledRejection",function(ne){throw ne}),i.inspect=function(){return"[Emscripten Module object]"}}else(u||f)&&(f?g=self.location.href:typeof document<"u"&&document.currentScript&&(g=document.currentScript.src),r&&(g=r),g.indexOf("blob:")!==0?g=g.substr(0,g.replace(/[?#].*/,"").lastIndexOf("/")+1):g="",m=ne=>{var te=new XMLHttpRequest;return te.open("GET",ne,!1),te.send(null),te.responseText},f&&(C=ne=>{var te=new XMLHttpRequest;return te.open("GET",ne,!1),te.responseType="arraybuffer",te.send(null),new Uint8Array(te.response)}),h=(ne,te,Ie)=>{var ke=new XMLHttpRequest;ke.open("GET",ne,!0),ke.responseType="arraybuffer",ke.onload=()=>{if(ke.status==200||ke.status==0&&ke.response){te(ke.response);return}Ie()},ke.onerror=Ie,ke.send(null)});var I=i.print||console.log.bind(console),D=i.printErr||console.warn.bind(console);Object.assign(i,c),c=null,i.arguments&&i.arguments,i.thisProgram&&(l=i.thisProgram),i.quit&&i.quit;var E;i.wasmBinary&&(E=i.wasmBinary),i.noExitRuntime,typeof WebAssembly!="object"&&be("no native wasm support detected");var T,y=!1;function M(ne,te){ne||be(te)}var _=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function O(ne,te,Ie){for(var ke=te+Ie,Je=te;ne[Je]&&!(Je>=ke);)++Je;if(Je-te>16&&ne.buffer&&_)return _.decode(ne.subarray(te,Je));for(var yt="";te<Je;){var Ct=ne[te++];if(!(Ct&128)){yt+=String.fromCharCode(Ct);continue}var dt=ne[te++]&63;if((Ct&224)==192){yt+=String.fromCharCode((Ct&31)<<6|dt);continue}var z=ne[te++]&63;if((Ct&240)==224?Ct=(Ct&15)<<12|dt<<6|z:Ct=(Ct&7)<<18|dt<<12|z<<6|ne[te++]&63,Ct<65536)yt+=String.fromCharCode(Ct);else{var Q=Ct-65536;yt+=String.fromCharCode(55296|Q>>10,56320|Q&1023)}}return yt}function w(ne,te){return ne?O(F,ne,te):""}function x(ne,te,Ie,ke){if(!(ke>0))return 0;for(var Je=Ie,yt=Ie+ke-1,Ct=0;Ct<ne.length;++Ct){var dt=ne.charCodeAt(Ct);if(dt>=55296&&dt<=57343){var z=ne.charCodeAt(++Ct);dt=65536+((dt&1023)<<10)|z&1023}if(dt<=127){if(Ie>=yt)break;te[Ie++]=dt}else if(dt<=2047){if(Ie+1>=yt)break;te[Ie++]=192|dt>>6,te[Ie++]=128|dt&63}else if(dt<=65535){if(Ie+2>=yt)break;te[Ie++]=224|dt>>12,te[Ie++]=128|dt>>6&63,te[Ie++]=128|dt&63}else{if(Ie+3>=yt)break;te[Ie++]=240|dt>>18,te[Ie++]=128|dt>>12&63,te[Ie++]=128|dt>>6&63,te[Ie++]=128|dt&63}}return te[Ie]=0,Ie-Je}function P(ne,te,Ie){return x(ne,F,te,Ie)}function R(ne){for(var te=0,Ie=0;Ie<ne.length;++Ie){var ke=ne.charCodeAt(Ie);ke<=127?te++:ke<=2047?te+=2:ke>=55296&&ke<=57343?(te+=4,++Ie):te+=3}return te}var L,H,F,U,V,X,re,ue,De;function pe(ne){L=ne,i.HEAP8=H=new Int8Array(ne),i.HEAP16=U=new Int16Array(ne),i.HEAP32=X=new Int32Array(ne),i.HEAPU8=F=new Uint8Array(ne),i.HEAPU16=V=new Uint16Array(ne),i.HEAPU32=re=new Uint32Array(ne),i.HEAPF32=ue=new Float32Array(ne),i.HEAPF64=De=new Float64Array(ne)}i.INITIAL_MEMORY;var Te,Fe=[],Ne=[],Re=[];function k(){if(i.preRun)for(typeof i.preRun=="function"&&(i.preRun=[i.preRun]);i.preRun.length;)N(i.preRun.shift());Le(Fe)}function A(){Le(Ne)}function b(){if(i.postRun)for(typeof i.postRun=="function"&&(i.postRun=[i.postRun]);i.postRun.length;)j(i.postRun.shift());Le(Re)}function N(ne){Fe.unshift(ne)}function W(ne){Ne.unshift(ne)}function j(ne){Re.unshift(ne)}var K=0,ge=null;function ye(ne){K++,i.monitorRunDependencies&&i.monitorRunDependencies(K)}function we(ne){if(K--,i.monitorRunDependencies&&i.monitorRunDependencies(K),K==0&&ge){var te=ge;ge=null,te()}}function be(ne){i.onAbort&&i.onAbort(ne),ne="Aborted("+ne+")",D(ne),y=!0,ne+=". Build with -sASSERTIONS for more info.";var te=new WebAssembly.RuntimeError(ne);throw s(te),te}var Z="data:application/octet-stream;base64,";function ie(ne){return ne.startsWith(Z)}function he(ne){return ne.startsWith("file://")}var se;se="openjpegwasm_decode.wasm",ie(se)||(se=d(se));function me(ne){try{if(ne==se&&E)return new Uint8Array(E);if(C)return C(ne);throw"both async and sync fetching of the wasm failed"}catch(te){be(te)}}function fe(){if(!E&&(u||f)){if(typeof fetch=="function"&&!he(se))return fetch(se,{credentials:"same-origin"}).then(function(ne){if(!ne.ok)throw"failed to load wasm binary file at '"+se+"'";return ne.arrayBuffer()}).catch(function(){return me(se)});if(h)return new Promise(function(ne,te){h(se,function(Ie){ne(new Uint8Array(Ie))},te)})}return Promise.resolve().then(function(){return me(se)})}function q(){var ne={a:je};function te(Ct,dt){var z=Ct.exports;i.asm=z,T=i.asm.E,pe(T.buffer),Te=i.asm.G,W(i.asm.F),we()}ye();function Ie(Ct){te(Ct.instance)}function ke(Ct){return fe().then(function(dt){return WebAssembly.instantiate(dt,ne)}).then(function(dt){return dt}).then(Ct,function(dt){D("failed to asynchronously prepare wasm: "+dt),be(dt)})}function Je(){return!E&&typeof WebAssembly.instantiateStreaming=="function"&&!ie(se)&&!he(se)&&!v&&typeof fetch=="function"?fetch(se,{credentials:"same-origin"}).then(function(Ct){var dt=WebAssembly.instantiateStreaming(Ct,ne);return dt.then(Ie,function(z){return D("wasm streaming compile failed: "+z),D("falling back to ArrayBuffer instantiation"),ke(Ie)})}):ke(Ie)}if(i.instantiateWasm)try{var yt=i.instantiateWasm(ne,te);return yt}catch(Ct){D("Module.instantiateWasm callback failed with error: "+Ct),s(Ct)}return Je().catch(s),{}}function Pe(ne){this.name="ExitStatus",this.message="Program terminated with exit("+ne+")",this.status=ne}function Le(ne){for(;ne.length>0;)ne.shift()(i)}function Ue(ne){this.excPtr=ne,this.ptr=ne-24,this.set_type=function(te){re[this.ptr+4>>2]=te},this.get_type=function(){return re[this.ptr+4>>2]},this.set_destructor=function(te){re[this.ptr+8>>2]=te},this.get_destructor=function(){return re[this.ptr+8>>2]},this.set_refcount=function(te){X[this.ptr>>2]=te},this.set_caught=function(te){te=te?1:0,H[this.ptr+12>>0]=te},this.get_caught=function(){return H[this.ptr+12>>0]!=0},this.set_rethrown=function(te){te=te?1:0,H[this.ptr+13>>0]=te},this.get_rethrown=function(){return H[this.ptr+13>>0]!=0},this.init=function(te,Ie){this.set_adjusted_ptr(0),this.set_type(te),this.set_destructor(Ie),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var te=X[this.ptr>>2];X[this.ptr>>2]=te+1},this.release_ref=function(){var te=X[this.ptr>>2];return X[this.ptr>>2]=te-1,te===1},this.set_adjusted_ptr=function(te){re[this.ptr+16>>2]=te},this.get_adjusted_ptr=function(){return re[this.ptr+16>>2]},this.get_exception_ptr=function(){var te=jt(this.get_type());if(te)return re[this.excPtr>>2];var Ie=this.get_adjusted_ptr();return Ie!==0?Ie:this.excPtr}}function Me(ne,te,Ie){var ke=new Ue(ne);throw ke.init(te,Ie),ne}var Be={};function nt(ne){for(;ne.length;){var te=ne.pop(),Ie=ne.pop();Ie(te)}}function Ze(ne){return this.fromWireType(X[ne>>2])}var at={},Ot={},Oe={},$e=48,ht=57;function Ut(ne){if(ne===void 0)return"_unknown";ne=ne.replace(/[^a-zA-Z0-9_]/g,"$");var te=ne.charCodeAt(0);return te>=$e&&te<=ht?"_"+ne:ne}function Qt(ne,te){return ne=Ut(ne),new Function("body","return function "+ne+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(te)}function Rt(ne,te){var Ie=Qt(te,function(ke){this.name=te,this.message=ke;var Je=new Error(ke).stack;Je!==void 0&&(this.stack=this.toString()+`
`+Je.replace(/^Error(:[^\n]*)?\n/,""))});return Ie.prototype=Object.create(ne.prototype),Ie.prototype.constructor=Ie,Ie.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},Ie}var Dn=void 0;function jn(ne){throw new Dn(ne)}function xn(ne,te,Ie){ne.forEach(function(dt){Oe[dt]=te});function ke(dt){var z=Ie(dt);z.length!==ne.length&&jn("Mismatched type converter count");for(var Q=0;Q<ne.length;++Q)cr(ne[Q],z[Q])}var Je=new Array(te.length),yt=[],Ct=0;te.forEach((dt,z)=>{Ot.hasOwnProperty(dt)?Je[z]=Ot[dt]:(yt.push(dt),at.hasOwnProperty(dt)||(at[dt]=[]),at[dt].push(()=>{Je[z]=Ot[dt],++Ct,Ct===yt.length&&ke(Je)}))}),yt.length===0&&ke(Je)}function Qe(ne){var te=Be[ne];delete Be[ne];var Ie=te.rawConstructor,ke=te.rawDestructor,Je=te.fields,yt=Je.map(Ct=>Ct.getterReturnType).concat(Je.map(Ct=>Ct.setterArgumentType));xn([ne],yt,Ct=>{var dt={};return Je.forEach((z,Q)=>{var de=z.fieldName,xe=Ct[Q],G=z.getter,$=z.getterContext,oe=Ct[Q+Je.length],ve=z.setter,Ee=z.setterContext;dt[de]={read:Ge=>xe.fromWireType(G($,Ge)),write:(Ge,Ke)=>{var He=[];ve(Ee,Ge,oe.toWireType(He,Ke)),nt(He)}}}),[{name:te.name,fromWireType:function(z){var Q={};for(var de in dt)Q[de]=dt[de].read(z);return ke(z),Q},toWireType:function(z,Q){for(var de in dt)if(!(de in Q))throw new TypeError('Missing field:  "'+de+'"');var xe=Ie();for(de in dt)dt[de].write(xe,Q[de]);return z!==null&&z.push(ke,xe),xe},argPackAdvance:8,readValueFromPointer:Ze,destructorFunction:ke}]})}function Et(ne,te,Ie,ke,Je){}function $t(ne){switch(ne){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+ne)}}function Fn(){for(var ne=new Array(256),te=0;te<256;++te)ne[te]=String.fromCharCode(te);Rr=ne}var Rr=void 0;function Kt(ne){for(var te="",Ie=ne;F[Ie];)te+=Rr[F[Ie++]];return te}var qr=void 0;function Rn(ne){throw new qr(ne)}function cr(ne,te,Ie={}){if(!("argPackAdvance"in te))throw new TypeError("registerType registeredInstance requires argPackAdvance");var ke=te.name;if(ne||Rn('type "'+ke+'" must have a positive integer typeid pointer'),Ot.hasOwnProperty(ne)){if(Ie.ignoreDuplicateRegistrations)return;Rn("Cannot register type '"+ke+"' twice")}if(Ot[ne]=te,delete Oe[ne],at.hasOwnProperty(ne)){var Je=at[ne];delete at[ne],Je.forEach(yt=>yt())}}function fi(ne,te,Ie,ke,Je){var yt=$t(Ie);te=Kt(te),cr(ne,{name:te,fromWireType:function(Ct){return!!Ct},toWireType:function(Ct,dt){return dt?ke:Je},argPackAdvance:8,readValueFromPointer:function(Ct){var dt;if(Ie===1)dt=H;else if(Ie===2)dt=U;else if(Ie===4)dt=X;else throw new TypeError("Unknown boolean type size: "+te);return this.fromWireType(dt[Ct>>yt])},destructorFunction:null})}function nn(ne){if(!(this instanceof Ma)||!(ne instanceof Ma))return!1;for(var te=this.$$.ptrType.registeredClass,Ie=this.$$.ptr,ke=ne.$$.ptrType.registeredClass,Je=ne.$$.ptr;te.baseClass;)Ie=te.upcast(Ie),te=te.baseClass;for(;ke.baseClass;)Je=ke.upcast(Je),ke=ke.baseClass;return te===ke&&Ie===Je}function ya(ne){return{count:ne.count,deleteScheduled:ne.deleteScheduled,preservePointerOnDelete:ne.preservePointerOnDelete,ptr:ne.ptr,ptrType:ne.ptrType,smartPtr:ne.smartPtr,smartPtrType:ne.smartPtrType}}function wi(ne){function te(Ie){return Ie.$$.ptrType.registeredClass.name}Rn(te(ne)+" instance already deleted")}var Wi=!1;function Oo(ne){}function Ci(ne){ne.smartPtr?ne.smartPtrType.rawDestructor(ne.smartPtr):ne.ptrType.registeredClass.rawDestructor(ne.ptr)}function mr(ne){ne.count.value-=1;var te=ne.count.value===0;te&&Ci(ne)}function Ii(ne,te,Ie){if(te===Ie)return ne;if(Ie.baseClass===void 0)return null;var ke=Ii(ne,te,Ie.baseClass);return ke===null?null:Ie.downcast(ke)}var Gn={};function ma(){return Object.keys(vi).length}function Hi(){var ne=[];for(var te in vi)vi.hasOwnProperty(te)&&ne.push(vi[te]);return ne}var Ha=[];function ti(){for(;Ha.length;){var ne=Ha.pop();ne.$$.deleteScheduled=!1,ne.delete()}}var Di=void 0;function La(ne){Di=ne,Ha.length&&Di&&Di(ti)}function wo(){i.getInheritedInstanceCount=ma,i.getLiveInheritedInstances=Hi,i.flushPendingDeletes=ti,i.setDelayFunction=La}var vi={};function Ua(ne,te){for(te===void 0&&Rn("ptr should not be undefined");ne.baseClass;)te=ne.upcast(te),ne=ne.baseClass;return te}function Po(ne,te){return te=Ua(ne,te),vi[te]}function ua(ne,te){(!te.ptrType||!te.ptr)&&jn("makeClassHandle requires ptr and ptrType");var Ie=!!te.smartPtrType,ke=!!te.smartPtr;return Ie!==ke&&jn("Both smartPtrType and smartPtr must be specified"),te.count={value:1},$i(Object.create(ne,{$$:{value:te}}))}function oo(ne){var te=this.getPointee(ne);if(!te)return this.destructor(ne),null;var Ie=Po(this.registeredClass,te);if(Ie!==void 0){if(Ie.$$.count.value===0)return Ie.$$.ptr=te,Ie.$$.smartPtr=ne,Ie.clone();var ke=Ie.clone();return this.destructor(ne),ke}function Je(){return this.isSmartPointer?ua(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:te,smartPtrType:this,smartPtr:ne}):ua(this.registeredClass.instancePrototype,{ptrType:this,ptr:ne})}var yt=this.registeredClass.getActualType(te),Ct=Gn[yt];if(!Ct)return Je.call(this);var dt;this.isConst?dt=Ct.constPointerType:dt=Ct.pointerType;var z=Ii(te,this.registeredClass,dt.registeredClass);return z===null?Je.call(this):this.isSmartPointer?ua(dt.registeredClass.instancePrototype,{ptrType:dt,ptr:z,smartPtrType:this,smartPtr:ne}):ua(dt.registeredClass.instancePrototype,{ptrType:dt,ptr:z})}function $i(ne){return typeof FinalizationRegistry>"u"?($i=te=>te,ne):(Wi=new FinalizationRegistry(te=>{mr(te.$$)}),$i=te=>{var Ie=te.$$,ke=!!Ie.smartPtr;if(ke){var Je={$$:Ie};Wi.register(te,Je,te)}return te},Oo=te=>Wi.unregister(te),$i(ne))}function $a(){if(this.$$.ptr||wi(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var ne=$i(Object.create(Object.getPrototypeOf(this),{$$:{value:ya(this.$$)}}));return ne.$$.count.value+=1,ne.$$.deleteScheduled=!1,ne}function ni(){this.$$.ptr||wi(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Rn("Object already scheduled for deletion"),Oo(this),mr(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function ha(){return!this.$$.ptr}function ri(){return this.$$.ptr||wi(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Rn("Object already scheduled for deletion"),Ha.push(this),Ha.length===1&&Di&&Di(ti),this.$$.deleteScheduled=!0,this}function zi(){Ma.prototype.isAliasOf=nn,Ma.prototype.clone=$a,Ma.prototype.delete=ni,Ma.prototype.isDeleted=ha,Ma.prototype.deleteLater=ri}function Ma(){}function ms(ne,te,Ie){if(ne[te].overloadTable===void 0){var ke=ne[te];ne[te]=function(){return ne[te].overloadTable.hasOwnProperty(arguments.length)||Rn("Function '"+Ie+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+ne[te].overloadTable+")!"),ne[te].overloadTable[arguments.length].apply(this,arguments)},ne[te].overloadTable=[],ne[te].overloadTable[ke.argCount]=ke}}function so(ne,te,Ie){i.hasOwnProperty(ne)?(Rn("Cannot register public name '"+ne+"' twice"),ms(i,ne,ne),i.hasOwnProperty(Ie)&&Rn("Cannot register multiple overloads of a function with the same number of arguments ("+Ie+")!"),i[ne].overloadTable[Ie]=te):i[ne]=te}function za(ne,te,Ie,ke,Je,yt,Ct,dt){this.name=ne,this.constructor=te,this.instancePrototype=Ie,this.rawDestructor=ke,this.baseClass=Je,this.getActualType=yt,this.upcast=Ct,this.downcast=dt,this.pureVirtualFunctions=[]}function Ao(ne,te,Ie){for(;te!==Ie;)te.upcast||Rn("Expected null or instance of "+Ie.name+", got an instance of "+te.name),ne=te.upcast(ne),te=te.baseClass;return ne}function qi(ne,te){if(te===null)return this.isReference&&Rn("null is not a valid "+this.name),0;te.$$||Rn('Cannot pass "'+Er(te)+'" as a '+this.name),te.$$.ptr||Rn("Cannot pass deleted object as a pointer of type "+this.name);var Ie=te.$$.ptrType.registeredClass,ke=Ao(te.$$.ptr,Ie,this.registeredClass);return ke}function Gs(ne,te){var Ie;if(te===null)return this.isReference&&Rn("null is not a valid "+this.name),this.isSmartPointer?(Ie=this.rawConstructor(),ne!==null&&ne.push(this.rawDestructor,Ie),Ie):0;te.$$||Rn('Cannot pass "'+Er(te)+'" as a '+this.name),te.$$.ptr||Rn("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&te.$$.ptrType.isConst&&Rn("Cannot convert argument of type "+(te.$$.smartPtrType?te.$$.smartPtrType.name:te.$$.ptrType.name)+" to parameter type "+this.name);var ke=te.$$.ptrType.registeredClass;if(Ie=Ao(te.$$.ptr,ke,this.registeredClass),this.isSmartPointer)switch(te.$$.smartPtr===void 0&&Rn("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:te.$$.smartPtrType===this?Ie=te.$$.smartPtr:Rn("Cannot convert argument of type "+(te.$$.smartPtrType?te.$$.smartPtrType.name:te.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:Ie=te.$$.smartPtr;break;case 2:if(te.$$.smartPtrType===this)Ie=te.$$.smartPtr;else{var Je=te.clone();Ie=this.rawShare(Ie,an.toHandle(function(){Je.delete()})),ne!==null&&ne.push(this.rawDestructor,Ie)}break;default:Rn("Unsupporting sharing policy")}return Ie}function Ho(ne,te){if(te===null)return this.isReference&&Rn("null is not a valid "+this.name),0;te.$$||Rn('Cannot pass "'+Er(te)+'" as a '+this.name),te.$$.ptr||Rn("Cannot pass deleted object as a pointer of type "+this.name),te.$$.ptrType.isConst&&Rn("Cannot convert argument of type "+te.$$.ptrType.name+" to parameter type "+this.name);var Ie=te.$$.ptrType.registeredClass,ke=Ao(te.$$.ptr,Ie,this.registeredClass);return ke}function Bs(ne){return this.rawGetPointee&&(ne=this.rawGetPointee(ne)),ne}function xo(ne){this.rawDestructor&&this.rawDestructor(ne)}function ai(ne){ne!==null&&ne.delete()}function gi(){ee.prototype.getPointee=Bs,ee.prototype.destructor=xo,ee.prototype.argPackAdvance=8,ee.prototype.readValueFromPointer=Ze,ee.prototype.deleteObject=ai,ee.prototype.fromWireType=oo}function ee(ne,te,Ie,ke,Je,yt,Ct,dt,z,Q,de){this.name=ne,this.registeredClass=te,this.isReference=Ie,this.isConst=ke,this.isSmartPointer=Je,this.pointeeType=yt,this.sharingPolicy=Ct,this.rawGetPointee=dt,this.rawConstructor=z,this.rawShare=Q,this.rawDestructor=de,!Je&&te.baseClass===void 0?ke?(this.toWireType=qi,this.destructorFunction=null):(this.toWireType=Ho,this.destructorFunction=null):this.toWireType=Gs}function Y(ne,te,Ie){i.hasOwnProperty(ne)||jn("Replacing nonexistant public symbol"),i[ne].overloadTable!==void 0&&Ie!==void 0||(i[ne]=te,i[ne].argCount=Ie)}function le(ne,te,Ie){var ke=i["dynCall_"+ne];return Ie&&Ie.length?ke.apply(null,[te].concat(Ie)):ke.call(null,te)}var Ce=[];function ze(ne){var te=Ce[ne];return te||(ne>=Ce.length&&(Ce.length=ne+1),Ce[ne]=te=Te.get(ne)),te}function rt(ne,te,Ie){if(ne.includes("j"))return le(ne,te,Ie);var ke=ze(te).apply(null,Ie);return ke}function ct(ne,te){var Ie=[];return function(){return Ie.length=0,Object.assign(Ie,arguments),rt(ne,te,Ie)}}function et(ne,te){ne=Kt(ne);function Ie(){return ne.includes("j")?ct(ne,te):ze(te)}var ke=Ie();return typeof ke!="function"&&Rn("unknown function pointer with signature "+ne+": "+te),ke}var It=void 0;function gt(ne){var te=St(ne),Ie=Kt(te);return pt(te),Ie}function mt(ne,te){var Ie=[],ke={};function Je(yt){if(!ke[yt]&&!Ot[yt]){if(Oe[yt]){Oe[yt].forEach(Je);return}Ie.push(yt),ke[yt]=!0}}throw te.forEach(Je),new It(ne+": "+Ie.map(gt).join([", "]))}function bt(ne,te,Ie,ke,Je,yt,Ct,dt,z,Q,de,xe,G){de=Kt(de),yt=et(Je,yt),dt&&(dt=et(Ct,dt)),Q&&(Q=et(z,Q)),G=et(xe,G);var $=Ut(de);so($,function(){mt("Cannot construct "+de+" due to unbound types",[ke])}),xn([ne,te,Ie],ke?[ke]:[],function(oe){oe=oe[0];var ve,Ee;ke?(ve=oe.registeredClass,Ee=ve.instancePrototype):Ee=Ma.prototype;var Ge=Qt($,function(){if(Object.getPrototypeOf(this)!==Ke)throw new qr("Use 'new' to construct "+de);if(He.constructor_body===void 0)throw new qr(de+" has no accessible constructor");var Wt=He.constructor_body[arguments.length];if(Wt===void 0)throw new qr("Tried to invoke ctor of "+de+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(He.constructor_body).toString()+") parameters instead!");return Wt.apply(this,arguments)}),Ke=Object.create(Ee,{constructor:{value:Ge}});Ge.prototype=Ke;var He=new za(de,Ge,Ke,G,ve,yt,dt,Q),tt=new ee(de,He,!0,!1,!1),_t=new ee(de+"*",He,!1,!1,!1),xt=new ee(de+" const*",He,!1,!0,!1);return Gn[ne]={pointerType:_t,constPointerType:xt},Y($,Ge),[tt,_t,xt]})}function kt(ne,te){for(var Ie=[],ke=0;ke<ne;ke++)Ie.push(re[te+ke*4>>2]);return Ie}function dn(ne,te){if(!(ne instanceof Function))throw new TypeError("new_ called with constructor type "+typeof ne+" which is not a function");var Ie=Qt(ne.name||"unknownFunctionName",function(){});Ie.prototype=ne.prototype;var ke=new Ie,Je=ne.apply(ke,te);return Je instanceof Object?Je:ke}function on(ne,te,Ie,ke,Je){var yt=te.length;yt<2&&Rn("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var Ct=te[1]!==null&&Ie!==null,dt=!1,z=1;z<te.length;++z)if(te[z]!==null&&te[z].destructorFunction===void 0){dt=!0;break}for(var Q=te[0].name!=="void",de="",xe="",z=0;z<yt-2;++z)de+=(z!==0?", ":"")+"arg"+z,xe+=(z!==0?", ":"")+"arg"+z+"Wired";var G="return function "+Ut(ne)+"("+de+`) {
if (arguments.length !== `+(yt-2)+`) {
throwBindingError('function `+ne+" called with ' + arguments.length + ' arguments, expected "+(yt-2)+` args!');
}
`;dt&&(G+=`var destructors = [];
`);var $=dt?"destructors":"null",oe=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],ve=[Rn,ke,Je,nt,te[0],te[1]];Ct&&(G+="var thisWired = classParam.toWireType("+$+`, this);
`);for(var z=0;z<yt-2;++z)G+="var arg"+z+"Wired = argType"+z+".toWireType("+$+", arg"+z+"); // "+te[z+2].name+`
`,oe.push("argType"+z),ve.push(te[z+2]);if(Ct&&(xe="thisWired"+(xe.length>0?", ":"")+xe),G+=(Q?"var rv = ":"")+"invoker(fn"+(xe.length>0?", ":"")+xe+`);
`,dt)G+=`runDestructors(destructors);
`;else for(var z=Ct?1:2;z<te.length;++z){var Ee=z===1?"thisWired":"arg"+(z-2)+"Wired";te[z].destructorFunction!==null&&(G+=Ee+"_dtor("+Ee+"); // "+te[z].name+`
`,oe.push(Ee+"_dtor"),ve.push(te[z].destructorFunction))}Q&&(G+=`var ret = retType.fromWireType(rv);
return ret;
`),G+=`}
`,oe.push(G);var Ge=dn(Function,oe).apply(null,ve);return Ge}function sn(ne,te,Ie,ke,Je,yt){M(te>0);var Ct=kt(te,Ie);Je=et(ke,Je),xn([],[ne],function(dt){dt=dt[0];var z="constructor "+dt.name;if(dt.registeredClass.constructor_body===void 0&&(dt.registeredClass.constructor_body=[]),dt.registeredClass.constructor_body[te-1]!==void 0)throw new qr("Cannot register multiple constructors with identical number of parameters ("+(te-1)+") for class '"+dt.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return dt.registeredClass.constructor_body[te-1]=()=>{mt("Cannot construct "+dt.name+" due to unbound types",Ct)},xn([],Ct,function(Q){return Q.splice(1,0,null),dt.registeredClass.constructor_body[te-1]=on(z,Q,null,Je,yt),[]}),[]})}function Mt(ne,te,Ie,ke,Je,yt,Ct,dt){var z=kt(Ie,ke);te=Kt(te),yt=et(Je,yt),xn([],[ne],function(Q){Q=Q[0];var de=Q.name+"."+te;te.startsWith("@@")&&(te=Symbol[te.substring(2)]),dt&&Q.registeredClass.pureVirtualFunctions.push(te);function xe(){mt("Cannot call "+de+" due to unbound types",z)}var G=Q.registeredClass.instancePrototype,$=G[te];return $===void 0||$.overloadTable===void 0&&$.className!==Q.name&&$.argCount===Ie-2?(xe.argCount=Ie-2,xe.className=Q.name,G[te]=xe):(ms(G,te,de),G[te].overloadTable[Ie-2]=xe),xn([],z,function(oe){var ve=on(de,oe,Q,yt,Ct);return G[te].overloadTable===void 0?(ve.argCount=Ie-2,G[te]=ve):G[te].overloadTable[Ie-2]=ve,[]}),[]})}var mn=[],cn=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function _n(ne){ne>4&&--cn[ne].refcount===0&&(cn[ne]=void 0,mn.push(ne))}function rn(){for(var ne=0,te=5;te<cn.length;++te)cn[te]!==void 0&&++ne;return ne}function vn(){for(var ne=5;ne<cn.length;++ne)if(cn[ne]!==void 0)return cn[ne];return null}function Nn(){i.count_emval_handles=rn,i.get_first_emval=vn}var an={toValue:ne=>(ne||Rn("Cannot use deleted val. handle = "+ne),cn[ne].value),toHandle:ne=>{switch(ne){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var te=mn.length?mn.pop():cn.length;return cn[te]={refcount:1,value:ne},te}}}};function Vt(ne,te){te=Kt(te),cr(ne,{name:te,fromWireType:function(Ie){var ke=an.toValue(Ie);return _n(Ie),ke},toWireType:function(Ie,ke){return an.toHandle(ke)},argPackAdvance:8,readValueFromPointer:Ze,destructorFunction:null})}function Er(ne){if(ne===null)return"null";var te=typeof ne;return te==="object"||te==="array"||te==="function"?ne.toString():""+ne}function pn(ne,te){switch(te){case 2:return function(Ie){return this.fromWireType(ue[Ie>>2])};case 3:return function(Ie){return this.fromWireType(De[Ie>>3])};default:throw new TypeError("Unknown float type: "+ne)}}function Se(ne,te,Ie){var ke=$t(Ie);te=Kt(te),cr(ne,{name:te,fromWireType:function(Je){return Je},toWireType:function(Je,yt){return yt},argPackAdvance:8,readValueFromPointer:pn(te,ke),destructorFunction:null})}function We(ne,te,Ie){switch(te){case 0:return Ie?function(Je){return H[Je]}:function(Je){return F[Je]};case 1:return Ie?function(Je){return U[Je>>1]}:function(Je){return V[Je>>1]};case 2:return Ie?function(Je){return X[Je>>2]}:function(Je){return re[Je>>2]};default:throw new TypeError("Unknown integer type: "+ne)}}function lt(ne,te,Ie,ke,Je){te=Kt(te);var yt=$t(Ie),Ct=xe=>xe;if(ke===0){var dt=32-8*Ie;Ct=xe=>xe<<dt>>>dt}var z=te.includes("unsigned"),Q=(xe,G)=>{},de;z?de=function(xe,G){return Q(G,this.name),G>>>0}:de=function(xe,G){return Q(G,this.name),G},cr(ne,{name:te,fromWireType:Ct,toWireType:de,argPackAdvance:8,readValueFromPointer:We(te,yt,ke!==0),destructorFunction:null})}function wt(ne,te,Ie){var ke=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],Je=ke[te];function yt(Ct){Ct=Ct>>2;var dt=re,z=dt[Ct],Q=dt[Ct+1];return new Je(L,Q,z)}Ie=Kt(Ie),cr(ne,{name:Ie,fromWireType:yt,argPackAdvance:8,readValueFromPointer:yt},{ignoreDuplicateRegistrations:!0})}function On(ne,te){te=Kt(te);var Ie=te==="std::string";cr(ne,{name:te,fromWireType:function(ke){var Je=re[ke>>2],yt=ke+4,Ct;if(Ie)for(var dt=yt,z=0;z<=Je;++z){var Q=yt+z;if(z==Je||F[Q]==0){var de=Q-dt,xe=w(dt,de);Ct===void 0?Ct=xe:(Ct+="\0",Ct+=xe),dt=Q+1}}else{for(var G=new Array(Je),z=0;z<Je;++z)G[z]=String.fromCharCode(F[yt+z]);Ct=G.join("")}return pt(ke),Ct},toWireType:function(ke,Je){Je instanceof ArrayBuffer&&(Je=new Uint8Array(Je));var yt,Ct=typeof Je=="string";Ct||Je instanceof Uint8Array||Je instanceof Uint8ClampedArray||Je instanceof Int8Array||Rn("Cannot pass non-string to std::string"),Ie&&Ct?yt=R(Je):yt=Je.length;var dt=ut(4+yt+1),z=dt+4;if(re[dt>>2]=yt,Ie&&Ct)P(Je,z,yt+1);else if(Ct)for(var Q=0;Q<yt;++Q){var de=Je.charCodeAt(Q);de>255&&(pt(z),Rn("String has UTF-16 code units that do not fit in 8 bits")),F[z+Q]=de}else for(var Q=0;Q<yt;++Q)F[z+Q]=Je[Q];return ke!==null&&ke.push(pt,dt),dt},argPackAdvance:8,readValueFromPointer:Ze,destructorFunction:function(ke){pt(ke)}})}var Sn=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function Bn(ne,te){for(var Ie=ne,ke=Ie>>1,Je=ke+te/2;!(ke>=Je)&&V[ke];)++ke;if(Ie=ke<<1,Ie-ne>32&&Sn)return Sn.decode(F.subarray(ne,Ie));for(var yt="",Ct=0;!(Ct>=te/2);++Ct){var dt=U[ne+Ct*2>>1];if(dt==0)break;yt+=String.fromCharCode(dt)}return yt}function Qn(ne,te,Ie){if(Ie===void 0&&(Ie=2147483647),Ie<2)return 0;Ie-=2;for(var ke=te,Je=Ie<ne.length*2?Ie/2:ne.length,yt=0;yt<Je;++yt){var Ct=ne.charCodeAt(yt);U[te>>1]=Ct,te+=2}return U[te>>1]=0,te-ke}function Zr(ne){return ne.length*2}function jr(ne,te){for(var Ie=0,ke="";!(Ie>=te/4);){var Je=X[ne+Ie*4>>2];if(Je==0)break;if(++Ie,Je>=65536){var yt=Je-65536;ke+=String.fromCharCode(55296|yt>>10,56320|yt&1023)}else ke+=String.fromCharCode(Je)}return ke}function Jr(ne,te,Ie){if(Ie===void 0&&(Ie=2147483647),Ie<4)return 0;for(var ke=te,Je=ke+Ie-4,yt=0;yt<ne.length;++yt){var Ct=ne.charCodeAt(yt);if(Ct>=55296&&Ct<=57343){var dt=ne.charCodeAt(++yt);Ct=65536+((Ct&1023)<<10)|dt&1023}if(X[te>>2]=Ct,te+=4,te+4>Je)break}return X[te>>2]=0,te-ke}function Fa(ne){for(var te=0,Ie=0;Ie<ne.length;++Ie){var ke=ne.charCodeAt(Ie);ke>=55296&&ke<=57343&&++Ie,te+=4}return te}function qa(ne,te,Ie){Ie=Kt(Ie);var ke,Je,yt,Ct,dt;te===2?(ke=Bn,Je=Qn,Ct=Zr,yt=()=>V,dt=1):te===4&&(ke=jr,Je=Jr,Ct=Fa,yt=()=>re,dt=2),cr(ne,{name:Ie,fromWireType:function(z){for(var Q=re[z>>2],de=yt(),xe,G=z+4,$=0;$<=Q;++$){var oe=z+4+$*te;if($==Q||de[oe>>dt]==0){var ve=oe-G,Ee=ke(G,ve);xe===void 0?xe=Ee:(xe+="\0",xe+=Ee),G=oe+te}}return pt(z),xe},toWireType:function(z,Q){typeof Q!="string"&&Rn("Cannot pass non-string to C++ string type "+Ie);var de=Ct(Q),xe=ut(4+de+te);return re[xe>>2]=de>>dt,Je(Q,xe+4,de+te),z!==null&&z.push(pt,xe),xe},argPackAdvance:8,readValueFromPointer:Ze,destructorFunction:function(z){pt(z)}})}function ea(ne,te,Ie,ke,Je,yt){Be[ne]={name:Kt(te),rawConstructor:et(Ie,ke),rawDestructor:et(Je,yt),fields:[]}}function Vr(ne,te,Ie,ke,Je,yt,Ct,dt,z,Q){Be[ne].fields.push({fieldName:Kt(te),getterReturnType:Ie,getter:et(ke,Je),getterContext:yt,setterArgumentType:Ct,setter:et(dt,z),setterContext:Q})}function $o(ne,te){te=Kt(te),cr(ne,{isVoid:!0,name:te,argPackAdvance:0,fromWireType:function(){},toWireType:function(Ie,ke){}})}var zo={};function co(ne){var te=zo[ne];return te===void 0?Kt(ne):te}function d0(){return typeof globalThis=="object"?globalThis:function(){return Function}()("return this")()}function m0(ne){return ne===0?an.toHandle(d0()):(ne=co(ne),an.toHandle(d0()[ne]))}function Ws(ne){ne>4&&(cn[ne].refcount+=1)}function Hs(ne,te){var Ie=Ot[ne];return Ie===void 0&&Rn(te+" has unknown type "+gt(ne)),Ie}function oc(ne){for(var te="",Ie=0;Ie<ne;++Ie)te+=(Ie!==0?", ":"")+"arg"+Ie;for(var ke=()=>re,Je="return function emval_allocator_"+ne+`(constructor, argTypes, args) {
  var HEAPU32 = getMemory();
`,Ie=0;Ie<ne;++Ie)Je+="var argType"+Ie+" = requireRegisteredType(HEAPU32[((argTypes)>>2)], 'parameter "+Ie+`');
var arg`+Ie+" = argType"+Ie+`.readValueFromPointer(args);
args += argType`+Ie+`['argPackAdvance'];
argTypes += 4;
`;return Je+="var obj = new constructor("+te+`);
return valueToHandle(obj);
}
`,new Function("requireRegisteredType","Module","valueToHandle","getMemory",Je)(Hs,i,an.toHandle,ke)}var hs={};function Cu(ne,te,Ie,ke){ne=an.toValue(ne);var Je=hs[te];return Je||(Je=oc(te),hs[te]=Je),Je(ne,Ie,ke)}function sl(ne,te){ne=Hs(ne,"_emval_take_value");var Ie=ne.readValueFromPointer(te);return an.toHandle(Ie)}function Iu(){be("")}function sc(){return 2147483648}function Du(){return sc()}function Eu(ne,te,Ie){F.copyWithin(ne,te,te+Ie)}function Tu(ne){try{return T.grow(ne-L.byteLength+65535>>>16),pe(T.buffer),1}catch{}}function yu(ne){var te=F.length;ne=ne>>>0;var Ie=sc();if(ne>Ie)return!1;let ke=(z,Q)=>z+(Q-z%Q)%Q;for(var Je=1;Je<=4;Je*=2){var yt=te*(1+.2/Je);yt=Math.min(yt,ne+100663296);var Ct=Math.min(Ie,ke(Math.max(ne,yt),65536)),dt=Tu(Ct);if(dt)return!0}return!1}var cc={};function Mu(){return l||"./this.program"}function qo(){if(!qo.strings){var ne=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",te={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:ne,_:Mu()};for(var Ie in cc)cc[Ie]===void 0?delete te[Ie]:te[Ie]=cc[Ie];var ke=[];for(var Ie in te)ke.push(Ie+"="+te[Ie]);qo.strings=ke}return qo.strings}function h0(ne,te,Ie){for(var ke=0;ke<ne.length;++ke)H[te++>>0]=ne.charCodeAt(ke);H[te>>0]=0}function lo(ne,te){var Ie=0;return qo().forEach(function(ke,Je){var yt=te+Ie;re[ne+Je*4>>2]=yt,h0(ke,yt),Ie+=ke.length+1}),0}function ps(ne,te){var Ie=qo();re[ne>>2]=Ie.length;var ke=0;return Ie.forEach(function(Je){ke+=Je.length+1}),re[te>>2]=ke,0}function cl(ne){return 52}function lc(ne,te,Ie,ke,Je){return 70}var ll=[null,[],[]];function p0(ne,te){var Ie=ll[ne];te===0||te===10?((ne===1?I:D)(O(Ie,0)),Ie.length=0):Ie.push(te)}function ul(ne,te,Ie,ke){for(var Je=0,yt=0;yt<Ie;yt++){var Ct=re[te>>2],dt=re[te+4>>2];te+=8;for(var z=0;z<dt;z++)p0(ne,F[Ct+z]);Je+=dt}return re[ke>>2]=Je,0}function ae(ne){var te=i["_"+ne];return te}function ce(ne,te){H.set(ne,te)}function _e(ne,te,Ie,ke,Je){var yt={string:oe=>{var ve=0;if(oe!=null&&oe!==0){var Ee=(oe.length<<2)+1;ve=Nt(Ee),P(oe,ve,Ee)}return ve},array:oe=>{var ve=Nt(oe.length);return ce(oe,ve),ve}};function Ct(oe){return te==="string"?w(oe):te==="boolean"?!!oe:oe}var dt=ae(ne),z=[],Q=0;if(ke)for(var de=0;de<ke.length;de++){var xe=yt[Ie[de]];xe?(Q===0&&(Q=ft()),z[de]=xe(ke[de])):z[de]=ke[de]}var G=dt.apply(null,z);function $(oe){return Q!==0&&Tt(Q),Ct(oe)}return G=$(G),G}Dn=i.InternalError=Rt(Error,"InternalError"),Fn(),qr=i.BindingError=Rt(Error,"BindingError"),zi(),wo(),gi(),It=i.UnboundTypeError=Rt(Error,"UnboundTypeError"),Nn();var je={D:Me,e:Qe,t:Et,B:fi,r:bt,q:sn,b:Mt,A:Vt,l:Se,d:lt,a:wt,k:On,f:qa,g:ea,c:Vr,C:$o,h:_n,o:m0,m:Ws,n:Cu,p:sl,i:Iu,v:Du,z:Eu,u:yu,w:lo,x:ps,y:cl,s:lc,j:ul};q(),i.___wasm_call_ctors=function(){return(i.___wasm_call_ctors=i.asm.F).apply(null,arguments)};var ut=i._malloc=function(){return(ut=i._malloc=i.asm.H).apply(null,arguments)},pt=i._free=function(){return(pt=i._free=i.asm.I).apply(null,arguments)},St=i.___getTypeName=function(){return(St=i.___getTypeName=i.asm.J).apply(null,arguments)};i.__embind_initialize_bindings=function(){return(i.__embind_initialize_bindings=i.asm.K).apply(null,arguments)};var ft=i.stackSave=function(){return(ft=i.stackSave=i.asm.L).apply(null,arguments)},Tt=i.stackRestore=function(){return(Tt=i.stackRestore=i.asm.M).apply(null,arguments)},Nt=i.stackAlloc=function(){return(Nt=i.stackAlloc=i.asm.N).apply(null,arguments)},jt=i.___cxa_is_pointer_type=function(){return(jt=i.___cxa_is_pointer_type=i.asm.O).apply(null,arguments)};i.dynCall_iji=function(){return(i.dynCall_iji=i.asm.P).apply(null,arguments)},i.dynCall_jji=function(){return(i.dynCall_jji=i.asm.Q).apply(null,arguments)},i.dynCall_iiji=function(){return(i.dynCall_iiji=i.asm.R).apply(null,arguments)},i.dynCall_jiji=function(){return(i.dynCall_jiji=i.asm.S).apply(null,arguments)},i.ccall=_e;var tn;ge=function ne(){tn||wn(),tn||(ge=ne)};function wn(ne){if(K>0||(k(),K>0))return;function te(){tn||(tn=!0,i.calledRun=!0,!y&&(A(),o(i),i.onRuntimeInitialized&&i.onRuntimeInitialized(),b()))}i.setStatus?(i.setStatus("Running..."),setTimeout(function(){setTimeout(function(){i.setStatus("")},1),te()},1)):te()}if(i.preInit)for(typeof i.preInit=="function"&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.pop()();return wn(),a.ready}})();t.exports=n}(PE)),PE.exports}var Tde=Ede();const yde=Yc(Tde),Mde=new URL("/nifti-viewer/assets/openjpegwasm_decode-C4nnCcr6.wasm",import.meta.url),Qg={codec:void 0,decoder:void 0,decodeConfig:{}};function _de(t){if(Qg.decodeConfig=t,Qg.codec)return Promise.resolve();const e=yde({locateFile:n=>n.endsWith(".wasm")?Mde.toString():n});return new Promise((n,r)=>{e.then(a=>{Qg.codec=a,Qg.decoder=new a.J2KDecoder,n()},r)})}async function L9(t,e){await _de();const n=Qg.decoder,r=n.getEncodedBuffer(t.length);r.set(t),n.decode();const a=n.getFrameInfo(),i=n.getDecodedBuffer();new Uint8Array(i.length).set(i);const s=`x: ${n.getImageOffset().x}, y: ${n.getImageOffset().y}`,c=n.getNumDecompositions(),l=n.getNumLayers(),u=["unknown","LRCP","RLCP","RPCL","PCRL","CPRL"][n.getProgressionOrder()+1],f=n.getIsReversible(),v=`${n.getBlockDimensions().width} x ${n.getBlockDimensions().height}`,g=`${n.getTileSize().width} x ${n.getTileSize().height}`,d=`${n.getTileOffset().x}, ${n.getTileOffset().y}`,m=n.getColorSpace(),h=`${i.length.toLocaleString()} bytes`,C=`${(i.length/r.length).toFixed(2)}:1`,p={columns:a.width,rows:a.height,bitsPerPixel:a.bitsPerSample,signed:a.isSigned,bytesPerPixel:e.bytesPerPixel,componentsPerPixel:a.componentCount},S=Ode(a,i),I={imageOffset:s,numDecompositions:c,numLayers:l,progessionOrder:u,reversible:f,blockDimensions:v,tileSize:g,tileOffset:d,colorTransform:m,decodedSize:h,compressionRatio:C};return{...e,pixelData:S,imageInfo:p,encodeOptions:I,...I,...p}}function Ode(t,e){return t.bitsPerSample>8?t.isSigned?new Int16Array(e.buffer,e.byteOffset,e.byteLength/2):new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2):t.isSigned?new Int8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}var AE={exports:{}},U9;function wde(){return U9||(U9=1,function(t,e){var n=(()=>{var r=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(r=r||__filename),function(i){i=i||{};var i=typeof i<"u"?i:{},o,s;i.ready=new Promise(function(z,Q){o=z,s=Q});var c=Object.assign({},i),l=typeof window=="object",u=typeof importScripts=="function",f=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",v="";function g(z){return i.locateFile?i.locateFile(z,v):v+z}var d,m,h;if(f){var C=j0,p=j0;u?v=p.dirname(v)+"/":v=__dirname+"/",d=(z,Q)=>(z=ie(z)?new URL(z):p.normalize(z),C.readFileSync(z,Q?void 0:"utf8")),h=z=>{var Q=d(z,!0);return Q.buffer||(Q=new Uint8Array(Q)),Q},m=(z,Q,de)=>{z=ie(z)?new URL(z):p.normalize(z),C.readFile(z,function(xe,G){xe?de(xe):Q(G.buffer)})},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",function(z){if(!(z instanceof q))throw z}),process.on("unhandledRejection",function(z){throw z}),i.inspect=function(){return"[Emscripten Module object]"}}else(l||u)&&(u?v=self.location.href:typeof document<"u"&&document.currentScript&&(v=document.currentScript.src),r&&(v=r),v.indexOf("blob:")!==0?v=v.substr(0,v.replace(/[?#].*/,"").lastIndexOf("/")+1):v="",d=z=>{var Q=new XMLHttpRequest;return Q.open("GET",z,!1),Q.send(null),Q.responseText},u&&(h=z=>{var Q=new XMLHttpRequest;return Q.open("GET",z,!1),Q.responseType="arraybuffer",Q.send(null),new Uint8Array(Q.response)}),m=(z,Q,de)=>{var xe=new XMLHttpRequest;xe.open("GET",z,!0),xe.responseType="arraybuffer",xe.onload=()=>{if(xe.status==200||xe.status==0&&xe.response){Q(xe.response);return}de()},xe.onerror=de,xe.send(null)});var S=i.print||console.log.bind(console),I=i.printErr||console.warn.bind(console);Object.assign(i,c),c=null,i.arguments&&i.arguments,i.thisProgram&&i.thisProgram,i.quit&&i.quit;var D;i.wasmBinary&&(D=i.wasmBinary),i.noExitRuntime,typeof WebAssembly!="object"&&we("no native wasm support detected");var E,T=!1;function y(z,Q){z||we(Q)}var M=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function _(z,Q,de){for(var xe=Q+de,G=Q;z[G]&&!(G>=xe);)++G;if(G-Q>16&&z.buffer&&M)return M.decode(z.subarray(Q,G));for(var $="";Q<G;){var oe=z[Q++];if(!(oe&128)){$+=String.fromCharCode(oe);continue}var ve=z[Q++]&63;if((oe&224)==192){$+=String.fromCharCode((oe&31)<<6|ve);continue}var Ee=z[Q++]&63;if((oe&240)==224?oe=(oe&15)<<12|ve<<6|Ee:oe=(oe&7)<<18|ve<<12|Ee<<6|z[Q++]&63,oe<65536)$+=String.fromCharCode(oe);else{var Ge=oe-65536;$+=String.fromCharCode(55296|Ge>>10,56320|Ge&1023)}}return $}function O(z,Q){return z?_(H,z,Q):""}function w(z,Q,de,xe){if(!(xe>0))return 0;for(var G=de,$=de+xe-1,oe=0;oe<z.length;++oe){var ve=z.charCodeAt(oe);if(ve>=55296&&ve<=57343){var Ee=z.charCodeAt(++oe);ve=65536+((ve&1023)<<10)|Ee&1023}if(ve<=127){if(de>=$)break;Q[de++]=ve}else if(ve<=2047){if(de+1>=$)break;Q[de++]=192|ve>>6,Q[de++]=128|ve&63}else if(ve<=65535){if(de+2>=$)break;Q[de++]=224|ve>>12,Q[de++]=128|ve>>6&63,Q[de++]=128|ve&63}else{if(de+3>=$)break;Q[de++]=240|ve>>18,Q[de++]=128|ve>>12&63,Q[de++]=128|ve>>6&63,Q[de++]=128|ve&63}}return Q[de]=0,de-G}function x(z,Q,de){return w(z,H,Q,de)}function P(z){for(var Q=0,de=0;de<z.length;++de){var xe=z.charCodeAt(de);xe<=127?Q++:xe<=2047?Q+=2:xe>=55296&&xe<=57343?(Q+=4,++de):Q+=3}return Q}var R,L,H,F,U,V,X,re,ue;function De(z){R=z,i.HEAP8=L=new Int8Array(z),i.HEAP16=F=new Int16Array(z),i.HEAP32=V=new Int32Array(z),i.HEAPU8=H=new Uint8Array(z),i.HEAPU16=U=new Uint16Array(z),i.HEAPU32=X=new Uint32Array(z),i.HEAPF32=re=new Float32Array(z),i.HEAPF64=ue=new Float64Array(z)}i.INITIAL_MEMORY;var pe,Te=[],Fe=[],Ne=[];function Re(){if(i.preRun)for(typeof i.preRun=="function"&&(i.preRun=[i.preRun]);i.preRun.length;)b(i.preRun.shift());Pe(Te)}function k(){Pe(Fe)}function A(){if(i.postRun)for(typeof i.postRun=="function"&&(i.postRun=[i.postRun]);i.postRun.length;)W(i.postRun.shift());Pe(Ne)}function b(z){Te.unshift(z)}function N(z){Fe.unshift(z)}function W(z){Ne.unshift(z)}var j=0,K=null;function ge(z){j++,i.monitorRunDependencies&&i.monitorRunDependencies(j)}function ye(z){if(j--,i.monitorRunDependencies&&i.monitorRunDependencies(j),j==0&&K){var Q=K;K=null,Q()}}function we(z){i.onAbort&&i.onAbort(z),z="Aborted("+z+")",I(z),T=!0,z+=". Build with -sASSERTIONS for more info.";var Q=new WebAssembly.RuntimeError(z);throw s(Q),Q}var be="data:application/octet-stream;base64,";function Z(z){return z.startsWith(be)}function ie(z){return z.startsWith("file://")}var he;he="openjphjs.wasm",Z(he)||(he=g(he));function se(z){try{if(z==he&&D)return new Uint8Array(D);if(h)return h(z);throw"both async and sync fetching of the wasm failed"}catch(Q){we(Q)}}function me(){if(!D&&(l||u)){if(typeof fetch=="function"&&!ie(he))return fetch(he,{credentials:"same-origin"}).then(function(z){if(!z.ok)throw"failed to load wasm binary file at '"+he+"'";return z.arrayBuffer()}).catch(function(){return se(he)});if(m)return new Promise(function(z,Q){m(he,function(de){z(new Uint8Array(de))},Q)})}return Promise.resolve().then(function(){return se(he)})}function fe(){var z={env:ae,wasi_snapshot_preview1:ae};function Q(oe,ve){var Ee=oe.exports;i.asm=Ee,E=i.asm.memory,De(E.buffer),pe=i.asm.__indirect_function_table,N(i.asm.__wasm_call_ctors),ye()}ge();function de(oe){Q(oe.instance)}function xe(oe){return me().then(function(ve){return WebAssembly.instantiate(ve,z)}).then(function(ve){return ve}).then(oe,function(ve){I("failed to asynchronously prepare wasm: "+ve),we(ve)})}function G(){return!D&&typeof WebAssembly.instantiateStreaming=="function"&&!Z(he)&&!ie(he)&&!f&&typeof fetch=="function"?fetch(he,{credentials:"same-origin"}).then(function(oe){var ve=WebAssembly.instantiateStreaming(oe,z);return ve.then(de,function(Ee){return I("wasm streaming compile failed: "+Ee),I("falling back to ArrayBuffer instantiation"),xe(de)})}):xe(de)}if(i.instantiateWasm)try{var $=i.instantiateWasm(z,Q);return $}catch(oe){I("Module.instantiateWasm callback failed with error: "+oe),s(oe)}return G().catch(s),{}}function q(z){this.name="ExitStatus",this.message="Program terminated with exit("+z+")",this.status=z}function Pe(z){for(;z.length>0;)z.shift()(i)}function Le(z,Q,de,xe){we("Assertion failed: "+O(z)+", at: "+[Q?O(Q):"unknown filename",de,xe?O(xe):"unknown function"])}var Ue=[];function Me(z){z.add_ref()}function Be(z){var Q=new $e(z);return Q.get_caught()||Q.set_caught(!0),Q.set_rethrown(!1),Ue.push(Q),Me(Q),Q.get_exception_ptr()}var nt=0,Ze=[];function at(z){var Q=Ze[z];return Q||(z>=Ze.length&&(Ze.length=z+1),Ze[z]=Q=pe.get(z)),Q}function Ot(z){if(z.release_ref()&&!z.get_rethrown()){var Q=z.get_destructor();Q&&at(Q)(z.excPtr),je(z.excPtr)}}function Oe(){_setThrew(0);var z=Ue.pop();Ot(z),nt=0}function $e(z){this.excPtr=z,this.ptr=z-24,this.set_type=function(Q){X[this.ptr+4>>2]=Q},this.get_type=function(){return X[this.ptr+4>>2]},this.set_destructor=function(Q){X[this.ptr+8>>2]=Q},this.get_destructor=function(){return X[this.ptr+8>>2]},this.set_refcount=function(Q){V[this.ptr>>2]=Q},this.set_caught=function(Q){Q=Q?1:0,L[this.ptr+12>>0]=Q},this.get_caught=function(){return L[this.ptr+12>>0]!=0},this.set_rethrown=function(Q){Q=Q?1:0,L[this.ptr+13>>0]=Q},this.get_rethrown=function(){return L[this.ptr+13>>0]!=0},this.init=function(Q,de){this.set_adjusted_ptr(0),this.set_type(Q),this.set_destructor(de),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var Q=V[this.ptr>>2];V[this.ptr>>2]=Q+1},this.release_ref=function(){var Q=V[this.ptr>>2];return V[this.ptr>>2]=Q-1,Q===1},this.set_adjusted_ptr=function(Q){X[this.ptr+16>>2]=Q},this.get_adjusted_ptr=function(){return X[this.ptr+16>>2]},this.get_exception_ptr=function(){var Q=jt(this.get_type());if(Q)return X[this.excPtr>>2];var de=this.get_adjusted_ptr();return de!==0?de:this.excPtr}}function ht(z){throw nt||(nt=z),z}function Ut(){var z=nt;if(!z)return pt(0),0;var Q=new $e(z);Q.set_adjusted_ptr(z);var de=Q.get_type();if(!de)return pt(0),z;for(var xe=0;xe<arguments.length;xe++){var G=arguments[xe];if(G===0||G===de)break;var $=Q.ptr+16;if(Nt(G,de,$))return pt(G),z}return pt(de),z}function Qt(){var z=nt;if(!z)return pt(0),0;var Q=new $e(z);Q.set_adjusted_ptr(z);var de=Q.get_type();if(!de)return pt(0),z;for(var xe=0;xe<arguments.length;xe++){var G=arguments[xe];if(G===0||G===de)break;var $=Q.ptr+16;if(Nt(G,de,$))return pt(G),z}return pt(de),z}function Rt(z,Q,de){var xe=new $e(z);throw xe.init(Q,de),nt=z,z}var Dn={};function jn(z){for(;z.length;){var Q=z.pop(),de=z.pop();de(Q)}}function xn(z){return this.fromWireType(V[z>>2])}var Qe={},Et={},$t={},Fn=48,Rr=57;function Kt(z){if(z===void 0)return"_unknown";z=z.replace(/[^a-zA-Z0-9_]/g,"$");var Q=z.charCodeAt(0);return Q>=Fn&&Q<=Rr?"_"+z:z}function qr(z,Q){return z=Kt(z),new Function("body","return function "+z+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(Q)}function Rn(z,Q){var de=qr(Q,function(xe){this.name=Q,this.message=xe;var G=new Error(xe).stack;G!==void 0&&(this.stack=this.toString()+`
`+G.replace(/^Error(:[^\n]*)?\n/,""))});return de.prototype=Object.create(z.prototype),de.prototype.constructor=de,de.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},de}var cr=void 0;function fi(z){throw new cr(z)}function nn(z,Q,de){z.forEach(function(ve){$t[ve]=Q});function xe(ve){var Ee=de(ve);Ee.length!==z.length&&fi("Mismatched type converter count");for(var Ge=0;Ge<z.length;++Ge)ma(z[Ge],Ee[Ge])}var G=new Array(Q.length),$=[],oe=0;Q.forEach((ve,Ee)=>{Et.hasOwnProperty(ve)?G[Ee]=Et[ve]:($.push(ve),Qe.hasOwnProperty(ve)||(Qe[ve]=[]),Qe[ve].push(()=>{G[Ee]=Et[ve],++oe,oe===$.length&&xe(G)}))}),$.length===0&&xe(G)}function ya(z){var Q=Dn[z];delete Dn[z];var de=Q.rawConstructor,xe=Q.rawDestructor,G=Q.fields,$=G.map(oe=>oe.getterReturnType).concat(G.map(oe=>oe.setterArgumentType));nn([z],$,oe=>{var ve={};return G.forEach((Ee,Ge)=>{var Ke=Ee.fieldName,He=oe[Ge],tt=Ee.getter,_t=Ee.getterContext,xt=oe[Ge+G.length],Wt=Ee.setter,ln=Ee.setterContext;ve[Ke]={read:Mr=>He.fromWireType(tt(_t,Mr)),write:(Mr,rr)=>{var Tr=[];Wt(ln,Mr,xt.toWireType(Tr,rr)),jn(Tr)}}}),[{name:Q.name,fromWireType:function(Ee){var Ge={};for(var Ke in ve)Ge[Ke]=ve[Ke].read(Ee);return xe(Ee),Ge},toWireType:function(Ee,Ge){for(var Ke in ve)if(!(Ke in Ge))throw new TypeError('Missing field:  "'+Ke+'"');var He=de();for(Ke in ve)ve[Ke].write(He,Ge[Ke]);return Ee!==null&&Ee.push(xe,He),He},argPackAdvance:8,readValueFromPointer:xn,destructorFunction:xe}]})}function wi(z,Q,de,xe,G){}function Wi(z){switch(z){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+z)}}function Oo(){for(var z=new Array(256),Q=0;Q<256;++Q)z[Q]=String.fromCharCode(Q);Ci=z}var Ci=void 0;function mr(z){for(var Q="",de=z;H[de];)Q+=Ci[H[de++]];return Q}var Ii=void 0;function Gn(z){throw new Ii(z)}function ma(z,Q,de={}){if(!("argPackAdvance"in Q))throw new TypeError("registerType registeredInstance requires argPackAdvance");var xe=Q.name;if(z||Gn('type "'+xe+'" must have a positive integer typeid pointer'),Et.hasOwnProperty(z)){if(de.ignoreDuplicateRegistrations)return;Gn("Cannot register type '"+xe+"' twice")}if(Et[z]=Q,delete $t[z],Qe.hasOwnProperty(z)){var G=Qe[z];delete Qe[z],G.forEach($=>$())}}function Hi(z,Q,de,xe,G){var $=Wi(de);Q=mr(Q),ma(z,{name:Q,fromWireType:function(oe){return!!oe},toWireType:function(oe,ve){return ve?xe:G},argPackAdvance:8,readValueFromPointer:function(oe){var ve;if(de===1)ve=L;else if(de===2)ve=F;else if(de===4)ve=V;else throw new TypeError("Unknown boolean type size: "+Q);return this.fromWireType(ve[oe>>$])},destructorFunction:null})}function Ha(z){if(!(this instanceof gi)||!(z instanceof gi))return!1;for(var Q=this.$$.ptrType.registeredClass,de=this.$$.ptr,xe=z.$$.ptrType.registeredClass,G=z.$$.ptr;Q.baseClass;)de=Q.upcast(de),Q=Q.baseClass;for(;xe.baseClass;)G=xe.upcast(G),xe=xe.baseClass;return Q===xe&&de===G}function ti(z){return{count:z.count,deleteScheduled:z.deleteScheduled,preservePointerOnDelete:z.preservePointerOnDelete,ptr:z.ptr,ptrType:z.ptrType,smartPtr:z.smartPtr,smartPtrType:z.smartPtrType}}function Di(z){function Q(de){return de.$$.ptrType.registeredClass.name}Gn(Q(z)+" instance already deleted")}var La=!1;function wo(z){}function vi(z){z.smartPtr?z.smartPtrType.rawDestructor(z.smartPtr):z.ptrType.registeredClass.rawDestructor(z.ptr)}function Ua(z){z.count.value-=1;var Q=z.count.value===0;Q&&vi(z)}function Po(z,Q,de){if(Q===de)return z;if(de.baseClass===void 0)return null;var xe=Po(z,Q,de.baseClass);return xe===null?null:de.downcast(xe)}var ua={};function oo(){return Object.keys(Ma).length}function $i(){var z=[];for(var Q in Ma)Ma.hasOwnProperty(Q)&&z.push(Ma[Q]);return z}var $a=[];function ni(){for(;$a.length;){var z=$a.pop();z.$$.deleteScheduled=!1,z.delete()}}var ha=void 0;function ri(z){ha=z,$a.length&&ha&&ha(ni)}function zi(){i.getInheritedInstanceCount=oo,i.getLiveInheritedInstances=$i,i.flushPendingDeletes=ni,i.setDelayFunction=ri}var Ma={};function ms(z,Q){for(Q===void 0&&Gn("ptr should not be undefined");z.baseClass;)Q=z.upcast(Q),z=z.baseClass;return Q}function so(z,Q){return Q=ms(z,Q),Ma[Q]}function za(z,Q){(!Q.ptrType||!Q.ptr)&&fi("makeClassHandle requires ptr and ptrType");var de=!!Q.smartPtrType,xe=!!Q.smartPtr;return de!==xe&&fi("Both smartPtrType and smartPtr must be specified"),Q.count={value:1},qi(Object.create(z,{$$:{value:Q}}))}function Ao(z){var Q=this.getPointee(z);if(!Q)return this.destructor(z),null;var de=so(this.registeredClass,Q);if(de!==void 0){if(de.$$.count.value===0)return de.$$.ptr=Q,de.$$.smartPtr=z,de.clone();var xe=de.clone();return this.destructor(z),xe}function G(){return this.isSmartPointer?za(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:Q,smartPtrType:this,smartPtr:z}):za(this.registeredClass.instancePrototype,{ptrType:this,ptr:z})}var $=this.registeredClass.getActualType(Q),oe=ua[$];if(!oe)return G.call(this);var ve;this.isConst?ve=oe.constPointerType:ve=oe.pointerType;var Ee=Po(Q,this.registeredClass,ve.registeredClass);return Ee===null?G.call(this):this.isSmartPointer?za(ve.registeredClass.instancePrototype,{ptrType:ve,ptr:Ee,smartPtrType:this,smartPtr:z}):za(ve.registeredClass.instancePrototype,{ptrType:ve,ptr:Ee})}function qi(z){return typeof FinalizationRegistry>"u"?(qi=Q=>Q,z):(La=new FinalizationRegistry(Q=>{Ua(Q.$$)}),qi=Q=>{var de=Q.$$,xe=!!de.smartPtr;if(xe){var G={$$:de};La.register(Q,G,Q)}return Q},wo=Q=>La.unregister(Q),qi(z))}function Gs(){if(this.$$.ptr||Di(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var z=qi(Object.create(Object.getPrototypeOf(this),{$$:{value:ti(this.$$)}}));return z.$$.count.value+=1,z.$$.deleteScheduled=!1,z}function Ho(){this.$$.ptr||Di(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Gn("Object already scheduled for deletion"),wo(this),Ua(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function Bs(){return!this.$$.ptr}function xo(){return this.$$.ptr||Di(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Gn("Object already scheduled for deletion"),$a.push(this),$a.length===1&&ha&&ha(ni),this.$$.deleteScheduled=!0,this}function ai(){gi.prototype.isAliasOf=Ha,gi.prototype.clone=Gs,gi.prototype.delete=Ho,gi.prototype.isDeleted=Bs,gi.prototype.deleteLater=xo}function gi(){}function ee(z,Q,de){if(z[Q].overloadTable===void 0){var xe=z[Q];z[Q]=function(){return z[Q].overloadTable.hasOwnProperty(arguments.length)||Gn("Function '"+de+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+z[Q].overloadTable+")!"),z[Q].overloadTable[arguments.length].apply(this,arguments)},z[Q].overloadTable=[],z[Q].overloadTable[xe.argCount]=xe}}function Y(z,Q,de){i.hasOwnProperty(z)?((de===void 0||i[z].overloadTable!==void 0&&i[z].overloadTable[de]!==void 0)&&Gn("Cannot register public name '"+z+"' twice"),ee(i,z,z),i.hasOwnProperty(de)&&Gn("Cannot register multiple overloads of a function with the same number of arguments ("+de+")!"),i[z].overloadTable[de]=Q):(i[z]=Q,de!==void 0&&(i[z].numArguments=de))}function le(z,Q,de,xe,G,$,oe,ve){this.name=z,this.constructor=Q,this.instancePrototype=de,this.rawDestructor=xe,this.baseClass=G,this.getActualType=$,this.upcast=oe,this.downcast=ve,this.pureVirtualFunctions=[]}function Ce(z,Q,de){for(;Q!==de;)Q.upcast||Gn("Expected null or instance of "+de.name+", got an instance of "+Q.name),z=Q.upcast(z),Q=Q.baseClass;return z}function ze(z,Q){if(Q===null)return this.isReference&&Gn("null is not a valid "+this.name),0;Q.$$||Gn('Cannot pass "'+Qn(Q)+'" as a '+this.name),Q.$$.ptr||Gn("Cannot pass deleted object as a pointer of type "+this.name);var de=Q.$$.ptrType.registeredClass,xe=Ce(Q.$$.ptr,de,this.registeredClass);return xe}function rt(z,Q){var de;if(Q===null)return this.isReference&&Gn("null is not a valid "+this.name),this.isSmartPointer?(de=this.rawConstructor(),z!==null&&z.push(this.rawDestructor,de),de):0;Q.$$||Gn('Cannot pass "'+Qn(Q)+'" as a '+this.name),Q.$$.ptr||Gn("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&Q.$$.ptrType.isConst&&Gn("Cannot convert argument of type "+(Q.$$.smartPtrType?Q.$$.smartPtrType.name:Q.$$.ptrType.name)+" to parameter type "+this.name);var xe=Q.$$.ptrType.registeredClass;if(de=Ce(Q.$$.ptr,xe,this.registeredClass),this.isSmartPointer)switch(Q.$$.smartPtr===void 0&&Gn("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:Q.$$.smartPtrType===this?de=Q.$$.smartPtr:Gn("Cannot convert argument of type "+(Q.$$.smartPtrType?Q.$$.smartPtrType.name:Q.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:de=Q.$$.smartPtr;break;case 2:if(Q.$$.smartPtrType===this)de=Q.$$.smartPtr;else{var G=Q.clone();de=this.rawShare(de,Sn.toHandle(function(){G.delete()})),z!==null&&z.push(this.rawDestructor,de)}break;default:Gn("Unsupporting sharing policy")}return de}function ct(z,Q){if(Q===null)return this.isReference&&Gn("null is not a valid "+this.name),0;Q.$$||Gn('Cannot pass "'+Qn(Q)+'" as a '+this.name),Q.$$.ptr||Gn("Cannot pass deleted object as a pointer of type "+this.name),Q.$$.ptrType.isConst&&Gn("Cannot convert argument of type "+Q.$$.ptrType.name+" to parameter type "+this.name);var de=Q.$$.ptrType.registeredClass,xe=Ce(Q.$$.ptr,de,this.registeredClass);return xe}function et(z){return this.rawGetPointee&&(z=this.rawGetPointee(z)),z}function It(z){this.rawDestructor&&this.rawDestructor(z)}function gt(z){z!==null&&z.delete()}function mt(){bt.prototype.getPointee=et,bt.prototype.destructor=It,bt.prototype.argPackAdvance=8,bt.prototype.readValueFromPointer=xn,bt.prototype.deleteObject=gt,bt.prototype.fromWireType=Ao}function bt(z,Q,de,xe,G,$,oe,ve,Ee,Ge,Ke){this.name=z,this.registeredClass=Q,this.isReference=de,this.isConst=xe,this.isSmartPointer=G,this.pointeeType=$,this.sharingPolicy=oe,this.rawGetPointee=ve,this.rawConstructor=Ee,this.rawShare=Ge,this.rawDestructor=Ke,!G&&Q.baseClass===void 0?xe?(this.toWireType=ze,this.destructorFunction=null):(this.toWireType=ct,this.destructorFunction=null):this.toWireType=rt}function kt(z,Q,de){i.hasOwnProperty(z)||fi("Replacing nonexistant public symbol"),i[z].overloadTable!==void 0&&de!==void 0?i[z].overloadTable[de]=Q:(i[z]=Q,i[z].argCount=de)}function dn(z,Q,de){var xe=i["dynCall_"+z];return de&&de.length?xe.apply(null,[Q].concat(de)):xe.call(null,Q)}function on(z,Q,de){if(z.includes("j"))return dn(z,Q,de);var xe=at(Q).apply(null,de);return xe}function sn(z,Q){var de=[];return function(){return de.length=0,Object.assign(de,arguments),on(z,Q,de)}}function Mt(z,Q){z=mr(z);function de(){return z.includes("j")?sn(z,Q):at(Q)}var xe=de();return typeof xe!="function"&&Gn("unknown function pointer with signature "+z+": "+Q),xe}var mn=void 0;function cn(z){var Q=ut(z),de=mr(Q);return _e(Q),de}function _n(z,Q){var de=[],xe={};function G($){if(!xe[$]&&!Et[$]){if($t[$]){$t[$].forEach(G);return}de.push($),xe[$]=!0}}throw Q.forEach(G),new mn(z+": "+de.map(cn).join([", "]))}function rn(z,Q,de,xe,G,$,oe,ve,Ee,Ge,Ke,He,tt){Ke=mr(Ke),$=Mt(G,$),ve&&(ve=Mt(oe,ve)),Ge&&(Ge=Mt(Ee,Ge)),tt=Mt(He,tt);var _t=Kt(Ke);Y(_t,function(){_n("Cannot construct "+Ke+" due to unbound types",[xe])}),nn([z,Q,de],xe?[xe]:[],function(xt){xt=xt[0];var Wt,ln;xe?(Wt=xt.registeredClass,ln=Wt.instancePrototype):ln=gi.prototype;var Mr=qr(_t,function(){if(Object.getPrototypeOf(this)!==rr)throw new Ii("Use 'new' to construct "+Ke);if(Tr.constructor_body===void 0)throw new Ii(Ke+" has no accessible constructor");var Ss=Tr.constructor_body[arguments.length];if(Ss===void 0)throw new Ii("Tried to invoke ctor of "+Ke+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(Tr.constructor_body).toString()+") parameters instead!");return Ss.apply(this,arguments)}),rr=Object.create(ln,{constructor:{value:Mr}});Mr.prototype=rr;var Tr=new le(Ke,Mr,rr,tt,Wt,$,ve,Ge),Pi=new bt(Ke,Tr,!0,!1,!1),jo=new bt(Ke+"*",Tr,!1,!1,!1),fl=new bt(Ke+" const*",Tr,!1,!0,!1);return ua[z]={pointerType:jo,constPointerType:fl},kt(_t,Mr),[Pi,jo,fl]})}function vn(z,Q){for(var de=[],xe=0;xe<z;xe++)de.push(X[Q+xe*4>>2]);return de}function Nn(z,Q){if(!(z instanceof Function))throw new TypeError("new_ called with constructor type "+typeof z+" which is not a function");var de=qr(z.name||"unknownFunctionName",function(){});de.prototype=z.prototype;var xe=new de,G=z.apply(xe,Q);return G instanceof Object?G:xe}function an(z,Q,de,xe,G){var $=Q.length;$<2&&Gn("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var oe=Q[1]!==null&&de!==null,ve=!1,Ee=1;Ee<Q.length;++Ee)if(Q[Ee]!==null&&Q[Ee].destructorFunction===void 0){ve=!0;break}for(var Ge=Q[0].name!=="void",Ke="",He="",Ee=0;Ee<$-2;++Ee)Ke+=(Ee!==0?", ":"")+"arg"+Ee,He+=(Ee!==0?", ":"")+"arg"+Ee+"Wired";var tt="return function "+Kt(z)+"("+Ke+`) {
if (arguments.length !== `+($-2)+`) {
throwBindingError('function `+z+" called with ' + arguments.length + ' arguments, expected "+($-2)+` args!');
}
`;ve&&(tt+=`var destructors = [];
`);var _t=ve?"destructors":"null",xt=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],Wt=[Gn,xe,G,jn,Q[0],Q[1]];oe&&(tt+="var thisWired = classParam.toWireType("+_t+`, this);
`);for(var Ee=0;Ee<$-2;++Ee)tt+="var arg"+Ee+"Wired = argType"+Ee+".toWireType("+_t+", arg"+Ee+"); // "+Q[Ee+2].name+`
`,xt.push("argType"+Ee),Wt.push(Q[Ee+2]);if(oe&&(He="thisWired"+(He.length>0?", ":"")+He),tt+=(Ge?"var rv = ":"")+"invoker(fn"+(He.length>0?", ":"")+He+`);
`,ve)tt+=`runDestructors(destructors);
`;else for(var Ee=oe?1:2;Ee<Q.length;++Ee){var ln=Ee===1?"thisWired":"arg"+(Ee-2)+"Wired";Q[Ee].destructorFunction!==null&&(tt+=ln+"_dtor("+ln+"); // "+Q[Ee].name+`
`,xt.push(ln+"_dtor"),Wt.push(Q[Ee].destructorFunction))}Ge&&(tt+=`var ret = retType.fromWireType(rv);
return ret;
`),tt+=`}
`,xt.push(tt);var Mr=Nn(Function,xt).apply(null,Wt);return Mr}function Vt(z,Q,de,xe,G,$){y(Q>0);var oe=vn(Q,de);G=Mt(xe,G),nn([],[z],function(ve){ve=ve[0];var Ee="constructor "+ve.name;if(ve.registeredClass.constructor_body===void 0&&(ve.registeredClass.constructor_body=[]),ve.registeredClass.constructor_body[Q-1]!==void 0)throw new Ii("Cannot register multiple constructors with identical number of parameters ("+(Q-1)+") for class '"+ve.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return ve.registeredClass.constructor_body[Q-1]=()=>{_n("Cannot construct "+ve.name+" due to unbound types",oe)},nn([],oe,function(Ge){return Ge.splice(1,0,null),ve.registeredClass.constructor_body[Q-1]=an(Ee,Ge,null,G,$),[]}),[]})}function Er(z,Q,de,xe,G,$,oe,ve){var Ee=vn(de,xe);Q=mr(Q),$=Mt(G,$),nn([],[z],function(Ge){Ge=Ge[0];var Ke=Ge.name+"."+Q;Q.startsWith("@@")&&(Q=Symbol[Q.substring(2)]),ve&&Ge.registeredClass.pureVirtualFunctions.push(Q);function He(){_n("Cannot call "+Ke+" due to unbound types",Ee)}var tt=Ge.registeredClass.instancePrototype,_t=tt[Q];return _t===void 0||_t.overloadTable===void 0&&_t.className!==Ge.name&&_t.argCount===de-2?(He.argCount=de-2,He.className=Ge.name,tt[Q]=He):(ee(tt,Q,Ke),tt[Q].overloadTable[de-2]=He),nn([],Ee,function(xt){var Wt=an(Ke,xt,Ge,$,oe);return tt[Q].overloadTable===void 0?(Wt.argCount=de-2,tt[Q]=Wt):tt[Q].overloadTable[de-2]=Wt,[]}),[]})}var pn=[],Se=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function We(z){z>4&&--Se[z].refcount===0&&(Se[z]=void 0,pn.push(z))}function lt(){for(var z=0,Q=5;Q<Se.length;++Q)Se[Q]!==void 0&&++z;return z}function wt(){for(var z=5;z<Se.length;++z)if(Se[z]!==void 0)return Se[z];return null}function On(){i.count_emval_handles=lt,i.get_first_emval=wt}var Sn={toValue:z=>(z||Gn("Cannot use deleted val. handle = "+z),Se[z].value),toHandle:z=>{switch(z){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var Q=pn.length?pn.pop():Se.length;return Se[Q]={refcount:1,value:z},Q}}}};function Bn(z,Q){Q=mr(Q),ma(z,{name:Q,fromWireType:function(de){var xe=Sn.toValue(de);return We(de),xe},toWireType:function(de,xe){return Sn.toHandle(xe)},argPackAdvance:8,readValueFromPointer:xn,destructorFunction:null})}function Qn(z){if(z===null)return"null";var Q=typeof z;return Q==="object"||Q==="array"||Q==="function"?z.toString():""+z}function Zr(z,Q){switch(Q){case 2:return function(de){return this.fromWireType(re[de>>2])};case 3:return function(de){return this.fromWireType(ue[de>>3])};default:throw new TypeError("Unknown float type: "+z)}}function jr(z,Q,de){var xe=Wi(de);Q=mr(Q),ma(z,{name:Q,fromWireType:function(G){return G},toWireType:function(G,$){return $},argPackAdvance:8,readValueFromPointer:Zr(Q,xe),destructorFunction:null})}function Jr(z,Q,de,xe,G,$){var oe=vn(Q,de);z=mr(z),G=Mt(xe,G),Y(z,function(){_n("Cannot call "+z+" due to unbound types",oe)},Q-1),nn([],oe,function(ve){var Ee=[ve[0],null].concat(ve.slice(1));return kt(z,an(z,Ee,null,G,$),Q-1),[]})}function Fa(z,Q,de){switch(Q){case 0:return de?function(G){return L[G]}:function(G){return H[G]};case 1:return de?function(G){return F[G>>1]}:function(G){return U[G>>1]};case 2:return de?function(G){return V[G>>2]}:function(G){return X[G>>2]};default:throw new TypeError("Unknown integer type: "+z)}}function qa(z,Q,de,xe,G){Q=mr(Q);var $=Wi(de),oe=He=>He;if(xe===0){var ve=32-8*de;oe=He=>He<<ve>>>ve}var Ee=Q.includes("unsigned"),Ge=(He,tt)=>{},Ke;Ee?Ke=function(He,tt){return Ge(tt,this.name),tt>>>0}:Ke=function(He,tt){return Ge(tt,this.name),tt},ma(z,{name:Q,fromWireType:oe,toWireType:Ke,argPackAdvance:8,readValueFromPointer:Fa(Q,$,xe!==0),destructorFunction:null})}function ea(z,Q,de){var xe=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],G=xe[Q];function $(oe){oe=oe>>2;var ve=X,Ee=ve[oe],Ge=ve[oe+1];return new G(R,Ge,Ee)}de=mr(de),ma(z,{name:de,fromWireType:$,argPackAdvance:8,readValueFromPointer:$},{ignoreDuplicateRegistrations:!0})}function Vr(z,Q){Q=mr(Q);var de=Q==="std::string";ma(z,{name:Q,fromWireType:function(xe){var G=X[xe>>2],$=xe+4,oe;if(de)for(var ve=$,Ee=0;Ee<=G;++Ee){var Ge=$+Ee;if(Ee==G||H[Ge]==0){var Ke=Ge-ve,He=O(ve,Ke);oe===void 0?oe=He:(oe+="\0",oe+=He),ve=Ge+1}}else{for(var tt=new Array(G),Ee=0;Ee<G;++Ee)tt[Ee]=String.fromCharCode(H[$+Ee]);oe=tt.join("")}return _e(xe),oe},toWireType:function(xe,G){G instanceof ArrayBuffer&&(G=new Uint8Array(G));var $,oe=typeof G=="string";oe||G instanceof Uint8Array||G instanceof Uint8ClampedArray||G instanceof Int8Array||Gn("Cannot pass non-string to std::string"),de&&oe?$=P(G):$=G.length;var ve=ce(4+$+1),Ee=ve+4;if(X[ve>>2]=$,de&&oe)x(G,Ee,$+1);else if(oe)for(var Ge=0;Ge<$;++Ge){var Ke=G.charCodeAt(Ge);Ke>255&&(_e(Ee),Gn("String has UTF-16 code units that do not fit in 8 bits")),H[Ee+Ge]=Ke}else for(var Ge=0;Ge<$;++Ge)H[Ee+Ge]=G[Ge];return xe!==null&&xe.push(_e,ve),ve},argPackAdvance:8,readValueFromPointer:xn,destructorFunction:function(xe){_e(xe)}})}var $o=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function zo(z,Q){for(var de=z,xe=de>>1,G=xe+Q/2;!(xe>=G)&&U[xe];)++xe;if(de=xe<<1,de-z>32&&$o)return $o.decode(H.subarray(z,de));for(var $="",oe=0;!(oe>=Q/2);++oe){var ve=F[z+oe*2>>1];if(ve==0)break;$+=String.fromCharCode(ve)}return $}function co(z,Q,de){if(de===void 0&&(de=2147483647),de<2)return 0;de-=2;for(var xe=Q,G=de<z.length*2?de/2:z.length,$=0;$<G;++$){var oe=z.charCodeAt($);F[Q>>1]=oe,Q+=2}return F[Q>>1]=0,Q-xe}function d0(z){return z.length*2}function m0(z,Q){for(var de=0,xe="";!(de>=Q/4);){var G=V[z+de*4>>2];if(G==0)break;if(++de,G>=65536){var $=G-65536;xe+=String.fromCharCode(55296|$>>10,56320|$&1023)}else xe+=String.fromCharCode(G)}return xe}function Ws(z,Q,de){if(de===void 0&&(de=2147483647),de<4)return 0;for(var xe=Q,G=xe+de-4,$=0;$<z.length;++$){var oe=z.charCodeAt($);if(oe>=55296&&oe<=57343){var ve=z.charCodeAt(++$);oe=65536+((oe&1023)<<10)|ve&1023}if(V[Q>>2]=oe,Q+=4,Q+4>G)break}return V[Q>>2]=0,Q-xe}function Hs(z){for(var Q=0,de=0;de<z.length;++de){var xe=z.charCodeAt(de);xe>=55296&&xe<=57343&&++de,Q+=4}return Q}function oc(z,Q,de){de=mr(de);var xe,G,$,oe,ve;Q===2?(xe=zo,G=co,oe=d0,$=()=>U,ve=1):Q===4&&(xe=m0,G=Ws,oe=Hs,$=()=>X,ve=2),ma(z,{name:de,fromWireType:function(Ee){for(var Ge=X[Ee>>2],Ke=$(),He,tt=Ee+4,_t=0;_t<=Ge;++_t){var xt=Ee+4+_t*Q;if(_t==Ge||Ke[xt>>ve]==0){var Wt=xt-tt,ln=xe(tt,Wt);He===void 0?He=ln:(He+="\0",He+=ln),tt=xt+Q}}return _e(Ee),He},toWireType:function(Ee,Ge){typeof Ge!="string"&&Gn("Cannot pass non-string to C++ string type "+de);var Ke=oe(Ge),He=ce(4+Ke+Q);return X[He>>2]=Ke>>ve,G(Ge,He+4,Ke+Q),Ee!==null&&Ee.push(_e,He),He},argPackAdvance:8,readValueFromPointer:xn,destructorFunction:function(Ee){_e(Ee)}})}function hs(z,Q,de,xe,G,$){Dn[z]={name:mr(Q),rawConstructor:Mt(de,xe),rawDestructor:Mt(G,$),fields:[]}}function Cu(z,Q,de,xe,G,$,oe,ve,Ee,Ge){Dn[z].fields.push({fieldName:mr(Q),getterReturnType:de,getter:Mt(xe,G),getterContext:$,setterArgumentType:oe,setter:Mt(ve,Ee),setterContext:Ge})}function sl(z,Q){Q=mr(Q),ma(z,{isVoid:!0,name:Q,argPackAdvance:0,fromWireType:function(){},toWireType:function(de,xe){}})}function Iu(z){z>4&&(Se[z].refcount+=1)}function sc(z,Q){var de=Et[z];return de===void 0&&Gn(Q+" has unknown type "+cn(z)),de}function Du(z,Q){z=sc(z,"_emval_take_value");var de=z.readValueFromPointer(Q);return Sn.toHandle(de)}function Eu(){we("")}function Tu(z,Q,de){H.copyWithin(z,Q,Q+de)}function yu(){return 2147483648}function cc(z){try{return E.grow(z-R.byteLength+65535>>>16),De(E.buffer),1}catch{}}function Mu(z){var Q=H.length;z=z>>>0;var de=yu();if(z>de)return!1;let xe=(Ee,Ge)=>Ee+(Ge-Ee%Ge)%Ge;for(var G=1;G<=4;G*=2){var $=Q*(1+.2/G);$=Math.min($,z+100663296);var oe=Math.min(de,xe(Math.max(z,$),65536)),ve=cc(oe);if(ve)return!0}return!1}function qo(z){return 52}function h0(z,Q,de,xe,G){return 70}var lo=[null,[],[]];function ps(z,Q){var de=lo[z];Q===0||Q===10?((z===1?S:I)(_(de,0)),de.length=0):de.push(Q)}function cl(z,Q,de,xe){for(var G=0,$=0;$<de;$++){var oe=X[Q>>2],ve=X[Q+4>>2];Q+=8;for(var Ee=0;Ee<ve;Ee++)ps(z,H[oe+Ee]);G+=ve}return X[xe>>2]=G,0}function lc(z){return z}function ll(z){var Q=i["_"+z];return Q}function p0(z,Q){L.set(z,Q)}function ul(z,Q,de,xe,G){var $={string:xt=>{var Wt=0;if(xt!=null&&xt!==0){var ln=(xt.length<<2)+1;Wt=Tt(ln),x(xt,Wt,ln)}return Wt},array:xt=>{var Wt=Tt(xt.length);return p0(xt,Wt),Wt}};function oe(xt){return Q==="string"?O(xt):Q==="boolean"?!!xt:xt}var ve=ll(z),Ee=[],Ge=0;if(xe)for(var Ke=0;Ke<xe.length;Ke++){var He=$[de[Ke]];He?(Ge===0&&(Ge=St()),Ee[Ke]=He(xe[Ke])):Ee[Ke]=xe[Ke]}var tt=ve.apply(null,Ee);function _t(xt){return Ge!==0&&ft(Ge),oe(xt)}return tt=_t(tt),tt}cr=i.InternalError=Rn(Error,"InternalError"),Oo(),Ii=i.BindingError=Rn(Error,"BindingError"),ai(),zi(),mt(),mn=i.UnboundTypeError=Rn(Error,"UnboundTypeError"),On();var ae={__assert_fail:Le,__cxa_begin_catch:Be,__cxa_end_catch:Oe,__cxa_find_matching_catch_2:Ut,__cxa_find_matching_catch_3:Qt,__cxa_throw:Rt,__resumeException:ht,_embind_finalize_value_object:ya,_embind_register_bigint:wi,_embind_register_bool:Hi,_embind_register_class:rn,_embind_register_class_constructor:Vt,_embind_register_class_function:Er,_embind_register_emval:Bn,_embind_register_float:jr,_embind_register_function:Jr,_embind_register_integer:qa,_embind_register_memory_view:ea,_embind_register_std_string:Vr,_embind_register_std_wstring:oc,_embind_register_value_object:hs,_embind_register_value_object_field:Cu,_embind_register_void:sl,_emval_decref:We,_emval_incref:Iu,_emval_take_value:Du,abort:Eu,emscripten_memcpy_big:Tu,emscripten_resize_heap:Mu,fd_close:qo,fd_seek:h0,fd_write:cl,invoke_i:ke,invoke_ii:tn,invoke_iii:yt,invoke_iiii:Ie,invoke_v:te,invoke_vi:wn,invoke_viiii:ne,invoke_viiiiii:Je,llvm_eh_typeid_for:lc};fe(),i.___wasm_call_ctors=function(){return(i.___wasm_call_ctors=i.asm.__wasm_call_ctors).apply(null,arguments)};var ce=i._malloc=function(){return(ce=i._malloc=i.asm.malloc).apply(null,arguments)},_e=i._free=function(){return(_e=i._free=i.asm.free).apply(null,arguments)},je=i.___cxa_free_exception=function(){return(je=i.___cxa_free_exception=i.asm.__cxa_free_exception).apply(null,arguments)},ut=i.___getTypeName=function(){return(ut=i.___getTypeName=i.asm.__getTypeName).apply(null,arguments)};i.__embind_initialize_bindings=function(){return(i.__embind_initialize_bindings=i.asm._embind_initialize_bindings).apply(null,arguments)},i.___errno_location=function(){return(i.___errno_location=i.asm.__errno_location).apply(null,arguments)};var pt=i.setTempRet0=function(){return(pt=i.setTempRet0=i.asm.setTempRet0).apply(null,arguments)},St=i.stackSave=function(){return(St=i.stackSave=i.asm.stackSave).apply(null,arguments)},ft=i.stackRestore=function(){return(ft=i.stackRestore=i.asm.stackRestore).apply(null,arguments)},Tt=i.stackAlloc=function(){return(Tt=i.stackAlloc=i.asm.stackAlloc).apply(null,arguments)},Nt=i.___cxa_can_catch=function(){return(Nt=i.___cxa_can_catch=i.asm.__cxa_can_catch).apply(null,arguments)},jt=i.___cxa_is_pointer_type=function(){return(jt=i.___cxa_is_pointer_type=i.asm.__cxa_is_pointer_type).apply(null,arguments)};i.dynCall_ji=function(){return(i.dynCall_ji=i.asm.dynCall_ji).apply(null,arguments)},i.dynCall_iiji=function(){return(i.dynCall_iiji=i.asm.dynCall_iiji).apply(null,arguments)},i.dynCall_jiji=function(){return(i.dynCall_jiji=i.asm.dynCall_jiji).apply(null,arguments)};function tn(z,Q){var de=St();try{return at(z)(Q)}catch(xe){if(ft(de),xe!==xe+0)throw xe;_setThrew(1,0)}}function wn(z,Q){var de=St();try{at(z)(Q)}catch(xe){if(ft(de),xe!==xe+0)throw xe;_setThrew(1,0)}}function ne(z,Q,de,xe,G){var $=St();try{at(z)(Q,de,xe,G)}catch(oe){if(ft($),oe!==oe+0)throw oe;_setThrew(1,0)}}function te(z){var Q=St();try{at(z)()}catch(de){if(ft(Q),de!==de+0)throw de;_setThrew(1,0)}}function Ie(z,Q,de,xe){var G=St();try{return at(z)(Q,de,xe)}catch($){if(ft(G),$!==$+0)throw $;_setThrew(1,0)}}function ke(z){var Q=St();try{return at(z)()}catch(de){if(ft(Q),de!==de+0)throw de;_setThrew(1,0)}}function Je(z,Q,de,xe,G,$,oe){var ve=St();try{at(z)(Q,de,xe,G,$,oe)}catch(Ee){if(ft(ve),Ee!==Ee+0)throw Ee;_setThrew(1,0)}}function yt(z,Q,de){var xe=St();try{return at(z)(Q,de)}catch(G){if(ft(xe),G!==G+0)throw G;_setThrew(1,0)}}i.ccall=ul;var Ct;K=function z(){Ct||dt(),Ct||(K=z)};function dt(z){if(j>0||(Re(),j>0))return;function Q(){Ct||(Ct=!0,i.calledRun=!0,!T&&(k(),o(i),i.onRuntimeInitialized&&i.onRuntimeInitialized(),A()))}i.setStatus?(i.setStatus("Running..."),setTimeout(function(){setTimeout(function(){i.setStatus("")},1),Q()},1)):Q()}if(i.preInit)for(typeof i.preInit=="function"&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.pop()();return dt(),i.ready}})();t.exports=n}(AE)),AE.exports}var Pde=wde();const Ade=Yc(Pde),xde=new URL("/nifti-viewer/assets/openjphjs-C-BUUy4a.wasm",import.meta.url),Kg={codec:void 0,decoder:void 0,decodeConfig:{}};function Rde(t,e,n){const r={width:e,height:n};for(;t>0;)r.width=Math.ceil(r.width/2),r.height=Math.ceil(r.height/2),t--;return r}function bde(t){if(Kg.decodeConfig=t,Kg.codec)return Promise.resolve();const e=Ade({locateFile:n=>n.endsWith(".wasm")?xde.toString():n});return new Promise((n,r)=>{e.then(a=>{Kg.codec=a,Kg.decoder=new a.HTJ2KDecoder,n()},r)})}async function Nde(t,e){await bde();const n=new Kg.codec.HTJ2KDecoder,r=n.getEncodedBuffer(t.length);r.set(t);const a=e.decodeLevel||0;n.decodeSubResolution(a);const i=n.getFrameInfo();if(e.decodeLevel>0){const{width:M,height:_}=Rde(e.decodeLevel,i.width,i.height);i.width=M,i.height=_}const o=n.getDecodedBuffer();new Uint8Array(o.length).set(o);const c=`x: ${n.getImageOffset().x}, y: ${n.getImageOffset().y}`,l=n.getNumDecompositions(),u=n.getNumLayers(),f=["unknown","LRCP","RLCP","RPCL","PCRL","CPRL"][n.getProgressionOrder()+1],v=n.getIsReversible(),g=`${n.getBlockDimensions().width} x ${n.getBlockDimensions().height}`,d=`${n.getTileSize().width} x ${n.getTileSize().height}`,m=`${n.getTileOffset().x}, ${n.getTileOffset().y}`,h=`${o.length.toLocaleString()} bytes`,C=`${(o.length/r.length).toFixed(2)}:1`,p={columns:i.width,rows:i.height,bitsPerPixel:i.bitsPerSample,signed:i.isSigned,bytesPerPixel:e.bytesPerPixel,componentsPerPixel:i.componentCount};let S=Lde(i,o);const{buffer:I,byteOffset:D,byteLength:E}=S,T=I.slice(D,D+E);S=new S.constructor(T);const y={imageOffset:c,numDecompositions:l,numLayers:u,progessionOrder:f,reversible:v,blockDimensions:g,tileSize:d,tileOffset:m,decodedSize:h,compressionRatio:C};return{...e,pixelData:S,imageInfo:p,encodeOptions:y,...y,...p}}function Lde(t,e){return t.bitsPerSample>8?t.isSigned?new Int16Array(e.buffer,e.byteOffset,e.byteLength/2):new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2):t.isSigned?new Int8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}function Ude(t,e){const n=t.length,{rescaleSlope:r,rescaleIntercept:a,suvbw:i}=e;if(e.modality==="PT"&&typeof i=="number"&&!isNaN(i))for(let o=0;o<n;o++)t[o]=i*(t[o]*r+a);else for(let o=0;o<n;o++)t[o]=t[o]*r+a;return!0}const Fde={bilinear:Kge,replicate:Xge},Vde={Uint8Array,Uint16Array,Int16Array,Float32Array};function kde(t,e,n,r){var p,S,I;const a=t.pixelRepresentation!==void 0&&t.pixelRepresentation===1,i=a&&t.bitsStored!==void 0?32-t.bitsStored:void 0;if(a&&i!==void 0)for(let D=0;D<t.pixelData.length;D++)t.pixelData[D]=t.pixelData[D]<<i>>i;let o=t.pixelData;t.pixelDataLength=t.pixelData.length;const{min:s,max:c}=AI(t.pixelData),l=typeof e.allowFloatRendering<"u"?e.allowFloatRendering:!0;let u=g_(t.photometricInterpretation)&&((p=e.targetBuffer)==null?void 0:p.offset)===void 0;const v=((S=e.preScale)==null?void 0:S.enabled)&&Object.values(e.preScale.scalingParameters).some(D=>typeof D=="number"&&!Number.isInteger(D)),g=!e.preScale.enabled||!l&&v,d=(I=e.targetBuffer)==null?void 0:I.type;if(d&&e.preScale.enabled&&!g){const{rescaleSlope:D,rescaleIntercept:E}=e.preScale.scalingParameters,T=D*s+E,y=D*c+E;u=!rge(T,y,d)}d&&!u?o=Gde(e,t,Vde,o):e.preScale.enabled&&!g?o=Bde(e,s,c,t):o=jV(s,c,t);let m=s,h=c;if(e.preScale.enabled&&!g){const D=e.preScale.scalingParameters;QV(D);const{rescaleSlope:E,rescaleIntercept:T}=D;if(typeof E=="number"&&typeof T=="number"){Ude(o,D),t.preScale={...e.preScale,scaled:!0};const{rescaleIntercept:M,rescaleSlope:_,suvbw:O}=D;m=_*s+M,h=_*c+M,O&&(m=m*O,h=h*O)}}else g&&(t.preScale={enabled:!0,scaled:!1},m=s,h=c);t.pixelData=o,t.smallestPixelValue=m,t.largestPixelValue=h;const C=new Date().getTime();return t.decodeTimeInMS=C-n,t}function Gde(t,e,n,r){const{arrayBuffer:a,type:i,offset:o=0,length:s,rows:c}=t.targetBuffer,l=n[i];if(!l)throw new Error(`target array ${i} is not supported, or doesn't exist.`);c&&c!=e.rows&&Hde(e,t.targetBuffer,l);const u=e.pixelDataLength,f=o,v=s??u-f,g=e.pixelData;if(v!==g.length)throw new Error(`target array for image does not have the same length (${v}) as the decoded image length (${g.length}).`);const d=a?new l(a,f,v):new l(v);return d.set(g,0),r=d,r}function Bde(t,e,n,r){const a=t.preScale.scalingParameters;QV(a);const{rescaleSlope:i,rescaleIntercept:o}=a,s=typeof i=="number"&&typeof o=="number";let c=e,l=n;return s&&(c=i*e+o,l=i*n+o),jV(c,l,r)}function jV(t,e,n){const r=v_(t,e),a=new r(n.pixelData.length);return a.set(n.pixelData,0),a}function QV(t){if(!t)throw new Error("options.preScale.scalingParameters must be defined if preScale.enabled is true, and scalingParameters cannot be derived from the metadata providers.")}function Wde(t,e,n){const{samplesPerPixel:r}=t,{rows:a,columns:i}=e,o=a*i*r,s=new n(o),c=s.byteLength/o;return{pixelData:s,rows:a,columns:i,frameInfo:{...t.frameInfo,rows:a,columns:i},imageInfo:{...t.imageInfo,rows:a,columns:i,bytesPerPixel:c}}}function Hde(t,e,n){const r=Wde(t,e,n),{scalingType:a="replicate"}=e;return Fde[a](t,r),Object.assign(t,r),t.pixelDataLength=t.pixelData.length,t}async function KV(t,e,n,r,a,i){const o=new Date().getTime();let s=null,c;switch(e){case"1.2.840.10008.1.2":case"1.2.840.10008.1.2.1":s=w9(t,n);break;case"1.2.840.10008.1.2.2":s=Zge(t,n);break;case"1.2.840.10008.1.2.1.99":s=w9(t,n);break;case"1.2.840.10008.1.2.5":s=Jge(t,n);break;case"1.2.840.10008.1.2.4.50":c={...t},s=cde(n,c);break;case"1.2.840.10008.1.2.4.51":s=gde(t,n);break;case"1.2.840.10008.1.2.4.57":s=x9(t,n);break;case"1.2.840.10008.1.2.4.70":s=x9(t,n);break;case"1.2.840.10008.1.2.4.80":c={signed:t.pixelRepresentation===1,bytesPerPixel:t.bitsAllocated<=8?1:2,...t},s=b9(n,c);break;case"1.2.840.10008.1.2.4.81":c={signed:t.pixelRepresentation===1,bytesPerPixel:t.bitsAllocated<=8?1:2,...t},s=b9(n,c);break;case"1.2.840.10008.1.2.4.90":c={...t},s=L9(n,c);break;case"1.2.840.10008.1.2.4.91":c={...t},s=L9(n,c);break;case"3.2.840.10008.1.2.4.96":case"1.2.840.10008.1.2.4.201":case"1.2.840.10008.1.2.4.202":case"1.2.840.10008.1.2.4.203":c={...t},s=Nde(n,c);break;default:throw new Error(`no decoder for transfer syntax ${e}`)}if(!s)throw new Error("decodePromise not defined");const l=await s,u=kde(l,a,o);return i==null||i(u),u}const $de={decodeTask({imageFrame:t,transferSyntax:e,decodeConfig:n,options:r,pixelData:a,callbackFn:i}){return KV(t,e,a,n,r,i)}};O5($de);const zde={constants:Qge,convertRGBColorByPixel:vV,convertRGBColorByPlane:gV,convertYBRFullByPixel:dV,convertYBRFullByPlane:mV,convertPALETTECOLOR:hV,wadouri:hge,wadors:Bge,init:$ge,convertColorSpace:NV,createImage:xI,decodeJPEGBaseline8BitColor:LV,getImageFrame:UV,getPixelData:p_,getMinMax:AI,isColorImage:g_,isJPEGBaseline8BitColor:qge,internal:xve,decodeImageFrame:KV};var ec;(function(t){t[t.Primary=1]="Primary",t[t.Secondary=2]="Secondary",t[t.Primary_And_Secondary=3]="Primary_And_Secondary",t[t.Auxiliary=4]="Auxiliary",t[t.Primary_And_Auxiliary=5]="Primary_And_Auxiliary",t[t.Secondary_And_Auxiliary=6]="Secondary_And_Auxiliary",t[t.Primary_And_Secondary_And_Auxiliary=7]="Primary_And_Secondary_And_Auxiliary",t[t.Fourth_Button=8]="Fourth_Button",t[t.Fifth_Button=16]="Fifth_Button",t[t.Wheel=524288]="Wheel",t[t.Wheel_Primary=524289]="Wheel_Primary"})(ec||(ec={}));var mi;(function(t){t[t.Shift=16]="Shift",t[t.Ctrl=17]="Ctrl",t[t.Alt=18]="Alt",t[t.Meta=91]="Meta",t[t.ShiftCtrl=1617]="ShiftCtrl",t[t.ShiftAlt=1618]="ShiftAlt",t[t.ShiftMeta=1691]="ShiftMeta",t[t.CtrlAlt=1718]="CtrlAlt",t[t.CtrlMeta=1791]="CtrlMeta",t[t.AltMeta=1891]="AltMeta"})(mi||(mi={}));var vr;(function(t){t.Active="Active",t.Passive="Passive",t.Enabled="Enabled",t.Disabled="Disabled"})(vr||(vr={}));var ry;(function(t){t.Default="",t.Highlighted="Highlighted",t.Selected="Selected",t.Locked="Locked",t.AutoGenerated="AutoGenerated"})(ry||(ry={}));const bc=ry;var B;(function(t){t.TOOL_ACTIVATED="CORNERSTONE_TOOLS_TOOL_ACTIVATED",t.TOOLGROUP_VIEWPORT_ADDED="CORNERSTONE_TOOLS_TOOLGROUP_VIEWPORT_ADDED",t.TOOLGROUP_VIEWPORT_REMOVED="CORNERSTONE_TOOLS_TOOLGROUP_VIEWPORT_REMOVED",t.TOOL_MODE_CHANGED="CORNERSTONE_TOOLS_TOOL_MODE_CHANGED",t.ANNOTATION_ADDED="CORNERSTONE_TOOLS_ANNOTATION_ADDED",t.ANNOTATION_COMPLETED="CORNERSTONE_TOOLS_ANNOTATION_COMPLETED",t.ANNOTATION_MODIFIED="CORNERSTONE_TOOLS_ANNOTATION_MODIFIED",t.ANNOTATION_REMOVED="CORNERSTONE_TOOLS_ANNOTATION_REMOVED",t.ANNOTATION_SELECTION_CHANGE="CORNERSTONE_TOOLS_ANNOTATION_SELECTION_CHANGE",t.ANNOTATION_LOCK_CHANGE="CORNERSTONE_TOOLS_ANNOTATION_LOCK_CHANGE",t.ANNOTATION_VISIBILITY_CHANGE="CORNERSTONE_TOOLS_ANNOTATION_VISIBILITY_CHANGE",t.ANNOTATION_RENDERED="CORNERSTONE_TOOLS_ANNOTATION_RENDERED",t.ANNOTATION_INTERPOLATION_PROCESS_COMPLETED="CORNERSTONE_TOOLS_ANNOTATION_INTERPOLATION_PROCESS_COMPLETED",t.INTERPOLATED_ANNOTATIONS_REMOVED="CORNERSTONE_TOOLS_INTERPOLATED_ANNOTATIONS_REMOVED",t.SEGMENTATION_MODIFIED="CORNERSTONE_TOOLS_SEGMENTATION_MODIFIED",t.SEGMENTATION_RENDERED="CORNERSTONE_TOOLS_SEGMENTATION_RENDERED",t.SEGMENTATION_REPRESENTATION_ADDED="CORNERSTONE_TOOLS_SEGMENTATION_REPRESENTATION_ADDED",t.SEGMENTATION_ADDED="CORNERSTONE_TOOLS_SEGMENTATION_ADDED",t.SEGMENTATION_REPRESENTATION_MODIFIED="CORNERSTONE_TOOLS_SEGMENTATION_REPRESENTATION_MODIFIED",t.SEGMENTATION_REMOVED="CORNERSTONE_TOOLS_SEGMENTATION_REMOVED",t.SEGMENTATION_REPRESENTATION_REMOVED="CORNERSTONE_TOOLS_SEGMENTATION_REPRESENTATION_REMOVED",t.SEGMENTATION_DATA_MODIFIED="CORNERSTONE_TOOLS_SEGMENTATION_DATA_MODIFIED",t.KEY_DOWN="CORNERSTONE_TOOLS_KEY_DOWN",t.KEY_UP="CORNERSTONE_TOOLS_KEY_UP",t.MOUSE_DOWN="CORNERSTONE_TOOLS_MOUSE_DOWN",t.MOUSE_UP="CORNERSTONE_TOOLS_MOUSE_UP",t.MOUSE_DOWN_ACTIVATE="CORNERSTONE_TOOLS_MOUSE_DOWN_ACTIVATE",t.MOUSE_DRAG="CORNERSTONE_TOOLS_MOUSE_DRAG",t.MOUSE_MOVE="CORNERSTONE_TOOLS_MOUSE_MOVE",t.MOUSE_CLICK="CORNERSTONE_TOOLS_MOUSE_CLICK",t.MOUSE_DOUBLE_CLICK="CORNERSTONE_TOOLS_MOUSE_DOUBLE_CLICK",t.MOUSE_WHEEL="CORNERSTONE_TOOLS_MOUSE_WHEEL",t.TOUCH_START="CORNERSTONE_TOOLS_TOUCH_START",t.TOUCH_START_ACTIVATE="CORNERSTONE_TOOLS_TOUCH_START_ACTIVATE",t.TOUCH_PRESS="CORNERSTONE_TOOLS_TOUCH_PRESS",t.TOUCH_DRAG="CORNERSTONE_TOOLS_TOUCH_DRAG",t.TOUCH_END="CORNERSTONE_TOOLS_TOUCH_END",t.TOUCH_TAP="CORNERSTONE_TOOLS_TAP",t.TOUCH_SWIPE="CORNERSTONE_TOOLS_SWIPE"})(B||(B={}));var Ft;(function(t){t.Labelmap="Labelmap",t.Contour="Contour",t.Surface="Surface"})(Ft||(Ft={}));var e1;(function(t){t.UP="UP",t.DOWN="DOWN",t.LEFT="LEFT",t.RIGHT="RIGHT"})(e1||(e1={}));var Xt;(function(t){t.OnInteractionStart="onInteractionStart",t.OnInteractionEnd="onInteractionEnd",t.Preview="preview",t.RejectPreview="rejectPreview",t.AcceptPreview="acceptPreview",t.Fill="fill",t.StrategyFunction="strategyFunction",t.CreateIsInThreshold="createIsInThreshold",t.Initialize="initialize",t.INTERNAL_setValue="setValue",t.AddPreview="addPreview",t.ComputeInnerCircleRadius="computeInnerCircleRadius",t.GetStatistics="getStatistics"})(Xt||(Xt={}));var ia;(function(t){t.Interaction="Interaction",t.HandlesUpdated="HandlesUpdated",t.StatsUpdated="StatsUpdated",t.InitialSetup="InitialSetup",t.Completed="Completed",t.InterpolationUpdated="InterpolationUpdated",t.History="History"})(ia||(ia={}));var ay;(function(t){t.POLYSEG_CONTOUR_TO_LABELMAP="Converting Contour to Labelmap",t.POLYSEG_SURFACE_TO_LABELMAP="Converting Surfaces to Labelmap",t.POLYSEG_CONTOUR_TO_SURFACE="Converting Contour to Surface",t.POLYSEG_LABELMAP_TO_SURFACE="Converting Labelmap to Surface",t.SURFACE_CLIPPING="Clipping Surfaces"})(ay||(ay={}));const Wv=ay,XV=Object.freeze(Object.defineProperty({__proto__:null,AnnotationStyleStates:bc,ChangeTypes:ia,Events:B,get KeyboardBindings(){return mi},get MouseBindings(){return ec},SegmentationRepresentations:Ft,StrategyCallbacks:Xt,get Swipe(){return e1},ToolModes:vr,WorkerTypes:Wv},Symbol.toStringTag,{value:"Module"}));let C_={};function qde(){C_={}}const F9={isInteractingWithTool:!1,isMultiPartToolActive:!1,tools:{},toolGroups:[],synchronizers:[],svgNodeCache:C_,enabledElements:[],handleRadius:6};let st={isInteractingWithTool:!1,isMultiPartToolActive:!1,tools:{},toolGroups:[],synchronizers:[],svgNodeCache:C_,enabledElements:[],handleRadius:6};function jde(){qde(),st={...structuredClone({...F9,svgNodeCache:{}}),svgNodeCache:{...F9.svgNodeCache}}}var xE,V9;function Qde(){if(V9)return xE;V9=1;var t="Expected a function",e="__lodash_hash_undefined__",n=1/0,r="[object Function]",a="[object GeneratorFunction]",i="[object Symbol]",o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/,c=/^\./,l=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,u=/[\\^$.*+?()[\]{}|]/g,f=/\\(\\)?/g,v=/^\[object .+?Constructor\]$/,g=typeof xc=="object"&&xc&&xc.Object===Object&&xc,d=typeof self=="object"&&self&&self.Object===Object&&self,m=g||d||Function("return this")();function h(Oe,$e){return Oe==null?void 0:Oe[$e]}function C(Oe){var $e=!1;if(Oe!=null&&typeof Oe.toString!="function")try{$e=!!(Oe+"")}catch{}return $e}var p=Array.prototype,S=Function.prototype,I=Object.prototype,D=m["__core-js_shared__"],E=function(){var Oe=/[^.]+$/.exec(D&&D.keys&&D.keys.IE_PROTO||"");return Oe?"Symbol(src)_1."+Oe:""}(),T=S.toString,y=I.hasOwnProperty,M=I.toString,_=RegExp("^"+T.call(y).replace(u,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),O=m.Symbol,w=p.splice,x=Z(m,"Map"),P=Z(Object,"create"),R=O?O.prototype:void 0,L=R?R.toString:void 0;function H(Oe){var $e=-1,ht=Oe?Oe.length:0;for(this.clear();++$e<ht;){var Ut=Oe[$e];this.set(Ut[0],Ut[1])}}function F(){this.__data__=P?P(null):{}}function U(Oe){return this.has(Oe)&&delete this.__data__[Oe]}function V(Oe){var $e=this.__data__;if(P){var ht=$e[Oe];return ht===e?void 0:ht}return y.call($e,Oe)?$e[Oe]:void 0}function X(Oe){var $e=this.__data__;return P?$e[Oe]!==void 0:y.call($e,Oe)}function re(Oe,$e){var ht=this.__data__;return ht[Oe]=P&&$e===void 0?e:$e,this}H.prototype.clear=F,H.prototype.delete=U,H.prototype.get=V,H.prototype.has=X,H.prototype.set=re;function ue(Oe){var $e=-1,ht=Oe?Oe.length:0;for(this.clear();++$e<ht;){var Ut=Oe[$e];this.set(Ut[0],Ut[1])}}function De(){this.__data__=[]}function pe(Oe){var $e=this.__data__,ht=j($e,Oe);if(ht<0)return!1;var Ut=$e.length-1;return ht==Ut?$e.pop():w.call($e,ht,1),!0}function Te(Oe){var $e=this.__data__,ht=j($e,Oe);return ht<0?void 0:$e[ht][1]}function Fe(Oe){return j(this.__data__,Oe)>-1}function Ne(Oe,$e){var ht=this.__data__,Ut=j(ht,Oe);return Ut<0?ht.push([Oe,$e]):ht[Ut][1]=$e,this}ue.prototype.clear=De,ue.prototype.delete=pe,ue.prototype.get=Te,ue.prototype.has=Fe,ue.prototype.set=Ne;function Re(Oe){var $e=-1,ht=Oe?Oe.length:0;for(this.clear();++$e<ht;){var Ut=Oe[$e];this.set(Ut[0],Ut[1])}}function k(){this.__data__={hash:new H,map:new(x||ue),string:new H}}function A(Oe){return be(this,Oe).delete(Oe)}function b(Oe){return be(this,Oe).get(Oe)}function N(Oe){return be(this,Oe).has(Oe)}function W(Oe,$e){return be(this,Oe).set(Oe,$e),this}Re.prototype.clear=k,Re.prototype.delete=A,Re.prototype.get=b,Re.prototype.has=N,Re.prototype.set=W;function j(Oe,$e){for(var ht=Oe.length;ht--;)if(Le(Oe[ht][0],$e))return ht;return-1}function K(Oe,$e){$e=ie($e,Oe)?[$e]:we($e);for(var ht=0,Ut=$e.length;Oe!=null&&ht<Ut;)Oe=Oe[fe($e[ht++])];return ht&&ht==Ut?Oe:void 0}function ge(Oe){if(!Be(Oe)||se(Oe))return!1;var $e=Me(Oe)||C(Oe)?_:v;return $e.test(q(Oe))}function ye(Oe){if(typeof Oe=="string")return Oe;if(Ze(Oe))return L?L.call(Oe):"";var $e=Oe+"";return $e=="0"&&1/Oe==-n?"-0":$e}function we(Oe){return Ue(Oe)?Oe:me(Oe)}function be(Oe,$e){var ht=Oe.__data__;return he($e)?ht[typeof $e=="string"?"string":"hash"]:ht.map}function Z(Oe,$e){var ht=h(Oe,$e);return ge(ht)?ht:void 0}function ie(Oe,$e){if(Ue(Oe))return!1;var ht=typeof Oe;return ht=="number"||ht=="symbol"||ht=="boolean"||Oe==null||Ze(Oe)?!0:s.test(Oe)||!o.test(Oe)||$e!=null&&Oe in Object($e)}function he(Oe){var $e=typeof Oe;return $e=="string"||$e=="number"||$e=="symbol"||$e=="boolean"?Oe!=="__proto__":Oe===null}function se(Oe){return!!E&&E in Oe}var me=Pe(function(Oe){Oe=at(Oe);var $e=[];return c.test(Oe)&&$e.push(""),Oe.replace(l,function(ht,Ut,Qt,Rt){$e.push(Qt?Rt.replace(f,"$1"):Ut||ht)}),$e});function fe(Oe){if(typeof Oe=="string"||Ze(Oe))return Oe;var $e=Oe+"";return $e=="0"&&1/Oe==-n?"-0":$e}function q(Oe){if(Oe!=null){try{return T.call(Oe)}catch{}try{return Oe+""}catch{}}return""}function Pe(Oe,$e){if(typeof Oe!="function"||$e&&typeof $e!="function")throw new TypeError(t);var ht=function(){var Ut=arguments,Qt=$e?$e.apply(this,Ut):Ut[0],Rt=ht.cache;if(Rt.has(Qt))return Rt.get(Qt);var Dn=Oe.apply(this,Ut);return ht.cache=Rt.set(Qt,Dn),Dn};return ht.cache=new(Pe.Cache||Re),ht}Pe.Cache=Re;function Le(Oe,$e){return Oe===$e||Oe!==Oe&&$e!==$e}var Ue=Array.isArray;function Me(Oe){var $e=Be(Oe)?M.call(Oe):"";return $e==r||$e==a}function Be(Oe){var $e=typeof Oe;return!!Oe&&($e=="object"||$e=="function")}function nt(Oe){return!!Oe&&typeof Oe=="object"}function Ze(Oe){return typeof Oe=="symbol"||nt(Oe)&&M.call(Oe)==i}function at(Oe){return Oe==null?"":ye(Oe)}function Ot(Oe,$e,ht){var Ut=Oe==null?void 0:K(Oe,$e);return Ut===void 0?ht:Ut}return xE=Ot,xE}var Kde=Qde();const Xde=Yc(Kde),k9=Symbol("DefinedCursors"),YV=new Set(["alias","all-scroll","auto","cell","col-resize","context-menu","copy","crosshair","default","e-resize","ew-resize","grab","grabbing","help","move","ne-resize","nesw-resize","no-drop","none","not-allowed","n-resize","ns-resize","nw-resize","nwse-resize","pointer","progress","row-resize","se-resize","s-resize","sw-resize","text","vertical-text","wait","w-resize","zoom-in","zoom-out"]);class Zi{constructor(e,n){this.name=e+"",this.fallback=n}getName(){return this.name+""}addFallbackStyleProperty(e){const{fallback:n}=this;return n instanceof Zi?`${e}, ${n.getStyleProperty()}`:e+""}getStyleProperty(){return this.addFallbackStyleProperty(this.name)+""}static getDefinedCursor(e){const n=G9(Zi,k9);let r=n.get(e);if(r instanceof Zi)return r;if(YV.has(e))return r=new Zi(e),n.set(e,r),r}static setDefinedCursor(e,n){return n instanceof Zi?(G9(Zi,k9).set(e,n),!0):!1}}function G9(t,e){let n=t[e];return n instanceof Map||(n=new Map,Object.defineProperty(t,e,{value:n})),n}const Yde=YV.values(),Zde="image-cursor";class fm extends Zi{constructor(e,n,r,a,i){super(a||fm.getUniqueInstanceName(Zde),i),this.url=e,this.x=Number(n)||0,this.y=Number(r)||0}getStyleProperty(){const{url:e,x:n,y:r}=this;let a=`url('${e}')`;return n>=0&&r>=0&&(n>0||r>0)&&(a+=` ${n} ${r}`),this.addFallbackStyleProperty(a)}static getUniqueInstanceName(e){return`${e}-${DF(fm)}`}}const ar={iconContent:"",iconSize:16,viewBox:{x:16,y:16},mousePoint:{x:8,y:8},mousePointerGroupString:`
    <path stroke="{{color}}" d="M8 16L8 0"></path>
    <path stroke="{{color}}" d="M16 8L0 8"></path>
  `},bo={x:127,y:60},cf=`
<rect fill="{{color}}" x="80.19" y="25.03" width="47.14" height="15.85"/>
`,hl=`
<rect fill="{{color}}" x="80.19" y="25.03" width="47.14" height="15.85"/>
<rect fill="{{color}}" x="95.84" y="9.38" width="15.85" height="47.14"/>
`,Fp='<path fill="{{color}}" d="M82.89,10a12.09,12.09,0,0,0-16.8-2.5l-27.5,20.4-8.5-6.3a2.93,2.93,0,0,1-1.1-3,14.66,14.66,0,0,0,.1-6.6,14.08,14.08,0,1,0-6.5,15.2,2.87,2.87,0,0,1,3.2.2l8.2,6.1-8.2,6.1a2.87,2.87,0,0,1-3.2.2,14.16,14.16,0,1,0,6.7,14.4,14,14,0,0,0-.3-5.8,2.93,2.93,0,0,1,1.1-3l8.5-6.3,27.5,20.4A11.91,11.91,0,0,0,82.89,57l-31.7-23.5ZM15.29,21a5.9,5.9,0,1,1,5.9-5.9A5.91,5.91,0,0,1,15.29,21Zm0,36.8a5.9,5.9,0,1,1,5.9-5.9A5.91,5.91,0,0,1,15.29,57.77Zm28.3-21.5a2.8,2.8,0,1,1,2.8-2.8A2.8,2.8,0,0,1,43.59,36.27Z" transform="translate(-1.17 -0.96)"/>',lf='<path fill="{{color}}" d="M8.86,2.25V66.08H72.69V2.25H8.86ZM65.28,58.67h-49v-49h49v49Z" transform="translate(-8.86 -2.25)"/>',Vp='<path fill="{{color}}" d="M40.77,2.25A31.92,31.92,0,1,0,72.69,34.16,31.92,31.92,0,0,0,40.77,2.25Zm0,57.63A25.71,25.71,0,1,1,66.48,34.16,25.71,25.71,0,0,1,40.77,59.87Z" transform="translate(-8.86 -2.25)"/>',bI={Angle:ir(ar,{name:"Angle",iconContent:`<path fill="{{color}}" d="M1203 544q0 13-10 23l-393 393 393 393q10 10 10 23t-10 23l-50
    50q-10 10-23 10t-23-10l-466-466q-10-10-10-23t10-23l466-466q10-10 23-10t23
    10l50 50q10 10 10 23z" />`,viewBox:{x:1792,y:1792}}),ArrowAnnotate:ir(ar,{name:"ArrowAnnotate",iconContent:`<g id="arrowAnnotate-group" fill="none" stroke-width="1" stroke="{{color}}" stroke-linecap="round" stroke-linejoin="round">
    <path id="arrowAnnotate-arrow" d="M23,7 l-15,15 M7,17 l0,6 6,0" stroke-width="2" />
  </g>`,viewBox:{x:24,y:24}}),Bidirectional:ir(ar,{name:"Bidirectional",iconContent:`<g fill="{{color}}" stroke-width="3" stroke="{{color}}">
    <path d="M27.63 3.21L3.12 28.81"></path>
    <path d="M27.63 15.75L15.27 4.43"></path>
    <path d="M16.5 4.28C16.5 4.96 15.95 5.51 15.27 5.51C14.59 5.51 14.03 4.96 14.03 4.28C14.03 3.59 14.59 3.04 15.27 3.04C15.95 3.04 16.5 3.59 16.5 4.28Z" ></path>
    <path d="M28.87 3.19C28.87 3.87 28.31 4.43 27.63 4.43C26.95 4.43 26.4 3.87 26.4 3.19C26.4 2.51 26.95 1.95 27.63 1.95C28.31 1.95 28.87 2.51 28.87 3.19Z"></path>
    <path d="M28.87 15.75C28.87 16.43 28.31 16.99 27.63 16.99C26.95 16.99 26.4 16.43 26.4 15.75C26.4 15.07 26.95 14.51 27.63 14.51C28.31 14.51 28.87 15.07 28.87 15.75Z"></path>
    <path d="M4.73 28.44C4.73 29.12 4.17 29.68 3.49 29.68C2.81 29.68 2.25 29.12 2.25 28.44C2.25 27.76 2.81 27.2 3.49 27.2C4.17 27.2 4.73 27.76 4.73 28.44Z"></path>
  </g>`,viewBox:{x:48,y:48}}),CobbAngle:ir(ar,{name:"CobbAngle",iconContent:`<g stroke="{{color}}" stroke-width="3">
    <path d="M28.59 2.34L3.82 12.32"></path>
    <path d="M28.59 29.66L3.82 19.68"></path>
    <path stroke-dasharray="2" fill-opacity="0" d="M12.37
      23.06C12.67 22.36 12.85 21.93 12.92 21.76C14.6 17.8 14.68 13.35 13.15
      9.33C13.11 9.24 13.02 9 12.88 8.63">
    </path>
  </g>`,viewBox:{x:32,y:32}}),CircleROI:ir(ar,{name:"CircleROI",iconContent:'<circle stroke="{{color}}" fill="none" stroke-width="3" cx="16" cy="16" r="14" />',viewBox:{x:32,y:32}}),EllipticalROI:ir(ar,{name:"EllipticalROI",iconContent:`<path stroke="{{color}}" fill="none" stroke-width="3" d="M30.74 15.76C30.74 20.99 24.14 25.23 16
    25.23C7.86 25.23 1.26 20.99 1.26 15.76C1.26 10.54 7.86 6.3 16 6.3C24.14
    6.3 30.74 10.54 30.74 15.76Z" />`,viewBox:{x:32,y:32}}),FreehandROI:ir(ar,{name:"FreehandROI",iconContent:`<g fill="{{color}}" stroke="{{color}}" stroke-width="2">
    <ellipse ry="1" rx="1" id="svg_3" cy="4.240343" cx="14.306499"/>
    <line id="svg_4" y2="3.58462" x2="12.242186" y1="3.997482" x1="13.432202"/>
    <line id="svg_5" y2="3.268901" x2="10.857882" y1="3.608906" x1="12.387902"/>
    <line id="svg_6" y2="3.147471" x2="9.740724" y1="3.293187" x1="10.955026"/>
    <line id="svg_7" y2="3.147471" x2="8.089274" y1="3.196043" x1="9.983585"/>
    <line id="svg_8" y2="3.268901" x2="6.874972" y1="3.123185" x1="8.307848"/>
    <line id="svg_9" y2="3.657478" x2="5.587812" y1="3.220329" x1="7.020688"/>
    <line id="svg_10" y2="4.046054" x2="4.737801" y1="3.560334" x1="5.854959"/>
    <line id="svg_11" y2="4.337487" x2="4.300652" y1="3.997482" x1="4.834945"/>
    <line id="svg_12" y2="4.726063" x2="3.88779" y1="4.191771" x1="4.470655"/>
    <line id="svg_15" y2="5.3575" x2="3.377783" y1="4.604633" x1="3.960648"/>
    <line id="svg_16" y2="6.183226" x2="2.916348" y1="5.138926" x1="3.547785"/>
    <line id="svg_17" y2="6.960379" x2="2.770632" y1="5.867507" x1="3.037779"/>
    <line id="svg_18" y2="7.713246" x2="2.673488" y1="6.741804" x1="2.819204"/>
    <line id="svg_19" y2="8.684687" x2="2.697774" y1="7.616102" x1="2.673488"/>
    <line id="svg_20" y2="9.753273" x2="2.892062" y1="8.611829" x1="2.697774"/>
    <line id="svg_21" y2="10.724714" x2="3.134923" y1="9.534698" x1="2.84349"/>
    <line id="svg_23" y2="11.647583" x2="3.596357" y1="10.578998" x1="3.086351"/>
    <line id="svg_25" y2="12.521881" x2="4.276366" y1="11.501867" x1="3.499213"/>
    <line id="svg_26" y2="13.930471" x2="5.830673" y1="12.376165" x1="4.13065"/>
    <line id="svg_28" y2="14.707624" x2="7.263549" y1="13.881899" x1="5.733528"/>
    <line id="svg_29" y2="15.339061" x2="8.963571" y1="14.61048" x1="7.06926"/>
    <line id="svg_30" y2="15.581921" x2="10.882168" y1="15.314775" x1="8.817855"/>
    <line id="svg_31" y2="15.460491" x2="12.023612" y1="15.581921" x1="10.785024"/>
    <line id="svg_33" y2="15.120487" x2="13.092197" y1="15.484777" x1="11.877895"/>
    <line id="svg_34" y2="14.586194" x2="13.86935" y1="15.217631" x1="12.897909"/>
    <line id="svg_35" y2="13.833327" x2="14.597931" y1="14.756196" x1="13.699348"/>
    <line id="svg_37" y2="12.716169" x2="15.180796" y1="13.881899" x1="14.549359"/>
    <line id="svg_39" y2="11.429009" x2="15.520801" y1="12.813313" x1="15.15651"/>
    <ellipse ry="1" rx="1" id="svg_40" cy="10.967574" cx="15.520801"/>
  </g>`,viewBox:{x:18,y:18}}),FreehandROISculptor:ir(ar,{name:"FreehandROISculptor",iconContent:`<g id="icon-freehand-sculpt" fill="none" stroke-width="1.5" stroke="{{color}}" stroke-linecap="round" stroke-linejoin="round">
    <line id="svg_1" y2="2.559367" x2="10.184807" y1="4.467781" x1="8.81711"/>
    <line id="svg_4" y2="1.493836" x2="11.727442" y1="2.766112" x1="10.089386"/>
    <line id="svg_7" y2="1.080346" x2="13.047428" y1="1.748291" x1="11.345759"/>
    <line id="svg_8" y2="1.000829" x2="14.351511" y1="1.112153" x1="12.77707"/>
    <line id="svg_9" y2="1.350705" x2="15.242104" y1="0.905408" x1="13.969828"/>
    <line id="svg_10" y2="2.098167" x2="15.862339" y1="1.14396" x1="14.955842"/>
    <line id="svg_11" y2="3.195505" x2="16.41896" y1="1.939133" x1="15.766918"/>
    <line id="svg_12" y2="4.292843" x2="16.530284" y1="2.925147" x1="16.387153"/>
    <line id="svg_16" y2="5.644637" x2="16.196311" y1="3.831643" x1="16.593898"/>
    <line id="svg_18" y2="7.266789" x2="15.623787" y1="5.19934" x1="16.275829"/>
    <line id="svg_19" y2="10.813258" x2="14.526449" y1="6.726071" x1="15.766918"/>
    <line id="svg_20" y2="5.056209" x2="8.085552" y1="4.181519" x1="8.976145"/>
    <line id="svg_23" y2="5.326568" x2="7.481221" y1="4.78585" x1="8.403621"/>
    <line id="svg_24" y2="5.565119" x2="6.749662" y1="5.294761" x1="7.624352"/>
    <line id="svg_25" y2="5.994512" x2="5.429675" y1="5.533312" x1="6.956407"/>
    <line id="svg_27" y2="6.551133" x2="4.284627" y1="5.962706" x1="5.572807"/>
    <line id="svg_28" y2="7.584858" x2="3.044158" y1="6.392099" x1="4.427758"/>
    <line id="svg_29" y2="8.84123" x2="2.185372" y1="7.489437" x1="3.219096"/>
    <line id="svg_31" y2="10.606513" x2="1.644654" y1="8.602678" x1="2.280792"/>
    <line id="svg_32" y2="13.214679" x2="1.48562" y1="10.352058" x1="1.724171"/>
    <line id="svg_33" y2="14.375631" x2="1.676461" y1="12.992031" x1="1.453813"/>
    <line id="svg_34" y2="15.298031" x2="2.264889" y1="14.152983" x1="1.517427"/>
    <line id="svg_35" y2="16.172721" x2="3.521261" y1="14.948155" x1="1.915013"/>
    <line id="svg_36" y2="16.824762" x2="5.207027" y1="15.997783" x1="3.28271"/>
    <line id="svg_38" y2="17.063314" x2="7.035924" y1="16.745245" x1="4.968475"/>
    <line id="svg_39" y2="16.888376" x2="9.278311" y1="17.047411" x1="6.733758"/>
    <line id="svg_40" y2="16.284045" x2="10.661911" y1="16.983797" x1="8.992048"/>
    <line id="svg_41" y2="15.313934" x2="11.647925" y1="16.395369" x1="10.455166"/>
    <line id="svg_44" y2="13.898527" x2="12.82478" y1="15.425259" x1="11.504794"/>
    <line id="svg_45" y2="12.037824" x2="14.144766" y1="14.312017" x1="12.522614"/>
    <line id="svg_47" y2="10.59061" x2="14.605966" y1="12.228665" x1="13.953925"/>
    <ellipse ry="1" rx="1" id="svg_48" cy="3.982726" cx="13.460918"/>
  </g>`,viewBox:{x:18,y:18}}),Length:ir(ar,{name:"Length",iconContent:`<g id="length-group" fill="none" stroke-width="1" stroke="{{color}}" stroke-linecap="round" stroke-linejoin="round">
    <path id="length-dashes" d="m22.5,6 -16.5,16.5" stroke-width="3" stroke-dasharray="0.6666,5" />
  </g>`,viewBox:{x:24,y:24}}),Height:ir(ar,{name:"Height",iconContent:'<path d="m 6 22 l 8.5 0 v -16 h 8" stroke-width="3" fill="none" stroke="{{color}}" />',viewBox:{x:24,y:24}}),Probe:ir(ar,{name:"Probe",iconContent:`<path fill="{{color}}" d="M1152 896q0 106-75 181t-181 75-181-75-75-181 75-181 181-75 181 75
    75 181zm-256-544q-148 0-273 73t-198 198-73 273 73 273 198 198 273 73 273-73
    198-198 73-273-73-273-198-198-273-73zm768 544q0 209-103 385.5t-279.5
    279.5-385.5 103-385.5-103-279.5-279.5-103-385.5 103-385.5 279.5-279.5
    385.5-103 385.5 103 279.5 279.5 103 385.5z" />`,viewBox:{x:1792,y:1792}}),RectangleROI:ir(ar,{name:"RectangleROI",iconContent:`<path fill="{{color}}" d="M1312 256h-832q-66 0-113 47t-47 113v832q0 66 47
    113t113 47h832q66 0 113-47t47-113v-832q0-66-47-113t-113-47zm288 160v832q0
    119-84.5 203.5t-203.5 84.5h-832q-119 0-203.5-84.5t-84.5-203.5v-832q0-119
    84.5-203.5t203.5-84.5h832q119 0 203.5 84.5t84.5 203.5z" />`,viewBox:{x:1792,y:1792}}),TextMarker:ir(ar,{name:"TextMarker",iconContent:`<path fill="{{color}}" d="M789 559l-170 450q33 0 136.5 2t160.5 2q19 0
    57-2-87-253-184-452zm-725 1105l2-79q23-7 56-12.5t57-10.5 49.5-14.5 44.5-29
    31-50.5l237-616 280-724h128q8 14 11 21l205 480q33 78 106 257.5t114 274.5q15
    34 58 144.5t72 168.5q20 45 35 57 19 15 88 29.5t84 20.5q6 38 6 57 0 5-.5
    13.5t-.5 12.5q-63 0-190-8t-191-8q-76 0-215 7t-178 8q0-43 4-78l131-28q1 0
    12.5-2.5t15.5-3.5 14.5-4.5 15-6.5 11-8 9-11
    2.5-14q0-16-31-96.5t-72-177.5-42-100l-450-2q-26 58-76.5 195.5t-50.5 162.5q0
    22 14 37.5t43.5 24.5 48.5 13.5 57 8.5 41 4q1 19 1 58 0 9-2 27-58
    0-174.5-10t-174.5-10q-8 0-26.5 4t-21.5 4q-80 14-188 14z" />`,viewBox:{x:1792,y:1792}}),Crosshairs:ir(ar,{name:"Crosshairs",iconContent:`<path fill="{{color}}" d="M1325 1024h-109q-26 0-45-19t-19-45v-128q0-26
    19-45t45-19h109q-32-108-112.5-188.5t-188.5-112.5v109q0 26-19 45t-45
    19h-128q-26 0-45-19t-19-45v-109q-108 32-188.5 112.5t-112.5 188.5h109q26
    0 45 19t19 45v128q0 26-19 45t-45 19h-109q32 108 112.5 188.5t188.5
    112.5v-109q0-26 19-45t45-19h128q26 0 45 19t19 45v109q108-32
    188.5-112.5t112.5-188.5zm339-192v128q0 26-19 45t-45 19h-143q-37 161-154.5
    278.5t-278.5 154.5v143q0 26-19 45t-45 19h-128q-26
    0-45-19t-19-45v-143q-161-37-278.5-154.5t-154.5-278.5h-143q-26
    0-45-19t-19-45v-128q0-26 19-45t45-19h143q37-161
    154.5-278.5t278.5-154.5v-143q0-26 19-45t45-19h128q26 0 45 19t19 45v143q161
    37 278.5 154.5t154.5 278.5h143q26 0 45 19t19 45z" />`,viewBox:{x:1792,y:1792}}),Eraser:ir(ar,{name:"Eraser",iconContent:`<path transform="translate(0,1792) scale(1,-1)" fill="{{color}}" d="M960 1408l336-384h-768l-336 384h768zm1013-1077q15
    34 9.5 71.5t-30.5 65.5l-896 1024q-38 44-96 44h-768q-38
    0-69.5-20.5t-47.5-54.5q-15-34-9.5-71.5t30.5-65.5l896-1024q38-44 96-44h768q38
    0 69.5 20.5t47.5 54.5z" />`,viewBox:{x:2048,y:1792}}),Magnify:ir(ar,{name:"Magnify",iconContent:`<path fill="{{color}}" d="M508.5 481.6l-129-129c-2.3-2.3-5.3-3.5-8.5-3.5h-10.3C395
    312 416 262.5 416 208 416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c54.5
    0 104-21 141.1-55.2V371c0 3.2 1.3 6.2 3.5 8.5l129 129c4.7 4.7 12.3 4.7 17
    0l9.9-9.9c4.7-4.7 4.7-12.3 0-17zM208 384c-97.3 0-176-78.7-176-176S110.7 32 208
    32s176 78.7 176 176-78.7 176-176 176z" />`,viewBox:{x:512,y:512}}),Pan:ir(ar,{name:"Pan",iconContent:`<path fill="{{color}}" d="M1411 541l-355 355 355 355 144-144q29-31 70-14 39 17
    39 59v448q0 26-19 45t-45 19h-448q-42 0-59-40-17-39 14-69l144-144-355-355-355
    355 144 144q31 30 14 69-17 40-59 40h-448q-26 0-45-19t-19-45v-448q0-42 40-59
    39-17 69 14l144 144 355-355-355-355-144 144q-19 19-45 19-12
    0-24-5-40-17-40-59v-448q0-26 19-45t45-19h448q42 0 59 40 17 39-14 69l-144
    144 355 355 355-355-144-144q-31-30-14-69 17-40 59-40h448q26 0 45 19t19
    45v448q0 42-39 59-13 5-25 5-26 0-45-19z" />`,viewBox:{x:1792,y:1792}}),Rotate:ir(ar,{name:"Rotate",iconContent:`<path fill="{{color}}" d="M1664 256v448q0 26-19 45t-45 19h-448q-42 0-59-40-17-39
    14-69l138-138q-148-137-349-137-104 0-198.5 40.5t-163.5 109.5-109.5
    163.5-40.5 198.5 40.5 198.5 109.5 163.5 163.5 109.5 198.5 40.5q119 0
    225-52t179-147q7-10 23-12 15 0 25 9l137 138q9 8 9.5 20.5t-7.5 22.5q-109
    132-264 204.5t-327 72.5q-156 0-298-61t-245-164-164-245-61-298 61-298
    164-245 245-164 298-61q147 0 284.5 55.5t244.5 156.5l130-129q29-31 70-14
    39 17 39 59z" />`,viewBox:{x:1792,y:1792}}),StackScroll:ir(ar,{name:"StackScroll",iconContent:`<path fill="{{color}}" d="M24 21v2c0 0.547-0.453 1-1 1h-22c-0.547
    0-1-0.453-1-1v-2c0-0.547 0.453-1 1-1h22c0.547 0 1 0.453 1 1zM24 13v2c0
    0.547-0.453 1-1 1h-22c-0.547 0-1-0.453-1-1v-2c0-0.547 0.453-1 1-1h22c0.547
    0 1 0.453 1 1zM24 5v2c0 0.547-0.453 1-1 1h-22c-0.547
    0-1-0.453-1-1v-2c0-0.547 0.453-1 1-1h22c0.547 0 1 0.453 1 1z" />`,viewBox:{x:24,y:28}}),WindowLevelRegion:ir(ar,{name:"WindowLevelRegion",iconContent:`<path fill="{{color}}" d="M1664 416v960q0 119-84.5 203.5t-203.5 84.5h-960q-119
    0-203.5-84.5t-84.5-203.5v-960q0-119 84.5-203.5t203.5-84.5h960q119 0 203.5
    84.5t84.5 203.5z" />`,viewBox:{x:1792,y:1792}}),WindowLevel:ir(ar,{name:"WindowLevel",iconContent:`
    <path fill="{{color}}" d="M14.5,3.5 a1 1 0 0 1 -11,11 Z" stroke="none" opacity="0.8" />
    <circle cx="9" cy="9" r="8" fill="none" stroke-width="2" stroke="{{color}}" />`,viewBox:{x:18,y:18}}),Zoom:ir(ar,{name:"Zoom",iconContent:`
  <path fill="{{color}}" d="M508.5 481.6l-129-129c-2.3-2.3-5.3-3.5-8.5-3.5h-10.3C395
    312 416 262.5 416 208 416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c54.5
    0 104-21 141.1-55.2V371c0 3.2 1.3 6.2 3.5 8.5l129 129c4.7 4.7 12.3 4.7 17
    0l9.9-9.9c4.7-4.7 4.7-12.3 0-17zM208 384c-97.3 0-176-78.7-176-176S110.7 32 208
    32s176 78.7 176 176-78.7 176-176 176z" />
  <path fill="{{color}}" transform="scale(0.22,0.22) translate(1400,0)" d="M1216
    320q0 26-19 45t-45 19h-128v1024h128q26 0 45 19t19 45-19 45l-256 256q-19
    19-45 19t-45-19l-256-256q-19-19-19-45t19-45 45-19h128v-1024h-128q-26
    0-45-19t-19-45 19-45l256-256q19-19 45-19t45 19l256 256q19 19 19 45z" />`,viewBox:{x:640,y:512}}),SegmentationFreeHandEraseInside:ir(ar,{name:"SegmentationFreeHandEraseInside",iconContent:`${Fp} ${cf}`,viewBox:bo}),SegmentationFreeHandFillInside:ir(ar,{name:"SegmentationFreeHandFillInside",iconContent:`${Fp} ${hl}`,viewBox:bo}),SegmentationFreeHandEraseOutside:ir(ar,{name:"SegmentationFreeHandEraseOutside",iconContent:`${Fp} ${cf}`,viewBox:bo}),SegmentationFreeHandFillOutside:ir(ar,{name:"SegmentationFreeHandFillOutside",iconContent:`${Fp} ${hl}`,viewBox:bo}),SegmentationRectangleEraseInside:ir(ar,{name:"SegmentationRectangleEraseInside",iconContent:`${lf} ${cf}`,viewBox:bo}),RectangleScissor:ir(ar,{name:"RectangleScissor",iconContent:`${lf} ${hl}`,viewBox:bo}),"RectangleScissor.FILL_INSIDE":ir(ar,{name:"RectangleScissor.FILL_INSIDE",iconContent:`${lf} ${hl}`,viewBox:bo}),"RectangleScissor.FILL_OUTSIDE":ir(ar,{name:"RectangleScissor.FILL_OUTSIDE",iconContent:`${lf} ${hl}`,viewBox:bo}),"RectangleScissor.ERASE_OUTSIDE":ir(ar,{name:"RectangleScissor.ERASE_OUTSIDE",iconContent:`${lf} ${cf}`,viewBox:bo}),"RectangleScissor.ERASE_INSIDE":ir(ar,{name:"RectangleScissor.ERASE_INSIDE",iconContent:`${lf} ${cf}`,viewBox:bo}),CircleScissor:ir(ar,{name:"CircleScissor",iconContent:`${Vp} ${hl}`,viewBox:bo}),"CircleScissor.FILL_INSIDE":ir(ar,{name:"CircleScissor.FILL_INSIDE",iconContent:`${Vp} ${hl}`,viewBox:bo}),"CircleScissor.ERASE_OUTSIDE":ir(ar,{name:"CircleScissor.ERASE_OUTSIDE",iconContent:`${Vp} ${cf}`,viewBox:bo}),"CircleScissor.FILL_OUTSIDE":ir(ar,{name:"CircleScissor.FILL_OUTSIDE",iconContent:`${Vp} ${hl}`,viewBox:bo})};function ir(t,e){return Object.assign(Object.create(t),{...e,name:e.name||t.name})}function Jde(t,e,n){bI[t]=ir(ar,{iconContent:e,viewBox:n})}function eme(t){return bI[t]}const tme=Object.keys(bI);class nme{constructor(){const e={color:"rgb(255, 255, 0)",colorHighlighted:"rgb(0, 255, 0)",colorSelected:"rgb(0, 220, 0)",colorLocked:"rgb(209, 193, 90)",lineWidth:"1",lineDash:"",shadow:!0,textBoxVisibility:!0,textBoxFontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif",textBoxFontSize:"14px",textBoxColor:"rgb(255, 255, 0)",textBoxColorHighlighted:"rgb(0, 255, 0)",textBoxColorSelected:"rgb(0, 255, 0)",textBoxColorLocked:"rgb(209, 193, 90)",textBoxBackground:"",textBoxLinkLineWidth:"1",textBoxLinkLineDash:"2,3",textBoxShadow:!0};this._initializeConfig(e)}getAnnotationToolStyles(e){return this.config.annotations&&this.config.annotations[e]}getViewportToolStyles(e){return this.config.viewports&&this.config.viewports[e]}getToolGroupToolStyles(e){return this.config.toolGroups&&this.config.toolGroups[e]}getDefaultToolStyles(){return this.config.default}setAnnotationStyles(e,n){let r=this.config.annotations;r||(this.config={...this.config,annotations:{}},r=this.config.annotations),r[e]=n}setViewportToolStyles(e,n){let r=this.config.viewports;r||(this.config={...this.config,viewports:{}},r=this.config.viewports),r[e]=n}setToolGroupToolStyles(e,n){let r=this.config.toolGroups;r||(this.config={...this.config,toolGroups:{}},r=this.config.toolGroups),r[e]=n}setDefaultToolStyles(e){this.config.default=e}getStyleProperty(e,n){const{annotationUID:r,viewportId:a,toolGroupId:i,toolName:o}=n;return this._getToolStyle(e,r,a,i,o)}_getToolStyle(e,n,r,a,i){if(n){const s=this.getAnnotationToolStyles(n);if(s&&s[e]!==void 0)return s[e]}if(r){const s=this.getViewportToolStyles(r);if(s){if(s[i]&&s[i][e]!==void 0)return s[i][e];if(s.global&&s.global[e]!==void 0)return s.global[e]}}if(a){const s=this.getToolGroupToolStyles(a);if(s){if(s[i]&&s[i][e]!==void 0)return s[i][e];if(s.global&&s.global[e]!==void 0)return s.global[e]}}const o=this.getDefaultToolStyles();if(o[i]&&o[i][e]!==void 0)return o[i][e];if(o.global&&o.global[e]!==void 0)return o.global[e]}_initializeConfig(e){const n={};for(const r in e)n[r]=e[r];this.config={default:{global:n}}}}const I_=new nme;function rme(t,e,n){const r=[`${t}`];return e&&r.push(`${r[0]}${e}`),n&&r.push(`${r[r.length-1]}${n}`),r}function mv(t,e,n,r){const a=rme(t,n,r);for(let i=a.length-1;i>=0;--i){const o=I_.getStyleProperty(a[i],e);if(o!==void 0)return o}}const ame="color",ime=bc.Highlighted,ome=vr.Active;class Kf extends fm{constructor(e,n,r,a,i){super(e,n,r,a,i)}static getDefinedCursor(e,n=!1,r){r||(r=mv(ame,{},ime,ome));const a=sme(e,n,r);let i=super.getDefinedCursor(a);if(!i){const o=eme(e);o&&(i=cme(o,a,n,r,super.getDefinedCursor("default")),super.setDefinedCursor(a,i))}return i}}function ZV(t,e){const n=Object(e),r=Object.prototype.hasOwnProperty.bind(n);return(t+"").replace(/\{\{(\w+)\}\}/g,(a,i)=>r(i)?n[i]+"":"")}function sme(t,e,n){return`${e?"pointer":"cursor"}:${t}/${n}`}function cme(t,e,n,r,a){const{x:i,y:o}=t.mousePoint;return new Kf(lme(t,n,{color:r}),i,o,e,a)}function lme(t,e,n){const r=ume(t,e,n);return`${URL.createObjectURL(r)}#${t.name||"unknown"}-${e?"pointer":"cursor"}`}function ume(t,e,n){const r=(e?vme:fme)(t,n);return new Blob([r],{type:"image/svg+xml"})}function fme(t,e){const{iconContent:n,iconSize:r,viewBox:a}=t,i=`
    <svg data-icon="cursor" role="img" xmlns="http://www.w3.org/2000/svg"
      width="${r}" height="${r}" viewBox="0 0
      ${a.x} ${a.y}">
      ${n}
    </svg>`;return ZV(i,e)}function vme(t,e){const{iconContent:n,iconSize:r,viewBox:a,mousePointerGroupString:i}=t,o=r/Math.max(a.x,a.y,1),s=16+r,c=`
    <svg data-icon="cursor" role="img" xmlns="http://www.w3.org/2000/svg"
      width="${s}" height="${s}" viewBox="0 0 ${s} ${s}">
      <g>${i}</g>
      <g transform="translate(16, 16) scale(${o})">${n}</g>
    </svg>`;return ZV(c,e)}const B9=Symbol("ElementCursorsMap");function JV(t,e){vm(t)[0]=e,vh(t,e)}function vh(t,e){const n=vm(t);n[1]=n[0],n[0]=e,t.style.cursor=(e instanceof Zi?e:Zi.getDefinedCursor("auto")).getStyleProperty()}function Mn(t){vh(t,vm(t)[1])}function Yt(t){vh(t,Zi.getDefinedCursor("none"))}function vm(t){let e=vm[B9];e instanceof WeakMap||(e=new WeakMap,Object.defineProperty(vm,B9,{value:e}));let n=e.get(t);return n||(n=[null,null],e.set(t,n)),n}const gme=Object.freeze(Object.defineProperty({__proto__:null,hideElementCursor:Yt,initElementCursor:JV,resetElementCursor:Mn,setElementCursor:vh},Symbol.toStringTag,{value:"Module"}));function dme(t,e){let n=Kf.getDefinedCursor(e,!0);n||(n=Zi.getDefinedCursor(e)),n||(console.log(`Cursor ${e} is not defined either as SVG or as a standard cursor.`),n=Zi.getDefinedCursor(e)),vh(t,n)}const mme=[...tme,...Yde],hme=Object.freeze(Object.defineProperty({__proto__:null,CursorNames:mme,CursorSVG:bI,ImageMouseCursor:fm,MouseCursor:Zi,SVGMouseCursor:Kf,elementCursor:gme,registerCursor:Jde,setCursorForElement:dme},Symbol.toStringTag,{value:"Module"}));function Vi(t){return st.toolGroups.find(e=>e.id===t)}const{Active:Cg,Passive:RE,Enabled:bE,Disabled:NE}=vr,pme=[{mouseButton:ec.Primary}];class D_{constructor(e){this.viewportsInfo=[],this.toolOptions={},this.currentActivePrimaryToolName=null,this.prevActivePrimaryToolName=null,this.restoreToolOptions={},this._toolInstances={},this.id=e}getViewportIds(){return this.viewportsInfo.map(({viewportId:e})=>e)}getViewportsInfo(){return this.viewportsInfo.slice()}getToolInstance(e){const n=this._toolInstances[e];if(!n){console.warn(`'${e}' is not registered with this toolGroup (${this.id}).`);return}return n}getToolInstances(){return this._toolInstances}hasTool(e){return!!this._toolInstances[e]}addTool(e,n={}){const r=st.tools[e],a=typeof e<"u"&&e!=="",i=this.toolOptions[e];if(!a){console.warn("Tool with configuration did not produce a toolName: ",n);return}if(!r){console.warn(`'${e}' is not registered with the library. You need to use cornerstoneTools.addTool to register it.`);return}if(i){console.warn(`'${e}' is already registered for ToolGroup ${this.id}.`);return}const{toolClass:o}=r,s={name:e,toolGroupId:this.id,configuration:n},c=new o(s);this._toolInstances[e]=c}addToolInstance(e,n,r={}){var i;let a=(i=st.tools[e])==null?void 0:i.toolClass;if(!a){const o=st.tools[n].toolClass;class s extends o{}s.toolName=e,a=s,st.tools[e]={toolClass:s}}this.addTool(a.toolName,r)}addViewport(e,n){if(typeof e!="string")throw new Error("viewportId must be defined and be a string");const r=this._findRenderingEngine(e,n);this.viewportsInfo.some(({viewportId:s})=>s===e)||this.viewportsInfo.push({viewportId:e,renderingEngineId:r});const a=this.getActivePrimaryMouseButtonTool();Qr.getRuntimeSettings().get("useCursors")&&this.setViewportsCursorByToolName(a);const o={toolGroupId:this.id,viewportId:e,renderingEngineId:r};Dt(ot,B.TOOLGROUP_VIEWPORT_ADDED,o)}removeViewports(e,n){const r=[];if(this.viewportsInfo.forEach((i,o)=>{let s=!1;i.renderingEngineId===e&&(s=!0,n&&i.viewportId!==n&&(s=!1)),s&&r.push(o)}),r.length)for(let i=r.length-1;i>=0;i--)this.viewportsInfo.splice(r[i],1);const a={toolGroupId:this.id,viewportId:n,renderingEngineId:e};Dt(ot,B.TOOLGROUP_VIEWPORT_REMOVED,a)}setActiveStrategy(e,n){const r=this._toolInstances[e];if(r===void 0){console.warn(`Tool ${e} not added to toolGroup, can't set tool configuration.`);return}r.setActiveStrategy(n)}setToolMode(e,n,r={}){if(!e){console.warn("setToolMode: toolName must be defined");return}if(n===vr.Active){this.setToolActive(e,r||this.restoreToolOptions[e]);return}if(n===vr.Passive){this.setToolPassive(e);return}if(n===vr.Enabled){this.setToolEnabled(e);return}if(n===vr.Disabled){this.setToolDisabled(e);return}console.warn("setToolMode: mode must be defined")}setToolActive(e,n={}){const r=this._toolInstances[e];if(r===void 0){console.warn(`Tool ${e} not added to toolGroup, can't set tool mode.`);return}if(!r){console.warn(`'${e}' instance ${r} is not registered with this toolGroup, can't set tool mode.`);return}const a=this.toolOptions[e]?this.toolOptions[e].bindings:[],i=n.bindings?n.bindings:[],s={bindings:[...a,...i].reduce((f,v)=>{const g=v.numTouchPoints!==void 0,d=v.mouseButton!==void 0;return!f.some(m=>LE(m,v))&&(g||d)&&f.push(v),f},[]),mode:Cg};this.toolOptions[e]=s,this._toolInstances[e].mode=Cg;const l=Qr.getRuntimeSettings().get("useCursors");if(this._hasMousePrimaryButtonBinding(n)&&l)this.setViewportsCursorByToolName(e);else if(!this.getActivePrimaryMouseButtonTool()&&l){const v=Zi.getDefinedCursor("default");this._setCursorForViewports(v)}this._hasMousePrimaryButtonBinding(n)&&(this.prevActivePrimaryToolName===null?this.prevActivePrimaryToolName=e:this.prevActivePrimaryToolName=this.currentActivePrimaryToolName,this.currentActivePrimaryToolName=e),typeof r.onSetToolActive=="function"&&r.onSetToolActive(),this._renderViewports();const u={toolGroupId:this.id,toolName:e,toolBindingsOptions:n};Dt(ot,B.TOOL_ACTIVATED,u),this._triggerToolModeChangedEvent(e,Cg,n)}setToolPassive(e,n){const r=this._toolInstances[e];if(r===void 0){console.warn(`Tool ${e} not added to toolGroup, can't set tool mode.`);return}const a=this.getToolOptions(e),i=Object.assign({bindings:a?a.bindings:[]},a,{mode:RE}),o=Array.isArray(n==null?void 0:n.removeAllBindings)?n.removeAllBindings:this.getDefaultPrimaryBindings();i.bindings=i.bindings.filter(c=>(n==null?void 0:n.removeAllBindings)!==!0&&!o.some(l=>LE(c,l)));let s=RE;i.bindings.length!==0&&(s=Cg,i.mode=s),this.toolOptions[e]=i,r.mode=s,typeof r.onSetToolPassive=="function"&&r.onSetToolPassive(),this._renderViewports(),this._triggerToolModeChangedEvent(e,RE)}setToolEnabled(e){const n=this._toolInstances[e];if(n===void 0){console.warn(`Tool ${e} not added to toolGroup, can't set tool mode.`);return}const r={bindings:[],mode:bE};this.toolOptions[e]=r,n.mode=bE,typeof n.onSetToolEnabled=="function"&&n.onSetToolEnabled(),this._renderViewports(),this._triggerToolModeChangedEvent(e,bE)}setToolDisabled(e){const n=this._toolInstances[e];if(n===void 0){console.warn(`Tool ${e} not added to toolGroup, can't set tool mode.`);return}const r={bindings:[],mode:NE};this.restoreToolOptions[e]=this.toolOptions[e],this.toolOptions[e]=r,n.mode=NE,typeof n.onSetToolDisabled=="function"&&n.onSetToolDisabled(),this._renderViewports(),this._triggerToolModeChangedEvent(e,NE)}getToolOptions(e){const n=this.toolOptions[e];if(n!==void 0)return n}getActivePrimaryMouseButtonTool(){return Object.keys(this.toolOptions).find(e=>{const n=this.toolOptions[e];return n.mode===Cg&&this._hasMousePrimaryButtonBinding(n)})}setViewportsCursorByToolName(e,n){const r=this._getCursor(e,n);this._setCursorForViewports(r)}_getCursor(e,n){let r,a;return n&&(r=`${e}.${n}`,a=Kf.getDefinedCursor(r,!0),a)||(r=`${e}`,a=Kf.getDefinedCursor(r,!0),a)||(r=e,a=Kf.getDefinedCursor(r,!0),a)?a:Zi.getDefinedCursor("default")}_setCursorForViewports(e){this.viewportsInfo.forEach(({renderingEngineId:n,viewportId:r})=>{const a=Ka(r,n);if(!a)return;const{viewport:i}=a;JV(i.element,e)})}setToolConfiguration(e,n,r){const a=this._toolInstances[e];if(a===void 0)return console.warn(`Tool ${e} not present, can't set tool configuration.`),!1;let i;return r?i=n:i=Object.assign(a.configuration,n),a.configuration=i,typeof a.onSetToolConfiguration=="function"&&a.onSetToolConfiguration(),this._renderViewports(),!0}getDefaultMousePrimary(){return ec.Primary}getDefaultPrimaryBindings(){return pme}getToolConfiguration(e,n){if(this._toolInstances[e]===void 0){console.warn(`Tool ${e} not present, can't set tool configuration.`);return}const r=Xde(this._toolInstances[e].configuration,n)||this._toolInstances[e].configuration;return _s(r)}getPrevActivePrimaryToolName(){return this.prevActivePrimaryToolName}setActivePrimaryTool(e){const n=this.getCurrentActivePrimaryToolName();this.setToolDisabled(n),this.setToolActive(e,{bindings:[{mouseButton:ec.Primary}]})}getCurrentActivePrimaryToolName(){return this.currentActivePrimaryToolName}clone(e,n=null){let r=Vi(e);return r?(console.debug(`ToolGroup ${e} already exists`),r):(r=new D_(e),st.toolGroups.push(r),n=n??(()=>!0),Object.keys(this._toolInstances).filter(n).forEach(a=>{const i=this._toolInstances[a],o=this.toolOptions[a],s=i.mode;r.addTool(a),r.setToolMode(a,s,{bindings:o.bindings??[]})}),r)}_hasMousePrimaryButtonBinding(e){var r;const n=this.getDefaultPrimaryBindings();return(r=e==null?void 0:e.bindings)==null?void 0:r.some(a=>n.some(i=>LE(a,i)))}_renderViewports(){this.viewportsInfo.forEach(({renderingEngineId:e,viewportId:n})=>{da(e).renderViewport(n)})}_triggerToolModeChangedEvent(e,n,r){const a={toolGroupId:this.id,toolName:e,mode:n,toolBindingsOptions:r};Dt(ot,B.TOOL_MODE_CHANGED,a)}_findRenderingEngine(e,n){const r=to();if((r==null?void 0:r.length)===0)throw new Error("No rendering engines found.");if(n)return n;const a=r.filter(i=>i.getViewport(e));if(a.length===0){if(r.length===1)return r[0].id;throw new Error("No rendering engines found that contain the viewport with the same viewportId, you must specify a renderingEngineId.")}if(a.length>1)throw new Error("Multiple rendering engines found that contain the viewport with the same viewportId, you must specify a renderingEngineId.");return a[0].id}}function LE(t,e){return t.mouseButton!==e.mouseButton||t.numTouchPoints!==e.numTouchPoints?!1:t.modifierKey===e.modifierKey}function Sme(t){if(st.toolGroups.some(r=>r.id===t)){console.warn(`'${t}' already exists.`);return}const n=new D_(t);return st.toolGroups.push(n),n}function ek(t){const e=st.toolGroups.findIndex(n=>n.id===t);e>-1&&st.toolGroups.splice(e,1)}function tk(){const t=[...st.toolGroups];for(const e of t)ek(e.id);st.toolGroups=[]}function la(t,e){var r;e||(e=(r=to().find(a=>a.getViewports().find(i=>i.id===t)))==null?void 0:r.id);const n=st.toolGroups.filter(a=>a.viewportsInfo.some(i=>i.renderingEngineId===e&&(!i.viewportId||i.viewportId===t)));if(n.length){if(n.length>1)throw new Error(`Multiple tool groups found for renderingEngineId: ${e} and viewportId: ${t}. You should only
      have one tool group per viewport in a renderingEngine.`);return n[0]}}function Cme(){return st.toolGroups}const Ime=[vr.Active,vr.Passive,vr.Enabled];function nk(t){return st.toolGroups.filter(({toolOptions:e})=>{const n=Object.keys(e);for(let r=0;r<n.length;r++)if(t===n[r]&&e[t]&&Ime.includes(e[t].mode))return!0;return!1})}const Dme=Object.freeze(Object.defineProperty({__proto__:null,createToolGroup:Sme,destroy:tk,destroyToolGroup:ek,getAllToolGroups:Cme,getToolGroup:Vi,getToolGroupForViewport:la,getToolGroupsWithToolName:nk},Symbol.toStringTag,{value:"Module"}));function Eme(t,e){const n=Ae(e),{renderingEngine:r,viewportId:a}=n,i=B.ANNOTATION_ADDED,o={annotation:t,viewportId:a,renderingEngineId:r.id};Dt(ot,i,o)}function Tme(t){const{toolName:e}=t.metadata,n=nk(e);if(!n.length)return;const r=[];n.forEach(o=>{o.viewportsInfo.forEach(s=>{const{renderingEngineId:c,viewportId:l}=s,{FrameOfReferenceUID:u}=Ka(l,c);t.metadata.FrameOfReferenceUID===u&&r.push(s)})});const a=B.ANNOTATION_ADDED,i={annotation:t};if(!r.length){Dt(ot,a,i);return}r.forEach(({renderingEngineId:o,viewportId:s})=>{i.viewportId=s,i.renderingEngineId=o,Dt(ot,a,i)})}function E_(t){const e=B.ANNOTATION_REMOVED;Dt(ot,e,t)}function $r(t,e,n=ia.HandlesUpdated){const r=Ae(e),{viewportId:a,renderingEngineId:i}=r,o=B.ANNOTATION_MODIFIED;Dt(ot,o,{annotation:t,viewportId:a,renderingEngineId:i,changeType:n})}function Ur(t){rk({annotation:t})}function T_(t,e=!1){rk({annotation:t,contourHoleProcessingEnabled:e})}function rk(t){const e=B.ANNOTATION_COMPLETED;Dt(ot,e,t)}let ak;function v0(){return ak}function y_(t){ak=t}function nr(t,e){const n=v0(),r=n.getGroupKey(e);return n.getAnnotations(r,t)}function Ta(t){return v0().getAnnotation(t)}function NI(){return v0().getAllAnnotations()}function M_(t){const{annotationUID:e,parentAnnotationUID:n}=t;if(!n)return;const r=Ta(n),a=r.childAnnotationUIDs.indexOf(e);r.childAnnotationUIDs.splice(a,1),t.parentAnnotationUID=void 0}function __(t,e){const{annotationUID:n}=t,{annotationUID:r}=e;M_(e),t.childAnnotationUIDs||(t.childAnnotationUIDs=[]),!t.childAnnotationUIDs.includes(r)&&(t.childAnnotationUIDs.push(r),e.parentAnnotationUID=n)}function ik(t){return t.parentAnnotationUID?Ta(t.parentAnnotationUID):void 0}function LI(t){var e;return((e=t.childAnnotationUIDs)==null?void 0:e.map(n=>Ta(n)))??[]}function qn(t,e){t.annotationUID||(t.annotationUID=Cr());const n=v0();if(e instanceof HTMLDivElement){const r=n.getGroupKey(e);n.addAnnotation(t,r),Eme(t,e)}else n.addAnnotation(t,void 0),Tme(t);return t.annotationUID}function yme(t,e){const n=v0(),r=n.getGroupKey(e);return n.getNumberOfAnnotations(r,t)}function sr(t){var r;if(!t)return;const e=v0(),n=e.getAnnotation(t);n&&((r=n.childAnnotationUIDs)==null||r.forEach(a=>sr(a)),e.removeAnnotation(t),E_({annotation:n,annotationManagerUID:e.uid}))}function Mme(){const t=v0(),e=t.removeAllAnnotations();for(const n of e)E_({annotation:n,annotationManagerUID:t.uid})}function _me(t,e){const n=v0(),r=n.getGroupKey(e),a=n.removeAnnotations(r,t);for(const i of a)E_({annotation:i,annotationManagerUID:n.uid})}function ok(t){let e=t;for(;e;)e.invalidated=!0,e=e.parentAnnotationUID?Ta(e.parentAnnotationUID):void 0}const Ome=Object.freeze(Object.defineProperty({__proto__:null,addAnnotation:qn,addChildAnnotation:__,clearParentAnnotation:M_,getAllAnnotations:NI,getAnnotation:Ta,getAnnotationManager:v0,getAnnotations:nr,getChildAnnotations:LI,getNumberOfAnnotations:yme,getParentAnnotation:ik,invalidateAnnotation:ok,removeAllAnnotations:Mme,removeAnnotation:sr,removeAnnotations:_me,setAnnotationManager:y_},Symbol.toStringTag,{value:"Module"}));function sk(t){const e=t.toolName;if(st.tools[e],!e)throw new Error(`No Tool Found for the ToolClass ${t.name}`);st.tools[e]={toolClass:t}}function wme(t){return!!st.tools[t]}function Pme(t){const e=t.toolName;if(!e)throw new Error(`No tool found for: ${t.name}`);if(!st.tools[e]!==void 0)delete st.tools[e];else throw new Error(`${e} cannot be removed because it has not been added`)}function z1(t,e){const n=e||t.currentTarget,{viewport:r}=Ae(n)||{};if(!r)return;const a=Rme(t),i=xme(t),o=Ame(n,i),s=r.canvasToWorld(o);return{page:i,client:a,canvas:o,world:s}}function Ame(t,e){const n=t.getBoundingClientRect();return[e[0]-n.left-window.pageXOffset,e[1]-n.top-window.pageYOffset]}function xme(t){return[t.pageX,t.pageY]}function Rme(t){return[t.clientX,t.clientY]}function ck(t){const e=t.currentTarget,{viewportId:n,renderingEngineId:r}=Ae(e),a=z1(t,e),i={page:[0,0],client:[0,0],canvas:[0,0],world:[0,0,0]},o={event:t,eventName:B.MOUSE_DOUBLE_CLICK,viewportId:n,renderingEngineId:r,camera:{},element:e,startPoints:a,lastPoints:a,currentPoints:a,deltaPoints:i};!Dt(e,B.MOUSE_DOUBLE_CLICK,o)&&(t.stopImmediatePropagation(),t.preventDefault())}const W9=B.MOUSE_MOVE;function gh(t){const e=t.currentTarget,n=Ae(e);if(!n)return;const{renderingEngineId:r,viewportId:a}=n,i=z1(t);!Dt(e,W9,{renderingEngineId:r,viewportId:a,camera:{},element:e,currentPoints:i,eventName:W9,event:t})&&(t.stopImmediatePropagation(),t.preventDefault())}const{MOUSE_DOWN:H9,MOUSE_DOWN_ACTIVATE:bme,MOUSE_CLICK:Nme,MOUSE_UP:Lme,MOUSE_DRAG:$9}=B,Ume=400,Fme=150,Vme=3,kme={mouseButton:void 0,element:null,renderingEngineId:void 0,viewportId:void 0,isClickEvent:!0,clickDelay:200,preventClickTimeout:null,startPoints:{page:[0,0],client:[0,0],canvas:[0,0],world:[0,0,0]},lastPoints:{page:[0,0],client:[0,0],canvas:[0,0],world:[0,0,0]}};let Tn={mouseButton:void 0,renderingEngineId:void 0,viewportId:void 0,isClickEvent:!0,clickDelay:200,element:null,preventClickTimeout:null,startPoints:{page:[0,0],client:[0,0],canvas:[0,0],world:[0,0,0]},lastPoints:{page:[0,0],client:[0,0],canvas:[0,0],world:[0,0,0]}};const si={doubleClickTimeout:null,mouseDownEvent:null,mouseUpEvent:null,ignoreDoubleClick:!1};function lk(t){if(si.doubleClickTimeout){if(t.buttons===si.mouseDownEvent.buttons)return;si.mouseDownEvent=t,lC();return}si.doubleClickTimeout=setTimeout(lC,t.buttons===1?Ume:Fme),si.mouseDownEvent=t,si.ignoreDoubleClick=!1,Tn.element=t.currentTarget,Tn.mouseButton=t.buttons;const e=Ae(Tn.element),{renderingEngineId:n,viewportId:r}=e;Tn.renderingEngineId=n,Tn.viewportId=r,Tn.preventClickTimeout=setTimeout(Bme,Tn.clickDelay),Tn.element.removeEventListener("mousemove",gh);const a=z1(t,Tn.element);Tn.startPoints=Hl(a),Tn.lastPoints=Hl(a),document.addEventListener("mouseup",O_),document.addEventListener("mousemove",uk)}function Gme(t){const e=UI(Tn.startPoints,Tn.startPoints),n={event:t,eventName:H9,element:Tn.element,mouseButton:Tn.mouseButton,renderingEngineId:Tn.renderingEngineId,viewportId:Tn.viewportId,camera:{},startPoints:Tn.startPoints,lastPoints:Tn.startPoints,currentPoints:Tn.startPoints,deltaPoints:e};Tn.lastPoints=Hl(n.lastPoints),Dt(n.element,H9,n)&&Dt(n.element,bme,n)}function uk(t){const e=Ae(Tn.element);if(!(e!=null&&e.viewport))return;const n=z1(t,Tn.element),r=dk(Tn.element,Tn.lastPoints),a=UI(n,r);if(si.doubleClickTimeout)if(vk(a.canvas))lC();else return;const i={event:t,eventName:$9,mouseButton:Tn.mouseButton,renderingEngineId:Tn.renderingEngineId,viewportId:Tn.viewportId,camera:{},element:Tn.element,startPoints:Hl(Tn.startPoints),lastPoints:Hl(r),currentPoints:n,deltaPoints:a};!Dt(Tn.element,$9,i)&&(t.stopImmediatePropagation(),t.preventDefault()),Tn.lastPoints=Hl(n)}function O_(t){if(clearTimeout(Tn.preventClickTimeout),si.doubleClickTimeout)si.mouseUpEvent?iy():(si.mouseUpEvent=t,Tn.element.addEventListener("mousemove",fk));else{const e=Tn.isClickEvent?Nme:Lme,n=z1(t,Tn.element),r=UI(n,Tn.lastPoints),a={event:t,eventName:e,mouseButton:Tn.mouseButton,element:Tn.element,renderingEngineId:Tn.renderingEngineId,viewportId:Tn.viewportId,camera:{},startPoints:Hl(Tn.startPoints),lastPoints:Hl(Tn.lastPoints),currentPoints:n,deltaPoints:r};Dt(a.element,e,a),iy()}document.removeEventListener("mousemove",uk)}function fk(t){const e=z1(t,Tn.element),n=dk(Tn.element,Tn.lastPoints),r=UI(e,n);vk(r.canvas)&&(lC(),gh(t))}function vk(t){return Math.abs(t[0])+Math.abs(t[1])>Vme}function Bme(){Tn.isClickEvent=!1}function lC(){si.ignoreDoubleClick=!0;const t=si.mouseDownEvent,e=si.mouseUpEvent;gk(),Gme(t),e&&O_(e)}function gk(){si.doubleClickTimeout&&(clearTimeout(si.doubleClickTimeout),si.doubleClickTimeout=null),si.mouseDownEvent=null,si.mouseUpEvent=null}function iy(){var t,e;document.removeEventListener("mouseup",O_),(t=Tn.element)==null||t.removeEventListener("mousemove",fk),(e=Tn.element)==null||e.addEventListener("mousemove",gh),gk(),Tn=JSON.parse(JSON.stringify(kme))}function Hl(t){return JSON.parse(JSON.stringify(t))}function dk(t,e){const{viewport:n}=Ae(t)||{};if(!n)return e;const r=n.canvasToWorld(e.canvas);return{page:e.page,client:e.client,canvas:e.canvas,world:r}}function UI(t,e){return!t||!e?{page:[0,0],client:[0,0],canvas:[0,0],world:[0,0,0]}:{page:UE(t.page,e.page),client:UE(t.client,e.client),canvas:UE(t.canvas,e.canvas),world:Wme(t.world,e.world)}}function UE(t,e){return[t[0]-e[0],t[1]-e[1]]}function Wme(t,e){return[t[0]-e[0],t[1]-e[1],t[2]-e[2]]}function Hme(){return Tn.mouseButton}function mk(t){si.ignoreDoubleClick?(si.ignoreDoubleClick=!1,t.stopImmediatePropagation(),t.preventDefault()):iy()}function hk(t){t.removeEventListener("dblclick",ck),t.removeEventListener("mousedown",lk),t.removeEventListener("mousemove",gh),t.removeEventListener("dblclick",mk,{capture:!0})}function $me(t){hk(t),t.addEventListener("dblclick",ck),t.addEventListener("mousedown",lk),t.addEventListener("mousemove",gh),t.addEventListener("dblclick",mk,{capture:!0})}const pk={enable:$me,disable:hk},zme=2e3,hv={mouse:0,touch:1};let z9,q9;function Sk(t,e){const n=Date.now();if(t!==z9){if(n-q9<=zme)return e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),!1;z9=t}q9=n}const Ck=Sk.bind(null,hv.mouse),Ik=Sk.bind(null,hv.touch);function j9(t,e,n){const r=n?Ck:Ik;e.forEach(function(a){t.addEventListener(a,r,{passive:!1})})}function Q9(t,e,n){const r=n?Ck:Ik;e.forEach(function(a){t.removeEventListener(a,r)})}const Dk=["mousedown","mouseup","mousemove"],Ek=["touchstart","touchend"];function Tk(t){Q9(t,Dk,hv.mouse),Q9(t,Ek,hv.touch)}function qme(t){Tk(t),j9(t,Dk,hv.mouse),j9(t,Ek,hv.touch)}const yk={enable:qme,disable:Tk};function FI(t,e){const n=e||t.currentTarget,r=t.type==="touchend"?t.changedTouches:t.touches;return Object.keys(r).map(a=>{const i=Kme(r[a]),o=Qme(r[a]),s=jme(n,o),{viewport:c}=Ae(n),l=c.canvasToWorld(s);return{page:o,client:i,canvas:s,world:l,touch:{identifier:a,radiusX:r[a].radiusX,radiusY:r[a].radiusY,force:r[a].force,rotationAngle:r[a].rotationAngle}}})}function jme(t,e){const n=t.getBoundingClientRect();return[e[0]-n.left-window.pageXOffset,e[1]-n.top-window.pageYOffset]}function Qme(t){return[t.pageX,t.pageY]}function Kme(t){return[t.clientX,t.clientY]}function uC(t,e){const n=gm(t),r=gm(e);return{page:FE(n.page,r.page),client:FE(n.client,r.client),canvas:FE(n.canvas,r.canvas),world:Yme(n.world,r.world)}}function w_(t,e){const n=gm(t),r=gm(e);return{page:Xf(n.page,r.page),client:Xf(n.client,r.client),canvas:Xf(n.canvas,r.canvas),world:Mk(n.world,r.world)}}function Xme(t,e){}function fC(t,e){const n=K9(t),r=K9(e);return{page:n.page-r.page,client:n.client-r.client,canvas:n.canvas-r.canvas,world:n.world-r.world}}function G0(t){return JSON.parse(JSON.stringify(t))}function oy(t){return JSON.parse(JSON.stringify(t))}function gm(t){return t.reduce((e,n)=>({page:[e.page[0]+n.page[0]/t.length,e.page[1]+n.page[1]/t.length],client:[e.client[0]+n.client[0]/t.length,e.client[1]+n.client[1]/t.length],canvas:[e.canvas[0]+n.canvas[0]/t.length,e.canvas[1]+n.canvas[1]/t.length],world:[e.world[0]+n.world[0]/t.length,e.world[1]+n.world[1]/t.length,e.world[2]+n.world[2]/t.length]}),{page:[0,0],client:[0,0],canvas:[0,0],world:[0,0,0]})}function a0(t){return t.reduce((e,n)=>({page:[e.page[0]+n.page[0]/t.length,e.page[1]+n.page[1]/t.length],client:[e.client[0]+n.client[0]/t.length,e.client[1]+n.client[1]/t.length],canvas:[e.canvas[0]+n.canvas[0]/t.length,e.canvas[1]+n.canvas[1]/t.length],world:[e.world[0]+n.world[0]/t.length,e.world[1]+n.world[1]/t.length,e.world[2]+n.world[2]/t.length],touch:{identifier:null,radiusX:e.touch.radiusX+n.touch.radiusX/t.length,radiusY:e.touch.radiusY+n.touch.radiusY/t.length,force:e.touch.force+n.touch.force/t.length,rotationAngle:e.touch.rotationAngle+n.touch.rotationAngle/t.length}}),{page:[0,0],client:[0,0],canvas:[0,0],world:[0,0,0],touch:{identifier:null,radiusX:0,radiusY:0,force:0,rotationAngle:0}})}function FE(t,e){return[t[0]-e[0],t[1]-e[1]]}function Yme(t,e){return[t[0]-e[0],t[1]-e[1],t[2]-e[2]]}function K9(t){const e=[];for(let n=0;n<t.length;n++)for(let r=0;r<t.length;r++)n<r&&e.push({page:Xf(t[n].page,t[r].page),client:Xf(t[n].client,t[r].client),canvas:Xf(t[n].canvas,t[r].canvas),world:Mk(t[n].world,t[r].world)});return e.reduce((n,r)=>({page:n.page+r.page/e.length,client:n.client+r.client/e.length,canvas:n.canvas+r.canvas/e.length,world:n.world+r.world/e.length}),{page:0,client:0,canvas:0,world:0})}function Xf(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}function Mk(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2))}const Zme=Object.freeze(Object.defineProperty({__proto__:null,copyPoints:oy,copyPointsList:G0,getDeltaDistance:w_,getDeltaDistanceBetweenIPoints:fC,getDeltaPoints:uC,getDeltaRotation:Xme,getMeanPoints:gm,getMeanTouchPoints:a0},Symbol.toStringTag,{value:"Module"}));Qr.getRuntimeSettings();const{TOUCH_START:X9,TOUCH_START_ACTIVATE:Jme,TOUCH_PRESS:Y9,TOUCH_DRAG:Z9,TOUCH_END:J9,TOUCH_TAP:eP,TOUCH_SWIPE:VE}=B,dm={page:[0,0],client:[0,0],canvas:[0,0],world:[0,0,0]},vC={page:0,client:0,canvas:0,world:0},_k={renderingEngineId:void 0,viewportId:void 0,element:null,startPointsList:[{...dm,touch:null}],lastPointsList:[{...dm,touch:null}],isTouchStart:!1,startTime:null,pressTimeout:null,pressDelay:700,pressMaxDistance:5,accumulatedDistance:vC,swipeDistanceThreshold:48,swiped:!1,swipeToleranceMs:300},Ok={renderingEngineId:void 0,viewportId:void 0,element:null,startPointsList:[{...dm,touch:null}],taps:0,tapTimeout:null,tapMaxDistance:24,tapToleranceMs:300};let Ht=JSON.parse(JSON.stringify(_k)),Va=JSON.parse(JSON.stringify(Ok));function ou(t,e,n){return Dt(t,e,n)}function wk(t){Ht.element=t.currentTarget;const e=Ae(Ht.element),{renderingEngineId:n,viewportId:r}=e;Ht.renderingEngineId=n,Ht.viewportId=r,!Ht.isTouchStart&&(clearTimeout(Ht.pressTimeout),Ht.pressTimeout=setTimeout(()=>ehe(t),Ht.pressDelay),the(t),document.addEventListener("touchmove",Pk),document.addEventListener("touchend",Ak))}function ehe(t){if(Ht.accumulatedDistance.canvas>Ht.pressMaxDistance)return;const n={event:t,eventName:Y9,renderingEngineId:Ht.renderingEngineId,viewportId:Ht.viewportId,camera:{},element:Ht.element,startPointsList:G0(Ht.startPointsList),lastPointsList:G0(Ht.lastPointsList),startPoints:oy(a0(Ht.startPointsList)),lastPoints:oy(a0(Ht.lastPointsList))};ou(n.element,Y9,n)}function the(t){Ht.isTouchStart=!0,Ht.startTime=new Date;const e=FI(t,Ht.element),n=a0(e),r=dm,a=vC,i={event:t,eventName:X9,element:Ht.element,renderingEngineId:Ht.renderingEngineId,viewportId:Ht.viewportId,camera:{},startPointsList:e,lastPointsList:e,currentPointsList:e,startPoints:n,lastPoints:n,currentPoints:n,deltaPoints:r,deltaDistance:a};Ht.startPointsList=G0(i.startPointsList),Ht.lastPointsList=G0(i.lastPointsList),ou(i.element,X9,i)&&ou(i.element,Jme,i)}function Pk(t){const e=FI(t,Ht.element),n=xk(Ht.element,Ht.lastPointsList),r=e.length===n.length?uC(e,n):dm,a=e.length===n.length?fC(e,n):vC,i=e.length===n.length?w_(e,Ht.lastPointsList):vC;Ht.accumulatedDistance={page:Ht.accumulatedDistance.page+i.page,client:Ht.accumulatedDistance.client+i.client,canvas:Ht.accumulatedDistance.canvas+i.canvas,world:Ht.accumulatedDistance.world+i.world};const o={event:t,eventName:Z9,renderingEngineId:Ht.renderingEngineId,viewportId:Ht.viewportId,camera:{},element:Ht.element,startPoints:a0(Ht.startPointsList),lastPoints:a0(n),currentPoints:a0(e),startPointsList:G0(Ht.startPointsList),lastPointsList:G0(n),currentPointsList:e,deltaPoints:r,deltaDistance:a};ou(Ht.element,Z9,o),rhe(t,r),Ht.lastPointsList=G0(e)}function Ak(t){clearTimeout(Ht.pressTimeout);const e=FI(t,Ht.element),n=xk(Ht.element,Ht.lastPointsList),r=e.length===n.length?uC(e,n):uC(e,e),a=e.length===n.length?fC(e,n):fC(e,e),i={event:t,eventName:J9,element:Ht.element,renderingEngineId:Ht.renderingEngineId,viewportId:Ht.viewportId,camera:{},startPointsList:G0(Ht.startPointsList),lastPointsList:G0(n),currentPointsList:e,startPoints:a0(Ht.startPointsList),lastPoints:a0(n),currentPoints:a0(e),deltaPoints:r,deltaDistance:a};ou(i.element,J9,i),nhe(t),Ht=JSON.parse(JSON.stringify(_k)),document.removeEventListener("touchmove",Pk),document.removeEventListener("touchend",Ak)}function nhe(t){const e=new Date().getTime(),n=Ht.startTime.getTime();if(e-n>Va.tapToleranceMs||(Va.taps===0&&(Va.element=Ht.element,Va.renderingEngineId=Ht.renderingEngineId,Va.viewportId=Ht.viewportId,Va.startPointsList=Ht.startPointsList),Va.taps>0&&!(Va.element==Ht.element&&Va.renderingEngineId==Ht.renderingEngineId&&Va.viewportId==Ht.viewportId)))return;const r=FI(t,Va.element);w_(r,Va.startPointsList).canvas>Va.tapMaxDistance||(clearTimeout(Va.tapTimeout),Va.taps+=1,Va.tapTimeout=setTimeout(()=>{const i={event:t,eventName:eP,element:Va.element,renderingEngineId:Va.renderingEngineId,viewportId:Va.viewportId,camera:{},currentPointsList:r,currentPoints:a0(r),taps:Va.taps};ou(i.element,eP,i),Va=JSON.parse(JSON.stringify(Ok))},Va.tapToleranceMs))}function rhe(t,e){const n=new Date().getTime(),r=Ht.startTime.getTime();if(Ht.swiped||n-r>Ht.swipeToleranceMs)return;const[a,i]=e.canvas,o={event:t,eventName:VE,renderingEngineId:Ht.renderingEngineId,viewportId:Ht.viewportId,camera:{},element:Ht.element,swipe:null};Math.abs(a)>Ht.swipeDistanceThreshold&&(o.swipe=a>0?e1.RIGHT:e1.LEFT,ou(o.element,VE,o),Ht.swiped=!0),Math.abs(i)>Ht.swipeDistanceThreshold&&(o.swipe=i>0?e1.DOWN:e1.UP,ou(o.element,VE,o),Ht.swiped=!0)}function xk(t,e){const{viewport:n}=Ae(t);return e.map(r=>{const a=n.canvasToWorld(r.canvas);return{page:r.page,client:r.client,canvas:r.canvas,world:a,touch:r.touch}})}function Rk(t){yk.disable(t),t.removeEventListener("touchstart",wk)}function ahe(t){Rk(t),yk.enable(t),t.addEventListener("touchstart",wk,{passive:!1})}const bk={enable:ahe,disable:Rk},tP=10,nP=40,rP=800;function ihe(t){let e=0,n=0,r=0,a=0;return"detail"in t&&(n=t.detail),"wheelDelta"in t&&(n=-t.wheelDelta/120),"wheelDeltaY"in t&&(n=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),r=e*tP,a=n*tP,"deltaY"in t&&(a=t.deltaY),"deltaX"in t&&(r=t.deltaX),(r||a)&&t.deltaMode&&(t.deltaMode===1?(r*=nP,a*=nP):(r*=rP,a*=rP)),r&&!e&&(e=r<1?-1:1),a&&!n&&(n=a<1?-1:1),{spinX:e,spinY:n,pixelX:r,pixelY:a}}function Nk(t){const e=t.currentTarget,n=Ae(e),{renderingEngineId:r,viewportId:a}=n;if(t.deltaY>-1&&t.deltaY<1)return;t.preventDefault();const{spinX:i,spinY:o,pixelX:s,pixelY:c}=ihe(t),l=o<0?-1:1,u={event:t,eventName:B.MOUSE_WHEEL,renderingEngineId:r,viewportId:a,element:e,camera:{},detail:t,wheel:{spinX:i,spinY:o,pixelX:s,pixelY:c,direction:l},points:z1(t)};Dt(e,B.MOUSE_WHEEL,u)}function ohe(t){Lk(t),t.addEventListener("wheel",Nk,{passive:!1})}function Lk(t){t.removeEventListener("wheel",Nk)}const Uk={enable:ohe,disable:Lk},she={renderingEngineId:void 0,viewportId:void 0,key:void 0,keyCode:void 0,element:null};let Qa={renderingEngineId:void 0,viewportId:void 0,key:void 0,keyCode:void 0,element:null};function VI(t){Qa.element=t.currentTarget;const e=Ae(Qa.element),{renderingEngineId:n,viewportId:r}=e;Qa.renderingEngineId=n,Qa.viewportId=r,Qa.key=t.key,Qa.keyCode=t.keyCode,t.preventDefault();const a={renderingEngineId:Qa.renderingEngineId,viewportId:Qa.viewportId,element:Qa.element,key:Qa.key,keyCode:Qa.keyCode};Dt(a.element,B.KEY_DOWN,a),document.addEventListener("keyup",Fk),document.addEventListener("visibilitychange",P_),Qa.element.removeEventListener("keydown",VI)}function P_(){document.removeEventListener("visibilitychange",P_),document.visibilityState==="hidden"&&Vk()}function Fk(t){const e={renderingEngineId:Qa.renderingEngineId,viewportId:Qa.viewportId,element:Qa.element,key:Qa.key,keyCode:Qa.keyCode};document.removeEventListener("keyup",Fk),document.removeEventListener("visibilitychange",P_),Qa.element.addEventListener("keydown",VI),Qa=structuredClone(she),Dt(e.element,B.KEY_UP,e)}function che(){return Qa.keyCode}function Vk(){Qa.keyCode=void 0}function lhe(t){kk(t),t.addEventListener("keydown",VI)}function kk(t){t.removeEventListener("keydown",VI)}const Hv={enable:lhe,disable:kk,getModifierKey:che},{EPSILON:uf}=fu;function Gk(t,e,n=!1){var u;let r=1/0,a=n?-1/0:0,i=1/0,o=n?-1/0:0,s=1/0,c=n?-1/0:0;const l=((u=t[0])==null?void 0:u.length)===3;for(let f=0;f<t.length;f++){const v=t[f];r=Math.min(v[0],r),a=Math.max(v[0],a),i=Math.min(v[1],i),o=Math.max(v[1],o),l&&(s=Math.min(v[2]??s,s),c=Math.max(v[2]??c,c))}return e?(r=Math.max(n?e[0]+uf:0,r),a=Math.min(n?e[0]-uf:e[0]-1,a),i=Math.max(n?e[1]+uf:0,i),o=Math.min(n?e[1]-uf:e[1]-1,o),l&&e.length===3&&(s=Math.max(n?e[2]+uf:0,s),c=Math.min(n?e[2]-uf:e[2]-1,c))):n||(r=Math.max(0,r),a=Math.min(1/0,a),i=Math.max(0,i),o=Math.min(1/0,o),l&&(s=Math.max(0,s),c=Math.min(1/0,c))),l?[[r,a],[i,o],[s,c]]:[[r,a],[i,o],null]}function su(t,e){return Gk(t,e,!1)}function Bk(t,e){return Gk(t,e,!0)}const uhe=(t,e)=>JSON.stringify(t)===JSON.stringify(e);function A_(t,e,n,r){const a=n[0]/2,i=n[1]/2,o=n[2]/2,s=new Array(8);s[0]=Da(t,[r[0]-a,r[1]-i,r[2]-o]);const c=[[1,-1,-1],[-1,1,-1],[1,1,-1],[-1,-1,1],[1,-1,1],[-1,1,1],[1,1,1]];for(let l=0;l<7;l++){const[u,f,v]=c[l];s[l+1]=Da(t,[r[0]+u*a,r[1]+f*i,r[2]+v*o])}return su(s,e)}function Wk(t,e){const{spacing:n}=t,r=t.voxelManager.getScalarDataLength(),a=[];let i=0;for(let o=0;o<e.length;o++){const{imageData:s,spacing:c,dimensions:l,voxelManager:u}=e[o].volume,f=e[o].volume.voxelManager.getScalarDataLength();f===r&&uhe(c,n)&&(i=o);const v=e[o].lower,g=e[o].upper;a.push({imageData:s,lower:v,upper:g,spacing:c,dimensions:l,volumeSize:f,voxelManager:u})}return{volumeInfoList:a,baseVolumeIdx:i}}const x_=new Map,fhe=t=>{const e=x_.get(t);e&&(e.isDirty=!0)},vhe=t=>{const e=x_.get(t);return e&&!e.isDirty?e.indices:null},ghe=(t,e)=>{x_.set(t,{indices:e,isDirty:!1})};function ki(t,e,n){const r={segmentationId:t,modifiedSlicesToUse:e,segmentIndex:n};fhe(t),Dt(ot,B.SEGMENTATION_DATA_MODIFIED,r)}function Go(t){const e={segmentationId:t};Dt(ot,B.SEGMENTATION_MODIFIED,e)}function R_(t){const e={segmentationId:t};Dt(ot,B.SEGMENTATION_REMOVED,e)}function N0(t,e,n){const r={segmentationId:e,type:n,viewportId:t};Dt(ot,B.SEGMENTATION_REPRESENTATION_MODIFIED,r)}function sy(t,e,n){const r={viewportId:t,segmentationId:e,type:n};Dt(ot,B.SEGMENTATION_REPRESENTATION_REMOVED,r)}const dhe=Object.freeze(Object.defineProperty({__proto__:null,triggerSegmentationDataModified:ki,triggerSegmentationModified:Go,triggerSegmentationRemoved:R_,triggerSegmentationRepresentationModified:N0,triggerSegmentationRepresentationRemoved:sy},Symbol.toStringTag,{value:"Module"})),mhe={renderOutline:!0,outlineWidthAutoGenerated:3,outlineWidth:1,outlineWidthInactive:1,outlineOpacity:1,outlineOpacityInactive:.85,outlineDash:void 0,outlineDashInactive:void 0,outlineDashAutoGenerated:"5,3",activeSegmentOutlineWidthDelta:0,renderFill:!0,fillAlpha:.5,fillAlphaInactive:.3,fillAlphaAutoGenerated:.3};function hhe(){return mhe}const phe={renderOutline:!0,renderOutlineInactive:!0,outlineWidth:3,outlineWidthInactive:2,activeSegmentOutlineWidthDelta:0,renderFill:!0,renderFillInactive:!0,fillAlpha:.5,fillAlphaInactive:.4,outlineOpacity:1,outlineOpacityInactive:.85};function She(){return phe}class Che{constructor(){this.config={global:{},segmentations:{},viewportsStyle:{}}}setStyle(e,n){const{viewportId:r,segmentationId:a,type:i,segmentIndex:o}=e,s=this.getStyle(e);let c;if(!r&&!a?c={...s,...n}:c=this.copyActiveToInactiveIfNotProvided({...s,...n},i),!i)throw new Error("Type is required to set a style");if(r){this.config.viewportsStyle[r]||(this.config.viewportsStyle[r]={renderInactiveSegmentations:!1,representations:{}});const l=this.config.viewportsStyle[r].representations;if(a){l[a]||(l[a]={}),l[a][i]||(l[a][i]={});const u=l[a][i];o!==void 0?(u.perSegment||(u.perSegment={}),u.perSegment[o]=c):u.allSegments=c}else{const u="__allSegmentations__";l[u]||(l[u]={}),l[u][i]||(l[u][i]={}),l[u][i].allSegments=c}}else if(a){this.config.segmentations[a]||(this.config.segmentations[a]={}),this.config.segmentations[a][i]||(this.config.segmentations[a][i]={});const l=this.config.segmentations[a][i];o!==void 0?(l.perSegment||(l.perSegment={}),l.perSegment[o]=c):l.allSegments=c}else this.config.global[i]=c}copyActiveToInactiveIfNotProvided(e,n){const r={...e};if(n===Ft.Labelmap){const a=r;a.renderOutlineInactive=a.renderOutline,a.outlineWidthInactive=a.outlineWidth,a.renderFillInactive=a.renderFill,a.fillAlphaInactive=a.fillAlpha,a.outlineOpacityInactive=a.outlineOpacity}else if(n===Ft.Contour){const a=r;a.outlineWidthInactive=a.outlineWidth,a.outlineOpacityInactive=a.outlineOpacity,a.outlineDashInactive=a.outlineDash,a.renderOutlineInactive=a.renderOutline,a.renderFillInactive=a.renderFill,a.fillAlphaInactive=a.fillAlpha}return r}getStyle(e){var s,c,l,u,f;const{viewportId:n,segmentationId:r,type:a,segmentIndex:i}=e;let o=this.getDefaultStyle(a);if(this.config.global[a]&&(o={...o,...this.config.global[a]}),(s=this.config.segmentations[r])!=null&&s[a]&&(o={...o,...this.config.segmentations[r][a].allSegments},i!==void 0&&((c=this.config.segmentations[r][a].perSegment)!=null&&c[i])&&(o={...o,...this.config.segmentations[r][a].perSegment[i]})),n&&this.config.viewportsStyle[n]){this.config.viewportsStyle[n].renderInactiveSegmentations;const v="__allSegmentations__";(l=this.config.viewportsStyle[n].representations[v])!=null&&l[a]&&(o={...o,...this.config.viewportsStyle[n].representations[v][a].allSegments}),r&&((u=this.config.viewportsStyle[n].representations[r])!=null&&u[a])&&(o={...o,...this.config.viewportsStyle[n].representations[r][a].allSegments},i!==void 0&&((f=this.config.viewportsStyle[n].representations[r][a].perSegment)!=null&&f[i])&&(o={...o,...this.config.viewportsStyle[n].representations[r][a].perSegment[i]}))}return o}getRenderInactiveSegmentations(e){var n;return(n=this.config.viewportsStyle[e])==null?void 0:n.renderInactiveSegmentations}setRenderInactiveSegmentations(e,n){this.config.viewportsStyle[e]||(this.config.viewportsStyle[e]={renderInactiveSegmentations:!1,representations:{}}),this.config.viewportsStyle[e].renderInactiveSegmentations=n}getDefaultStyle(e){switch(e){case Ft.Labelmap:return She();case Ft.Contour:return hhe();case Ft.Surface:return{};default:throw new Error(`Unknown representation type: ${e}`)}}clearSegmentationStyle(e){this.config.segmentations[e]&&delete this.config.segmentations[e]}clearAllSegmentationStyles(){this.config.segmentations={}}clearViewportStyle(e){this.config.viewportsStyle[e]&&delete this.config.viewportsStyle[e]}clearAllViewportStyles(){for(const e in this.config.viewportsStyle){const r=this.config.viewportsStyle[e].renderInactiveSegmentations;this.config.viewportsStyle[e]={renderInactiveSegmentations:r,representations:{}}}}resetToGlobalStyle(){this.clearAllSegmentationStyles(),this.clearAllViewportStyles()}hasCustomStyle(e){const{type:n}=e,r=this.getStyle(e),a=this.getDefaultStyle(n);return!LF(r,a)}}const ls=new Che;function Ihe(t){const e={segmentationId:t};Dt(ot,B.SEGMENTATION_ADDED,e)}const aP={colorLUT:[],segmentations:[],viewportSegRepresentations:{}};class Dhe{constructor(e){this._stackLabelmapImageIdReferenceMap=new Map,e||(e=Cr()),this.state=Object.freeze(_s(aP)),this.uid=e}getState(){return this.state}updateState(e){const n=_s(this.state);e(n),this.state=Object.freeze(n)}getColorLUT(e){return this.state.colorLUT[e]}getNextColorLUTIndex(){return this.state.colorLUT.length}resetState(){this.state=Object.freeze(_s(aP))}getSegmentation(e){return this.state.segmentations.find(n=>n.segmentationId===e)}updateSegmentation(e,n){this.updateState(r=>{const a=r.segmentations.find(i=>i.segmentationId===e);if(!a){console.warn(`Segmentation with id ${e} not found. Update aborted.`);return}Object.assign(a,n)}),Go(e)}addSegmentation(e){if(this.getSegmentation(e.segmentationId))throw new Error(`Segmentation with id ${e.segmentationId} already exists`);this.updateState(n=>{const r=_s(e);if(r.representationData.Labelmap&&"volumeId"in r.representationData.Labelmap&&!("imageIds"in r.representationData.Labelmap)){const a=this.getLabelmapImageIds(r.representationData);r.representationData.Labelmap.imageIds=a}n.segmentations.push(r)}),Ihe(e.segmentationId)}removeSegmentation(e){this.updateState(n=>{const r=n.segmentations.filter(a=>a.segmentationId!==e);n.segmentations.splice(0,n.segmentations.length,...r)}),R_(e)}addSegmentationRepresentation(e,n,r,a){if(!wr(e))return;if(this.getSegmentationRepresentations(e,{type:r,segmentationId:n}).length>0){console.debug("A segmentation representation of type",r,"already exists in viewport",e,"for segmentation",n);return}this.updateState(s=>{s.viewportSegRepresentations[e]||(s.viewportSegRepresentations[e]=[],ls.setRenderInactiveSegmentations(e,!0)),r!==Ft.Labelmap?this.addDefaultSegmentationRepresentation(s,e,n,r,a):this.addLabelmapRepresentation(s,e,n,a)}),N0(e,n,r)}addDefaultSegmentationRepresentation(e,n,r,a,i){const o=e.segmentations.find(c=>c.segmentationId===r);if(!o)return;const s={};Object.keys(o.segments).forEach(c=>{s[Number(c)]={visible:!0}}),e.viewportSegRepresentations[n].push({segmentationId:r,type:a,active:!0,visible:!0,colorLUTIndex:(i==null?void 0:i.colorLUTIndex)||0,segments:s,config:{...iP(a),...i}}),this._setActiveSegmentation(e,n,r)}addLabelmapRepresentation(e,n,r,a=iP(Ft.Labelmap)){if(!wr(n))return;const o=this.getSegmentation(r);if(!o)return;const{representationData:s}=o;if(!s.Labelmap)return this.addDefaultSegmentationRepresentation(e,n,r,Ft.Labelmap,a);this.processLabelmapRepresentationAddition(n,r),this.addDefaultSegmentationRepresentation(e,n,r,Ft.Labelmap,a)}async processLabelmapRepresentationAddition(e,n){const r=wr(e);if(!r)return;const a=this.getSegmentation(n);if(!a)return;const i=r.viewport instanceof zr,{representationData:o}=a,s="volumeId"in o.Labelmap;r.viewport,!i&&!s&&this.updateLabelmapSegmentationImageReferences(e,a.segmentationId)}_updateLabelmapSegmentationReferences(e,n,r,a){const i=n.getCurrentImageId();let o=!1;for(const s of r)n.isReferenceViewable({referencedImageId:s},{asOverlay:!0})&&(o=!0,this._stackLabelmapImageIdReferenceMap.get(e).set(i,s));return a&&a(n,e,r),o?this._stackLabelmapImageIdReferenceMap.get(e).get(i):void 0}updateLabelmapSegmentationImageReferences(e,n){const r=this.getSegmentation(n);if(!r)return;this._stackLabelmapImageIdReferenceMap.has(n)||this._stackLabelmapImageIdReferenceMap.set(n,new Map);const{representationData:a}=r;if(!a.Labelmap)return;const i=this.getLabelmapImageIds(a),s=wr(e).viewport;return this._updateLabelmapSegmentationReferences(n,s,i,null)}_updateAllLabelmapSegmentationImageReferences(e,n){const r=this.getSegmentation(n);if(!r)return;this._stackLabelmapImageIdReferenceMap.has(n)||this._stackLabelmapImageIdReferenceMap.set(n,new Map);const{representationData:a}=r;if(!a.Labelmap)return;const i=this.getLabelmapImageIds(a),s=wr(e).viewport;this._updateLabelmapSegmentationReferences(n,s,i,(c,l,u)=>{c.getImageIds().forEach((v,g)=>{for(const d of u)c.isReferenceViewable({referencedImageId:d,sliceIndex:g},{asOverlay:!0,withNavigation:!0})&&this._stackLabelmapImageIdReferenceMap.get(l).set(v,d)})})}getLabelmapImageIds(e){const n=e.Labelmap;let r;if(n.imageIds)r=n.imageIds;else if(!r&&n.volumeId){const a=n.volumeId;r=Ye.getVolume(a).imageIds}return r}getCurrentLabelmapImageIdForViewport(e,n){const r=wr(e);if(!r||!this._stackLabelmapImageIdReferenceMap.has(n))return;const i=r.viewport.getCurrentImageId();return this._stackLabelmapImageIdReferenceMap.get(n).get(i)}getStackSegmentationImageIdsForViewport(e,n){if(!this.getSegmentation(n))return[];this._updateAllLabelmapSegmentationImageReferences(e,n);const{viewport:a}=wr(e),i=a.getImageIds(),o=this._stackLabelmapImageIdReferenceMap.get(n);return i.map(s=>o.get(s))}removeSegmentationRepresentationsInternal(e,n){const r=[];return this.updateState(a=>{if(!a.viewportSegRepresentations[e])return;const i=a.viewportSegRepresentations[e];let o=!1;if(!n||Object.values(n).every(s=>s===void 0))r.push(...i),delete a.viewportSegRepresentations[e];else{const{segmentationId:s,type:c}=n;a.viewportSegRepresentations[e]=i.filter(l=>{const u=s&&c&&l.segmentationId===s&&l.type===c||s&&!c&&l.segmentationId===s||!s&&c&&l.type===c;return u&&(r.push(l),l.active&&(o=!0)),!u}),a.viewportSegRepresentations[e].length===0?delete a.viewportSegRepresentations[e]:o&&(a.viewportSegRepresentations[e][0].active=!0)}}),r}removeSegmentationRepresentations(e,n){const r=this.removeSegmentationRepresentationsInternal(e,n);r.forEach(i=>{sy(e,i.segmentationId,i.type)});const a=this.getSegmentationRepresentations(e);return a.length>0&&a[0].active&&N0(e,a[0].segmentationId,a[0].type),r}removeSegmentationRepresentation(e,n,r){const a=this.removeSegmentationRepresentationsInternal(e,n);return r||a.forEach(({segmentationId:i,type:o})=>{sy(e,i,o)}),a}_setActiveSegmentation(e,n,r){const a=e.viewportSegRepresentations[n];a&&a.forEach(i=>{i.active=i.segmentationId===r})}setActiveSegmentation(e,n){this.updateState(r=>{const a=r.viewportSegRepresentations[e];a&&a.forEach(i=>{i.active=i.segmentationId===n})}),N0(e,n)}getActiveSegmentation(e){if(!this.state.viewportSegRepresentations[e])return;const n=this.state.viewportSegRepresentations[e].find(r=>r.active);if(n)return this.getSegmentation(n.segmentationId)}getSegmentationRepresentations(e,n={}){const r=this.state.viewportSegRepresentations[e];return r?!n.type&&!n.segmentationId?r:r.filter(a=>{const i=n.type?a.type===n.type:!0,o=n.segmentationId?a.segmentationId===n.segmentationId:!0;return i&&o}):[]}getSegmentationRepresentation(e,n){return this.getSegmentationRepresentations(e,n)[0]}getSegmentationRepresentationVisibility(e,n){const r=this.getSegmentationRepresentation(e,n);return r==null?void 0:r.visible}setSegmentationRepresentationVisibility(e,n,r){this.updateState(a=>{const i=this.getSegmentationRepresentations(e,n);i&&i.forEach(o=>{o.visible=r,Object.entries(o.segments).forEach(([s,c])=>{c.visible=r})})}),N0(e,n.segmentationId,n.type)}addColorLUT(e,n){this.updateState(r=>{r.colorLUT[n]&&console.warn("Color LUT table already exists, overwriting"),r.colorLUT[n]=_s(e)})}removeColorLUT(e){this.updateState(n=>{delete n.colorLUT[e]})}_getStackIdForImageIds(e){return e.map(n=>n.slice(-Math.round(n.length*.15))).join("_")}getAllViewportSegmentationRepresentations(){return Object.entries(this.state.viewportSegRepresentations).map(([e,n])=>({viewportId:e,representations:n}))}getSegmentationRepresentationsBySegmentationId(e){const n=[];return Object.entries(this.state.viewportSegRepresentations).forEach(([r,a])=>{const i=a.filter(o=>o.segmentationId===e);i.length>0&&n.push({viewportId:r,representations:i})}),n}}async function Hk({imageIds:t,options:e}){const n=t,r=(e==null?void 0:e.volumeId)||Cr();return await EI(r,n),{volumeId:r}}async function Ehe({segmentationId:t,options:e}){const n=xr.getSegmentation(t),r=n.representationData.Labelmap,{volumeId:a}=await Hk({imageIds:r.imageIds,options:e});n.representationData.Labelmap.volumeId=a}function iP(t){const e=iu.newInstance(),n=sv.newInstance();return n.addPoint(0,0),t===Ft.Labelmap?{cfun:e,ofun:n}:{}}const xr=new Dhe("DEFAULT");function ko(t,e={}){return xr.getSegmentationRepresentations(t,e)}function kI(t,e){const n=xr;if(!e.segmentationId||!e.type)throw new Error("getSegmentationRepresentation: No segmentationId or type provided, you need to provide at least one of them");const r=n.getSegmentationRepresentations(t,e);return r==null?void 0:r[0]}function The(t){return xr.getSegmentationRepresentationsBySegmentationId(t)}function $k(t,e,n){const r=wr(t);if(!r)return;const{renderingEngine:a,viewport:i}=r;if(!a||!i)return;const s=i.getActors().filter(n);return s.length>0?s[0]:void 0}function yhe(t,e){const n=Wc(t,e);return n==null?void 0:n.uid}function Wc(t,e){return $k(t,e,n=>{var r;return(r=n.representationUID)==null?void 0:r.startsWith(`${e}-${Ft.Labelmap}`)})}function zk(t,e,n){return $k(t,e,r=>{var a;return(a=r.representationUID)==null?void 0:a.startsWith(qk(e,n))})}function Mhe(t,e,n){const a=zk(t,e,"");return a==null?void 0:a.uid}function qk(t,e){return`${t}-${Ft.Surface}-${e}`}function _he(t,e){const n=Ae(t),{viewport:r}=n,i=r.getActors().filter(o=>o.uid.startsWith(Mhe(r.id,e)));r.removeActors(i.map(o=>o.uid))}function Ohe(t,e,n){const r=Ae(t),{viewport:a}=r,i=zk(a.id,n,e.segmentIndex),o=i==null?void 0:i.actor;if(o){const h=o.getMapper(),C=h.getInputData(),p=e.points,S=e.polys,I=C.getPoints().getData(),D=C.getPolys().getData();if(p.length===I.length&&S.length===D.length)return;const E=ci.newInstance();E.getPoints().setData(p,3);const T=y1.newInstance({values:Float32Array.from(S)});E.setPolys(T),h.setInputData(E),h.modified(),a.getRenderer().resetCameraClippingRange();return}const s=e.points,c=e.polys,l=e.color,u=ci.newInstance();u.getPoints().setData(s,3);const f=y1.newInstance({values:Float32Array.from(c)});u.setPolys(f);const v=K0.newInstance({});let g;v.setInputData(u);const d=Z0.newInstance();d.setMapper(v),d.getProperty().setColor(l[0]/255,l[1]/255,l[2]/255),d.getProperty().setLineWidth(2);const m=qk(n,e.segmentIndex);a.addActor({uid:Cr(),actor:d,clippingFilter:g,representationUID:m}),a.resetCamera(),a.getRenderer().resetCameraClippingRange(),a.render()}function Un(t){return xr.getSegmentation(t)}function dh(t){return xr.getColorLUT(t)}function whe(t){if("volumeId"in t){if(t=t,!Ye.getVolume(t.volumeId))throw new Error(`volumeId of ${t.volumeId} not found in cache, you should load and cache volume before adding segmentation`)}else if("imageIds"in t){if(t=t,!t.imageIds)throw new Error("The segmentationInput.representationData.imageIds is undefined, please provide a valid representationData.imageIds for stack data")}else throw new Error("The segmentationInput.representationData is undefined, please provide a valid representationData")}function Phe(t){whe(t)}const Ahe=new Map([[Ft.Labelmap,new Set([Ft.Surface,Ft.Contour])],[Ft.Contour,new Set([Ft.Labelmap,Ft.Surface])],[Ft.Surface,new Set([Ft.Labelmap])]]);function GI(t,e){const{representationData:n}=Un(t);return xhe(n).some(a=>Rhe(a,e))}function xhe(t){const e=[];return Object.keys(t).forEach(n=>{const r=t[n];let a;switch(n){case Ft.Labelmap:a=Phe;break}if(a)try{a(r),e.push(n)}catch{console.warn(`Validation failed for labelmap of type ${n}`)}else e.push(n)}),e}async function Rhe(t,e){var n;return((n=Ahe.get(t))==null?void 0:n.has(e))||!1}function jk({segmentationId:t,type:e,data:n}){const r=Un(t);if(!r)throw new Error(`Segmentation ${t} not found`);switch(r.representationData[e]&&console.warn(`Representation data of type ${e} already exists for segmentation ${t}, overwriting it.`),e){case Ft.Labelmap:n&&(r.representationData[e]=n);break;case Ft.Contour:n&&(r.representationData[e]=n);break;case Ft.Surface:n&&(r.representationData[e]=n);break;default:throw new Error(`Invalid representation type ${e}`)}}function b_(t){const e=typeof t;return t!==null&&(e==="object"||e==="function")}function BI(t,e,n){let r,a,i,o,s,c,l=0,u=!1,f=!1,v=!0;const g=!e&&e!==0&&typeof window.requestAnimationFrame=="function";if(typeof t!="function")throw new TypeError("Expected a function");e=Number(e)||0,b_(n)&&(u=!!n.leading,f="maxWait"in n,i=f?Math.max(Number(n.maxWait)||0,e):i,v="trailing"in n?!!n.trailing:v);function d(_){const O=r,w=a;return r=a=void 0,l=_,o=t.apply(w,O),o}function m(_,O){return g?window.requestAnimationFrame(_):setTimeout(_,O)}function h(_){if(g)return window.cancelAnimationFrame(_);clearTimeout(_)}function C(_){return l=_,s=m(I,e),u?d(_):o}function p(_){const O=_-c,w=_-l,x=e-O;return f?Math.min(x,i-w):x}function S(_){const O=_-c,w=_-l;return c===void 0||O>=e||O<0||f&&w>=i}function I(){const _=Date.now();if(S(_))return D(_);s=m(I,p(_))}function D(_){return s=void 0,v&&r?d(_):(r=a=void 0,o)}function E(){s!==void 0&&h(s),l=0,r=c=a=s=void 0}function T(){return s===void 0?o:D(Date.now())}function y(){return s!==void 0}function M(..._){const O=Date.now(),w=S(O);if(r=_,a=this,c=O,w){if(s===void 0)return C(c);if(f)return s=m(I,e),d(c)}return s===void 0&&(s=m(I,e)),o}return M.cancel=E,M.flush=T,M.pending=y,M}let oP=!1;function Qk(){if(oP)return;oP=!0;const t=()=>new Worker(new URL("/nifti-viewer/assets/polySegConverters-BZkGnusu.js",import.meta.url),{name:"polySeg",type:"module"}),e=Zc(),n={maxWorkerInstances:1,autoTerminateOnIdle:{enabled:!0,idleTimeThreshold:2e3}};e.registerWorker("polySeg",t,n)}const X2=new Map;async function N_(t,e,n,r,a){Qk();const i=await n();jk({segmentationId:t,type:e,data:i}),a==null||a(),X2.has(t)||X2.set(t,[]);const o=X2.get(t);return o.includes(e)||o.push(e),bhe(r),Go(t),i}function bhe(t){const e=n=>{Nhe(n,t)};t._debouncedUpdateFunction=e,ot.removeEventListener(B.SEGMENTATION_DATA_MODIFIED,t._debouncedUpdateFunction),ot.addEventListener(B.SEGMENTATION_DATA_MODIFIED,t._debouncedUpdateFunction)}const Nhe=BI((t,e)=>{const n=t.detail.segmentationId,r=X2.get(n);!r||!r.length||(e(n),r.length&&Go(n))},300);function rc(t){const e=vhe(t);if(e)return e;const n=Un(t);if(!n)throw new Error(`No segmentation found for segmentationId ${t}`);let r;if(n.representationData.Labelmap)r=Lhe(n,t);else if(n.representationData.Contour)r=Vhe(n);else if(n.representationData.Surface)r=khe(n);else throw new Error(`Unsupported segmentation type: ${n.representationData}`);return ghe(t,r),r}function Lhe(t,e){const n=t.representationData[Ft.Labelmap],r=new Set;return n.imageIds?Fhe(r,n.imageIds):Uhe(r,e),Array.from(r).map(Number).sort((a,i)=>a-i)}function Uhe(t,e){Ye.getVolume(e).voxelManager.forEach(({value:r})=>{r!==0&&t.add(r)})}function Fhe(t,e){e.forEach(n=>{Ye.getImage(n).voxelManager.getScalarData().forEach(i=>{i!==0&&t.add(i)})})}function Vhe(t){const{annotationUIDsMap:e,geometryIds:n}=t.representationData.Contour||{};if(!n)throw new Error(`No geometryIds found for segmentationId ${t.segmentationId}`);const r=new Set([...e.keys()]);return n.forEach(a=>{const i=Ye.getGeometry(a);r.add(i.data.segmentIndex)}),Array.from(r).sort((a,i)=>a-i)}function khe(t){var n;const e=((n=t.representationData.Surface)==null?void 0:n.geometryIds)??[];return Array.from(e.keys()).map(Number).sort((r,a)=>r-a)}const Ghe=Zc(),kE=(t,e,n)=>{Dt(t,vt.WEB_WORKER_PROGRESS,{progress:e,type:Wv.POLYSEG_CONTOUR_TO_SURFACE,id:n})};async function Bhe(t,e){const{annotationUIDsMap:n}=t,r=[],a=[],i=n.get(e);for(const s of i){const c=Ta(s),{polyline:l}=c.data.contour;a.push(l.length),l.forEach(u=>r.push(...u))}kE(ot,0,e);const o=await Ghe.executeTask("polySeg","convertContourToSurface",{polylines:r,numPointsArray:a},{callbacks:[s=>{kE(ot,s,e)}]});return kE(ot,100,e),o}function Kk(){return xr.getNextColorLUTIndex()}const gC=[[0,0,0,0],[221,84,84,255],[77,228,121,255],[166,70,235,255],[189,180,116,255],[109,182,196,255],[204,101,157,255],[123,211,94,255],[93,87,218,255],[225,128,80,255],[73,232,172,255],[181,119,186,255],[176,193,112,255],[105,153,200,255],[208,97,120,255],[90,215,101,255],[135,83,222,255],[229,178,76,255],[122,183,181,255],[190,115,171,255],[149,197,108,255],[100,118,205,255],[212,108,93,255],[86,219,141,255],[183,79,226,255],[233,233,72,255],[118,167,187,255],[194,111,146,255],[116,201,104,255],[115,96,209,255],[216,147,89,255],[82,223,188,255],[230,75,224,255],[163,184,121,255],[114,143,191,255],[198,107,114,255],[99,206,122,255],[153,92,213,255],[220,192,85,255],[78,215,227,255],[234,71,173,255],[141,188,117,255],[110,113,195,255],[202,128,103,255],[95,210,157,255],[195,88,217,255],[206,224,81,255],[74,166,231,255],[185,120,139,255],[113,192,113,255],[133,106,199,255],[207,162,98,255],[91,214,198,255],[221,84,198,255],[159,228,77,255],[70,111,235,255],[189,119,116,255],[109,196,138,255],[165,101,204,255],[211,201,94,255],[87,191,218,255],[225,80,153,255],[106,232,73,255],[124,119,186,255],[193,142,112,255],[105,200,168,255],[203,97,208,255],[184,215,90,255],[83,147,222,255],[229,76,101,255],[122,183,130,255],[146,115,190,255],[197,171,108,255],[100,205,205,255],[212,93,177,255],[141,219,86,255],[79,97,226,255],[233,99,72,255],[118,187,150,255],[173,111,194,255],[197,201,104,255],[96,171,209,255],[216,89,137,255],[94,223,82,255],[107,75,230,255],[184,153,121,255],[114,191,175,255],[198,107,191,255],[166,206,99,255],[92,132,213,255],[220,85,91,255],[78,227,115,255],[159,71,234,255],[188,176,117,255],[110,185,195,255],[202,103,161,255],[129,210,95,255],[88,88,217,255],[224,123,81,255],[74,231,166,255],[177,120,185,255],[179,192,113,255],[106,156,199,255],[207,98,125,255],[91,214,96,255],[130,84,221,255],[228,171,77,255],[70,235,221,255],[189,116,174,255],[153,196,109,255],[101,123,204,255],[211,104,94,255],[87,218,136,255],[177,80,225,255],[232,225,73,255],[119,169,186,255],[193,112,149,255],[121,200,105,255],[111,97,208,255],[215,142,90,255],[83,222,181,255],[229,76,229,255],[165,183,122,255],[115,146,190,255],[197,108,119,255],[100,205,118,255],[148,93,212,255],[219,186,86,255],[79,220,226,255],[233,72,179,255],[144,187,118,255],[111,118,194,255],[201,124,104,255],[96,209,153,255],[189,89,216,255],[211,223,82,255],[75,172,230,255],[184,121,142,255],[117,191,114,255],[130,107,198,255],[206,157,99,255],[92,213,193,255],[220,85,203,255],[165,227,78,255],[71,118,234,255],[188,117,117,255],[110,195,135,255],[161,103,202,255],[210,195,95,255],[88,195,217,255],[224,81,158,255],[113,231,74,255],[123,120,185,255],[192,139,113,255],[106,199,164,255],[198,98,207,255],[188,214,91,255],[84,153,221,255],[228,77,108,255],[70,235,84,255],[143,116,189,255],[196,167,109,255],[101,204,199,255],[211,94,182,255],[147,218,87,255],[80,104,225,255],[232,93,73,255],[119,186,147,255],[170,112,193,255],[200,200,105,255],[97,175,208,255],[215,90,142,255],[100,222,83,255],[101,76,229,255],[183,150,122,255],[115,190,171,255],[197,108,194,255],[170,205,100,255],[93,138,212,255],[219,86,97,255],[79,226,110,255],[153,72,233,255],[187,173,118,255],[111,187,194,255],[201,104,165,255],[134,209,96,255],[89,95,216,255],[223,117,82,255],[75,230,159,255],[174,121,184,255],[182,191,114,255],[107,160,198,255],[206,99,130,255],[92,213,92,255],[124,85,220,255],[227,165,78,255],[71,234,214,255],[188,117,176,255],[156,195,110,255],[103,128,202,255],[210,100,95,255],[88,217,131,255],[170,81,224,255],[231,218,74,255],[120,172,185,255],[192,113,153,255],[125,199,106,255],[107,98,207,255],[214,137,91,255],[84,221,175,255],[222,77,228,255],[194,235,70,255],[116,149,189,255],[196,109,123,255],[101,204,114,255],[143,94,211,255],[218,180,87,255],[80,225,225,255],[232,73,186,255],[147,186,119,255],[112,122,193,255],[200,121,105,255],[97,208,148,255],[184,90,215,255],[216,222,83,255],[76,178,229,255],[183,122,145,255],[121,190,115,255],[126,108,197,255],[205,153,100,255],[93,212,187,255],[219,86,208,255],[171,226,79,255],[72,126,233,255],[187,118,121,255],[111,194,132,255],[157,104,201,255],[209,190,96,255],[89,200,216,255],[223,82,164,255],[120,230,75,255],[121,121,184,255],[191,136,114,255],[107,198,160,255],[192,99,206,255],[193,213,92,255],[85,158,220,255],[227,78,115,255],[71,234,78,255],[141,117,188,255],[195,163,110,255],[103,202,194,255],[210,95,186,255],[153,217,88,255],[81,111,224,255]];function Id(t,e){const n=xr,r=e??Kk();let a=[...t];if(gn(a[0],[0,0,0,0])||(console.warn("addColorLUT: [0, 0, 0, 0] color is not provided for the background color (segmentIndex =0), automatically adding it"),a=[[0,0,0,0],...a]),a=a.map(i=>i.length===3?[i[0],i[1],i[2],255]:i),a.length<255){const i=gC.slice(a.length);a=[...a,...i]}return n.addColorLUT(a,r),r}function Whe(t,e){if(!t)throw new Error("addColorLUT: colorLUT is required");return Id(t,e)}function Hhe(t,e,n){if(!dh(n))throw new Error(`setColorLUT: could not find colorLUT with index ${n}`);const r=ko(t,{segmentationId:e});if(!r)throw new Error(`viewport specific state for viewport ${t} does not exist`);r.forEach(a=>{a.colorLUTIndex=n}),N0(t,e)}function Jc(t,e,n){const r=ko(t,{segmentationId:e});if(!r||r.length===0)return null;const a=r[0],{colorLUTIndex:i}=a,o=dh(i);let s=o[n];if(!s){if(typeof n!="number")throw new Error(`Can't create colour for LUT index ${n}`);s=o[n]=[0,0,0,0]}return s}function Xk(t,e,n,r){const a=Jc(t,e,n);for(let i=0;i<r.length;i++)a[i]=r[i];N0(t,e)}const $he=Object.freeze(Object.defineProperty({__proto__:null,addColorLUT:Whe,getSegmentIndexColor:Jc,setColorLUT:Hhe,setSegmentIndexColor:Xk},Symbol.toStringTag,{value:"Module"}));async function Yk(t,e,n={}){const r=Un(t),a=new Map,i=Object.keys(e).map(async o=>{const s=e[o],c=s.segmentIndex,l=Jc(n.viewport.id,r.segmentationId,c).slice(0,3);if(!l)throw new Error("No color found for segment index, unable to create surface");const u={id:`segmentation_${r.segmentationId}_surface_${c}`,color:l,frameOfReferenceUID:"test-frameOfReferenceUID",points:s.data.points,polys:s.data.polys,segmentIndex:c},f=u.id;return a.set(c,f),uV(f,{type:D1.SURFACE,geometryData:u})});return await Promise.all(i),{geometryIds:a}}async function Zk(t){return Hk(t)}const zhe=Zc(),GE=(t,e,n)=>{Dt(t,vt.WEB_WORKER_PROGRESS,{progress:e,type:Wv.POLYSEG_LABELMAP_TO_SURFACE,id:n})};async function qhe(t,e){let n;if(t.volumeId)n=t.volumeId;else{const{imageIds:u}=t;({volumeId:n}=await Zk({imageIds:u}))}const r=Ye.getVolume(n),a=r.voxelManager.getCompleteScalarDataArray(),{dimensions:i,spacing:o,origin:s,direction:c}=r;GE(ot,0,e);const l=await zhe.executeTask("polySeg","convertLabelmapToSurface",{scalarData:a,dimensions:i,spacing:o,origin:s,direction:c,segmentIndex:e},{callbacks:[u=>{GE(ot,u,e)}]});return GE(ot,100,e),l}async function jhe(t,e={}){var s;const n=(s=e.segmentIndices)!=null&&s.length?e.segmentIndices:rc(t);let r;const a=Un(t),i=a.representationData;try{i.Contour?r=await Qhe(t,{segmentIndices:n,...e}):i.Labelmap&&(r=await L_(a.segmentationId,{segmentIndices:n,...e}))}catch(c){throw console.error(c),c}if(!r)throw new Error("Not enough data to convert to surface, currently only support converting volume labelmap to surface if available");return await Yk(t,r,e)}async function L_(t,e={}){var l;const n=Un(t);if(!((l=n==null?void 0:n.representationData)!=null&&l.Labelmap)){console.warn("Only support surface update from labelmaps");return}const r=n.representationData.Labelmap,a=e.segmentIndices||rc(t),i=a.map(u=>qhe(r,u)),o=await Promise.allSettled(i),s=o.filter(u=>u.status==="rejected");if(s.length>0)throw console.error(s),new Error("Failed to convert labelmap to surface");return o.map((u,f)=>{if(u.status==="fulfilled")return{segmentIndex:a[f],data:u.value}}).filter(Boolean)}async function Qhe(t,e={}){const r=Un(t).representationData.Contour,i=(e.segmentIndices||rc(t)).map(async s=>{const c=await Bhe(r,s);return{segmentIndex:s,data:c}});return await Promise.all(i)}function $v(t){const r=xr.getState().viewportSegRepresentations;return Object.entries(r).filter(([,i])=>i.some(o=>o.segmentationId===t)).map(([i])=>i)}async function Khe(t){const e=await L_(t);if(!e)return;const n=Un(t),r=rc(t);if(!r.length){n.representationData.Surface.geometryIds.forEach(o=>{const c=Ye.getGeometry(o).data;c.points=[],c.polys=[]}),Go(t);return}const a=e.map(({data:i,segmentIndex:o})=>{const s=`segmentation_${t}_surface_${o}`,c=Ye.getGeometry(s);if(c)if(r.includes(o)){const l=c.data;l.points=i.points,l.polys=i.polys}else{const l=c.data;l.points=[],l.polys=[]}else return $v(t).map(u=>[kI(u,{segmentationId:t,type:Ft.Surface})].map(v=>(n.representationData.Surface.geometryIds.set(o,s),Yk(t,[{segmentIndex:o,data:i}],{segmentationId:v.segmentationId}))))});await Promise.all(a),Go(t)}function Jk(t,e={}){return N_(t,Ft.Surface,()=>jhe(t,e),()=>Khe(t))}function Xhe(t,e,n=!1){const r=wr(t);if(!r)return;const{viewport:a}=r;_he(a.element,e),n&&a.render()}async function Yhe(t,e){const{segmentationId:n}=e,r=Un(n);if(!r)return;let a=r.representationData[Ft.Surface];if(!a&&GI(n,Ft.Surface)&&(a=await Jk(n,{viewport:t}),!a))throw new Error(`No Surface data found for segmentationId ${n}.`);const{geometryIds:i}=a;i!=null&&i.size||console.warn(`No Surfaces found for segmentationId ${n}. Skipping render.`);const{colorLUTIndex:o}=e,s=dh(o);i.forEach(c=>{const l=Ye.getGeometry(c);if(!(l!=null&&l.data)){console.warn(`No Surfaces found for geometryId ${c}. Skipping render.`);return}const u=l.data.segmentIndex,f=l.data,v=s[u];f.color=v.slice(0,3),Ohe(t.element,f,n)}),t.render()}const eG={render:Yhe,removeRepresentation:Xhe};function Zhe(t,e,n,r){const a=t.getViewReference(),{viewPlaneNormal:i,FrameOfReferenceUID:o}=a,s={annotationUID:(r==null?void 0:r.annotationUID)||Cr(),data:{handles:{points:n}},highlighted:!1,autoGenerated:!1,invalidated:!1,isLocked:!1,isVisible:!0,metadata:{toolName:e,viewPlaneNormal:i,FrameOfReferenceUID:o,referencedImageId:Jhe(t,n[0],i),...r}};return qn(s,t.element),s}function Jhe(t,e,n){let r;if(t instanceof Xr)r=WI(t,e,n);else if(t instanceof zr){const a=epe(t),i=nc(a),o=Ye.getVolume(i);r=jc(o,e,n)}else throw new Error("getReferencedImageId: viewport must be a StackViewport or BaseVolumeViewport");return r}function epe(t){var n;const e=(n=t.getViewReferenceId)==null?void 0:n.call(t);if(e)return e;if(t instanceof zr)return`volumeId:${tpe(t)}`;throw new Error("getTargetId: viewport must have a getTargetId method")}function tpe(t){var n;const e=t.getActors();if(e)return(n=e.find(r=>r.actor.getClassName()==="vtkVolume"))==null?void 0:n.uid}function WI(t,e,n){const r=t.getImageIds();if(!r||!r.length)return;const a=r.map(i=>{const{imagePositionPatient:o}=Lt("imagePlaneModule",i),s=npe(e,o,n);return{imageId:i,distance:s}});return a.sort((i,o)=>i.distance-o.distance),a[0].imageId}function npe(t,e,n){const r=Xe();Dr(r,t,e);const a=Gt(r,n);return Math.abs(a)}function tG(t,e){const{segmentation:n}=t.data,{segmentation:r}=e.data;return n.segmentationId===r.segmentationId&&n.segmentIndex===r.segmentIndex}function mh(t){var e;return!!((e=t.data)!=null&&e.segmentation)}function O1(t){if(t.parentAnnotationUID)return;if(!t.data.segmentation)throw new Error("addContourSegmentationAnnotation: annotation does not have a segmentation data");const{segmentationId:e,segmentIndex:n}=t.data.segmentation,r=Un(e);r.representationData.Contour||(r.representationData.Contour={annotationUIDsMap:new Map});let{annotationUIDsMap:a}=r.representationData.Contour;a||(a=new Map);let i=a==null?void 0:a.get(n);i||(i=new Set,a.set(n,i)),a.set(n,i.add(t.annotationUID))}function HI(t){if(!t.data.segmentation)throw new Error("removeContourSegmentationAnnotation: annotation does not have a segmentation data");const{segmentationId:e,segmentIndex:n}=t.data.segmentation,r=Un(e),{annotationUIDsMap:a}=(r==null?void 0:r.representationData.Contour)||{},i=a==null?void 0:a.get(n);i&&(i.delete(t.annotationUID),i.size||a.delete(n))}const rpe=Object.freeze(Object.defineProperty({__proto__:null,addContourSegmentationAnnotation:O1,areSameSegment:tG,isContourSegmentationAnnotation:mh,removeContourSegmentationAnnotation:HI},Symbol.toStringTag,{value:"Module"}));function ape(t){if(!t)throw new Error(`No contours found for geometryId ${t.id}`);const e=t.id;if(t.type!==D1.CONTOUR)throw new Error(`Geometry type ${t.type} not supported for rendering.`);if(!t.data){console.warn(`No contours found for geometryId ${e}. Skipping render.`);return}}function ipe(t,e,n,r){n.size?t.render():ope(t,e,r)}function ope(t,e,n){const{segmentationId:r}=n,a=new Map;e.forEach(i=>{const o=Ye.getGeometry(i);if(!o){console.warn(`No geometry found for geometryId ${i}. Skipping render.`);return}const s=o.data.segmentIndex;ape(o);const c=ls.getStyle({viewportId:t.id,segmentationId:r,type:Ft.Contour,segmentIndex:s}),l=o.data,u=t.getCamera().viewPlaneNormal;l.contours.forEach(f=>{const{points:v,color:g,id:d}=f,m=WI(t,v[0],u),h={annotationUID:Cr(),data:{contour:{closed:!0,polyline:v},segmentation:{segmentationId:r,segmentIndex:s,color:g,id:d},handles:{}},handles:{},highlighted:!1,autoGenerated:!1,invalidated:!1,isLocked:!0,isVisible:!0,metadata:{referencedImageId:m,toolName:"PlanarFreehandContourSegmentationTool",FrameOfReferenceUID:t.getFrameOfReferenceUID(),viewPlaneNormal:t.getCamera().viewPlaneNormal}},C=t.element;qn(h,C),O1(h)}),c&&a.set(s,c)}),t.resetCamera(),t.render()}function U_(t,e=5){return parseFloat(t[0]).toFixed(e)+","+parseFloat(t[1]).toFixed(e)+","+parseFloat(t[2]).toFixed(e)+","}const nG=Zc(),cy=new Map,ly=new Map,Y2=(t,e)=>{Dt(t,vt.WEB_WORKER_PROGRESS,{progress:e,type:Wv.SURFACE_CLIPPING})};async function rG(t,e){var o;Qk();const n=(o=e.getSlicesClippingPlanes)==null?void 0:o.call(e);if(!n)return;const r=e.getSliceIndex();n.sort((s,c)=>{const l=Math.abs(s.sliceIndex-r),u=Math.abs(c.sliceIndex-r);return l-u}),Y2(ot,0),await spe(t);const a=new Map;t.forEach(s=>{a.set(s.id,ly.get(s.id))});const i=e.getCamera();return await nG.executeTask("polySeg","cutSurfacesIntoPlanes",{surfacesInfo:t,planesInfo:n,surfacesAABB:a},{callbacks:[({progress:s})=>{Y2(ot,s)},({sliceIndex:s,polyDataResults:c})=>{c.forEach((l,u)=>{const f=Number(u),v=cpe(e,i.viewPlaneNormal,s);lpe(f,v,l)})}]}).catch(s=>{console.error(s)}),Y2(ot,100),cy}async function spe(t){const e=t.filter(r=>!ly.has(r.id));if(!e.length)return;(await nG.executeTask("polySeg","getSurfacesAABBs",{surfacesInfo:e},{callbacks:[({progress:r})=>{Y2(ot,r)}]})).forEach((r,a)=>{ly.set(a,r)})}function cpe(t,e,n){return`${t.id}-${U_(e)}-${n}`}function lpe(t,e,n){const{points:r,lines:a,numberOfCells:i}=n;let o=cy.get(t);o||(o=new Map,cy.set(t,o)),o.set(e,{points:r,lines:a,numberOfCells:i})}function aG(t){const e=new Map;for(const[n,r]of t){const a=Number(n);for(const[i,o]of r)o&&(e.has(a)||e.set(a,[]),e.get(a).push(o))}return e}const{CalibrationTypes:Ig}=vs,Vu="px",iG=[1],upe=["3,3"],fpe=["4,3"],uy={0:"px",1:"percent",2:"dB",3:"cm",4:"seconds",5:"hertz",6:"dB/seconds",7:"cm/sec",8:"cm",9:"cm/s",12:"degrees"},vpe=.001,Dg="",us=(t,e)=>{const{calibration:n,hasPixelSpacing:r}=t;let a=r?"mm":Vu,i=a+Dg,o=1,s="";if(!n||!n.type&&!n.sequenceOfUltrasoundRegions)return{unit:a,areaUnit:i,scale:o};if(n.type===Ig.UNCALIBRATED)return{unit:Vu,areaUnit:Vu+Dg,scale:o};if(n.sequenceOfUltrasoundRegions){let l,u;if(Array.isArray(e)&&e.length===2)[l,u]=e;else if(typeof e=="function"){const h=e();l=h[0],u=h[1]}let f=n.sequenceOfUltrasoundRegions.filter(h=>l[0]>=h.regionLocationMinX0&&l[0]<=h.regionLocationMaxX1&&l[1]>=h.regionLocationMinY0&&l[1]<=h.regionLocationMaxY1&&u[0]>=h.regionLocationMinX0&&u[0]<=h.regionLocationMaxX1&&u[1]>=h.regionLocationMinY0&&u[1]<=h.regionLocationMaxY1);if(!(f!=null&&f.length))return{unit:a,areaUnit:i,scale:o};if(f=f.filter(h=>iG.includes(h.regionDataType)&&upe.includes(`${h.physicalUnitsXDirection},${h.physicalUnitsYDirection}`)),!f.length)return{unit:Vu,areaUnit:Vu+Dg,scale:o};const v=f[0],g=Math.abs(v.physicalDeltaX),d=Math.abs(v.physicalDeltaY);if(gn(g,d,vpe))o=1/g,s="US Region",a=uy[v.physicalUnitsXDirection]||"unknown",i=a+Dg;else return{unit:Vu,areaUnit:Vu+Dg,scale:o}}else n.scale&&(o=n.scale);return[Ig.ERMF,Ig.USER,Ig.ERROR,Ig.PROJECTION].includes(n==null?void 0:n.type)&&(s=n.type),{unit:a+(s?` ${s}`:""),areaUnit:i+(s?` ${s}`:""),scale:o}},dC=(t,e)=>{const[n]=e,{calibration:r}=t;let a=["raw"],i=[null],o="";if(!r||!r.type&&!r.sequenceOfUltrasoundRegions)return{units:a,values:i};if(r.sequenceOfUltrasoundRegions){const s=r.sequenceOfUltrasoundRegions.filter(m=>iG.includes(m.regionDataType)&&fpe.includes(`${m.physicalUnitsXDirection},${m.physicalUnitsYDirection}`));if(!(s!=null&&s.length))return{units:a,values:i};const c=s.find(m=>n[0]>=m.regionLocationMinX0&&n[0]<=m.regionLocationMaxX1&&n[1]>=m.regionLocationMinY0&&n[1]<=m.regionLocationMaxY1);if(!c)return{units:a,values:i};const{referencePixelX0:l=0,referencePixelY0:u=0}=c,{physicalDeltaX:f,physicalDeltaY:v}=c,g=(n[1]-c.regionLocationMinY0-u)*v,d=(n[0]-c.regionLocationMinX0-l)*f;o="US Region",i=[d,g],a=[uy[c.physicalUnitsXDirection],uy[c.physicalUnitsYDirection]]}return{units:a,values:i,calibrationType:o}},F_=t=>{var e;return((e=t.calibration)==null?void 0:e.aspect)||1};function oG(t,e){return t.minX<=e.maxX&&t.maxX>=e.minX&&t.minY<=e.maxY&&t.maxY>=e.minY}function mC(t,e){const n=t.maxX-t.minX,r=t.maxY-t.minY,a=[n,r],i=[t.minX+n/2,t.minY+r/2],o=[Math.abs(e[0]-i[0]),Math.abs(e[1]-i[1])],s=o[0]-a[0]*.5,c=o[1]-a[1]*.5;if(s>0&&c>0)return s*s+c*c;const l=Math.max(s,0)+Math.max(c,0);return l*l}function gpe(t,e){return Math.sqrt(mC(t,e))}const dpe=Object.freeze(Object.defineProperty({__proto__:null,distanceToPoint:gpe,distanceToPointSquared:mC,intersectAABB:oG},Symbol.toStringTag,{value:"Module"}));class sG{}const{PointsManager:sP}=Zn,hn=class hn extends sG{static statsInit(e){e.storePointData||(hn.pointsInShape=null)}};hn.max=[-1/0],hn.min=[1/0],hn.sum=[0],hn.count=0,hn.runMean=[0],hn.m2=[0],hn.pointsInShape=sP.create3(1024),hn.statsCallback=({value:e,pointLPS:n=null})=>{var a;Array.isArray(e)&&e.length>1&&hn.max.length===1&&(hn.max.push(hn.max[0],hn.max[0]),hn.min.push(hn.min[0],hn.min[0]),hn.sum.push(hn.sum[0],hn.sum[0]),hn.runMean.push(0,0),hn.m2.push(hn.m2[0],hn.m2[0])),hn.pointsInShape&&n&&((a=hn.pointsInShape)==null||a.push(n));const r=Array.isArray(e)?e:[e];hn.count+=1,hn.max.map((i,o)=>{const s=r[o],c=s-hn.runMean[o];hn.sum[o]+=s,hn.runMean[o]+=c/hn.count;const l=s-hn.runMean[o];hn.m2[o]+=c*l,hn.min[o]=Math.min(hn.min[o],s),hn.max[o]=Math.max(i,s)})},hn.getStatistics=e=>{const n=hn.sum.map(o=>o/hn.count),r=hn.m2.map(o=>Math.sqrt(o/hn.count)),a=(e==null?void 0:e.unit)||null,i={max:{name:"max",label:"Max Pixel",value:kp(hn.max),unit:a},min:{name:"min",label:"Min Pixel",value:kp(hn.min),unit:a},mean:{name:"mean",label:"Mean Pixel",value:kp(n),unit:a},stdDev:{name:"stdDev",label:"Standard Deviation",value:kp(r),unit:a},count:{name:"count",label:"Pixel Count",value:hn.count,unit:null},pointsInShape:hn.pointsInShape,array:[]};return i.array.push(i.max,i.mean,i.stdDev,i.stdDev,i.count),hn.max=[-1/0],hn.min=[1/0],hn.sum=[0],hn.m2=[0],hn.runMean=[0],hn.count=0,hn.pointsInShape=sP.create3(1024),i};let As=hn;function kp(t){return t.length===1?t[0]:t}const mpe=Object.freeze(Object.defineProperty({__proto__:null,BasicStatsCalculator:As,Calculator:sG},Symbol.toStringTag,{value:"Module"}));function Qc(t,e){if(t.length!==e.length)throw Error("Both points should have the same dimensionality");const[n,r,a=0]=t,[i,o,s=0]=e,c=i-n,l=o-r,u=s-a;return c*c+l*l+u*u}function bs(t,e){return Math.sqrt(Qc(t,e))}function fy(t,e){const[n,r]=t,[a,i]=e,o=2*a-n,s=2*i-r;return[o,s]}const hpe=Object.freeze(Object.defineProperty({__proto__:null,distanceToPoint:bs,distanceToPointSquared:Qc,mirror:fy},Symbol.toStringTag,{value:"Module"}));function $l(t){const[e,n]=t;return bs(e,n)}function Yf(t){const[e,n]=t,r=bs(e,n),a=[e[0]-r,e[1]-r],i=[e[0]+r,e[1]+r];return[a,i]}const ppe=Object.freeze(Object.defineProperty({__proto__:null,getCanvasCircleCorners:Yf,getCanvasCircleRadius:$l},Symbol.toStringTag,{value:"Module"}));function $I(t,e,n={}){return n.precalculated||V_(t,n),n.precalculated(e)}const V_=(t,e={})=>{const{xRadius:n,yRadius:r,zRadius:a}=t;(e.invXRadiusSq===void 0||e.invYRadiusSq===void 0||e.invZRadiusSq===void 0)&&(e.invXRadiusSq=n!==0?1/n**2:0,e.invYRadiusSq=r!==0?1/r**2:0,e.invZRadiusSq=a!==0?1/a**2:0);const{invXRadiusSq:i,invYRadiusSq:o,invZRadiusSq:s}=e,{center:c}=t,[l,u,f]=c;return e.precalculated=v=>{const g=v[0]-l;let d=g*g*i;if(d>1)return!1;const m=v[1]-u;if(d+=m*m*o,d>1)return!1;const h=v[2]-f;return d+=h*h*s,d<=1},e};function Dd(t){const[e,n,r,a]=t,i=[r[0],n[1]],o=[a[0],e[1]];return[i,o]}const Spe=Object.freeze(Object.defineProperty({__proto__:null,getCanvasEllipseCorners:Dd,pointInEllipse:$I,precalculatePointInEllipse:V_},Symbol.toStringTag,{value:"Module"}));function hC(t,e,n){let r;const a=Qc(t,e);if(t[0]===e[0]&&t[1]===e[1]&&(r=t),!r){const i=((n[0]-t[0])*(e[0]-t[0])+(n[1]-t[1])*(e[1]-t[1]))/a;i<0?r=t:i>1?r=e:r=[t[0]+i*(e[0]-t[0]),t[1]+i*(e[1]-t[1])]}return{point:[...r],distanceSquared:Qc(n,r)}}function hh(t,e,n){return hC(t,e,n).distanceSquared}function Li(t,e,n){if(t.length!==2||e.length!==2||n.length!==2)throw Error("lineStart, lineEnd, and point should have 2 elements of [x, y]");return Math.sqrt(hh(t,e,n))}function Gp(t){return typeof t=="number"?t?t<0?-1:1:t===t?0:NaN:NaN}function vy(t,e,n,r){const[a,i]=t,[o,s]=e,[c,l]=n,[u,f]=r,v=s-i,g=a-o,d=o*i-a*s,m=v*c+g*l+d,h=v*u+g*f+d;if(m!==0&&h!==0&&Gp(m)===Gp(h))return;const C=f-l,p=c-u,S=u*l-c*f,I=C*a+p*i+S,D=C*o+p*s+S;if(I!==0&&D!==0&&Gp(I)===Gp(D))return;const E=v*p-C*g;let T;T=g*S-p*d;const y=T/E;T=C*d-v*S;const M=T/E;return[y,M]}const Eg=.01;function Z2(t,e,n){const r=t[0]<=e[0]?t[0]:e[0],a=t[0]>=e[0]?t[0]:e[0],i=t[1]<=e[1]?t[1]:e[1],o=t[1]>=e[1]?t[1]:e[1];if(!(n[0]>=r-Eg&&n[0]<=a+Eg&&n[1]>=i-Eg&&n[1]<=o+Eg))return!1;const c=(e[1]-t[1])*(n[0]-e[0])-(e[0]-t[0])*(n[1]-e[1]);return(c>=0?c:-c)<=Eg}const Cpe=Object.freeze(Object.defineProperty({__proto__:null,distanceToPoint:Li,distanceToPointSquared:hh,distanceToPointSquaredInfo:hC,intersectLine:vy,isPointOnLineSegment:Z2},Symbol.toStringTag,{value:"Module"}));function cG(t){if(t.length<3)return!1;const e=t.length,n=t[0],r=t[e-1],a=Qc(n,r);return ru(0,a)}function w1(t,e,n={closed:void 0}){if(t.length<3)return!1;const r=t.length;let a=0;const{closed:i,holes:o}=n;if(o!=null&&o.length){for(const l of o)if(w1(l,e))return!1}const s=!(i===void 0?cG(t):i),c=t.length-(s?1:2);for(let l=0;l<=c;l++){const u=t[l],f=l===r-1?0:l+1,v=t[f],g=u[0]>=v[0]?u[0]:v[0],d=u[1]>=v[1]?u[1]:v[1],m=u[1]<=v[1]?u[1]:v[1];if(e[0]<=g&&e[1]>=m&&e[1]<d){let p=u[0]===v[0];if(!p){const S=(e[1]-u[1])*(v[0]-u[0])/(v[1]-u[1])+u[0];p=e[0]<=S}a+=p?1:0}}return!!(a%2)}function k_(t,e){for(let n=0,r=e.length;n<r;n++)if(!w1(t,e[n]))return!1;return!0}function pv(t,e){let n=t;const r=(e==null?void 0:e.numDimensions)||2,a=r===3;if(!Array.isArray(t[0])){const f=t,v=f.length/r;n=new Array(f.length/r);for(let g=0,d=v;g<d;g++)n[g]=[f[g*r],f[g*r+1]],a&&n[g].push(f[g*r+2])}let i=1/0,o=1/0,s=-1/0,c=-1/0,l=1/0,u=-1/0;n=n;for(let f=0,v=n.length;f<v;f++){const[g,d,m]=n[f];i=i<g?i:g,o=o<d?o:d,s=s>g?s:g,c=c>d?c:d,a&&(l=l<m?l:m,u=u>m?u:m)}return a?{minX:i,maxX:s,minY:o,maxY:c,minZ:l,maxZ:u}:{minX:i,maxX:s,minY:o,maxY:c}}function ph(t){const e=t.length;let n=0,r=e-1;for(let a=0;a<e;a++)n+=(t[r][0]+t[a][0])*(t[r][1]-t[a][1]),r=a;return Math.abs(n/2)}function G_(t){if(t.length<3)return 0;const e=t[0];let n=0;for(let r=0,a=t.length;r<a;r++){const i=t[r],o=r===a-1?0:r+1,s=t[o],c=i[0]-e[0],l=i[1]-e[1],u=s[0]-e[0],f=s[1]-e[1];n+=c*f-l*u}return n*=.5,n}function J2(t){return G_(t)>=0?1:-1}function Ipe(t){const e=Xe(),n=t[0];for(let r=0,a=t.length;r<a;r++){const i=t[r],o=r===a-1?0:r+1,s=t[o],c=i[0]-n[0],l=i[1]-n[1],u=i[2]-n[2],f=s[0]-n[0],v=s[1]-n[1],g=s[2]-n[2];e[0]+=l*g-u*v,e[1]+=u*f-c*g,e[2]+=c*v-l*f}return Ia(e,e,.5),e}function Dpe(t){const e=Ipe(t);return Ar(e,e)}function mm(t){const e=G_(t);return[0,0,e/Math.abs(e)]}function B_(t,e,n,r){let a=!1;const i=t[0]<e[0]?t[0]:e[0],o=t[1]<e[1]?t[1]:e[1],s=t[0]>e[0]?t[0]:e[0],c=t[1]>e[1]?t[1]:e[1],l=n[0]<r[0]?n[0]:r[0],u=n[1]<r[1]?n[1]:r[1],f=n[0]>r[0]?n[0]:r[0],v=n[1]>r[1]?n[1]:r[1];if(i>f||s<l||o>v||c<u)return!1;const g=[Bp(t,e,n),Bp(t,e,r),Bp(n,r,t),Bp(n,r,e)];return g[0]!==g[1]&&g[2]!==g[3]?!0:((g[0]===0&&Wp(t,n,e)||g[1]===0&&Wp(t,r,e)||g[2]===0&&Wp(n,t,r)||g[3]===0&&Wp(n,e,r))&&(a=!0),a)}function Bp(t,e,n){const r=(e[1]-t[1])*(n[0]-e[0])-(e[0]-t[0])*(n[1]-e[1]);return r===0?0:r>0?1:2}function Wp(t,e,n){return e[0]<=Math.max(t[0],n[0])&&e[0]>=Math.min(t[0],n[0])&&e[1]<=Math.max(t[1],n[1])&&e[1]>=Math.min(t[1],n[1])}function W_(t,e,n,r=!0){const a=[],i=t.length,o=i-(r?1:2);for(let s=0;s<=o;s++){const c=t[s],l=s===i-1?0:s+1,u=t[l];B_(e,n,c,u)&&a.push([s,l])}return a}const Epe=.01;function lG(t,e,n,r){const a=[e[0]-t[0],e[1]-t[1]],i=[r[0]-n[0],r[1]-n[1]],o=i[1]*a[0]-i[0]*a[1];if((o>=0?o:-o)<Epe){const d=[t[0]<e[0]?t[0]:e[0],t[0]>e[0]?t[0]:e[0],t[1]<e[1]?t[1]:e[1],t[1]>e[1]?t[1]:e[1]],m=[n[0]<r[0]?n[0]:r[0],n[0]>r[0]?n[0]:r[0],n[1]<r[1]?n[1]:r[1],n[1]>r[1]?n[1]:r[1]];if(!(d[0]<=m[1]&&d[1]>=m[0]&&d[2]<=m[3]&&d[3]>=m[2])||!(Z2(t,e,n)||Z2(t,e,r)||Z2(n,r,t)))return;const p=d[0]>m[0]?d[0]:m[0],S=d[1]<m[1]?d[1]:m[1],I=d[2]>m[2]?d[2]:m[2],D=d[3]<m[3]?d[3]:m[3],E=(p+S)*.5,T=(I+D)*.5;return[E,T]}let c=t[1]-n[1],l=t[0]-n[0];const u=i[0]*c-i[1]*l,f=a[0]*c-a[1]*l;c=u/o,l=f/o;const v=t[0]+c*a[0],g=t[1]+c*a[1];return[v,g]}var g1;(function(t){t[t.Vertex=0]="Vertex",t[t.Intersection=1]="Intersection"})(g1||(g1={}));var Zf;(function(t){t[t.Outside=-1]="Outside",t[t.Edge=0]="Edge",t[t.Inside=1]="Inside"})(Zf||(Zf={}));var Pf;(function(t){t[t.Exiting=-1]="Exiting",t[t.Unknown=0]="Unknown",t[t.Entering=1]="Entering"})(Pf||(Pf={}));function cP(t){for(let e=0,n=t.length;e<n;e++){const r=t[e];r.next||(r.next=t[e===n-1?0:e+1])}}function uG(t,e){const n=[],r=[],a=new Map;let o=w1(e,t[0])?Pf.Exiting:Pf.Entering;for(let s=0,c=t.length;s<c;s++){const l=t[s],u=w1(e,l),f={type:g1.Vertex,coordinates:l,position:u?Zf.Inside:Zf.Outside,visited:!1,next:null};n.push(f);const v=t[s===c-1?0:s+1],g=W_(e,l,v).map(d=>{const m=d[0],h=e[d[0]],C=e[d[1]],p=lG(l,v,h,C),S=Qc(l,p);return{sourceLineSegmentId:m,coordinate:p,targetStartPointDistSquared:S}});g.sort((d,m)=>d.targetStartPointDistSquared-m.targetStartPointDistSquared),g.forEach(d=>{const{sourceLineSegmentId:m,coordinate:h}=d,C={type:g1.Intersection,coordinates:h,position:Zf.Edge,direction:o,visited:!1,next:null},p={...C,direction:Pf.Unknown,cloned:!0};o===Pf.Entering?C.next=p:p.next=C;let S=a.get(m);S||(S=[],a.set(m,S)),n.push(C),S.push(p),o*=-1})}for(let s=0,c=e.length;s<c;s++){const l=s,u=e[s],f={type:g1.Vertex,coordinates:u,visited:!1,next:null};r.push(f);const v=a.get(l);v!=null&&v.length&&v.map(g=>({intersectionPoint:g,lineSegStartDistSquared:Qc(u,g.coordinates)})).sort((g,d)=>g.lineSegStartDistSquared-d.lineSegStartDistSquared).map(({intersectionPoint:g})=>g).forEach(g=>r.push(g))}return cP(n),cP(r),{targetPolylinePoints:n,sourcePolylinePoints:r}}function fG(t){for(let e=0,n=t.length;e<n;e++){const r=t[e];if(!r.visited&&r.position===Zf.Outside)return r}}function vG(t,e){const n=mm(t),r=mm(e),a=Gt(r,n);ru(1,a)||(e=e.slice().reverse());const{targetPolylinePoints:i}=uG(t,e),o=fG(i);if(!o)return t.slice();const s=[o.coordinates];let c=o.next;for(;c!==o;){if(c.type===g1.Intersection&&c.cloned){c=c.next;continue}s.push(c.coordinates),c=c.next}return s}function gG(t,e){const n=mm(t),r=mm(e),a=Gt(r,n);ru(-1,a)||(e=e.slice().reverse());const{targetPolylinePoints:i}=uG(t,e);let o=null;const s=[];for(;o=fG(i);){const c=[o.coordinates];let l=o.next;for(o.visited=!0;l!==o;){if(l.visited=!0,l.type===g1.Intersection&&l.cloned){l=l.next;continue}c.push(l.coordinates),l=l.next}s.push(c)}return s}function dG(t,e,n,r=!0){let a,i;r?(i=t.length-1,a=0):(i=0,a=1);for(let o=a;o<t.length;o++){const s=t[i],c=t[o];if(B_(e,n,s,c))return[i,o];i=o}}function mG(t,e){for(let n=0,r=t.length;n<r;n++){const a=t[n],i=n===r-1?0:n+1,o=t[i],s=dG(e,a,o);if((s==null?void 0:s.length)===2)return!0}return!1}const Tpe=.1;function hG(t,e=Tpe){const n=t.length;if(n<3)return t;const r=e*e,a=[[0,n-1]],i=new Array(n).fill(!1);let o=2;for(i[0]=!0,i[n-1]=!0;a.length;){const[c,l]=a.pop();if(l-c===1)continue;const u=t[c],f=t[l];let v=-1/0,g=-1;for(let d=c+1;d<l;d++){const m=t[d],h=hh(u,f,m);h>v&&(v=h,g=d)}v<r||(i[g]=!0,o++,a.push([g,l]),a.push([c,g]))}const s=new Array(o);for(let c=0,l=0;c<n;c++)i[c]&&(s[l++]=t[c]);return s}function pG(t,e,n,r=!0){const a=[],i=W_(t,e,n,r);for(let o=0;o<i.length;o++){const s=t[i[o][0]],c=t[i[o][1]],l=lG(e,n,s,c);a.push(l)}return a}function ype(t,e,n,r=!0){let a,i;r?(i=t.length-1,a=0):(i=0,a=1);const o=[];for(let u=a;u<t.length;u++){const f=t[i],v=t[u];B_(e,n,f,v)&&o.push([i,u]),i=u}if(o.length===0)return;const s=[];o.forEach(u=>{const f=[t[u[0]],t[u[1]]],v=[(f[0][0]+f[1][0])/2,(f[0][1]+f[1][1])/2];s.push(sa(v,e))});const c=Math.min(...s),l=s.indexOf(c);return{segment:o[l],distance:c}}const ff=.001,Mpe=(t,e)=>{let n,r,a;if(t instanceof Xr){const o=t.getImageData();r=o.direction.slice(0,3),a=o.direction.slice(3,6),n=o.spacing}else{const o=t.getImageData(),{direction:s,spacing:c}=o,{viewPlaneNormal:l,viewUp:u}=t.getCamera(),f=s.slice(0,3),v=s.slice(3,6),g=s.slice(6,9),d=Xe();gr(d,u,l);const m=Math.abs(Gt(d,f)),h=Math.abs(Gt(d,v)),C=Math.abs(Gt(d,g));let p;if(Math.abs(1-m)<ff)p=c[0],r=f;else if(Math.abs(1-h)<ff)p=c[1],r=v;else if(Math.abs(1-C)<ff)p=c[2],r=g;else throw new Error("No support yet for oblique plane planar contours");const S=Math.abs(Gt(u,f)),I=Math.abs(Gt(u,v)),D=Math.abs(Gt(u,g));let E;if(Math.abs(1-S)<ff)E=c[0],a=f;else if(Math.abs(1-I)<ff)E=c[1],a=v;else if(Math.abs(1-D)<ff)E=c[2],a=g;else throw new Error("No support yet for oblique plane planar contours");n=[p,E]}return{spacing:[n[0]/e,n[1]/e],xDir:r,yDir:a}},_pe=(t,e,n)=>r5(t,e)<n,Ope=(t,e,n,r)=>{const{xDir:a,yDir:i,spacing:o}=r,s=Ae(t),{viewport:c}=s;if(!e.length)return e.push(n),console.log(">>>>> !canvasPoints. :: RETURN"),1;const l=c.canvasToWorld(e[e.length-1]),u=c.canvasToWorld(n),f=Xe();fr(f,u,l);const v=Math.abs(Gt(f,a)),g=Math.abs(Gt(f,i)),d=Math.max(Math.floor(v/o[0]),Math.floor(g/o[0]));if(d>1){const m=e[e.length-1],h=r5(m,n),C=In();_a(C,n,m),Ms(C,C[0]/h,C[1]/h);const p=h/d;for(let S=1;S<=d;S++)e.push([m[0]+p*C[0]*S,m[1]+p*C[1]*S])}else e.push(n);return d},wpe=(t,e,n,r)=>{const a=[t[0]-e[0],t[1]-e[1]],i=[n[0]-e[0],n[1]-e[1]],o=a[0]*i[0]+a[1]*i[1];if(o<0)return!1;const s=Math.sqrt(i[0]*i[0]+i[1]*i[1]);if(s===0)return!1;const c=o/s,l=[i[0]/s,i[1]/s],u=[l[0]*c,l[1]*c],f=[e[0]+u[0],e[1]+u[1]];return!(sa(t,f)>r||sa(e,f)>sa(e,n))},Ppe=1e-6;function SG(t){let e;const n=NF(t,50);for(let o=0;o<3;o++)if(n.every((s,c,l)=>Math.abs(s[o]-l[0][o])<Ppe)){e=o;break}if(e===void 0)throw new Error("Cannot find a shared dimension index for polyline, probably oblique plane");const r=[],a=(e+1)%3,i=(e+2)%3;for(let o=0;o<t.length;o++)r.push([t[o][a],t[o][i]]);return{sharedDimensionIndex:e,projectedPolyline:r}}function H_(t,e,n={}){const{sharedDimensionIndex:r,projectedPolyline:a}=SG(e),{holes:i}=n,o=[];if(i)for(let c=0;c<i.length;c++){const l=i[c],u=[];for(let f=0;f<l.length;f++)u.push([l[f][(r+1)%3],l[f][(r+2)%3]]);o.push(u)}const s=[t[(r+1)%3],t[(r+2)%3]];return w1(a,s,{holes:o})}const gu=Object.freeze(Object.defineProperty({__proto__:null,addCanvasPointsToArray:Ope,containsPoint:w1,containsPoints:k_,decimate:hG,getAABB:pv,getArea:ph,getClosestLineSegmentIntersection:ype,getFirstLineSegmentIntersectionIndexes:dG,getLineSegmentIntersectionsCoordinates:pG,getLineSegmentIntersectionsIndexes:W_,getNormal2:mm,getNormal3:Dpe,getSignedArea:G_,getSubPixelSpacingAndXYDirections:Mpe,getWindingDirection:J2,intersectPolyline:mG,isClosed:cG,isPointInsidePolyline3D:H_,mergePolylines:vG,pointCanProjectOnLine:wpe,pointsAreWithinCloseContourProximity:_pe,projectTo2D:SG,subtractPolylines:gG},Symbol.toStringTag,{value:"Module"}));function Ape(t,e,n,r){const a=[t,e],i=[t+n,e],o=[t+n,e],s=[t+n,e+r],c=[t+n,e+r],l=[t,e+r],u=[t,e+r];return{top:[a,i],right:[o,s],bottom:[c,l],left:[u,[t,e]]}}function $_(t,e){if(t.length!==4||e.length!==2)throw Error("rectangle:[left, top, width, height] or point: [x,y] not defined correctly");const[n,r,a,i]=t;let o=655535;const s=Ape(n,r,a,i);return Object.keys(s).forEach(c=>{const[l,u]=s[c],f=Li(l,u,e);f<o&&(o=f)}),o}const xpe=Object.freeze(Object.defineProperty({__proto__:null,distanceToPoint:$_},Symbol.toStringTag,{value:"Module"}));function gy(t,e){let n=[0,0],r=Number.MAX_SAFE_INTEGER;return t.forEach(function(a){const i=Rpe(e,a);i<r&&(r=i,n=[...a])}),n}function Rpe(t,e){const[n,r]=t,[a,i]=e;return Math.sqrt(Math.pow(n-a,2)+Math.pow(r-i,2))}const dy=1e-6,lP=1,bpe=0;function Hp(t,e,n){const[r,a]=n;if(Math.abs(e)<dy)return t<0;const i=t/e;if(e>0){if(i>a)return 0;i>r&&(n[0]=i)}else{if(i<r)return 0;i<a&&(n[1]=i)}return 1}function Xg(t,e,n,r,a){const[i,o]=t,[s,c]=e,l=s-i,u=c-o;if(r===void 0||a===void 0?(r=t,a=e):(r[0]=t[0],r[1]=t[1],a[0]=e[0],a[1]=e[1]),Math.abs(l)<dy&&Math.abs(u)<dy&&i>=n[0]&&i<=n[2]&&o>=n[1]&&o<=n[3])return lP;const f=[0,1];if(Hp(n[0]-i,l,f)&&Hp(i-n[2],-l,f)&&Hp(n[1]-o,u,f)&&Hp(o-n[3],-u,f)){const[v,g]=f;return g<1&&(a[0]=i+g*l,a[1]=o+g*u),v>0&&(r[0]+=v*l,r[1]+=v*u),lP}return bpe}const Npe=Object.freeze(Object.defineProperty({__proto__:null,findClosestPoint:gy,liangBarksyClip:Xg},Symbol.toStringTag,{value:"Module"})),Lpe=Object.freeze(Object.defineProperty({__proto__:null,BasicStatsCalculator:mpe,aabb:dpe,circle:ppe,ellipse:Spe,lineSegment:Cpe,point:hpe,polyline:gu,rectangle:xpe,vec2:Npe},Symbol.toStringTag,{value:"Module"})),{EPSILON:Upe}=fu,Fpe=1-Upe;function z_(t,e,n){var c;const{viewPlaneNormal:r}=e,a=t.filter(l=>{let u=l.metadata.viewPlaneNormal;if(!u){const{referencedImageId:v}=l.metadata,{imageOrientationPatient:g}=Lt("imagePlaneModule",v),d=qt(g[0],g[1],g[2]),m=qt(g[3],g[4],g[5]);u=Xe(),gr(u,d,m),l.metadata.viewPlaneNormal=u}const f=Math.abs(Gt(r,u))>Fpe;return u&&f});if(!a.length)return[];const i=n/2,{focalPoint:o}=e,s=[];for(const l of a){const u=l.data,f=u.handles.points[0]||((c=u.contour)==null?void 0:c.polyline[0]);if(!l.isVisible)continue;const v=Xe();if(!f){s.push(l);continue}Dr(v,o,f);const g=Gt(v,r);Math.abs(g)<i&&s.push(l)}return s}function zI(t,e,n,r){const a=Xe();gr(a,e,t);const i=qt(...n),o=qt(...r),s=Xe();fr(s,i,o);const c=Eo(s);if(c<1e-4)return{worldWidth:0,worldHeight:0};const l=Gt(s,a)/(c*Eo(a)),f=Math.sqrt(1-l*l)*c,v=l*c;return{worldWidth:f,worldHeight:v}}function Sh(t,e,n={}){if(t instanceof yr){const r=t.getCamera(),{spacingInNormalDirection:a}=Vv(t,r);return z_(e,r,a)}if(t instanceof Xr){const r=t.getCurrentImageId();if(!r)return[];const a=r.indexOf(":");n.imageURI=r.substring(a+1)}return e.filter(r=>r.isVisible?r.data.isCanvasAnnotation?!0:t.isReferenceViewable(r.metadata,n):!1)}function q_(t,e,n,r,a=.25){const i=j_(t,e,{targetVolumeId:n,stepSize:a});let o;for(const s of i){const c=t.getIntensityFromWorld(s),l=r(c,s);l&&(o=l)}return o}function j_(t,e,{targetVolumeId:n,stepSize:r}){const a=t.getCamera(),{viewPlaneNormal:i}=a,{spacingInNormalDirection:o}=Vv(t,a,n),s=o*r||1,c=t.getBounds(),l=[];let u=[...e];for(;uP(u,c);)l.push([...u]),u[0]+=i[0]*s,u[1]+=i[1]*s,u[2]+=i[2]*s;for(u=[...e];uP(u,c);)l.push([...u]),u[0]-=i[0]*s,u[1]-=i[1]*s,u[2]-=i[2]*s;return l}const uP=function(t,e){const[n,r,a,i,o,s]=e,c=10;return t[0]>n+c&&t[0]<r-c&&t[1]>a+c&&t[1]<i-c&&t[2]>o+c&&t[2]<s-c},CG=(t,e,n,r,a,i,o,s)=>{const c=[qt(n,r,a),qt(i,r,a),qt(n,o,a),qt(i,o,a),qt(n,r,s),qt(i,r,s),qt(n,o,s),qt(i,o,s)],l=qt(e[0],e[1],e[2]),u=qt(t[0],t[1],t[2]),f=-Gt(l,u);let v=null;for(const g of c){const d=Gt(l,g)+f;if(v===null)v=Math.sign(d);else if(Math.sign(d)!==v)return!0}return!1},{EPSILON:Vpe}=fu,kpe=1-Vpe;function qI(t,e){const{viewPlaneNormal:n}=e,r=t.filter(a=>{let i=a.metadata.viewPlaneNormal;if(!i){const{referencedImageId:s}=a.metadata,{imageOrientationPatient:c}=Lt("imagePlaneModule",s),l=qt(c[0],c[1],c[2]),u=qt(c[3],c[4],c[5]);i=Xe(),gr(i,l,u),a.metadata.viewPlaneNormal=i}const o=Math.abs(Gt(n,i))>kpe;return i&&o});return r.length?r:[]}const Gpe={filterAnnotationsWithinSlice:z_,getWorldWidthAndHeightFromCorners:zI,filterAnnotationsForDisplay:Sh,getPointInLineOfSightWithCriteria:q_,isPlaneIntersectingAABB:CG,filterAnnotationsWithinSamePlane:qI,getPointsInLineOfSight:j_},Bpe=Object.freeze(Object.defineProperty({__proto__:null,default:Gpe,filterAnnotationsForDisplay:Sh,filterAnnotationsWithinSamePlane:qI,filterAnnotationsWithinSlice:z_,getPointInLineOfSightWithCriteria:q_,getPointsInLineOfSight:j_,getWorldWidthAndHeightFromCorners:zI,isPlaneIntersectingAABB:CG},Symbol.toStringTag,{value:"Module"}));function no(t,e,n){let r=!0,a=!0;if(typeof t!="function")throw new TypeError("Expected a function");return b_(n)&&(r="leading"in n?!!n.leading:r,a="trailing"in n?!!n.trailing:a),BI(t,e,{leading:r,trailing:a,maxWait:e})}function IG(t,e){const n=t.length,r=[];for(let a=0;a<n;a++){const i=t[a];i.getFrameOfReferenceUID()===e&&r.push(i)}return r}const{Active:Wpe,Passive:Hpe,Enabled:$pe}=vr;function jI(t,e){const n=t.length,r=[];for(let a=0;a<n;a++){const i=t[a],o=la(i.id,i.renderingEngineId);if(!o)continue;zpe(o,e)&&r.push(i)}return r}function zpe(t,e){const{toolOptions:n}=t,r=n[e];if(!r)return!1;const a=r.mode;return a===Wpe||a===Hpe||a===$pe}function DG(t,e,n=.999){return t.filter(r=>{const a=r.getCamera();return Math.abs(Gt(a.viewPlaneNormal,e.viewPlaneNormal))>n})}function Bt(t,e,n=!0){const r=Ae(t),{renderingEngine:a,FrameOfReferenceUID:i}=r;let o=a.getViewports();o=IG(o,i),o=jI(o,e);const s=a.getViewport(r.viewportId);return n&&(o=DG(o,s.getCamera())),o.map(l=>l.id)}const qpe=Object.freeze(Object.defineProperty({__proto__:null,filterViewportsWithFrameOfReferenceUID:IG,filterViewportsWithParallelNormals:DG,filterViewportsWithToolEnabled:jI,getViewportIdsWithToolToRender:Bt},Symbol.toStringTag,{value:"Module"})),jpe="viewport-element";function Qpe(t){const e=Ae(t),{viewportId:n,renderingEngineId:r}=e,a=`${n}:${r}`,i=Kpe(t);return Object.keys(st.svgNodeCache[a]).forEach(o=>{st.svgNodeCache[a][o].touched=!1}),{svgLayerElement:i,svgNodeCacheForCanvas:st.svgNodeCache,getSvgNode:Xpe.bind(this,a),appendNode:Ype.bind(this,i,a),setNodeTouched:Zpe.bind(this,a),clearUntouched:Jpe.bind(this,i,a)}}function Kpe(t){const e=`.${jpe}`,n=t.querySelector(e);return n==null?void 0:n.querySelector(":scope > .svg-layer")}function Xpe(t,e){if(st.svgNodeCache[t]&&st.svgNodeCache[t][e])return st.svgNodeCache[t][e].domRef}function Ype(t,e,n,r){if(!st.svgNodeCache[e])return null;st.svgNodeCache[e][r]={touched:!0,domRef:n},t.appendChild(n)}function Zpe(t,e){st.svgNodeCache[t]&&st.svgNodeCache[t][e]&&(st.svgNodeCache[t][e].touched=!0)}function Jpe(t,e){st.svgNodeCache[e]&&Object.keys(st.svgNodeCache[e]).forEach(n=>{const r=st.svgNodeCache[e][n];!r.touched&&r.domRef&&(t.removeChild(r.domRef),delete st.svgNodeCache[e][n])})}function EG(t,e){const n=Qpe(t);e(n),n.clearUntouched()}function el(t,e,n){return`${t}::${e}::${n}`}function Ns(t,e){Object.keys(t).forEach(n=>{const r=e.getAttribute(n),a=t[n];a===void 0||a===""?e.removeAttribute(n):r!==a&&e.setAttribute(n,a)})}function tl(t,e){Object.keys(t).forEach(n=>{const r=t[n];r!==void 0&&r!==""&&e.setAttribute(n,r)})}function Mo(t,e,n,r,a,i={},o=""){const{color:s,fill:c,width:l,lineWidth:u,lineDash:f,fillOpacity:v,strokeOpacity:g}=Object.assign({color:"rgb(0, 255, 0)",fill:"transparent",width:"2",lineDash:void 0,lineWidth:void 0,strokeOpacity:1,fillOpacity:1},i),d=u||l,m="http://www.w3.org/2000/svg",h=el(e,"circle",n),C=t.getSvgNode(h),p={cx:`${r[0]}`,cy:`${r[1]}`,r:`${a}`,stroke:s,fill:c,"stroke-width":d,"stroke-dasharray":f,"fill-opacity":v,"stroke-opacity":g};if(C)Ns(p,C),t.setNodeTouched(h);else{const S=document.createElementNS(m,"circle");o!==""&&S.setAttribute("data-id",o),tl(p,S),t.appendNode(S,h)}}function Q_(t,e,n,r,a={},i=""){const{color:o,width:s,lineWidth:c,lineDash:l}=Object.assign({color:"rgb(0, 255, 0)",width:"2",lineWidth:void 0,lineDash:void 0},a),u=c||s,f="http://www.w3.org/2000/svg",v=el(e,"ellipse",n),g=t.getSvgNode(v),[d,m,h,C]=r,p=Math.hypot(h[0]-C[0],h[1]-C[1]),S=Math.hypot(m[0]-d[0],m[1]-d[1]),I=Math.atan2(h[1]-C[1],h[0]-C[0])*180/Math.PI,D=[(h[0]+C[0])/2,(m[1]+d[1])/2],E=p/2,T=S/2,y={cx:`${D[0]}`,cy:`${D[1]}`,rx:`${E}`,ry:`${T}`,stroke:o,fill:"transparent",transform:`rotate(${I} ${D[0]} ${D[1]})`,"stroke-width":u,"stroke-dasharray":l};if(g)Ns(y,g),t.setNodeTouched(v);else{const M=document.createElementNS(f,"ellipse");i!==""&&M.setAttribute("data-id",i),tl(y,M),t.appendNode(M,v)}}function e2e(t,e,n,r,a,i={},o=""){const s=[(r[0]+a[0])/2,r[1]],c=[(r[0]+a[0])/2,a[1]],l=[r[0],(r[1]+a[1])/2],u=[a[0],(r[1]+a[1])/2];Q_(t,e,n,[c,s,l,u],i={},o="")}function pC(t,e,n,r,a={},i){const{color:o,handleRadius:s,width:c,lineWidth:l,fill:u,type:f,opacity:v}=Object.assign({color:"rgb(0, 255, 0)",handleRadius:"6",width:"2",lineWidth:void 0,fill:"transparent",type:"circle",opacity:1},a),g=l||c,d="http://www.w3.org/2000/svg",m=el(e,"handle",`hg-${n}-index-${i}`);let h;if(f==="circle")h={cx:`${r[0]}`,cy:`${r[1]}`,r:s,stroke:o,fill:u,"stroke-width":g,opacity:v};else if(f==="rect"){const S=parseFloat(s)*1.5,I=r[0]-S*.5,D=r[1]-S*.5;h={x:`${I}`,y:`${D}`,width:`${S}`,height:`${S}`,stroke:o,fill:u,"stroke-width":g,rx:`${S*.1}`,opacity:v}}else throw new Error(`Unsupported handle type: ${f}`);const C=t.getSvgNode(m);if(C)Ns(h,C),t.setNodeTouched(m);else{const p=document.createElementNS(d,f);tl(h,p),t.appendNode(p,m)}}function Hr(t,e,n,r,a={}){r.forEach((i,o)=>{pC(t,e,n,i,a,o)})}function tr(t,e,n,r,a,i={},o=""){if(isNaN(r[0])||isNaN(r[1])||isNaN(a[0])||isNaN(a[1]))return;const{color:s,width:c,lineWidth:l,lineDash:u,shadow:f}=Object.assign({color:"rgb(0, 255, 0)",width:"2",lineWidth:void 0,lineDash:void 0,shadow:void 0},i),v=l||c,g="http://www.w3.org/2000/svg",d=el(e,"line",n),m=t.getSvgNode(d),h=f?`filter:url(#shadow-${t.svgLayerElement.id});`:"",C={x1:`${r[0]}`,y1:`${r[1]}`,x2:`${a[0]}`,y2:`${a[1]}`,stroke:s,style:h,"stroke-width":v,"stroke-dasharray":u};if(m)Ns(C,m),t.setNodeTouched(d);else{const p=document.createElementNS(g,"line");o!==""&&p.setAttribute("data-id",o),tl(C,p),t.appendNode(p,d)}}function TG(t,e,n,r,a,i={}){if(isNaN(r[0])||isNaN(r[1])||isNaN(a[0])||isNaN(a[1]))return;const{color:o,width:s,lineWidth:c,lineDash:l}=Object.assign({color:"rgb(0, 255, 0)",width:"2",lineWidth:void 0,lineDash:void 0},i),u=a[0]+(r[0]-a[0])/2,f=[u,r[1]],v=[u,a[1]],g={start:r,end:f},d={start:f,end:v},m={start:v,end:a};tr(t,e,"1",g.start,g.end,{color:o,width:s,lineWidth:c}),tr(t,e,"2",d.start,d.end,{color:o,width:s,lineWidth:c}),tr(t,e,"3",m.start,m.end,{color:o,width:s,lineWidth:c})}function c0(t,e,n,r,a){if(r.length<2)return;const{color:i="rgb(0, 255, 0)",width:o=10,fillColor:s="none",fillOpacity:c=0,lineWidth:l,lineDash:u,closePath:f=!1}=a,v=l||o,g="http://www.w3.org/2000/svg",d=el(e,"polyline",n),m=t.getSvgNode(d);let h="";for(const p of r)h+=`${p[0].toFixed(1)}, ${p[1].toFixed(1)} `;if(f){const p=r[0];h+=`${p[0]}, ${p[1]}`}const C={points:h,stroke:i,fill:s,"fill-opacity":c,"stroke-width":v,"stroke-dasharray":u};if(m)Ns(C,m),t.setNodeTouched(d);else{const p=document.createElementNS(g,"polyline");tl(C,p),t.appendNode(p,d)}}function zl(t,e,n,r,a){const o=r.length&&r[0].length&&Array.isArray(r[0][0])?r:[r],{color:s="rgb(0, 255, 0)",width:c=10,fillColor:l="none",fillOpacity:u=0,lineWidth:f,lineDash:v,closePath:g=!1}=a,d=f||c,m="http://www.w3.org/2000/svg",h=el(e,"path",n),C=t.getSvgNode(h);let p="";for(let I=0,D=o.length;I<D;I++){const E=o[I],T=E.length;if(!(T<2)){for(let y=0;y<T;y++){const M=E[y];p+=`${y?"L":"M"} ${M[0].toFixed(1)}, ${M[1].toFixed(1)} `}g&&(p+="Z ")}}if(!p)return;const S={d:p,stroke:s,fill:l,"fill-opacity":u,"stroke-width":d,"stroke-dasharray":v};if(C)Ns(S,C),t.setNodeTouched(h);else{const I=document.createElementNS(m,"path");tl(S,I),t.appendNode(I,h)}}function P1(t,e,n,r,a,i={}){const o=Object.assign({fontFamily:"Helvetica, Arial, sans-serif",fontSize:"14px",color:"rgb(255, 255, 0)",background:"",padding:25,centerX:!1,centerY:!0},i);return t2e(t,e,n,r,a,o)}function t2e(t,e,n,r=[""],a,i){const{padding:o,color:s,fontFamily:c,fontSize:l,background:u}=i;let f;const[v,g]=[a[0]+o,a[1]+o],d="http://www.w3.org/2000/svg",m=el(e,"text",n),h=t.getSvgNode(m);if(h){const C=h.querySelector("text"),p=Array.from(C.children);for(let D=0;D<p.length;D++){const E=p[D],T=r[D]||"";E.textContent=T}if(r.length>p.length){for(let D=0;D<r.length-p.length;D++){const E=r[D+p.length],T=fP(E);C.appendChild(T)}h.appendChild(C),t.appendNode(h,m)}const S={fill:s,"font-size":l,"font-family":c},I={transform:`translate(${v} ${g})`};Ns(S,C),Ns(I,h),f=vP(h,u),t.setNodeTouched(m)}else{const C=document.createElementNS(d,"g");C.setAttribute("transform",`translate(${v} ${g})`);const p=n2e(t,i);for(let S=0;S<r.length;S++){const I=r[S],D=fP(I);p.appendChild(D)}C.appendChild(p),t.appendNode(C,m),f=vP(C,u)}return Object.assign({},f,{x:v,y:g,height:f.height+o,width:f.width+o})}function n2e(t,e){const{color:n,fontFamily:r,fontSize:a}=e,o=document.createElementNS("http://www.w3.org/2000/svg","text"),s="user-select: none; pointer-events: none; -webkit-tap-highlight-color:  rgba(255, 255, 255, 0);",c=`filter:url(#shadow-${t.svgLayerElement.id});`,l=`${s}${c}`;return o.setAttribute("x","0"),o.setAttribute("y","0"),o.setAttribute("fill",n),o.setAttribute("font-family",r),o.setAttribute("font-size",a),o.setAttribute("style",l),o}function fP(t){const n=document.createElementNS("http://www.w3.org/2000/svg","tspan");return n.setAttribute("x","0"),n.setAttribute("dy","1.2em"),n.textContent=t,n}function vP(t,e){let n=t.querySelector("rect.background");if(!e)return n&&t.removeChild(n),t.getBBox();n||(n=document.createElementNS("http://www.w3.org/2000/svg","rect"),n.setAttribute("class","background"),t.insertBefore(n,t.firstChild));const r=t.getBBox(),a={x:`${r.x}`,y:`${r.y}`,width:`${r.width}`,height:`${r.height}`,fill:e};return Ns(a,n),r}function r2e(t,e,n,r,a,i,o={}){const s=r.length>0?gy(r,a):a,c=a2e(i),l=gy(c,s),u=Object.assign({color:"rgb(255, 255, 0)",lineWidth:"1",lineDash:"2,3"},o);tr(t,e,`link-${n}`,s,l,u)}function a2e(t){const{x:e,y:n,height:r,width:a}=t,i=a/2,o=r/2,s=[e+i,n],c=[e,n+o],l=[e+i,n+r],u=[e+a,n+o];return[s,c,l,u]}function ro(t,e,n,r,a,i,o,s={}){const c=Object.assign({handleRadius:"6",centering:{x:!1,y:!0}},s),l=P1(t,e,n,r,a,c);return r2e(t,e,n,i,a,l,c),l}function K_(t,e,n,r,a={},i=""){const{color:o,width:s,lineWidth:c,lineDash:l}=Object.assign({color:"rgb(0, 255, 0)",width:"2",lineWidth:void 0,lineDash:void 0},a),u=c||s,f="http://www.w3.org/2000/svg",v=el(e,"rect",n),g=t.getSvgNode(v),[d,m,h,C]=r,p=Math.hypot(d[0]-m[0],d[1]-m[1]),S=Math.hypot(d[0]-h[0],d[1]-h[1]),I=[(C[0]+d[0])/2,(C[1]+d[1])/2],D=[(h[0]+d[0])/2,(h[1]+d[1])/2],E=Math.atan2(I[1]-D[1],I[0]-D[0])*180/Math.PI,T={x:`${I[0]-p/2}`,y:`${I[1]-S/2}`,width:`${p}`,height:`${S}`,stroke:o,fill:"transparent",transform:`rotate(${E} ${I[0]} ${I[1]})`,"stroke-width":u,"stroke-dasharray":l};if(g)Ns(T,g),t.setNodeTouched(v);else{const y=document.createElementNS(f,"rect");i!==""&&y.setAttribute("data-id",i),tl(T,y),t.appendNode(y,v)}}function Ch(t,e,n,r,a,i={},o=""){const s=[r[0],r[1]],c=[a[0],r[1]],l=[r[0],a[1]],u=[a[0],a[1]];K_(t,e,n,[s,c,l,u],i,o)}function SC(t,e,n,r,a,i={}){if(isNaN(r[0])||isNaN(r[1])||isNaN(a[0])||isNaN(a[1]))return;const{color:o,width:s,lineWidth:c,lineDash:l}=Object.assign({color:"rgb(0, 255, 0)",width:"2",lineWidth:void 0,lineDash:void 0},i);tr(t,e,n,r,a,{color:o,width:s,lineWidth:c,lineDash:l});const u=10,f=Math.atan2(a[1]-r[1],a[0]-r[0]),v={start:[a[0]-u*Math.cos(f-Math.PI/7),a[1]-u*Math.sin(f-Math.PI/7)],end:a},g={start:[a[0]-u*Math.cos(f+Math.PI/7),a[1]-u*Math.sin(f+Math.PI/7)],end:a};tr(t,e,"2",v.start,v.end,{color:o,width:s,lineWidth:c}),tr(t,e,"3",g.start,g.end,{color:o,width:s,lineWidth:c})}function yG(t,e,n,r,a,i={}){const{color:o,width:s,lineWidth:c,lineDash:l}=Object.assign({color:"rgb(0, 255, 0)",width:"2",lineWidth:void 0,lineDash:void 0},i),u=c||s,f="http://www.w3.org/2000/svg",v=el(e,"rect",n),g=t.getSvgNode(v),d=[Math.min(r[0],a[0]),Math.min(r[1],a[1])],m=Math.abs(r[0]-a[0]),h=Math.abs(r[1]-a[1]),C={x:`${d[0]}`,y:`${d[1]}`,width:`${m}`,height:`${h}`,stroke:o,fill:"black","stroke-width":u,"stroke-dasharray":l};if(g)Ns(C,g),t.setNodeTouched(v);else{const p=document.createElementNS(f,"rect");tl(C,p),t.appendNode(p,v)}}const i2e=Object.freeze(Object.defineProperty({__proto__:null,draw:EG,drawArrow:SC,drawCircle:Mo,drawEllipse:e2e,drawEllipseByCoordinates:Q_,drawHandle:pC,drawHandles:Hr,drawHeight:TG,drawLine:tr,drawLinkedTextBox:ro,drawPath:zl,drawPolyline:c0,drawRect:Ch,drawRectByCoordinates:K_,drawRedactionRect:yG,drawTextBox:P1,setAttributesIfNecessary:Ns,setNewAttributesIfValid:tl},Symbol.toStringTag,{value:"Module"}));function MG(t,e){const n=Ae(t),{renderingEngineId:r,viewportId:a}=n,i=la(a,r);if(!i)return[];const o=[],s=Object.keys(i.toolOptions);for(let c=0;c<s.length;c++){const l=s[c],u=i.toolOptions[l];if(u&&e.includes(u.mode)){const f=i.getToolInstance(l);o.push(f)}}return o}const{Active:o2e,Passive:s2e,Enabled:c2e}=vr;class l2e{constructor(){this._needsRender=new Set,this._animationFrameSet=!1,this._animationFrameHandle=null,this._renderFlaggedViewports=()=>{this._throwIfDestroyed();const e=Array.from(this._viewportElements.values());for(let n=0;n<e.length;n++){const r=e[n];if(this._needsRender.has(r)&&(this._triggerRender(r),this._needsRender.delete(r),this._needsRender.size===0))break}this._animationFrameSet=!1,this._animationFrameHandle=null,this._render()},this._viewportElements=new Map}addViewportElement(e,n){this._viewportElements.set(e,n)}removeViewportElement(e,n){this._viewportElements.delete(e),this._needsRender.delete(n),this._reset()}renderViewport(e){this._setViewportsToBeRenderedNextFrame([e])}_throwIfDestroyed(){if(this.hasBeenDestroyed)throw new Error("this.destroy() has been manually called to free up memory, can not longer use this instance. Instead make a new one.")}_setAllViewportsToBeRenderedNextFrame(){[...this._viewportElements.values()].forEach(n=>{this._needsRender.add(n)}),this._renderFlaggedViewports()}_setViewportsToBeRenderedNextFrame(e){const n=[...this._viewportElements.values()];e.forEach(r=>{n.indexOf(r)!==-1&&this._needsRender.add(r)}),this._render()}_render(){this._needsRender.size>0&&this._animationFrameSet===!1&&(this._animationFrameHandle=window.requestAnimationFrame(this._renderFlaggedViewports),this._animationFrameSet=!0)}_triggerRender(e){const n=Ae(e);if(!n)return;if(!da(n.renderingEngineId)){console.warn("rendering Engine has been destroyed");return}const a=MG(e,[o2e,s2e,c2e]),{renderingEngineId:i,viewportId:o}=n,s={element:e,renderingEngineId:i,viewportId:o};EG(e,c=>{let l=!1;const u=f=>{if(f.renderAnnotation){const v=f.renderAnnotation(n,c);l=l||v}};a.forEach(u),l&&Dt(e,B.ANNOTATION_RENDERED,{...s})})}_reset(){window.cancelAnimationFrame(this._animationFrameHandle),this._needsRender.clear(),this._animationFrameSet=!1,this._animationFrameHandle=null,this._setAllViewportsToBeRenderedNextFrame()}}const X_=new l2e;function zv(t){X_.renderViewport(t)}function qe(t){t.length&&t.forEach(e=>{const n=wr(e);if(!n){console.warn(`Viewport not available for ${e}`);return}const{viewport:r}=n;if(!r){console.warn(`Viewport not available for ${e}`);return}const a=r.element;zv(a)})}function u2e(t){var e;return((e=t[0])==null?void 0:e.length)===3}function f2e(t,e){if(!e||e.length===0||e.length===t.length)return t;const n=e[e.length-1]-e[0]+1,r=hE(e.map(i=>t[i][0])),a=hE(e.map(i=>t[i][1]));if(u2e(t)){const i=hE(e.map(o=>t[o][2]));return $w(Sg(r,n),Sg(a,n),Sg(i,n))}else return $w(Sg(r,n),Sg(a,n))}function v2e(t,e){const n=[],[r,a]=e,i=a-r+1,o=Math.floor(i/t);let s=0,c=Math.round((i-1)/(o-1)*s)+r;for(;c<=a;)n.push(c),s++,c=Math.round((i-1)/(o-1)*s)+r;return n}function my(t,e,n,r){const a=n-e+1,i=Math.floor(r/100*a)??1,o=Math.floor(a/i)??1;if(isNaN(a)||!a||!o||a/o<2)return t;const s=Math.max(0,e),c=Math.min(t.length-1,n),l=t.slice(0,s),u=t.slice(c+1,t.length),f=v2e(o,[s,c]),v=f2e(t,f);return[...l,...v,...u]}function QI(t,e){var r,a;return e!=null&&e.autoGenerated?!1:((r=t==null?void 0:t.smoothing)==null?void 0:r.smoothOnAdd)===!0||((a=t==null?void 0:t.smoothing)==null?void 0:a.smoothOnEdit)===!0}function g2e(t,e){return bs(t,e)<.001}function d2e(t,e){return bs(t,e)===0}function m2e(t,e){for(let n=0;n<t.length;n++)for(let r=0;r<e.length;r++)if(d2e(t[n],e[r]))return[n,r]}function Af(t,e,n){return(t+e+n)%e}function gP(t,e,n,r){const[,a,i]=t,[,o,s]=e,c=i.length,l=s.length;let u=t[0],f=e[0];if(!i[u]||!s[f]||!i[a]||!s[o])return[void 0,void 0];for(;u!==a&&f!==o;){if(n(s[f],i[u]))return[u,f];u=Af(u,c,r),f=Af(f,l,r)}return[void 0,void 0]}function h2e(t,e){const[n,r]=m2e(t,e)||[],a=(c,l)=>g2e(c,l)===!1,[i,o]=gP([Af(n,t.length,1),n,t],[Af(r,e.length,1),r,e],a,1),[s]=gP([Af(i,t.length,-1),i,t],[Af(o,e.length,-1),o,e],a,-1);return[i,s]}function KI(t,e,n){const{interpolation:r,smoothing:a}=t,i=e;if(r){const{knotsRatioPercentageOnAdd:o,knotsRatioPercentageOnEdit:s,smoothOnAdd:c=!1,smoothOnEdit:l=!1}=a,u=n?s:o;if(n?l:c){const[v,g]=n?h2e(e,n):[0,e.length-1];return!e[v]||!e[g]?e:my(e,v,g,u)}}return i}const qv=t=>{if(t.shiftKey)return t.ctrlKey?mi.ShiftCtrl:t.altKey?mi.ShiftAlt:t.metaKey?mi.ShiftMeta:mi.Shift;if(t.ctrlKey)return t.altKey?mi.CtrlAlt:t.metaKey?mi.CtrlMeta:mi.Ctrl;if(t.altKey)return t.metaKey&&mi.AltMeta||mi.Alt;if(t.metaKey)return mi.Meta};function Y_(t,e){const n=t[0],r=t[t.length-1],a=In();Ms(a,r[0]-n[0],r[1]-n[1]),Nc(a,a);const i=In(),o=In();Ms(i,-a[1],a[0]),Ms(o,a[1],-a[0]);const s=[(n[0]+r[0])/2,(n[1]+r[1])/2],c={dist:0,index:null};for(let f=0;f<t.length;f++){const v=t[f],g=r5(v,s);g>c.dist&&(c.dist=g,c.index=f)}return[t[c.index],s].map(e.canvasToWorld)}function p2e(t,e){const{viewport:n}=t,r=e.data.contour.polyline.map(n.worldToCanvas);return Y_(r,n)}var cu;(function(t){t[t.CounterClockwise=-1]="CounterClockwise",t[t.Unknown=0]="Unknown",t[t.Clockwise=1]="Clockwise"})(cu||(cu={}));const{addCanvasPointsToArray:Z_,pointsAreWithinCloseContourProximity:_G,getFirstLineSegmentIntersectionIndexes:OG,getSubPixelSpacingAndXYDirections:S2e}=gu;function C2e(t,e,n){this.isDrawing=!0;const r=t.detail,{currentPoints:a,element:i}=r,o=a.canvas,s=Ae(i),{viewport:c}=s,l=qv(t.detail.event)===this.configuration.contourHoleAdditionModifierKey,{spacing:u,xDir:f,yDir:v}=S2e(c,this.configuration.subPixelResolution);this.drawData={canvasPoints:[o],polylineIndex:0,contourHoleProcessingEnabled:l,newAnnotation:!0},this.commonData={annotation:e,viewportIdsToRender:n,spacing:u,xDir:f,yDir:v,movingTextBox:!1},st.isInteractingWithTool=!0,i.addEventListener(B.MOUSE_UP,this.mouseUpDrawCallback),i.addEventListener(B.MOUSE_DRAG,this.mouseDragDrawCallback),i.addEventListener(B.MOUSE_CLICK,this.mouseUpDrawCallback),i.addEventListener(B.TOUCH_END,this.mouseUpDrawCallback),i.addEventListener(B.TOUCH_DRAG,this.mouseDragDrawCallback),i.addEventListener(B.TOUCH_TAP,this.mouseUpDrawCallback),Yt(i)}function I2e(t){st.isInteractingWithTool=!1,t.removeEventListener(B.MOUSE_UP,this.mouseUpDrawCallback),t.removeEventListener(B.MOUSE_DRAG,this.mouseDragDrawCallback),t.removeEventListener(B.MOUSE_CLICK,this.mouseUpDrawCallback),t.removeEventListener(B.TOUCH_END,this.mouseUpDrawCallback),t.removeEventListener(B.TOUCH_DRAG,this.mouseDragDrawCallback),t.removeEventListener(B.TOUCH_TAP,this.mouseUpDrawCallback),Mn(t)}function D2e(t){const e=t.detail,{currentPoints:n,element:r}=e,a=n.world,i=n.canvas,o=Ae(r),{viewport:s}=o,{annotation:c,viewportIdsToRender:l,xDir:u,yDir:f,spacing:v,movingTextBox:g}=this.commonData,{polylineIndex:d,canvasPoints:m,newAnnotation:h}=this.drawData;this.createMemo(r,c,{newAnnotation:h});const C=m[m.length-1],p=s.canvasToWorld(C),S=Xe();fr(S,a,p);const I=Math.abs(Gt(S,u)),D=Math.abs(Gt(S,f));if(!(I<=v[0]&&D<=v[1])){if(g){this.isDrawing=!1;const{deltaPoints:E}=e,T=E.world,{textBox:y}=c.data.handles,{worldPosition:M}=y;M[0]+=T[0],M[1]+=T[1],M[2]+=T[2],y.hasMoved=!0}else{const E=this.findCrossingIndexDuringCreate(t);if(E!==void 0)this.applyCreateOnCross(t,E);else{const T=Z_(r,m,i,this.commonData);this.drawData.polylineIndex=d+T}}qe(l)}}function E2e(t){const{allowOpenContours:e}=this.configuration,{canvasPoints:n,contourHoleProcessingEnabled:r}=this.drawData,a=n[0],i=n[n.length-1],o=t.detail,{element:s}=o;this.doneEditMemo(),this.drawData.newAnnotation=!1,e&&!_G(a,i,this.configuration.closeContourProximity)?this.completeDrawOpenContour(s,{contourHoleProcessingEnabled:r}):this.completeDrawClosedContour(s,{contourHoleProcessingEnabled:r})}function T2e(t,e){this.removeCrossedLinesOnCompleteDraw();const{canvasPoints:n}=this.drawData,{contourHoleProcessingEnabled:r,minPointsToSave:a}=e??{};if(a&&n.length<a||this.haltDrawing(t,n))return!1;const{annotation:i,viewportIdsToRender:o}=this.commonData,s=Ae(t),{viewport:c,renderingEngine:l}=s;Z_(t,n,n[0],this.commonData),n.pop();const u=QI(this.configuration,i)?KI(this.configuration,n):n;this.updateContourPolyline(i,{points:u,closed:!0,targetWindingDirection:cu.Clockwise},c);const{textBox:f}=i.data.handles;return f!=null&&f.hasMoved||T_(i,r),this.isDrawing=!1,this.drawData=void 0,this.commonData=void 0,qe(o),this.deactivateDraw(t),!0}function y2e(){const{canvasPoints:t}=this.drawData,e=t.length,n=[t[0],t[e-1]],r=t.slice(0,-1).slice(1),a=OG(r,n[0],n[1],!1);if(a){const i=a[1];i===1?this.drawData.canvasPoints=t.splice(1):this.drawData.canvasPoints=t.splice(0,i)}}function M2e(t,e){const{canvasPoints:n}=this.drawData,{contourHoleProcessingEnabled:r}=e??{};if(this.haltDrawing(t,n))return!1;const{annotation:a,viewportIdsToRender:i}=this.commonData,o=Ae(t),{viewport:s,renderingEngine:c}=o,l=QI(this.configuration,a)?KI(this.configuration,n):n;this.updateContourPolyline(a,{points:l,closed:!1},s);const{textBox:u}=a.data.handles,f=a.data.contour.polyline;return a.data.handles.points=[f[0],f[f.length-1]],a.data.isOpenUShapeContour&&(a.data.openUShapeContourVectorToPeak=Y_(n,s)),u.hasMoved||T_(a,r),this.isDrawing=!1,this.drawData=void 0,this.commonData=void 0,qe(i),this.deactivateDraw(t),!0}function _2e(t){const e=t.detail,{currentPoints:n,lastPoints:r}=e,a=n.canvas,i=r.canvas,{canvasPoints:o}=this.drawData,s=o.slice(0,-1),c=OG(s,a,i,!1);return c===void 0?void 0:c[0]}function O2e(t,e){const n=t.detail,{element:r}=n,{canvasPoints:a,contourHoleProcessingEnabled:i}=this.drawData,{annotation:o,viewportIdsToRender:s}=this.commonData;Z_(r,a,a[e],this.commonData),a.pop();const c=a.slice(e),l=ph(c);if(gn(l,0)){a.splice(e+1);return}a.splice(0,e);const u={contourHoleProcessingEnabled:i,minPointsToSave:3};this.completeDrawClosedContour(r,u)&&this.activateClosedContourEdit(t,o,s)}function w2e(t){const{allowOpenContours:e}=this.configuration,{canvasPoints:n,contourHoleProcessingEnabled:r}=this.drawData,a=n[0],i=n[n.length-1];e&&!_G(a,i,this.configuration.closeContourProximity)?this.completeDrawOpenContour(t,{contourHoleProcessingEnabled:r}):this.completeDrawClosedContour(t,{contourHoleProcessingEnabled:r})}function P2e(t,e){const n=Math.max(e*3,3);return t.length<n}function A2e(t,e){const{subPixelResolution:n}=this.configuration;if(P2e(e,n)){const{annotation:r,viewportIdsToRender:a}=this.commonData;return Ae(t),sr(r.annotationUID),this.isDrawing=!1,this.drawData=void 0,this.commonData=void 0,qe(a),this.deactivateDraw(t),!0}return!1}function x2e(t){t.activateDraw=C2e.bind(t),t.deactivateDraw=I2e.bind(t),t.applyCreateOnCross=O2e.bind(t),t.findCrossingIndexDuringCreate=_2e.bind(t),t.completeDrawOpenContour=M2e.bind(t),t.removeCrossedLinesOnCompleteDraw=y2e.bind(t),t.mouseDragDrawCallback=D2e.bind(t),t.mouseUpDrawCallback=E2e.bind(t),t.completeDrawClosedContour=T2e.bind(t),t.cancelDrawing=w2e.bind(t),t.haltDrawing=A2e.bind(t)}const{addCanvasPointsToArray:R2e,getFirstLineSegmentIntersectionIndexes:A1}=gu;function b2e(t,e){const n=t.detail,{element:r,currentPoints:a,lastPoints:i}=n,o=a.canvas,s=i.canvas,{editCanvasPoints:c,prevCanvasPoints:l}=this.editData,u=A1(l,o,s,e);if(u)this.editData.startCrossingIndex=u[0],this.removePointsUpUntilFirstCrossing(e);else if(l.length>=2)if(c.length>this.configuration.checkCanvasEditFallbackProximity){const f=c[0],v=[];for(let m=0;m<l.length;m++){const h=l[m],C=sa(h,f);v.push({distance:C,index:m})}v.sort((m,h)=>m.distance-h.distance);const g=[v[0],v[1]],d=Math.min(g[0].index,g[1].index);this.editData.startCrossingIndex=d}else{const f=In();_a(f,c[1],c[0]),Nc(f,f);const v=6,g=[c[0][0]-f[0]*v,c[0][1]-f[1]*v],d=A1(l,g,c[0],e);if(d){const m=[g];R2e(r,m,c[0],this.commonData),c.unshift(...m),this.removePointsUpUntilFirstCrossing(e),this.editData.editIndex=c.length-1,this.editData.startCrossingIndex=d[0]}}}function N2e(t){const{editCanvasPoints:e,prevCanvasPoints:n}=this.editData;let r=0;for(let a=0;a<e.length-1;a++){const i=[e[a],e[a+1]],o=!!A1(n,i[0],i[1],t);if(r++,o)break}e.splice(0,r),this.editData.editIndex=e.length-1}function L2e(t,e){const n=t.detail,{currentPoints:r,lastPoints:a}=n,i=r.canvas,o=a.canvas,{prevCanvasPoints:s}=this.editData;return!!A1(s,i,o,e)}function U2e(t){const{prevCanvasPoints:e,editCanvasPoints:n}=this.editData;for(let r=n.length-1;r>0;r--){const a=[n[r],n[r-1]],i=!!A1(e,a[0],a[1],t);if(n.pop(),i)break}}function F2e(){const{editCanvasPoints:t,prevCanvasPoints:e,startCrossingIndex:n}=this.editData;if(n===void 0)return;const r=t[t.length-1],a=[];for(let o=0;o<e.length;o++){const s=e[o],c=sa(s,r);a.push({distance:c,index:o})}a.sort((o,s)=>o.distance-s.distance);const i=t.slice(0,-1);for(let o=0;o<a.length;o++){const{index:s}=a[o],c=e[s],l=t[t.length-1];if(!A1(i,c,l,!1))return s}return-1}function V2e(t){const e=t.detail,{currentPoints:n,lastPoints:r}=e,a=n.canvas,i=r.canvas,{editCanvasPoints:o}=this.editData,s=o.slice(0,-2),c=A1(s,a,i,!1);if(!c)return;const l=c[0],u=o.length-l;for(let f=0;f<u;f++)o.pop()}function k2e(t){t.checkForFirstCrossing=b2e.bind(t),t.removePointsUpUntilFirstCrossing=N2e.bind(t),t.checkForSecondCrossing=L2e.bind(t),t.findSnapIndex=F2e.bind(t),t.removePointsAfterSecondCrossing=U2e.bind(t),t.checkAndRemoveCrossesOnEditLine=V2e.bind(t)}function nl(t,e,n,r){var d,m;const{canvasToWorld:a,worldToCanvas:i}=n,{data:o}=t,{targetWindingDirection:s}=e;let{points:c}=e,l=J2(c);(d=r==null?void 0:r.decimate)!=null&&d.enabled&&(c=hG(e.points,(m=r==null?void 0:r.decimate)==null?void 0:m.epsilon));let{closed:u}=e;const f=c.length,v=new Array(f);J2(c);const g=ik(t);if(u===void 0){let h=!1;if(c.length>3){const C=Qc(c[0],c[f-1]);h=gn(0,C)}u=h}if((r==null?void 0:r.updateWindingDirection)!==!1){let h=g?g.data.contour.windingDirection*-1:s;h===void 0&&(h=l),h!==l&&c.reverse();const C=o.handles.points.map(p=>i(p));C.length>2&&J2(C)!==h&&o.handles.points.reverse(),l=h}for(let h=0;h<f;h++)v[h]=a(c[h]);o.contour.polyline=v,o.contour.closed=u,o.contour.windingDirection=l,ok(t)}const{getSubPixelSpacingAndXYDirections:G2e,addCanvasPointsToArray:wG,getArea:dP}=gu;function B2e(t,e,n){this.isEditingClosed=!0;const r=t.detail,{currentPoints:a,element:i}=r,o=a.canvas,s=Ae(i);if(!s)return;const{viewport:c}=s,l=e.data.contour.polyline.map(c.worldToCanvas),{spacing:u,xDir:f,yDir:v}=G2e(c,this.configuration.subPixelResolution);this.editData={prevCanvasPoints:l,editCanvasPoints:[o],startCrossingIndex:void 0,editIndex:0,annotation:e},this.commonData={annotation:e,viewportIdsToRender:n,spacing:u,xDir:f,yDir:v,movingTextBox:!1},st.isInteractingWithTool=!0,i.addEventListener(B.MOUSE_UP,this.mouseUpClosedContourEditCallback),i.addEventListener(B.MOUSE_DRAG,this.mouseDragClosedContourEditCallback),i.addEventListener(B.MOUSE_CLICK,this.mouseUpClosedContourEditCallback),i.addEventListener(B.TOUCH_END,this.mouseUpClosedContourEditCallback),i.addEventListener(B.TOUCH_DRAG,this.mouseDragClosedContourEditCallback),i.addEventListener(B.TOUCH_TAP,this.mouseUpClosedContourEditCallback),Yt(i)}function W2e(t){st.isInteractingWithTool=!1,t.removeEventListener(B.MOUSE_UP,this.mouseUpClosedContourEditCallback),t.removeEventListener(B.MOUSE_DRAG,this.mouseDragClosedContourEditCallback),t.removeEventListener(B.MOUSE_CLICK,this.mouseUpClosedContourEditCallback),t.removeEventListener(B.TOUCH_END,this.mouseUpClosedContourEditCallback),t.removeEventListener(B.TOUCH_DRAG,this.mouseDragClosedContourEditCallback),t.removeEventListener(B.TOUCH_TAP,this.mouseUpClosedContourEditCallback),Mn(t)}function H2e(t){const e=t.detail,{currentPoints:n,element:r}=e,a=n.world,i=n.canvas,o=Ae(r),{viewport:s}=o,{viewportIdsToRender:c,xDir:l,yDir:u,spacing:f}=this.commonData,{editIndex:v,editCanvasPoints:g,startCrossingIndex:d,annotation:m}=this.editData;this.createMemo(r,m);const h=g[g.length-1],C=s.canvasToWorld(h),p=Xe();fr(p,a,C);const S=Math.abs(Gt(p,l)),I=Math.abs(Gt(p,u));if(S<=f[0]&&I<=f[1])return;d!==void 0&&this.checkAndRemoveCrossesOnEditLine(t);const D=wG(r,g,i,this.commonData),E=v+D;if(this.editData.editIndex=E,d===void 0&&g.length>1&&this.checkForFirstCrossing(t,!0),this.editData.snapIndex=this.findSnapIndex(),this.editData.snapIndex===-1){this.finishEditAndStartNewEdit(t);return}this.editData.fusedCanvasPoints=this.fuseEditPointsWithClosedContour(t),d!==void 0&&this.checkForSecondCrossing(t,!0)&&(this.removePointsAfterSecondCrossing(!0),this.finishEditAndStartNewEdit(t)),qe(c)}function $2e(t){const e=t.detail,{element:n}=e,r=Ae(n),{viewport:a,renderingEngine:i}=r,{annotation:o,viewportIdsToRender:s}=this.commonData,{fusedCanvasPoints:c,editCanvasPoints:l}=this.editData;nl(o,{points:c,closed:!0,targetWindingDirection:cu.Clockwise},a),o.autoGenerated&&(o.autoGenerated=!1),$r(o,n);const u=l.pop();this.editData={prevCanvasPoints:c,editCanvasPoints:[u],startCrossingIndex:void 0,editIndex:0,snapIndex:void 0,annotation:o},qe(s)}function z2e(t){const{prevCanvasPoints:e,editCanvasPoints:n,startCrossingIndex:r,snapIndex:a}=this.editData;if(r===void 0||a===void 0)return;const i=t.detail,{element:o}=i,s=[...n];wG(o,s,e[a],this.commonData),s.length>n.length&&s.pop();let c,l;r>a?(c=a,l=r):(c=r,l=a);const u=sa(e[c],s[0]),f=sa(e[c],s[s.length-1]),v=sa(e[l],s[0]),g=sa(e[l],s[s.length-1]),d=[];for(let D=0;D<c;D++){const E=e[D];d.push([E[0],E[1]])}let m=u+g,h=f+v;if(m<h)for(let D=0;D<s.length;D++){const E=s[D];d.push([E[0],E[1]])}else for(let D=s.length-1;D>=0;D--){const E=s[D];d.push([E[0],E[1]])}for(let D=l;D<e.length;D++){const E=e[D];d.push([E[0],E[1]])}const C=[];for(let D=c;D<l;D++){const E=e[D];C.push([E[0],E[1]])}if(m=v+f,h=g+u,m<h)for(let D=0;D<s.length;D++){const E=s[D];C.push([E[0],E[1]])}else for(let D=s.length-1;D>=0;D--){const E=s[D];C.push([E[0],E[1]])}const p=dP(d),S=dP(C);return p>S?d:C}function q2e(t){const e=t.detail,{element:n}=e;this.completeClosedContourEdit(n)}function j2e(t){var s;const e=Ae(t),{viewport:n}=e,{annotation:r,viewportIdsToRender:a}=this.commonData;this.doneEditMemo();const{fusedCanvasPoints:i,prevCanvasPoints:o}=this.editData;if(i){const c=QI(this.configuration,r)?KI(this.configuration,i,o):i,l=((s=this.configuration)==null?void 0:s.decimate)||{};nl(r,{points:c,closed:!0,targetWindingDirection:cu.Clockwise},n,{decimate:{enabled:!!l.enabled,epsilon:l.epsilon}}),r.autoGenerated&&(r.autoGenerated=!1),$r(r,t)}this.isEditingClosed=!1,this.editData=void 0,this.commonData=void 0,qe(a),this.deactivateClosedContourEdit(t)}function Q2e(t){this.completeClosedContourEdit(t)}function K2e(t){t.activateClosedContourEdit=B2e.bind(t),t.deactivateClosedContourEdit=W2e.bind(t),t.mouseDragClosedContourEditCallback=H2e.bind(t),t.mouseUpClosedContourEditCallback=q2e.bind(t),t.finishEditAndStartNewEdit=$2e.bind(t),t.fuseEditPointsWithClosedContour=z2e.bind(t),t.cancelClosedContourEdit=Q2e.bind(t),t.completeClosedContourEdit=j2e.bind(t)}const{addCanvasPointsToArray:PG,getSubPixelSpacingAndXYDirections:X2e}=gu;function Y2e(t,e,n){this.isEditingOpen=!0;const r=t.detail,{currentPoints:a,element:i}=r,o=a.canvas,s=Ae(i),{viewport:c}=s;this.doneEditMemo();const l=e.data.contour.polyline.map(c.worldToCanvas),{spacing:u,xDir:f,yDir:v}=X2e(c,this.configuration.subPixelResolution);this.editData={prevCanvasPoints:l,editCanvasPoints:[o],startCrossingIndex:void 0,editIndex:0},this.commonData={annotation:e,viewportIdsToRender:n,spacing:u,xDir:f,yDir:v,movingTextBox:!1},st.isInteractingWithTool=!0,i.addEventListener(B.MOUSE_UP,this.mouseUpOpenContourEditCallback),i.addEventListener(B.MOUSE_DRAG,this.mouseDragOpenContourEditCallback),i.addEventListener(B.MOUSE_CLICK,this.mouseUpOpenContourEditCallback),i.addEventListener(B.TOUCH_END,this.mouseUpOpenContourEditCallback),i.addEventListener(B.TOUCH_DRAG,this.mouseDragOpenContourEditCallback),i.addEventListener(B.TOUCH_TAP,this.mouseUpOpenContourEditCallback),Yt(i)}function Z2e(t){st.isInteractingWithTool=!1,t.removeEventListener(B.MOUSE_UP,this.mouseUpOpenContourEditCallback),t.removeEventListener(B.MOUSE_DRAG,this.mouseDragOpenContourEditCallback),t.removeEventListener(B.MOUSE_CLICK,this.mouseUpOpenContourEditCallback),t.removeEventListener(B.TOUCH_END,this.mouseUpOpenContourEditCallback),t.removeEventListener(B.TOUCH_DRAG,this.mouseDragOpenContourEditCallback),t.removeEventListener(B.TOUCH_TAP,this.mouseUpOpenContourEditCallback),Mn(t)}function J2e(t){const e=t.detail,{currentPoints:n,element:r}=e,a=n.world,i=n.canvas,o=Ae(r),{viewport:s}=o,{viewportIdsToRender:c,xDir:l,yDir:u,spacing:f}=this.commonData,{editIndex:v,editCanvasPoints:g,startCrossingIndex:d}=this.editData,m=g[g.length-1],h=s.canvasToWorld(m),C=Xe();this.createMemo(r,this.commonData.annotation),fr(C,a,h);const p=Math.abs(Gt(C,l)),S=Math.abs(Gt(C,u));if(p<=f[0]&&S<=f[1])return;d!==void 0&&this.checkAndRemoveCrossesOnEditLine(t);const I=PG(r,g,i,this.commonData),D=v+I;this.editData.editIndex=D,d===void 0&&g.length>1&&this.checkForFirstCrossing(t,!1),this.editData.snapIndex=this.findSnapIndex(),this.editData.fusedCanvasPoints=this.fuseEditPointsWithOpenContour(t),d!==void 0&&this.checkForSecondCrossing(t,!1)?(this.removePointsAfterSecondCrossing(!1),this.finishEditOpenOnSecondCrossing(t)):this.checkIfShouldOverwriteAnEnd(t)&&this.openContourEditOverwriteEnd(t),qe(c)}function eSe(t){const e=t.detail,{element:n}=e,r=Ae(n),{viewport:a}=r,{annotation:i,viewportIdsToRender:o}=this.commonData,s=this.fuseEditPointsForOpenContourEndEdit();nl(i,{points:s,closed:!1},a);const c=i.data.contour.polyline;i.data.handles.points=[c[0],c[c.length-1]],i.data.handles.activeHandleIndex=1,$r(i,n),this.isEditingOpen=!1,this.editData=void 0,this.commonData=void 0,this.doneEditMemo(),this.deactivateOpenContourEdit(n),this.activateOpenContourEndEdit(t,i,o,null)}function tSe(t){const e=t.detail,{currentPoints:n,lastPoints:r}=e,a=n.canvas,i=r.canvas,{snapIndex:o,prevCanvasPoints:s,startCrossingIndex:c}=this.editData;if(c===void 0||o===void 0)return!1;if(o===-1)return!0;if(o!==0&&o!==s.length-1)return!1;const l=a,u=i,f=s[o],v=In(),g=In();Ms(v,l[0]-u[0],l[1]-u[1]),Ms(g,l[0]-f[0],l[1]-f[1]);const d=n5(v,g),m=Math.sqrt(v[0]*v[0]+v[1]*v[1]),h=Math.sqrt(g[0]*g[0]+g[1]*g[1]);return Math.acos(d/(m*h))<Math.PI/2}function nSe(){const{snapIndex:t,prevCanvasPoints:e,editCanvasPoints:n,startCrossingIndex:r}=this.editData,a=[];if(t===0)for(let s=e.length-1;s>=r;s--){const c=e[s];a.push([c[0],c[1]])}else for(let s=0;s<r;s++){const c=e[s];a.push([c[0],c[1]])}const i=sa(e[r],n[0]),o=sa(e[r],n[n.length-1]);if(i<o)for(let s=0;s<n.length;s++){const c=n[s];a.push([c[0],c[1]])}else for(let s=n.length-1;s>=0;s--){const c=n[s];a.push([c[0],c[1]])}return a}function rSe(t){const{prevCanvasPoints:e,editCanvasPoints:n,startCrossingIndex:r,snapIndex:a}=this.editData;if(r===void 0||a===void 0)return;const i=t.detail,{element:o}=i,s=[...n];PG(o,s,e[a],this.commonData),s.length>n.length&&s.pop();let c,l;r>a?(c=a,l=r):(c=r,l=a);const u=sa(e[c],s[0]),f=sa(e[c],s[s.length-1]),v=sa(e[l],s[0]),g=sa(e[l],s[s.length-1]),d=[];for(let C=0;C<c;C++){const p=e[C];d.push([p[0],p[1]])}const m=u+g,h=f+v;if(m<h)for(let C=0;C<s.length;C++){const p=s[C];d.push([p[0],p[1]])}else for(let C=s.length-1;C>=0;C--){const p=s[C];d.push([p[0],p[1]])}for(let C=l;C<e.length;C++){const p=e[C];d.push([p[0],p[1]])}return d}function aSe(t){const e=t.detail,{element:n}=e,r=Ae(n),{viewport:a,renderingEngine:i}=r,{annotation:o,viewportIdsToRender:s}=this.commonData,{fusedCanvasPoints:c,editCanvasPoints:l}=this.editData;nl(o,{points:c,closed:!1},a);const u=o.data.contour.polyline;o.data.handles.points=[u[0],u[u.length-1]],$r(o,n);const f=l.pop();this.editData={prevCanvasPoints:c,editCanvasPoints:[f],startCrossingIndex:void 0,editIndex:0},qe(s)}function iSe(t){const e=t.detail,{element:n}=e;this.completeOpenContourEdit(n)}function oSe(t){var s;const e=Ae(t),{viewport:n}=e,{annotation:r,viewportIdsToRender:a}=this.commonData;this.doneEditMemo();const{fusedCanvasPoints:i,prevCanvasPoints:o}=this.editData;if(i){const c=QI(this.configuration)?KI(this.configuration,i,o):i,l=((s=this.configuration)==null?void 0:s.decimate)||{};nl(r,{points:c,closed:!1},n,{decimate:{enabled:!!l.enabled,epsilon:l.epsilon}});const u=r.data.contour.polyline;r.data.handles.points=[u[0],u[u.length-1]],r.data.isOpenUShapeContour&&(r.data.openUShapeContourVectorToPeak=Y_(i,n)),$r(r,t)}this.isEditingOpen=!1,this.editData=void 0,this.commonData=void 0,qe(a),this.deactivateOpenContourEdit(t)}function sSe(t){this.completeOpenContourEdit(t)}function cSe(t){t.activateOpenContourEdit=Y2e.bind(t),t.deactivateOpenContourEdit=Z2e.bind(t),t.mouseDragOpenContourEditCallback=J2e.bind(t),t.mouseUpOpenContourEditCallback=iSe.bind(t),t.fuseEditPointsWithOpenContour=rSe.bind(t),t.finishEditOpenOnSecondCrossing=aSe.bind(t),t.checkIfShouldOverwriteAnEnd=tSe.bind(t),t.fuseEditPointsForOpenContourEndEdit=nSe.bind(t),t.openContourEditOverwriteEnd=eSe.bind(t),t.cancelOpenContourEdit=sSe.bind(t),t.completeOpenContourEdit=oSe.bind(t)}const{getSubPixelSpacingAndXYDirections:lSe}=gu;function uSe(t,e,n,r){this.isDrawing=!0;const a=t.detail,{element:i}=a,o=Ae(i),{viewport:s}=o,{spacing:c,xDir:l,yDir:u}=lSe(s,this.configuration.subPixelResolution),f=e.data.contour.polyline.map(s.worldToCanvas);e.data.handles.activeHandleIndex===0&&f.reverse();let g=!1;r!=null&&r.worldPosition&&(g=!0),this.drawData={canvasPoints:f,polylineIndex:f.length-1},this.commonData={annotation:e,viewportIdsToRender:n,spacing:c,xDir:l,yDir:u,movingTextBox:g},st.isInteractingWithTool=!0,i.addEventListener(B.MOUSE_UP,this.mouseUpDrawCallback),i.addEventListener(B.MOUSE_DRAG,this.mouseDragDrawCallback),i.addEventListener(B.MOUSE_CLICK,this.mouseUpDrawCallback),i.addEventListener(B.TOUCH_END,this.mouseUpDrawCallback),i.addEventListener(B.TOUCH_DRAG,this.mouseDragDrawCallback),i.addEventListener(B.TOUCH_TAP,this.mouseUpDrawCallback),Yt(i)}function fSe(t){t.activateOpenContourEndEdit=uSe.bind(t)}function AG(t){return(t.childAnnotationUIDs??[]).map(n=>Ta(n).data.contour.polyline)}function Ih(t,e){const n=AG(t),r=[];return n.forEach(a=>{const i=a.length,o=new Array(i);for(let s=0;s<i;s++)o[s]=e.worldToCanvas(a[s]);r.push(o)}),r}const{pointsAreWithinCloseContourProximity:vSe}=gu;function gSe(t,e){const n={toolGroupId:this.toolGroupId,toolName:this.getToolName(),viewportId:t.viewport.id,annotationUID:e.annotationUID},{lineWidth:r,lineDash:a,color:i,fillColor:o,fillOpacity:s}=this.getAnnotationStyle({annotation:e,styleSpecifier:n}),{closed:c}=e.data.contour;return{color:i,width:r,lineDash:a,fillColor:o,fillOpacity:s,closePath:c}}function dSe(t,e,n){var r;(r=t==null?void 0:t.viewport)!=null&&r.getImageData()&&(n.data.contour.closed?this.renderClosedContour(t,e,n):n.data.isOpenUShapeContour?(mSe(t,n),this.renderOpenUShapedContour(t,e,n)):this.renderOpenContour(t,e,n))}function mSe(t,e){e.data.openUShapeContourVectorToPeak||(e.data.openUShapeContourVectorToPeak=p2e(t,e))}function hSe(t,e,n){if(n.parentAnnotationUID)return;const{viewport:r}=t,a=this._getRenderingOptions(t,n),i=n.data.contour.polyline.map(l=>r.worldToCanvas(l)),o=Ih(n,r),s=[i,...o];zl(e,n.annotationUID,"1",s,a)}function pSe(t,e,n){var c;const{viewport:r}=t,a=this._getRenderingOptions(t,n),i=n.data.contour.polyline.map(l=>r.worldToCanvas(l));c0(e,n.annotationUID,"1",i,a);const s=n.data.handles.activeHandleIndex;if(((c=this.configuration.alwaysRenderOpenContourHandles)==null?void 0:c.enabled)===!0){const l=this.configuration.alwaysRenderOpenContourHandles.radius,u="0",f=[i[0],i[i.length-1]];s===0?f.shift():s===1&&f.pop(),Hr(e,n.annotationUID,u,f,{color:a.color,handleRadius:l})}if(s!==null){const l="1",u=s===0?0:i.length-1,f=i[u];Hr(e,n.annotationUID,l,[f],{color:a.color})}}function SSe(t,e,n){const{viewport:r}=t,{openUShapeContourVectorToPeak:a}=n.data,{polyline:i}=n.data.contour;if(this.renderOpenContour(t,e,n),!a)return;const o=r.worldToCanvas(i[0]),s=r.worldToCanvas(i[i.length-1]),c=[r.worldToCanvas(a[0]),r.worldToCanvas(a[1])],l=this._getRenderingOptions(t,n);c0(e,n.annotationUID,"first-to-last",[o,s],{color:l.color,width:l.width,closePath:!1,lineDash:"2,2"}),c0(e,n.annotationUID,"midpoint-to-open-contour",[c[0],c[1]],{color:l.color,width:l.width,closePath:!1,lineDash:"2,2"})}function CSe(t,e,n){const r=this._getRenderingOptions(t,n),{allowOpenContours:a}=this.configuration,{canvasPoints:i}=this.drawData;if(r.closePath=!1,c0(e,n.annotationUID,"1",i,r),a){const o=i[0],s=i[i.length-1];vSe(o,s,this.configuration.closeContourProximity)?c0(e,n.annotationUID,"2",[s,o],r):Hr(e,n.annotationUID,"0",[o],{color:r.color,handleRadius:2})}}function ISe(t,e,n){const{viewport:r}=t,{fusedCanvasPoints:a}=this.editData;if(a===void 0){this.renderClosedContour(t,e,n);return}const i=Ih(n,r),o=[a,...i],s=this._getRenderingOptions(t,n),c="preview-1";n.parentAnnotationUID&&s.fillOpacity&&(s.fillOpacity=0),zl(e,n.annotationUID,c,o,s)}function DSe(t,e,n){const{fusedCanvasPoints:r}=this.editData;if(r===void 0){this.renderOpenContour(t,e,n);return}const a=this._getRenderingOptions(t,n);c0(e,n.annotationUID,"preview-1",r,a)}function ESe(t,e,n){if(n.parentAnnotationUID)return;const{viewport:r}=t,a=this._getRenderingOptions(t,n),i=n.data.contour.polyline.map(d=>r.worldToCanvas(d)),o=Ih(n,r),s="1",c=i[0],l=6,u=100,f=[];for(let d=0;d<u;d++){const m=d/u*2*Math.PI,h=c[0]+l*Math.cos(m),C=c[1]+l*Math.sin(m);f.push([h,C])}const v=[[c[0]-l*2,c[1]],[c[0]+l*2,c[1]],[c[0],c[1]-l*2],[c[0],c[1]+l*2]];zl(e,n.annotationUID,s+"-crosshair_v",[v[0],v[1]],a),zl(e,n.annotationUID,s+"-crosshair_h",[v[2],v[3]],a);const g=[f,...o];zl(e,n.annotationUID,s,g,a)}function TSe(t){t.renderContour=dSe.bind(t),t.renderClosedContour=hSe.bind(t),t.renderOpenContour=pSe.bind(t),t.renderPointContourWithMarker=ESe.bind(t),t.renderOpenUShapedContour=SSe.bind(t),t.renderContourBeingDrawn=CSe.bind(t),t.renderClosedContourBeingEdited=ISe.bind(t),t.renderOpenContourBeingEdited=DSe.bind(t),t._getRenderingOptions=gSe.bind(t)}function gs(t){const e=ySe(t),n=(e.top[1]+e.bottom[1])/2;return[e.right[0],n]}function ySe(t){const e=[t[0],t[1]].sort(o),n=[t[0],t[1]].sort(s),r=e[e.length-1],a=n[0],i=n[n.length-1];return{top:a,bottom:i,right:r};function o(c,l){return c[0]<l[0]?-1:1}function s(c,l){return c[1]<l[1]?-1:1}}const MSe=Object.freeze(Object.defineProperty({__proto__:null,getTextBoxCoordsCanvas:gs},Symbol.toStringTag,{value:"Module"}));function ac(t,e){if(t instanceof zr){const n=nc(e),r=Ye.getVolume(n);return!!(r!=null&&r.scaling)&&Object.keys(r.scaling).length>0}else if(t instanceof Xr){const{preScale:n}=t.getImageData()||{};return!!(n!=null&&n.scaled)}else return!1}function hy(t,e){let n=0;for(let r=0;r<t.length-1;r++){const a=t[r],i=t[r+1];n+=Math.sqrt(Math.pow(i[0]-a[0],2)+Math.pow(i[1]-a[1],2))}if(e){const r=t[0],a=t[t.length-1];n+=Math.sqrt(Math.pow(a[0]-r[0],2)+Math.pow(a[1]-r[1],2))}return n}const{DefaultHistoryMemo:$p}=Y5,kd=class kd{constructor(e,n){const r=kd.mergeDefaultProps(kd.defaults,n),a=pi(r,e),{configuration:i={},supportedInteractionTypes:o,toolGroupId:s}=a;this.toolGroupId=s,this.supportedInteractionTypes=o||[],this.configuration=Object.assign({},i),this.mode=vr.Disabled}static mergeDefaultProps(e={},n){return n?pi(e,n):e}get toolName(){return this.getToolName()}getToolName(){return this.constructor.toolName}applyActiveStrategy(e,n){var i;const{strategies:r,activeStrategy:a}=this.configuration;return(i=r[a])==null?void 0:i.call(this,e,n)}applyActiveStrategyCallback(e,n,r,...a){var s;const{strategies:i,activeStrategy:o}=this.configuration;if(!i[o])throw new Error(`applyActiveStrategyCallback: active strategy ${o} not found, check tool configuration or spellings`);return(s=i[o][r])==null?void 0:s.call(this,e,n,...a)}setConfiguration(e){this.configuration=pi(this.configuration,e)}setActiveStrategy(e){this.setConfiguration({activeStrategy:e})}getTargetImageData(e){if(e.startsWith("imageId:")){const n=e.split("imageId:")[1],r=ca(n);let a=ZS(r);return!a||!a.length||(a=a.filter(i=>i.getCurrentImageId()===n),!a||!a.length)?void 0:a[0].getImageData()}else if(e.startsWith("volumeId:")){const n=nc(e),r=ih(n);return!r||!r.length?void 0:r[0].getImageData()}else if(e.startsWith("videoId:")){const n=ca(e),r=ZS(n);return!r||!r.length?void 0:r[0].getImageData()}else throw new Error('getTargetIdImage: targetId must start with "imageId:" or "volumeId:"')}getTargetId(e){var r;const n=(r=e.getViewReferenceId)==null?void 0:r.call(e);if(n)return n;throw new Error("getTargetId: viewport must have a getViewReferenceId method")}undo(){this.doneEditMemo(),$p.undo()}redo(){$p.redo()}static createZoomPanMemo(e){const n={pan:e.getPan(),zoom:e.getZoom()},r={restoreMemo:()=>{const a=e.getPan(),i=e.getZoom();e.setZoom(n.zoom),e.setPan(n.pan),e.render(),n.pan=a,n.zoom=i}};return $p.push(r),r}doneEditMemo(){var e,n;(n=(e=this.memo)==null?void 0:e.commitMemo)!=null&&n.call(e)&&$p.push(this.memo),this.memo=null}};kd.defaults={configuration:{strategies:{},defaultStrategy:void 0,activeStrategy:void 0,strategyOptions:{}}};let Xa=kd;Xa.toolName="BaseTool";const ql=new Set;function xG(t,e=!0){const n=bG();t&&(e?PSe(t,ql,n):NG(t,ql,n)),LG(n,ql)}function _Se(){const t=bG();ASe(ql,t),LG(t,ql)}function OSe(){return Array.from(ql)}function Ya(t){return ql.has(t)}function wSe(){return ql.size}function RG(t){const e=Ya(t);return xG(t,e),e}function bG(){return Object.freeze({added:[],removed:[],locked:[]})}function PSe(t,e,n){if(!e.has(t)){e.add(t),n.added.push(t);const r=Ta(t);r&&(r.isLocked=!0)}}function NG(t,e,n){if(e.delete(t)){n.removed.push(t);const r=Ta(t);r&&(r.isLocked=!1)}}function ASe(t,e){t.forEach(n=>{NG(n,t,e)})}function LG(t,e){(t.added.length>0||t.removed.length>0)&&(e.forEach(n=>void t.locked.push(n)),Dt(ot,B.ANNOTATION_LOCK_CHANGE,t))}const xSe=Object.freeze(Object.defineProperty({__proto__:null,checkAndSetAnnotationLocked:RG,getAnnotationsLocked:OSe,getAnnotationsLockedCount:wSe,isAnnotationLocked:Ya,setAnnotationLocked:xG,unlockAllAnnotations:_Se},Symbol.toStringTag,{value:"Module"})),L0=new Set;function xs(t,e=!0,n=!1){e?RSe(t,n):J_(t)}function RSe(t,e=!1){const n=FG();if(!e){VG(L0,n);const r=Ta(t);r&&(r.isSelected=!0)}if(t&&!L0.has(t)){L0.add(t),n.added.push(t);const r=Ta(t);r&&(r.isSelected=!0)}kG(n,L0)}function J_(t){const e=FG();if(t){if(L0.delete(t)){e.removed.push(t);const n=Ta(t);n.isSelected=!1}}else VG(L0,e);kG(e,L0)}function UG(){return Array.from(L0)}function bSe(t){return UG().filter(e=>{var r;const n=Ta(e);return((r=n==null?void 0:n.metadata)==null?void 0:r.toolName)===t})}function Dh(t){return L0.has(t)}function NSe(){return L0.size}function FG(){return Object.freeze({added:[],removed:[],selection:[]})}function VG(t,e){t.forEach(n=>{if(t.delete(n)){e.removed.push(n);const r=Ta(n);r&&(r.isSelected=!1)}})}function kG(t,e){(t.added.length>0||t.removed.length>0)&&(e.forEach(n=>void t.selection.push(n)),Dt(ot,B.ANNOTATION_SELECTION_CHANGE,t))}const LSe=Object.freeze(Object.defineProperty({__proto__:null,deselectAnnotation:J_,getAnnotationsSelected:UG,getAnnotationsSelectedByToolName:bSe,getAnnotationsSelectedCount:NSe,isAnnotationSelected:Dh,setAnnotationSelected:xs},Symbol.toStringTag,{value:"Module"}));function GG(t){if(t){if(t.data&&t.highlighted)return bc.Highlighted;if(Dh(t.annotationUID))return bc.Selected;if(Ya(t.annotationUID))return bc.Locked;if(t.data&&t.autoGenerated)return bc.AutoGenerated}return bc.Default}function USe(t,e,n){const r=mv("textBoxFontSize",t,e,n),a=mv("textBoxFontFamily",t,e,n);return`${r}px ${a}`}const FSe=Object.freeze(Object.defineProperty({__proto__:null,getFont:USe,getState:GG,style:I_},Symbol.toStringTag,{value:"Module"}));class du extends Xa{constructor(){super(...arguments),this.onImageSpacingCalibrated=e=>{const{element:n,imageId:r}=e.detail,a=ca(r),i=v0();i.getFramesOfReference().forEach(s=>{const l=i.getAnnotations(s)[this.getToolName()];!l||!l.length||(l.forEach(u=>{var v;if(!((v=u.metadata)!=null&&v.referencedImageId))return;ca(u.metadata.referencedImageId)===a&&(u.invalidated=!0,u.data.cachedStats={})}),zv(n))})}}filterInteractableAnnotationsForElement(e,n){if(!(n!=null&&n.length))return[];const r=Ae(e),{viewport:a}=r;return Sh(a,n)}createAnnotation(e){const n=e.detail,{currentPoints:r,element:a}=n,{world:i}=r,o=Ae(a),{viewport:s}=o,c=s.getCamera(),{viewPlaneNormal:l,viewUp:u,position:f}=c,v=this.getReferencedImageId(s,i,l,u),g=s.getViewReference({points:[i]});return{highlighted:!0,invalidated:!0,metadata:{toolName:this.getToolName(),...g,referencedImageId:v,viewUp:u,cameraPosition:f},data:{cachedStats:{},handles:{points:[],activeHandleIndex:null,textBox:{hasMoved:!1,worldPosition:[0,0,0],worldBoundingBox:{topLeft:[0,0,0],topRight:[0,0,0],bottomLeft:[0,0,0],bottomRight:[0,0,0]}}}}}}getReferencedImageId(e,n,r,a){const i=this.getTargetId(e);let o=i.split(/^[a-zA-Z]+:/)[1];if(e instanceof zr){const s=nc(i),c=Ye.getVolume(s);o=jc(c,n,r)}return o}getStyle(e,n,r){return mv(e,n,GG(r),this.mode)}}du.toolName="AnnotationDisplayTool";const x1=new Set;function BG(t,e=!0){const n=WG();t&&(e?HG(t,x1,n):kSe(t,x1,n)),$G(n)}function VSe(){const t=WG();x1.forEach(e=>{HG(e,x1,t)}),$G(t)}function Gi(t){if(Ta(t))return!x1.has(t)}function WG(){return Object.freeze({lastVisible:[],lastHidden:[],hidden:[]})}function HG(t,e,n){if(e.delete(t)){n.lastVisible.push(t);const r=Ta(t);r.isVisible=!0}}function kSe(t,e,n){e.has(t)||(e.add(t),Dh(t)&&J_(t),n.lastHidden.push(t))}function $G(t){(t.lastHidden.length>0||t.lastVisible.length>0)&&(x1.forEach(e=>void t.hidden.push(e)),Dt(ot,B.ANNOTATION_VISIBILITY_CHANGE,t))}function zG(t){const e=!x1.has(t);return BG(t,e),e}const GSe=Object.freeze(Object.defineProperty({__proto__:null,checkAndSetAnnotationVisibility:zG,isAnnotationVisible:Gi,setAnnotationVisibility:BG,showAllAnnotations:VSe},Symbol.toStringTag,{value:"Module"})),{DefaultHistoryMemo:BSe}=Y5,{PointsManager:WSe}=Zn;class Br extends du{static createAnnotation(...e){let n={annotationUID:null,highlighted:!0,invalidated:!0,metadata:{toolName:this.toolName},data:{text:"",handles:{points:new Array,textBox:{hasMoved:!1,worldPosition:[0,0,0],worldBoundingBox:{topLeft:[0,0,0],topRight:[0,0,0],bottomLeft:[0,0,0],bottomRight:[0,0,0]}}},label:""}};for(const r of e)n=pi(n,r);return n}static createAnnotationForViewport(e,...n){return this.createAnnotation({metadata:e.getViewReference()},...n)}static createAndAddAnnotation(e,...n){const r=this.createAnnotationForViewport(e,...n);qn(r,e.element),$r(r,e.element)}constructor(e,n){var r,a;super(e,n),this.mouseMoveCallback=(i,o)=>{if(!o)return!1;const{element:s,currentPoints:c}=i.detail,l=c.canvas;let u=!1;for(const f of o){if(Ya(f.annotationUID)||!Gi(f.annotationUID))continue;const{data:v}=f,g=v.handles?v.handles.activeHandleIndex:void 0,d=this._imagePointNearToolOrHandle(s,f,l,6),m=d&&!f.highlighted,h=!d&&f.highlighted;m||h?(f.highlighted=!f.highlighted,u=!0):v.handles&&v.handles.activeHandleIndex!==g&&(u=!0)}return u},this.isSuvScaled=Br.isSuvScaled,(r=e.configuration)!=null&&r.getTextLines&&(this.configuration.getTextLines=e.configuration.getTextLines),(a=e.configuration)!=null&&a.statsCalculator&&(this.configuration.statsCalculator=e.configuration.statsCalculator)}getHandleNearImagePoint(e,n,r,a){const i=Ae(e),{viewport:o}=i,{data:s}=n,{isCanvasAnnotation:c}=s,{points:l,textBox:u}=s.handles;if(u){const{worldBoundingBox:f}=u;if(f){const v={topLeft:o.worldToCanvas(f.topLeft),topRight:o.worldToCanvas(f.topRight),bottomLeft:o.worldToCanvas(f.bottomLeft),bottomRight:o.worldToCanvas(f.bottomRight)};if(r[0]>=v.topLeft[0]&&r[0]<=v.bottomRight[0]&&r[1]>=v.topLeft[1]&&r[1]<=v.bottomRight[1])return s.handles.activeHandleIndex=null,u}}for(let f=0;f<(l==null?void 0:l.length);f++){const v=l[f],g=c?v.slice(0,2):o.worldToCanvas(v);if(sa(r,g)<a===!0)return s.handles.activeHandleIndex=f,v}s.handles.activeHandleIndex=null}getLinkedTextBoxStyle(e,n){return{visibility:this.getStyle("textBoxVisibility",e,n),fontFamily:this.getStyle("textBoxFontFamily",e,n),fontSize:this.getStyle("textBoxFontSize",e,n),color:this.getStyle("textBoxColor",e,n),shadow:this.getStyle("textBoxShadow",e,n),background:this.getStyle("textBoxBackground",e,n),lineWidth:this.getStyle("textBoxLinkLineWidth",e,n),lineDash:this.getStyle("textBoxLinkLineDash",e,n)}}static isSuvScaled(e,n,r){var i;if(e instanceof zr){const o=nc(n),s=Ye.getVolume(o);return((i=s==null?void 0:s.scaling)==null?void 0:i.PT)!==void 0}const a=r&&Lt("scalingModule",r);return typeof(a==null?void 0:a.suvbw)=="number"}getAnnotationStyle(e){const{annotation:n,styleSpecifier:r}=e,a=g=>this.getStyle(g,r,n),{annotationUID:i}=n,o=Gi(i),s=Ya(i),c=a("lineWidth"),l=a("lineDash"),u=a("color"),f=a("shadow"),v=this.getLinkedTextBoxStyle(r,n);return{visibility:o,locked:s,color:u,lineWidth:c,lineDash:l,lineOpacity:1,fillColor:u,fillOpacity:0,shadow:f,textbox:v}}_imagePointNearToolOrHandle(e,n,r,a){if(this.getHandleNearImagePoint(e,n,r,a)||this.isPointNearTool(e,n,r,a,"mouse"))return!0}static createAnnotationState(e,n){const{data:r,annotationUID:a}=e,i={...r,cachedStats:{}};delete i.contour,delete i.spline;const o={annotationUID:a,data:structuredClone(i),deleting:n},s=r.contour;return s&&(o.data.contour={...s,polyline:null,pointsManager:WSe.create3(s.polyline.length,s.polyline)}),o}static createAnnotationMemo(e,n,r){if(!n)return;const{newAnnotation:a,deleting:i=a?!1:void 0}=r||{},{annotationUID:o}=n,s=Br.createAnnotationState(n,i),c={restoreMemo:()=>{const l=Br.createAnnotationState(n,i),{viewport:u}=Ae(e)||{};if(u==null||u.setViewReference(n.metadata),s.deleting===!0){if(s.deleting=!1,Object.assign(n.data,s.data),n.data.contour){const v=n.data;v.contour.polyline=s.data.contour.pointsManager.points,delete s.data.contour.pointsManager,v.segmentation&&O1(n)}s.data=l.data,qn(n,e),xs(n.annotationUID,!0),u==null||u.render();return}if(s.deleting===!1){s.deleting=!0,s.data=l.data,xs(n.annotationUID),sr(n.annotationUID),u==null||u.render();return}const f=Ta(o);if(!f){console.warn("No current annotation");return}Object.assign(f.data,s.data),f.data.contour&&(f.data.contour.polyline=s.data.contour.pointsManager.points),s.data=l.data,f.invalidated=!0,$r(f,e,ia.History)}};return BSe.push(c),c}createMemo(e,n,r){this.memo||(this.memo=Br.createAnnotationMemo(e,n,r))}}Br.toolName="AnnotationTool";class HSe extends Br{constructor(e,n){super(e,n)}renderAnnotation(e,n){let r=!1;const{viewport:a}=e,{element:i}=a;if(!a.getRenderingEngine())return console.warn("Rendering Engine has been destroyed"),r;let o=nr(this.getToolName(),i);if(!(o!=null&&o.length)||(o=this.filterInteractableAnnotationsForElement(i,o),!(o!=null&&o.length)))return r;const s=this.getTargetId(a),c={toolGroupId:this.toolGroupId,toolName:this.getToolName(),viewportId:e.viewport.id};for(let l=0;l<o.length;l++){const u=o[l];c.annotationUID=u.annotationUID;const f=this.getAnnotationStyle({annotation:u,styleSpecifier:c});if(!f.visibility)continue;const v=this.renderAnnotationInstance({enabledElement:e,targetId:s,annotation:u,annotationStyle:f,svgDrawingHelper:n});r||(r=v),u.invalidated=!1}return r}createAnnotation(e){const n=super.createAnnotation(e);return Object.assign(n.data,{contour:{polyline:[],closed:!1}}),Object.assign(n,{interpolationUID:"",autoGenerated:!1}),n}addAnnotation(e,n){return qn(e,n)}cancelAnnotation(e){}moveAnnotation(e,n){const{points:r}=e.data.handles;for(let a=0,i=r.length;a<i;a++){const o=r[a];o[0]+=n[0],o[1]+=n[1],o[2]+=n[2]}e.invalidated=!0,LI(e).forEach(a=>this.moveAnnotation(a,n))}updateContourPolyline(e,n,r,a){var o;const i=((o=this.configuration)==null?void 0:o.decimate)||{};nl(e,n,r,{decimate:{enabled:!!i.enabled,epsilon:i.epsilon},updateWindingDirection:a==null?void 0:a.updateWindingDirection})}getPolylinePoints(e){var n;return((n=e.data.contour)==null?void 0:n.polyline)??e.data.polyline}renderAnnotationInstance(e){const{enabledElement:n,annotationStyle:r,svgDrawingHelper:a}=e,i=e.annotation;if(i.parentAnnotationUID)return;const{annotationUID:o}=i,{viewport:s}=n,{worldToCanvas:c}=s,l=this.getPolylinePoints(i).map(C=>c(C)),{lineWidth:u,lineDash:f,color:v,fillColor:g,fillOpacity:d}=r,m=Ih(i,s),h=[l,...m];return zl(a,o,"contourPolyline",h,{color:v,lineDash:f,lineWidth:Math.max(.1,u),fillColor:g,fillOpacity:d}),!0}}class qG{constructor(e){this.getGroupKey=n=>{if(typeof n=="string")return n;const a=Ae(n);if(!a)throw new Error("Element not enabled, you must have an enabled element if you are not providing a FrameOfReferenceUID");return a.FrameOfReferenceUID},this._imageVolumeModifiedHandler=n=>{const r=n.detail,{FrameOfReferenceUID:a}=r,o=this.annotations[a];o&&Object.keys(o).forEach(s=>{o[s].forEach(l=>{l.invalidated!==void 0&&(l.invalidated=!0)})})},this.getFramesOfReference=()=>Object.keys(this.annotations),this.getAnnotations=(n,r)=>{const a=this.annotations;return a[n]?r?a[n][r]?a[n][r]:[]:a[n]:[]},this.getAnnotation=n=>{const r=this.annotations;for(const a in r){const i=r[a];for(const o in i){const s=i[o];for(const c of s)if(n===c.annotationUID)return c}}},this.getNumberOfAnnotations=(n,r)=>{const a=this.getAnnotations(n,r);if(!a.length)return 0;if(r)return a.length;let i=0;for(const o in a)i+=a[o].length;return i},this.addAnnotation=(n,r)=>{const{metadata:a}=n,{FrameOfReferenceUID:i,toolName:o}=a;r=r||i;const s=this.annotations;let c=s[r];c||(s[r]={},c=s[r]);let l=c[o];l||(c[o]=[],l=c[o]),this.preprocessingFn&&(n=this.preprocessingFn(n)),l.push(n)},this.removeAnnotation=n=>{const{annotations:r}=this;for(const a in r){const i=r[a];for(const o in i){const s=i[o],c=s.findIndex(l=>l.annotationUID===n);c!==-1&&(s.splice(c,1),s.length===0&&delete i[o])}Object.keys(i).length===0&&delete r[a]}},this.removeAnnotations=(n,r)=>{const a=this.annotations,i=[];if(!a[n])return i;if(r){const o=a[n][r];for(const s of o)this.removeAnnotation(s.annotationUID),i.push(s)}else for(const o in a[n]){const s=a[n][o];for(const c of s)this.removeAnnotation(c.annotationUID),i.push(c)}return i},this.saveAnnotations=(n,r)=>{const a=this.annotations;if(n&&r){const i=a[n];if(!i)return;const o=i[r];return structuredClone(o)}else if(n){const i=a[n];return structuredClone(i)}return structuredClone(a)},this.restoreAnnotations=(n,r,a)=>{const i=this.annotations;if(r&&a){let o=i[r];o||(i[r]={},o=i[r]),o[a]=n}else r?i[r]=n:this.annotations=structuredClone(n)},this.getAllAnnotations=()=>Object.values(this.annotations).map(n=>Object.values(n)).flat(2),this.getNumberOfAllAnnotations=()=>{let n=0;const r=this.annotations;for(const a in r){const i=r[a];for(const o in i){const s=i[o];n+=s.length}}return n},this.removeAllAnnotations=()=>{const n=[];for(const r of this.getAllAnnotations())this.removeAnnotation(r.annotationUID),n.push(r);return n},e||(e=Cr()),this.annotations={},this.uid=e,ot.addEventListener(vt.IMAGE_VOLUME_MODIFIED,this._imageVolumeModifiedHandler)}setPreprocessingFn(e){this.preprocessingFn=e}}const $Se=new qG("DEFAULT");class zSe{constructor(){this.annotationUIDs=new Set,this._isVisible=!0,this.visibleFilter=this.unboundVisibleFilter.bind(this)}unboundVisibleFilter(e){return!this._isVisible||!this.annotationUIDs.has(e)}has(e){return this.annotationUIDs.has(e)}setVisible(e=!0,n,r){this._isVisible!==e&&(this._isVisible=e,this.annotationUIDs.forEach(a=>{const i=Ta(a);if(!i){this.annotationUIDs.delete(a);return}if(i.isVisible===e||!e&&(r==null?void 0:r(a))===!1)return;i.isVisible=e;const o={...n,annotation:i};Dt(ot,B.ANNOTATION_MODIFIED,o)}))}get isVisible(){return this._isVisible}findNearby(e,n){const r=[...this.annotationUIDs];if(r.length===0)return null;if(!e)return r[n===1?0:r.length-1];const a=r.indexOf(e);return a===-1||a+n<0||a+n>=r.length?null:r[a+n]}add(...e){e.forEach(n=>this.annotationUIDs.add(n))}remove(...e){e.forEach(n=>this.annotationUIDs.delete(n))}clear(){this.annotationUIDs.clear()}}const qSe=t=>(t.data||(t.data={}),t.data.handles||(t.data.handles={}),t.data.handles.textBox||(t.data.handles.textBox={}),t),jSe=t=>(t.data||(t.data={}),t.data.cachedStats||(t.data.cachedStats={}),t),e4=$Se,QSe=t=>{t=qSe(t),t=jSe(t);const e=t.annotationUID,n=RG(e);t.isLocked=n;const r=zG(e);return t.isVisible=r,t};e4.setPreprocessingFn(QSe);y_(e4);function KSe(){y_(e4)}const i0={...Ome,resetAnnotationManager:KSe},XSe=Object.freeze(Object.defineProperty({__proto__:null,AnnotationGroup:zSe,FrameOfReferenceSpecificAnnotationManager:qG,config:FSe,locking:xSe,selection:LSe,state:i0,visibility:GSe},Symbol.toStringTag,{value:"Module"})),mP="PlanarFreehandContourSegmentationTool";function t4(t,e=[]){const{viewport:n,sliceData:r,annotation:a}=t,i=new Map,{toolName:o,originalToolName:s}=a.metadata,c=s||o,l=(nr(c,n.element)||[]).filter(u=>!u.metadata.originalToolName||u.metadata.originalToolName===c);if(c!==mP){const u=nr(mP,n.element);u!=null&&u.length&&u.forEach(f=>{const{metadata:v}=f;v.originalToolName===c&&v.originalToolName!==v.toolName&&l.push(f)})}if(!(l!=null&&l.length))return i;for(let u=0;u<r.numberOfSlices;u++){const f=l.filter(g=>g.metadata.sliceIndex===u);if(!(f!=null&&f.length))continue;const v=f.filter(g=>e.every(d=>{const m=d.parentKey?d.parentKey(g):g,h=m==null?void 0:m[d.key];return Array.isArray(h)?h.every((C,p)=>C===d.value[p]):h===d.value}));v.length&&i.set(u,v)}return i}function YSe(t,e){const n=t4(t,e),r=[];if(!(n!=null&&n.size))return r;for(const a of n.values())a.forEach(i=>{r.push(i)});return r}function jG(t,e,n){const r=pi({data:{},metadata:{}},n);return Object.assign(r,{highlighted:!1,invalidated:!0,autoGenerated:!0,annotationUID:void 0,cachedStats:{},childAnnotationUIDs:[],parentAnnotationUID:void 0}),Object.assign(r.data,{handles:{points:e.points||e||[],interpolationSources:e.sources,activeHandleIndex:null,textBox:{hasMoved:!1,worldPosition:[0,0,0],worldBoundingBox:{topLeft:[0,0,0],topRight:[0,0,0],bottomLeft:[0,0,0],bottomRight:[0,0,0]}}},contour:{...n.data.contour,polyline:t}}),r}function ZSe(t,e){const n=t4(e,[{key:"interpolationUID",value:e.interpolationUID}]),r=JSe(n);if(!r){console.warn("No annotations found to interpolate",n);return}const a=eCe(n,t.annotationUID),i=[];for(let o=r[0]+1;o<r[1];o++)if(tCe(n,o)){const s=rCe(o,r,n);((s==null?void 0:s[0])===a||(s==null?void 0:s[1])===a)&&nCe(s,i,o)}return{interpolationData:n,interpolationList:i}}function JSe(t){let e=1/0,n=-1/0,r=!1;for(const[a,i]of t.entries())i.length&&(e=Math.min(a,e),n=Math.max(a,n),r=!0);if(r)return[e,n]}function eCe(t,e){for(const[n,r]of t)for(let a=0;a<r.length;a++)if(r[a].annotationUID===e)return n}function tCe(t,e){const n=t.get(e);return!(n!=null&&n.length)||n.length===1&&n[0].autoGenerated}function nCe(t,e,n){const[r]=t;e[r]||(e[r]={pair:t,list:[]}),e[r].list.push(n)}function rCe(t,e,n){const r=[];let a=!0;for(let i=t-1;i>=e[0];i--){const o=n.get(i);if(o!=null&&o.length){if(o[0].autoGenerated)continue;o.length>1&&(a=!1),r.push(i);break}}if(!(!a||!r.length)){for(let i=t+1;i<=e[1];i++){const o=n.get(i);if(o!=null&&o.length){if(o[0].autoGenerated)continue;o.length>1&&(a=!1),r.push(i);break}}if(!(!a||r.length<2))return r}}const{PointsManager:hP}=Zn;function aCe(t,e=12){const n=hP.create3(e);n.sources=[];const{sources:r}=n,{length:a,sources:i=[]}=t,o=5;if(a<o*3)return t.subselect(e);const s=Math.floor(Math.max(2*a/e,o*2));i.forEach(()=>r.push(hP.create3(e)));const c=iCe(t,o),l=oCe(c,e),u=[];if((l==null?void 0:l.length)>2){let f=-1;const v=s/3;l.forEach(m=>{const[h,,C]=m,p=Math.ceil((h+C)/2);C-f<v||(p-h>2*v?(vf(u,f,h,s,a),f=vf(u,h,p,s,a)):f=vf(u,f,p,s,a),C-f>v&&(f=vf(u,f,C,s,a)))});const g=u[0];py(g+a-f,a)>2*v&&vf(u,f,g-v,s,a)}else{const f=Math.floor(a/e);vf(u,-1,a-f,f,a)}return u.forEach(f=>{const v=t.getPointArray(f);n.push(v),i.forEach((g,d)=>r[d].push(g.getPoint(f)))}),n}function iCe(t,e=6){const{length:n}=t,r=Xe(),a=Xe(),i=new Float32Array(n);for(let o=0;o<n;o++){const s=t.getPoint(o),c=t.getPoint(o-e),l=t.getPoint((o+e)%n);Dr(r,s,c),Dr(a,l,s);const u=Gt(r,a)/(ov(r)*ov(a));i[o]=u}return i}function oCe(t,e){const{max:n,deviation:r}=sCe(t),{length:a}=t;if(r<.01||a<e*3)return[];const i=[];let o=null,s,c=0;for(let l=0;l<a;l++){const u=t[l];u<n-r?o?(o[2]=l,u<s&&(s=u,c=l),o[1]=c):(s=u,c=l,o=[l,l,l]):o&&(i.push(o),o=null)}return o&&(i[0][0]===0?i[0][0]=o[0]:(o[1]=c,o[2]=a-1,i.push(o))),i}function vf(t,e,n,r,a){n<e&&(n+=a);const i=n-e,o=Math.ceil(i/r);if(o<=0)return t[t.length-1]!==n&&t.push(py(n,a)),n;for(let s=1;s<=o;s++){const c=py(e+s*i/o,a);t.push(c)}return t[t.length-1]}function py(t,e){return(Math.round(t)+e)%e}function sCe(t){const{length:e}=t;let n=0,r=1/0,a=-1/0,i=0;for(let s=0;s<e;s++){const c=t[s];n+=c,r=Math.min(r,c),a=Math.max(a,c)}const o=n/e;for(let s=0;s<e;s++){const c=t[s]-o;i+=c*c}return{mean:o,max:a,min:r,sumSq:i,deviation:Math.sqrt(i/e)}}function cCe(t){const{parentAnnotationUID:e,annotationUID:n}=t;if(!e)return t.interpolationUID;const r=i0.getAnnotation(e),{interpolationUID:a}=r,i=r.childAnnotationUIDs.indexOf(n);return t.interpolationUID=`${a}-${i}`,t.interpolationUID}const{isEqual:pP}=Zn;function QG(t){const{metadata:e}=t;return PF().filter(n=>{if(n.FrameOfReferenceUID===e.FrameOfReferenceUID){const r=n.viewport,{viewPlaneNormal:a,viewUp:i}=r.getCamera();return pP(a,e.viewPlaneNormal)&&(!e.viewUp||pP(i,e.viewUp))}}).map(n=>n.viewport)}const Ed="PlanarFreehandContourSegmentationTool";async function lCe(t){const e=t.detail.annotation;if(!mh(e))return;const n=uCe(e),r=fCe(n,e);if(!r.length)return;const a=XI(e.data.contour.polyline,n),i=vCe(n,a,r);if(!i)return;const{targetAnnotation:o,targetPolyline:s,isContourHole:c}=i;if(c){const{contourHoleProcessingEnabled:l=!1}=t.detail;if(!l)return;XG(n,o,e)}else dCe(n,o,s,e,a)}function KG(t,e=!1){const n="PlanarFreehandContourSegmentationTool",r=la(t.id,t.renderingEngineId);let a;return r.hasTool(n)?r.getToolOptions(n)||(a=`Tool ${n} must be in active/passive state`):a=`Tool ${n} not added to ${r.id} toolGroup`,a&&!e&&console.warn(a),!a}function uCe(t){const e=QG(t);return e.find(r=>KG(r,!0))??e[0]}function XI(t,e){const n=t.length,r=new Array(n);for(let a=0;a<n;a++)r[a]=e.worldToCanvas(t[a]);return r}function fCe(t,e){const{annotationUID:n}=e;return NI().filter(a=>a.annotationUID&&a.annotationUID!==n&&mh(a)&&tG(a,e)&&t.isReferenceViewable(a.metadata))}function vCe(t,e,n){const r=pv(e);for(let a=0;a<n.length;a++){const i=n[a],o=XI(i.data.contour.polyline,t),s=pv(o),c=oG(r,s),l=c&&mG(e,o),u=c&&!l&&k_(o,e);if(l||u)return{targetAnnotation:i,targetPolyline:o,isContourHole:u}}}function XG(t,e,n){e.data.contour,n.data.contour,__(e,n),HI(n);const{contour:r}=n.data,a=XI(r.polyline,t);nl(n,{points:a,closed:r.closed},t);const{element:i}=t,o=new Set([Ed,e.metadata.toolName,n.metadata.toolName]);for(const s of o.values()){const c=Bt(i,s);qe(c)}}function gCe(t,e){return LI(e).map(n=>{const r=XI(n.data.contour.polyline,t);return{annotation:n,polyline:r}})}function dCe(t,e,n,r,a){var S;if(!wme(Ed)){console.warn(`${Ed} is not registered in cornerstone`);return}if(!KG(t))return;const i=a[0],o=w1(n,i),s=gCe(t,e),c=new Set(s),l=new Map,u=(I,D)=>{let E=l.get(I);E||(E=[],l.set(I,E)),E.push(D),c.delete(D)},f=[];if(o){const I=vG(n,a);f.push(I),Array.from(c.keys()).forEach(D=>u(I,D))}else gG(n,a).forEach(D=>{f.push(D),Array.from(c.keys()).forEach(E=>{k_(D,E.polyline)&&(u(D,E),c.delete(E))})});Array.from(l.values()).forEach(I=>I.forEach(D=>M_(D.annotation)));const{element:v}=t,g=Ae(v),{metadata:d,data:m}=e,{handles:h,segmentation:C}=m,{textBox:p}=h;sr(r.annotationUID),sr(e.annotationUID);for(let I=0;I<f.length;I++){const D=f[I],E=t.canvasToWorld(D[0]),T=t.canvasToWorld(D[D.length-1]),y={metadata:{...d,toolName:Ed,originalToolName:d.originalToolName||d.toolName},data:{cachedStats:{},handles:{points:[E,T],textBox:p?{...p}:void 0},contour:{polyline:[],closed:!0},spline:e.data.spline,segmentation:{...C}},annotationUID:Cr(),highlighted:!0,invalidated:!0,isLocked:!1,isVisible:void 0,interpolationUID:e.interpolationUID,interpolationCompleted:e.interpolationCompleted};nl(y,{points:D,closed:!0,targetWindingDirection:cu.Clockwise},t),qn(y,v),O1(y),$r(y,t.element),(S=l.get(D))==null||S.forEach(M=>__(y,M.annotation))}mCe(g,e,r)}function mCe(t,e,n){const{viewport:r}=t,{element:a}=r,i=new Set([Ed,e.metadata.toolName,n.metadata.toolName]);for(const o of i.values()){const s=Bt(a,o);qe(s)}return new Promise(o=>window.requestAnimationFrame(o))}const{PointsManager:Tg}=Zn,SP=.2;function eS(t){if(!t.annotation)return;const{isInterpolationUpdate:e,annotation:n}=t;queueMicrotask(()=>{try{e&&(n.isInterpolationUpdate=!0,n.autoGenerated=!1),hCe(t)}finally{e&&(n.autoGenerated=!0)}})}function hCe(t){const{annotation:e}=t;cCe(e);const{interpolationData:n,interpolationList:r}=ZSe(e,t)||{};if(!n||!r)return;const a={toolName:e.metadata.toolName,toolType:e.metadata.toolName,viewport:t.viewport};for(let l=0;l<r.length;l++)r[l]&&pCe(r[l].list,r[l].pair,n,a);const{id:i,renderingEngineId:o,element:s}=t.viewport,c={annotation:e,element:s,viewportId:i,renderingEngineId:o};r.length&&Dt(t.viewport.element,B.ANNOTATION_INTERPOLATION_PROCESS_COMPLETED,c)}function pCe(t,e,n,r){const a=n.get(e[0])[0],i=n.get(e[1])[0],o=MP(a.data.contour.polyline),s=MP(i.data.contour.polyline),{c1Interp:c,c2Interp:l}=ECe(o,s);c.kIndex=e[0],l.kIndex=e[1],t.forEach(function(u){SCe(c,l,u,e,n,o.x.length>s.x.length,r)})}function SCe(t,e,n,r,a,i,o){const[s,c]=r,l=(n-s)/(c-s),u=a.get(s)[0],f=a.get(c)[0],v=DCe(t,e,l,i),g=l>.5?f:u,d=aCe(v);a.has(n)?ICe(v,d,n,g,o):CCe(v,d,n,g,o)}function CCe(t,e,n,r,a){var u;const i=t.points,{viewport:o}=a,s=jG(i,e,r),c=o.getViewReference({sliceIndex:n});if(!c)throw new Error(`Can't find slice ${n}`);Object.assign(s.metadata,c),i0.addAnnotation(s,o.element),(u=r.onInterpolationComplete)==null||u.call(r,s,r);const{parentAnnotationUID:l}=r;if(l){const f=i0.getAnnotation(l),v=YG(f,n,a);XG(o,v,s)}}function YG(t,e,n){const{viewport:r}=n,a=i0.getAnnotations(t.metadata.toolName,r.element);for(let i=0;i<a.length;i++){const o=a[i];if(o.interpolationUID===t.interpolationUID&&o.metadata.sliceIndex===e)return o}}function ICe(t,e,n,r,a){const i=YG(r,n,a),o=t.points,s=jG(o,e,i);Object.assign(i,{metadata:s.metadata,data:s.data})}function DCe(t,e,n,r){const a=r?t.I:e.I,i=Tg.fromXYZ(t),o=Tg.fromXYZ(e),{length:s}=i,c=Tg.create3(s),l=Xe(),u=Xe(),f=Tg.create3(s);f.kIndex=t.kIndex;const v=Tg.create3(s);v.kIndex=e.kIndex;for(let g=0;g<t.x.length;g++)if(a[g]){const d=i.getPoint(g),m=o.getPoint(g);f.push(d),v.push(m),Dr(l,m,d),c.push(Hn(u,d,l,n))}return c.sources=[f,v],c}function ECe(t,e){const n=yP(t),r=yP(e),a=Math.max(Math.ceil(n[n.length-1]/SP),Math.ceil(r[r.length-1]/SP)),i=TP(n),o=TP(r),s=a+e.x.length,c=a+t.x.length,l=EP(s,i),u=EP(c,o),f=DP(s-2,t.x.length),v=DP(c-2,e.x.length),g=IP(l,f),d=IP(u,v),m=CP(t,g),h=CP(e,d);return yCe(m,h),TCe(m,h)}function TCe(t,e){const n={x:[],y:[],z:[],I:[]},r={x:[],y:[],z:[],I:[]};for(let a=0;a<t.x.length;a++)(t.I[a]||e.I[a])&&(n.x.push(t.x[a]),n.y.push(t.y[a]),n.z.push(t.z[a]),n.I.push(t.I[a]),r.x.push(e.x[a]),r.y.push(e.y[a]),r.z.push(e.z[a]),r.I.push(e.I[a]));return{c1Interp:n,c2Interp:r}}function yCe(t,e){const n=t.x.length,r={startingNode:0,totalSquaredXYLengths:1/0};for(let i=0;i<n;i++){let o=i,s=0;for(let c=0;c<n;c++)s+=(t.x[o]-e.x[c])**2+(t.y[o]-e.y[c])**2+(t.z[o]-e.z[c])**2,o++,o===n&&(o=0);s<r.totalSquaredXYLengths&&(r.totalSquaredXYLengths=s,r.startingNode=i)}const a=r.startingNode;zp(t.x,a),zp(t.y,a),zp(t.z,a),zp(t.I,a)}function zp(t,e){e-=t.length*Math.floor(e/t.length);const n=t.splice(0,e);return t.push(...n),t}function CP(t,e){const n={x:[],y:[],z:[],I:[]};for(let r=0;r<t.x.length-1;r++){n.x.push(t.x[r]),n.y.push(t.y[r]),n.z.push(t.z[r]),n.I.push(!0);const a=(t.x[r+1]-t.x[r])/(e[r]+1),i=(t.y[r+1]-t.y[r])/(e[r]+1),o=(t.z[r+1]-t.z[r])/(e[r]+1);for(let s=0;s<e[r]-1;s++)n.x.push(n.x[n.x.length-1]+a),n.y.push(n.y[n.y.length-1]+i),n.z.push(n.z[n.z.length-1]+o),n.I.push(!1)}return n}function IP(t,e){const n=[];for(let o=0;o<t.length;++o)n[o]=o;n.sort(function(o,s){return t[o]<t[s]?-1:1});const r=[];for(let o=0;o<e.length;o++)r.push(e[n[o]]);const a=r.reduce(function(o,s,c){return s&&o.push(c),o},[]),i=[];for(let o=0;o<a.length-1;o++)i.push(a[o+1]-a[o]);return i}function DP(t,e){const n=new Array(t+e);return n.fill(!1,0,t),n.fill(!0,t,t+e),n}function EP(t,e){const n=1/(t-1),r=[n];for(let a=1;a<t-2;a++)r.push(r[r.length-1]+n);return r.concat(e)}function TP(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n]/t[t.length-1]);return e}function yP(t){const e=[0];for(let n=1;n<t.x.length;n++){const r=Math.sqrt((t.x[n]-t.x[n-1])**2+(t.y[n]-t.y[n-1])**2+(t.z[n]-t.z[n-1])**2);e.push(e[n-1]+r)}return e}function MP(t){const e={x:[],y:[],z:[]};for(let n=0;n<t.length;n++)e.x[n]=t[n][0],e.y[n]=t[n][1],e.z[n]=t[n][2];return e.x.push(e.x[0]),e.y.push(e.y[0]),e.z.push(e.z[0]),e}function _P(t){const{annotation:e}=t,n=t4(t,[{key:"interpolationUID",value:t.interpolationUID}]),r=e.metadata.sliceIndex;let a=-1,i=t.sliceData.numberOfSlices;for(const[s,c]of n.entries())s===r||!c.find(u=>!u.autoGenerated)||(s<r?a=Math.max(s,a):i=Math.min(s,i));const o=[];for(const[s,c]of n.entries())s<=a||s>=i||s===r||c.forEach(l=>{l.autoGenerated&&(i0.removeAnnotation(l.annotationUID),o.push(l))});if(o.length){const s={annotations:o,element:t.viewport.element,viewportId:t.viewport.id,renderingEngineId:t.viewport.getRenderingEngine().id};Dt(t.viewport.element,B.INTERPOLATED_ANNOTATIONS_REMOVED,s)}if(a>=0&&i<t.sliceData.numberOfSlices){const s=n.get(i)[0],c={viewport:t.viewport,sliceData:{numberOfSlices:t.sliceData.numberOfSlices,imageIndex:s.metadata.sliceIndex},annotation:s,interpolationUID:s.interpolationUID};eS(c)}}function tS(t){const e=QG(t);return e.length?e[0]:void 0}const{uuidv4:MCe}=Zn,_Ce=[ia.HandlesUpdated,ia.InterpolationUpdated],Ts=class Ts{static addTool(e){this.toolNames.includes(e)||this.toolNames.push(e)}static acceptAutoGenerated(e,n={}){const{toolNames:r,segmentationId:a,segmentIndex:i,sliceIndex:o}=n;for(const s of r||Ts.toolNames){const c=i0.getAnnotations(s,e);if(c!=null&&c.length)for(const l of c){const{interpolationUID:u,data:f,autoGenerated:v,metadata:g}=l;u&&(l.interpolationCompleted=!0),v&&(i&&i!==f.segmentation.segmentIndex||o!==void 0&&g&&o!==g.sliceIndex||a&&a!==f.segmentation.segmentationId||(O1(l),l.autoGenerated=!1))}}}};Ts.toolNames=[],Ts.handleAnnotationCompleted=e=>{var g;const n=e.detail.annotation;if(!(n!=null&&n.metadata))return;const{toolName:r,originalToolName:a}=n.metadata;if(!Ts.toolNames.includes(r)&&!Ts.toolNames.includes(a))return;const i=tS(n);if(!i){console.warn("Unable to find viewport for",n);return}const o=BE(i),s={viewport:i,sliceData:o,annotation:n,interpolationUID:n.interpolationUID},c=!!n.interpolationUID;if(n.autoGenerated=!1,c){_P(s),eS(s);return}const l=[{key:"segmentIndex",value:n.data.segmentation.segmentIndex,parentKey:d=>d.data.segmentation},{key:"viewPlaneNormal",value:n.metadata.viewPlaneNormal,parentKey:d=>d.metadata},{key:"viewUp",value:n.metadata.viewUp,parentKey:d=>d.metadata}];let u=YSe(s,l);const{sliceIndex:f}=n.metadata,v=new Set;u.forEach(d=>{if(d.interpolationCompleted||d.metadata.sliceIndex===f){const{interpolationUID:m}=d;v.add(m)}}),u=u.filter(d=>!v.has(d.interpolationUID)),n.interpolationUID=((g=u[0])==null?void 0:g.interpolationUID)||MCe(),s.interpolationUID=n.interpolationUID,eS(s)},Ts.handleAnnotationUpdate=e=>{const n=e.detail.annotation,{changeType:r=ia.HandlesUpdated}=e.detail;if(!(n!=null&&n.metadata))return;const{toolName:a,originalToolName:i}=n.metadata;if(!Ts.toolNames.includes(a)&&!Ts.toolNames.includes(i)||!_Ce.includes(r))return;const o=tS(n);if(!o){console.warn("Unable to find matching viewport for annotation interpolation",n);return}n.autoGenerated&&(O1(n),n.autoGenerated=!1);const s=BE(o),c={viewport:o,sliceData:s,annotation:n,interpolationUID:n.interpolationUID,isInterpolationUpdate:r===ia.InterpolationUpdated};eS(c)},Ts.handleAnnotationDelete=e=>{const n=e.detail.annotation;if(!(n!=null&&n.metadata))return;const{toolName:r}=n.metadata;if(!Ts.toolNames.includes(r)||n.autoGenerated)return;const a=tS(n);if(!a){console.warn("No viewport, can't delete interpolated results",n);return}const i=BE(a),o={viewport:a,sliceData:i,annotation:n,interpolationUID:n.interpolationUID};n.autoGenerated=!1,_P(o)};let B0=Ts;function BE(t){return{numberOfSlices:t.getNumberOfSlices(),imageIndex:t.getCurrentImageIdIndex()}}function ZG(t){t.forEach(e=>{const n=Vi(e);if(!n){console.warn(`ToolGroup not available for ${e}`);return}n.getViewportsInfo().forEach(a=>{const{renderingEngineId:i,viewportId:o}=a,s=da(i);if(!s){console.warn(`RenderingEngine not available for ${i}`);return}const c=s.getViewport(o);zv(c.element)})})}function hm(t){return xr.getActiveSegmentation(t)}function Bo(t){const e=Un(t);if(e){const n=Object.keys(e.segments).find(r=>e.segments[r].active);return n?Number(n):void 0}}function OCe(t,e){const n=Un(t);if(!n)throw new Error(`No segmentation state found for ${t}`);const{segments:r}=n;return r[e].locked}function wCe(t,e,n=!0){const r=Un(t);if(!r)throw new Error(`No segmentation state found for ${t}`);const{segments:a}=r;a[e].locked=n,Go(t)}function q1(t){const e=Un(t);if(!e)throw new Error(`No segmentation state found for ${t}`);const{segments:n}=e;return Object.keys(n).filter(a=>n[a].locked).map(a=>parseInt(a))}const PCe=Object.freeze(Object.defineProperty({__proto__:null,getLockedSegmentIndices:q1,isSegmentIndexLocked:OCe,setSegmentIndexLocked:wCe},Symbol.toStringTag,{value:"Module"}));function JG(t,e){return xr.getSegmentationRepresentationVisibility(t,e)}function eB(t,e){const n=kI(t,e);return n?Object.entries(n.segments).reduce((a,[i,o])=>(o.visible||a.add(Number(i)),a),new Set):new Set}function tB({segmentationId:t,segmentIndex:e,viewportId:n,autoGenerated:r=!1}){const a=Jc(n,t,e),i=JG(n,{segmentationId:t,type:Ft.Contour}),o=hm(n),s=(o==null?void 0:o.segmentationId)===t,l=ls.getStyle({viewportId:n,segmentationId:t,type:Ft.Contour,segmentIndex:e});let u=1,f,v=1,g=0;r?(u=l.outlineWidthAutoGenerated??u,f=l.outlineDashAutoGenerated??f,v=l.outlineOpacity??v,g=l.fillAlphaAutoGenerated??g):s?(u=l.outlineWidth??u,f=l.outlineDash??f,v=l.outlineOpacity??v,g=l.fillAlpha??g):(u=l.outlineWidthInactive??u,f=l.outlineDashInactive??f,v=l.outlineOpacityInactive??v,g=l.fillAlphaInactive??g),Bo(t)===e&&(u+=l.activeSegmentOutlineWidthDelta),u=l.renderOutline?u:0,g=l.renderFill?g:0;const d=`rgba(${a[0]}, ${a[1]}, ${a[2]}, ${v})`,m=`rgb(${a[0]}, ${a[1]}, ${a[2]})`,C=!eB(n,{segmentationId:t,type:Ft.Contour}).has(e);return{color:d,fillColor:m,lineWidth:u,fillOpacity:g,lineDash:f,textbox:{color:d},visibility:i&&C}}const fO=class fO extends HSe{constructor(e,n){var r;super(e,n),(r=this.configuration.interpolation)!=null&&r.enabled&&B0.addTool(this.getToolName())}isContourSegmentationTool(){return!0}createAnnotation(e){const n=e.detail,{element:r}=n,a=Ae(r);if(!a)return;const{viewport:i}=a,o=super.createAnnotation(e);if(!this.isContourSegmentationTool())return o;const s=hm(i.id);if(!s)throw new Error("No active segmentation detected, create one before using scissors tool");if(!s.representationData.Contour)throw new Error("A contour segmentation must be active");const{segmentationId:c}=s,l=Bo(c);return pi(o,{data:{segmentation:{segmentationId:c,segmentIndex:l}}})}addAnnotation(e,n){const r=super.addAnnotation(e,n);return this.isContourSegmentationTool()&&O1(e),r}cancelAnnotation(e){this.isContourSegmentationTool()&&HI(e),super.cancelAnnotation(e)}getAnnotationStyle(e){const n=super.getAnnotationStyle(e);if(!this.isContourSegmentationTool())return n;const r=this._getContourSegmentationStyle(e);return pi(n,r)}renderAnnotationInstance(e){const{annotation:n}=e,{invalidated:r}=n,a=super.renderAnnotationInstance(e);if(r&&this.isContourSegmentationTool()){const{segmentationId:i}=n.data.segmentation;ki(i);const s=$v(i).map(c=>la(c).id);ZG(s)}return a}_getContourSegmentationStyle(e){const n=e.annotation,{segmentationId:r,segmentIndex:a}=n.data.segmentation,{viewportId:i}=e.styleSpecifier,o=ko(i,{segmentationId:r});if(!(o!=null&&o.length))return{};o.length>1?o.find(h=>h.segmentationId===r&&h.type===Ft.Contour):o[0];const{autoGenerated:s}=n,l=q1(r).includes(a),{color:u,fillColor:f,lineWidth:v,fillOpacity:g,lineDash:d,visibility:m}=tB({segmentationId:r,segmentIndex:a,viewportId:i,autoGenerated:s});return{color:u,fillColor:f,lineWidth:v,fillOpacity:g,lineDash:d,textbox:{color:u},visibility:m,locked:l}}};fO.PreviewSegmentIndex=255;let pm=fO;function mu(t,e,n){return t==="CT"?"HU":t==="PT"?ACe(e,n):""}function ACe(t,e){if(!e.isPreScaled)return"raw";if(e.isSuvScaled)return"SUV";const n=Lt("generalSeriesModule",t);if((n==null?void 0:n.modality)==="PT"){const r=Lt("petSeriesModule",t);return(r==null?void 0:r.units)||"unitless"}return"unknown"}const{pointCanProjectOnLine:OP}=gu,{EPSILON:xCe}=fu,RCe=1-xCe;let n4=class extends pm{constructor(e={},n={supportedInteractionTypes:["Mouse","Touch"],configuration:{storePointData:!1,shadow:!0,preventHandleOutsideImage:!1,contourHoleAdditionModifierKey:mi.Shift,alwaysRenderOpenContourHandles:{enabled:!1,radius:2},allowOpenContours:!0,closeContourProximity:10,checkCanvasEditFallbackProximity:6,makeClockWise:!0,subPixelResolution:4,smoothing:{smoothOnAdd:!1,smoothOnEdit:!1,knotsRatioPercentageOnAdd:40,knotsRatioPercentageOnEdit:40},interpolation:{enabled:!1,onInterpolationComplete:null},decimate:{enabled:!1,epsilon:.1},displayOnePointAsCrosshairs:!1,calculateStats:!0,getTextLines:bCe,statsCalculator:As}}){super(e,n),this.isDrawing=!1,this.isEditingClosed=!1,this.isEditingOpen=!1,this.addNewAnnotation=r=>{const a=r.detail,{element:i}=a,o=this.createAnnotation(r);this.addAnnotation(o,i);const s=Bt(i,this.getToolName());return this.activateDraw(r,o,s),r.preventDefault(),qe(s),o},this.handleSelectedCallback=(r,a,i)=>{const o=r.detail,{element:s}=o,c=Bt(s,this.getToolName());this.activateOpenContourEndEdit(r,a,c,i)},this.toolSelectedCallback=(r,a)=>{const i=r.detail,{element:o}=i,s=Bt(o,this.getToolName());a.data.contour.closed?this.activateClosedContourEdit(r,a,s):this.activateOpenContourEdit(r,a,s),r.preventDefault()},this.isPointNearTool=(r,a,i,o)=>{const s=Ae(r),{viewport:c}=s,{polyline:l}=a.data.contour;let u=c.worldToCanvas(l[0]);for(let g=1;g<l.length;g++){const d=u,m=c.worldToCanvas(l[g]);if(OP(i,d,m,o))return!0;u=m}if(!a.data.contour.closed)return!1;const f=c.worldToCanvas(l[0]),v=c.worldToCanvas(l[l.length-1]);return OP(i,f,v,o)},this.cancel=r=>{const a=this.isDrawing,i=this.isEditingOpen,o=this.isEditingClosed;a?this.cancelDrawing(r):i?this.cancelOpenContourEdit(r):o&&this.cancelClosedContourEdit(r)},this._calculateCachedStats=(r,a,i,o)=>{const{data:s}=r,{cachedStats:c}=s,{polyline:l,closed:u}=s.contour,f=Object.keys(c);for(let v=0;v<f.length;v++){const g=f[v],d=this.getTargetImageData(g);if(!d)continue;const{imageData:m,metadata:h}=d,C=l.map(D=>a.worldToCanvas(D)),p={isPreScaled:ac(a,g),isSuvScaled:this.isSuvScaled(a,g,r.metadata.referencedImageId)},S=mu(h.Modality,r.metadata.referencedImageId,p),I=us(d,()=>{const D=s.contour.polyline,E=D.length,T=new Array(E);for(let L=0;L<E;L++)T[L]=a.worldToCanvas(D[L]);const{maxX:y,maxY:M,minX:_,minY:O}=pv(T),w=a.canvasToWorld([_,O]),x=Da(m,w),P=a.canvasToWorld([y,M]),R=Da(m,P);return[x,R]});u?this.updateClosedCachedStats({targetId:g,viewport:a,canvasCoordinates:C,points:l,imageData:m,metadata:h,cachedStats:c,modalityUnit:S,calibratedScale:I}):this.updateOpenCachedStats({metadata:h,canvasCoordinates:C,targetId:g,cachedStats:c,modalityUnit:S,calibratedScale:I})}return $r(r,o.viewport.element,ia.StatsUpdated),r.invalidated=!1,c},this._renderStats=(r,a,i,o)=>{const{data:s}=r,c=this.getTargetId(a),l={toolGroupId:this.toolGroupId,toolName:this.getToolName(),viewportId:i.viewport.id},u=this.getLinkedTextBoxStyle(l,r);if(!u.visibility)return;const f=this.configuration.getTextLines(s,c);if(!f||f.length===0)return;const v=s.contour.polyline.map(I=>a.worldToCanvas(I));if(!s.handles.textBox.hasMoved){const I=gs(v);s.handles.textBox.worldPosition=a.canvasToWorld(I)}const g=a.worldToCanvas(s.handles.textBox.worldPosition),m=ro(o,r.annotationUID??"","1",f,g,v,{},u),{x:h,y:C,width:p,height:S}=m;s.handles.textBox.worldBoundingBox={topLeft:a.canvasToWorld([h,C]),topRight:a.canvasToWorld([h+p,C]),bottomLeft:a.canvasToWorld([h,C+S]),bottomRight:a.canvasToWorld([h+p,C+S])}},x2e(this),k2e(this),K2e(this),cSe(this),fSe(this),TSe(this),this._throttledCalculateCachedStats=no(this._calculateCachedStats,100,{trailing:!0})}filterInteractableAnnotationsForElement(e,n){if(!n||!n.length)return;const r=Ae(e),{viewport:a}=r;let i;if(a instanceof yr){const o=a.getCamera(),{spacingInNormalDirection:s}=Vv(a,o);i=this.filterAnnotationsWithinSlice(n,o,s)}else i=Sh(a,n);return i}filterAnnotationsWithinSlice(e,n,r){const{viewPlaneNormal:a}=n,i=e.filter(l=>{const u=l.metadata.viewPlaneNormal,f=Math.abs(Gt(a,u))>RCe;return u&&f});if(!i.length)return[];const o=r/2,{focalPoint:s}=n,c=[];for(const l of i){const f=l.data.contour.polyline[0];if(!l.isVisible)continue;const v=Xe();Dr(v,s,f);const g=Gt(v,a);Math.abs(g)<o&&c.push(l)}return c}isContourSegmentationTool(){return!1}createAnnotation(e){const n=e.detail.currentPoints.world,r=super.createAnnotation(e),a=o=>{o.data.handles.points.length=0};return pi(r,{data:{contour:{polyline:[[...n]]},label:"",cachedStats:{}},onInterpolationComplete:a})}getAnnotationStyle(e){return super.getAnnotationStyle(e)}renderAnnotationInstance(e){const{enabledElement:n,targetId:r,svgDrawingHelper:a}=e,i=e.annotation;let o=!1;const{viewport:s,renderingEngine:c}=n,l=this.isDrawing,u=this.isEditingOpen,f=this.isEditingClosed;if(!(l||u||f))this.configuration.displayOnePointAsCrosshairs&&i.data.contour.polyline.length===1?this.renderPointContourWithMarker(n,a,i):this.renderContour(n,a,i);else{const v=this.commonData.annotation.annotationUID;if(i.annotationUID===v)if(l)this.renderContourBeingDrawn(n,a,i);else if(f)this.renderClosedContourBeingEdited(n,a,i);else if(u)this.renderOpenContourBeingEdited(n,a,i);else throw new Error(`Unknown ${this.getToolName()} annotation rendering state`);else this.configuration.displayOnePointAsCrosshairs&&i.data.contour.polyline.length===1?this.renderPointContourWithMarker(n,a,i):this.renderContour(n,a,i);o=!0}if(this.configuration.calculateStats)return this._calculateStatsIfActive(i,r,s,c,n),this._renderStats(i,s,n,a),o}_calculateStatsIfActive(e,n,r,a,i){var s,c,l;const o=(s=this.commonData)==null?void 0:s.annotation.annotationUID;if(!(e.annotationUID===o&&!((c=this.commonData)!=null&&c.movingTextBox))&&!((l=this.commonData)!=null&&l.movingTextBox)){const{data:u}=e;!u.cachedStats[n]||u.cachedStats[n].areaUnit==null?(u.cachedStats[n]={Modality:null,area:null,max:null,mean:null,stdDev:null,areaUnit:null},this._calculateCachedStats(e,r,a,i)):e.invalidated&&this._throttledCalculateCachedStats(e,r,a,i)}}updateClosedCachedStats({viewport:e,points:n,imageData:r,metadata:a,cachedStats:i,targetId:o,modalityUnit:s,canvasCoordinates:c,calibratedScale:l}){var De,pe,Te;const{scale:u,areaUnit:f,units:v}=l,{voxelManager:g}=e.getImageData(),d=c[0],m=e.canvasToWorld(d),h=e.canvasToWorld([d[0]+1,d[1]]),C=e.canvasToWorld([d[0],d[1]+1]),p=Si(m,h),S=Si(m,C),I=Da(r,n[0]);I[0]=Math.floor(I[0]),I[1]=Math.floor(I[1]),I[2]=Math.floor(I[2]);let D=I[0],E=I[0],T=I[1],y=I[1],M=I[2],_=I[2];for(let Fe=1;Fe<n.length;Fe++){const Ne=Da(r,n[Fe]);Ne[0]=Math.floor(Ne[0]),Ne[1]=Math.floor(Ne[1]),Ne[2]=Math.floor(Ne[2]),D=Math.min(D,Ne[0]),E=Math.max(E,Ne[0]),T=Math.min(T,Ne[1]),y=Math.max(y,Ne[1]),M=Math.min(M,Ne[2]),_=Math.max(_,Ne[2])}const O=Da(r,n[1]);O[0]=Math.floor(O[0]),O[1]=Math.floor(O[1]),O[2]=Math.floor(O[2]);let w=ph(c)/u/u;w*=p*S;const x=.01*(E-D),P=.01*(y-T),R=.01*(_-M);D=Math.floor(D-x),E=Math.ceil(E+x),T=Math.floor(T-P),y=Math.ceil(y+P),M=Math.floor(M-R),_=Math.ceil(_+R);const L=[[D,E],[T,y],[M,_]],H=r.indexToWorld([E,y,_]),F=e.worldToCanvas(H);let U=0,V=[],X=0;const re=g.forEach(this.configuration.statsCalculator.statsCallback,{imageData:r,isInObject:(Fe,Ne)=>{let Re=!0;const k=e.worldToCanvas(Fe);return k[1]!=U&&(X=0,U=k[1],V=pG(c,k,[F[0],k[1]]),V.sort(function(A){return function(b,N){return b[A]===N[A]?0:b[A]<N[A]?-1:1}}(0))),V.length&&k[0]>V[0][0]&&(V.shift(),X++),X%2===0&&(Re=!1),Re},boundsIJK:L,returnPoints:this.configuration.storePointData}),ue=this.configuration.statsCalculator.getStatistics();i[o]={Modality:a.Modality,area:w,perimeter:hy(c,closed)/u,mean:(De=ue.mean)==null?void 0:De.value,max:(pe=ue.max)==null?void 0:pe.value,stdDev:(Te=ue.stdDev)==null?void 0:Te.value,statsArray:ue.array,pointsInShape:re,areaUnit:f,modalityUnit:s,unit:v}}updateOpenCachedStats({targetId:e,metadata:n,canvasCoordinates:r,cachedStats:a,modalityUnit:i,calibratedScale:o}){const{scale:s,units:c}=o;a[e]={Modality:n.Modality,length:hy(r,!1)/s,modalityUnit:i,getPixelValueUnitunit:c}}};function bCe(t,e){const n=t.cachedStats[e],{area:r,mean:a,stdDev:i,length:o,perimeter:s,max:c,isEmptyArea:l,unit:u,areaUnit:f,modalityUnit:v}=n||{},g=[];if(r){const d=l?"Area: Oblique not supported":`Area: ${kn(r)} ${f}`;g.push(d)}return a&&g.push(`Mean: ${kn(a)} ${v}`),Number.isFinite(c)&&g.push(`Max: ${kn(c)} ${v}`),i&&g.push(`Std Dev: ${kn(i)} ${v}`),s&&g.push(`Perimeter: ${kn(s)} ${u}`),o&&g.push(`${kn(o)} ${u}`),g}n4.toolName="PlanarFreehandROI";let Eh=class extends n4{constructor(e){const n=pi({configuration:{calculateStats:!1,allowOpenContours:!1}},e);super(n)}isContourSegmentationTool(){return!0}renderAnnotationInstance(e){const n=e.annotation,{invalidated:r}=n,a=super.renderAnnotationInstance(e);if(r){const{segmentationId:i}=n.data.segmentation;ki(i)}return a}};Eh.toolName="PlanarFreehandContourSegmentationTool";function NCe(t,e,n){const r=new Map;for(const[a,i]of t)for(const o of i){const{points:s}=o,{lineSegments:c,linesNumberOfPoints:l}=LCe(o);for(let u=0;u<c.length;u++){const f=c[u],v=[];for(let m=0;m<l[u];m++){const h=f[m];v.push([s[3*h],s[3*h+1],s[3*h+2]])}if(v.length<3)continue;const g={annotationUID:Cr(),data:{contour:{closed:!0,polyline:v},segmentation:{segmentationId:n,segmentIndex:a},handles:{}},handles:{},highlighted:!1,autoGenerated:!1,invalidated:!1,isLocked:!1,isVisible:!0,metadata:{toolName:Eh.toolName,...e.getViewReference()}};qn(g,e.element);const d=(r==null?void 0:r.get(a))||new Set;d.add(g.annotationUID),r.set(a,d)}}return r}const LCe=t=>{const{numberOfCells:e,lines:n}=t,r=[],a=[];for(let i=0;i<n.length;){const o=n[i];if(a.push(o),r.push(n.slice(i+1,i+o+1)),i+=o+1,r.length===e)break}return{lineSegments:r,linesNumberOfPoints:a}};async function UCe(t,e={}){var c;const n=(c=e.segmentIndices)!=null&&c.length?e.segmentIndices:rc(t);let r;const i=Un(t).representationData;try{i.Surface?r=await VCe(t,{segmentIndices:n,...e}):i.Labelmap&&(r=await FCe(t,{segmentIndices:n,...e}))}catch(l){throw console.error(l),l}if(!r)throw new Error("Not enough data to convert to contour, currently only support converting volume labelmap to contour if available");const{viewport:o}=e,s=NCe(r,o,t);return ls.setStyle({segmentationId:t,type:Ft.Contour},{fillAlpha:0}),{annotationUIDsMap:s}}async function FCe(t,e={}){if(!e.viewport)throw new Error("Viewport is required to compute contour from labelmap");const n=await L_(t,e);if(!(n!=null&&n.length)){console.error("Failed to convert labelmap to surface or labelmap is empty");return}const{viewport:r}=e,a=n.map(s=>({id:s.segmentIndex.toString(),points:s.data.points,polys:s.data.polys,segmentIndex:s.segmentIndex})),i=await rG(a,r);return aG(i)}async function VCe(t,e={}){var f;if(!e.viewport)throw new Error("Viewport is required to compute contour from surface");const{viewport:n}=e,r=(f=e.segmentIndices)!=null&&f.length?e.segmentIndices:rc(t),a=new Map,i=new Map,s=Un(t).representationData.Surface,c=[];s.geometryIds.forEach((v,g)=>{var d;if(r.includes(g)){a.set(g,v);const m=(d=Ye.getGeometry(v))==null?void 0:d.data;m&&c.push({id:v,points:m.points,polys:m.polys,segmentIndex:g})}}),a.forEach((v,g)=>{i.set(v,g)});const l=await rG(c,n);return aG(l)}function nB(t,e={}){return N_(t,Ft.Contour,()=>UCe(t,e),()=>{})}function kCe(t,e,n=!1){const r=Un(e),{annotationUIDsMap:a}=r.representationData.Contour;a.forEach(i=>{i.forEach(o=>{sr(o)})})}let WE=!1;function GCe(t,e,n=!1){const r=wr(t);if(!r)return;const{viewport:a}=r;n&&(kCe(t,e),a.render())}async function BCe(t,e){var i;const{segmentationId:n}=e,r=Un(n);if(!r)return;let a=r.representationData[Ft.Contour];!a&&GI(n,Ft.Contour)&&!WE&&(WE=!0,a=await nB(n,{viewport:t}),WE=!1),a&&(i=a.geometryIds)!=null&&i.length&&ipe(t,a.geometryIds,a.annotationUIDsMap,e)}const rB={render:BCe,removeRepresentation:GCe};function fs(t,e){return xr.getCurrentLabelmapImageIdForViewport(t,e)}const wP=new Map,WCe=({cfun:t,ofun:e,actor:n})=>{n.getProperty().setRGBTransferFunction(1,t),n.getProperty().setScalarOpacity(1,e)};async function HCe({viewport:t,volumeInputs:e,segmentationId:n}){var T;const r=t.getDefaultActor(),{actor:a}=r,{uid:i,callback:o}=r,s=t.getVolumeId();if((T=wP.get(i))!=null&&T.added)return{uid:i,actor:a};const c=e,l=Ye.getVolume(c[0].volumeId);if(!l)throw new Error(`imageVolume with id: ${l.volumeId} does not exist`);const{volumeId:u}=c[0],f=await G5(u);if(!f)throw new Error(`segImageVolume with id: ${f.volumeId} does not exist`);const v=f.voxelManager,{imageData:g}=f,d=Ye.getVolume(s),m=d.voxelManager,h=2,C=new Float32Array(h*d.voxelManager.getScalarDataLength()),p=g.getDimensions();for(let y=0;y<p[2];++y)for(let M=0;M<p[1];++M)for(let _=0;_<p[0];++_){const O=_+p[0]*(M+p[1]*y);C[O*h+0]=m.getAtIndex(O),C[O*h+1]=v.getAtIndex(O)}t.removeActors([i]);const S=a.getMapper(),I=ZU(S);a.setMapper(I),I.setBlendMode(I1.LABELMAP_EDGE_PROJECTION_BLEND);const D=I.getInputData().getPointData().getArray(0);D.setData(C),D.setNumberOfComponents(2),a.getProperty().setColorMixPreset(1),a.getProperty().setForceNearestInterpolation(1,!0),a.getProperty().setIndependentComponents(!0),t.addActor({actor:a,uid:i,callback:o,referencedId:s,representationUID:`${n}-${Ft.Labelmap}`}),wP.set(i,{added:!0,segmentationRepresentationUID:`${n}`,originalBlendMode:t.getBlendMode()}),a.set({preLoad:WCe});function E(y){const{segmentationId:M,modifiedSlicesToUse:_}=y.detail,{representationData:O}=Un(M),{volumeId:w}=O.Labelmap;if(w!==f.volumeId)return;const P=Ye.getVolume(w).voxelManager,R=I.getInputData().getPointData().getArray(0),L=R.getData(),H=2,F=g.getDimensions(),U=_!=null&&_.length?_:Array.from({length:F[2]},(V,X)=>X);for(const V of U)for(let X=0;X<F[1];++X)for(let re=0;re<F[0];++re){const ue=re+F[0]*(X+F[1]*V);L[ue*H+1]=P.getAtIndex(ue)}R.setData(L)}return ot.addEventListener(B.SEGMENTATION_DATA_MODIFIED,E),ot.addEventListener(B.SEGMENTATION_REPRESENTATION_REMOVED,async y=>{ot.removeEventListener(B.SEGMENTATION_DATA_MODIFIED,E);const M=t.getActor(i),{element:_,id:O}=t;t.removeActors([i]);const w=await qS({volumeId:i,blendMode:I1.MAXIMUM_INTENSITY_BLEND,callback:({volumeActor:x})=>{M.callback&&M.callback({volumeActor:x,volumeId:u})}},_,O);t.addActor({actor:w,uid:i}),t.render()}),{uid:i,actor:a}}const{uuidv4:aB}=Zn;async function $Ce(t,e,n,r){const a=Ae(t),{renderingEngine:i,viewport:o}=a,{id:s}=o,c=!0,l=!1,u=!0;if(o instanceof zr){const v=zCe(e,n);Ye.getVolume(v)||await qCe(e);const g=(r==null?void 0:r.blendMode)??I1.MAXIMUM_INTENSITY_BLEND,d=g===I1.LABELMAP_EDGE_PROJECTION_BLEND,m=[{volumeId:v,visibility:c,representationUID:`${n}-${Ft.Labelmap}`,useIndependentComponents:d,blendMode:g}];if(!m[0].useIndependentComponents)await hF(i,m,[s],l,u);else return await HCe({viewport:o,volumeInputs:m,segmentationId:n})}else{const v=[{imageId:fs(o.id,n),representationUID:`${n}-${Ft.Labelmap}`}];pF(i,v,[s])}ki(n)}function zCe(t,e){let{volumeId:n}=t;if(!n){n=aB();const r=Un(e);r.representationData.Labelmap={...r.representationData.Labelmap,volumeId:n},t.volumeId=n,Go(e)}return n}async function qCe(t){const e=t;if(!(e.imageIds.length>0))throw new Error("cannot create labelmap, no imageIds found for the volume labelmap");return await EI(t.volumeId||aB(),e.imageIds)}function jCe(t,e){const n=Ae(t),{viewport:r}=n;r.removeActors([yhe(r.id,e)])}function QCe(t,e){xr.setActiveSegmentation(t,e)}function hu(t){return hm(t)}function KCe(t,e){QCe(t,e)}const XCe=Object.freeze(Object.defineProperty({__proto__:null,getActiveSegmentation:hu,setActiveSegmentation:KCe},Symbol.toStringTag,{value:"Module"})),iB=Zc(),Jf=(t,e)=>{Dt(t,vt.WEB_WORKER_PROGRESS,{progress:e,type:Wv.POLYSEG_CONTOUR_TO_LABELMAP})};async function YCe(t,e={}){var m;const n=e.viewport,r=n.getVolumeId();if(!bF(n))throw new Error("No imageIds found, labelmap computation from contour requires viewports with imageIds");const i=Cr(),o=$1(r,{volumeId:i}),{dimensions:s,origin:c,direction:l,spacing:u,voxelManager:f}=o,{segmentIndices:v,annotationUIDsInSegmentMap:g}=oB(t,e);Jf(ot,0);const d=await iB.executeTask("polySeg","convertContourToVolumeLabelmap",{segmentIndices:v,dimensions:s,scalarData:(m=f.getCompleteScalarDataArray)==null?void 0:m.call(f),origin:c,direction:l,spacing:u,annotationUIDsInSegmentMap:g},{callbacks:[h=>{Jf(ot,h)}]});return Jf(ot,100),f.setCompleteScalarDataArray(d),o.modified(),{volumeId:o.volumeId}}async function ZCe(t,e={}){if(!e.viewport)throw new Error("No viewport provided, labelmap computation from contour requires viewports");const r=e.viewport.getImageIds();if(!r)throw new Error("No imageIds found, labelmap computation from contour requires viewports with imageIds");r.forEach(f=>{if(!Ye.getImageLoadObject(f))throw new Error("ImageIds must be cached before converting contour to labelmap")});const i=(await U5(r)).map(f=>f.imageId),{segmentIndices:o,annotationUIDsInSegmentMap:s}=oB(t,e),c=new Map;i.forEach((f,v)=>{const g=Ye.getImage(f),d=Lt(po.IMAGE_PLANE,f);let{columnCosines:m,rowCosines:h,rowPixelSpacing:C,columnPixelSpacing:p,imagePositionPatient:S}=d;m=m??[0,1,0],h=h??[1,0,0],C=C??1,p=p??1,S=S??[0,0,0];const I=qt(h[0],h[1],h[2]),D=qt(m[0],m[1],m[2]),E=Xe();gr(E,I,D);const T=[...I,...D,...E],y=[C,p,1],M=S;c.set(r[v],{direction:T,spacing:y,origin:M,scalarData:g.voxelManager.getScalarData(),imageId:f,dimensions:[g.width,g.height,1]})}),Jf(ot,0);const l=await iB.executeTask("polySeg","convertContourToStackLabelmap",{segmentationsInfo:c,annotationUIDsInSegmentMap:s,segmentIndices:o},{callbacks:[f=>{Jf(ot,f)}]});Jf(ot,100);const u=[];return l.forEach(({scalarData:f},v)=>{var h,C;const g=c.get(v),{imageId:d}=g,m=Ye.getImage(d);m.voxelManager.getScalarData().set(f),(C=(h=m.imageFrame)==null?void 0:h.pixelData)==null||C.set(f),u.push(d)}),{imageIds:u}}function oB(t,e={}){var i;const n=t.annotationUIDsMap,r=(i=e.segmentIndices)!=null&&i.length?e.segmentIndices:Array.from(n.keys()),a=new Map;return r.forEach(o=>{const s=n.get(o);let c=Array.from(s);c=c.filter(u=>!Ta(u).parentAnnotationUID);const l=c.map(u=>{var g;const f=Ta(u),v=(g=f.childAnnotationUIDs)==null?void 0:g.length;return{polyline:f.data.contour.polyline,referencedImageId:f.metadata.referencedImageId,holesPolyline:v&&f.childAnnotationUIDs.map(d=>Ta(d).data.contour.polyline)}});a.set(o,l)}),{segmentIndices:r,annotationUIDsInSegmentMap:a}}const JCe=Zc(),HE=(t,e)=>{Dt(t,vt.WEB_WORKER_PROGRESS,{progress:e,type:Wv.POLYSEG_SURFACE_TO_LABELMAP})};async function eIe(t,e){const{geometryIds:n}=t;if(!(n!=null&&n.size))throw new Error("No geometry IDs found for surface representation");const r=new Map;n.forEach((u,f)=>{const g=Ye.getGeometry(u).data,d=g.points,m=g.polys;r.set(f,{points:d,polys:m})});const{dimensions:a,direction:i,origin:o,spacing:s,voxelManager:c}=e;HE(ot,0);const l=await JCe.executeTask("polySeg","convertSurfacesToVolumeLabelmap",{segmentsInfo:r,dimensions:a,spacing:s,direction:i,origin:o},{callbacks:[u=>{HE(ot,u)}]});return HE(ot,100),c.setCompleteScalarDataArray(l),e.modified(),{volumeId:e.volumeId}}function tIe(t,e){const{segmentationId:n,config:r}=e,a={colorLUTIndex:nIe(r),...r};xr.addSegmentationRepresentation(t,n,e.type,a),e.type===Ft.Contour&&qe([t]),Go(n)}function nIe(t){const{colorLUTOrIndex:e}=t||{};return e===void 0?Id(JSON.parse(JSON.stringify(gC))):typeof e=="number"?e:Array.isArray(e)&&e.every(r=>Array.isArray(r)&&r.length===4)?Id(e):Id(JSON.parse(JSON.stringify(gC)))}function jv(t,e){e.map(n=>tIe(t,n))}function sB(t,e){return jv(t,e.map(n=>({...n,type:Ft.Contour})))}function rIe(t){const e={};for(const[n,r]of Object.entries(t))e[n]=sB(n,r);return e}function cB(t,e){return jv(t,e.map(n=>({...n,type:Ft.Labelmap})))}function aIe(t){for(const[e,n]of Object.entries(t))cB(e,n.map(r=>({...r,type:Ft.Labelmap})))}function lB(t,e){return jv(t,e.map(n=>({...n,type:Ft.Surface})))}function iIe(t){const e={};for(const[n,r]of Object.entries(t))e[n]=lB(n,r);return e}async function oIe({segmentationId:t,viewportId:e,imageIds:n,options:r}){const a=Un(t);if(r!=null&&r.removeOriginal){const i=a.representationData.Labelmap;Ye.getVolume(i.volumeId)&&Ye.removeVolumeLoadObject(i.volumeId),a.representationData.Labelmap={imageIds:n}}else a.representationData.Labelmap={...a.representationData.Labelmap,imageIds:n};await jv(e,[{segmentationId:t,type:Ft.Labelmap}]),ot.addEventListenerOnce(B.SEGMENTATION_RENDERED,()=>ki(t))}async function sIe({volumeId:t}){return{imageIds:Ye.getVolume(t).imageIds}}function cIe({segmentationId:t,options:e}){const n=Un(t);if(!n)return;const{volumeId:r}=n.representationData.Labelmap,a=Ye.getVolume(r);return oIe({segmentationId:t,viewportId:e.viewportId,imageIds:a.imageIds,options:e})}async function lIe(t,e={}){var o;const n=(o=e.segmentIndices)!=null&&o.length?e.segmentIndices:rc(t);let r;const a=Un(t),i=a.representationData;try{i.Contour?r=await uIe(t,{segmentIndices:n,...e}):i.Surface&&(r=await fIe(a.segmentationId,{segmentIndices:n,...e}))}catch(s){throw console.error(s),s}if(!r)throw new Error("Not enough data to convert to surface, currently only support converting volume labelmap to surface if available");return r}async function uIe(t,e={}){var c;const n=e.viewport?e.viewport instanceof yr:!0;if(n&&!e.viewport)throw new Error("Cannot compute labelmap from contour segmentation without providing the viewport");const r=(c=e.segmentIndices)!=null&&c.length?e.segmentIndices:rc(t),i=Un(t).representationData.Contour;return await(n?YCe:ZCe)(i,{segmentIndices:r,viewport:e.viewport})}async function fIe(t,e={}){var f;const{viewport:n}=e,r=n?n instanceof yr:!0,a=(f=e.segmentIndices)!=null&&f.length?e.segmentIndices:rc(t),i=Un(t),o=new Map;if(i.representationData.Surface.geometryIds.forEach((v,g)=>{a.includes(g)&&o.set(g,v)}),r&&!n)throw new Error("Cannot compute labelmap from surface segmentation without providing the viewport");let c;if(r){const v=n.getVolumeId();c=$1(v)}else{const v=e.viewport.getImageIds(),d=U5(v).map(m=>m.imageId);c=await EI("generatedSegmentationVolumeId",d)}const l=await eIe({geometryIds:o},c);return r?l:await sIe({volumeId:c.volumeId})}async function uB(t,e={}){return N_(t,Ft.Labelmap,()=>lIe(t,e),()=>null,()=>{xr.processLabelmapRepresentationAddition(e.viewport.id,t),setTimeout(()=>{ki(t)},0)})}const $E=255,Td=new Map;let zE=!1;function vIe(t,e,n=!1){const r=wr(t);if(Td.forEach((i,o)=>{o.includes(e)&&Td.delete(o)}),!r)return;const{viewport:a}=r;jCe(a.element,e),n&&a.render()}async function gIe(t,e){const{segmentationId:n,config:r}=e,a=Un(n);if(!a){console.warn("No segmentation found for segmentationId: ",n);return}let i=a.representationData[Ft.Labelmap],o=Wc(t.id,n);if(!i&&GI(n,Ft.Labelmap)&&!zE){if(zE=!0,i=await uB(n,{viewport:t}),!i)throw new Error(`No labelmap data found for segmentationId ${n}.`);zE=!1}if(i){if(t instanceof yr)o||await AP(t,i,n,r),o=Wc(t.id,n);else{if(!fs(t.id,n))return;o||await AP(t,i,n,r),o=Wc(t.id,n)}o&&dIe(t.id,o,e)}}function dIe(t,e,n){var D;const{segmentationId:r}=n,{cfun:a,ofun:i}=n.config,{colorLUTIndex:o}=n,s=hu(t),c=(s==null?void 0:s.segmentationId)===r,l=ls.getStyle({viewportId:t,type:Ft.Labelmap,segmentationId:r}),u=ls.getRenderInactiveSegmentations(t),f=dh(o),v=Math.min(256,f.length),{outlineWidth:g,renderOutline:d,outlineOpacity:m,activeSegmentOutlineWidthDelta:h}=PP(l,c),C=eB(t,{segmentationId:r,type:Ft.Labelmap});for(let E=0;E<v;E++){const T=E,y=f[T],_=ls.getStyle({viewportId:t,type:Ft.Labelmap,segmentationId:r,segmentIndex:T}),{fillAlpha:O,outlineWidth:w,renderFill:x,renderOutline:P}=PP(l,c,_),{forceOpacityUpdate:R,forceColorUpdate:L}=mIe(t,r,T,{fillAlpha:O,renderFill:x,renderOutline:P,segmentColor:y,outlineWidth:w,segmentsHidden:C,cfun:a,ofun:i});if(L&&a.addRGBPoint(T,y[0]/$E,y[1]/$E,y[2]/$E),R)if(x){const H=C.has(T)?0:y[3]/255*O;i.removePoint(T),i.addPointLong(T,H,.5,1)}else i.addPointLong(T,.01,.5,1)}i.setClamping(!1);const p=e.actor,{preLoad:S}=((D=p.get)==null?void 0:D.call(p,"preLoad"))||{preLoad:null};if(S?S({cfun:a,ofun:i,actor:p}):(p.getProperty().setRGBTransferFunction(0,a),p.getProperty().setScalarOpacity(0,i),p.getProperty().setInterpolationTypeToNearest()),d){p.getProperty().setUseLabelOutline(d),p.getProperty().setLabelOutlineOpacity(m);const E=Bo(n.segmentationId),T=new Array(v-1);for(let y=1;y<v;y++){if(C.has(y)){T[y-1]=0;continue}T[y-1]=y===E?g+h:g}p.getProperty().setLabelOutlineThickness(T)}else p.getProperty().setLabelOutlineThickness(new Array(v-1).fill(0));const I=c||u;p.setVisibility(I)}function PP(t,e,n){const a={...t,...n||{}},i=e?a.fillAlpha:a.fillAlphaInactive,o=e?a.outlineWidth:a.outlineWidthInactive,s=e?a.renderFill:a.renderFillInactive,c=e?a.renderOutline:a.renderOutlineInactive,l=e?a.outlineOpacity:a.outlineOpacityInactive,u=a.activeSegmentOutlineWidthDelta;return{fillAlpha:i,outlineWidth:o,renderFill:s,renderOutline:c,outlineOpacity:l,activeSegmentOutlineWidthDelta:u}}function mIe(t,e,n,{fillAlpha:r,renderFill:a,renderOutline:i,segmentColor:o,outlineWidth:s,segmentsHidden:c,cfun:l,ofun:u}){const f=`${t}-${e}-${n}`,v=Td.get(f);if(!v)return Td.set(f,{fillAlpha:r,renderFill:a,renderOutline:i,outlineWidth:s,segmentColor:o.slice(),segmentsHidden:new Set(c),cfunMTime:l.getMTime(),ofunMTime:u.getMTime()}),{forceOpacityUpdate:!0,forceColorUpdate:!0};const{fillAlpha:g,renderFill:d,renderOutline:m,outlineWidth:h,segmentColor:C,segmentsHidden:p,cfunMTime:S,ofunMTime:I}=v,D=C[0]!==o[0]||C[1]!==o[1]||C[2]!==o[2],E=C[3]!==o[3]||g!==r||d!==a||m!==i||h!==s||p!==c;return(E||D)&&Td.set(f,{fillAlpha:r,renderFill:a,renderOutline:i,outlineWidth:s,segmentColor:o.slice(),segmentsHidden:new Set(c),cfunMTime:l.getMTime(),ofunMTime:u.getMTime()}),{forceOpacityUpdate:E,forceColorUpdate:D}}async function AP(t,e,n,r){return await $Ce(t.element,e,n,r)||void 0}const fB={render:gIe,removeRepresentation:vIe},hIe={[Ft.Labelmap]:fB,[Ft.Contour]:rB,[Ft.Surface]:eG},qp=Eh.toolName;class pIe{constructor(){this._needsRender=new Set,this._animationFrameSet=!1,this._animationFrameHandle=null,this._getAllViewports=()=>to().flatMap(n=>n.getViewports()),this._renderFlaggedSegmentations=()=>{this._throwIfDestroyed(),Array.from(this._needsRender).forEach(n=>{this._triggerRender(n)}),this._needsRender.clear(),this._animationFrameSet=!1,this._animationFrameHandle=null}}renderSegmentationsForViewport(e){const n=e?[e]:this._getViewportIdsForSegmentation();this._setViewportsToBeRenderedNextFrame(n)}renderSegmentation(e){const n=this._getViewportIdsForSegmentation(e);this._setViewportsToBeRenderedNextFrame(n)}_getViewportIdsForSegmentation(e){const n=this._getAllViewports(),r=[];for(const a of n){const i=a.id;if(e){const o=ko(i,{segmentationId:e});(o==null?void 0:o.length)>0&&r.push(i)}else{const o=ko(i);(o==null?void 0:o.length)>0&&r.push(i)}}return r}_throwIfDestroyed(){if(this.hasBeenDestroyed)throw new Error("this.destroy() has been manually called to free up memory, can not longer use this instance. Instead make a new one.")}_setViewportsToBeRenderedNextFrame(e){e.forEach(n=>{this._needsRender.add(n)}),this._render()}_render(){this._needsRender.size>0&&this._animationFrameSet===!1&&(this._animationFrameHandle=window.requestAnimationFrame(this._renderFlaggedSegmentations),this._animationFrameSet=!0)}_triggerRender(e){const n=ko(e);if(!(n!=null&&n.length))return;const{viewport:r}=wr(e)||{};if(!r)return;const a=[],i=n.map(o=>{o.type===Ft.Contour&&this._addPlanarFreeHandToolIfAbsent(r);const s=hIe[o.type];try{const c=s.render(r,o);a.push(c)}catch(c){console.error(c)}return Promise.resolve({segmentationId:o.segmentationId,type:o.type})});Promise.allSettled(i).then(o=>{const s=o.filter(u=>u.status==="fulfilled").map(u=>u.value);function c(u){const{element:f,viewportId:v}=u.detail;f.removeEventListener(vt.IMAGE_RENDERED,c),s.forEach(g=>{const d={viewportId:v,segmentationId:g.segmentationId,type:g.type};Dt(ot,B.SEGMENTATION_RENDERED,{...d})})}r.element.addEventListener(vt.IMAGE_RENDERED,c),r.render()})}_addPlanarFreeHandToolIfAbsent(e){qp in st.tools||sk(Eh);const n=la(e.id);n.hasTool(qp)||(n.addTool(qp),n.setToolPassive(qp))}}function Qv(t){vB.renderSegmentationsForViewport(t)}function YI(t){vB.renderSegmentation(t)}const vB=new pIe;function ZI(){return xr.getState().segmentations}function SIe(t){const{segmentationId:e,representation:n,config:r}=t,{type:a,data:i}=n,o=i?{...i}:{};if(!o)throw new Error("Segmentation representation data may not be undefined");a===Ft.Contour&&CIe(o);const s=IIe(r==null?void 0:r.segments,a,o);return r==null||delete r.segments,{segmentationId:e,label:(r==null?void 0:r.label)??null,cachedStats:(r==null?void 0:r.cachedStats)??{},segments:s,representationData:{[a]:{...o}}}}function CIe(t){t.geometryIds=t.geometryIds??[],t.annotationUIDsMap=t.annotationUIDsMap??new Map}function IIe(t,e,n){const r={};return t?Object.entries(t).forEach(([a,i])=>{r[a]={segmentIndex:Number(a),label:i.label??`Segment ${a}`,locked:i.locked??!1,cachedStats:i.cachedStats??{},active:i.active??!1}}):e===Ft.Surface?DIe(r,n):r[1]=EIe(),r}function DIe(t,e){const{geometryIds:n}=e;n.forEach(r=>{const a=Ye.getGeometry(r);if(a!=null&&a.data){const{segmentIndex:i}=a.data;t[i]={segmentIndex:i}}})}function EIe(){return{segmentIndex:1,label:"Segment 1",locked:!1,cachedStats:{},active:!0}}function gB(t,e){const n=xr;t.forEach(r=>{const a=SIe(r);n.addSegmentation(a),e||Go(a.segmentationId)})}function Kv(t,e,n){return mB(t,e,n)}function dB(t,e,n){return mB(t,e,n)}function mB(t,e,n){const{segmentationId:r,type:a}=e;return TIe(t,r,a,n),xr.removeSegmentationRepresentations(t,{segmentationId:r,type:a})}function hB(){xr.getAllViewportSegmentationRepresentations().forEach(({viewportId:e,representations:n})=>{n.forEach(({segmentationId:r,type:a})=>{Kv(e,{segmentationId:r,type:a})})}),xr.resetState()}function pB(t,e,n){Kv(t,{segmentationId:e,type:Ft.Labelmap},n)}function SB(t,e,n){Kv(t,{segmentationId:e,type:Ft.Contour},n)}function CB(t,e,n){Kv(t,{segmentationId:e,type:Ft.Surface},n)}function TIe(t,e,n,r){ko(t,{segmentationId:e,type:n}).forEach(o=>{o.type===Ft.Labelmap?fB.removeRepresentation(t,o.segmentationId,r):o.type===Ft.Contour?rB.removeRepresentation(t,o.segmentationId,r):o.type===Ft.Surface&&eG.removeRepresentation(t,o.segmentationId,r)});const{viewport:i}=wr(t)||{};i&&i.render()}function r4(t){const e=xr;e.getAllViewportSegmentationRepresentations().filter(({representations:r})=>r.some(a=>a.segmentationId===t)).map(({viewportId:r})=>r).forEach(r=>{dB(r,{segmentationId:t})}),e.removeSegmentation(t),R_(t)}function IB(){const t=xr;t.getState().segmentations.forEach(n=>{r4(n.segmentationId)}),t.resetState()}function yIe(t){xr.removeColorLUT(t)}function DB(t,e){return xr.getState().viewportSegRepresentations[t].map(s=>(e&&s.type===e,Un(s.segmentationId))).filter(s=>s!==void 0)}function EB(t,e){return xr.updateLabelmapSegmentationImageReferences(t,e)}function TB(t,e){return xr.getStackSegmentationImageIdsForViewport(t,e)}function MIe(){xr.resetState()}const _Ie=Object.freeze(Object.defineProperty({__proto__:null,addColorLUT:Id,addSegmentations:gB,destroy:MIe,getColorLUT:dh,getCurrentLabelmapImageIdForViewport:fs,getNextColorLUTIndex:Kk,getSegmentation:Un,getSegmentationRepresentation:kI,getSegmentationRepresentations:ko,getSegmentationRepresentationsBySegmentationId:The,getSegmentations:ZI,getStackSegmentationImageIdsForViewport:TB,getViewportIdsWithSegmentation:$v,getViewportSegmentations:DB,removeAllSegmentationRepresentations:hB,removeAllSegmentations:IB,removeColorLUT:yIe,removeContourRepresentation:SB,removeLabelmapRepresentation:pB,removeSegmentation:r4,removeSegmentationRepresentation:Kv,removeSurfaceRepresentation:CB,updateLabelmapSegmentationImageReferences:EB},Symbol.toStringTag,{value:"Module"})),OIe=function(t){const{segmentationId:e,modifiedSlicesToUse:n}=t.detail,{representationData:r}=Un(e),a=$v(e),i=a.some(c=>{const{viewport:l}=wr(c);return l instanceof yr}),o=a.some(c=>{const{viewport:l}=wr(c);return l instanceof Xr}),s=i&&o;a.forEach(c=>{const{viewport:l}=wr(c);l instanceof yr&&wIe({modifiedSlicesToUse:s?[]:n,representationData:r,type:Ft.Labelmap}),l instanceof Xr&&PIe({viewportIds:a,segmentationId:e})})};function wIe({modifiedSlicesToUse:t,representationData:e,type:n}){const r=Ye.getVolume(e[n].volumeId);if(!r){console.warn("segmentation not found in cache");return}const{imageData:a,vtkOpenGLTexture:i}=r;let o;if((t==null?void 0:t.length)>0)o=t;else{const s=a.getDimensions()[2];o=[...Array(s).keys()]}o.forEach(s=>{i.setUpdatedFrame(s)}),a.modified()}function PIe({viewportIds:t,segmentationId:e}){t.forEach(n=>{let r=ko(n,{segmentationId:e});r=r.filter(a=>a.type===Ft.Labelmap),r.forEach(a=>{if(a.segmentationId!==e)return;const i=wr(n);if(!i)return;const{viewport:o}=i;if(o instanceof yr)return;const s=Wc(n,e);if(!s)return;const c=s.actor.getMapper().getInputData(),l=fs(n,e),u=Ye.getImage(l);c.modified(),TI(c,u)})})}const yB=function(t){const{segmentationId:e}=t.detail,{representationData:n}=Un(e);n.Labelmap&&OIe(t),YI(e)},MB=function(t){const{segmentationId:e}=t.detail;YI(e)},AIe=function(t){if(!t)return;const e=Ae(t);if(!e)return;const{viewport:n}=e;n instanceof zr||(t.addEventListener(vt.STACK_NEW_IMAGE,Sm),t.addEventListener(vt.IMAGE_RENDERED,Sm))},xIe=function(t){t.removeEventListener(vt.STACK_NEW_IMAGE,Sm),t.removeEventListener(vt.IMAGE_RENDERED,Sm)};function Sm(t){const e=t.detail,{viewportId:n,renderingEngineId:r}=e,{viewport:a}=Ka(n,r),i=ko(n);if(!(i!=null&&i.length))return;const o=i.filter(l=>l.type===Ft.Labelmap),s=a.getActors();o.forEach(l=>{const{segmentationId:u}=l;EB(n,u)});const c=o.map(l=>Wc(n,l.segmentationId)).filter(l=>l!==void 0);c.length&&(c.forEach(l=>{o.find(f=>fs(n,f.segmentationId)===l.referencedId)||a.removeActors([l.uid])}),o.forEach(l=>{const{segmentationId:u}=l,f=a.getCurrentImageId(),v=fs(n,u);if(!v)return;const g=Ye.getImage(v);if(!g){console.warn("No derived image found in the cache for segmentation representation",l);return}const d=s.find(m=>m.referencedId===v);if(d){const m=d.actor.getMapper().getInputData();m.setDerivedImage?m.setDerivedImage(g):TI(m,g)}else{const{dimensions:m,spacing:h,direction:C}=a.getImageDataMetadata(g),p=Ye.getImage(f)||{imageId:f},{origin:S}=a.getImageDataMetadata(p),I=S,D=g.voxelManager.getConstructor(),E=g.voxelManager.getScalarData(),T=fn.newInstance({name:"Pixels",numberOfComponents:1,values:new D(E)}),y=Lv.newInstance();y.setDimensions(m[0],m[1],1),y.setSpacing(h),y.setDirection(C),y.setOrigin(I),y.getPointData().setScalars(T),y.modified(),a.addImages([{imageId:v,representationUID:`${u}-${Ft.Labelmap}`,callback:({imageActor:M})=>{M.getMapper().setInputData(y)}}]),Qv(n);return}a.render(),t.type===vt.IMAGE_RENDERED&&a.element.removeEventListener(vt.IMAGE_RENDERED,Sm)}))}const _B={enable:AIe,disable:xIe};function RIe(t){const e=t.detail.annotation;HI(e)}function OB(t){const e=t.detail.annotation;mh(e)&&lCe(t)}function CC(t){if(!t.detail.removed.length)return;to().forEach(r=>{const i=r.getViewports().map(o=>o.id);qe(i)})}function wB(t){const{viewportId:e}=t.detail;qe([e])}function bIe(t){const e=t.detail.annotation;mh(e)&&RIe(t)}const PB=function(t){zv(t.detail.element)},NIe=function(t){t.addEventListener(vt.IMAGE_RENDERED,PB)},LIe=function(t){t.removeEventListener(vt.IMAGE_RENDERED,PB)},AB={enable:NIe,disable:LIe},{Active:UIe}=vr;function Xv(t,e,n){if(st.isInteractingWithTool)return!1;const{renderingEngineId:r,viewportId:a}=n.detail,i=la(a,r);if(!i)return!1;let o;const s=Object.keys(i.toolOptions);for(let c=0;c<s.length;c++){const l=s[c],u=i.toolOptions[l],f=i.getToolInstance(l);if(u.mode===UIe&&typeof f[e]=="function"){o=i.getToolInstance(l);break}}o&&o[e](n)}const xB=Xv.bind(null,"Mouse","mouseClickCallback"),RB=Xv.bind(null,"Mouse","doubleClickCallback");function bB(t,e,n,r="mouse"){const a=r==="touch"?36:6,i=[];return e.forEach(({tool:o,annotations:s})=>{for(const c of s){if(c.isLocked||!c.isVisible)continue;const l=o.getHandleNearImagePoint(t,c,n,a);if(l){i.push({tool:o,annotation:c,handle:l});break}}}),i}function Th(t,e){const n=[];for(let r=0;r<e.length;r++){const a=e[r];if(!a){console.warn("undefined tool in filterToolsWithAnnotationsForElement");continue}let i=nr(a.constructor.toolName,t);i!=null&&i.length&&(typeof a.filterInteractableAnnotationsForElement=="function"&&(i=a.filterInteractableAnnotationsForElement(t,i)),(i==null?void 0:i.length)>0&&n.push({tool:a,annotations:i}))}return n}function a4(t,e,n,r="mouse"){const a=r==="touch"?36:6,i=[];return e.forEach(({tool:o,annotations:s})=>{for(const c of s){if(c.isLocked||!c.isVisible)continue;if(o.isPointNearTool(t,c,n,a,r)){i.push({tool:o,annotation:c});break}}}),i}const{Active:FIe}=vr;function JI(t){const{renderingEngineId:e,viewportId:n,event:r}=t.detail,a=qv(r)||Hv.getModifierKey(),i=la(n,e);if(!i)return null;const o=Object.keys(i.toolOptions),s=i.getDefaultMousePrimary(),c=t.detail.buttons??(r==null?void 0:r.buttons)??s;for(let l=0;l<o.length;l++){const u=o[l],f=i.toolOptions[u],v=f.bindings.length&&f.bindings.some(g=>g.mouseButton===c&&g.modifierKey===a);if(f.mode===FIe&&v)return i.getToolInstance(u)}}function Sv(t,e,n){const{renderingEngineId:r,viewportId:a}=t.detail,i=la(a,r);if(!i)return[];const o=[],s=Object.keys(i.toolOptions);for(let c=0;c<s.length;c++){const l=s[c],u=i.toolOptions[l],f=n!=null&&u.bindings.length&&u.bindings.some(v=>v.mouseButton===n);if(e.includes(u.mode)&&(!n||f)){const v=i.getToolInstance(l);o.push(v)}}return o}function VIe(t,e){var f;const n=new Map,{renderingEngineId:r,viewportId:a}=t.detail,i=la(a,r);if(!i)return n;const o=Object.keys(i.toolOptions),s=i.getDefaultMousePrimary(),c=t.detail.event,l=(c==null?void 0:c.buttons)??s,u=qv(c)||Hv.getModifierKey();for(let v=0;v<o.length;v++){const g=o[v],d=i.getToolInstance(g),m=((f=d.configuration)==null?void 0:f.actions)??{},h=Object.values(m);if(!(h!=null&&h.length)||!e.includes(d.mode))continue;const C=h.find(p=>{var S;return((S=p.bindings)==null?void 0:S.length)&&p.bindings.some(I=>I.mouseButton===l&&I.modifierKey===u)});C&&n.set(d,C)}return n}const{Active:kIe,Passive:GIe}=vr;function BIe(t){if(st.isInteractingWithTool)return!1;const e=t.detail,{element:n}=e,r=Ae(n),{canvas:a}=e.currentPoints;if(!r)return!1;const i=VIe(t,[kIe,GIe]),o=Array.from(i.keys()),s=Th(n,o),c=a4(n,s,a);if(c.length>0){const{tool:l,annotation:u}=c[0],f=i.get(l);return(typeof f.method=="string"?l[f.method]:f.method).call(l,t,u),!0}return!1}const{Active:WIe,Passive:HIe}=vr;function NB(t){if(st.isInteractingWithTool)return;const e=JI(t);if(e&&typeof e.preMouseDownCallback=="function"&&e.preMouseDownCallback(t))return;const n=t.detail.event.buttons===1,r=Sv(t,[WIe],t.detail.event.buttons),a=n?Sv(t,[HIe]):void 0,i=[...r||[],...a||[]];if(BIe(t))return;const s=t.detail,{element:c}=s,l=Th(c,i),u=s.currentPoints.canvas,f=bB(c,l,u,"mouse"),v=!!t.detail.event.shiftKey;if(f.length>0){const{tool:d,annotation:m,handle:h}=xP(f);RP(m.annotationUID,v),d.handleSelectedCallback(t,m,h,"Mouse");return}const g=a4(c,l,u,"mouse");if(g.length>0){const{tool:d,annotation:m}=xP(g);RP(m.annotationUID,v),d.toolSelectedCallback(t,m,"Mouse",u);return}e&&typeof e.postMouseDownCallback=="function"&&e.postMouseDownCallback(t)}function xP(t){if(t.length>1){const e=t.find(n=>{const r=!Ya(n.annotation.annotationUID),a=Gi(n.annotation.annotationUID);return r&&a});if(e)return e}return t[0]}function RP(t,e=!1){e?Dh(t)?xs(t,!1):xs(t,!0,!0):xs(t,!0,!1)}function LB(t){if(st.isInteractingWithTool)return;const e=JI(t);if(e&&!st.isMultiPartToolActive&&e.addNewAnnotation){const n=e.addNewAnnotation(t,"mouse");xs(n.annotationUID)}}function UB(t){if(st.isInteractingWithTool)return;const e=JI(t);!e||typeof e.mouseDragCallback!="function"||e.mouseDragCallback(t)}const{Active:$Ie,Passive:zIe}=vr;function FB(t){if(st.isInteractingWithTool||st.isMultiPartToolActive)return;const e=Sv(t,[$Ie,zIe]),n=t.detail,{element:r}=n,a=Th(r,e),i=e.filter(s=>!a.some(l=>l.tool.getToolName()===s.getToolName()));let o=!1;for(const{tool:s,annotations:c}of a)typeof s.mouseMoveCallback=="function"&&(o=s.mouseMoveCallback(t,c)||o);i.forEach(s=>{typeof s.mouseMoveCallback=="function"&&s.mouseMoveCallback(t)}),o===!0&&zv(r)}const VB=Xv.bind(null,"Mouse","mouseUpCallback");function kB(t){if(st.isInteractingWithTool)return;t.detail.buttons=ec.Wheel|(t.detail.event.buttons||0);const e=JI(t);if(e)return e.mouseWheelCallback(t)}const qIe=function(t){t.addEventListener(B.MOUSE_CLICK,xB),t.addEventListener(B.MOUSE_DOWN,NB),t.addEventListener(B.MOUSE_DOWN_ACTIVATE,LB),t.addEventListener(B.MOUSE_DOUBLE_CLICK,RB),t.addEventListener(B.MOUSE_DRAG,UB),t.addEventListener(B.MOUSE_MOVE,FB),t.addEventListener(B.MOUSE_UP,VB),t.addEventListener(B.MOUSE_WHEEL,kB)},jIe=function(t){t.removeEventListener(B.MOUSE_CLICK,xB),t.removeEventListener(B.MOUSE_DOWN,NB),t.removeEventListener(B.MOUSE_DOWN_ACTIVATE,LB),t.removeEventListener(B.MOUSE_DOUBLE_CLICK,RB),t.removeEventListener(B.MOUSE_DRAG,UB),t.removeEventListener(B.MOUSE_MOVE,FB),t.removeEventListener(B.MOUSE_UP,VB),t.removeEventListener(B.MOUSE_WHEEL,kB)},GB={enable:qIe,disable:jIe},{Active:QIe}=vr;function BB(t){const{renderingEngineId:e,viewportId:n}=t.detail,r=Hme(),a=Hv.getModifierKey(),i=la(n,e);if(!i)return null;const o=Object.keys(i.toolOptions),s=i.getDefaultMousePrimary();for(let c=0;c<o.length;c++){const l=o[c],u=i.toolOptions[l];if(u.mode!==QIe)continue;if(u.bindings.length&&u.bindings.some(v=>v.mouseButton===(r??s)&&v.modifierKey===a))return i.getToolInstance(l)}}function KIe(t,e){var c;const n=new Map,{renderingEngineId:r,viewportId:a}=t.detail,i=la(a,r);if(!i)return n;const o=Object.keys(i.toolOptions),s=t.detail.key;for(let l=0;l<o.length;l++){const u=o[l],f=i.getToolInstance(u),v=(c=f.configuration)==null?void 0:c.actions;if(!v)continue;const g=Object.values(v);if(!(g!=null&&g.length)||!e.includes(f.mode))continue;const d=g.find(m=>{var h;return(h=m.bindings)==null?void 0:h.some(C=>C.key===s)});d&&n.set(f,d)}return n}function WB(t){const e=BB(t);if(e){const{renderingEngineId:r,viewportId:a}=t.detail,i=la(a,r),o=e.getToolName();Object.keys(i.toolOptions).includes(o)&&i.setViewportsCursorByToolName(o)}const n=KIe(t,[vr.Active]);if(n!=null&&n.size){const{element:r}=t.detail;for(const[a,i]of[...n.entries()])(typeof i.method=="function"?i.method:a[i.method]).call(a,r,i,t)}}function HB(t){const e=BB(t);if(!e)return;const{renderingEngineId:n,viewportId:r}=t.detail,a=la(r,n);Vk();const i=e.getToolName();Object.keys(a.toolOptions).includes(i)&&a.setViewportsCursorByToolName(i)}const XIe=function(t){t.addEventListener(B.KEY_DOWN,WB),t.addEventListener(B.KEY_UP,HB)},YIe=function(t){t.removeEventListener(B.KEY_DOWN,WB),t.removeEventListener(B.KEY_UP,HB)},$B={enable:XIe,disable:YIe},{Active:ZIe,Passive:JIe,Enabled:eDe}=vr,zB=function(t){Sv(t,[ZIe,JIe,eDe]).forEach(n=>{n.onCameraModified&&n.onCameraModified(t)})},tDe=function(t){t.addEventListener(vt.CAMERA_MODIFIED,zB)},nDe=function(t){t.removeEventListener(vt.CAMERA_MODIFIED,zB)},qB={enable:tDe,disable:nDe},{Active:rDe,Passive:aDe,Enabled:iDe}=vr,jB=function(t){Sv(t,[rDe,aDe,iDe]).forEach(n=>{n.onImageSpacingCalibrated&&n.onImageSpacingCalibrated(t)})},oDe=function(t){t.addEventListener(vt.IMAGE_SPACING_CALIBRATED,jB)},sDe=function(t){t.removeEventListener(vt.IMAGE_SPACING_CALIBRATED,jB)},QB={enable:oDe,disable:sDe},{Active:cDe}=vr;function i4(t){const{renderingEngineId:e,viewportId:n}=t.detail,r=t.detail.event,a=la(n,e);if(!a)return null;const i=Object.keys(a.toolOptions),o=Object.keys(r.touches).length,s=qv(r)||Hv.getModifierKey(),c=a.getDefaultMousePrimary();for(let l=0;l<i.length;l++){const u=i[l],f=a.toolOptions[u],v=f.bindings.length&&f.bindings.some(g=>(g.numTouchPoints===o||o===1&&g.mouseButton===c)&&g.modifierKey===s);if(f.mode===cDe&&v)return a.getToolInstance(u)}}function bP(t,e,n){const{renderingEngineId:r,viewportId:a}=t.detail,i=la(a,r);if(!i)return[];const o=[],s=Object.keys(i.toolOptions);for(let c=0;c<s.length;c++){const l=s[c],u=i.toolOptions[l],f=n!=null&&u.bindings.length&&u.bindings.some(v=>v.numTouchPoints===n);if(e.includes(u.mode)&&(!n||f)){const v=i.getToolInstance(l);o.push(v)}}return o}const{Active:lDe,Passive:uDe}=vr;function KB(t){if(st.isInteractingWithTool)return;const e=i4(t);if(e&&typeof e.preTouchStartCallback=="function"&&e.preTouchStartCallback(t))return;const n=Object.keys(t.detail.event.touches).length===1,r=bP(t,[lDe],Object.keys(t.detail.event.touches).length),a=n?bP(t,[uDe]):void 0,i=[...r||[],...a||[],e],o=t.detail,{element:s}=o,c=Th(s,i),l=o.currentPoints.canvas,u=bB(s,c,l,"touch"),f=!1;if(u.length>0){const{tool:g,annotation:d,handle:m}=NP(u);LP(d.annotationUID,f),g.handleSelectedCallback(t,d,m,"Touch");return}const v=a4(s,c,l,"touch");if(v.length>0){const{tool:g,annotation:d}=NP(v);LP(d.annotationUID,f),g.toolSelectedCallback(t,d,"Touch");return}e&&typeof e.postTouchStartCallback=="function"&&e.postTouchStartCallback(t)}function NP(t){return t.length>1&&t.find(e=>!Ya(e.annotation.annotationUID)&&Gi(e.annotation.annotationUID))||t[0]}function LP(t,e=!1){e?Dh(t)?xs(t,!1):xs(t,!0,!0):xs(t,!0,!1)}function XB(t){if(st.isInteractingWithTool)return;const e=i4(t);if(e&&!st.isMultiPartToolActive&&e.addNewAnnotation){const n=e.addNewAnnotation(t,"touch");xs(n.annotationUID)}}function YB(t){if(st.isInteractingWithTool)return;const e=i4(t);!e||typeof e.touchDragCallback!="function"||e.touchDragCallback(t)}const ZB=Xv.bind(null,"Touch","touchEndCallback"),fDe=Xv.bind(null,"Touch","touchTapCallback"),JB=Xv.bind(null,"Touch","touchPressCallback"),vDe=function(t){t.addEventListener(B.TOUCH_START,KB),t.addEventListener(B.TOUCH_START_ACTIVATE,XB),t.addEventListener(B.TOUCH_DRAG,YB),t.addEventListener(B.TOUCH_END,ZB),t.addEventListener(B.TOUCH_TAP,fDe),t.addEventListener(B.TOUCH_PRESS,JB)},gDe=function(t){t.removeEventListener(B.TOUCH_START,KB),t.removeEventListener(B.TOUCH_START_ACTIVATE,XB),t.removeEventListener(B.TOUCH_DRAG,YB),t.removeEventListener(B.TOUCH_END,ZB),t.removeEventListener(B.TOUCH_PRESS,JB)},eW={enable:vDe,disable:gDe},dDe=function(){ot.addEventListener(B.ANNOTATION_COMPLETED,B0.handleAnnotationCompleted),ot.addEventListener(B.ANNOTATION_MODIFIED,B0.handleAnnotationUpdate),ot.addEventListener(B.ANNOTATION_REMOVED,B0.handleAnnotationDelete)},mDe=function(){ot.removeEventListener(B.ANNOTATION_COMPLETED,B0.handleAnnotationCompleted),ot.removeEventListener(B.ANNOTATION_MODIFIED,B0.handleAnnotationUpdate),ot.removeEventListener(B.ANNOTATION_REMOVED,B0.handleAnnotationDelete)},tW={enable:dDe,disable:mDe},{Active:hDe,Passive:pDe,Enabled:SDe}=vr,nW=function(t){Sv(t,[hDe,pDe,SDe]).forEach(n=>{n.onResetCamera&&n.onResetCamera(t)})},CDe=function(t){t.addEventListener(vt.CAMERA_RESET,nW)},IDe=function(t){t.removeEventListener(vt.CAMERA_RESET,nW)},rW={enable:CDe,disable:IDe};function aW(t){const{element:e,viewportId:n}=t.detail,r=DDe(n);EDe(e),TDe(r,e),X_.addViewportElement(n,e),pk.enable(e),Uk.enable(e),bk.enable(e),Hv.enable(e),_B.enable(e),AB.enable(e),qB.enable(e),QB.enable(e),rW.enable(e),GB.enable(e),$B.enable(e),eW.enable(e),st.enabledElements.push(e)}function DDe(t){const e="http://www.w3.org/2000/svg",n=document.createElementNS(e,"svg"),r=`svg-layer-${t}`;n.classList.add("svg-layer"),n.setAttribute("id",r),n.setAttribute("xmlns","http://www.w3.org/2000/svg"),n.style.width="100%",n.style.height="100%",n.style.pointerEvents="none",n.style.position="absolute";const a=document.createElementNS(e,"defs"),i=document.createElementNS(e,"filter"),o=document.createElementNS(e,"feOffset"),s=document.createElementNS(e,"feColorMatrix"),c=document.createElementNS(e,"feBlend");return i.setAttribute("id",`shadow-${r}`),i.setAttribute("filterUnits","userSpaceOnUse"),o.setAttribute("result","offOut"),o.setAttribute("in","SourceGraphic"),o.setAttribute("dx","0.5"),o.setAttribute("dy","0.5"),s.setAttribute("result","matrixOut"),s.setAttribute("in","offOut"),s.setAttribute("in2","matrix"),s.setAttribute("values","0.2 0 0 0 0 0 0.2 0 0 0 0 0 0.2 0 0 0 0 0 1 0"),c.setAttribute("in","SourceGraphic"),c.setAttribute("in2","matrixOut"),c.setAttribute("mode","normal"),i.appendChild(o),i.appendChild(s),i.appendChild(c),a.appendChild(i),n.appendChild(a),n}function EDe(t){const{viewportUid:e,renderingEngineUid:n}=t.dataset,r=`${e}:${n}`;st.svgNodeCache[r]={}}function TDe(t,e){e.querySelector("div.viewport-element").appendChild(t)}function iW(t,e){const n=[];if(!e&&!t)throw new Error("At least one of renderingEngineId or viewportId should be given");for(let r=0;r<st.synchronizers.length;r++){const a=st.synchronizers[r],i=!a.isDisabled(),o=a.hasSourceViewport(e,t),s=a.hasTargetViewport(e,t);i&&(o||s)&&n.push(a)}return n}const yDe="viewport-element";function oW(t){const{element:e,viewportId:n}=t.detail;ODe(e),wDe(e),X_.removeViewportElement(n,e),pk.disable(e),Uk.disable(e),bk.disable(e),Hv.disable(e),_B.disable(e),AB.disable(e),qB.disable(e),QB.disable(e),rW.disable(e),GB.disable(e),$B.disable(e),eW.disable(e),MDe(e),_De(e),PDe(e)}const MDe=t=>{const e=Ae(t);iW(e.viewportId,e.renderingEngineId).forEach(r=>{r.remove(e)})},_De=t=>{const{renderingEngineId:e,viewportId:n}=Ae(t),r=la(n,e);r&&r.removeViewports(e,n)};function ODe(t){const{viewportUid:e,renderingEngineUid:n}=t.dataset,r=`${e}:${n}`;delete st.svgNodeCache[r]}function wDe(t){const e=t.querySelector(`div.${yDe}`),n=e.querySelector("svg");n&&e.removeChild(n)}const PDe=function(t){const e=st.enabledElements.findIndex(n=>n===t);e>-1&&st.enabledElements.splice(e,1)};function ADe(t){const e=MG(t,[vr.Active,vr.Passive]),n=Th(t,e);for(const{tool:r}of n){const a=r.cancel(t);if(a)return a}}class sW{constructor(e,n,r,a){this._viewportOptions={},this._onEvent=i=>{var l;if(this._ignoreFiredEvents===!0||!this._targetViewports.length)return;const o=this._eventSource==="element"?Ae(i.currentTarget):wr((l=i.detail)==null?void 0:l.viewportId);if(!o)return;const{renderingEngineId:s,viewportId:c}=o;this._sourceViewports.find(u=>u.viewportId===c)&&this.fireEvent({renderingEngineId:s,viewportId:c},i)},this._enabled=!0,this._eventName=n,this._eventHandler=r,this._ignoreFiredEvents=!1,this._sourceViewports=[],this._targetViewports=[],this._options=a||{},this._eventSource=this._options.eventSource||"element",this._auxiliaryEvents=this._options.auxiliaryEvents||[],this.id=e}isDisabled(){return!this._enabled||!this._hasSourceElements()}setOptions(e,n={}){this._viewportOptions[e]=n}setEnabled(e){this._enabled=e}getOptions(e){return this._viewportOptions[e]}add(e){this.addTarget(e),this.addSource(e)}addSource(e){if(jp(this._sourceViewports,e))return;const{renderingEngineId:n,viewportId:r}=e,a=da(n).getViewport(r);if(!a){console.warn(`Synchronizer.addSource: No viewport for ${n} ${r}`);return}(this._eventSource==="element"?a.element:ot).addEventListener(this._eventName,this._onEvent.bind(this)),this._auxiliaryEvents.forEach(({name:o,source:s})=>{(s==="element"?a.element:ot).addEventListener(o,this._onEvent.bind(this))}),this._updateDisableHandlers(),this._sourceViewports.push(e)}addTarget(e){jp(this._targetViewports,e)||(this._targetViewports.push(e),this._updateDisableHandlers())}getSourceViewports(){return this._sourceViewports}getTargetViewports(){return this._targetViewports}destroy(){this._sourceViewports.forEach(e=>this.removeSource(e)),this._targetViewports.forEach(e=>this.removeTarget(e))}remove(e){this.removeTarget(e),this.removeSource(e)}removeSource(e){const n=UP(this._sourceViewports,e);if(n===-1)return;const r=this._eventSource==="element"?this.getViewportElement(e):ot;this._sourceViewports.splice(n,1),r.removeEventListener(this._eventName,this._eventHandler),this._auxiliaryEvents.forEach(({name:a,source:i})=>{(i==="element"?this.getViewportElement(e):ot).removeEventListener(a,this._eventHandler)}),this._updateDisableHandlers()}removeTarget(e){const n=UP(this._targetViewports,e);n!==-1&&(this._targetViewports.splice(n,1),this._updateDisableHandlers())}hasSourceViewport(e,n){return jp(this._sourceViewports,{renderingEngineId:e,viewportId:n})}hasTargetViewport(e,n){return jp(this._targetViewports,{renderingEngineId:e,viewportId:n})}fireEvent(e,n){if(this.isDisabled()||this._ignoreFiredEvents)return;this._ignoreFiredEvents=!0;const r=[];try{for(let a=0;a<this._targetViewports.length;a++){const i=this._targetViewports[a];if(e.viewportId===i.viewportId)continue;const s=this._eventHandler(this,e,i,n,this._options);s instanceof Promise&&r.push(s)}}catch(a){console.warn(`Synchronizer, for: ${this._eventName}`,a)}finally{r.length?Promise.allSettled(r).then(()=>{this._ignoreFiredEvents=!1}):this._ignoreFiredEvents=!1}}_hasSourceElements(){return this._sourceViewports.length!==0}_updateDisableHandlers(){const e=xDe(this._sourceViewports,this._targetViewports),n=this.remove.bind(this),r=a=>{n(a.detail.element)};e.forEach(a=>{const i=this.getEventSource(a);i&&(i.removeEventListener(vt.ELEMENT_DISABLED,r),i.addEventListener(vt.ELEMENT_DISABLED,r))})}getEventSource(e){return this._eventSource==="element"?this.getViewportElement(e):ot}getViewportElement(e){const{renderingEngineId:n,viewportId:r}=e,a=da(n);if(!a)return null;const i=a.getViewport(r);return i?i.element:null}}function xDe(t,e){const n=[],r=t.concat(e);for(let a=0;a<r.length;a++){const i=r[a];n.some(o=>i.renderingEngineId===o.renderingEngineId&&i.viewportId===o.viewportId)||n.push(i)}return n}function UP(t,e){return t.findIndex(n=>e.renderingEngineId===n.renderingEngineId&&e.viewportId===n.viewportId)}function jp(t,e){return t.some(n=>n.renderingEngineId===e.renderingEngineId&&n.viewportId===e.viewportId)}function j1(t,e,n,r){if(st.synchronizers.some(o=>o.id===t))throw new Error(`Synchronizer with id '${t}' already exists.`);const i=new sW(t,e,n,r);return st.synchronizers.push(i),i}function RDe(){for(;st.synchronizers.length>0;)st.synchronizers.pop().destroy()}function bDe(t){return st.synchronizers.find(e=>e.id===t)}function NDe(){return st.synchronizers}function LDe(t){const e=st.synchronizers.findIndex(n=>n.id===t);e>-1&&(st.synchronizers[e].destroy(),st.synchronizers.splice(e,1))}const UDe=Object.freeze(Object.defineProperty({__proto__:null,createSynchronizer:j1,destroy:RDe,destroySynchronizer:LDe,getAllSynchronizers:NDe,getSynchronizer:bDe,getSynchronizersForViewport:iW},Symbol.toStringTag,{value:"Module"})),IC=function(t){const{viewportId:e}=t.detail;Qv(e)};let Sy=!1;function cW(t={}){Sy||(VDe(),kDe(),Sy=!0)}function FDe(){lW(),uW(),tk(),jde();const t=v0(),e=xr;t.restoreAnnotations({}),e.resetState(),Sy=!1}function VDe(){lW();const t=vt.ELEMENT_ENABLED,e=vt.ELEMENT_DISABLED;ot.addEventListener(t,aW),ot.addEventListener(e,oW),tW.enable()}function lW(){const t=vt.ELEMENT_ENABLED,e=vt.ELEMENT_DISABLED;ot.removeEventListener(t,aW),ot.removeEventListener(e,oW),tW.disable()}function kDe(){uW(),ot.addEventListener(B.ANNOTATION_COMPLETED,OB),ot.addEventListener(B.ANNOTATION_MODIFIED,wB),ot.addEventListener(B.ANNOTATION_SELECTION_CHANGE,CC),ot.addEventListener(B.ANNOTATION_SELECTION_CHANGE,CC),ot.addEventListener(B.ANNOTATION_REMOVED,bIe),ot.addEventListener(B.SEGMENTATION_MODIFIED,MB),ot.addEventListener(B.SEGMENTATION_DATA_MODIFIED,yB),ot.addEventListener(B.SEGMENTATION_REPRESENTATION_MODIFIED,IC),ot.addEventListener(B.SEGMENTATION_REPRESENTATION_ADDED,IC)}function uW(){ot.removeEventListener(B.ANNOTATION_COMPLETED,OB),ot.removeEventListener(B.ANNOTATION_MODIFIED,wB),ot.removeEventListener(B.ANNOTATION_SELECTION_CHANGE,CC),ot.removeEventListener(B.ANNOTATION_SELECTION_CHANGE,CC),ot.removeEventListener(B.SEGMENTATION_MODIFIED,MB),ot.removeEventListener(B.SEGMENTATION_DATA_MODIFIED,yB),ot.removeEventListener(B.SEGMENTATION_REPRESENTATION_MODIFIED,IC),ot.removeEventListener(B.SEGMENTATION_REPRESENTATION_ADDED,IC)}const GDe=Object.freeze(Object.defineProperty({__proto__:null,COLOR_LUT:gC},Symbol.toStringTag,{value:"Module"}));function BDe(t,e,n,r){const{camera:a}=r.detail,i=da(n.renderingEngineId);if(!i)throw new Error(`No RenderingEngine for Id: ${n.renderingEngineId}`);const o=i.getViewport(n.viewportId);o.setCamera(a),o.render()}const{CAMERA_MODIFIED:WDe}=vt;function HDe(t){return j1(t,WDe,BDe)}function $De(t,e,n,r,a){const i=da(n.renderingEngineId);if(!i)throw new Error(`No RenderingEngine for Id: ${n.renderingEngineId}`);const o=i.getViewport(n.viewportId),c=i.getViewport(e.viewportId).getViewPresentation(a);o.setViewPresentation(c),o.render()}const{CAMERA_MODIFIED:zDe}=vt;function qDe(t,e){return j1(t,zDe,$De,{viewPresentation:e})}function jDe(t,e,n,r,a){const i=r.detail,{volumeId:o,range:s,invertStateChanged:c,invert:l,colormap:u}=i,f=da(n.renderingEngineId);if(!f)throw new Error(`Rendering Engine does not exist: ${n.renderingEngineId}`);const v=f.getViewport(n.viewportId),g={voiRange:s};if(a!=null&&a.syncInvertState&&c&&(g.invert=l),a!=null&&a.syncColormap&&u&&(g.colormap=u),v instanceof zr)v._actors&&v._actors.size>1?v.setProperties(g,o):v.setProperties(g);else if(v instanceof Xr)v.setProperties(g);else throw new Error("Viewport type not supported.");v.render()}function QDe(t,e){return e=Object.assign({syncInvertState:!0,syncColormap:!0},e),j1(t,vt.VOI_MODIFIED,jDe,{auxiliaryEvents:[{name:vt.COLORMAP_MODIFIED}],...e})}function KDe(t,e,n){const r=da(n.renderingEngineId);if(!r)throw new Error(`No RenderingEngine for Id: ${n.renderingEngineId}`);const a=t.getOptions(n.viewportId),i=r.getViewport(n.viewportId),o=r.getViewport(e.viewportId);if((a==null?void 0:a.syncZoom)!==!1){const s=o.getZoom();i.setZoom(s)}if((a==null?void 0:a.syncPan)!==!1){const s=o.getPan();i.setPan(s)}i.render()}const{CAMERA_MODIFIED:XDe}=vt;function YDe(t){return j1(t,XDe,KDe)}function ZDe(t,e){const{viewPlaneNormal:n}=t.getCamera(),{viewPlaneNormal:r}=e.getCamera(),a=Gt(n,r);return Math.abs(a)>.9}const FP=(t,e)=>sm.get("spatialRegistrationModule",t,e);async function JDe(t,e,n){const r=da(n.renderingEngineId);if(!r)throw new Error(`No RenderingEngine for Id: ${n.renderingEngineId}`);const a=r.getViewport(e.viewportId),i=t.getOptions(n.viewportId);if(i!=null&&i.disabled)return;const o=r.getViewport(n.viewportId),s=a.getCurrentImageId(),l=Lt("imagePlaneModule",s).imagePositionPatient,u=o.getImageIds();if(!ZDe(a,o))return;let f=FP(n.viewportId,e.viewportId);if(!f){const m=a.getFrameOfReferenceUID(),h=o.getFrameOfReferenceUID();if(m===h&&(i==null?void 0:i.useInitialPosition)!==!1?f=zt(Fs()):(wF(a,o),f=FP(n.viewportId,e.viewportId)),!f)return}const v=un(Xe(),l,f),g=eEe(v,u);let d=g.index;o instanceof yr&&(d=u.length-g.index-1),g.index!==-1&&o.getCurrentImageIdIndex()!==g.index&&await e_(o.element,{imageIndex:d})}function eEe(t,e){return e.reduce((n,r,a)=>{const{imagePositionPatient:i}=Lt("imagePlaneModule",r),o=Si(i,t);return o<n.distance?{distance:o,index:a}:n},{distance:1/0,index:-1})}const{STACK_NEW_IMAGE:tEe,VOLUME_NEW_IMAGE:uRe}=vt;function fW(t){return j1(t,tEe,JDe,{auxiliaryEvents:[{name:"VOLUME_NEW_IMAGE"}]})}function nEe(t,e,n){var s,c;const r=da(n.renderingEngineId);if(!r)throw new Error(`No RenderingEngine for Id: ${n.renderingEngineId}`);const a=r.getViewport(n.viewportId),i=r.getViewport(e.viewportId),o=(s=i.getSlabThickness)==null?void 0:s.call(i);o&&((c=a.setSlabThickness)==null||c.call(a,o),a.render())}const{CAMERA_MODIFIED:rEe}=vt;function aEe(t){return j1(t,rEe,nEe)}const iEe=fW,oEe=Object.freeze(Object.defineProperty({__proto__:null,createCameraPositionSynchronizer:HDe,createImageSliceSynchronizer:fW,createPresentationViewSynchronizer:qDe,createSlabThicknessSynchronizer:aEe,createStackImageSynchronizer:iEe,createVOISynchronizer:QDe,createZoomPanSynchronizer:YDe},Symbol.toStringTag,{value:"Module"}));function sEe(t,e,n=5){const r=Ae(t);if(!r)throw new Error("getAnnotationNearPoint: enabledElement not found");return vW(r,e,n)}function vW(t,e,n){const{renderingEngineId:r,viewportId:a}=t,i=la(a,r);if(!i)return null;const{_toolInstances:o}=i;for(const s in o){const c=cEe(o[s],t,e,n);if(c)return c}return null}function cEe(t,e,n,r){var s,c;const{viewport:a}=e,i=nr(t.constructor.toolName,a==null?void 0:a.element),o=(s=a==null?void 0:a.getCurrentImageId)==null?void 0:s.call(a);if(i!=null&&i.length){const{element:l}=e.viewport;for(const u of i){const f=(c=u.metadata)==null?void 0:c.referencedImageId;if(!(o&&f&&o!==f||!t.isPointNearTool)&&(t.isPointNearTool(l,u,n,r,"")||t.getHandleNearImagePoint(l,u,n,r)))return u}}return null}const{calibratedPixelSpacingMetadataProvider:lEe}=Zn;function uEe(t,e,n){typeof n=="number"&&(n={type:mS.USER,scale:n}),lEe.add(t,n),e.getStackViewports().forEach(a=>{a.getImageIds().includes(t)&&a.calibrateSpacing(t)})}function gW(t,e){const n=t.findIndex(([r,a])=>r===a);if(n===-1)throw new Error("3D bounding boxes not supported in an oblique plane");return t[n][0]-=e,t[n][1]+=e,t}const fEe=Object.freeze(Object.defineProperty({__proto__:null,extend2DBoundingBoxInViewAxis:gW,getBoundingBoxAroundShape:su,getBoundingBoxAroundShapeIJK:su,getBoundingBoxAroundShapeWorld:Bk},Symbol.toStringTag,{value:"Module"})),{transformWorldToIndex:qE}=Zn;function dW(t,e,n){const[r,a]=t,i=qt((r[0]+a[0])/2,(r[1]+a[1])/2,(r[2]+a[2])/2),o=Si(r,a)/2,{boundsIJK:s,topLeftWorld:c,bottomRightWorld:l}=gEe(e,n,t,i,o);return{boundsIJK:s,centerWorld:i,radiusWorld:o,topLeftWorld:c,bottomRightWorld:l}}function mW(t,e){const n=e.getDirection(),r=qt(n[0],n[1],n[2]),a=qt(n[3],n[4],n[5]),i=qt(n[6],n[7],n[8]),o=r0(Xe(),i);return dW(t,e,{row:r,column:a,normal:o})}function vEe(t,e,n){if(!n)throw new Error("viewport is required in order to calculate the sphere bounds");const r=n.getCamera(),a=qt(r.viewUp[0],r.viewUp[1],r.viewUp[2]),i=qt(r.viewPlaneNormal[0],r.viewPlaneNormal[1],r.viewPlaneNormal[2]),o=Xe();gr(o,a,i);const s={row:o,normal:i,column:r0(Xe(),a)};return dW(t,e,s)}function gEe(t,e,n,r,a){const i=t.getDimensions(),{row:o,column:s,normal:c}=e,l=Xe(),u=Xe();Hn(l,r,c,a),Hn(u,r,c,-a),Hn(l,l,s,-a),Hn(u,u,s,a),Hn(l,l,o,-a),Hn(u,u,o,a);const f=qE(t,l),v=qE(t,u),g=n.map(m=>qE(t,m));return{boundsIJK:su([f,v,...g],i),topLeftWorld:l,bottomRightWorld:u}}const vO=class vO{static imageIdToFrames(e){const n=e.match(this.frameRangeExtractor);if(!n||!n[2])return null;const r=n[2].split("-").map(a=>Number(a));return r.length===1?r[0]:r}static framesToString(e){return Array.isArray(e)?`${e[0]}-${e[1]}`:String(e)}static framesToImageId(e,n){const r=e.match(this.frameRangeExtractor);if(!r||!r[2])return null;const a=this.framesToString(n);return e.replace(this.frameRangeExtractor,`${r[1]}${a}`)}static setFrameRange(e,n,r){const{referencedImageId:a}=e.metadata;e.metadata.referencedImageId=this.framesToImageId(a,n);const i={...r,annotation:e};Dt(ot,B.ANNOTATION_MODIFIED,i)}static getFrameRange(e){return this.imageIdToFrames(e.metadata.referencedImageId)}};vO.frameRangeExtractor=/(\/frames\/|[&?]frameNumber=)([^/&?]*)/i;let Cy=vO;function dEe(t,e){const{viewPlaneNormal:n}=t.metadata,{viewPlaneNormal:r}=e.metadata,a=Gt(n,r);if(!ru(1,Math.abs(a)))return!1;const{polyline:o}=t.data.contour,{polyline:s}=e.data.contour,c=Gt(n,o[0]),l=Gt(n,s[0]);return ru(c,l)}function hW(t,e,n){let r=-1;if(e.forEach((a,i)=>{r>=0||a.a==t.b&&(r=i)}),r>=0){const a=e[r];return e.splice(r,1),n.push(a.b),n[0]==a.b?{remainingLines:e,contourPoints:n,type:"CLOSED_PLANAR"}:hW(a,e,n)}return{remainingLines:e,contourPoints:n,type:"OPEN_PLANAR"}}function o4(t){if(t.length==0)return[];const e=[],n=t.shift();e.push(n.a),e.push(n.b);const r=hW(n,t,e);if(r.remainingLines.length==0)return[{type:r.type,contourPoints:r.contourPoints}];{const a=o4(r.remainingLines);return a.push({type:r.type,contourPoints:r.contourPoints}),a}}function pW(t){return o4(t)}const mEe={findContours:o4,findContoursFromReducedSet:pW};function SW(t,e=!1){const n=t.getPoints(),r=t.getLines(),a=new Array(n.getNumberOfPoints()).fill(0).map((c,l)=>n.getPoint(l).slice()),i=new Array(r.getNumberOfCells()).fill(0).map((c,l)=>{const u=r.getCell(l*3).slice();return{a:u[0],b:u[1]}});if(e)return{points:a,lines:i};const o=[];for(const[c,l]of a.entries()){const u=o.findIndex(f=>f[0]===l[0]&&f[1]===l[1]&&f[2]===l[2]);if(u>=0)i.map(f=>(f.a===c&&(f.a=u),f.b===c&&(f.b=u),f));else{const f=o.length;o.push(l),i.map(v=>(v.a===c&&(v.a=f),v.b===c&&(v.b=f),v))}}const s=i.filter(c=>c.a!==c.b);return{points:o,lines:s}}const hEe=(t,e)=>{const n=t[0],r=t[1];let a=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const s=e[i][0],c=e[i][1],l=e[o][0],u=e[o][1];c>r!=u>r&&n<(l-s)*(r-c)/(u-c)+s&&(a=!a)}return a};function pEe(t,e,n){const r=[];t.contourPoints.forEach(i=>{r.push([n[i][0],n[i][1]])});let a=0;return e.contourPoints.forEach(i=>{hEe([n[i][0],n[i][1]],r)||a++}),a===0}function SEe(t,e,n=!0){const r=t.filter(s=>s.type!=="CLOSED_PLANAR"),a=t.filter(s=>s.type==="CLOSED_PLANAR"),i=[];let o=[];return a.forEach((s,c)=>{const l=[];a.forEach((u,f)=>{c!=f&&pEe(s,u,e)&&l.push(f)}),l.length>0?i.push({contour:s,holes:l}):o.push(c)}),n&&(i.forEach(s=>{s.contour.type="CLOSEDPLANAR_XOR",r.push(s.contour),s.holes.forEach(c=>{a[c].type="CLOSEDPLANAR_XOR",r.push(a[c]),o=o.filter(l=>l!==c)})}),o.forEach(s=>{r.push(a[s])})),r}const CEe={processContourHoles:SEe};class IEe{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.oriented=e,this.edgeMap=new Map}initialize(){this.edgeMap.clear()}computeEdgeKey(e,n){return this.oriented||e<n?.5*(e*n)*(e*n+1)+n:.5*(n*e)*(n*e+1)+e}insertUniqueEdge(e,n,r){const a=this.computeEdgeKey(e,n);let i=this.edgeMap.get(a);return i||(i={key:a,edgeId:this.edgeMap.size,value:r},this.edgeMap.set(a,i)),i}insertEdge(e,n,r){const a=this.computeEdgeKey(e,n),i={key:a,edgeId:this.edgeMap.size,value:r};return this.edgeMap.set(a,i),i}isInsertedEdge(e,n){const r=this.computeEdgeKey(e,n);return this.edgeMap.get(r)}static getEdgePointIds(e){const n=.5*(-1+Math.sqrt(8*e.key+1)),r=e.key-.5*(n+1)*n,a=n-r;return[r,a]}}function DEe(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new IEe(t.oriented)}var EEe={newInstance:DEe};const TEe=[[-1,-1,-1,-1,-1],[0,3,-1,-1,-1],[1,0,-1,-1,-1],[1,3,-1,-1,-1],[2,1,-1,-1,-1],[0,3,2,1,-1],[2,0,-1,-1,-1],[2,3,-1,-1,-1],[3,2,-1,-1,-1],[0,2,-1,-1,-1],[1,0,3,2,-1],[1,2,-1,-1,-1],[3,1,-1,-1,-1],[0,1,-1,-1,-1],[3,0,-1,-1,-1],[-1,-1,-1,-1,-1]],yEe=[[0,1],[1,3],[2,3],[0,2]];function MEe(t){return TEe[t]}function _Ee(t){return yEe[t]}var VP={getCase:MEe,getEdge:_Ee};const{vtkErrorMacro:kP,vtkDebugMacro:OEe}=J;function wEe(t,e){function n(){let s=0,c=1;return e.slicingMode===1?(s=0,c=2):e.slicingMode===0&&(s=1,c=2),[s,c]}e.classHierarchy.push("vtkImageMarchingSquares"),t.getContourValues=()=>e.contourValues,t.setContourValues=s=>{e.contourValues=s,t.modified()};const r=[],a=[],i=[],o=EEe.newInstance();t.getPixelScalars=(s,c,l,u,f,v)=>{const[g,d,m]=s;r[0]=m*c[1]*c[0]+d*c[0]+g,r[1]=r[0]+u[f],r[2]=r[0]+u[v],r[3]=r[2]+u[f];for(let h=0;h<4;++h)a[h]=l[r[h]]},t.getPixelPoints=(s,c,l,u,f)=>{const v=s[u],g=s[f];i[0]=c[u]+v*l[u],i[1]=c[f]+g*l[f],i[2]=i[0]+l[u],i[3]=i[1],i[4]=i[0],i[5]=i[1]+l[f],i[6]=i[2],i[7]=i[5]},t.produceLines=(s,c,l,u,f,v,g,d,m,h,C)=>{var M;const p=c[e.slicingMode],S=[1,2,8,4],I=[];let D;t.getPixelScalars(c,l,v,m,h,C);let E=0;for(let _=0;_<4;_++)a[_]>=s&&(E|=S[_]);const T=VP.getCase(E);if(T[0]<0)return;t.getPixelPoints(c,u,f,h,C);const y=u[e.slicingMode]+p*f[e.slicingMode];for(let _=0;T[_]>=0;_+=2){d.push(2);for(let O=0;O<2;O++){const w=VP.getEdge(T[_+O]);if(D=void 0,e.mergePoints&&(D=(M=o.isInsertedEdge(r[w[0]],r[w[1]]))==null?void 0:M.value),D===void 0){const x=(s-a[w[0]])/(a[w[1]]-a[w[0]]),P=i.slice(w[0]*2,(w[0]+1)*2),R=i.slice(w[1]*2,(w[1]+1)*2);I[h]=P[0]+x*(R[0]-P[0]),I[C]=P[1]+x*(R[1]-P[1]),I[e.slicingMode]=y,D=g.length/3,g.push(I[0],I[1],I[2]),e.mergePoints&&o.insertEdge(r[w[0]],r[w[1]],D)}d.push(D)}}},t.requestData=(s,c)=>{const l=s[0];if(!l){kP("Invalid or missing input");return}if(e.slicingMode==null||e.slicingMode<0||e.slicingMode>2){kP("Invalid or missing slicing mode");return}console.time("msquares");const u=l.getOrigin(),f=l.getSpacing(),v=l.getDimensions(),g=l.getExtent(),d=l.computeIncrements(g),m=l.getPointData().getScalars().getData(),[h,C]=n(),p=[],S=[];let I=Math.round(e.slice);I>=v[e.slicingMode]&&(I=0);const D=[0,0,0];D[e.slicingMode]=I;for(let T=0;T<e.contourValues.length;++T){for(let y=0;y<v[C]-1;++y){D[C]=y;for(let M=0;M<v[h]-1;++M)D[h]=M,t.produceLines(e.contourValues[T],D,v,u,f,m,p,S,d,h,C)}o.initialize()}const E=ci.newInstance();E.getPoints().setData(new Float32Array(p),3),E.getLines().setData(new Uint32Array(S)),c[0]=E,OEe("Produced output"),console.timeEnd("msquares")}}const PEe={contourValues:[],slicingMode:2,slice:0,mergePoints:!1};function CW(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,PEe,n),J.obj(t,e),J.algo(t,e,1,1),J.setGet(t,e,["slicingMode","slice","mergePoints"]),J.algo(t,e,1,1),wEe(t,e)}const AEe=J.newInstance(CW,"vtkImageMarchingSquares");var xEe={newInstance:AEe,extend:CW};const{Labelmap:REe}=Ft;function IW({segmentations:t}){var v;const{representationData:e,segments:n=[0,1]}=t,{volumeId:r}=e[REe],a=Ye.getVolume(r);if(!a){console.warn(`No volume found for ${r}`);return}const o=a.voxelManager.getCompleteScalarDataArray(),s=a.dimensions[2],c=a.dimensions[0]*a.dimensions[1];for(let g=0;g<s;g++)for(let d=0;d<a.dimensions[1];d++){const m=d*a.dimensions[0]+g*c;o[m]=0,o[m+a.dimensions[0]-1]=0}const l=[],{FrameOfReferenceUID:u}=a.metadata,f=n.length;for(let g=0;g<f;g++){const d=n[g];if(!d)continue;const m=[],h=fn.newInstance({name:"Scalars",numberOfComponents:1,size:c*s,dataType:"Uint8Array"}),{containedSegmentIndices:C}=d;for(let I=0;I<s;I++){if(bEe(I,o,c,g))continue;const D=I*c;try{for(let O=0;O<c;O++){const w=o[O+D];w===g||C!=null&&C.has(w)?h.setValue(O+D,1):h.setValue(O,0)}const E=xEe.newInstance({slice:I}),T=Lv.newInstance();T.shallowCopy(a.imageData),T.getPointData().setScalars(h),E.setInputData(T);const y=[1];E.setContourValues(y),E.setMergePoints(!1);const M=E.getOutputData(),_=SW(M);if((v=_.points)!=null&&v.length){const O=pW(_.lines);m.push({contours:O,polyData:_,FrameNumber:I+1,sliceIndex:I,FrameOfReferenceUID:u})}}catch(E){console.warn(I),console.warn(E)}}const p={FrameOfReferenceUID:u},S={label:d.label,color:d.color,metadata:p,sliceContours:m};l.push(S)}return l}function bEe(t,e,n,r){const a=t*n,i=a+n;for(let o=a;o<i;o++)if(e[o]===r)return!1;return!0}class DW{constructor(){}static getContourSequence(e,n){const{data:r}=e,{projectionPoints:a,projectionPointsImageIds:i}=r.cachedStats;return a.map((o,s)=>{const c=NEe(o),l=LEe(i[s],n);return{NumberOfContourPoints:c.length/3,ContourImageSequence:l,ContourGeometricType:"CLOSED_PLANAR",ContourData:c}})}}DW.toolName="RectangleROIStartEndThreshold";function NEe(t){return[...t[0],...t[1],...t[3],...t[2]].flat().map(a=>a.toFixed(2))}function LEe(t,e){const n=e.get("sopCommonModule",t);return{ReferencedSOPClassUID:n.sopClassUID,ReferencedSOPInstanceUID:n.sopInstanceUID}}function UEe(t){if(!(t!=null&&t.data))throw new Error("Tool data is empty");if(!t.metadata||t.metadata.referencedImageId)throw new Error("Tool data is not associated with any imageId")}const Gd=class Gd{constructor(){}static convert(e,n,r){UEe(e);const{toolName:a}=e.metadata,i=Gd.TOOL_NAMES[a];if(!i)throw new Error(`Unknown tool type: ${a}, cannot convert to RTSSReport`);const o=i.getContourSequence(e,r),s=[Math.floor(Math.random()*255),Math.floor(Math.random()*255),Math.floor(Math.random()*255)];return{ReferencedROINumber:n+1,ROIDisplayColor:s,ContourSequence:o}}static register(e){Gd.TOOL_NAMES[e.toolName]=e}};Gd.TOOL_NAMES={};let DC=Gd;DC.register(DW);function FEe(t,e){B0.acceptAutoGenerated(t,e)}const{isEqual:VEe}=Zn;function Iy(t,e){const{polyline:n}=t.data.contour,{points:r}=t.data.handles,{length:a}=r;if(e===a)return n.length;if(e<0&&(e=(e+a)%a),e===0)return 0;const i=r[e],o=n.findIndex(c=>VEe(i,c));if(o!==-1)return o;let s=1/0;return n.reduce((c,l,u)=>{const f=l7(l,i);return f<s?(s=f,u):c},-1)}const kEe=Object.freeze(Object.defineProperty({__proto__:null,AnnotationToPointData:DC,acceptAutogeneratedInterpolations:FEe,areCoplanarContours:dEe,calculatePerimeter:hy,contourFinder:mEe,detectContourHoles:CEe,findHandlePolylineIndex:Iy,generateContourSetsFromLabelmap:IW,getContourHolesDataCanvas:Ih,getContourHolesDataWorld:AG,getDeduplicatedVTKPolyDataPoints:SW,updateContourPolyline:nl},Symbol.toStringTag,{value:"Module"}));function EW(t,e,n){const{imageData:r}=t,{overwrite:a,boundsIJK:i}=n,o=(n==null?void 0:n.overlapType)||0,s=t.voxelManager,c=t.voxelManager.getScalarDataLength();if(a)for(let p=0;p<c;p++)s.setAtIndex(p,0);const{baseVolumeIdx:l,volumeInfoList:u}=Wk(t,e);let f,v,g;const d=(p,S,I)=>{const D=({value:x})=>{v=v+1,x>=g.lower&&x<=g.upper&&(f=f+1)},{imageData:E,dimensions:T,lower:y,upper:M}=p,_=A_(E,T,S,I);v=0,f=0,g={lower:y,upper:M};let O=!1;const{voxelManager:w}=E.get("voxelManager");return w.forEach(D,{imageData:E,boundsIJK:_}),o===0?O=f>0:o==1&&(O=f===v),O},m=(p,S)=>{const{imageData:I,lower:D,upper:E}=p,T=I.get("voxelManager").voxelManager,y=T.toIndex(S),M=T.getAtIndex(y);return!(M<=D||M>=E)},h=({index:p,pointIJK:S,pointLPS:I})=>{let D=u.length>0;for(let E=0;E<u.length&&(u[E].volumeSize===c?D=m(u[E],S):D=d(u[E],u[l].spacing,I),!!D);E++);D&&s.setAtIndex(p,n.segmentIndex||1)};return t.voxelManager.forEach(h,{imageData:r,boundsIJK:i}),ki(t.volumeId),t}const{transformWorldToIndex:GP}=Zn;var m1;let eD=(m1=class extends Br{constructor(e={},n={supportedInteractionTypes:["Mouse","Touch"],configuration:{storePointData:!1,shadow:!0,preventHandleOutsideImage:!1,getTextLines:GEe,statsCalculator:As}}){super(e,n),this.addNewAnnotation=r=>{const a=r.detail,{currentPoints:i,element:o}=a,s=i.world,c=Ae(o),{viewport:l,renderingEngine:u}=c;this.isDrawing=!0;const f=l.getCamera(),{viewPlaneNormal:v,viewUp:g}=f,d=this.getReferencedImageId(l,s,v,g),m=l.getFrameOfReferenceUID(),h={invalidated:!0,highlighted:!0,metadata:{toolName:this.getToolName(),viewPlaneNormal:[...v],viewUp:[...g],FrameOfReferenceUID:m,referencedImageId:d,...l.getViewReference({points:[s]})},data:{label:"",handles:{points:[[...s],[...s],[...s],[...s]],textBox:{hasMoved:!1,worldPosition:[0,0,0],worldBoundingBox:{topLeft:[0,0,0],topRight:[0,0,0],bottomLeft:[0,0,0],bottomRight:[0,0,0]}},activeHandleIndex:null},cachedStats:{}}};qn(h,o);const C=Bt(o,this.getToolName());return this.editData={annotation:h,viewportIdsToRender:C,handleIndex:3,movingTextBox:!1,newAnnotation:!0,hasMoved:!1},this._activateDraw(o),Yt(o),r.preventDefault(),qe(C),h},this.isPointNearTool=(r,a,i,o)=>{const s=Ae(r),{viewport:c}=s,{data:l}=a,{points:u}=l.handles,f=c.worldToCanvas(u[0]),v=c.worldToCanvas(u[3]),g=this._getRectangleImageCoordinates([f,v]),d=[i[0],i[1]],{left:m,top:h,width:C,height:p}=g;return $_([m,h,C,p],d)<=o},this.toolSelectedCallback=(r,a)=>{const i=r.detail,{element:o}=i;a.highlighted=!0;const s=Bt(o,this.getToolName());this.editData={annotation:a,viewportIdsToRender:s,movingTextBox:!1},this._activateModify(o),Yt(o),Ae(o),qe(s),r.preventDefault()},this.handleSelectedCallback=(r,a,i)=>{const o=r.detail,{element:s}=o,{data:c}=a;a.highlighted=!0;let l=!1,u;i.worldPosition?l=!0:u=c.handles.points.findIndex(v=>v===i);const f=Bt(s,this.getToolName());this.editData={annotation:a,viewportIdsToRender:f,handleIndex:u,movingTextBox:l},this._activateModify(s),Yt(s),Ae(s),qe(f),r.preventDefault()},this._endCallback=r=>{const a=r.detail,{element:i}=a,{annotation:o,viewportIdsToRender:s,newAnnotation:c,hasMoved:l}=this.editData,{data:u}=o;c&&!l||(u.handles.activeHandleIndex=null,this._deactivateModify(i),this._deactivateDraw(i),Mn(i),this.doneEditMemo(),this.editData=null,this.isDrawing=!1,this.isHandleOutsideImage&&this.configuration.preventHandleOutsideImage&&sr(o.annotationUID),qe(s),c&&Ur(o))},this._dragCallback=r=>{this.isDrawing=!0;const a=r.detail,{element:i}=a,{annotation:o,viewportIdsToRender:s,handleIndex:c,movingTextBox:l,newAnnotation:u}=this.editData;this.createMemo(i,o,{newAnnotation:u});const{data:f}=o;if(l){const{deltaPoints:v}=a,g=v.world,{textBox:d}=f.handles,{worldPosition:m}=d;m[0]+=g[0],m[1]+=g[1],m[2]+=g[2],d.hasMoved=!0}else if(c===void 0){const{deltaPoints:v}=a,g=v.world,{points:d}=f.handles;d.forEach(m=>{m[0]+=g[0],m[1]+=g[1],m[2]+=g[2]}),o.invalidated=!0}else{const{currentPoints:v}=a,g=Ae(i),{worldToCanvas:d,canvasToWorld:m}=g.viewport,h=v.world,{points:C}=f.handles;C[c]=[...h];let p,S,I,D,E,T,y,M;switch(c){case 0:case 3:p=d(C[0]),D=d(C[3]),S=[D[0],p[1]],I=[p[0],D[1]],T=m(S),y=m(I),C[1]=T,C[2]=y;break;case 1:case 2:S=d(C[1]),I=d(C[2]),p=[I[0],S[1]],D=[S[0],I[1]],E=m(p),M=m(D),C[0]=E,C[3]=M;break}o.invalidated=!0}this.editData.hasMoved=!0,Ae(i),qe(s)},this.cancel=r=>{if(this.isDrawing){this.isDrawing=!1,this._deactivateDraw(r),this._deactivateModify(r),Mn(r);const{annotation:a,viewportIdsToRender:i,newAnnotation:o}=this.editData,{data:s}=a;return a.highlighted=!1,s.handles.activeHandleIndex=null,qe(i),o&&Ur(a),this.editData=null,a.annotationUID}},this._activateDraw=r=>{st.isInteractingWithTool=!0,r.addEventListener(B.MOUSE_UP,this._endCallback),r.addEventListener(B.MOUSE_DRAG,this._dragCallback),r.addEventListener(B.MOUSE_MOVE,this._dragCallback),r.addEventListener(B.MOUSE_CLICK,this._endCallback),r.addEventListener(B.TOUCH_END,this._endCallback),r.addEventListener(B.TOUCH_DRAG,this._dragCallback),r.addEventListener(B.TOUCH_TAP,this._endCallback)},this._deactivateDraw=r=>{st.isInteractingWithTool=!1,r.removeEventListener(B.MOUSE_UP,this._endCallback),r.removeEventListener(B.MOUSE_DRAG,this._dragCallback),r.removeEventListener(B.MOUSE_MOVE,this._dragCallback),r.removeEventListener(B.MOUSE_CLICK,this._endCallback),r.removeEventListener(B.TOUCH_END,this._endCallback),r.removeEventListener(B.TOUCH_DRAG,this._dragCallback),r.removeEventListener(B.TOUCH_TAP,this._endCallback)},this._activateModify=r=>{st.isInteractingWithTool=!0,r.addEventListener(B.MOUSE_UP,this._endCallback),r.addEventListener(B.MOUSE_DRAG,this._dragCallback),r.addEventListener(B.MOUSE_CLICK,this._endCallback),r.addEventListener(B.TOUCH_END,this._endCallback),r.addEventListener(B.TOUCH_DRAG,this._dragCallback),r.addEventListener(B.TOUCH_TAP,this._endCallback)},this._deactivateModify=r=>{st.isInteractingWithTool=!1,r.removeEventListener(B.MOUSE_UP,this._endCallback),r.removeEventListener(B.MOUSE_DRAG,this._dragCallback),r.removeEventListener(B.MOUSE_CLICK,this._endCallback),r.removeEventListener(B.TOUCH_END,this._endCallback),r.removeEventListener(B.TOUCH_DRAG,this._dragCallback),r.removeEventListener(B.TOUCH_TAP,this._endCallback)},this.renderAnnotation=(r,a)=>{let i=!1;const{viewport:o}=r,{element:s}=o;let c=nr(this.getToolName(),s);if(!(c!=null&&c.length)||(c=this.filterInteractableAnnotationsForElement(s,c),!(c!=null&&c.length)))return i;const l=this.getTargetId(o),u=o.getRenderingEngine(),f={toolGroupId:this.toolGroupId,toolName:this.getToolName(),viewportId:r.viewport.id};for(let v=0;v<c.length;v++){const g=c[v],{annotationUID:d,data:m}=g,{points:h,activeHandleIndex:C}=m.handles,p=h.map(V=>o.worldToCanvas(V));f.annotationUID=d;const{color:S,lineWidth:I,lineDash:D}=this.getAnnotationStyle({annotation:g,styleSpecifier:f}),{viewPlaneNormal:E,viewUp:T}=o.getCamera();if(!m.cachedStats[l]||m.cachedStats[l].areaUnit==null)m.cachedStats[l]={Modality:null,area:null,max:null,mean:null,stdDev:null,areaUnit:null},this._calculateCachedStats(g,E,T,u,r);else if(g.invalidated&&(this._throttledCalculateCachedStats(g,E,T,u,r),o instanceof yr)){const{referencedImageId:V}=g.metadata;for(const X in m.cachedStats)X.startsWith("imageId")&&u.getStackViewports().find(De=>{const pe=ca(V),Te=De.hasImageURI(pe),Fe=ca(De.getCurrentImageId());return Te&&Fe!==pe})&&delete m.cachedStats[X]}if(!o.getRenderingEngine())return console.warn("Rendering Engine has been destroyed"),i;let y;if(!Gi(d))continue;!Ya(d)&&!this.editData&&C!==null&&(y=[p[C]]),y&&Hr(a,d,"0",y,{color:S});const M=`${d}-rect`;K_(a,d,"0",p,{color:S,lineDash:D,lineWidth:I},M),i=!0;const O=this.getLinkedTextBoxStyle(f,g);if(!O.visibility){m.handles.textBox={hasMoved:!1,worldPosition:[0,0,0],worldBoundingBox:{topLeft:[0,0,0],topRight:[0,0,0],bottomLeft:[0,0,0],bottomRight:[0,0,0]}};continue}const w=this.configuration.getTextLines(m,l);if(!w||w.length===0)continue;if(!m.handles.textBox.hasMoved){const V=gs(p);m.handles.textBox.worldPosition=o.canvasToWorld(V)}const x=o.worldToCanvas(m.handles.textBox.worldPosition),R=ro(a,d,"1",w,x,p,{},O),{x:L,y:H,width:F,height:U}=R;m.handles.textBox.worldBoundingBox={topLeft:o.canvasToWorld([L,H]),topRight:o.canvasToWorld([L+F,H]),bottomLeft:o.canvasToWorld([L,H+U]),bottomRight:o.canvasToWorld([L+F,H+U])}}return i},this._getRectangleImageCoordinates=r=>{const[a,i]=r;return{left:Math.min(a[0],i[0]),top:Math.min(a[1],i[1]),width:Math.abs(a[0]-i[0]),height:Math.abs(a[1]-i[1])}},this._calculateCachedStats=(r,a,i,o,s)=>{var m,h,C;const{data:c}=r,{viewport:l}=s,{element:u}=l,f=c.handles.points[0],v=c.handles.points[3],{cachedStats:g}=c,d=Object.keys(g);for(let p=0;p<d.length;p++){const S=d[p],I=this.getTargetImageData(S);if(!I)continue;const{dimensions:D,imageData:E,metadata:T,voxelManager:y}=I,M=GP(E,f);M[0]=Math.floor(M[0]),M[1]=Math.floor(M[1]),M[2]=Math.floor(M[2]);const _=GP(E,v);if(_[0]=Math.floor(_[0]),_[1]=Math.floor(_[1]),_[2]=Math.floor(_[2]),this._isInsideVolume(M,_,D)){this.isHandleOutsideImage=!1;const O=Math.min(M[0],_[0]),w=Math.max(M[0],_[0]),x=Math.min(M[1],_[1]),P=Math.max(M[1],_[1]),R=Math.min(M[2],_[2]),L=Math.max(M[2],_[2]),H=[[O,w],[x,P],[R,L]],{worldWidth:F,worldHeight:U}=zI(a,i,f,v),V=[M,_],{scale:X,areaUnit:re}=us(I,V),ue=Math.abs(F*U)/(X*X),De={isPreScaled:ac(l,S),isSuvScaled:this.isSuvScaled(l,S,r.metadata.referencedImageId)},pe=mu(T.Modality,r.metadata.referencedImageId,De),Te=y.forEach(this.configuration.statsCalculator.statsCallback,{boundsIJK:H,imageData:E,returnPoints:this.configuration.storePointData}),Fe=this.configuration.statsCalculator.getStatistics();g[S]={Modality:T.Modality,area:ue,mean:(m=Fe.mean)==null?void 0:m.value,stdDev:(h=Fe.stdDev)==null?void 0:h.value,max:(C=Fe.max)==null?void 0:C.value,statsArray:Fe.array,pointsInShape:Te,areaUnit:re,modalityUnit:pe}}else this.isHandleOutsideImage=!0,g[S]={Modality:T.Modality}}return r.invalidated=!1,$r(r,u),g},this._isInsideVolume=(r,a,i)=>ga(r,i)&&ga(a,i),this._throttledCalculateCachedStats=no(this._calculateCachedStats,100,{trailing:!0})}},m1.hydrate=(e,n,r)=>{const a=wr(e);if(!a)return;const{viewport:i}=a,o=i.getFrameOfReferenceUID(),{viewPlaneNormal:s,viewUp:c}=i.getCamera(),l=new m1,u=l.getReferencedImageId(i,n[0],s,c),f={annotationUID:(r==null?void 0:r.annotationUID)||Cr(),data:{handles:{points:n,activeHandleIndex:null},label:"",cachedStats:{}},highlighted:!1,autoGenerated:!1,invalidated:!1,isLocked:!1,isVisible:!0,metadata:{toolName:l.getToolName(),viewPlaneNormal:s,FrameOfReferenceUID:o,referencedImageId:u,...r}};qn(f,i.element),qe([i.id])},m1);function GEe(t,e){const n=t.cachedStats[e],{area:r,mean:a,max:i,stdDev:o,areaUnit:s,modalityUnit:c}=n;if(a===void 0)return;const l=[];return l.push(`Area: ${kn(r)} ${s}`),l.push(`Mean: ${kn(a)} ${c}`),l.push(`Max: ${kn(i)} ${c}`),l.push(`Std Dev: ${kn(o)} ${c}`),l}eD.toolName="RectangleROI";const{transformWorldToIndex:yg}=Zn;class s4 extends eD{constructor(e={},n={configuration:{storePointData:!1,numSlicesToPropagate:10,computePointsInsideVolume:!1,getTextLines:BEe,statsCalculator:As,showTextBox:!1}}){super(e,n),this.addNewAnnotation=r=>{const a=r.detail,{currentPoints:i,element:o}=a,s=i.world,c=Ae(o),{viewport:l,renderingEngine:u}=c;this.isDrawing=!0;const f=l.getCamera(),{viewPlaneNormal:v,viewUp:g}=f;let d,m,h;if(l instanceof Xr)throw new Error("Stack Viewport Not implemented");{const T=this.getTargetId(l);h=nc(T),m=Ye.getVolume(h),d=jc(m,s,v)}const C=vu(m,v),p=this._getStartCoordinate(s,v),S=this._getEndCoordinate(s,C,v),I=l.getFrameOfReferenceUID(),D={highlighted:!0,invalidated:!0,metadata:{viewPlaneNormal:[...v],enabledElement:c,viewUp:[...g],FrameOfReferenceUID:I,referencedImageId:d,toolName:this.getToolName(),volumeId:h,spacingInNormal:C},data:{label:"",startCoordinate:p,endCoordinate:S,cachedStats:{pointsInVolume:[],projectionPoints:[],projectionPointsImageIds:[d],statistics:[]},handles:{textBox:{hasMoved:!1,worldPosition:[0,0,0],worldBoundingBox:{topLeft:[0,0,0],topRight:[0,0,0],bottomLeft:[0,0,0],bottomRight:[0,0,0]}},points:[[...s],[...s],[...s],[...s]],activeHandleIndex:null},labelmapUID:null}};this._computeProjectionPoints(D,m),qn(D,o);const E=Bt(o,this.getToolName());return this.editData={annotation:D,viewportIdsToRender:E,handleIndex:3,newAnnotation:!0,hasMoved:!1},this._activateDraw(o),Yt(o),r.preventDefault(),qe(E),D},this._endCallback=r=>{const a=r.detail,{element:i}=a,{annotation:o,viewportIdsToRender:s,newAnnotation:c,hasMoved:l}=this.editData,{data:u}=o;if(c&&!l)return;u.handles.activeHandleIndex=null,this._deactivateModify(i),this._deactivateDraw(i),Mn(i);const f=Ae(i);this.editData=null,this.isDrawing=!1,this.isHandleOutsideImage&&this.configuration.preventHandleOutsideImage&&sr(o.annotationUID);const v=this.getTargetId(f.viewport),g=Ye.getVolume(v.split(/volumeId:|\?/)[1]);this.configuration.calculatePointsInsideVolume&&this._computePointsInsideVolume(o,v,g,f),qe(s),c&&Ur(o)},this.renderAnnotation=(r,a)=>{let i=!1;const{viewport:o}=r;let s=nr(this.getToolName(),o.element);if(!(s!=null&&s.length))return i;s=qI(s,o.getCamera());const c={toolGroupId:this.toolGroupId,toolName:this.getToolName(),viewportId:r.viewport.id};for(let l=0;l<s.length;l++){const u=s[l],{annotationUID:f,data:v,metadata:g}=u,{startCoordinate:d,endCoordinate:m}=v,{points:h,activeHandleIndex:C}=v.handles,p=h.map(F=>o.worldToCanvas(F));c.annotationUID=f;const S=this.getStyle("lineWidth",c,u),I=this.getStyle("lineDash",c,u),D=this.getStyle("color",c,u),E=o.getCamera().focalPoint,T=o.getCamera().viewPlaneNormal;let y=d,M=m;Array.isArray(d)&&(y=this._getCoordinateForViewplaneNormal(y,T),v.startCoordinate=y,v.handles.points[0][this._getIndexOfCoordinatesForViewplaneNormal(T)]=y,v.startCoordinate=y,v.handles.points[0][this._getIndexOfCoordinatesForViewplaneNormal(T)]=y),Array.isArray(m)&&(M=this._getCoordinateForViewplaneNormal(M,T),v.endCoordinate=M,v.endCoordinate=M);const _=Ul(y),O=Ul(M),w=this._getCoordinateForViewplaneNormal(E,T),x=Ul(w);if(x<Math.min(_,O)||x>Math.max(_,O))continue;u.invalidated&&this._throttledCalculateCachedStats(u,r);let P=!1;if((x===_||x===O)&&(P=!0),!o.getRenderingEngine())return console.warn("Rendering Engine has been destroyed"),i;let R;if(!Gi(f))continue;!Ya(f)&&!this.editData&&C!==null&&P&&(R=[p[C]]),R&&Hr(a,f,"0",R,{color:D});let L=I;if(P||(L=2),Ch(a,f,"0",p[0],p[3],{color:D,lineDash:L,lineWidth:S}),i=!0,this.configuration.showTextBox&&this.configuration.calculatePointsInsideVolume){const F=this.getLinkedTextBoxStyle(c,u);if(!F.visibility){v.handles.textBox={hasMoved:!1,worldPosition:[0,0,0],worldBoundingBox:{topLeft:[0,0,0],topRight:[0,0,0],bottomLeft:[0,0,0],bottomRight:[0,0,0]}};continue}const U=this.configuration.getTextLines(v,{metadata:g});if(!U||U.length===0)continue;if(!v.handles.textBox.hasMoved){const Fe=gs(p);v.handles.textBox.worldPosition=o.canvasToWorld(Fe)}const V=o.worldToCanvas(v.handles.textBox.worldPosition),re=ro(a,f,"1",U,V,p,{},F),{x:ue,y:De,width:pe,height:Te}=re;v.handles.textBox.worldBoundingBox={topLeft:o.canvasToWorld([ue,De]),topRight:o.canvasToWorld([ue+pe,De]),bottomLeft:o.canvasToWorld([ue,De+Te]),bottomRight:o.canvasToWorld([ue+pe,De+Te])}}}return i},this._throttledCalculateCachedStats=no(this._calculateCachedStatsTool,100,{trailing:!0})}_computeProjectionPoints(e,n){const{data:r,metadata:a}=e,{viewPlaneNormal:i,spacingInNormal:o}=a,{imageData:s}=n,{startCoordinate:c,endCoordinate:l}=r,{points:u}=r.handles,f=yg(s,u[0]),v=yg(s,u[0]),g=Xe();s.indexToWorldVec3(f,g);const d=Xe();s.indexToWorldVec3(v,d),this._getIndexOfCoordinatesForViewplaneNormal(i)==2?(g[2]=c,d[2]=l):this._getIndexOfCoordinatesForViewplaneNormal(i)==0?(g[0]=c,d[0]=l):this._getIndexOfCoordinatesForViewplaneNormal(i)==1&&(g[1]=c,d[1]=l);const m=Si(g,d),h=[];for(let C=0;C<m;C+=o)h.push(u.map(p=>{const S=Xe();return Hn(S,p,i,C),Array.from(S)}));r.cachedStats.projectionPoints=h}_computePointsInsideVolume(e,n,r,a){var E,T,y;const{data:i,metadata:o}=e,{viewPlaneNormal:s,viewUp:c}=o,{viewport:l}=a,u=i.cachedStats.projectionPoints,f=[[]],v=this.getTargetImageData(n),g=i.handles.points[0],d=i.handles.points[3],{worldWidth:m,worldHeight:h}=zI(s,c,g,d),C=us(v,i.habdles),p=Math.abs(m*h)/(C.scale*C.scale),S={isPreScaled:ac(l,n),isSuvScaled:this.isSuvScaled(l,n,e.metadata.referencedImageId)},I=mu(o.Modality,e.metadata.referencedImageId,S);for(let M=0;M<u.length;M++){if(!r)continue;const _=u[M][0],{dimensions:O,imageData:w,voxelManager:x}=r,P=yg(w,g),R=yg(w,_),L=this._getIndexOfCoordinatesForViewplaneNormal(s);P[0]=Math.floor(P[0]),P[1]=Math.floor(P[1]),P[2]=Math.floor(P[2]),P[L]=R[L];const H=yg(w,d);if(H[0]=Math.floor(H[0]),H[1]=Math.floor(H[1]),H[2]=Math.floor(H[2]),H[L]=R[L],this._isInsideVolume(P,H,O)){this.isHandleOutsideImage=!1;const F=Math.min(P[0],H[0]),U=Math.max(P[0],H[0]),V=Math.min(P[1],H[1]),X=Math.max(P[1],H[1]),re=Math.min(P[2],H[2]),ue=Math.max(P[2],H[2]),De=[[F,U],[V,X],[re,ue]],pe=x.forEach(this.configuration.statsCalculator.statsCallback,{boundsIJK:De,imageData:w,returnPoints:this.configuration.storePointData});f.push(pe)}}const D=this.configuration.statsCalculator.getStatistics();i.cachedStats.pointsInVolume=f,i.cachedStats.statistics={Modality:o.Modality,area:p,mean:(E=D.mean)==null?void 0:E.value,stdDev:(T=D.stdDev)==null?void 0:T.value,max:(y=D.max)==null?void 0:y.value,statsArray:D.array,areaUnit:C.areaUnit,modalityUnit:I}}_calculateCachedStatsTool(e,n){const r=e.data,{viewport:a}=n,{cachedStats:i}=r,o=this.getTargetId(a),s=Ye.getVolume(o.split(/volumeId:|\?/)[1]);return this._computeProjectionPoints(e,s),this.configuration.calculatePointsInsideVolume&&this._computePointsInsideVolume(e,o,s,n),this.configuration.calculatePointsInsideVolume&&this._computePointsInsideVolume(e,o,s,n),e.invalidated=!1,$r(e,a.element),i}_getStartCoordinate(e,n){const r=e;return this._getCoordinateForViewplaneNormal(r,n)}_getEndCoordinate(e,n,r){const a=this.configuration.numSlicesToPropagate,i=Xe();return Hn(i,e,r,a*n),this._getCoordinateForViewplaneNormal(i,r)}_getIndexOfCoordinatesForViewplaneNormal(e){const n=[Math.abs(e[0]),Math.abs(e[1]),Math.abs(e[2])];return n.indexOf(Math.max(...n))}_getCoordinateForViewplaneNormal(e,n){const r=this._getIndexOfCoordinatesForViewplaneNormal(n);return e[r]}}function BEe(t,e={}){const n=t.cachedStats.statistics,{area:r,mean:a,max:i,stdDev:o,areaUnit:s,modalityUnit:c}=n;if(a===void 0)return;const l=[];return l.push(`Area: ${kn(r)} ${s}`),l.push(`Mean: ${kn(a)} ${c}`),l.push(`Max: ${kn(i)} ${c}`),l.push(`Std Dev: ${kn(o)} ${c}`),l}s4.toolName="RectangleROIStartEndThreshold";class c4 extends eD{constructor(e={},n={supportedInteractionTypes:["Mouse","Touch"],configuration:{shadow:!0,preventHandleOutsideImage:!1}}){super(e,n),this.addNewAnnotation=r=>{const a=r.detail,{currentPoints:i,element:o}=a,s=i.world,c=Ae(o),{viewport:l,renderingEngine:u}=c;this.isDrawing=!0;const f=l.getCamera(),{viewPlaneNormal:v,viewUp:g}=f,d=this.getTargetId(l);let m,h;if(l instanceof Xr)m=d.split("imageId:")[1];else{h=nc(d);const I=Ye.getVolume(h);m=jc(I,s,v)}const C=l.getFrameOfReferenceUID(),p={highlighted:!0,invalidated:!0,metadata:{viewPlaneNormal:[...v],enabledElement:c,viewUp:[...g],FrameOfReferenceUID:C,referencedImageId:m,toolName:this.getToolName(),volumeId:h},data:{label:"",handles:{textBox:{hasMoved:!1,worldPosition:null,worldBoundingBox:null},points:[[...s],[...s],[...s],[...s]],activeHandleIndex:null},segmentationId:null}};qn(p,o);const S=Bt(o,this.getToolName());return this.editData={annotation:p,viewportIdsToRender:S,handleIndex:3,newAnnotation:!0,hasMoved:!1},this._activateDraw(o),Yt(o),r.preventDefault(),qe(S),p},this.renderAnnotation=(r,a)=>{let i=!1;const{viewport:o}=r,{element:s}=o;let c=nr(this.getToolName(),s);if(!(c!=null&&c.length)||(c=this.filterInteractableAnnotationsForElement(s,c),!(c!=null&&c.length)))return i;const l={toolGroupId:this.toolGroupId,toolName:this.getToolName(),viewportId:r.viewport.id};for(let u=0;u<c.length;u++){const f=c[u],{annotationUID:v,data:g}=f,{points:d,activeHandleIndex:m}=g.handles,h=d.map(E=>o.worldToCanvas(E));l.annotationUID=v;const C=this.getStyle("lineWidth",l,f),p=this.getStyle("lineDash",l,f),S=this.getStyle("color",l,f);if(!o.getRenderingEngine())return console.warn("Rendering Engine has been destroyed"),i;$r(f,s);let I;if(!Gi(v))continue;!Ya(v)&&!this.editData&&m!==null&&(I=[h[m]]),I&&Hr(a,v,"0",I,{color:S}),Ch(a,v,"0",h[0],h[3],{color:S,lineDash:p,lineWidth:C}),i=!0}return i}}}c4.toolName="RectangleROIThreshold";function TW(t,e,n={}){const r=[];return t.forEach(i=>{var g,d;const{data:o}=i,{points:s}=o.handles,{imageData:c,dimensions:l}=e;let u=s;if((g=o.cachedStats)!=null&&g.projectionPoints){const{projectionPoints:m}=o.cachedStats;u=[].concat(...m)}const f=u.map(m=>Da(c,m));let v=su(f,l);n.numSlicesToProject&&!((d=o.cachedStats)!=null&&d.projectionPoints)&&(v=gW(v,n.numSlicesToProject)),r.push(v)}),r.length===1?r[0]:r.reduce((i,o)=>({iMin:Math.min(i.iMin,o.iMin),jMin:Math.min(i.jMin,o.jMin),kMin:Math.min(i.kMin,o.kMin),iMax:Math.max(i.iMax,o.iMax),jMax:Math.max(i.jMax,o.jMax),kMax:Math.max(i.kMax,o.kMax)}),{iMin:1/0,jMin:1/0,kMin:1/0,iMax:-1/0,jMax:-1/0,kMax:-1/0})}function WEe(t,e,n,r){const a=t.map(s=>i0.getAnnotation(s));HEe(a);let i;for(let s=0;s<n.length;s++)(n[s].volume.voxelManager.getScalarDataLength()===e.voxelManager.getScalarDataLength()||s===0)&&(i=TW(a,n[s].volume,r));const o=EW(e,n,{...r,boundsIJK:i});return o.modified(),o}function HEe(t){const e=[c4.toolName,s4.toolName];for(const n of t){const r=n.metadata.toolName;if(!e.includes(r))throw new Error("rectangleROIThresholdVolumeByRange only supports RectangleROIThreshold and RectangleROIStartEndThreshold annotations")}}function $Ee(t,e=1,n="mergedLabelmap"){t.forEach(({direction:c,dimensions:l,origin:u,spacing:f})=>{if(!gn(l,t[0].dimensions)||!gn(c,t[0].direction)||!gn(f,t[0].spacing)||!gn(u,t[0].origin))throw new Error("labelmaps must have the same size and shape")});const r=t[0],a=r.voxelManager.getConstructor(),i=new a(r.voxelManager.getScalarDataLength());t.forEach(c=>{const l=c.voxelManager,u=l.getScalarDataLength();for(let f=0;f<u;f++)l.getAtIndex(f)===e&&(i[f]=e)});const o={scalarData:i,metadata:r.metadata,spacing:r.spacing,origin:r.origin,direction:r.direction,dimensions:r.dimensions};return oh(n,o)}async function zEe(t){const{viewportId:e,renderingEngineId:n,options:r}=t;let{segmentationId:a}=t;const i=Ka(e,n);if(!i)throw new Error("element disabled");const{viewport:o}=i;if(!(o instanceof yr))throw new Error("Segmentation only supports VolumeViewport");const{uid:s}=o.getDefaultActor();if(a===void 0&&(a=`${s}-based-segmentation-${(r==null?void 0:r.volumeId)??Cr().slice(0,8)}`),r){const c=structuredClone(r);await oh(a,c)}else{const c=o.getVolumeId();$1(c,{volumeId:a})}return a}function yW(t,e,n={}){const r=n.onFlood,a=n.onBoundary,i=n.equals,o=n.filter,s=n.diagonals||!1,c=D(e),l=E(),u=[],f=[],v=new Set,g=n.bounds;for(u.push({currentArgs:e});u.length>0;)d(u.pop());return{flooded:f};function d(y){const M=y.currentArgs,_=y.previousArgs;m(M)||(h(M),C(M)?(p(M),I(M)):S(_))}function m(y){const[M,_,O=0]=y,w=M+32768+65536*(_+32768+65536*(O+32768));return v.has(w)}function h(y){const[M,_,O=0]=y,w=M+32768+65536*(_+32768+65536*(O+32768));v.add(w)}function C(y){const M=D(y);return i?i(M,c):M===c}function p(y){f.push(y),r&&r(...y)}function S(y){const[M,_,O=0]=y,w=M+32768+65536*(_+32768+65536*(O+32768));g==null||g.set(w,y),a&&a(...y)}function I(y){for(let M=0;M<l.length;M+=1){const _=l[M],O=y.slice(0);for(let w=0;w<y.length;w+=1)O[w]+=_[w];(o==null?void 0:o(O))!==!1&&(m(O)||u.push({currentArgs:O,previousArgs:y}))}}function D(y){return t(...y)}function E(){return T(e.length).filter(function(M){const _=qEe(M);return _!==0&&(_===1||s)})}function T(y){const M=[],_=function(O){return O.split("").map(function(w){return parseInt(w,10)-1})};for(let O=0;O<Math.pow(3,y);O+=1){const w=jEe(O.toString(3),"0",y);M.push(_(w))}return M}}function qEe(t){let e=0;for(let n=0;n<t.length;n+=1)t[n]!==0&&(e+=1);return e}function jEe(t,e,n){return(new Array(n+1).join(e)+t).slice(-n)}const QEe={[Xt.Initialize]:t=>{const{strategySpecificConfiguration:e}=t;if(!e)return;const{centerSegmentIndex:n}=e;n&&(t.segmentIndex=n.segmentIndex)},[Xt.OnInteractionStart]:t=>{const{segmentIndex:e,previewSegmentIndex:n,segmentationVoxelManager:r,centerIJK:a,strategySpecificConfiguration:i,viewPlaneNormal:o,segmentationImageData:s,preview:c}=t;if(!(i!=null&&i.useCenterSegmentIndex))return;delete i.centerSegmentIndex;let l=!1,u=!1;const f=[...r.getBoundsIJK()];Math.abs(o[0])>.8?f[0]=[a[0],a[0]]:Math.abs(o[1])>.8?f[1]=[a[1],a[1]]:Math.abs(o[2])>.8&&(f[2]=[a[2],a[2]]);const v=({value:d})=>{l||(l=d===e),u||(u=d===n)};if(r.forEach(v,{imageData:s,isInObject:t.isInObject,boundsIJK:f}),!l&&!u)return;let g=r.getAtIJKPoint(a);if(g===n)if(c)g=c.segmentIndex;else return;else u&&(g=null);t.segmentIndex=g,i.centerSegmentIndex={segmentIndex:g}}},KEe={[Xt.Initialize]:t=>{const{operationName:e,centerIJK:n,strategySpecificConfiguration:r,segmentationVoxelManager:a,imageVoxelManager:i,segmentIndex:o,viewport:s}=t,{THRESHOLD:c}=r;if(!(c!=null&&c.isDynamic)||!n||!o||e===Xt.RejectPreview||e===Xt.OnInteractionEnd)return;const l=a.getBoundsIJK(),{threshold:u,dynamicRadius:f=0}=c,v=u?0:f,{viewPlaneNormal:g}=s.getCamera(),d=l.map((p,S)=>{const[I,D]=p;return[Math.max(I,n[S]-v),Math.min(D,n[S]+v)]});Math.abs(g[0])>.8?d[0]=[n[0],n[0]]:Math.abs(g[1])>.8?d[1]=[n[1],n[1]]:Math.abs(g[2])>.8&&(d[2]=[n[2],n[2]]);const m=u||[1/0,-1/0],h=v*v,C=({value:p,pointIJK:S})=>{if(OT(n,S)>h)return;const D=Array.isArray(p)?ov(p):p;m[0]=Math.min(D,m[0]),m[1]=Math.max(D,m[1])};i.forEach(C,{boundsIJK:d}),t.strategySpecificConfiguration.THRESHOLD.threshold=m},[Xt.OnInteractionStart]:t=>{var r;const{strategySpecificConfiguration:e,preview:n}=t;!((r=e==null?void 0:e.THRESHOLD)!=null&&r.isDynamic)&&!n||(e.THRESHOLD.threshold=null)},[Xt.ComputeInnerCircleRadius]:t=>{const{configuration:e,viewport:n}=t,{THRESHOLD:{dynamicRadius:r=0}={}}=e.strategySpecificConfiguration||{};if(r===0)return;const a=n.getImageData();if(!a)return;const{spacing:i}=a,o=[n.element.clientWidth/2,n.element.clientHeight/2],s=r*i[0],l=n.canvasToWorld(o).map(d=>d+s),u=n.worldToCanvas(l),f=Math.abs(o[0]-u[0]),{strategySpecificConfiguration:v,activeStrategy:g}=e;v[g]||(v[g]={}),v[g].dynamicRadiusInCanvas=3+f}},XEe={[Xt.Initialize]:t=>{t.segmentIndex=0}},{isEqual:jE}=Zn,BP={toIJK:t=>t,fromIJK:t=>t,type:"acquistion"},YEe={toIJK:([t,e,n])=>[n,t,e],fromIJK:([t,e,n])=>[e,n,t],type:"jk"},ZEe={toIJK:([t,e,n])=>[t,n,e],fromIJK:([t,e,n])=>[t,n,e],type:"ik"};function MW(t,e){if(!(t instanceof zr))return{...BP,boundsIJKPrime:e};const{viewPlaneNormal:n}=t.getCamera(),r=jE(Math.abs(n[0]),1)&&YEe||jE(Math.abs(n[1]),1)&&ZEe||jE(Math.abs(n[2]),1)&&BP;return r?{...r,boundsIJKPrime:r.fromIJK(e)}:{toIJK:null,boundsIJKPrime:null,fromIJK:null,error:`Only mappings orthogonal to acquisition plane are permitted, but requested ${n}`}}const{RLEVoxelMap:JEe,VoxelManager:e3e}=Zn,t3e=65535;var xi;(function(t){t[t.SEGMENT=-1]="SEGMENT",t[t.ISLAND=-2]="ISLAND",t[t.INTERIOR=-3]="INTERIOR",t[t.EXTERIOR=-4]="EXTERIOR",t[t.INTERIOR_SMALL=-5]="INTERIOR_SMALL",t[t.INTERIOR_TEST=-6]="INTERIOR_TEST"})(xi||(xi={}));class R1{constructor(e){this.fillInternalEdge=!1,this.maxInternalRemove=128,this.maxInternalRemove=(e==null?void 0:e.maxInternalRemove)??this.maxInternalRemove,this.fillInternalEdge=(e==null?void 0:e.fillInternalEdge)??this.fillInternalEdge}initialize(e,n,r){const a=!!n.sourceVoxelManager,i=a?n.sourceVoxelManager:n,o=a?n:e3e.createRLEHistoryVoxelManager(i),{segmentIndex:s=1,previewSegmentIndex:c=1}=r,l=r.points||o.getPoints();if(!(l!=null&&l.length))return;const u=o.getBoundsIJK().map((I,D)=>[Math.min(I[0],...l.map(E=>E[D])),Math.max(I[1],...l.map(E=>E[D]))]);if(u.find(I=>I[0]<0||I[1]>t3e))return;const{toIJK:f,fromIJK:v,boundsIJKPrime:g,error:d}=MW(e,u);if(d){console.warn("Not performing island removal for planes not orthogonal to acquisition plane",d);return}const[m,h,C]=v(i.dimensions),p=new JEe(m,h,C),S=(I,D,E)=>{const T=i.toIndex(f([I,D,E])),y=i.getAtIndex(T);if(y===c||y===s)return xi.SEGMENT};return p.fillFrom(S,g),p.normalizer={toIJK:f,fromIJK:v,boundsIJKPrime:g},this.segmentSet=p,this.previewVoxelManager=o,this.segmentIndex=s,this.previewSegmentIndex=c??s,this.selectedPoints=l,!0}floodFillSegmentIsland(){const{selectedPoints:e,segmentSet:n}=this;let r=0;const{fromIJK:a}=n.normalizer;return e.forEach(i=>{const o=a(i),s=n.toIndex(o),[c,l,u]=o;n.get(s)===xi.SEGMENT&&(r+=n.floodFill(c,l,u,xi.ISLAND))}),r}removeExternalIslands(){const{previewVoxelManager:e,segmentSet:n}=this,{toIJK:r}=n.normalizer,a=(i,o)=>{const[,s,c]=n.toIJK(i);if(o.value!==xi.ISLAND)for(let l=o.start;l<o.end;l++){const u=r([l,s,c]),f=e.getAtIJKPoint(u);e.setAtIJKPoint(u,f===void 0?0:null)}};n.forEach(a,{rowModified:!0})}removeInternalIslands(){const{segmentSet:e,previewVoxelManager:n,previewSegmentIndex:r}=this,{height:a,normalizer:i,width:o}=e,{toIJK:s}=i;return e.forEachRow((c,l)=>{let u;for(const f of[...l])if(f.value===xi.ISLAND){if(!u){if(this.fillInternalEdge&&f.start>0)for(let v=0;v<f.start;v++)e.set(c+v,xi.INTERIOR);u=f;continue}for(let v=u.end;v<f.start;v++)e.set(c+v,xi.INTERIOR);u=f}if(this.fillInternalEdge&&(u==null?void 0:u.end)<o)for(let f=u.end;f<o;f++)e.set(c+f,xi.INTERIOR)}),e.forEach((c,l)=>{if(l.value!==xi.INTERIOR)return;const[,u,f]=e.toIJK(c),v=u>0?e.getRun(u-1,f):null,g=u+1<a?e.getRun(u+1,f):null,d=u===a-1,m=u===0,h=R1.covers(l,v)||m&&this.fillInternalEdge,C=R1.covers(l,g)||d&&this.fillInternalEdge;l.end-l.start>2&&(!h||!C)&&e.floodFill(l.start,u,f,xi.EXTERIOR,{singlePlane:!0})}),e.forEach((c,l)=>{if(l.value!==xi.INTERIOR)return;const[,u,f]=e.toIJK(c),d=e.floodFill(l.start,u,f,xi.INTERIOR_TEST)>this.maxInternalRemove?xi.EXTERIOR:xi.INTERIOR_SMALL;e.floodFill(l.start,u,f,d)}),e.forEach((c,l)=>{if(l.value===xi.INTERIOR_SMALL)for(let u=l.start;u<l.end;u++){const f=s(e.toIJK(c+u));n.setAtIJKPoint(f,r)}}),n.getArrayOfModifiedSlices()}static covers(e,n){if(!n)return!1;let{start:r}=e;const{end:a}=e;for(const i of n)if(r>=i.start&&r<i.end&&(r=i.end,r>=a))return!0;return!1}}const n3e={[Xt.OnInteractionEnd]:t=>{const{strategySpecificConfiguration:e,previewSegmentIndex:n,segmentIndex:r,viewport:a,previewVoxelManager:i,segmentationVoxelManager:o}=t;if(!e.THRESHOLD||r===null)return;const s=new R1,c=i??o;if(!s.initialize(a,c,{previewSegmentIndex:n,segmentIndex:r}))return;s.floodFillSegmentIsland(),s.removeExternalIslands(),s.removeInternalIslands();const l=c.getArrayOfModifiedSlices();l&&ki(t.segmentationId,l,n)}};function r3e(t,e,n,r,a=.4){return[Math.round(t+(255-t)*a),Math.round(e+(255-e)*a),Math.round(n+(255-n)*a),r]}const a3e={[Xt.Preview]:function(t){var i,o;const{previewColors:e,strategySpecificConfiguration:n,enabledElement:r}=t;if(!e||!n)return;t.preview&&delete t.preview,delete n.centerSegmentIndex,(i=this.onInteractionStart)==null||i.call(this,r,t);const a=this.fill(r,t);return a&&(a.isPreviewFromHover=!0,t.preview=a,(o=this.onInteractionEnd)==null||o.call(this,r,t)),a},[Xt.Initialize]:t=>{const{segmentIndex:e,previewSegmentIndex:n,previewColors:r,preview:a,segmentationId:i,segmentationVoxelManager:o}=t;if(r===void 0||!n){t.memo=t.createMemo(i,o);return}if(a&&(a.previewVoxelManager.sourceVoxelManager=t.segmentationVoxelManager,t.previewVoxelManager=a.previewVoxelManager),e===null)return;const s=r==null?void 0:r[e],c=Jc(t.viewport.id,t.segmentationId,e);if(!s&&!c)return;const l=s||r3e(...c);Xk(t.viewport.id,t.segmentationId,n,l)},[Xt.AcceptPreview]:t=>{const{segmentationVoxelManager:e,previewVoxelManager:n,previewSegmentIndex:r,segmentationId:a,preview:i}=t||{};if(r===void 0)return;const o=(i==null?void 0:i.segmentIndex)??t.segmentIndex;if(!n||n.modifiedSlices.size===0)return;const s=t.createMemo(a,e);t.memo=s;const{voxelManager:c}=s,l=({index:u,value:f})=>{e.getAtIndex(u)===r&&(e.setAtIndex(u,f),c.setAtIndex(u,o))};n.forEach(l,{}),ki(t.segmentationId,n.getArrayOfModifiedSlices(),i.segmentIndex),n.clear()},[Xt.RejectPreview]:t=>{const{previewVoxelManager:e,segmentationVoxelManager:n}=t;if(e.modifiedSlices.size===0)return;const r=({index:a,value:i})=>{n.setAtIndex(a,i)};e.forEach(r),ki(t.segmentationId,e.getArrayOfModifiedSlices(),0),e.clear()}},i3e={[Xt.Fill]:t=>{var u;const{segmentsLocked:e,segmentationImageData:n,segmentationVoxelManager:r,previewVoxelManager:a,brushStrategy:i,centerIJK:o}=t,s=(u=i.createIsInThreshold)==null?void 0:u.call(i,t),{setValue:c}=i,l=s?f=>{const{value:v,index:g}=f;e.includes(v)||!s(g)||c(t,f)}:f=>c(t,f);r.forEach(l,{imageData:n,isInObject:t.isInObject,boundsIJK:t.isInObjectBoundsIJK}),a.addPoint(o)}},o3e={[Xt.INTERNAL_setValue]:(t,{value:e,index:n})=>{const{segmentsLocked:r,segmentIndex:a,previewSegmentIndex:i,segmentationVoxelManager:o,memo:s}=t,c=(s==null?void 0:s.voxelManager)||t.previewVoxelManager,l=o.getAtIndex(n);if(a===null){const f=c.getAtIndex(n);f!==void 0&&c.setAtIndex(n,f);return}if(l===a||r.includes(e))return;if(l===i)if(c.getAtIndex(n)===void 0)o.setAtIndex(n,a);else return;const u=i??a;c.setAtIndex(n,u)}},s3e={[Xt.CreateIsInThreshold]:t=>{const{imageVoxelManager:e,strategySpecificConfiguration:n,segmentIndex:r}=t;if(!(!n||!r))return a=>{const{THRESHOLD:i,THRESHOLD_INSIDE_CIRCLE:o}=n,s=e.getAtIndex(a),c=Array.isArray(s)?Eo(s):s,{threshold:l}=i||o||{};return l!=null&&l.length?l[0]<=c&&c<=l[1]:!0}}},WP=10,gO=class gO extends As{static getStatistics(e){const{spacing:n}=e,r=As.getStatistics(),a=n?"mm":"voxels",i=n?n[0]*n[1]*n[2]*1e3:1;return r.volume={value:Array.isArray(r.count.value)?r.count.value.map(o=>o*i):r.count.value*i,unit:a,name:"volume"},r.maxIJKs=this.maxIJKs,r.array.push(r.volume),this.maxIJKs=[],r}static statsCallback(e){As.statsCallback(e);const{value:n}=e,{maxIJKs:r}=this,{length:a}=r;if(!(typeof n!="number"||a>=WP&&n<r[0].value)){if(!a||n>=r[a-1].value)r.push(e);else for(let i=0;i<a;i++)if(n<=r[i].value){r.splice(i,0,e);break}a>=WP&&r.splice(0,1)}}};gO.maxIJKs=[];let Hc=gO;function _W({operationData:t,viewport:e}){var s;let n,r,a,i,o;if(e instanceof zr){const{volumeId:c,referencedVolumeId:l}=t;if(!c){const f=new CustomEvent(vt.ERROR_EVENT,{detail:{type:"Segmentation",message:"No volume id found for the segmentation"},cancelable:!0});return ot.dispatchEvent(f),null}const u=Ye.getVolume(c);if(!u)return;o=u.voxelManager,l&&(i=Ye.getVolume(l).voxelManager),{imageData:n}=u}else{const{segmentationId:c}=t,l=fs(e.id,c);if(!l)return;const u=e.getCurrentImageId();if(!u)return;const f=Wc(e.id,c);if(!f)return;const v=Ye.getImage(l);n=f.actor.getMapper().getInputData(),o=v.voxelManager;const g=t.imageId,d=Ye.getImage(g);if(!d)return;r=(s=d.getPixelData)==null?void 0:s.call(d);const m=Ye.getImage(u),h=m?null:e.getImageData();a=(m==null?void 0:m.getPixelData())||h.getScalarData(),i=m==null?void 0:m.voxelManager}return{segmentationImageData:n,segmentationScalarData:r,imageScalarData:a,segmentationVoxelManager:o,imageVoxelManager:i}}const c3e=Math.pow(3*1e3/(4*Math.PI),1/3),l3e={[Xt.GetStatistics]:function(t,e,n){const{viewport:r}=t;let{indices:a}=n;const{segmentationId:i}=e;a?Array.isArray(a)||(a=[a,255]):a=[Bo(i)];const o=a,{segmentationVoxelManager:s,imageVoxelManager:c,segmentationImageData:l}=_W({operationData:e,viewport:r}),u=l.getSpacing(),{boundsIJK:f}=s;if(!f)return Hc.getStatistics({spacing:u});s.forEach(S=>{const{value:I,pointIJK:D}=S;if(o.indexOf(I)===-1)return;const E=c.getAtIJKPoint(D);Hc.statsCallback({value:E,pointIJK:D})});const v=r.getReferenceId(),g={isPreScaled:ac(r,v),isSuvScaled:Br.isSuvScaled(r,v,r.getCurrentImageId())},d=r.getImageData(),m=mu(d.metadata.Modality,r.getCurrentImageId(),g),h=Hc.getStatistics({spacing:u,unit:m}),{maxIJKs:C}=h;if(!(C!=null&&C.length))return h;if(h.mean.unit=m,h.max.unit=m,h.min.unit=m,m!=="SUV")return;const p=u.map(S=>Math.max(1,Math.round(1.1*c3e/S)));for(const S of C){const I=u3e(S,p,l,c,u);if(!I)continue;const{mean:D}=I;(!h.peakValue||h.peakValue.value<=D.value)&&(h.peakValue={name:"peakValue",label:"Peak Value",value:D.value,unit:m})}return h}};function u3e(t,e,n,r,a){const{pointIJK:i}=t,o=i.map((l,u)=>[l-e[u],l+e[u]]),s=(l,u)=>{const f=(u[0]-i[0])/e[0],v=(u[1]-i[1])/e[1],g=(u[2]-i[2])/e[2];return f*f+v*v+g*g<=1},c=({pointIJK:l,pointLPS:u})=>{const f=r.getAtIJKPoint(l);f!==void 0&&Hc.statsCallback({value:f,pointLPS:u,pointIJK:l})};return Hc.statsInit({storePointData:!1}),II(n,{pointInShapeFn:s,callback:c,boundsIJK:o}),Hc.getStatistics({spacing:a})}const Jn={determineSegmentIndex:QEe,dynamicThreshold:KEe,erase:XEe,islandRemoval:n3e,preview:a3e,regionFill:i3e,setValue:o3e,threshold:s3e,labelmapStatistics:l3e},{VoxelManager:f3e}=Zn,Xu=class Xu{constructor(e,...n){this._initialize=[],this._fill=[],this._onInteractionStart=[],this.fill=(r,a)=>{const i=this.initialize(r,a,Xt.Fill);if(!i)return;const{strategySpecificConfiguration:o={},centerIJK:s}=i;if(gn(s,o.centerIJK))return a.preview;o.centerIJK=s,this._fill.forEach(g=>g(i));const{segmentationVoxelManager:c,previewVoxelManager:l,previewSegmentIndex:u,segmentIndex:f}=i,v=u&&l.modifiedSlices.size;return ki(i.segmentationId,c.getArrayOfModifiedSlices(),v?u:f),!u||!l.modifiedSlices.size?(c.resetModifiedSlices(),null):i.preview||i},this.onInteractionStart=(r,a)=>{const{preview:i}=a;if(i!=null&&i.isPreviewFromHover){i.isPreviewFromHover=!1;return}const o=this.initialize(r,a);o&&this._onInteractionStart.forEach(s=>s.call(this,o))},this.addPreview=(r,a)=>{const i=this.initialize(r,a,Xt.AddPreview);if(i)return i.preview||i},this.configurationName=e,this.compositions=n,n.forEach(r=>{const a=typeof r=="function"?r():r;if(a)for(const i in a){if(!Xu.childFunctions[i])throw new Error(`Didn't find ${i} as a brush strategy`);Xu.childFunctions[i](this,a[i])}}),this.strategyFunction=(r,a)=>this.fill(r,a);for(const r of Object.keys(Xu.childFunctions))this.strategyFunction[r]=this[r]}initialize(e,n,r){var m,h,C;const{viewport:a}=e,i=_W({operationData:n,viewport:a});if(!i)return console.warn("No data found for BrushStrategy"),n.preview;const{imageVoxelManager:o,segmentationVoxelManager:s,segmentationImageData:c}=i,l=((m=n.override)==null?void 0:m.voxelManager)||s,u=((h=n.override)==null?void 0:h.imageData)||c,f=((C=n.preview)==null?void 0:C.previewVoxelManager)||f3e.createRLEHistoryVoxelManager(s),g=!!n.previewColors?255:void 0,d={operationName:r,previewSegmentIndex:g,...n,enabledElement:e,imageVoxelManager:o,segmentationVoxelManager:l,segmentationImageData:u,previewVoxelManager:f,viewport:a,centerWorld:null,isInObject:null,isInObjectBoundsIJK:null,brushStrategy:this};return this._initialize.forEach(p=>p(d)),d}};Xu.COMPOSITIONS=Jn,Xu.childFunctions={[Xt.OnInteractionStart]:pl(Xt.OnInteractionStart,Xt.Initialize),[Xt.OnInteractionEnd]:pl(Xt.OnInteractionEnd,Xt.Initialize),[Xt.Fill]:pl(Xt.Fill),[Xt.Initialize]:pl(Xt.Initialize),[Xt.CreateIsInThreshold]:Qp(Xt.CreateIsInThreshold),[Xt.AcceptPreview]:pl(Xt.AcceptPreview,Xt.Initialize),[Xt.RejectPreview]:pl(Xt.RejectPreview,Xt.Initialize),[Xt.INTERNAL_setValue]:Qp(Xt.INTERNAL_setValue),[Xt.Preview]:Qp(Xt.Preview,!1),[Xt.ComputeInnerCircleRadius]:pl(Xt.ComputeInnerCircleRadius),[Xt.AddPreview]:pl(Xt.AddPreview),[Xt.GetStatistics]:Qp(Xt.GetStatistics),compositions:null};let l0=Xu;function pl(t,e){const n=`_${t}`;return(r,a)=>{r[n]||(r[n]=[]),r[n].push(a),r[t]||(r[t]=e?(i,o)=>{const s=r[e](i,o,t);r[n].forEach(c=>c.call(r,s))}:i=>{r[n].forEach(o=>o.call(r,i))})}}function Qp(t,e=!0){return(n,r)=>{if(n[t])throw new Error(`The singleton method ${t} already exists`);n[t]=e?r:(a,i,...o)=>(i.enabledElement=a,r.call(n,i,...o))}}function OW(t,e){const{center:n,radius:r}=t,a=t.radius2||r*r;return(e[0]-n[0])*(e[0]-n[0])+(e[1]-n[1])*(e[1]-n[1])+(e[2]-n[2])*(e[2]-n[2])<=a}const{transformWorldToIndex:HP,isEqual:QE}=Zn,wW={[Xt.Initialize]:t=>{const{points:e,viewport:n,segmentationImageData:r}=t;if(!e)return;const a=qt(0,0,0);e.forEach(v=>{Ra(a,a,v)}),Ia(a,a,1/e.length),t.centerWorld=a,t.centerIJK=HP(r,a);const i=e.map(v=>n.worldToCanvas(v)),[o,s]=Dd(i),c=n.canvasToWorld(o),l=n.canvasToWorld(s),u=e.map(v=>HP(r,v)),f=su(u,r.getDimensions());t.isInObject=PW({topLeftWorld:c,bottomRightWorld:l,center:a}),t.isInObjectBoundsIJK=f}};function PW(t){const{topLeftWorld:e,bottomRightWorld:n,center:r}=t,a=Math.abs(e[0]-n[0])/2,i=Math.abs(e[1]-n[1])/2,o=Math.abs(e[2]-n[2])/2,s=Math.max(a,i,o);if(QE(a,s)&&QE(i,s)&&QE(o,s)){const u={center:r,radius:s,radius2:s*s};return f=>OW(u,f)}const c={center:r,xRadius:a,yRadius:i,zRadius:o},{precalculated:l}=V_(c,{});return l}const AW=new l0("Circle",Jn.regionFill,Jn.setValue,wW,Jn.determineSegmentIndex,Jn.preview,Jn.labelmapStatistics),v3e=new l0("CircleThreshold",Jn.regionFill,Jn.setValue,wW,Jn.determineSegmentIndex,Jn.dynamicThreshold,Jn.threshold,Jn.preview,Jn.islandRemoval,Jn.labelmapStatistics),tD=AW.strategyFunction,g3e=v3e.strategyFunction;function d3e(){throw new Error("Not yet implemented")}const{transformWorldToIndex:m3e}=Zn,h3e={[Xt.Initialize]:t=>{const{points:e,viewport:n,segmentationImageData:r}=t;if(!e)return;const a=qt(0,0,0);e.forEach(c=>{Ra(a,a,c)}),Ia(a,a,1/e.length),t.centerWorld=a,t.centerIJK=m3e(r,a);const{boundsIJK:i,topLeftWorld:o,bottomRightWorld:s}=vEe(e.slice(0,2),r,n);t.isInObjectBoundsIJK=i,t.isInObject=PW({topLeftWorld:o,bottomRightWorld:s,center:a})}},nD=new l0("Sphere",Jn.regionFill,Jn.setValue,h3e,Jn.determineSegmentIndex,Jn.preview,Jn.labelmapStatistics),xW=nD.strategyFunction,p3e=new l0("SphereThreshold",...nD.compositions,Jn.dynamicThreshold,Jn.threshold),S3e=new l0("SphereThreshold",...nD.compositions,Jn.dynamicThreshold,Jn.threshold,Jn.islandRemoval),C3e=p3e.strategyFunction,I3e=S3e.strategyFunction,D3e=new l0("EraseSphere",Jn.erase,...nD.compositions),RW=D3e.strategyFunction,E3e=new l0("EraseCircle",Jn.erase,...AW.compositions),bW=E3e.strategyFunction,{VoxelManager:Dy,RLEVoxelMap:T3e}=Zn;function NW(t,e,n){return n?UW(t,n):LW(t,e)}function l4(t){const{segmentationVoxelManager:e,undoVoxelManager:n,redoVoxelManager:r}=this,a=t===!1?r:n;a.forEach(({value:o,pointIJK:s})=>{e.setAtIJKPoint(s,o)});const i=a.getArrayOfModifiedSlices();ki(this.segmentationId,i)}function LW(t,e){const n=Dy.createRLEHistoryVoxelManager(e);return{segmentationId:t,restoreMemo:l4,commitMemo:FW,segmentationVoxelManager:e,voxelManager:n}}function UW(t,e){const{memo:n,segmentationVoxelManager:r,previewVoxelManager:a}=e;return{segmentationId:t,restoreMemo:l4,commitMemo:FW,segmentationVoxelManager:r,voxelManager:a,memo:n,preview:e}}function FW(){if(this.redoVoxelManager)return!0;if(!this.voxelManager.modifiedSlices.size)return!1;const{segmentationVoxelManager:t}=this,e=Dy.createRLEHistoryVoxelManager(t);T3e.copyMap(e.map,this.voxelManager.map);for(const r of this.voxelManager.modifiedSlices.keys())e.modifiedSlices.add(r);this.undoVoxelManager=e;const n=Dy.createRLEVolumeVoxelManager({dimensions:this.segmentationVoxelManager.dimensions});return this.redoVoxelManager=n,e.forEach(({index:r,pointIJK:a,value:i})=>{const o=t.getAtIJKPoint(a);o!==i&&n.setAtIndex(r,o)}),!0}const y3e=Object.freeze(Object.defineProperty({__proto__:null,createLabelmapMemo:NW,createPreviewMemo:UW,createRleMemo:LW,restoreMemo:l4},Symbol.toStringTag,{value:"Module"})),{isEqual:Kp}=Zn,M3e=qt(1,0,0),_3e=qt(0,1,0),O3e=qt(0,0,1),$P=[M3e,_3e,O3e];function VW(t){const e=fr(Xe(),t[0],t[1]),n=fr(Xe(),t[0],t[2]),r=zP(e,$P),a=zP(n,$P);return[...r,...a].every(o=>Kp(o,0)||Kp(o,90)||Kp(o,180)||Kp(o,270))}function zP(t,e){return e.map(n=>t5(t,n)*180/Math.PI)}const{transformWorldToIndex:kW}=Zn,GW={[Xt.Initialize]:t=>{const{points:e,imageVoxelManager:n,viewport:r,segmentationImageData:a,segmentationVoxelManager:i}=t;if(!e)return;const o=qt(0,0,0);e.forEach(l=>{Ra(o,o,l)}),Ia(o,o,1/e.length),t.centerWorld=o,t.centerIJK=kW(a,o);const{boundsIJK:s,pointInShapeFn:c}=w3e(r,e,a);t.isInObject=c,t.isInObjectBoundsIJK=s}};function w3e(t,e,n){let r=e.map(S=>kW(n,S));r=r.map(S=>S.map(I=>Math.round(I)));const a=su(r,n.getDimensions()),o=t instanceof Xr||VW(r),s=n.getDirection(),c=n.getSpacing(),{viewPlaneNormal:l}=t.getCamera(),u=vu({direction:s,spacing:c},l),f=Bk(e);let[[v,g],[d,m],[h,C]]=f;return v-=u,g+=u,d-=u,m+=u,h-=u,C+=u,{boundsIJK:a,pointInShapeFn:o?()=>!0:S=>{const[I,D,E]=S,T=I>=v&&I<=g,y=D>=d&&D<=m,M=E>=h&&E<=C;return T&&y&&M}}}const P3e=new l0("Rectangle",Jn.regionFill,Jn.setValue,GW,Jn.determineSegmentIndex,Jn.preview,Jn.labelmapStatistics),A3e=new l0("RectangleThreshold",Jn.regionFill,Jn.setValue,GW,Jn.determineSegmentIndex,Jn.dynamicThreshold,Jn.threshold,Jn.preview,Jn.islandRemoval,Jn.labelmapStatistics),u4=P3e.strategyFunction,x3e=A3e.strategyFunction,R3e=Object.freeze(Object.defineProperty({__proto__:null,fillInsideCircle:tD,fillInsideRectangle:u4,fillOutsideCircle:d3e,thresholdInsideRectangle:x3e},Symbol.toStringTag,{value:"Module"})),Bd=class Bd extends Xa{constructor(e,n){super(e,n)}get _previewData(){return Bd.previewData}createMemo(e,n,r){return this.memo||(this.memo=NW(e,n,r)),this.memo}createEditData(e){var c,l;const n=Ae(e),{viewport:r}=n,a=hm(r.id);if(!a){const u=new CustomEvent(vt.ERROR_EVENT,{detail:{type:"Segmentation",message:"No active segmentation detected, create a segmentation representation before using the brush tool"},cancelable:!0});return ot.dispatchEvent(u),null}const{segmentationId:i}=a,o=q1(i),{representationData:s}=Un(i);if(r instanceof zr){const{volumeId:u}=s[Ft.Labelmap],f=r.getActors();if(r instanceof WI){const h=new CustomEvent(vt.ERROR_EVENT,{detail:{type:"Segmentation",message:"Cannot perform brush operation on the selected viewport"},cancelable:!0});return ot.dispatchEvent(h),null}const g=f.map(h=>Ye.getVolume(h.referencedId)),d=Ye.getVolume(u),m=((c=g.find(h=>gn(h.dimensions,d.dimensions)))==null?void 0:c.volumeId)||((l=g[0])==null?void 0:l.volumeId);return{volumeId:u,referencedVolumeId:this.configuration.thresholdVolumeId??m,segmentsLocked:o}}else{const u=fs(r.id,i);if(!u)return;if(this.configuration.activeStrategy.includes("SPHERE")){const f=r.getImageIds();if(!AF(f))throw new Error("Volume is not reconstructable for sphere manipulation");const g=`${i}_${r.id}`,d=Ye.getVolume(g);if(d)return{imageId:u,segmentsLocked:o,override:{voxelManager:d.voxelManager,imageData:d.imageData}};{const m=TB(r.id,i);if(!m||m.length===1)return{imageId:u,segmentsLocked:o};const h=B5(g,m);return{imageId:u,segmentsLocked:o,override:{voxelManager:h.voxelManager,imageData:h.imageData}}}}else return{imageId:u,segmentsLocked:o}}}createHoverData(e,n){const r=Ae(e),{viewport:a}=r,i=a.getCamera(),{viewPlaneNormal:o,viewUp:s}=i,c=[a.id],{segmentIndex:l,segmentationId:u,segmentColor:f}=this.getActiveSegmentationData(a)||{};return{brushCursor:{metadata:{viewPlaneNormal:[...o],viewUp:[...s],FrameOfReferenceUID:a.getFrameOfReferenceUID(),referencedImageId:"",toolName:this.getToolName(),segmentColor:f},data:{}},centerCanvas:n,segmentIndex:l,viewport:a,segmentationId:u,segmentColor:f,viewportIdsToRender:c}}getActiveSegmentationData(e){const n=e.id,r=hm(n);if(!r)return;const{segmentationId:a}=r,i=Bo(a);if(!i)return;const o=Jc(n,a,i);return{segmentIndex:i,segmentationId:a,segmentColor:o}}getOperationData(e){var f,v,g,d;const n=this._editData||this.createEditData(e),{segmentIndex:r,segmentationId:a,brushCursor:i}=this._hoverData||this.createHoverData(e),{data:o,metadata:s={}}=i||{},{viewPlaneNormal:c,viewUp:l}=s;return{...n,points:(f=o==null?void 0:o.handles)==null?void 0:f.points,segmentIndex:r,previewColors:(v=this.configuration.preview)!=null&&v.enabled||this._previewData.preview?(g=this.configuration.preview)==null?void 0:g.previewColors:null,viewPlaneNormal:c,toolGroupId:this.toolGroupId,segmentationId:a,viewUp:l,strategySpecificConfiguration:this.configuration.strategySpecificConfiguration,preview:(d=this._previewData)==null?void 0:d.preview,createMemo:this.createMemo.bind(this)}}addPreview(e=this._previewData.element,n){const{_previewData:r}=this,a=n==null?void 0:n.acceptReject;a===!0?this.acceptPreview(e):a===!1&&this.rejectPreview(e);const i=Ae(e);return r.preview=this.applyActiveStrategyCallback(i,this.getOperationData(e),Xt.AddPreview),r.isDrag=!0,r.preview}rejectPreview(e=this._previewData.element){if(!e||!this._previewData.preview)return;const n=Ae(e);this.applyActiveStrategyCallback(n,this.getOperationData(e),Xt.RejectPreview),this._previewData.preview=null,this._previewData.isDrag=!1}acceptPreview(e=this._previewData.element){if(!e)return;this.doneEditMemo();const n=Ae(e);this.applyActiveStrategyCallback(n,this.getOperationData(e),Xt.AcceptPreview),this._previewData.isDrag=!1,this._previewData.preview=null,this.doneEditMemo()}static viewportContoursToLabelmap(e,n){var h;const r=(n==null?void 0:n.removeContours)??!0,a=NI(),i=Sh(e,a);if(!(i!=null&&i.length))return;const o=i.filter(C=>{var p,S;return(S=(p=C.data.contour)==null?void 0:p.polyline)==null?void 0:S.length});if(!o.length)return;const c=new Bd({},{configuration:{strategies:{FILL_INSIDE_CIRCLE:tD},activeStrategy:"FILL_INSIDE_CIRCLE"}}).addPreview(e.element),{memo:l,segmentationId:u}=c,f=(l==null?void 0:l.voxelManager)||c.previewVoxelManager,v=f.sourceVoxelManager||f,{dimensions:g}=f,d=e.getDefaultActor().actor.getMapper().getInputData();for(const C of o){const p=[[1/0,-1/0],[1/0,-1/0],[1/0,-1/0]],{polyline:S}=C.data.contour;for(const w of S)d.worldToIndex(w).forEach((P,R)=>{p[R][0]=Math.min(p[R][0],P),p[R][1]=Math.max(p[R][1],P)});p.forEach((w,x)=>{w[0]=Math.round(Math.max(0,w[0])),w[1]=Math.round(Math.min(g[x]-1,w[1]))});const I=Bo(u),D=((h=C.data.handles)==null?void 0:h[0])||S[0],E=d.worldToIndex(D).map(Math.round),T=v.getAtIJKPoint(E)||0;let y=!1,M=!1;for(const w of S){const x=d.worldToIndex(w).map(Math.round),P=v.getAtIJKPoint(x);P===T?y=!0:P>=0&&(M=!0)}const O=y&&M?T:T===0?I:0;for(let w=p[0][0];w<=p[0][1];w++)for(let x=p[1][0];x<=p[1][1];x++)for(let P=p[2][0];P<=p[2][1];P++){const R=d.indexToWorld([w,x,P]);H_(R,S)&&f.setAtIJK(w,x,P,O)}r&&sr(C.annotationUID)}const m=f.getArrayOfModifiedSlices();ki(u,m)}};Bd.previewData={preview:null,element:null,timerStart:0,timer:null,startPoint:[NaN,NaN],isDrag:!1};let b1=Bd,f4=class extends b1{constructor(e={},n={supportedInteractionTypes:["Mouse","Touch"],configuration:{strategies:{FILL_INSIDE_CIRCLE:tD,ERASE_INSIDE_CIRCLE:bW,FILL_INSIDE_SPHERE:xW,ERASE_INSIDE_SPHERE:RW,THRESHOLD_INSIDE_CIRCLE:g3e,THRESHOLD_INSIDE_SPHERE:C3e,THRESHOLD_INSIDE_SPHERE_WITH_ISLAND_REMOVAL:I3e},strategySpecificConfiguration:{THRESHOLD:{threshold:[-150,-70]}},defaultStrategy:"FILL_INSIDE_CIRCLE",activeStrategy:"FILL_INSIDE_CIRCLE",thresholdVolumeId:null,brushSize:25,preview:{enabled:!1,previewColors:{},previewTimeMs:250,previewMoveDistance:8,dragMoveDistance:4,dragTimeMs:500},actions:{[Xt.AcceptPreview]:{method:Xt.AcceptPreview,bindings:[{key:"Enter"}]}}}}){super(e,n),this.onSetToolPassive=r=>{this.disableCursor()},this.onSetToolEnabled=()=>{this.disableCursor()},this.onSetToolDisabled=r=>{this.disableCursor()},this.preMouseDownCallback=r=>{const a=r.detail,{element:i}=a,o=Ae(i);this._editData=this.createEditData(i),this._activateDraw(i),Yt(i),r.preventDefault(),this._previewData.isDrag=!1,this._previewData.timerStart=Date.now();const s=this._hoverData||this.createHoverData(i);qe(s.viewportIdsToRender);const c=this.getOperationData(i);return this.applyActiveStrategyCallback(o,c,Xt.OnInteractionStart),!0},this.mouseMoveCallback=r=>{if(this.mode===vr.Active){if(this.updateCursor(r),!this.configuration.preview.enabled)return;const{previewTimeMs:a,previewMoveDistance:i,dragMoveDistance:o}=this.configuration.preview,{currentPoints:s,element:c}=r.detail,{canvas:l}=s,{preview:u,startPoint:f,timer:v,timerStart:g,isDrag:d}=this._previewData,m=sa(l,f),h=Date.now()-g;if((m>i||h>a&&m>o)&&(v&&(window.clearTimeout(v),this._previewData.timer=null),u&&!d&&this.rejectPreview(c)),!this._previewData.timer){const C=window.setTimeout(this.previewCallback,250);Object.assign(this._previewData,{timerStart:Date.now(),timer:C,startPoint:l,element:c})}}},this.previewCallback=()=>{this._previewData.timer=null,!this._previewData.preview&&(this._previewData.preview=this.applyActiveStrategyCallback(Ae(this._previewData.element),this.getOperationData(this._previewData.element),Xt.Preview))},this._dragCallback=r=>{const a=r.detail,{element:i,currentPoints:o}=a,s=Ae(i);this.updateCursor(r);const{viewportIdsToRender:c}=this._hoverData;qe(c);const l=sa(o.canvas,this._previewData.startPoint),{dragTimeMs:u,dragMoveDistance:f}=this.configuration.preview;!this._previewData.isDrag&&this._previewData.preview&&Date.now()-this._previewData.timerStart<u&&l<f||(this._previewData.preview=this.applyActiveStrategy(s,this.getOperationData(i)),this._previewData.element=i,this._previewData.timerStart=Date.now()+u,this._previewData.isDrag=!0,this._previewData.startPoint=o.canvas)},this._endCallback=r=>{const a=r.detail,{element:i}=a,o=Ae(i),s=this.getOperationData(i);!this._previewData.preview&&!this._previewData.isDrag&&this.applyActiveStrategy(o,s),this.doneEditMemo(),this._deactivateDraw(i),Mn(i),this.updateCursor(r),this._editData=null,this.applyActiveStrategyCallback(o,s,Xt.OnInteractionEnd),this._previewData.isDrag||this.acceptPreview(i)},this._activateDraw=r=>{r.addEventListener(B.MOUSE_UP,this._endCallback),r.addEventListener(B.MOUSE_DRAG,this._dragCallback),r.addEventListener(B.MOUSE_CLICK,this._endCallback)},this._deactivateDraw=r=>{r.removeEventListener(B.MOUSE_UP,this._endCallback),r.removeEventListener(B.MOUSE_DRAG,this._dragCallback),r.removeEventListener(B.MOUSE_CLICK,this._endCallback)}}disableCursor(){this._hoverData=void 0,this.rejectPreview()}updateCursor(e){const n=e.detail,{element:r}=n,{currentPoints:a}=n,i=a.canvas;this._hoverData=this.createHoverData(r,i),this._calculateCursor(r,i),this._hoverData&&qe(this._hoverData.viewportIdsToRender)}_calculateCursor(e,n){const r=Ae(e),{viewport:a}=r,{canvasToWorld:i}=a,o=a.getCamera(),{brushSize:s}=this.configuration,c=qt(o.viewUp[0],o.viewUp[1],o.viewUp[2]),l=qt(o.viewPlaneNormal[0],o.viewPlaneNormal[1],o.viewPlaneNormal[2]),u=Xe();gr(u,c,l);const f=i([n[0],n[1]]),v=Xe(),g=Xe(),d=Xe(),m=Xe();for(let I=0;I<=2;I++)v[I]=f[I]-c[I]*s,g[I]=f[I]+c[I]*s,d[I]=f[I]-u[I]*s,m[I]=f[I]+u[I]*s;if(!this._hoverData)return;const{brushCursor:h}=this._hoverData,{data:C}=h;C.handles===void 0&&(C.handles={}),C.handles.points=[v,g,d,m];const p=this.configuration.activeStrategy,S=this.configuration.strategies[p];typeof(S==null?void 0:S.computeInnerCircleRadius)=="function"&&S.computeInnerCircleRadius({configuration:this.configuration,viewport:a}),C.invalidated=!1}getStatistics(e,n){if(!e)return;const r=Ae(e);return this.applyActiveStrategyCallback(r,this.getOperationData(e),Xt.GetStatistics,n)}invalidateBrushCursor(){if(this._hoverData===void 0)return;const{data:e}=this._hoverData.brushCursor,{viewport:n}=this._hoverData;e.invalidated=!0;const{segmentColor:r}=this.getActiveSegmentationData(n)||{};this._hoverData.brushCursor.metadata.segmentColor=r}renderAnnotation(e,n){var S;if(!this._hoverData)return;const{viewport:r}=e;if(!this._hoverData.viewportIdsToRender.includes(r.id))return;const i=this._hoverData.brushCursor;if(i.data.invalidated===!0){const{centerCanvas:I}=this._hoverData,{element:D}=r;this._calculateCursor(D,I)}const o=i.metadata;if(!o)return;const s=o.brushCursorUID,c=i.data,{points:l}=c.handles,u=l.map(I=>r.worldToCanvas(I)),f=u[0],v=u[1],g=[Math.floor((f[0]+v[0])/2),Math.floor((f[1]+v[1])/2)],d=Math.abs(f[1]-Math.floor((f[1]+v[1])/2)),m=`rgb(${((S=o.segmentColor)==null?void 0:S.slice(0,3))||[0,0,0]})`;if(!r.getRenderingEngine()){console.warn("Rendering Engine has been destroyed");return}Mo(n,s,"0",g,d,{color:m});const C=this.configuration.activeStrategy,{dynamicRadiusInCanvas:p}=this.configuration.strategySpecificConfiguration[C]||{dynamicRadiusInCanvas:0};p&&Mo(n,s,"1",g,p,{color:m})}};f4.toolName="Brush";function Yv(t,e){const n=Vi(t);if(n===void 0)return;const r=n._toolInstances;return Object.keys(r).length?e&&r[e]?[r[e]]:Object.values(r).filter(i=>i instanceof f4):void 0}function b3e(t,e,n){const r=Vi(t);if(r===void 0)return;Yv(t,n).forEach(l=>{l.configuration.brushSize=e,l.invalidateBrushCursor()});const i=r.getViewportsInfo(),o=Object.keys(i).map(l=>i[l]);if(!o.length)return;const{renderingEngineId:s}=o[0],c=r.getViewportIds();da(s),qe(c)}function N3e(t,e){const n=Vi(t);if(n===void 0)return;const r=n._toolInstances;if(!Object.keys(r).length)return;const i=Yv(t,e)[0];if(i)return i.configuration.brushSize}function L3e(t,e,n={isDynamic:!1}){const r=Vi(t);if(r===void 0)return;const a=Yv(t),i={...n,...e!==void 0&&{threshold:e}};a.forEach(l=>{l.configuration.strategySpecificConfiguration.THRESHOLD={...l.configuration.strategySpecificConfiguration.THRESHOLD,...i}});const o=r.getViewportsInfo();if(!o.length)return;const{renderingEngineId:s}=o[0],c=r.getViewportIds();da(s),qe(c)}function U3e(t){const e=Vi(t);if(e===void 0)return;const n=e._toolInstances;if(!Object.keys(n).length)return;const a=Yv(t)[0];if(a)return a.configuration.strategySpecificConfiguration.THRESHOLD.threshold}function F3e(t,e,n,r){const{baseVolumeIdx:a,volumeInfoList:i}=Wk(t,n),{voxelManager:o}=i[a],s=o,c=t.voxelManager.getScalarDataLength(),l=t.voxelManager;return i.forEach(u=>{const{volumeSize:f}=u;f===c?k3e(l,s,e,u):V3e(l,s,e,u,i,a,r)}),ki(t.volumeId),t}function V3e(t,e,n,r,a,i,o){const{imageData:s,lower:c,upper:l,dimensions:u}=r;let f,v,g;const d=t.getScalarDataLength();for(let m=0;m<d;m++)if(d.getAtIndex(m)===n){const h=A_(s,u,a[i].spacing,a[i].imageData.getPoint(m)),C=({value:S})=>{f=f+1,S>=g.lower&&S<=g.upper&&(v=v+1)};f=0,v=0,g={lower:c,upper:l};let p=!1;t.forEach(C,{imageData:s,boundsIJK:h}),p=o===0?v>0:v===f,t.setAtIndex(m,p?n:0)}return{total:f,range:g,overlaps:v}}function k3e(t,e,n,r){const{lower:a,upper:i}=r,o=t.getScalarDataLength();for(let s=0;s<o;s++)if(t.getAtIndex[s]===n){const c=e.getAtIndex(s);t.setAtIndex(s,c>=a&&c<=i?n:0)}}function qP(t,e,n){const r=n.toIJK(t),a=n.toIJK(e),i=Xe(),{testIJK:o}=n,s=Dr(Xe(),r,a),c=Math.round(Math.max(...s.map(Math.abs)));if(c<2)return!0;const l=Ia(Xe(),s,1/c);for(let u=1;u<c;u++)if(Hn(i,a,l,u),!o(i))return!1;return!0}function G3e(t,e,n){const r=Ye.getVolume(t);if(!r){console.warn(`No volume found for ${t}`);return}const a=r.voxelManager,i=r.dimensions[0],o=i*r.dimensions[1];return{testCenter:(s,c)=>{const l=Ra(Xe(),s,c).map(h=>h/2),u=r.imageData.worldToIndex(l).map(Math.round),[f,v,g]=u,d=f+v*i+g*o,m=a.getAtIndex(d);return m===e||(n==null?void 0:n.has(m))},toIJK:s=>r.imageData.worldToIndex(s),testIJK:s=>{const[c,l,u]=s,f=Math.round(c)+Math.round(l)*i+Math.round(u)*o,v=a.getAtIndex(f);return v===e||(n==null?void 0:n.has(v))}}}const Mg=.01;function B3e(t,e,n){const{sliceContours:r}=t,{segmentIndex:a,containedSegmentIndices:i}=n;let o;const s=G3e(e,a,i);for(const c of r){const l=W3e(c,s,o);l&&(o=l)}return o&&Object.assign(o,n),o}function W3e(t,e,n={maxMajor:0,maxMinor:0}){const{points:r}=t.polyData,{maxMinor:a,maxMajor:i}=n;let o=i*i,s=a*a,c;for(let h=0;h<r.length;h++)for(let C=h+1;C<r.length;C++){const p=r[h],S=r[C],I=OT(p,S);I<o||I-Mg<o+Mg&&c||e.testCenter(p,S)&&qP(p,S,e)&&(o=I-Mg,c=[h,C],s=0)}if(!c)return;o=Math.sqrt(o+Mg);const l=r[c[0]],u=r[c[1]],f=Dr(Xe(),l,u);Ia(f,f,1/o);let v;for(let h=0;h<r.length;h++)for(let C=h+1;C<r.length;C++){const p=r[h],S=r[C],I=OT(p,S);if(I<=s)continue;const D=Dr(Xe(),p,S);Math.abs(Gt(D,f))/Math.sqrt(I)>Mg||e.testCenter(p,S)&&qP(p,S,e)&&(s=I,v=[h,C])}if(!v)return;s=Math.sqrt(s);const g=r[v[0]],d=r[v[1]];return{majorAxis:[l,u],minorAxis:[g,d],maxMajor:o,maxMinor:s,...t}}const{Labelmap:H3e}=Ft;function BW(t){const e=IW({segmentations:t});if(!(e!=null&&e.length)||!e[0].sliceContours.length)return;const{representationData:n,segments:r=[null,{label:"Unspecified",color:null,containedSegmentIndices:null}]}=t,{volumeId:a}=n[H3e],i=r.findIndex(o=>!!o);if(i!==-1)return r[i].segmentIndex=i,B3e(e[0],a,r[i])}function WW(t,e){const{majorAxis:n,minorAxis:r,label:a="",sliceIndex:i}=t,[o,s]=n,[c,l]=r,u=[o,s,c,l];return{highlighted:!0,invalidated:!0,metadata:{toolName:"Bidirectional",...e.getViewReference({sliceIndex:i})},data:{handles:{points:u,textBox:{hasMoved:!1,worldPosition:[0,0,0],worldBoundingBox:{topLeft:[0,0,0],topRight:[0,0,0],bottomLeft:[0,0,0],bottomRight:[0,0,0]}},activeHandleIndex:null},label:a,cachedStats:{}},isLocked:!1,isVisible:!0}}const{transformWorldToIndex:Xp}=Zn;let v4=class extends Br{constructor(e={},n={supportedInteractionTypes:["Mouse","Touch"],configuration:{preventHandleOutsideImage:!1,getTextLines:$3e}}){super(e,n),this.isPointNearTool=(r,a,i,o)=>{const s=Ae(r),{viewport:c}=s,{data:l}=a,{points:u}=l.handles;let f=c.worldToCanvas(u[0]),v=c.worldToCanvas(u[1]),g={start:{x:f[0],y:f[1]},end:{x:v[0],y:v[1]}},d=Li([g.start.x,g.start.y],[g.end.x,g.end.y],[i[0],i[1]]);return d<=o||(f=c.worldToCanvas(u[2]),v=c.worldToCanvas(u[3]),g={start:{x:f[0],y:f[1]},end:{x:v[0],y:v[1]}},d=Li([g.start.x,g.start.y],[g.end.x,g.end.y],[i[0],i[1]]),d<=o)},this.toolSelectedCallback=(r,a)=>{const i=r.detail,{element:o}=i;a.highlighted=!0;const s=Bt(o,this.getToolName());this.editData={annotation:a,viewportIdsToRender:s,movingTextBox:!1},this._activateModify(o),Ae(o),qe(s),Yt(o),r.preventDefault()},this.handleSelectedCallback=(r,a,i)=>{const o=r.detail,{element:s}=o,c=a.data;a.highlighted=!0;let l=!1,u;i.worldPosition?l=!0:u=c.handles.points.findIndex(v=>v===i);const f=Bt(s,this.getToolName());Yt(s),this.editData={annotation:a,viewportIdsToRender:f,handleIndex:u,movingTextBox:l},this._activateModify(s),Ae(s),qe(f),r.preventDefault()},this._endCallback=r=>{const a=r.detail,{element:i}=a,{annotation:o,viewportIdsToRender:s,newAnnotation:c,hasMoved:l}=this.editData,{data:u}=o;if(!(c&&!l)){if(this.doneEditMemo(),u.handles.activeHandleIndex=null,this._deactivateModify(i),this._deactivateDraw(i),Mn(i),Ae(i),this.editData.handleIndex!==void 0){const{points:f}=u.handles,v=Si(f[0],f[1]);if(Si(f[2],f[3])>v){const d=[[...f[2]],[...f[3]]],m=[...f[0]],h=[...f[1]],C=In();Ms(C,d[1][0]-d[0][0],d[1][1]-d[1][0]);const p=In();Ms(p,-C[1],C[0]);const S=In();Ms(S,h[0]-m[0],h[1]-m[0]);let I;n5(S,p)>0?I=[m,h]:I=[h,m],u.handles.points=[d[0],d[1],I[0],I[1]]}}this.isHandleOutsideImage&&this.configuration.preventHandleOutsideImage&&sr(o.annotationUID),qe(s),c&&Ur(o),this.editData=null,this.isDrawing=!1}},this._dragDrawCallback=r=>{this.isDrawing=!0;const a=r.detail,{currentPoints:i,element:o}=a,s=Ae(o),{viewport:c}=s,{worldToCanvas:l}=c,{annotation:u,viewportIdsToRender:f,handleIndex:v,newAnnotation:g}=this.editData;this.createMemo(o,u,{newAnnotation:g});const{data:d}=u,m=i.world;d.handles.points[v]=[...m];const h=d.handles.points.map(l),C={longLineSegment:{start:{x:h[0][0],y:h[0][1]},end:{x:h[1][0],y:h[1][1]}},shortLineSegment:{start:{x:h[2][0],y:h[2][1]},end:{x:h[3][0],y:h[3][1]}}},S=sa(h[0],h[1])/3,I=C.longLineSegment.start.x-C.longLineSegment.end.x,D=C.longLineSegment.start.y-C.longLineSegment.end.y,E=Math.sqrt(I*I+D*D),T=I/E,y=D/E,M=(C.longLineSegment.start.x+C.longLineSegment.end.x)/2,_=(C.longLineSegment.start.y+C.longLineSegment.end.y)/2,O=M+S*y,w=_-S*T,x=M-S*y,P=_+S*T;d.handles.points[2]=c.canvasToWorld([O,w]),d.handles.points[3]=c.canvasToWorld([x,P]),u.invalidated=!0,qe(f),this.editData.hasMoved=!0},this._dragModifyCallback=r=>{this.isDrawing=!0;const a=r.detail,{element:i}=a,{annotation:o,viewportIdsToRender:s,handleIndex:c,movingTextBox:l,newAnnotation:u}=this.editData;this.createMemo(i,o,{newAnnotation:u});const{data:f}=o;if(l){const{deltaPoints:v}=a,g=v.world,{textBox:d}=f.handles,{worldPosition:m}=d;m[0]+=g[0],m[1]+=g[1],m[2]+=g[2],d.hasMoved=!0}else if(c===void 0){const{deltaPoints:v}=a,g=v.world;f.handles.points.forEach(m=>{m[0]+=g[0],m[1]+=g[1],m[2]+=g[2]}),o.invalidated=!0}else this._dragModifyHandle(r),o.invalidated=!0;qe(s)},this._dragModifyHandle=r=>{const a=r.detail,{currentPoints:i,element:o}=a,s=Ae(o),{viewport:c}=s,{annotation:l,handleIndex:u}=this.editData,{data:f}=l,v=i.world,g=[c.worldToCanvas(f.handles.points[0]),c.worldToCanvas(f.handles.points[1]),c.worldToCanvas(f.handles.points[2]),c.worldToCanvas(f.handles.points[3])],d={start:{x:g[0][0],y:g[0][1]},end:{x:g[1][0],y:g[1][1]}},m={start:{x:g[2][0],y:g[2][1]},end:{x:g[3][0],y:g[3][1]}},h=[...v],C=c.worldToCanvas(h);if(u===0||u===1){const S=g[u===0?1:0],I=Ms(In(),C[0]-S[0],C[1]-S[1]),D=Ms(In(),g[u][0]-S[0],g[u][1]-S[1]);Nc(I,I),Nc(D,D);const E={start:{x:S[0],y:S[1]},end:{x:C[0],y:C[1]}};if(this._movingLongAxisWouldPutItThroughShortAxis(E,m))return;const T=S,y=this._getSignedAngle(D,I);let M=g[2][0],_=g[2][1],O=g[3][0],w=g[3][1];M-=T[0],_-=T[1],O-=T[0],w-=T[1];const x=M*Math.cos(y)-_*Math.sin(y),P=M*Math.sin(y)+_*Math.cos(y),R=O*Math.cos(y)-w*Math.sin(y),L=O*Math.sin(y)+w*Math.cos(y);M=x+T[0],_=P+T[1],O=R+T[0],w=L+T[1];const H=c.canvasToWorld([M,_]),F=c.canvasToWorld([O,w]);f.handles.points[u]=h,f.handles.points[2]=H,f.handles.points[3]=F}else{const p=u===2?3:2,S={longLineSegment:{start:d.start,end:d.end},shortLineSegment:{start:m.start,end:m.end}},I=_a(In(),[S.longLineSegment.end.x,S.longLineSegment.end.y],[S.longLineSegment.start.x,S.longLineSegment.start.y]),D=Nc(In(),I),E=_a(In(),[C[0],C[1]],[g[u][0],g[u][1]]),T=MS(E),y=this._getSignedAngle(D,E),M=Math.cos(y)*T,_=zZ(In(),[g[p][0],g[p][1]],D,M);if(this._movingLongAxisWouldPutItThroughShortAxis({start:{x:C[0],y:C[1]},end:{x:_[0],y:_[1]}},{start:{x:S.longLineSegment.start.x,y:S.longLineSegment.start.y},end:{x:S.longLineSegment.end.x,y:S.longLineSegment.end.y}})||!vy([C[0],C[1]],[_[0],_[1]],[d.start.x,d.start.y],[d.end.x,d.end.y]))return;f.handles.points[p]=c.canvasToWorld(_),f.handles.points[u]=h}},this.cancel=r=>{if(this.isDrawing){this.isDrawing=!1,this._deactivateDraw(r),this._deactivateModify(r),Mn(r);const{annotation:a,viewportIdsToRender:i,newAnnotation:o}=this.editData,{data:s}=a;return a.highlighted=!1,s.handles.activeHandleIndex=null,qe(i),o&&Ur(a),this.editData=null,a.annotationUID}},this._activateDraw=r=>{st.isInteractingWithTool=!0,r.addEventListener(B.MOUSE_UP,this._endCallback),r.addEventListener(B.MOUSE_DRAG,this._dragDrawCallback),r.addEventListener(B.MOUSE_MOVE,this._dragDrawCallback),r.addEventListener(B.MOUSE_CLICK,this._endCallback),r.addEventListener(B.TOUCH_TAP,this._endCallback),r.addEventListener(B.TOUCH_END,this._endCallback),r.addEventListener(B.TOUCH_DRAG,this._dragDrawCallback)},this._deactivateDraw=r=>{st.isInteractingWithTool=!1,r.removeEventListener(B.MOUSE_UP,this._endCallback),r.removeEventListener(B.MOUSE_DRAG,this._dragDrawCallback),r.removeEventListener(B.MOUSE_MOVE,this._dragDrawCallback),r.removeEventListener(B.MOUSE_CLICK,this._endCallback),r.removeEventListener(B.TOUCH_TAP,this._endCallback),r.removeEventListener(B.TOUCH_END,this._endCallback),r.removeEventListener(B.TOUCH_DRAG,this._dragDrawCallback)},this._activateModify=r=>{st.isInteractingWithTool=!0,r.addEventListener(B.MOUSE_UP,this._endCallback),r.addEventListener(B.MOUSE_DRAG,this._dragModifyCallback),r.addEventListener(B.MOUSE_CLICK,this._endCallback),r.addEventListener(B.TOUCH_END,this._endCallback),r.addEventListener(B.TOUCH_DRAG,this._dragModifyCallback),r.addEventListener(B.TOUCH_TAP,this._endCallback)},this._deactivateModify=r=>{st.isInteractingWithTool=!1,r.removeEventListener(B.MOUSE_UP,this._endCallback),r.removeEventListener(B.MOUSE_DRAG,this._dragModifyCallback),r.removeEventListener(B.MOUSE_CLICK,this._endCallback),r.removeEventListener(B.TOUCH_END,this._endCallback),r.removeEventListener(B.TOUCH_DRAG,this._dragModifyCallback),r.removeEventListener(B.TOUCH_TAP,this._endCallback)},this.renderAnnotation=(r,a)=>{let i=!0;const{viewport:o}=r,{element:s}=o;let c=nr(this.getToolName(),s);if(!(c!=null&&c.length)||(c=this.filterInteractableAnnotationsForElement(s,c),!(c!=null&&c.length)))return i;const l=this.getTargetId(o),u=o.getRenderingEngine(),f={toolGroupId:this.toolGroupId,toolName:this.getToolName(),viewportId:r.viewport.id};for(let v=0;v<c.length;v++){const g=c[v],{annotationUID:d,data:m}=g,{points:h,activeHandleIndex:C}=m.handles,p=h.map(re=>o.worldToCanvas(re));f.annotationUID=d;const{color:S,lineWidth:I,lineDash:D,shadow:E}=this.getAnnotationStyle({annotation:g,styleSpecifier:f});if(!m.cachedStats[l]||m.cachedStats[l].unit==null?(m.cachedStats[l]={length:null,width:null,unit:null},this._calculateCachedStats(g,u,r)):g.invalidated&&this._throttledCalculateCachedStats(g,u,r),!o.getRenderingEngine())return console.warn("Rendering Engine has been destroyed"),i;let T;if(!Gi(d))continue;!Ya(d)&&!this.editData&&C!==null&&(T=[p[C]]),T&&Hr(a,d,"0",T,{color:S});const y=`${d}-line-1`,M=`${d}-line-2`;tr(a,d,"0",p[0],p[1],{color:S,lineDash:D,lineWidth:I,shadow:E},y),tr(a,d,"1",p[2],p[3],{color:S,lineDash:D,lineWidth:I,shadow:E},M),i=!0;const w=this.getLinkedTextBoxStyle(f,g);if(!w.visibility){m.handles.textBox={hasMoved:!1,worldPosition:[0,0,0],worldBoundingBox:{topLeft:[0,0,0],topRight:[0,0,0],bottomLeft:[0,0,0],bottomRight:[0,0,0]}};continue}const x=this.configuration.getTextLines(m,l);if(!x||x.length===0)continue;let P;m.handles.textBox.hasMoved||(P=gs(p),m.handles.textBox.worldPosition=o.canvasToWorld(P));const R=o.worldToCanvas(m.handles.textBox.worldPosition),H=ro(a,d,"1",x,R,p,{},w),{x:F,y:U,width:V,height:X}=H;m.handles.textBox.worldBoundingBox={topLeft:o.canvasToWorld([F,U]),topRight:o.canvasToWorld([F+V,U]),bottomLeft:o.canvasToWorld([F,U+X]),bottomRight:o.canvasToWorld([F+V,U+X])}}return i},this._movingLongAxisWouldPutItThroughShortAxis=(r,a)=>{const i=In();Ms(i,a.end.x-a.start.x,a.end.y-a.start.y),Nc(i,i);const o={start:{x:a.start.x-i[0]*10,y:a.start.y-i[1]*10},end:{x:a.end.x+i[0]*10,y:a.end.y+i[1]*10}};return!vy([o.start.x,o.start.y],[o.end.x,o.end.y],[r.start.x,r.start.y],[r.end.x,r.end.y])},this._calculateCachedStats=(r,a,i)=>{const{data:o}=r,{element:s}=i.viewport,c=o.handles.points[0],l=o.handles.points[1],u=o.handles.points[2],f=o.handles.points[3],{cachedStats:v}=o,g=Object.keys(v);for(let d=0;d<g.length;d++){const m=g[d],h=this.getTargetImageData(m);if(!h)continue;const{imageData:C,dimensions:p}=h,S=Xp(C,c),I=Xp(C,l),D=Xp(C,u),E=Xp(C,f),T=[S,I],y=[D,E],{scale:M,unit:_}=us(h,T),{scale:O,unit:w}=us(h,y),x=this._calculateLength(c,l)/M,P=this._calculateLength(u,f)/O,R=x>P?x:P,L=x>P?P:x,H=x>P?_:w,F=x>P?w:_;this._isInsideVolume(S,I,D,E,p)?this.isHandleOutsideImage=!1:this.isHandleOutsideImage=!0,v[m]={length:R,width:L,unit:H,widthUnit:F}}return r.invalidated=!1,$r(r,s),v},this._isInsideVolume=(r,a,i,o,s)=>ga(r,s)&&ga(a,s)&&ga(i,s)&&ga(o,s),this._getSignedAngle=(r,a)=>Math.atan2(r[0]*a[1]-r[1]*a[0],r[0]*a[0]+r[1]*a[1]),this._throttledCalculateCachedStats=no(this._calculateCachedStats,100,{trailing:!0})}addNewAnnotation(e){const n=e.detail,{currentPoints:r,element:a}=n,i=r.world,o=Ae(a),{viewport:s,renderingEngine:c}=o;this.isDrawing=!0;const l=s.getCamera(),{viewPlaneNormal:u,viewUp:f}=l,v=this.getReferencedImageId(s,i,u,f),g=s.getFrameOfReferenceUID(),d={highlighted:!0,invalidated:!0,metadata:{toolName:this.getToolName(),viewPlaneNormal:[...u],viewUp:[...f],FrameOfReferenceUID:g,referencedImageId:v,...s.getViewReference({points:[i]})},data:{handles:{points:[[...i],[...i],[...i],[...i]],textBox:{hasMoved:!1,worldPosition:[0,0,0],worldBoundingBox:{topLeft:[0,0,0],topRight:[0,0,0],bottomLeft:[0,0,0],bottomRight:[0,0,0]}},activeHandleIndex:null},label:"",cachedStats:{}}};qn(d,a);const m=Bt(a,this.getToolName());return this.editData={annotation:d,viewportIdsToRender:m,handleIndex:1,movingTextBox:!1,newAnnotation:!0,hasMoved:!1},this._activateDraw(a),Yt(a),e.preventDefault(),qe(m),d}_calculateLength(e,n){const r=e[0]-n[0],a=e[1]-n[1],i=e[2]-n[2];return Math.sqrt(r*r+a*a+i*i)}};function $3e(t,e){const{cachedStats:n,label:r}=t,{length:a,width:i,unit:o}=n[e],s=[];return r&&s.push(r),a===void 0||s.push(`L: ${kn(a)} ${o||o}`,`W: ${kn(i)} ${o}`),s}v4.toolName="Bidirectional";function z3e(t,e){const{data:n}=e,r=Ae(t),a=(n.getSegment||q3e)(r,n);if(!a)return;const i=r.viewport.getFrameOfReferenceUID(),o=ZI(),{segmentIndex:s,segmentationId:c}=a,l=i0.getAnnotations(this.toolName||v4.toolName,i);let u=!1;const f=l.filter(g=>{const d=g.data.segment;return d?(d.segmentationId===c&&d.segmentIndex===s&&(u=!0,g.data.segment=d),!0):!1});u||f.push({data:{segment:a}});let v;if(f.forEach(g=>{const d=[],m=g.data.segment,{segmentIndex:h,segmentationId:C}=m;d[h]=m,i0.removeAnnotation(g.annotationUID);const p=BW({...o.find(D=>D.segmentationId===C),segments:d});if(!p)return;const S=WW(p,r.viewport);S.annotationUID=g.annotationUID,S.data.segment=m;const I=i0.addAnnotation(S,i);if(m.segmentIndex===a.segmentIndex&&m.segmentationId===a.segmentationId){v=p;const{style:D}=a;D&&I_.setAnnotationStyles(I,D)}}),v){const{sliceIndex:g}=v,d=r.viewport.getImageIds();e_(t,{imageIndex:d.length-1-g}),r.viewport.render()}else console.warn("No bidirectional found");return v}function q3e(t,e){var o;const n=ZI();if(!n.length)return;const r=e.segmentationId||n[0].segmentationId,a=e.segmentIndex??Bo(r);if(!a)return;const i=(o=e.segmentData)==null?void 0:o.get(a);return{label:`Segment ${a}`,segmentIndex:a,segmentationId:r,...i}}function HW(t){const e=Vi(t);if(e===void 0)return;Yv(t).forEach(o=>{o.invalidateBrushCursor()});const r=e.getViewportsInfo();if(!Object.keys(r).map(o=>r[o]).length)return;const i=e.getViewportIds();qe(i)}function $W(t,e,n={}){const r=Un(t),a=r.representationData,i=(n==null?void 0:n.representationType)??Object.keys(a)[0];if(!i)throw new Error(`Segmentation ${t} does not have any representations`);switch(i){case Ft.Labelmap:return j3e(r,e,n);case Ft.Contour:return Q3e(r,e,n);default:return}}function j3e(t,e,{viewport:n}){const r=t.representationData.Labelmap;if(n instanceof zr){const{volumeId:v}=r,g=Ye.getVolume(v);return g?g.imageData.getScalarValueFromWorld(e):void 0}const a=fs(n.id,t.segmentationId);if(!Ye.getImage(a))return;const o=Wc(n.id,t.segmentationId),s=o==null?void 0:o.actor.getMapper().getInputData(),c=Da(s,e),l=s.getDimensions();return(s.voxelManager||yo.createScalarVolumeVoxelManager({dimensions:l,scalarData:s.getPointData().getScalars().getData()})).getAtIJKPoint(c)}function Q3e(t,e,{viewport:n}){const r=t.representationData.Contour,a=Array.from(r.annotationUIDsMap.keys()),{viewPlaneNormal:i}=n.getCamera();for(const o of a){const s=r.annotationUIDsMap.get(o);if(s)for(const c of s){const l=Ta(c);if(!l)continue;const{polyline:u}=l.data.contour;if(gn(i,l.metadata.viewPlaneNormal)&&H_(e,u))return Number(o)}}}function zW(t,e,{viewport:n,searchRadius:r}){const i=Un(t).representationData.Labelmap;if(n instanceof zr){const{volumeId:m}=i,h=Ye.getVolume(m);if(!h)return;const C=h.voxelManager,p=h.imageData,S=Da(p,e),I=C.getAtIJK(S[0],S[1],S[2]),D=n.worldToCanvas(e);return X3e(D,I,n,p,r)?I:void 0}const o=fs(n.id,t);if(!Ye.getImage(o))return;const c=Wc(n.id,t),l=c==null?void 0:c.actor.getMapper().getInputData(),u=Da(l,e),f=l.getDimensions(),v=l.voxelManager||yo.createScalarVolumeVoxelManager({dimensions:f,scalarData:l.getPointData().getScalars().getData()}),g=v.getAtIJKPoint(u);return K3e(u,f,v,g)?g:void 0}function qW(t,e,n=1){const r=Array.from({length:2*n+1},(a,i)=>i-n);for(const a of r)for(const i of r)for(const o of r){if(a===0&&i===0&&o===0)continue;const s=t(a,i,o);if(s!==void 0&&e!==s)return!0}return!1}function K3e(t,e,n,r,a){return qW((o,s,c)=>{const l=[t[0]+o,t[1]+s,t[2]+c];return n.getAtIJK(l[0],l[1],l[2])},r,a)}function X3e(t,e,n,r,a){return qW((o,s)=>{const c=[t[0]+o,t[1]+s],l=n.canvasToWorld(c),u=r.get("voxelManager").voxelManager,f=Da(r,l);return u.getAtIJK(f[0],f[1],f[2])},e,a)}function jW(t){const e=Un(t),{annotationUIDsMap:n}=e.representationData.Contour;for(const[r,a]of n.entries())if(Array.from(a).find(o=>Ta(o).highlighted))return r}const Y3e=`
const MAX_STRENGTH = 65535f;

// Workgroup soze - X*Y*Z must be multiple of 32 for better performance
// otherwise warps are sub allocated and some threads will not process anything
override workGroupSizeX = 1u;
override workGroupSizeY = 1u;
override workGroupSizeZ = 1u;

// Compare the current voxel to neighbors using a 9x9x9 window
override windowSize = 9i;

struct Params {
  size: vec3u,
  iteration: u32,
}

@group(0) @binding(0) var<uniform> params: Params;
@group(0) @binding(1) var<storage> volumePixelData: array<f32>;
@group(0) @binding(2) var<storage, read_write> labelmap: array<u32>;
@group(0) @binding(3) var<storage, read_write> strengthData: array<f32>;
@group(0) @binding(4) var<storage> prevLabelmap: array<u32>;
@group(0) @binding(5) var<storage> prevStrengthData: array<f32>;
@group(0) @binding(6) var<storage, read_write> updatedVoxelsCounter: array<atomic<u32>>;

fn getPixelIndex(ijkPos: vec3u) -> u32 {
  let numPixelsPerSlice = params.size.x * params.size.y;
  return ijkPos.x + ijkPos.y * params.size.x + ijkPos.z * numPixelsPerSlice;
}

@compute @workgroup_size(workGroupSizeX, workGroupSizeY, workGroupSizeZ)
fn main(
  @builtin(global_invocation_id) globalId: vec3u,
) {
  // Make sure it will not get out of bounds for volume with sizes that
  // are not multiple of workGroupSize
  if (
    globalId.x >= params.size.x ||
    globalId.y >= params.size.y ||
    globalId.z >= params.size.z
  ) {
    return;
  }

  let currentCoord = vec3i(globalId);
  let currentPixelIndex = getPixelIndex(globalId);

  let numPixels = arrayLength(&volumePixelData);
  let currentPixelValue = volumePixelData[currentPixelIndex];

  if (params.iteration == 0) {
    // All non-zero initial labels are given maximum strength
    strengthData[currentPixelIndex] = select(MAX_STRENGTH, 0., labelmap[currentPixelIndex] == 0);
    return;
  }

  // It should at least copy the values from previous state
  var newLabel = prevLabelmap[currentPixelIndex];
  var newStrength = prevStrengthData[currentPixelIndex];

  let window = i32(ceil(f32(windowSize - 1) * .5));
  let minWindow = -1i * window;
  let maxWindow = 1i * window;

  for (var k = minWindow; k <= maxWindow; k++) {
    for (var j = minWindow; j <= maxWindow; j++) {
      for (var i = minWindow; i <= maxWindow; i++) {
        // Skip current voxel
        if (i == 0 && j == 0 && k == 0) {
          continue;
        }

        let neighborCoord = currentCoord + vec3i(i, j, k);

        //  Boundary conditions. Do not grow outside of the volume
        if (
          neighborCoord.x < 0i || neighborCoord.x >= i32(params.size.x) ||
          neighborCoord.y < 0i || neighborCoord.y >= i32(params.size.y) ||
          neighborCoord.z < 0i || neighborCoord.z >= i32(params.size.z)
        ) {
          continue;
        }

        let neighborIndex = getPixelIndex(vec3u(neighborCoord));
        let neighborPixelValue = volumePixelData[neighborIndex];
        let prevNeighborStrength = prevStrengthData[neighborIndex];
        let strengthCost = abs(neighborPixelValue - currentPixelValue);
        let takeoverStrength = prevNeighborStrength - strengthCost;

        if (takeoverStrength > newStrength) {
          newLabel = prevLabelmap[neighborIndex];
          newStrength = takeoverStrength;
        }
      }
    }
  }

  if (labelmap[currentPixelIndex] != newLabel) {
    atomicAdd(&updatedVoxelsCounter[params.iteration], 1u);
  }

  labelmap[currentPixelIndex] = newLabel;
  strengthData[currentPixelIndex] = newStrength;
}
`,Z3e=1024*1024*1024,jP=1.99*Z3e,KE={windowSize:3,maxProcessingTime:3e4,inspection:{numCyclesInterval:5,numCyclesBelowThreshold:3,threshold:1e-4}};async function rD(t,e,n=KE){var pe;const r=[8,8,4],{windowSize:a,maxProcessingTime:i}=Object.assign({},KE,n),o=Object.assign({},KE.inspection,n.inspection),s=Ye.getVolume(t),c=Ye.getVolume(e),[l,u,f]=s.dimensions;if(c.dimensions[0]!==l||c.dimensions[1]!==u||c.dimensions[2]!==f)throw new Error("Volume and labelmap must have the same size");const v=Math.floor(Math.sqrt(u**2+l**2+f**2)/2),g=c.voxelManager.getCompleteScalarDataArray();let d=s.voxelManager.getCompleteScalarDataArray();d instanceof Float32Array||(d=new Float32Array(d));const m={maxStorageBufferBindingSize:jP,maxBufferSize:jP},C=await(await((pe=navigator.gpu)==null?void 0:pe.requestAdapter())).requestDevice({requiredLimits:m}),p=d.byteLength,S=v*Uint32Array.BYTES_PER_ELEMENT,I=C.createShaderModule({code:Y3e}),D=3,E=new Uint32Array([l,u,f,0]),T=C.createBuffer({size:E.byteLength,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),y=C.createBuffer({size:p,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST});C.queue.writeBuffer(y,0,d);const M=[0,1].map(()=>C.createBuffer({size:p,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST}));C.queue.writeBuffer(M[0],0,new Uint32Array(g));const _=[0,1].map(()=>C.createBuffer({size:p,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST})),O=C.createBuffer({size:S,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST}),w=C.createBindGroupLayout({entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}},{binding:1,visibility:GPUShaderStage.COMPUTE,buffer:{type:"read-only-storage"}},{binding:2,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}},{binding:3,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}},{binding:4,visibility:GPUShaderStage.COMPUTE,buffer:{type:"read-only-storage"}},{binding:5,visibility:GPUShaderStage.COMPUTE,buffer:{type:"read-only-storage"}},{binding:6,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}}]}),x=[0,1].map(Te=>{const Fe=M[Te],Ne=_[Te],Re=M[(Te+1)%2],k=_[(Te+1)%2];return C.createBindGroup({layout:w,entries:[{binding:0,resource:{buffer:T}},{binding:1,resource:{buffer:y}},{binding:2,resource:{buffer:Fe}},{binding:3,resource:{buffer:Ne}},{binding:4,resource:{buffer:Re}},{binding:5,resource:{buffer:k}},{binding:6,resource:{buffer:O}}]})}),P=C.createComputePipeline({layout:C.createPipelineLayout({bindGroupLayouts:[w]}),compute:{module:I,entryPoint:"main",constants:{workGroupSizeX:r[0],workGroupSizeY:r[1],workGroupSizeZ:r[2],windowSize:a}}}),R=[Math.ceil(l/r[0]),Math.ceil(u/r[1]),Math.ceil(f/r[2])],L=C.createBuffer({size:S,usage:GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST});C.createBuffer({size:p,usage:GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST});const H=i?performance.now()+i:0;let F=o.numCyclesInterval,U=0;for(let Te=0;Te<v;Te++){E[D]=Te,C.queue.writeBuffer(T,0,E);const Fe=C.createCommandEncoder(),Ne=Fe.beginComputePass();if(Ne.setPipeline(P),Ne.setBindGroup(0,x[Te%2]),Ne.dispatchWorkgroups(R[0],R[1],R[2]),Ne.end(),Fe.copyBufferToBuffer(O,Te*Uint32Array.BYTES_PER_ELEMENT,L,Te*Uint32Array.BYTES_PER_ELEMENT,Uint32Array.BYTES_PER_ELEMENT),C.queue.submit([Fe.finish()]),Te>0&&!(Te%F)){await L.mapAsync(GPUMapMode.READ,0,S);const k=L.getMappedRange(0,S),b=new Uint32Array(k.slice(0))[Te]/d.length;if(L.unmap(),Te>=1&&b<o.threshold){if(F=1,U++,U===o.numCyclesBelowThreshold)break}else F=o.numCyclesInterval}if(H&&performance.now()>H){console.warn(`Exceeded processing time limit (${i})ms`);break}}const V=C.createCommandEncoder(),X=(v+1)%2,re=C.createBuffer({size:p,usage:GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST});V.copyBufferToBuffer(M[X],0,re,0,p),C.queue.submit([V.finish()]),await re.mapAsync(GPUMapMode.READ,0,p);const ue=re.getMappedRange(0,p),De=new Uint32Array(ue);g.set(De),re.unmap(),c.voxelManager.setCompleteScalarDataArray(g)}const{transformWorldToIndex:Cm}=Zn,J3e=254,eTe=255,tTe=.1,nTe=.8;function rTe(t,e){const{topLeftWorld:n,bottomRightWorld:r}=e,a=Cm(t.imageData,n),i=Cm(t.imageData,r);return{...e,topLeftIJK:a,bottomRightIJK:i}}function aTe(t,e){const n=t.imageData.getDirection(),r=qt(n[3],n[4],n[5]),{center:a,radius:i}=e,o=t.imageData,s=Hn(Xe(),a,r,-i),c=Hn(Xe(),a,r,i),l=mW([c,s],o);return rTe(t,l)}function iTe(t,e,n){const r=t.imageData,a=n.getCamera(),{ijkVecRowDir:i,ijkVecColDir:o}=_I(r,a);if([i,o].some(u=>!gn(Math.abs(u[0]),1)&&!gn(Math.abs(u[1]),1)&&!gn(Math.abs(u[2]),1))){console.warn("Oblique view is not supported!");return}const{boundsIJK:c}=aTe(t,e),l={minX:c[0][0],maxX:c[0][1]+1,minY:c[1][0],maxY:c[1][1]+1,minZ:c[2][0],maxZ:c[2][1]+1};return MI(t.volumeId,l,{targetBuffer:{type:"Float32Array"}})}function oTe(t,e,n,r){const a=t.voxelManager.getCompleteScalarDataArray(),i=n.center,[o,s,c]=t.dimensions,l=o*s,u=Cm(t.imageData,i),f=a[u[2]*l+u[1]*o+u[0]],v=r.positiveSeedValue??J3e,g=r.positiveSeedVariance??tTe,d=Math.abs(f*g),m=f-d,h=f+d,C=[[-1,0,0],[1,0,0],[0,-1,0],[0,1,0],[0,0,-1],[0,0,1]],p=u[2]*l+u[1]*o+u[0];e.voxelManager.setAtIndex(p,v);const S=[u];for(;S.length;){const I=S.shift(),[D,E,T]=I;for(let y=0,M=C.length;y<M;y++){const _=C[y],O=D+_[0],w=E+_[1],x=T+_[2];if(O<0||O>=o||w<0||w>=s||x<0||x>=c)continue;const P=x*l+w*o+O,R=a[P];e.voxelManager.getAtIndex(P)===v||R<m||R>h||(e.voxelManager.setAtIndex(P,v),S.push([O,w,x]))}}}function sTe(t,e,n,r,a){const i=t.voxelManager.getCompleteScalarDataArray(),[o,s,c]=e.dimensions,l=o*s,{worldVecRowDir:u,worldVecSliceDir:f}=_I(e.imageData,r.getCamera()),v=Cm(t.imageData,n.center),g=i[v[2]*o*s+v[1]*o+v[0]],d=a.negativeSeedVariance??nTe,m=(a==null?void 0:a.negativeSeedValue)??eTe,h=Math.abs(g*d),C=g-h,p=g+h,S=360,I=2*Math.PI/S,D=iI(au(),f,I),E=LZ(u);for(let T=0;T<S;T++){const y=Hn(Xe(),n.center,E,n.radius),M=Cm(e.imageData,y),[_,O,w]=M;if(kZ(E,E,D),_<0||_>=o||O<0||O>=s||w<0||w>=c)continue;const x=_+O*o+w*l,P=i[x];(P<C||P>p)&&e.voxelManager.setAtIndex(x,m)}}async function cTe(t,e,n,r){const a=await $1(t.volumeId);return oTe(t,a,e,r),sTe(t,a,e,n,r),a}async function QW(t,e,n,r){const a=Ye.getVolume(t),i=iTe(a,e,n),o=await cTe(i,e,n,r);return await rD(i.volumeId,o.volumeId),o}const lTe=254,uTe=255,fTe=[-1/0,-995],vTe=[0,1900];function gTe(t,e,n){const{negativeSeedValue:r=uTe,negativePixelRange:a=fTe}=n,i=t.voxelManager.getCompleteScalarDataArray(),[o,s,c]=e.dimensions,l=Math.floor(c/2),u=new Array(o*s).fill(!1),f=l*o*s,v=(d,m)=>{const h=[[d,m]];for(;h.length;){const[C,p]=h.shift(),S=p*o+C;if(C<0||C>=o||p<0||p>=s||u[S])continue;u[S]=!0;const I=f+S,D=i[I];D<a[0]||D>a[1]||(e.voxelManager.setAtIndex(I,r),h.push([C-1,p]),h.push([C+1,p]),h.push([C,p-1]),h.push([C,p+1]))}},g=(d,m,h,C)=>{for(let p=d;p!==m;p+=h){const S=C*o+p,I=f+S,D=i[I];if(D<a[0]||D>a[1])break;u[S]||v(p,C)}};for(let d=0;d<s;d++)g(0,o-1,1,d),g(o-1,0,-1,d)}function dTe(t,e,n){const{positiveSeedValue:r=lTe,positivePixelRange:a=vTe}=n,i=t.voxelManager.getCompleteScalarDataArray();e.voxelManager.getCompleteScalarDataArray();const[o,s,c]=e.dimensions,l=Math.floor(c/2),u=Math.max(l-3,0),f=Math.max(u+5,c),v=o*s;for(let g=u;g<f;g++){const d=g*v;for(let m=0;m<s;m++){const h=m*o;for(let C=0;C<o;C++){const p=d+h+C,S=i[p];S>=a[0]&&S<=a[1]&&e.voxelManager.setAtIndex(p,r)}}}}async function mTe(t,e){const n=$1(t.volumeId);return dTe(t,n,e),gTe(t,n,e),n}async function KW(t,e,n){const{boundingBox:r}=e,{ijkTopLeft:a,ijkBottomRight:i}=r,o={minX:a[0],maxX:i[0],minY:a[1],maxY:i[1],minZ:a[2],maxZ:i[2]},s=MI(t,o,{targetBuffer:{type:"Float32Array"}}),c=await mTe(s,n);return await rD(s.volumeId,c.volumeId),c}const{transformWorldToIndex:g4,transformIndexToWorld:hTe}=Zn,pTe=254,STe=255,CTe=.1,ITe=.8,DTe=.2,ETe=5;function TTe(t,e,n){const{dimensions:r}=t,a=Dr(Xe(),e.boundingBox.bottomRight,e.boundingBox.topLeft);let i=(n==null?void 0:n.subVolumePaddingPercentage)??DTe,o=(n==null?void 0:n.subVolumeMinPadding)??ETe;typeof i=="number"&&(i=[i,i,i]),typeof o=="number"&&(o=[o,o,o]);const s=f7(Xe(),a,i);c7(s,s),R2(s,s,o);const c=Hn(Xe(),a,s,2),l=Dr(Xe(),e.boundingBox.topLeft,s),u=Ra(Xe(),l,c);R2(l,l,[0,0,0]),MT(l,l,r),R2(u,u,[0,0,0]),MT(u,u,r);const f={minX:l[0],maxX:u[0],minY:l[1],maxY:u[1],minZ:l[2],maxZ:u[2]};return MI(t.volumeId,f,{targetBuffer:{type:"Float32Array"}})}function yTe(t,e,n){const[r,a,i]=t.dimensions,o=t.voxelManager.getCompleteScalarDataArray(),s=r*a,c=g4(t.imageData,e),l=o[c[2]*s+c[1]*r+c[0]],u=n.positiveSeedVariance??CTe,f=Math.abs(l*u),v=l-f,g=l+f,d=[[-1,0,0],[1,0,0],[0,-1,0],[0,1,0],[0,0,-1],[0,0,1]];let m=1/0,h=1/0,C=1/0,p=-1/0,S=-1/0,I=-1/0;const D=c[2]*s+c[1]*r+c[0],E=new Set([D]),T=new Set([e]),y=[c];for(;y.length;){const M=y.shift(),[_,O,w]=M;m=M[0]<m?M[0]:m,h=M[1]<h?M[1]:h,C=M[2]<C?M[2]:C,p=M[0]>p?M[0]:p,S=M[1]>S?M[1]:S,I=M[2]>I?M[2]:I;for(let x=0,P=d.length;x<P;x++){const R=d[x],L=_+R[0],H=O+R[1],F=w+R[2];if(L<0||L>=r||H<0||H>=a||F<0||F>=i)continue;const U=F*s+H*r+L,V=o[U];if(E.has(U)||V<v||V>g)continue;const X=[L,H,F],re=hTe(t.imageData,X);E.add(U),T.add(re),y.push(X)}}return{worldVoxels:Array.from(T),boundingBox:{topLeft:[m,h,C],bottomRight:[p,S,I]}}}function MTe(t,e,n){const{dimensions:r}=t,[a,i]=r,o=a*i,s=n.positiveSeedValue??pTe,{worldVoxels:c}=e;for(let l=0,u=c.length;l<u;l++){const f=c[l],v=g4(t.imageData,f),g=v[2]*o+v[1]*a+v[0];t.voxelManager.setAtIndex(g,s)}}function _Te(t,e,n,r){const[a,i]=t.dimensions,o=t.voxelManager.getCompleteScalarDataArray(),s=e.voxelManager.getCompleteScalarDataArray(),c=g4(t.imageData,n),l=o[c[2]*a*i+c[1]*a+c[0]],u=r.negativeSeedVariance??ITe,f=r.negativeSeedValue??STe,v=Math.abs(l*u),g=l-v,d=l+v;for(let m=0,h=o.length;m<h;m++){const C=o[m];!s[m]&&(C<g||C>d)&&e.voxelManager.setAtIndex(m,f)}}async function OTe(t,e,n,r){const a=$1(t.volumeId);return MTe(a,e,r),_Te(t,a,n,r),a}async function XW(t,e,n,r){const a=Ye.getVolume(t),i=yTe(a,e,r),o=TTe(a,i,r),s=await OTe(o,i,e,r);return await rD(o.volumeId,s.volumeId),s}const wTe=Object.freeze(Object.defineProperty({__proto__:null,run:rD,runGrowCutForBoundingBox:KW,runGrowCutForSphere:QW,runOneClickGrowCut:XW},Symbol.toStringTag,{value:"Module"})),PTe=Object.freeze(Object.defineProperty({__proto__:null,IslandRemoval:R1,LabelmapMemo:y3e,VolumetricCalculator:Hc,contourAndFindLargestBidirectional:BW,createBidirectionalToolData:WW,createLabelmapVolumeForViewport:zEe,createMergedLabelmapForIndex:$Ee,floodFill:yW,getBrushSizeForToolGroup:N3e,getBrushThresholdForToolGroup:U3e,getBrushToolInstances:Yv,getHoveredContourSegmentationAnnotation:jW,getSegmentIndexAtLabelmapBorder:zW,getSegmentIndexAtWorldPoint:$W,getUniqueSegmentIndices:rc,growCut:wTe,invalidateBrushCursor:HW,rectangleROIThresholdVolumeByRange:WEe,segmentContourAction:z3e,setBrushSizeForToolGroup:b3e,setBrushThresholdForToolGroup:L3e,thresholdSegmentationByRange:F3e,thresholdVolumeByRange:EW,triggerSegmentationRender:Qv,triggerSegmentationRenderBySegmentationId:YI},Symbol.toStringTag,{value:"Module"}));function ATe(t){let e="";const n=t[0]<0?"R":"L",r=t[1]<0?"A":"P",a=t[2]<0?"F":"H",i=[Math.abs(t[0]),Math.abs(t[1]),Math.abs(t[2])],o=1e-4;for(let s=0;s<3;s++)if(i[0]>o&&i[0]>i[1]&&i[0]>i[2])e+=n,i[0]=0;else if(i[1]>o&&i[1]>i[0]&&i[1]>i[2])e+=r,i[1]=0;else if(i[2]>o&&i[2]>i[0]&&i[2]>i[1])e+=a,i[2]=0;else if(i[0]>o&&i[1]>o&&i[0]===i[1])e+=n+r,i[0]=0,i[1]=0;else if(i[0]>o&&i[2]>o&&i[0]===i[2])e+=n+a,i[0]=0,i[2]=0;else if(i[1]>o&&i[2]>o&&i[1]===i[2])e+=r+a,i[1]=0,i[2]=0;else break;return e}function xTe(t){let e=t.replace("H","f");return e=e.replace("F","h"),e=e.replace("R","l"),e=e.replace("L","r"),e=e.replace("A","p"),e=e.replace("P","a"),e=e.toUpperCase(),e}const RTe=Object.freeze(Object.defineProperty({__proto__:null,getOrientationStringLPS:ATe,invertOrientationStringLPS:xTe},Symbol.toStringTag,{value:"Module"}));var Ey;(function(t){t.CLIP_STOPPED="CORNERSTONE_CINE_TOOL_STOPPED",t.CLIP_STARTED="CORNERSTONE_CINE_TOOL_STARTED"})(Ey||(Ey={}));const nS=Ey,d4={};function YW(t,e){const n=Ae(t),{viewportId:r}=n;d4[r]=e}function m4(t){const e=Ae(t),{viewportId:n}=e;return d4[n]}function bTe(t){return d4[t]}const{ViewportStatus:ZW}=vs,{triggerEvent:XE}=Zn,JW=!0,Ty=new Map;function NTe(t,e){let n,r;if(t===void 0)throw new Error("playClip: element must not be undefined");const a=Ae(t);if(!a)throw new Error("playClip: element must be a valid Cornerstone enabled element");e||(e={}),e.dynamicCineEnabled=e.dynamicCineEnabled??!0;const{viewport:i}=a,o=GTe(i,e);let s=m4(t);const c=e.dynamicCineEnabled;if(c&&tH(t),s?yy(t,{stopDynamicCine:!c,viewportId:i.id}):(s={intervalId:void 0,framesPerSecond:30,lastFrameTimeStamp:void 0,ignoreFrameTimeVector:!1,usingFrameTimeVector:!1,frameTimeVector:e.frameTimeVector??void 0,speed:e.frameTimeVectorSpeedMultiplier??1,reverse:e.reverse??!1,loop:e.loop??!0},YW(t,s)),s.dynamicCineEnabled=e.dynamicCineEnabled,(e.framesPerSecond<0||e.framesPerSecond>0)&&(s.framesPerSecond=Number(e.framesPerSecond),s.reverse=s.framesPerSecond<0,s.ignoreFrameTimeVector=!0),s.ignoreFrameTimeVector!==!0&&s.frameTimeVector&&s.frameTimeVector.length===o.numScrollSteps&&o.frameTimeVectorEnabled){const{timeouts:f,isTimeVarying:v}=LTe(s.frameTimeVector,s.speed);n=f,r=v}const l=()=>{const{numScrollSteps:f,currentStepIndex:v}=o;let g=v+(s.reverse?-1:1);const d=g<0||g>=f;if(!s.loop&&d){yy(t,{stopDynamicCine:!c,viewportId:i.id});const h={element:t};XE(t,nS.CLIP_STOPPED,h);return}g>=f?g=0:g<0&&(g=f-1);const m=g-v;if(m)try{o.scroll(m)}catch(h){console.warn("Play clip not scrolling",h),nH(s),XE(t,nS.CLIP_STOPPED,u);return}};if(c){const f=h4(i);f&&Ty.set(f.volumeId,t)}o.play?s.framesPerSecond=o.play(e.framesPerSecond):n&&n.length>0&&r?(s.usingFrameTimeVector=!0,s.intervalId=window.setTimeout(function f(){s.intervalId=window.setTimeout(f,n[o.currentStepIndex]),l()},0)):(s.usingFrameTimeVector=!1,s.intervalId=window.setInterval(l,1e3/Math.abs(s.framesPerSecond)));const u={element:t};XE(t,nS.CLIP_STARTED,u)}function eH(t,e={}){yy(t,{stopDynamicCine:!0,...e})}function yy(t,e={stopDynamicCine:!0,viewportId:void 0}){const{stopDynamicCine:n,viewportId:r}=e,a=Ae(t);let i;const o=a==null?void 0:a.viewport;if(a){const{viewport:s}=a;i=m4(s.element)}else if(r)i=bTe(r);else return;i&&nH(i),o instanceof vv?o.pause():n&&o instanceof zr&&tH(t)}function tH(t){const{viewport:e}=Ae(t);if(e instanceof yr){const n=h4(e);if(n!=null&&n.isDynamicVolume()){const r=Ty.get(n.volumeId);Ty.delete(n.volumeId),r&&r!==t&&eH(r)}}}function LTe(t,e){let n,r,a,i=0;const o=t.length,s=[];let c=!1;for((typeof e!="number"||e<=0)&&(e=1),n=1;n<o;n++)a=Number(t[n])/e|0,s.push(a),n===1?r=a:a!==r&&(c=!0),i+=a;return s.length>0&&(c?a=i/s.length|0:a=s[0],s.push(a)),{timeouts:s,isTimeVarying:c}}function nH(t){const e=t.intervalId;typeof e<"u"&&(t.intervalId=void 0,t.usingFrameTimeVector?clearTimeout(e):clearInterval(e))}function h4(t){if(!(t instanceof yr))return;const e=t.getAllVolumeIds();if(!(e!=null&&e.length))return;const r=e.find(a=>{var i;return(i=Ye.getVolume(a))==null?void 0:i.isDynamicVolume()})??e[0];return Ye.getVolume(r)}function UTe(t,e){const n=t.getImageIds();return{get numScrollSteps(){return n.length},get currentStepIndex(){return t.getTargetImageIdIndex()},get frameTimeVectorEnabled(){return!0},waitForRenderedCount:0,scroll(r){if(this.waitForRenderedCount<=e&&t.viewportStatus!==ZW.RENDERED){this.waitForRenderedCount++;return}this.waitForRenderedCount=0,_1(t,{delta:r,debounceLoading:JW})}}}function FTe(t,e){return{get numScrollSteps(){return t.getNumberOfSlices()},get currentStepIndex(){return t.getSliceIndex()},get frameTimeVectorEnabled(){return!0},waitForRenderedCount:0,scroll(n){if(this.waitForRenderedCount<=e&&t.viewportStatus!==ZW.RENDERED){this.waitForRenderedCount++;return}this.waitForRenderedCount=0,_1(t,{delta:n,debounceLoading:JW})},play(n){return n&&t.setPlaybackRate(n/24),t.play(),t.getFrameRate()}}}function VTe(t,e){const{volumeId:n}=e,r={viewPlaneNormal:Xe(),scrollInfo:null},a=()=>{const i=t.getCamera();if(!r.scrollInfo||!_T(i.viewPlaneNormal,r.viewPlaneNormal)){const s=f1(t,n);r.viewPlaneNormal=i.viewPlaneNormal,r.scrollInfo=s}return r.scrollInfo};return{get numScrollSteps(){return a().numScrollSteps},get currentStepIndex(){return a().currentStepIndex},get frameTimeVectorEnabled(){const i=t.getCamera(),o=e.direction.slice(6,9).map(c=>-c),s=Gt(o,i.viewPlaneNormal);return ru(s,1)},scroll(i){a().currentStepIndex+=i,_1(t,{delta:i})}}}function kTe(t){return{get numScrollSteps(){return t.numTimePoints},get currentStepIndex(){return t.timePointIndex},get frameTimeVectorEnabled(){return!1},scroll(e){t.scroll(e)}}}function GTe(t,e){if(t instanceof Xr)return UTe(t,e.waitForRendered??30);if(t instanceof yr){const n=h4(t);return e.dynamicCineEnabled&&(n!=null&&n.isDynamicVolume())?kTe(n):VTe(t,n)}if(t instanceof vv)return FTe(t,e.waitForRendered??30);throw new Error("Unknown viewport type")}const BTe=Object.freeze(Object.defineProperty({__proto__:null,Events:nS,addToolState:YW,getToolState:m4,playClip:NTe,stopClip:eH},Symbol.toStringTag,{value:"Module"}));function WTe(t,e){var r,a,i;const n=(e==null?void 0:e.knotsRatioPercentage)||30;return!((i=(a=(r=t==null?void 0:t.data)==null?void 0:r.contour)==null?void 0:a.polyline)!=null&&i.length)||n<=0}function HTe(t,e){const n=Fs(),r=Ra(Xe(),e,t),a=Math.abs(t[0])>.1?qt(-t[1],t[0],0):qt(0,-t[2],t[1]);return e5(n,e,r,a),n}function Yp(t,e=Math.floor(Math.random()*(t.length-1))){if(e===0)return 0;const n=[...t],{length:r}=t;for(let a=0;a<r;a++)t[a]=n[(a+e+r)%r];return e}function rH(t,e){if(WTe(t,e))return!1;const{viewPlaneNormal:n}=t.metadata,{closed:r,polyline:a}=t.data.contour,i=HTe(n,t.data.contour.polyline[0]),o=t.data.contour.polyline.map(u=>{const f=un(Xe(),u,i);return[f[0],f[1]]});let s=r?Yp(o):0,c=my(o,0,o.length,(e==null?void 0:e.knotsRatioPercentage)||30);if(c===o)return!1;Yp(c,-s);for(let u=1;u<(e==null?void 0:e.loop);u++)s=r?Yp(c):0,c=my(c,0,o.length,(e==null?void 0:e.knotsRatioPercentage)||30),Yp(c,-s);const l=ba(Fs(),i);return t.data.contour.polyline=c.map(u=>un([0,0,0],[...u,0],l)),!0}const $Te={smoothAnnotation:rH},zTe=Object.freeze(Object.defineProperty({__proto__:null,default:$Te,smoothAnnotation:rH},Symbol.toStringTag,{value:"Module"})),qTe=Object.freeze(Object.defineProperty({__proto__:null,getBoundsIJKFromRectangleAnnotations:TW,isAxisAlignedRectangle:VW},Symbol.toStringTag,{value:"Module"})),aH={};function iH(t,e){const n=Ae(t),{viewportId:r}=n;aH[r]=e}function Zv(t){const e=Ae(t),{viewportId:n}=e;return aH[n]}const d1=bn.Prefetch,oH=0;function jTe(t,e){t=Math.round(t)||0,e=Math.round(e)||0;const n=[];let r=e-t+1;if(r<=0)return n;for(;r--;)n[r]=e--;return n}function QTe(t,e){let n=0,r=t.length-1;return t.forEach((a,i)=>{a<e?n=Math.max(i,n):a>e&&(r=Math.min(i,r))}),{low:n,high:r}}function Jv(t){const e=Ae(t);if(!e)return null;const{viewport:n}=e;return n instanceof Xr?{currentImageIdIndex:n.getCurrentImageIdIndex(),imageIds:n.getImageIds()}:null}function aD(t){return function(e){const n=e.detail;let r;try{r=Jv(t)}catch{return}if(!r||!r.imageIds||r.imageIds.length===0)return;const i=r.imageIds.indexOf(n.imageId);if(i<0)return;const o=Zv(t);!o||!o.indicesToRequest||!o.indicesToRequest.length||o.indicesToRequest.push(i)}}const KTe=t=>{const e=new Set(t.imageIds);return n=>n.type!==d1||!e.has(n.additionalDetails.imageId)};let yd={maxImagesToPrefetch:1/0,preserveExistingPool:!0},My;const XTe=10;function sH(t){var d,m;const e=Zv(t);if(!e)return;const n=e||{},r=Jv(t);if(!((d=r==null?void 0:r.imageIds)!=null&&d.length)){console.warn("CornerstoneTools.stackPrefetch: No images in stack.");return}const{currentImageIdIndex:a}=r;if(n.enabled=n.enabled&&(((m=n.indicesToRequest)==null?void 0:m.length)??0)>0,n.enabled===!1)return;function i(h){const C=n.indicesToRequest.indexOf(h);C>-1&&n.indicesToRequest.splice(C,1)}if(e.indicesToRequest.sort((h,C)=>h-C),n.indicesToRequest.slice().forEach(function(h){const C=r.imageIds[h];if(!C)return;(Math.abs(a-h)<6?Ye.getImageLoadObject(C):Ye.isLoaded(C))&&i(h)}),!n.indicesToRequest.length)return;yd.preserveExistingPool||ui.clearRequestStack(d1);const s=QTe(n.indicesToRequest,r.currentImageIdIndex);let c,l,u=s.low,f=s.high;const v=[];for(;u>=0||f<n.indicesToRequest.length;){const h=r.currentImageIdIndex,C=h-n.indicesToRequest[u]>yd.maxImagesToPrefetch,p=n.indicesToRequest[f]-h>yd.maxImagesToPrefetch,S=!C&&u>=0,I=!p&&f<n.indicesToRequest.length;if(!I&&!S)break;S&&(l=n.indicesToRequest[u--],c=r.imageIds[l],v.push(c)),I&&(l=n.indicesToRequest[f++],c=r.imageIds[l],v.push(c))}const g=(h,C)=>J0(h,C);v.forEach(h=>{const C={requestType:d1};ui.addRequest(g.bind(null,h,C),d1,{imageId:h},oH)})}function _y(t){clearTimeout(My),My=setTimeout(function(){const e=t.target;try{sH(e)}catch{return}},XTe)}function YTe(t){const e=Jv(t);if(!e||!e.imageIds||e.imageIds.length===0){console.warn("CornerstoneTools.stackPrefetch: No images in stack.");return}const n={indicesToRequest:jTe(0,e.imageIds.length-1),enabled:!0,direction:1},r=n.indicesToRequest.indexOf(e.currentImageIdIndex);n.indicesToRequest.splice(r,1),iH(t,n),sH(t),t.removeEventListener(vt.STACK_NEW_IMAGE,_y),t.addEventListener(vt.STACK_NEW_IMAGE,_y);const a=aD(t);ot.removeEventListener(vt.IMAGE_CACHE_IMAGE_REMOVED,a),ot.addEventListener(vt.IMAGE_CACHE_IMAGE_REMOVED,a)}function ZTe(t){clearTimeout(My),t.removeEventListener(vt.STACK_NEW_IMAGE,_y);const e=aD(t);ot.removeEventListener(vt.IMAGE_CACHE_IMAGE_REMOVED,e);const n=Zv(t);n&&n.indicesToRequest.length&&(n.enabled=!1,ui.clearRequestStack(d1))}function JTe(){return yd}function eye(t){yd=t}const tye={enable:YTe,disable:ZTe,getConfiguration:JTe,setConfiguration:eye};let Im={maxImagesToPrefetch:1/0,minBefore:2,maxAfter:2,directionExtraImages:10,preserveExistingPool:!1},Oy;const nye=5,rye=t=>{var r;const e=Jv(t);if(!e)return;if(!((r=e.imageIds)!=null&&r.length)){console.warn("CornerstoneTools.stackPrefetch: No images in stack.");return}S4(t),p4(t),t.removeEventListener(vt.STACK_NEW_IMAGE,wy),t.addEventListener(vt.STACK_NEW_IMAGE,wy);const n=aD(t);ot.removeEventListener(vt.IMAGE_CACHE_IMAGE_REMOVED,n),ot.addEventListener(vt.IMAGE_CACHE_IMAGE_REMOVED,n)};function p4(t){var l,u;const e=Jv(t);if(!e)return;if(!((l=e==null?void 0:e.imageIds)!=null&&l.length)){console.warn("CornerstoneTools.stackPrefetch: No images in stack.");return}const n=Zv(t);if(!n)return;const r=n||{};if(r.enabled=r.enabled&&(((u=r.indicesToRequest)==null?void 0:u.length)??0)>0,r.enabled===!1)return;function a(f){const v=r.indicesToRequest.indexOf(f);v>-1&&r.indicesToRequest.splice(v,1)}const i=r.indicesToRequest.slice(),{currentImageIdIndex:o}=e;if(i.forEach(f=>{const v=e.imageIds[f];if(!v)return;(Math.abs(o-f)<6?Ye.getImageLoadObject(v):Ye.isLoaded(v))&&a(f)}),!r.indicesToRequest.length)return;Im.preserveExistingPool||ui.filterRequests(KTe(e));function s(f){var h,C;const v=e.imageIds.indexOf(f);a(v);const g=Ye.getCachedImageBasedOnImageURI(f),{stats:d}=r,m=((h=g==null?void 0:g.image)==null?void 0:h.decodeTimeInMS)||0;if(m){d.imageIds.set(f,m),d.decodeTimeInMS+=m;const p=((C=g==null?void 0:g.image)==null?void 0:C.loadTimeInMS)||0;d.loadTimeInMS+=p}if(!r.indicesToRequest.length&&g!=null&&g.sizeInBytes){const{sizeInBytes:p}=g,S=Ye.getMaxCacheSize()/4/p;if(!r.cacheFill)d.initialTime=Date.now()-d.start,d.initialSize=d.imageIds.size,S4(t,S),p4(t);else if(d.imageIds.size){d.fillTime=Date.now()-d.start;const{size:I}=d.imageIds;d.fillSize=I}}}const c=(f,v)=>J0(f,v).then(()=>s(f));r.indicesToRequest.forEach(f=>{const v=e.imageIds[f],g={requestType:d1};ui.addRequest(c.bind(null,v,g),d1,{imageId:v},oH)})}function wy(t){clearTimeout(Oy),Oy=setTimeout(function(){const e=t.target;try{S4(e),p4(e)}catch{return}},nye)}const aye=t=>t<0?-1:1,S4=(t,e)=>{var v;const n=Jv(t);if(!n)return;if(!((v=n.imageIds)!=null&&v.length)){console.warn("CornerstoneTools.stackPrefetch: No images in stack.");return}const{currentImageIdIndex:r}=n;let{maxAfter:a=2,minBefore:i=2}=Im;const{directionExtraImages:o=10}=Im,s=Zv(t)||{indicesToRequest:[],currentImageIdIndex:r,stackCount:0,enabled:!0,direction:1,stats:{start:Date.now(),imageIds:new Map,decodeTimeInMS:0,loadTimeInMS:0,totalBytes:0}},c=r-s.currentImageIdIndex;if(s.direction=aye(c),s.currentImageIdIndex=r,s.enabled=!0,s.stackCount<100&&(s.stackCount+=o),Math.abs(c)>a||!c)if(s.stackCount=0,e){const g=r/n.imageIds.length;i=Math.ceil(e*g),a=Math.ceil(e*(1-g)),s.cacheFill=!0}else s.cacheFill=!1;else c<0?(i+=s.stackCount,a=0):(a+=s.stackCount,i=0);const l=Math.max(0,r-i),u=Math.min(n.imageIds.length-1,r+a),f=[];for(let g=r+1;g<=u;g++)f.push(g);for(let g=r-1;g>=l;g--)f.push(g);s.indicesToRequest=f,iH(t,s)};function iye(t){clearTimeout(Oy),t.removeEventListener(vt.STACK_NEW_IMAGE,wy);const e=aD(t);ot.removeEventListener(vt.IMAGE_CACHE_IMAGE_REMOVED,e);const n=Zv(t);n&&(n.enabled=!1)}function oye(){return Im}function sye(t){Im=t}const cye={enable:rye,disable:iye,getConfiguration:oye,setConfiguration:sye},lye=Object.freeze(Object.defineProperty({__proto__:null,isViewportPreScaled:ac},Symbol.toStringTag,{value:"Module"}));function uye(t,e){let n;const r=e.frameNumbers||[...Array(t.numTimePoints).keys()];if(!e.maskVolumeId&&!e.worldCoordinate)throw new Error("You should provide either maskVolumeId or imageCoordinate");if(e.maskVolumeId&&e.worldCoordinate)throw new Error("You can only use one of maskVolumeId or imageCoordinate");if(e.maskVolumeId){const a=Ye.getVolume(e.maskVolumeId);if(!a)throw new Error("Segmentation volume not found");const[i,o]=vye(r,t,a);return[i,o]}return e.worldCoordinate?fye(r,e.worldCoordinate,t):n}function fye(t,e,n){const{dimensions:r,imageData:a}=n,i=a.worldToIndex(e);if(i[0]=Math.floor(i[0]),i[1]=Math.floor(i[1]),i[2]=Math.floor(i[2]),!ga(i,r))throw new Error("outside bounds");const o=r[0],s=r[0]*r[1],c=[];return t.forEach(l=>{const u=i[2]*s+i[1]*o+i[0];c.push(n.voxelManager.getAtIndexAndTimePoint(u,l))}),c}function vye(t,e,n){const{imageData:r}=n,a=n.voxelManager,i=a.getScalarDataLength(),o=[];o.length=i;let s=0;for(let v=0,g=i;v<g;v++)a.getAtIndex(v)!==0&&(o[s++]=v);o.length=s;const c=[],l=e.voxelManager.getScalarDataLength()===i&&JSON.stringify(e.spacing)===JSON.stringify(n.spacing),u=[];if(l){for(let v=0;v<o.length;v++){const g=[],d=o[v];for(let m=0;m<t.length;m++)g.push(e.voxelManager.getAtIndexAndTimePoint(d,t[m]));c.push(g),u.push(a.toIJK(d))}return[c,u]}const f=({pointLPS:v,value:g,pointIJK:d})=>{if(g===0)return;const m=A_(e.imageData,e.dimensions,e.spacing,v);let h=0;const C=new Map;t.forEach(I=>C.set(I,0));const p=({index:I})=>{for(let D=0;D<t.length;D++){const E=e.voxelManager.getAtIndexAndTimePoint(I,t[D]),T=t[D];C.set(T,C.get(T)+E)}h++};e.voxelManager.forEach(p,{imageData:e.imageData,boundsIJK:m});const S=[];C.forEach(I=>{S.push(I/h)}),u.push(d),c.push(S)};return n.voxelManager.forEach(f,{imageData:r}),[c,u]}function cH(t,e){const n=t.getScalarDataLength(),r=new Float32Array(n);for(const a of e){const i=t.getTimePointScalarData(a);for(let o=0;o<n;o++)r[o]+=i[o]}return r}function gye(t,e){const n=cH(t,e),r=e.length;for(let a=0;a<n.length;a++)n[a]/=r;return n}const lH={[Gf.SUM]:(t,e,n)=>{const r=cH(t,e);for(let a=0;a<r.length;a++)n(a,r[a])},[Gf.AVERAGE]:(t,e,n)=>{const r=gye(t,e);for(let a=0;a<r.length;a++)n(a,r[a])},[Gf.SUBTRACT]:(t,e,n)=>{if(e.length!==2)throw new Error("Please provide only 2 time points for subtraction.");const r=t.getScalarDataLength(),a=t.getTimePointScalarData(e[0]),i=t.getTimePointScalarData(e[1]);for(let o=0;o<r;o++){const s=a[o]-i[o];n(o,s)}}};function dye(t,e,n){const{frameNumbers:r}=n,a=r||[...Array(t.numTimePoints).keys()];if(a.length<=1)throw new Error("Please provide two or more time points");const i=t.voxelManager,o=i.getScalarDataLength(),s=lH[e];if(!s)throw new Error(`Unsupported operation: ${e}`);const c=new Float32Array(o);return s(i,a,(l,u)=>{c[l]=u}),c}function mye(t,e,n){const{frameNumbers:r,targetVolume:a}=n;if(!a)throw new Error("A target volume must be provided");const i=r||[...Array(t.numTimePoints).keys()];if(i.length<=1)throw new Error("Please provide two or more time points");const o=t.voxelManager,s=a.voxelManager,c=lH[e];if(!c)throw new Error(`Unsupported operation: ${e}`);c(o,i,(l,u)=>{s.setAtIndex(l,u)}),s.resetModifiedSlices();for(let l=0;l<a.dimensions[2];l++)s.modifiedSlices.add(l)}const hye=Object.freeze(Object.defineProperty({__proto__:null,generateImageFromTimeData:dye,getDataInTime:uye,updateVolumeFromTimeData:mye},Symbol.toStringTag,{value:"Module"}));function uH(t,e){const n=e*3;if(n<t.length)return qt(t[n],t[n+1],t[n+2])}function fH(t){const e=t.getLines().getData();let n=0;const r=new Map;for(;n<e.length;){const s=e[n++],c=[];for(let l=0;l<s;l++)c.push(e[n+l]);r.set(c[0],c),n+=s}const a=[],i=s=>{for(const[c,l]of s.entries())if(l!==void 0)return c;return-1};let o=i(r);for(;o!==-1;){const s=[o];for(;r.has(o);){const c=r.get(o)[1];r.has(c)&&s.push(c),r.delete(o),o=c}a.push(s),o=i(r)}return a.length?a:void 0}function vH(t){const e=fH(t);if(!e)return;const n=t.getPoints().getData();return e.map(r=>r.map(a=>uH(n,a)))}const pye=Object.freeze(Object.defineProperty({__proto__:null,getPoint:uH,getPolyDataPointIndexes:fH,getPolyDataPoints:vH},Symbol.toStringTag,{value:"Module"}));var os;(function(t){t.Top="top",t.Left="left",t.Bottom="bottom",t.Right="right"})(os||(os={}));const Sye=Object.freeze(Object.defineProperty({__proto__:null,get ColorbarRangeTextPosition(){return os}},Symbol.toStringTag,{value:"Module"})),Uc=t=>t&&t.upper>t.lower,EC=t=>!!t&&t.width>0&&t.height>0,Dm=(t,e)=>!!t&&!!e&&t.lower===e.lower&&t.upper===e.upper,gH=(t,e)=>!!t&&!!e&&t.width===e.width&&t.height===e.height,Cye=(t,e,n)=>[t[0]*(1-n)+e[0]*n,t[1]*(1-n)+e[1]*n,t[2]*(1-n)+e[2]*n],{clamp:Iye}=Zn;class C4{constructor(e){C4.validateProps(e);const{colormap:n,size:r={width:20,height:100},imageRange:a={lower:0,upper:1},voiRange:i={lower:0,upper:1},container:o,showFullPixelValueRange:s=!1}=e;this._colormap=n,this._imageRange=a,this._voiRange=i,this._showFullImageRange=s,this._canvas=this._createRootElement(r),o&&this.appendTo(o)}get colormap(){return this._colormap}set colormap(e){this._colormap=e,this.render()}get size(){const{width:e,height:n}=this._canvas;return{width:e,height:n}}set size(e){const{_canvas:n}=this;!EC(e)||gH(n,e)||(this._setCanvasSize(n,e),this.render())}get imageRange(){return{...this._imageRange}}set imageRange(e){!Uc(e)||Dm(e,this._imageRange)||(this._imageRange=e,this.render())}get voiRange(){return{...this._voiRange}}set voiRange(e){!Uc(e)||Dm(e,this._voiRange)||(this._voiRange=e,this.render())}get showFullImageRange(){return this._showFullImageRange}set showFullImageRange(e){e!==this._showFullImageRange&&(this._showFullImageRange=e,this.render())}appendTo(e){e.appendChild(this._canvas),this.render()}dispose(){const{_canvas:e}=this,{parentElement:n}=e;n==null||n.removeChild(e)}static validateProps(e){const{size:n,imageRange:r,voiRange:a}=e;if(n&&!EC(n))throw new Error('Invalid "size"');if(r&&!Uc(r))throw new Error('Invalid "imageRange"');if(a&&!Uc(a))throw new Error('Invalid "voiRange"')}_setCanvasSize(e,n){const{width:r,height:a}=n;e.width=r,e.height=a,Object.assign(e.style,{width:`${r}px`,height:`${a}px`})}_createRootElement(e){const n=document.createElement("canvas");return Object.assign(n.style,{position:"absolute",top:"0",left:"0",pointerEvents:"none",boxSizing:"border-box"}),this._setCanvasSize(n,e),n}render(){if(!this._canvas.isConnected)return;const{_colormap:e}=this,{RGBPoints:n}=e,r=n.length/4,a=C=>{const p=4*C;if(!(C<0||C>=r))return{index:C,position:n[p],color:[n[p+1],n[p+2],n[p+3]]}},{width:i,height:o}=this._canvas,s=this._canvas.getContext("2d");if(!s)return;const c=i>o,l=c?i:o,{_voiRange:u}=this,f=this._showFullImageRange?this._imageRange:{...u},{windowWidth:v}=Uv(u.lower,u.upper);let g,d=a(0);const m=(f.upper-f.lower)/(l-1);let h=f.lower;for(let C=0;C<l;C++){const p=(h-u.lower)/v;if(d)for(let D=d.index;D<r&&!(p<=d.position);D++)g=d,d=a(D+1);let S;if(!g)S=[...d.color];else if(!d)S=[...g.color];else{const D=(p-g.position)/(d.position-g.position);S=Cye(g.color,d.color,D)}const I=S.map(D=>Iye(Math.round(D*255),0,255));s.fillStyle=`rgb(${I[0]}, ${I[1]}, ${I[2]})`,c?s.fillRect(C,0,1,o):s.fillRect(0,o-C-1,i,1),h+=m}}}const ku={FONT:"10px Arial",COLOR:"white",TICK_SIZE:5,TICK_WIDTH:1,TICK_LABEL_MARGIN:3,MAX_NUM_TICKS:8,TICKS_STEPS:[1,2.5,5,10]};class I4{constructor(e){I4.validateProps(e);const{top:n=0,left:r=0,size:a={width:20,height:100},imageRange:i={lower:0,upper:1},voiRange:o={lower:0,upper:1},ticks:s,container:c,showFullPixelValueRange:l=!1}=e,{style:u,position:f}=s??{};this._imageRange=i,this._voiRange=o,this._font=(u==null?void 0:u.font)??ku.FONT,this._color=(u==null?void 0:u.color)??ku.COLOR,this._tickSize=(u==null?void 0:u.tickSize)??ku.TICK_SIZE,this._tickWidth=(u==null?void 0:u.tickWidth)??ku.TICK_WIDTH,this._labelMargin=(u==null?void 0:u.labelMargin)??ku.TICK_LABEL_MARGIN,this._maxNumTicks=(u==null?void 0:u.maxNumTicks)??ku.MAX_NUM_TICKS,this._rangeTextPosition=f??os.Right,this._showFullPixelValueRange=l,this._canvas=this._createCanvasElement(a,n,r),c&&this.appendTo(c)}get size(){const{width:e,height:n}=this._canvas;return{width:e,height:n}}set size(e){const{_canvas:n}=this;!EC(e)||gH(n,e)||(this._setCanvasSize(n,e),this.render())}get top(){return Number.parseInt(this._canvas.style.top)}set top(e){const{_canvas:n}=this,r=this.top;e!==r&&(n.style.top=`${e}px`,this.render())}get left(){return Number.parseInt(this._canvas.style.left)}set left(e){const{_canvas:n}=this,r=this.left;e!==r&&(n.style.left=`${e}px`,this.render())}get imageRange(){return{...this._imageRange}}set imageRange(e){!Uc(e)||Dm(e,this._imageRange)||(this._imageRange=e,this.render())}get voiRange(){return{...this._voiRange}}set voiRange(e){!Uc(e)||Dm(e,this._voiRange)||(this._voiRange=e,this.render())}get tickSize(){return this._tickSize}set tickSize(e){e!==this._tickSize&&(this._tickSize=e,this.render())}get tickWidth(){return this._tickWidth}set tickWidth(e){e!==this._tickWidth&&(this._tickWidth=e,this.render())}get color(){return this._color}set color(e){e!==this._color&&(this._color=e,this.render())}get showFullPixelValueRange(){return this._showFullPixelValueRange}set showFullPixelValueRange(e){e!==this._showFullPixelValueRange&&(this._showFullPixelValueRange=e,this.render())}get visible(){return this._canvas.style.display==="block"}set visible(e){e!==this.visible&&(this._canvas.style.display=e?"block":"none",e&&this.render())}appendTo(e){e.appendChild(this._canvas),this.render()}static validateProps(e){const{size:n,imageRange:r,voiRange:a}=e;if(n&&!EC(n))throw new Error('Invalid "size"');if(r&&!Uc(r))throw new Error('Invalid "imageRange"');if(a&&!Uc(a))throw new Error('Invalid "voiRange"')}_setCanvasSize(e,n){const{width:r,height:a}=n;e.width=r,e.height=a,Object.assign(e.style,{width:`${r}px`,height:`${a}px`})}_createCanvasElement(e,n,r){const a=document.createElement("canvas");return Object.assign(a.style,{display:"none",position:"absolute",boxSizing:"border-box",top:`${n}px`,left:`${r}px`}),this._setCanvasSize(a,e),a}_getTicks(e){const{lower:n,upper:r}=e,i=(r-n)/(this._maxNumTicks-1),o=Math.pow(10,-Math.floor(Math.log10(Math.abs(i)))),s=i*o,l=ku.TICKS_STEPS.find(d=>d>=s)/o,u=Math.ceil(r/l)*l,f=Math.floor(n/l)*l,v=Math.round((u-f)/l)+1,g=[];for(let d=0;d<v;d++)g.push(f+d*l);return{scaleMin:f,scaleMax:u,step:l,ticks:g}}_getLeftTickInfo({position:e,labelMeasure:n}){const{width:r}=this._canvas,i=[r-this.tickSize-n.width-this._labelMargin,e],o={start:[r-this._tickSize,e],end:[r,e]};return{labelPoint:i,tickPoints:o}}_getRightTickInfo({position:e}){const n=[this._tickSize+this._labelMargin,e],r={start:[0,e],end:[this._tickSize,e]};return{labelPoint:n,tickPoints:r}}_getTopTickInfo({position:e,labelMeasure:n}){throw new Error("Not implemented")}_getBottomTickInfo({position:e,labelMeasure:n}){throw new Error("Not implemented")}render(){const{_canvas:e}=this;if(!e.isConnected||!this.visible)return;const{width:n,height:r}=e,a=n>=r,i=a?n:r,o=e.getContext("2d"),{_voiRange:s}=this,c=this._showFullPixelValueRange?this._imageRange:{...s},l=c.upper-c.lower,{ticks:u}=this._getTicks(c);o.clearRect(0,0,n,r),o.font=this._font,o.textBaseline="middle",o.fillStyle=this._color,o.strokeStyle=this._color,o.lineWidth=this.tickWidth,u.forEach(f=>{let v=Math.round(i*((f-c.lower)/l));if(a||(v=r-v),v<0||v>i)return;const g=f.toString(),d=o.measureText(g);let m;a?this._rangeTextPosition===os.Top?m=this._getTopTickInfo({position:v,labelMeasure:d}):m=this._getBottomTickInfo({position:v,labelMeasure:d}):this._rangeTextPosition===os.Left?m=this._getLeftTickInfo({position:v,labelMeasure:d}):m=this._getRightTickInfo({position:v});const{labelPoint:h,tickPoints:C}=m,{start:p,end:S}=C;return o.beginPath(),o.moveTo(p[0],p[1]),o.lineTo(S[0],S[1]),o.fillText(g,h[0],h[1]),o.stroke(),v})}}function Dye(t,e,n){return(t>=e?[os.Top,os.Bottom]:[os.Left,os.Right]).includes(n)}class Eye{constructor({id:e,container:n}){this._containerResizeCallback=r=>{let a,i;const{contentRect:o,contentBoxSize:s}=r[0];o?(a=o.width,i=o.height):s!=null&&s.length&&(a=s[0].inlineSize,i=s[0].blockSize),this._containerSize={width:a,height:i},this.onContainerResize()},this._id=e,this._containerSize={width:0,height:0},this._rootElement=this.createRootElement(e),this._containerResizeObserver=new ResizeObserver(this._containerResizeCallback),n&&this.appendTo(n)}get id(){return this._id}get rootElement(){return this._rootElement}appendTo(e){const{_rootElement:n,_containerResizeObserver:r}=this,{parentElement:a}=n;!e||e===a||(a&&r.unobserve(a),e.appendChild(n),r.observe(e))}destroy(){const{_rootElement:e,_containerResizeObserver:n}=this,{parentElement:r}=e;r==null||r.removeChild(e),n.disconnect()}get containerSize(){return{...this._containerSize}}createRootElement(e){const n=document.createElement("div");return n.id=e,n.classList.add("widget"),Object.assign(n.style,{width:"100%",height:"100%"}),n}onContainerResize(){}}const _g={MULTIPLIER:1,RANGE_TEXT_POSITION:os.Right,TICKS_BAR_SIZE:50};class Em extends Eye{constructor(e){var n;super(e),this._isMouseOver=!1,this._isInteracting=!1,this._mouseOverCallback=r=>{this._isMouseOver=!0,this.showTicks(),r.stopPropagation()},this._mouseOutCallback=r=>{this._isMouseOver=!1,this.hideTicks(),r.stopPropagation()},this._mouseDownCallback=r=>{this._isInteracting=!0,this.showTicks(),this._addVOIEventListeners(r),r.stopPropagation()},this._mouseDragCallback=(r,a)=>{const i=this.getVOIMultipliers(),o=this._getPointsFromMouseEvent(r),{points:s,voiRange:c}=a,l=Ps(In(),o.local,s.local),u=l[0]*i[0],f=l[1]*i[1];if(!u&&!f)return;const{lower:v,upper:g}=c;let{windowWidth:d,windowCenter:m}=Uv(v,g);d=Math.max(d+u,1),m+=f;const h=Bl(d,m);this.voiRange=h,r.stopPropagation(),r.preventDefault()},this._mouseUpCallback=r=>{this._isInteracting=!1,this.hideTicks(),this._removeVOIEventListeners(),r.stopPropagation()},this._eventListenersManager=new IF,this._colormaps=Em.getColormapsMap(e),this._activeColormapName=Em.getInitialColormapName(e),this._canvas=this._createCanvas(e),this._ticksBar=this._createTicksBar(e),this._rangeTextPosition=((n=e.ticks)==null?void 0:n.position)??_g.RANGE_TEXT_POSITION,this._canvas.appendTo(this.rootElement),this._ticksBar.appendTo(this.rootElement),this._addRootElementEventListeners()}get activeColormapName(){return this._activeColormapName}set activeColormapName(e){if(e===this._activeColormapName)return;const n=this._colormaps.get(e);if(!n){console.warn(`Invalid colormap name (${e})`);return}this._activeColormapName=e,this._canvas.colormap=n}get imageRange(){return this._canvas.imageRange}set imageRange(e){this._canvas.imageRange=e,this._ticksBar.imageRange=e}get voiRange(){return this._canvas.voiRange}set voiRange(e){const{voiRange:n}=this._canvas;!Uc(e)||Dm(e,n)||(this._canvas.voiRange=e,this._ticksBar.voiRange=e,this.onVoiChange(e))}get showFullImageRange(){return this._canvas.showFullImageRange}set showFullImageRange(e){this._canvas.showFullImageRange=e,this._ticksBar.showFullPixelValueRange=e}destroy(){super.destroy(),this._eventListenersManager.reset()}createRootElement(){const e=document.createElement("div");return Object.assign(e.style,{position:"relative",fontSize:"0",width:"100%",height:"100%"}),e}onContainerResize(){super.onContainerResize(),this.updateTicksBar(),this._canvas.size=this.containerSize}getVOIMultipliers(){return[_g.MULTIPLIER,_g.MULTIPLIER]}onVoiChange(e){}showTicks(){this.updateTicksBar(),this._ticksBar.visible=!0}hideTicks(){this._isInteracting||this._isMouseOver||(this._ticksBar.visible=!1)}static getColormapsMap(e){const{colormaps:n}=e;return n.reduce((r,a)=>r.set(a.Name,a),new Map)}static getInitialColormapName(e){const{activeColormapName:n,colormaps:r}=e;return!!n&&r.some(i=>i.Name===n)?n:r[0].Name}_createCanvas(e){const{imageRange:n,voiRange:r,showFullPixelValueRange:a}=e,i=this._colormaps.get(this._activeColormapName);return new C4({colormap:i,imageRange:n,voiRange:r,showFullPixelValueRange:a})}_createTicksBar(e){const n=e.ticks;return new I4({imageRange:e.imageRange,voiRange:e.voiRange,ticks:n,showFullPixelValueRange:e.showFullPixelValueRange})}_getPointsFromMouseEvent(e){const{rootElement:n}=this,r=[e.clientX,e.clientY],a=[e.pageX,e.pageY],i=n.getBoundingClientRect(),o=[a[0]-i.left-window.pageXOffset,a[1]-i.top-window.pageYOffset];return{client:r,page:a,local:o}}updateTicksBar(){const{width:e,height:n}=this.containerSize;if(e===0&&n===0)return;const{_ticksBar:r,_rangeTextPosition:a}=this,i=e>=n,o=i?e:_g.TICKS_BAR_SIZE,s=i?_g.TICKS_BAR_SIZE:n;if(!Dye(e,n,a))throw new Error("Invalid rangeTextPosition value for the current colobar orientation");let c,l;r.size={width:o,height:s},i?(l=0,c=a===os.Top?-s:n):(c=0,l=a===os.Left?-o:e),r.top=c,r.left=l}_addRootElementEventListeners(){const{_eventListenersManager:e}=this,{rootElement:n}=this;e.addEventListener(n,"mouseover",this._mouseOverCallback),e.addEventListener(n,"mouseout",this._mouseOutCallback),e.addEventListener(n,"mousedown",this._mouseDownCallback)}_addVOIEventListeners(e){const{_eventListenersManager:n}=this,r=this._getPointsFromMouseEvent(e),a={...this._canvas.voiRange},i={points:r,voiRange:a};this._removeVOIEventListeners(),n.addEventListener(document,"voi.mouseup",this._mouseUpCallback),n.addEventListener(document,"voi.mousemove",o=>this._mouseDragCallback(o,i))}_removeVOIEventListeners(){const{_eventListenersManager:e}=this;e.removeEventListener(document,"voi.mouseup"),e.removeEventListener(document,"voi.mousemove")}}const YE=4;function Tye(t,e,n){if(UF(t,e)==="PT"){const{clientWidth:a,clientHeight:i}=t.element,o=5/Math.max(a,i),s=ac(t,e),{fixedPTWindowWidth:c=!0}={},l=c?0:o;return s?[l,o]:[l,YE]}return[YE,YE]}const{Events:Zp}=vs,Jp={lower:-1e3,upper:1e3};class xf extends Em{constructor(e){const{element:n,volumeId:r}=e,a=xf._getImageRange(n,r),i=xf._getVOIRange(n,r);super({...e,imageRange:a,voiRange:i}),this.autoHideTicks=()=>{if(this._hideTicksTimeoutId)return;const o=this._hideTicksTime-Date.now();o<=0?this.hideTicks():this._hideTicksTimeoutId=window.setTimeout(()=>{this._hideTicksTimeoutId=0,this.autoHideTicks()},o)},this._stackNewImageCallback=()=>{this.imageRange=xf._getImageRange(this._element)},this._imageVolumeModifiedCallback=o=>{const{volumeId:s}=o.detail;if(s!==this._volumeId)return;const{_element:c}=this;this.imageRange=xf._getImageRange(c,s)},this._viewportVOIModifiedCallback=o=>{const{viewportId:s,volumeId:c,range:l,colormap:u}=o.detail,{viewport:f}=this.enabledElement;s!==f.id||c!==this._volumeId||(this.voiRange=l,u&&(this.activeColormapName=u.name),this.showAndAutoHideTicks())},this._viewportColormapModifiedCallback=o=>{const{viewportId:s,colormap:c,volumeId:l}=o.detail,{viewport:u}=this.enabledElement;s!==u.id||l!==this._volumeId||(this.activeColormapName=c.name)},this._element=n,this._volumeId=r,this._addCornerstoneEventListener()}get element(){return this._element}get enabledElement(){return Ae(this._element)}getVOIMultipliers(){const{viewport:e}=this.enabledElement;return Tye(e,this._volumeId)}onVoiChange(e){super.onVoiChange(e);const{viewport:n}=this.enabledElement;if(n instanceof Xr)n.setProperties({voiRange:e}),n.render();else if(n instanceof yr){const{_volumeId:r}=this,a=ih(r);n.setProperties({voiRange:e},r),a.forEach(i=>i.render())}}static _getImageRange(e,n){const r=Ae(e),{viewport:a}=r,i=a.getImageActor(n);if(!i)return Jp;const s=i.getMapper().getInputData().getPointData().getScalars();let c;if(s)c=s.getRange();else{if(!n)throw new Error("volumeId is required when scalarData is not available");const l=Ye.getVolume(n),[u,f]=l.voxelManager.getRange();c=[u,f]}return c[0]===0&&c[1]===0?Jp:{lower:c[0],upper:c[1]}}static _getVOIRange(e,n){const r=Ae(e),{viewport:a}=r,i=a.getImageActor(n);if(!i)return Jp;const o=i.getProperty().getRGBTransferFunction(0).getRange();return o[0]===0&&o[1]===0?Jp:{lower:o[0],upper:o[1]}}showAndAutoHideTicks(e=1e3){this._hideTicksTime=Date.now()+e,this.showTicks(),this.autoHideTicks()}_addCornerstoneEventListener(){const{_element:e}=this;ot.addEventListener(Zp.IMAGE_VOLUME_MODIFIED,this._imageVolumeModifiedCallback),e.addEventListener(Zp.STACK_NEW_IMAGE,this._stackNewImageCallback),e.addEventListener(Zp.VOI_MODIFIED,this._viewportVOIModifiedCallback),e.addEventListener(Zp.COLORMAP_MODIFIED,this._viewportColormapModifiedCallback)}}const yye=Object.freeze(Object.defineProperty({__proto__:null,Colorbar:Em,Enums:Sye,ViewportColorbar:xf},Symbol.toStringTag,{value:"Module"}));function dH(t,e,n,r,a){const i=[];let o=0;const s=t.scalarData;let c,l,u;if(t.color)for(l=0;l<a;l++)for(u=0;u<r;u++){c=((l+n)*t.columns+(u+e))*4;const f=s[c],v=s[c+1],g=s[c+2];i[o++]=.2126*f+.7152*v+.0722*g}else for(l=0;l<a;l++)for(u=0;u<r;u++)c=(l+n)*t.columns+(u+e),i[o++]=s[c];return i}function mH(t,e,n){const r=t.length;let a=n,i=e,o=0;if(r<2)return{min:a,max:i,mean:(e+n)/2};for(let s=0;s<r;s++){const c=t[s];a=Math.min(a,c),i=Math.max(i,c),o+=c}return{min:a,max:i,mean:o/r}}function hH(t){if(t instanceof yr)return Mye(t);if(t instanceof Xr)return _ye(t);throw new Error("Viewport not supported")}function Mye(t){const{scalarData:e,width:n,height:r}=Z5(t),{min:a,max:i}=X5(e);return{scalarData:e,minPixelValue:a,maxPixelValue:i,width:n,height:r,rows:n,columns:r}}function _ye(t){const e=t.getImageData(),{scalarData:n}=e,{min:r,max:a}=X5(n),i=e.dimensions[0],o=e.dimensions[1],{rows:s,columns:c,color:l}=t.getCornerstoneImage();return{scalarData:n,width:i,height:o,minPixelValue:r,maxPixelValue:a,rows:s,columns:c,color:l}}const Oye=Object.freeze(Object.defineProperty({__proto__:null,calculateMinMaxMean:mH,extractWindowLevelRegionToolData:hH,getLuminanceFromRegion:dH},Symbol.toStringTag,{value:"Module"})),wye=Object.freeze(Object.defineProperty({__proto__:null,colorbar:yye,windowLevel:Oye},Symbol.toStringTag,{value:"Module"})),{transformWorldToIndex:Py}=Zn;function Pye(t,e,n,r){const{boundsIJK:a,centerWorld:i,radiusWorld:o}=Aye(e,t,r),s={center:i,radius:o},c=t.getDimensions();yo.createScalarVolumeVoxelManager({dimensions:c,scalarData:t.getPointData().getScalars().getData()}).forEach(n,{boundsIJK:a,isInObject:u=>OW(s,u),imageData:t})}function Aye(t,e,n){const[r,a]=t,i=qt((r[0]+a[0])/2,(r[1]+a[1])/2,(r[2]+a[2])/2),o=Si(r,a)/2;let s;if(!n){const c=Py(e,i),l=e.getSpacing(),u=Math.min(...l),f=Math.ceil(o/u);return s=[[c[0]-f,c[0]+f],[c[1]-f,c[1]+f],[c[2]-f,c[2]+f]],{boundsIJK:s,centerWorld:i,radiusWorld:o}}return s=xye(e,n,t,i,o),{boundsIJK:s,centerWorld:i,radiusWorld:o}}function xye(t,e,n,r,a){const[i,o]=n,s=t.getDimensions(),c=e.getCamera(),l=qt(c.viewUp[0],c.viewUp[1],c.viewUp[2]),u=qt(c.viewPlaneNormal[0],c.viewPlaneNormal[1],c.viewPlaneNormal[2]),f=Xe();gr(f,l,u);const v=Xe(),g=Xe();Hn(v,o,u,a),Hn(g,i,u,-a),Hn(v,v,f,-a),Hn(g,g,f,a);const d=[Py(t,v),Py(t,g)];return su(d,s)}const Rye=kn,bye=Object.freeze(Object.defineProperty({__proto__:null,IslandRemoval:R1,annotationFrameRange:Cy,annotationHydration:Zhe,boundingBox:fEe,calibrateImageSpacing:uEe,cine:BTe,contourSegmentation:rpe,contours:kEe,debounce:BI,drawing:MSe,dynamicVolume:hye,getAnnotationNearPoint:sEe,getAnnotationNearPointOnEnabledElement:vW,getCalibratedAspect:F_,getCalibratedLengthUnitsAndScale:us,getCalibratedProbeUnitsAndValue:dC,getClosestImageIdForStackViewport:WI,getSphereBoundsInfo:mW,getViewportForAnnotation:tS,isObject:b_,math:Lpe,normalizeViewportPlane:MW,orientation:RTe,planar:Bpe,planarFreehandROITool:zTe,pointInSurroundingSphereCallback:Pye,pointToString:U_,polyDataUtils:pye,rectangleROITool:qTe,roundNumber:Rye,segmentation:PTe,stackContextPrefetch:cye,stackPrefetch:tye,throttle:no,touch:Zme,triggerAnnotationRender:zv,triggerAnnotationRenderForToolGroupIds:ZG,triggerAnnotationRenderForViewportIds:qe,triggerEvent:Dt,viewport:lye,viewportFilters:qpe,voi:wye},Symbol.toStringTag,{value:"Module"})),Nye=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));function pH(t,e){const n=xr;t.forEach(r=>{n.updateSegmentation(r.segmentationId,r.payload),e||Go(r.segmentationId)})}function Lye(t,e,n){xr.setSegmentationRepresentationVisibility(t,e,n)}function Uye(t,e,n){const r=ko(t,e);r&&r.forEach(a=>{Lye(t,{segmentationId:a.segmentationId,type:a.type},n)})}function Fye(t,e){return JG(t,e)}function Vye(t,e,n,r){const a=ko(t,e);a&&(a.forEach(i=>{i.segments[n].visible=r}),YI(e.segmentationId),N0(t,e.segmentationId))}function kye(t,e,n){return!SH(t,e).has(n)}function SH(t,e){const n=kI(t,e);return n?Object.entries(n.segments).reduce((a,[i,o])=>(o.visible||a.add(Number(i)),a),new Set):new Set}const Gye=Object.freeze(Object.defineProperty({__proto__:null,getHiddenSegmentIndices:SH,getSegmentIndexVisibility:kye,getSegmentationRepresentationVisibility:Fye,setSegmentIndexVisibility:Vye,setSegmentationRepresentationVisibility:Uye},Symbol.toStringTag,{value:"Module"}));function Bye(t){return ls.getStyle(t)}function Wye(t,e){ls.setStyle(t,e),!t.viewportId&&!t.segmentationId&&ZI().forEach(r=>{Qv(r.segmentationId)}),N0(t.viewportId,t.segmentationId,t.type)}function Hye(t,e){ls.setRenderInactiveSegmentations(t,e),Qv(t),DB(t).forEach(r=>{N0(t,r.segmentationId)})}function $ye(t){return ls.getRenderInactiveSegmentations(t)}function zye(){ls.resetToGlobalStyle(),Qv()}function qye(t){return ls.hasCustomStyle(t)}const jye=Object.freeze(Object.defineProperty({__proto__:null,getRenderInactiveSegmentations:$ye,getStyle:Bye,hasCustomStyle:qye,resetToGlobalStyle:zye,setRenderInactiveSegmentations:Hye,setStyle:Wye},Symbol.toStringTag,{value:"Module"})),Qye=Object.freeze(Object.defineProperty({__proto__:null,color:$he,style:jye,visibility:Gye},Symbol.toStringTag,{value:"Module"}));function TC(t,e){const n=Un(t);typeof e=="string"&&(console.warn("segmentIndex is a string, converting to number"),e=Number(e)),Object.values(n.segments).forEach(a=>{a.active=!1}),n.segments[e]||(n.segments[e]={segmentIndex:e,label:"",locked:!1,cachedStats:{},active:!1}),n.segments[e].active!==!0&&(n.segments[e].active=!0,Go(t));const r=$v(t);r.forEach(a=>{ko(a,{segmentationId:t}).forEach(o=>{o.segments[e]||(o.segments[e]={visible:!0})})}),r.forEach(a=>{const i=la(a);HW(i.id)})}const Kye=Object.freeze(Object.defineProperty({__proto__:null,getActiveSegmentIndex:Bo,setActiveSegmentIndex:TC},Symbol.toStringTag,{value:"Module"}));async function Xye(t){const e=Ehe(t);return Go(t.segmentationId),e}const Yye=Object.freeze(Object.defineProperty({__proto__:null,canComputeRequestedRepresentation:GI,computeAndAddContourRepresentation:nB,computeAndAddLabelmapRepresentation:uB,computeAndAddSurfaceRepresentation:Jk},Symbol.toStringTag,{value:"Module"}));function CH(t,e){const n=Un(t);if(n.representationData.Labelmap){const{representationData:r}=n,a=r.Labelmap;("imageIds"in a||"volumeId"in a)&&("imageIds"in a?a.imageIds.map(o=>Ye.getImage(o)):[Ye.getVolume(a.volumeId)]).forEach(o=>{if(!o)return;const{voxelManager:s}=o;s.forEach(({value:c,index:l})=>{c===e&&s.setAtIndex(l,0)})}),ki(t)}else throw new Error("Invalid segmentation type, only labelmap is supported right now")}function Zye(t,e,n={setNextSegmentAsActive:!0}){CH(t,e);const r=Bo(t)===e,a=Un(t),{segments:i}=a;delete i[e];const o={...i};if(pH([{segmentationId:t,payload:{segments:o}}]),r&&n.setNextSegmentAsActive){const c=Object.keys(i).map(Number).sort((v,g)=>v-g),l=c.indexOf(e),u=c[l+1],f=c[l-1];u!==void 0?TC(t,u):f!==void 0&&TC(t,f)}$v(t).forEach(c=>{ko(c,{segmentationId:t}).forEach(u=>{delete u.segments[e]})})}function Jye(t){const e=xr,n=Un(t);return e.getLabelmapImageIds(n.representationData)}const eMe={clearSegmentValue:CH,convertStackToVolumeLabelmap:Xye,computeVolumeLabelmapFromStack:Zk,convertVolumeToStackLabelmap:cIe},tMe=Object.freeze(Object.defineProperty({__proto__:null,activeSegmentation:XCe,addContourRepresentationToViewport:sB,addContourRepresentationToViewportMap:rIe,addLabelmapRepresentationToViewport:cB,addLabelmapRepresentationToViewportMap:aIe,addRepresentationData:jk,addSegmentationRepresentations:jv,addSegmentations:gB,addSurfaceRepresentationToViewport:lB,addSurfaceRepresentationToViewportMap:iIe,config:Qye,getLabelmapImageIds:Jye,helpers:eMe,polySeg:Yye,removeAllSegmentationRepresentations:hB,removeAllSegmentations:IB,removeContourRepresentation:SB,removeLabelmapRepresentation:pB,removeSegment:Zye,removeSegmentation:r4,removeSegmentationRepresentation:Kv,removeSegmentationRepresentations:dB,removeSurfaceRepresentation:CB,segmentIndex:Kye,segmentLocking:PCe,state:_Ie,strategies:R3e,triggerSegmentationEvents:dhe,updateSegmentations:pH},Symbol.toStringTag,{value:"Module"}));class D4{constructor(e){this._controlPoints=[],this._invalidated=!1,this._length=0,this._controlPoints=[],this._resolution=(e==null?void 0:e.resolution)??20,this._fixedResolution=(e==null?void 0:e.fixedResolution)??!1,this._closed=(e==null?void 0:e.closed)??!1,this._invalidated=!0}get controlPoints(){return this._controlPoints}get numControlPoints(){return this._controlPoints.length}get resolution(){return this._resolution}set resolution(e){this._fixedResolution||this._resolution===e||(this._resolution=e,this.invalidated=!0)}get fixedResolution(){return this._fixedResolution}get closed(){return this._closed}set closed(e){this._closed!==e&&(this._closed=e,this.invalidated=!0)}get aabb(){return this._update(),this._aabb}get length(){return this._update(),this._length}get invalidated(){return this._invalidated}set invalidated(e){this._invalidated=e}hasTangentPoints(){return!1}addControlPoint(e){this._controlPoints.push([e[0],e[1]]),this.invalidated=!0}addControlPoints(e){e.forEach(n=>this.addControlPoint(n))}addControlPointAtU(e){const n=this._getLineSegmentAt(e),{start:r,end:a}=n.points,i=Math.floor(e),o=this._curveSegments[i],s=e-Math.floor(i),c=[r[0]+s*(a[0]-r[0]),r[1]+s*(a[1]-r[1])],l=this._controlPoints.indexOf(o.controlPoints.p1)+1;return this._controlPoints.splice(l,0,c),this.invalidated=!0,{index:l,point:c}}deleteControlPointByIndex(e){const n=this._closed?3:1;return e>=0&&e<this._controlPoints.length&&this._controlPoints.length>n?(this._controlPoints.splice(e,1),this.invalidated=!0,!0):!1}clearControlPoints(){this._controlPoints=[],this.invalidated=!0}setControlPoints(e){this.clearControlPoints(),this.addControlPoints(e)}updateControlPoint(e,n){if(e<0||e>=this._controlPoints.length)throw new Error("Index out of bounds");this._controlPoints[e]=[...n],this.invalidated=!0}getControlPoints(){return this._controlPoints.map(e=>[e[0],e[1]])}getClosestControlPoint(e){const n=this._controlPoints;let r=1/0,a=-1;for(let i=0,o=n.length;i<o;i++){const s=n[i],c=e[0]-s[0],l=e[1]-s[1],u=c*c+l*l;u<r&&(r=u,a=i)}return{index:a,point:a===-1?void 0:[...n[a]],distance:Math.sqrt(r)}}getClosestControlPointWithinDistance(e,n){const r=this.getClosestControlPoint(e);return r.distance<=n?r:void 0}getClosestPoint(e){this._update();const n=this._getCurveSegmmentsDistanceSquaredInfo(e);if(!n.length)return;n.sort((f,v)=>f.distanceSquared-v.distanceSquared);let r,a=-1,i=1/0,o,s;for(let f=0;f<n.length;f++){const v=n[f];if(v.distanceSquared>i)continue;const{curveSegmentIndex:g,curveSegment:d}=v,{lineSegments:m}=d;for(let h=0;h<m.length;h++){const C=m[h],{point:p,distanceSquared:S}=hC(C.points.start,C.points.end,e);S<i&&(s=C,a=g,o=v.curveSegment,r=p,i=S)}}const l=(s.previousLineSegmentsLength+bs(s.points.start,r))/o.length,u=a+l;return{point:r,uValue:u,distance:Math.sqrt(i)}}getClosestPointOnControlPointLines(e){const n=[...this._controlPoints];if(this._closed&&n.push(this._controlPoints[0]),!n.length)return;let r,a=1/0,i=n[0];for(let o=1,s=n.length;o<s;o++){const c=n[o],{point:l,distanceSquared:u}=hC(i,c,e);u<a&&(r=l,a=u),i=c}return{point:r,distance:Math.sqrt(a)}}getPolylinePoints(){return this._update(),this._convertCurveSegmentsToPolyline(this._curveSegments)}getPreviewPolylinePoints(e,n){if(this._closed)return[];this._update();const r=this.getClosestControlPointWithinDistance(e,n),a=(r==null?void 0:r.index)===0,i=this.getPreviewCurveSegments(e,a);return i!=null&&i.length?this._convertCurveSegmentsToPolyline(i):[]}isPointNearCurve(e,n){this._update();const r=this._getCurveSegmmentsWithinDistance(e,n),a=n*n;for(let i=0;i<r.length;i++){const{lineSegments:o}=r[i];for(let s=0;s<o.length;s++){const c=o[s];if(hh(c.points.start,c.points.end,e)<=a)return!0}}return!1}containsPoint(e){if(this._update(),this._controlPoints.length<3)return!1;const r=[...this._curveSegments],a=this._getClosingCurveSegmentWithStraightLineSegment();a&&r.push(a);let i=0;for(let o=0;o<r.length;o++){const s=r[o],{aabb:c}=s;if(!(e[0]<=c.maxX&&e[1]>=c.minY&&e[1]<c.maxY))continue;const{lineSegments:u}=s;for(let f=0;f<u.length;f++){const v=u[f],{aabb:g}=v;if(e[0]<=g.maxX&&e[1]>=g.minY&&e[1]<g.maxY){const{start:m,end:h}=v.points,C=m[0]===h[0],p=(e[1]-m[1])*(h[0]-m[0])/(h[1]-m[1])+m[0];i+=C||e[0]<=p?1:0}}}return i%2===1}_update(){if(!this._invalidated)return;const e=this.getSplineCurves();let n=0,r=1/0,a=1/0,i=-1/0,o=-1/0;for(let s=0,c=e.length;s<c;s++){const{aabb:l,length:u}=e[s];r=r<=l.minX?r:l.minX,a=a<=l.minY?a:l.minY,i=i>=l.maxX?i:l.maxX,o=o>=l.maxY?o:l.maxY,n+=u}this._curveSegments=e,this._aabb={minX:r,minY:a,maxX:i,maxY:o},this._length=n,this._invalidated=!1}_convertCurveSegmentsToPolyline(e){this._update();const n=[];return e.forEach(({lineSegments:r},a)=>{r.forEach((i,o)=>{a===0&&o===0&&n.push([...i.points.start]),n.push([...i.points.end])})}),n}_getCurveSegmmentsDistanceSquaredInfo(e){this._update();const n=[],{_curveSegments:r}=this;for(let a=0;a<r.length;a++){const i=r[a],o=mC(i.aabb,e);n.push({curveSegmentIndex:a,curveSegment:i,distanceSquared:o})}return n}_getCurveSegmmentsWithinDistance(e,n){this._update();const r=n*n;if(mC(this.aabb,e)>r)return[];const a=this._getCurveSegmmentsDistanceSquaredInfo(e),i=[];for(let o=0,s=a.length;o<s;o++){const{curveSegment:c,distanceSquared:l}=a[o];l<=r&&i.push(c)}return i}_getLineSegmentAt(e){this._update();const n=Math.floor(e),r=e-n,a=this._curveSegments[n],{lineSegments:i}=a,o=a.length*r;for(let s=0;s<i.length;s++){const c=i[s],l=c.previousLineSegmentsLength+c.length;if(o>=c.previousLineSegmentsLength&&o<=l)return c}}_getClosingCurveSegmentWithStraightLineSegment(){if(this.closed)return;const e=this._controlPoints,n=e[0],r=e[e.length-1],a={points:{start:[...n],end:[...r]},aabb:{minX:Math.min(n[0],r[0]),minY:Math.min(n[1],r[1]),maxX:Math.max(n[0],r[0]),maxY:Math.max(n[1],r[1])}};return{aabb:{minX:a.aabb.minX,minY:a.aabb.minY,maxX:a.aabb.maxX,maxY:a.aabb.maxY},lineSegments:[a]}}}const nMe=1e-8;class E4 extends D4{getPreviewCurveSegments(e,n){const r=this._getNumCurveSegments()+1,a=Math.max(0,r-2),i=n?r:r-1,o=this.getTransformMatrix(),s=[...this.controlPoints],c=[];n||s.push(e);for(let l=a;l<=i;l++){const u=this._getCurveSegment(l,o,s,n);c.push(u)}return c}getSplineCurves(){const e=this._getNumCurveSegments(),n=new Array(e);if(e<=0)return[];const r=this.getTransformMatrix();let a=0;for(let i=0;i<e;i++){const o=this._getCurveSegment(i,r);o.previousCurveSegmentsLength=a,n[i]=o,a+=o.length}return n}_getNumCurveSegments(e=this.controlPoints,n=this.closed){return n?e.length:Math.max(0,e.length-1)}_getPoint(e,n,r=this.controlPoints,a=this.closed){const i=this._getNumCurveSegments(r,a),o=Math.floor(e);let s=o%i;const c=e-o;if(s<0||s>=i)if(this.closed)s=(i+s)%i;else return;const{p0:u,p1:f,p2:v,p3:g}=this._getCurveSegmentPoints(s,r,a),d=c*c,m=d*c,h=N2(1,c,d,m),C=Nl(v7(),h,n);return[_8(C,N2(u[0],f[0],v[0],g[0])),_8(C,N2(u[1],f[1],v[1],g[1]))]}_getCurveSegmentPoints(e,n=this.controlPoints,r=this.closed){const a=this._getNumCurveSegments(n,r),i=e,o=i-1,s=r?(i+1)%a:i+1,c=s+1,l=n[i],u=n[s];let f,v;return o>=0?f=n[o]:f=r?n[n.length-1]:fy(u,l),c<n.length?v=n[c]:v=r?n[0]:fy(l,u),{p0:f,p1:l,p2:u,p3:v}}_getLineSegments(e,n,r=this.controlPoints,a=this.closed){const i=this._getNumCurveSegments(r,a),o=this.resolution+1,s=1/o,c=e;let l=c+1;!a&&e===i-1&&(l-=nMe);const u=[];let f,v,g=0;for(let d=0,m=c;d<=o;d++,m+=s){m=m>l?l:m;const h=this._getPoint(m,n,r,a);if(!d){f=h;continue}v=h;const C=v[0]-f[0],p=v[1]-f[1],S=Math.sqrt(C**2+p**2),I={minX:f[0]<=v[0]?f[0]:v[0],maxX:f[0]>=v[0]?f[0]:v[0],minY:f[1]<=v[1]?f[1]:v[1],maxY:f[1]>=v[1]?f[1]:v[1]};u.push({points:{start:f,end:v},aabb:I,length:S,previousLineSegmentsLength:g}),f=v,g+=S}return u}_getCurveSegment(e,n=this.getTransformMatrix(),r=this.controlPoints,a=this.closed){const{p0:i,p1:o,p2:s,p3:c}=this._getCurveSegmentPoints(e,r,a),l=this._getLineSegments(e,n,r,a);let u=0,f=1/0,v=1/0,g=-1/0,d=-1/0;return l.forEach(({aabb:m,length:h})=>{f=Math.min(f,m.minX),v=Math.min(v,m.minY),g=Math.max(g,m.maxX),d=Math.max(d,m.maxY),u+=h}),{controlPoints:{p0:i,p1:o,p2:s,p3:c},aabb:{minX:f,minY:v,maxX:g,maxY:d},length:u,previousCurveSegmentsLength:0,lineSegments:l}}}const rMe=s7(Fs(),jM(1,4,1,0,-3,0,3,0,3,-6,3,0,-1,3,-3,1),1/6);class IH extends E4{getTransformMatrix(){return rMe}}class Tm extends E4{constructor(e){super(e),this._scale=(e==null?void 0:e.scale)??.5,this._fixedScale=(e==null?void 0:e.fixedScale)??!1}get scale(){return this._scale}set scale(e){this._fixedScale||this._scale===e||(this._scale=e,this.invalidated=!0)}get fixedScale(){return this._fixedScale}getTransformMatrix(){const{scale:e}=this,n=2*e;return[0,1,0,0,-e,0,e,0,n,e-3,3-n,-e,-e,2-e,e-2,e]}}class DH extends Tm{constructor(){super({scale:.5,fixedScale:!0})}}class EH extends Tm{constructor(){super({resolution:0,fixedResolution:!0,scale:0,fixedScale:!0})}}class TH extends D4{getSplineCurves(){return[]}getLineSegments(){return[]}getPreviewCurveSegments(e,n){return[]}}const aMe=[1,0,0,-2,2,0,1,-2,1];class iMe extends TH{hasTangentPoints(){return!0}getTransformMatrix(){return aMe}}const oMe=Object.freeze(Object.defineProperty({__proto__:null,BSpline:IH,CardinalSpline:Tm,CatmullRomSpline:DH,CubicSpline:E4,LinearSpline:EH,QuadraticBezier:iMe,QuadraticSpline:TH,Spline:D4},Symbol.toStringTag,{value:"Module"}));class yH extends Xa{constructor(e={},n={supportedInteractionTypes:["Mouse","Touch"]}){super(e,n)}touchDragCallback(e){this._dragCallback(e)}mouseDragCallback(e){this._dragCallback(e)}_dragCallback(e){const{element:n,deltaPoints:r}=e.detail,a=Ae(n),i=r.world;if(i[0]===0&&i[1]===0&&i[2]===0)return;const o=a.viewport.getCamera(),{focalPoint:s,position:c}=o,l=[c[0]-i[0],c[1]-i[1],c[2]-i[2]],u=[s[0]-i[0],s[1]-i[1],s[2]-i[2]];a.viewport.setCamera({focalPoint:u,position:l}),a.viewport.render()}}yH.toolName="Pan";class MH extends Xa{constructor(e={},n={supportedInteractionTypes:["Mouse","Touch"],configuration:{rotateIncrementDegrees:2}}){super(e,n),this._resizeObservers=new Map,this._hasResolutionChanged=!1,this.preMouseDownCallback=r=>{const a=r.detail,{element:i}=a,o=Ae(i),{viewport:s}=o,u=s.getDefaultActor().actor.getMapper();if(!("getSampleDistance"in u||"getCurrentSampleDistance"in u))return!0;const v=u.getSampleDistance();return this._hasResolutionChanged||(u.setSampleDistance(v*2),this._hasResolutionChanged=!0,this.cleanUp!==null&&document.removeEventListener("mouseup",this.cleanUp),this.cleanUp=()=>{u.setSampleDistance(v),s.render(),this._hasResolutionChanged=!1},document.addEventListener("mouseup",this.cleanUp,{once:!0})),!0},this._getViewportsInfo=()=>Vi(this.toolGroupId).viewportsInfo,this.onSetToolActive=()=>{const r=()=>{this._getViewportsInfo().forEach(({viewportId:i,renderingEngineId:o})=>{if(!this._resizeObservers.has(i)){const{viewport:s}=Ka(i,o)||{viewport:null};if(!s)return;const{element:c}=s,l=new ResizeObserver(()=>{const u=Ka(i,o);if(!u)return;const{viewport:f}=u,v=f.getViewPresentation();f.resetCamera(),f.setViewPresentation(v),f.render()});l.observe(c),this._resizeObservers.set(i,l)}})};r(),this._viewportAddedListener=a=>{a.detail.toolGroupId===this.toolGroupId&&r()},ot.addEventListener(B.TOOLGROUP_VIEWPORT_ADDED,this._viewportAddedListener)},this.onSetToolDisabled=()=>{this._resizeObservers.forEach((r,a)=>{r.disconnect(),this._resizeObservers.delete(a)}),this._viewportAddedListener&&(ot.removeEventListener(B.TOOLGROUP_VIEWPORT_ADDED,this._viewportAddedListener),this._viewportAddedListener=null)},this.rotateCamera=(r,a,i,o)=>{const s=r.getVtkActiveCamera(),c=s.getViewUp(),l=s.getFocalPoint(),u=s.getPosition(),f=[0,0,0],v=[0,0,0],g=[0,0,0],d=zt(new Float32Array(16));kr(d,d,a),Ki(d,d,o,i),kr(d,d,[-a[0],-a[1],-a[2]]),un(f,u,d),un(v,l,d),zt(d),Ki(d,d,o,i),un(g,c,d),r.setCamera({position:f,viewUp:g,focalPoint:v})},this.touchDragCallback=this._dragCallback.bind(this),this.mouseDragCallback=this._dragCallback.bind(this)}_dragCallback(e){const{element:n,currentPoints:r,lastPoints:a}=e.detail,i=r.canvas,o=a.canvas,{rotateIncrementDegrees:s}=this.configuration,c=Ae(n),{viewport:l}=c,u=l.getCamera(),f=n.clientWidth,v=n.clientHeight,g=[i[0]/f,i[1]/v],d=[o[0]/f,o[1]/v],m=[f*.5,v*.5],h=l.canvasToWorld(m),p=(1+Math.abs([.5,.5][0]))**2,S=[d[0],0,0],I=[g[0],0,0],D=S[0]**2,E=I[0]**2,T=D>p?0:Math.sqrt(p-D),y=E>p?0:Math.sqrt(p-E),M=[S[0],0,T];Cn.normalize(M);const _=[I[0],0,y];Cn.normalize(_);const O=Cn.dot(M,_);if(Math.abs(O)>1e-4){const w=-2*Math.acos(Cn.clampValue(O,-1,1))*Math.sign(g[0]-d[0])*s,x=u.viewUp,P=u.viewPlaneNormal,R=[0,0,0],L=[0,0,0];Cn.cross(x,P,R),Cn.normalize(R),Cn.cross(P,R,L),Cn.normalize(L),Cn.normalize(x),this.rotateCamera(l,h,L,w);const H=(d[1]-g[1])*s;this.rotateCamera(l,h,R,H),l.render()}}}MH.toolName="TrackballRotate";const ZE=4,sMe=1024,cMe="PT";class _H extends Xa{constructor(e={},n={supportedInteractionTypes:["Mouse","Touch"]}){super(e,n),this._getImageDynamicRangeFromMiddleSlice=(r,a)=>{const i=Math.floor(a[2]/2),o=a[0]*a[1];let s,c;r instanceof Float32Array?(s=4,c=Float32Array):r instanceof Uint8Array?(s=1,c=Uint8Array):r instanceof Uint16Array?(s=2,c=Uint16Array):r instanceof Int16Array&&(s=2,c=Int16Array);const l=r.buffer,u=i*o*s,f=new c(l,u,o),{max:v,min:g}=this._getMinMax(f,o);return v-g}}touchDragCallback(e){this.mouseDragCallback(e)}mouseDragCallback(e){var d,m;const{element:n,deltaPoints:r}=e.detail,a=Ae(n),{viewport:i}=a;let o,s,c,l,u,f,v=!1;const g=i.getProperties();if(i instanceof yr){o=i.getVolumeId(),f=ih(o),{lower:s,upper:c}=g.voiRange;const h=Ye.getVolume(o);if(!h)throw new Error("Volume not found "+o);l=h.metadata.Modality,v=h.scaling&&Object.keys(h.scaling).length>0}else if(g.voiRange){l=i.modality,{lower:s,upper:c}=g.voiRange;const{preScale:h={scaled:!1}}=((d=i.getImageData)==null?void 0:d.call(i))||{};v=h.scaled&&((m=h.scalingParameters)==null?void 0:m.suvbw)!==void 0}else throw new Error("Viewport is not a valid type");if(l===cMe&&v?u=this.getPTScaledNewRange({deltaPointsCanvas:r.canvas,lower:s,upper:c,clientHeight:n.clientHeight,isPreScaled:v,viewport:i,volumeId:o}):u=this.getNewRange({viewport:i,deltaPointsCanvas:r.canvas,volumeId:o,lower:s,upper:c}),!(u.lower>=u.upper)&&(i.setProperties({voiRange:u}),i.render(),i instanceof yr)){f.forEach(h=>{i!==h&&h.render()});return}}getPTScaledNewRange({deltaPointsCanvas:e,lower:n,upper:r,clientHeight:a,viewport:i,volumeId:o,isPreScaled:s}){let c=ZE;s?c=5/a:c=this._getMultiplierFromDynamicRange(i,o)||ZE;const u=e[1]*c;return r-=u,r=s?Math.max(r,.1):r,{lower:n,upper:r}}getNewRange({viewport:e,deltaPointsCanvas:n,volumeId:r,lower:a,upper:i}){const o=this._getMultiplierFromDynamicRange(e,r)||ZE,s=n[0]*o,c=n[1]*o;let{windowWidth:l,windowCenter:u}=Uv(a,i);l+=s,u+=c,l=Math.max(l,1);const f=e.getProperties().VOILUTFunction;return Bl(l,u,f)}_getMultiplierFromDynamicRange(e,n){var i;let r;if(n){const o=Ye.getVolume(n),{voxelManager:s}=e.getImageData(),l=s.getMiddleSliceData().reduce((v,g)=>[Math.min(v[0],g),Math.max(v[1],g)],[1/0,-1/0]),u=(i=o==null?void 0:o.metadata)==null?void 0:i.BitsStored,f=u?2**u:1/0;r=Math.min(l,f)}else r=this._getImageDynamicRangeFromViewport(e);const a=r/sMe;return a>1?Math.round(a):a}_getImageDynamicRangeFromViewport(e){const{imageData:n,voxelManager:r}=e.getImageData();if(r!=null&&r.getRange){const s=r.getRange();return s[1]-s[0]}const a=n.getDimensions();if(n.getRange){const s=n.getRange();return s[1]-s[0]}let i;if(n.getScalarData?i=n.getScalarData():i=n.getPointData().getScalars().getData(),a[2]!==1)return this._getImageDynamicRangeFromMiddleSlice(i,a);let o;if(i.getRange)o=i.getRange();else{const{min:s,max:c}=this._getMinMax(i,i.length);o=[s,c]}return o[1]-o[0]}_getMinMax(e,n){let r=1/0,a=-1/0;for(let i=0;i<n;i++){const o=e[i];o<r&&(r=o),o>a&&(a=o)}return{max:a,min:r}}}_H.toolName="WindowLevel";class OH extends Br{constructor(e={},n={supportedInteractionTypes:["Mouse","Touch"],configuration:{minWindowWidth:10}}){super(e,n),this.addNewAnnotation=r=>{const a=r.detail,{currentPoints:i,element:o}=a,s=i.world,c=Ae(o),{viewport:l}=c;this.isDrawing=!0;const u=l.getCamera(),{viewPlaneNormal:f,viewUp:v}=u,g=this.getReferencedImageId(l,s,f,v),d=l.getFrameOfReferenceUID(),m={invalidated:!0,highlighted:!0,metadata:{toolName:this.getToolName(),viewPlaneNormal:[...f],viewUp:[...v],FrameOfReferenceUID:d,referencedImageId:g},data:{handles:{points:[[...s],[...s],[...s],[...s]]},cachedStats:{}}};qn(m,o);const h=Bt(o,this.getToolName());return this.editData={annotation:m,viewportIdsToRender:h},this._activateDraw(o),Yt(o),r.preventDefault(),qe(h),m},this._endCallback=r=>{const a=r.detail,{element:i}=a,{annotation:o,viewportIdsToRender:s}=this.editData;this._deactivateDraw(i),Mn(i),this.editData=null,this.isDrawing=!1,sr(o.annotationUID),qe(s),Ur(o),this.applyWindowLevelRegion(o,i)},this._dragCallback=r=>{this.isDrawing=!0;const a=r.detail,{element:i}=a,{annotation:o,viewportIdsToRender:s}=this.editData,{data:c}=o,{currentPoints:l}=a,u=Ae(i),{worldToCanvas:f,canvasToWorld:v}=u.viewport,g=l.world,{points:d}=c.handles,m=3;d[m]=[...g];const h=f(d[0]),C=f(d[3]),p=[C[0],h[1]],S=[h[0],C[1]],I=v(p),D=v(S);d[1]=I,d[2]=D,o.invalidated=!0,qe(s)},this._activateDraw=r=>{st.isInteractingWithTool=!0,r.addEventListener(B.MOUSE_UP,this._endCallback),r.addEventListener(B.MOUSE_DRAG,this._dragCallback),r.addEventListener(B.MOUSE_MOVE,this._dragCallback),r.addEventListener(B.MOUSE_CLICK,this._endCallback),r.addEventListener(B.TOUCH_END,this._endCallback),r.addEventListener(B.TOUCH_DRAG,this._dragCallback),r.addEventListener(B.TOUCH_TAP,this._endCallback)},this._deactivateDraw=r=>{st.isInteractingWithTool=!1,r.removeEventListener(B.MOUSE_UP,this._endCallback),r.removeEventListener(B.MOUSE_DRAG,this._dragCallback),r.removeEventListener(B.MOUSE_MOVE,this._dragCallback),r.removeEventListener(B.MOUSE_CLICK,this._endCallback),r.removeEventListener(B.TOUCH_END,this._endCallback),r.removeEventListener(B.TOUCH_DRAG,this._dragCallback),r.removeEventListener(B.TOUCH_TAP,this._endCallback)},this.renderAnnotation=(r,a)=>{let i=!1;const{viewport:o}=r,{element:s}=o;let c=nr(this.getToolName(),s);if(!(c!=null&&c.length)||(c=this.filterInteractableAnnotationsForElement(s,c),!(c!=null&&c.length)))return i;const l={toolGroupId:this.toolGroupId,toolName:this.getToolName(),viewportId:r.viewport.id};for(let u=0;u<c.length;u++){const f=c[u],{annotationUID:v,data:g}=f,{points:d}=g.handles,m=d.map(D=>o.worldToCanvas(D));l.annotationUID=v;const{color:h,lineWidth:C,lineDash:p}=this.getAnnotationStyle({annotation:f,styleSpecifier:l});if(!o.getRenderingEngine())return console.warn("Rendering Engine has been destroyed"),i;const S=`${v}-rect`;Ch(a,v,"0",m[0],m[3],{color:h,lineDash:p,lineWidth:C},S),i=!0}return i},this.applyWindowLevelRegion=(r,a)=>{const i=Ae(a),{viewport:o}=i,s=hH(o),{data:c}=r,{points:l}=c.handles,u=l.map(T=>o.worldToCanvas(T)),f=u[0],v=u[3];let g=Math.min(f[0],v[0]),d=Math.min(f[1],v[1]),m=Math.abs(f[0]-v[0]),h=Math.abs(f[1]-v[1]);g=eC(g,0,s.width),d=eC(d,0,s.height),m=Math.floor(Math.min(m,Math.abs(s.width-g))),h=Math.floor(Math.min(h,Math.abs(s.height-d)));const C=dH(s,Math.round(g),Math.round(d),m,h),p=mH(C,s.minPixelValue,s.maxPixelValue);this.configuration.minWindowWidth===void 0&&(this.configuration.minWindowWidth=10);const S=Math.max(Math.abs(p.max-p.min),this.configuration.minWindowWidth),I=p.mean,D=o.getProperties().VOILUTFunction,E=Bl(S,I,D);o.setProperties({voiRange:E}),o.render()},this.cancel=()=>null,this.isPointNearTool=()=>null,this.toolSelectedCallback=()=>null,this.handleSelectedCallback=()=>null,this._activateModify=()=>null,this._deactivateModify=()=>null}}OH.toolName="WindowLevelRegion";class wH extends Xa{constructor(e={},n={supportedInteractionTypes:["Mouse","Touch"],configuration:{invert:!1,debounceIfNotLoaded:!0,loop:!1}}){super(e,n),this.deltaY=1}mouseWheelCallback(e){this._scroll(e)}mouseDragCallback(e){this._dragCallback(e)}touchDragCallback(e){this._dragCallback(e)}_dragCallback(e){this._scrollDrag(e)}_scrollDrag(e){const{deltaPoints:n,viewportId:r,renderingEngineId:a}=e.detail,{viewport:i}=Ka(r,a),{debounceIfNotLoaded:o,invert:s,loop:c}=this.configuration,l=n.canvas[1];let u;i instanceof yr&&(u=i.getVolumeId());const f=this._getPixelPerImage(i),v=l+this.deltaY;if(f)if(Math.abs(v)>=f){const g=Math.round(v/f);_1(i,{delta:s?-g:g,volumeId:u,debounceLoading:o,loop:c}),this.deltaY=v%f}else this.deltaY=v}_scroll(e){const{wheel:n,element:r}=e.detail,{direction:a}=n,{invert:i}=this.configuration,{viewport:o}=Ae(r),s=a*(i?-1:1);_1(o,{delta:s,debounceLoading:this.configuration.debounceIfNotLoaded,loop:this.configuration.loop,volumeId:o instanceof zr?o.getVolumeId():void 0,scrollSlabs:this.configuration.scrollSlabs})}_getPixelPerImage(e){const{element:n}=e,r=e.getNumberOfSlices();return Math.max(2,n.offsetHeight/Math.max(r,8))}}wH.toolName="StackScroll";function lMe(t,e){const[n,r]=t,[a,i]=e,o=Dr(Xe(),r,n),s=Dr(Xe(),a,i),c=Gt(o,s),l=Eo(o),u=Eo(s),f=c/(l*u);return Math.acos(f)*180/Math.PI}function uMe(t,e){const[n,r]=t,[a,i]=e,o=Ps(In(),r,n),s=Ps(In(),a,i),c=n5(o,s),l=MS(o),u=MS(s),f=c/(l*u);return Math.acos(f)*(180/Math.PI)}function Md(t,e){return t[0].length===3?lMe(t,e):uMe(t,e)}class PH extends Xa{constructor(e={},n={supportedInteractionTypes:["Mouse","Touch"]}){super(e,n),this.mouseWheelCallback=r=>{const{element:a,wheel:i}=r.detail,o=Ae(a),{viewport:s}=o,{invert:c}=this.configuration,l=i.direction*10*(c?-1:1);this.setAngle(s,l)},this.touchDragCallback=this._dragCallback.bind(this),this.mouseDragCallback=this._dragCallback.bind(this)}_dragCallback(e){const{element:n,currentPoints:r,startPoints:a}=e.detail,i=r.world,o=a.world,s=Ae(n),{viewport:c}=s,l=c.getCamera(),u=n.clientWidth,f=n.clientHeight,v=[u*.5,f*.5],g=c.canvasToWorld(v);let d=Md([o,g],[g,i]);const{viewPlaneNormal:m}=l,h=Dr(Xe(),g,o),C=Dr(Xe(),g,i),p=gr(Xe(),h,C);Gt(m,p)>0&&(d=-d),!Number.isNaN(d)&&this.setAngle(c,d)}setAngle(e,n){const{viewPlaneNormal:r,viewUp:a}=e.getCamera();if(e instanceof zr){const i=(n+360)%360*Math.PI/180,o=zt(new Float32Array(16));Ki(o,o,i,r);const s=un(Xe(),a,o);e.setCamera({viewUp:s})}else{const{rotation:i}=e.getViewPresentation();e.setViewPresentation({rotation:(i+n+360)%360})}e.render()}}PH.toolName="PlanarRotate";class AH extends Xa{constructor(e={},n={supportedInteractionTypes:["Mouse","Touch"],configuration:{zoomToCenter:!1,minZoomScale:.001,maxZoomScale:3e3,pinchToZoom:!0,pan:!0,invert:!1}}){super(e,n),this.preMouseDownCallback=r=>{const a=r.detail,{element:i,currentPoints:o}=a,s=o.world,l=Ae(i).viewport.getCamera(),{focalPoint:u}=l;this.initialMousePosWorld=s;let f=qt(u[0]-s[0],u[1]-s[1],u[2]-s[2]);return f=Ar(Xe(),f),this.dirVec=f,!1},this.preTouchStartCallback=r=>{if(!this.configuration.pinchToZoom)return this.preMouseDownCallback(r)},this._dragParallelProjection=(r,a,i,o=!1)=>{const{element:s,deltaPoints:c}=r.detail,l=o?r.detail.deltaDistance.canvas:c.canvas[1],u=[s.clientWidth,s.clientHeight],{parallelScale:f,focalPoint:v,position:g}=i,d=5/u[1],m=l*d*(this.configuration.invert?-1:1),h=(1-m)*f;let C=v,p=g;if(!this.configuration.zoomToCenter){const O=Si(v,this.initialMousePosWorld);p=Hn(Xe(),g,this.dirVec,-O*m),C=Hn(Xe(),v,this.dirVec,-O*m)}const S=a.getImageData();let I=[1,1,1];S&&(I=S.spacing);const{minZoomScale:D,maxZoomScale:E}=this.configuration,T=s.clientHeight*I[1]*.5,y=T/h;let M=h,_=!1;S&&(y<D?(M=T/D,_=!0):y>=E&&(M=T/E,_=!0)),a.setCamera({parallelScale:M,focalPoint:_?v:C,position:_?g:p})},this._dragPerspectiveProjection=(r,a,i,o=!1)=>{const{element:s,deltaPoints:c}=r.detail,l=o?r.detail.deltaDistance.canvas:c.canvas[1],u=[s.clientWidth,s.clientHeight],{position:f,focalPoint:v,viewPlaneNormal:g}=i,d=Cn.distance2BetweenPoints(f,v),m=Math.sqrt(d)/u[1],h=[-g[0],-g[1],-g[2]],C=this.configuration.invert?l/m:l*m;let p=C*h[0];f[0]+=p,v[0]+=p,p=C*h[1],f[1]+=p,v[1]+=p,p=C*h[2],f[2]+=p,v[2]+=p,a.setCamera({position:f,focalPoint:v})},this.initialMousePosWorld=[0,0,0],this.dirVec=[0,0,0],this.configuration.pinchToZoom?this.touchDragCallback=this._pinchCallback.bind(this):this.touchDragCallback=this._dragCallback.bind(this),this.mouseDragCallback=this._dragCallback.bind(this)}_pinchCallback(e){if(e.detail.currentPointsList.length>1){const{element:r,currentPoints:a}=e.detail,i=Ae(r),{viewport:o}=i,s=o.getCamera(),c=a.world,{focalPoint:l}=s;this.initialMousePosWorld=c;let u=qt(l[0]-c[0],l[1]-c[1],l[2]-c[2]);u=Ar(Xe(),u),this.dirVec=u,s.parallelProjection?this._dragParallelProjection(e,o,s,!0):this._dragPerspectiveProjection(e,o,s,!0),o.render()}this.configuration.pan&&this._panCallback(e)}_dragCallback(e){const{element:n}=e.detail,r=Ae(n),{viewport:a}=r,i=a.getCamera();i.parallelProjection?this._dragParallelProjection(e,a,i):this._dragPerspectiveProjection(e,a,i),a.render()}_panCallback(e){const{element:n,deltaPoints:r}=e.detail,a=Ae(n),i=r.world,o=a.viewport.getCamera(),{focalPoint:s,position:c}=o,l=[c[0]-i[0],c[1]-i[1],c[2]-i[2]],u=[s[0]-i[0],s[1]-i[1],s[2]-i[2]];a.viewport.setCamera({focalPoint:u,position:l}),a.viewport.render()}}AH.toolName="Zoom";class xH extends Xa{constructor(e={},n={supportedInteractionTypes:["Mouse","Touch"],configuration:{targetViewportIds:[]}}){super(e,n)}mouseClickCallback(e){const{element:n,currentPoints:r}=e.detail,a=Ae(n),{viewport:i,renderingEngine:o}=a,s=i.getVolumeId();if(!s)throw new Error("MIPJumpToClickTool: targetId is not a volumeId, you should only use MIPJumpToClickTool with a volumeId as the targetId");let c=-1/0;const l=(d,m)=>{if(d>c)return c=d,m},u=q_(i,r.world,s,l);if(!u||!u.length)return;const{targetViewportIds:f,toolGroupId:v}=this.configuration;o.getViewports().filter(d=>{if((f==null?void 0:f.indexOf(d.id))>=0)return!0;const m=la(d.id,o.id);return!!(v&&v===(m==null?void 0:m.id))}).forEach(d=>{d instanceof yr?d.jumpToWorld(u):console.warn("Cannot jump to specified world coordinates for a viewport that is not a VolumeViewport")})}}xH.toolName="MIPJumpToClickTool";const{RENDERING_DEFAULTS:JE}=fu;function fMe(){return"rgb(0, 200, 0)"}function vMe(){return!0}function gMe(){return!0}function dMe(){return!0}const zs={DRAG:1,ROTATE:2,SLAB:3};class RH extends Br{constructor(e={},n={supportedInteractionTypes:["Mouse"],configuration:{shadow:!0,viewportIndicators:!1,viewportIndicatorsConfig:{radius:5,x:null,y:null},autoPan:{enabled:!1,panSize:10},referenceLinesCenterGapRadius:20,filterActorUIDsToSetSlabThickness:[],slabThicknessBlendMode:I1.MAXIMUM_INTENSITY_BLEND,mobile:{enabled:!1,opacity:.8,handleRadius:9}}}){var r,a,i,o;super(e,n),this.toolCenter=[0,0,0],this.initializeViewport=({renderingEngineId:s,viewportId:c})=>{const l=Ka(c,s),{FrameOfReferenceUID:u,viewport:f}=l,{element:v}=f,{position:g,focalPoint:d,viewPlaneNormal:m}=f.getCamera();let h=this._getAnnotations(l);h=this.filterInteractableAnnotationsForElement(v,h),h!=null&&h.length&&sr(h[0].annotationUID);const C={highlighted:!1,metadata:{cameraPosition:[...g],cameraFocalPoint:[...d],FrameOfReferenceUID:u,toolName:this.getToolName()},data:{handles:{rotationPoints:[],slabThicknessPoints:[],toolCenter:this.toolCenter},activeOperation:null,activeViewportIds:[],viewportId:c}};return qn(C,v),{normal:m,point:f.canvasToWorld([f.canvas.clientWidth/2,f.canvas.clientHeight/2])}},this._getViewportsInfo=()=>Vi(this.toolGroupId).viewportsInfo,this.resetCrosshairs=()=>{const s=this._getViewportsInfo();for(const c of s){const{viewportId:l,renderingEngineId:u}=c,f=Ka(l,u),v=f.viewport;v.resetCamera({resetPan:!0,resetZoom:!0,resetToCenter:!0,resetRotation:!0,suppressEvents:!0}),v.resetSlabThickness();const{element:p}=v;let S=this._getAnnotations(f);S=this.filterInteractableAnnotationsForElement(p,S),S.length&&sr(S[0].annotationUID),v.render()}this._computeToolCenter(s)},this.computeToolCenter=()=>{const s=this._getViewportsInfo();this._computeToolCenter(s)},this._computeToolCenter=s=>{if(!s.length||s.length===1){console.warn("For crosshairs to operate, at least two viewports must be given.");return}const[c,l,u]=s,{normal:f,point:v}=this.initializeViewport(c),{normal:g,point:d}=this.initializeViewport(l);let m=[0,0,0],h=Xe();u?{normal:m,point:h}=this.initializeViewport(u):(Ra(h,v,d),Ia(h,h,.5),gr(m,f,g));const C=Bc(f,v),p=Bc(g,d),S=Bc(m,h);this.toolCenter=JU(C,p,S),qe(s.map(({viewportId:I})=>I))},this.addNewAnnotation=s=>{const c=s.detail,{element:l}=c,{currentPoints:u}=c,f=u.world,v=Ae(l),{viewport:g}=v;this._jump(v,f);const d=this._getAnnotations(v),m=this.filterInteractableAnnotationsForElement(g.element,d),{data:h}=m[0],{rotationPoints:C}=h.handles,p=[];for(let S=0;S<C.length-1;++S){const I=C[S][1],D=this._getReferenceLineControllable(I.id),E=this._getReferenceLineDraggableRotatable(I.id);!D||!E||(p.push(I.id),S++)}return h.activeViewportIds=[...p],h.handles.activeOperation=zs.DRAG,s.preventDefault(),Yt(l),this._activateModify(l),m[0]},this.cancel=()=>{console.log("Not implemented yet")},this.handleSelectedCallback=(s,c)=>{const l=s.detail,{element:u}=l;c.highlighted=!0,this._activateModify(u),Yt(u),s.preventDefault()},this.isPointNearTool=(s,c,l,u)=>!!this._pointNearTool(s,c,l,6),this.toolSelectedCallback=(s,c,l)=>{const u=s.detail,{element:f}=u;c.highlighted=!0,this._activateModify(f),Yt(f),s.preventDefault()},this.onCameraModified=s=>{var M;const c=s.detail,{element:l}=c,u=Ae(l),{renderingEngine:f}=u,v=u.viewport,g=this._getAnnotations(u),m=this.filterInteractableAnnotationsForElement(l,g)[0];if(!m)return;const h=v.getCamera(),C=m.metadata.cameraPosition,p=[0,0,0];Cn.subtract(h.position,C,p);const S=m.metadata.cameraFocalPoint,I=[0,0,0];Cn.subtract(h.focalPoint,S,I),m.metadata.cameraPosition=[...h.position],m.metadata.cameraFocalPoint=[...h.focalPoint];const D=this._getReferenceLineControllable(v.id),E=this._getReferenceLineDraggableRotatable(v.id);if(!gn(h.position,C,.001)&&D&&E){let _=!1;gn(p,I,.001)||(_=!0);const w=Math.abs(Cn.dot(p,h.viewPlaneNormal))<.01;!_&&!w&&(this.toolCenter[0]+=p[0],this.toolCenter[1]+=p[1],this.toolCenter[2]+=p[2])}(M=this.configuration.autoPan)!=null&&M.enabled&&la(v.id,f.id).getViewportIds().filter(w=>w!==v.id).forEach(w=>{this._autoPanViewportIfNecessary(w,f)});const y=Bt(l,this.getToolName(),!1);qe(y)},this.onResetCamera=s=>{this.resetCrosshairs()},this.mouseMoveCallback=(s,c)=>{const{element:l,currentPoints:u}=s.detail,f=u.canvas;let v=!1;for(let g=0;g<c.length;g++){const d=c[g];if(Ya(d.annotationUID))continue;const{data:m,highlighted:h}=d;if(!m.handles)continue;const C=m.handles.activeOperation,p=m.activeViewportIds&&m.activeViewportIds.length>0?[...m.activeViewportIds]:[];m.activeViewportIds=[],m.handles.activeOperation=null;const S=this.getHandleNearImagePoint(l,d,f,6);let I=!1;S?I=!0:I=this._pointNearTool(l,d,f,6),I&&!h||!I&&h?(d.highlighted=!h,v=!0):(m.handles.activeOperation!==C||!this._areViewportIdArraysEqual(m.activeViewportIds,p))&&(v=!0)}return v},this.filterInteractableAnnotationsForElement=(s,c)=>{if(!c||!c.length)return[];const l=Ae(s),{viewportId:u}=l;return c.filter(v=>v.data.viewportId===u)},this.renderAnnotation=(s,c)=>{let l=!1;const{viewport:u,renderingEngine:f}=s,{element:v}=u,g=this._getAnnotations(s),d=u.getCamera(),h=this.filterInteractableAnnotationsForElement(v,g)[0];if(!(g!=null&&g.length)||!(h!=null&&h.data))return l;const C=h.annotationUID,{clientWidth:p,clientHeight:S}=u.canvas,I=Math.sqrt(p*p+S*S),D=Math.min(p,S),E=h.data,T=u.worldToCanvas(this.toolCenter),y=this._filterAnnotationsByUniqueViewportOrientations(s,g),M=[],_=[0,0,p,S];y.forEach(R=>{const{data:L}=R;L.handles.toolCenter=this.toolCenter;const H=f.getViewport(L.viewportId),F=H.getCamera(),U=this._getReferenceLineControllable(H.id),V=this._getReferenceLineDraggableRotatable(H.id),X=this._getReferenceLineSlabThicknessControlsOn(H.id),{clientWidth:re,clientHeight:ue}=H.canvas,De=Math.sqrt(re*re+ue*ue),pe=[re*.5,ue*.5],Te=H.canvasToWorld(pe),Fe=[0,0,0];Cn.cross(d.viewPlaneNormal,F.viewPlaneNormal,Fe),Cn.normalize(Fe),Cn.multiplyScalar(Fe,De);const Ne=[0,0,0];Cn.add(Te,Fe,Ne);const Re=[0,0,0];Cn.subtract(Te,Fe,Re);const k=u.worldToCanvas(Ne),A=u.worldToCanvas(Te),b=In();_a(b,k,A),Nc(b,b);const N=In();Mc(N,b,I*100);const W=In();Mc(W,b,D*.4);const j=In();Mc(j,b,D*.2);const K=In(),ge=this.configuration.referenceLinesCenterGapRadius;Mc(K,b,y.length===2?ge:0);const ye=In(),we=In(),be=In(),Z=In();let ie=ap(T);(!V||!U)&&(ie=ap(A)),Ri(ye,ie,K),Ri(we,ie,N),_a(be,ie,K),_a(Z,ie,N),Xg(ye,we,_),Xg(be,Z,_);const he=In();_a(he,T,W);const se=In();Ri(se,T,W);let me=ap(T);!V&&X&&(me=ap(A));let fe=[...this.toolCenter];!V&&X&&(fe=[...Te]);const q=[0,0,0];Cn.subtract(Ne,Re,q),Cn.normalize(q);const{viewPlaneNormal:Pe}=d,{matrix:Le}=_i.buildFromDegree().rotate(90,Pe),Ue=[0,0,0];un(Ue,q,Le);const Me=H.getSlabThickness(),Be=[...Ue];Cn.multiplyScalar(Be,Me);const nt=[0,0,0];Cn.add(fe,Be,nt);const Ze=u.worldToCanvas(nt),at=In();_a(at,me,Ze);const Ot=In();_a(Ot,me,N),Ri(Ot,Ot,at);const Oe=In();Ri(Oe,me,N),Ri(Oe,Oe,at),Xg(Ot,Oe,_);const $e=In();Ri($e,me,N),_a($e,$e,at);const ht=In();_a(ht,me,N),_a(ht,ht,at),Xg($e,ht,_);const Ut=In(),Qt=In(),Rt=In(),Dn=In();_a(Ut,me,j),Ri(Ut,Ut,at),Ri(Qt,me,j),Ri(Qt,Qt,at),_a(Rt,me,j),_a(Rt,Rt,at),Ri(Dn,me,j),_a(Dn,Dn,at),M.push([H,ye,we,be,Z,Ot,Oe,$e,ht,he,se,Ut,Qt,Rt,Dn])});const O=[],w=[],x=this._getReferenceLineColor(u.id),P=x!==void 0?x:"rgb(200, 200, 200)";if(M.forEach((R,L)=>{var Fe,Ne,Re,k,A,b,N,W,j,K,ge,ye,we,be,Z,ie,he,se,me;const H=R[0],F=this._getReferenceLineColor(H.id),U=this._getReferenceLineControllable(H.id),V=this._getReferenceLineDraggableRotatable(H.id)||((Fe=this.configuration.mobile)==null?void 0:Fe.enabled),X=this._getReferenceLineSlabThicknessControlsOn(H.id)||((Ne=this.configuration.mobile)==null?void 0:Ne.enabled),re=E.activeViewportIds.find(fe=>fe===H.id);let ue=F!==void 0?F:"rgb(200, 200, 200)",De=1;const pe=E.handles.activeOperation!==null&&E.handles.activeOperation===zs.DRAG&&re;pe&&(De=2.5);let Te=`${L}`;if(U&&V?(Te=`${L}One`,tr(c,C,Te,R[1],R[2],{color:ue,lineWidth:De}),Te=`${L}Two`,tr(c,C,Te,R[3],R[4],{color:ue,lineWidth:De})):tr(c,C,Te,R[2],R[4],{color:ue,lineWidth:De}),U){ue=F!==void 0?F:"rgb(200, 200, 200)";const fe=E.handles.activeOperation===zs.ROTATE,q=[R[9],R[10]],Pe=[u.canvasToWorld(R[9]),H,R[1],R[2]],Le=[u.canvasToWorld(R[10]),H,R[3],R[4]];O.push(Pe,Le);const Ue=E.handles.activeOperation===zs.SLAB,Me=[R[11],R[12],R[13],R[14]],Be=[u.canvasToWorld(R[11]),H,R[5],R[6]],nt=[u.canvasToWorld(R[12]),H,R[5],R[6]],Ze=[u.canvasToWorld(R[13]),H,R[7],R[8]],at=[u.canvasToWorld(R[14]),H,R[7],R[8]];if(w.push(Be,nt,Ze,at),(pe||(Re=this.configuration.mobile)!=null&&Re.enabled)&&!fe&&!Ue&&V&&X){let Oe=`${L}One`;Hr(c,C,Oe,q,{color:ue,handleRadius:(k=this.configuration.mobile)!=null&&k.enabled?(A=this.configuration.mobile)==null?void 0:A.handleRadius:3,opacity:(b=this.configuration.mobile)!=null&&b.enabled?(N=this.configuration.mobile)==null?void 0:N.opacity:1,type:"circle"}),Oe=`${L}Two`,Hr(c,C,Oe,Me,{color:ue,handleRadius:(W=this.configuration.mobile)!=null&&W.enabled?(j=this.configuration.mobile)==null?void 0:j.handleRadius:3,opacity:(K=this.configuration.mobile)!=null&&K.enabled?(ge=this.configuration.mobile)==null?void 0:ge.opacity:1,type:"rect"})}else if(pe&&!fe&&!Ue&&V){const Oe=`${L}`;Hr(c,C,Oe,q,{color:ue,handleRadius:(ye=this.configuration.mobile)!=null&&ye.enabled?(we=this.configuration.mobile)==null?void 0:we.handleRadius:3,opacity:(be=this.configuration.mobile)!=null&&be.enabled?(Z=this.configuration.mobile)==null?void 0:Z.opacity:1,type:"circle"})}else if(re&&!fe&&!Ue&&X){const Oe=`${L}`;Hr(c,C,Oe,Me,{color:ue,handleRadius:(ie=this.configuration.mobile)!=null&&ie.enabled?(he=this.configuration.mobile)==null?void 0:he.handleRadius:3,opacity:(se=this.configuration.mobile)!=null&&se.enabled?(me=this.configuration.mobile)==null?void 0:me.opacity:1,type:"rect"})}else if(fe&&V){const Oe=`${L}`;Hr(c,C,Oe,q,{color:ue,handleRadius:2,fill:ue,type:"circle"})}else Ue&&re&&X&&Hr(c,C,Te,Me,{color:ue,handleRadius:2,fill:ue,type:"rect"});H.getSlabThickness()>.5&&X&&(Te=`${L}STOne`,tr(c,C,Te,R[5],R[6],{color:ue,width:1,lineDash:[2,3]}),Te=`${L}STTwo`,tr(c,C,Te,R[7],R[8],{color:ue,width:R,lineDash:[2,3]}))}}),l=!0,E.handles.rotationPoints=O,E.handles.slabThicknessPoints=w,this.configuration.viewportIndicators){const{viewportIndicatorsConfig:R}=this.configuration,L=(R==null?void 0:R.xOffset)||.95,H=(R==null?void 0:R.yOffset)||.05,F=[p*L,S*H],U=(R==null?void 0:R.circleRadius)||I*.01;Mo(c,C,"0",F,U,{color:P,fill:P})}return l},this._getAnnotations=s=>{const{viewport:c}=s,l=nr(this.getToolName(),c.element)||[],u=this._getViewportsInfo().map(({viewportId:v})=>v);return l.filter(v=>{const{data:g}=v;return u.includes(g.viewportId)})},this._onNewVolume=()=>{const s=this._getViewportsInfo();this._computeToolCenter(s)},this._areViewportIdArraysEqual=(s,c)=>s.length!==c.length?!1:(s.forEach(l=>{let u=!1;for(let f=0;f<c.length;++f)if(l===c[f]){u=!0;break}if(u===!1)return!1}),!0),this._getAnnotationsForViewportsWithDifferentCameras=(s,c)=>{const{viewportId:l,renderingEngine:u,viewport:f}=s,v=c.filter(C=>C.data.viewportId!==l);if(!v||!v.length)return[];const g=f.getCamera(),{viewPlaneNormal:d,position:m}=g;return v.filter(C=>{const{viewportId:p}=C.data,I=u.getViewport(p).getCamera();return!(gn(I.viewPlaneNormal,d,.01)&&gn(I.position,m,1))})},this._filterViewportWithSameOrientation=(s,c,l)=>{const{renderingEngine:u}=s,{data:f}=c,v=u.getViewport(f.viewportId),g=l.filter(C=>{const{data:p}=C,S=u.getViewport(p.viewportId);return this._getReferenceLineControllable(S.id)===!0});if(!g||!g.length)return[];const d=v.getCamera(),m=d.viewPlaneNormal;return Cn.normalize(m),g.filter(C=>{const{viewportId:p}=C.data,I=u.getViewport(p).getCamera(),D=I.viewPlaneNormal;return Cn.normalize(D),gn(m,D,.01)&&gn(d.viewUp,I.viewUp,.01)})},this._filterAnnotationsByUniqueViewportOrientations=(s,c)=>{const{renderingEngine:l,viewport:u}=s,v=u.getCamera().viewPlaneNormal;Cn.normalize(v);const g=c.filter(C=>{const{data:p}=C,S=l.getViewport(p.viewportId),I=this._getReferenceLineControllable(S.id);return u!==S&&I===!0}),d=[];for(let C=0;C<g.length;++C){const p=g[C],{viewportId:S}=p.data,D=l.getViewport(S).getCamera(),E=D.viewPlaneNormal;if(Cn.normalize(E),gn(v,E,.01)||jg(v,E,.01))continue;let T=!1;for(let y=0;y<d.length;++y){const M=d[y],{viewportId:_}=M.data,w=l.getViewport(_).getCamera();gn(w.viewPlaneNormal,D.viewPlaneNormal,.01)&&gn(w.position,D.position,1)&&(T=!0)}T||d.push(p)}const m=c.filter(C=>{const{data:p}=C,S=l.getViewport(p.viewportId),I=this._getReferenceLineControllable(S.id);return u!==S&&I!==!0});for(let C=0;C<m.length;++C){const p=m[C],{viewportId:S}=p.data,D=l.getViewport(S).getCamera(),E=D.viewPlaneNormal;if(Cn.normalize(E),gn(v,E,.01)||jg(v,E,.01))continue;let T=!1;for(let y=0;y<d.length;++y){const M=d[y],{viewportId:_}=M.data,w=l.getViewport(_).getCamera();gn(w.viewPlaneNormal,D.viewPlaneNormal,.01)&&gn(w.position,D.position,1)&&(T=!0)}T||d.push(p)}const h=this._getAnnotationsForViewportsWithDifferentCameras(s,c);for(let C=0;C<h.length;++C){const p=h[C];if(d.some(y=>y===p))continue;const{viewportId:S}=p.data,D=l.getViewport(S).getCamera(),E=D.viewPlaneNormal;if(Cn.normalize(E),gn(v,E,.01)||jg(v,E,.01))continue;let T=!1;for(let y=0;y<d.length;++y){const M=d[y],{viewportId:_}=M.data,w=l.getViewport(_).getCamera();gn(w.viewPlaneNormal,D.viewPlaneNormal,.01)&&gn(w.position,D.position,1)&&(T=!0)}T||d.push(p)}return d},this._checkIfViewportsRenderingSameScene=(s,c)=>{const l=s.getAllVolumeIds(),u=c.getAllVolumeIds();return l.length===u.length&&l.every(f=>u.includes(f))},this._jump=(s,c)=>{st.isInteractingWithTool=!0;const{viewport:l,renderingEngine:u}=s,f=this._getAnnotations(s),v=[0,0,0];Cn.subtract(c,this.toolCenter,v);const d=this._getAnnotationsForViewportsWithDifferentCameras(s,f).filter(m=>{const{data:h}=m,C=u.getViewport(h.viewportId),p=this._checkIfViewportsRenderingSameScene(l,C);return this._getReferenceLineControllable(C.id)&&this._getReferenceLineDraggableRotatable(C.id)&&p});return d.length===0?(st.isInteractingWithTool=!1,!1):(this._applyDeltaShiftToSelectedViewportCameras(u,d,v),st.isInteractingWithTool=!1,!0)},this._activateModify=s=>{var c;st.isInteractingWithTool=!((c=this.configuration.mobile)!=null&&c.enabled),s.addEventListener(B.MOUSE_UP,this._endCallback),s.addEventListener(B.MOUSE_DRAG,this._dragCallback),s.addEventListener(B.MOUSE_CLICK,this._endCallback),s.addEventListener(B.TOUCH_END,this._endCallback),s.addEventListener(B.TOUCH_DRAG,this._dragCallback),s.addEventListener(B.TOUCH_TAP,this._endCallback)},this._deactivateModify=s=>{st.isInteractingWithTool=!1,s.removeEventListener(B.MOUSE_UP,this._endCallback),s.removeEventListener(B.MOUSE_DRAG,this._dragCallback),s.removeEventListener(B.MOUSE_CLICK,this._endCallback),s.removeEventListener(B.TOUCH_END,this._endCallback),s.removeEventListener(B.TOUCH_DRAG,this._dragCallback),s.removeEventListener(B.TOUCH_TAP,this._endCallback)},this._endCallback=s=>{const c=s.detail,{element:l}=c;this.editData.annotation.data.handles.activeOperation=null,this.editData.annotation.data.activeViewportIds=[],this._deactivateModify(l),Mn(l),this.editData=null;const f=Bt(l,this.getToolName(),!1);qe(f)},this._dragCallback=s=>{const c=s.detail,l=c.deltaPoints.world;if(Math.abs(l[0])<.001&&Math.abs(l[1])<.001&&Math.abs(l[2])<.001)return;const{element:u}=c,f=Ae(u),{renderingEngine:v,viewport:g}=f,d=this._getAnnotations(f),h=this.filterInteractableAnnotationsForElement(u,d)[0];if(!h)return;const{handles:C}=h.data,{currentPoints:p}=s.detail,S=p.canvas;if(C.activeOperation===zs.DRAG){const D=this._getAnnotationsForViewportsWithDifferentCameras(f,d).filter(E=>{const{data:T}=E,y=v.getViewport(T.viewportId),M=this._getReferenceLineControllable(y.id),_=this._getReferenceLineDraggableRotatable(y.id);return M===!0&&_===!0&&h.data.activeViewportIds.find(O=>O===y.id)});this._applyDeltaShiftToSelectedViewportCameras(v,D,l)}else if(C.activeOperation===zs.ROTATE){const D=this._getAnnotationsForViewportsWithDifferentCameras(f,d).filter(L=>{const{data:H}=L,F=v.getViewport(H.viewportId),U=this._getReferenceLineControllable(F.id),V=this._getReferenceLineDraggableRotatable(F.id);return U===!0&&V===!0}),E=In(),T=In(),y=[this.toolCenter[0],this.toolCenter[1],this.toolCenter[2]],M=g.worldToCanvas(y),_=c.currentPoints.canvas,O=In();Ps(O,_,c.deltaPoints.canvas),Ps(E,O,M),Ps(T,_,M);let w=qZ(E,T);this._isClockWise(M,O,_)&&(w*=-1),w=Math.round(w*100)/100;const x=g.getCamera().viewPlaneNormal,{matrix:P}=_i.buildFromRadian().translate(y[0],y[1],y[2]).rotate(w,x).translate(-y[0],-y[1],-y[2]),R=[];D.forEach(L=>{const{data:H}=L;H.handles.toolCenter=y;const F=v.getViewport(H.viewportId),U=F.getCamera(),{viewUp:V,position:X,focalPoint:re}=U;V[0]+=X[0],V[1]+=X[1],V[2]+=X[2],un(re,re,P),un(X,X,P),un(V,V,P),V[0]-=X[0],V[1]-=X[1],V[2]-=X[2],F.setCamera({position:X,viewUp:V,focalPoint:re}),R.push(F.id)}),v.renderViewports(R)}else if(C.activeOperation===zs.SLAB){const D=this._getAnnotationsForViewportsWithDifferentCameras(f,d).filter(y=>{const{data:M}=y,_=v.getViewport(M.viewportId),O=this._getReferenceLineControllable(_.id),w=this._getReferenceLineSlabThicknessControlsOn(_.id);return O===!0&&w===!0&&h.data.activeViewportIds.find(x=>x===_.id)});if(D.length===0)return;const E=this._filterViewportWithSameOrientation(f,D[0],d),T=[];T.push(g.id),E.forEach(y=>{const{data:M}=y,_=v.getViewport(M.viewportId),w=_.getCamera().viewPlaneNormal,x=Cn.dot(l,w),P=[...w];if(Cn.multiplyScalar(P,x),Math.abs(P[0])>.001||Math.abs(P[1])>.001||Math.abs(P[2])>.001){const R=Math.sqrt(P[0]*P[0]+P[1]*P[1]+P[2]*P[2]),L=c.lastPoints.world,H=[0,0,0],F=[this.toolCenter[0],this.toolCenter[1],this.toolCenter[2]];if(!this._getReferenceLineDraggableRotatable(_.id)){const{rotationPoints:Ne}=this.editData.annotation.data.handles,Re=Ne.filter(k=>k[1].uid===_.id);if(Re.length===2){const k=g.canvasToWorld(Re[0][3]),A=g.canvasToWorld(Re[1][3]);Cn.add(k,A,F),Cn.multiplyScalar(F,.5)}}Cn.subtract(L,F,H);const V=Cn.dot(H,w),X=[...w];Cn.multiplyScalar(X,V);const re=[X[0],X[1],X[2]];Ar(re,re);const ue=[P[0],P[1],P[2]];Ar(ue,ue);let De=_.getSlabThickness();jg(re,ue,.001)?De-=R:De+=R,De=Math.abs(De),De=Math.max(JE.MINIMUM_SLAB_THICKNESS,De),this._pointNearReferenceLine(h,S,6,_)&&(De=JE.MINIMUM_SLAB_THICKNESS),la(_.id,v.id).getToolInstance(this.getToolName()).setSlabThickness(_,De),T.push(_.id)}}),v.renderViewports(T)}},this._pointNearReferenceLine=(s,c,l,u)=>{const{data:f}=s,{rotationPoints:v}=f.handles;for(let g=0;g<v.length-1;++g){const d=v[g][1];if(d.id!==u.id||!this._getReferenceLineControllable(d.id))continue;const h={start:{x:v[g][2][0],y:v[g][2][1]},end:{x:v[g][3][0],y:v[g][3][1]}},C=Li([h.start.x,h.start.y],[h.end.x,h.end.y],[c[0],c[1]]),p={start:{x:v[g+1][2][0],y:v[g+1][2][1]},end:{x:v[g+1][3][0],y:v[g+1][3][1]}},S=Li([p.start.x,p.start.y],[p.end.x,p.end.y],[c[0],c[1]]);if(C<=l||S<=l)return!0;g++}return!1},this._getReferenceLineColor=((r=e.configuration)==null?void 0:r.getReferenceLineColor)||fMe,this._getReferenceLineControllable=((a=e.configuration)==null?void 0:a.getReferenceLineControllable)||vMe,this._getReferenceLineDraggableRotatable=((i=e.configuration)==null?void 0:i.getReferenceLineDraggableRotatable)||gMe,this._getReferenceLineSlabThicknessControlsOn=((o=e.configuration)==null?void 0:o.getReferenceLineSlabThicknessControlsOn)||dMe}onSetToolActive(){const e=this._getViewportsInfo();this._unsubscribeToViewportNewVolumeSet(e),this._subscribeToViewportNewVolumeSet(e),this._computeToolCenter(e)}onSetToolPassive(){const e=this._getViewportsInfo();this._computeToolCenter(e)}onSetToolEnabled(){const e=this._getViewportsInfo();this._computeToolCenter(e)}onSetToolDisabled(){const e=this._getViewportsInfo();this._unsubscribeToViewportNewVolumeSet(e),e.forEach(({renderingEngineId:n,viewportId:r})=>{const a=Ka(r,n);if(!a)return;const i=this._getAnnotations(a);i!=null&&i.length&&i.forEach(o=>{sr(o.annotationUID)})})}getHandleNearImagePoint(e,n,r,a){const i=Ae(e),{viewport:o}=i;let s=this._getRotationHandleNearImagePoint(o,n,r,a);if(s!==null||(s=this._getSlabThicknessHandleNearImagePoint(o,n,r,a),s!==null))return s}_unsubscribeToViewportNewVolumeSet(e){e.forEach(({viewportId:n,renderingEngineId:r})=>{const{viewport:a}=Ka(n,r),{element:i}=a;i.removeEventListener(vt.VOLUME_VIEWPORT_NEW_VOLUME,this._onNewVolume)})}_subscribeToViewportNewVolumeSet(e){e.forEach(({viewportId:n,renderingEngineId:r})=>{const{viewport:a}=Ka(n,r),{element:i}=a;i.addEventListener(vt.VOLUME_VIEWPORT_NEW_VOLUME,this._onNewVolume)})}_autoPanViewportIfNecessary(e,n){const r=n.getViewport(e),{clientWidth:a,clientHeight:i}=r.canvas,o=r.worldToCanvas(this.toolCenter),s=this.configuration.autoPan.panSize,c=[o[0],o[1]];if(o[0]<0?c[0]=s:o[0]>a&&(c[0]=a-s),o[1]<0?c[1]=s:o[1]>i&&(c[1]=i-s),c[0]===o[0]&&c[1]===o[1])return;const l=r.canvasToWorld(c),u=[l[0]-this.toolCenter[0],l[1]-this.toolCenter[1],l[2]-this.toolCenter[2]],f=r.getCamera(),{focalPoint:v,position:g}=f,d=[g[0]-u[0],g[1]-u[1],g[2]-u[2]],m=[v[0]-u[0],v[1]-u[1],v[2]-u[2]];r.setCamera({focalPoint:m,position:d}),r.render()}setSlabThickness(e,n){let r;const{filterActorUIDsToSetSlabThickness:a}=this.configuration;a&&a.length>0&&(r=a);let i=this.configuration.slabThicknessBlendMode;n===JE.MINIMUM_SLAB_THICKNESS&&(i=I1.COMPOSITE),e.setBlendMode(i,r,!1),e.setSlabThickness(n,r)}_isClockWise(e,n,r){return(n[0]-e[0])*(r[1]-e[1])-(n[1]-e[1])*(r[0]-e[0])>0}_applyDeltaShiftToSelectedViewportCameras(e,n,r){n.forEach(a=>{this._applyDeltaShiftToViewportCamera(e,a,r)})}_applyDeltaShiftToViewportCamera(e,n,r){const{data:a}=n,i=e.getViewport(a.viewportId),o=i.getCamera(),s=o.viewPlaneNormal,c=Cn.dot(r,s),l=[...s];if(Cn.multiplyScalar(l,c),Math.abs(l[0])>.001||Math.abs(l[1])>.001||Math.abs(l[2])>.001){const u=[0,0,0],f=[0,0,0];Cn.add(o.focalPoint,l,u),Cn.add(o.position,l,f),i.setCamera({focalPoint:u,position:f}),i.render()}}_getRotationHandleNearImagePoint(e,n,r,a){const{data:i}=n,{rotationPoints:o}=i.handles;for(let s=0;s<o.length;s++){const c=o[s][0],l=o[s][1];if(!this._getReferenceLineControllable(l.id)||!this._getReferenceLineDraggableRotatable(l.id))continue;const v=e.worldToCanvas(c);if(sa(r,v)<a)return i.handles.activeOperation=zs.ROTATE,this.editData={annotation:n},c}return null}_getSlabThicknessHandleNearImagePoint(e,n,r,a){const{data:i}=n,{slabThicknessPoints:o}=i.handles;for(let s=0;s<o.length;s++){const c=o[s][0],l=o[s][1];if(!this._getReferenceLineControllable(l.id)||!this._getReferenceLineSlabThicknessControlsOn(l.id))continue;const v=e.worldToCanvas(c);if(sa(r,v)<a)return i.handles.activeOperation=zs.SLAB,i.activeViewportIds=[l.id],this.editData={annotation:n},c}return null}_pointNearTool(e,n,r,a){const i=Ae(e),{viewport:o}=i,{clientWidth:s,clientHeight:c}=o.canvas,l=Math.sqrt(s*s+c*c),{data:u}=n,{rotationPoints:f}=u.handles,{slabThicknessPoints:v}=u.handles,g=[];for(let d=0;d<f.length-1;++d){const m=f[d][1],h=this._getReferenceLineControllable(m.id),C=this._getReferenceLineDraggableRotatable(m.id);if(!h||!C)continue;const p={start:{x:f[d][2][0],y:f[d][2][1]},end:{x:f[d][3][0],y:f[d][3][1]}},S=Li([p.start.x,p.start.y],[p.end.x,p.end.y],[r[0],r[1]]),I={start:{x:f[d+1][2][0],y:f[d+1][2][1]},end:{x:f[d+1][3][0],y:f[d+1][3][1]}},D=Li([I.start.x,I.start.y],[I.end.x,I.end.y],[r[0],r[1]]);(S<=a||D<=a)&&(g.push(m.id),u.handles.activeOperation=zs.DRAG),d++}for(let d=0;d<v.length-1;++d){const m=v[d][1];if(g.find(x=>x===m.id))continue;const h=this._getReferenceLineControllable(m.id),C=this._getReferenceLineSlabThicknessControlsOn(m.id);if(!h||!C)continue;const p=v[d][2],S=v[d][3],I=In();Ri(I,p,S),Mc(I,I,.5);const D=In();_a(D,p,I),Nc(D,D);const E=In();Mc(E,D,l*.05);const T=In(),y=In();Ri(T,I,E),_a(y,I,E);const M={start:{x:T[0],y:T[1]},end:{x:p[0],y:p[1]}},_=Li([M.start.x,M.start.y],[M.end.x,M.end.y],[r[0],r[1]]),O={start:{x:y[0],y:y[1]},end:{x:S[0],y:S[1]}},w=Li([O.start.x,O.start.y],[O.end.x,O.end.y],[r[0],r[1]]);(_<=a||w<=a)&&(g.push(m.id),u.handles.activeOperation=null),d++}return u.activeViewportIds=[...g],this.editData={annotation:n},u.handles.activeOperation===zs.DRAG}}RH.toolName="Crosshairs";const e2="magnify-viewport";class bH extends Xa{constructor(e={},n={supportedInteractionTypes:["Mouse","Touch"],configuration:{magnifySize:10,magnifyWidth:250,magnifyHeight:250}}){super(e,n),this._hasBeenRemoved=!1,this.preMouseDownCallback=r=>{const a=r.detail,{element:i,currentPoints:o}=a,s=Ae(i),{viewport:c,renderingEngine:l}=s;if(!(c instanceof Xr))throw new Error("MagnifyTool only works on StackViewports");const u=this._getReferencedImageId(c);if(!u)throw new Error("MagnifyTool: No referenced image id found, reconstructed planes not supported yet");const f=Bt(i,this.getToolName());return this.editData={referencedImageId:u,viewportIdsToRender:f,enabledElement:s,renderingEngine:l,currentPoints:o},this._createMagnificationViewport(),this._activateDraw(i),Yt(i),r.preventDefault(),qe(f),!0},this.preTouchStartCallback=r=>{this.preMouseDownCallback(r)},this._createMagnificationViewport=()=>{const{enabledElement:r,referencedImageId:a,viewportIdsToRender:i,renderingEngine:o,currentPoints:s}=this.editData,{viewport:c}=r,{element:l}=c,u=c.getProperties(),{canvas:f,world:v}=s;let g;if(g=l.querySelector(".magnifyTool"),g===null){const m=document.createElement("div");m.classList.add("magnifyTool"),m.style.display="block",m.style.width=`${this.configuration.magnifyWidth}px`,m.style.height=`${this.configuration.magnifyHeight}px`,m.style.position="absolute",g=m,l.querySelector(".viewport-element").appendChild(m);const C={viewportId:e2,type:Kr.STACK,element:g};o.enableElement(C)}g.style.top=`${f[1]-this.configuration.magnifyHeight/2}px`,g.style.left=`${f[0]-this.configuration.magnifyWidth/2}px`;const d=o.getViewport(e2);d.setStack([a]).then(()=>{if(this._hasBeenRemoved)return;d.setProperties(u);const{parallelScale:m}=c.getCamera(),{focalPoint:h,position:C,viewPlaneNormal:p}=d.getCamera(),S=Math.sqrt(Math.pow(h[0]-C[0],2)+Math.pow(h[1]-C[1],2)+Math.pow(h[2]-C[2],2)),I=[v[0],v[1],v[2]],D=[I[0]+S*p[0],I[1]+S*p[1],I[2]+S*p[2]];d.setCamera({parallelScale:m*(1/this.configuration.magnifySize),focalPoint:I,position:D}),d.render()}),g.style.display="block",qe(i)},this._dragCallback=r=>{const a=r.detail,{deltaPoints:i,element:o,currentPoints:s}=a,c=i.world,l=s.canvas,u=Ae(o),{renderingEngine:f}=u,v=f.getViewport(e2),g=o.querySelector(".magnifyTool");if(!g)return;g.style.top=`${l[1]-this.configuration.magnifyHeight/2}px`,g.style.left=`${l[0]-this.configuration.magnifyWidth/2}px`;const{focalPoint:d,position:m}=v.getCamera(),h=[m[0]+c[0],m[1]+c[1],m[2]+c[2]],C=[d[0]+c[0],d[1]+c[1],d[2]+c[2]];v.setCamera({focalPoint:C,position:h}),v.render()},this._dragEndCallback=r=>{const{element:a}=r.detail,i=Ae(a),{renderingEngine:o}=i;o.disableElement(e2);const s=a.querySelector(".viewport-element"),c=s.querySelector(".magnifyTool");s.removeChild(c),this._deactivateDraw(a),Mn(a),this._hasBeenRemoved=!0},this._activateDraw=r=>{st.isInteractingWithTool=!0,this._hasBeenRemoved=!1,r.addEventListener(B.MOUSE_UP,this._dragEndCallback),r.addEventListener(B.MOUSE_DRAG,this._dragCallback),r.addEventListener(B.MOUSE_CLICK,this._dragEndCallback),r.addEventListener(B.TOUCH_END,this._dragEndCallback),r.addEventListener(B.TOUCH_DRAG,this._dragCallback)},this._deactivateDraw=r=>{st.isInteractingWithTool=!1,r.removeEventListener(B.MOUSE_UP,this._dragEndCallback),r.removeEventListener(B.MOUSE_DRAG,this._dragCallback),r.removeEventListener(B.MOUSE_CLICK,this._dragEndCallback),r.removeEventListener(B.TOUCH_END,this._dragEndCallback),r.removeEventListener(B.TOUCH_DRAG,this._dragCallback)}}_getReferencedImageId(e){const n=this.getTargetId(e);let r;return e instanceof Xr&&(r=n.split("imageId:")[1]),r}}bH.toolName="Magnify";const mMe="advancedMagnifyTool",hMe=125,{Events:Sl}=vs,QP=t=>t.uid!==t.referencedId;var Ay;(function(t){t.ShowZoomFactorsList="showZoomFactorsList"})(Ay||(Ay={}));const pMe="AdvancedMagnify",SMe=1-o0,dO=class dO extends Br{constructor(e={},n={supportedInteractionTypes:["Mouse","Touch"],configuration:{shadow:!0,magnifyingGlass:{radius:125,zoomFactor:3,zoomFactorList:[1.5,2,2.5,3,3.5,4,4.5,5],autoPan:{enabled:!0,padding:10}},actions:{showZoomFactorsList:{method:"showZoomFactorsList",bindings:[{mouseButton:ec.Secondary,modifierKey:mi.Shift}]}}}}){super(e,n),this.addNewAnnotation=r=>{const a=r.detail,{currentPoints:i,element:o}=a,s=Ae(o),{viewport:c,renderingEngine:l}=s,u=i.world,f=i.canvas,{magnifyingGlass:v}=this.configuration,{radius:g,zoomFactor:d,autoPan:m}=v,h=this._getCanvasHandlePoints(f,g),C=c.getCamera(),{viewPlaneNormal:p,viewUp:S}=C,I=this.getReferencedImageId(c,u,p,S),D=Cr(),E=Cr(),T=c.getFrameOfReferenceUID(),y={annotationUID:D,highlighted:!0,invalidated:!0,metadata:{toolName:this.getToolName(),viewPlaneNormal:[...p],viewUp:[...S],FrameOfReferenceUID:T,referencedImageId:I},data:{sourceViewportId:c.id,magnifyViewportId:E,zoomFactor:d,isCanvasAnnotation:!0,handles:{points:h,activeHandleIndex:null}}};this.magnifyViewportManager.createViewport(y,{magnifyViewportId:E,sourceEnabledElement:s,position:f,radius:g,zoomFactor:d,autoPan:{enabled:m.enabled,padding:m.padding,callback:_=>{const O=y.data.handles.points,{canvas:w}=_.delta;for(let x=0,P=O.length;x<P;x++){const R=O[x];R[0]+=w[0],R[1]+=w[1],y.invalidated=!0}}}}),qn(y,o);const M=Bt(o,this.getToolName());return r.preventDefault(),qe(M),y},this.onSetToolDisabled=()=>{this.magnifyViewportManager.dispose(),NI().forEach(a=>{a.metadata.toolName===this.getToolName()&&sr(a.annotationUID)})},this.isPointNearTool=(r,a,i,o)=>{const{data:s}=a,{points:c}=s.handles,l=c,u=l[0],f=l[2],v=l[3],g=Math.abs(f[1]-u[1])*.5,d=[v[0]+g,u[1]+g],m=$l([d,i]);return Math.abs(m-g)<o*2},this.toolSelectedCallback=(r,a)=>{const i=r.detail,{element:o}=i;a.highlighted=!0;const s=Bt(o,this.getToolName());this.editData={annotation:a,viewportIdsToRender:s},Yt(o),this._activateModify(o),qe(s),r.preventDefault()},this.handleSelectedCallback=(r,a,i)=>{const o=r.detail,{element:s}=o,{data:c}=a;a.highlighted=!0;const{points:l}=c.handles,u=l.findIndex(v=>v===i),f=Bt(s,this.getToolName());this.editData={annotation:a,viewportIdsToRender:f,handleIndex:u},this._activateModify(s),Yt(s),qe(f),r.preventDefault()},this._endCallback=r=>{const a=r.detail,{element:i}=a,{annotation:o,viewportIdsToRender:s,newAnnotation:c}=this.editData,{data:l}=o;l.handles.activeHandleIndex=null,this._deactivateModify(i),Mn(i),this.editData=null,this.isDrawing=!1,qe(s),c&&Ur(o)},this._dragDrawCallback=r=>{this.isDrawing=!0;const a=r.detail,{deltaPoints:i}=a,o=(i==null?void 0:i.canvas)??[0,0,0],{annotation:s,viewportIdsToRender:c}=this.editData,{points:l}=s.data.handles;l.forEach(u=>{u[0]+=o[0],u[1]+=o[1]}),s.invalidated=!0,this.editData.hasMoved=!0,qe(c)},this._dragModifyCallback=r=>{this.isDrawing=!0;const a=r.detail,{annotation:i,viewportIdsToRender:o,handleIndex:s}=this.editData,{data:c}=i;if(s===void 0){const{deltaPoints:l}=a,u=l.canvas;c.handles.points.forEach(v=>{v[0]+=u[0],v[1]+=u[1]}),i.invalidated=!0}else this._dragHandle(r),i.invalidated=!0;qe(o)},this._dragHandle=r=>{const a=r.detail,{annotation:i}=this.editData,{data:o}=i,{points:s}=o.handles,c=s,l=c[0],u=c[2],f=c[3],v=Math.abs(u[1]-l[1])*.5,g=[f[0]+v,l[1]+v],{currentPoints:d}=a,m=d.canvas,h=$l([g,m]),C=this._getCanvasHandlePoints(g,h);s[0]=C[0],s[1]=C[1],s[2]=C[2],s[3]=C[3]},this.cancel=r=>{if(!this.isDrawing)return;this.isDrawing=!1,this._deactivateModify(r),Mn(r);const{annotation:a,viewportIdsToRender:i,newAnnotation:o}=this.editData,{data:s}=a;return a.highlighted=!1,s.handles.activeHandleIndex=null,qe(i),o&&Ur(a),this.editData=null,a.annotationUID},this._activateModify=r=>{st.isInteractingWithTool=!0,r.addEventListener(B.MOUSE_UP,this._endCallback),r.addEventListener(B.MOUSE_DRAG,this._dragModifyCallback),r.addEventListener(B.MOUSE_CLICK,this._endCallback),r.addEventListener(B.TOUCH_END,this._endCallback),r.addEventListener(B.TOUCH_DRAG,this._dragModifyCallback),r.addEventListener(B.TOUCH_TAP,this._endCallback)},this._deactivateModify=r=>{st.isInteractingWithTool=!1,r.removeEventListener(B.MOUSE_UP,this._endCallback),r.removeEventListener(B.MOUSE_DRAG,this._dragModifyCallback),r.removeEventListener(B.MOUSE_CLICK,this._endCallback),r.removeEventListener(B.TOUCH_END,this._endCallback),r.removeEventListener(B.TOUCH_DRAG,this._dragModifyCallback),r.removeEventListener(B.TOUCH_TAP,this._endCallback)},this.renderAnnotation=(r,a)=>{let i=!1;const{viewport:o}=r,{element:s}=o;let c=nr(this.getToolName(),s);if(!(c!=null&&c.length))return i;c=c==null?void 0:c.filter(f=>f.data.sourceViewportId===o.id);const l=this.filterInteractableAnnotationsForElement(s,c);if(!(l!=null&&l.length))return i;const u={toolGroupId:this.toolGroupId,toolName:this.getToolName(),viewportId:r.viewport.id};for(let f=0;f<l.length;f++){const v=l[f],{annotationUID:g,data:d}=v,{magnifyViewportId:m,zoomFactor:h,handles:C}=d,{points:p,activeHandleIndex:S}=C;u.annotationUID=g,this.getStyle("lineWidth",u,v),this.getStyle("lineDash",u,v);const I=this.getStyle("color",u,v),D=p,E=D[0],T=D[2],y=D[3],M=Math.abs(T[1]-E[1])*.5,_=[y[0]+M,E[1]+M];if(!o.getRenderingEngine())return console.warn("Rendering Engine has been destroyed"),i;let O;if(!Gi(g))continue;!Ya(g)&&!this.editData&&S!==null&&(O=[D[S]]),O&&Hr(a,g,"0",O,{color:I});const w=`${g}-advancedMagnify`;Mo(a,g,"0",_,M,{color:I,lineWidth:5},w);const P=this.magnifyViewportManager.getViewport(m);P.position=_,P.radius=M,P.zoomFactor=h,P.update(),i=!0}return i},this._getCanvasHandlePoints=(r,a)=>[[r[0],r[1]-a,0],[r[0]+a,r[1],0],[r[0],r[1]+a,0],[r[0]-a,r[1],0]],this.magnifyViewportManager=Rf.getInstance()}showZoomFactorsList(e,n){const{element:r,currentPoints:a}=e.detail,i=Ae(r),{viewport:o}=i,{canvas:s}=a,c=r.querySelector(":scope .viewport-element"),l=n.data.zoomFactor,u=()=>f.parentElement.removeChild(f),f=this._getZoomFactorsListDropdown(l,v=>{v!==void 0&&(n.data.zoomFactor=Number.parseFloat(v),n.invalidated=!0),u(),o.render()});Object.assign(f.style,{left:`${s[0]}px`,top:`${s[1]}px`}),c.appendChild(f),f.focus()}_getZoomFactorsListDropdown(e,n){const{zoomFactorList:r}=this.configuration.magnifyingGlass,a=document.createElement("select");return a.size=5,Object.assign(a.style,{width:"50px",position:"absolute"}),["mousedown","mouseup","mousemove","click"].forEach(i=>{a.addEventListener(i,o=>o.stopPropagation())}),a.addEventListener("change",i=>{i.stopPropagation(),n(a.value)}),a.addEventListener("keydown",i=>{var s;((i.keyCode??i.which===27)||((s=i.key)==null?void 0:s.toLowerCase())==="escape")&&(i.stopPropagation(),n())}),r.forEach(i=>{const o=document.createElement("option");o.label=i,o.title=`Zoom factor ${i.toFixed(1)}`,o.value=i,o.defaultSelected=i===e,a.add(o)}),a}};dO.Actions=Ay;let ym=dO;class Rf{constructor(){this.createViewport=(e,n)=>{const{magnifyViewportId:r,sourceEnabledElement:a,position:i,radius:o,zoomFactor:s,autoPan:c}=n,{viewport:l}=a,{element:u}=l,f=new CMe({magnifyViewportId:r,sourceEnabledElement:a,radius:o,position:i,zoomFactor:s,autoPan:c});return this._addSourceElementEventListener(u),this._magnifyViewportsMap.set(f.viewportId,{annotation:e,magnifyViewport:f,magnifyViewportInfo:n}),f},this._annotationRemovedCallback=e=>{const{annotation:n}=e.detail;n.metadata.toolName===pMe&&this.destroyViewport(n.data.magnifyViewportId)},this._newStackImageCallback=e=>{const{viewportId:n,imageId:r}=e.detail,a=this._getMagnifyViewportsMapEntriesBySourceViewportId(n),{viewport:i}=wr(n);i.stackActorReInitialized&&this._reset(n),a.forEach(({annotation:o})=>{o.metadata.referencedImageId=r,o.invalidated=!0})},this._newVolumeImageCallback=e=>{const{renderingEngineId:n,viewportId:r}=e.detail,i=da(n).getViewport(r),{viewPlaneNormal:o}=i.getCamera();this._getMagnifyViewportsMapEntriesBySourceViewportId(r).forEach(({annotation:c})=>{const{viewPlaneNormal:l}=c.metadata;if(!(Math.abs(Gt(l,o))>SMe))return;const{handles:f}=c.data,v=i.canvasToWorld([0,0]),g=Dr(Xe(),v,f.points[0]),d=Gt(g,o),m=Ia(Xe(),o,d);for(let h=0,C=f.points.length;h<C;h++){const p=f.points[h];p[0]+=m[0],p[1]+=m[1],p[2]+=m[2]}c.invalidated=!0})},this._magnifyViewportsMap=new Map,this._initialize()}static getInstance(){return Rf._singleton=Rf._singleton??new Rf,Rf._singleton}getViewport(e){var n;return(n=this._magnifyViewportsMap.get(e))==null?void 0:n.magnifyViewport}dispose(){this._removeEventListeners(),this._destroyViewports()}destroyViewport(e){const n=this._magnifyViewportsMap.get(e);if(n){const{magnifyViewport:r}=n,{viewport:a}=r.sourceEnabledElement,{element:i}=a;this._removeSourceElementEventListener(i),r.dispose(),this._magnifyViewportsMap.delete(e)}}_destroyViewports(){Array.from(this._magnifyViewportsMap.keys()).forEach(n=>this.destroyViewport(n))}_getMagnifyViewportsMapEntriesBySourceViewportId(e){return Array.from(this._magnifyViewportsMap.values()).filter(({magnifyViewport:r})=>{const{viewport:a}=r.sourceEnabledElement;return a.id===e})}_reset(e){this._getMagnifyViewportsMapEntriesBySourceViewportId(e).forEach(({magnifyViewport:r,annotation:a,magnifyViewportInfo:i})=>{this.destroyViewport(r.viewportId);const o=wr(e);this.createViewport(a,{...i,sourceEnabledElement:{...o}})})}_addEventListeners(){ot.addEventListener(B.ANNOTATION_REMOVED,this._annotationRemovedCallback)}_removeEventListeners(){ot.removeEventListener(B.ANNOTATION_REMOVED,this._annotationRemovedCallback)}_addSourceElementEventListener(e){e.addEventListener(Sl.STACK_NEW_IMAGE,this._newStackImageCallback);const n=a=>{const{viewportId:i}=a.detail;this._reset(i)};e.addEventListener(Sl.VIEWPORT_NEW_IMAGE_SET,n);const r=a=>{const{viewportId:i}=a.detail;this._reset(i)};e.addEventListener(Sl.VOLUME_VIEWPORT_NEW_VOLUME,r),e.addEventListener(Sl.VOLUME_NEW_IMAGE,this._newVolumeImageCallback),e.newStackHandler=n,e.newVolumeHandler=r}_removeSourceElementEventListener(e){e.removeEventListener(Sl.STACK_NEW_IMAGE,this._newStackImageCallback),e.removeEventListener(Sl.VOLUME_NEW_IMAGE,this._newVolumeImageCallback),e.removeEventListener(Sl.VIEWPORT_NEW_IMAGE_SET,e.newStackHandler),e.removeEventListener(Sl.VOLUME_VIEWPORT_NEW_VOLUME,e.newVolumeHandler),delete e.newStackHandler,delete e.newVolumeHandler}_initialize(){this._addEventListeners()}}class CMe{constructor({magnifyViewportId:e,sourceEnabledElement:n,radius:r=hMe,position:a=[0,0],zoomFactor:i,autoPan:o}){this._enabledElement=null,this._sourceToolGroup=null,this._magnifyToolGroup=null,this._isViewportReady=!1,this._radius=0,this._resized=!1,this._canAutoPan=!1,this._viewportId=e??Cr(),this._sourceEnabledElement=n,this._autoPan=o,this.radius=r,this.position=a,this.zoomFactor=i,this.visible=!0,this._browserMouseDownCallback=this._browserMouseDownCallback.bind(this),this._browserMouseUpCallback=this._browserMouseUpCallback.bind(this),this._handleToolModeChanged=this._handleToolModeChanged.bind(this),this._mouseDragCallback=this._mouseDragCallback.bind(this),this._resizeViewportAsync=BI(this._resizeViewport.bind(this),1),this._initialize()}get sourceEnabledElement(){return this._sourceEnabledElement}get viewportId(){return this._viewportId}get radius(){return this._radius}set radius(e){Math.abs(this._radius-e)>1e-5&&(this._radius=e,this._resized=!0)}update(){const{radius:e,position:n,visible:r}=this,{viewport:a}=this._enabledElement,{element:i}=a,o=2*e,[s,c]=n;this._resized&&(this._resizeViewportAsync(),this._resized=!1),Object.assign(i.style,{display:r?"block":"hidden",width:`${o}px`,height:`${o}px`,left:`${-e}px`,top:`${-e}px`,transform:`translate(${s}px, ${c}px)`}),this._isViewportReady&&(this._syncViewports(),a.render())}dispose(){const{viewport:e}=this._enabledElement,{element:n}=e,r=e.getRenderingEngine();this._removeEventListeners(n),r.disableElement(e.id),n.parentNode&&n.parentNode.removeChild(n)}_handleToolModeChanged(e){var s;const{_magnifyToolGroup:n}=this,{toolGroupId:r,toolName:a,mode:i,toolBindingsOptions:o}=e.detail;if(((s=this._sourceToolGroup)==null?void 0:s.id)===r)switch(i){case vr.Active:n.setToolActive(a,o);break;case vr.Passive:n.setToolPassive(a);break;case vr.Enabled:n.setToolEnabled(a);break;case vr.Disabled:n.setToolDisabled(a);break;default:throw new Error(`Unknow tool mode (${i})`)}}_inheritBorderRadius(e){const n=e.querySelector(".viewport-element"),r=e.querySelector(".cornerstone-canvas");n.style.borderRadius="inherit",r.style.borderRadius="inherit"}_createViewportNode(){const e=document.createElement("div"),{radius:n}=this,r=n*2;return e.classList.add(mMe),Object.assign(e.style,{display:"block",width:`${r}px`,height:`${r}px`,position:"absolute",overflow:"hidden",borderRadius:"50%",boxSizing:"border-box",left:`${-n}px`,top:`${-n}px`,transform:"translate(-1000px, -1000px)"}),e}_convertZoomFactorToParallelScale(e,n,r){const{parallelScale:a}=e.getCamera(),i=n.canvas.offsetWidth/e.canvas.offsetWidth;return a*(1/r)*i}_isStackViewport(e){return"setStack"in e}_isVolumeViewport(e){return"addVolumes"in e}_cloneToolGroups(e,n){const r=e.getActors(),a=`${n.id}-toolGroup`,i=la(e.id,e.renderingEngineId),o=i.clone(a,s=>{const c=i.getToolInstance(s);return c instanceof Br&&!(c instanceof ym)});return o.addViewport(n.id,n.renderingEngineId),r.filter(QP).forEach(s=>{jv(this.viewportId,[{segmentationId:s.referencedId,type:Ft.Labelmap}])}),{sourceToolGroup:i,magnifyToolGroup:o}}_cloneStack(e,n){const r=e.getImageIds();n.setStack(r).then(()=>{this._isViewportReady=!0,this.update()})}_cloneVolumes(e,n){const a=e.getActors().filter(i=>!QP(i)).map(i=>({volumeId:i.uid}));return n.setVolumes(a).then(()=>{this._isViewportReady=!0,this.update()}),n}_cloneViewport(e,n){const{viewportId:r}=this,a=e.getRenderingEngine(),{options:i}=e,o={element:n,viewportId:r,type:e.type,defaultOptions:{...i}};a.enableElement(o);const s=a.getViewport(r);this._isStackViewport(e)?this._cloneStack(e,s):this._isVolumeViewport(e)&&this._cloneVolumes(e,s),this._inheritBorderRadius(n);const c=this._cloneToolGroups(e,s);this._sourceToolGroup=c.sourceToolGroup,this._magnifyToolGroup=c.magnifyToolGroup}_cancelMouseEventCallback(e){e.stopPropagation(),e.preventDefault()}_browserMouseUpCallback(e){const{element:n}=this._enabledElement.viewport;document.removeEventListener("mouseup",this._browserMouseUpCallback),n.addEventListener("mouseup",this._cancelMouseEventCallback),n.addEventListener("mousemove",this._cancelMouseEventCallback)}_browserMouseDownCallback(e){var r;const{element:n}=this._enabledElement.viewport;this._canAutoPan=!!((r=e.target)!=null&&r.closest(".advancedMagnifyTool")),document.addEventListener("mouseup",this._browserMouseUpCallback),n.removeEventListener("mouseup",this._cancelMouseEventCallback),n.removeEventListener("mousemove",this._cancelMouseEventCallback)}_mouseDragCallback(e){if(!st.isInteractingWithTool)return;const{_autoPan:n}=this;if(!n.enabled||!this._canAutoPan)return;const{currentPoints:r}=e.detail,{viewport:a}=this._enabledElement,{canvasToWorld:i}=a,{canvas:o}=r,{radius:s}=this,c=[s,s],l=bs(c,o),u=s-n.padding;if(l<=u)return;const f=l-u,v=Ps(In(),o,c);Nc(v,v),Mc(v,v,f);const g=Ri(In(),this.position,v),d=i(this.position),m=i(g),h=Dr(Xe(),m,d),C={points:{currentPosition:{canvas:this.position,world:d},newPosition:{canvas:g,world:m}},delta:{canvas:v,world:h}};n.callback(C)}_addBrowserEventListeners(e){document.addEventListener("mousedown",this._browserMouseDownCallback,!0),e.addEventListener("mousedown",this._cancelMouseEventCallback),e.addEventListener("mouseup",this._cancelMouseEventCallback),e.addEventListener("mousemove",this._cancelMouseEventCallback),e.addEventListener("dblclick",this._cancelMouseEventCallback)}_removeBrowserEventListeners(e){document.removeEventListener("mousedown",this._browserMouseDownCallback,!0),document.removeEventListener("mouseup",this._browserMouseUpCallback),e.removeEventListener("mousedown",this._cancelMouseEventCallback),e.removeEventListener("mouseup",this._cancelMouseEventCallback),e.removeEventListener("mousemove",this._cancelMouseEventCallback),e.removeEventListener("dblclick",this._cancelMouseEventCallback)}_addEventListeners(e){ot.addEventListener(B.TOOL_MODE_CHANGED,this._handleToolModeChanged),e.addEventListener(B.MOUSE_MOVE,this._mouseDragCallback),e.addEventListener(B.MOUSE_DRAG,this._mouseDragCallback),this._addBrowserEventListeners(e)}_removeEventListeners(e){ot.removeEventListener(B.TOOL_MODE_CHANGED,this._handleToolModeChanged),e.addEventListener(B.MOUSE_MOVE,this._mouseDragCallback),e.addEventListener(B.MOUSE_DRAG,this._mouseDragCallback),this._removeBrowserEventListeners(e)}_initialize(){const{_sourceEnabledElement:e}=this,{viewport:n}=e,{canvas:r}=n,a=this._createViewportNode();r.parentNode.appendChild(a),this._addEventListeners(a),this._cloneViewport(n,a),this._enabledElement=Ae(a)}_syncViewportsCameras(e,n){const r=e.canvasToWorld(this.position),a=this._convertZoomFactorToParallelScale(e,n,this.zoomFactor),{focalPoint:i,position:o,viewPlaneNormal:s}=n.getCamera(),c=Math.sqrt(Math.pow(i[0]-o[0],2)+Math.pow(i[1]-o[1],2)+Math.pow(i[2]-o[2],2)),l=[r[0],r[1],r[2]],u=[l[0]+c*s[0],l[1]+c*s[1],l[2]+c*s[2]];n.setCamera({parallelScale:a,focalPoint:l,position:u})}_syncStackViewports(e,n){n.setImageIdIndex(e.getCurrentImageIdIndex())}_syncViewports(){const{viewport:e}=this._sourceEnabledElement,{viewport:n}=this._enabledElement,r=e.getProperties();n.getImageData()&&(n.setProperties(r),this._syncViewportsCameras(e,n),this._isStackViewport(e)&&this._syncStackViewports(e,n),this._syncViewportsCameras(e,n),n.render())}_resizeViewport(){const{viewport:e}=this._enabledElement;e.getRenderingEngine().resize()}}ym.toolName="AdvancedMagnify";const{EPSILON:e3}=fu;class NH extends du{constructor(e={},n={supportedInteractionTypes:["Mouse","Touch"],configuration:{sourceViewportId:"",enforceSameFrameOfReference:!0,showFullDimension:!1}}){super(e,n),this.editData=null,this._init=()=>{var g;const a=to()[0];if(!a)return;let i=a.getViewports();i=jI(i,this.getToolName());const o=a.getViewport(this.configuration.sourceViewportId);if(!(o!=null&&o.getImageData()))return;const{element:s}=o,{viewUp:c,viewPlaneNormal:l}=o.getCamera(),u=JS(o);let f=(g=this.editData)==null?void 0:g.annotation;const v=o.getFrameOfReferenceUID();if(f)this.editData.annotation.data.handles.points=u;else{const d={highlighted:!0,invalidated:!0,metadata:{toolName:this.getToolName(),viewPlaneNormal:[...l],viewUp:[...c],FrameOfReferenceUID:v,referencedImageId:null},data:{handles:{points:u}}};qn(d,s),f=d}this.editData={sourceViewportId:o.id,renderingEngine:a,annotation:f},qe(i.filter(d=>d.id!==o.id).map(d=>d.id))},this.onSetToolEnabled=()=>{this._init()},this.onSetToolConfiguration=()=>{this._init()},this.onCameraModified=r=>{this._init()},this.renderAnnotation=(r,a)=>{var V,X;const{viewport:i}=r;if(!this.editData)return!1;const{annotation:o,sourceViewportId:s}=this.editData;let c=!1;const{viewport:l}=wr(s)||{};if(!l||l.id===i.id||!o||!((X=(V=o==null?void 0:o.data)==null?void 0:V.handles)!=null&&X.points)||this.configuration.enforceSameFrameOfReference&&l.getFrameOfReferenceUID()!==i.getFrameOfReferenceUID())return c;const u={toolGroupId:this.toolGroupId,toolName:this.getToolName(),viewportId:r.viewport.id},f=o.data.handles.points[0],v=o.data.handles.points[1],g=o.data.handles.points[2],d=o.data.handles.points[3],{focalPoint:m,viewPlaneNormal:h,viewUp:C}=i.getCamera(),{viewPlaneNormal:p}=l.getCamera();if(this.isParallel(h,p))return c;const S=Bc(h,m),I=[f,g,v,d],D=[f,v,g,d];let E=I,T=fr(Xe(),I[0],I[1]);T=Ar(Xe(),T);let y=fr(Xe(),I[2],I[0]);y=Ar(Xe(),y);const M=gr(Xe(),T,y);if(this.isParallel(M,h))return c;this.isPerpendicular(T,h)&&(E=D);const _=uv(E[0],E[1],S),O=uv(E[2],E[3],S),{annotationUID:w}=o;u.annotationUID=w;const x=this.getStyle("lineWidth",u,o),P=this.getStyle("lineDash",u,o),R=this.getStyle("color",u,o),L=this.getStyle("shadow",u,o);let H=[_,O].map(re=>i.worldToCanvas(re));if(this.configuration.showFullDimension&&(H=this.handleFullDimension(i,_,h,C,O,H)),H.length<2)return c;const F=`${w}-line`;return tr(a,w,"1",H[0],H[1],{color:R,width:x,lineDash:P,shadow:L},F),c=!0,c},this.isPerpendicular=(r,a)=>{const i=Gt(r,a);return Math.abs(i)<e3}}handleFullDimension(e,n,r,a,i,o){e.getRenderingEngine();const s=this.getTargetId(e),c=this.getTargetImageData(s),l=this.getReferencedImageId(e,n,r,a);if(l&&c)try{const{imageData:u,dimensions:f}=c,[v,g,d,m]=[u.indexToWorld([0,0,0]),u.indexToWorld([f[0]-1,0,0]),u.indexToWorld([f[0]-1,f[1]-1,0]),u.indexToWorld([0,f[1]-1,0])].map(p=>QT(l,p)),[h,C]=[n,i].map(p=>QT(l,p));o=[[v,g],[g,d],[m,d],[v,m]].map(([p,S])=>this.intersectInfiniteLines(p,S,h,C)).filter(p=>p&&this.isInBound(p,f)).map(p=>{const S=_F(l,p);return e.worldToCanvas(S)})}catch(u){console.log(u)}return o}intersectInfiniteLines(e,n,r,a){const[i,o]=e,[s,c]=n,[l,u]=r,[f,v]=a,g=c-o,d=i-s,m=s*o-i*c,h=v-u,C=l-f,p=f*u-l*v;if(Math.abs(g*C-h*d)<e3)return;const S=(d*p-C*m)/(g*C-h*d),I=(h*m-g*p)/(g*C-h*d);return[S,I]}isParallel(e,n){return Math.abs(Gt(e,n))>1-e3}isInBound(e,n){return e[0]>=0&&e[0]<=n[0]&&e[1]>=0&&e[1]<=n[1]}}NH.toolName="ReferenceLines";const{EPSILON:KP}=fu;class LH extends du{constructor(e={},n={supportedInteractionTypes:["Mouse","Touch"],configuration:{sourceImageIds:[]}}){super(e,n),this.onSetToolEnabled=()=>{this._init()},this.onSetToolActive=()=>{this._init()},this._init=()=>{const r=this.configuration.sourceImageIds;if(!(r!=null&&r.length)){console.warn("OverlayGridTool: No sourceImageIds provided in configuration");return}const a=Lt("imagePlaneModule",r[0]);if(!a){console.warn("OverlayGridTool: No imagePlaneModule found for sourceImageIds");return}const{frameOfReferenceUID:i}=a,o=Vi(this.toolGroupId).viewportsInfo;if(!(o!=null&&o.length)){console.warn("OverlayGridTool: No viewports found");return}const s=nr(this.getToolName(),i);if(!(s!=null&&s.length)){const c=r.map(u=>this.calculateImageIdPointSets(u)),l={highlighted:!0,invalidated:!0,metadata:{toolName:this.getToolName(),FrameOfReferenceUID:i,referencedImageId:null},data:{viewportData:new Map,pointSets:c}};qn(l,i)}qe(o.map(({viewportId:c})=>c))},this.calculateImageIdPointSets=r=>{const{imagePositionPatient:a,rows:i,columns:o,rowCosines:s,columnCosines:c,rowPixelSpacing:l,columnPixelSpacing:u}=Lt("imagePlaneModule",r),f=[...a],v=[...a],g=[...a],d=[...a];return Hn(v,a,c,o*u),Hn(g,a,s,i*l),Hn(d,g,c,o*u),{pointSet1:[f,g,v,d],pointSet2:[f,v,g,d]}},this.renderAnnotation=(r,a)=>{const i=this.configuration.sourceImageIds;let o=!1;if(!(i!=null&&i.length))return o;const{viewport:s,FrameOfReferenceUID:c}=r;if(s.getImageIds().length<2)return o;const u=nr(this.getToolName(),c);if(!(u!=null&&u.length))return o;const f=u[0],{annotationUID:v}=f,{focalPoint:g,viewPlaneNormal:d}=s.getCamera(),m={toolGroupId:this.toolGroupId,toolName:this.getToolName(),viewportId:r.viewport.id},h=this.getImageIdNormal(i[0]);if(this.isParallel(d,h))return o;const C=Bc(d,g),p=f.data.pointSets,S=f.data.viewportData;for(let I=0;I<i.length;I++){const{pointSet1:D,pointSet2:E}=p[I],T=S.get(s.id)||this.initializeViewportData(S,s.id);if(!T.pointSetsToUse[I]){let H=D,F=fr(Xe(),D[0],D[1]);F=Ar(Xe(),F),this.isPerpendicular(F,d)&&(H=E),T.pointSetsToUse[I]=H,T.lineStartsWorld[I]=uv(H[0],H[1],C),T.lineEndsWorld[I]=uv(H[2],H[3],C)}const y=T.lineStartsWorld[I],M=T.lineEndsWorld[I];m.annotationUID=v;const _=this.getStyle("lineWidth",m,f),O=this.getStyle("lineDash",m,f),w=this.getStyle("color",m,f),x=this.getStyle("shadow",m,f),P=[y,M].map(H=>s.worldToCanvas(H)),R=`${v}-line`,L=`${I}`;tr(a,v,L,P[0],P[1],{color:w,width:_,lineDash:O,shadow:x},R)}return o=!0,o},this.initializeViewportData=(r,a)=>(r.set(a,{pointSetsToUse:[],lineStartsWorld:[],lineEndsWorld:[]}),r.get(a)),this.isPerpendicular=(r,a)=>{const i=Gt(r,a);return Math.abs(i)<KP}}isParallel(e,n){return Math.abs(Gt(e,n))>1-KP}getImageIdNormal(e){const{imageOrientationPatient:n}=Lt("imagePlaneModule",e),r=qt(n[0],n[1],n[2]),a=qt(n[3],n[4],n[5]);return gr(Xe(),r,a)}}LH.toolName="OverlayGrid";class UH extends du{constructor(e={},n={configuration:{opacity:.5}}){super(e,n),this._init=()=>{var s;const r=Vi(this.toolGroupId).viewportsInfo;if(!(r!=null&&r.length)){console.warn(this.getToolName()+"Tool: No viewports found");return}const a=(s=da(r[0].renderingEngineId))==null?void 0:s.getViewport(r[0].viewportId);if(!a)return;const i=a.getFrameOfReferenceUID(),o=nr(this.getToolName(),i);if(!(o!=null&&o.length)){const c=new Map;IMe(c,r);const l={highlighted:!0,invalidated:!0,metadata:{toolName:this.getToolName(),FrameOfReferenceUID:i,referencedImageId:null},data:{actorsWorldPointsMap:c}};qn(l,i)}qe(r.map(({viewportId:c})=>c))},this.onSetToolEnabled=()=>{this._init()},this.onCameraModified=r=>{this._init()},this.renderAnnotation=(r,a)=>{const{viewport:i,FrameOfReferenceUID:o}=r;let s=!1;const c=nr(this.getToolName(),o);if(!(c!=null&&c.length))return s;const l=c[0],{annotationUID:u}=l,f=l.data.actorsWorldPointsMap;FH(f,i);const v=i.getActors(),g=VH(i);return v.forEach(d=>{if(!(d!=null&&d.clippingFilter))return;const m=f.get(d.uid);if(!m||!m.get(g))return;let h=1;const{worldPointsSet:C,color:p}=m.get(g);for(let S=0;S<C.length;S++){const D=C[S].map(y=>i.worldToCanvas(y)),E={color:p,fillColor:p,fillOpacity:this.configuration.opacity,closePath:!0,lineWidth:2},T=d.uid+"#"+h;zl(a,u,T,D,E),h++}}),s=!0,s}}}function IMe(t,e){e.forEach(({viewportId:n,renderingEngineId:r})=>{var i;const a=(i=da(r))==null?void 0:i.getViewport(n);FH(t,a)})}function FH(t,e){const n=e.getActors(),r=VH(e);n.forEach(a=>{if(!(a!=null&&a.clippingFilter))return;let i=t.get(a.uid);if(i||(i=new Map,t.set(a.uid,i)),!i.get(r)){const o=a.clippingFilter.getOutputData(),s=vH(o);if(!s)return;const c=a.actor.getProperty().getColor(),l=DMe(c);i.set(r,{worldPointsSet:s,color:l})}})}function VH(t){const{viewPlaneNormal:e}=t.getCamera(),n=t.getCurrentImageIdIndex();return`${t.id}-${U_(e)}-${n}`}function DMe(t){function e(n){let r=Math.floor(n*255).toString(16);return r.length===1&&(r="0"+r),r}return"#"+e(t[0])+e(t[1])+e(t[2])}UH.toolName="SegmentationIntersection";class kH extends du{constructor(e={},n={supportedInteractionTypes:["Mouse","Touch"],configuration:{shadow:!0,preventHandleOutsideImage:!1,displayThreshold:5,positionSync:!0,disableCursor:!1}}){super(e,n),this.isDrawing=!1,this.isHandleOutsideImage=!1,this._elementWithCursor=null,this._currentCursorWorldPosition=null,this._currentCanvasPosition=null,this._disableCursorEnabled=!1,this.mouseMoveCallback=r=>{const{detail:a}=r,{element:i,currentPoints:o}=a;this._currentCursorWorldPosition=o.world,this._currentCanvasPosition=o.canvas,this._elementWithCursor=i;const s=this.getActiveAnnotation(i);return s===null?(this.createInitialAnnotation(o.world,i),!1):(this.updateAnnotationPosition(i,s),!1)},this.createInitialAnnotation=(r,a)=>{const i=Ae(a);if(!i)throw new Error("No enabled element found");const{viewport:o,renderingEngine:s}=i;this.isDrawing=!0;const c=o.getCamera(),{viewPlaneNormal:l,viewUp:u}=c;if(!l||!u)throw new Error("Camera not found");const f=this.getReferencedImageId(o,r,l,u),v=o.getFrameOfReferenceUID(),g={highlighted:!0,invalidated:!0,metadata:{toolName:this.getToolName(),viewPlaneNormal:[...l],viewUp:[...u],FrameOfReferenceUID:v,referencedImageId:f},data:{label:"",handles:{points:[[...r]],activeHandleIndex:null,textBox:{hasMoved:!1,worldPosition:[0,0,0],worldBoundingBox:{topLeft:[0,0,0],topRight:[0,0,0],bottomLeft:[0,0,0],bottomRight:[0,0,0]}}}}};if(nr(this.getToolName(),a).length>0)return null;if(qn(g,a)===null)return;const h=Bt(a,this.getToolName(),!1);qe(h)},this.onCameraModified=r=>{const a=r.detail,{element:i,previousCamera:o,camera:s}=a,l=Ae(i).viewport;if(i!==this._elementWithCursor)return;const u=o.focalPoint,f=s.viewPlaneNormal,v=s.focalPoint,g=[0,0,0];if(Cn.subtract(v,u,g),g.reduce((h,C)=>h+C,0)===0)return;const d=Cn.dot(g,f);if(Math.abs(d)<.01||!this._currentCanvasPosition)return;const m=l.canvasToWorld(this._currentCanvasPosition);this._currentCursorWorldPosition=m,this.updateAnnotationPosition(i,this.getActiveAnnotation(i))},this.renderAnnotation=(r,a)=>{let i=!1;const{viewport:o,FrameOfReferenceUID:s}=r,c=this._elementWithCursor===o.element;this.configuration.positionSync&&!c&&this.updateViewportImage(o);const{element:l}=o;let u=nr(this.getToolName(),l);if(!(u!=null&&u.length)||(u=this.filterInteractableAnnotationsForElement(l,u),!(u!=null&&u.length)))return i;const f={toolGroupId:this.toolGroupId,toolName:this.getToolName(),viewportId:r.viewport.id};for(let v=0;v<u.length;v++){const g=u[v],{annotationUID:d,data:m}=g,{handles:h}=m,{points:C}=h;if(!d)return i;f.annotationUID=d;const p=parseFloat(this.getStyle("lineWidth",f,g)),S=p,I=this.getStyle("lineDash",f,g),D=this.getStyle("color",f,g);if(C[0].some(w=>isNaN(w)))return i;const E=C.map(w=>o.worldToCanvas(w));if(!o.getRenderingEngine())return console.warn("Rendering Engine has been destroyed"),i;if(!Gi(d))continue;const T={upper:"upper",right:"right",lower:"lower",left:"left"},[y,M]=E[0],_=c?20:7,O=c?5:7;tr(a,d,T.upper,[y,M-(_/2+O)],[y,M-_/2],{color:D,lineDash:I,lineWidth:S}),tr(a,d,T.lower,[y,M+(_/2+O)],[y,M+_/2],{color:D,lineDash:I,lineWidth:S}),tr(a,d,T.right,[y+(_/2+O),M],[y+_/2,M],{color:D,lineDash:I,lineWidth:S}),tr(a,d,T.left,[y-(_/2+O),M],[y-_/2,M],{color:D,lineDash:I,lineWidth:S}),i=!0}return i},this._disableCursorEnabled=this.configuration.disableCursor}onSetToolActive(){if(this._disableCursorEnabled=this.configuration.disableCursor,!this._disableCursorEnabled)return;const e=Vi(this.toolGroupId).viewportsInfo;if(!e)return;e.map(r=>Ka(r.viewportId,r.renderingEngineId)).forEach(r=>{r&&Yt(r.viewport.element)})}onSetToolDisabled(){if(!this._disableCursorEnabled)return;const e=Vi(this.toolGroupId).viewportsInfo;if(!e)return;e.map(r=>Ka(r.viewportId,r.renderingEngineId)).forEach(r=>{r&&Mn(r.viewport.element)})}getActiveAnnotation(e){const n=nr(this.getToolName(),e);return n.length?n[0]:null}updateAnnotationPosition(e,n){var o,s;const r=this._currentCursorWorldPosition;if(!r||!((s=(o=n.data)==null?void 0:o.handles)!=null&&s.points))return;n.data.handles.points=[[...r]],n.invalidated=!0;const a=Bt(e,this.getToolName(),!1);Ae(e)&&qe(a)}filterInteractableAnnotationsForElement(e,n){var v,g,d;if(!(n instanceof Array)||n.length===0)return[];const r=n[0],a=(v=Ae(e))==null?void 0:v.viewport;if(!a)return[];const i=a.getCamera(),{viewPlaneNormal:o,focalPoint:s}=i;if(!o||!s)return[];const c=(d=(g=r.data)==null?void 0:g.handles)==null?void 0:d.points;if(!(c instanceof Array)||c.length!==1)return[];const l=c[0],u=Bc(o,s);return QS(u,l)<this.configuration.displayThreshold?[r]:[]}updateViewportImage(e){const n=this._currentCursorWorldPosition;if(!(!n||n.some(r=>isNaN(r)))){if(e instanceof Xr){const r=OF(n,e);if(r===null)return;r!==e.getCurrentImageIdIndex()&&e.setImageIdIndex(r)}else if(e instanceof yr){const{focalPoint:r,viewPlaneNormal:a}=e.getCamera();if(!r||!a)return;const i=Bc(a,r),o=QS(i,n,!0);if(Math.abs(o)<.5)return;const s=Ar(Xe(),qt(...a)),c=Ia(Xe(),s,o),l=Ra(Xe(),qt(...r),c);{e.setCamera({focalPoint:l});const u=e.getRenderingEngine();u&&u.renderViewport(e.id)}}}}}kH.toolName="ReferenceCursors";const XP=[];class GH extends du{constructor(e={},n={configuration:{viewportId:"",scaleLocation:"bottom"}}){super(e,n),this.editData=null,this._init=()=>{var d,m;const a=to()[0];if(!a)return;const i=Vi(this.toolGroupId).viewportsInfo;if(!i)return;const o=i.map(h=>Ka(h.viewportId,h.renderingEngineId));let{viewport:s}=o[0];const{FrameOfReferenceUID:c}=o[0];if(this.configuration.viewportId&&o.forEach(h=>{h.viewport.id==this.configuration.viewportId&&(s=h.viewport)}),!s)return;const{viewUp:l,viewPlaneNormal:u}=s.getCamera(),f=JS(s);let v=(d=this.editData)==null?void 0:d.annotation;const g=nr(this.getToolName(),s.element);g.length&&(v=g.filter(h=>h.data.viewportId==s.id)[0]),o.forEach(h=>{const{viewport:C}=h;if(!XP.includes(C.id)){const p={metadata:{toolName:this.getToolName(),viewPlaneNormal:[...u],viewUp:[...l],FrameOfReferenceUID:c,referencedImageId:null},data:{handles:{points:JS(C)},viewportId:C.id}};XP.push(C.id),qn(p,C.element),v=p}}),(m=this.editData)!=null&&m.annotation&&this.editData.annotation.data.viewportId==s.id&&(this.editData.annotation.data.handles.points=f,this.editData.annotation.data.viewportId=s.id),this.editData={viewport:s,renderingEngine:a,annotation:v}},this.onSetToolEnabled=()=>{this._init()},this.onCameraModified=r=>{this.configuration.viewportId=r.detail.viewportId,this._init()},this.computeScaleSize=(r,a,i)=>{const o=[16e3,8e3,4e3,2e3,1e3,500,250,100,50,25,10,5,2];let s;return i=="top"||i=="bottom"?s=o.filter(c=>c<r*.6&&c>r*.2):s=o.filter(c=>c<a*.6&&c>a*.2),s[0]},this.computeEndScaleTicks=(r,a)=>{const i={bottom:[[0,-10],[0,-10]],top:[[0,10],[0,10]],left:[[0,0],[10,0]],right:[[0,0],[-10,0]]},o=[[r[1][0]+i[a][0][0],r[1][1]+i[a][0][0]],[r[1][0]+i[a][1][0],r[1][1]+i[a][1][1]]],s=[[r[0][0]+i[a][0][0],r[0][1]+i[a][0][0]],[r[0][0]+i[a][1][0],r[0][1]+i[a][1][1]]];return{endTick1:o,endTick2:s}},this.computeInnerScaleTicks=(r,a,i,o,s)=>{let c;a=="bottom"||a=="top"?c=s[0][0]-o[0][0]:(a=="left"||a=="right")&&(c=s[0][1]-o[0][1]);const l=[],u=[],f=[];let v=r;r>=50&&(v=r/10);const g=c/v;for(let d=0;d<v-1;d++){const m={bottom:[[g*(d+1),0],[g*(d+1),5]],top:[[g*(d+1),0],[g*(d+1),-5]],left:[[0,g*(d+1)],[-5,g*(d+1)]],right:[[0,g*(d+1)],[5,g*(d+1)]]};l.push(`${i}-tick${d}`),u.push(`tick${d}`),(d+1)%5==0?f.push([[o[0][0]+m[a][0][0],o[0][1]+m[a][0][1]],[o[1][0]+m[a][0][0],o[1][1]+m[a][0][1]]]):f.push([[o[0][0]+m[a][0][0],o[0][1]+m[a][0][1]],[o[1][0]+m[a][1][0],o[1][1]+m[a][1][1]]])}return{tickIds:l,tickUIDs:u,tickCoordinates:f}},this.computeWorldScaleCoordinates=(r,a,i)=>{let o,s=fr(Xe(),i[0],i[1]);s=Ar(Xe(),s);let c=fr(Xe(),i[2],i[0]);c=Ar(Xe(),c);const l={bottom:[i[1],i[2]],top:[i[0],i[3]],right:[i[2],i[3]],left:[i[0],i[1]]},u=Ra(Xe(),l[a][0],l[a][0]).map(v=>v/2),f=r/2/Math.sqrt(Math.pow(s[0],2)+Math.pow(s[1],2)+Math.pow(s[2],2));return a=="top"||a=="bottom"?o=[fr(Xe(),u,c.map(v=>v*f)),Ra(Xe(),u,c.map(v=>v*f))]:(a=="left"||a=="right")&&(o=[Ra(Xe(),u,s.map(v=>v*f)),fr(Xe(),u,s.map(v=>v*f))]),o},this.computeCanvasScaleCoordinates=(r,a,i,o,s)=>{let c;if(s=="top"||s=="bottom"){const l=a[0][0]-a[1][0];c=[[r.width/2-l/2,i.height],[r.width/2+l/2,i.height]]}else if(s=="left"||s=="right"){const l=a[0][1]-a[1][1];c=[[o.width,r.height/2-l/2],[o.width,r.height/2+l/2]]}return c},this.computeScaleBounds=(r,a,i,o)=>{const s=a*Math.min(1e3,r.width),c=i*Math.min(1e3,r.height),l={bottom:[-c,-s],top:[c,s],left:[c,s],right:[-c,-s]},u={bottom:[r.height,r.width],top:[0,r.width],left:[r.height,0],right:[r.height,r.width]};return{height:u[o][0]+l[o][0],width:u[o][1]+l[o][1]}}}renderAnnotation(e,n){if(!this.editData||!this.editData.viewport)return;const r=this.configuration.scaleLocation,{viewport:a}=e,o=nr(this.getToolName(),a.element).filter(Te=>Te.data.viewportId==a.id)[0],s=e.viewport.canvas,c=!1;if(!a)return c;const l={toolGroupId:this.toolGroupId,toolName:this.getToolName(),viewportId:e.viewport.id},u={width:s.width/window.devicePixelRatio||1,height:s.height/window.devicePixelRatio||1},f=o.data.handles.points[0],v=o.data.handles.points[1],g=o.data.handles.points[2],d=o.data.handles.points[3],m=[f,g,v,d],h=Si(g,d),C=Si(f,g),p=this.computeScaleBounds(u,.05,.05,r),S=this.computeScaleBounds(u,.05,.05,r),I=this.computeScaleSize(h,C,r),D=this.computeWorldScaleCoordinates(I,r,m).map(Te=>a.worldToCanvas(Te)),E=this.computeCanvasScaleCoordinates(u,D,S,p,r),T=this.computeEndScaleTicks(E,r),{annotationUID:y}=o;l.annotationUID=y;const M=this.getStyle("lineWidth",l,o),_=this.getStyle("lineDash",l,o),O=this.getStyle("color",l,o),w=this.getStyle("shadow",l,o),x=`${y}-scaleline`;tr(n,y,"1",E[0],E[1],{color:O,width:M,lineDash:_,shadow:w},x);const R=`${y}-left`;tr(n,y,"2",T.endTick1[0],T.endTick1[1],{color:O,width:M,lineDash:_,shadow:w},R);const H=`${y}-right`;tr(n,y,"3",T.endTick2[0],T.endTick2[1],{color:O,width:M,lineDash:_,shadow:w},H);const U={bottom:[-10,-42],top:[-12,-35],left:[-40,-20],right:[-50,-20]},V=[E[0][0]+U[r][0],E[0][1]+U[r][1]],X=this._getTextLines(I),{tickIds:re,tickUIDs:ue,tickCoordinates:De}=this.computeInnerScaleTicks(I,r,y,T.endTick1,T.endTick2);for(let Te=0;Te<ue.length;Te++)tr(n,y,ue[Te],De[Te][0],De[Te][1],{color:O,width:M,lineDash:_,shadow:w},re[Te]);return P1(n,y,"text0",X,[V[0],V[1]],{fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif",fontSize:"14px",lineDash:"2,3",lineWidth:"1",shadow:!0,color:O}),c}_getTextLines(e){let n,r;return e>=50?(n=e/10,r=" cm"):(n=e,r=" mm"),[n.toString().concat(r)]}}GH.toolName="ScaleOverlay";const BH=(t,e,n)=>{var o,s,c;if(!((c=(s=(o=e==null?void 0:e.data)==null?void 0:o.contour)==null?void 0:s.polyline)!=null&&c.length))return;const{polyline:r}=e.data.contour,{length:a}=r;let i=1/0;for(let l=0;l<a;l++){const u=t.worldToCanvas(r[l]),f=bs(u,n);i=Math.min(i,f)}if(!(i===1/0||isNaN(i)))return i},mO=class mO{constructor(){this.toolInfo={toolSize:null,maxToolSize:null}}renderShape(e,n,r){Mo(e,"SculptorTool","0",n,this.toolInfo.toolSize,r)}pushHandles(e,n){const{points:r,mouseCanvasPoint:a}=n,i={first:void 0,last:void 0};for(let o=0;o<r.length;o++){const s=e.worldToCanvas(r[o]),c=bs(s,a);c>this.toolInfo.toolSize||(this.pushOneHandle(o,c,n),i.first===void 0&&(i.first=o),i.last=o)}return i}configureToolSize(e){const n=this.toolInfo;if(n.toolSize&&n.maxToolSize)return;const a=e.detail.element,o=Math.min(a.clientWidth,a.clientHeight)/12;n.toolSize=o,n.maxToolSize=o}updateToolSize(e,n,r){const a=this.toolInfo,i=BH(n,r,e);i>0&&(a.toolSize=Math.min(a.maxToolSize,i))}getMaxSpacing(e){return Math.max(this.toolInfo.toolSize/4,e)}getInsertPosition(e,n,r){let a;const{points:i,element:o,mouseCanvasPoint:s}=r,c=this.toolInfo.toolSize,l=Ae(o),{viewport:u}=l,f=u.worldToCanvas(i[e]),v=u.worldToCanvas(i[n]),g=[(f[0]+v[0])/2,(f[1]+v[1])/2],d=bs(s,g);if(d<c){const h={x:(g[0]-s[0])/d,y:(g[1]-s[1])/d};a=[s[0]+c*h.x,s[1]+c*h.y]}else a=g;return u.canvasToWorld(a)}pushOneHandle(e,n,r){const{points:a,mousePoint:i}=r,o=this.toolInfo.toolSize,s=a[e],c={x:(s[0]-i[0])/n,y:(s[1]-i[1])/n,z:(s[2]-i[2])/n},l={x:i[0]+o*c.x,y:i[1]+o*c.y,z:i[2]+o*c.z};s[0]=l.x,s[1]=l.y,s[2]=l.z}};mO.shapeName="Circle";let _d=mO;class WH extends Xa{constructor(e={},n={supportedInteractionTypes:["Mouse","Touch"],configuration:{minSpacing:1,referencedToolNames:["PlanarFreehandROI","PlanarFreehandContourSegmentationTool"],toolShape:"circle",referencedToolName:"PlanarFreehandROI"}}){super(e,n),this.registeredShapes=new Map,this.isActive=!1,this.commonData={activeAnnotationUID:null,viewportIdsToRender:[],isEditingOpenContour:!1,canvasLocation:void 0},this.preMouseDownCallback=r=>{const a=r.detail,i=a.element;if(this.configureToolSize(r),this.selectFreehandTool(a),this.commonData.activeAnnotationUID!==null)return this.isActive=!0,Yt(i),this.activateModify(i),!0},this.mouseMoveCallback=r=>{this.mode===vr.Active?(this.configureToolSize(r),this.updateCursor(r)):this.commonData.canvasLocation=void 0},this.endCallback=r=>{const a=r.detail,{element:i}=a,o=this.configuration,s=Ae(i);this.isActive=!1,this.deactivateModify(i),Mn(i);const{renderingEngineId:c,viewportId:l}=s,f=la(l,c).getToolInstance(o.referencedToolName),g=this.filterSculptableAnnotationsForElement(i).find(d=>d.annotationUID===this.commonData.activeAnnotationUID);f.configuration.calculateStats&&(g.invalidated=!0),$r(g,i)},this.dragCallback=r=>{const a=r.detail,i=a.element;this.updateCursor(r);const o=this.filterSculptableAnnotationsForElement(i),s=o.find(l=>l.annotationUID===this.commonData.activeAnnotationUID);if(!(o!=null&&o.length)||!this.isActive)return;const c=s.data.contour.polyline;this.sculpt(a,c)},this.registerShapes(_d.shapeName,_d),this.setToolShape(this.configuration.toolShape)}registerShapes(e,n){const r=new n;this.registeredShapes.set(e,r)}sculpt(e,n){const r=this.configuration,a=e.element,i=Ae(a),{viewport:o}=i,s=this.registeredShapes.get(this.selectedShape);this.sculptData={mousePoint:e.currentPoints.world,mouseCanvasPoint:e.currentPoints.canvas,points:n,maxSpacing:s.getMaxSpacing(r.minSpacing),element:a};const c=s.pushHandles(o,this.sculptData);c.first!==void 0&&this.insertNewHandles(c)}interpolatePointsWithinMaxSpacing(e,n,r,a){const{element:i}=this.sculptData,o=Ae(i),{viewport:s}=o,c=YP(e+1,n.length),l=s.worldToCanvas(n[e]),u=s.worldToCanvas(n[c]);bs(l,u)>a&&r.push(e)}updateCursor(e){const n=e.detail,r=n.element,a=Ae(r),{renderingEngine:i,viewport:o}=a;this.commonData.viewportIdsToRender=[o.id];const s=this.filterSculptableAnnotationsForElement(r);if(!(s!=null&&s.length))return;const c=s.find(l=>l.annotationUID===this.commonData.activeAnnotationUID);if(this.commonData.canvasLocation=n.currentPoints.canvas,this.isActive)c.highlighted=!0;else{const l=this.registeredShapes.get(this.selectedShape),u=n.currentPoints.canvas;l.updateToolSize(u,o,c)}qe(this.commonData.viewportIdsToRender)}filterSculptableAnnotationsForElement(e){const n=this.configuration,r=Ae(e),{renderingEngineId:a,viewportId:i}=r,o=[],c=la(i,a).getToolInstance(n.referencedToolName);return n.referencedToolNames.forEach(l=>{const u=nr(l,e);u&&o.push(...u)}),c.filterInteractableAnnotationsForElement(e,o)}configureToolSize(e){this.registeredShapes.get(this.selectedShape).configureToolSize(e)}insertNewHandles(e){const n=this.findNewHandleIndices(e);let r=0;for(let a=0;a<(n==null?void 0:n.length);a++){const i=n[a]+1+r;this.insertHandleRadially(i),r++}}findNewHandleIndices(e){const{points:n,maxSpacing:r}=this.sculptData,a=[];for(let i=e.first;i<=e.last;i++)this.interpolatePointsWithinMaxSpacing(i,n,a,r);return a}insertHandleRadially(e){const{points:n}=this.sculptData;if(e>n.length-1&&this.commonData.isEditingOpenContour)return;const r=this.registeredShapes.get(this.selectedShape),a=e-1,i=YP(e,n.length),s=r.getInsertPosition(a,i,this.sculptData);n.splice(e,0,s)}selectFreehandTool(e){const n=this.getClosestFreehandToolOnElement(e);n!==void 0&&(this.commonData.activeAnnotationUID=n)}getClosestFreehandToolOnElement(e){const{element:n}=e,r=Ae(n),{viewport:a}=r,i=this.configuration,o=this.filterSculptableAnnotationsForElement(n);if(!(o!=null&&o.length))return;const s=e.currentPoints.canvas,c={distance:1/0,toolIndex:void 0,annotationUID:void 0};for(let l=0;l<(o==null?void 0:o.length);l++){if(o[l].isLocked||!o[l].isVisible)continue;const u=BH(a,o[l],s);u!==-1&&u<c.distance&&(c.distance=u,c.toolIndex=l,c.annotationUID=o[l].annotationUID)}return this.commonData.isEditingOpenContour=!o[c.toolIndex].data.contour.closed,i.referencedToolName=o[c.toolIndex].metadata.toolName,c.annotationUID}activateModify(e){e.addEventListener(B.MOUSE_UP,this.endCallback),e.addEventListener(B.MOUSE_CLICK,this.endCallback),e.addEventListener(B.MOUSE_DRAG,this.dragCallback),e.addEventListener(B.TOUCH_TAP,this.endCallback),e.addEventListener(B.TOUCH_END,this.endCallback),e.addEventListener(B.TOUCH_DRAG,this.dragCallback)}deactivateModify(e){e.removeEventListener(B.MOUSE_UP,this.endCallback),e.removeEventListener(B.MOUSE_CLICK,this.endCallback),e.removeEventListener(B.MOUSE_DRAG,this.dragCallback),e.removeEventListener(B.TOUCH_TAP,this.endCallback),e.removeEventListener(B.TOUCH_END,this.endCallback),e.removeEventListener(B.TOUCH_DRAG,this.dragCallback)}setToolShape(e){this.selectedShape=this.registeredShapes.get(e)??_d.shapeName}renderAnnotation(e,n){const{viewport:r}=e,{element:a}=r,i=this.commonData.viewportIdsToRender;if(!this.commonData.canvasLocation||this.mode!==vr.Active||!i.includes(r.id))return;const o=this.filterSculptableAnnotationsForElement(a);if(!(o!=null&&o.length))return;const s={toolGroupId:this.toolGroupId,toolName:this.getToolName(),viewportId:e.viewport.id};let c=mv("color",s,bc.Default,this.mode);this.isActive&&(c=mv("color",s,bc.Highlighted,this.mode)),this.registeredShapes.get(this.selectedShape).renderShape(n,this.commonData.canvasLocation,{color:c})}}const YP=(t,e)=>(t+e)%e;WH.toolName="SculptorTool";const EMe={X:[1,0,0],Y:[0,1,0],Z:[0,0,1],CUSTOM:[]};class HH extends Xa{constructor(e={},n={supportedInteractionTypes:["Mouse","Touch"],configuration:{direction:EMe.Z,rotateIncrementDegrees:30}}){super(e,n)}mouseWheelCallback(e){const{element:n,wheel:r}=e.detail,a=Ae(n),{viewport:i}=a,{direction:o,rotateIncrementDegrees:s}=this.configuration,c=i.getCamera(),{viewUp:l,position:u,focalPoint:f}=c,{direction:v}=r,[g,d,m]=f,[h,C,p]=o,S=v*(s*Math.PI)/180,I=[0,0,0],D=[0,0,0],E=[0,0,0],T=zt(new Float32Array(16));kr(T,T,[g,d,m]),Ki(T,T,S,[h,C,p]),kr(T,T,[-g,-d,-m]),un(I,u,T),un(D,f,T),zt(T),Ki(T,T,S,[h,C,p]),un(E,l,T),i.setCamera({position:I,viewUp:E,focalPoint:D}),i.render()}}HH.toolName="VolumeRotateMouseWheel";const{transformWorldToIndex:ZP}=Zn;var h1;let $H=(h1=class extends Br{constructor(e={},n={supportedInteractionTypes:["Mouse","Touch"],configuration:{preventHandleOutsideImage:!1,getTextLines:TMe,actions:{undo:{method:"undo",bindings:[{key:"z"}]},redo:{method:"redo",bindings:[{key:"y"}]}}}}){super(e,n),this.addNewAnnotation=r=>{const a=r.detail,{currentPoints:i,element:o}=a,s=i.world,c=Ae(o),{viewport:l}=c;Yt(o),this.isDrawing=!0;const{viewPlaneNormal:u,viewUp:f,position:v}=l.getCamera(),g=this.getReferencedImageId(l,s,u,f),d={highlighted:!0,invalidated:!0,metadata:{...l.getViewReference({points:[s]}),toolName:this.getToolName(),referencedImageId:g,viewUp:f,cameraPosition:v},data:{handles:{points:[[...s],[...s]],activeHandleIndex:null,textBox:{hasMoved:!1,worldPosition:[0,0,0],worldBoundingBox:{topLeft:[0,0,0],topRight:[0,0,0],bottomLeft:[0,0,0],bottomRight:[0,0,0]}}},label:"",cachedStats:{}}};qn(d,o);const m=Bt(o,this.getToolName());return this.editData={annotation:d,viewportIdsToRender:m,handleIndex:1,movingTextBox:!1,newAnnotation:!0,hasMoved:!1},this._activateDraw(o),r.preventDefault(),qe(m),d},this.isPointNearTool=(r,a,i,o)=>{const s=Ae(r),{viewport:c}=s,{data:l}=a,[u,f]=l.handles.points,v=c.worldToCanvas(u),g=c.worldToCanvas(f),d={start:{x:v[0],y:v[1]},end:{x:g[0],y:g[1]}};return Li([d.start.x,d.start.y],[d.end.x,d.end.y],[i[0],i[1]])<=o},this.toolSelectedCallback=(r,a)=>{const i=r.detail,{element:o}=i;a.highlighted=!0;const s=Bt(o,this.getToolName());this.editData={annotation:a,viewportIdsToRender:s,movingTextBox:!1},this._activateModify(o),Yt(o),qe(s),r.preventDefault()},this._endCallback=r=>{const a=r.detail,{element:i}=a,{annotation:o,viewportIdsToRender:s,newAnnotation:c,hasMoved:l}=this.editData,{data:u}=o;c&&!l||(u.handles.activeHandleIndex=null,this._deactivateModify(i),this._deactivateDraw(i),Mn(i),this.isHandleOutsideImage&&this.configuration.preventHandleOutsideImage&&sr(o.annotationUID),qe(s),this.doneEditMemo(),c&&Ur(o),this.editData=null,this.isDrawing=!1)},this._dragCallback=r=>{this.isDrawing=!0;const a=r.detail,{element:i}=a,{annotation:o,viewportIdsToRender:s,handleIndex:c,movingTextBox:l,newAnnotation:u}=this.editData,{data:f}=o;if(this.createMemo(i,o,{newAnnotation:u}),l){const{deltaPoints:v}=a,g=v.world,{textBox:d}=f.handles,{worldPosition:m}=d;m[0]+=g[0],m[1]+=g[1],m[2]+=g[2],d.hasMoved=!0}else if(c===void 0){const{deltaPoints:v}=a,g=v.world;f.handles.points.forEach(m=>{m[0]+=g[0],m[1]+=g[1],m[2]+=g[2]}),o.invalidated=!0}else{const{currentPoints:v}=a,g=v.world;f.handles.points[c]=[...g],o.invalidated=!0}this.editData.hasMoved=!0,qe(s)},this.cancel=r=>{if(this.isDrawing){this.isDrawing=!1,this._deactivateDraw(r),this._deactivateModify(r),Mn(r);const{annotation:a,viewportIdsToRender:i,newAnnotation:o}=this.editData,{data:s}=a;return a.highlighted=!1,s.handles.activeHandleIndex=null,qe(i),o&&Ur(a),this.editData=null,a.annotationUID}},this._activateModify=r=>{st.isInteractingWithTool=!0,r.addEventListener(B.MOUSE_UP,this._endCallback),r.addEventListener(B.MOUSE_DRAG,this._dragCallback),r.addEventListener(B.MOUSE_CLICK,this._endCallback),r.addEventListener(B.TOUCH_END,this._endCallback),r.addEventListener(B.TOUCH_DRAG,this._dragCallback),r.addEventListener(B.TOUCH_TAP,this._endCallback)},this._deactivateModify=r=>{st.isInteractingWithTool=!1,r.removeEventListener(B.MOUSE_UP,this._endCallback),r.removeEventListener(B.MOUSE_DRAG,this._dragCallback),r.removeEventListener(B.MOUSE_CLICK,this._endCallback),r.removeEventListener(B.TOUCH_END,this._endCallback),r.removeEventListener(B.TOUCH_DRAG,this._dragCallback),r.removeEventListener(B.TOUCH_TAP,this._endCallback)},this._activateDraw=r=>{st.isInteractingWithTool=!0,r.addEventListener(B.MOUSE_UP,this._endCallback),r.addEventListener(B.MOUSE_DRAG,this._dragCallback),r.addEventListener(B.MOUSE_MOVE,this._dragCallback),r.addEventListener(B.MOUSE_CLICK,this._endCallback),r.addEventListener(B.TOUCH_END,this._endCallback),r.addEventListener(B.TOUCH_DRAG,this._dragCallback),r.addEventListener(B.TOUCH_TAP,this._endCallback)},this._deactivateDraw=r=>{st.isInteractingWithTool=!1,r.removeEventListener(B.MOUSE_UP,this._endCallback),r.removeEventListener(B.MOUSE_DRAG,this._dragCallback),r.removeEventListener(B.MOUSE_MOVE,this._dragCallback),r.removeEventListener(B.MOUSE_CLICK,this._endCallback),r.removeEventListener(B.TOUCH_END,this._endCallback),r.removeEventListener(B.TOUCH_DRAG,this._dragCallback),r.removeEventListener(B.TOUCH_TAP,this._endCallback)},this.renderAnnotation=(r,a)=>{let i=!1;const{viewport:o}=r,{element:s}=o;let c=nr(this.getToolName(),s);if(!(c!=null&&c.length)||(c=this.filterInteractableAnnotationsForElement(s,c),!(c!=null&&c.length)))return i;const l=this.getTargetId(o),u=o.getRenderingEngine(),f={toolGroupId:this.toolGroupId,toolName:this.getToolName(),viewportId:r.viewport.id};for(let v=0;v<c.length;v++){const g=c[v],{annotationUID:d,data:m}=g,{points:h,activeHandleIndex:C}=m.handles;f.annotationUID=d;const{color:p,lineWidth:S,lineDash:I,shadow:D}=this.getAnnotationStyle({annotation:g,styleSpecifier:f}),E=h.map(U=>o.worldToCanvas(U));if(!m.cachedStats[l]||m.cachedStats[l].unit==null?(m.cachedStats[l]={length:null,unit:null},this._calculateCachedStats(g,u,r)):g.invalidated&&this._throttledCalculateCachedStats(g,u,r),!o.getRenderingEngine())return console.warn("Rendering Engine has been destroyed"),i;let T;if(!Gi(d))continue;!Ya(d)&&!this.editData&&C!==null&&(T=[E[C]]),T&&Hr(a,d,"0",E,{color:p,lineDash:I,lineWidth:S});const y=`${d}-line`;if(tr(a,d,"1",E[0],E[1],{color:p,width:S,lineDash:I,shadow:D},y),i=!0,!o.getRenderingEngine())return console.warn("Rendering Engine has been destroyed"),i;const _=this.getLinkedTextBoxStyle(f,g);if(!_.visibility){m.handles.textBox={hasMoved:!1,worldPosition:[0,0,0],worldBoundingBox:{topLeft:[0,0,0],topRight:[0,0,0],bottomLeft:[0,0,0],bottomRight:[0,0,0]}};continue}const O=this.configuration.getTextLines(m,l);if(!m.handles.textBox.hasMoved){const U=gs(E);m.handles.textBox.worldPosition=o.canvasToWorld(U)}const w=o.worldToCanvas(m.handles.textBox.worldPosition),P=ro(a,d,"1",O,w,E,{},_),{x:R,y:L,width:H,height:F}=P;m.handles.textBox.worldBoundingBox={topLeft:o.canvasToWorld([R,L]),topRight:o.canvasToWorld([R+H,L]),bottomLeft:o.canvasToWorld([R,L+F]),bottomRight:o.canvasToWorld([R+H,L+F])}}return i},this._throttledCalculateCachedStats=no(this._calculateCachedStats,100,{trailing:!0})}handleSelectedCallback(e,n,r){const a=e.detail,{element:i}=a,{data:o}=n;n.highlighted=!0;let s=!1,c;r.worldPosition?s=!0:c=o.handles.points.findIndex(u=>u===r);const l=Bt(i,this.getToolName());this.editData={annotation:n,viewportIdsToRender:l,handleIndex:c,movingTextBox:s},this._activateModify(i),Yt(i),qe(l),e.preventDefault()}_calculateLength(e,n){const r=e[0]-n[0],a=e[1]-n[1],i=e[2]-n[2];return Math.sqrt(r*r+a*a+i*i)}_calculateCachedStats(e,n,r){const a=e.data,{element:i}=r.viewport,o=a.handles.points[0],s=a.handles.points[1],{cachedStats:c}=a,l=Object.keys(c);for(let u=0;u<l.length;u++){const f=l[u],v=this.getTargetImageData(f);if(!v)continue;const{imageData:g,dimensions:d}=v,m=ZP(g,o),h=ZP(g,s),C=[m,h],{scale:p,unit:S}=us(v,C),I=this._calculateLength(o,s)/p;this._isInsideVolume(m,h,d)?this.isHandleOutsideImage=!1:this.isHandleOutsideImage=!0,c[f]={length:I,unit:S}}return e.invalidated=!1,$r(e,i),c}_isInsideVolume(e,n,r){return ga(e,r)&&ga(n,r)}},h1.hydrate=(e,n,r)=>{const a=wr(e);if(!a)return;const{viewport:i}=a,o=i.getFrameOfReferenceUID(),{viewPlaneNormal:s,viewUp:c}=i.getCamera(),l=new h1,u=l.getReferencedImageId(i,n[0],s,c),f={annotationUID:(r==null?void 0:r.annotationUID)||Cr(),data:{handles:{points:n}},highlighted:!1,autoGenerated:!1,invalidated:!1,isLocked:!1,isVisible:!0,metadata:{toolName:l.getToolName(),viewPlaneNormal:s,FrameOfReferenceUID:o,referencedImageId:u,...r}};qn(f,i.element),qe([i.id])},h1);function TMe(t,e){const n=t.cachedStats[e],{length:r,unit:a}=n;return r==null||isNaN(r)?void 0:[`${kn(r)} ${a}`]}$H.toolName="Length";const{transformWorldToIndex:JP}=Zn;let zH=class extends Br{constructor(e={},n={supportedInteractionTypes:["Mouse","Touch"],configuration:{preventHandleOutsideImage:!1,getTextLines:yMe}}){super(e,n),this.addNewAnnotation=r=>{const a=r.detail,{currentPoints:i,element:o}=a,s=i.world,c=Ae(o),{viewport:l,renderingEngine:u}=c;Yt(o),this.isDrawing=!0;const{viewPlaneNormal:f,viewUp:v,position:g}=l.getCamera(),d=this.getReferencedImageId(l,s,f,v),m={highlighted:!0,invalidated:!0,metadata:{...l.getViewReference({points:[s]}),toolName:this.getToolName(),referencedImageId:d,viewUp:v,cameraPosition:g},data:{handles:{points:[[...s],[...s]],activeHandleIndex:null,textBox:{hasMoved:!1,worldPosition:[0,0,0],worldBoundingBox:{topLeft:[0,0,0],topRight:[0,0,0],bottomLeft:[0,0,0],bottomRight:[0,0,0]}}},label:"",cachedStats:{}}};qn(m,o);const h=Bt(o,this.getToolName());return this.editData={annotation:m,viewportIdsToRender:h,handleIndex:1,movingTextBox:!1,newAnnotation:!0,hasMoved:!1},this._activateDraw(o),r.preventDefault(),qe(h),m},this.isPointNearTool=(r,a,i,o)=>{const s=Ae(r),{viewport:c}=s,{data:l}=a,[u,f]=l.handles.points,v=c.worldToCanvas(u),g=c.worldToCanvas(f),d={start:{x:v[0],y:v[1]},end:{x:g[0],y:g[1]}};return Li([d.start.x,d.start.y],[d.end.x,d.end.y],[i[0],i[1]])<=o},this.toolSelectedCallback=(r,a)=>{const i=r.detail,{element:o}=i;a.highlighted=!0;const s=Bt(o,this.getToolName());this.editData={annotation:a,viewportIdsToRender:s,movingTextBox:!1},this._activateModify(o),Yt(o),Ae(o),qe(s),r.preventDefault()},this._endCallback=r=>{const a=r.detail,{element:i}=a,{annotation:o,viewportIdsToRender:s,newAnnotation:c,hasMoved:l}=this.editData,{data:u}=o;c&&!l||(u.handles.activeHandleIndex=null,this._deactivateModify(i),this._deactivateDraw(i),Mn(i),Ae(i),this.isHandleOutsideImage&&this.configuration.preventHandleOutsideImage&&sr(o.annotationUID),qe(s),c&&Ur(o),this.editData=null,this.isDrawing=!1)},this._dragCallback=r=>{this.isDrawing=!0;const a=r.detail,{element:i}=a,{annotation:o,viewportIdsToRender:s,handleIndex:c,movingTextBox:l}=this.editData,{data:u}=o;if(l){const{deltaPoints:f}=a,v=f.world,{textBox:g}=u.handles,{worldPosition:d}=g;d[0]+=v[0],d[1]+=v[1],d[2]+=v[2],g.hasMoved=!0}else if(c===void 0){const{deltaPoints:f}=a,v=f.world;u.handles.points.forEach(d=>{d[0]+=v[0],d[1]+=v[1],d[2]+=v[2]}),o.invalidated=!0}else{const{currentPoints:f}=a,v=f.world;u.handles.points[c]=[...v],o.invalidated=!0}this.editData.hasMoved=!0,Ae(i),qe(s)},this.cancel=r=>{if(this.isDrawing){this.isDrawing=!1,this._deactivateDraw(r),this._deactivateModify(r),Mn(r);const{annotation:a,viewportIdsToRender:i,newAnnotation:o}=this.editData,{data:s}=a;return a.highlighted=!1,s.handles.activeHandleIndex=null,Ae(r),qe(i),o&&Ur(a),this.editData=null,a.annotationUID}},this._activateModify=r=>{st.isInteractingWithTool=!0,r.addEventListener(B.MOUSE_UP,this._endCallback),r.addEventListener(B.MOUSE_DRAG,this._dragCallback),r.addEventListener(B.MOUSE_CLICK,this._endCallback),r.addEventListener(B.TOUCH_END,this._endCallback),r.addEventListener(B.TOUCH_DRAG,this._dragCallback),r.addEventListener(B.TOUCH_TAP,this._endCallback)},this._deactivateModify=r=>{st.isInteractingWithTool=!1,r.removeEventListener(B.MOUSE_UP,this._endCallback),r.removeEventListener(B.MOUSE_DRAG,this._dragCallback),r.removeEventListener(B.MOUSE_CLICK,this._endCallback),r.removeEventListener(B.TOUCH_END,this._endCallback),r.removeEventListener(B.TOUCH_DRAG,this._dragCallback),r.removeEventListener(B.TOUCH_TAP,this._endCallback)},this._activateDraw=r=>{st.isInteractingWithTool=!0,r.addEventListener(B.MOUSE_UP,this._endCallback),r.addEventListener(B.MOUSE_DRAG,this._dragCallback),r.addEventListener(B.MOUSE_MOVE,this._dragCallback),r.addEventListener(B.MOUSE_CLICK,this._endCallback),r.addEventListener(B.TOUCH_END,this._endCallback),r.addEventListener(B.TOUCH_DRAG,this._dragCallback),r.addEventListener(B.TOUCH_TAP,this._endCallback)},this._deactivateDraw=r=>{st.isInteractingWithTool=!1,r.removeEventListener(B.MOUSE_UP,this._endCallback),r.removeEventListener(B.MOUSE_DRAG,this._dragCallback),r.removeEventListener(B.MOUSE_MOVE,this._dragCallback),r.removeEventListener(B.MOUSE_CLICK,this._endCallback),r.removeEventListener(B.TOUCH_END,this._endCallback),r.removeEventListener(B.TOUCH_DRAG,this._dragCallback),r.removeEventListener(B.TOUCH_TAP,this._endCallback)},this.renderAnnotation=(r,a)=>{let i=!1;const{viewport:o}=r,{element:s}=o;let c=nr(this.getToolName(),s);if(!(c!=null&&c.length)||(c=this.filterInteractableAnnotationsForElement(s,c),!(c!=null&&c.length)))return i;const l=this.getTargetId(o),u=o.getRenderingEngine(),f={toolGroupId:this.toolGroupId,toolName:this.getToolName(),viewportId:r.viewport.id};for(let v=0;v<c.length;v++){const g=c[v],{annotationUID:d,data:m}=g,{points:h,activeHandleIndex:C}=m.handles;f.annotationUID=d;const{color:p,lineWidth:S,lineDash:I,shadow:D}=this.getAnnotationStyle({annotation:g,styleSpecifier:f}),E=h.map(F=>o.worldToCanvas(F));let T;if(!m.cachedStats[l]||m.cachedStats[l].unit==null?(m.cachedStats[l]={length:null,unit:null},this._calculateCachedStats(g,u,r)):g.invalidated&&this._throttledCalculateCachedStats(g,u,r),!Gi(d))continue;if(!Ya(d)&&!this.editData&&C!==null&&(T=[E[C]]),T&&Hr(a,d,"0",E,{color:p,lineDash:I,lineWidth:S}),TG(a,d,"0",E[0],E[1],{color:p,width:S,lineDash:I}),i=!0,!o.getRenderingEngine())return console.warn("Rendering Engine has been destroyed"),i;const M=this.getLinkedTextBoxStyle(f,g);if(!M.visibility){m.handles.textBox={hasMoved:!1,worldPosition:[0,0,0],worldBoundingBox:{topLeft:[0,0,0],topRight:[0,0,0],bottomLeft:[0,0,0],bottomRight:[0,0,0]}};continue}const _=this.configuration.getTextLines(m,l);if(!m.handles.textBox.hasMoved){const F=gs(E);m.handles.textBox.worldPosition=o.canvasToWorld(F)}const O=o.worldToCanvas(m.handles.textBox.worldPosition),x=ro(a,d,"1",_,O,E,{},M),{x:P,y:R,width:L,height:H}=x;m.handles.textBox.worldBoundingBox={topLeft:o.canvasToWorld([P,R]),topRight:o.canvasToWorld([P+L,R]),bottomLeft:o.canvasToWorld([P,R+H]),bottomRight:o.canvasToWorld([P+L,R+H])}}return i},this._throttledCalculateCachedStats=no(this._calculateCachedStats,100,{trailing:!0})}handleSelectedCallback(e,n,r){const a=e.detail,{element:i}=a,{data:o}=n;n.highlighted=!0;let s=!1,c;r.worldPosition?s=!0:c=o.handles.points.findIndex(u=>u===r);const l=Bt(i,this.getToolName());this.editData={annotation:n,viewportIdsToRender:l,handleIndex:c,movingTextBox:s},this._activateModify(i),Yt(i),Ae(i),qe(l),e.preventDefault()}_calculateHeight(e,n){const r=n[0]-e[0],a=n[1]-e[1],i=n[2]-e[2];if(r==0)return a!=0?Math.abs(i):0;if(a==0)return Math.abs(i);if(i==0)return Math.abs(a)}_calculateCachedStats(e,n,r){const a=e.data,{element:i}=r.viewport,o=a.handles.points[0],s=a.handles.points[1],{cachedStats:c}=a,l=Object.keys(c);for(let u=0;u<l.length;u++){const f=l[u],v=this.getTargetImageData(f);if(!v)continue;const{imageData:g,dimensions:d}=v,m=JP(g,o),h=JP(g,s),C=[m,h],{scale:p,unit:S}=us(v,C),I=this._calculateHeight(o,s)/p,D=this._isInsideVolume(m,h,d);this.isHandleOutsideImage=D,c[f]={height:I,unit:S}}return e.invalidated=!1,$r(e,i),c}_isInsideVolume(e,n,r){return ga(e,r)&&ga(n,r)}};function yMe(t,e){const n=t.cachedStats[e],{height:r,unit:a}=n;return r==null||isNaN(r)?void 0:[`${kn(r)} ${a}`]}zH.toolName="Height";const{transformWorldToIndex:MMe}=Zn;var Fc;let T4=(Fc=class extends Br{constructor(e={},n){super(e,Br.mergeDefaultProps(Fc.probeDefaults,n)),this.addNewAnnotation=r=>{const a=r.detail,{currentPoints:i,element:o}=a,s=i.world,c=Ae(o),{viewport:l}=c;this.isDrawing=!0;const u=l.getCamera(),{viewPlaneNormal:f,viewUp:v}=u,g=this.getReferencedImageId(l,s,f),d=l.getFrameOfReferenceUID(),m={invalidated:!0,highlighted:!0,metadata:{toolName:this.getToolName(),viewPlaneNormal:[...f],viewUp:[...v],FrameOfReferenceUID:d,referencedImageId:g},data:{label:"",handles:{points:[[...s]]},cachedStats:{}}};qn(m,o);const h=Bt(o,this.getToolName());return this.editData={annotation:m,newAnnotation:!0,viewportIdsToRender:h},this._activateModify(o),Yt(o),r.preventDefault(),qe(h),m},this._endCallback=r=>{const a=r.detail,{element:i}=a,{annotation:o,viewportIdsToRender:s,newAnnotation:c}=this.editData,{viewportId:l,renderingEngine:u}=Ae(i);this.eventDispatchDetail={viewportId:l,renderingEngineId:u.id},this._deactivateModify(i),Mn(i),c&&this.createMemo(i,o,{newAnnotation:c}),this.editData=null,this.isDrawing=!1,this.doneEditMemo(),this.isHandleOutsideImage&&this.configuration.preventHandleOutsideImage&&sr(o.annotationUID),qe(s),c&&Ur(o)},this._dragCallback=r=>{this.isDrawing=!0;const a=r.detail,{currentPoints:i,element:o}=a,s=i.world,{annotation:c,viewportIdsToRender:l,newAnnotation:u}=this.editData,{data:f}=c;this.createMemo(o,c,{newAnnotation:u}),f.handles.points[0]=[...s],c.invalidated=!0,qe(l)},this.cancel=r=>{if(this.isDrawing){this.isDrawing=!1,this._deactivateModify(r),Mn(r);const{annotation:a,viewportIdsToRender:i,newAnnotation:o}=this.editData,{data:s}=a;return a.highlighted=!1,s.handles.activeHandleIndex=null,qe(i),o&&Ur(a),this.editData=null,a.annotationUID}},this._activateModify=r=>{st.isInteractingWithTool=!0,r.addEventListener(B.MOUSE_UP,this._endCallback),r.addEventListener(B.MOUSE_DRAG,this._dragCallback),r.addEventListener(B.MOUSE_CLICK,this._endCallback),r.addEventListener(B.TOUCH_END,this._endCallback),r.addEventListener(B.TOUCH_DRAG,this._dragCallback),r.addEventListener(B.TOUCH_TAP,this._endCallback)},this._deactivateModify=r=>{st.isInteractingWithTool=!1,r.removeEventListener(B.MOUSE_UP,this._endCallback),r.removeEventListener(B.MOUSE_DRAG,this._dragCallback),r.removeEventListener(B.MOUSE_CLICK,this._endCallback),r.removeEventListener(B.TOUCH_END,this._endCallback),r.removeEventListener(B.TOUCH_DRAG,this._dragCallback),r.removeEventListener(B.TOUCH_TAP,this._endCallback)},this.renderAnnotation=(r,a)=>{let i=!1;const{viewport:o}=r,{element:s}=o;let c=nr(this.getToolName(),s);if(!(c!=null&&c.length)||(c=this.filterInteractableAnnotationsForElement(s,c),!(c!=null&&c.length)))return i;const l=this.getTargetId(o),u=o.getRenderingEngine(),f={toolGroupId:this.toolGroupId,toolName:this.getToolName(),viewportId:r.viewport.id};for(let v=0;v<c.length;v++){const g=c[v],d=g.annotationUID,m=g.data,h=m.handles.points[0],C=o.worldToCanvas(h);f.annotationUID=d;const{color:p,lineWidth:S}=this.getAnnotationStyle({annotation:g,styleSpecifier:f});if(m.cachedStats||(m.cachedStats={}),!m.cachedStats[l]||m.cachedStats[l].value===null)m.cachedStats[l]={Modality:null,index:null,value:null},this._calculateCachedStats(g,u,r,ia.StatsUpdated);else if(g.invalidated&&(this._calculateCachedStats(g,u,r),o instanceof yr)){const{referencedImageId:T}=g.metadata;for(const y in m.cachedStats)y.startsWith("imageId")&&u.getStackViewports().find(O=>{const w=ca(T),x=O.hasImageURI(w),P=ca(O.getCurrentImageId());return x&&P!==w})&&delete m.cachedStats[y]}if(!o.getRenderingEngine())return console.warn("Rendering Engine has been destroyed"),i;Hr(a,d,"0",[C],{color:p,lineWidth:S}),i=!0;const D=this.getLinkedTextBoxStyle(f,g);if(!D.visibility)continue;const E=this.configuration.getTextLines(m,l);if(E){const T=[C[0]+6,C[1]-6];P1(a,d,"0",E,[T[0],T[1]],D)}}return i}}isPointNearTool(e,n,r,a){const i=Ae(e),{viewport:o}=i,{data:s}=n,c=s.handles.points[0],l=o.worldToCanvas(c);return sa(r,l)<a}toolSelectedCallback(){}getHandleNearImagePoint(e,n,r,a){const i=Ae(e),{viewport:o}=i,{data:s}=n,c=s.handles.points[0],l=o.worldToCanvas(c);if(sa(r,l)<a===!0)return c}handleSelectedCallback(e,n){const r=e.detail,{element:a}=r;n.highlighted=!0;const i=Bt(a,this.getToolName());this.editData={annotation:n,viewportIdsToRender:i},this._activateModify(a),Yt(a),qe(i),e.preventDefault()}_calculateCachedStats(e,n,r,a=ia.StatsUpdated){const i=e.data,{renderingEngineId:o,viewport:s}=r,{element:c}=s,l=i.handles.points[0],{cachedStats:u}=i,f=Object.keys(u);for(let v=0;v<f.length;v++){const g=f[v],d={isPreScaled:ac(s,g),isSuvScaled:this.isSuvScaled(s,g,e.metadata.referencedImageId)},m=this.getTargetImageData(g);if(!m)continue;const{dimensions:h,imageData:C,metadata:p,voxelManager:S}=m,I=p.Modality;let D=MMe(C,l);if(D=c7(D,D),ga(D,h)){this.isHandleOutsideImage=!1;let E=S.getAtIJKPoint(D);if(g.startsWith("imageId:")){const y=g.split("imageId:")[1],M=ca(y),O=ZS(M)[0];D[2]=O.getCurrentImageIdIndex()}let T;if(I==="US"){const y=dC(m,[D]),M=y.values.every(_=>_!==null);E=M?y.values:E,T=M?y.units:"raw"}else T=mu(I,e.metadata.referencedImageId,d);u[g]={index:D,value:E,Modality:I,modalityUnit:T}}else this.isHandleOutsideImage=!0,u[g]={index:D,Modality:I};e.invalidated=!1,$r(e,c,a)}return u}},Fc.probeDefaults={supportedInteractionTypes:["Mouse","Touch"],configuration:{shadow:!0,preventHandleOutsideImage:!1,getTextLines:_Me}},Fc.hydrate=(e,n,r)=>{const a=wr(e);if(!a)return;const{viewport:i}=a,o=i.getFrameOfReferenceUID(),{viewPlaneNormal:s,viewUp:c}=i.getCamera(),l=new Fc,u=l.getReferencedImageId(i,n[0],s,c),f={annotationUID:(r==null?void 0:r.annotationUID)||Cr(),data:{handles:{points:n}},highlighted:!1,autoGenerated:!1,invalidated:!1,isLocked:!1,isVisible:!0,metadata:{toolName:l.getToolName(),viewPlaneNormal:s,FrameOfReferenceUID:o,referencedImageId:u,...r}};qn(f,i.element),qe([i.id])},Fc);function _Me(t,e){const n=t.cachedStats[e],{index:r,value:a,modalityUnit:i}=n;if(a===void 0||!r)return;const o=[];if(o.push(`(${r[0]}, ${r[1]}, ${r[2]})`),a instanceof Array&&i instanceof Array)for(let s=0;s<a.length;s++)o.push(`${kn(a[s])} ${i[s]}`);else o.push(`${kn(a)} ${i}`);return o}T4.toolName="Probe";class qH extends T4{constructor(e={},n={supportedInteractionTypes:["Mouse","Touch"],configuration:{shadow:!0,preventHandleOutsideImage:!1,getTextLines:OMe}}){super(e,n),this.postMouseDownCallback=r=>{const a=r.detail,{currentPoints:i,element:o}=a,s=i.world,c=Ae(o),{viewport:l,renderingEngine:u}=c;this.isDrawing=!0;const f=l.getCamera(),{viewPlaneNormal:v,viewUp:g}=f,d=this.getReferencedImageId(l,s,v,g),m={invalidated:!0,highlighted:!0,isVisible:!0,metadata:{toolName:this.getToolName(),viewPlaneNormal:[...v],viewUp:[...g],FrameOfReferenceUID:l.getFrameOfReferenceUID(),referencedImageId:d},data:{label:"",handles:{points:[[...s]]},cachedStats:{}}},h=Bt(o,this.getToolName());return this.editData={annotation:m,newAnnotation:!0,viewportIdsToRender:h},this._activateModify(o),Yt(o),r.preventDefault(),qe(h),m},this.postTouchStartCallback=r=>this.postMouseDownCallback(r),this.renderAnnotation=(r,a)=>{let i=!1;const{viewport:o}=r;if(!this.editData)return i;const s=this.filterInteractableAnnotationsForElement(o.element,[this.editData.annotation]);if(!(s!=null&&s.length))return i;const c=this.getTargetId(o),l=o.getRenderingEngine(),u={toolGroupId:this.toolGroupId,toolName:this.getToolName(),viewportId:r.viewport.id},f=this.editData.annotation,v=f.annotationUID,g=f.data,d=g.handles.points[0],m=o.worldToCanvas(d);u.annotationUID=v;const{color:h}=this.getAnnotationStyle({annotation:f,styleSpecifier:u});if(!g.cachedStats[c]||g.cachedStats[c].value===null?(g.cachedStats[c]={Modality:null,index:null,value:null},this._calculateCachedStats(f,l,r)):f.invalidated&&this._calculateCachedStats(f,l,r),!o.getRenderingEngine())return console.warn("Rendering Engine has been destroyed"),i;Hr(a,v,"0",[m],{color:h}),i=!0;const p=this.configuration.getTextLines(g,c);if(p){const S=[m[0]+6,m[1]-6];P1(a,v,"0",p,[S[0],S[1]],this.getLinkedTextBoxStyle(u,f))}return i}}}function OMe(t,e){const n=t.cachedStats[e],{index:r,value:a,modalityUnit:i}=n;if(a===void 0)return;const o=[];return o.push(`(${r[0]}, ${r[1]}, ${r[2]})`),o.push(`${a.toFixed(2)} ${i}`),o}qH.toolName="DragProbe";function iD(t,e,n,r){const a=Xe();gr(a,e,t);const i=qt(...n),o=qt(...r),s=Xe();fr(s,i,o);const c=Eo(s);if(c<1e-4)return{worldWidth:0,worldHeight:0};const l=Gt(s,a)/(c*Eo(a)),f=Math.sqrt(1-l*l)*c,v=l*c;return{worldWidth:f,worldHeight:v}}const{transformWorldToIndex:eA}=Zn;var p1;let jH=(p1=class extends Br{constructor(e={},n={supportedInteractionTypes:["Mouse","Touch"],configuration:{shadow:!0,preventHandleOutsideImage:!1,storePointData:!1,centerPointRadius:0,getTextLines:wMe,statsCalculator:As}}){super(e,n),this.isHandleOutsideImage=!1,this.addNewAnnotation=r=>{const a=r.detail,{currentPoints:i,element:o}=a,s=i.world;i.canvas;const c=Ae(o),{viewport:l,renderingEngine:u}=c;this.isDrawing=!0;const f=l.getCamera(),{viewPlaneNormal:v,viewUp:g}=f,d=this.getReferencedImageId(l,s,v,g),m=l.getFrameOfReferenceUID(),h={highlighted:!0,invalidated:!0,metadata:{toolName:this.getToolName(),viewPlaneNormal:[...v],viewUp:[...g],FrameOfReferenceUID:m,referencedImageId:d,...l.getViewReference({points:[s]})},data:{label:"",handles:{textBox:{hasMoved:!1,worldPosition:[0,0,0],worldBoundingBox:{topLeft:[0,0,0],topRight:[0,0,0],bottomLeft:[0,0,0],bottomRight:[0,0,0]}},points:[[...s],[...s],[...s],[...s]],activeHandleIndex:null},cachedStats:{},initialRotation:l.getRotation()}};qn(h,o);const C=Bt(o,this.getToolName());return this.editData={annotation:h,viewportIdsToRender:C,centerWorld:s,newAnnotation:!0,hasMoved:!1},this._activateDraw(o),Yt(o),r.preventDefault(),qe(C),h},this.isPointNearTool=(r,a,i,o)=>{const s=Ae(r),{viewport:c}=s,{data:l}=a,{points:u}=l.handles,f=u.map(S=>c.worldToCanvas(S)),v=Dd(f),[g,d]=v,m={left:Math.min(g[0],d[0])+o/2,top:Math.min(g[1],d[1])+o/2,width:Math.abs(g[0]-d[0])-o,height:Math.abs(g[1]-d[1])-o},h={left:Math.min(g[0],d[0])-o/2,top:Math.min(g[1],d[1])-o/2,width:Math.abs(g[0]-d[0])+o,height:Math.abs(g[1]-d[1])+o},C=this._pointInEllipseCanvas(m,i);return!!(this._pointInEllipseCanvas(h,i)&&!C)},this.toolSelectedCallback=(r,a)=>{const i=r.detail,{element:o}=i;a.highlighted=!0;const s=Bt(o,this.getToolName());this.editData={annotation:a,viewportIdsToRender:s,movingTextBox:!1},Yt(o),this._activateModify(o),Ae(o),qe(s),r.preventDefault()},this.handleSelectedCallback=(r,a,i)=>{const o=r.detail,{element:s}=o,{data:c}=a;a.highlighted=!0;let l=!1,u,f,v,g,d,m;if(i.worldPosition)l=!0;else{const{points:C}=c.handles,{viewport:p}=Ae(s),{worldToCanvas:S,canvasToWorld:I}=p;u=C.findIndex(E=>E===i);const D=C.map(S);m=D[u],g=Math.abs(D[2][0]-D[3][0]),d=Math.abs(D[0][1]-D[1][1]),f=[(D[2][0]+D[3][0])/2,(D[0][1]+D[1][1])/2],v=I(f)}const h=Bt(s,this.getToolName());this.editData={annotation:a,viewportIdsToRender:h,handleIndex:u,canvasWidth:g,canvasHeight:d,centerWorld:v,originalHandleCanvas:m,movingTextBox:l},this._activateModify(s),Yt(s),qe(h),r.preventDefault()},this._endCallback=r=>{const a=r.detail,{element:i}=a,{annotation:o,viewportIdsToRender:s,newAnnotation:c,hasMoved:l}=this.editData,{data:u}=o;c&&!l||(this.doneEditMemo(),o.highlighted=!1,u.handles.activeHandleIndex=null,this._deactivateModify(i),this._deactivateDraw(i),Mn(i),this.editData=null,this.isDrawing=!1,this.isHandleOutsideImage&&this.configuration.preventHandleOutsideImage&&sr(o.annotationUID),qe(s),c&&Ur(o))},this._dragDrawCallback=r=>{this.isDrawing=!0;const a=r.detail,{element:i}=a,{currentPoints:o}=a,s=o.canvas,c=Ae(i),{viewport:l}=c,{canvasToWorld:u}=l,{annotation:f,viewportIdsToRender:v,centerWorld:g,newAnnotation:d}=this.editData;this.createMemo(i,f,{newAnnotation:d});const m=l.worldToCanvas(g),{data:h}=f,C=Math.abs(s[0]-m[0]),p=Math.abs(s[1]-m[1]),S=[m[0],m[1]-p],I=[m[0],m[1]+p],D=[m[0]-C,m[1]],E=[m[0]+C,m[1]];h.handles.points=[u(S),u(I),u(D),u(E)],f.invalidated=!0,this.editData.hasMoved=!0,qe(v)},this._dragModifyCallback=r=>{this.isDrawing=!0;const a=r.detail,{element:i}=a,{annotation:o,viewportIdsToRender:s,handleIndex:c,movingTextBox:l,newAnnotation:u}=this.editData;this.createMemo(i,o,{newAnnotation:u});const{data:f}=o;if(l){const{deltaPoints:v}=a,g=v.world,{textBox:d}=f.handles,{worldPosition:m}=d;m[0]+=g[0],m[1]+=g[1],m[2]+=g[2],d.hasMoved=!0}else if(c===void 0){const{deltaPoints:v}=a,g=v.world;f.handles.points.forEach(m=>{m[0]+=g[0],m[1]+=g[1],m[2]+=g[2]}),o.invalidated=!0}else this._dragHandle(r),o.invalidated=!0;Ae(i),qe(s)},this._dragHandle=r=>{const a=r.detail,{element:i}=a,{viewport:o}=Ae(i),{canvasToWorld:s,worldToCanvas:c}=o,{annotation:l,canvasWidth:u,canvasHeight:f,handleIndex:v,centerWorld:g,originalHandleCanvas:d}=this.editData,m=o.worldToCanvas(g),{data:h}=l,{points:C}=h.handles,{currentPoints:p}=a,S=p.canvas;if(v===0||v===1){const I=Math.abs(S[1]-m[1]),D=[m[0],m[1]-I],E=[m[0],m[1]+I];C[0]=s(D),C[1]=s(E);const T=S[0]-d[0],y=u/2+T,M=[m[0]-y,m[1]],_=[m[0]+y,m[1]];C[2]=s(M),C[3]=s(_)}else{const I=Math.abs(S[0]-m[0]),D=[m[0]-I,m[1]],E=[m[0]+I,m[1]];C[2]=s(D),C[3]=s(E);const T=S[1]-d[1],y=f/2+T,M=[m[0],m[1]-y],_=[m[0],m[1]+y];C[0]=s(M),C[1]=s(_)}},this.cancel=r=>{if(this.isDrawing){this.isDrawing=!1,this._deactivateDraw(r),this._deactivateModify(r),Mn(r);const{annotation:a,viewportIdsToRender:i,newAnnotation:o}=this.editData,{data:s}=a;return a.highlighted=!1,s.handles.activeHandleIndex=null,qe(i),o&&Ur(a),this.editData=null,a.annotationUID}},this._activateModify=r=>{st.isInteractingWithTool=!0,r.addEventListener(B.MOUSE_UP,this._endCallback),r.addEventListener(B.MOUSE_DRAG,this._dragModifyCallback),r.addEventListener(B.MOUSE_CLICK,this._endCallback),r.addEventListener(B.TOUCH_END,this._endCallback),r.addEventListener(B.TOUCH_DRAG,this._dragModifyCallback),r.addEventListener(B.TOUCH_TAP,this._endCallback)},this._deactivateModify=r=>{st.isInteractingWithTool=!1,r.removeEventListener(B.MOUSE_UP,this._endCallback),r.removeEventListener(B.MOUSE_DRAG,this._dragModifyCallback),r.removeEventListener(B.MOUSE_CLICK,this._endCallback),r.removeEventListener(B.TOUCH_END,this._endCallback),r.removeEventListener(B.TOUCH_DRAG,this._dragModifyCallback),r.removeEventListener(B.TOUCH_TAP,this._endCallback)},this._activateDraw=r=>{st.isInteractingWithTool=!0,r.addEventListener(B.MOUSE_UP,this._endCallback),r.addEventListener(B.MOUSE_DRAG,this._dragDrawCallback),r.addEventListener(B.MOUSE_MOVE,this._dragDrawCallback),r.addEventListener(B.MOUSE_CLICK,this._endCallback),r.addEventListener(B.TOUCH_END,this._endCallback),r.addEventListener(B.TOUCH_DRAG,this._dragDrawCallback),r.addEventListener(B.TOUCH_TAP,this._endCallback)},this._deactivateDraw=r=>{st.isInteractingWithTool=!1,r.removeEventListener(B.MOUSE_UP,this._endCallback),r.removeEventListener(B.MOUSE_DRAG,this._dragDrawCallback),r.removeEventListener(B.MOUSE_MOVE,this._dragDrawCallback),r.removeEventListener(B.MOUSE_CLICK,this._endCallback),r.removeEventListener(B.TOUCH_END,this._endCallback),r.removeEventListener(B.TOUCH_DRAG,this._dragDrawCallback),r.removeEventListener(B.TOUCH_TAP,this._endCallback)},this.renderAnnotation=(r,a)=>{let i=!1;const{viewport:o}=r,{element:s}=o;let c=nr(this.getToolName(),s);if(!(c!=null&&c.length)||(c=this.filterInteractableAnnotationsForElement(s,c),!(c!=null&&c.length)))return i;const l=this.getTargetId(o),u=o.getRenderingEngine(),f={toolGroupId:this.toolGroupId,toolName:this.getToolName(),viewportId:r.viewport.id};for(let v=0;v<c.length;v++){const g=c[v],{annotationUID:d,data:m}=g,{handles:h}=m,{points:C,activeHandleIndex:p}=h;f.annotationUID=d;const{color:S,lineWidth:I,lineDash:D}=this.getAnnotationStyle({annotation:g,styleSpecifier:f}),E=C.map(re=>o.worldToCanvas(re)),T=Dd(E),{centerPointRadius:y}=this.configuration;if(!m.cachedStats[l]||m.cachedStats[l].areaUnit==null)m.cachedStats[l]={Modality:null,area:null,max:null,mean:null,stdDev:null,areaUnit:null},this._calculateCachedStats(g,o,u);else if(g.invalidated&&(this._throttledCalculateCachedStats(g,o,u,r),o instanceof yr)){const{referencedImageId:re}=g.metadata;for(const ue in m.cachedStats)ue.startsWith("imageId")&&u.getStackViewports().find(Te=>{const Fe=ca(re),Ne=Te.hasImageURI(Fe),Re=ca(Te.getCurrentImageId());return Ne&&Re!==Fe})&&delete m.cachedStats[ue]}if(!o.getRenderingEngine())return console.warn("Rendering Engine has been destroyed"),i;let M;if(!Gi(d))continue;!Ya(d)&&!this.editData&&p!==null&&(M=[E[p]]),M&&Hr(a,d,"0",M,{color:S});const _=`${d}-ellipse`,O="0";if(Q_(a,d,O,E,{color:S,lineDash:D,lineWidth:I},_),y>0&&Math.min(Math.abs(T[0][0]-T[1][0])/2,Math.abs(T[0][1]-T[1][1])/2)>3*y){const ue=this._getCanvasEllipseCenter(E);Mo(a,d,`${O}-center`,ue,y,{color:S,lineDash:D,lineWidth:I})}i=!0;const w=this.getLinkedTextBoxStyle(f,g);if(!w.visibility){m.handles.textBox={hasMoved:!1,worldPosition:[0,0,0],worldBoundingBox:{topLeft:[0,0,0],topRight:[0,0,0],bottomLeft:[0,0,0],bottomRight:[0,0,0]}};continue}const x=this.configuration.getTextLines(m,l);if(!x||x.length===0)continue;let P;m.handles.textBox.hasMoved||(P=gs(T),m.handles.textBox.worldPosition=o.canvasToWorld(P));const R=o.worldToCanvas(m.handles.textBox.worldPosition),H=ro(a,d,"1",x,R,E,{},w),{x:F,y:U,width:V,height:X}=H;m.handles.textBox.worldBoundingBox={topLeft:o.canvasToWorld([F,U]),topRight:o.canvasToWorld([F+V,U]),bottomLeft:o.canvasToWorld([F,U+X]),bottomRight:o.canvasToWorld([F+V,U+X])}}return i},this._calculateCachedStats=(r,a,i)=>{var I,D,E;const o=r.data,{element:s}=a,{points:c}=o.handles,l=c.map(T=>a.worldToCanvas(T)),{viewPlaneNormal:u,viewUp:f}=a.getCamera(),[v,g]=Dd(l),d=a.canvasToWorld(v),m=a.canvasToWorld(g),{cachedStats:h}=o,C=Object.keys(h),p=d,S=m;for(let T=0;T<C.length;T++){const y=C[T],M=this.getTargetImageData(y);if(!M)continue;const{dimensions:_,imageData:O,metadata:w,voxelManager:x}=M,P=eA(O,p);P[0]=Math.floor(P[0]),P[1]=Math.floor(P[1]),P[2]=Math.floor(P[2]);const R=eA(O,S);R[0]=Math.floor(R[0]),R[1]=Math.floor(R[1]),R[2]=Math.floor(R[2]),this.isHandleOutsideImage=!this._isInsideVolume(P,R,_);const L=Math.min(P[0],R[0]),H=Math.max(P[0],R[0]),F=Math.min(P[1],R[1]),U=Math.max(P[1],R[1]),V=Math.min(P[2],R[2]),X=Math.max(P[2],R[2]),re=[[L,H],[F,U],[V,X]],De={center:[(d[0]+m[0])/2,(d[1]+m[1])/2,(d[2]+m[2])/2],xRadius:Math.abs(d[0]-m[0])/2,yRadius:Math.abs(d[1]-m[1])/2,zRadius:Math.abs(d[2]-m[2])/2},{worldWidth:pe,worldHeight:Te}=iD(u,f,p,S),Fe=pe===0&&Te===0,Ne=[P,R],{scale:Re,areaUnit:k}=us(M,Ne),A=Math.abs(Math.PI*(pe/2)*(Te/2))/Re/Re,b={isPreScaled:ac(a,y),isSuvScaled:this.isSuvScaled(a,y,r.metadata.referencedImageId)},N=mu(w.Modality,r.metadata.referencedImageId,b),W=x.forEach(this.configuration.statsCalculator.statsCallback,{boundsIJK:re,imageData:O,isInObject:K=>$I(De,K,{fast:!0}),returnPoints:this.configuration.storePointData}),j=this.configuration.statsCalculator.getStatistics();h[y]={Modality:w.Modality,area:A,mean:(I=j.mean)==null?void 0:I.value,max:(D=j.max)==null?void 0:D.value,stdDev:(E=j.stdDev)==null?void 0:E.value,statsArray:j.array,pointsInShape:W,isEmptyArea:Fe,areaUnit:k,modalityUnit:N}}return r.invalidated=!1,$r(r,s),h},this._isInsideVolume=(r,a,i)=>ga(r,i)&&ga(a,i),this._throttledCalculateCachedStats=no(this._calculateCachedStats,100,{trailing:!0})}_pointInEllipseCanvas(e,n){const r=e.width/2,a=e.height/2;if(r<=0||a<=0)return!1;const i=[e.left+r,e.top+a],o=[n[0]-i[0],n[1]-i[1]];return o[0]*o[0]/(r*r)+o[1]*o[1]/(a*a)<=1}_getCanvasEllipseCenter(e){const[n,r,a,i]=e,o=[a[0],r[1]],s=[i[0],n[1]];return[(o[0]+s[0])/2,(o[1]+s[1])/2]}},p1.hydrate=(e,n,r)=>{const a=wr(e);if(!a)return;const{viewport:i}=a,o=i.getFrameOfReferenceUID(),{viewPlaneNormal:s,viewUp:c}=i.getCamera(),l=new p1,u=l.getReferencedImageId(i,n[0],s,c),f={annotationUID:(r==null?void 0:r.annotationUID)||Cr(),data:{handles:{points:n,activeHandleIndex:null},label:"",cachedStats:{}},highlighted:!1,autoGenerated:!1,invalidated:!1,isLocked:!1,isVisible:!0,metadata:{toolName:l.getToolName(),viewPlaneNormal:s,FrameOfReferenceUID:o,referencedImageId:u,...r}};qn(f,i.element),qe([i.id])},p1);function wMe(t,e){const n=t.cachedStats[e],{area:r,mean:a,stdDev:i,max:o,isEmptyArea:s,areaUnit:c,modalityUnit:l}=n,u=[];if(r){const f=s?"Area: Oblique not supported":`Area: ${kn(r)} ${c}`;u.push(f)}return a&&u.push(`Mean: ${kn(a)} ${l}`),o&&u.push(`Max: ${kn(o)} ${l}`),i&&u.push(`Std Dev: ${kn(i)} ${l}`),u}jH.toolName="EllipticalROI";const{transformWorldToIndex:tA}=Zn;var S1;let y4=(S1=class extends Br{constructor(e={},n={supportedInteractionTypes:["Mouse","Touch"],configuration:{shadow:!0,preventHandleOutsideImage:!1,storePointData:!1,centerPointRadius:0,getTextLines:PMe,statsCalculator:As}}){super(e,n),this.isHandleOutsideImage=!1,this.addNewAnnotation=r=>{const a=r.detail,{currentPoints:i,element:o}=a,s=i.world,c=Ae(o),{viewport:l,renderingEngine:u}=c;this.isDrawing=!0;const f=l.getCamera(),{viewPlaneNormal:v,viewUp:g}=f,d=this.getReferencedImageId(l,s,v,g),m=l.getFrameOfReferenceUID(),h={highlighted:!0,invalidated:!0,metadata:{toolName:this.getToolName(),viewPlaneNormal:[...v],viewUp:[...g],FrameOfReferenceUID:m,referencedImageId:d,...l.getViewReference({points:[s]})},data:{label:"",handles:{textBox:{hasMoved:!1,worldPosition:[0,0,0],worldBoundingBox:{topLeft:[0,0,0],topRight:[0,0,0],bottomLeft:[0,0,0],bottomRight:[0,0,0]}},points:[[...s],[...s]],activeHandleIndex:null},cachedStats:{}}};qn(h,o);const C=Bt(o,this.getToolName());return this.editData={annotation:h,viewportIdsToRender:C,newAnnotation:!0,hasMoved:!1},this._activateDraw(o),Yt(o),r.preventDefault(),qe(C),h},this.isPointNearTool=(r,a,i,o)=>{const s=Ae(r),{viewport:c}=s,{data:l}=a,{points:u}=l.handles,f=u.map(d=>c.worldToCanvas(d)),v=$l(f),g=$l([f[0],i]);return Math.abs(g-v)<o/2},this.toolSelectedCallback=(r,a)=>{const i=r.detail,{element:o}=i;a.highlighted=!0;const s=Bt(o,this.getToolName());this.editData={annotation:a,viewportIdsToRender:s,movingTextBox:!1},Yt(o),this._activateModify(o),Ae(o),qe(s),r.preventDefault()},this.handleSelectedCallback=(r,a,i)=>{const o=r.detail,{element:s}=o,{data:c}=a;a.highlighted=!0;let l=!1,u;if(i.worldPosition)l=!0;else{const{points:v}=c.handles;u=v.findIndex(g=>g===i)}const f=Bt(s,this.getToolName());this.editData={annotation:a,viewportIdsToRender:f,handleIndex:u,movingTextBox:l},this._activateModify(s),Yt(s),Ae(s),qe(f),r.preventDefault()},this._endCallback=r=>{const a=r.detail,{element:i}=a,{annotation:o,viewportIdsToRender:s,newAnnotation:c,hasMoved:l}=this.editData,{data:u}=o;c&&!l||(this.doneEditMemo(),o.highlighted=!1,u.handles.activeHandleIndex=null,this._deactivateModify(i),this._deactivateDraw(i),Mn(i),Ae(i),this.editData=null,this.isDrawing=!1,this.isHandleOutsideImage&&this.configuration.preventHandleOutsideImage&&sr(o.annotationUID),qe(s),c&&Ur(o))},this._dragDrawCallback=r=>{this.isDrawing=!0;const a=r.detail,{element:i}=a,{currentPoints:o}=a,s=o.canvas,c=Ae(i),{viewport:l}=c,{canvasToWorld:u}=l,{annotation:f,viewportIdsToRender:v,newAnnotation:g}=this.editData;this.createMemo(i,f,{newAnnotation:g});const{data:d}=f;d.handles.points=[d.handles.points[0],u(s)],f.invalidated=!0,this.editData.hasMoved=!0,qe(v)},this._dragModifyCallback=r=>{this.isDrawing=!0;const a=r.detail,{element:i}=a,{annotation:o,viewportIdsToRender:s,handleIndex:c,movingTextBox:l,newAnnotation:u}=this.editData;this.createMemo(i,o,{newAnnotation:u});const{data:f}=o;if(l){const{deltaPoints:v}=a,g=v.world,{textBox:d}=f.handles,{worldPosition:m}=d;m[0]+=g[0],m[1]+=g[1],m[2]+=g[2],d.hasMoved=!0}else if(c===void 0){const{deltaPoints:v}=a,g=v.world;f.handles.points.forEach(m=>{m[0]+=g[0],m[1]+=g[1],m[2]+=g[2]}),o.invalidated=!0}else this._dragHandle(r),o.invalidated=!0;Ae(i),qe(s)},this._dragHandle=r=>{const a=r.detail,{element:i}=a,o=Ae(i),{canvasToWorld:s,worldToCanvas:c}=o.viewport,{annotation:l,handleIndex:u}=this.editData,{data:f}=l,{points:v}=f.handles,g=v.map(h=>c(h)),{currentPoints:d}=a,m=d.canvas;if(u===0){const h=m[0]-g[0][0],C=m[1]-g[0][1],p=m,S=[g[1][0]+h,g[1][1]+C];v[0]=s(p),v[1]=s(S)}else v[1]=s(m)},this.cancel=r=>{if(this.isDrawing){this.isDrawing=!1,this._deactivateDraw(r),this._deactivateModify(r),Mn(r);const{annotation:a,viewportIdsToRender:i,newAnnotation:o}=this.editData,{data:s}=a;return a.highlighted=!1,s.handles.activeHandleIndex=null,qe(i),o&&Ur(a),this.editData=null,a.annotationUID}},this._activateModify=r=>{st.isInteractingWithTool=!0,r.addEventListener(B.MOUSE_UP,this._endCallback),r.addEventListener(B.MOUSE_DRAG,this._dragModifyCallback),r.addEventListener(B.MOUSE_CLICK,this._endCallback),r.addEventListener(B.TOUCH_END,this._endCallback),r.addEventListener(B.TOUCH_DRAG,this._dragModifyCallback),r.addEventListener(B.TOUCH_TAP,this._endCallback)},this._deactivateModify=r=>{st.isInteractingWithTool=!1,r.removeEventListener(B.MOUSE_UP,this._endCallback),r.removeEventListener(B.MOUSE_DRAG,this._dragModifyCallback),r.removeEventListener(B.MOUSE_CLICK,this._endCallback),r.removeEventListener(B.TOUCH_END,this._endCallback),r.removeEventListener(B.TOUCH_DRAG,this._dragModifyCallback),r.removeEventListener(B.TOUCH_TAP,this._endCallback)},this._activateDraw=r=>{st.isInteractingWithTool=!0,r.addEventListener(B.MOUSE_UP,this._endCallback),r.addEventListener(B.MOUSE_DRAG,this._dragDrawCallback),r.addEventListener(B.MOUSE_MOVE,this._dragDrawCallback),r.addEventListener(B.MOUSE_CLICK,this._endCallback),r.addEventListener(B.TOUCH_END,this._endCallback),r.addEventListener(B.TOUCH_DRAG,this._dragDrawCallback),r.addEventListener(B.TOUCH_TAP,this._endCallback)},this._deactivateDraw=r=>{st.isInteractingWithTool=!1,r.removeEventListener(B.MOUSE_UP,this._endCallback),r.removeEventListener(B.MOUSE_DRAG,this._dragDrawCallback),r.removeEventListener(B.MOUSE_MOVE,this._dragDrawCallback),r.removeEventListener(B.MOUSE_CLICK,this._endCallback),r.removeEventListener(B.TOUCH_END,this._endCallback),r.removeEventListener(B.TOUCH_DRAG,this._dragDrawCallback),r.removeEventListener(B.TOUCH_TAP,this._endCallback)},this.renderAnnotation=(r,a)=>{let i=!1;const{viewport:o}=r,{element:s}=o;let c=nr(this.getToolName(),s);if(!(c!=null&&c.length)||(c=this.filterInteractableAnnotationsForElement(s,c),!(c!=null&&c.length)))return i;const l=this.getTargetId(o),u=o.getRenderingEngine(),f={toolGroupId:this.toolGroupId,toolName:this.getToolName(),viewportId:r.viewport.id};for(let v=0;v<c.length;v++){const g=c[v],{annotationUID:d,data:m}=g,{handles:h}=m,{points:C,activeHandleIndex:p}=h;f.annotationUID=d;const{color:S,lineWidth:I,lineDash:D}=this.getAnnotationStyle({annotation:g,styleSpecifier:f}),E=C.map(De=>o.worldToCanvas(De)),T=E[0],y=$l(E),M=Yf(E),{centerPointRadius:_}=this.configuration;if(!m.cachedStats[l]||m.cachedStats[l].areaUnit==null)m.cachedStats[l]={Modality:null,area:null,max:null,mean:null,stdDev:null,areaUnit:null,radius:null,radiusUnit:null,perimeter:null},this._calculateCachedStats(g,o,u,r);else if(g.invalidated&&(this._throttledCalculateCachedStats(g,o,u,r),o instanceof yr)){const{referencedImageId:De}=g.metadata;for(const pe in m.cachedStats)pe.startsWith("imageId")&&u.getStackViewports().find(Ne=>{const Re=ca(De),k=Ne.hasImageURI(Re),A=ca(Ne.getCurrentImageId());return k&&A!==Re})&&delete m.cachedStats[pe]}if(!o.getRenderingEngine())return console.warn("Rendering Engine has been destroyed"),i;let O;if(!Gi(d))continue;!Ya(d)&&!this.editData&&p!==null&&(O=[E[p]]),O&&Hr(a,d,"0",O,{color:S});const w=`${d}-circle`,x="0";Mo(a,d,x,T,y,{color:S,lineDash:D,lineWidth:I},w),_>0&&y>3*_&&Mo(a,d,`${x}-center`,T,_,{color:S,lineDash:D,lineWidth:I}),i=!0;const P=this.getLinkedTextBoxStyle(f,g);if(!P.visibility){m.handles.textBox={hasMoved:!1,worldPosition:[0,0,0],worldBoundingBox:{topLeft:[0,0,0],topRight:[0,0,0],bottomLeft:[0,0,0],bottomRight:[0,0,0]}};continue}const R=this.configuration.getTextLines(m,l);if(!R||R.length===0)continue;let L;m.handles.textBox.hasMoved||(L=gs(M),m.handles.textBox.worldPosition=o.canvasToWorld(L));const H=o.worldToCanvas(m.handles.textBox.worldPosition),U=ro(a,d,"1",R,H,E,{},P),{x:V,y:X,width:re,height:ue}=U;m.handles.textBox.worldBoundingBox={topLeft:o.canvasToWorld([V,X]),topRight:o.canvasToWorld([V+re,X]),bottomLeft:o.canvasToWorld([V,X+ue]),bottomRight:o.canvasToWorld([V+re,X+ue])}}return i},this._calculateCachedStats=(r,a,i,o)=>{var D,E,T;const s=r.data,{element:c}=a,{points:l}=s.handles,u=l.map(y=>a.worldToCanvas(y)),{viewPlaneNormal:f,viewUp:v}=a.getCamera(),[g,d]=Yf(u),m=a.canvasToWorld(g),h=a.canvasToWorld(d),{cachedStats:C}=s,p=Object.keys(C),S=m,I=h;for(let y=0;y<p.length;y++){const M=p[y],_=this.getTargetImageData(M);if(!_)continue;const{dimensions:O,imageData:w,metadata:x,voxelManager:P}=_,R=tA(w,S);R[0]=Math.floor(R[0]),R[1]=Math.floor(R[1]),R[2]=Math.floor(R[2]);const L=tA(w,I);if(L[0]=Math.floor(L[0]),L[1]=Math.floor(L[1]),L[2]=Math.floor(L[2]),this._isInsideVolume(R,L,O)){const H=Math.min(R[0],L[0]),F=Math.max(R[0],L[0]),U=Math.min(R[1],L[1]),V=Math.max(R[1],L[1]),X=Math.min(R[2],L[2]),re=Math.max(R[2],L[2]),ue=[[H,F],[U,V],[X,re]],pe={center:[(m[0]+h[0])/2,(m[1]+h[1])/2,(m[2]+h[2])/2],xRadius:Math.abs(m[0]-h[0])/2,yRadius:Math.abs(m[1]-h[1])/2,zRadius:Math.abs(m[2]-h[2])/2},{worldWidth:Te,worldHeight:Fe}=iD(f,v,S,I),Ne=Te===0&&Fe===0,Re=[R,L],{scale:k,unit:A,areaUnit:b}=us(_,Re),N=F_(_),W=Math.abs(Math.PI*(Te/k/2)*(Fe/N/k/2)),j={isPreScaled:ac(a,M),isSuvScaled:this.isSuvScaled(a,M,r.metadata.referencedImageId)},K=mu(x.Modality,r.metadata.referencedImageId,j),ge=P.forEach(this.configuration.statsCalculator.statsCallback,{isInObject:we=>$I(pe,we,{fast:!0}),boundsIJK:ue,imageData:w,returnPoints:this.configuration.storePointData}),ye=this.configuration.statsCalculator.getStatistics();C[M]={Modality:x.Modality,area:W,mean:(D=ye.mean)==null?void 0:D.value,max:(E=ye.max)==null?void 0:E.value,pointsInShape:ge,stdDev:(T=ye.stdDev)==null?void 0:T.value,statsArray:ye.array,isEmptyArea:Ne,areaUnit:b,radius:Te/2/k,radiusUnit:A,perimeter:2*Math.PI*(Te/2)/k,modalityUnit:K}}else this.isHandleOutsideImage=!0,C[M]={Modality:x.Modality}}return r.invalidated=!1,$r(r,c),C},this._isInsideVolume=(r,a,i)=>ga(r,i)&&ga(a,i),this._throttledCalculateCachedStats=no(this._calculateCachedStats,100,{trailing:!0})}},S1.hydrate=(e,n,r)=>{const a=wr(e);if(!a)return;const{viewport:i}=a,o=i.getFrameOfReferenceUID(),{viewPlaneNormal:s,viewUp:c}=i.getCamera(),l=new S1,u=l.getReferencedImageId(i,n[0],s,c),f={annotationUID:(r==null?void 0:r.annotationUID)||Cr(),data:{handles:{points:n,textBox:{hasMoved:!1,worldPosition:[0,0,0],worldBoundingBox:{topLeft:[0,0,0],topRight:[0,0,0],bottomLeft:[0,0,0],bottomRight:[0,0,0]}},activeHandleIndex:null},label:"",cachedStats:{}},highlighted:!1,autoGenerated:!1,invalidated:!1,isLocked:!1,isVisible:!0,metadata:{toolName:l.getToolName(),viewPlaneNormal:s,FrameOfReferenceUID:o,referencedImageId:u,...r}};qn(f,i.element),qe([i.id])},S1);function PMe(t,e){const n=t.cachedStats[e],{radius:r,radiusUnit:a,area:i,mean:o,stdDev:s,max:c,isEmptyArea:l,areaUnit:u,modalityUnit:f}=n,v=[];if(r){const g=l?"Radius: Oblique not supported":`Radius: ${kn(r)} ${a}`;v.push(g)}if(i){const g=l?"Area: Oblique not supported":`Area: ${kn(i)} ${u}`;v.push(g)}return o&&v.push(`Mean: ${kn(o)} ${f}`),c&&v.push(`Max: ${kn(c)} ${f}`),s&&v.push(`Std Dev: ${kn(s)} ${f}`),v}y4.toolName="CircleROI";const t2=5;class QH extends Br{constructor(e={},n={supportedInteractionTypes:["Mouse","Touch"],configuration:{shadow:!0,preventHandleOutsideImage:!1,degrees:[45,135,225,315],diameters:[10,30,60]}}){super(e,n),this.isHandleOutsideImage=!1,this.addNewAnnotation=r=>{const a=r.detail,{currentPoints:i,element:o}=a,s=i.world,c=Ae(o),{viewport:l,renderingEngine:u}=c;this.isDrawing=!0;const f=l.getCamera(),{viewPlaneNormal:v,viewUp:g}=f,d=this.getReferencedImageId(l,s,v,g),m=l.getFrameOfReferenceUID(),h={highlighted:!0,invalidated:!0,metadata:{toolName:this.getToolName(),viewPlaneNormal:[...v],viewUp:[...g],FrameOfReferenceUID:m,referencedImageId:d,...l.getViewReference({points:[s]})},data:{label:"",handles:{points:[[...s]]}}};qn(h,o);const C=Bt(o,this.getToolName());return this.editData={annotation:h,viewportIdsToRender:C,newAnnotation:!0},this._activateDraw(o),Yt(o),r.preventDefault(),qe(C),h},this.isPointNearTool=(r,a,i,o)=>{const s=Ae(r),{viewport:c}=s,{data:l}=a,{points:u}=l.handles,f=c.worldToCanvas(u[0]),v=$l([f,i]);return Math.abs(v)<o},this.toolSelectedCallback=(r,a)=>{const i=r.detail,{element:o}=i;a.highlighted=!0;const s=Bt(o,this.getToolName());this.editData={annotation:a,viewportIdsToRender:s},Yt(o),this._activateModify(o),Ae(o),qe(s),r.preventDefault()},this.handleSelectedCallback=(r,a)=>{const i=r.detail,{element:o}=i;a.highlighted=!0;const s=Bt(o,this.getToolName());this.editData={annotation:a,viewportIdsToRender:s},this._activateModify(o),Yt(o),Ae(o),qe(s),r.preventDefault()},this._endCallback=r=>{const a=r.detail,{element:i}=a,{annotation:o,viewportIdsToRender:s,newAnnotation:c,hasMoved:l}=this.editData,{data:u}=o;c&&!l||(o.highlighted=!1,u.handles.activeHandleIndex=null,this._deactivateModify(i),this._deactivateDraw(i),Mn(i),Ae(i),this.editData=null,this.isDrawing=!1,this.isHandleOutsideImage&&this.configuration.preventHandleOutsideImage&&sr(o.annotationUID),qe(s),c&&Ur(o))},this._dragDrawCallback=r=>{this.isDrawing=!0;const a=r.detail,{element:i}=a,{currentPoints:o}=a,s=o.canvas,c=Ae(i),{renderingEngine:l,viewport:u}=c,{canvasToWorld:f}=u,{annotation:v,viewportIdsToRender:g}=this.editData,{data:d}=v;d.handles.points=[f(s),f(s)],v.invalidated=!0,this.editData.hasMoved=!0,qe(g)},this._dragModifyCallback=r=>{this.isDrawing=!0;const a=r.detail,{element:i}=a,{annotation:o,viewportIdsToRender:s}=this.editData,{data:c}=o,{deltaPoints:l}=a,u=l.world;c.handles.points.forEach(v=>{v[0]+=u[0],v[1]+=u[1],v[2]+=u[2]}),o.invalidated=!0,Ae(i),qe(s)},this._dragHandle=r=>{const a=r.detail,{element:i}=a,o=Ae(i),{canvasToWorld:s,worldToCanvas:c}=o.viewport,{annotation:l}=this.editData,{data:u}=l,{points:f}=u.handles,v=f.map(S=>c(S)),{currentPoints:g}=a,d=g.canvas,m=d[0]-v[0][0],h=d[1]-v[0][1],C=d,p=[v[1][0]+m,v[1][1]+h];f[0]=s(C),f[1]=s(p)},this.cancel=r=>{if(this.isDrawing){this.isDrawing=!1,this._deactivateDraw(r),this._deactivateModify(r),Mn(r);const{annotation:a,viewportIdsToRender:i,newAnnotation:o}=this.editData,{data:s}=a;return a.highlighted=!1,s.handles.activeHandleIndex=null,Ae(r),qe(i),o&&Ur(a),this.editData=null,a.annotationUID}},this._activateModify=r=>{st.isInteractingWithTool=!0,r.addEventListener(B.MOUSE_UP,this._endCallback),r.addEventListener(B.MOUSE_DRAG,this._dragModifyCallback),r.addEventListener(B.MOUSE_CLICK,this._endCallback),r.addEventListener(B.TOUCH_END,this._endCallback),r.addEventListener(B.TOUCH_DRAG,this._dragModifyCallback),r.addEventListener(B.TOUCH_TAP,this._endCallback)},this._deactivateModify=r=>{st.isInteractingWithTool=!1,r.removeEventListener(B.MOUSE_UP,this._endCallback),r.removeEventListener(B.MOUSE_DRAG,this._dragModifyCallback),r.removeEventListener(B.MOUSE_CLICK,this._endCallback),r.removeEventListener(B.TOUCH_END,this._endCallback),r.removeEventListener(B.TOUCH_DRAG,this._dragModifyCallback),r.removeEventListener(B.TOUCH_TAP,this._endCallback)},this._activateDraw=r=>{st.isInteractingWithTool=!0,r.addEventListener(B.MOUSE_UP,this._endCallback),r.addEventListener(B.MOUSE_DRAG,this._dragDrawCallback),r.addEventListener(B.MOUSE_MOVE,this._dragDrawCallback),r.addEventListener(B.MOUSE_CLICK,this._endCallback),r.addEventListener(B.TOUCH_END,this._endCallback),r.addEventListener(B.TOUCH_DRAG,this._dragDrawCallback),r.addEventListener(B.TOUCH_TAP,this._endCallback)},this._deactivateDraw=r=>{st.isInteractingWithTool=!1,r.removeEventListener(B.MOUSE_UP,this._endCallback),r.removeEventListener(B.MOUSE_DRAG,this._dragDrawCallback),r.removeEventListener(B.MOUSE_MOVE,this._dragDrawCallback),r.removeEventListener(B.MOUSE_CLICK,this._endCallback),r.removeEventListener(B.TOUCH_END,this._endCallback),r.removeEventListener(B.TOUCH_DRAG,this._dragDrawCallback),r.removeEventListener(B.TOUCH_TAP,this._endCallback)},this.renderAnnotation=(r,a)=>{let i=!1;const{viewport:o}=r,{element:s}=o;let c=nr(this.getToolName(),s);if(!(c!=null&&c.length)||(c=this.filterInteractableAnnotationsForElement(s,c),!(c!=null&&c.length)))return i;const l={toolGroupId:this.toolGroupId,toolName:this.getToolName(),viewportId:r.viewport.id};for(let u=0;u<c.length;u++){const f=c[u],{annotationUID:v,data:g}=f,{handles:d}=g,{points:m}=d;l.annotationUID=v;const{color:h,lineWidth:C,lineDash:p}=this.getAnnotationStyle({annotation:f,styleSpecifier:l}),I=m.map(O=>o.worldToCanvas(O))[0];if(!o.getRenderingEngine())return console.warn("Rendering Engine has been destroyed"),i;if(!Gi(v))continue;let D=`${v}-crosshair-vertical`,E=[I[0],I[1]+t2],T=[I[0],I[1]-t2];tr(a,v,D,E,T,{color:h,lineDash:p,lineWidth:C}),D=`${v}-crosshair-horizontal`,E=[I[0]+t2,I[1]],T=[I[0]-t2,I[1]],tr(a,v,D,E,T,{color:h,lineDash:p,lineWidth:C});const y=this.configuration.diameters.map(O=>this.worldMeasureToCanvas(O,o));for(let O=0;O<y.length;O++){const w=`${v}-circle-${O}`,x=`${v}-circle-${O}`;Mo(a,v,x,I,y[O]/2,{color:h,lineDash:p,lineWidth:C},w)}const M=O=>O*Math.PI/180,_=this.configuration.degrees.map(O=>M(O));for(let O=0;O<_.length;O++){const w=`${v}-line-${O}`,x=[Math.cos(_[O])*y[0]/2+I[0],Math.sin(_[O])*y[0]/2+I[1]],P=[Math.cos(_[O])*y[2]/2+I[0],Math.sin(_[O])*y[2]/2+I[1]];tr(a,v,w,x,P,{color:h,lineDash:p,lineWidth:C})}i=!0}return i}}worldMeasureToCanvas(e,n){const r=n.canvasToWorld([n.canvas.width/2,n.canvas.height/2]),{viewUp:a}=n.getCamera(),i=Hn(Xe(),r,a,e),o=n.worldToCanvas(r),s=n.worldToCanvas(i);return Math.sqrt(Math.pow(s[0]-o[0],2)+Math.pow(s[1]-o[1],2))}}QH.toolName="ETDRSGrid";const nA=3,rA=10,AMe={resolution:20,controlPointAdditionDistance:6,controlPointDeletionDistance:6,showControlPointsConnectors:!1,controlPointAdditionEnabled:!0,controlPointDeletionEnabled:!0};var Ec;(function(t){t.Cardinal="CARDINAL",t.Linear="LINEAR",t.CatmullRom="CATMULLROM",t.BSpline="BSPLINE"})(Ec||(Ec={}));var Od;(function(t){t.AddControlPoint="addControlPoint",t.DeleteControlPoint="deleteControlPoint"})(Od||(Od={}));const Uf=class Uf extends pm{constructor(e={},n={supportedInteractionTypes:["Mouse","Touch"],configuration:{preventHandleOutsideImage:!1,calculateStats:!0,getTextLines:xMe,contourHoleAdditionModifierKey:mi.Shift,decimate:{enabled:!1,epsilon:.1},spline:{configuration:{[Ec.Cardinal]:{Class:Tm,scale:.5},[Ec.CatmullRom]:{Class:DH},[Ec.Linear]:{Class:EH},[Ec.BSpline]:{Class:IH,controlPointAdditionEnabled:!1,controlPointDeletionEnabled:!1,showControlPointsConnectors:!0}},type:Ec.CatmullRom,drawPreviewEnabled:!0,lastControlPointDeletionKeys:["Backspace","Delete"]},actions:{[Od.AddControlPoint]:{method:"addControlPointCallback",bindings:[{mouseButton:ec.Primary,modifierKey:mi.Shift}]},[Od.DeleteControlPoint]:{method:"deleteControlPointCallback",bindings:[{mouseButton:ec.Primary,modifierKey:mi.Ctrl}]}}}}){super(e,n),this.isHandleOutsideImage=!1,this.fireChangeOnUpdate=null,this.isPointNearTool=(r,a,i,o)=>{const{instance:s}=a.data.spline;return s.isPointNearCurve(i,o)},this.toolSelectedCallback=(r,a)=>{const i=r.detail,{element:o}=i;a.highlighted=!0;const s=Bt(o,this.getToolName());this.editData={annotation:a,viewportIdsToRender:s,movingTextBox:!1},this._activateModify(o),qe(s),r.preventDefault()},this.handleSelectedCallback=(r,a,i)=>{const o=r.detail,{element:s}=o,{data:c}=a;a.highlighted=!0;let l=!1,u;if(i.worldPosition)l=!0;else{const{points:v}=c.handles;u=v.findIndex(g=>g===i)}const f=Bt(s,this.getToolName());this.editData={annotation:a,viewportIdsToRender:f,handleIndex:u,movingTextBox:l},this._activateModify(s),qe(f),r.preventDefault()},this._endCallback=r=>{const a=r.detail,{element:i}=a,{annotation:o,viewportIdsToRender:s,newAnnotation:c,contourHoleProcessingEnabled:l}=this.editData,{data:u}=o;o.autoGenerated=!1,u.handles.activeHandleIndex=null,this._deactivateModify(i),this._deactivateDraw(i),Mn(i);const f=Ae(i),v=this.getTargetImageData(this.getTargetId(f.viewport)),{imageData:g,dimensions:d}=v;this.isHandleOutsideImage=u.handles.points.map(h=>Da(g,h)).some(h=>!ga(h,d)),this.isHandleOutsideImage&&this.configuration.preventHandleOutsideImage&&sr(o.annotationUID);const m=c?ia.Completed:ia.HandlesUpdated;this.fireChangeOnUpdate?(this.fireChangeOnUpdate.annotationUID=o.annotationUID,this.fireChangeOnUpdate.changeType=m):this.fireChangeOnUpdate={annotationUID:o.annotationUID,changeType:m,contourHoleProcessingEnabled:l},qe(s),this.doneEditMemo(),this.editData=null,this.isDrawing=!1},this._keyDownCallback=r=>{const a=r.detail,{element:i}=a,o=a.key??"",{lastControlPointDeletionKeys:s}=this.configuration.spline;if(!s.includes(o))return;const{annotation:l}=this.editData,{data:u}=l;if(u.handles.points.length===nA){this.cancel(i);return}else{const f=u.handles.points.length-1;this._deleteControlPointByIndex(i,l,f)}r.preventDefault()},this._mouseMoveCallback=r=>{const{drawPreviewEnabled:a}=this.configuration.spline;if(!a)return;const{element:i}=r.detail;Ae(i);const o=Bt(i,this.getToolName());this.editData.lastCanvasPoint=r.detail.currentPoints.canvas,qe(o),r.preventDefault()},this._mouseDownCallback=r=>{const a=r.type===B.MOUSE_DOUBLE_CLICK,{annotation:i,viewportIdsToRender:o}=this.editData,{data:s}=i;if(s.contour.closed)return;this.doneEditMemo();const c=r.detail,{currentPoints:l,element:u}=c,{canvas:f,world:v}=l;let g=s.handles.points.length>=2&&a,d=!0;if(s.handles.points.length&&this.createMemo(u,i,{newAnnotation:s.handles.points.length===1}),s.handles.points.length>=3){this.createMemo(u,i);const{instance:m}=s.spline,h=m.getClosestControlPointWithinDistance(f,rA);(h==null?void 0:h.index)===0&&(d=!1,g=!0)}d&&s.handles.points.push(v),s.contour.closed=s.contour.closed||g,i.invalidated=!0,qe(o),s.contour.closed&&this._endCallback(r),r.preventDefault()},this._dragCallback=r=>{this.isDrawing=!0;const a=r.detail,{element:i}=a,{annotation:o,viewportIdsToRender:s,handleIndex:c,movingTextBox:l,newAnnotation:u}=this.editData,{data:f}=o;if(this.createMemo(i,o,{newAnnotation:u}),l){const{deltaPoints:v}=a,g=v.world,{textBox:d}=f.handles,{worldPosition:m}=d;m[0]+=g[0],m[1]+=g[1],m[2]+=g[2],d.hasMoved=!0}else if(c===void 0){const{deltaPoints:v}=a,g=v.world;this.moveAnnotation(o,g)}else{const{currentPoints:v}=a,g=v.world;f.handles.points[c]=[...g],o.invalidated=!0}this.editData.hasMoved=!0,Ae(i),qe(s)},this.triggerAnnotationCompleted=(r,a)=>{const i=B.ANNOTATION_COMPLETED,o={annotation:r,changeType:ia.Completed,contourHoleProcessingEnabled:a};Dt(ot,i,o)},this.triggerAnnotationModified=(r,a,i=ia.StatsUpdated)=>{const{viewportId:o,renderingEngineId:s}=a,c=B.ANNOTATION_MODIFIED;Dt(ot,c,{annotation:r,viewportId:o,renderingEngineId:s,changeType:i})},this.triggerChangeEvent=(r,a,i=ia.StatsUpdated,o)=>{i===ia.Completed?this.triggerAnnotationCompleted(r,o):this.triggerAnnotationModified(r,a,i)},this._activateModify=r=>{st.isInteractingWithTool=!0,r.addEventListener(B.MOUSE_UP,this._endCallback),r.addEventListener(B.MOUSE_DRAG,this._dragCallback),r.addEventListener(B.MOUSE_CLICK,this._endCallback),r.addEventListener(B.TOUCH_END,this._endCallback),r.addEventListener(B.TOUCH_DRAG,this._dragCallback),r.addEventListener(B.TOUCH_TAP,this._endCallback)},this._deactivateModify=r=>{st.isInteractingWithTool=!1,r.removeEventListener(B.MOUSE_UP,this._endCallback),r.removeEventListener(B.MOUSE_DRAG,this._dragCallback),r.removeEventListener(B.MOUSE_CLICK,this._endCallback),r.removeEventListener(B.TOUCH_END,this._endCallback),r.removeEventListener(B.TOUCH_DRAG,this._dragCallback),r.removeEventListener(B.TOUCH_TAP,this._endCallback)},this._activateDraw=r=>{st.isInteractingWithTool=!0,r.addEventListener(B.KEY_DOWN,this._keyDownCallback),r.addEventListener(B.MOUSE_MOVE,this._mouseMoveCallback),r.addEventListener(B.MOUSE_DOWN,this._mouseDownCallback),r.addEventListener(B.MOUSE_DOUBLE_CLICK,this._mouseDownCallback),r.addEventListener(B.TOUCH_TAP,this._mouseDownCallback)},this._deactivateDraw=r=>{st.isInteractingWithTool=!1,r.removeEventListener(B.KEY_DOWN,this._keyDownCallback),r.removeEventListener(B.MOUSE_MOVE,this._mouseMoveCallback),r.removeEventListener(B.MOUSE_DOWN,this._mouseDownCallback),r.removeEventListener(B.MOUSE_DOUBLE_CLICK,this._mouseDownCallback),r.removeEventListener(B.TOUCH_TAP,this._mouseDownCallback)},this._renderStats=(r,a,i,o)=>{const s=r.data,c=this.getTargetId(a);if(!s.spline.instance.closed||!o.visibility)return;const l=this.configuration.getTextLines(s,c);if(!l||l.length===0)return;const u=s.handles.points.map(p=>a.worldToCanvas(p));if(!s.handles.textBox.hasMoved){const p=gs(u);s.handles.textBox.worldPosition=a.canvasToWorld(p)}const f=a.worldToCanvas(s.handles.textBox.worldPosition),g=ro(i,r.annotationUID??"","textBox",l,f,u,{},o),{x:d,y:m,width:h,height:C}=g;s.handles.textBox.worldBoundingBox={topLeft:a.canvasToWorld([d,m]),topRight:a.canvasToWorld([d+h,m]),bottomLeft:a.canvasToWorld([d,m+C]),bottomRight:a.canvasToWorld([d+h,m+C])}},this.addControlPointCallback=(r,a)=>{const{data:i}=a,o=i.spline.type,s=this._getSplineConfig(o),c=s.controlPointAdditionDistance;if(s.controlPointAdditionEnabled===!1)return;const l=r.detail,{element:u}=l,f=Ae(u),{renderingEngine:v,viewport:g}=f,{canvasToWorld:d}=g,{instance:m}=i.spline,h=r.detail.currentPoints.canvas,C=m.getClosestPoint(h);if(C.distance>c)return;const{index:p,point:S}=m.addControlPointAtU(C.uValue);i.handles.points.splice(p,0,d(S)),a.invalidated=!0;const I=Bt(u,this.getToolName());qe(I)},this.deleteControlPointCallback=(r,a)=>{const i=a.data.spline.type,o=this._getSplineConfig(i),s=o.controlPointDeletionDistance;if(o.controlPointDeletionEnabled===!1)return;const c=r.detail,{element:l,currentPoints:u}=c,{canvas:f}=u,{instance:v}=a.data.spline,g=v.getClosestControlPointWithinDistance(f,s);g&&this._deleteControlPointByIndex(l,a,g.index)},this._calculateCachedStats=(r,a)=>{if(!this.configuration.calculateStats)return;const i=r.data;if(!i.contour.closed)return;const o=Ae(a);if(!o)return;const{viewport:s}=o,{cachedStats:c}=i,{polyline:l}=i.contour,u=Object.keys(c);for(let f=0;f<u.length;f++){const v=u[f],g=this.getTargetImageData(v);if(!g)continue;const{metadata:d}=g,m=l.map(_=>s.worldToCanvas(_)),h=m[0],C=s.canvasToWorld(h),p=s.canvasToWorld([h[0]+1,h[1]]),S=s.canvasToWorld([h[0],h[1]+1]),I=Si(C,p),D=Si(C,S),{imageData:E}=g,{scale:T,areaUnit:y}=us(g,()=>{const{maxX:_,maxY:O,minX:w,minY:x}=pv(m),P=s.canvasToWorld([w,x]),R=Da(E,P),L=s.canvasToWorld([_,O]),H=Da(E,L);return[R,H]});let M=ph(m)/T/T;M*=I*D,c[v]={Modality:d.Modality,area:M,areaUnit:y}}return this.triggerAnnotationModified(r,o,ia.StatsUpdated),c},this._throttledCalculateCachedStats=no(this._calculateCachedStats,100,{trailing:!0})}addNewAnnotation(e){const n=e.detail,{currentPoints:r,element:a}=n,{canvas:i}=r,o=qv(e.detail.event)===this.configuration.contourHoleAdditionModifierKey;Ae(a);const s=this.createAnnotation(e);this.isDrawing=!0,this.addAnnotation(s,a);const c=Bt(a,this.getToolName());return this.editData={annotation:s,viewportIdsToRender:c,movingTextBox:!1,newAnnotation:!0,hasMoved:!1,lastCanvasPoint:i,contourHoleProcessingEnabled:o},this._activateDraw(a),e.preventDefault(),qe(c),s}cancel(e){if(!this.isDrawing)return;this.isDrawing=!1,this._deactivateDraw(e),this._deactivateModify(e),Mn(e);const{annotation:n,viewportIdsToRender:r,newAnnotation:a}=this.editData;return a&&sr(n.annotationUID),super.cancelAnnotation(n),Ae(e),qe(r),this.editData=null,n.annotationUID}isContourSegmentationTool(){return!1}renderAnnotationInstance(e){var P,R,L;const{enabledElement:n,targetId:r,svgDrawingHelper:a,annotationStyle:i}=e,{viewport:o}=n,{worldToCanvas:s}=o,{element:c}=o,l=e.annotation,{annotationUID:u,data:f,highlighted:v}=l,{handles:g}=f,{points:d,activeHandleIndex:m}=g,h=(P=this.editData)==null?void 0:P.newAnnotation,{lineWidth:C,lineDash:p,color:S,locked:I}=i,D=d.map(H=>s(H)),{drawPreviewEnabled:E}=this.configuration.spline,T=l.data.spline.type,y=this._getSplineConfig(T),M=l.data.spline.instance,_=LI(l);if(_.findIndex(H=>!H)!==-1)throw new Error(`Can't find annotation for child ${l.childAnnotationUIDs.join()}`);[l,..._].filter(H=>this._isSplineROIAnnotation(H)).forEach(H=>{const U=this._updateSplineInstance(c,H).getPolylinePoints();this.updateContourPolyline(H,{points:U,closed:f.contour.closed,targetWindingDirection:cu.Clockwise},o,{updateWindingDirection:f.contour.closed})}),super.renderAnnotationInstance(e),!f.cachedStats[r]||f.cachedStats[r].areaUnit==null?(f.cachedStats[r]={Modality:null,area:null,areaUnit:null},this._calculateCachedStats(l,c)):l.invalidated&&this._throttledCalculateCachedStats(l,c);let x;if(!I&&!this.editData&&m!==null&&(x=[D[m]]),(x||h||v)&&Hr(a,u,"0",D,{color:S,lineWidth:C,handleRadius:"3"}),E&&M.numControlPoints>1&&((R=this.editData)!=null&&R.lastCanvasPoint)&&!M.closed){const{lastCanvasPoint:H}=this.editData,F=M.getPreviewPolylinePoints(H,rA);c0(a,u,"previewSplineChange",F,{color:"#9EA0CA",lineDash:p,lineWidth:1})}if(y.showControlPointsConnectors){const H=[...D];M.closed&&H.push(D[0]),c0(a,u,"controlPointsConnectors",H,{color:"rgba(255, 255, 255, 0.5)",lineWidth:1})}return this._renderStats(l,o,a,i.textbox),((L=this.fireChangeOnUpdate)==null?void 0:L.annotationUID)===u&&(this.triggerChangeEvent(l,n,this.fireChangeOnUpdate.changeType,this.fireChangeOnUpdate.contourHoleProcessingEnabled),this.fireChangeOnUpdate=null),l.invalidated=!1,!0}createInterpolatedSplineControl(e){var i;if((i=e.data.handles.points)!=null&&i.length)return;const{polyline:n}=e.data.contour;if(!n||!n.length)return;e.data.handles.points=[];const{points:r}=e.data.handles,a=Math.max(10,Math.floor(n.length/20));for(let o=0;o<n.length-a;o+=a)r.push(n[o]);r.push(n[n.length-1])}createAnnotation(e){var l;const n=super.createAnnotation(e),{world:r}=e.detail.currentPoints,{type:a}=this.configuration.spline,i=this._getSplineConfig(a),o=new i.Class,s=()=>({type:i.type,instance:o,resolution:i.resolution});let c;return(l=this.configuration.interpolation)!=null&&l.enabled&&(c=u=>{var f;(f=u.data).spline||(f.spline=s()),this.createInterpolatedSplineControl(u)}),pi(n,{data:{handles:{points:[[...r]]},spline:s(),cachedStats:{}},onInterpolationComplete:c})}_deleteControlPointByIndex(e,n,r){Ae(e);const{points:a}=n.data.handles;a.length===3?sr(n.annotationUID):a.splice(r,1);const i=Bt(e,this.getToolName());n.invalidated=!0,qe(i)}_isSplineROIAnnotation(e){var n;return!!((n=e.data)!=null&&n.spline)}_getSplineConfig(e){const{configuration:n}=this,r=n.spline.configuration;return Object.assign({type:e},AMe,r[e])}_updateSplineInstance(e,n){const r=Ae(e),{viewport:a}=r,{worldToCanvas:i}=a,{data:o}=n,{type:s,instance:c}=n.data.spline,l=this._getSplineConfig(s),f=o.handles.points.map(i),v=l.resolution!==void 0?parseInt(l.resolution):void 0,g=l.scale!==void 0?parseFloat(l.scale):void 0;return c.setControlPoints(f),c.closed=!!o.contour.closed,!c.fixedResolution&&v!==void 0&&c.resolution!==v&&(c.resolution=v,n.invalidated=!0),c instanceof Tm&&!c.fixedScale&&g!==void 0&&c.scale!==g&&(c.scale=g,n.invalidated=!0),c}};Uf.SplineTypes=Ec,Uf.Actions=Od,Uf.hydrate=(e,n,r)=>{const a=wr(e);if(!a)return;if(n.length<nA){console.warn("Spline requires at least 3 control points");return}const{viewport:i}=a,o=i.getFrameOfReferenceUID(),{viewPlaneNormal:s,viewUp:c}=i.getCamera(),l=new Uf,u=l.getReferencedImageId(i,n[0],s,c),f=(r==null?void 0:r.splineType)||Ec.CatmullRom,g=l._getSplineConfig(f).Class,d=new g,m=n.map(S=>i.worldToCanvas(S));d.setControlPoints(m);const C=d.getPolylinePoints().map(S=>i.canvasToWorld(S)),p={annotationUID:(r==null?void 0:r.annotationUID)||Cr(),data:{handles:{points:n},label:"",cachedStats:{},spline:{type:f,instance:d},contour:{closed:!0,polyline:C}},highlighted:!1,autoGenerated:!1,invalidated:!0,isLocked:!1,isVisible:!0,metadata:{toolName:l.getToolName(),viewPlaneNormal:s,FrameOfReferenceUID:o,referencedImageId:u,...r}};qn(p,i.element),qe([i.id])};let Mm=Uf;function xMe(t,e){const n=t.cachedStats[e],{area:r,isEmptyArea:a,areaUnit:i}=n,o=[];if(r){const s=a?"Area: Oblique not supported":`Area: ${kn(r)} ${i}`;o.push(s)}return o}Mm.toolName="SplineROI";let KH=class extends Mm{constructor(e){const n=pi({configuration:{calculateStats:!1}},e);super(n)}isContourSegmentationTool(){return!0}};KH.toolName="SplineContourSegmentationTool";class RMe{constructor({numBits:e,getPriority:n,areEqual:r}){this._bucketCount=1<<e,this._mask=this._bucketCount-1,this._size=0,this._currentBucketIndex=0,this._buckets=this._buildArray(this._bucketCount),this._getPriority=typeof n<"u"?n:a=>a,this._areEqual=typeof r=="function"?r:(a,i)=>a===i}push(e){const n=this._getBucketIndex(e),r=this._buckets[n],a={value:e,next:r};this._buckets[n]=a,this._size++}pop(){if(this._size===0)throw new Error("Cannot pop because the queue is empty.");for(;this._buckets[this._currentBucketIndex]===null;)this._currentBucketIndex=(this._currentBucketIndex+1)%this._bucketCount;const e=this._buckets[this._currentBucketIndex];return this._buckets[this._currentBucketIndex]=e.next,this._size--,e.value}remove(e){if(!e)return!1;const n=this._getBucketIndex(e),r=this._buckets[n];let a=r,i;for(;a!==null&&!this._areEqual(e,a.value);)i=a,a=a.next;return a===null?!1:(a===r?this._buckets[n]=a.next:i.next=a.next,this._size--,!0)}isEmpty(){return this._size===0}_getBucketIndex(e){return this._getPriority(e)&this._mask}_buildArray(e){const n=new Array(e);return n.fill(null),n}}const t3=4294967295,bMe=2/(3*Math.PI);class yC{constructor(e,n,r){this._getPointIndex=(i,o)=>{const{width:s}=this;return i*s+o},this._getPointCoordinate=i=>{const o=i%this.width,s=Math.floor(i/this.width);return[o,s]},this._getPointCost=i=>Math.round(this.searchGranularity*this.costs[i]);const a=e.length;this.searchGranularityBits=8,this.searchGranularity=1<<this.searchGranularityBits,this.width=n,this.height=r,this.grayscalePixelData=e,this.laplace=null,this.gradXNew=null,this.gradYNew=null,this.laplace=this._computeLaplace(),this.gradMagnitude=this._computeGradient(),this.gradXNew=this._computeGradientX(),this.gradYNew=this._computeGradientY(),this.visited=new Array(a),this.parents=new Uint32Array(a),this.costs=new Float32Array(a)}startSearch(e){const n=this._getPointIndex(e[1],e[0]);this.startPoint=null,this.visited.fill(!1),this.parents.fill(t3),this.costs.fill(1/0),this.priorityQueueNew=new RMe({numBits:this.searchGranularityBits,getPriority:this._getPointCost}),this.startPoint=e,this.costs[n]=0,this.priorityQueueNew.push(n)}findMinNearby(e,n=2){const[r,a]=e,{costs:i}=this,o=[Math.max(0,r-n),Math.min(r+n+1,this.width)],s=[Math.max(0,a-n),Math.min(a+n+1,this.height)];let c=i[this._getPointIndex(a,r)]*.8,l=e;for(let u=o[0];u<o[1];u++)for(let f=s[0];f<s[1];f++){const v=1-(Math.abs(u-e[0])+Math.abs(f-e[1]))/n/2,d=i[this._getPointIndex(f,u)]*.8+v*.2;d<c&&(l=[u,f],c=d)}return l}findPathToPoint(e){if(!this.startPoint)throw new Error("There is no search in progress");const{startPoint:n,_getPointIndex:r,_getPointCoordinate:a}=this,i=r(n[1],n[0]),o=r(e[1],e[0]),{visited:s,parents:c,costs:l,priorityQueueNew:u}=this;if(o===i)return[];for(;!u.isEmpty()&&c[o]===t3;){const g=u.pop();if(s[g])continue;const d=a(g),m=this._getNeighborPoints(d);s[g]=!0;for(let h=0,C=m.length;h<C;h++){const p=m[h],S=r(p[1],p[0]),I=this._getWeightedDistance(d,p),D=l[g]+I;D<l[S]&&(l[S]!==1/0&&u.remove(S),l[S]=D,c[S]=g,u.push(S))}}const f=[];let v=o;for(;v!==t3;)f.push(a(v)),v=c[v];return f.reverse()}_getDeltaX(e,n){const{grayscalePixelData:r,width:a}=this;let i=this._getPointIndex(n,e);return e+1===a&&i--,r[i+1]-r[i]}_getDeltaY(e,n){const{grayscalePixelData:r,width:a,height:i}=this;let o=this._getPointIndex(n,e);return n+1===i&&(o-=a),r[o]-r[o+a]}_getGradientMagnitude(e,n){const r=this._getDeltaX(e,n),a=this._getDeltaY(e,n);return Math.sqrt(r*r+a*a)}_getLaplace(e,n){const{grayscalePixelData:r,_getPointIndex:a}=this,i=r[a(n-2,e)],o=r[a(n-1,e-1)],s=r[a(n-1,e)],c=r[a(n-1,e+1)],l=r[a(n,e-2)],u=r[a(n,e-1)],f=r[a(n,e)],v=r[a(n,e+1)],g=r[a(n,e+2)],d=r[a(n+1,e-1)],m=r[a(n+1,e)],h=r[a(n+1,e+1)],C=r[a(n+2,e)];let p=i;return p+=o+2*s+c,p+=l+2*u-16*f+2*v+g,p+=d+2*m+h,p+=C,p}_computeGradient(){const{width:e,height:n}=this,r=new Float32Array(e*n);let a=0,i=0,o=0,s=0;for(s=0;s<n-1;s++){for(o=0;o<e-1;o++)r[a]=this._getGradientMagnitude(o,s),i=Math.max(r[a],i),a++;r[a]=r[a-1],a++}for(let c=r.length;a<c;a++)r[a]=r[a-e];for(let c=0,l=r.length;c<l;c++)r[c]=1-r[c]/i;return r}_computeLaplace(){const{width:e,height:n,_getPointIndex:r}=this,a=new Float32Array(e*n);a.fill(1,0,r(2,0));for(let i=2;i<n-2;i++){a[r(i,0)]=1,a[r(i,1)]=1;for(let o=2;o<e-2;o++)a[r(i,o)]=this._getLaplace(o,i)>.33?0:1;a[r(i,e-2)]=1,a[r(i,e-1)]=1}return a.fill(1,r(n-2,0)),a}_computeGradientX(){const{width:e,height:n}=this,r=new Float32Array(e*n);let a=0;for(let i=0;i<n;i++)for(let o=0;o<e;o++)r[a++]=this._getDeltaX(o,i);return r}_computeGradientY(){const{width:e,height:n}=this,r=new Float32Array(e*n);let a=0;for(let i=0;i<n;i++)for(let o=0;o<e;o++)r[a++]=this._getDeltaY(o,i);return r}_getGradientUnitVector(e,n){const{gradXNew:r,gradYNew:a,_getPointIndex:i}=this,o=r[i(n,e)],s=a[i(n,e)];let c=Math.sqrt(o*o+s*s);return c=Math.max(c,1e-100),[o/c,s/c]}_getGradientDirection(e,n,r,a){const i=this._getGradientUnitVector(e,n),o=this._getGradientUnitVector(r,a);let s=i[1]*(r-e)-i[0]*(a-n),c=o[1]*(r-e)-o[0]*(a-n);s<0&&(s=-s,c=-c),e!==r&&n!==a&&(s*=Math.SQRT1_2,c*=Math.SQRT1_2),c=Math.min(Math.max(c,-1),1);const l=bMe*(Math.acos(Math.min(s,1))+Math.acos(c));return isNaN(l)||!isFinite(l)?(console.warn("Found non-direction:",e,n,r,a,s,c,l),1):l}getCost(e,n){return this._getWeightedDistance(e,n)}_getWeightedDistance(e,n){const{_getPointIndex:r,width:a,height:i}=this,[o,s]=e,[c,l]=n;if(c<0||c>=a||l<0||l>=i)return 1;if(o<0||s<0||o>=a||s>=i)return 0;const u=r(l,c);let f=this.gradMagnitude[u];(o===c||s===l)&&(f*=Math.SQRT1_2);const v=this.laplace[u],g=this._getGradientDirection(o,s,c,l);return .43*f+.43*v+.11*g}_getNeighborPoints(e){const{width:n,height:r}=this,a=[],i=Math.max(e[0]-1,0),o=Math.max(e[1]-1,0),s=Math.min(e[0]+1,n-1),c=Math.min(e[1]+1,r-1);for(let l=o;l<=c;l++)for(let u=i;u<=s;u++)(u!==e[0]||l!==e[1])&&a.push([u,l]);return a}static createInstanceFromRawPixelData(e,n,r,a){const i=e.length,o=new Float32Array(i),{lower:s,upper:c}=a,l=c-s;for(let u=0,f=e.length;u<f;u++)o[u]=Math.max(0,Math.min(1,(e[u]-s)/l));return new yC(o,n,r)}}class Cc{constructor(e,n){this.pointArray=e?e.slice():[],this._controlPointIndexes=n?n.slice():[]}getPoint(e){return this.pointArray[e]}getLastPoint(){return this.pointArray[this.pointArray.length-1]}isControlPoint(e){const n=this.pointArray.indexOf(e);if(n!==-1)return this._controlPointIndexes.indexOf(n)!==-1;throw new Error("Error: isControlPoint called with not in list point.")}addPoint(e){this.pointArray.push(e)}addControlPoint(e){const n=this.pointArray.indexOf(e);if(n!==-1)this._controlPointIndexes.push(n);else throw new Error("Cannot mark a non registered point as control point.")}getControlPoints(){return this._controlPointIndexes.map(e=>this.pointArray[e])}getNumControlPoints(){return this._controlPointIndexes.length}removeLastControlPoint(){this._controlPointIndexes.length&&this._controlPointIndexes.pop()}getLastControlPoint(){if(this._controlPointIndexes.length)return this.pointArray[this._controlPointIndexes[this._controlPointIndexes.length-1]]}removeLastPoints(e){this.pointArray.splice(this.pointArray.length-e,e)}addPoints(e){this.pointArray=this.pointArray.concat(e)}prependPath(e){const n=e.pointArray.length,r=[];this.pointArray=e.pointArray.concat(this.pointArray);for(let a=0;a<this._controlPointIndexes.length;++a)r[a]=this._controlPointIndexes[a]+n;this._controlPointIndexes=e._controlPointIndexes.concat(r)}appendPath(e){this.addPoints(e.pointArray),e._controlPointIndexes.forEach(n=>this._controlPointIndexes.push(n))}}const NMe=10**2;class M4 extends pm{constructor(e={},n={supportedInteractionTypes:["Mouse","Touch"],configuration:{getTextLines:LMe,calculateStats:!0,preventHandleOutsideImage:!1,contourHoleAdditionModifierKey:mi.Shift,snapHandleNearby:2,interpolation:{enabled:!1,nearestEdge:2,showInterpolationPolyline:!1},decimate:{enabled:!1,epsilon:.1},actions:{cancelInProgress:{method:"cancelInProgress",bindings:[{key:"Escape"}]}}}}){super(e,n),this.isHandleOutsideImage=!1,this.isPointNearTool=(r,a,i,o)=>{const s=Ae(r),{viewport:c}=s,l=o*o,u=a.data.contour.polyline.map(v=>c.worldToCanvas(v));let f=u[u.length-1];for(let v=0;v<u.length;v++){const g=u[v];if(hh(f,g,i)<=l)return!0;f=g}return!1},this.toolSelectedCallback=(r,a)=>{const i=r.detail,{element:o}=i;a.highlighted=!0;const s=Bt(o,this.getToolName());this.editData={annotation:a,viewportIdsToRender:s,movingTextBox:!1},Ae(o),this._activateModify(o),qe(s),r.preventDefault()},this.handleSelectedCallback=(r,a,i)=>{const o=r.detail,{element:s}=o,{data:c}=a;a.highlighted=!0;let l=!1,u;if(i.worldPosition)l=!0;else{const{points:v}=c.handles;u=v.findIndex(g=>g===i)}const f=Bt(s,this.getToolName());this.editData={annotation:a,viewportIdsToRender:f,handleIndex:u,movingTextBox:l},this._activateModify(s),Ae(s),qe(f),r.preventDefault()},this._endCallback=(r,a=!1)=>{const i=r.detail,{element:o}=i,{annotation:s,viewportIdsToRender:c,newAnnotation:l,contourHoleProcessingEnabled:u}=this.editData,{data:f}=s;this.doneEditMemo(),f.handles.activeHandleIndex=null,this._deactivateModify(o),this._deactivateDraw(o),Mn(o);const v=Ae(o);if(this.isHandleOutsideImage&&this.configuration.preventHandleOutsideImage||a){sr(s.annotationUID),this.clearEditData(),qe(c);return}qe(c);const g=l?ia.Completed:ia.HandlesUpdated;this.triggerChangeEvent(s,v,g,u),this.clearEditData()},this.triggerChangeEvent=(r,a,i=ia.StatsUpdated,o=!1)=>{i===ia.Completed?T_(r,o):$r(r,a.viewport.element,i)},this._mouseDownCallback=r=>{const a=r.type===B.MOUSE_DOUBLE_CLICK,{annotation:i,viewportIdsToRender:o,worldToSlice:s,sliceToWorld:c,newAnnotation:l}=this.editData;if(this.editData.closed)return;const u=r.detail,{element:f}=u,{currentPoints:v}=u,{canvas:g,world:d}=v;let m=d;const h=Ae(f),{viewport:C,renderingEngine:p}=h,S=this.editData.currentPath.getControlPoints();let I=S.length>=2&&a;if(this.doneEditMemo(),this.createMemo(f,i,{newAnnotation:l&&S.length===1}),S.length>=2){const T={index:-1,distSquared:1/0};for(let y=0,M=S.length;y<M;y++){const _=S[y],O=c(_),w=C.worldToCanvas(O),x=Qc(g,w);x<=NMe&&x<T.distSquared&&(T.distSquared=x,T.index=y)}T.index===0&&(I=!0)}const{snapHandleNearby:D}=this.configuration;if(D&&!this.editData.closed){const T=new Cc,y=this.scissors.findMinNearby(s(d),1),M=this.scissors.findPathToPoint(y);T.addPoints(M),T.prependPath(this.editData.confirmedPath),m=c(y),this.editData.currentPath=T}this.editData.closed=this.editData.closed||I,this.editData.confirmedPath=this.editData.currentPath;const E=this.editData.currentPath.getLastPoint();this.editData.confirmedPath.addControlPoint(E),i.data.handles.points.push(c(E)),this.scissors.startSearch(s(m)),i.invalidated=!0,qe(o),this.editData.closed&&(this.updateAnnotation(this.editData.confirmedPath),this._endCallback(r)),r.preventDefault()},this._mouseMoveCallback=r=>{const{element:a,currentPoints:i}=r.detail,{world:o,canvas:s}=i;Ae(a);const c=Bt(a,this.getToolName());this.editData.lastCanvasPoint=s;const{width:l,height:u}=this.scissors,{worldToSlice:f}=this.editData,v=f(o);if(v[0]<0||v[1]<0||v[0]>=l||v[1]>=u)return;const g=this.scissors.findPathToPoint(v),d=new Cc;d.addPoints(g),d.prependPath(this.editData.confirmedPath),this.editData.currentPath=d,qe(c),r.preventDefault()},this._dragCallback=r=>{this.isDrawing=!0;const a=r.detail,{element:i}=a,{annotation:o,viewportIdsToRender:s,movingTextBox:c,handleIndex:l,newAnnotation:u}=this.editData;this.createMemo(i,o,{newAnnotation:u});const{data:f}=o;if(c){const{deltaPoints:v}=a,g=v.world,{textBox:d}=f.handles,{worldPosition:m}=d;m[0]+=g[0],m[1]+=g[1],m[2]+=g[2],d.hasMoved=!0}else if(l===void 0)console.warn("Drag annotation not implemented");else{const{currentPoints:v}=a,g=v.world;this.editHandle(g,i,o,l)}this.editData.hasMoved=!0,Ae(i),qe(s)},this.cancel=r=>{if(!this.isDrawing)return;this.isDrawing=!1,this._deactivateDraw(r),this._deactivateModify(r),Mn(r);const{annotation:a,viewportIdsToRender:i,newAnnotation:o}=this.editData;return o&&sr(a.annotationUID),qe(i),this.doneEditMemo(),this.scissors=null,a.annotationUID},this._activateModify=r=>{st.isInteractingWithTool=!0,r.addEventListener(B.MOUSE_UP,this._endCallback),r.addEventListener(B.MOUSE_DRAG,this._dragCallback),r.addEventListener(B.MOUSE_CLICK,this._endCallback),r.addEventListener(B.TOUCH_END,this._endCallback),r.addEventListener(B.TOUCH_DRAG,this._dragCallback),r.addEventListener(B.TOUCH_TAP,this._endCallback)},this._deactivateModify=r=>{st.isInteractingWithTool=!1,r.removeEventListener(B.MOUSE_UP,this._endCallback),r.removeEventListener(B.MOUSE_DRAG,this._dragCallback),r.removeEventListener(B.MOUSE_CLICK,this._endCallback),r.removeEventListener(B.TOUCH_END,this._endCallback),r.removeEventListener(B.TOUCH_DRAG,this._dragCallback),r.removeEventListener(B.TOUCH_TAP,this._endCallback)},this._activateDraw=r=>{st.isInteractingWithTool=!0,r.addEventListener(B.MOUSE_MOVE,this._mouseMoveCallback),r.addEventListener(B.MOUSE_DOWN,this._mouseDownCallback),r.addEventListener(B.MOUSE_DOUBLE_CLICK,this._mouseDownCallback),r.addEventListener(B.TOUCH_TAP,this._mouseDownCallback)},this._deactivateDraw=r=>{st.isInteractingWithTool=!1,r.removeEventListener(B.MOUSE_MOVE,this._mouseMoveCallback),r.removeEventListener(B.MOUSE_DOWN,this._mouseDownCallback),r.removeEventListener(B.MOUSE_DOUBLE_CLICK,this._mouseDownCallback),r.removeEventListener(B.TOUCH_TAP,this._mouseDownCallback)},this._calculateCachedStats=(r,a)=>{if(!this.configuration.calculateStats)return;const i=r.data;if(!i.contour.closed)return;const o=Ae(a),{viewport:s,renderingEngine:c}=o,{cachedStats:l}=i,{polyline:u}=i.contour,f=Object.keys(l);for(let v=0;v<f.length;v++){const g=f[v],d=this.getTargetImageData(g);if(!d)continue;const{metadata:m}=d,h=u.map(O=>s.worldToCanvas(O)),C=h[0],p=s.canvasToWorld(C),S=s.canvasToWorld([C[0]+1,C[1]]),I=s.canvasToWorld([C[0],C[1]+1]),D=Si(p,S),E=Si(p,I),{imageData:T}=d,{scale:y,areaUnit:M}=us(d,()=>{const{maxX:O,maxY:w,minX:x,minY:P}=pv(h),R=s.canvasToWorld([x,P]),L=Da(T,R),H=s.canvasToWorld([O,w]),F=Da(T,H);return[L,F]});let _=ph(h)/y/y;_*=D*E,l[g]={Modality:m.Modality,area:_,areaUnit:M}}return this.triggerAnnotationModified(r,o,ia.StatsUpdated),l},this._renderStats=(r,a,i,o)=>{const s=r.data,c=this.getTargetId(a);if(!s.contour.closed||!o.visibility)return;const l=this.configuration.getTextLines(s,c);if(!l||l.length===0)return;const u=s.handles.points.map(p=>a.worldToCanvas(p));if(!s.handles.textBox.hasMoved){const p=gs(u);s.handles.textBox.worldPosition=a.canvasToWorld(p)}const f=a.worldToCanvas(s.handles.textBox.worldPosition),g=ro(i,r.annotationUID??"","textBox",l,f,u,{},o),{x:d,y:m,width:h,height:C}=g;s.handles.textBox.worldBoundingBox={topLeft:a.canvasToWorld([d,m]),topRight:a.canvasToWorld([d+h,m]),bottomLeft:a.canvasToWorld([d,m+C]),bottomRight:a.canvasToWorld([d+h,m+C])}},this.triggerAnnotationModified=(r,a,i=ia.StatsUpdated)=>{const{viewportId:o,renderingEngineId:s}=a,c=B.ANNOTATION_MODIFIED;Dt(ot,c,{annotation:r,viewportId:o,renderingEngineId:s,changeType:i})},this._throttledCalculateCachedStats=no(this._calculateCachedStats,100,{trailing:!0})}setupBaseEditData(e,n,r,a,i){var T,y;const o=Ae(n),{viewport:s}=o;this.isDrawing=!0;const c=s.getImageData(),{imageData:l}=c;let u,f,v,g,d;if(!(s instanceof yr))v=c.dimensions[0],g=c.dimensions[1],u=M=>{const _=Da(l,M);return[_[0],_[1]]},f=M=>fv(l,[M[0],M[1],0]),d=c.scalarData;else if(s instanceof yr){const M=Z5(s),{sliceToIndexMatrix:_,indexToSliceMatrix:O}=M;u=w=>{const x=Da(l,w),P=un([0,0,0],x,O);return[P[0],P[1]]},f=w=>{const x=un([0,0,0],[w[0],w[1],0],_);return fv(l,x)},d=M.scalarData,v=M.width,g=M.height}else throw new Error("Viewport not supported");d=RF(d,v,g);const{voiRange:m}=s.getProperties(),h=u(e);this.scissors=yC.createInstanceFromRawPixelData(d,v,g,m),a&&(this.scissorsNext=yC.createInstanceFromRawPixelData(d,v,g,m),this.scissorsNext.startSearch(u(a))),this.scissors.startSearch(h);const C=!a,p=new Cc,S=new Cc,I=C?void 0:new Cc;p.addPoint(h),p.addControlPoint(h);const D=Bt(n,this.getToolName()),E=s.worldToCanvas(e);this.editData={annotation:r,viewportIdsToRender:D,newAnnotation:C,hasMoved:!1,lastCanvasPoint:E,confirmedPath:p,currentPath:S,confirmedPathNext:I,closed:!1,handleIndex:((T=this.editData)==null?void 0:T.handleIndex)??((y=r.handles)==null?void 0:y.activeHandleIndex),worldToSlice:u,sliceToWorld:f,contourHoleProcessingEnabled:i}}addNewAnnotation(e){const n=e.detail,{currentPoints:r,element:a}=n,{world:i}=r,o=this.createAnnotation(e),s=qv(e.detail.event)===this.configuration.contourHoleAdditionModifierKey;return this.setupBaseEditData(i,a,o,void 0,s),this.addAnnotation(o,a),this._activateDraw(a),e.preventDefault(),qe(this.editData.viewportIdsToRender),o}clearEditData(){this.editData=null,this.scissors=null,this.scissorsNext=null,this.isDrawing=!1}editHandle(e,n,r,a){var S;const{data:i}=r,{points:o}=i.handles,{length:s}=o,c=o[(a-1+s)%s],l=o[(a+1)%s];if(!((S=this.editData)!=null&&S.confirmedPathNext)){this.setupBaseEditData(c,n,r,l);const{polyline:I}=i.contour,D=new Cc,E=new Cc,{worldToSlice:T}=this.editData,y=Iy(r,a-1),M=Iy(r,a+1);if(M===-1||y===-1)throw new Error(`Can't find handle index ${M===-1&&l} ${y===-1&&c}`);a===0?E.addPoints(I.slice(M+1,y).map(T)):(D.addPoints(I.slice(0,y+1).map(T)),E.addPoints(I.slice(M,I.length).map(T))),this.editData.confirmedPath=D,this.editData.confirmedPathNext=E}const{editData:u,scissors:f}=this,{worldToSlice:v,sliceToWorld:g}=u,{activeHandleIndex:d}=i.handles;if(d==null)i.handles.activeHandleIndex=a;else if(d!==a)throw new Error(`Trying to edit a different handle than the one currently being edited ${a}!==${i.handles.activeHandleIndex}`);const m=v(e);if(m[0]<0||m[0]>=f.width||m[1]<0||m[1]>=f.height)return;o[a]=g(m);const h=f.findPathToPoint(m),C=this.scissorsNext.findPathToPoint(m),p=new Cc;p.prependPath(u.confirmedPath),a!==0&&p.addPoints(h),p.addPoints(C.reverse()),p.appendPath(u.confirmedPathNext),a===0&&p.addPoints(h),u.currentPath=p,r.invalidated=!0,u.hasMoved=!0,u.closed=!0}renderAnnotation(e,n){var r;return this.updateAnnotation((r=this.editData)==null?void 0:r.currentPath),super.renderAnnotation(e,n)}isContourSegmentationTool(){return!1}createAnnotation(e){const n=super.createAnnotation(e),{world:r}=e.detail.currentPoints;return pi(n,{data:{handles:{points:[[...r]]}}})}cancelInProgress(e,n,r){if(!this.editData){this.undo();return}this._endCallback(r,!0)}renderAnnotationInstance(e){var p,S,I,D;const{annotation:n,enabledElement:r,svgDrawingHelper:a,annotationStyle:i,targetId:o}=e,{viewport:s}=r,{element:c}=s,{worldToCanvas:l}=s,{annotationUID:u,data:f,highlighted:v}=n,{handles:g}=f,d=(p=this.editData)==null?void 0:p.newAnnotation,{lineWidth:m,lineDash:h,color:C}=i;if(v||d&&n.annotationUID===((I=(S=this.editData)==null?void 0:S.annotation)==null?void 0:I.annotationUID)){const E="0",T=g.points.map(l);Hr(a,u,E,T,{color:C,lineDash:h,lineWidth:m})}return super.renderAnnotationInstance(e),!f.cachedStats[o]||((D=f.cachedStats[o])==null?void 0:D.areaUnit)===null?(f.cachedStats[o]={Modality:null,area:null,areaUnit:null},this._calculateCachedStats(n,c)):n.invalidated&&this._throttledCalculateCachedStats(n,c),this._renderStats(n,s,a,i.textbox),!0}updateAnnotation(e){if(!this.editData||!e)return;const{annotation:n,sliceToWorld:r,worldToSlice:a,closed:i,newAnnotation:o}=this.editData;let{pointArray:s}=e;s.length>1&&(s=[...s,s[0]]);const c=o&&i?cu.Clockwise:void 0;this.updateContourPolyline(n,{points:s,closed:i,targetWindingDirection:c},{canvasToWorld:r,worldToCanvas:a})}}M4.toolName="LivewireContour";function LMe(t,e){const n=t.cachedStats[e],{area:r,areaUnit:a}=n,i=[];if(r){const o=`Area: ${kn(r)} ${a}`;i.push(o)}return i}let XH=class extends M4{updateInterpolatedAnnotation(e,n){this.editData||!e.invalidated||!e.data.handles.interpolationSources||(e.data.contour.originalPolyline=e.data.contour.polyline,queueMicrotask(()=>{if(!e.data.handles.interpolationSources)return;const{points:r}=e.data.handles,{element:a}=n.viewport;this.setupBaseEditData(r[0],a,e);const{length:i}=r,{scissors:o}=this,{nearestEdge:s,repeatInterpolation:c}=this.configuration.interpolation;e.data.handles.originalPoints=r;const{worldToSlice:l,sliceToWorld:u}=this.editData,f=[];if(s){let g=l(r[r.length-1]);r.forEach((d,m)=>{const h=l(d);g=h,f.push(h),o.startSearch(g),o.findPathToPoint(h),o.findPathToPoint(l(r[(m+3)%r.length]));const C=o.findMinNearby(h,s);gn(h,C)||(f[m]=C,g=C,r[m]=u(C))})}const v=new Cc;for(let g=0;g<i;g++){o.startSearch(l(r[g]));const d=o.findPathToPoint(l(r[(g+1)%i]));v.addPoints(d)}this.updateAnnotation(v),this.scissors=null,this.scissorsNext=null,this.editData=null,e.data.handles.interpolationSources=null,c&&$r(e,n.viewport.element,ia.InterpolationUpdated)}))}renderAnnotationInstance(e){var f;const{enabledElement:n,svgDrawingHelper:r}=e,a=e.annotation,{annotationUID:i}=a,{viewport:o}=n,{worldToCanvas:s}=o,{showInterpolationPolyline:c}=this.configuration.interpolation||{};(f=this.updateInterpolatedAnnotation)==null||f.call(this,a,n);const{originalPolyline:l}=a.data.contour,u=super.renderAnnotationInstance(e);if(c&&l&&a.autoGenerated){const v=l.map(s);v.push(v[0]),c0(r,i,"interpolationContour-0",v,{color:"#70ffff",lineWidth:1,fillOpacity:0})}return u}isContourSegmentationTool(){return!0}};XH.toolName="LivewireContourSegmentationTool";var C1;let YH=(C1=class extends Br{constructor(e={},n={supportedInteractionTypes:["Mouse","Touch"],configuration:{shadow:!0,getTextCallback:UMe,changeTextCallback:FMe,preventHandleOutsideImage:!1,arrowFirst:!0}}){super(e,n),this.addNewAnnotation=r=>{const a=r.detail,{currentPoints:i,element:o}=a,s=i.world,c=Ae(o),{viewport:l,renderingEngine:u}=c;Yt(o),this.isDrawing=!0;const f=l.getCamera(),{viewPlaneNormal:v,viewUp:g}=f,d=this.getReferencedImageId(l,s,v,g),{arrowFirst:m}=this.configuration,h=l.getFrameOfReferenceUID(),C={highlighted:!0,invalidated:!0,metadata:{toolName:this.getToolName(),viewPlaneNormal:[...v],viewUp:[...g],FrameOfReferenceUID:h,referencedImageId:d,...l.getViewReference({points:[s]})},data:{text:"",handles:{points:[[...s],[...s]],activeHandleIndex:null,arrowFirst:m,textBox:{hasMoved:!1,worldPosition:[0,0,0],worldBoundingBox:{topLeft:[0,0,0],topRight:[0,0,0],bottomLeft:[0,0,0],bottomRight:[0,0,0]}}},label:""}};qn(C,o);const p=Bt(o,this.getToolName());return this.editData={annotation:C,viewportIdsToRender:p,handleIndex:1,movingTextBox:!1,newAnnotation:!0,hasMoved:!1},this._activateDraw(o),r.preventDefault(),qe(p),C},this.isPointNearTool=(r,a,i,o)=>{const s=Ae(r),{viewport:c}=s,{data:l}=a,[u,f]=l.handles.points,v=c.worldToCanvas(u),g=c.worldToCanvas(f),d={start:{x:v[0],y:v[1]},end:{x:g[0],y:g[1]}};return Li([d.start.x,d.start.y],[d.end.x,d.end.y],[i[0],i[1]])<=o},this.toolSelectedCallback=(r,a)=>{const i=r.detail,{element:o}=i;a.highlighted=!0;const s=Bt(o,this.getToolName());this.editData={annotation:a,viewportIdsToRender:s,movingTextBox:!1},this._activateModify(o),Yt(o),Ae(o),qe(s),r.preventDefault()},this._endCallback=r=>{const a=r.detail,{element:i}=a,{annotation:o,viewportIdsToRender:s,newAnnotation:c,hasMoved:l}=this.editData,{data:u}=o;c&&!l||(u.handles.activeHandleIndex=null,this._deactivateModify(i),this._deactivateDraw(i),Mn(i),this.isHandleOutsideImage&&this.configuration.preventHandleOutsideImage&&sr(o.annotationUID),c?this.configuration.getTextCallback(f=>{if(!f){sr(o.annotationUID),qe(s),this.editData=null,this.isDrawing=!1;return}o.data.text=f,Ur(o),this.createMemo(i,o,{newAnnotation:!!this.memo}),qe(s)}):$r(o,i),this.doneEditMemo(),this.editData=null,this.isDrawing=!1)},this._dragCallback=r=>{this.isDrawing=!0;const a=r.detail,{element:i}=a,{annotation:o,viewportIdsToRender:s,handleIndex:c,movingTextBox:l,newAnnotation:u}=this.editData;this.createMemo(i,o,{newAnnotation:u});const{data:f}=o;if(l){const{deltaPoints:v}=a,g=v.world,{textBox:d}=f.handles,{worldPosition:m}=d;m[0]+=g[0],m[1]+=g[1],m[2]+=g[2],d.hasMoved=!0}else if(c===void 0){const{deltaPoints:v}=a,g=v.world;f.handles.points.forEach(m=>{m[0]+=g[0],m[1]+=g[1],m[2]+=g[2]}),o.invalidated=!0}else{const{currentPoints:v}=a,g=v.world;f.handles.points[c]=[...g],o.invalidated=!0}this.editData.hasMoved=!0,Ae(i),qe(s)},this.touchTapCallback=r=>{r.detail.taps==2&&this.doubleClickCallback(r)},this.doubleClickCallback=r=>{const a=r.detail,{element:i}=a;let o=nr(this.getToolName(),i);if(o=this.filterInteractableAnnotationsForElement(i,o),!(o!=null&&o.length))return;const s=o.find(l=>this.isPointNearTool(i,l,a.currentPoints.canvas,6));if(!s)return;const c=s;this.configuration.changeTextCallback(s,r.detail,this._doneChangingTextCallback.bind(this,i,c)),this.editData=null,this.isDrawing=!1,r.stopImmediatePropagation(),r.preventDefault()},this.cancel=r=>{if(this.isDrawing){this.isDrawing=!1,this._deactivateDraw(r),this._deactivateModify(r),Mn(r);const{annotation:a,viewportIdsToRender:i,newAnnotation:o}=this.editData,{data:s}=a;return a.highlighted=!1,s.handles.activeHandleIndex=null,qe(i),o&&Ur(a),this.editData=null,a.annotationUID}},this._activateModify=r=>{st.isInteractingWithTool=!0,r.addEventListener(B.MOUSE_UP,this._endCallback),r.addEventListener(B.MOUSE_DRAG,this._dragCallback),r.addEventListener(B.MOUSE_CLICK,this._endCallback),r.addEventListener(B.TOUCH_TAP,this._endCallback),r.addEventListener(B.TOUCH_END,this._endCallback),r.addEventListener(B.TOUCH_DRAG,this._dragCallback)},this._deactivateModify=r=>{st.isInteractingWithTool=!1,r.removeEventListener(B.MOUSE_UP,this._endCallback),r.removeEventListener(B.MOUSE_DRAG,this._dragCallback),r.removeEventListener(B.MOUSE_CLICK,this._endCallback),r.removeEventListener(B.TOUCH_TAP,this._endCallback),r.removeEventListener(B.TOUCH_DRAG,this._dragCallback),r.removeEventListener(B.TOUCH_END,this._endCallback)},this._activateDraw=r=>{st.isInteractingWithTool=!0,r.addEventListener(B.MOUSE_UP,this._endCallback),r.addEventListener(B.MOUSE_DRAG,this._dragCallback),r.addEventListener(B.MOUSE_MOVE,this._dragCallback),r.addEventListener(B.MOUSE_CLICK,this._endCallback),r.addEventListener(B.TOUCH_TAP,this._endCallback),r.addEventListener(B.TOUCH_END,this._endCallback),r.addEventListener(B.TOUCH_DRAG,this._dragCallback)},this._deactivateDraw=r=>{st.isInteractingWithTool=!1,r.removeEventListener(B.MOUSE_UP,this._endCallback),r.removeEventListener(B.MOUSE_DRAG,this._dragCallback),r.removeEventListener(B.MOUSE_MOVE,this._dragCallback),r.removeEventListener(B.MOUSE_CLICK,this._endCallback),r.removeEventListener(B.TOUCH_TAP,this._endCallback),r.removeEventListener(B.TOUCH_END,this._endCallback),r.removeEventListener(B.TOUCH_DRAG,this._dragCallback)},this.renderAnnotation=(r,a)=>{let i=!1;const{viewport:o}=r,{element:s}=o;let c=nr(this.getToolName(),s);if(!(c!=null&&c.length)||(c=this.filterInteractableAnnotationsForElement(s,c),!(c!=null&&c.length)))return i;const l={toolGroupId:this.toolGroupId,toolName:this.getToolName(),viewportId:r.viewport.id};for(let u=0;u<c.length;u++){const f=c[u],{annotationUID:v,data:g}=f,{handles:d,text:m}=g,{points:h,activeHandleIndex:C}=d;l.annotationUID=v;const{color:p,lineWidth:S,lineDash:I}=this.getAnnotationStyle({annotation:f,styleSpecifier:l}),D=h.map(L=>o.worldToCanvas(L));let E;!Ya(v)&&!this.editData&&C!==null&&(E=[D[C]]),E&&Hr(a,v,"0",D,{color:p,lineWidth:S});const T="1";if(this.configuration.arrowFirst?SC(a,v,T,D[1],D[0],{color:p,width:S,lineDash:I}):SC(a,v,T,D[0],D[1],{color:p,width:S,lineDash:I}),i=!0,!o.getRenderingEngine())return console.warn("Rendering Engine has been destroyed"),i;if(!m)continue;const y=this.getLinkedTextBoxStyle(l,f);if(!y.visibility){g.handles.textBox={hasMoved:!1,worldPosition:[0,0,0],worldBoundingBox:{topLeft:[0,0,0],topRight:[0,0,0],bottomLeft:[0,0,0],bottomRight:[0,0,0]}};continue}if(!g.handles.textBox.hasMoved){const L=D[1];g.handles.textBox.worldPosition=o.canvasToWorld(L)}const M=o.worldToCanvas(g.handles.textBox.worldPosition),O=ro(a,v,"1",[m],M,D,{},y),{x:w,y:x,width:P,height:R}=O;g.handles.textBox.worldBoundingBox={topLeft:o.canvasToWorld([w,x]),topRight:o.canvasToWorld([w+P,x]),bottomLeft:o.canvasToWorld([w,x+R]),bottomRight:o.canvasToWorld([w+P,x+R])}}return i}}handleSelectedCallback(e,n,r){const a=e.detail,{element:i}=a,{data:o}=n;n.highlighted=!0;let s=!1,c;r.worldPosition?s=!0:c=o.handles.points.findIndex(u=>u===r);const l=Bt(i,this.getToolName());this.editData={annotation:n,viewportIdsToRender:l,handleIndex:c,movingTextBox:s},this._activateModify(i),Yt(i),Ae(i),qe(l),e.preventDefault()}_doneChangingTextCallback(e,n,r){n.data.text=r,Ae(e);const a=Bt(e,this.getToolName());qe(a),$r(n,e)}_isInsideVolume(e,n,r){return ga(e,r)&&ga(n,r)}},C1.hydrate=(e,n,r,a)=>{const i=wr(e);if(!i)return;const{viewport:o}=i,s=o.getFrameOfReferenceUID(),{viewPlaneNormal:c,viewUp:l}=o.getCamera(),u=new C1,f=u.getReferencedImageId(o,n[0],c,l),v={annotationUID:(a==null?void 0:a.annotationUID)||Cr(),data:{text:r||"",handles:{points:n}},highlighted:!1,autoGenerated:!1,invalidated:!1,isLocked:!1,isVisible:!0,metadata:{toolName:u.getToolName(),viewPlaneNormal:c,FrameOfReferenceUID:s,referencedImageId:f,...a}};qn(v,o.element),qe([o.id])},C1);function UMe(t){return t(prompt("Enter your annotation:"))}function FMe(t,e,n){return n(prompt("Enter your annotation:"))}YH.toolName="ArrowAnnotate";const HC=class HC extends Br{constructor(e={},n={supportedInteractionTypes:["Mouse","Touch"],configuration:{shadow:!0,preventHandleOutsideImage:!1,getTextLines:VMe}}){super(e,n),this.addNewAnnotation=r=>{if(this.angleStartedNotYetCompleted)return;this.angleStartedNotYetCompleted=!0;const a=r.detail,{currentPoints:i,element:o}=a,s=i.world,c=Ae(o),{viewport:l,renderingEngine:u}=c;Yt(o),this.isDrawing=!0;const f=l.getCamera(),{viewPlaneNormal:v,viewUp:g}=f,d=this.getReferencedImageId(l,s,v,g),m=l.getFrameOfReferenceUID(),h={highlighted:!0,invalidated:!0,metadata:{toolName:this.getToolName(),viewPlaneNormal:[...v],viewUp:[...g],FrameOfReferenceUID:m,referencedImageId:d,...l.getViewReference({points:[s]})},data:{handles:{points:[[...s],[...s]],activeHandleIndex:null,textBox:{hasMoved:!1,worldPosition:[0,0,0],worldBoundingBox:{topLeft:[0,0,0],topRight:[0,0,0],bottomLeft:[0,0,0],bottomRight:[0,0,0]}}},label:"",cachedStats:{}}};qn(h,o);const C=Bt(o,this.getToolName());return this.editData={annotation:h,viewportIdsToRender:C,handleIndex:1,movingTextBox:!1,newAnnotation:!0,hasMoved:!1},this._activateDraw(o),r.preventDefault(),qe(C),h},this.isPointNearTool=(r,a,i,o)=>{const s=Ae(r),{viewport:c}=s,{data:l}=a,[u,f,v]=l.handles.points,g=c.worldToCanvas(u),d=c.worldToCanvas(f),m={start:{x:g[0],y:g[1]},end:{x:d[0],y:d[1]}};if(Li([m.start.x,m.start.y],[m.end.x,m.end.y],[i[0],i[1]])<=o)return!0;if(!v)return!1;const C=c.worldToCanvas(v),p={start:{x:d[0],y:d[1]},end:{x:C[0],y:C[1]}};return Li([p.start.x,p.start.y],[p.end.x,p.end.y],[i[0],i[1]])<=o},this.toolSelectedCallback=(r,a)=>{const i=r.detail,{element:o}=i;a.highlighted=!0;const s=Bt(o,this.getToolName());this.editData={annotation:a,viewportIdsToRender:s,movingTextBox:!1},this._activateModify(o),Yt(o),Ae(o),qe(s),r.preventDefault()},this._endCallback=r=>{const a=r.detail,{element:i}=a,{annotation:o,viewportIdsToRender:s,newAnnotation:c,hasMoved:l}=this.editData,{data:u}=o;if(!(c&&!l)){if(this.angleStartedNotYetCompleted&&u.handles.points.length===2){this.editData.handleIndex=2;return}this.angleStartedNotYetCompleted=!1,u.handles.activeHandleIndex=null,this._deactivateModify(i),this._deactivateDraw(i),Mn(i),Ae(i),this.isHandleOutsideImage&&this.configuration.preventHandleOutsideImage&&sr(o.annotationUID),qe(s),c&&Ur(o),this.editData=null,this.isDrawing=!1}},this._dragCallback=r=>{this.isDrawing=!0;const a=r.detail,{element:i}=a,{annotation:o,viewportIdsToRender:s,handleIndex:c,movingTextBox:l}=this.editData,{data:u}=o;if(l){const{deltaPoints:f}=a,v=f.world,{textBox:g}=u.handles,{worldPosition:d}=g;d[0]+=v[0],d[1]+=v[1],d[2]+=v[2],g.hasMoved=!0}else if(c===void 0){const{deltaPoints:f}=a,v=f.world;u.handles.points.forEach(d=>{d[0]+=v[0],d[1]+=v[1],d[2]+=v[2]}),o.invalidated=!0}else{const{currentPoints:f}=a,v=f.world;u.handles.points[c]=[...v],o.invalidated=!0}this.editData.hasMoved=!0,Ae(i),qe(s)},this.cancel=r=>{if(this.isDrawing){this.isDrawing=!1,this._deactivateDraw(r),this._deactivateModify(r),Mn(r);const{annotation:a,viewportIdsToRender:i,newAnnotation:o}=this.editData,{data:s}=a;return a.highlighted=!1,s.handles.activeHandleIndex=null,qe(i),o&&Ur(a),this.editData=null,this.angleStartedNotYetCompleted=!1,a.annotationUID}},this._activateModify=r=>{st.isInteractingWithTool=!0,r.addEventListener(B.MOUSE_UP,this._endCallback),r.addEventListener(B.MOUSE_DRAG,this._dragCallback),r.addEventListener(B.MOUSE_CLICK,this._endCallback),r.addEventListener(B.TOUCH_TAP,this._endCallback),r.addEventListener(B.TOUCH_END,this._endCallback),r.addEventListener(B.TOUCH_DRAG,this._dragCallback)},this._deactivateModify=r=>{st.isInteractingWithTool=!1,r.removeEventListener(B.MOUSE_UP,this._endCallback),r.removeEventListener(B.MOUSE_DRAG,this._dragCallback),r.removeEventListener(B.MOUSE_CLICK,this._endCallback),r.removeEventListener(B.TOUCH_TAP,this._endCallback),r.removeEventListener(B.TOUCH_END,this._endCallback),r.removeEventListener(B.TOUCH_DRAG,this._dragCallback)},this._activateDraw=r=>{st.isInteractingWithTool=!0,r.addEventListener(B.MOUSE_UP,this._endCallback),r.addEventListener(B.MOUSE_DRAG,this._dragCallback),r.addEventListener(B.MOUSE_MOVE,this._dragCallback),r.addEventListener(B.MOUSE_CLICK,this._endCallback),r.addEventListener(B.TOUCH_TAP,this._endCallback),r.addEventListener(B.TOUCH_END,this._endCallback),r.addEventListener(B.TOUCH_DRAG,this._dragCallback)},this._deactivateDraw=r=>{st.isInteractingWithTool=!1,r.removeEventListener(B.MOUSE_UP,this._endCallback),r.removeEventListener(B.MOUSE_DRAG,this._dragCallback),r.removeEventListener(B.MOUSE_MOVE,this._dragCallback),r.removeEventListener(B.MOUSE_CLICK,this._endCallback),r.removeEventListener(B.TOUCH_TAP,this._endCallback),r.removeEventListener(B.TOUCH_END,this._endCallback),r.removeEventListener(B.TOUCH_DRAG,this._dragCallback)},this.renderAnnotation=(r,a)=>{var v;let i=!1;const{viewport:o}=r,{element:s}=o;let c=nr(this.getToolName(),s);if(!(c!=null&&c.length)||(c=this.filterInteractableAnnotationsForElement(s,c),!(c!=null&&c.length)))return i;const l=this.getTargetId(o),u=o.getRenderingEngine(),f={toolGroupId:this.toolGroupId,toolName:this.getToolName(),viewportId:r.viewport.id};for(let g=0;g<c.length;g++){const d=c[g],{annotationUID:m,data:h}=d,{points:C,activeHandleIndex:p}=h.handles;f.annotationUID=m;const{color:S,lineWidth:I,lineDash:D}=this.getAnnotationStyle({annotation:d,styleSpecifier:f}),E=C.map(F=>o.worldToCanvas(F));!h.cachedStats[l]||h.cachedStats[l].angle==null?(h.cachedStats[l]={angle:null},this._calculateCachedStats(d,u,r)):d.invalidated&&this._throttledCalculateCachedStats(d,u,r);let T;if(!Ya(d.annotationUID)&&!this.editData&&p!==null&&(T=[E[p]]),!o.getRenderingEngine())return console.warn("Rendering Engine has been destroyed"),i;T&&Hr(a,m,"0",E,{color:S,lineDash:D,lineWidth:I});let y="1";if(tr(a,m,y,E[0],E[1],{color:S,width:I,lineDash:D}),i=!0,E.length!==3)return i;if(y="2",tr(a,m,y,E[1],E[2],{color:S,width:I,lineDash:D}),!((v=h.cachedStats[l])!=null&&v.angle))continue;const M=this.getLinkedTextBoxStyle(f,d);if(!M.visibility){h.handles.textBox={hasMoved:!1,worldPosition:[0,0,0],worldBoundingBox:{topLeft:[0,0,0],topRight:[0,0,0],bottomLeft:[0,0,0],bottomRight:[0,0,0]}};continue}const _=this.configuration.getTextLines(h,l);if(!h.handles.textBox.hasMoved){const F=E[1];h.handles.textBox.worldPosition=o.canvasToWorld(F)}const O=o.worldToCanvas(h.handles.textBox.worldPosition),x=ro(a,m,"1",_,O,E,{},M),{x:P,y:R,width:L,height:H}=x;h.handles.textBox.worldBoundingBox={topLeft:o.canvasToWorld([P,R]),topRight:o.canvasToWorld([P+L,R]),bottomLeft:o.canvasToWorld([P,R+H]),bottomRight:o.canvasToWorld([P+L,R+H])}}return i},this._throttledCalculateCachedStats=no(this._calculateCachedStats,100,{trailing:!0})}handleSelectedCallback(e,n,r){const a=e.detail,{element:i}=a,{data:o}=n;n.highlighted=!0;let s=!1,c;r.worldPosition?s=!0:c=o.handles.points.findIndex(u=>u===r);const l=Bt(i,this.getToolName());this.editData={annotation:n,viewportIdsToRender:l,handleIndex:c,movingTextBox:s},this._activateModify(i),Yt(i),Ae(i),qe(l),e.preventDefault()}_calculateCachedStats(e,n,r){const a=e.data,{element:i}=r.viewport;if(a.handles.points.length!==3)return;const o=a.handles.points[0],s=a.handles.points[1],c=a.handles.points[2],{cachedStats:l}=a,u=Object.keys(l);for(let f=0;f<u.length;f++){const v=u[f],g=Md([o,s],[s,c]),{dimensions:d,imageData:m}=this.getTargetImageData(v);this.isHandleOutsideImage=[o,s,c].map(h=>Da(m,h)).some(h=>!ga(h,d)),l[v]={angle:isNaN(g)?"Incomplete Angle":g}}return e.invalidated=!1,$r(e,i),l}};HC.hydrate=(e,n,r)=>{const a=wr(e);if(!a)return;const{viewport:i}=a,o=i.getFrameOfReferenceUID(),{viewPlaneNormal:s,viewUp:c}=i.getCamera(),l=new HC,u=l.getReferencedImageId(i,n[0],s,c),f={annotationUID:(r==null?void 0:r.annotationUID)||Cr(),data:{handles:{points:n}},highlighted:!1,autoGenerated:!1,invalidated:!1,isLocked:!1,isVisible:!0,metadata:{toolName:l.getToolName(),viewPlaneNormal:s,FrameOfReferenceUID:o,referencedImageId:u,...r}};qn(f,i.element),qe([i.id])};let MC=HC;function VMe(t,e){const n=t.cachedStats[e],{angle:r}=n;return r===void 0?void 0:isNaN(r)?[`${r}`]:[`${kn(r)} `]}MC.toolName="Angle";const kMe=(...t)=>{const e=t[0].length===2?[0,0]:[0,0,0],n=t.length;for(const r of t)e[0]+=r[0]/n,e[1]+=r[1]/n,e.length===3&&(e[2]+=r[2]/n);return e},mc=kMe;let ZH=class extends Br{constructor(e={},n={supportedInteractionTypes:["Mouse","Touch"],configuration:{shadow:!0,preventHandleOutsideImage:!1,getTextLines:GMe,showArcLines:!1}}){super(e,n),this.addNewAnnotation=r=>{if(this.angleStartedNotYetCompleted)return;this.angleStartedNotYetCompleted=!0;const a=r.detail,{currentPoints:i,element:o}=a,s=i.world,c=Ae(o),{viewport:l,renderingEngine:u}=c;Yt(o),this.isDrawing=!0;const f=l.getCamera(),{viewPlaneNormal:v,viewUp:g}=f,d=this.getReferencedImageId(l,s,v,g),m=l.getFrameOfReferenceUID(),h={highlighted:!0,invalidated:!0,metadata:{toolName:this.getToolName(),viewPlaneNormal:[...v],viewUp:[...g],FrameOfReferenceUID:m,referencedImageId:d,...l.getViewReference({points:[s]})},data:{handles:{points:[[...s],[...s]],activeHandleIndex:null,textBox:{hasMoved:!1,worldPosition:[0,0,0],worldBoundingBox:{topLeft:[0,0,0],topRight:[0,0,0],bottomLeft:[0,0,0],bottomRight:[0,0,0]}}},label:"",cachedStats:{}}};qn(h,o);const C=Bt(o,this.getToolName());return this.editData={annotation:h,viewportIdsToRender:C,handleIndex:1,movingTextBox:!1,newAnnotation:!0,hasMoved:!1},this._activateDraw(o),r.preventDefault(),qe(C),h},this.isPointNearTool=(r,a,i,o)=>{const s=Ae(r),{viewport:c}=s,{data:l}=a,{distanceToPoint:u,distanceToPoint2:f}=this.distanceToLines({viewport:c,points:l.handles.points,canvasCoords:i,proximity:o});return u<=o||f<=o},this.toolSelectedCallback=(r,a,i,o,s=6)=>{const c=r.detail,{element:l}=c;a.highlighted=!0;const u=Bt(l,this.getToolName()),f=Ae(l),{renderingEngine:v,viewport:g}=f,{isNearFirstLine:d,isNearSecondLine:m}=this.distanceToLines({viewport:g,points:a.data.handles.points,canvasCoords:o,proximity:s});this.editData={annotation:a,viewportIdsToRender:u,movingTextBox:!1,isNearFirstLine:d,isNearSecondLine:m},this._activateModify(l),Yt(l),qe(u),r.preventDefault()},this._endCallback=r=>{const a=r.detail,{element:i}=a,{annotation:o,viewportIdsToRender:s,newAnnotation:c,hasMoved:l}=this.editData,{data:u}=o;if(!(c&&!l)){if(this.doneEditMemo(),this.angleStartedNotYetCompleted&&u.handles.points.length<4){Mn(i),this.editData.handleIndex=u.handles.points.length;return}this.angleStartedNotYetCompleted=!1,u.handles.activeHandleIndex=null,this._deactivateModify(i),this._deactivateDraw(i),Mn(i),Ae(i),this.isHandleOutsideImage&&this.configuration.preventHandleOutsideImage&&sr(o.annotationUID),qe(s),c&&Ur(o),this.editData=null,this.isDrawing=!1}},this._mouseDownCallback=r=>{const{annotation:a,handleIndex:i}=this.editData,o=r.detail,{element:s,currentPoints:c}=o,l=c.world,{data:u}=a;if(i===1){u.handles.points[1]=l,this.editData.hasMoved=u.handles.points[1][0]!==u.handles.points[0][0]||u.handles.points[1][1]!==u.handles.points[0][0];return}if(i===3){u.handles.points[3]=l,this.editData.hasMoved=u.handles.points[3][0]!==u.handles.points[2][0]||u.handles.points[3][1]!==u.handles.points[2][0],this.angleStartedNotYetCompleted=!1;return}this.editData.hasMoved=!1,Yt(s),u.handles.points[2]=u.handles.points[3]=l,this.editData.handleIndex=u.handles.points.length-1},this._dragCallback=r=>{this.isDrawing=!0;const a=r.detail,{element:i}=a,{annotation:o,viewportIdsToRender:s,handleIndex:c,movingTextBox:l,isNearFirstLine:u,isNearSecondLine:f,newAnnotation:v}=this.editData;this.createMemo(i,o,{newAnnotation:v});const{data:g}=o;if(l){const{deltaPoints:d}=a,m=d.world,{textBox:h}=g.handles,{worldPosition:C}=h;C[0]+=m[0],C[1]+=m[1],C[2]+=m[2],h.hasMoved=!0}else if(c===void 0&&(u||f)){const{deltaPoints:d}=a,m=d.world,h=g.handles.points;u?[h[0],h[1]].forEach(p=>{p[0]+=m[0],p[1]+=m[1],p[2]+=m[2]}):f&&[h[2],h[3]].forEach(p=>{p[0]+=m[0],p[1]+=m[1],p[2]+=m[2]}),o.invalidated=!0}else{const{currentPoints:d}=a,m=d.world;g.handles.points[c]=[...m],o.invalidated=!0}this.editData.hasMoved=!0,Ae(i),qe(s)},this.cancel=r=>{if(!this.isDrawing)return;this.isDrawing=!1,this._deactivateDraw(r),this._deactivateModify(r),Mn(r);const{annotation:a,viewportIdsToRender:i,newAnnotation:o}=this.editData,{data:s}=a;return s.handles.points.length<4&&sr(a.annotationUID),a.highlighted=!1,s.handles.activeHandleIndex=null,Ae(r),qe(i),o&&Ur(a),this.editData=null,this.angleStartedNotYetCompleted=!1,a.annotationUID},this._activateModify=r=>{st.isInteractingWithTool=!0,r.addEventListener(B.MOUSE_UP,this._endCallback),r.addEventListener(B.MOUSE_DRAG,this._dragCallback),r.addEventListener(B.MOUSE_CLICK,this._endCallback)},this._deactivateModify=r=>{st.isInteractingWithTool=!1,r.removeEventListener(B.MOUSE_UP,this._endCallback),r.removeEventListener(B.MOUSE_DRAG,this._dragCallback),r.removeEventListener(B.MOUSE_CLICK,this._endCallback)},this._activateDraw=r=>{st.isInteractingWithTool=!0,r.addEventListener(B.MOUSE_UP,this._endCallback),r.addEventListener(B.MOUSE_DRAG,this._dragCallback),r.addEventListener(B.MOUSE_MOVE,this._dragCallback),r.addEventListener(B.MOUSE_CLICK,this._endCallback),r.addEventListener(B.MOUSE_DOWN,this._mouseDownCallback)},this._deactivateDraw=r=>{st.isInteractingWithTool=!1,r.removeEventListener(B.MOUSE_UP,this._endCallback),r.removeEventListener(B.MOUSE_DRAG,this._dragCallback),r.removeEventListener(B.MOUSE_MOVE,this._dragCallback),r.removeEventListener(B.MOUSE_CLICK,this._endCallback),r.removeEventListener(B.MOUSE_DOWN,this._mouseDownCallback)},this.renderAnnotation=(r,a)=>{var v;let i=!1;const{viewport:o}=r,{element:s}=o;let c=nr(this.getToolName(),s);if(!(c!=null&&c.length)||(c=this.filterInteractableAnnotationsForElement(s,c),!(c!=null&&c.length)))return i;const l=this.getTargetId(o),u=o.getRenderingEngine(),f={toolGroupId:this.toolGroupId,toolName:this.getToolName(),viewportId:r.viewport.id};for(let g=0;g<c.length;g++){const d=c[g],{annotationUID:m,data:h}=d,{points:C,activeHandleIndex:p}=h.handles;f.annotationUID=m;const{color:S,lineWidth:I,lineDash:D}=this.getAnnotationStyle({annotation:d,styleSpecifier:f}),E=C.map(Ne=>o.worldToCanvas(Ne));!h.cachedStats[l]||h.cachedStats[l].angle==null?(h.cachedStats[l]={angle:null,arc1Angle:null,arc2Angle:null,points:{world:{arc1Start:null,arc1End:null,arc2Start:null,arc2End:null,arc1Angle:null,arc2Angle:null},canvas:{arc1Start:null,arc1End:null,arc2Start:null,arc2End:null,arc1Angle:null,arc2Angle:null}}},this._calculateCachedStats(d,u,r)):d.invalidated&&this._throttledCalculateCachedStats(d,u,r);let T;if(!Ya(m)&&!this.editData&&p!==null&&(T=[E[p]]),!o.getRenderingEngine())return console.warn("Rendering Engine has been destroyed"),i;T&&Hr(a,m,"0",E,{color:S,lineDash:D,lineWidth:I});const y=[E[0],E[1]],M=[E[2],E[3]];let _="line1";if(tr(a,m,_,y[0],y[1],{color:S,width:I,lineDash:D}),i=!0,E.length<4)return i;_="line2",tr(a,m,_,M[0],M[1],{color:S,width:I,lineDash:D}),_="linkLine";const O=mc(y[0],y[1]),w=mc(M[0],M[1]);tr(a,m,_,O,w,{color:S,lineWidth:"1",lineDash:"1,4"});const{arc1Start:x,arc1End:P,arc2End:R,arc2Start:L}=h.cachedStats[l].points.canvas,{arc1Angle:H,arc2Angle:F}=h.cachedStats[l];if(this.configuration.showArcLines&&(_="arc1",tr(a,m,_,x,P,{color:S,lineWidth:"1"}),_="arc2",tr(a,m,_,L,R,{color:S,lineWidth:"1"})),!((v=h.cachedStats[l])!=null&&v.angle))continue;const U=this.getLinkedTextBoxStyle(f,d);if(!U.visibility){h.handles.textBox={hasMoved:!1,worldPosition:[0,0,0],worldBoundingBox:{topLeft:[0,0,0],topRight:[0,0,0],bottomLeft:[0,0,0],bottomRight:[0,0,0]}};continue}const V=this.configuration.getTextLines(h,l);if(!h.handles.textBox.hasMoved){const Ne=gs(E);h.handles.textBox.worldPosition=o.canvasToWorld(Ne)}const X=o.worldToCanvas(h.handles.textBox.worldPosition),ue=ro(a,m,"cobbAngleText",V,X,E,{},U),{x:De,y:pe,width:Te,height:Fe}=ue;if(h.handles.textBox.worldBoundingBox={topLeft:o.canvasToWorld([De,pe]),topRight:o.canvasToWorld([De+Te,pe]),bottomLeft:o.canvasToWorld([De,pe+Fe]),bottomRight:o.canvasToWorld([De+Te,pe+Fe])},this.configuration.showArcLines){const Ne="arcAngle1",Re=[`${H.toFixed(2)} `],k=mc(x,P);P1(a,m,Ne,Re,k,{...U,padding:3});const A="arcAngle2",b=[`${F.toFixed(2)} `],N=mc(L,R);P1(a,m,A,b,N,{...U,padding:3})}}return i},this.distanceToLines=({viewport:r,points:a,canvasCoords:i,proximity:o})=>{const[s,c,l,u]=a,f=r.worldToCanvas(s),v=r.worldToCanvas(c),g=r.worldToCanvas(l),d=r.worldToCanvas(u),m={start:{x:f[0],y:f[1]},end:{x:v[0],y:v[1]}},h={start:{x:g[0],y:g[1]},end:{x:d[0],y:d[1]}},C=Li([m.start.x,m.start.y],[m.end.x,m.end.y],[i[0],i[1]]),p=Li([h.start.x,h.start.y],[h.end.x,h.end.y],[i[0],i[1]]);let S=!1,I=!1;return C<=o?S=!0:p<=o&&(I=!0),{distanceToPoint:C,distanceToPoint2:p,isNearFirstLine:S,isNearSecondLine:I}},this.getArcsStartEndPoints=({firstLine:r,secondLine:a,mid1:i,mid2:o})=>{const s=[i,o],c=Md(r,s),l=Md(a,s),u=c>90?1:0,f=l>90?0:1,v=mc(s[0],s[1]),g=Math.sqrt((s[1][0]-s[0][0])**2+(s[1][1]-s[0][1])**2),d=.1,m=mc(r[0],r[1]),h=mc(a[0],a[1]),C=[r[u][0]-m[0],r[u][1]-m[1]],p=Math.sqrt(C[0]**2+C[1]**2),S=[C[0]/p,C[1]/p],I=[m[0]+S[0]*g*d,m[1]+S[1]*g*d],D=[v[0]-i[0],v[1]-i[1]],E=Math.sqrt(D[0]**2+D[1]**2),T=[D[0]/E,D[1]/E],y=[i[0]+T[0]*g*d,i[1]+T[1]*g*d],M=[a[f][0]-h[0],a[f][1]-h[1]],_=Math.sqrt(M[0]**2+M[1]**2),O=[M[0]/_,M[1]/_],w=[h[0]+O[0]*g*d,h[1]+O[1]*g*d],x=[v[0]-o[0],v[1]-o[1]],P=Math.sqrt(x[0]**2+x[1]**2),R=[x[0]/P,x[1]/P],L=[o[0]+R[0]*g*d,o[1]+R[1]*g*d];return{arc1Start:I,arc1End:y,arc2Start:w,arc2End:L,arc1Angle:c>90?180-c:c,arc2Angle:l>90?180-l:l}},this._throttledCalculateCachedStats=no(this._calculateCachedStats,25,{trailing:!0})}handleSelectedCallback(e,n,r,a="mouse"){const i=e.detail,{element:o}=i,{data:s}=n;n.highlighted=!0;let c=!1,l;r.worldPosition?c=!0:l=s.handles.points.findIndex(f=>f===r);const u=Bt(o,this.getToolName());this.editData={annotation:n,viewportIdsToRender:u,handleIndex:l,movingTextBox:c},this._activateModify(o),Yt(o),qe(u),e.preventDefault()}_calculateCachedStats(e,n,r){const a=e.data;if(a.handles.points.length!==4)return;const i=[null,null],o=[null,null];let s=Number.MAX_VALUE;for(let T=0;T<2;T+=1)for(let y=2;y<4;y+=1){const M=Si(a.handles.points[T],a.handles.points[y]);M<s&&(s=M,i[1]=a.handles.points[T],i[0]=a.handles.points[(T+1)%2],o[0]=a.handles.points[y],o[1]=a.handles.points[2+(y-1)%2])}const{viewport:c}=r,{element:l}=c,u=a.handles.points.map(T=>c.worldToCanvas(T)),f=[u[0],u[1]],v=[u[2],u[3]],g=mc(f[0],f[1]),d=mc(v[0],v[1]),{arc1Start:m,arc1End:h,arc2End:C,arc2Start:p,arc1Angle:S,arc2Angle:I}=this.getArcsStartEndPoints({firstLine:f,secondLine:v,mid1:g,mid2:d}),{cachedStats:D}=a,E=Object.keys(D);for(let T=0;T<E.length;T++){const y=E[T];D[y]={angle:Md(i,o),arc1Angle:S,arc2Angle:I,points:{canvas:{arc1Start:m,arc1End:h,arc2End:C,arc2Start:p},world:{arc1Start:c.canvasToWorld(m),arc1End:c.canvasToWorld(h),arc2End:c.canvasToWorld(C),arc2Start:c.canvasToWorld(p)}}}}return e.invalidated=!1,$r(e,l),D}};function GMe(t,e){const n=t.cachedStats[e],{angle:r}=n;return r===void 0?void 0:[`${r.toFixed(2)} `]}ZH.toolName="CobbAngle";const{transformWorldToIndex:aA}=Zn;class JH extends Br{constructor(e={},n={supportedInteractionTypes:["Mouse","Touch"],configuration:{shadow:!0,preventHandleOutsideImage:!1,getTextLines:BMe,displayBothAxesDistances:!1}}){super(e,n),this.addNewAnnotation=r=>{if(this.startedDrawing)return;this.startedDrawing=!0;const a=r.detail,{currentPoints:i,element:o}=a,s=i.world,c=Ae(o),{viewport:l,renderingEngine:u}=c;if(!(l instanceof Xr))throw new Error("UltrasoundDirectionalTool can only be used on a StackViewport");Yt(o),this.isDrawing=!0;const f=l.getCamera(),{viewPlaneNormal:v,viewUp:g}=f,d=this.getReferencedImageId(l,s,v,g),m=l.getFrameOfReferenceUID(),h={highlighted:!0,invalidated:!0,metadata:{toolName:this.getToolName(),viewPlaneNormal:[...v],viewUp:[...g],FrameOfReferenceUID:m,referencedImageId:d},data:{handles:{points:[[...s],[...s]],activeHandleIndex:null,textBox:{hasMoved:!1,worldPosition:[0,0,0],worldBoundingBox:{topLeft:[0,0,0],topRight:[0,0,0],bottomLeft:[0,0,0],bottomRight:[0,0,0]}}},label:"",cachedStats:{}}};qn(h,o);const C=Bt(o,this.getToolName());return this.editData={annotation:h,viewportIdsToRender:C,handleIndex:1,movingTextBox:!1,newAnnotation:!0,hasMoved:!1},this._activateDraw(o),r.preventDefault(),qe(C),h},this.isPointNearTool=(r,a,i,o)=>!1,this._endCallback=r=>{const a=r.detail,{element:i}=a,{annotation:o,viewportIdsToRender:s,newAnnotation:c,hasMoved:l}=this.editData,{data:u}=o;if(!(c&&!l)){if(this.startedDrawing&&u.handles.points.length===1){this.editData.handleIndex=1;return}this.startedDrawing=!1,u.handles.activeHandleIndex=null,this._deactivateModify(i),this._deactivateDraw(i),Mn(i),Ae(i),this.isHandleOutsideImage&&this.configuration.preventHandleOutsideImage&&sr(o.annotationUID),qe(s),c&&Ur(o),this.editData=null,this.isDrawing=!1}},this._dragCallback=r=>{this.isDrawing=!0;const a=r.detail,{element:i}=a,{annotation:o,viewportIdsToRender:s,handleIndex:c,movingTextBox:l}=this.editData,{data:u}=o;if(l){const{deltaPoints:f}=a,v=f.world,{textBox:g}=u.handles,{worldPosition:d}=g;d[0]+=v[0],d[1]+=v[1],d[2]+=v[2],g.hasMoved=!0}else if(c===void 0){const{deltaPoints:f}=a,v=f.world;u.handles.points.forEach(d=>{d[0]+=v[0],d[1]+=v[1],d[2]+=v[2]}),o.invalidated=!0}else{const{currentPoints:f}=a,v=f.world;u.handles.points[c]=[...v],o.invalidated=!0}this.editData.hasMoved=!0,Ae(i),qe(s)},this.cancel=r=>{if(this.isDrawing){this.isDrawing=!1,this._deactivateDraw(r),this._deactivateModify(r),Mn(r);const{annotation:a,viewportIdsToRender:i,newAnnotation:o}=this.editData,{data:s}=a;return a.highlighted=!1,s.handles.activeHandleIndex=null,qe(i),o&&Ur(a),this.editData=null,this.startedDrawing=!1,a.annotationUID}},this._activateModify=r=>{st.isInteractingWithTool=!0,r.addEventListener(B.MOUSE_UP,this._endCallback),r.addEventListener(B.MOUSE_DRAG,this._dragCallback),r.addEventListener(B.MOUSE_CLICK,this._endCallback),r.addEventListener(B.TOUCH_TAP,this._endCallback),r.addEventListener(B.TOUCH_END,this._endCallback),r.addEventListener(B.TOUCH_DRAG,this._dragCallback)},this._deactivateModify=r=>{st.isInteractingWithTool=!1,r.removeEventListener(B.MOUSE_UP,this._endCallback),r.removeEventListener(B.MOUSE_DRAG,this._dragCallback),r.removeEventListener(B.MOUSE_CLICK,this._endCallback),r.removeEventListener(B.TOUCH_TAP,this._endCallback),r.removeEventListener(B.TOUCH_END,this._endCallback),r.removeEventListener(B.TOUCH_DRAG,this._dragCallback)},this._activateDraw=r=>{st.isInteractingWithTool=!0,r.addEventListener(B.MOUSE_UP,this._endCallback),r.addEventListener(B.MOUSE_DRAG,this._dragCallback),r.addEventListener(B.MOUSE_MOVE,this._dragCallback),r.addEventListener(B.MOUSE_CLICK,this._endCallback),r.addEventListener(B.TOUCH_TAP,this._endCallback),r.addEventListener(B.TOUCH_END,this._endCallback),r.addEventListener(B.TOUCH_DRAG,this._dragCallback)},this._deactivateDraw=r=>{st.isInteractingWithTool=!1,r.removeEventListener(B.MOUSE_UP,this._endCallback),r.removeEventListener(B.MOUSE_DRAG,this._dragCallback),r.removeEventListener(B.MOUSE_MOVE,this._dragCallback),r.removeEventListener(B.MOUSE_CLICK,this._endCallback),r.removeEventListener(B.TOUCH_TAP,this._endCallback),r.removeEventListener(B.TOUCH_END,this._endCallback),r.removeEventListener(B.TOUCH_DRAG,this._dragCallback)},this.renderAnnotation=(r,a)=>{let i=!1;const{viewport:o}=r,{element:s}=o;let c=nr(this.getToolName(),s);if(!(c!=null&&c.length)||(c=this.filterInteractableAnnotationsForElement(s,c),!(c!=null&&c.length)))return i;const l=this.getTargetId(o),u=o.getRenderingEngine(),f={toolGroupId:this.toolGroupId,toolName:this.getToolName(),viewportId:r.viewport.id};for(let v=0;v<c.length;v++){const g=c[v],{annotationUID:d,data:m}=g,{points:h}=m.handles;f.annotationUID=d;const C=this.getStyle("color",f,g),p=h.map(P=>o.worldToCanvas(P));if(!m.cachedStats[l]||m.cachedStats[l].xValues==null?(m.cachedStats[l]={xValues:[0,0],yValues:[0,0],isHorizontal:!1,units:[""],isUnitless:!1},this._calculateCachedStats(g,u,r)):g.invalidated&&this._throttledCalculateCachedStats(g,u,r),!o.getRenderingEngine())return console.warn("Rendering Engine has been destroyed"),i;let S="0";if(pC(a,d,S,p[0],{color:C},0),i=!0,p.length!==2)return i;if(S="1",pC(a,d,S,p[1],{color:C},1),m.cachedStats[l].isUnitless){const P=`${d}-line-1`;tr(a,d,"1",p[0],p[1],{color:C,width:1,shadow:this.configuration.shadow},P)}else{const P=p[0],R=p[1],L=R[1]-P[1],H=R[0]-P[0],F=m.cachedStats[l].isHorizontal;let U=[0,0];F?U=[P[0]+H,P[1]]:U=[P[0],P[1]+L];let V=`${d}-line-1`,X="1";tr(a,d,X,p[0],U,{color:C,width:1,shadow:this.configuration.shadow},V),V=`${d}-line-2`,X="2",tr(a,d,X,p[1],U,{color:C,width:1,lineDash:[1,1],shadow:this.configuration.shadow},V)}const D=this.getLinkedTextBoxStyle(f,g);if(!D.visibility){m.handles.textBox={hasMoved:!1,worldPosition:[0,0,0],worldBoundingBox:{topLeft:[0,0,0],topRight:[0,0,0],bottomLeft:[0,0,0],bottomRight:[0,0,0]}};continue}const E=this.configuration.getTextLines(m,l,this.configuration);if(!m.handles.textBox.hasMoved){const P=p[1];m.handles.textBox.worldPosition=o.canvasToWorld(P)}const T=o.worldToCanvas(m.handles.textBox.worldPosition),M=ro(a,d,"1",E,T,p,{},D),{x:_,y:O,width:w,height:x}=M;m.handles.textBox.worldBoundingBox={topLeft:o.canvasToWorld([_,O]),topRight:o.canvasToWorld([_+w,O]),bottomLeft:o.canvasToWorld([_,O+x]),bottomRight:o.canvasToWorld([_+w,O+x])}}return i},this._throttledCalculateCachedStats=no(this._calculateCachedStats,100,{trailing:!0})}toolSelectedCallback(e,n,r,a){}handleSelectedCallback(e,n,r){const a=e.detail,{element:i}=a,{data:o}=n;n.highlighted=!0;const s=Bt(i,this.getToolName());let c;r.worldPosition||(c=o.handles.points.findIndex(l=>l===r)),this.editData={handleIndex:c,annotation:n,viewportIdsToRender:s},this._activateModify(i),Yt(i),Ae(i),qe(s),e.preventDefault()}_calculateCachedStats(e,n,r){const a=e.data,{element:i}=r.viewport;if(a.handles.points.length!==2)return;const{cachedStats:o}=a,s=Object.keys(o);for(let c=0;c<s.length;c++){const l=s[c],u=this.getTargetImageData(l);if(!u)continue;const{imageData:f}=u,v=a.handles.points[0],g=a.handles.points[1],d=aA(f,v),m=aA(f,g),{values:h,units:C}=dC(u,[d]),{values:p,units:S}=dC(u,[m]);let I,D,E,T,y=!1;if(C[0]!==S[0]||C[1]!==S[1]||C[0]==="raw"&&S[0]==="raw"){const M=bs(v,g);I=[M,0],D=[M,0],E=["px"],y=!0}else{const M=r.viewport.worldToCanvas(v),_=r.viewport.worldToCanvas(g),O=_[1]-M[1],w=_[0]-M[0];T=Math.abs(w)>Math.abs(O),I=[h[0],p[0]],D=[h[1],p[1]],E=[C[0],C[1]]}o[l]={xValues:I,yValues:D,isHorizontal:T,units:E,isUnitless:y}}return e.invalidated=!1,$r(e,i),o}}function BMe(t,e,n){const r=t.cachedStats[e],{xValues:a,yValues:i,units:o,isUnitless:s,isHorizontal:c}=r;if(s)return[`${kn(a[0])} px`];if(n.displayBothAxesDistances){const l=Math.abs(a[1]-a[0]),u=Math.abs(i[1]-i[0]);return[`${kn(l)} ${o[0]}`,`${kn(u)} ${o[1]}`]}if(c){const l=Math.abs(a[1]-a[0]);return[`${kn(l)} ${o[0]}`]}else{const l=Math.abs(i[1]-i[0]);return[`${kn(l)} ${o[1]}`]}}JH.toolName="UltrasoundDirectionalTool";let e$=class t$ extends Br{constructor(e={},n={supportedInteractionTypes:["Mouse","Touch"],configuration:{getTextCallback:WMe,changeTextCallback:HMe,canvasPosition:[10,10],canvasSize:10}}){super(e,n),this.addNewAnnotation=r=>{const a=r.detail,{currentPoints:i,element:o}=a,s=i.world,c=Ae(o),{viewport:l}=c,u=l.getCamera(),{viewPlaneNormal:f,viewUp:v}=u,g=this.getReferencedImageId(l,s,f,v),d=t$.createAnnotation({metadata:{...l.getViewReference(),referencedImageId:g}});qn(d,o);const m=Bt(o,this.getToolName());return r.preventDefault(),qe(m),this.configuration.getTextCallback(h=>{if(!h){sr(d.annotationUID),qe(m),this.isDrawing=!1;return}d.data.text=h,Ur(d),qe(m)}),this.createMemo(o,d,{newAnnotation:!0}),d},this.isPointNearTool=(r,a,i,o)=>{Ae(r);const{canvasPosition:s,canvasSize:c}=this.configuration;return s!=null&&s.length?Math.abs(i[0]-s[0]+c/2)<=c/2&&Math.abs(i[1]-s[1]+c/2)<=c/2:!1},this.toolSelectedCallback=(r,a)=>{a.highlighted=!0,r.preventDefault()},this._endCallback=r=>{const a=r.detail,{element:i}=a;this.doneEditMemo(),this._deactivateModify(i),Mn(i)},this.doubleClickCallback=r=>{const a=r.detail,{element:i}=a;let o=nr(this.getToolName(),i);if(o=this.filterInteractableAnnotationsForElement(i,o),!(o!=null&&o.length))return;const s=o.find(l=>this.isPointNearTool(i,l,a.currentPoints.canvas,6));if(!s)return;const c=s;this.createMemo(i,c),this.configuration.changeTextCallback(s,r.detail,this._doneChangingTextCallback.bind(this,i,c)),this.isDrawing=!1,this.doneEditMemo(),r.stopImmediatePropagation(),r.preventDefault()},this._activateModify=r=>{st.isInteractingWithTool=!0,r.addEventListener(B.MOUSE_UP,this._endCallback),r.addEventListener(B.MOUSE_CLICK,this._endCallback),r.addEventListener(B.TOUCH_TAP,this._endCallback),r.addEventListener(B.TOUCH_END,this._endCallback)},this._deactivateModify=r=>{st.isInteractingWithTool=!1,r.removeEventListener(B.MOUSE_UP,this._endCallback),r.removeEventListener(B.MOUSE_CLICK,this._endCallback),r.removeEventListener(B.TOUCH_TAP,this._endCallback),r.removeEventListener(B.TOUCH_END,this._endCallback)},this.renderAnnotation=(r,a)=>{let i=!1;const{viewport:o}=r,{element:s}=o;let c=nr(this.getToolName(),s);if(!(c!=null&&c.length)||(c=this.filterInteractableAnnotationsForElement(s,c),!(c!=null&&c.length)))return i;const l={toolGroupId:this.toolGroupId,toolName:this.getToolName(),viewportId:r.viewport.id};for(let u=0;u<c.length;u++){const f=c[u],{annotationUID:v}=f;l.annotationUID=v;const{color:g}=this.getAnnotationStyle({annotation:f,styleSpecifier:l}),{canvasPosition:d,canvasSize:m}=this.configuration;if(d!=null&&d.length&&SC(a,v,"1",d.map(C=>C+m),d,{color:g,width:1}),i=!0,!o.getRenderingEngine())return console.warn("Rendering Engine has been destroyed"),i}return i}}cancel(){}handleSelectedCallback(e,n,r){}_doneChangingTextCallback(e,n,r){n.data.text=r,Ae(e);const a=Bt(e,this.getToolName());qe(a),$r(n,e)}_isInsideVolume(e,n,r){return ga(e,r)&&ga(n,r)}};function WMe(t){return t(prompt("Enter your annotation:"))}function HMe(t,e,n){return n(prompt("Enter your annotation:"))}e$.toolName="KeyImage";class n$ extends Xa{constructor(e={},n={supportedInteractionTypes:["Mouse","Touch"]}){super(e,n),this.preMouseDownCallback=r=>this._deleteNearbyAnnotations(r,"mouse"),this.preTouchStartCallback=r=>this._deleteNearbyAnnotations(r,"touch")}_deleteNearbyAnnotations(e,n){const{renderingEngineId:r,viewportId:a,element:i,currentPoints:o}=e.detail,s=la(a,r);if(!s)return!1;const c=s._toolInstances,l=[];for(const u in c){const f=c[u];if(typeof f.isPointNearTool!="function"||typeof f.filterInteractableAnnotationsForElement!="function")continue;const v=nr(u,i),g=f.filterInteractableAnnotationsForElement(i,v);if(g)for(const d of g)f.isPointNearTool(i,d,o.canvas,10,n)&&l.push(d.annotationUID)}for(const u of l){xs(u);const f=Ta(u);Br.createAnnotationMemo(i,f,{deleting:!0}),sr(u)}return e.preventDefault(),!0}}n$.toolName="Eraser";const{transformWorldToIndex:iA,transformIndexToWorld:$Me}=Zn,Wd=class Wd extends Xa{constructor(e,n){const r=pi({configuration:{positiveSeedVariance:.1,negativeSeedVariance:.9,shrinkExpandIncrement:.05,islandRemoval:{enabled:!1}}},n);super(e,r)}async preMouseDownCallback(e){const n=e.detail,{element:r,currentPoints:a}=n,{world:i}=a,o=Ae(r),{viewport:s,renderingEngine:c}=o,{viewUp:l}=s.getCamera(),{segmentationId:u,segmentIndex:f,labelmapVolumeId:v,referencedVolumeId:g}=await this.getLabelmapSegmentationData(s);if(!this._isOrthogonalView(s,g))throw new Error("Oblique view is not supported yet");return this.growCutData={metadata:{...s.getViewReference({points:[i]}),viewUp:l},segmentation:{segmentationId:u,segmentIndex:f,labelmapVolumeId:v,referencedVolumeId:g},viewportId:s.id,renderingEngineId:c.id},e.preventDefault(),!0}shrink(){this._runLastCommand({shrinkExpandAmount:-this.configuration.shrinkExpandIncrement})}expand(){this._runLastCommand({shrinkExpandAmount:this.configuration.shrinkExpandIncrement})}refresh(){this._runLastCommand()}async getGrowCutLabelmap(e){throw new Error("Not implemented")}async runGrowCut(){const{growCutData:e,configuration:n}=this,{segmentation:{segmentationId:r,segmentIndex:a,labelmapVolumeId:i}}=e,o=n.positiveSeedVariance!==void 0&&n.negativeSeedVariance!==void 0,s=Ye.getVolume(i);let c=0;const l=async({shrinkExpandAmount:u=0}={})=>{const{positiveSeedVariance:f,negativeSeedVariance:v}=n;let g,d;c+=u,o&&(g=f+c,d=v+c);const m=Object.assign({},e,{options:{positiveSeedValue:a,negativeSeedValue:255,positiveSeedVariance:g,negativeSeedVariance:d}}),h=await this.getGrowCutLabelmap(m);this.applyGrowCutLabelmap(r,a,s,h),this._removeIslands(e)};await l(),o&&(Wd.lastGrowCutCommand=l),this.growCutData=null}applyGrowCutLabelmap(e,n,r,a){const i=a.voxelManager.getCompleteScalarDataArray(),o=r.voxelManager,[s,c,l]=a.dimensions,[u,f]=r.dimensions,v=s*c,g=u*f;for(let d=0;d<l;d++)for(let m=0;m<c;m++){const h=[0,m,d],C=$Me(a.imageData,h),p=iA(r.imageData,C),[S,I,D]=p,E=m*s+d*v,T=S+I*u+D*g;for(let y=0;y<s;y++){const M=i[E+y]===n?n:0;o.setAtIndex(T+y,M)}}ki(e)}_runLastCommand({shrinkExpandAmount:e=0}={}){const n=Wd.lastGrowCutCommand;n&&n({shrinkExpandAmount:e})}async getLabelmapSegmentationData(e){const n=hu(e.id);if(!n)throw new Error("No active segmentation found");const{segmentationId:r}=n,a=Bo(r),{representationData:i}=Un(r),o=i[Ft.Labelmap],{volumeId:s,referencedVolumeId:c}=o;if(!s)throw new Error("Labelmap volume id not found - not implemented");return{segmentationId:r,segmentIndex:a,labelmapVolumeId:s,referencedVolumeId:c}}_isOrthogonalView(e,n){const a=Ye.getVolume(n).imageData,i=e.getCamera(),{ijkVecColDir:o,ijkVecSliceDir:s}=_I(a,i);return[o,s].every(c=>gn(Math.abs(c[0]),1)||gn(Math.abs(c[1]),1)||gn(Math.abs(c[2]),1))}getRemoveIslandData(e){}_removeIslands(e){const{islandRemoval:n}=this.configuration;if(!n.enabled)return;const{segmentation:{segmentIndex:r,labelmapVolumeId:a},renderingEngineId:i,viewportId:o}=e,s=Ye.getVolume(a),c=this.getRemoveIslandData(e);if(!c)return;const[l,u]=s.dimensions,f=l*u,{worldIslandPoints:v=[],islandPointIndexes:g=[]}=c;let d=[...(c==null?void 0:c.ijkIslandPoints)??[]];const h=da(i).getViewport(o),{voxelManager:C}=s,p=new R1;d=d.concat(v.map(S=>iA(s.imageData,S))),d=d.concat(g.map(S=>{const I=S%l,D=Math.floor(S/l)%u,E=Math.floor(S/f);return[I,D,E]})),p.initialize(h,C,{points:d,previewSegmentIndex:r,segmentIndex:r}),p.floodFillSegmentIsland(),p.removeExternalIslands(),p.removeInternalIslands()}getSegmentStyle({segmentationId:e,viewportId:n,segmentIndex:r}){return tB({segmentationId:e,segmentIndex:r,viewportId:n})}};Wd.lastGrowCutCommand=null;let Cv=Wd;Cv.toolName="GrowCutBaseTool";class r$ extends Cv{constructor(e={},n={supportedInteractionTypes:["Mouse","Touch"],configuration:{positiveSeedVariance:.5,negativeSeedVariance:.9}}){super(e,n),this._dragCallback=r=>{const a=r.detail,{element:i,currentPoints:o}=a,{world:s}=o,c=Ae(i),{viewport:l}=c;this.growCutData.circleBorderPoint=s,qe([l.id])},this._endCallback=async r=>{const a=r.detail,{element:i}=a,o=Ae(i),{viewport:s}=o;this.runGrowCut(),this._deactivateDraw(i),this.growCutData=null,Mn(i),qe([s.id])},this._deactivateDraw=r=>{r.removeEventListener(B.MOUSE_UP,this._endCallback),r.removeEventListener(B.MOUSE_DRAG,this._dragCallback),r.removeEventListener(B.MOUSE_CLICK,this._endCallback)}}async preMouseDownCallback(e){const n=e.detail,{element:r,currentPoints:a}=n,{world:i}=a,o=Ae(r),{viewport:s,renderingEngine:c}=o;return await super.preMouseDownCallback(e),Object.assign(this.growCutData,{circleCenterPoint:i,circleBorderPoint:i}),this._activateDraw(r),Yt(r),qe([s.id]),!0}async getGrowCutLabelmap(e){const{segmentation:{referencedVolumeId:n},renderingEngineId:r,viewportId:a,circleCenterPoint:i,circleBorderPoint:o,options:s}=e,l=da(r).getViewport(a),u=ov(Dr(Xe(),i,o));return QW(n,{center:i,radius:u},l,s)}_activateDraw(e){e.addEventListener(B.MOUSE_UP,this._endCallback),e.addEventListener(B.MOUSE_DRAG,this._dragCallback),e.addEventListener(B.MOUSE_CLICK,this._endCallback)}renderAnnotation(e,n){if(!this.growCutData)return;const{viewport:r}=e,{segmentation:a,circleCenterPoint:i,circleBorderPoint:o}=this.growCutData,s=r.worldToCanvas(i),c=r.worldToCanvas(o),l=Ps(In(),c,s),u=jZ(l);if(gn(u,0))return;const f="growcut",v="0",{color:g}=this.getSegmentStyle({segmentationId:a.segmentationId,segmentIndex:a.segmentIndex,viewportId:r.id});Mo(n,f,v,s,u,{color:g})}}r$.toolName="RegionSegment";class a$ extends Cv{constructor(e={},n={supportedInteractionTypes:["Mouse","Touch"],configuration:{positiveSeedVariance:.4,negativeSeedVariance:.9,subVolumePaddingPercentage:.1,islandRemoval:{enabled:!0}}}){super(e,n)}async preMouseDownCallback(e){const n=e.detail,{currentPoints:r}=n,{world:a}=r;return await super.preMouseDownCallback(e),this.growCutData=pi(this.growCutData,{worldPoint:a,islandRemoval:{worldIslandPoints:[a]}}),this.growCutData.worldPoint=a,this.growCutData.islandRemoval={worldIslandPoints:[a]},this.runGrowCut(),!0}getRemoveIslandData(e){const{worldPoint:n}=e;return{worldIslandPoints:[n]}}async getGrowCutLabelmap(e){const{segmentation:{referencedVolumeId:n},renderingEngineId:r,viewportId:a,worldPoint:i,options:o}=e,c=da(r).getViewport(a),{subVolumePaddingPercentage:l}=this.configuration,u={...o,subVolumePaddingPercentage:l};return XW(n,i,c,u)}}a$.toolName="RegionSegmentPlus";const zMe=[-1/0,-995],qMe=[0,1900],jMe=[1e3,1900],{transformWorldToIndex:n2,transformIndexToWorld:n3}=Zn;class i$ extends Cv{constructor(e={},n={supportedInteractionTypes:["Mouse","Touch"],configuration:{positivePixelRange:qMe,negativePixelRange:zMe,islandRemoval:{enabled:!0,islandPixelRange:jMe}}}){super(e,n),this._dragCallback=r=>{const a=r.detail,{element:i,currentPoints:o}=a,{world:s}=o,c=Ae(i),{viewport:l}=c,u=this._getHorizontalLineWorldPoints(c,s);this.growCutData.horizontalLines[1]=u,qe([l.id])},this._endCallback=async r=>{const a=r.detail,{element:i}=a,o=Ae(i),{viewport:s}=o;await this.runGrowCut(),this._deactivateDraw(i),this.growCutData=null,Mn(i),qe([s.id])},this._deactivateDraw=r=>{r.removeEventListener(B.MOUSE_UP,this._endCallback),r.removeEventListener(B.MOUSE_DRAG,this._dragCallback),r.removeEventListener(B.MOUSE_CLICK,this._endCallback)}}async preMouseDownCallback(e){const n=e.detail,{element:r,currentPoints:a}=n,{world:i}=a,o=Ae(r),{viewport:s,renderingEngine:c}=o,l=this._getHorizontalLineWorldPoints(o,i);return await super.preMouseDownCallback(e),this.growCutData.horizontalLines=[l,l],this._activateDraw(r),Yt(r),qe([s.id]),!0}renderAnnotation(e,n){if(!this.growCutData)return;const{segmentation:r,horizontalLines:a}=this.growCutData;if(a.length!==2)return;const{viewport:i}=e,{segmentationId:o,segmentIndex:s}=r,[c,l]=a,[u,f]=c,[v,g]=l,d=[u,f,g,v].map(E=>i.worldToCanvas(E)),m="growCutRect",h="0",{color:C,fillColor:p,lineWidth:S,fillOpacity:I,lineDash:D}=this.getSegmentStyle({segmentationId:o,segmentIndex:s,viewportId:i.id});c0(n,m,h,d,{color:C,fillColor:p,fillOpacity:I,lineWidth:S,lineDash:D,closePath:!0})}async getGrowCutLabelmap(e){const{segmentation:{segmentIndex:n,referencedVolumeId:r},renderingEngineId:a,viewportId:i,horizontalLines:o}=e,c=da(a).getViewport(i),[l,u]=o,f=[l[0],l[1],u[1],u[0]],v=Ye.getVolume(r),{topLeft:g,bottomRight:d}=this._getWorldBoundingBoxFromProjectedSquare(c,f),m=n2(v.imageData,g),h=n2(v.imageData,d),C={boundingBox:{ijkTopLeft:m,ijkBottomRight:h}},p=this.configuration,S={positiveSeedValue:n,negativeSeedValue:255,negativePixelRange:p.negativePixelRange,positivePixelRange:p.positivePixelRange};return KW(r,C,S)}getRemoveIslandData(){const{segmentation:{segmentIndex:e,referencedVolumeId:n,labelmapVolumeId:r}}=this.growCutData,a=Ye.getVolume(n),i=Ye.getVolume(r),o=a.voxelManager.getCompleteScalarDataArray(),s=i.voxelManager.getCompleteScalarDataArray(),{islandPixelRange:c}=this.configuration.islandRemoval,l=[];for(let u=0,f=s.length;u<f;u++){if(s[u]!==e)continue;const v=o[u];v>=c[0]&&v<=c[1]&&l.push(u)}return{islandPointIndexes:l}}_activateDraw(e){e.addEventListener(B.MOUSE_UP,this._endCallback),e.addEventListener(B.MOUSE_DRAG,this._dragCallback),e.addEventListener(B.MOUSE_CLICK,this._endCallback)}_projectWorldPointAcrossSlices(e,n,r){const a=this._getViewportVolume(e),{dimensions:i}=a,o=n2(a.imageData,n),s=r.findIndex(u=>gn(Math.abs(u),1));if(s===-1)throw new Error("Non-orthogonal direction vector");const c=[...o],l=[...o];return c[s]=0,l[s]=i[s]-1,[c,l]}_getCuboidIJKEdgePointsFromProjectedWorldPoint(e,n){const{viewPlaneNormal:r}=e.getCamera();return this._projectWorldPointAcrossSlices(e,n,r)}_getWorldCuboidCornerPoints(e,n){const r=[],a=this._getViewportVolume(e);return n.forEach(i=>{const s=this._getCuboidIJKEdgePointsFromProjectedWorldPoint(e,i).map(c=>n3(a.imageData,c));r.push(...s)}),r}_getWorldBoundingBoxFromProjectedSquare(e,n){const r=this._getWorldCuboidCornerPoints(e,n),a=[...r[0]],i=[...r[0]];return r.forEach(o=>{MT(a,a,o),R2(i,i,o)}),{topLeft:a,bottomRight:i}}_getViewportVolume(e){if(!(e instanceof zr))throw new Error("Viewport is not a BaseVolumeViewport");const n=e.getAllVolumeIds()[0];return Ye.getVolume(n)}_getHorizontalLineIJKPoints(e,n){const{viewport:r}=e,a=this._getViewportVolume(r),{dimensions:i}=a,o=n2(a.imageData,n),{viewUp:s,viewPlaneNormal:c}=r.getCamera(),u=gr(Xe(),s,c).findIndex(g=>gn(Math.abs(g),1)),f=[...o],v=[...o];return f[u]=0,v[u]=i[u]-1,[f,v]}_getHorizontalLineWorldPoints(e,n){const{viewport:r}=e,a=this._getViewportVolume(r),[i,o]=this._getHorizontalLineIJKPoints(e,n),s=n3(a.imageData,i),c=n3(a.imageData,o);return[s,c]}}i$.toolName="WholeBodySegment";function QMe(t,e,n=!0){const r=Object.assign({},e,{segmentIndex:0});u4(t,r)}function KMe(t,e){QMe(t,e,!0)}let o$=class extends b1{constructor(e={},n={supportedInteractionTypes:["Mouse","Touch"],configuration:{strategies:{FILL_INSIDE:u4,ERASE_INSIDE:KMe},defaultStrategy:"FILL_INSIDE",activeStrategy:"FILL_INSIDE"}}){super(e,n),this.preMouseDownCallback=r=>{if(this.isDrawing===!0)return;const a=r.detail,{currentPoints:i,element:o}=a,s=i.world,c=Ae(o),{viewport:l}=c;this.isDrawing=!0;const u=l.getCamera(),{viewPlaneNormal:f,viewUp:v}=u,g=hu(l.id);if(!g)throw new Error("No active segmentation detected, create one before using scissors tool");const{segmentationId:d}=g,m=Bo(d),h=q1(d),C=Jc(l.id,d,m),{representationData:p}=Un(d),S=p[Ft.Labelmap],I={highlighted:!0,invalidated:!0,metadata:{viewPlaneNormal:[...f],viewUp:[...v],FrameOfReferenceUID:l.getFrameOfReferenceUID(),referencedImageId:"",toolName:this.getToolName(),segmentColor:C},data:{handles:{points:[[...s],[...s],[...s],[...s]],activeHandleIndex:null}}},D=Bt(o,this.getToolName());if(this.editData={annotation:I,segmentIndex:m,segmentationId:d,segmentsLocked:h,segmentColor:C,viewportIdsToRender:D,handleIndex:3,movingTextBox:!1,newAnnotation:!0,hasMoved:!1,volumeId:null,referencedVolumeId:null,imageId:null},l instanceof zr){const{volumeId:E}=S,T=Ye.getVolume(E);this.editData={...this.editData,volumeId:E,referencedVolumeId:T.referencedVolumeId}}else{const E=fs(l.id,d);this.editData={...this.editData,imageId:E}}return this._activateDraw(o),Yt(o),r.preventDefault(),qe(D),!0},this._dragCallback=r=>{this.isDrawing=!0;const a=r.detail,{element:i}=a,{annotation:o,viewportIdsToRender:s,handleIndex:c}=this.editData,{data:l}=o,{currentPoints:u}=a,f=Ae(i),{worldToCanvas:v,canvasToWorld:g}=f.viewport,d=u.world,{points:m}=l.handles;m[c]=[...d];let h,C,p,S,I,D,E,T;switch(c){case 0:case 3:h=v(m[0]),S=v(m[3]),C=[S[0],h[1]],p=[h[0],S[1]],D=g(C),E=g(p),m[1]=D,m[2]=E;break;case 1:case 2:C=v(m[1]),p=v(m[2]),h=[p[0],C[1]],S=[C[0],p[1]],I=g(h),T=g(S),m[0]=I,m[3]=T;break}o.invalidated=!0,this.editData.hasMoved=!0,qe(s)},this._endCallback=r=>{const a=r.detail,{element:i}=a,{annotation:o,newAnnotation:s,hasMoved:c}=this.editData,{data:l}=o;if(s&&!c)return;l.handles.activeHandleIndex=null,this._deactivateDraw(i),Mn(i);const u=Ae(i),f={...this.editData,points:l.handles.points,strategySpecificConfiguration:{},createMemo:this.createMemo.bind(this)};this.editData=null,this.isDrawing=!1,this.applyActiveStrategy(u,f),this.doneEditMemo()},this._activateDraw=r=>{r.addEventListener(B.MOUSE_UP,this._endCallback),r.addEventListener(B.MOUSE_DRAG,this._dragCallback),r.addEventListener(B.MOUSE_MOVE,this._dragCallback),r.addEventListener(B.MOUSE_CLICK,this._endCallback),r.addEventListener(B.TOUCH_END,this._endCallback),r.addEventListener(B.TOUCH_DRAG,this._dragCallback),r.addEventListener(B.TOUCH_TAP,this._endCallback)},this._deactivateDraw=r=>{r.removeEventListener(B.MOUSE_UP,this._endCallback),r.removeEventListener(B.MOUSE_DRAG,this._dragCallback),r.removeEventListener(B.MOUSE_MOVE,this._dragCallback),r.removeEventListener(B.MOUSE_CLICK,this._endCallback),r.removeEventListener(B.TOUCH_TAP,this._endCallback),r.removeEventListener(B.TOUCH_END,this._endCallback),r.removeEventListener(B.TOUCH_DRAG,this._dragCallback)},this.renderAnnotation=(r,a)=>{let i=!1;if(!this.editData)return i;const{viewport:o}=r,{annotation:s}=this.editData,c=s.metadata,l=s.annotationUID,u=s.data,{points:f}=u.handles,v=f.map(m=>o.worldToCanvas(m)),g=`rgb(${c.segmentColor.slice(0,3)})`;return o.getRenderingEngine()?(Ch(a,l,"0",v[0],v[3],{color:g}),i=!0,i):(console.warn("Rendering Engine has been destroyed"),i)}}};o$.toolName="RectangleScissor";let s$=class extends b1{constructor(e={},n={supportedInteractionTypes:["Mouse","Touch"],configuration:{strategies:{FILL_INSIDE:tD,ERASE_INSIDE:bW},defaultStrategy:"FILL_INSIDE",activeStrategy:"FILL_INSIDE"}}){super(e,n),this.preMouseDownCallback=r=>{if(this.isDrawing===!0)return;const a=r.detail,{currentPoints:i,element:o}=a,s=i.world,c=i.canvas,l=Ae(o),{viewport:u}=l;this.isDrawing=!0;const f=u.getCamera(),{viewPlaneNormal:v,viewUp:g}=f,d=hu(u.id);if(!d)throw new Error("No active segmentation detected, create one before using scissors tool");const{segmentationId:m}=d,h=Bo(m),C=q1(m),p=Jc(u.id,m,h),{representationData:S}=Un(m),I=S.Labelmap;if(!I)throw new Error("No labelmap data found for the active segmentation, create one before using scissors tool");const D={invalidated:!0,highlighted:!0,metadata:{viewPlaneNormal:[...v],viewUp:[...g],FrameOfReferenceUID:u.getFrameOfReferenceUID(),referencedImageId:"",toolName:this.getToolName(),segmentColor:p},data:{handles:{points:[[...s],[...s],[...s],[...s]],activeHandleIndex:null},isDrawing:!0,cachedStats:{}}},E=[u.id];if(this.editData={annotation:D,centerCanvas:c,segmentIndex:h,segmentationId:m,segmentsLocked:C,segmentColor:p,viewportIdsToRender:E,handleIndex:3,movingTextBox:!1,newAnnotation:!0,hasMoved:!1,volumeId:null,referencedVolumeId:null,imageId:null},u instanceof zr){const{volumeId:T}=I,y=Ye.getVolume(T);this.editData={...this.editData,volumeId:T,referencedVolumeId:y.referencedVolumeId}}else{const T=fs(u.id,m);this.editData={...this.editData,imageId:T}}return this._activateDraw(o),Yt(o),r.preventDefault(),qe(E),!0},this._dragCallback=r=>{this.isDrawing=!0;const a=r.detail,{element:i}=a,{currentPoints:o}=a,s=o.canvas,c=Ae(i),{renderingEngine:l,viewport:u}=c,{canvasToWorld:f}=u,{annotation:v,viewportIdsToRender:g,centerCanvas:d}=this.editData,{data:m}=v,h=Math.abs(s[0]-d[0]),C=Math.abs(s[1]-d[1]),p=Math.sqrt(h*h+C*C),S=[d[0],d[1]+p],I=[d[0],d[1]-p],D=[d[0]-p,d[1]],E=[d[0]+p,d[1]];m.handles.points=[f(S),f(I),f(D),f(E)],v.invalidated=!0,this.editData.hasMoved=!0,qe(g)},this._endCallback=r=>{const a=r.detail,{element:i}=a,{annotation:o,newAnnotation:s,hasMoved:c}=this.editData,{data:l}=o,{viewPlaneNormal:u,viewUp:f}=o.metadata;if(s&&!c)return;l.handles.activeHandleIndex=null,this._deactivateDraw(i),Mn(i);const v=Ae(i),g={...this.editData,points:l.handles.points,viewPlaneNormal:u,viewUp:f,strategySpecificConfiguration:{},createMemo:this.createMemo.bind(this)};this.editData=null,this.isDrawing=!1,this.applyActiveStrategy(v,g),this.doneEditMemo()},this._activateDraw=r=>{r.addEventListener(B.MOUSE_UP,this._endCallback),r.addEventListener(B.MOUSE_DRAG,this._dragCallback),r.addEventListener(B.MOUSE_CLICK,this._endCallback),r.addEventListener(B.MOUSE_MOVE,this._dragCallback),r.addEventListener(B.TOUCH_TAP,this._endCallback),r.addEventListener(B.TOUCH_DRAG,this._dragCallback),r.addEventListener(B.TOUCH_END,this._endCallback)},this._deactivateDraw=r=>{r.removeEventListener(B.MOUSE_UP,this._endCallback),r.removeEventListener(B.MOUSE_DRAG,this._dragCallback),r.removeEventListener(B.MOUSE_CLICK,this._endCallback),r.removeEventListener(B.MOUSE_MOVE,this._dragCallback),r.removeEventListener(B.TOUCH_END,this._endCallback),r.removeEventListener(B.TOUCH_DRAG,this._dragCallback),r.removeEventListener(B.TOUCH_TAP,this._endCallback)},this.renderAnnotation=(r,a)=>{let i=!1;if(!this.editData)return i;const{viewport:o}=r,{viewportIdsToRender:s}=this.editData;if(!s.includes(o.id))return i;const{annotation:c}=this.editData,l=c.metadata,u=c.annotationUID,f=c.data,{points:v}=f.handles,g=v.map(I=>o.worldToCanvas(I)),d=g[0],m=g[1],h=[Math.floor((d[0]+m[0])/2),Math.floor((d[1]+m[1])/2)],C=Math.abs(d[1]-Math.floor((d[1]+m[1])/2)),p=`rgb(${l.segmentColor.slice(0,3)})`;return o.getRenderingEngine()?(Mo(a,u,"0",h,C,{color:p}),i=!0,i):(console.warn("Rendering Engine has been destroyed"),i)}}};s$.toolName="CircleScissor";let c$=class extends b1{constructor(e={},n={supportedInteractionTypes:["Mouse","Touch"],configuration:{strategies:{FILL_INSIDE:xW,ERASE_INSIDE:RW},defaultStrategy:"FILL_INSIDE",activeStrategy:"FILL_INSIDE"}}){super(e,n),this.preMouseDownCallback=r=>{if(this.isDrawing===!0)return;this.doneEditMemo();const a=r.detail,{currentPoints:i,element:o}=a,s=i.world,c=i.canvas,l=Ae(o),{viewport:u}=l;this.isDrawing=!0;const f=u.getCamera(),{viewPlaneNormal:v,viewUp:g}=f,d=hu(u.id);if(!d)throw new Error("No active segmentation detected, create one before using scissors tool");const{segmentationId:m}=d,h=Bo(m),C=q1(m),p=Jc(u.id,m,h);this.isDrawing=!0;const S={metadata:{viewPlaneNormal:[...v],viewUp:[...g],FrameOfReferenceUID:u.getFrameOfReferenceUID(),referencedImageId:"",toolName:this.getToolName(),segmentColor:p},data:{invalidated:!0,handles:{points:[[...s],[...s],[...s],[...s]],activeHandleIndex:null},cachedStats:{},highlighted:!0}},I=[u.id];this.editData={annotation:S,centerCanvas:c,segmentIndex:h,segmentationId:m,segmentsLocked:C,segmentColor:p,toolGroupId:this.toolGroupId,viewportIdsToRender:I,handleIndex:3,movingTextBox:!1,newAnnotation:!0,hasMoved:!1,volumeId:null,referencedVolumeId:null,imageId:null};const{representationData:D}=Un(m),E=D[Ft.Labelmap];if(u instanceof zr){const{volumeId:T}=E,y=Ye.getVolume(T);this.editData={...this.editData,volumeId:T,referencedVolumeId:y.referencedVolumeId}}else this.editData={...this.editData};return this._activateDraw(o),Yt(o),r.preventDefault(),qe(I),!0},this._dragCallback=r=>{this.isDrawing=!0;const a=r.detail,{element:i}=a,{currentPoints:o}=a,s=o.canvas,c=Ae(i),{renderingEngine:l,viewport:u}=c,{canvasToWorld:f}=u,{annotation:v,viewportIdsToRender:g,centerCanvas:d}=this.editData,{data:m}=v,h=Math.abs(s[0]-d[0]),C=Math.abs(s[1]-d[1]),p=Math.sqrt(h*h+C*C),S=[d[0],d[1]+p],I=[d[0],d[1]-p],D=[d[0]-p,d[1]],E=[d[0]+p,d[1]];m.handles.points=[f(S),f(I),f(D),f(E)],v.invalidated=!0,this.editData.hasMoved=!0,qe(g)},this._endCallback=r=>{const a=r.detail,{element:i}=a,{annotation:o,newAnnotation:s,hasMoved:c,segmentIndex:l,segmentsLocked:u}=this.editData,{data:f}=o,{viewPlaneNormal:v,viewUp:g}=o.metadata;if(s&&!c)return;o.highlighted=!1,f.handles.activeHandleIndex=null,this._deactivateDraw(i),Mn(i);const d=Ae(i),m={...this.editData,points:f.handles.points,segmentIndex:l,segmentsLocked:u,viewPlaneNormal:v,viewUp:g,createMemo:this.createMemo.bind(this)};this.editData=null,this.isDrawing=!1,this.applyActiveStrategy(d,m),this.doneEditMemo()},this._activateDraw=r=>{r.addEventListener(B.MOUSE_UP,this._endCallback),r.addEventListener(B.MOUSE_DRAG,this._dragCallback),r.addEventListener(B.MOUSE_CLICK,this._endCallback),r.addEventListener(B.MOUSE_MOVE,this._dragCallback),r.addEventListener(B.TOUCH_END,this._endCallback),r.addEventListener(B.TOUCH_TAP,this._endCallback),r.addEventListener(B.TOUCH_DRAG,this._dragCallback)},this._deactivateDraw=r=>{r.removeEventListener(B.MOUSE_UP,this._endCallback),r.removeEventListener(B.MOUSE_DRAG,this._dragCallback),r.removeEventListener(B.MOUSE_CLICK,this._endCallback),r.removeEventListener(B.MOUSE_MOVE,this._dragCallback),r.removeEventListener(B.TOUCH_END,this._endCallback),r.removeEventListener(B.TOUCH_DRAG,this._dragCallback),r.removeEventListener(B.TOUCH_TAP,this._endCallback)},this.renderAnnotation=(r,a)=>{let i=!1;if(!this.editData)return i;const{viewport:o}=r,{viewportIdsToRender:s}=this.editData;if(!s.includes(o.id))return i;const{annotation:c}=this.editData,l=c.metadata,u=c.annotationUID,f=c.data,{points:v}=f.handles,g=v.map(I=>o.worldToCanvas(I)),d=g[0],m=g[1],h=[Math.floor((d[0]+m[0])/2),Math.floor((d[1]+m[1])/2)],C=Math.abs(d[1]-Math.floor((d[1]+m[1])/2)),p=`rgb(${l.segmentColor.slice(0,3)})`;return o.getRenderingEngine()?(Mo(a,u,"0",h,C,{color:p}),i=!0,i):(console.warn("Rendering Engine has been destroyed"),i)}}};c$.toolName="SphereScissor";const{transformWorldToIndex:Og}=Zn;class l$ extends y4{constructor(e={},n={supportedInteractionTypes:["Mouse","Touch"],configuration:{storePointData:!1,numSlicesToPropagate:10,calculatePointsInsideVolume:!1,getTextLines:XMe,statsCalculator:As,showTextBox:!1}}){super(e,n),this.isHandleOutsideImage=!1,this.addNewAnnotation=r=>{const a=r.detail,{currentPoints:i,element:o}=a,s=i.world,c=Ae(o),{viewport:l,renderingEngine:u}=c;this.isDrawing=!0;const f=l.getCamera(),{viewPlaneNormal:v,viewUp:g}=f;let d,m,h;if(l instanceof Xr)throw new Error("Stack Viewport Not implemented");{const T=this.getTargetId(l);h=nc(T),m=Ye.getVolume(h),d=jc(m,s,v)}const C=vu(m,v),p=this._getStartCoordinate(s,C,v),S=this._getEndCoordinate(s,C,v),I=l.getFrameOfReferenceUID(),D={highlighted:!0,invalidated:!0,metadata:{toolName:this.getToolName(),viewPlaneNormal:[...v],viewUp:[...g],FrameOfReferenceUID:I,referencedImageId:d,volumeId:h,spacingInNormal:C,enabledElement:c},data:{label:"",startCoordinate:p,endCoordinate:S,handles:{textBox:{hasMoved:!1,worldPosition:[0,0,0],worldBoundingBox:{topLeft:[0,0,0],topRight:[0,0,0],bottomLeft:[0,0,0],bottomRight:[0,0,0]}},points:[[...s],[...s]],activeHandleIndex:null},cachedStats:{pointsInVolume:[],projectionPoints:[],statistics:[]},labelmapUID:null}};this._computeProjectionPoints(D,m),qn(D,o);const E=Bt(o,this.getToolName());return this.editData={annotation:D,viewportIdsToRender:E,newAnnotation:!0,hasMoved:!1},this._activateDraw(o),Yt(o),r.preventDefault(),qe(E),D},this._endCallback=r=>{const a=r.detail,{element:i}=a,{annotation:o,viewportIdsToRender:s,newAnnotation:c,hasMoved:l}=this.editData,{data:u}=o;if(c&&!l)return;o.highlighted=!1,u.handles.activeHandleIndex=null,this._deactivateModify(i),this._deactivateDraw(i),Mn(i);const f=Ae(i);this.editData=null,this.isDrawing=!1,this.isHandleOutsideImage&&this.configuration.preventHandleOutsideImage&&sr(o.annotationUID);const v=this.getTargetId(f.viewport),g=Ye.getVolume(v.split(/volumeId:|\?/)[1]);this.configuration.calculatePointsInsideVolume&&this._computePointsInsideVolume(o,g,v,f),qe(s),c&&Ur(o)},this.renderAnnotation=(r,a)=>{let i=!1;const{viewport:o}=r;let s=nr(this.getToolName(),o.element);if(!(s!=null&&s.length))return i;s=qI(s,o.getCamera());const c={toolGroupId:this.toolGroupId,toolName:this.getToolName(),viewportId:r.viewport.id};for(let l=0;l<s.length;l++){const u=s[l],{annotationUID:f,data:v,metadata:g}=u,{startCoordinate:d,endCoordinate:m}=v,{points:h,activeHandleIndex:C}=v.handles;c.annotationUID=f;const p=this.getStyle("lineWidth",c,u),S=this.getStyle("lineDash",c,u),I=this.getStyle("color",c,u),D=h.map(De=>o.worldToCanvas(De)),E=D[0],T=$l(D),{centerPointRadius:y}=this.configuration,M=Yf(D),_=o.getCamera().focalPoint,O=o.getCamera().viewPlaneNormal;let w=d,x=m;Array.isArray(d)&&(w=this._getCoordinateForViewplaneNormal(w,O),v.startCoordinate=w),Array.isArray(m)&&(x=this._getCoordinateForViewplaneNormal(x,O),v.endCoordinate=x);const P=Ul(v.startCoordinate),R=Ul(v.endCoordinate),L=this._getCoordinateForViewplaneNormal(_,O),H=Ul(L);if(H<Math.min(P,R)||H>Math.max(P,R))continue;const F=Ul((v.startCoordinate+v.endCoordinate)/2);let U=!1;if(H===F&&(U=!0),v.handles.points[0][this._getIndexOfCoordinatesForViewplaneNormal(O)]=F,u.invalidated&&this._throttledCalculateCachedStats(u,r),!o.getRenderingEngine())return console.warn("Rendering Engine has been destroyed"),i;let V;if(!Gi(f))continue;!Ya(f)&&!this.editData&&C!==null&&U&&(V=[D[C]]),V&&Hr(a,f,"0",V,{color:I});let X=p,re=S;U?(X=p,re=[]):re=[5,5];const ue="0";if(Mo(a,f,ue,E,T,{color:I,lineDash:re,lineWidth:X}),y>0&&T>3*y&&Mo(a,f,`${ue}-center`,E,y,{color:I,lineDash:S,lineWidth:p}),i=!0,this.configuration.showTextBox==!0&&this.configuration.calculatePointsInsideVolume==!0){const De=this.getLinkedTextBoxStyle(c,u);if(!De.visibility){v.handles.textBox={hasMoved:!1,worldPosition:[0,0,0],worldBoundingBox:{topLeft:[0,0,0],topRight:[0,0,0],bottomLeft:[0,0,0],bottomRight:[0,0,0]}};continue}const pe=this.configuration.getTextLines(v,{metadata:g});if(!pe||pe.length===0)continue;let Te;v.handles.textBox.hasMoved||(Te=gs(M),v.handles.textBox.worldPosition=o.canvasToWorld(Te));const Fe=o.worldToCanvas(v.handles.textBox.worldPosition),Re=ro(a,f,"1",pe,Fe,D,{},De),{x:k,y:A,width:b,height:N}=Re;v.handles.textBox.worldBoundingBox={topLeft:o.canvasToWorld([k,A]),topRight:o.canvasToWorld([k+b,A]),bottomLeft:o.canvasToWorld([k,A+N]),bottomRight:o.canvasToWorld([k+b,A+N])}}}return i},this._throttledCalculateCachedStats=no(this._calculateCachedStatsTool,100,{trailing:!0})}_computeProjectionPoints(e,n){const{data:r,metadata:a}=e,{viewPlaneNormal:i,spacingInNormal:o}=a,{imageData:s}=n,{startCoordinate:c,endCoordinate:l}=r,{points:u}=r.handles,f=Og(s,u[0]),v=Og(s,u[0]),g=_s(u),d=Xe();s.indexToWorldVec3(f,d);const m=Xe();s.indexToWorldVec3(v,m),this._getIndexOfCoordinatesForViewplaneNormal(i)==2?(d[2]=c,m[2]=l,g[0][2]=c,g[1][2]=c):this._getIndexOfCoordinatesForViewplaneNormal(i)==0?(d[0]=c,m[0]=l,g[0][0]=c,g[1][0]=c):this._getIndexOfCoordinatesForViewplaneNormal(i)==1&&(d[1]=c,m[1]=l,g[0][1]=c,g[1][1]=c);const h=Si(d,m),C=[];for(let p=0;p<h;p+=o)C.push(g.map(S=>{const I=Xe();return Hn(I,S,i,p),Array.from(I)}));r.cachedStats.projectionPoints=C}_computePointsInsideVolume(e,n,r,a){var _,O,w;const{data:i,metadata:o}=e,{viewPlaneNormal:s,viewUp:c}=o,{viewport:l}=a,u=i.cachedStats.projectionPoints,f=[[]],v=this.getTargetImageData(r),g=i.handles.points.map(x=>l.worldToCanvas(x)),[d,m]=Yf(g),h=l.canvasToWorld(d),C=l.canvasToWorld(m),{worldWidth:p,worldHeight:S}=iD(s,c,h,C),I=us(v,i.handles),D=F_(v),E=Math.abs(Math.PI*(p/I.scale/2)*(S/D/I.scale/2)),T={isPreScaled:ac(l,r),isSuvScaled:this.isSuvScaled(l,r,e.metadata.referencedImageId)},y=mu(o.Modality,e.metadata.referencedImageId,T);for(let x=0;x<u.length;x++){if(!n)continue;const P=u[x][0],R=u[x].map(Re=>l.worldToCanvas(Re)),[L,H]=Yf(R),F=l.canvasToWorld(L),U=l.canvasToWorld(H),V=F,X=U,{dimensions:re,imageData:ue,voxelManager:De}=n,pe=Og(ue,V),Te=Og(ue,P),Fe=this._getIndexOfCoordinatesForViewplaneNormal(s);pe[0]=Math.floor(pe[0]),pe[1]=Math.floor(pe[1]),pe[2]=Math.floor(pe[2]),pe[Fe]=Te[Fe];const Ne=Og(ue,X);if(Ne[0]=Math.floor(Ne[0]),Ne[1]=Math.floor(Ne[1]),Ne[2]=Math.floor(Ne[2]),Ne[Fe]=Te[Fe],this._isInsideVolume(pe,Ne,re)){const Re=Math.min(pe[0],Ne[0]),k=Math.max(pe[0],Ne[0]),A=Math.min(pe[1],Ne[1]),b=Math.max(pe[1],Ne[1]),N=Math.min(pe[2],Ne[2]),W=Math.max(pe[2],Ne[2]),j=[[Re,k],[A,b],[N,W]],ge={center:P,xRadius:Math.abs(F[0]-U[0])/2,yRadius:Math.abs(F[1]-U[1])/2,zRadius:Math.abs(F[2]-U[2])/2},ye=De.forEach(this.configuration.statsCalculator.statsCallback,{isInObject:we=>$I(ge,we),boundsIJK:j,imageData:ue,returnPoints:this.configuration.storePointData});f.push(ye)}}const M=this.configuration.statsCalculator.getStatistics();i.cachedStats.pointsInVolume=f,i.cachedStats.statistics={Modality:o.Modality,area:E,mean:(_=M.mean)==null?void 0:_.value,stdDev:(O=M.stdDev)==null?void 0:O.value,max:(w=M.max)==null?void 0:w.value,statsArray:M.array,areaUnit:I.areaUnit,modalityUnit:y}}_calculateCachedStatsTool(e,n){const r=e.data,{viewport:a}=n,{cachedStats:i}=r,o=this.getTargetId(a),s=Ye.getVolume(o.split(/volumeId:|\?/)[1]);return this._computeProjectionPoints(e,s),this.configuration.calculatePointsInsideVolume&&this._computePointsInsideVolume(e,s,o,n),e.invalidated=!1,$r(e,a.element),i}_getStartCoordinate(e,n,r){const a=this.configuration.numSlicesToPropagate,i=Math.round(a/2),o=Xe();return Hn(o,e,r,i*-n),this._getCoordinateForViewplaneNormal(o,r)}_getEndCoordinate(e,n,r){const a=this.configuration.numSlicesToPropagate,i=a-Math.round(a/2),o=Xe();return Hn(o,e,r,i*n),this._getCoordinateForViewplaneNormal(o,r)}_getIndexOfCoordinatesForViewplaneNormal(e){const n=[Math.abs(e[0]),Math.abs(e[1]),Math.abs(e[2])];return n.indexOf(Math.max(...n))}_getCoordinateForViewplaneNormal(e,n){const r=this._getIndexOfCoordinatesForViewplaneNormal(n);return e[r]}}function XMe(t,e={}){const n=t.cachedStats.statistics,{area:r,mean:a,max:i,stdDev:o,areaUnit:s,modalityUnit:c}=n;if(a===void 0)return;const l=[];return l.push(`Area: ${kn(r)} ${s}`),l.push(`Mean: ${kn(a)} ${c}`),l.push(`Max: ${kn(i)} ${c}`),l.push(`Std Dev: ${kn(o)} ${c}`),l}l$.toolName="CircleROIStartEndThreshold";const{transformWorldToIndex:oA,isEqual:r3}=Zn;let u$=class extends Xa{constructor(e={},n={supportedInteractionTypes:["Mouse","Touch"]}){super(e,n),this.preMouseDownCallback=r=>{const a=r.detail,{currentPoints:i,element:o}=a,s=i.world,c=Ae(o),{viewport:l}=c,u=l.getCamera(),{viewPlaneNormal:f}=u,v=hu(l.id);if(!v)throw new Error("No active segmentation detected, create one before using scissors tool");const{segmentationId:g}=v,d=Bo(g),m=q1(g),{representationData:h}=Un(g);let C,p,S,I;if(this.doneEditMemo(),l instanceof zr){const{volumeId:R}=h[Ft.Labelmap],L=Ye.getVolume(R);({dimensions:C,direction:p}=L),I=L.voxelManager,S=oA(L.imageData,s)}else{const R=fs(l.id,g);if(!R)throw new Error("No active segmentation imageId detected, create one before using scissors tool");const{imageData:L}=l.getImageData();C=L.getDimensions(),p=L.getDirection(),I=Ye.getImage(R).voxelManager,S=oA(L,s)}const D=this.getFixedDimension(f,p);if(D===void 0){console.warn("Oblique paint fill not yet supported");return}const{floodFillGetter:E,getLabelValue:T,getScalarDataPositionFromPlane:y,inPlaneSeedPoint:M,fixedDimensionValue:_}=this.generateHelpers(I,C,S,D);if(S[0]<0||S[0]>=C[0]||S[1]<0||S[1]>=C[1]||S[2]<0||S[2]>=C[2])return;const O=T(S[0],S[1],S[2]);if(m.includes(O))return;const w=yW(E,M),{flooded:x}=w;x.forEach(R=>{const L=y(R[0],R[1]);I.setAtIndex(L,d)});const P=this.getFramesModified(D,_,w);return ki(g,P),!0},this.getFramesModified=(r,a,i)=>{const{flooded:o}=i;if(r===2)return[a];let s=1/0,c=-1/0;for(let u=0;u<o.length;u++){const f=o[u][1];f<s&&(s=f),f>c&&(c=f)}const l=[];for(let u=s;u<=c;u++)l.push(u);return l},this.generateHelpers=(r,a,i,o=2)=>{let s,c;switch(o){case 0:s=i[0],c=[i[1],i[2]];break;case 1:s=i[1],c=[i[0],i[2]];break;case 2:s=i[2],c=[i[0],i[1]];break;default:throw new Error(`Invalid fixedDimension: ${o}`)}const l=(g,d,m)=>r.toIndex([g,d,m]),u=(g,d,m)=>r.getAtIJK(g,d,m),f=this.generateFloodFillGetter(a,o,s,u);return{getScalarDataPositionFromPlane:this.generateGetScalarDataPositionFromPlane(l,o,s),getLabelValue:u,floodFillGetter:f,inPlaneSeedPoint:c,fixedDimensionValue:s}},this.generateFloodFillGetter=(r,a,i,o)=>{let s;switch(a){case 0:s=(c,l)=>{if(!(c>=r[1]||c<0||l>=r[2]||l<0))return o(i,c,l)};break;case 1:s=(c,l)=>{if(!(c>=r[0]||c<0||l>=r[2]||l<0))return o(c,i,l)};break;case 2:s=(c,l)=>{if(!(c>=r[0]||c<0||l>=r[1]||l<0))return o(c,l,i)};break;default:throw new Error(`Invalid fixedDimension: ${a}`)}return s},this.generateGetScalarDataPositionFromPlane=(r,a,i)=>{let o;switch(a){case 0:o=(s,c)=>r(i,s,c);break;case 1:o=(s,c)=>r(s,i,c);break;case 2:o=(s,c)=>r(s,c,i);break;default:throw new Error(`Invalid fixedDimension: ${a}`)}return o}}getFixedDimension(e,n){const r=n.slice(0,3),a=n.slice(3,6),i=n.slice(6,9),o=[Math.abs(e[0]),Math.abs(e[1]),Math.abs(e[2])],s=[Math.abs(r[0]),Math.abs(r[1]),Math.abs(r[2])];if(r3(o,s))return 0;const c=[Math.abs(a[0]),Math.abs(a[1]),Math.abs(a[2])];if(r3(o,c))return 1;const l=[Math.abs(i[0]),Math.abs(i[1]),Math.abs(i[2])];if(r3(o,l))return 2}};u$.toolName="PaintFill";const YMe={TOP_LEFT:"TOP_LEFT",TOP_RIGHT:"TOP_RIGHT",BOTTOM_LEFT:"BOTTOM_LEFT",BOTTOM_RIGHT:"BOTTOM_RIGHT"};var _4={Corners:YMe};const{vtkErrorMacro:a3}=J,{Corners:r2}=_4;function ZMe(t,e){e.classHierarchy.push("vtkOrientationMarkerWidget");const n={...t},r=[],a=mL.newInstance(),i=new ResizeObserver(v=>{t.updateViewport()});let o=null,s=null,c=null,l=null,u=null;function f(){e._interactor.isAnimating()||t.updateMarkerOrientation()}e._onParentRendererChanged=()=>t.updateViewport(),t.computeViewport=()=>{const v=e.parentRenderer||e._interactor.getCurrentRenderer(),[g,d,m,h]=v.getViewport(),C=e._interactor.getView(),p=C.getSize(),[S,I]=C.getViewportSize(v),D=Math.min(S,I);let E=e.viewportSize*D;E=Math.max(Math.min(e.minPixelSize,D),Math.min(e.maxPixelSize,E));const T=E/p[0],y=E/p[1];switch(e.viewportCorner){case r2.TOP_LEFT:return[g,h-y,g+T,h];case r2.TOP_RIGHT:return[m-T,h-y,m,h];case r2.BOTTOM_LEFT:return[g,d,g+T,d+y];case r2.BOTTOM_RIGHT:return[m-T,d,m,d+y];default:return a3("Invalid widget corner"),null}},t.updateViewport=()=>{e.enabled&&(a.setViewport(...t.computeViewport()),e._interactor.render())},t.updateMarkerOrientation=()=>{const g=(e.parentRenderer||e._interactor.getCurrentRenderer()).getActiveCamera();if(!g)return;const d=g.getReferenceByName("position"),m=g.getReferenceByName("focalPoint"),h=g.getReferenceByName("viewUp");if(r[0]!==d[0]||r[1]!==d[1]||r[2]!==d[2]||r[3]!==m[0]||r[4]!==m[1]||r[5]!==m[2]||r[6]!==h[0]||r[7]!==h[1]||r[8]!==h[2]){r[0]=d[0],r[1]=d[1],r[2]=d[2],r[3]=m[0],r[4]=m[1],r[5]=m[2],r[6]=h[0],r[7]=h[1],r[8]=h[2];const C=a.getActiveCamera();C.setPosition(d[0],d[1],d[2]),C.setFocalPoint(m[0],m[1],m[2]),C.setViewUp(h[0],h[1],h[2]),a.resetCamera()}},t.setEnabled=v=>{var g,d;if(v){if(e.enabled)return;if(!e.actor){a3("Must set actor before enabling orientation marker.");return}if(!e._interactor){a3("Must set interactor before enabling orientation marker.");return}const m=e.parentRenderer||e._interactor.getCurrentRenderer(),h=m.getRenderWindow();h.addRenderer(a),h.getNumberOfLayers()<2&&h.setNumberOfLayers(2),a.setLayer(h.getNumberOfLayers()-1),a.setInteractive(e.interactiveRenderer),a.addViewProp(e.actor),e.actor.setVisibility(!0),o=m.onEvent(C=>{C.type==="ActiveCameraEvent"&&(s&&s.unsubscribe(),s=C.camera.onModified(f))}),s=m.getActiveCamera().onModified(f),c=e._interactor.onAnimation(t.updateMarkerOrientation),l=e._interactor.onEndAnimation(t.updateMarkerOrientation),i.observe(e._interactor.getView().getCanvas()),t.updateViewport(),t.updateMarkerOrientation(),e.enabled=!0}else{if(!e.enabled)return;e.enabled=!1,i.disconnect(),o.unsubscribe(),o=null,s.unsubscribe(),s=null,c.unsubscribe(),c=null,l.unsubscribe(),l=null,e.actor.setVisibility(!1),a.removeViewProp(e.actor);const m=(d=(g=e._interactor)==null?void 0:g.findPokedRenderer())==null?void 0:d.getRenderWindow();m&&m.removeRenderer(a)}t.modified()},t.setViewportCorner=v=>{v!==e.viewportCorner&&(e.viewportCorner=v,t.updateViewport())},t.setViewportSize=v=>{const g=Math.min(1,Math.max(0,v));g!==e.viewportSize&&(e.viewportSize=g,t.updateViewport())},t.setActor=v=>{const g=e.enabled;t.setEnabled(!1),e.actor=v,t.setEnabled(g)},t.getRenderer=()=>a,t.delete=()=>{n.delete(),u&&(u.unsubscribe(),u=null),o&&(o.unsubscribe(),o=null),s&&(s.unsubscribe(),s=null),c&&(c.unsubscribe(),c=null),l&&(l.unsubscribe(),l=null),i.disconnect()},u=t.onModified(t.updateViewport)}const JMe={viewportCorner:_4.Corners.BOTTOM_LEFT,viewportSize:.2,minPixelSize:50,maxPixelSize:200,parentRenderer:null,interactiveRenderer:!1};function f$(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,JMe,n),J.obj(t,e),J.get(t,e,["enabled","viewportCorner","viewportSize","interactiveRenderer"]),J.setGet(t,e,["_interactor","minPixelSize","maxPixelSize","parentRenderer"]),J.get(t,e,["actor"]),J.moveToProtected(t,e,["interactor"]),ZMe(t,e)}const e5e=J.newInstance(f$,"vtkOrientationMarkerWidget");var sA={newInstance:e5e,extend:f$,..._4};function v$(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0,0];const[n,r,a,i]=e,s=t.getContext("2d").getImageData(n,r,a||t.width,i||t.height),c=Lv.newInstance({type:"vtkImageData"});c.setOrigin(0,0,0),c.setSpacing(1,1,1),c.setExtent(0,(a||t.width)-1,0,(i||t.height)-1,0,0);const l=fn.newInstance({numberOfComponents:4,values:new Uint8Array(s.data.buffer)});return l.setName("scalars"),c.getPointData().setScalars(l),c}function t5e(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{flipX:!1,flipY:!1,rotate:0};const n=document.createElement("canvas");n.width=t.width,n.height=t.height;const r=n.getContext("2d"),{flipX:a,flipY:i,rotate:o}=e;return r.translate(n.width/2,n.height/2),r.scale(a?-1:1,i?-1:1),r.rotate(o*Math.PI/180),r.drawImage(t,-t.width/2,-t.height/2),v$(n)}var n5e={canvasToImageData:v$,imageToImageData:t5e};const g$={default:{defaultStyle:{fontStyle:"bold",fontFamily:"Arial",fontColor:"black",fontSizeScale:t=>t/2,faceColor:"white",edgeThickness:.1,edgeColor:"black",resolution:400},xMinusFaceProperty:{text:"X-",faceColor:"yellow"},xPlusFaceProperty:{text:"X+",faceColor:"yellow"},yMinusFaceProperty:{text:"Y-",faceColor:"red"},yPlusFaceProperty:{text:"Y+",faceColor:"red"},zMinusFaceProperty:{text:"Z-",faceColor:"#008000"},zPlusFaceProperty:{text:"Z+",faceColor:"#008000"}},lps:{xMinusFaceProperty:{text:"R",faceRotation:-90},xPlusFaceProperty:{text:"L",faceRotation:90},yMinusFaceProperty:{text:"A",faceRotation:0},yPlusFaceProperty:{text:"P",faceRotation:180},zMinusFaceProperty:{text:"I",faceRotation:180},zPlusFaceProperty:{text:"S",faceRotation:0}}};function d$(t,e){e.set(t)}function r5e(t,e){return d$(g$[t],e)}function a5e(t,e){g$[t]=e}var i5e={applyDefinitions:d$,applyPreset:r5e,registerStylePreset:a5e};const o5e={xPlus:0,xMinus:1,yPlus:2,yMinus:3,zPlus:4,zMinus:5};function s5e(t,e){e.classHierarchy.push("vtkAnnotatedCubeActor"),e.xPlusFaceProperty={...e.xPlusFaceProperty},e.xMinusFaceProperty={...e.xMinusFaceProperty},e.yPlusFaceProperty={...e.yPlusFaceProperty},e.yMinusFaceProperty={...e.yMinusFaceProperty},e.zPlusFaceProperty={...e.zPlusFaceProperty},e.zMinusFaceProperty={...e.zMinusFaceProperty};let n=null;const r=document.createElement("canvas"),a=K0.newInstance(),i=ch.newInstance();i.setInterpolate(!0);function o(c){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;l&&Object.assign(e[`${c}FaceProperty`],l);const u={...e.defaultStyle,...e[`${c}FaceProperty`]};r.width=u.resolution,r.height=u.resolution;const f=r.getContext("2d");f.fillStyle=u.faceColor,f.fillRect(0,0,r.width,r.height),u.edgeThickness>0&&(f.strokeStyle=u.edgeColor,f.lineWidth=u.edgeThickness*r.width,f.strokeRect(0,0,r.width,r.height)),f.save(),f.translate(0,r.height),f.scale(1,-1),f.translate(r.width/2,r.height/2),f.rotate(-Math.PI*(u.faceRotation/180));const v=u.fontSizeScale(u.resolution);f.fillStyle=u.fontColor,f.textAlign="center",f.textBaseline="middle",f.font=`${u.fontStyle} ${v}px "${u.fontFamily}"`,f.fillText(u.text,0,0),f.restore();const g=n5e.canvasToImageData(r);i.setInputData(g,o5e[c]),t.modified()}function s(){n=dU.newInstance({generate3DTextureCoordinates:!0}),a.setInputConnection(n.getOutputPort()),o("xPlus"),o("xMinus"),o("yPlus"),o("yMinus"),o("zPlus"),o("zMinus")}t.setDefaultStyle=c=>{e.defaultStyle={...e.defaultStyle,...c},s()},t.setXPlusFaceProperty=c=>o("xPlus",c),t.setXMinusFaceProperty=c=>o("xMinus",c),t.setYPlusFaceProperty=c=>o("yPlus",c),t.setYMinusFaceProperty=c=>o("yMinus",c),t.setZPlusFaceProperty=c=>o("zPlus",c),t.setZMinusFaceProperty=c=>o("zMinus",c),s(),a.setInputConnection(n.getOutputPort()),t.setMapper(a),t.addTexture(i)}const c5e={defaultStyle:{text:"",faceColor:"white",faceRotation:0,fontFamily:"Arial",fontColor:"black",fontStyle:"normal",fontSizeScale:t=>t/1.8,edgeThickness:.1,edgeColor:"black",resolution:200}};function m$(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,c5e,n),Z0.extend(t,e,n),J.get(t,e,["defaultStyle","xPlusFaceProperty","xMinusFaceProperty","yPlusFaceProperty","yMinusFaceProperty","zPlusFaceProperty","zMinusFaceProperty"]),s5e(t,e)}const l5e=J.newInstance(m$,"vtkAnnotatedCubeActor");var cA={newInstance:l5e,extend:m$,Presets:i5e};const{vtkErrorMacro:u5e}=J;function f5e(t,e){let n=0;return t.map((r,a)=>a===n?(n+=r+1,r):r+e)}function a2(t,e,n,r){t.set(f5e(e,n),r)}function v5e(t,e){e.classHierarchy.push("vtkAppendPolyData"),t.requestData=(n,r)=>{const a=t.getNumberOfInputPorts();if(!a){u5e("No input specified.");return}if(a===1){r[0]=n[0];return}const i=ci.newInstance();let o=0,s=0,c=1,l=1,u=0,f=0,v=0,g=0,d=!0,m=!0,h=!0;for(let O=0;O<a;O++){const w=n[O];if(!w)continue;const x=w.getPoints().getNumberOfPoints();o+=x,u+=w.getVerts().getNumberOfValues(),f+=w.getLines().getNumberOfValues(),v+=w.getStrips().getNumberOfValues(),g+=w.getPolys().getNumberOfValues(),x&&(l&&(l=0,s=w.getPoints().getDataType()),c=w.getPoints().getDataType(),s=s>c?s:c);const P=w.getPointData();P?(d=d&&P.getNormals()!==null,m=m&&P.getTCoords()!==null,h=h&&P.getScalars()!==null):(d=!1,m=!1,h=!1)}e.outputPointsPrecision===_S.SINGLE?s=Vn.FLOAT:e.outputPointsPrecision===_S.DOUBLE&&(s=Vn.DOUBLE);const C=em.newInstance({dataType:s});C.setNumberOfPoints(o);const p=C.getData(),S=new Uint32Array(u),I=new Uint32Array(f),D=new Uint32Array(v),E=new Uint32Array(g);let T=null,y=null,M=null;const _=n[a-1];if(d){const O=_.getPointData().getNormals();T=fn.newInstance({numberOfComponents:3,numberOfTuples:o,size:3*o,dataType:O.getDataType(),name:O.getName()})}if(m){const O=_.getPointData().getTCoords();y=fn.newInstance({numberOfComponents:2,numberOfTuples:o,size:2*o,dataType:O.getDataType(),name:O.getName()})}if(h){const O=_.getPointData().getScalars();M=fn.newInstance({numberOfComponents:O.getNumberOfComponents(),numberOfTuples:o,size:o*O.getNumberOfComponents(),dataType:O.getDataType(),name:O.getName()})}o=0,u=0,f=0,v=0,g=0;for(let O=0;O<a;O++){const w=n[O];p.set(w.getPoints().getData(),o*3),a2(S,w.getVerts().getData(),o,u),u+=w.getVerts().getNumberOfValues(),a2(I,w.getLines().getData(),o,f),f+=w.getLines().getNumberOfValues(),a2(D,w.getStrips().getData(),o,v),v+=w.getStrips().getNumberOfValues(),a2(E,w.getPolys().getData(),o,g),g+=w.getPolys().getNumberOfValues();const x=w.getPointData();if(d){const P=x.getNormals();T.getData().set(P.getData(),o*3)}if(m){const P=x.getTCoords();y.getData().set(P.getData(),o*2)}if(h){const P=x.getScalars();M.getData().set(P.getData(),o*M.getNumberOfComponents())}o+=w.getPoints().getNumberOfPoints()}i.setPoints(C),i.getVerts().setData(S),i.getLines().setData(I),i.getStrips().setData(D),i.getPolys().setData(E),T&&i.getPointData().setNormals(T),y&&i.getPointData().setTCoords(y),M&&i.getPointData().setScalars(M),r[0]=i}}const g5e={outputPointsPrecision:_S.DEFAULT};function h$(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,g5e,n),J.setGet(t,e,["outputPointsPrecision"]),J.obj(t,e),J.algo(t,e,1,1),v5e(t,e)}const d5e=J.newInstance(h$,"vtkAppendPolyData");var p$={newInstance:d5e,extend:h$};function m5e(t,e){e.classHierarchy.push("vtkConeSource");function n(r,a){if(e.deleted)return;let i=a[0];const o=2*Math.PI/e.resolution,s=-e.height/2,c=e.resolution+1,l=4*e.resolution+1+e.resolution;let u=0;const f=J.newTypedArray(e.pointType,c*3);let v=0;const g=new Uint32Array(l);f[0]=e.height/2,f[1]=0,f[2]=0,e.capping&&(g[v++]=e.resolution);for(let d=0;d<e.resolution;d++)u++,f[u*3+0]=s,f[u*3+1]=e.radius*Math.cos(d*o),f[u*3+2]=e.radius*Math.sin(d*o),e.capping&&(g[e.resolution-v+++1]=u);for(let d=0;d<e.resolution;d++)g[v++]=3,g[v++]=0,g[v++]=d+1,g[v++]=d+2>e.resolution?1:d+2;_i.buildFromRadian().translate(...e.center).rotateFromDirections([1,0,0],e.direction).apply(f),i=ci.newInstance(),i.getPoints().setData(f,3),i.getPolys().setData(g,1),a[0]=i}t.requestData=n}const h5e={height:1,radius:.5,resolution:6,center:[0,0,0],direction:[1,0,0],capping:!0,pointType:"Float64Array"};function S$(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,h5e,n),J.obj(t,e),J.setGet(t,e,["height","radius","resolution","capping"]),J.setGetArray(t,e,["center","direction"],3),J.algo(t,e,0,1),m5e(t,e)}const p5e=J.newInstance(S$,"vtkConeSource");var S5e={newInstance:p5e,extend:S$};function C5e(t,e){e.classHierarchy.push("vtkCylinderSource");function n(r,a){if(e.deleted)return;let i=a[0];const o=2*Math.PI/e.resolution;let s=2*e.resolution,c=5*e.resolution;e.capping&&(s=4*e.resolution,c=7*e.resolution+2);const l=J.newTypedArray(e.pointType,s*3);let u=0;const f=new Uint32Array(c),v=new Float32Array(s*3),g=fn.newInstance({numberOfComponents:3,values:v,name:"Normals"}),d=new Float32Array(s*2),m=fn.newInstance({numberOfComponents:2,values:d,name:"TCoords"}),h=[0,0,0],C=[0,0,0],p=[0,0,0],S=[0,0,0],I=[0,0],D=[0,0],E=e.otherRadius==null?e.radius:e.otherRadius;for(let T=0;T<e.resolution;T++){h[0]=Math.cos(T*o+e.initAngle),C[0]=h[0],p[0]=e.radius*h[0]+e.center[0],S[0]=p[0],I[0]=Math.abs(2*T/e.resolution-1),D[0]=I[0],p[1]=.5*e.height+e.center[1],S[1]=-.5*e.height+e.center[1],I[1]=0,D[1]=1,h[2]=-Math.sin(T*o+e.initAngle),C[2]=h[2],p[2]=E*h[2]+e.center[2],S[2]=p[2];const y=2*T;for(let M=0;M<3;M++)v[y*3+M]=h[M],v[(y+1)*3+M]=C[M],l[y*3+M]=p[M],l[(y+1)*3+M]=S[M],M<2&&(d[y*2+M]=I[M],d[(y+1)*2+M]=D[M])}for(let T=0;T<e.resolution;T++){f[u++]=4,f[u++]=2*T,f[u++]=2*T+1;const y=(2*T+3)%(2*e.resolution);f[u++]=y,f[u++]=y-1}if(e.capping){for(let T=0;T<e.resolution;T++){p[0]=e.radius*Math.cos(T*o+e.initAngle),S[0]=p[0],I[0]=p[0],D[0]=p[0],p[0]+=e.center[0],S[0]+=e.center[0],h[1]=1,C[1]=-1,p[1]=.5*e.height+e.center[1],S[1]=-.5*e.height+e.center[1],p[2]=-E*Math.sin(T*o+e.initAngle),S[2]=p[2],I[1]=p[2],D[1]=p[2],p[2]+=e.center[2],S[2]+=e.center[2];const y=2*e.resolution+T,M=3*e.resolution+e.resolution-T-1;for(let _=0;_<3;_++)v[3*y+_]=h[_],v[3*M+_]=C[_],l[3*y+_]=p[_],l[3*M+_]=S[_],_<2&&(d[2*y+_]=I[_],d[2*M+_]=D[_])}f[u++]=e.resolution;for(let T=0;T<e.resolution;T++)f[u++]=2*e.resolution+T;f[u++]=e.resolution;for(let T=0;T<e.resolution;T++)f[u++]=3*e.resolution+T}_i.buildFromRadian().translate(...e.center).rotateFromDirections([0,1,0],e.direction).translate(...e.center.map(T=>T*-1)).apply(l),i=ci.newInstance(),i.getPoints().setData(l,3),i.getPolys().setData(f,1),i.getPointData().setNormals(g),i.getPointData().setTCoords(m),a[0]=i}t.requestData=n}const I5e={height:1,initAngle:0,radius:1,resolution:6,center:[0,0,0],direction:[0,1,0],capping:!0,pointType:"Float64Array"};function C$(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,I5e,n),J.obj(t,e),J.setGet(t,e,["height","initAngle","otherRadius","radius","resolution","capping"]),J.setGetArray(t,e,["center","direction"],3),J.algo(t,e,0,1),C5e(t,e)}const D5e=J.newInstance(C$,"vtkCylinderSource");var E5e={newInstance:D5e,extend:C$};function T5e(t,e){e.classHierarchy.push("vtkArrowSource");function n(r,a){if(e.deleted)return;const i=E5e.newInstance({capping:!0});i.setResolution(e.shaftResolution),i.setRadius(e.shaftRadius),i.setHeight(1-e.tipLength),i.setCenter(0,(1-e.tipLength)*.5,0);const o=i.getOutputData(),s=o.getPoints().getData(),c=o.getPointData().getNormals().getData();_i.buildFromDegree().rotateZ(-90).apply(s).apply(c);const l=S5e.newInstance();l.setResolution(e.tipResolution),l.setHeight(e.tipLength),l.setRadius(e.tipRadius);const u=l.getOutputData(),f=u.getPoints().getData();_i.buildFromRadian().translate(1-e.tipLength*.5,0,0).apply(f);const v=p$.newInstance();v.setInputData(o),v.addInputData(u);const g=v.getOutputData(),d=g.getPoints().getData();_i.buildFromRadian().translate(-.5+e.tipLength*.5,0,0).apply(d),e.invert?(_i.buildFromRadian().rotateFromDirections([1,0,0],e.direction).scale(-1,-1,-1).apply(d),a[0]=g):(_i.buildFromRadian().rotateFromDirections([1,0,0],e.direction).scale(1,1,1).apply(d),a[0]=v.getOutputData())}t.requestData=n}const y5e={tipResolution:6,tipRadius:.1,tipLength:.35,shaftResolution:6,shaftRadius:.03,invert:!1,direction:[1,0,0],pointType:"Float64Array"};function I$(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,y5e,n),J.obj(t,e),J.setGet(t,e,["tipResolution","tipRadius","tipLength","shaftResolution","shaftRadius","invert"]),J.setGetArray(t,e,["direction"],3),J.algo(t,e,0,1),T5e(t,e)}const M5e=J.newInstance(I$,"vtkArrowSource");var i3={newInstance:M5e,extend:I$};function o3(t){const e=t.getPoints().getBounds(),n=[-(e[0]+e[1])*.5,-(e[2]+e[3])*.5,-(e[4]+e[5])*.5];_i.buildFromDegree().translate(...n).apply(t.getPoints().getData())}function s3(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const r=t.getPoints().getBounds(),a=[0,0,0];n?a[e]=-r[e*2+1]:a[e]=-r[e*2],_i.buildFromDegree().translate(...a).apply(t.getPoints().getData())}function c3(t,e,n,r){const a=t.getPoints().getData().length,i=new Uint8ClampedArray(a);let o=0;for(;o<a;)i[o++]=e,i[o++]=n,i[o++]=r;t.getPointData().setScalars(fn.newInstance({name:"color",numberOfComponents:3,values:i}))}function _5e(t,e){e.classHierarchy.push("vtkAxesActor");const n=K0.newInstance();t.setMapper(n),t.update=()=>{let a={...e.config,...e.xConfig};const i=i3.newInstance({direction:[1,0,0],...a}).getOutputData();e.config.recenter?o3(i):s3(i,0,a.invert),c3(i,...a.color),a={...e.config,...e.yConfig};const o=i3.newInstance({direction:[0,1,0],...a}).getOutputData();e.config.recenter?o3(o):s3(o,1,a.invert),c3(o,...a.color),a={...e.config,...e.zConfig};const s=i3.newInstance({direction:[0,0,1],...a}).getOutputData();e.config.recenter?o3(s):s3(s,2,a.invert),c3(s,...a.color);const c=p$.newInstance();c.setInputData(i),c.addInputData(o),c.addInputData(s),n.setInputConnection(c.getOutputPort())},t.update();const r=J.debounce(t.update,0);t.setXAxisColor=a=>t.setXConfig({...t.getXConfig(),color:a}),t.setYAxisColor=a=>t.setYConfig({...t.getYConfig(),color:a}),t.setZAxisColor=a=>t.setZConfig({...t.getZConfig(),color:a}),t.getXAxisColor=()=>e.getXConfig().color,t.getYAxisColor=()=>e.getYConfig().color,t.getZAxisColor=()=>e.getZConfig().color,e._onConfigChanged=r,e._onXConfigChanged=r,e._onYConfigChanged=r,e._onZConfigChanged=r}function O5e(t){return{config:{recenter:!0,tipResolution:60,tipRadius:.1,tipLength:.2,shaftResolution:60,shaftRadius:.03,invert:!1,...t==null?void 0:t.config},xConfig:{color:[255,0,0],invert:!1,...t==null?void 0:t.xConfig},yConfig:{color:[255,255,0],invert:!1,...t==null?void 0:t.yConfig},zConfig:{color:[0,128,0],invert:!1,...t==null?void 0:t.zConfig}}}function D$(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Z0.extend(t,e,O5e(n)),J.setGet(t,e,["config","xConfig","yConfig","zConfig"]),_5e(t,e)}const w5e=J.newInstance(D$,"vtkAxesActor");var P5e={newInstance:w5e,extend:D$},rS={exports:{}},A5e=rS.exports,lA;function x5e(){return lA||(lA=1,function(t,e){(function(n,r){t.exports=r()})(A5e,function(){return function(n){var r={};function a(i){if(r[i])return r[i].exports;var o=r[i]={i,l:!1,exports:{}};return n[i].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=n,a.c=r,a.d=function(i,o,s){a.o(i,o)||Object.defineProperty(i,o,{enumerable:!0,get:s})},a.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},a.t=function(i,o){if(1&o&&(i=a(i)),8&o||4&o&&typeof i=="object"&&i&&i.__esModule)return i;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:i}),2&o&&typeof i!="string")for(var c in i)a.d(s,c,(function(l){return i[l]}).bind(null,c));return s},a.n=function(i){var o=i&&i.__esModule?function(){return i.default}:function(){return i};return a.d(o,"a",o),o},a.o=function(i,o){return Object.prototype.hasOwnProperty.call(i,o)},a.p="",a(a.s=184)}([function(n,r,a){function i(o){for(var s in o)r.hasOwnProperty(s)||(r[s]=o[s])}Object.defineProperty(r,"__esModule",{value:!0}),i(a(240)),i(a(251)),i(a(175)),i(a(107)),i(a(29)),i(a(73)),i(a(106)),i(a(30)),i(a(252)),i(a(52)),i(a(97)),i(a(253)),i(a(37)),i(a(51)),i(a(173)),i(a(176)),i(a(172)),i(a(108)),i(a(254)),i(a(255)),i(a(256)),i(a(72)),i(a(177)),i(a(105)),i(a(17)),i(a(257)),i(a(12)),i(a(174))},function(n,r,a){var i=this&&this.__values||function(S){var I=typeof Symbol=="function"&&Symbol.iterator,D=I&&S[I],E=0;if(D)return D.call(S);if(S&&typeof S.length=="number")return{next:function(){return S&&E>=S.length&&(S=void 0),{value:S&&S[E++],done:!S}}};throw new TypeError(I?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var o=a(212);r.FixedSizeSet=o.FixedSizeSet;var s=a(213);r.ObjectCache=s.ObjectCache;var c=a(214);r.CompareCache=c.CompareCache;var l=a(215);r.Lazy=l.Lazy;var u=a(216);function f(S,I,D){if(C(S))S.forEach(function(T,y){return I.call(D,y,T)});else for(var E in S)S.hasOwnProperty(E)&&I.call(D,E,S[E])}function v(S){var I,D;if(g(S))return S;if(m(S)){var E=[];try{for(var T=i(S),y=T.next();!y.done;y=T.next()){var M=y.value;E.push(v(M))}}catch(w){I={error:w}}finally{try{y&&!y.done&&(D=T.return)&&D.call(T)}finally{if(I)throw I.error}}return E}if(d(S)){E={};for(var _ in S)if(S.hasOwnProperty(_)){var O=S[_];E[_]=v(O)}return E}return S}function g(S){return!!S&&Object.prototype.toString.call(S)==="[object Function]"}function d(S){var I=typeof S;return!!S&&(I==="function"||I==="object")}function m(S){return Array.isArray(S)}function h(S){return S instanceof Set}function C(S){return S instanceof Map}function p(S){if(d(S)){var I=Object.getPrototypeOf(S),D=I.constructor;return I&&D&&typeof D=="function"&&D instanceof D&&Function.prototype.toString.call(D)===Function.prototype.toString.call(Object)}return!1}r.StringWalker=u.StringWalker,r.applyMixin=function(S,I){for(var D=[],E=2;E<arguments.length;E++)D[E-2]=arguments[E];Object.getOwnPropertyNames(I.prototype).forEach(function(T){if(T!=="constructor"){if(D.indexOf(T)!==-1){var y=Object.getOwnPropertyDescriptor(S.prototype,T);y&&Object.defineProperty(S.prototype,"_"+T,y)}var M=Object.getOwnPropertyDescriptor(I.prototype,T);M&&Object.defineProperty(S.prototype,T,M)}})},r.applyDefaults=function S(I,D,E){E===void 0&&(E=!1);var T=v(I||{});return f(D,function(y,M){p(M)?T[y]=S(T[y],M,E):(E||T[y]===void 0)&&(T[y]=M)}),T},r.forEachArray=function(S,I,D){S.forEach(I,D)},r.forEachObject=f,r.arrayLength=function(S){return h(S)?S.size:S.length},r.objectLength=function(S){return C(S)?S.size:Object.keys(S).length},r.getObjectValue=function(S,I){return C(S)?S.get(I):S[I]},r.removeObjectValue=function(S,I){C(S)?S.delete(I):delete S[I]},r.clone=v,r.isBoolean=function(S){return typeof S=="boolean"},r.isNumber=function(S){return typeof S=="number"},r.isString=function(S){return typeof S=="string"},r.isFunction=g,r.isObject=d,r.isArray=m,r.isSet=h,r.isMap=C,r.isEmpty=function(S){if(m(S))return!S.length;if(h(S)||C(S))return!S.size;if(d(S)){for(var I in S)if(S.hasOwnProperty(I))return!1;return!0}return!1},r.isPlainObject=p,r.isIterable=function(S){return S&&typeof S[Symbol.iterator]=="function"},r.getValue=function(S){return g(S.valueOf)?S.valueOf():S},r.utf8Encode=function(S){for(var I=new Uint8Array(4*S.length),D=0,E=0;E<S.length;E++){var T=S.charCodeAt(E);if(T<128)I[D++]=T;else{if(T<2048)I[D++]=T>>6|192;else{if(T>55295&&T<56320){if(++E>=S.length)throw new Error("Incomplete surrogate pair.");var y=S.charCodeAt(E);if(y<56320||y>57343)throw new Error("Invalid surrogate character.");T=65536+((1023&T)<<10)+(1023&y),I[D++]=T>>18|240,I[D++]=T>>12&63|128}else I[D++]=T>>12|224;I[D++]=T>>6&63|128}I[D++]=63&T|128}}return I.subarray(0,D)},r.utf8Decode=function(S){for(var I="",D=0;D<S.length;){var E=S[D++];if(E>127)if(E>191&&E<224){if(D>=S.length)throw new Error("Incomplete 2-byte sequence.");E=(31&E)<<6|63&S[D++]}else if(E>223&&E<240){if(D+1>=S.length)throw new Error("Incomplete 3-byte sequence.");E=(15&E)<<12|(63&S[D++])<<6|63&S[D++]}else{if(!(E>239&&E<248))throw new Error("Unknown multi-byte start.");if(D+2>=S.length)throw new Error("Incomplete 4-byte sequence.");E=(7&E)<<18|(63&S[D++])<<12|(63&S[D++])<<6|63&S[D++]}if(E<=65535)I+=String.fromCharCode(E);else{if(!(E<=1114111))throw new Error("Code point exceeds UTF-16 limit.");E-=65536,I+=String.fromCharCode(E>>10|55296),I+=String.fromCharCode(1023&E|56320)}}return I}},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),function(i){i[i.Before=0]="Before",i[i.Equal=1]="Equal",i[i.After=2]="After"}(r.BoundaryPosition||(r.BoundaryPosition={})),function(i){i[i.None=0]="None",i[i.Capturing=1]="Capturing",i[i.AtTarget=2]="AtTarget",i[i.Bubbling=3]="Bubbling"}(r.EventPhase||(r.EventPhase={})),function(i){i[i.Element=1]="Element",i[i.Attribute=2]="Attribute",i[i.Text=3]="Text",i[i.CData=4]="CData",i[i.EntityReference=5]="EntityReference",i[i.Entity=6]="Entity",i[i.ProcessingInstruction=7]="ProcessingInstruction",i[i.Comment=8]="Comment",i[i.Document=9]="Document",i[i.DocumentType=10]="DocumentType",i[i.DocumentFragment=11]="DocumentFragment",i[i.Notation=12]="Notation"}(r.NodeType||(r.NodeType={})),function(i){i[i.Disconnected=1]="Disconnected",i[i.Preceding=2]="Preceding",i[i.Following=4]="Following",i[i.Contains=8]="Contains",i[i.ContainedBy=16]="ContainedBy",i[i.ImplementationSpecific=32]="ImplementationSpecific"}(r.Position||(r.Position={})),function(i){i[i.Accept=1]="Accept",i[i.Reject=2]="Reject",i[i.Skip=3]="Skip"}(r.FilterResult||(r.FilterResult={})),function(i){i[i.All=4294967295]="All",i[i.Element=1]="Element",i[i.Attribute=2]="Attribute",i[i.Text=4]="Text",i[i.CDataSection=8]="CDataSection",i[i.EntityReference=16]="EntityReference",i[i.Entity=32]="Entity",i[i.ProcessingInstruction=64]="ProcessingInstruction",i[i.Comment=128]="Comment",i[i.Document=256]="Document",i[i.DocumentType=512]="DocumentType",i[i.DocumentFragment=1024]="DocumentFragment",i[i.Notation=2048]="Notation"}(r.WhatToShow||(r.WhatToShow={})),function(i){i[i.StartToStart=0]="StartToStart",i[i.StartToEnd=1]="StartToEnd",i[i.EndToEnd=2]="EndToEnd",i[i.EndToStart=3]="EndToStart"}(r.HowToCompare||(r.HowToCompare={}))},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(241);r.Cast=i.Cast;var o=a(150);r.Guard=o.Guard;var s=a(242);r.EmptySet=s.EmptySet},function(n,r,a){var i=a(11),o=a(55).f,s=a(21),c=a(25),l=a(80),u=a(119),f=a(123);n.exports=function(v,g){var d,m,h,C,p,S=v.target,I=v.global,D=v.stat;if(d=I?i:D?i[S]||l(S,{}):(i[S]||{}).prototype)for(m in g){if(C=g[m],h=v.noTargetGet?(p=o(d,m))&&p.value:d[m],!f(I?m:S+(D?".":"#")+m,v.forced)&&h!==void 0){if(typeof C==typeof h)continue;u(C,h)}(v.sham||h&&h.sham)&&s(C,"sham",!0),c(d,m,C,v)}}},function(n,r,a){var i=a(11),o=a(81),s=a(14),c=a(58),l=a(86),u=a(124),f=o("wks"),v=i.Symbol,g=u?v:v&&v.withoutSetter||c;n.exports=function(d){return s(f,d)||(l&&s(v,d)?f[d]=v[d]:f[d]=g("Symbol."+d)),f[d]}},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(1),o=a(29),s=function(){function c(){this._features={mutationObservers:!0,customElements:!0,slots:!0,steps:!0},this._window=null,this._compareCache=new i.CompareCache,this._rangeList=new i.FixedSizeSet}return c.prototype.setFeatures=function(l){if(l===void 0&&(l=!0),i.isObject(l))for(var u in l)this._features[u]=l[u]||!1;else for(var u in this._features)this._features[u]=l},Object.defineProperty(c.prototype,"features",{get:function(){return this._features},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"window",{get:function(){return this._window===null&&(this._window=o.create_window()),this._window},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"compareCache",{get:function(){return this._compareCache},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"rangeList",{get:function(){return this._rangeList},enumerable:!0,configurable:!0}),Object.defineProperty(c,"instance",{get:function(){return c._instance||(c._instance=new c),c._instance},enumerable:!0,configurable:!0}),c}();r.dom=s.instance},function(n,r,a){var i=this&&this.__importStar||function(p){if(p&&p.__esModule)return p;var S={};if(p!=null)for(var I in p)Object.hasOwnProperty.call(p,I)&&(S[I]=p[I]);return S.default=p,S};Object.defineProperty(r,"__esModule",{value:!0});var o=i(a(228));r.base64=o;var s=i(a(146));r.byte=s;var c=i(a(147));r.byteSequence=c;var l=i(a(96));r.codePoint=l;var u=i(a(232));r.json=u;var f=i(a(233));r.list=f;var v=i(a(234));r.map=v;var g=i(a(235));r.namespace=g;var d=i(a(236));r.queue=d;var m=i(a(237));r.set=m;var h=i(a(238));r.stack=h;var C=i(a(239));r.string=C},function(n,r){n.exports=function(a){try{return!!a()}catch{return!0}}},function(n,r,a){var i,o=this&&this.__extends||(i=function(F,U){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(V,X){V.__proto__=X}||function(V,X){for(var re in X)X.hasOwnProperty(re)&&(V[re]=X[re])})(F,U)},function(F,U){function V(){this.constructor=F}i(F,U),F.prototype=U===null?Object.create(U):(V.prototype=U.prototype,new V)});Object.defineProperty(r,"__esModule",{value:!0});var s=function(F){function U(V,X){X===void 0&&(X="");var re=F.call(this,X)||this;return re.name=V,re}return o(U,F),U}(Error);r.DOMException=s;var c=function(F){function U(V){return V===void 0&&(V=""),F.call(this,"DOMStringSizeError",V)||this}return o(U,F),U}(s);r.DOMStringSizeError=c;var l=function(F){function U(V){return V===void 0&&(V=""),F.call(this,"WrongDocumentError","The object is in the wrong document. "+V)||this}return o(U,F),U}(s);r.WrongDocumentError=l;var u=function(F){function U(V){return V===void 0&&(V=""),F.call(this,"NoDataAllowedError",V)||this}return o(U,F),U}(s);r.NoDataAllowedError=u;var f=function(F){function U(V){return V===void 0&&(V=""),F.call(this,"NoModificationAllowedError","The object can not be modified. "+V)||this}return o(U,F),U}(s);r.NoModificationAllowedError=f;var v=function(F){function U(V){return V===void 0&&(V=""),F.call(this,"NotSupportedError","The operation is not supported. "+V)||this}return o(U,F),U}(s);r.NotSupportedError=v;var g=function(F){function U(V){return V===void 0&&(V=""),F.call(this,"InUseAttributeError",V)||this}return o(U,F),U}(s);r.InUseAttributeError=g;var d=function(F){function U(V){return V===void 0&&(V=""),F.call(this,"InvalidStateError","The object is in an invalid state. "+V)||this}return o(U,F),U}(s);r.InvalidStateError=d;var m=function(F){function U(V){return V===void 0&&(V=""),F.call(this,"InvalidModificationError","The object can not be modified in this way. "+V)||this}return o(U,F),U}(s);r.InvalidModificationError=m;var h=function(F){function U(V){return V===void 0&&(V=""),F.call(this,"NamespaceError","The operation is not allowed by Namespaces in XML. [XMLNS] "+V)||this}return o(U,F),U}(s);r.NamespaceError=h;var C=function(F){function U(V){return V===void 0&&(V=""),F.call(this,"InvalidAccessError","The object does not support the operation or argument. "+V)||this}return o(U,F),U}(s);r.InvalidAccessError=C;var p=function(F){function U(V){return V===void 0&&(V=""),F.call(this,"ValidationError",V)||this}return o(U,F),U}(s);r.ValidationError=p;var S=function(F){function U(V){return V===void 0&&(V=""),F.call(this,"TypeMismatchError",V)||this}return o(U,F),U}(s);r.TypeMismatchError=S;var I=function(F){function U(V){return V===void 0&&(V=""),F.call(this,"SecurityError","The operation is insecure. "+V)||this}return o(U,F),U}(s);r.SecurityError=I;var D=function(F){function U(V){return V===void 0&&(V=""),F.call(this,"NetworkError","A network error occurred. "+V)||this}return o(U,F),U}(s);r.NetworkError=D;var E=function(F){function U(V){return V===void 0&&(V=""),F.call(this,"AbortError","The operation was aborted. "+V)||this}return o(U,F),U}(s);r.AbortError=E;var T=function(F){function U(V){return V===void 0&&(V=""),F.call(this,"URLMismatchError","The given URL does not match another URL. "+V)||this}return o(U,F),U}(s);r.URLMismatchError=T;var y=function(F){function U(V){return V===void 0&&(V=""),F.call(this,"QuotaExceededError","The quota has been exceeded. "+V)||this}return o(U,F),U}(s);r.QuotaExceededError=y;var M=function(F){function U(V){return V===void 0&&(V=""),F.call(this,"TimeoutError","The operation timed out. "+V)||this}return o(U,F),U}(s);r.TimeoutError=M;var _=function(F){function U(V){return V===void 0&&(V=""),F.call(this,"InvalidNodeTypeError","The supplied node is incorrect or has an incorrect ancestor for this operation. "+V)||this}return o(U,F),U}(s);r.InvalidNodeTypeError=_;var O=function(F){function U(V){return V===void 0&&(V=""),F.call(this,"DataCloneError","The object can not be cloned. "+V)||this}return o(U,F),U}(s);r.DataCloneError=O;var w=function(F){function U(V){return V===void 0&&(V=""),F.call(this,"NotImplementedError","The DOM method is not implemented by this module. "+V)||this}return o(U,F),U}(s);r.NotImplementedError=w;var x=function(F){function U(V){return V===void 0&&(V=""),F.call(this,"HierarchyRequestError","The operation would yield an incorrect node tree. "+V)||this}return o(U,F),U}(s);r.HierarchyRequestError=x;var P=function(F){function U(V){return V===void 0&&(V=""),F.call(this,"NotFoundError","The object can not be found here. "+V)||this}return o(U,F),U}(s);r.NotFoundError=P;var R=function(F){function U(V){return V===void 0&&(V=""),F.call(this,"IndexSizeError","The index is not in the allowed range. "+V)||this}return o(U,F),U}(s);r.IndexSizeError=R;var L=function(F){function U(V){return V===void 0&&(V=""),F.call(this,"SyntaxError","The string did not match the expected pattern. "+V)||this}return o(U,F),U}(s);r.SyntaxError=L;var H=function(F){function U(V){return V===void 0&&(V=""),F.call(this,"InvalidCharacterError","The string contains invalid characters. "+V)||this}return o(U,F),U}(s);r.InvalidCharacterError=H},function(n,r,a){var i=a(53),o=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],s=["scalar","sequence","mapping"];n.exports=function(c,l){var u,f;if(l=l||{},Object.keys(l).forEach(function(v){if(o.indexOf(v)===-1)throw new i('Unknown option "'+v+'" is met in definition of "'+c+'" YAML type.')}),this.tag=c,this.kind=l.kind||null,this.resolve=l.resolve||function(){return!0},this.construct=l.construct||function(v){return v},this.instanceOf=l.instanceOf||null,this.predicate=l.predicate||null,this.represent=l.represent||null,this.defaultStyle=l.defaultStyle||null,this.styleAliases=(u=l.styleAliases||null,f={},u!==null&&Object.keys(u).forEach(function(v){u[v].forEach(function(g){f[String(g)]=v})}),f),s.indexOf(this.kind)===-1)throw new i('Unknown kind "'+this.kind+'" is specified for "'+c+'" YAML type.')}},function(n,r,a){(function(i){var o=function(s){return s&&s.Math==Math&&s};n.exports=o(typeof globalThis=="object"&&globalThis)||o(typeof window=="object"&&window)||o(typeof self=="object"&&self)||o(typeof i=="object"&&i)||Function("return this")()}).call(this,a(78))},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.idl_defineConst=function(i,o,s){Object.defineProperty(i,o,{writable:!1,enumerable:!0,configurable:!1,value:s})}},function(n,r){n.exports=function(a){return typeof a=="object"?a!==null:typeof a=="function"}},function(n,r){var a={}.hasOwnProperty;n.exports=function(i,o){return a.call(i,o)}},function(n,r,a){var i=a(16),o=a(115),s=a(18),c=a(56),l=Object.defineProperty;r.f=i?l:function(u,f,v){if(s(u),f=c(f,!0),s(v),o)try{return l(u,f,v)}catch{}if("get"in v||"set"in v)throw TypeError("Accessors not supported");return"value"in v&&(u[f]=v.value),u}},function(n,r,a){var i=a(8);n.exports=!i(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},function(n,r,a){var i=this&&this.__values||function(S){var I=typeof Symbol=="function"&&Symbol.iterator,D=I&&S[I],E=0;if(D)return D.call(S);if(S&&typeof S.length=="number")return{next:function(){return S&&E>=S.length&&(S=void 0),{value:S&&S[E++],done:!S}}};throw new TypeError(I?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var o=a(3),s=a(2);function c(S,I,D){if(D===void 0&&(D=!1),D&&o.Guard.isElementNode(I)&&o.Guard.isShadowRoot(I.shadowRoot)&&I.shadowRoot._firstChild)return I.shadowRoot._firstChild;if(I._firstChild)return I._firstChild;if(I===S)return null;if(I._nextSibling)return I._nextSibling;for(var E=I._parent;E&&E!==S;){if(E._nextSibling)return E._nextSibling;E=E._parent}return null}function l(){var S;return(S={})[Symbol.iterator]=function(){return{next:function(){return{done:!0,value:null}}}},S}function u(S,I,D,E){I===void 0&&(I=!1),D===void 0&&(D=!1);for(var T=I?S:c(S,S,D);T&&E&&!E(T);)T=c(S,T,D);return T}function f(S,I,D,E,T){E===void 0&&(E=!1);for(var y=c(S,I,E);y&&T&&!T(y);)y=c(S,y,E);return y}function v(S,I,D,E){var T;return I===void 0&&(I=!1),D===void 0&&(D=!1),I||S._children.size!==0?((T={})[Symbol.iterator]=function(){var y=I?S:c(S,S,D);return{next:function(){for(;y&&E&&!E(y);)y=c(S,y,D);if(y===null)return{done:!0,value:null};var M={done:!1,value:y};return y=c(S,y,D),M}}},T):l()}function g(S,I,D){I===void 0&&(I=!1);for(var E=I?S:S._parent;E&&D&&!D(E);)E=E._parent;return E}function d(S,I,D,E){for(var T=I._parent;T&&E&&!E(T);)T=T._parent;return T}function m(S){return o.Guard.isDocumentTypeNode(S)?0:o.Guard.isCharacterDataNode(S)?S._data.length:S._children.size}function h(S,I){if(I===void 0&&(I=!1),I){var D=h(S,!1);return o.Guard.isShadowRoot(D)?h(D._host,!0):D}return S._parent?h(S._parent):S}function C(S,I,D,E){D===void 0&&(D=!1),E===void 0&&(E=!1);for(var T=D?S:E&&o.Guard.isShadowRoot(S)?S._host:S._parent;T!==null;){if(T===I)return!0;T=E&&o.Guard.isShadowRoot(T)?T._host:T._parent}return!1}function p(S){for(var I=h(S),D=0,E=u(I);E!==null;){if(D++,E===S)return D;E=f(I,E)}return-1}r.tree_getFirstDescendantNode=u,r.tree_getNextDescendantNode=f,r.tree_getDescendantNodes=v,r.tree_getDescendantElements=function(S,I,D,E){var T;return I===void 0&&(I=!1),D===void 0&&(D=!1),I||S._children.size!==0?((T={})[Symbol.iterator]=function(){var y=v(S,I,D,function(_){return o.Guard.isElementNode(_)})[Symbol.iterator](),M=y.next().value;return{next:function(){for(;M&&E&&!E(M);)M=y.next().value;if(M===null)return{done:!0,value:null};var _={done:!1,value:M};return M=y.next().value,_}}},T):l()},r.tree_getSiblingNodes=function(S,I,D){var E;return I===void 0&&(I=!1),S._parent&&S._parent._children.size!==0?((E={})[Symbol.iterator]=function(){var T=S._parent?S._parent._firstChild:null;return{next:function(){for(;T&&(D&&!D(T)||!I&&T===S);)T=T._nextSibling;if(T===null)return{done:!0,value:null};var y={done:!1,value:T};return T=T._nextSibling,y}}},E):l()},r.tree_getFirstAncestorNode=g,r.tree_getNextAncestorNode=d,r.tree_getAncestorNodes=function(S,I,D){var E;return I===void 0&&(I=!1),I||S._parent?((E={})[Symbol.iterator]=function(){var T=g(S,I,D);return{next:function(){if(T===null)return{done:!0,value:null};var y={done:!1,value:T};return T=d(0,T,I,D),y}}},E):l()},r.tree_getCommonAncestor=function(S,I){if(S===I)return S._parent;for(var D=[],E=[],T=g(S,!0);T!==null;)D.push(T),T=d(0,T);for(var y=g(I,!0);y!==null;)E.push(y),y=d(0,y);for(var M=D.length,_=E.length,O=null,w=Math.min(M,_);w>0;w--){var x=D[--M];if(x!==E[--_])break;O=x}return O},r.tree_getFollowingNode=function(S,I){if(I._firstChild)return I._firstChild;if(I._nextSibling)return I._nextSibling;for(;;){var D=I._parent;if(D===null||D===S)return null;if(D._nextSibling)return D._nextSibling;I=D}},r.tree_getPrecedingNode=function(S,I){return I===S?null:I._previousSibling?(I=I._previousSibling)._lastChild?I._lastChild:I:I._parent},r.tree_isConstrained=function S(I){var D,E,T,y,M,_;switch(I._nodeType){case s.NodeType.Document:var O=!1,w=!1;try{for(var x=i(I._children),P=x.next();!P.done;P=x.next())switch(P.value._nodeType){case s.NodeType.ProcessingInstruction:case s.NodeType.Comment:break;case s.NodeType.DocumentType:if(O||w)return!1;O=!0;break;case s.NodeType.Element:if(w)return!1;w=!0;break;default:return!1}}catch(U){D={error:U}}finally{try{P&&!P.done&&(E=x.return)&&E.call(x)}finally{if(D)throw D.error}}break;case s.NodeType.DocumentFragment:case s.NodeType.Element:try{for(var R=i(I._children),L=R.next();!L.done;L=R.next())switch(L.value._nodeType){case s.NodeType.Element:case s.NodeType.Text:case s.NodeType.ProcessingInstruction:case s.NodeType.CData:case s.NodeType.Comment:break;default:return!1}}catch(U){T={error:U}}finally{try{L&&!L.done&&(y=R.return)&&y.call(R)}finally{if(T)throw T.error}}break;case s.NodeType.DocumentType:case s.NodeType.Text:case s.NodeType.ProcessingInstruction:case s.NodeType.CData:case s.NodeType.Comment:return!I.hasChildNodes()}try{for(var H=i(I._children),F=H.next();!F.done;F=H.next())if(!S(F.value))return!1}catch(U){M={error:U}}finally{try{F&&!F.done&&(_=H.return)&&_.call(H)}finally{if(M)throw M.error}}return!0},r.tree_nodeLength=m,r.tree_isEmpty=function(S){return m(S)===0},r.tree_rootNode=h,r.tree_isDescendantOf=function(S,I,D,E){D===void 0&&(D=!1),E===void 0&&(E=!1);for(var T=u(S,D,E);T!==null;){if(T===I)return!0;T=f(S,T,D,E)}return!1},r.tree_isAncestorOf=C,r.tree_isHostIncludingAncestorOf=function S(I,D,E){if(E===void 0&&(E=!1),C(I,D,E))return!0;var T=h(I);return!(!o.Guard.isDocumentFragmentNode(T)||T._host===null||!S(T._host,D,E))},r.tree_isSiblingOf=function(S,I,D){return D===void 0&&(D=!1),S!==I?S._parent!==null&&S._parent===I._parent:!!D},r.tree_isPreceding=function(S,I){var D=p(S),E=p(I);return D!==-1&&E!==-1&&h(S)===h(I)&&E<D},r.tree_isFollowing=function(S,I){var D=p(S),E=p(I);return D!==-1&&E!==-1&&h(S)===h(I)&&E>D},r.tree_isParentOf=function(S,I){return S._parent===I},r.tree_isChildOf=function(S,I){return I._parent===S},r.tree_previousSibling=function(S){return S._previousSibling},r.tree_nextSibling=function(S){return S._nextSibling},r.tree_firstChild=function(S){return S._firstChild},r.tree_lastChild=function(S){return S._lastChild},r.tree_treePosition=p,r.tree_index=function(S){for(var I=0;S._previousSibling!==null;)I++,S=S._previousSibling;return I},r.tree_retarget=function(S,I){for(;;){if(!S||!o.Guard.isNode(S))return S;var D=h(S);if(!o.Guard.isShadowRoot(D)||I&&o.Guard.isNode(I)&&C(D,I,!0,!0))return S;S=D.host}}},function(n,r,a){var i=a(13);n.exports=function(o){if(!i(o))throw TypeError(String(o)+" is not an object");return o}},function(n,r,a){var i=a(24),o=a(130),s=a(49),c=a(43),l=a(88),u=c.set,f=c.getterFor("Array Iterator");n.exports=l(Array,"Array",function(v,g){u(this,{type:"Array Iterator",target:i(v),index:0,kind:g})},function(){var v=f(this),g=v.target,d=v.kind,m=v.index++;return!g||m>=g.length?(v.target=void 0,{value:void 0,done:!0}):d=="keys"?{value:m,done:!1}:d=="values"?{value:g[m],done:!1}:{value:[m,g[m]],done:!1}},"values"),s.Arguments=s.Array,o("keys"),o("values"),o("entries")},function(n,r,a){var i=a(90),o=a(25),s=a(202);i||o(Object.prototype,"toString",s,{unsafe:!0})},function(n,r,a){var i=a(16),o=a(15),s=a(40);n.exports=i?function(c,l,u){return o.f(c,l,s(1,u))}:function(c,l,u){return c[l]=u,c}},function(n,r,a){var i=a(137).charAt,o=a(43),s=a(88),c=o.set,l=o.getterFor("String Iterator");s(String,"String",function(u){c(this,{type:"String Iterator",string:String(u),index:0})},function(){var u,f=l(this),v=f.string,g=f.index;return g>=v.length?{value:void 0,done:!0}:(u=i(v,g),f.index+=u.length,{value:u,done:!1})})},function(n,r,a){var i=a(11),o=a(203),s=a(19),c=a(21),l=a(5),u=l("iterator"),f=l("toStringTag"),v=s.values;for(var g in o){var d=i[g],m=d&&d.prototype;if(m){if(m[u]!==v)try{c(m,u,v)}catch{m[u]=v}if(m[f]||c(m,f,g),o[g]){for(var h in s)if(m[h]!==s[h])try{c(m,h,s[h])}catch{m[h]=s[h]}}}}},function(n,r,a){var i=a(41),o=a(35);n.exports=function(s){return i(o(s))}},function(n,r,a){var i=a(11),o=a(21),s=a(14),c=a(80),l=a(117),u=a(43),f=u.get,v=u.enforce,g=String(String).split("String");(n.exports=function(d,m,h,C){var p=!!C&&!!C.unsafe,S=!!C&&!!C.enumerable,I=!!C&&!!C.noTargetGet;typeof h=="function"&&(typeof m!="string"||s(h,"name")||o(h,"name",m),v(h).source=g.join(typeof m=="string"?m:"")),d!==i?(p?!I&&d[m]&&(S=!0):delete d[m],S?d[m]=h:o(d,m,h)):S?d[m]=h:c(m,h)})(Function.prototype,"toString",function(){return typeof this=="function"&&f(this).source||l(this)})},function(n,r,a){var i=a(47),o=Math.min;n.exports=function(s){return s>0?o(i(s),9007199254740991):0}},function(n,r,a){var i=a(35);n.exports=function(o){return Object(i(o))}},function(n,r,a){var i=a(16),o=a(8),s=a(14),c=Object.defineProperty,l={},u=function(f){throw f};n.exports=function(f,v){if(s(l,f))return l[f];v||(v={});var g=[][f],d=!!s(v,"ACCESSORS")&&v.ACCESSORS,m=s(v,0)?v[0]:u,h=s(v,1)?v[1]:void 0;return l[f]=!!g&&!o(function(){if(d&&!i)return!0;var C={length:-1};d?c(C,1,{enumerable:!0,get:u}):C[1]=1,g.call(C,m,h)})}},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(148),o=a(149),s=a(151),c=a(98),l=a(153),u=a(154),f=a(155),v=a(99),g=a(100),d=a(156),m=a(157),h=a(101),C=a(158),p=a(159),S=a(160),I=a(161),D=a(162),E=a(163),T=a(164),y=a(165),M=a(166),_=a(167),O=a(168),w=a(169),x=a(170);r.create_domImplementation=function(P){return i.DOMImplementationImpl._create(P)},r.create_window=function(){return o.WindowImpl._create()},r.create_xmlDocument=function(){return new s.XMLDocumentImpl},r.create_document=function(){return new c.DocumentImpl},r.create_abortController=function(){return new l.AbortControllerImpl},r.create_abortSignal=function(){return u.AbortSignalImpl._create()},r.create_documentType=function(P,R,L,H){return f.DocumentTypeImpl._create(P,R,L,H)},r.create_element=function(P,R,L,H){return v.ElementImpl._create(P,R,L,H)},r.create_htmlElement=function(P,R,L,H){return v.ElementImpl._create(P,R,L,H)},r.create_htmlUnknownElement=function(P,R,L,H){return v.ElementImpl._create(P,R,L,H)},r.create_documentFragment=function(P){return g.DocumentFragmentImpl._create(P)},r.create_shadowRoot=function(P,R){return d.ShadowRootImpl._create(P,R)},r.create_attr=function(P,R){return m.AttrImpl._create(P,R)},r.create_text=function(P,R){return h.TextImpl._create(P,R)},r.create_cdataSection=function(P,R){return C.CDATASectionImpl._create(P,R)},r.create_comment=function(P,R){return p.CommentImpl._create(P,R)},r.create_processingInstruction=function(P,R,L){return S.ProcessingInstructionImpl._create(P,R,L)},r.create_htmlCollection=function(P,R){return R===void 0&&(R=function(){return!0}),I.HTMLCollectionImpl._create(P,R)},r.create_nodeList=function(P){return D.NodeListImpl._create(P)},r.create_nodeListStatic=function(P,R){return E.NodeListStaticImpl._create(P,R)},r.create_namedNodeMap=function(P){return T.NamedNodeMapImpl._create(P)},r.create_range=function(P,R){return y.RangeImpl._create(P,R)},r.create_nodeIterator=function(P,R,L){return M.NodeIteratorImpl._create(P,R,L)},r.create_treeWalker=function(P,R){return _.TreeWalkerImpl._create(P,R)},r.create_nodeFilter=function(){return O.NodeFilterImpl._create()},r.create_mutationRecord=function(P,R,L,H,F,U,V,X,re){return w.MutationRecordImpl._create(P,R,L,H,F,U,V,X,re)},r.create_domTokenList=function(P,R){return x.DOMTokenListImpl._create(P,R)}},function(n,r,a){var i=this&&this.__values||function(m){var h=typeof Symbol=="function"&&Symbol.iterator,C=h&&m[h],p=0;if(C)return C.call(m);if(m&&typeof m.length=="number")return{next:function(){return m&&p>=m.length&&(m=void 0),{value:m&&m[p++],done:!m}}};throw new TypeError(h?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var o=a(6),s=a(17),c=a(3),l=a(72),u=new Map;function f(m,h){if(h!==m._root&&s.tree_isAncestorOf(m._reference,h,!0)){if(m._pointerBeforeReference)for(;;){var C=s.tree_getFollowingNode(m._root,h);if(C!==null&&s.tree_isDescendantOf(m._root,C,!0)&&!s.tree_isDescendantOf(h,C,!0))return void(m._reference=C);if(C===null)return void(m._pointerBeforeReference=!1)}if(h._previousSibling===null)h._parent!==null&&(m._reference=h._parent);else{for(var p=h._previousSibling,S=s.tree_getFirstDescendantNode(h._previousSibling,!0,!1);S!==null;)S!==null&&(p=S),S=s.tree_getNextDescendantNode(h._previousSibling,S,!0,!1);m._reference=p}}}function v(m,h,C,p,S){if(c.Guard.isSlot(m)&&h==="name"&&S===null){if(p===C||p===null&&C===""||p===""&&C===null)return;m._name=p===null||p===""?"":p,l.shadowTree_assignSlotablesForATree(s.tree_rootNode(m))}}function g(m,h,C,p,S){if(c.Guard.isSlotable(m)&&h==="slot"&&S===null){if(p===C||p===null&&C===""||p===""&&C===null)return;m._name=p===null||p===""?"":p,l.shadowTree_isAssigned(m)&&l.shadowTree_assignSlotables(m._assignedSlot),l.shadowTree_assignASlot(m)}}function d(m,h,C,p){h==="id"&&p===null&&(m._uniqueIdentifier=C||void 0)}r.dom_runRemovingSteps=function(m,h){},r.dom_runCloningSteps=function(m,h,C,p){},r.dom_runAdoptingSteps=function(m,h){},r.dom_runAttributeChangeSteps=function(m,h,C,p,S){var I,D;o.dom.features.slots&&(g.call(m,m,h,C,p,S),v.call(m,m,h,C,p,S)),d.call(m,m,h,p,S);try{for(var E=i(m._attributeChangeSteps),T=E.next();!T.done;T=E.next())T.value.call(m,m,h,C,p,S)}catch(y){I={error:y}}finally{try{T&&!T.done&&(D=E.return)&&D.call(E)}finally{if(I)throw I.error}}},r.dom_runInsertionSteps=function(m){},r.dom_runNodeIteratorPreRemovingSteps=function(m,h){f.call(m,m,h)},r.dom_hasSupportedTokens=function(m){return u.has(m)},r.dom_getSupportedTokens=function(m){return u.get(m)||new Set},r.dom_runEventConstructingSteps=function(m){},r.dom_runChildTextContentChangeSteps=function(m){}},function(n,r,a){var i=a(4),o=a(11),s=a(46),c=a(44),l=a(16),u=a(86),f=a(124),v=a(8),g=a(14),d=a(59),m=a(13),h=a(18),C=a(27),p=a(24),S=a(56),I=a(40),D=a(60),E=a(61),T=a(82),y=a(190),M=a(85),_=a(55),O=a(15),w=a(79),x=a(21),P=a(25),R=a(81),L=a(57),H=a(45),F=a(58),U=a(5),V=a(125),X=a(126),re=a(62),ue=a(43),De=a(36).forEach,pe=L("hidden"),Te=U("toPrimitive"),Fe=ue.set,Ne=ue.getterFor("Symbol"),Re=Object.prototype,k=o.Symbol,A=s("JSON","stringify"),b=_.f,N=O.f,W=y.f,j=w.f,K=R("symbols"),ge=R("op-symbols"),ye=R("string-to-symbol-registry"),we=R("symbol-to-string-registry"),be=R("wks"),Z=o.QObject,ie=!Z||!Z.prototype||!Z.prototype.findChild,he=l&&v(function(){return D(N({},"a",{get:function(){return N(this,"a",{value:7}).a}})).a!=7})?function(Be,nt,Ze){var at=b(Re,nt);at&&delete Re[nt],N(Be,nt,Ze),at&&Be!==Re&&N(Re,nt,at)}:N,se=function(Be,nt){var Ze=K[Be]=D(k.prototype);return Fe(Ze,{type:"Symbol",tag:Be,description:nt}),l||(Ze.description=nt),Ze},me=f?function(Be){return typeof Be=="symbol"}:function(Be){return Object(Be)instanceof k},fe=function(Be,nt,Ze){Be===Re&&fe(ge,nt,Ze),h(Be);var at=S(nt,!0);return h(Ze),g(K,at)?(Ze.enumerable?(g(Be,pe)&&Be[pe][at]&&(Be[pe][at]=!1),Ze=D(Ze,{enumerable:I(0,!1)})):(g(Be,pe)||N(Be,pe,I(1,{})),Be[pe][at]=!0),he(Be,at,Ze)):N(Be,at,Ze)},q=function(Be,nt){h(Be);var Ze=p(nt),at=E(Ze).concat(Me(Ze));return De(at,function(Ot){l&&!Pe.call(Ze,Ot)||fe(Be,Ot,Ze[Ot])}),Be},Pe=function(Be){var nt=S(Be,!0),Ze=j.call(this,nt);return!(this===Re&&g(K,nt)&&!g(ge,nt))&&(!(Ze||!g(this,nt)||!g(K,nt)||g(this,pe)&&this[pe][nt])||Ze)},Le=function(Be,nt){var Ze=p(Be),at=S(nt,!0);if(Ze!==Re||!g(K,at)||g(ge,at)){var Ot=b(Ze,at);return!Ot||!g(K,at)||g(Ze,pe)&&Ze[pe][at]||(Ot.enumerable=!0),Ot}},Ue=function(Be){var nt=W(p(Be)),Ze=[];return De(nt,function(at){g(K,at)||g(H,at)||Ze.push(at)}),Ze},Me=function(Be){var nt=Be===Re,Ze=W(nt?ge:p(Be)),at=[];return De(Ze,function(Ot){!g(K,Ot)||nt&&!g(Re,Ot)||at.push(K[Ot])}),at};u||(P((k=function(){if(this instanceof k)throw TypeError("Symbol is not a constructor");var Be=arguments.length&&arguments[0]!==void 0?String(arguments[0]):void 0,nt=F(Be),Ze=function(at){this===Re&&Ze.call(ge,at),g(this,pe)&&g(this[pe],nt)&&(this[pe][nt]=!1),he(this,nt,I(1,at))};return l&&ie&&he(Re,nt,{configurable:!0,set:Ze}),se(nt,Be)}).prototype,"toString",function(){return Ne(this).tag}),P(k,"withoutSetter",function(Be){return se(F(Be),Be)}),w.f=Pe,O.f=fe,_.f=Le,T.f=y.f=Ue,M.f=Me,V.f=function(Be){return se(U(Be),Be)},l&&(N(k.prototype,"description",{configurable:!0,get:function(){return Ne(this).description}}),c||P(Re,"propertyIsEnumerable",Pe,{unsafe:!0}))),i({global:!0,wrap:!0,forced:!u,sham:!u},{Symbol:k}),De(E(be),function(Be){X(Be)}),i({target:"Symbol",stat:!0,forced:!u},{for:function(Be){var nt=String(Be);if(g(ye,nt))return ye[nt];var Ze=k(nt);return ye[nt]=Ze,we[Ze]=nt,Ze},keyFor:function(Be){if(!me(Be))throw TypeError(Be+" is not a symbol");if(g(we,Be))return we[Be]},useSetter:function(){ie=!0},useSimple:function(){ie=!1}}),i({target:"Object",stat:!0,forced:!u,sham:!l},{create:function(Be,nt){return nt===void 0?D(Be):q(D(Be),nt)},defineProperty:fe,defineProperties:q,getOwnPropertyDescriptor:Le}),i({target:"Object",stat:!0,forced:!u},{getOwnPropertyNames:Ue,getOwnPropertySymbols:Me}),i({target:"Object",stat:!0,forced:v(function(){M.f(1)})},{getOwnPropertySymbols:function(Be){return M.f(C(Be))}}),A&&i({target:"JSON",stat:!0,forced:!u||v(function(){var Be=k();return A([Be])!="[null]"||A({a:Be})!="{}"||A(Object(Be))!="{}"})},{stringify:function(Be,nt,Ze){for(var at,Ot=[Be],Oe=1;arguments.length>Oe;)Ot.push(arguments[Oe++]);if(at=nt,(m(nt)||Be!==void 0)&&!me(Be))return d(nt)||(nt=function($e,ht){if(typeof at=="function"&&(ht=at.call(this,$e,ht)),!me(ht))return ht}),Ot[1]=nt,A.apply(null,Ot)}}),k.prototype[Te]||x(k.prototype,Te,k.prototype.valueOf),re(k,"Symbol"),H[pe]=!0},function(n,r,a){var i=a(4),o=a(16),s=a(11),c=a(14),l=a(13),u=a(15).f,f=a(119),v=s.Symbol;if(o&&typeof v=="function"&&(!("description"in v.prototype)||v().description!==void 0)){var g={},d=function(){var S=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),I=this instanceof d?new v(S):S===void 0?v():v(S);return S===""&&(g[I]=!0),I};f(d,v);var m=d.prototype=v.prototype;m.constructor=d;var h=m.toString,C=String(v("test"))=="Symbol(test)",p=/^Symbol\((.*)\)[^)]+$/;u(m,"description",{configurable:!0,get:function(){var S=l(this)?this.valueOf():this,I=h.call(S);if(c(g,S))return"";var D=C?I.slice(7,-1):I.replace(p,"$1");return D===""?void 0:D}}),i({global:!0,forced:!0},{Symbol:d})}},function(n,r,a){a(126)("iterator")},function(n,r,a){var i,o=this&&this.__extends||(i=function(C,p){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,I){S.__proto__=I}||function(S,I){for(var D in I)I.hasOwnProperty(D)&&(S[D]=I[D])})(C,p)},function(C,p){function S(){this.constructor=C}i(C,p),C.prototype=p===null?Object.create(p):(S.prototype=p.prototype,new S)}),s=this&&this.__values||function(C){var p=typeof Symbol=="function"&&Symbol.iterator,S=p&&C[p],I=0;if(S)return S.call(C);if(C&&typeof C.length=="number")return{next:function(){return C&&I>=C.length&&(C=void 0),{value:C&&C[I++],done:!C}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var c=a(6),l=a(2),u=a(70),f=a(3),v=a(9),g=a(0),d=a(152),m=a(12),h=function(C){function p(){var S=C.call(this)||this;return S._parent=null,S._firstChild=null,S._lastChild=null,S._previousSibling=null,S._nextSibling=null,S}return o(p,C),Object.defineProperty(p.prototype,"_childNodes",{get:function(){return this.__childNodes||(this.__childNodes=g.create_nodeList(this))},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"_nodeDocument",{get:function(){return this._nodeDocumentOverride||c.dom.window._associatedDocument},set:function(S){this._nodeDocumentOverride=S},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"_registeredObserverList",{get:function(){return this.__registeredObserverList||(this.__registeredObserverList=[])},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"nodeType",{get:function(){return this._nodeType},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"nodeName",{get:function(){return f.Guard.isElementNode(this)?this._htmlUppercasedQualifiedName:f.Guard.isAttrNode(this)?this._qualifiedName:f.Guard.isExclusiveTextNode(this)?"#text":f.Guard.isCDATASectionNode(this)?"#cdata-section":f.Guard.isProcessingInstructionNode(this)?this._target:f.Guard.isCommentNode(this)?"#comment":f.Guard.isDocumentNode(this)?"#document":f.Guard.isDocumentTypeNode(this)?this._name:f.Guard.isDocumentFragmentNode(this)?"#document-fragment":""},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"baseURI",{get:function(){return d.urlSerializer(this._nodeDocument._URL)},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"isConnected",{get:function(){return f.Guard.isElementNode(this)&&g.shadowTree_isConnected(this)},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"ownerDocument",{get:function(){return this._nodeType===l.NodeType.Document?null:this._nodeDocument},enumerable:!0,configurable:!0}),p.prototype.getRootNode=function(S){return g.tree_rootNode(this,!!S&&S.composed)},Object.defineProperty(p.prototype,"parentNode",{get:function(){return this._nodeType===l.NodeType.Attribute?null:this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"parentElement",{get:function(){return this._parent&&f.Guard.isElementNode(this._parent)?this._parent:null},enumerable:!0,configurable:!0}),p.prototype.hasChildNodes=function(){return this._firstChild!==null},Object.defineProperty(p.prototype,"childNodes",{get:function(){return this._childNodes},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"firstChild",{get:function(){return this._firstChild},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"lastChild",{get:function(){return this._lastChild},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"previousSibling",{get:function(){return this._previousSibling},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"nextSibling",{get:function(){return this._nextSibling},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"nodeValue",{get:function(){return f.Guard.isAttrNode(this)?this._value:f.Guard.isCharacterDataNode(this)?this._data:null},set:function(S){S===null&&(S=""),f.Guard.isAttrNode(this)?g.attr_setAnExistingAttributeValue(this,S):f.Guard.isCharacterDataNode(this)&&g.characterData_replaceData(this,0,this._data.length,S)},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"textContent",{get:function(){return f.Guard.isDocumentFragmentNode(this)||f.Guard.isElementNode(this)?g.text_descendantTextContent(this):f.Guard.isAttrNode(this)?this._value:f.Guard.isCharacterDataNode(this)?this._data:null},set:function(S){S===null&&(S=""),f.Guard.isDocumentFragmentNode(this)||f.Guard.isElementNode(this)?g.node_stringReplaceAll(S,this):f.Guard.isAttrNode(this)?g.attr_setAnExistingAttributeValue(this,S):f.Guard.isCharacterDataNode(this)&&g.characterData_replaceData(this,0,g.tree_nodeLength(this),S)},enumerable:!0,configurable:!0}),p.prototype.normalize=function(){for(var S,I,D,E,T=[],y=g.tree_getFirstDescendantNode(this,!1,!1,function(De){return f.Guard.isExclusiveTextNode(De)});y!==null;)T.push(y),y=g.tree_getNextDescendantNode(this,y,!1,!1,function(De){return f.Guard.isExclusiveTextNode(De)});for(var M=0;M<T.length;M++){var _=T[M];if(_._parent!==null){var O=g.tree_nodeLength(_);if(O!==0){var w=[],x="";try{for(var P=(S=void 0,s(g.text_contiguousExclusiveTextNodes(_))),R=P.next();!R.done;R=P.next()){var L=R.value;w.push(L),x+=L._data}}catch(De){S={error:De}}finally{try{R&&!R.done&&(I=P.return)&&I.call(P)}finally{if(S)throw S.error}}if(g.characterData_replaceData(_,O,0,x),c.dom.rangeList.size!==0)for(var H=_._nextSibling;H!==null&&f.Guard.isExclusiveTextNode(H);){var F=H,U=g.tree_index(F);try{for(var V=(D=void 0,s(c.dom.rangeList)),X=V.next();!X.done;X=V.next()){var re=X.value;re._start[0]===F&&(re._start[0]=_,re._start[1]+=O),re._end[0]===F&&(re._end[0]=_,re._end[1]+=O),re._start[0]===F._parent&&re._start[1]===U&&(re._start[0]=_,re._start[1]=O),re._end[0]===F._parent&&re._end[1]===U&&(re._end[0]=_,re._end[1]=O)}}catch(De){D={error:De}}finally{try{X&&!X.done&&(E=V.return)&&E.call(V)}finally{if(D)throw D.error}}O+=g.tree_nodeLength(H),H=H._nextSibling}for(var ue=0;ue<w.length;ue++)(L=w[ue])._parent!==null&&g.mutation_remove(L,L._parent)}else g.mutation_remove(_,_._parent)}}},p.prototype.cloneNode=function(S){if(S===void 0&&(S=!1),f.Guard.isShadowRoot(this))throw new v.NotSupportedError;return g.node_clone(this,null,S)},p.prototype.isEqualNode=function(S){return S===void 0&&(S=null),S!==null&&g.node_equals(this,S)},p.prototype.isSameNode=function(S){return S===void 0&&(S=null),this===S},p.prototype.compareDocumentPosition=function(S){if(S===this)return 0;var I=S,D=this,E=null,T=null;if(f.Guard.isAttrNode(I)&&(I=(E=I)._element),f.Guard.isAttrNode(D)&&(D=(T=D)._element,E&&I&&I===D))for(var y=0;y<D._attributeList.length;y++){var M=D._attributeList[y];if(g.node_equals(M,E))return l.Position.ImplementationSpecific|l.Position.Preceding;if(g.node_equals(M,T))return l.Position.ImplementationSpecific|l.Position.Following}return I===null||D===null||g.tree_rootNode(I)!==g.tree_rootNode(D)?l.Position.Disconnected|l.Position.ImplementationSpecific|(c.dom.compareCache.check(this,S)?l.Position.Preceding:l.Position.Following):!E&&g.tree_isAncestorOf(D,I)||T&&I===D?l.Position.Contains|l.Position.Preceding:!T&&g.tree_isDescendantOf(D,I)||E&&I===D?l.Position.ContainedBy|l.Position.Following:g.tree_isPreceding(D,I)?l.Position.Preceding:l.Position.Following},p.prototype.contains=function(S){return S!==null&&g.tree_isDescendantOf(this,S,!0)},p.prototype.lookupPrefix=function(S){return S?f.Guard.isElementNode(this)?g.node_locateANamespacePrefix(this,S):f.Guard.isDocumentNode(this)?this.documentElement===null?null:g.node_locateANamespacePrefix(this.documentElement,S):f.Guard.isDocumentTypeNode(this)||f.Guard.isDocumentFragmentNode(this)?null:f.Guard.isAttrNode(this)?this._element===null?null:g.node_locateANamespacePrefix(this._element,S):this._parent!==null&&f.Guard.isElementNode(this._parent)?g.node_locateANamespacePrefix(this._parent,S):null:null},p.prototype.lookupNamespaceURI=function(S){return g.node_locateANamespace(this,S||null)},p.prototype.isDefaultNamespace=function(S){return S||(S=null),g.node_locateANamespace(this,null)===S},p.prototype.insertBefore=function(S,I){return g.mutation_preInsert(S,this,I)},p.prototype.appendChild=function(S){return g.mutation_append(S,this)},p.prototype.replaceChild=function(S,I){return g.mutation_replace(I,S,this)},p.prototype.removeChild=function(S){return g.mutation_preRemove(S,this)},p.prototype._getTheParent=function(S){return f.Guard.isSlotable(this)&&g.shadowTree_isAssigned(this)?this._assignedSlot:this._parent},p.ELEMENT_NODE=1,p.ATTRIBUTE_NODE=2,p.TEXT_NODE=3,p.CDATA_SECTION_NODE=4,p.ENTITY_REFERENCE_NODE=5,p.ENTITY_NODE=6,p.PROCESSING_INSTRUCTION_NODE=7,p.COMMENT_NODE=8,p.DOCUMENT_NODE=9,p.DOCUMENT_TYPE_NODE=10,p.DOCUMENT_FRAGMENT_NODE=11,p.NOTATION_NODE=12,p.DOCUMENT_POSITION_DISCONNECTED=1,p.DOCUMENT_POSITION_PRECEDING=2,p.DOCUMENT_POSITION_FOLLOWING=4,p.DOCUMENT_POSITION_CONTAINS=8,p.DOCUMENT_POSITION_CONTAINED_BY=16,p.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32,p}(u.EventTargetImpl);r.NodeImpl=h,h.prototype._children=new f.EmptySet,m.idl_defineConst(h.prototype,"ELEMENT_NODE",1),m.idl_defineConst(h.prototype,"ATTRIBUTE_NODE",2),m.idl_defineConst(h.prototype,"TEXT_NODE",3),m.idl_defineConst(h.prototype,"CDATA_SECTION_NODE",4),m.idl_defineConst(h.prototype,"ENTITY_REFERENCE_NODE",5),m.idl_defineConst(h.prototype,"ENTITY_NODE",6),m.idl_defineConst(h.prototype,"PROCESSING_INSTRUCTION_NODE",7),m.idl_defineConst(h.prototype,"COMMENT_NODE",8),m.idl_defineConst(h.prototype,"DOCUMENT_NODE",9),m.idl_defineConst(h.prototype,"DOCUMENT_TYPE_NODE",10),m.idl_defineConst(h.prototype,"DOCUMENT_FRAGMENT_NODE",11),m.idl_defineConst(h.prototype,"NOTATION_NODE",12),m.idl_defineConst(h.prototype,"DOCUMENT_POSITION_DISCONNECTED",1),m.idl_defineConst(h.prototype,"DOCUMENT_POSITION_PRECEDING",2),m.idl_defineConst(h.prototype,"DOCUMENT_POSITION_FOLLOWING",4),m.idl_defineConst(h.prototype,"DOCUMENT_POSITION_CONTAINS",8),m.idl_defineConst(h.prototype,"DOCUMENT_POSITION_CONTAINED_BY",16),m.idl_defineConst(h.prototype,"DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC",32)},function(n,r){n.exports=function(a){if(a==null)throw TypeError("Can't call method on "+a);return a}},function(n,r,a){var i=a(87),o=a(41),s=a(27),c=a(26),l=a(128),u=[].push,f=function(v){var g=v==1,d=v==2,m=v==3,h=v==4,C=v==6,p=v==5||C;return function(S,I,D,E){for(var T,y,M=s(S),_=o(M),O=i(I,D,3),w=c(_.length),x=0,P=E||l,R=g?P(S,w):d?P(S,0):void 0;w>x;x++)if((p||x in _)&&(y=O(T=_[x],x,M),v)){if(g)R[x]=y;else if(y)switch(v){case 3:return!0;case 5:return T;case 6:return x;case 2:u.call(R,T)}else if(h)return!1}return C?-1:m||h?h:R}};n.exports={forEach:f(0),map:f(1),filter:f(2),some:f(3),every:f(4),find:f(5),findIndex:f(6)}},function(n,r,a){var i=this&&this.__values||function(M){var _=typeof Symbol=="function"&&Symbol.iterator,O=_&&M[_],w=0;if(O)return O.call(M);if(M&&typeof M.length=="number")return{next:function(){return M&&w>=M.length&&(M=void 0),{value:M&&M[w++],done:!M}}};throw new TypeError(_?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(M,_){var O=typeof Symbol=="function"&&M[Symbol.iterator];if(!O)return M;var w,x,P=O.call(M),R=[];try{for(;(_===void 0||_-- >0)&&!(w=P.next()).done;)R.push(w.value)}catch(L){x={error:L}}finally{try{w&&!w.done&&(O=P.return)&&O.call(P)}finally{if(x)throw x.error}}return R},s=this&&this.__spread||function(){for(var M=[],_=0;_<arguments.length;_++)M=M.concat(o(arguments[_]));return M};Object.defineProperty(r,"__esModule",{value:!0});var c=a(6),l=a(9),u=a(2),f=a(3),v=a(1),g=a(7),d=a(73),m=a(17),h=a(172),C=a(72),p=a(51),S=a(30),I=a(106);function D(M,_,O){var w,x,P,R,L,H,F,U,V=_._nodeType,X=M._nodeType,re=O?O._nodeType:null;if(V!==u.NodeType.Document&&V!==u.NodeType.DocumentFragment&&V!==u.NodeType.Element)throw new l.HierarchyRequestError("Only document, document fragment and element nodes can contain child nodes. Parent node is "+_.nodeName+".");if(m.tree_isHostIncludingAncestorOf(_,M,!0))throw new l.HierarchyRequestError("The node to be inserted cannot be an inclusive ancestor of parent node. Node is "+M.nodeName+", parent node is "+_.nodeName+".");if(O!==null&&O._parent!==_)throw new l.NotFoundError("The reference child node cannot be found under parent node. Child node is "+O.nodeName+", parent node is "+_.nodeName+".");if(X!==u.NodeType.DocumentFragment&&X!==u.NodeType.DocumentType&&X!==u.NodeType.Element&&X!==u.NodeType.Text&&X!==u.NodeType.ProcessingInstruction&&X!==u.NodeType.CData&&X!==u.NodeType.Comment)throw new l.HierarchyRequestError("Only document fragment, document type, element, text, processing instruction, cdata section or comment nodes can be inserted. Node is "+M.nodeName+".");if(X===u.NodeType.Text&&V===u.NodeType.Document)throw new l.HierarchyRequestError("Cannot insert a text node as a child of a document node. Node is "+M.nodeName+".");if(X===u.NodeType.DocumentType&&V!==u.NodeType.Document)throw new l.HierarchyRequestError("A document type node can only be inserted under a document node. Parent node is "+_.nodeName+".");if(V===u.NodeType.Document){if(X===u.NodeType.DocumentFragment){var ue=0;try{for(var De=i(M._children),pe=De.next();!pe.done;pe=De.next()){var Te=pe.value;if(Te._nodeType===u.NodeType.Element)ue++;else if(Te._nodeType===u.NodeType.Text)throw new l.HierarchyRequestError("Cannot insert text a node as a child of a document node. Node is "+Te.nodeName+".")}}catch(j){w={error:j}}finally{try{pe&&!pe.done&&(x=De.return)&&x.call(De)}finally{if(w)throw w.error}}if(ue>1)throw new l.HierarchyRequestError("A document node can only have one document element node. Document fragment to be inserted has "+ue+" element nodes.");if(ue===1){try{for(var Fe=i(_._children),Ne=Fe.next();!Ne.done;Ne=Fe.next())if(Ne.value._nodeType===u.NodeType.Element)throw new l.HierarchyRequestError("The document node already has a document element node.")}catch(j){P={error:j}}finally{try{Ne&&!Ne.done&&(R=Fe.return)&&R.call(Fe)}finally{if(P)throw P.error}}if(O){if(re===u.NodeType.DocumentType)throw new l.HierarchyRequestError("Cannot insert an element node before a document type node.");for(var Re=O._nextSibling;Re;){if(Re._nodeType===u.NodeType.DocumentType)throw new l.HierarchyRequestError("Cannot insert an element node before a document type node.");Re=Re._nextSibling}}}}else if(X===u.NodeType.Element){try{for(var k=i(_._children),A=k.next();!A.done;A=k.next())if(A.value._nodeType===u.NodeType.Element)throw new l.HierarchyRequestError("Document already has a document element node. Node is "+M.nodeName+".")}catch(j){L={error:j}}finally{try{A&&!A.done&&(H=k.return)&&H.call(k)}finally{if(L)throw L.error}}if(O){if(re===u.NodeType.DocumentType)throw new l.HierarchyRequestError("Cannot insert an element node before a document type node. Node is "+M.nodeName+".");for(Re=O._nextSibling;Re;){if(Re._nodeType===u.NodeType.DocumentType)throw new l.HierarchyRequestError("Cannot insert an element node before a document type node. Node is "+M.nodeName+".");Re=Re._nextSibling}}}else if(X===u.NodeType.DocumentType){try{for(var b=i(_._children),N=b.next();!N.done;N=b.next())if(N.value._nodeType===u.NodeType.DocumentType)throw new l.HierarchyRequestError("Document already has a document type node. Node is "+M.nodeName+".")}catch(j){F={error:j}}finally{try{N&&!N.done&&(U=b.return)&&U.call(b)}finally{if(F)throw F.error}}if(O)for(var W=O._previousSibling;W;){if(W._nodeType===u.NodeType.Element)throw new l.HierarchyRequestError("Cannot insert a document type node before an element node. Node is "+M.nodeName+".");W=W._previousSibling}else for(W=_._firstChild;W;){if(W._nodeType===u.NodeType.Element)throw new l.HierarchyRequestError("Cannot insert a document type node before an element node. Node is "+M.nodeName+".");W=W._nextSibling}}}}function E(M,_,O){D(M,_,O);var w=O;return w===M&&(w=M._nextSibling),I.document_adopt(M,_._nodeDocument),T(M,_,w),M}function T(M,_,O,w){var x,P;if(O!==null||M._nodeType===u.NodeType.DocumentFragment){var R=M._nodeType===u.NodeType.DocumentFragment?M._children.size:1;if(O!==null&&c.dom.rangeList.size!==0){var L=m.tree_index(O);try{for(var H=i(c.dom.rangeList),F=H.next();!F.done;F=H.next()){var U=F.value;U._start[0]===_&&U._start[1]>L&&(U._start[1]+=R),U._end[0]===_&&U._end[1]>L&&(U._end[1]+=R)}}catch(Ne){x={error:Ne}}finally{try{F&&!F.done&&(P=H.return)&&P.call(H)}finally{if(x)throw x.error}}}var V=M._nodeType===u.NodeType.DocumentFragment?new(Array.bind.apply(Array,s([void 0],M._children))):[M];if(M._nodeType===u.NodeType.DocumentFragment)for(;M._firstChild;)y(M._firstChild,M,!0);c.dom.features.mutationObservers&&M._nodeType===u.NodeType.DocumentFragment&&p.observer_queueTreeMutationRecord(M,[],V,null,null);for(var X=O?O._previousSibling:_._lastChild,re=O===null?-1:m.tree_index(O),ue=0;ue<V.length;ue++){var De=V[ue];if(f.Guard.isElementNode(De)&&(f.Guard.isDocumentNode(_)&&(_._documentElement=De),De._nodeDocument._hasNamespaces||De._namespace===null&&De._namespacePrefix===null||(De._nodeDocument._hasNamespaces=!0)),De._parent=_,O===null?g.set.append(_._children,De):(g.set.insert(_._children,De,re),re++),_._firstChild===null)De._previousSibling=null,De._nextSibling=null,_._firstChild=De,_._lastChild=De;else{var pe=O?O._previousSibling:_._lastChild,Te=O||null;De._previousSibling=pe,De._nextSibling=Te,pe&&(pe._nextSibling=De),Te&&(Te._previousSibling=De),pe||(_._firstChild=De),Te||(_._lastChild=De)}c.dom.features.slots&&_._shadowRoot!==null&&f.Guard.isSlotable(De)&&C.shadowTree_assignASlot(De),c.dom.features.steps&&f.Guard.isTextNode(De)&&S.dom_runChildTextContentChangeSteps(_),c.dom.features.slots&&f.Guard.isShadowRoot(m.tree_rootNode(_))&&f.Guard.isSlot(_)&&v.isEmpty(_._assignedNodes)&&C.shadowTree_signalASlotChange(_),c.dom.features.slots&&C.shadowTree_assignSlotablesForATree(m.tree_rootNode(De));for(var Fe=m.tree_getFirstDescendantNode(De,!0,!0);Fe!==null;)c.dom.features.steps&&S.dom_runInsertionSteps(Fe),c.dom.features.customElements&&f.Guard.isElementNode(Fe)&&C.shadowTree_isConnected(Fe)&&(f.Guard.isCustomElementNode(Fe)?d.customElement_enqueueACustomElementCallbackReaction(Fe,"connectedCallback",[]):d.customElement_tryToUpgrade(Fe)),Fe=m.tree_getNextDescendantNode(De,Fe,!0,!0)}c.dom.features.mutationObservers&&(w||p.observer_queueTreeMutationRecord(_,V,[],X,O))}else(function(Ne,Re,k){var A=Re._lastChild;if(f.Guard.isElementNode(Ne)&&(f.Guard.isDocumentNode(Re)&&(Re._documentElement=Ne),Ne._nodeDocument._hasNamespaces||Ne._namespace===null&&Ne._namespacePrefix===null||(Ne._nodeDocument._hasNamespaces=!0)),Ne._parent=Re,Re._children.add(Ne),Re._firstChild===null)Ne._previousSibling=null,Ne._nextSibling=null,Re._firstChild=Ne,Re._lastChild=Ne;else{var b=Re._lastChild;Ne._previousSibling=b,Ne._nextSibling=null,b&&(b._nextSibling=Ne),b||(Re._firstChild=Ne),Re._lastChild=Ne}c.dom.features.slots&&Re._shadowRoot!==null&&f.Guard.isSlotable(Ne)&&C.shadowTree_assignASlot(Ne),c.dom.features.steps&&f.Guard.isTextNode(Ne)&&S.dom_runChildTextContentChangeSteps(Re),c.dom.features.slots&&f.Guard.isShadowRoot(m.tree_rootNode(Re))&&f.Guard.isSlot(Re)&&v.isEmpty(Re._assignedNodes)&&C.shadowTree_signalASlotChange(Re),c.dom.features.slots&&C.shadowTree_assignSlotablesForATree(m.tree_rootNode(Ne)),c.dom.features.steps&&S.dom_runInsertionSteps(Ne),c.dom.features.customElements&&f.Guard.isElementNode(Ne)&&C.shadowTree_isConnected(Ne)&&(f.Guard.isCustomElementNode(Ne)?d.customElement_enqueueACustomElementCallbackReaction(Ne,"connectedCallback",[]):d.customElement_tryToUpgrade(Ne)),c.dom.features.mutationObservers&&(k||p.observer_queueTreeMutationRecord(Re,[Ne],[],A,null))})(M,_,w)}function y(M,_,O){var w,x,P,R,L,H,F,U;if(c.dom.rangeList.size!==0){var V=m.tree_index(M);try{for(var X=i(c.dom.rangeList),re=X.next();!re.done;re=X.next()){var ue=re.value;m.tree_isDescendantOf(M,ue._start[0],!0)&&(ue._start=[_,V]),m.tree_isDescendantOf(M,ue._end[0],!0)&&(ue._end=[_,V]),ue._start[0]===_&&ue._start[1]>V&&ue._start[1]--,ue._end[0]===_&&ue._end[1]>V&&ue._end[1]--}}catch(ye){w={error:ye}}finally{try{re&&!re.done&&(x=X.return)&&x.call(X)}finally{if(w)throw w.error}}try{for(var De=i(c.dom.rangeList),pe=De.next();!pe.done;pe=De.next())(ue=pe.value)._start[0]===_&&ue._start[1]>V&&(ue._start[1]-=1),ue._end[0]===_&&ue._end[1]>V&&(ue._end[1]-=1)}catch(ye){P={error:ye}}finally{try{pe&&!pe.done&&(R=De.return)&&R.call(De)}finally{if(P)throw P.error}}}if(c.dom.features.steps)try{for(var Te=i(h.nodeIterator_iteratorList()),Fe=Te.next();!Fe.done;Fe=Te.next()){var Ne=Fe.value;Ne._root._nodeDocument===M._nodeDocument&&S.dom_runNodeIteratorPreRemovingSteps(Ne,M)}}catch(ye){L={error:ye}}finally{try{Fe&&!Fe.done&&(H=Te.return)&&H.call(Te)}finally{if(L)throw L.error}}var Re=M._previousSibling,k=M._nextSibling;f.Guard.isDocumentNode(_)&&f.Guard.isElementNode(M)&&(_._documentElement=null),M._parent=null,_._children.delete(M);var A=M._previousSibling,b=M._nextSibling;M._previousSibling=null,M._nextSibling=null,A&&(A._nextSibling=b),b&&(b._previousSibling=A),A||(_._firstChild=b),b||(_._lastChild=A),c.dom.features.slots&&f.Guard.isSlotable(M)&&M._assignedSlot!==null&&C.shadowTree_isAssigned(M)&&C.shadowTree_assignSlotables(M._assignedSlot),c.dom.features.slots&&f.Guard.isShadowRoot(m.tree_rootNode(_))&&f.Guard.isSlot(_)&&v.isEmpty(_._assignedNodes)&&C.shadowTree_signalASlotChange(_),c.dom.features.slots&&m.tree_getFirstDescendantNode(M,!0,!1,function(ye){return f.Guard.isSlot(ye)})!==null&&(C.shadowTree_assignSlotablesForATree(m.tree_rootNode(_)),C.shadowTree_assignSlotablesForATree(M)),c.dom.features.steps&&S.dom_runRemovingSteps(M,_),c.dom.features.customElements&&f.Guard.isCustomElementNode(M)&&d.customElement_enqueueACustomElementCallbackReaction(M,"disconnectedCallback",[]);for(var N=m.tree_getFirstDescendantNode(M,!1,!0);N!==null;)c.dom.features.steps&&S.dom_runRemovingSteps(N,M),c.dom.features.customElements&&f.Guard.isCustomElementNode(N)&&d.customElement_enqueueACustomElementCallbackReaction(N,"disconnectedCallback",[]),N=m.tree_getNextDescendantNode(M,N,!1,!0);if(c.dom.features.mutationObservers)for(var W=m.tree_getFirstAncestorNode(_,!0);W!==null;){try{for(var j=(F=void 0,i(W._registeredObserverList)),K=j.next();!K.done;K=j.next()){var ge=K.value;ge.options.subtree&&M._registeredObserverList.push({observer:ge.observer,options:ge.options,source:ge})}}catch(ye){F={error:ye}}finally{try{K&&!K.done&&(U=j.return)&&U.call(j)}finally{if(F)throw F.error}}W=m.tree_getNextAncestorNode(_,W,!0)}c.dom.features.mutationObservers&&(O||p.observer_queueTreeMutationRecord(_,[],[M],Re,k)),c.dom.features.steps&&f.Guard.isTextNode(M)&&S.dom_runChildTextContentChangeSteps(_)}r.mutation_ensurePreInsertionValidity=D,r.mutation_preInsert=E,r.mutation_insert=T,r.mutation_append=function(M,_){return E(M,_,null)},r.mutation_replace=function(M,_,O){var w,x,P,R,L,H,F,U;if(O._nodeType!==u.NodeType.Document&&O._nodeType!==u.NodeType.DocumentFragment&&O._nodeType!==u.NodeType.Element)throw new l.HierarchyRequestError("Only document, document fragment and element nodes can contain child nodes. Parent node is "+O.nodeName+".");if(m.tree_isHostIncludingAncestorOf(O,_,!0))throw new l.HierarchyRequestError("The node to be inserted cannot be an ancestor of parent node. Node is "+_.nodeName+", parent node is "+O.nodeName+".");if(M._parent!==O)throw new l.NotFoundError("The reference child node cannot be found under parent node. Child node is "+M.nodeName+", parent node is "+O.nodeName+".");if(_._nodeType!==u.NodeType.DocumentFragment&&_._nodeType!==u.NodeType.DocumentType&&_._nodeType!==u.NodeType.Element&&_._nodeType!==u.NodeType.Text&&_._nodeType!==u.NodeType.ProcessingInstruction&&_._nodeType!==u.NodeType.CData&&_._nodeType!==u.NodeType.Comment)throw new l.HierarchyRequestError("Only document fragment, document type, element, text, processing instruction, cdata section or comment nodes can be inserted. Node is "+_.nodeName+".");if(_._nodeType===u.NodeType.Text&&O._nodeType===u.NodeType.Document)throw new l.HierarchyRequestError("Cannot insert a text node as a child of a document node. Node is "+_.nodeName+".");if(_._nodeType===u.NodeType.DocumentType&&O._nodeType!==u.NodeType.Document)throw new l.HierarchyRequestError("A document type node can only be inserted under a document node. Parent node is "+O.nodeName+".");if(O._nodeType===u.NodeType.Document){if(_._nodeType===u.NodeType.DocumentFragment){var V=0;try{for(var X=i(_._children),re=X.next();!re.done;re=X.next()){var ue=re.value;if(ue._nodeType===u.NodeType.Element)V++;else if(ue._nodeType===u.NodeType.Text)throw new l.HierarchyRequestError("Cannot insert text a node as a child of a document node. Node is "+ue.nodeName+".")}}catch(ge){w={error:ge}}finally{try{re&&!re.done&&(x=X.return)&&x.call(X)}finally{if(w)throw w.error}}if(V>1)throw new l.HierarchyRequestError("A document node can only have one document element node. Document fragment to be inserted has "+V+" element nodes.");if(V===1){try{for(var De=i(O._children),pe=De.next();!pe.done;pe=De.next())if((A=pe.value)._nodeType===u.NodeType.Element&&A!==M)throw new l.HierarchyRequestError("The document node already has a document element node.")}catch(ge){P={error:ge}}finally{try{pe&&!pe.done&&(R=De.return)&&R.call(De)}finally{if(P)throw P.error}}for(var Te=M._nextSibling;Te;){if(Te._nodeType===u.NodeType.DocumentType)throw new l.HierarchyRequestError("Cannot insert an element node before a document type node.");Te=Te._nextSibling}}}else if(_._nodeType===u.NodeType.Element){try{for(var Fe=i(O._children),Ne=Fe.next();!Ne.done;Ne=Fe.next())if((A=Ne.value)._nodeType===u.NodeType.Element&&A!==M)throw new l.HierarchyRequestError("Document already has a document element node. Node is "+_.nodeName+".")}catch(ge){L={error:ge}}finally{try{Ne&&!Ne.done&&(H=Fe.return)&&H.call(Fe)}finally{if(L)throw L.error}}for(Te=M._nextSibling;Te;){if(Te._nodeType===u.NodeType.DocumentType)throw new l.HierarchyRequestError("Cannot insert an element node before a document type node. Node is "+_.nodeName+".");Te=Te._nextSibling}}else if(_._nodeType===u.NodeType.DocumentType){try{for(var Re=i(O._children),k=Re.next();!k.done;k=Re.next()){var A;if((A=k.value)._nodeType===u.NodeType.DocumentType&&A!==M)throw new l.HierarchyRequestError("Document already has a document type node. Node is "+_.nodeName+".")}}catch(ge){F={error:ge}}finally{try{k&&!k.done&&(U=Re.return)&&U.call(Re)}finally{if(F)throw F.error}}for(var b=M._previousSibling;b;){if(b._nodeType===u.NodeType.Element)throw new l.HierarchyRequestError("Cannot insert a document type node before an element node. Node is "+_.nodeName+".");b=b._previousSibling}}}var N=M._nextSibling;N===_&&(N=_._nextSibling);var W=M._previousSibling;I.document_adopt(_,O._nodeDocument);var j=[];M._parent!==null&&(j.push(M),y(M,M._parent,!0));var K=[];return _._nodeType===u.NodeType.DocumentFragment?K=Array.from(_._children):K.push(_),T(_,O,N,!0),c.dom.features.mutationObservers&&p.observer_queueTreeMutationRecord(O,K,j,W,N),M},r.mutation_replaceAll=function(M,_){var O,w;M!==null&&I.document_adopt(M,_._nodeDocument);var x=Array.from(_._children),P=[];M&&M._nodeType===u.NodeType.DocumentFragment?P=Array.from(M._children):M!==null&&P.push(M);try{for(var R=i(x),L=R.next();!L.done;L=R.next())y(L.value,_,!0)}catch(H){O={error:H}}finally{try{L&&!L.done&&(w=R.return)&&w.call(R)}finally{if(O)throw O.error}}M!==null&&T(M,_,null,!0),c.dom.features.mutationObservers&&p.observer_queueTreeMutationRecord(_,P,x,null,null)},r.mutation_preRemove=function(M,_){if(M._parent!==_)throw new l.NotFoundError("The child node cannot be found under parent node. Child node is "+M.nodeName+", parent node is "+_.nodeName+".");return y(M,_),M},r.mutation_remove=y},function(n,r,a){function i(o){return o==null}n.exports.isNothing=i,n.exports.isObject=function(o){return typeof o=="object"&&o!==null},n.exports.toArray=function(o){return Array.isArray(o)?o:i(o)?[]:[o]},n.exports.repeat=function(o,s){var c,l="";for(c=0;c<s;c+=1)l+=o;return l},n.exports.isNegativeZero=function(o){return o===0&&Number.NEGATIVE_INFINITY===1/o},n.exports.extend=function(o,s){var c,l,u,f;if(s)for(c=0,l=(f=Object.keys(s)).length;c<l;c+=1)o[u=f[c]]=s[u];return o}},function(n,r,a){var i=a(38),o=a(53),s=a(10);function c(u,f,v){var g=[];return u.include.forEach(function(d){v=c(d,f,v)}),u[f].forEach(function(d){v.forEach(function(m,h){m.tag===d.tag&&m.kind===d.kind&&g.push(h)}),v.push(d)}),v.filter(function(d,m){return g.indexOf(m)===-1})}function l(u){this.include=u.include||[],this.implicit=u.implicit||[],this.explicit=u.explicit||[],this.implicit.forEach(function(f){if(f.loadKind&&f.loadKind!=="scalar")throw new o("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")}),this.compiledImplicit=c(this,"implicit",[]),this.compiledExplicit=c(this,"explicit",[]),this.compiledTypeMap=function(){var f,v,g={scalar:{},sequence:{},mapping:{},fallback:{}};function d(m){g[m.kind][m.tag]=g.fallback[m.tag]=m}for(f=0,v=arguments.length;f<v;f+=1)arguments[f].forEach(d);return g}(this.compiledImplicit,this.compiledExplicit)}l.DEFAULT=null,l.create=function(){var u,f;switch(arguments.length){case 1:u=l.DEFAULT,f=arguments[0];break;case 2:u=arguments[0],f=arguments[1];break;default:throw new o("Wrong number of arguments for Schema.create function")}if(u=i.toArray(u),f=i.toArray(f),!u.every(function(v){return v instanceof l}))throw new o("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!f.every(function(v){return v instanceof s}))throw new o("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new l({include:u,explicit:f})},n.exports=l},function(n,r){n.exports=function(a,i){return{enumerable:!(1&a),configurable:!(2&a),writable:!(4&a),value:i}}},function(n,r,a){var i=a(8),o=a(42),s="".split;n.exports=i(function(){return!Object("z").propertyIsEnumerable(0)})?function(c){return o(c)=="String"?s.call(c,""):Object(c)}:Object},function(n,r){var a={}.toString;n.exports=function(i){return a.call(i).slice(8,-1)}},function(n,r,a){var i,o,s,c=a(186),l=a(11),u=a(13),f=a(21),v=a(14),g=a(57),d=a(45),m=l.WeakMap;if(c){var h=new m,C=h.get,p=h.has,S=h.set;i=function(D,E){return S.call(h,D,E),E},o=function(D){return C.call(h,D)||{}},s=function(D){return p.call(h,D)}}else{var I=g("state");d[I]=!0,i=function(D,E){return f(D,I,E),E},o=function(D){return v(D,I)?D[I]:{}},s=function(D){return v(D,I)}}n.exports={set:i,get:o,has:s,enforce:function(D){return s(D)?o(D):i(D,{})},getterFor:function(D){return function(E){var T;if(!u(E)||(T=o(E)).type!==D)throw TypeError("Incompatible receiver, "+D+" required");return T}}}},function(n,r){n.exports=!1},function(n,r){n.exports={}},function(n,r,a){var i=a(120),o=a(11),s=function(c){return typeof c=="function"?c:void 0};n.exports=function(c,l){return arguments.length<2?s(i[c])||s(o[c]):i[c]&&i[c][l]||o[c]&&o[c][l]}},function(n,r){var a=Math.ceil,i=Math.floor;n.exports=function(o){return isNaN(o=+o)?0:(o>0?i:a)(o)}},function(n,r,a){var i=a(8);n.exports=function(o,s){var c=[][o];return!!c&&i(function(){c.call(null,s||function(){throw 1},1)})}},function(n,r){n.exports={}},function(n,r,a){a(31),a(32),a(33),a(220),a(64),a(19),a(65),a(20),a(68),a(66),a(92),a(144),a(22),a(94),a(23);var i=this&&this.__values||function(d){var m=typeof Symbol=="function"&&Symbol.iterator,h=m&&d[m],C=0;if(h)return h.call(d);if(d&&typeof d.length=="number")return{next:function(){return d&&C>=d.length&&(d=void 0),{value:d&&d[C++],done:!d}}};throw new TypeError(m?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(d,m){var h=typeof Symbol=="function"&&d[Symbol.iterator];if(!h)return d;var C,p,S=h.call(d),I=[];try{for(;(m===void 0||m-- >0)&&!(C=S.next()).done;)I.push(C.value)}catch(D){p={error:D}}finally{try{C&&!C.done&&(h=S.return)&&h.call(S)}finally{if(p)throw p.error}}return I},s=this&&this.__spread||function(){for(var d=[],m=0;m<arguments.length;m++)d=d.concat(o(arguments[m]));return d};Object.defineProperty(r,"__esModule",{value:!0});var c=a(2),l=a(69),u=a(95),f=a(7),v=a(0),g=function(){function d(m){this.level=0,this._builderOptions=m}return d.prototype.declaration=function(m,h,C){},d.prototype.docType=function(m,h,C){},d.prototype.comment=function(m){},d.prototype.text=function(m){},d.prototype.instruction=function(m,h){},d.prototype.cdata=function(m){},d.prototype.openTagBegin=function(m){},d.prototype.openTagEnd=function(m,h,C){},d.prototype.closeTag=function(m){},d.prototype.attributes=function(m){var h,C;try{for(var p=i(m),S=p.next();!S.done;S=p.next()){var I=S.value;this.attribute(I[1]===null?I[2]:I[1]+":"+I[2],I[3])}}catch(D){h={error:D}}finally{try{S&&!S.done&&(C=p.return)&&C.call(p)}finally{if(h)throw h.error}}},d.prototype.attribute=function(m,h){},d.prototype.beginElement=function(m){},d.prototype.endElement=function(m){},d.prototype.serializeNode=function(m,h){var C=m._nodeDocument!==void 0&&m._nodeDocument._hasNamespaces;if(this.level=0,this.currentNode=m,C){var p=new u.NamespacePrefixMap;p.set("xml",f.namespace.XML),this._serializeNodeNS(m,null,p,{value:1},h)}else this._serializeNode(m,h)},d.prototype._serializeNodeNS=function(m,h,C,p,S){switch(this.currentNode=m,m.nodeType){case c.NodeType.Element:this._serializeElementNS(m,h,C,p,S);break;case c.NodeType.Document:this._serializeDocumentNS(m,h,C,p,S);break;case c.NodeType.Comment:this._serializeComment(m,S);break;case c.NodeType.Text:this._serializeText(m,S);break;case c.NodeType.DocumentFragment:this._serializeDocumentFragmentNS(m,h,C,p,S);break;case c.NodeType.DocumentType:this._serializeDocumentType(m,S);break;case c.NodeType.ProcessingInstruction:this._serializeProcessingInstruction(m,S);break;case c.NodeType.CData:this._serializeCData(m,S);break;default:throw new Error("Unknown node type: "+m.nodeType)}},d.prototype._serializeNode=function(m,h){switch(this.currentNode=m,m.nodeType){case c.NodeType.Element:this._serializeElement(m,h);break;case c.NodeType.Document:this._serializeDocument(m,h);break;case c.NodeType.Comment:this._serializeComment(m,h);break;case c.NodeType.Text:this._serializeText(m,h);break;case c.NodeType.DocumentFragment:this._serializeDocumentFragment(m,h);break;case c.NodeType.DocumentType:this._serializeDocumentType(m,h);break;case c.NodeType.ProcessingInstruction:this._serializeProcessingInstruction(m,h);break;case c.NodeType.CData:this._serializeCData(m,h);break;default:throw new Error("Unknown node type: "+m.nodeType)}},d.prototype._serializeElementNS=function(m,h,C,p,S){var I,D,E=[];if(S&&(m.localName.indexOf(":")!==-1||!v.xml_isName(m.localName)))throw new Error("Node local name contains invalid characters (well-formed required).");var T="",y=!1,M=!1,_=C.copy(),O={},w=this._recordNamespaceInformation(m,_,O),x=h,P=m.namespaceURI;if(x===P)w!==null&&(M=!0),T=P===f.namespace.XML?"xml:"+m.localName:m.localName,this.beginElement(T),this.openTagBegin(T);else{var R=m.prefix,L=null;if(R===null&&P===w||(L=_.get(R,P)),R==="xmlns"){if(S)throw new Error("An element cannot have the 'xmlns' prefix (well-formed required).");L=R}L!==null?(T=L+":"+m.localName,w!==null&&w!==f.namespace.XML&&(x=w||null),this.beginElement(T),this.openTagBegin(T)):R!==null?(R in O&&(R=this._generatePrefix(P,_,p)),_.set(R,P),T+=R+":"+m.localName,this.beginElement(T),this.openTagBegin(T),E.push([null,"xmlns",R,this._serializeAttributeValue(P,S)]),w!==null&&(x=w||null)):w===null||w!==null&&w!==P?(M=!0,T+=m.localName,x=P,this.beginElement(T),this.openTagBegin(T),E.push([null,null,"xmlns",this._serializeAttributeValue(P,S)])):(T+=m.localName,x=P,this.beginElement(T),this.openTagBegin(T))}E.push.apply(E,s(this._serializeAttributesNS(m,_,p,O,M,S))),this.attributes(E);var H=P===f.namespace.HTML;if(H&&m.childNodes.length===0&&d._VoidElementNames.has(m.localName)?(this.openTagEnd(T,!0,!0),this.endElement(T),y=!0):H||m.childNodes.length!==0?this.openTagEnd(T,!1,!1):(this.openTagEnd(T,!0,!1),this.endElement(T),y=!0),!y){if(!(H&&m.localName==="template"))try{for(var F=i(m.childNodes),U=F.next();!U.done;U=F.next()){var V=U.value;this.level++,this._serializeNodeNS(V,x,_,p,S),this.level--}}catch(X){I={error:X}}finally{try{U&&!U.done&&(D=F.return)&&D.call(F)}finally{if(I)throw I.error}}this.closeTag(T),this.endElement(T)}},d.prototype._serializeElement=function(m,h){var C,p;if(h&&(m.localName.indexOf(":")!==-1||!v.xml_isName(m.localName)))throw new Error("Node local name contains invalid characters (well-formed required).");var S=!1,I=m.localName;this.beginElement(I),this.openTagBegin(I);var D=this._serializeAttributes(m,h);if(this.attributes(D),m.hasChildNodes()?this.openTagEnd(I,!1,!1):(this.openTagEnd(I,!0,!1),this.endElement(I),S=!0),!S){try{for(var E=i(m._children),T=E.next();!T.done;T=E.next()){var y=T.value;this.level++,this._serializeNode(y,h),this.level--}}catch(M){C={error:M}}finally{try{T&&!T.done&&(p=E.return)&&p.call(E)}finally{if(C)throw C.error}}this.closeTag(I),this.endElement(I)}},d.prototype._serializeDocumentNS=function(m,h,C,p,S){var I,D;if(S&&m.documentElement===null)throw new Error("Missing document element (well-formed required).");try{for(var E=i(m.childNodes),T=E.next();!T.done;T=E.next()){var y=T.value;this._serializeNodeNS(y,h,C,p,S)}}catch(M){I={error:M}}finally{try{T&&!T.done&&(D=E.return)&&D.call(E)}finally{if(I)throw I.error}}},d.prototype._serializeDocument=function(m,h){var C,p;if(h&&m.documentElement===null)throw new Error("Missing document element (well-formed required).");try{for(var S=i(m._children),I=S.next();!I.done;I=S.next()){var D=I.value;this._serializeNode(D,h)}}catch(E){C={error:E}}finally{try{I&&!I.done&&(p=S.return)&&p.call(S)}finally{if(C)throw C.error}}},d.prototype._serializeComment=function(m,h){if(h&&(!v.xml_isLegalChar(m.data)||m.data.indexOf("--")!==-1||m.data.endsWith("-")))throw new Error("Comment data contains invalid characters (well-formed required).");this.comment(m.data)},d.prototype._serializeText=function(m,h){if(h&&!v.xml_isLegalChar(m.data))throw new Error("Text data contains invalid characters (well-formed required).");var C=m.data.replace(/(?!&([^&;]*);)&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");this.text(C)},d.prototype._serializeDocumentFragmentNS=function(m,h,C,p,S){var I,D;try{for(var E=i(m.childNodes),T=E.next();!T.done;T=E.next()){var y=T.value;this._serializeNodeNS(y,h,C,p,S)}}catch(M){I={error:M}}finally{try{T&&!T.done&&(D=E.return)&&D.call(E)}finally{if(I)throw I.error}}},d.prototype._serializeDocumentFragment=function(m,h){var C,p;try{for(var S=i(m._children),I=S.next();!I.done;I=S.next()){var D=I.value;this._serializeNode(D,h)}}catch(E){C={error:E}}finally{try{I&&!I.done&&(p=S.return)&&p.call(S)}finally{if(C)throw C.error}}},d.prototype._serializeDocumentType=function(m,h){if(h&&!v.xml_isPubidChar(m.publicId))throw new Error("DocType public identifier does not match PubidChar construct (well-formed required).");if(h&&(!v.xml_isLegalChar(m.systemId)||m.systemId.indexOf('"')!==-1&&m.systemId.indexOf("'")!==-1))throw new Error("DocType system identifier contains invalid characters (well-formed required).");this.docType(m.name,m.publicId,m.systemId)},d.prototype._serializeProcessingInstruction=function(m,h){if(h&&(m.target.indexOf(":")!==-1||/^xml$/i.test(m.target)))throw new Error("Processing instruction target contains invalid characters (well-formed required).");if(h&&(!v.xml_isLegalChar(m.data)||m.data.indexOf("?>")!==-1))throw new Error("Processing instruction data contains invalid characters (well-formed required).");this.instruction(m.target,m.data)},d.prototype._serializeCData=function(m,h){if(h&&m.data.indexOf("]]>")!==-1)throw new Error("CDATA contains invalid characters (well-formed required).");this.cdata(m.data)},d.prototype._serializeAttributesNS=function(m,h,C,p,S,I){var D,E,T=[],y=I?new l.LocalNameSet:void 0;try{for(var M=i(m.attributes),_=M.next();!_.done;_=M.next()){var O=_.value;if(I||S||O.namespaceURI!==null){if(I&&y&&y.has(O.namespaceURI,O.localName))throw new Error("Element contains duplicate attributes (well-formed required).");I&&y&&y.set(O.namespaceURI,O.localName);var w=O.namespaceURI,x=null;if(w!==null)if(x=h.get(O.prefix,w),w===f.namespace.XMLNS){if(O.value===f.namespace.XML||O.prefix===null&&S||O.prefix!==null&&(!(O.localName in p)||p[O.localName]!==O.value)&&h.has(O.localName,O.value))continue;if(I&&O.value===f.namespace.XMLNS)throw new Error("XMLNS namespace is reserved (well-formed required).");if(I&&O.value==="")throw new Error("Namespace prefix declarations cannot be used to undeclare a namespace (well-formed required).");O.prefix==="xmlns"&&(x="xmlns")}else x===null&&(x=O.prefix===null||h.hasPrefix(O.prefix)&&!h.has(O.prefix,w)?this._generatePrefix(w,h,C):O.prefix,T.push([null,"xmlns",x,this._serializeAttributeValue(w,I)]));if(I&&(O.localName.indexOf(":")!==-1||!v.xml_isName(O.localName)||O.localName==="xmlns"&&w===null))throw new Error("Attribute local name contains invalid characters (well-formed required).");T.push([w,x,O.localName,this._serializeAttributeValue(O.value,I)])}else T.push([null,null,O.localName,this._serializeAttributeValue(O.value,I)])}}catch(P){D={error:P}}finally{try{_&&!_.done&&(E=M.return)&&E.call(M)}finally{if(D)throw D.error}}return T},d.prototype._serializeAttributes=function(m,h){var C,p,S=[],I=h?{}:void 0;try{for(var D=i(m.attributes),E=D.next();!E.done;E=D.next()){var T=E.value;if(h){if(h&&I&&T.localName in I)throw new Error("Element contains duplicate attributes (well-formed required).");if(h&&I&&(I[T.localName]=!0),h&&(T.localName.indexOf(":")!==-1||!v.xml_isName(T.localName)))throw new Error("Attribute local name contains invalid characters (well-formed required).");S.push([null,null,T.localName,this._serializeAttributeValue(T.value,h)])}else S.push([null,null,T.localName,this._serializeAttributeValue(T.value,h)])}}catch(y){C={error:y}}finally{try{E&&!E.done&&(p=D.return)&&p.call(D)}finally{if(C)throw C.error}}return S},d.prototype._recordNamespaceInformation=function(m,h,C){var p,S,I=null;try{for(var D=i(m.attributes),E=D.next();!E.done;E=D.next()){var T=E.value,y=T.namespaceURI,M=T.prefix;if(y===f.namespace.XMLNS){if(M===null){I=T.value;continue}var _=T.localName,O=T.value;if(O===f.namespace.XML||(O===""&&(O=null),h.has(_,O)))continue;h.set(_,O),C[_]=O||""}}}catch(w){p={error:w}}finally{try{E&&!E.done&&(S=D.return)&&S.call(D)}finally{if(p)throw p.error}}return I},d.prototype._generatePrefix=function(m,h,C){var p="ns"+C.value.toString();return C.value++,h.set(p,m),p},d.prototype._serializeAttributeValue=function(m,h){if(h&&m!==null&&!v.xml_isLegalChar(m))throw new Error("Invalid characters in attribute value.");return m===null?"":m.replace(/(?!&([^&;]*);)&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},d._VoidElementNames=new Set(["area","base","basefont","bgsound","br","col","embed","frame","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]),d}();r.BaseWriter=g},function(n,r,a){var i=this&&this.__values||function(h){var C=typeof Symbol=="function"&&Symbol.iterator,p=C&&h[C],S=0;if(p)return p.call(h);if(h&&typeof h.length=="number")return{next:function(){return h&&S>=h.length&&(h=void 0),{value:h&&h[S++],done:!h}}};throw new TypeError(C?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(h,C){var p=typeof Symbol=="function"&&h[Symbol.iterator];if(!p)return h;var S,I,D=p.call(h),E=[];try{for(;(C===void 0||C-- >0)&&!(S=D.next()).done;)E.push(S.value)}catch(T){I={error:T}}finally{try{S&&!S.done&&(p=D.return)&&p.call(D)}finally{if(I)throw I.error}}return E};Object.defineProperty(r,"__esModule",{value:!0});var s=a(6),c=a(3),l=a(7),u=a(29),f=a(17),v=a(97);function g(){var h=s.dom.window;h._mutationObserverMicrotaskQueued||(h._mutationObserverMicrotaskQueued=!0,Promise.resolve().then(function(){d()}))}function d(){var h,C,p,S,I=s.dom.window;I._mutationObserverMicrotaskQueued=!1;var D=l.set.clone(I._mutationObservers),E=l.set.clone(I._signalSlots);l.set.empty(I._signalSlots);var T=function(x){var P=l.list.clone(x._recordQueue);l.list.empty(x._recordQueue);for(var R=0;R<x._nodeList.length;R++){var L=x._nodeList[R];l.list.remove(L._registeredObserverList,function(H){return c.Guard.isTransientRegisteredObserver(H)&&H.observer===x})}if(!l.list.isEmpty(P))try{x._callback.call(x,P,x)}catch{}};try{for(var y=i(D),M=y.next();!M.done;M=y.next())T(M.value)}catch(x){h={error:x}}finally{try{M&&!M.done&&(C=y.return)&&C.call(y)}finally{if(h)throw h.error}}if(s.dom.features.slots)try{for(var _=i(E),O=_.next();!O.done;O=_.next()){var w=O.value;v.event_fireAnEvent("slotchange",w,void 0,{bubbles:!0})}}catch(x){p={error:x}}finally{try{O&&!O.done&&(S=_.return)&&S.call(_)}finally{if(p)throw p.error}}}function m(h,C,p,S,I,D,E,T,y){for(var M,_,O=new Map,w=f.tree_getFirstAncestorNode(C,!0);w!==null;){for(var x=0;x<w._registeredObserverList.length;x++){var P=w._registeredObserverList[x],R=P.options;if((w===C||R.subtree)&&(h!=="attributes"||R.attributes)&&(h!=="attributes"||!R.attributeFilter||R.attributeFilter.indexOf(p||"")&&S===null)&&(h!=="characterData"||R.characterData)&&(h!=="childList"||R.childList)){var L=P.observer;O.has(L)||O.set(L,null),(h==="attributes"&&R.attributeOldValue||h==="characterData"&&R.characterDataOldValue)&&O.set(L,I)}}w=f.tree_getNextAncestorNode(C,w,!0)}try{for(var H=i(O),F=H.next();!F.done;F=H.next()){var U=o(F.value,2),V=U[0],X=U[1],re=u.create_mutationRecord(h,C,u.create_nodeListStatic(C,D),u.create_nodeListStatic(C,E),T,y,p,S,X);V._recordQueue.push(re)}}catch(ue){M={error:ue}}finally{try{F&&!F.done&&(_=H.return)&&_.call(H)}finally{if(M)throw M.error}}g()}r.observer_queueAMutationObserverMicrotask=g,r.observer_notifyMutationObservers=d,r.observer_queueMutationRecord=m,r.observer_queueTreeMutationRecord=function(h,C,p,S,I){m("childList",h,null,null,null,C,p,S,I)},r.observer_queueAttributeMutationRecord=function(h,C,p,S){m("attributes",h,C,p,S,[],[],null,null)}},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(6),o=a(7),s=a(3),c=a(9),l=a(29),u=a(73),f=a(51),v=a(30),g=a(37),d=a(106);function m(D,E,T){i.dom.features.mutationObservers&&f.observer_queueAttributeMutationRecord(E,D._localName,D._namespace,D._value),i.dom.features.customElements&&s.Guard.isCustomElementNode(E)&&u.customElement_enqueueACustomElementCallbackReaction(E,"attributeChangedCallback",[D._localName,D._value,T,D._namespace]),i.dom.features.steps&&v.dom_runAttributeChangeSteps(E,D._localName,D._value,T,D._namespace),D._value=T}function h(D,E){i.dom.features.mutationObservers&&f.observer_queueAttributeMutationRecord(E,D._localName,D._namespace,null),i.dom.features.customElements&&s.Guard.isCustomElementNode(E)&&u.customElement_enqueueACustomElementCallbackReaction(E,"attributeChangedCallback",[D._localName,null,D._value,D._namespace]),i.dom.features.steps&&v.dom_runAttributeChangeSteps(E,D._localName,null,D._value,D._namespace),E._attributeList._asArray().push(D),D._element=E,E._nodeDocument._hasNamespaces||D._namespace===null&&D._namespacePrefix===null&&D._localName!=="xmlns"||(E._nodeDocument._hasNamespaces=!0)}function C(D,E){i.dom.features.mutationObservers&&f.observer_queueAttributeMutationRecord(E,D._localName,D._namespace,D._value),i.dom.features.customElements&&s.Guard.isCustomElementNode(E)&&u.customElement_enqueueACustomElementCallbackReaction(E,"attributeChangedCallback",[D._localName,D._value,null,D._namespace]),i.dom.features.steps&&v.dom_runAttributeChangeSteps(E,D._localName,D._value,null,D._namespace);var T=E._attributeList._asArray().indexOf(D);E._attributeList._asArray().splice(T,1),D._element=null}function p(D,E,T){i.dom.features.mutationObservers&&f.observer_queueAttributeMutationRecord(T,D._localName,D._namespace,D._value),i.dom.features.customElements&&s.Guard.isCustomElementNode(T)&&u.customElement_enqueueACustomElementCallbackReaction(T,"attributeChangedCallback",[D._localName,D._value,E._value,D._namespace]),i.dom.features.steps&&v.dom_runAttributeChangeSteps(T,D._localName,D._value,E._value,D._namespace);var y=T._attributeList._asArray().indexOf(D);y!==-1&&(T._attributeList._asArray()[y]=E),D._element=null,E._element=T,T._nodeDocument._hasNamespaces||E._namespace===null&&E._namespacePrefix===null&&E._localName!=="xmlns"||(T._nodeDocument._hasNamespaces=!0)}function S(D,E){return E._namespace===o.namespace.HTML&&E._nodeDocument._type==="html"&&(D=D.toLowerCase()),E._attributeList._asArray().find(function(T){return T._qualifiedName===D})||null}function I(D,E,T){var y=D||null;return T._attributeList._asArray().find(function(M){return M._namespace===y&&M._localName===E})||null}r.element_has=function(D,E){return E._attributeList._asArray().indexOf(D)!==-1},r.element_change=m,r.element_append=h,r.element_remove=C,r.element_replace=p,r.element_getAnAttributeByName=S,r.element_getAnAttributeByNamespaceAndLocalName=I,r.element_getAnAttributeValue=function(D,E,T){T===void 0&&(T="");var y=I(T,E,D);return y===null?"":y._value},r.element_setAnAttribute=function(D,E){if(D._element!==null&&D._element!==E)throw new c.InUseAttributeError("This attribute already exists in the document: "+D._qualifiedName+" as a child of "+D._element._qualifiedName+".");var T=I(D._namespace||"",D._localName,E);return T===D?D:(T!==null?p(T,D,E):h(D,E),T)},r.element_setAnAttributeValue=function(D,E,T,y,M){y===void 0&&(y=null),M===void 0&&(M=null);var _=I(M||"",E,D);if(_===null){var O=l.create_attr(D._nodeDocument,E);return O._namespace=M,O._namespacePrefix=y,O._value=T,void h(O,D)}m(_,D,T)},r.element_removeAnAttributeByName=function(D,E){var T=S(D,E);return T!==null&&C(T,E),T},r.element_removeAnAttributeByNamespaceAndLocalName=function(D,E,T){var y=I(D,E,T);return y!==null&&C(y,T),y},r.element_createAnElement=function(D,E,T,y,M,_){y===void 0&&(y=null),M===void 0&&(M=null),_===void 0&&(_=!1);var O=null;if(!i.dom.features.customElements)return(O=l.create_element(D,E,T,y))._customElementState="uncustomized",O._customElementDefinition=null,O._is=M,O;var w=u.customElement_lookUpACustomElementDefinition(D,T,E,M);if(w!==null&&w.name!==w.localName)(O=new(d.document_elementInterface(E,o.namespace.HTML)))._localName=E,O._namespace=o.namespace.HTML,O._namespacePrefix=y,O._customElementState="undefined",O._customElementDefinition=null,O._is=M,O._nodeDocument=D,_?u.customElement_upgrade(w,O):u.customElement_enqueueACustomElementUpgradeReaction(O,w);else if(w!==null)if(_)try{var x=new w.constructor;if(console.assert(x._customElementState!==void 0),console.assert(x._customElementDefinition!==void 0),console.assert(x._namespace===o.namespace.HTML),x._attributeList.length!==0)throw new c.NotSupportedError("Custom element already has attributes.");if(x._children.size!==0)throw new c.NotSupportedError("Custom element already has child nodes.");if(x._parent!==null)throw new c.NotSupportedError("Custom element already has a parent node.");if(x._nodeDocument!==D)throw new c.NotSupportedError("Custom element is already in a document.");if(x._localName!==E)throw new c.NotSupportedError("Custom element has a different local name.");x._namespacePrefix=y,x._is=null}catch{(O=l.create_htmlUnknownElement(D,E,o.namespace.HTML,y))._customElementState="failed",O._customElementDefinition=null,O._is=null}else(O=l.create_htmlElement(D,E,o.namespace.HTML,y))._customElementState="undefined",O._customElementDefinition=null,O._is=null,u.customElement_enqueueACustomElementUpgradeReaction(O,w);else(O=new(d.document_elementInterface(E,T)))._localName=E,O._namespace=T,O._namespacePrefix=y,O._customElementState="uncustomized",O._customElementDefinition=null,O._is=M,O._nodeDocument=D,T!==o.namespace.HTML||M===null&&!u.customElement_isValidCustomElementName(E)||(O._customElementState="undefined");if(O===null)throw new Error("Unable to create element.");return O},r.element_insertAdjacent=function(D,E,T){switch(E.toLowerCase()){case"beforebegin":return D._parent===null?null:g.mutation_preInsert(T,D._parent,D);case"afterbegin":return g.mutation_preInsert(T,D,D._firstChild);case"beforeend":return g.mutation_preInsert(T,D,null);case"afterend":return D._parent===null?null:g.mutation_preInsert(T,D._parent,D._nextSibling);default:throw new c.SyntaxError(`Invalid 'where' argument. "beforebegin", "afterbegin", "beforeend" or "afterend" expected`)}}},function(n,r,a){function i(o,s){Error.call(this),this.name="YAMLException",this.reason=o,this.mark=s,this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():""),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}i.prototype=Object.create(Error.prototype),i.prototype.constructor=i,i.prototype.toString=function(o){var s=this.name+": ";return s+=this.reason||"(unknown reason)",!o&&this.mark&&(s+=" "+this.mark.toString()),s},n.exports=i},function(n,r,a){var i=a(39);n.exports=new i({include:[a(181)],implicit:[a(293),a(294)],explicit:[a(295),a(296),a(297),a(298)]})},function(n,r,a){var i=a(16),o=a(79),s=a(40),c=a(24),l=a(56),u=a(14),f=a(115),v=Object.getOwnPropertyDescriptor;r.f=i?v:function(g,d){if(g=c(g),d=l(d,!0),f)try{return v(g,d)}catch{}if(u(g,d))return s(!o.f.call(g,d),g[d])}},function(n,r,a){var i=a(13);n.exports=function(o,s){if(!i(o))return o;var c,l;if(s&&typeof(c=o.toString)=="function"&&!i(l=c.call(o))||typeof(c=o.valueOf)=="function"&&!i(l=c.call(o))||!s&&typeof(c=o.toString)=="function"&&!i(l=c.call(o)))return l;throw TypeError("Can't convert object to primitive value")}},function(n,r,a){var i=a(81),o=a(58),s=i("keys");n.exports=function(c){return s[c]||(s[c]=o(c))}},function(n,r){var a=0,i=Math.random();n.exports=function(o){return"Symbol("+String(o===void 0?"":o)+")_"+(++a+i).toString(36)}},function(n,r,a){var i=a(42);n.exports=Array.isArray||function(o){return i(o)=="Array"}},function(n,r,a){var i,o=a(18),s=a(188),c=a(84),l=a(45),u=a(189),f=a(116),v=a(57),g=v("IE_PROTO"),d=function(){},m=function(C){return"<script>"+C+"<\/script>"},h=function(){try{i=document.domain&&new ActiveXObject("htmlfile")}catch{}var C,p;h=i?function(I){I.write(m("")),I.close();var D=I.parentWindow.Object;return I=null,D}(i):((p=f("iframe")).style.display="none",u.appendChild(p),p.src="javascript:",(C=p.contentWindow.document).open(),C.write(m("document.F=Object")),C.close(),C.F);for(var S=c.length;S--;)delete h.prototype[c[S]];return h()};l[g]=!0,n.exports=Object.create||function(C,p){var S;return C!==null?(d.prototype=o(C),S=new d,d.prototype=null,S[g]=C):S=h(),p===void 0?S:s(S,p)}},function(n,r,a){var i=a(121),o=a(84);n.exports=Object.keys||function(s){return i(s,o)}},function(n,r,a){var i=a(15).f,o=a(14),s=a(5)("toStringTag");n.exports=function(c,l,u){c&&!o(c=u?c:c.prototype,s)&&i(c,s,{configurable:!0,value:l})}},function(n,r,a){var i=a(8),o=a(5),s=a(129),c=o("species");n.exports=function(l){return s>=51||!i(function(){var u=[];return(u.constructor={})[c]=function(){return{foo:1}},u[l](Boolean).foo!==1})}},function(n,r,a){var i=a(4),o=a(122).indexOf,s=a(48),c=a(28),l=[].indexOf,u=!!l&&1/[1].indexOf(1,-0)<0,f=s("indexOf"),v=c("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:u||!f||!v},{indexOf:function(g){return u?l.apply(this,arguments)||0:o(this,g,arguments.length>1?arguments[1]:void 0)}})},function(n,r,a){var i=a(16),o=a(15).f,s=Function.prototype,c=s.toString,l=/^\s*function ([^ (]*)/;i&&!("name"in s)&&o(s,"name",{configurable:!0,get:function(){try{return c.call(this).match(l)[1]}catch{return""}}})},function(n,r,a){var i=a(25),o=a(18),s=a(8),c=a(136),l=RegExp.prototype,u=l.toString,f=s(function(){return u.call({source:"a",flags:"b"})!="/a/b"}),v=u.name!="toString";(f||v)&&i(RegExp.prototype,"toString",function(){var g=o(this),d=String(g.source),m=g.flags;return"/"+d+"/"+String(m===void 0&&g instanceof RegExp&&!("flags"in l)?c.call(g):m)},{unsafe:!0})},function(n,r,a){a(31),a(32),a(33),a(19),a(138),a(20),a(66),a(22),a(23);var i,o=this&&this.__extends||(i=function(f,v){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,d){g.__proto__=d}||function(g,d){for(var m in d)d.hasOwnProperty(m)&&(g[m]=d[m])})(f,v)},function(f,v){function g(){this.constructor=f}i(f,v),f.prototype=v===null?Object.create(v):(g.prototype=v.prototype,new g)}),s=this&&this.__values||function(f){var v=typeof Symbol=="function"&&Symbol.iterator,g=v&&f[v],d=0;if(g)return g.call(f);if(f&&typeof f.length=="number")return{next:function(){return f&&d>=f.length&&(f=void 0),{value:f&&f[d++],done:!f}}};throw new TypeError(v?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var c=a(1),l=a(2),u=function(f){function v(g,d){var m=f.call(this,g)||this;return m._writerOptions=c.applyDefaults(d,{format:"object",wellFormed:!1,group:!1,verbose:!1}),m}return o(v,f),v.prototype.serialize=function(g){return this._currentList=[],this._currentIndex=0,this._listRegister=[this._currentList],this.serializeNode(g,this._writerOptions.wellFormed),this._process(this._currentList,this._writerOptions)},v.prototype._process=function(g,d){var m,h,C,p,S,I,D;if(g.length===0)return{};for(var E={},T=!1,y=0,M=0,_=0,O=0,w=0;w<g.length;w++){var x=g[w];switch(Re=Object.keys(x)[0]){case"@":continue;case"#":y++;break;case"!":M++;break;case"?":_++;break;case"$":O++;break;default:E[Re]?T=!0:E[Re]=!0}}var P=this._getAttrKey(),R=this._getNodeKey(l.NodeType.Text),L=this._getNodeKey(l.NodeType.Comment),H=this._getNodeKey(l.NodeType.ProcessingInstruction),F=this._getNodeKey(l.NodeType.CData);if(y===1&&g.length===1&&c.isString(g[0]["#"]))return g[0]["#"];if(T){var U={};for(w=0;w<g.length;w++)if(x=g[w],(Re=Object.keys(x)[0])==="@"){var V=x["@"];(k=Object.keys(V)).length===1?U[P+k[0]]=V[k[0]]:U[P]=x["@"]}var X=[];for(w=0;w<g.length;w++)switch(x=g[w],Re=Object.keys(x)[0]){case"@":break;case"#":X.push(((m={})[R]=x["#"],m));break;case"!":X.push(((h={})[L]=x["!"],h));break;case"?":X.push(((C={})[H]=x["?"],C));break;case"$":X.push(((p={})[F]=x.$,p));break;default:if((b=x)[Re].length!==0&&c.isArray(b[Re][0])){for(var re=[],ue=b[Re],De=0;De<ue.length;De++)re.push(this._process(ue[De],d));X.push(((S={})[Re]=re,S))}else d.verbose?X.push(((I={})[Re]=[this._process(b[Re],d)],I)):X.push(((D={})[Re]=this._process(b[Re],d),D))}return U[R]=X,U}var pe=1,Te=1,Fe=1,Ne=1;for(U={},w=0;w<g.length;w++){var Re;switch(x=g[w],Re=Object.keys(x)[0]){case"@":V=x["@"];var k=Object.keys(V);if(d.group&&k.length!==1)U[P]=V;else for(var A in V)U[P+A]=V[A];break;case"#":pe=this._processSpecItem(x["#"],U,d.group,R,y,pe);break;case"!":Te=this._processSpecItem(x["!"],U,d.group,L,M,Te);break;case"?":Fe=this._processSpecItem(x["?"],U,d.group,H,_,Fe);break;case"$":Ne=this._processSpecItem(x.$,U,d.group,F,O,Ne);break;default:var b;if((b=x)[Re].length!==0&&c.isArray(b[Re][0])){re=[],ue=b[Re];for(var N=0;N<ue.length;N++)re.push(this._process(ue[N],d));U[Re]=re}else d.verbose?U[Re]=[this._process(b[Re],d)]:U[Re]=this._process(b[Re],d)}}return U},v.prototype._processSpecItem=function(g,d,m,h,C,p){var S,I;if(!m&&c.isArray(g)&&C+g.length>2)try{for(var D=s(g),E=D.next();!E.done;E=D.next()){var T=E.value;d[h+(p++).toString()]=T}}catch(y){S={error:y}}finally{try{E&&!E.done&&(I=D.return)&&I.call(D)}finally{if(S)throw S.error}}else d[C>1?h+(p++).toString():h]=g;return p},v.prototype.beginElement=function(g){var d,m,h=[];if(this._currentList.length===0)this._currentList.push(((d={})[g]=h,d));else{var C=this._currentList[this._currentList.length-1];this._isElementNode(C,g)?C[g].length!==0&&c.isArray(C[g][0])?C[g].push(h):C[g]=[C[g],h]:this._currentList.push(((m={})[g]=h,m))}this._currentIndex++,this._listRegister.length>this._currentIndex?this._listRegister[this._currentIndex]=h:this._listRegister.push(h),this._currentList=h},v.prototype.endElement=function(){this._currentList=this._listRegister[--this._currentIndex]},v.prototype.attribute=function(g,d){var m,h;if(this._currentList.length===0)this._currentList.push({"@":(m={},m[g]=d,m)});else{var C=this._currentList[this._currentList.length-1];this._isAttrNode(C)?C["@"][g]=d:this._currentList.push({"@":(h={},h[g]=d,h)})}},v.prototype.comment=function(g){if(this._currentList.length===0)this._currentList.push({"!":g});else{var d=this._currentList[this._currentList.length-1];this._isCommentNode(d)?c.isArray(d["!"])?d["!"].push(g):d["!"]=[d["!"],g]:this._currentList.push({"!":g})}},v.prototype.text=function(g){if(this._currentList.length===0)this._currentList.push({"#":g});else{var d=this._currentList[this._currentList.length-1];this._isTextNode(d)?c.isArray(d["#"])?d["#"].push(g):d["#"]=[d["#"],g]:this._currentList.push({"#":g})}},v.prototype.instruction=function(g,d){var m=d===""?g:g+" "+d;if(this._currentList.length===0)this._currentList.push({"?":m});else{var h=this._currentList[this._currentList.length-1];this._isInstructionNode(h)?c.isArray(h["?"])?h["?"].push(m):h["?"]=[h["?"],m]:this._currentList.push({"?":m})}},v.prototype.cdata=function(g){if(this._currentList.length===0)this._currentList.push({$:g});else{var d=this._currentList[this._currentList.length-1];this._isCDATANode(d)?c.isArray(d.$)?d.$.push(g):d.$=[d.$,g]:this._currentList.push({$:g})}},v.prototype._isAttrNode=function(g){return"@"in g},v.prototype._isTextNode=function(g){return"#"in g},v.prototype._isCommentNode=function(g){return"!"in g},v.prototype._isInstructionNode=function(g){return"?"in g},v.prototype._isCDATANode=function(g){return"$"in g},v.prototype._isElementNode=function(g,d){return d in g},v.prototype._getAttrKey=function(){return this._builderOptions.convert.att},v.prototype._getNodeKey=function(g){switch(g){case l.NodeType.Comment:return this._builderOptions.convert.comment;case l.NodeType.Text:return this._builderOptions.convert.text;case l.NodeType.ProcessingInstruction:return this._builderOptions.convert.ins;case l.NodeType.CData:return this._builderOptions.convert.cdata;default:throw new Error("Invalid node type.")}},v}(a(50).BaseWriter);r.ObjectWriter=u},function(n,r,a){var i=a(4),o=a(93);i({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function o(){this._items={},this._nullItems={}}return o.prototype.set=function(s,c){s===null?this._nullItems[c]=!0:(this._items[s]||(this._items[s]={}),this._items[s][c]=!0)},o.prototype.has=function(s,c){return s===null?this._nullItems[c]===!0:!!this._items[s]&&this._items[s][c]===!0},o}();r.LocalNameSet=i},function(n,r,a){var i=this&&this.__read||function(u,f){var v=typeof Symbol=="function"&&u[Symbol.iterator];if(!v)return u;var g,d,m=v.call(u),h=[];try{for(;(f===void 0||f-- >0)&&!(g=m.next()).done;)h.push(g.value)}catch(C){d={error:C}}finally{try{g&&!g.done&&(v=m.return)&&v.call(m)}finally{if(d)throw d.error}}return h};Object.defineProperty(r,"__esModule",{value:!0});var o=a(9),s=a(3),c=a(0),l=function(){function u(){}return Object.defineProperty(u.prototype,"_eventListenerList",{get:function(){return this.__eventListenerList||(this.__eventListenerList=[])},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"_eventHandlerMap",{get:function(){return this.__eventHandlerMap||(this.__eventHandlerMap={})},enumerable:!0,configurable:!0}),u.prototype.addEventListener=function(f,v,g){g===void 0&&(g={passive:!1,once:!1,capture:!1});var d,m=i(c.eventTarget_flattenMore(g),3),h=m[0],C=m[1],p=m[2];v&&(d=s.Guard.isEventListener(v)?v:{handleEvent:v},c.eventTarget_addEventListener(this,{type:f,callback:d,capture:h,passive:C,once:p,removed:!1}))},u.prototype.removeEventListener=function(f,v,g){g===void 0&&(g={capture:!1});var d=c.eventTarget_flatten(g);if(v)for(var m=0;m<this._eventListenerList.length;m++){var h=this._eventListenerList[m];if(h.type===f&&h.capture===d){if(s.Guard.isEventListener(v)&&h.callback===v){c.eventTarget_removeEventListener(this,h,m);break}if(v&&h.callback.handleEvent===v){c.eventTarget_removeEventListener(this,h,m);break}}}},u.prototype.dispatchEvent=function(f){if(f._dispatchFlag||!f._initializedFlag)throw new o.InvalidStateError;return f._isTrusted=!1,c.event_dispatch(f,this)},u.prototype._getTheParent=function(f){return null},u}();r.EventTargetImpl=l},function(n,r,a){var i,o=this&&this.__extends||(i=function(u,f){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,g){v.__proto__=g}||function(v,g){for(var d in g)g.hasOwnProperty(d)&&(v[d]=g[d])})(u,f)},function(u,f){function v(){this.constructor=u}i(u,f),u.prototype=f===null?Object.create(f):(v.prototype=f.prototype,new v)});Object.defineProperty(r,"__esModule",{value:!0});var s=a(34),c=a(0),l=function(u){function f(v){var g=u.call(this)||this;return g._data=v,g}return o(f,u),Object.defineProperty(f.prototype,"data",{get:function(){return this._data},set:function(v){c.characterData_replaceData(this,0,this._data.length,v)},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"length",{get:function(){return this._data.length},enumerable:!0,configurable:!0}),f.prototype.substringData=function(v,g){return c.characterData_substringData(this,v,g)},f.prototype.appendData=function(v){return c.characterData_replaceData(this,this._data.length,0,v)},f.prototype.insertData=function(v,g){c.characterData_replaceData(this,v,0,g)},f.prototype.deleteData=function(v,g){c.characterData_replaceData(this,v,g,"")},f.prototype.replaceData=function(v,g,d){c.characterData_replaceData(this,v,g,d)},Object.defineProperty(f.prototype,"previousElementSibling",{get:function(){throw new Error("Mixin: NonDocumentTypeChildNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"nextElementSibling",{get:function(){throw new Error("Mixin: NonDocumentTypeChildNode not implemented.")},enumerable:!0,configurable:!0}),f.prototype.before=function(){for(var v=[],g=0;g<arguments.length;g++)v[g]=arguments[g];throw new Error("Mixin: ChildNode not implemented.")},f.prototype.after=function(){for(var v=[],g=0;g<arguments.length;g++)v[g]=arguments[g];throw new Error("Mixin: ChildNode not implemented.")},f.prototype.replaceWith=function(){for(var v=[],g=0;g<arguments.length;g++)v[g]=arguments[g];throw new Error("Mixin: ChildNode not implemented.")},f.prototype.remove=function(){throw new Error("Mixin: ChildNode not implemented.")},f}(s.NodeImpl);r.CharacterDataImpl=l},function(n,r,a){var i=this&&this.__values||function(C){var p=typeof Symbol=="function"&&Symbol.iterator,S=p&&C[p],I=0;if(S)return S.call(C);if(C&&typeof C.length=="number")return{next:function(){return C&&I>=C.length&&(C=void 0),{value:C&&C[I++],done:!C}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(C,p){var S=typeof Symbol=="function"&&C[Symbol.iterator];if(!S)return C;var I,D,E=S.call(C),T=[];try{for(;(p===void 0||p-- >0)&&!(I=E.next()).done;)T.push(I.value)}catch(y){D={error:y}}finally{try{I&&!I.done&&(S=E.return)&&S.call(E)}finally{if(D)throw D.error}}return T},s=this&&this.__spread||function(){for(var C=[],p=0;p<arguments.length;p++)C=C.concat(o(arguments[p]));return C};Object.defineProperty(r,"__esModule",{value:!0});var c=a(6),l=a(3),u=a(1),f=a(17),v=a(51);function g(C){c.dom.window._signalSlots.add(C),v.observer_queueAMutationObserverMicrotask()}function d(C,p){p===void 0&&(p=!1);var S=l.Cast.asNode(C)._parent;if(S===null)return null;var I=S._shadowRoot||null;if(I===null||p&&I._mode!=="open")return null;for(var D=f.tree_getFirstDescendantNode(I,!1,!0,function(E){return l.Guard.isSlot(E)});D!==null;){if(D._name===C._name)return D;D=f.tree_getNextDescendantNode(I,D,!1,!0,function(E){return l.Guard.isSlot(E)})}return null}function m(C){var p,S,I=[],D=f.tree_rootNode(C);if(!l.Guard.isShadowRoot(D))return I;var E=D._host;try{for(var T=i(E._children),y=T.next();!y.done;y=T.next()){var M=y.value;l.Guard.isSlotable(M)&&d(M)===C&&I.push(M)}}catch(_){p={error:_}}finally{try{y&&!y.done&&(S=T.return)&&S.call(T)}finally{if(p)throw p.error}}return I}function h(C){var p,S,I=m(C);if(I.length===C._assignedNodes.length){for(var D=!0,E=0;E<I.length;E++)if(I[E]!==C._assignedNodes[E]){D=!1;break}D||g(C)}C._assignedNodes=I;try{for(var T=i(I),y=T.next();!y.done;y=T.next())y.value._assignedSlot=C}catch(M){p={error:M}}finally{try{y&&!y.done&&(S=T.return)&&S.call(T)}finally{if(p)throw p.error}}}r.shadowTree_signalASlotChange=g,r.shadowTree_isConnected=function(C){return l.Guard.isDocumentNode(f.tree_rootNode(C,!0))},r.shadowTree_isAssigned=function(C){return C._assignedSlot!==null},r.shadowTree_findASlot=d,r.shadowTree_findSlotables=m,r.shadowTree_findFlattenedSlotables=function C(p){var S,I,D,E,T=[],y=f.tree_rootNode(p);if(!l.Guard.isShadowRoot(y))return T;var M=m(p);if(u.isEmpty(M))try{for(var _=i(p._children),O=_.next();!O.done;O=_.next()){var w=O.value;l.Guard.isSlotable(w)&&M.push(w)}}catch(H){S={error:H}}finally{try{O&&!O.done&&(I=_.return)&&I.call(_)}finally{if(S)throw S.error}}try{for(var x=i(M),P=x.next();!P.done;P=x.next()){var R=P.value;if(l.Guard.isSlot(R)&&l.Guard.isShadowRoot(f.tree_rootNode(R))){var L=C(R);T.push.apply(T,s(L))}else T.push(R)}}catch(H){D={error:H}}finally{try{P&&!P.done&&(E=x.return)&&E.call(x)}finally{if(D)throw D.error}}return T},r.shadowTree_assignSlotables=h,r.shadowTree_assignSlotablesForATree=function(C){for(var p=f.tree_getFirstDescendantNode(C,!0,!1,function(S){return l.Guard.isSlot(S)});p!==null;)h(p),p=f.tree_getNextDescendantNode(C,p,!0,!1,function(S){return l.Guard.isSlot(S)})},r.shadowTree_assignASlot=function(C){var p=d(C);p!==null&&h(p)}},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=/[a-z]([\0-\t\x2D\._a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*-([\0-\t\x2D\._a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*/,o=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]),s=new Set(["article","aside","blockquote","body","div","footer","h1","h2","h3","h4","h5","h6","header","main","nav","p","section","span"]),c=new Set(["area","base","basefont","bgsound","br","col","embed","frame","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]),l=new Set(["article","aside","blockquote","body","div","footer","h1","h2","h3","h4","h5","h6","header","main","nav","p","section","span"]);r.customElement_isValidCustomElementName=function(u){return!!i.test(u)&&!o.has(u)},r.customElement_isValidElementName=function(u){return s.has(u)},r.customElement_isVoidElementName=function(u){return c.has(u)},r.customElement_isValidShadowHostName=function(u){return l.has(u)},r.customElement_enqueueACustomElementUpgradeReaction=function(u,f){},r.customElement_enqueueACustomElementCallbackReaction=function(u,f,v){},r.customElement_upgrade=function(u,f){},r.customElement_tryToUpgrade=function(u){},r.customElement_lookUpACustomElementDefinition=function(u,f,v,g){return null}},function(n,r,a){a(4)({target:"String",proto:!0},{repeat:a(259)})},function(n,r,a){a(278),a(68),a(179),a(94),Object.defineProperty(r,"__esModule",{value:!0});var i=a(109),o=function(){function s(c){this._builderOptions=c,c.parser&&Object.assign(this,c.parser)}return s.prototype._docType=function(c,l,u,f){return c.dtd({name:l,pubID:u,sysID:f})},s.prototype._comment=function(c,l){return c.com(l)},s.prototype._text=function(c,l){return c.txt(l)},s.prototype._instruction=function(c,l,u){return c.ins(l,u)},s.prototype._cdata=function(c,l){return c.dat(l)},s.prototype._element=function(c,l,u){return l===void 0?c.ele(u):c.ele(l,u)},s.prototype._attribute=function(c,l,u,f){return l===void 0?c.att(u,f):c.att(l,u,f)},s.prototype._sanitize=function(c){return i.sanitizeInput(c,this._builderOptions.invalidCharReplacement)},s.prototype._decodeText=function(c){return c==null?c:c.replace(/&(quot|amp|apos|lt|gt);/g,function(l,u){return s._entityTable[u]}).replace(/&#(?:x([a-fA-F0-9]+)|([0-9]+));/g,function(l,u,f){return String.fromCodePoint(parseInt(u||f,u?16:10))})},s.prototype._decodeAttributeValue=function(c){return this._decodeText(c)},s.prototype.parse=function(c,l){return this._parse(c,l)},s.prototype.docType=function(c,l,u,f){return this._docType(c,l,u,f)},s.prototype.comment=function(c,l){return this._comment(c,l)},s.prototype.text=function(c,l){return this._text(c,l)},s.prototype.instruction=function(c,l,u){return this._instruction(c,l,u)},s.prototype.cdata=function(c,l){return this._cdata(c,l)},s.prototype.element=function(c,l,u){return this._element(c,l,u)},s.prototype.attribute=function(c,l,u,f){return this._attribute(c,l,u,f)},s.prototype.sanitize=function(c){return this._sanitize(c)},s._entityTable={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"},s}();r.BaseReader=o},function(n,r,a){var i=a(39);n.exports=i.DEFAULT=new i({include:[a(54)],explicit:[a(299),a(300),a(301)]})},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(185);r.XMLBuilderImpl=i.XMLBuilderImpl;var o=a(304);r.XMLBuilderCBImpl=o.XMLBuilderCBImpl;var s=a(183);r.builder=s.builder,r.create=s.create,r.fragment=s.fragment,r.convert=s.convert;var c=a(309);r.createCB=c.createCB,r.fragmentCB=c.fragmentCB},function(n,r){var a;a=function(){return this}();try{a=a||new Function("return this")()}catch{typeof window=="object"&&(a=window)}n.exports=a},function(n,r,a){var i={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,s=o&&!i.call({1:2},1);r.f=s?function(c){var l=o(this,c);return!!l&&l.enumerable}:i},function(n,r,a){var i=a(11),o=a(21);n.exports=function(s,c){try{o(i,s,c)}catch{i[s]=c}return c}},function(n,r,a){var i=a(44),o=a(118);(n.exports=function(s,c){return o[s]||(o[s]=c!==void 0?c:{})})("versions",[]).push({version:"3.6.5",mode:i?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},function(n,r,a){var i=a(121),o=a(84).concat("length","prototype");r.f=Object.getOwnPropertyNames||function(s){return i(s,o)}},function(n,r,a){var i=a(47),o=Math.max,s=Math.min;n.exports=function(c,l){var u=i(c);return u<0?o(u+l,0):s(u,l)}},function(n,r){n.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(n,r){r.f=Object.getOwnPropertySymbols},function(n,r,a){var i=a(8);n.exports=!!Object.getOwnPropertySymbols&&!i(function(){return!String(Symbol())})},function(n,r,a){var i=a(127);n.exports=function(o,s,c){if(i(o),s===void 0)return o;switch(c){case 0:return function(){return o.call(s)};case 1:return function(l){return o.call(s,l)};case 2:return function(l,u){return o.call(s,l,u)};case 3:return function(l,u,f){return o.call(s,l,u,f)}}return function(){return o.apply(s,arguments)}}},function(n,r,a){var i=a(4),o=a(195),s=a(132),c=a(133),l=a(62),u=a(21),f=a(25),v=a(5),g=a(44),d=a(49),m=a(131),h=m.IteratorPrototype,C=m.BUGGY_SAFARI_ITERATORS,p=v("iterator"),S=function(){return this};n.exports=function(I,D,E,T,y,M,_){o(E,D,T);var O,w,x,P=function(X){if(X===y&&U)return U;if(!C&&X in H)return H[X];switch(X){case"keys":case"values":case"entries":return function(){return new E(this,X)}}return function(){return new E(this)}},R=D+" Iterator",L=!1,H=I.prototype,F=H[p]||H["@@iterator"]||y&&H[y],U=!C&&F||P(y),V=D=="Array"&&H.entries||F;if(V&&(O=s(V.call(new I)),h!==Object.prototype&&O.next&&(g||s(O)===h||(c?c(O,h):typeof O[p]!="function"&&u(O,p,S)),l(O,R,!0,!0),g&&(d[R]=S))),y=="values"&&F&&F.name!=="values"&&(L=!0,U=function(){return F.call(this)}),g&&!_||H[p]===U||u(H,p,U),d[D]=U,y)if(w={values:P("values"),keys:M?U:P("keys"),entries:P("entries")},_)for(x in w)(C||L||!(x in H))&&f(H,x,w[x]);else i({target:D,proto:!0,forced:C||L},w);return w}},function(n,r,a){var i=a(4),o=a(13),s=a(59),c=a(83),l=a(26),u=a(24),f=a(134),v=a(5),g=a(63),d=a(28),m=g("slice"),h=d("slice",{ACCESSORS:!0,0:0,1:2}),C=v("species"),p=[].slice,S=Math.max;i({target:"Array",proto:!0,forced:!m||!h},{slice:function(I,D){var E,T,y,M=u(this),_=l(M.length),O=c(I,_),w=c(D===void 0?_:D,_);if(s(M)&&(typeof(E=M.constructor)!="function"||E!==Array&&!s(E.prototype)?o(E)&&(E=E[C])===null&&(E=void 0):E=void 0,E===Array||E===void 0))return p.call(M,O,w);for(T=new(E===void 0?Array:E)(S(w-O,0)),y=0;O<w;O++,y++)O in M&&f(T,y,M[O]);return T.length=y,T}})},function(n,r,a){var i={};i[a(5)("toStringTag")]="z",n.exports=String(i)==="[object z]"},function(n,r,a){a(19),a(138),a(20),a(92),a(22),a(23),Object.defineProperty(r,"__esModule",{value:!0}),r.DefaultBuilderOptions={version:"1.0",encoding:void 0,standalone:void 0,keepNullNodes:!1,keepNullAttributes:!1,ignoreConverters:!1,convert:{att:"@",ins:"?",text:"#",cdata:"$",comment:"!"},defaultNamespace:{ele:void 0,att:void 0},namespaceAlias:{html:"http://www.w3.org/1999/xhtml",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"},invalidCharReplacement:void 0,parser:void 0},r.XMLBuilderOptionKeys=new Set(Object.keys(r.DefaultBuilderOptions)),r.DefaultXMLBuilderCBOptions={format:"xml",wellFormed:!1,prettyPrint:!1,indent:"  ",newline:`
`,offset:0,width:0,allowEmptyTags:!1,spaceBeforeSlash:!1,keepNullNodes:!1,keepNullAttributes:!1,ignoreConverters:!1,convert:{att:"@",ins:"?",text:"#",cdata:"$",comment:"!"},defaultNamespace:{ele:void 0,att:void 0},namespaceAlias:{html:"http://www.w3.org/1999/xhtml",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"}}},function(n,r,a){var i=a(139),o=a(143);n.exports=i("Set",function(s){return function(){return s(this,arguments.length?arguments[0]:void 0)}},o)},function(n,r,a){var i,o,s=a(136),c=a(221),l=RegExp.prototype.exec,u=String.prototype.replace,f=l,v=(i=/a/,o=/b*/g,l.call(i,"a"),l.call(o,"a"),i.lastIndex!==0||o.lastIndex!==0),g=c.UNSUPPORTED_Y||c.BROKEN_CARET,d=/()??/.exec("")[1]!==void 0;(v||d||g)&&(f=function(m){var h,C,p,S,I=this,D=g&&I.sticky,E=s.call(I),T=I.source,y=0,M=m;return D&&((E=E.replace("y","")).indexOf("g")===-1&&(E+="g"),M=String(m).slice(I.lastIndex),I.lastIndex>0&&(!I.multiline||I.multiline&&m[I.lastIndex-1]!==`
`)&&(T="(?: "+T+")",M=" "+M,y++),C=new RegExp("^(?:"+T+")",E)),d&&(C=new RegExp("^"+T+"$(?!\\s)",E)),v&&(h=I.lastIndex),p=l.call(D?C:I,M),D?p?(p.input=p.input.slice(y),p[0]=p[0].slice(y),p.index=I.lastIndex,I.lastIndex+=p[0].length):I.lastIndex=0:v&&p&&(I.lastIndex=I.global?p.index+p[0].length:h),d&&p&&p.length>1&&u.call(p[0],C,function(){for(S=1;S<arguments.length-2;S++)arguments[S]===void 0&&(p[S]=void 0)}),p}),n.exports=f},function(n,r,a){var i=a(225),o=a(18),s=a(27),c=a(26),l=a(47),u=a(35),f=a(226),v=a(227),g=Math.max,d=Math.min,m=Math.floor,h=/\$([$&'`]|\d\d?|<[^>]*>)/g,C=/\$([$&'`]|\d\d?)/g;i("replace",2,function(p,S,I,D){var E=D.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,T=D.REPLACE_KEEPS_$0,y=E?"$":"$0";return[function(_,O){var w=u(this),x=_==null?void 0:_[p];return x!==void 0?x.call(_,w,O):S.call(String(w),_,O)},function(_,O){if(!E&&T||typeof O=="string"&&O.indexOf(y)===-1){var w=I(S,_,this,O);if(w.done)return w.value}var x=o(_),P=String(this),R=typeof O=="function";R||(O=String(O));var L=x.global;if(L){var H=x.unicode;x.lastIndex=0}for(var F=[];;){var U=v(x,P);if(U===null||(F.push(U),!L))break;String(U[0])===""&&(x.lastIndex=f(P,c(x.lastIndex),H))}for(var V,X="",re=0,ue=0;ue<F.length;ue++){U=F[ue];for(var De=String(U[0]),pe=g(d(l(U.index),P.length),0),Te=[],Fe=1;Fe<U.length;Fe++)Te.push((V=U[Fe])===void 0?V:String(V));var Ne=U.groups;if(R){var Re=[De].concat(Te,pe,P);Ne!==void 0&&Re.push(Ne);var k=String(O.apply(void 0,Re))}else k=M(De,P,pe,Te,Ne,O);pe>=re&&(X+=P.slice(re,pe)+k,re=pe+De.length)}return X+P.slice(re)}];function M(_,O,w,x,P,R){var L=w+_.length,H=x.length,F=C;return P!==void 0&&(P=s(P),F=h),S.call(R,F,function(U,V){var X;switch(V.charAt(0)){case"$":return"$";case"&":return _;case"`":return O.slice(0,w);case"'":return O.slice(L);case"<":X=P[V.slice(1,-1)];break;default:var re=+V;if(re===0)return U;if(re>H){var ue=m(re/10);return ue===0?U:ue<=H?x[ue-1]===void 0?V.charAt(1):x[ue-1]+V.charAt(1):U}X=x[re-1]}return X===void 0?"":X})}})},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function o(){this._items={},this._nullItems=[]}return o.prototype.copy=function(){var s=new o;for(var c in this._items)s._items[c]=this._items[c].slice(0);return s._nullItems=this._nullItems.slice(0),s},o.prototype.get=function(s,c){var l=c===null?this._nullItems:this._items[c]||null;if(l===null)return null;for(var u=null,f=0;f<l.length;f++)if((u=l[f])===s)return u;return u},o.prototype.has=function(s,c){var l=c===null?this._nullItems:this._items[c]||null;return l!==null&&l.indexOf(s)!==-1},o.prototype.hasPrefix=function(s){if(this._nullItems.indexOf(s)!==-1)return!0;for(var c in this._items)if(this._items[c].indexOf(s)!==-1)return!0;return!1},o.prototype.set=function(s,c){var l=c===null?this._nullItems:this._items[c]||null;c!==null&&l===null?this._items[c]=[s]:l.push(s)},o}();r.NamespacePrefixMap=i},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.Surrogate=/[\uD800-\uDFFF]/,r.ScalarValue=/[\uD800-\uDFFF]/,r.NonCharacter=/[\uFDD0-\uFDEF\uFFFE\uFFFF]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F\uDBBF\uDBFF][\uDFFE\uDFFF]/,r.ASCIICodePoint=/[\u0000-\u007F]/,r.ASCIITabOrNewLine=/[\t\n\r]/,r.ASCIIWhiteSpace=/[\t\n\f\r ]/,r.C0Control=/[\u0000-\u001F]/,r.C0ControlOrSpace=/[\u0000-\u001F ]/,r.Control=/[\u0000-\u001F\u007F-\u009F]/,r.ASCIIDigit=/[0-9]/,r.ASCIIUpperHexDigit=/[0-9A-F]/,r.ASCIILowerHexDigit=/[0-9a-f]/,r.ASCIIHexDigit=/[0-9A-Fa-f]/,r.ASCIIUpperAlpha=/[A-Z]/,r.ASCIILowerAlpha=/[a-z]/,r.ASCIIAlpha=/[A-Za-z]/,r.ASCIIAlphanumeric=/[0-9A-Za-z]/},function(n,r,a){var i=this&&this.__values||function(O){var w=typeof Symbol=="function"&&Symbol.iterator,x=w&&O[w],P=0;if(x)return x.call(O);if(O&&typeof O.length=="number")return{next:function(){return O&&P>=O.length&&(O=void 0),{value:O&&O[P++],done:!O}}};throw new TypeError(w?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(O,w){var x=typeof Symbol=="function"&&O[Symbol.iterator];if(!x)return O;var P,R,L=x.call(O),H=[];try{for(;(w===void 0||w-- >0)&&!(P=L.next()).done;)H.push(P.value)}catch(F){R={error:F}}finally{try{P&&!P.done&&(x=L.return)&&x.call(L)}finally{if(R)throw R.error}}return H},s=this&&this.__spread||function(){for(var O=[],w=0;w<arguments.length;w++)O=O.concat(o(arguments[w]));return O};Object.defineProperty(r,"__esModule",{value:!0});var c=a(6),l=a(2),u=a(3),f=a(171),v=a(104),g=a(9),d=a(17),m=a(72),h=a(30);function C(O,w){w===void 0&&(w=void 0),w===void 0&&(w=null);var x=p(O,w,new Date,{});return x._isTrusted=!0,x}function p(O,w,x,P){var R=new O("");return R._initializedFlag=!0,R._timeStamp=x.getTime(),Object.assign(R,P),c.dom.features.steps&&h.dom_runEventConstructingSteps(R),R}function S(O,w,x,P){var R,L,H,F;x===void 0&&(x=!1),P===void 0&&(P={value:!1});var U=!1;O._dispatchFlag=!0;var V=w;if(x){var X=w._associatedDocument;u.Guard.isDocumentNode(X)&&(V=X)}var re=null,ue=d.tree_retarget(O._relatedTarget,w);if(w!==ue||w===O._relatedTarget){var De=[];try{for(var pe=i(O._touchTargetList),Te=pe.next();!Te.done;Te=pe.next()){var Fe=Te.value;De.push(d.tree_retarget(Fe,w))}}catch(be){R={error:be}}finally{try{Te&&!Te.done&&(L=pe.return)&&L.call(pe)}finally{if(R)throw R.error}}I(O,w,V,ue,De,!1);var Ne=u.Guard.isMouseEvent(O)&&O._type==="click";Ne&&w._activationBehavior!==void 0&&(re=w);for(var Re=u.Guard.isSlotable(w)&&m.shadowTree_isAssigned(w)?w:null,k=!1,A=w._getTheParent(O);A!==null&&u.Guard.isNode(A);){if(Re!==null){if(!u.Guard.isSlot(A))throw new Error("Parent node of a slotable should be a slot.");Re=null;var b=d.tree_rootNode(A,!0);u.Guard.isShadowRoot(b)&&b._mode==="closed"&&(k=!0)}u.Guard.isSlotable(A)&&m.shadowTree_isAssigned(A)&&(Re=A),ue=d.tree_retarget(O._relatedTarget,A),De=[];try{for(var N=(H=void 0,i(O._touchTargetList)),W=N.next();!W.done;W=N.next())Fe=W.value,De.push(d.tree_retarget(Fe,A))}catch(be){H={error:be}}finally{try{W&&!W.done&&(F=N.return)&&F.call(N)}finally{if(H)throw H.error}}u.Guard.isWindow(A)||u.Guard.isNode(A)&&u.Guard.isNode(w)&&d.tree_isAncestorOf(d.tree_rootNode(w,!0),A,!0,!0)?(Ne&&O._bubbles&&re===null&&A._activationBehavior&&(re=A),I(O,A,null,ue,De,k)):A===ue?A=null:(w=A,Ne&&re===null&&w._activationBehavior&&(re=w),I(O,A,w,ue,De,k)),A!==null&&(A=A._getTheParent(O)),k=!1}for(var j=null,K=O._path,ge=K.length-1;ge>=0;ge--)if((we=K[ge]).shadowAdjustedTarget!==null){j=we;break}if(j!==null)if(u.Guard.isNode(j.shadowAdjustedTarget)&&u.Guard.isShadowRoot(d.tree_rootNode(j.shadowAdjustedTarget,!0)))U=!0;else if(u.Guard.isNode(j.relatedTarget)&&u.Guard.isShadowRoot(d.tree_rootNode(j.relatedTarget,!0)))U=!0;else for(var ye=0;ye<j.touchTargetList.length;ye++){var we=j.touchTargetList[ye];if(u.Guard.isNode(we)&&u.Guard.isShadowRoot(d.tree_rootNode(we,!0))){U=!0;break}}for(re!==null&&re._legacyPreActivationBehavior!==void 0&&re._legacyPreActivationBehavior(O),ge=K.length-1;ge>=0;ge--)(we=K[ge]).shadowAdjustedTarget!==null?O._eventPhase=l.EventPhase.AtTarget:O._eventPhase=l.EventPhase.Capturing,D(we,O,"capturing",P);for(ge=0;ge<K.length;ge++){if((we=K[ge]).shadowAdjustedTarget!==null)O._eventPhase=l.EventPhase.AtTarget;else{if(!O._bubbles)continue;O._eventPhase=l.EventPhase.Bubbling}D(we,O,"bubbling",P)}}return O._eventPhase=l.EventPhase.None,O._currentTarget=null,O._path=[],O._dispatchFlag=!1,O._stopPropagationFlag=!1,O._stopImmediatePropagationFlag=!1,U&&(O._target=null,O._relatedTarget=null,O._touchTargetList=[]),re!==null&&(O._canceledFlag||re._activationBehavior===void 0?re._legacyCanceledActivationBehavior!==void 0&&re._legacyCanceledActivationBehavior(O):re._activationBehavior(O)),!O._canceledFlag}function I(O,w,x,P,R,L){var H=!1;u.Guard.isNode(w)&&u.Guard.isShadowRoot(d.tree_rootNode(w))&&(H=!0);var F=!1;u.Guard.isShadowRoot(w)&&w._mode==="closed"&&(F=!0),O._path.push({invocationTarget:w,invocationTargetInShadowTree:H,shadowAdjustedTarget:x,relatedTarget:P,touchTargetList:R,rootOfClosedTree:F,slotInClosedTree:L})}function D(O,w,x,P){P===void 0&&(P={value:!1});for(var R=w._path,L=-1,H=0;H<R.length;H++)if(R[H]===O){L=H;break}if(L!==-1){var F=R[L];(F.shadowAdjustedTarget!==null||L>0&&(F=R[L-1]).shadowAdjustedTarget!==null)&&(w._target=F.shadowAdjustedTarget)}if(w._relatedTarget=O.relatedTarget,w._touchTargetList=O.touchTargetList,!w._stopPropagationFlag){w._currentTarget=O.invocationTarget;var U=w._currentTarget._eventListenerList,V=new(Array.bind.apply(Array,s([void 0],U)));if(!E(w,V,x,O,P)&&w._isTrusted){var X=w._type;X==="animationend"?w._type="webkitAnimationEnd":X==="animationiteration"?w._type="webkitAnimationIteration":X==="animationstart"?w._type="webkitAnimationStart":X==="transitionend"&&(w._type="webkitTransitionEnd"),E(w,V,x,O,P),w._type=X}}}function E(O,w,x,P,R){R===void 0&&(R={value:!1});for(var L=!1,H=0;H<w.length;H++){var F=w[H];if(!F.removed){if(O._type!==F.type||(L=!0,x==="capturing"&&!F.capture)||x==="bubbling"&&F.capture)continue;if(F.once&&O._currentTarget!==null){for(var U=O._currentTarget,V=-1,X=0;X<U._eventListenerList.length;X++)if(U._eventListenerList[X]===F){V=X;break}V!==-1&&U._eventListenerList.splice(V,1)}var re=void 0,ue=void 0;u.Guard.isWindow(re)&&(ue=re._currentEvent,P.invocationTargetInShadowTree===!1&&(re._currentEvent=O)),F.passive&&(O._inPassiveListenerFlag=!0);try{F.callback.handleEvent.call(O._currentTarget,O)}catch{R.value=!0}if(F.passive&&(O._inPassiveListenerFlag=!1),u.Guard.isWindow(re)&&(re._currentEvent=ue),O._stopImmediatePropagationFlag)return L}}return L}function T(O,w){return null}function y(O,w){return null}function M(O,w){}function _(O,w){}r.event_setTheCanceledFlag=function(O){O._cancelable&&!O._inPassiveListenerFlag&&(O._canceledFlag=!0)},r.event_initialize=function(O,w,x,P){O._initializedFlag=!0,O._stopPropagationFlag=!1,O._stopImmediatePropagationFlag=!1,O._canceledFlag=!1,O._isTrusted=!1,O._target=null,O._type=w,O._bubbles=x,O._cancelable=P},r.event_createAnEvent=C,r.event_innerEventCreationSteps=p,r.event_dispatch=S,r.event_appendToAnEventPath=I,r.event_invoke=D,r.event_innerInvoke=E,r.event_fireAnEvent=function(O,w,x,P,R){x===void 0&&(x=v.EventImpl);var L=C(x);if(L._type=O,P)for(var H in P)L[H]=P[H];return S(L,w,R)},r.event_createLegacyEvent=function(O){var w=null;switch(O.toLowerCase()){case"beforeunloadevent":case"compositionevent":break;case"customevent":w=f.CustomEventImpl;break;case"devicemotionevent":case"deviceorientationevent":case"dragevent":break;case"event":case"events":w=v.EventImpl}if(w===null)throw new g.NotSupportedError("Event constructor not found for interface "+O+".");var x=new w("");return x._type="",x._timeStamp=new Date().getTime(),x._isTrusted=!1,x._initializedFlag=!1,x},r.event_getterEventHandlerIDLAttribute=function(O,w){return null},r.event_setterEventHandlerIDLAttribute=function(O,w,x){},r.event_determineTheTargetOfAnEventHandler=T,r.event_getTheCurrentValueOfAnEventHandler=y,r.event_activateAnEventHandler=M,r.event_deactivateAnEventHandler=_},function(n,r,a){var i,o=this&&this.__extends||(i=function(I,D){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,T){E.__proto__=T}||function(E,T){for(var y in T)T.hasOwnProperty(y)&&(E[y]=T[y])})(I,D)},function(I,D){function E(){this.constructor=I}i(I,D),I.prototype=D===null?Object.create(D):(E.prototype=D.prototype,new E)}),s=this&&this.__values||function(I){var D=typeof Symbol=="function"&&Symbol.iterator,E=D&&I[D],T=0;if(E)return E.call(I);if(I&&typeof I.length=="number")return{next:function(){return I&&T>=I.length&&(I=void 0),{value:I&&I[T++],done:!I}}};throw new TypeError(D?"Object is not iterable.":"Symbol.iterator is not defined.")},c=this&&this.__read||function(I,D){var E=typeof Symbol=="function"&&I[Symbol.iterator];if(!E)return I;var T,y,M=E.call(I),_=[];try{for(;(D===void 0||D-- >0)&&!(T=M.next()).done;)_.push(T.value)}catch(O){y={error:O}}finally{try{T&&!T.done&&(E=M.return)&&E.call(M)}finally{if(y)throw y.error}}return _};Object.defineProperty(r,"__esModule",{value:!0});var l=a(6),u=a(2),f=a(9),v=a(34),g=a(3),d=a(1),m=a(7),h=a(152),C=a(0),p=a(12),S=function(I){function D(){var E=I.call(this)||this;return E._children=new Set,E._encoding={name:"UTF-8",labels:["unicode-1-1-utf-8","utf-8","utf8"]},E._contentType="application/xml",E._URL={scheme:"about",username:"",password:"",host:null,port:null,path:["blank"],query:null,fragment:null,_cannotBeABaseURLFlag:!0,_blobURLEntry:null},E._origin=null,E._type="xml",E._mode="no-quirks",E._documentElement=null,E._hasNamespaces=!1,E._nodeDocumentOverwrite=null,E}return o(D,I),Object.defineProperty(D.prototype,"_nodeDocument",{get:function(){return this._nodeDocumentOverwrite||this},set:function(E){this._nodeDocumentOverwrite=E},enumerable:!0,configurable:!0}),Object.defineProperty(D.prototype,"implementation",{get:function(){return this._implementation||(this._implementation=C.create_domImplementation(this))},enumerable:!0,configurable:!0}),Object.defineProperty(D.prototype,"URL",{get:function(){return h.urlSerializer(this._URL)},enumerable:!0,configurable:!0}),Object.defineProperty(D.prototype,"documentURI",{get:function(){return this.URL},enumerable:!0,configurable:!0}),Object.defineProperty(D.prototype,"origin",{get:function(){return"null"},enumerable:!0,configurable:!0}),Object.defineProperty(D.prototype,"compatMode",{get:function(){return this._mode==="quirks"?"BackCompat":"CSS1Compat"},enumerable:!0,configurable:!0}),Object.defineProperty(D.prototype,"characterSet",{get:function(){return this._encoding.name},enumerable:!0,configurable:!0}),Object.defineProperty(D.prototype,"charset",{get:function(){return this._encoding.name},enumerable:!0,configurable:!0}),Object.defineProperty(D.prototype,"inputEncoding",{get:function(){return this._encoding.name},enumerable:!0,configurable:!0}),Object.defineProperty(D.prototype,"contentType",{get:function(){return this._contentType},enumerable:!0,configurable:!0}),Object.defineProperty(D.prototype,"doctype",{get:function(){var E,T;try{for(var y=s(this._children),M=y.next();!M.done;M=y.next()){var _=M.value;if(g.Guard.isDocumentTypeNode(_))return _}}catch(O){E={error:O}}finally{try{M&&!M.done&&(T=y.return)&&T.call(y)}finally{if(E)throw E.error}}return null},enumerable:!0,configurable:!0}),Object.defineProperty(D.prototype,"documentElement",{get:function(){return this._documentElement},enumerable:!0,configurable:!0}),D.prototype.getElementsByTagName=function(E){return C.node_listOfElementsWithQualifiedName(E,this)},D.prototype.getElementsByTagNameNS=function(E,T){return C.node_listOfElementsWithNamespace(E,T,this)},D.prototype.getElementsByClassName=function(E){return C.node_listOfElementsWithClassNames(E,this)},D.prototype.createElement=function(E,T){if(!C.xml_isName(E))throw new f.InvalidCharacterError;this._type==="html"&&(E=E.toLowerCase());var y=null;T!==void 0&&(y=d.isString(T)?T:T.is);var M=this._type==="html"||this._contentType==="application/xhtml+xml"?m.namespace.HTML:null;return C.element_createAnElement(this,E,M,null,y,!0)},D.prototype.createElementNS=function(E,T,y){return C.document_internalCreateElementNS(this,E,T,y)},D.prototype.createDocumentFragment=function(){return C.create_documentFragment(this)},D.prototype.createTextNode=function(E){return C.create_text(this,E)},D.prototype.createCDATASection=function(E){if(this._type==="html")throw new f.NotSupportedError;if(E.indexOf("]]>")!==-1)throw new f.InvalidCharacterError;return C.create_cdataSection(this,E)},D.prototype.createComment=function(E){return C.create_comment(this,E)},D.prototype.createProcessingInstruction=function(E,T){if(!C.xml_isName(E))throw new f.InvalidCharacterError;if(T.indexOf("?>")!==-1)throw new f.InvalidCharacterError;return C.create_processingInstruction(this,E,T)},D.prototype.importNode=function(E,T){if(T===void 0&&(T=!1),g.Guard.isDocumentNode(E)||g.Guard.isShadowRoot(E))throw new f.NotSupportedError;return C.node_clone(E,this,T)},D.prototype.adoptNode=function(E){if(g.Guard.isDocumentNode(E))throw new f.NotSupportedError;if(g.Guard.isShadowRoot(E))throw new f.HierarchyRequestError;return C.document_adopt(E,this),E},D.prototype.createAttribute=function(E){if(!C.xml_isName(E))throw new f.InvalidCharacterError;return this._type==="html"&&(E=E.toLowerCase()),C.create_attr(this,E)},D.prototype.createAttributeNS=function(E,T){var y=c(C.namespace_validateAndExtract(E,T),3),M=y[0],_=y[1],O=y[2],w=C.create_attr(this,O);return w._namespace=M,w._namespacePrefix=_,w},D.prototype.createEvent=function(E){return C.event_createLegacyEvent(E)},D.prototype.createRange=function(){var E=C.create_range();return E._start=[this,0],E._end=[this,0],E},D.prototype.createNodeIterator=function(E,T,y){T===void 0&&(T=u.WhatToShow.All),y===void 0&&(y=null);var M=C.create_nodeIterator(E,E,!0);return M._whatToShow=T,M._iteratorCollection=C.create_nodeList(E),d.isFunction(y)?(M._filter=C.create_nodeFilter(),M._filter.acceptNode=y):M._filter=y,M},D.prototype.createTreeWalker=function(E,T,y){T===void 0&&(T=u.WhatToShow.All),y===void 0&&(y=null);var M=C.create_treeWalker(E,E);return M._whatToShow=T,d.isFunction(y)?(M._filter=C.create_nodeFilter(),M._filter.acceptNode=y):M._filter=y,M},D.prototype._getTheParent=function(E){return E._type==="load"?null:l.dom.window},D.prototype.getElementById=function(E){throw new Error("Mixin: NonElementParentNode not implemented.")},Object.defineProperty(D.prototype,"children",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(D.prototype,"firstElementChild",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(D.prototype,"lastElementChild",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(D.prototype,"childElementCount",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),D.prototype.prepend=function(){for(var E=[],T=0;T<arguments.length;T++)E[T]=arguments[T];throw new Error("Mixin: ParentNode not implemented.")},D.prototype.append=function(){for(var E=[],T=0;T<arguments.length;T++)E[T]=arguments[T];throw new Error("Mixin: ParentNode not implemented.")},D.prototype.querySelector=function(E){throw new Error("Mixin: ParentNode not implemented.")},D.prototype.querySelectorAll=function(E){throw new Error("Mixin: ParentNode not implemented.")},D}(v.NodeImpl);r.DocumentImpl=S,p.idl_defineConst(S.prototype,"_nodeType",u.NodeType.Document)},function(n,r,a){var i,o=this&&this.__extends||(i=function(h,C){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,S){p.__proto__=S}||function(p,S){for(var I in S)S.hasOwnProperty(I)&&(p[I]=S[I])})(h,C)},function(h,C){function p(){this.constructor=h}i(h,C),h.prototype=C===null?Object.create(C):(p.prototype=C.prototype,new p)}),s=this&&this.__values||function(h){var C=typeof Symbol=="function"&&Symbol.iterator,p=C&&h[C],S=0;if(p)return p.call(h);if(h&&typeof h.length=="number")return{next:function(){return h&&S>=h.length&&(h=void 0),{value:h&&h[S++],done:!h}}};throw new TypeError(C?"Object is not iterable.":"Symbol.iterator is not defined.")},c=this&&this.__read||function(h,C){var p=typeof Symbol=="function"&&h[Symbol.iterator];if(!p)return h;var S,I,D=p.call(h),E=[];try{for(;(C===void 0||C-- >0)&&!(S=D.next()).done;)E.push(S.value)}catch(T){I={error:T}}finally{try{S&&!S.done&&(p=D.return)&&p.call(D)}finally{if(I)throw I.error}}return E};Object.defineProperty(r,"__esModule",{value:!0});var l=a(2),u=a(34),f=a(9),v=a(7),g=a(0),d=a(12),m=function(h){function C(){var p=h.call(this)||this;return p._children=new Set,p._namespace=null,p._namespacePrefix=null,p._localName="",p._customElementState="undefined",p._customElementDefinition=null,p._is=null,p._shadowRoot=null,p._attributeList=g.create_namedNodeMap(p),p._attributeChangeSteps=[],p._name="",p._assignedSlot=null,p}return o(C,h),Object.defineProperty(C.prototype,"namespaceURI",{get:function(){return this._namespace},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"prefix",{get:function(){return this._namespacePrefix},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"localName",{get:function(){return this._localName},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"tagName",{get:function(){return this._htmlUppercasedQualifiedName},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"id",{get:function(){return g.element_getAnAttributeValue(this,"id")},set:function(p){g.element_setAnAttributeValue(this,"id",p)},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"className",{get:function(){return g.element_getAnAttributeValue(this,"class")},set:function(p){g.element_setAnAttributeValue(this,"class",p)},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"classList",{get:function(){var p=g.element_getAnAttributeByName("class",this);return p===null&&(p=g.create_attr(this._nodeDocument,"class")),g.create_domTokenList(this,p)},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"slot",{get:function(){return g.element_getAnAttributeValue(this,"slot")},set:function(p){g.element_setAnAttributeValue(this,"slot",p)},enumerable:!0,configurable:!0}),C.prototype.hasAttributes=function(){return this._attributeList.length!==0},Object.defineProperty(C.prototype,"attributes",{get:function(){return this._attributeList},enumerable:!0,configurable:!0}),C.prototype.getAttributeNames=function(){var p,S,I=[];try{for(var D=s(this._attributeList),E=D.next();!E.done;E=D.next()){var T=E.value;I.push(T._qualifiedName)}}catch(y){p={error:y}}finally{try{E&&!E.done&&(S=D.return)&&S.call(D)}finally{if(p)throw p.error}}return I},C.prototype.getAttribute=function(p){var S=g.element_getAnAttributeByName(p,this);return S?S._value:null},C.prototype.getAttributeNS=function(p,S){var I=g.element_getAnAttributeByNamespaceAndLocalName(p,S,this);return I?I._value:null},C.prototype.setAttribute=function(p,S){if(!g.xml_isName(p))throw new f.InvalidCharacterError;this._namespace===v.namespace.HTML&&this._nodeDocument._type==="html"&&(p=p.toLowerCase());for(var I=null,D=0;D<this._attributeList.length;D++){var E=this._attributeList[D];if(E._qualifiedName===p){I=E;break}}if(I===null)return(I=g.create_attr(this._nodeDocument,p))._value=S,void g.element_append(I,this);g.element_change(I,this,S)},C.prototype.setAttributeNS=function(p,S,I){var D=c(g.namespace_validateAndExtract(p,S),3),E=D[0],T=D[1],y=D[2];g.element_setAnAttributeValue(this,y,I,T,E)},C.prototype.removeAttribute=function(p){g.element_removeAnAttributeByName(p,this)},C.prototype.removeAttributeNS=function(p,S){g.element_removeAnAttributeByNamespaceAndLocalName(p,S,this)},C.prototype.hasAttribute=function(p){this._namespace===v.namespace.HTML&&this._nodeDocument._type==="html"&&(p=p.toLowerCase());for(var S=0;S<this._attributeList.length;S++)if(this._attributeList[S]._qualifiedName===p)return!0;return!1},C.prototype.toggleAttribute=function(p,S){if(!g.xml_isName(p))throw new f.InvalidCharacterError;this._namespace===v.namespace.HTML&&this._nodeDocument._type==="html"&&(p=p.toLowerCase());for(var I=null,D=0;D<this._attributeList.length;D++){var E=this._attributeList[D];if(E._qualifiedName===p){I=E;break}}return I===null?(S===void 0||S===!0)&&((I=g.create_attr(this._nodeDocument,p))._value="",g.element_append(I,this),!0):S!==void 0&&S!==!1||(g.element_removeAnAttributeByName(p,this),!1)},C.prototype.hasAttributeNS=function(p,S){for(var I=p||null,D=0;D<this._attributeList.length;D++){var E=this._attributeList[D];if(E._namespace===I&&E._localName===S)return!0}return!1},C.prototype.getAttributeNode=function(p){return g.element_getAnAttributeByName(p,this)},C.prototype.getAttributeNodeNS=function(p,S){return g.element_getAnAttributeByNamespaceAndLocalName(p,S,this)},C.prototype.setAttributeNode=function(p){return g.element_setAnAttribute(p,this)},C.prototype.setAttributeNodeNS=function(p){return g.element_setAnAttribute(p,this)},C.prototype.removeAttributeNode=function(p){for(var S=!1,I=0;I<this._attributeList.length;I++)if(this._attributeList[I]===p){S=!0;break}if(!S)throw new f.NotFoundError;return g.element_remove(p,this),p},C.prototype.attachShadow=function(p){if(this._namespace!==v.namespace.HTML)throw new f.NotSupportedError;if(!g.customElement_isValidCustomElementName(this._localName)&&!g.customElement_isValidShadowHostName(this._localName))throw new f.NotSupportedError;if(g.customElement_isValidCustomElementName(this._localName)||this._is!==null){var S=g.customElement_lookUpACustomElementDefinition(this._nodeDocument,this._namespace,this._localName,this._is);if(S!==null&&S.disableShadow===!0)throw new f.NotSupportedError}if(this._shadowRoot!==null)throw new f.NotSupportedError;var I=g.create_shadowRoot(this._nodeDocument,this);return I._mode=p.mode,this._shadowRoot=I,I},Object.defineProperty(C.prototype,"shadowRoot",{get:function(){var p=this._shadowRoot;return p===null||p.mode==="closed"?null:p},enumerable:!0,configurable:!0}),C.prototype.closest=function(p){throw new f.NotImplementedError},C.prototype.matches=function(p){throw new f.NotImplementedError},C.prototype.webkitMatchesSelector=function(p){return this.matches(p)},C.prototype.getElementsByTagName=function(p){return g.node_listOfElementsWithQualifiedName(p,this)},C.prototype.getElementsByTagNameNS=function(p,S){return g.node_listOfElementsWithNamespace(p,S,this)},C.prototype.getElementsByClassName=function(p){return g.node_listOfElementsWithClassNames(p,this)},C.prototype.insertAdjacentElement=function(p,S){return g.element_insertAdjacent(this,p,S)},C.prototype.insertAdjacentText=function(p,S){var I=g.create_text(this._nodeDocument,S);g.element_insertAdjacent(this,p,I)},Object.defineProperty(C.prototype,"_qualifiedName",{get:function(){return this._namespacePrefix?this._namespacePrefix+":"+this._localName:this._localName},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"_htmlUppercasedQualifiedName",{get:function(){var p=this._qualifiedName;return this._namespace===v.namespace.HTML&&this._nodeDocument._type==="html"&&(p=p.toUpperCase()),p},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"children",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"firstElementChild",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"lastElementChild",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"childElementCount",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),C.prototype.prepend=function(){for(var p=[],S=0;S<arguments.length;S++)p[S]=arguments[S];throw new Error("Mixin: ParentNode not implemented.")},C.prototype.append=function(){for(var p=[],S=0;S<arguments.length;S++)p[S]=arguments[S];throw new Error("Mixin: ParentNode not implemented.")},C.prototype.querySelector=function(p){throw new Error("Mixin: ParentNode not implemented.")},C.prototype.querySelectorAll=function(p){throw new Error("Mixin: ParentNode not implemented.")},Object.defineProperty(C.prototype,"previousElementSibling",{get:function(){throw new Error("Mixin: NonDocumentTypeChildNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"nextElementSibling",{get:function(){throw new Error("Mixin: NonDocumentTypeChildNode not implemented.")},enumerable:!0,configurable:!0}),C.prototype.before=function(){for(var p=[],S=0;S<arguments.length;S++)p[S]=arguments[S];throw new Error("Mixin: ChildNode not implemented.")},C.prototype.after=function(){for(var p=[],S=0;S<arguments.length;S++)p[S]=arguments[S];throw new Error("Mixin: ChildNode not implemented.")},C.prototype.replaceWith=function(){for(var p=[],S=0;S<arguments.length;S++)p[S]=arguments[S];throw new Error("Mixin: ChildNode not implemented.")},C.prototype.remove=function(){throw new Error("Mixin: ChildNode not implemented.")},Object.defineProperty(C.prototype,"assignedSlot",{get:function(){throw new Error("Mixin: Slotable not implemented.")},enumerable:!0,configurable:!0}),C._create=function(p,S,I,D){I===void 0&&(I=null),D===void 0&&(D=null);var E=new C;return E._localName=S,E._namespace=I,E._namespacePrefix=D,E._nodeDocument=p,E},C}(u.NodeImpl);r.ElementImpl=m,d.idl_defineConst(m.prototype,"_nodeType",l.NodeType.Element)},function(n,r,a){var i,o=this&&this.__extends||(i=function(f,v){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,d){g.__proto__=d}||function(g,d){for(var m in d)d.hasOwnProperty(m)&&(g[m]=d[m])})(f,v)},function(f,v){function g(){this.constructor=f}i(f,v),f.prototype=v===null?Object.create(v):(g.prototype=v.prototype,new g)});Object.defineProperty(r,"__esModule",{value:!0});var s=a(2),c=a(34),l=a(12),u=function(f){function v(g){g===void 0&&(g=null);var d=f.call(this)||this;return d._children=new Set,d._host=g,d}return o(v,f),v.prototype.getElementById=function(g){throw new Error("Mixin: NonElementParentNode not implemented.")},Object.defineProperty(v.prototype,"children",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"firstElementChild",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"lastElementChild",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"childElementCount",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),v.prototype.prepend=function(){for(var g=[],d=0;d<arguments.length;d++)g[d]=arguments[d];throw new Error("Mixin: ParentNode not implemented.")},v.prototype.append=function(){for(var g=[],d=0;d<arguments.length;d++)g[d]=arguments[d];throw new Error("Mixin: ParentNode not implemented.")},v.prototype.querySelector=function(g){throw new Error("Mixin: ParentNode not implemented.")},v.prototype.querySelectorAll=function(g){throw new Error("Mixin: ParentNode not implemented.")},v._create=function(g,d){d===void 0&&(d=null);var m=new v(d);return m._nodeDocument=g,m},v}(c.NodeImpl);r.DocumentFragmentImpl=u,l.idl_defineConst(u.prototype,"_nodeType",s.NodeType.DocumentFragment)},function(n,r,a){var i,o=this&&this.__extends||(i=function(g,d){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,h){m.__proto__=h}||function(m,h){for(var C in h)h.hasOwnProperty(C)&&(m[C]=h[C])})(g,d)},function(g,d){function m(){this.constructor=g}i(g,d),g.prototype=d===null?Object.create(d):(m.prototype=d.prototype,new m)}),s=this&&this.__values||function(g){var d=typeof Symbol=="function"&&Symbol.iterator,m=d&&g[d],h=0;if(m)return m.call(g);if(g&&typeof g.length=="number")return{next:function(){return g&&h>=g.length&&(g=void 0),{value:g&&g[h++],done:!g}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var c=a(2),l=a(71),u=a(0),f=a(12),v=function(g){function d(m){m===void 0&&(m="");var h=g.call(this,m)||this;return h._name="",h._assignedSlot=null,h}return o(d,g),Object.defineProperty(d.prototype,"wholeText",{get:function(){var m,h,C="";try{for(var p=s(u.text_contiguousTextNodes(this,!0)),S=p.next();!S.done;S=p.next())C+=S.value._data}catch(I){m={error:I}}finally{try{S&&!S.done&&(h=p.return)&&h.call(p)}finally{if(m)throw m.error}}return C},enumerable:!0,configurable:!0}),d.prototype.splitText=function(m){return u.text_split(this,m)},Object.defineProperty(d.prototype,"assignedSlot",{get:function(){throw new Error("Mixin: Slotable not implemented.")},enumerable:!0,configurable:!0}),d._create=function(m,h){h===void 0&&(h="");var C=new d(h);return C._nodeDocument=m,C},d}(l.CharacterDataImpl);r.TextImpl=v,f.idl_defineConst(v.prototype,"_nodeType",c.NodeType.Text)},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function o(){}return Object.defineProperty(o.prototype,"_startNode",{get:function(){return this._start[0]},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"_startOffset",{get:function(){return this._start[1]},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"_endNode",{get:function(){return this._end[0]},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"_endOffset",{get:function(){return this._end[1]},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"_collapsed",{get:function(){return this._start[0]===this._end[0]&&this._start[1]===this._end[1]},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"startContainer",{get:function(){return this._startNode},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"startOffset",{get:function(){return this._startOffset},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"endContainer",{get:function(){return this._endNode},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"endOffset",{get:function(){return this._endOffset},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"collapsed",{get:function(){return this._collapsed},enumerable:!0,configurable:!0}),o}();r.AbstractRangeImpl=i},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(2),o=function(){function s(c){this._activeFlag=!1,this._root=c,this._whatToShow=i.WhatToShow.All,this._filter=null}return Object.defineProperty(s.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"whatToShow",{get:function(){return this._whatToShow},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"filter",{get:function(){return this._filter},enumerable:!0,configurable:!0}),s}();r.TraverserImpl=o},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(2),o=a(0),s=a(12),c=function(){function l(u,f){this._target=null,this._relatedTarget=null,this._touchTargetList=[],this._path=[],this._currentTarget=null,this._eventPhase=i.EventPhase.None,this._stopPropagationFlag=!1,this._stopImmediatePropagationFlag=!1,this._canceledFlag=!1,this._inPassiveListenerFlag=!1,this._composedFlag=!1,this._initializedFlag=!1,this._dispatchFlag=!1,this._isTrusted=!1,this._bubbles=!1,this._cancelable=!1,this._type=u,f&&(this._bubbles=f.bubbles||!1,this._cancelable=f.cancelable||!1,this._composedFlag=f.composed||!1),this._initializedFlag=!0,this._timeStamp=new Date().getTime()}return Object.defineProperty(l.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"target",{get:function(){return this._target},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"srcElement",{get:function(){return this._target},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"currentTarget",{get:function(){return this._currentTarget},enumerable:!0,configurable:!0}),l.prototype.composedPath=function(){var u=[],f=this._path;if(f.length===0)return u;var v=this._currentTarget;if(v===null)throw new Error("Event currentTarget is null.");u.push(v);for(var g=0,d=0,m=f.length-1;m>=0;){if(f[m].rootOfClosedTree&&d++,f[m].invocationTarget===v){g=m;break}f[m].slotInClosedTree&&d--,m--}var h=d,C=d;for(m=g-1;m>=0;)f[m].rootOfClosedTree&&h++,h<=C&&u.unshift(f[m].invocationTarget),f[m].slotInClosedTree&&--h<C&&(C=h),m--;for(h=d,C=d,m=g+1;m<f.length;)f[m].slotInClosedTree&&h++,h<=C&&u.push(f[m].invocationTarget),f[m].rootOfClosedTree&&--h<C&&(C=h),m++;return u},Object.defineProperty(l.prototype,"eventPhase",{get:function(){return this._eventPhase},enumerable:!0,configurable:!0}),l.prototype.stopPropagation=function(){this._stopPropagationFlag=!0},Object.defineProperty(l.prototype,"cancelBubble",{get:function(){return this._stopPropagationFlag},set:function(u){u&&this.stopPropagation()},enumerable:!0,configurable:!0}),l.prototype.stopImmediatePropagation=function(){this._stopPropagationFlag=!0,this._stopImmediatePropagationFlag=!0},Object.defineProperty(l.prototype,"bubbles",{get:function(){return this._bubbles},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"cancelable",{get:function(){return this._cancelable},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"returnValue",{get:function(){return!this._canceledFlag},set:function(u){u||o.event_setTheCanceledFlag(this)},enumerable:!0,configurable:!0}),l.prototype.preventDefault=function(){o.event_setTheCanceledFlag(this)},Object.defineProperty(l.prototype,"defaultPrevented",{get:function(){return this._canceledFlag},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"composed",{get:function(){return this._composedFlag},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"isTrusted",{get:function(){return this._isTrusted},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"timeStamp",{get:function(){return this._timeStamp},enumerable:!0,configurable:!0}),l.prototype.initEvent=function(u,f,v){f===void 0&&(f=!1),v===void 0&&(v=!1),this._dispatchFlag||o.event_initialize(this,u,f,v)},l.NONE=0,l.CAPTURING_PHASE=1,l.AT_TARGET=2,l.BUBBLING_PHASE=3,l}();r.EventImpl=c,s.idl_defineConst(c.prototype,"NONE",0),s.idl_defineConst(c.prototype,"CAPTURING_PHASE",1),s.idl_defineConst(c.prototype,"AT_TARGET",2),s.idl_defineConst(c.prototype,"BUBBLING_PHASE",3)},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(2),o=a(9);r.traversal_filter=function(s,c){if(s._activeFlag)throw new o.InvalidStateError;var l=1<<c._nodeType-1;if(!(s.whatToShow&l))return i.FilterResult.Skip;if(!s.filter)return i.FilterResult.Accept;s._activeFlag=!0;var u=i.FilterResult.Reject;try{u=s.filter.acceptNode(c)}catch(f){throw s._activeFlag=!1,f}return s._activeFlag=!1,u}},function(n,r,a){var i=this&&this.__read||function(C,p){var S=typeof Symbol=="function"&&C[Symbol.iterator];if(!S)return C;var I,D,E=S.call(C),T=[];try{for(;(p===void 0||p-- >0)&&!(I=E.next()).done;)T.push(I.value)}catch(y){D={error:y}}finally{try{I&&!I.done&&(S=E.return)&&S.call(E)}finally{if(D)throw D.error}}return T},o=this&&this.__values||function(C){var p=typeof Symbol=="function"&&Symbol.iterator,S=p&&C[p],I=0;if(S)return S.call(C);if(C&&typeof C.length=="number")return{next:function(){return C&&I>=C.length&&(C=void 0),{value:C&&C[I++],done:!C}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var s=a(6),c=a(3),l=a(1),u=a(99),f=a(73),v=a(17),g=a(173),d=a(30),m=a(52),h=a(37);r.document_elementInterface=function(C,p){return u.ElementImpl},r.document_internalCreateElementNS=function(C,p,S,I){var D=i(g.namespace_validateAndExtract(p,S),3),E=D[0],T=D[1],y=D[2],M=null;return I!==void 0&&(M=l.isString(I)?I:I.is),m.element_createAnElement(C,y,E,T,M,!0)},r.document_adopt=function(C,p){var S,I;if(C._nodeDocument!==p||C._parent!==null){var D=C._nodeDocument;if(C._parent&&h.mutation_remove(C,C._parent),p!==D)for(var E=v.tree_getFirstDescendantNode(C,!0,!0);E!==null;){if(E._nodeDocument=p,c.Guard.isElementNode(E))try{for(var T=(S=void 0,o(E._attributeList._asArray())),y=T.next();!y.done;y=T.next())y.value._nodeDocument=p}catch(M){S={error:M}}finally{try{y&&!y.done&&(I=T.return)&&I.call(T)}finally{if(S)throw S.error}}s.dom.features.customElements&&c.Guard.isElementNode(E)&&E._customElementState==="custom"&&f.customElement_enqueueACustomElementCallbackReaction(E,"adoptedCallback",[D,p]),s.dom.features.steps&&d.dom_runAdoptingSteps(E,D),E=v.tree_getNextDescendantNode(C,E,!0,!0)}}}},function(n,r,a){var i=this&&this.__values||function(v){var g=typeof Symbol=="function"&&Symbol.iterator,d=g&&v[g],m=0;if(d)return d.call(v);if(v&&typeof v.length=="number")return{next:function(){return v&&m>=v.length&&(v=void 0),{value:v&&v[m++],done:!v}}};throw new TypeError(g?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var o=a(6),s=a(3),c=a(9),l=a(17),u=a(51),f=a(30);r.characterData_replaceData=function(v,g,d,m){var h,C,p=l.tree_nodeLength(v);if(g>p)throw new c.IndexSizeError("Offset exceeds character data length. Offset: "+g+", Length: "+p+", Node is "+v.nodeName+".");g+d>p&&(d=p-g),o.dom.features.mutationObservers&&u.observer_queueMutationRecord("characterData",v,null,null,v._data,[],[],null,null);var S=v._data.substring(0,g)+m+v._data.substring(g+d);v._data=S;try{for(var I=i(o.dom.rangeList),D=I.next();!D.done;D=I.next()){var E=D.value;E._start[0]===v&&E._start[1]>g&&E._start[1]<=g+d&&(E._start[1]=g),E._end[0]===v&&E._end[1]>g&&E._end[1]<=g+d&&(E._end[1]=g),E._start[0]===v&&E._start[1]>g+d&&(E._start[1]+=m.length-d),E._end[0]===v&&E._end[1]>g+d&&(E._end[1]+=m.length-d)}}catch(T){h={error:T}}finally{try{D&&!D.done&&(C=I.return)&&C.call(I)}finally{if(h)throw h.error}}o.dom.features.steps&&s.Guard.isTextNode(v)&&v._parent!==null&&f.dom_runChildTextContentChangeSteps(v._parent)},r.characterData_substringData=function(v,g,d){var m=l.tree_nodeLength(v);if(g>m)throw new c.IndexSizeError("Offset exceeds character data length. Offset: "+g+", Length: "+m+", Node is "+v.nodeName+".");return g+d>m?v._data.substr(g):v._data.substr(g,d)}},function(n,r,a){var i=this&&this.__read||function(f,v){var g=typeof Symbol=="function"&&f[Symbol.iterator];if(!g)return f;var d,m,h=g.call(f),C=[];try{for(;(v===void 0||v-- >0)&&!(d=h.next()).done;)C.push(d.value)}catch(p){m={error:p}}finally{try{d&&!d.done&&(g=h.return)&&g.call(h)}finally{if(m)throw m.error}}return C},o=this&&this.__spread||function(){for(var f=[],v=0;v<arguments.length;v++)f=f.concat(i(arguments[v]));return f},s=this&&this.__values||function(f){var v=typeof Symbol=="function"&&Symbol.iterator,g=v&&f[v],d=0;if(g)return g.call(f);if(f&&typeof f.length=="number")return{next:function(){return f&&d>=f.length&&(f=void 0),{value:f&&f[d++],done:!f}}};throw new TypeError(v?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var c=a(7);function l(f){var v=c.string.splitAStringOnASCIIWhitespace(f);return new Set(v)}function u(f){return o(f).join(" ")}r.orderedSet_parse=l,r.orderedSet_serialize=u,r.orderedSet_sanitize=function(f){return u(l(f))},r.orderedSet_contains=function(f,v,g){var d,m,h,C;try{for(var p=s(v),S=p.next();!S.done;S=p.next()){var I=S.value,D=!1;try{for(var E=(h=void 0,s(f)),T=E.next();!T.done;T=E.next()){var y=T.value;if(g){if(y===I){D=!0;break}}else if(y.toUpperCase()===I.toUpperCase()){D=!0;break}}}catch(M){h={error:M}}finally{try{T&&!T.done&&(C=E.return)&&C.call(E)}finally{if(h)throw h.error}}if(!D)return!1}}catch(M){d={error:M}}finally{try{S&&!S.done&&(m=p.return)&&m.call(p)}finally{if(d)throw d.error}}return!0}},function(n,r,a){a(179),Object.defineProperty(r,"__esModule",{value:!0});var i=a(262),o=a(110),s=a(1);o.dom.setFeatures(!1),r.createDocument=function(){var c=new i.DOMImplementation().createDocument(null,"root",null);return c.documentElement&&c.removeChild(c.documentElement),c},r.sanitizeInput=function(c,l){if(c==null)return c;if(l===void 0)return c+"";var u="";c+="";for(var f=0;f<c.length;f++){var v=c.charCodeAt(f);if(v===9||v===10||v===13||v>=32&&v<=55295||v>=57344&&v<=65533)u+=c.charAt(f);else if(v>=55296&&v<=56319&&f<c.length-1){var g=c.charCodeAt(f+1);g>=56320&&g<=57343?(v=1024*(v-55296)+g-56320+65536,u+=String.fromCodePoint(v),f++):u+=s.isString(l)?l:l(c.charAt(f),f,c)}else u+=s.isString(l)?l:l(c.charAt(f),f,c)}return u}},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(1),o=a(153);r.AbortController=o.AbortControllerImpl;var s=a(154);r.AbortSignal=s.AbortSignalImpl;var c=a(102);r.AbstractRange=c.AbstractRangeImpl;var l=a(157);r.Attr=l.AttrImpl;var u=a(158);r.CDATASection=u.CDATASectionImpl;var f=a(71);r.CharacterData=f.CharacterDataImpl;var v=a(263),g=a(159);r.Comment=g.CommentImpl;var d=a(171);r.CustomEvent=d.CustomEventImpl;var m=a(100);r.DocumentFragment=m.DocumentFragmentImpl;var h=a(98);r.Document=h.DocumentImpl;var C=a(264),p=a(155);r.DocumentType=p.DocumentTypeImpl;var S=a(6);r.dom=S.dom;var I=a(148);r.DOMImplementation=I.DOMImplementationImpl;var D=a(170);r.DOMTokenList=D.DOMTokenListImpl;var E=a(99);r.Element=E.ElementImpl;var T=a(104);r.Event=T.EventImpl;var y=a(70);r.EventTarget=y.EventTargetImpl;var M=a(161);r.HTMLCollection=M.HTMLCollectionImpl;var _=a(265);r.MutationObserver=_.MutationObserverImpl;var O=a(169);r.MutationRecord=O.MutationRecordImpl;var w=a(164);r.NamedNodeMap=w.NamedNodeMapImpl;var x=a(168);r.NodeFilter=x.NodeFilterImpl;var P=a(34);r.Node=P.NodeImpl;var R=a(166);r.NodeIterator=R.NodeIteratorImpl;var L=a(162);r.NodeList=L.NodeListImpl;var H=a(163);r.NodeListStatic=H.NodeListStaticImpl;var F=a(266),U=a(267),V=a(268),X=a(160);r.ProcessingInstruction=X.ProcessingInstructionImpl;var re=a(165);r.Range=re.RangeImpl;var ue=a(156);r.ShadowRoot=ue.ShadowRootImpl;var De=a(269),pe=a(270);r.StaticRange=pe.StaticRangeImpl;var Te=a(101);r.Text=Te.TextImpl;var Fe=a(103);r.Traverser=Fe.TraverserImpl;var Ne=a(167);r.TreeWalker=Ne.TreeWalkerImpl;var Re=a(149);r.Window=Re.WindowImpl;var k=a(151);r.XMLDocument=k.XMLDocumentImpl,i.applyMixin(E.ElementImpl,v.ChildNodeImpl),i.applyMixin(f.CharacterDataImpl,v.ChildNodeImpl),i.applyMixin(p.DocumentTypeImpl,v.ChildNodeImpl),i.applyMixin(h.DocumentImpl,C.DocumentOrShadowRootImpl),i.applyMixin(ue.ShadowRootImpl,C.DocumentOrShadowRootImpl),i.applyMixin(E.ElementImpl,F.NonDocumentTypeChildNodeImpl),i.applyMixin(f.CharacterDataImpl,F.NonDocumentTypeChildNodeImpl),i.applyMixin(h.DocumentImpl,U.NonElementParentNodeImpl),i.applyMixin(m.DocumentFragmentImpl,U.NonElementParentNodeImpl),i.applyMixin(h.DocumentImpl,V.ParentNodeImpl),i.applyMixin(m.DocumentFragmentImpl,V.ParentNodeImpl),i.applyMixin(E.ElementImpl,V.ParentNodeImpl),i.applyMixin(Te.TextImpl,De.SlotableImpl),i.applyMixin(E.ElementImpl,De.SlotableImpl)},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),function(i){i[i.EOF=0]="EOF",i[i.Declaration=1]="Declaration",i[i.DocType=2]="DocType",i[i.Element=3]="Element",i[i.Text=4]="Text",i[i.CDATA=5]="CDATA",i[i.PI=6]="PI",i[i.Comment=7]="Comment",i[i.ClosingTag=8]="ClosingTag"}(r.TokenType||(r.TokenType={}))},function(n,r,a){a(64),a(20),a(66);var i,o=this&&this.__extends||(i=function(l,u){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,v){f.__proto__=v}||function(f,v){for(var g in v)v.hasOwnProperty(g)&&(f[g]=v[g])})(l,u)},function(l,u){function f(){this.constructor=l}i(l,u),l.prototype=u===null?Object.create(u):(f.prototype=u.prototype,new f)});Object.defineProperty(r,"__esModule",{value:!0});var s=a(1),c=function(l){function u(){return l!==null&&l.apply(this,arguments)||this}return o(u,l),u.prototype._parse=function(f,v){var g=this,d=this._builderOptions,m=null;return s.isFunction(v)?m=this.parse(f,v.apply(this)):s.isArray(v)||s.isSet(v)?s.forEachArray(v,function(h){return m=g.parse(f,h)},this):s.isMap(v)||s.isObject(v)?s.forEachObject(v,function(h,C){if(s.isFunction(C)&&(C=C.apply(g)),d.ignoreConverters||h.indexOf(d.convert.att)!==0)if(d.ignoreConverters||h.indexOf(d.convert.text)!==0)if(d.ignoreConverters||h.indexOf(d.convert.cdata)!==0)if(d.ignoreConverters||h.indexOf(d.convert.comment)!==0)if(d.ignoreConverters||h.indexOf(d.convert.ins)!==0){if(!((s.isArray(C)||s.isSet(C))&&s.isEmpty(C))){if((s.isMap(C)||s.isObject(C))&&s.isEmpty(C))m=g.element(f,void 0,g.sanitize(h))||m;else if(d.keepNullNodes||C!=null)if(s.isArray(C)||s.isSet(C))s.forEachArray(C,function(E){var T={};T[h]=E,m=g.parse(f,T)},g);else if(s.isMap(C)||s.isObject(C))(p=g.element(f,void 0,g.sanitize(h)))&&(m=p,g.parse(p,C));else if(C!=null&&C!==""){var p;(p=g.element(f,void 0,g.sanitize(h)))&&(m=p,g.text(p,g._decodeText(g.sanitize(C))))}else m=g.element(f,void 0,g.sanitize(h))||m}}else if(s.isString(C)){var S=C.indexOf(" "),I=S===-1?C:C.substr(0,S),D=S===-1?"":C.substr(S+1);m=g.instruction(f,g.sanitize(I),g.sanitize(D))||m}else s.isArray(C)||s.isSet(C)?s.forEachArray(C,function(E){var T=E.indexOf(" "),y=T===-1?E:E.substr(0,T),M=T===-1?"":E.substr(T+1);m=g.instruction(f,g.sanitize(y),g.sanitize(M))||m},g):s.forEachObject(C,function(E,T){return m=g.instruction(f,g.sanitize(E),g.sanitize(T))||m},g);else s.isArray(C)||s.isSet(C)?s.forEachArray(C,function(E){return m=g.comment(f,g.sanitize(E))||m},g):m=g.comment(f,g.sanitize(C))||m;else s.isArray(C)||s.isSet(C)?s.forEachArray(C,function(E){return m=g.cdata(f,g.sanitize(E))||m},g):m=g.cdata(f,g.sanitize(C))||m;else m=s.isMap(C)||s.isObject(C)?g.parse(f,C):g.text(f,g._decodeText(g.sanitize(C)))||m;else if(h===d.convert.att){if(s.isArray(C)||s.isSet(C))throw new Error("Invalid attribute: "+C.toString()+". "+f._debugInfo());s.forEachObject(C,function(E,T){m=g.attribute(f,void 0,g.sanitize(E),g._decodeAttributeValue(g.sanitize(T)))||m})}else m=g.attribute(f,void 0,g.sanitize(h.substr(d.convert.att.length)),g._decodeAttributeValue(g.sanitize(C)))||m},this):(d.keepNullNodes||v!=null)&&(m=this.text(f,this._decodeText(this.sanitize(v)))||m),m||f},u}(a(75).BaseReader);r.ObjectReader=c},function(n,r,a){var i=a(39);n.exports=new i({explicit:[a(286),a(287),a(288)]})},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=function(o){this.level=0,this._builderOptions=o,this._writerOptions=o};r.BaseCBWriter=i},function(n,r,a){var i=a(16),o=a(8),s=a(116);n.exports=!i&&!o(function(){return Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a!=7})},function(n,r,a){var i=a(11),o=a(13),s=i.document,c=o(s)&&o(s.createElement);n.exports=function(l){return c?s.createElement(l):{}}},function(n,r,a){var i=a(118),o=Function.toString;typeof i.inspectSource!="function"&&(i.inspectSource=function(s){return o.call(s)}),n.exports=i.inspectSource},function(n,r,a){var i=a(11),o=a(80),s=i["__core-js_shared__"]||o("__core-js_shared__",{});n.exports=s},function(n,r,a){var i=a(14),o=a(187),s=a(55),c=a(15);n.exports=function(l,u){for(var f=o(u),v=c.f,g=s.f,d=0;d<f.length;d++){var m=f[d];i(l,m)||v(l,m,g(u,m))}}},function(n,r,a){var i=a(11);n.exports=i},function(n,r,a){var i=a(14),o=a(24),s=a(122).indexOf,c=a(45);n.exports=function(l,u){var f,v=o(l),g=0,d=[];for(f in v)!i(c,f)&&i(v,f)&&d.push(f);for(;u.length>g;)i(v,f=u[g++])&&(~s(d,f)||d.push(f));return d}},function(n,r,a){var i=a(24),o=a(26),s=a(83),c=function(l){return function(u,f,v){var g,d=i(u),m=o(d.length),h=s(v,m);if(l&&f!=f){for(;m>h;)if((g=d[h++])!=g)return!0}else for(;m>h;h++)if((l||h in d)&&d[h]===f)return l||h||0;return!l&&-1}};n.exports={includes:c(!0),indexOf:c(!1)}},function(n,r,a){var i=a(8),o=/#|\.prototype\./,s=function(v,g){var d=l[c(v)];return d==f||d!=u&&(typeof g=="function"?i(g):!!g)},c=s.normalize=function(v){return String(v).replace(o,".").toLowerCase()},l=s.data={},u=s.NATIVE="N",f=s.POLYFILL="P";n.exports=s},function(n,r,a){var i=a(86);n.exports=i&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},function(n,r,a){var i=a(5);r.f=i},function(n,r,a){var i=a(120),o=a(14),s=a(125),c=a(15).f;n.exports=function(l){var u=i.Symbol||(i.Symbol={});o(u,l)||c(u,l,{value:s.f(l)})}},function(n,r){n.exports=function(a){if(typeof a!="function")throw TypeError(String(a)+" is not a function");return a}},function(n,r,a){var i=a(13),o=a(59),s=a(5)("species");n.exports=function(c,l){var u;return o(c)&&(typeof(u=c.constructor)!="function"||u!==Array&&!o(u.prototype)?i(u)&&(u=u[s])===null&&(u=void 0):u=void 0),new(u===void 0?Array:u)(l===0?0:l)}},function(n,r,a){var i,o,s=a(11),c=a(193),l=s.process,u=l&&l.versions,f=u&&u.v8;f?o=(i=f.split("."))[0]+i[1]:c&&(!(i=c.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=c.match(/Chrome\/(\d+)/))&&(o=i[1]),n.exports=o&&+o},function(n,r,a){var i=a(5),o=a(60),s=a(15),c=i("unscopables"),l=Array.prototype;l[c]==null&&s.f(l,c,{configurable:!0,value:o(null)}),n.exports=function(u){l[c][u]=!0}},function(n,r,a){var i,o,s,c=a(132),l=a(21),u=a(14),f=a(5),v=a(44),g=f("iterator"),d=!1;[].keys&&("next"in(s=[].keys())?(o=c(c(s)))!==Object.prototype&&(i=o):d=!0),i==null&&(i={}),v||u(i,g)||l(i,g,function(){return this}),n.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:d}},function(n,r,a){var i=a(14),o=a(27),s=a(57),c=a(196),l=s("IE_PROTO"),u=Object.prototype;n.exports=c?Object.getPrototypeOf:function(f){return f=o(f),i(f,l)?f[l]:typeof f.constructor=="function"&&f instanceof f.constructor?f.constructor.prototype:f instanceof Object?u:null}},function(n,r,a){var i=a(18),o=a(197);n.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var s,c=!1,l={};try{(s=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(l,[]),c=l instanceof Array}catch{}return function(u,f){return i(u),o(f),c?s.call(u,f):u.__proto__=f,u}}():void 0)},function(n,r,a){var i=a(56),o=a(15),s=a(40);n.exports=function(c,l,u){var f=i(l);f in c?o.f(c,f,s(0,u)):c[f]=u}},function(n,r,a){var i=a(90),o=a(42),s=a(5)("toStringTag"),c=o(function(){return arguments}())=="Arguments";n.exports=i?o:function(l){var u,f,v;return l===void 0?"Undefined":l===null?"Null":typeof(f=function(g,d){try{return g[d]}catch{}}(u=Object(l),s))=="string"?f:c?o(u):(v=o(u))=="Object"&&typeof u.callee=="function"?"Arguments":v}},function(n,r,a){var i=a(18);n.exports=function(){var o=i(this),s="";return o.global&&(s+="g"),o.ignoreCase&&(s+="i"),o.multiline&&(s+="m"),o.dotAll&&(s+="s"),o.unicode&&(s+="u"),o.sticky&&(s+="y"),s}},function(n,r,a){var i=a(47),o=a(35),s=function(c){return function(l,u){var f,v,g=String(o(l)),d=i(u),m=g.length;return d<0||d>=m?c?"":void 0:(f=g.charCodeAt(d))<55296||f>56319||d+1===m||(v=g.charCodeAt(d+1))<56320||v>57343?c?g.charAt(d):f:c?g.slice(d,d+2):v-56320+(f-55296<<10)+65536}};n.exports={codeAt:s(!1),charAt:s(!0)}},function(n,r,a){var i=a(4),o=a(27),s=a(61);i({target:"Object",stat:!0,forced:a(8)(function(){s(1)})},{keys:function(c){return s(o(c))}})},function(n,r,a){var i=a(4),o=a(11),s=a(123),c=a(25),l=a(140),u=a(141),f=a(142),v=a(13),g=a(8),d=a(208),m=a(62),h=a(209);n.exports=function(C,p,S){var I=C.indexOf("Map")!==-1,D=C.indexOf("Weak")!==-1,E=I?"set":"add",T=o[C],y=T&&T.prototype,M=T,_={},O=function(H){var F=y[H];c(y,H,H=="add"?function(U){return F.call(this,U===0?0:U),this}:H=="delete"?function(U){return!(D&&!v(U))&&F.call(this,U===0?0:U)}:H=="get"?function(U){return D&&!v(U)?void 0:F.call(this,U===0?0:U)}:H=="has"?function(U){return!(D&&!v(U))&&F.call(this,U===0?0:U)}:function(U,V){return F.call(this,U===0?0:U,V),this})};if(s(C,typeof T!="function"||!(D||y.forEach&&!g(function(){new T().entries().next()}))))M=S.getConstructor(p,C,I,E),l.REQUIRED=!0;else if(s(C,!0)){var w=new M,x=w[E](D?{}:-0,1)!=w,P=g(function(){w.has(1)}),R=d(function(H){new T(H)}),L=!D&&g(function(){for(var H=new T,F=5;F--;)H[E](F,F);return!H.has(-0)});R||((M=p(function(H,F){f(H,M,C);var U=h(new T,H,M);return F!=null&&u(F,U[E],U,I),U})).prototype=y,y.constructor=M),(P||L)&&(O("delete"),O("has"),I&&O("get")),(L||x)&&O(E),D&&y.clear&&delete y.clear}return _[C]=M,i({global:!0,forced:M!=T},_),m(M,C),D||S.setStrong(M,C,I),M}},function(n,r,a){var i=a(45),o=a(13),s=a(14),c=a(15).f,l=a(58),u=a(204),f=l("meta"),v=0,g=Object.isExtensible||function(){return!0},d=function(h){c(h,f,{value:{objectID:"O"+ ++v,weakData:{}}})},m=n.exports={REQUIRED:!1,fastKey:function(h,C){if(!o(h))return typeof h=="symbol"?h:(typeof h=="string"?"S":"P")+h;if(!s(h,f)){if(!g(h))return"F";if(!C)return"E";d(h)}return h[f].objectID},getWeakData:function(h,C){if(!s(h,f)){if(!g(h))return!0;if(!C)return!1;d(h)}return h[f].weakData},onFreeze:function(h){return u&&m.REQUIRED&&g(h)&&!s(h,f)&&d(h),h}};i[f]=!0},function(n,r,a){var i=a(18),o=a(205),s=a(26),c=a(87),l=a(206),u=a(207),f=function(v,g){this.stopped=v,this.result=g};(n.exports=function(v,g,d,m,h){var C,p,S,I,D,E,T,y=c(g,d,m?2:1);if(h)C=v;else{if(typeof(p=l(v))!="function")throw TypeError("Target is not iterable");if(o(p)){for(S=0,I=s(v.length);I>S;S++)if((D=m?y(i(T=v[S])[0],T[1]):y(v[S]))&&D instanceof f)return D;return new f(!1)}C=p.call(v)}for(E=C.next;!(T=E.call(C)).done;)if(typeof(D=u(C,y,T.value,m))=="object"&&D&&D instanceof f)return D;return new f(!1)}).stop=function(v){return new f(!0,v)}},function(n,r){n.exports=function(a,i,o){if(!(a instanceof i))throw TypeError("Incorrect "+(o?o+" ":"")+"invocation");return a}},function(n,r,a){var i=a(15).f,o=a(60),s=a(210),c=a(87),l=a(142),u=a(141),f=a(88),v=a(211),g=a(16),d=a(140).fastKey,m=a(43),h=m.set,C=m.getterFor;n.exports={getConstructor:function(p,S,I,D){var E=p(function(_,O){l(_,E,S),h(_,{type:S,index:o(null),first:void 0,last:void 0,size:0}),g||(_.size=0),O!=null&&u(O,_[D],_,I)}),T=C(S),y=function(_,O,w){var x,P,R=T(_),L=M(_,O);return L?L.value=w:(R.last=L={index:P=d(O,!0),key:O,value:w,previous:x=R.last,next:void 0,removed:!1},R.first||(R.first=L),x&&(x.next=L),g?R.size++:_.size++,P!=="F"&&(R.index[P]=L)),_},M=function(_,O){var w,x=T(_),P=d(O);if(P!=="F")return x.index[P];for(w=x.first;w;w=w.next)if(w.key==O)return w};return s(E.prototype,{clear:function(){for(var _=T(this),O=_.index,w=_.first;w;)w.removed=!0,w.previous&&(w.previous=w.previous.next=void 0),delete O[w.index],w=w.next;_.first=_.last=void 0,g?_.size=0:this.size=0},delete:function(_){var O=T(this),w=M(this,_);if(w){var x=w.next,P=w.previous;delete O.index[w.index],w.removed=!0,P&&(P.next=x),x&&(x.previous=P),O.first==w&&(O.first=x),O.last==w&&(O.last=P),g?O.size--:this.size--}return!!w},forEach:function(_){for(var O,w=T(this),x=c(_,arguments.length>1?arguments[1]:void 0,3);O=O?O.next:w.first;)for(x(O.value,O.key,this);O&&O.removed;)O=O.previous},has:function(_){return!!M(this,_)}}),s(E.prototype,I?{get:function(_){var O=M(this,_);return O&&O.value},set:function(_,O){return y(this,_===0?0:_,O)}}:{add:function(_){return y(this,_=_===0?0:_,_)}}),g&&i(E.prototype,"size",{get:function(){return T(this).size}}),E},setStrong:function(p,S,I){var D=S+" Iterator",E=C(S),T=C(D);f(p,S,function(y,M){h(this,{type:D,target:y,state:E(y),kind:M,last:void 0})},function(){for(var y=T(this),M=y.kind,_=y.last;_&&_.removed;)_=_.previous;return y.target&&(y.last=_=_?_.next:y.state.first)?M=="keys"?{value:_.key,done:!1}:M=="values"?{value:_.value,done:!1}:{value:[_.key,_.value],done:!1}:(y.target=void 0,{value:void 0,done:!0})},I?"entries":"values",!I,!0),v(S)}}},function(n,r,a){var i,o=a(4),s=a(55).f,c=a(26),l=a(222),u=a(35),f=a(224),v=a(44),g="".endsWith,d=Math.min,m=f("endsWith");o({target:"String",proto:!0,forced:!!(v||m||(i=s(String.prototype,"endsWith"),!i||i.writable))&&!m},{endsWith:function(h){var C=String(u(this));l(h);var p=arguments.length>1?arguments[1]:void 0,S=c(C.length),I=p===void 0?S:d(c(p),S),D=String(h);return g?g.call(C,D,I):C.slice(I-D.length,I)===D}})},function(n,r,a){(function(i){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */var o=a(229),s=a(230),c=a(231);function l(){return f.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(k,A){if(l()<A)throw new RangeError("Invalid typed array length");return f.TYPED_ARRAY_SUPPORT?(k=new Uint8Array(A)).__proto__=f.prototype:(k===null&&(k=new f(A)),k.length=A),k}function f(k,A,b){if(!(f.TYPED_ARRAY_SUPPORT||this instanceof f))return new f(k,A,b);if(typeof k=="number"){if(typeof A=="string")throw new Error("If encoding is specified then the first argument must be a string");return d(this,k)}return v(this,k,A,b)}function v(k,A,b,N){if(typeof A=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&A instanceof ArrayBuffer?function(W,j,K,ge){if(j.byteLength,K<0||j.byteLength<K)throw new RangeError("'offset' is out of bounds");if(j.byteLength<K+(ge||0))throw new RangeError("'length' is out of bounds");return j=K===void 0&&ge===void 0?new Uint8Array(j):ge===void 0?new Uint8Array(j,K):new Uint8Array(j,K,ge),f.TYPED_ARRAY_SUPPORT?(W=j).__proto__=f.prototype:W=m(W,j),W}(k,A,b,N):typeof A=="string"?function(W,j,K){if(typeof K=="string"&&K!==""||(K="utf8"),!f.isEncoding(K))throw new TypeError('"encoding" must be a valid string encoding');var ge=0|C(j,K),ye=(W=u(W,ge)).write(j,K);return ye!==ge&&(W=W.slice(0,ye)),W}(k,A,b):function(W,j){if(f.isBuffer(j)){var K=0|h(j.length);return(W=u(W,K)).length===0||j.copy(W,0,0,K),W}if(j){if(typeof ArrayBuffer<"u"&&j.buffer instanceof ArrayBuffer||"length"in j)return typeof j.length!="number"||(ge=j.length)!=ge?u(W,0):m(W,j);if(j.type==="Buffer"&&c(j.data))return m(W,j.data)}var ge;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(k,A)}function g(k){if(typeof k!="number")throw new TypeError('"size" argument must be a number');if(k<0)throw new RangeError('"size" argument must not be negative')}function d(k,A){if(g(A),k=u(k,A<0?0:0|h(A)),!f.TYPED_ARRAY_SUPPORT)for(var b=0;b<A;++b)k[b]=0;return k}function m(k,A){var b=A.length<0?0:0|h(A.length);k=u(k,b);for(var N=0;N<b;N+=1)k[N]=255&A[N];return k}function h(k){if(k>=l())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+l().toString(16)+" bytes");return 0|k}function C(k,A){if(f.isBuffer(k))return k.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(k)||k instanceof ArrayBuffer))return k.byteLength;typeof k!="string"&&(k=""+k);var b=k.length;if(b===0)return 0;for(var N=!1;;)switch(A){case"ascii":case"latin1":case"binary":return b;case"utf8":case"utf-8":case void 0:return Fe(k).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*b;case"hex":return b>>>1;case"base64":return Ne(k).length;default:if(N)return Fe(k).length;A=(""+A).toLowerCase(),N=!0}}function p(k,A,b){var N=!1;if((A===void 0||A<0)&&(A=0),A>this.length||((b===void 0||b>this.length)&&(b=this.length),b<=0)||(b>>>=0)<=(A>>>=0))return"";for(k||(k="utf8");;)switch(k){case"hex":return L(this,A,b);case"utf8":case"utf-8":return x(this,A,b);case"ascii":return P(this,A,b);case"latin1":case"binary":return R(this,A,b);case"base64":return w(this,A,b);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,A,b);default:if(N)throw new TypeError("Unknown encoding: "+k);k=(k+"").toLowerCase(),N=!0}}function S(k,A,b){var N=k[A];k[A]=k[b],k[b]=N}function I(k,A,b,N,W){if(k.length===0)return-1;if(typeof b=="string"?(N=b,b=0):b>2147483647?b=2147483647:b<-2147483648&&(b=-2147483648),b=+b,isNaN(b)&&(b=W?0:k.length-1),b<0&&(b=k.length+b),b>=k.length){if(W)return-1;b=k.length-1}else if(b<0){if(!W)return-1;b=0}if(typeof A=="string"&&(A=f.from(A,N)),f.isBuffer(A))return A.length===0?-1:D(k,A,b,N,W);if(typeof A=="number")return A&=255,f.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?W?Uint8Array.prototype.indexOf.call(k,A,b):Uint8Array.prototype.lastIndexOf.call(k,A,b):D(k,[A],b,N,W);throw new TypeError("val must be string, number or Buffer")}function D(k,A,b,N,W){var j,K=1,ge=k.length,ye=A.length;if(N!==void 0&&((N=String(N).toLowerCase())==="ucs2"||N==="ucs-2"||N==="utf16le"||N==="utf-16le")){if(k.length<2||A.length<2)return-1;K=2,ge/=2,ye/=2,b/=2}function we(he,se){return K===1?he[se]:he.readUInt16BE(se*K)}if(W){var be=-1;for(j=b;j<ge;j++)if(we(k,j)===we(A,be===-1?0:j-be)){if(be===-1&&(be=j),j-be+1===ye)return be*K}else be!==-1&&(j-=j-be),be=-1}else for(b+ye>ge&&(b=ge-ye),j=b;j>=0;j--){for(var Z=!0,ie=0;ie<ye;ie++)if(we(k,j+ie)!==we(A,ie)){Z=!1;break}if(Z)return j}return-1}function E(k,A,b,N){b=Number(b)||0;var W=k.length-b;N?(N=Number(N))>W&&(N=W):N=W;var j=A.length;if(j%2!=0)throw new TypeError("Invalid hex string");N>j/2&&(N=j/2);for(var K=0;K<N;++K){var ge=parseInt(A.substr(2*K,2),16);if(isNaN(ge))return K;k[b+K]=ge}return K}function T(k,A,b,N){return Re(Fe(A,k.length-b),k,b,N)}function y(k,A,b,N){return Re(function(W){for(var j=[],K=0;K<W.length;++K)j.push(255&W.charCodeAt(K));return j}(A),k,b,N)}function M(k,A,b,N){return y(k,A,b,N)}function _(k,A,b,N){return Re(Ne(A),k,b,N)}function O(k,A,b,N){return Re(function(W,j){for(var K,ge,ye,we=[],be=0;be<W.length&&!((j-=2)<0);++be)K=W.charCodeAt(be),ge=K>>8,ye=K%256,we.push(ye),we.push(ge);return we}(A,k.length-b),k,b,N)}function w(k,A,b){return A===0&&b===k.length?o.fromByteArray(k):o.fromByteArray(k.slice(A,b))}function x(k,A,b){b=Math.min(k.length,b);for(var N=[],W=A;W<b;){var j,K,ge,ye,we=k[W],be=null,Z=we>239?4:we>223?3:we>191?2:1;if(W+Z<=b)switch(Z){case 1:we<128&&(be=we);break;case 2:(192&(j=k[W+1]))==128&&(ye=(31&we)<<6|63&j)>127&&(be=ye);break;case 3:j=k[W+1],K=k[W+2],(192&j)==128&&(192&K)==128&&(ye=(15&we)<<12|(63&j)<<6|63&K)>2047&&(ye<55296||ye>57343)&&(be=ye);break;case 4:j=k[W+1],K=k[W+2],ge=k[W+3],(192&j)==128&&(192&K)==128&&(192&ge)==128&&(ye=(15&we)<<18|(63&j)<<12|(63&K)<<6|63&ge)>65535&&ye<1114112&&(be=ye)}be===null?(be=65533,Z=1):be>65535&&(be-=65536,N.push(be>>>10&1023|55296),be=56320|1023&be),N.push(be),W+=Z}return function(ie){var he=ie.length;if(he<=4096)return String.fromCharCode.apply(String,ie);for(var se="",me=0;me<he;)se+=String.fromCharCode.apply(String,ie.slice(me,me+=4096));return se}(N)}r.Buffer=f,r.SlowBuffer=function(k){return+k!=k&&(k=0),f.alloc(+k)},r.INSPECT_MAX_BYTES=50,f.TYPED_ARRAY_SUPPORT=i.TYPED_ARRAY_SUPPORT!==void 0?i.TYPED_ARRAY_SUPPORT:function(){try{var k=new Uint8Array(1);return k.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},k.foo()===42&&typeof k.subarray=="function"&&k.subarray(1,1).byteLength===0}catch{return!1}}(),r.kMaxLength=l(),f.poolSize=8192,f._augment=function(k){return k.__proto__=f.prototype,k},f.from=function(k,A,b){return v(null,k,A,b)},f.TYPED_ARRAY_SUPPORT&&(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0})),f.alloc=function(k,A,b){return function(N,W,j,K){return g(W),W<=0?u(N,W):j!==void 0?typeof K=="string"?u(N,W).fill(j,K):u(N,W).fill(j):u(N,W)}(null,k,A,b)},f.allocUnsafe=function(k){return d(null,k)},f.allocUnsafeSlow=function(k){return d(null,k)},f.isBuffer=function(k){return!(k==null||!k._isBuffer)},f.compare=function(k,A){if(!f.isBuffer(k)||!f.isBuffer(A))throw new TypeError("Arguments must be Buffers");if(k===A)return 0;for(var b=k.length,N=A.length,W=0,j=Math.min(b,N);W<j;++W)if(k[W]!==A[W]){b=k[W],N=A[W];break}return b<N?-1:N<b?1:0},f.isEncoding=function(k){switch(String(k).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(k,A){if(!c(k))throw new TypeError('"list" argument must be an Array of Buffers');if(k.length===0)return f.alloc(0);var b;if(A===void 0)for(A=0,b=0;b<k.length;++b)A+=k[b].length;var N=f.allocUnsafe(A),W=0;for(b=0;b<k.length;++b){var j=k[b];if(!f.isBuffer(j))throw new TypeError('"list" argument must be an Array of Buffers');j.copy(N,W),W+=j.length}return N},f.byteLength=C,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var k=this.length;if(k%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var A=0;A<k;A+=2)S(this,A,A+1);return this},f.prototype.swap32=function(){var k=this.length;if(k%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var A=0;A<k;A+=4)S(this,A,A+3),S(this,A+1,A+2);return this},f.prototype.swap64=function(){var k=this.length;if(k%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var A=0;A<k;A+=8)S(this,A,A+7),S(this,A+1,A+6),S(this,A+2,A+5),S(this,A+3,A+4);return this},f.prototype.toString=function(){var k=0|this.length;return k===0?"":arguments.length===0?x(this,0,k):p.apply(this,arguments)},f.prototype.equals=function(k){if(!f.isBuffer(k))throw new TypeError("Argument must be a Buffer");return this===k||f.compare(this,k)===0},f.prototype.inspect=function(){var k="",A=r.INSPECT_MAX_BYTES;return this.length>0&&(k=this.toString("hex",0,A).match(/.{2}/g).join(" "),this.length>A&&(k+=" ... ")),"<Buffer "+k+">"},f.prototype.compare=function(k,A,b,N,W){if(!f.isBuffer(k))throw new TypeError("Argument must be a Buffer");if(A===void 0&&(A=0),b===void 0&&(b=k?k.length:0),N===void 0&&(N=0),W===void 0&&(W=this.length),A<0||b>k.length||N<0||W>this.length)throw new RangeError("out of range index");if(N>=W&&A>=b)return 0;if(N>=W)return-1;if(A>=b)return 1;if(this===k)return 0;for(var j=(W>>>=0)-(N>>>=0),K=(b>>>=0)-(A>>>=0),ge=Math.min(j,K),ye=this.slice(N,W),we=k.slice(A,b),be=0;be<ge;++be)if(ye[be]!==we[be]){j=ye[be],K=we[be];break}return j<K?-1:K<j?1:0},f.prototype.includes=function(k,A,b){return this.indexOf(k,A,b)!==-1},f.prototype.indexOf=function(k,A,b){return I(this,k,A,b,!0)},f.prototype.lastIndexOf=function(k,A,b){return I(this,k,A,b,!1)},f.prototype.write=function(k,A,b,N){if(A===void 0)N="utf8",b=this.length,A=0;else if(b===void 0&&typeof A=="string")N=A,b=this.length,A=0;else{if(!isFinite(A))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");A|=0,isFinite(b)?(b|=0,N===void 0&&(N="utf8")):(N=b,b=void 0)}var W=this.length-A;if((b===void 0||b>W)&&(b=W),k.length>0&&(b<0||A<0)||A>this.length)throw new RangeError("Attempt to write outside buffer bounds");N||(N="utf8");for(var j=!1;;)switch(N){case"hex":return E(this,k,A,b);case"utf8":case"utf-8":return T(this,k,A,b);case"ascii":return y(this,k,A,b);case"latin1":case"binary":return M(this,k,A,b);case"base64":return _(this,k,A,b);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,k,A,b);default:if(j)throw new TypeError("Unknown encoding: "+N);N=(""+N).toLowerCase(),j=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function P(k,A,b){var N="";b=Math.min(k.length,b);for(var W=A;W<b;++W)N+=String.fromCharCode(127&k[W]);return N}function R(k,A,b){var N="";b=Math.min(k.length,b);for(var W=A;W<b;++W)N+=String.fromCharCode(k[W]);return N}function L(k,A,b){var N=k.length;(!A||A<0)&&(A=0),(!b||b<0||b>N)&&(b=N);for(var W="",j=A;j<b;++j)W+=Te(k[j]);return W}function H(k,A,b){for(var N=k.slice(A,b),W="",j=0;j<N.length;j+=2)W+=String.fromCharCode(N[j]+256*N[j+1]);return W}function F(k,A,b){if(k%1!=0||k<0)throw new RangeError("offset is not uint");if(k+A>b)throw new RangeError("Trying to access beyond buffer length")}function U(k,A,b,N,W,j){if(!f.isBuffer(k))throw new TypeError('"buffer" argument must be a Buffer instance');if(A>W||A<j)throw new RangeError('"value" argument is out of bounds');if(b+N>k.length)throw new RangeError("Index out of range")}function V(k,A,b,N){A<0&&(A=65535+A+1);for(var W=0,j=Math.min(k.length-b,2);W<j;++W)k[b+W]=(A&255<<8*(N?W:1-W))>>>8*(N?W:1-W)}function X(k,A,b,N){A<0&&(A=4294967295+A+1);for(var W=0,j=Math.min(k.length-b,4);W<j;++W)k[b+W]=A>>>8*(N?W:3-W)&255}function re(k,A,b,N,W,j){if(b+N>k.length)throw new RangeError("Index out of range");if(b<0)throw new RangeError("Index out of range")}function ue(k,A,b,N,W){return W||re(k,0,b,4),s.write(k,A,b,N,23,4),b+4}function De(k,A,b,N,W){return W||re(k,0,b,8),s.write(k,A,b,N,52,8),b+8}f.prototype.slice=function(k,A){var b,N=this.length;if((k=~~k)<0?(k+=N)<0&&(k=0):k>N&&(k=N),(A=A===void 0?N:~~A)<0?(A+=N)<0&&(A=0):A>N&&(A=N),A<k&&(A=k),f.TYPED_ARRAY_SUPPORT)(b=this.subarray(k,A)).__proto__=f.prototype;else{var W=A-k;b=new f(W,void 0);for(var j=0;j<W;++j)b[j]=this[j+k]}return b},f.prototype.readUIntLE=function(k,A,b){k|=0,A|=0,b||F(k,A,this.length);for(var N=this[k],W=1,j=0;++j<A&&(W*=256);)N+=this[k+j]*W;return N},f.prototype.readUIntBE=function(k,A,b){k|=0,A|=0,b||F(k,A,this.length);for(var N=this[k+--A],W=1;A>0&&(W*=256);)N+=this[k+--A]*W;return N},f.prototype.readUInt8=function(k,A){return A||F(k,1,this.length),this[k]},f.prototype.readUInt16LE=function(k,A){return A||F(k,2,this.length),this[k]|this[k+1]<<8},f.prototype.readUInt16BE=function(k,A){return A||F(k,2,this.length),this[k]<<8|this[k+1]},f.prototype.readUInt32LE=function(k,A){return A||F(k,4,this.length),(this[k]|this[k+1]<<8|this[k+2]<<16)+16777216*this[k+3]},f.prototype.readUInt32BE=function(k,A){return A||F(k,4,this.length),16777216*this[k]+(this[k+1]<<16|this[k+2]<<8|this[k+3])},f.prototype.readIntLE=function(k,A,b){k|=0,A|=0,b||F(k,A,this.length);for(var N=this[k],W=1,j=0;++j<A&&(W*=256);)N+=this[k+j]*W;return N>=(W*=128)&&(N-=Math.pow(2,8*A)),N},f.prototype.readIntBE=function(k,A,b){k|=0,A|=0,b||F(k,A,this.length);for(var N=A,W=1,j=this[k+--N];N>0&&(W*=256);)j+=this[k+--N]*W;return j>=(W*=128)&&(j-=Math.pow(2,8*A)),j},f.prototype.readInt8=function(k,A){return A||F(k,1,this.length),128&this[k]?-1*(255-this[k]+1):this[k]},f.prototype.readInt16LE=function(k,A){A||F(k,2,this.length);var b=this[k]|this[k+1]<<8;return 32768&b?4294901760|b:b},f.prototype.readInt16BE=function(k,A){A||F(k,2,this.length);var b=this[k+1]|this[k]<<8;return 32768&b?4294901760|b:b},f.prototype.readInt32LE=function(k,A){return A||F(k,4,this.length),this[k]|this[k+1]<<8|this[k+2]<<16|this[k+3]<<24},f.prototype.readInt32BE=function(k,A){return A||F(k,4,this.length),this[k]<<24|this[k+1]<<16|this[k+2]<<8|this[k+3]},f.prototype.readFloatLE=function(k,A){return A||F(k,4,this.length),s.read(this,k,!0,23,4)},f.prototype.readFloatBE=function(k,A){return A||F(k,4,this.length),s.read(this,k,!1,23,4)},f.prototype.readDoubleLE=function(k,A){return A||F(k,8,this.length),s.read(this,k,!0,52,8)},f.prototype.readDoubleBE=function(k,A){return A||F(k,8,this.length),s.read(this,k,!1,52,8)},f.prototype.writeUIntLE=function(k,A,b,N){k=+k,A|=0,b|=0,N||U(this,k,A,b,Math.pow(2,8*b)-1,0);var W=1,j=0;for(this[A]=255&k;++j<b&&(W*=256);)this[A+j]=k/W&255;return A+b},f.prototype.writeUIntBE=function(k,A,b,N){k=+k,A|=0,b|=0,N||U(this,k,A,b,Math.pow(2,8*b)-1,0);var W=b-1,j=1;for(this[A+W]=255&k;--W>=0&&(j*=256);)this[A+W]=k/j&255;return A+b},f.prototype.writeUInt8=function(k,A,b){return k=+k,A|=0,b||U(this,k,A,1,255,0),f.TYPED_ARRAY_SUPPORT||(k=Math.floor(k)),this[A]=255&k,A+1},f.prototype.writeUInt16LE=function(k,A,b){return k=+k,A|=0,b||U(this,k,A,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[A]=255&k,this[A+1]=k>>>8):V(this,k,A,!0),A+2},f.prototype.writeUInt16BE=function(k,A,b){return k=+k,A|=0,b||U(this,k,A,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[A]=k>>>8,this[A+1]=255&k):V(this,k,A,!1),A+2},f.prototype.writeUInt32LE=function(k,A,b){return k=+k,A|=0,b||U(this,k,A,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[A+3]=k>>>24,this[A+2]=k>>>16,this[A+1]=k>>>8,this[A]=255&k):X(this,k,A,!0),A+4},f.prototype.writeUInt32BE=function(k,A,b){return k=+k,A|=0,b||U(this,k,A,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[A]=k>>>24,this[A+1]=k>>>16,this[A+2]=k>>>8,this[A+3]=255&k):X(this,k,A,!1),A+4},f.prototype.writeIntLE=function(k,A,b,N){if(k=+k,A|=0,!N){var W=Math.pow(2,8*b-1);U(this,k,A,b,W-1,-W)}var j=0,K=1,ge=0;for(this[A]=255&k;++j<b&&(K*=256);)k<0&&ge===0&&this[A+j-1]!==0&&(ge=1),this[A+j]=(k/K>>0)-ge&255;return A+b},f.prototype.writeIntBE=function(k,A,b,N){if(k=+k,A|=0,!N){var W=Math.pow(2,8*b-1);U(this,k,A,b,W-1,-W)}var j=b-1,K=1,ge=0;for(this[A+j]=255&k;--j>=0&&(K*=256);)k<0&&ge===0&&this[A+j+1]!==0&&(ge=1),this[A+j]=(k/K>>0)-ge&255;return A+b},f.prototype.writeInt8=function(k,A,b){return k=+k,A|=0,b||U(this,k,A,1,127,-128),f.TYPED_ARRAY_SUPPORT||(k=Math.floor(k)),k<0&&(k=255+k+1),this[A]=255&k,A+1},f.prototype.writeInt16LE=function(k,A,b){return k=+k,A|=0,b||U(this,k,A,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[A]=255&k,this[A+1]=k>>>8):V(this,k,A,!0),A+2},f.prototype.writeInt16BE=function(k,A,b){return k=+k,A|=0,b||U(this,k,A,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[A]=k>>>8,this[A+1]=255&k):V(this,k,A,!1),A+2},f.prototype.writeInt32LE=function(k,A,b){return k=+k,A|=0,b||U(this,k,A,4,2147483647,-2147483648),f.TYPED_ARRAY_SUPPORT?(this[A]=255&k,this[A+1]=k>>>8,this[A+2]=k>>>16,this[A+3]=k>>>24):X(this,k,A,!0),A+4},f.prototype.writeInt32BE=function(k,A,b){return k=+k,A|=0,b||U(this,k,A,4,2147483647,-2147483648),k<0&&(k=4294967295+k+1),f.TYPED_ARRAY_SUPPORT?(this[A]=k>>>24,this[A+1]=k>>>16,this[A+2]=k>>>8,this[A+3]=255&k):X(this,k,A,!1),A+4},f.prototype.writeFloatLE=function(k,A,b){return ue(this,k,A,!0,b)},f.prototype.writeFloatBE=function(k,A,b){return ue(this,k,A,!1,b)},f.prototype.writeDoubleLE=function(k,A,b){return De(this,k,A,!0,b)},f.prototype.writeDoubleBE=function(k,A,b){return De(this,k,A,!1,b)},f.prototype.copy=function(k,A,b,N){if(b||(b=0),N||N===0||(N=this.length),A>=k.length&&(A=k.length),A||(A=0),N>0&&N<b&&(N=b),N===b||k.length===0||this.length===0)return 0;if(A<0)throw new RangeError("targetStart out of bounds");if(b<0||b>=this.length)throw new RangeError("sourceStart out of bounds");if(N<0)throw new RangeError("sourceEnd out of bounds");N>this.length&&(N=this.length),k.length-A<N-b&&(N=k.length-A+b);var W,j=N-b;if(this===k&&b<A&&A<N)for(W=j-1;W>=0;--W)k[W+A]=this[W+b];else if(j<1e3||!f.TYPED_ARRAY_SUPPORT)for(W=0;W<j;++W)k[W+A]=this[W+b];else Uint8Array.prototype.set.call(k,this.subarray(b,b+j),A);return j},f.prototype.fill=function(k,A,b,N){if(typeof k=="string"){if(typeof A=="string"?(N=A,A=0,b=this.length):typeof b=="string"&&(N=b,b=this.length),k.length===1){var W=k.charCodeAt(0);W<256&&(k=W)}if(N!==void 0&&typeof N!="string")throw new TypeError("encoding must be a string");if(typeof N=="string"&&!f.isEncoding(N))throw new TypeError("Unknown encoding: "+N)}else typeof k=="number"&&(k&=255);if(A<0||this.length<A||this.length<b)throw new RangeError("Out of range index");if(b<=A)return this;var j;if(A>>>=0,b=b===void 0?this.length:b>>>0,k||(k=0),typeof k=="number")for(j=A;j<b;++j)this[j]=k;else{var K=f.isBuffer(k)?k:Fe(new f(k,N).toString()),ge=K.length;for(j=0;j<b-A;++j)this[j+A]=K[j%ge]}return this};var pe=/[^+\/0-9A-Za-z-_]/g;function Te(k){return k<16?"0"+k.toString(16):k.toString(16)}function Fe(k,A){var b;A=A||1/0;for(var N=k.length,W=null,j=[],K=0;K<N;++K){if((b=k.charCodeAt(K))>55295&&b<57344){if(!W){if(b>56319){(A-=3)>-1&&j.push(239,191,189);continue}if(K+1===N){(A-=3)>-1&&j.push(239,191,189);continue}W=b;continue}if(b<56320){(A-=3)>-1&&j.push(239,191,189),W=b;continue}b=65536+(W-55296<<10|b-56320)}else W&&(A-=3)>-1&&j.push(239,191,189);if(W=null,b<128){if((A-=1)<0)break;j.push(b)}else if(b<2048){if((A-=2)<0)break;j.push(b>>6|192,63&b|128)}else if(b<65536){if((A-=3)<0)break;j.push(b>>12|224,b>>6&63|128,63&b|128)}else{if(!(b<1114112))throw new Error("Invalid code point");if((A-=4)<0)break;j.push(b>>18|240,b>>12&63|128,b>>6&63|128,63&b|128)}}return j}function Ne(k){return o.toByteArray(function(A){if((A=function(b){return b.trim?b.trim():b.replace(/^\s+|\s+$/g,"")}(A).replace(pe,"")).length<2)return"";for(;A.length%4!=0;)A+="=";return A}(k))}function Re(k,A,b,N){for(var W=0;W<N&&!(W+b>=A.length||W>=k.length);++W)A[W+b]=k[W];return W}}).call(this,a(78))},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.isASCIIByte=function(i){return i>=0&&i<=127}},function(n,r,a){var i=this&&this.__read||function(s,c){var l=typeof Symbol=="function"&&s[Symbol.iterator];if(!l)return s;var u,f,v=l.call(s),g=[];try{for(;(c===void 0||c-- >0)&&!(u=v.next()).done;)g.push(u.value)}catch(d){f={error:d}}finally{try{u&&!u.done&&(l=v.return)&&l.call(v)}finally{if(f)throw f.error}}return g},o=this&&this.__spread||function(){for(var s=[],c=0;c<arguments.length;c++)s=s.concat(i(arguments[c]));return s};Object.defineProperty(r,"__esModule",{value:!0}),r.length=function(s){return s.length},r.byteLowercase=function(s){for(var c=0;c<s.length;c++){var l=s[c];l>=65&&l<=90&&(s[c]=l+32)}},r.byteUppercase=function(s){for(var c=0;c<s.length;c++){var l=s[c];l>=97&&l<=122&&(s[c]=l-32)}},r.byteCaseInsensitiveMatch=function(s,c){if(s.length!==c.length)return!1;for(var l=0;l<s.length;l++){var u=s[l],f=c[l];if(u>=65&&u<=90&&(u+=32),f>=65&&f<=90&&(f+=32),u!==f)return!1}return!0},r.startsWith=function(s,c){for(var l=0;;){if(l>=s.length)return!1;if(l>=c.length)return!0;if(s[l]!==c[l])return!1;l++}},r.byteLessThan=function(s,c){for(var l=0;;){if(l>=s.length)return!1;if(l>=c.length)return!0;var u=s[l],f=c[l];if(u<f)return!0;if(u>f)return!1;l++}},r.isomorphicDecode=function(s){return String.fromCodePoint.apply(String,o(s))}},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(6),o=a(7),s=a(0),c=a(12),l=function(){function u(f){this._associatedDocument=f||i.dom.window.document}return u.prototype.createDocumentType=function(f,v,g){return s.namespace_validate(f),s.create_documentType(this._associatedDocument,f,v,g)},u.prototype.createDocument=function(f,v,g){g===void 0&&(g=null);var d=s.create_xmlDocument(),m=null;return v&&(m=s.document_internalCreateElementNS(d,f,v)),g&&d.appendChild(g),m&&d.appendChild(m),d._origin=this._associatedDocument._origin,f===o.namespace.HTML?d._contentType="application/xhtml+xml":f===o.namespace.SVG?d._contentType="image/svg+xml":d._contentType="application/xml",d},u.prototype.createHTMLDocument=function(f){var v=s.create_document();v._type="html",v._contentType="text/html",v.appendChild(s.create_documentType(v,"html","",""));var g=s.element_createAnElement(v,"html",o.namespace.HTML);v.appendChild(g);var d=s.element_createAnElement(v,"head",o.namespace.HTML);if(g.appendChild(d),f!==void 0){var m=s.element_createAnElement(v,"title",o.namespace.HTML);d.appendChild(m);var h=s.create_text(v,f);m.appendChild(h)}var C=s.element_createAnElement(v,"body",o.namespace.HTML);return g.appendChild(C),v._origin=this._associatedDocument._origin,v},u.prototype.hasFeature=function(){return!0},u._create=function(f){return new u(f)},u}();r.DOMImplementationImpl=l,c.idl_defineConst(l.prototype,"_ID","@oozcitak/dom")},function(n,r,a){var i,o=this&&this.__extends||(i=function(f,v){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,d){g.__proto__=d}||function(g,d){for(var m in d)d.hasOwnProperty(m)&&(g[m]=d[m])})(f,v)},function(f,v){function g(){this.constructor=f}i(f,v),f.prototype=v===null?Object.create(v):(g.prototype=v.prototype,new g)});Object.defineProperty(r,"__esModule",{value:!0});var s=a(70),c=a(1),l=a(0),u=function(f){function v(){var g=f.call(this)||this;return g._signalSlots=new Set,g._mutationObserverMicrotaskQueued=!1,g._mutationObservers=new Set,g._iteratorList=new c.FixedSizeSet,g._associatedDocument=l.create_document(),g}return o(v,f),Object.defineProperty(v.prototype,"document",{get:function(){return this._associatedDocument},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"event",{get:function(){return this._currentEvent},enumerable:!0,configurable:!0}),v._create=function(){return new v},v}(s.EventTargetImpl);r.WindowImpl=u},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(2),o=function(){function s(){}return s.isNode=function(c){return!!c&&c._nodeType!==void 0},s.isDocumentNode=function(c){return s.isNode(c)&&c._nodeType===i.NodeType.Document},s.isDocumentTypeNode=function(c){return s.isNode(c)&&c._nodeType===i.NodeType.DocumentType},s.isDocumentFragmentNode=function(c){return s.isNode(c)&&c._nodeType===i.NodeType.DocumentFragment},s.isAttrNode=function(c){return s.isNode(c)&&c._nodeType===i.NodeType.Attribute},s.isCharacterDataNode=function(c){if(!s.isNode(c))return!1;var l=c._nodeType;return l===i.NodeType.Text||l===i.NodeType.ProcessingInstruction||l===i.NodeType.Comment||l===i.NodeType.CData},s.isTextNode=function(c){return s.isNode(c)&&(c._nodeType===i.NodeType.Text||c._nodeType===i.NodeType.CData)},s.isExclusiveTextNode=function(c){return s.isNode(c)&&c._nodeType===i.NodeType.Text},s.isCDATASectionNode=function(c){return s.isNode(c)&&c._nodeType===i.NodeType.CData},s.isCommentNode=function(c){return s.isNode(c)&&c._nodeType===i.NodeType.Comment},s.isProcessingInstructionNode=function(c){return s.isNode(c)&&c._nodeType===i.NodeType.ProcessingInstruction},s.isElementNode=function(c){return s.isNode(c)&&c._nodeType===i.NodeType.Element},s.isCustomElementNode=function(c){return s.isElementNode(c)&&c._customElementState==="custom"},s.isShadowRoot=function(c){return!!c&&c.host!==void 0},s.isMouseEvent=function(c){return!!c&&c.screenX!==void 0&&c.screenY!=null},s.isSlotable=function(c){return!!c&&c._name!==void 0&&c._assignedSlot!==void 0&&(s.isTextNode(c)||s.isElementNode(c))},s.isSlot=function(c){return!!c&&c._name!==void 0&&c._assignedNodes!==void 0&&s.isElementNode(c)},s.isWindow=function(c){return!!c&&c.navigator!==void 0},s.isEventListener=function(c){return!!c&&c.handleEvent!==void 0},s.isRegisteredObserver=function(c){return!!c&&c.observer!==void 0&&c.options!==void 0},s.isTransientRegisteredObserver=function(c){return!!c&&c.source!==void 0&&s.isRegisteredObserver(c)},s}();r.Guard=o},function(n,r,a){var i,o=this&&this.__extends||(i=function(c,l){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var v in f)f.hasOwnProperty(v)&&(u[v]=f[v])})(c,l)},function(c,l){function u(){this.constructor=c}i(c,l),c.prototype=l===null?Object.create(l):(u.prototype=l.prototype,new u)});Object.defineProperty(r,"__esModule",{value:!0});var s=function(c){function l(){return c.call(this)||this}return o(l,c),l}(a(98).DocumentImpl);r.XMLDocumentImpl=s},function(n,r,a){var i=this&&this.__values||function(N){var W=typeof Symbol=="function"&&Symbol.iterator,j=W&&N[W],K=0;if(j)return j.call(N);if(N&&typeof N.length=="number")return{next:function(){return N&&K>=N.length&&(N=void 0),{value:N&&N[K++],done:!N}}};throw new TypeError(W?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(N,W){var j=typeof Symbol=="function"&&N[Symbol.iterator];if(!j)return N;var K,ge,ye=j.call(N),we=[];try{for(;(W===void 0||W-- >0)&&!(K=ye.next()).done;)we.push(K.value)}catch(be){ge={error:be}}finally{try{K&&!K.done&&(j=ye.return)&&j.call(ye)}finally{if(ge)throw ge.error}}return we};Object.defineProperty(r,"__esModule",{value:!0});var s,c=a(1),l=a(243),u=a(7),f=a(244),v={ftp:21,file:null,http:80,https:443,ws:80,wss:443},g=/[\0-\x1F\x7F-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,d=/[ "<>`]|[\0-\x1F\x7F-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,m=/[ "<>`#?{}]|[\0-\x1F\x7F-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,h=/[ "<>`#?{}/:;=@\[\]\\\^\|]|[\0-\x1F\x7F-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,C=/[0-9A-Za-z!\$&-\/:;=\?@_~\xA0-\uD7FF\uE000-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uD83E\uD840-\uD87E\uD880-\uD8BE\uD8C0-\uD8FE\uD900-\uD93E\uD940-\uD97E\uD980-\uD9BE\uD9C0-\uD9FE\uDA00-\uDA3E\uDA40-\uDA7E\uDA80-\uDABE\uDAC0-\uDAFE\uDB00-\uDB3E\uDB40-\uDB7E\uDB80-\uDBBE\uDBC0-\uDBFE][\uDC00-\uDFFF]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F\uDBBF\uDBFF][\uDC00-\uDFFD]/,p=/[\0\t\f\r #%/:?@\[\\\]]/;function S(N){s!==void 0&&s.call(null,"Validation Error: "+N)}function I(){return{scheme:"",username:"",password:"",host:null,port:null,path:[],query:null,fragment:null,_cannotBeABaseURLFlag:!1,_blobURLEntry:null}}function D(N){return N in v}function E(N){return D(N.scheme)}function T(N){return v[N]||null}function y(N){return N.username!==""||N.password!==""}function M(N,W){var j,K;W===void 0&&(W=!1);var ge=N.scheme+":";if(N.host!==null?(ge+="//",y(N)&&(ge+=N.username,N.password!==""&&(ge+=":"+N.password),ge+="@"),ge+=_(N.host),N.port!==null&&(ge+=":"+N.port)):N.host===null&&N.scheme==="file"&&(ge+="//"),N._cannotBeABaseURLFlag)ge+=N.path[0];else try{for(var ye=i(N.path),we=ye.next();!we.done;we=ye.next())ge+="/"+we.value}catch(be){j={error:be}}finally{try{we&&!we.done&&(K=ye.return)&&K.call(ye)}finally{if(j)throw j.error}}return N.query!==null&&(ge+="?"+N.query),W||N.fragment===null||(ge+="#"+N.fragment),ge}function _(N){return c.isNumber(N)?O(N):c.isArray(N)?"["+w(N)+"]":N}function O(N){for(var W="",j=N,K=1;K<=4;K++)W=(j%256).toString()+W,K!==4&&(W="."+W),j=Math.floor(j/256);return W}function w(N){for(var W="",j=null,K=-1,ge=0,ye=0,we=0;we<8;we++)if(N[we]===0){ge=1;for(var be=we+1;be<8&&N[be]===0;be++)ge++;ge>ye&&(ye=ge,K=we)}ye>1&&(j=K);for(var Z=!1,ie=0;ie<8;ie++)Z&&N[ie]===0||(Z&&(Z=!1),j!==ie?(W+=N[ie].toString(16),ie!==7&&(W+=":")):(W+=ie===0?"::":":",Z=!0));return W}function x(N,W,j,K,ge){var ye,we,be,Z;if(K===void 0){K={scheme:"",username:"",password:"",host:null,port:null,path:[],query:null,fragment:null,_cannotBeABaseURLFlag:!1,_blobURLEntry:null};var ie=/^[\u0000-\u001F\u0020]+/,he=/[\u0000-\u001F\u0020]+$/;(ie.test(N)||he.test(N))&&S("Input string contains leading or trailing control characters or space."),N=(N=N.replace(ie,"")).replace(he,"")}var se=/[\u0009\u000A\u000D]/g;se.test(N)&&S("Input string contains tab or newline characters."),N=N.replace(se,"");var me=ge===void 0?l.ParserState.SchemeStart:ge;W===void 0&&(W=null);for(var fe=j===void 0||j==="replacement"||j==="UTF-16BE"||j==="UTF-16LE"?"UTF-8":j,q="",Pe=!1,Le=!1,Ue=!1,Me=new c.StringWalker(N);;){switch(me){case l.ParserState.SchemeStart:if(u.codePoint.ASCIIAlpha.test(Me.c()))q+=Me.c().toLowerCase(),me=l.ParserState.Scheme;else{if(ge!==void 0)return S("Invalid scheme start character."),null;me=l.ParserState.NoScheme,Me.pointer--}break;case l.ParserState.Scheme:if(u.codePoint.ASCIIAlphanumeric.test(Me.c())||Me.c()==="+"||Me.c()==="-"||Me.c()===".")q+=Me.c().toLowerCase();else{if(Me.c()!==":"){if(ge===void 0){q="",me=l.ParserState.NoScheme,Me.pointer=0;continue}return S("Invalid input string."),null}if(ge!==void 0&&(D(K.scheme)&&!D(q)||!D(K.scheme)&&D(q)||(y(K)||K.port!==null)&&q==="file"||K.scheme==="file"&&(K.host===""||K.host===null)))return K;if(K.scheme=q,ge!==void 0)return K.port===T(K.scheme)&&(K.port=null),K;q="",K.scheme==="file"?(Me.remaining().startsWith("//")||S("Invalid file URL scheme, '//' expected."),me=l.ParserState.File):E(K)&&W!==null&&W.scheme===K.scheme?me=l.ParserState.SpecialRelativeOrAuthority:E(K)?me=l.ParserState.SpecialAuthoritySlashes:Me.remaining().startsWith("/")?(me=l.ParserState.PathOrAuthority,Me.pointer++):(K._cannotBeABaseURLFlag=!0,K.path.push(""),me=l.ParserState.CannotBeABaseURLPath)}break;case l.ParserState.NoScheme:if(W===null||W._cannotBeABaseURLFlag&&Me.c()!=="#")return S("Invalid input string."),null;W._cannotBeABaseURLFlag&&Me.c()==="#"?(K.scheme=W.scheme,K.path=u.list.clone(W.path),K.query=W.query,K.fragment="",K._cannotBeABaseURLFlag=!0,me=l.ParserState.Fragment):W.scheme!=="file"?(me=l.ParserState.Relative,Me.pointer--):(me=l.ParserState.File,Me.pointer--);break;case l.ParserState.SpecialRelativeOrAuthority:Me.c()==="/"&&Me.remaining().startsWith("/")?(me=l.ParserState.SpecialAuthorityIgnoreSlashes,Me.pointer++):(S("Invalid input string."),me=l.ParserState.Relative,Me.pointer--);break;case l.ParserState.PathOrAuthority:Me.c()==="/"?me=l.ParserState.Authority:(me=l.ParserState.Path,Me.pointer--);break;case l.ParserState.Relative:if(W===null)throw new Error("Invalid parser state. Base URL is null.");switch(K.scheme=W.scheme,Me.c()){case"":K.username=W.username,K.password=W.password,K.host=W.host,K.port=W.port,K.path=u.list.clone(W.path),K.query=W.query;break;case"/":me=l.ParserState.RelativeSlash;break;case"?":K.username=W.username,K.password=W.password,K.host=W.host,K.port=W.port,K.path=u.list.clone(W.path),K.query="",me=l.ParserState.Query;break;case"#":K.username=W.username,K.password=W.password,K.host=W.host,K.port=W.port,K.path=u.list.clone(W.path),K.query=W.query,K.fragment="",me=l.ParserState.Fragment;break;default:E(K)&&Me.c()==="\\"?(S("Invalid input string."),me=l.ParserState.RelativeSlash):(K.username=W.username,K.password=W.password,K.host=W.host,K.port=W.port,K.path=u.list.clone(W.path),K.path.length!==0&&K.path.splice(K.path.length-1,1),me=l.ParserState.Path,Me.pointer--)}break;case l.ParserState.RelativeSlash:if(!E(K)||Me.c()!=="/"&&Me.c()!=="\\")if(Me.c()==="/")me=l.ParserState.Authority;else{if(W===null)throw new Error("Invalid parser state. Base URL is null.");K.username=W.username,K.password=W.password,K.host=W.host,K.port=W.port,me=l.ParserState.Path,Me.pointer--}else Me.c()==="\\"&&S("Invalid input string."),me=l.ParserState.SpecialAuthorityIgnoreSlashes;break;case l.ParserState.SpecialAuthoritySlashes:Me.c()==="/"&&Me.remaining().startsWith("/")?(me=l.ParserState.SpecialAuthorityIgnoreSlashes,Me.pointer++):(S("Expected '//'."),me=l.ParserState.SpecialAuthorityIgnoreSlashes,Me.pointer--);break;case l.ParserState.SpecialAuthorityIgnoreSlashes:Me.c()!=="/"&&Me.c()!=="\\"?(me=l.ParserState.Authority,Me.pointer--):S("Unexpected '/' or '\\'.");break;case l.ParserState.Authority:if(Me.c()==="@"){S("Unexpected '@'."),Pe&&(q="%40"+q),Pe=!0;try{for(var Be=(ye=void 0,i(q)),nt=Be.next();!nt.done;nt=Be.next()){var Ze=nt.value;if(Ze!==":"||Ue){var at=Re(Ze,h);Ue?K.password+=at:K.username+=at}else Ue=!0}}catch(Dn){ye={error:Dn}}finally{try{nt&&!nt.done&&(we=Be.return)&&we.call(Be)}finally{if(ye)throw ye.error}}q=""}else if(Me.c()===""||Me.c()==="/"||Me.c()==="?"||Me.c()==="#"||E(K)&&Me.c()==="\\"){if(Pe&&q==="")return S("Invalid input string."),null;Me.pointer-=q.length+1,q="",me=l.ParserState.Host}else q+=Me.c();break;case l.ParserState.Host:case l.ParserState.Hostname:if(ge!==void 0&&K.scheme==="file")Me.pointer--,me=l.ParserState.FileHost;else if(Me.c()!==":"||Le)if(Me.c()===""||Me.c()==="/"||Me.c()==="?"||Me.c()==="#"||E(K)&&Me.c()==="\\"){if(Me.pointer--,E(K)&&q==="")return S("Invalid input string."),null;if(ge!==void 0&&q===""&&(y(K)||K.port!==null))return S("Invalid input string."),K;if((Oe=V(q,!E(K)))===null)return null;if(K.host=Oe,q="",me=l.ParserState.PathStart,ge!==void 0)return K}else Me.c()==="["&&(Le=!0),Me.c()==="]"&&(Le=!1),q+=Me.c();else{if(q==="")return S("Invalid input string."),null;if((Oe=V(q,!E(K)))===null)return null;if(K.host=Oe,q="",me=l.ParserState.Port,ge===l.ParserState.Hostname)return K}break;case l.ParserState.Port:if(u.codePoint.ASCIIDigit.test(Me.c()))q+=Me.c();else{if(!(Me.c()===""||Me.c()==="/"||Me.c()==="?"||Me.c()==="#"||E(K)&&Me.c()==="\\"||ge))return S("Invalid input string."),null;if(q!==""&&q!==""){var Ot=parseInt(q,10);if(Ot>Math.pow(2,16)-1)return S("Invalid port number."),null;K.port=Ot===T(K.scheme)?null:Ot,q=""}if(ge!==void 0)return K;me=l.ParserState.PathStart,Me.pointer--}break;case l.ParserState.File:if(K.scheme="file",Me.c()==="/"||Me.c()==="\\")Me.c()==="\\"&&S("Invalid input string."),me=l.ParserState.FileSlash;else if(W!==null&&W.scheme==="file")switch(Me.c()){case"":K.host=W.host,K.path=u.list.clone(W.path),K.query=W.query;break;case"?":K.host=W.host,K.path=u.list.clone(W.path),K.query="",me=l.ParserState.Query;break;case"#":K.host=W.host,K.path=u.list.clone(W.path),K.query=W.query,K.fragment="",me=l.ParserState.Fragment;break;default:U(Me.substring())?S("Unexpected windows drive letter in input string."):(K.host=W.host,K.path=u.list.clone(W.path),L(K)),me=l.ParserState.Path,Me.pointer--}else me=l.ParserState.Path,Me.pointer--;break;case l.ParserState.FileSlash:Me.c()==="/"||Me.c()==="\\"?(Me.c()==="\\"&&S("Invalid input string."),me=l.ParserState.FileHost):(W===null||W.scheme!=="file"||U(Me.substring())||(H(W.path[0])?K.path.push(W.path[0]):K.host=W.host),me=l.ParserState.Path,Me.pointer--);break;case l.ParserState.FileHost:if(Me.c()===""||Me.c()==="/"||Me.c()==="\\"||Me.c()==="?"||Me.c()==="#")if(Me.pointer--,ge===void 0&&F(q))S("Unexpected windows drive letter in input string."),me=l.ParserState.Path;else if(q===""){if(K.host="",ge!==void 0)return K;me=l.ParserState.PathStart}else{var Oe;if((Oe=V(q,!E(K)))===null)return null;if(Oe==="localhost"&&(Oe=""),K.host=Oe,ge!==void 0)return K;q="",me=l.ParserState.PathStart}else q+=Me.c();break;case l.ParserState.PathStart:E(K)?(Me.c()==="\\"&&S("Invalid input string."),me=l.ParserState.Path,Me.c()!=="/"&&Me.c()!=="\\"&&Me.pointer--):ge===void 0&&Me.c()==="?"?(K.query="",me=l.ParserState.Query):ge===void 0&&Me.c()==="#"?(K.fragment="",me=l.ParserState.Fragment):Me.c()!==""&&(me=l.ParserState.Path,Me.c()!=="/"&&Me.pointer--);break;case l.ParserState.Path:if(Me.c()===""||Me.c()==="/"||E(K)&&Me.c()==="\\"||ge===void 0&&(Me.c()==="?"||Me.c()==="#")){if(E(K)&&Me.c()==="\\"&&S("Invalid input string."),R(q))L(K),Me.c()==="/"||E(K)&&Me.c()==="\\"||K.path.push("");else if(!P(q)||Me.c()==="/"||E(K)&&Me.c()==="\\"){if(!P(q)){if(K.scheme==="file"&&K.path.length===0&&F(q)){K.host!==null&&K.host!==""&&(S("Invalid input string."),K.host="");var $e=Array.from(q);q=$e.slice(0,1)+":"+$e.slice(2)}K.path.push(q)}}else K.path.push("");if(q="",K.scheme==="file"&&(Me.c()===""||Me.c()==="?"||Me.c()==="#"))for(;K.path.length>1&&K.path[0]==="";)S("Invalid input string."),K.path.splice(0,1);Me.c()==="?"&&(K.query="",me=l.ParserState.Query),Me.c()==="#"&&(K.fragment="",me=l.ParserState.Fragment)}else C.test(Me.c())||Me.c()==="%"||S("Character is not a URL code point or a percent encoded character."),Me.c()!=="%"||/^[0-9a-fA-F][0-9a-fA-F]/.test(Me.remaining())||S("Percent encoded character must be followed by two hex digits."),q+=Re(Me.c(),m);break;case l.ParserState.CannotBeABaseURLPath:Me.c()==="?"?(K.query="",me=l.ParserState.Query):Me.c()==="#"?(K.fragment="",me=l.ParserState.Fragment):(Me.c()===""||C.test(Me.c())||Me.c()==="%"||S("Character is not a URL code point or a percent encoded character."),Me.c()!=="%"||/^[0-9a-fA-F][0-9a-fA-F]/.test(Me.remaining())||S("Percent encoded character must be followed by two hex digits."),Me.c()!==""&&(K.path[0]+=Re(Me.c(),g)));break;case l.ParserState.Query:if(fe==="UTF-8"||E(K)&&K.scheme!=="ws"&&K.scheme!=="wss"||(fe="UTF-8"),ge===void 0&&Me.c()==="#")K.fragment="",me=l.ParserState.Fragment;else if(Me.c()!==""){if(C.test(Me.c())||Me.c()==="%"||S("Character is not a URL code point or a percent encoded character."),Me.c()!=="%"||/^[0-9a-fA-F][0-9a-fA-F]/.test(Me.remaining())||S("Percent encoded character must be followed by two hex digits."),fe.toUpperCase()!=="UTF-8")throw new Error("Only UTF-8 encoding is supported.");var ht=c.utf8Encode(Me.c());if(ht.length>=3&&ht[0]===38&&ht[1]===35&&ht[ht.length-1]===59)ht=ht.subarray(2,ht.length-1),K.query+="%26%23"+u.byteSequence.isomorphicDecode(ht)+"%3B";else try{for(var Ut=(be=void 0,i(ht)),Qt=Ut.next();!Qt.done;Qt=Ut.next()){var Rt=Qt.value;Rt<33||Rt>126||Rt===34||Rt===35||Rt===60||Rt===62||Rt===39&&E(K)?K.query+=Te(Rt):K.query+=String.fromCharCode(Rt)}}catch(Dn){be={error:Dn}}finally{try{Qt&&!Qt.done&&(Z=Ut.return)&&Z.call(Ut)}finally{if(be)throw be.error}}}break;case l.ParserState.Fragment:Me.c()===""||(Me.c()==="\0"?S("NULL character in input string."):(C.test(Me.c())||Me.c()==="%"||S("Unexpected character in fragment string."),Me.c()!=="%"||/^[A-Za-z0-9][A-Za-z0-9]/.test(Me.remaining())||S("Unexpected character in fragment string."),K.fragment+=Re(Me.c(),d)))}if(Me.eof)break;Me.pointer++}return K}function P(N){return N==="."||N.toLowerCase()==="%2e"}function R(N){var W=N.toLowerCase();return W===".."||W===".%2e"||W==="%2e."||W==="%2e%2e"}function L(N){var W=N.path;W.length!==0&&(N.scheme==="file"&&W.length===1&&H(W[0])||N.path.splice(N.path.length-1,1))}function H(N){return N.length>=2&&u.codePoint.ASCIIAlpha.test(N[0])&&N[1]===":"}function F(N){return N.length>=2&&u.codePoint.ASCIIAlpha.test(N[0])&&(N[1]===":"||N[1]==="|")}function U(N){return N.length>=2&&F(N)&&(N.length===2||N[2]==="/"||N[2]==="\\"||N[2]==="?"||N[2]==="#")}function V(N,W){if(W===void 0&&(W=!1),N.startsWith("["))return N.endsWith("]")?ue(N.substring(1,N.length-1)):(S("Expected ']' after '['."),null);if(W)return De(N);var j=b(c.utf8Decode(Ne(N)));if(j===null||p.test(j))return S("Invalid domain."),null;var K=re(j);return K===null||c.isNumber(K)?K:j}function X(N,W){W===void 0&&(W={value:!1});var j=10;return N.startsWith("0x")||N.startsWith("0X")?(W.value=!0,N=N.substr(2),j=16):N.length>=2&&N[0]==="0"&&(W.value=!0,N=N.substr(1),j=8),N===""?0:(j===10?/^[0-9]+$/:j===16?/^[0-9A-Fa-f]+$/:/^[0-7]+$/).test(N)?parseInt(N,j):null}function re(N){var W,j,K,ge,ye={value:!1},we=N.split(".");if(we[we.length-1]===""&&(ye.value=!0,we.length>1&&we.pop()),we.length>4)return N;var be=[];try{for(var Z=i(we),ie=Z.next();!ie.done;ie=Z.next()){var he=ie.value;if(he===""||(Le=X(he,ye))===null)return N;be.push(Le)}}catch(Ue){W={error:Ue}}finally{try{ie&&!ie.done&&(j=Z.return)&&j.call(Z)}finally{if(W)throw W.error}}ye.value&&S("Invalid IP v4 address.");for(var se=0;se<be.length;se++)if(be[se]>255&&(S("Invalid IP v4 address."),se<be.length-1))return null;if(be[be.length-1]>=Math.pow(256,5-be.length))return S("Invalid IP v4 address."),null;var me=be[be.length-1];be.pop();var fe=0;try{for(var q=i(be),Pe=q.next();!Pe.done;Pe=q.next()){var Le;me+=(Le=Pe.value)*Math.pow(256,3-fe),fe++}}catch(Ue){K={error:Ue}}finally{try{Pe&&!Pe.done&&(ge=q.return)&&ge.call(q)}finally{if(K)throw K.error}}return me}function ue(N){var W,j=[0,0,0,0,0,0,0,0],K=0,ge=null,ye=new c.StringWalker(N);if(ye.c()===":"){if(!ye.remaining().startsWith(":"))return S("Invalid IP v6 address."),null;ye.pointer+=2,ge=K+=1}for(;ye.c()!=="";){if(K===8)return S("Invalid IP v6 address."),null;if(ye.c()!==":"){for(var we=0,be=0;be<4&&u.codePoint.ASCIIHexDigit.test(ye.c());)we=16*we+parseInt(ye.c(),16),ye.pointer++,be++;if(ye.c()==="."){if(be===0||(ye.pointer-=be,K>6))return S("Invalid IP v6 address."),null;for(var Z=0;ye.c()!=="";){var ie=null;if(Z>0){if(!(ye.c()==="."&&Z<4))return S("Invalid IP v6 address."),null;ye.pointer++}if(!u.codePoint.ASCIIDigit.test(ye.c()))return S("Invalid IP v6 address."),null;for(;u.codePoint.ASCIIDigit.test(ye.c());){var he=parseInt(ye.c(),10);if(ie===null)ie=he;else{if(ie===0)return S("Invalid IP v6 address."),null;ie=10*ie+he}if(ie>255)return S("Invalid IP v6 address."),null;ye.pointer++}if(ie===null)return S("Invalid IP v6 address."),null;j[K]=256*j[K]+ie,++Z!==2&&Z!==4||K++}if(Z!==4)return S("Invalid IP v6 address."),null;break}if(ye.c()===":"){if(ye.pointer++,ye.c()==="")return S("Invalid IP v6 address."),null}else if(ye.c()!=="")return S("Invalid IP v6 address."),null;j[K]=we,K++}else{if(ge!==null)return S("Invalid IP v6 address."),null;ye.pointer++,ge=++K}}if(ge!==null){var se=K-ge;for(K=7;K!==0&&se>0;)W=o([j[ge+se-1],j[K]],2),j[K]=W[0],j[ge+se-1]=W[1],K--,se--}else if(ge===null&&K!==8)return S("Invalid IP v6 address."),null;return j}function De(N){var W,j;if(/[\x00\t\f\r #/:?@\[\\\]]/.test(N))return S("Invalid host string."),null;var K="";try{for(var ge=i(N),ye=ge.next();!ye.done;ye=ge.next())K+=Re(ye.value,g)}catch(we){W={error:we}}finally{try{ye&&!ye.done&&(j=ge.return)&&j.call(ge)}finally{if(W)throw W.error}}return K}function pe(N){return null}function Te(N){return"%"+("00"+N.toString(16).toUpperCase()).slice(-2)}function Fe(N){for(var W=function(be){return be>=48&&be<=57||be>=65&&be<=70||be>=97&&be<=102},j=new Uint8Array(N.length),K=0,ge=0;ge<N.length;ge++){var ye=N[ge];if(ye!==37)j[K]=ye,K++;else if(ye===37&&ge>=N.length-2)j[K]=ye,K++;else if(ye!==37||W(N[ge+1])&&W(N[ge+2])){var we=parseInt(c.utf8Decode(Uint8Array.of(N[ge+1],N[ge+2])),16);j[K]=we,K++,ge+=2}else j[K]=ye,K++}return j.subarray(0,K)}function Ne(N){return Fe(c.utf8Encode(N))}function Re(N,W){var j,K;if(!W.test(N))return N;var ge=c.utf8Encode(N),ye="";try{for(var we=i(ge),be=we.next();!be.done;be=we.next())ye+=Te(be.value)}catch(Z){j={error:Z}}finally{try{be&&!be.done&&(K=we.return)&&K.call(we)}finally{if(j)throw j.error}}return ye}function k(N){var W,j,K,ge,ye=[],we=[];try{for(var be=i(N),Z=be.next();!Z.done;Z=be.next()){var ie=Z.value;ie===38?(ye.push(Uint8Array.from(we)),we=[]):we.push(ie)}}catch(nt){W={error:nt}}finally{try{Z&&!Z.done&&(j=be.return)&&j.call(be)}finally{if(W)throw W.error}}we.length!==0&&ye.push(Uint8Array.from(we));var he=[];try{for(var se=i(ye),me=se.next();!me.done;me=se.next()){var fe=me.value;if(fe.length!==0){for(var q=fe.indexOf(61),Pe=q!==-1?fe.slice(0,q):fe,Le=q!==-1?fe.slice(q+1):new Uint8Array,Ue=0;Ue<Pe.length;Ue++)Pe[Ue]===43&&(Pe[Ue]=32);for(Ue=0;Ue<Le.length;Ue++)Le[Ue]===43&&(Le[Ue]=32);var Me=c.utf8Decode(Pe),Be=c.utf8Decode(Le);he.push([Me,Be])}}}catch(nt){K={error:nt}}finally{try{me&&!me.done&&(ge=se.return)&&ge.call(se)}finally{if(K)throw K.error}}return he}function A(N){var W,j,K="";try{for(var ge=i(N),ye=ge.next();!ye.done;ye=ge.next()){var we=ye.value;K+=we===32?"+":we===42||we===45||we===46||we>=48&&we<=57||we>=65&&we<=90||we===95||we>=97&&we<=122?String.fromCodePoint(we):Te(we)}}catch(be){W={error:be}}finally{try{ye&&!ye.done&&(j=ge.return)&&j.call(ge)}finally{if(W)throw W.error}}return K}function b(N,W){var j=f.domainToASCII(N);return j===""?(S("Invalid domain name."),null):j}r.setValidationErrorCallback=function(N){s=N},r.newURL=I,r.isSpecialScheme=D,r.isSpecial=E,r.defaultPort=T,r.includesCredentials=y,r.cannotHaveAUsernamePasswordPort=function(N){return N.host===null||N.host===""||N._cannotBeABaseURLFlag||N.scheme==="file"},r.urlSerializer=M,r.hostSerializer=_,r.iPv4Serializer=O,r.iPv6Serializer=w,r.urlParser=function(N,W,j){var K=x(N,W,j);return K===null?null:(K.scheme!=="blob"||(K._blobURLEntry=null),K)},r.basicURLParser=x,r.setTheUsername=function(N,W){var j,K,ge="";try{for(var ye=i(W),we=ye.next();!we.done;we=ye.next())ge+=Re(we.value,h)}catch(be){j={error:be}}finally{try{we&&!we.done&&(K=ye.return)&&K.call(ye)}finally{if(j)throw j.error}}N.username=ge},r.setThePassword=function(N,W){var j,K,ge="";try{for(var ye=i(W),we=ye.next();!we.done;we=ye.next())ge+=Re(we.value,h)}catch(be){j={error:be}}finally{try{we&&!we.done&&(K=ye.return)&&K.call(ye)}finally{if(j)throw j.error}}N.password=ge},r.isSingleDotPathSegment=P,r.isDoubleDotPathSegment=R,r.shorten=L,r.isNormalizedWindowsDriveLetter=H,r.isWindowsDriveLetter=F,r.startsWithAWindowsDriveLetter=U,r.hostParser=V,r.iPv4NumberParser=X,r.iPv4Parser=re,r.iPv6Parser=ue,r.opaqueHostParser=De,r.resolveABlobURL=pe,r.percentEncode=Te,r.percentDecode=Fe,r.stringPercentDecode=Ne,r.utf8PercentEncode=Re,r.hostEquals=function(N,W){return N===W},r.urlEquals=function(N,W,j){return j===void 0&&(j=!1),M(N,j)===M(W,j)},r.urlEncodedStringParser=function(N){return k(c.utf8Encode(N))},r.urlEncodedParser=k,r.urlEncodedByteSerializer=A,r.urlEncodedSerializer=function(N,W){var j,K;if((W===void 0||W==="replacement"||W==="UTF-16BE"||W==="UTF-16LE"?"UTF-8":W).toUpperCase()!=="UTF-8")throw new Error("Only UTF-8 encoding is supported.");var ge="";try{for(var ye=i(N),we=ye.next();!we.done;we=ye.next()){var be=we.value,Z=A(c.utf8Encode(be[0])),ie=be[1];ie=A(c.utf8Encode(ie)),ge!==""&&(ge+="&"),ge+=Z+"="+ie}}catch(he){j={error:he}}finally{try{we&&!we.done&&(K=ye.return)&&K.call(ye)}finally{if(j)throw j.error}}return ge},r.origin=function N(W){switch(W.scheme){case"blob":W._blobURLEntry;var j=x(W.path[0]);return j===null?l.OpaqueOrigin:N(j);case"ftp":case"http":case"https":case"ws":case"wss":return[W.scheme,W.host===null?"":W.host,W.port,null];case"file":default:return l.OpaqueOrigin}},r.domainToASCII=b,r.domainToUnicode=function(N,W){var j=f.domainToUnicode(N);return j===""&&S("Invalid domain name."),j},r.asciiSerializationOfAnOrigin=function(N){if(N[0]===""&&N[1]===""&&N[2]===null&&N[3]===null)return"null";var W=N[0]+"://"+_(N[1]);return N[2]!==null&&(W+=":"+N[2].toString()),W}},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(0),o=function(){function s(){this._signal=i.create_abortSignal()}return Object.defineProperty(s.prototype,"signal",{get:function(){return this._signal},enumerable:!0,configurable:!0}),s.prototype.abort=function(){i.abort_signalAbort(this._signal)},s}();r.AbortControllerImpl=o},function(n,r,a){var i,o=this&&this.__extends||(i=function(u,f){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,g){v.__proto__=g}||function(v,g){for(var d in g)g.hasOwnProperty(d)&&(v[d]=g[d])})(u,f)},function(u,f){function v(){this.constructor=u}i(u,f),u.prototype=f===null?Object.create(f):(v.prototype=f.prototype,new v)});Object.defineProperty(r,"__esModule",{value:!0});var s=a(70),c=a(0),l=function(u){function f(){var v=u.call(this)||this;return v._abortedFlag=!1,v._abortAlgorithms=new Set,v}return o(f,u),Object.defineProperty(f.prototype,"aborted",{get:function(){return this._abortedFlag},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"onabort",{get:function(){return c.event_getterEventHandlerIDLAttribute(this,"onabort")},set:function(v){c.event_setterEventHandlerIDLAttribute(this,"onabort",v)},enumerable:!0,configurable:!0}),f._create=function(){return new f},f}(s.EventTargetImpl);r.AbortSignalImpl=l},function(n,r,a){var i,o=this&&this.__extends||(i=function(f,v){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,d){g.__proto__=d}||function(g,d){for(var m in d)d.hasOwnProperty(m)&&(g[m]=d[m])})(f,v)},function(f,v){function g(){this.constructor=f}i(f,v),f.prototype=v===null?Object.create(v):(g.prototype=v.prototype,new g)});Object.defineProperty(r,"__esModule",{value:!0});var s=a(2),c=a(34),l=a(12),u=function(f){function v(g,d,m){var h=f.call(this)||this;return h._name="",h._publicId="",h._systemId="",h._name=g,h._publicId=d,h._systemId=m,h}return o(v,f),Object.defineProperty(v.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"publicId",{get:function(){return this._publicId},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"systemId",{get:function(){return this._systemId},enumerable:!0,configurable:!0}),v.prototype.before=function(){for(var g=[],d=0;d<arguments.length;d++)g[d]=arguments[d];throw new Error("Mixin: ChildNode not implemented.")},v.prototype.after=function(){for(var g=[],d=0;d<arguments.length;d++)g[d]=arguments[d];throw new Error("Mixin: ChildNode not implemented.")},v.prototype.replaceWith=function(){for(var g=[],d=0;d<arguments.length;d++)g[d]=arguments[d];throw new Error("Mixin: ChildNode not implemented.")},v.prototype.remove=function(){throw new Error("Mixin: ChildNode not implemented.")},v._create=function(g,d,m,h){m===void 0&&(m=""),h===void 0&&(h="");var C=new v(d,m,h);return C._nodeDocument=g,C},v}(c.NodeImpl);r.DocumentTypeImpl=u,l.idl_defineConst(u.prototype,"_nodeType",s.NodeType.DocumentType)},function(n,r,a){var i,o=this&&this.__extends||(i=function(f,v){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,d){g.__proto__=d}||function(g,d){for(var m in d)d.hasOwnProperty(m)&&(g[m]=d[m])})(f,v)},function(f,v){function g(){this.constructor=f}i(f,v),f.prototype=v===null?Object.create(v):(g.prototype=v.prototype,new g)});Object.defineProperty(r,"__esModule",{value:!0});var s=a(100),c=a(1),l=a(0),u=function(f){function v(g,d){var m=f.call(this)||this;return m._host=g,m._mode=d,m}return o(v,f),Object.defineProperty(v.prototype,"mode",{get:function(){return this._mode},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"host",{get:function(){return this._host},enumerable:!0,configurable:!0}),v.prototype._getTheParent=function(g){return g._composedFlag||c.isEmpty(g._path)||l.tree_rootNode(g._path[0].invocationTarget)!==this?this._host:null},v._create=function(g,d){return new v(d,"closed")},v}(s.DocumentFragmentImpl);r.ShadowRootImpl=u},function(n,r,a){var i,o=this&&this.__extends||(i=function(v,g){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,m){d.__proto__=m}||function(d,m){for(var h in m)m.hasOwnProperty(h)&&(d[h]=m[h])})(v,g)},function(v,g){function d(){this.constructor=v}i(v,g),v.prototype=g===null?Object.create(g):(d.prototype=g.prototype,new d)});Object.defineProperty(r,"__esModule",{value:!0});var s=a(2),c=a(34),l=a(0),u=a(12),f=function(v){function g(d){var m=v.call(this)||this;return m._namespace=null,m._namespacePrefix=null,m._element=null,m._value="",m._localName=d,m}return o(g,v),Object.defineProperty(g.prototype,"ownerElement",{get:function(){return this._element},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"namespaceURI",{get:function(){return this._namespace},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"prefix",{get:function(){return this._namespacePrefix},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"localName",{get:function(){return this._localName},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"name",{get:function(){return this._qualifiedName},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"value",{get:function(){return this._value},set:function(d){l.attr_setAnExistingAttributeValue(this,d)},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"_qualifiedName",{get:function(){return this._namespacePrefix!==null?this._namespacePrefix+":"+this._localName:this._localName},enumerable:!0,configurable:!0}),g._create=function(d,m){var h=new g(m);return h._nodeDocument=d,h},g}(c.NodeImpl);r.AttrImpl=f,u.idl_defineConst(f.prototype,"_nodeType",s.NodeType.Attribute),u.idl_defineConst(f.prototype,"specified",!0)},function(n,r,a){var i,o=this&&this.__extends||(i=function(f,v){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,d){g.__proto__=d}||function(g,d){for(var m in d)d.hasOwnProperty(m)&&(g[m]=d[m])})(f,v)},function(f,v){function g(){this.constructor=f}i(f,v),f.prototype=v===null?Object.create(v):(g.prototype=v.prototype,new g)});Object.defineProperty(r,"__esModule",{value:!0});var s=a(101),c=a(2),l=a(12),u=function(f){function v(g){return f.call(this,g)||this}return o(v,f),v._create=function(g,d){d===void 0&&(d="");var m=new v(d);return m._nodeDocument=g,m},v}(s.TextImpl);r.CDATASectionImpl=u,l.idl_defineConst(u.prototype,"_nodeType",c.NodeType.CData)},function(n,r,a){var i,o=this&&this.__extends||(i=function(f,v){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,d){g.__proto__=d}||function(g,d){for(var m in d)d.hasOwnProperty(m)&&(g[m]=d[m])})(f,v)},function(f,v){function g(){this.constructor=f}i(f,v),f.prototype=v===null?Object.create(v):(g.prototype=v.prototype,new g)});Object.defineProperty(r,"__esModule",{value:!0});var s=a(2),c=a(71),l=a(12),u=function(f){function v(g){return g===void 0&&(g=""),f.call(this,g)||this}return o(v,f),v._create=function(g,d){d===void 0&&(d="");var m=new v(d);return m._nodeDocument=g,m},v}(c.CharacterDataImpl);r.CommentImpl=u,l.idl_defineConst(u.prototype,"_nodeType",s.NodeType.Comment)},function(n,r,a){var i,o=this&&this.__extends||(i=function(f,v){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,d){g.__proto__=d}||function(g,d){for(var m in d)d.hasOwnProperty(m)&&(g[m]=d[m])})(f,v)},function(f,v){function g(){this.constructor=f}i(f,v),f.prototype=v===null?Object.create(v):(g.prototype=v.prototype,new g)});Object.defineProperty(r,"__esModule",{value:!0});var s=a(2),c=a(71),l=a(12),u=function(f){function v(g,d){var m=f.call(this,d)||this;return m._target=g,m}return o(v,f),Object.defineProperty(v.prototype,"target",{get:function(){return this._target},enumerable:!0,configurable:!0}),v._create=function(g,d,m){var h=new v(d,m);return h._nodeDocument=g,h},v}(c.CharacterDataImpl);r.ProcessingInstructionImpl=u,l.idl_defineConst(u.prototype,"_nodeType",s.NodeType.ProcessingInstruction)},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(7),o=a(0),s=a(3),c=a(1),l=function(){function u(f,v){return this._live=!0,this._root=f,this._filter=v,new Proxy(this,this)}return Object.defineProperty(u.prototype,"length",{get:function(){for(var f=this,v=0,g=o.tree_getFirstDescendantNode(this._root,!1,!1,function(d){return s.Guard.isElementNode(d)&&f._filter(d)});g!==null;)v++,g=o.tree_getNextDescendantNode(this._root,g,!1,!1,function(d){return s.Guard.isElementNode(d)&&f._filter(d)});return v},enumerable:!0,configurable:!0}),u.prototype.item=function(f){for(var v=this,g=0,d=o.tree_getFirstDescendantNode(this._root,!1,!1,function(m){return s.Guard.isElementNode(m)&&v._filter(m)});d!==null;){if(g===f)return d;g++,d=o.tree_getNextDescendantNode(this._root,d,!1,!1,function(m){return s.Guard.isElementNode(m)&&v._filter(m)})}return null},u.prototype.namedItem=function(f){var v=this;if(f==="")return null;for(var g=o.tree_getFirstDescendantNode(this._root,!1,!1,function(h){return s.Guard.isElementNode(h)&&v._filter(h)});g!=null;){if(g._uniqueIdentifier===f)return g;if(g._namespace===i.namespace.HTML)for(var d=0;d<g._attributeList.length;d++){var m=g._attributeList[d];if(m._localName==="name"&&m._namespace===null&&m._namespacePrefix===null&&m._value===f)return g}g=o.tree_getNextDescendantNode(this._root,g,!1,!1,function(h){return s.Guard.isElementNode(h)&&v._filter(h)})}return null},u.prototype[Symbol.iterator]=function(){var f=this._root,v=this._filter,g=o.tree_getFirstDescendantNode(f,!1,!1,function(d){return s.Guard.isElementNode(d)&&v(d)});return{next:function(){if(g===null)return{done:!0,value:null};var d={done:!1,value:g};return g=o.tree_getNextDescendantNode(f,g,!1,!1,function(m){return s.Guard.isElementNode(m)&&v(m)}),d}}},u.prototype.get=function(f,v,g){if(!c.isString(v)||u.reservedNames.indexOf(v)!==-1)return Reflect.get(f,v,g);var d=Number(v);return isNaN(d)?f.namedItem(v)||void 0:f.item(d)||void 0},u.prototype.set=function(f,v,g,d){if(!c.isString(v)||u.reservedNames.indexOf(v)!==-1)return Reflect.set(f,v,g,d);var m=Number(v),h=isNaN(m)?f.namedItem(v)||void 0:f.item(m)||void 0;return!(!h||!h._parent)&&(o.mutation_replace(h,g,h._parent),!0)},u._create=function(f,v){return v===void 0&&(v=function(){return!0}),new u(f,v)},u.reservedNames=["_root","_live","_filter","length","item","namedItem","get","set"],u}();r.HTMLCollectionImpl=l},function(n,r,a){var i=this&&this.__values||function(u){var f=typeof Symbol=="function"&&Symbol.iterator,v=f&&u[f],g=0;if(v)return v.call(u);if(u&&typeof u.length=="number")return{next:function(){return u&&g>=u.length&&(u=void 0),{value:u&&u[g++],done:!u}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var o=a(6),s=a(1),c=a(0),l=function(){function u(f){return this._live=!0,this._filter=null,this._length=0,this._root=f,new Proxy(this,this)}return Object.defineProperty(u.prototype,"length",{get:function(){return this._root._children.size},enumerable:!0,configurable:!0}),u.prototype.item=function(f){if(f<0||f>this.length-1)return null;if(f<this.length/2){for(var v=0,g=this._root._firstChild;g!==null&&v!==f;)g=g._nextSibling,v++;return g}for(v=this.length-1,g=this._root._lastChild;g!==null&&v!==f;)g=g._previousSibling,v--;return g},u.prototype.keys=function(){var f;return(f={})[Symbol.iterator]=(function(){var v=0;return{next:(function(){return v===this.length?{done:!0,value:null}:{done:!1,value:v++}}).bind(this)}}).bind(this),f},u.prototype.values=function(){var f;return(f={})[Symbol.iterator]=(function(){var v=this[Symbol.iterator]();return{next:function(){return v.next()}}}).bind(this),f},u.prototype.entries=function(){var f;return(f={})[Symbol.iterator]=(function(){var v=this[Symbol.iterator](),g=0;return{next:function(){var d=v.next();return d.done?{done:!0,value:null}:{done:!1,value:[g++,d.value]}}}}).bind(this),f},u.prototype[Symbol.iterator]=function(){return this._root._children[Symbol.iterator]()},u.prototype.forEach=function(f,v){var g,d;v===void 0&&(v=o.dom.window);var m=0;try{for(var h=i(this._root._children),C=h.next();!C.done;C=h.next()){var p=C.value;f.call(v,p,m++,this)}}catch(S){g={error:S}}finally{try{C&&!C.done&&(d=h.return)&&d.call(h)}finally{if(g)throw g.error}}},u.prototype.get=function(f,v,g){if(!s.isString(v))return Reflect.get(f,v,g);var d=Number(v);return isNaN(d)?Reflect.get(f,v,g):f.item(d)||void 0},u.prototype.set=function(f,v,g,d){if(!s.isString(v))return Reflect.set(f,v,g,d);var m=Number(v);if(isNaN(m))return Reflect.set(f,v,g,d);var h=f.item(m)||void 0;return!!h&&!!h._parent&&(c.mutation_replace(h,g,h._parent),!0)},u._create=function(f){return new u(f)},u}();r.NodeListImpl=l},function(n,r,a){var i=this&&this.__values||function(l){var u=typeof Symbol=="function"&&Symbol.iterator,f=u&&l[u],v=0;if(f)return f.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&v>=l.length&&(l=void 0),{value:l&&l[v++],done:!l}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var o=a(6),s=a(1),c=function(){function l(u){return this._live=!1,this._items=[],this._length=0,this._root=u,this._items=[],this._filter=function(f){return!0},new Proxy(this,this)}return Object.defineProperty(l.prototype,"length",{get:function(){return this._items.length},enumerable:!0,configurable:!0}),l.prototype.item=function(u){return u<0||u>this.length-1?null:this._items[u]},l.prototype.keys=function(){var u;return(u={})[Symbol.iterator]=(function(){var f=0;return{next:(function(){return f===this.length?{done:!0,value:null}:{done:!1,value:f++}}).bind(this)}}).bind(this),u},l.prototype.values=function(){var u;return(u={})[Symbol.iterator]=(function(){var f=this[Symbol.iterator]();return{next:function(){return f.next()}}}).bind(this),u},l.prototype.entries=function(){var u;return(u={})[Symbol.iterator]=(function(){var f=this[Symbol.iterator](),v=0;return{next:function(){var g=f.next();return g.done?{done:!0,value:null}:{done:!1,value:[v++,g.value]}}}}).bind(this),u},l.prototype[Symbol.iterator]=function(){var u=this._items[Symbol.iterator]();return{next:function(){return u.next()}}},l.prototype.forEach=function(u,f){var v,g;f===void 0&&(f=o.dom.window);var d=0;try{for(var m=i(this._items),h=m.next();!h.done;h=m.next()){var C=h.value;u.call(f,C,d++,this)}}catch(p){v={error:p}}finally{try{h&&!h.done&&(g=m.return)&&g.call(m)}finally{if(v)throw v.error}}},l.prototype.get=function(u,f,v){if(!s.isString(f))return Reflect.get(u,f,v);var g=Number(f);return isNaN(g)?Reflect.get(u,f,v):u._items[g]||void 0},l.prototype.set=function(u,f,v,g){if(!s.isString(f))return Reflect.set(u,f,v,g);var d=Number(f);return isNaN(d)?Reflect.set(u,f,v,g):d>=0&&d<u._items.length&&(u._items[d]=v,!0)},l._create=function(u,f){var v=new l(u);return v._items=f,v},l}();r.NodeListStaticImpl=c},function(n,r,a){var i,o=this&&this.__extends||(i=function(u,f){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,g){v.__proto__=g}||function(v,g){for(var d in g)g.hasOwnProperty(d)&&(v[d]=g[d])})(u,f)},function(u,f){function v(){this.constructor=u}i(u,f),u.prototype=f===null?Object.create(f):(v.prototype=f.prototype,new v)});Object.defineProperty(r,"__esModule",{value:!0});var s=a(9),c=a(0),l=function(u){function f(v){var g=u.call(this)||this;return g._element=v,Object.setPrototypeOf(g,f.prototype),g}return o(f,u),f.prototype._asArray=function(){return this},f.prototype.item=function(v){return this[v]||null},f.prototype.getNamedItem=function(v){return c.element_getAnAttributeByName(v,this._element)},f.prototype.getNamedItemNS=function(v,g){return c.element_getAnAttributeByNamespaceAndLocalName(v||"",g,this._element)},f.prototype.setNamedItem=function(v){return c.element_setAnAttribute(v,this._element)},f.prototype.setNamedItemNS=function(v){return c.element_setAnAttribute(v,this._element)},f.prototype.removeNamedItem=function(v){var g=c.element_removeAnAttributeByName(v,this._element);if(g===null)throw new s.NotFoundError;return g},f.prototype.removeNamedItemNS=function(v,g){var d=c.element_removeAnAttributeByNamespaceAndLocalName(v||"",g,this._element);if(d===null)throw new s.NotFoundError;return d},f._create=function(v){return new f(v)},f}(Array);r.NamedNodeMapImpl=l},function(n,r,a){var i,o=this&&this.__extends||(i=function(h,C){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,S){p.__proto__=S}||function(p,S){for(var I in S)S.hasOwnProperty(I)&&(p[I]=S[I])})(h,C)},function(h,C){function p(){this.constructor=h}i(h,C),h.prototype=C===null?Object.create(C):(p.prototype=C.prototype,new p)}),s=this&&this.__values||function(h){var C=typeof Symbol=="function"&&Symbol.iterator,p=C&&h[C],S=0;if(p)return p.call(h);if(h&&typeof h.length=="number")return{next:function(){return h&&S>=h.length&&(h=void 0),{value:h&&h[S++],done:!h}}};throw new TypeError(C?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var c=a(6),l=a(2),u=a(102),f=a(9),v=a(0),g=a(12),d=a(3),m=function(h){function C(){var p=h.call(this)||this,S=c.dom.window._associatedDocument;return p._start=[S,0],p._end=[S,0],c.dom.rangeList.add(p),p}return o(C,h),Object.defineProperty(C.prototype,"commonAncestorContainer",{get:function(){for(var p=this._start[0];!v.tree_isAncestorOf(this._end[0],p,!0);){if(p._parent===null)throw new Error("Parent node  is null.");p=p._parent}return p},enumerable:!0,configurable:!0}),C.prototype.setStart=function(p,S){v.range_setTheStart(this,p,S)},C.prototype.setEnd=function(p,S){v.range_setTheEnd(this,p,S)},C.prototype.setStartBefore=function(p){var S=p._parent;if(S===null)throw new f.InvalidNodeTypeError;v.range_setTheStart(this,S,v.tree_index(p))},C.prototype.setStartAfter=function(p){var S=p._parent;if(S===null)throw new f.InvalidNodeTypeError;v.range_setTheStart(this,S,v.tree_index(p)+1)},C.prototype.setEndBefore=function(p){var S=p._parent;if(S===null)throw new f.InvalidNodeTypeError;v.range_setTheEnd(this,S,v.tree_index(p))},C.prototype.setEndAfter=function(p){var S=p._parent;if(S===null)throw new f.InvalidNodeTypeError;v.range_setTheEnd(this,S,v.tree_index(p)+1)},C.prototype.collapse=function(p){p?this._end=this._start:this._start=this._end},C.prototype.selectNode=function(p){v.range_select(p,this)},C.prototype.selectNodeContents=function(p){if(d.Guard.isDocumentTypeNode(p))throw new f.InvalidNodeTypeError;var S=v.tree_nodeLength(p);this._start=[p,0],this._end=[p,S]},C.prototype.compareBoundaryPoints=function(p,S){if(p!==l.HowToCompare.StartToStart&&p!==l.HowToCompare.StartToEnd&&p!==l.HowToCompare.EndToEnd&&p!==l.HowToCompare.EndToStart)throw new f.NotSupportedError;if(v.range_root(this)!==v.range_root(S))throw new f.WrongDocumentError;var I,D;switch(p){case l.HowToCompare.StartToStart:I=this._start,D=S._start;break;case l.HowToCompare.StartToEnd:I=this._end,D=S._start;break;case l.HowToCompare.EndToEnd:I=this._end,D=S._end;break;case l.HowToCompare.EndToStart:I=this._start,D=S._end;break;default:throw new f.NotSupportedError}var E=v.boundaryPoint_position(I,D);return E===l.BoundaryPosition.Before?-1:E===l.BoundaryPosition.After?1:0},C.prototype.deleteContents=function(){var p,S,I,D;if(!v.range_collapsed(this)){var E=this._startNode,T=this._startOffset,y=this._endNode,M=this._endOffset;if(E===y&&d.Guard.isCharacterDataNode(E))v.characterData_replaceData(E,T,M-T,"");else{var _,O,w=[];try{for(var x=s(v.range_getContainedNodes(this)),P=x.next();!P.done;P=x.next()){var R=(U=P.value)._parent;R!==null&&v.range_isContained(R,this)||w.push(U)}}catch(V){p={error:V}}finally{try{P&&!P.done&&(S=x.return)&&S.call(x)}finally{if(p)throw p.error}}if(v.tree_isAncestorOf(y,E,!0))_=E,O=T;else{for(var L=E;L._parent!==null&&!v.tree_isAncestorOf(y,L._parent,!0);)L=L._parent;if(L._parent===null)throw new Error("Parent node is null.");_=L._parent,O=v.tree_index(L)+1}d.Guard.isCharacterDataNode(E)&&v.characterData_replaceData(E,T,v.tree_nodeLength(E)-T,"");try{for(var H=s(w),F=H.next();!F.done;F=H.next()){var U;(U=F.value)._parent&&v.mutation_remove(U,U._parent)}}catch(V){I={error:V}}finally{try{F&&!F.done&&(D=H.return)&&D.call(H)}finally{if(I)throw I.error}}d.Guard.isCharacterDataNode(y)&&v.characterData_replaceData(y,0,M,""),this._start=[_,O],this._end=[_,O]}}},C.prototype.extractContents=function(){return v.range_extract(this)},C.prototype.cloneContents=function(){return v.range_cloneTheContents(this)},C.prototype.insertNode=function(p){return v.range_insert(p,this)},C.prototype.surroundContents=function(p){var S,I;try{for(var D=s(v.range_getPartiallyContainedNodes(this)),E=D.next();!E.done;E=D.next()){var T=E.value;if(!d.Guard.isTextNode(T))throw new f.InvalidStateError}}catch(M){S={error:M}}finally{try{E&&!E.done&&(I=D.return)&&I.call(D)}finally{if(S)throw S.error}}if(d.Guard.isDocumentNode(p)||d.Guard.isDocumentTypeNode(p)||d.Guard.isDocumentFragmentNode(p))throw new f.InvalidNodeTypeError;var y=v.range_extract(this);p._children.size!==0&&v.mutation_replaceAll(null,p),v.range_insert(p,this),v.mutation_append(y,p),v.range_select(p,this)},C.prototype.cloneRange=function(){return v.create_range(this._start,this._end)},C.prototype.detach=function(){c.dom.rangeList.delete(this)},C.prototype.isPointInRange=function(p,S){if(v.tree_rootNode(p)!==v.range_root(this))return!1;if(d.Guard.isDocumentTypeNode(p))throw new f.InvalidNodeTypeError;if(S>v.tree_nodeLength(p))throw new f.IndexSizeError;var I=[p,S];return v.boundaryPoint_position(I,this._start)!==l.BoundaryPosition.Before&&v.boundaryPoint_position(I,this._end)!==l.BoundaryPosition.After},C.prototype.comparePoint=function(p,S){if(v.tree_rootNode(p)!==v.range_root(this))throw new f.WrongDocumentError;if(d.Guard.isDocumentTypeNode(p))throw new f.InvalidNodeTypeError;if(S>v.tree_nodeLength(p))throw new f.IndexSizeError;var I=[p,S];return v.boundaryPoint_position(I,this._start)===l.BoundaryPosition.Before?-1:v.boundaryPoint_position(I,this._end)===l.BoundaryPosition.After?1:0},C.prototype.intersectsNode=function(p){if(v.tree_rootNode(p)!==v.range_root(this))return!1;var S=p._parent;if(S===null)return!0;var I=v.tree_index(p);return v.boundaryPoint_position([S,I],this._end)===l.BoundaryPosition.Before&&v.boundaryPoint_position([S,I+1],this._start)===l.BoundaryPosition.After},C.prototype.toString=function(){var p,S,I="";if(this._startNode===this._endNode&&d.Guard.isTextNode(this._startNode))return this._startNode._data.substring(this._startOffset,this._endOffset);d.Guard.isTextNode(this._startNode)&&(I+=this._startNode._data.substring(this._startOffset));try{for(var D=s(v.range_getContainedNodes(this)),E=D.next();!E.done;E=D.next()){var T=E.value;d.Guard.isTextNode(T)&&(I+=T._data)}}catch(y){p={error:y}}finally{try{E&&!E.done&&(S=D.return)&&S.call(D)}finally{if(p)throw p.error}}return d.Guard.isTextNode(this._endNode)&&(I+=this._endNode._data.substring(0,this._endOffset)),I},C._create=function(p,S){var I=new C;return p&&(I._start=p),S&&(I._end=S),I},C.START_TO_START=0,C.START_TO_END=1,C.END_TO_END=2,C.END_TO_START=3,C}(u.AbstractRangeImpl);r.RangeImpl=m,g.idl_defineConst(m.prototype,"START_TO_START",0),g.idl_defineConst(m.prototype,"START_TO_END",1),g.idl_defineConst(m.prototype,"END_TO_END",2),g.idl_defineConst(m.prototype,"END_TO_START",3)},function(n,r,a){var i,o=this&&this.__extends||(i=function(u,f){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,g){v.__proto__=g}||function(v,g){for(var d in g)g.hasOwnProperty(d)&&(v[d]=g[d])})(u,f)},function(u,f){function v(){this.constructor=u}i(u,f),u.prototype=f===null?Object.create(f):(v.prototype=f.prototype,new v)});Object.defineProperty(r,"__esModule",{value:!0});var s=a(103),c=a(0),l=function(u){function f(v,g,d){var m=u.call(this,v)||this;return m._iteratorCollection=void 0,m._reference=g,m._pointerBeforeReference=d,c.nodeIterator_iteratorList().add(m),m}return o(f,u),Object.defineProperty(f.prototype,"referenceNode",{get:function(){return this._reference},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"pointerBeforeReferenceNode",{get:function(){return this._pointerBeforeReference},enumerable:!0,configurable:!0}),f.prototype.nextNode=function(){return c.nodeIterator_traverse(this,!0)},f.prototype.previousNode=function(){return c.nodeIterator_traverse(this,!1)},f.prototype.detach=function(){c.nodeIterator_iteratorList().delete(this)},f._create=function(v,g,d){return new f(v,g,d)},f}(s.TraverserImpl);r.NodeIteratorImpl=l},function(n,r,a){var i,o=this&&this.__extends||(i=function(f,v){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,d){g.__proto__=d}||function(g,d){for(var m in d)d.hasOwnProperty(m)&&(g[m]=d[m])})(f,v)},function(f,v){function g(){this.constructor=f}i(f,v),f.prototype=v===null?Object.create(v):(g.prototype=v.prototype,new g)});Object.defineProperty(r,"__esModule",{value:!0});var s=a(2),c=a(103),l=a(0),u=function(f){function v(g,d){var m=f.call(this,g)||this;return m._current=d,m}return o(v,f),Object.defineProperty(v.prototype,"currentNode",{get:function(){return this._current},set:function(g){this._current=g},enumerable:!0,configurable:!0}),v.prototype.parentNode=function(){for(var g=this._current;g!==null&&g!==this._root;)if((g=g._parent)!==null&&l.traversal_filter(this,g)===s.FilterResult.Accept)return this._current=g,g;return null},v.prototype.firstChild=function(){return l.treeWalker_traverseChildren(this,!0)},v.prototype.lastChild=function(){return l.treeWalker_traverseChildren(this,!1)},v.prototype.nextSibling=function(){return l.treeWalker_traverseSiblings(this,!0)},v.prototype.previousNode=function(){for(var g=this._current;g!==this._root;){for(var d=g._previousSibling;d;){g=d;for(var m=l.traversal_filter(this,g);m!==s.FilterResult.Reject&&g._lastChild;)g=g._lastChild,m=l.traversal_filter(this,g);if(m===s.FilterResult.Accept)return this._current=g,g;d=g._previousSibling}if(g===this._root||g._parent===null)return null;if(g=g._parent,l.traversal_filter(this,g)===s.FilterResult.Accept)return this._current=g,g}return null},v.prototype.previousSibling=function(){return l.treeWalker_traverseSiblings(this,!1)},v.prototype.nextNode=function(){for(var g=this._current,d=s.FilterResult.Accept;;){for(;d!==s.FilterResult.Reject&&g._firstChild;)if(g=g._firstChild,(d=l.traversal_filter(this,g))===s.FilterResult.Accept)return this._current=g,g;for(var m=null,h=g;h!==null;){if(h===this._root)return null;if((m=h._nextSibling)!==null){g=m;break}h=h._parent}if((d=l.traversal_filter(this,g))===s.FilterResult.Accept)return this._current=g,g}},v._create=function(g,d){return new v(g,d)},v}(c.TraverserImpl);r.TreeWalkerImpl=u},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(2),o=a(12),s=function(){function c(){}return c.prototype.acceptNode=function(l){return i.FilterResult.Accept},c._create=function(){return new c},c.FILTER_ACCEPT=1,c.FILTER_REJECT=2,c.FILTER_SKIP=3,c.SHOW_ALL=4294967295,c.SHOW_ELEMENT=1,c.SHOW_ATTRIBUTE=2,c.SHOW_TEXT=4,c.SHOW_CDATA_SECTION=8,c.SHOW_ENTITY_REFERENCE=16,c.SHOW_ENTITY=32,c.SHOW_PROCESSING_INSTRUCTION=64,c.SHOW_COMMENT=128,c.SHOW_DOCUMENT=256,c.SHOW_DOCUMENT_TYPE=512,c.SHOW_DOCUMENT_FRAGMENT=1024,c.SHOW_NOTATION=2048,c}();r.NodeFilterImpl=s,o.idl_defineConst(s.prototype,"FILTER_ACCEPT",1),o.idl_defineConst(s.prototype,"FILTER_REJECT",2),o.idl_defineConst(s.prototype,"FILTER_SKIP",3),o.idl_defineConst(s.prototype,"SHOW_ALL",4294967295),o.idl_defineConst(s.prototype,"SHOW_ELEMENT",1),o.idl_defineConst(s.prototype,"SHOW_ATTRIBUTE",2),o.idl_defineConst(s.prototype,"SHOW_TEXT",4),o.idl_defineConst(s.prototype,"SHOW_CDATA_SECTION",8),o.idl_defineConst(s.prototype,"SHOW_ENTITY_REFERENCE",16),o.idl_defineConst(s.prototype,"SHOW_ENTITY",32),o.idl_defineConst(s.prototype,"SHOW_PROCESSING_INSTRUCTION",64),o.idl_defineConst(s.prototype,"SHOW_COMMENT",128),o.idl_defineConst(s.prototype,"SHOW_DOCUMENT",256),o.idl_defineConst(s.prototype,"SHOW_DOCUMENT_TYPE",512),o.idl_defineConst(s.prototype,"SHOW_DOCUMENT_FRAGMENT",1024),o.idl_defineConst(s.prototype,"SHOW_NOTATION",2048)},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function o(s,c,l,u,f,v,g,d,m){this._type=s,this._target=c,this._addedNodes=l,this._removedNodes=u,this._previousSibling=f,this._nextSibling=v,this._attributeName=g,this._attributeNamespace=d,this._oldValue=m}return Object.defineProperty(o.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"target",{get:function(){return this._target},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"addedNodes",{get:function(){return this._addedNodes},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"removedNodes",{get:function(){return this._removedNodes},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"previousSibling",{get:function(){return this._previousSibling},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"nextSibling",{get:function(){return this._nextSibling},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"attributeName",{get:function(){return this._attributeName},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"attributeNamespace",{get:function(){return this._attributeNamespace},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"oldValue",{get:function(){return this._oldValue},enumerable:!0,configurable:!0}),o._create=function(s,c,l,u,f,v,g,d,m){return new o(s,c,l,u,f,v,g,d,m)},o}();r.MutationRecordImpl=i},function(n,r,a){var i=this&&this.__values||function(f){var v=typeof Symbol=="function"&&Symbol.iterator,g=v&&f[v],d=0;if(g)return g.call(f);if(f&&typeof f.length=="number")return{next:function(){return f&&d>=f.length&&(f=void 0),{value:f&&f[d++],done:!f}}};throw new TypeError(v?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var o=a(6),s=a(9),c=a(7),l=a(0),u=function(){function f(v,g){this._element=v,this._attribute=g,this._tokenSet=new Set;var d=g._localName,m=l.element_getAnAttributeValue(v,d),h=this;this._element._attributeChangeSteps.push(function(C,p,S,I,D){p===h._attribute._localName&&D===null&&(I?h._tokenSet=l.orderedSet_parse(I):h._tokenSet.clear())}),o.dom.features.steps&&l.dom_runAttributeChangeSteps(v,d,m,m,null)}return Object.defineProperty(f.prototype,"length",{get:function(){return this._tokenSet.size},enumerable:!0,configurable:!0}),f.prototype.item=function(v){var g,d,m=0;try{for(var h=i(this._tokenSet),C=h.next();!C.done;C=h.next()){var p=C.value;if(m===v)return p;m++}}catch(S){g={error:S}}finally{try{C&&!C.done&&(d=h.return)&&d.call(h)}finally{if(g)throw g.error}}return null},f.prototype.contains=function(v){return this._tokenSet.has(v)},f.prototype.add=function(){for(var v,g,d=[],m=0;m<arguments.length;m++)d[m]=arguments[m];try{for(var h=i(d),C=h.next();!C.done;C=h.next()){var p=C.value;if(p==="")throw new s.SyntaxError("Cannot add an empty token.");if(c.codePoint.ASCIIWhiteSpace.test(p))throw new s.InvalidCharacterError("Token cannot contain whitespace.");this._tokenSet.add(p)}}catch(S){v={error:S}}finally{try{C&&!C.done&&(g=h.return)&&g.call(h)}finally{if(v)throw v.error}}l.tokenList_updateSteps(this)},f.prototype.remove=function(){for(var v,g,d=[],m=0;m<arguments.length;m++)d[m]=arguments[m];try{for(var h=i(d),C=h.next();!C.done;C=h.next()){var p=C.value;if(p==="")throw new s.SyntaxError("Cannot remove an empty token.");if(c.codePoint.ASCIIWhiteSpace.test(p))throw new s.InvalidCharacterError("Token cannot contain whitespace.");this._tokenSet.delete(p)}}catch(S){v={error:S}}finally{try{C&&!C.done&&(g=h.return)&&g.call(h)}finally{if(v)throw v.error}}l.tokenList_updateSteps(this)},f.prototype.toggle=function(v,g){if(g===void 0&&(g=void 0),v==="")throw new s.SyntaxError("Cannot toggle an empty token.");if(c.codePoint.ASCIIWhiteSpace.test(v))throw new s.InvalidCharacterError("Token cannot contain whitespace.");return this._tokenSet.has(v)?g!==void 0&&g!==!1||(this._tokenSet.delete(v),l.tokenList_updateSteps(this),!1):(g===void 0||g===!0)&&(this._tokenSet.add(v),l.tokenList_updateSteps(this),!0)},f.prototype.replace=function(v,g){if(v===""||g==="")throw new s.SyntaxError("Cannot replace an empty token.");if(c.codePoint.ASCIIWhiteSpace.test(v)||c.codePoint.ASCIIWhiteSpace.test(g))throw new s.InvalidCharacterError("Token cannot contain whitespace.");return!!this._tokenSet.has(v)&&(c.set.replace(this._tokenSet,v,g),l.tokenList_updateSteps(this),!0)},f.prototype.supports=function(v){return l.tokenList_validationSteps(this,v)},Object.defineProperty(f.prototype,"value",{get:function(){return l.tokenList_serializeSteps(this)},set:function(v){l.element_setAnAttributeValue(this._element,this._attribute._localName,v)},enumerable:!0,configurable:!0}),f.prototype[Symbol.iterator]=function(){var v=this._tokenSet[Symbol.iterator]();return{next:function(){return v.next()}}},f._create=function(v,g){return new f(v,g)},f}();r.DOMTokenListImpl=u},function(n,r,a){var i,o=this&&this.__extends||(i=function(u,f){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,g){v.__proto__=g}||function(v,g){for(var d in g)g.hasOwnProperty(d)&&(v[d]=g[d])})(u,f)},function(u,f){function v(){this.constructor=u}i(u,f),u.prototype=f===null?Object.create(f):(v.prototype=f.prototype,new v)});Object.defineProperty(r,"__esModule",{value:!0});var s=a(104),c=a(0),l=function(u){function f(v,g){var d=u.call(this,v,g)||this;return d._detail=null,d._detail=g&&g.detail||null,d}return o(f,u),Object.defineProperty(f.prototype,"detail",{get:function(){return this._detail},enumerable:!0,configurable:!0}),f.prototype.initCustomEvent=function(v,g,d,m){g===void 0&&(g=!1),d===void 0&&(d=!1),m===void 0&&(m=null),this._dispatchFlag||(c.event_initialize(this,v,g,d),this._detail=m)},f}(s.EventImpl);r.CustomEventImpl=l},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(6),o=a(2),s=a(105),c=a(17);r.nodeIterator_traverse=function(l,u){for(var f=l._reference,v=l._pointerBeforeReference;;){if(u)if(v)v=!1;else{var g=c.tree_getFollowingNode(l._root,f);if(!g)return null;f=g}else if(v){var d=c.tree_getPrecedingNode(l.root,f);if(!d)return null;f=d}else v=!0;if(s.traversal_filter(l,f)===o.FilterResult.Accept)break}return l._reference=f,l._pointerBeforeReference=v,f},r.nodeIterator_iteratorList=function(){return i.dom.window._iteratorList}},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(9),o=a(7),s=a(174);function c(l){if(!s.xml_isName(l))throw new i.InvalidCharacterError("Invalid XML name: "+l);if(!s.xml_isQName(l))throw new i.InvalidCharacterError("Invalid XML qualified name: "+l+".")}r.namespace_validate=c,r.namespace_validateAndExtract=function(l,u){l||(l=null),c(u);var f=u.split(":"),v=f.length===2?f[0]:null,g=f.length===2?f[1]:u;if(v&&l===null)throw new i.NamespaceError("Qualified name includes a prefix but the namespace is null.");if(v==="xml"&&l!==o.namespace.XML)throw new i.NamespaceError('Qualified name includes the "xml" prefix but the namespace is not the XML namespace.');if(l!==o.namespace.XMLNS&&(v==="xmlns"||u==="xmlns"))throw new i.NamespaceError('Qualified name includes the "xmlns" prefix but the namespace is not the XMLNS namespace.');if(l===o.namespace.XMLNS&&v!=="xmlns"&&u!=="xmlns")throw new i.NamespaceError('Qualified name does not include the "xmlns" prefix but the namespace is the XMLNS namespace.');return[l,v,g]},r.namespace_extractQName=function(l){c(l);var u=l.split(":");return[u.length===2?u[0]:null,u.length===2?u[1]:l]}},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.xml_isName=function(i){for(var o=0;o<i.length;o++){var s=i.charCodeAt(o);if(!(s>=97&&s<=122||s>=65&&s<=90||s===58||s===95||s>=192&&s<=214||s>=216&&s<=246||s>=248&&s<=767||s>=880&&s<=893||s>=895&&s<=8191||s>=8204&&s<=8205||s>=8304&&s<=8591||s>=11264&&s<=12271||s>=12289&&s<=55295||s>=63744&&s<=64975||s>=65008&&s<=65533)&&(o===0||!(s===45||s===46||s>=48&&s<=57||s===183||s>=768&&s<=879||s>=8255&&s<=8256))){if(s>=55296&&s<=56319&&o<i.length-1){var c=i.charCodeAt(o+1);if(c>=56320&&c<=57343&&(o++,(s=1024*(s-55296)+c-56320+65536)>=65536&&s<=983039))continue}return!1}}return!0},r.xml_isQName=function(i){for(var o=!1,s=0;s<i.length;s++){var c=i.charCodeAt(s);if(!(c>=97&&c<=122||c>=65&&c<=90||c===95||c>=192&&c<=214||c>=216&&c<=246||c>=248&&c<=767||c>=880&&c<=893||c>=895&&c<=8191||c>=8204&&c<=8205||c>=8304&&c<=8591||c>=11264&&c<=12271||c>=12289&&c<=55295||c>=63744&&c<=64975||c>=65008&&c<=65533)&&(s===0||!(c===45||c===46||c>=48&&c<=57||c===183||c>=768&&c<=879||c>=8255&&c<=8256))){if(s===0||c!==58){if(c>=55296&&c<=56319&&s<i.length-1){var l=i.charCodeAt(s+1);if(l>=56320&&l<=57343&&(s++,(c=1024*(c-55296)+l-56320+65536)>=65536&&c<=983039))continue}return!1}if(o||s===i.length-1)return!1;o=!0}}return!0},r.xml_isLegalChar=function(i){for(var o=0;o<i.length;o++){var s=i.charCodeAt(o);if(!(s===9||s===10||s===13||s>=32&&s<=55295||s>=57344&&s<=65533)){if(s>=55296&&s<=56319&&o<i.length-1){var c=i.charCodeAt(o+1);if(c>=56320&&c<=57343&&(o++,(s=1024*(s-55296)+c-56320+65536)>=65536&&s<=1114111))continue}return!1}}return!0},r.xml_isPubidChar=function(i){for(var o=0;o<i.length;o++){var s=i.charCodeAt(o);if(!(s>=97&&s<=122||s>=65&&s<=90||s>=39&&s<=59||s===32||s===13||s===10||s>=35&&s<=37||s===33||s===61||s===63||s===64||s===95))return!1}return!0}},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(2),o=a(17);r.boundaryPoint_position=function s(c,l){var u=c[0],f=c[1],v=l[0],g=l[1];if(console.assert(o.tree_rootNode(u)===o.tree_rootNode(v),"Boundary points must share the same root node."),u===v)return f===g?i.BoundaryPosition.Equal:f<g?i.BoundaryPosition.Before:i.BoundaryPosition.After;if(o.tree_isFollowing(v,u)){var d=s([v,g],[u,f]);if(d===i.BoundaryPosition.Before)return i.BoundaryPosition.After;if(d===i.BoundaryPosition.After)return i.BoundaryPosition.Before}if(o.tree_isAncestorOf(v,u)){for(var m=v;!o.tree_isChildOf(u,m);)m._parent!==null&&(m=m._parent);if(o.tree_index(m)<f)return i.BoundaryPosition.After}return i.BoundaryPosition.Before}},function(n,r,a){var i=this&&this.__values||function(d){var m=typeof Symbol=="function"&&Symbol.iterator,h=m&&d[m],C=0;if(h)return h.call(d);if(d&&typeof d.length=="number")return{next:function(){return d&&C>=d.length&&(d=void 0),{value:d&&d[C++],done:!d}}};throw new TypeError(m?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var o=a(6),s=a(3),c=a(7),l=a(29),u=a(108),f=a(30),v=a(37),g=a(52);r.node_stringReplaceAll=function(d,m){var h=null;d!==""&&(h=l.create_text(m._nodeDocument,d)),v.mutation_replaceAll(h,m)},r.node_clone=function d(m,h,C){var p,S,I,D,E;if(h===void 0&&(h=null),C===void 0&&(C=!1),h===null&&(h=m._nodeDocument),s.Guard.isElementNode(m)){E=g.element_createAnElement(h,m._localName,m._namespace,m._namespacePrefix,m._is,!1);try{for(var T=i(m._attributeList),y=T.next();!y.done;y=T.next()){var M=d(y.value,h);g.element_append(M,E)}}catch(R){p={error:R}}finally{try{y&&!y.done&&(S=T.return)&&S.call(T)}finally{if(p)throw p.error}}}else if(s.Guard.isDocumentNode(m)){var _=l.create_document();_._encoding=m._encoding,_._contentType=m._contentType,_._URL=m._URL,_._origin=m._origin,_._type=m._type,_._mode=m._mode,E=_}else if(s.Guard.isDocumentTypeNode(m))E=l.create_documentType(h,m._name,m._publicId,m._systemId);else if(s.Guard.isAttrNode(m)){var O=l.create_attr(h,m.localName);O._namespace=m._namespace,O._namespacePrefix=m._namespacePrefix,O._value=m._value,E=O}else E=s.Guard.isExclusiveTextNode(m)?l.create_text(h,m._data):s.Guard.isCDATASectionNode(m)?l.create_cdataSection(h,m._data):s.Guard.isCommentNode(m)?l.create_comment(h,m._data):s.Guard.isProcessingInstructionNode(m)?l.create_processingInstruction(h,m._target,m._data):s.Guard.isDocumentFragmentNode(m)?l.create_documentFragment(h):Object.create(m);if(s.Guard.isDocumentNode(E)?(E._nodeDocument=E,h=E):E._nodeDocument=h,o.dom.features.steps&&f.dom_runCloningSteps(E,m,h,C),C)try{for(var w=i(m._children),x=w.next();!x.done;x=w.next()){var P=d(x.value,h,!0);v.mutation_append(P,E)}}catch(R){I={error:R}}finally{try{x&&!x.done&&(D=w.return)&&D.call(w)}finally{if(I)throw I.error}}return E},r.node_equals=function d(m,h){var C,p,S,I;if(m._nodeType!==h._nodeType)return!1;if(s.Guard.isDocumentTypeNode(m)&&s.Guard.isDocumentTypeNode(h)){if(m._name!==h._name||m._publicId!==h._publicId||m._systemId!==h._systemId)return!1}else if(s.Guard.isElementNode(m)&&s.Guard.isElementNode(h)){if(m._namespace!==h._namespace||m._namespacePrefix!==h._namespacePrefix||m._localName!==h._localName||m._attributeList.length!==h._attributeList.length)return!1}else if(s.Guard.isAttrNode(m)&&s.Guard.isAttrNode(h)){if(m._namespace!==h._namespace||m._localName!==h._localName||m._value!==h._value)return!1}else if(s.Guard.isProcessingInstructionNode(m)&&s.Guard.isProcessingInstructionNode(h)){if(m._target!==h._target||m._data!==h._data)return!1}else if(s.Guard.isCharacterDataNode(m)&&s.Guard.isCharacterDataNode(h)&&m._data!==h._data)return!1;if(s.Guard.isElementNode(m)&&s.Guard.isElementNode(h)){var D={};try{for(var E=i(m._attributeList),T=E.next();!T.done;T=E.next())D[(_=T.value)._localName]=_}catch(L){C={error:L}}finally{try{T&&!T.done&&(p=E.return)&&p.call(E)}finally{if(C)throw C.error}}try{for(var y=i(h._attributeList),M=y.next();!M.done;M=y.next()){var _,O=M.value;if(!(_=D[O._localName])||!d(_,O))return!1}}catch(L){S={error:L}}finally{try{M&&!M.done&&(I=y.return)&&I.call(y)}finally{if(S)throw S.error}}}if(m._children.size!==h._children.size)return!1;for(var w=m._children[Symbol.iterator](),x=h._children[Symbol.iterator](),P=w.next(),R=x.next();!P.done&&!R.done;){if(!d(P.value,R.value))return!1;P=w.next(),R=x.next()}return!0},r.node_listOfElementsWithQualifiedName=function(d,m){return d==="*"?l.create_htmlCollection(m):m._nodeDocument._type==="html"?l.create_htmlCollection(m,function(h){return h._namespace===c.namespace.HTML&&h._qualifiedName===d.toLowerCase()||h._namespace!==c.namespace.HTML&&h._qualifiedName===d}):l.create_htmlCollection(m,function(h){return h._qualifiedName===d})},r.node_listOfElementsWithNamespace=function(d,m,h){return d===""&&(d=null),d==="*"&&m==="*"?l.create_htmlCollection(h):d==="*"?l.create_htmlCollection(h,function(C){return C._localName===m}):m==="*"?l.create_htmlCollection(h,function(C){return C._namespace===d}):l.create_htmlCollection(h,function(C){return C._localName===m&&C._namespace===d})},r.node_listOfElementsWithClassNames=function(d,m){var h=u.orderedSet_parse(d);if(h.size===0)return l.create_htmlCollection(m,function(){return!1});var C=m._nodeDocument._mode!=="quirks";return l.create_htmlCollection(m,function(p){var S=p.classList;return u.orderedSet_contains(S._tokenSet,h,C)})},r.node_locateANamespacePrefix=function d(m,h){if(m._namespace===h&&m._namespacePrefix!==null)return m._namespacePrefix;for(var C=0;C<m._attributeList.length;C++){var p=m._attributeList[C];if(p._namespacePrefix==="xmlns"&&p._value===h)return p._localName}return m._parent&&s.Guard.isElementNode(m._parent)?d(m._parent,h):null},r.node_locateANamespace=function d(m,h){if(s.Guard.isElementNode(m)){if(m._namespace!==null&&m._namespacePrefix===h)return m._namespace;for(var C=0;C<m._attributeList.length;C++){var p=m._attributeList[C];if(p._namespace===c.namespace.XMLNS&&p._namespacePrefix==="xmlns"&&p._localName===h||h===null&&p._namespace===c.namespace.XMLNS&&p._namespacePrefix===null&&p._localName==="xmlns")return p._value||null}return m.parentElement===null?null:d(m.parentElement,h)}return s.Guard.isDocumentNode(m)?m.documentElement===null?null:d(m.documentElement,h):s.Guard.isDocumentTypeNode(m)||s.Guard.isDocumentFragmentNode(m)?null:s.Guard.isAttrNode(m)?m._element===null?null:d(m._element,h):m._parent&&s.Guard.isElementNode(m._parent)?d(m._parent,h):null}},function(n,r,a){var i=this&&this.__values||function(g){var d=typeof Symbol=="function"&&Symbol.iterator,m=d&&g[d],h=0;if(m)return m.call(g);if(g&&typeof g.length=="number")return{next:function(){return g&&h>=g.length&&(g=void 0),{value:g&&g[h++],done:!g}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var o=a(6),s=a(3),c=a(9),l=a(29),u=a(17),f=a(107),v=a(37);r.text_contiguousTextNodes=function(g,d){var m;return d===void 0&&(d=!1),(m={})[Symbol.iterator]=function(){for(var h=g;h&&s.Guard.isTextNode(h._previousSibling);)h=h._previousSibling;return{next:function(){if(h&&!d&&h===g&&(h=s.Guard.isTextNode(h._nextSibling)?h._nextSibling:null),h===null)return{done:!0,value:null};var C={done:!1,value:h};return h=s.Guard.isTextNode(h._nextSibling)?h._nextSibling:null,C}}},m},r.text_contiguousExclusiveTextNodes=function(g,d){var m;return d===void 0&&(d=!1),(m={})[Symbol.iterator]=function(){for(var h=g;h&&s.Guard.isExclusiveTextNode(h._previousSibling);)h=h._previousSibling;return{next:function(){if(h&&!d&&h===g&&(h=s.Guard.isExclusiveTextNode(h._nextSibling)?h._nextSibling:null),h===null)return{done:!0,value:null};var C={done:!1,value:h};return h=s.Guard.isExclusiveTextNode(h._nextSibling)?h._nextSibling:null,C}}},m},r.text_descendantTextContent=function(g){for(var d="",m=u.tree_getFirstDescendantNode(g,!1,!1,function(h){return s.Guard.isTextNode(h)});m!==null;)d+=m._data,m=u.tree_getNextDescendantNode(g,m,!1,!1,function(h){return s.Guard.isTextNode(h)});return d},r.text_split=function(g,d){var m,h,C=g._data.length;if(d>C)throw new c.IndexSizeError;var p=C-d,S=f.characterData_substringData(g,d,p),I=l.create_text(g._nodeDocument,S),D=g._parent;if(D!==null){v.mutation_insert(I,D,g._nextSibling);try{for(var E=i(o.dom.rangeList),T=E.next();!T.done;T=E.next()){var y=T.value;y._start[0]===g&&y._start[1]>d&&(y._start[0]=I,y._start[1]-=d),y._end[0]===g&&y._end[1]>d&&(y._end[0]=I,y._end[1]-=d);var M=u.tree_index(g);y._start[0]===D&&y._start[1]===M+1&&y._start[1]++,y._end[0]===D&&y._end[1]===M+1&&y._end[1]++}}catch(_){m={error:_}}finally{try{T&&!T.done&&(h=E.return)&&h.call(E)}finally{if(m)throw m.error}}}return f.characterData_replaceData(g,d,p,""),I}},function(n,r,a){var i=a(4),o=a(41),s=a(24),c=a(48),l=[].join,u=o!=Object,f=c("join",",");i({target:"Array",proto:!0,forced:u||!f},{join:function(v){return l.call(s(this),v===void 0?",":v)}})},function(n,r,a){var i=a(4),o=a(83),s=String.fromCharCode,c=String.fromCodePoint;i({target:"String",stat:!0,forced:!!c&&c.length!=1},{fromCodePoint:function(l){for(var u,f=[],v=arguments.length,g=0;v>g;){if(u=+arguments[g++],o(u,1114111)!==u)throw RangeError(u+" is not a valid code point");f.push(u<65536?s(u):s(55296+((u-=65536)>>10),u%1024+56320))}return f.join("")}})},function(n,r,a){var i=this&&this.__read||function(c,l){var u=typeof Symbol=="function"&&c[Symbol.iterator];if(!u)return c;var f,v,g=u.call(c),d=[];try{for(;(l===void 0||l-- >0)&&!(f=g.next()).done;)d.push(f.value)}catch(m){v={error:m}}finally{try{f&&!f.done&&(u=g.return)&&u.call(g)}finally{if(v)throw v.error}}return d};Object.defineProperty(r,"__esModule",{value:!0});var o=a(111),s=function(){function c(l,u){this._options={skipWhitespaceOnlyText:!1},this.err={line:-1,col:-1,index:-1,str:""},this._str=l,this._index=0,this._length=l.length,u&&(this._options.skipWhitespaceOnlyText=u.skipWhitespaceOnlyText||!1)}return c.prototype.nextToken=function(){if(this.eof())return{type:o.TokenType.EOF};var l=this.skipIfStartsWith("<")?this.openBracket():this.text();return this._options.skipWhitespaceOnlyText&&l.type===o.TokenType.Text&&c.isWhiteSpaceToken(l)&&(l=this.nextToken()),l},c.prototype.openBracket=function(){return this.skipIfStartsWith("?")?this.skipIfStartsWith("xml")?c.isSpace(this._str[this._index])?this.declaration():(this.seek(-3),this.pi()):this.pi():this.skipIfStartsWith("!")?this.skipIfStartsWith("--")?this.comment():this.skipIfStartsWith("[CDATA[")?this.cdata():this.skipIfStartsWith("DOCTYPE")?this.doctype():void this.throwError("Invalid '!' in opening tag."):this.skipIfStartsWith("/")?this.closeTag():this.openTag()},c.prototype.declaration=function(){for(var l="",u="",f="";!this.eof();){if(this.skipSpace(),this.skipIfStartsWith("?>"))return{type:o.TokenType.Declaration,version:l,encoding:u,standalone:f};var v=i(this.attribute(),2),g=v[0],d=v[1];g==="version"?l=d:g==="encoding"?u=d:g==="standalone"?f=d:this.throwError("Invalid attribute name: "+g)}this.throwError("Missing declaration end symbol `?>`")},c.prototype.doctype=function(){var l="",u="";this.skipSpace();var f=this.takeUntil2("[",">",!0);return this.skipSpace(),this.skipIfStartsWith("PUBLIC")?(l=this.quotedString(),u=this.quotedString()):this.skipIfStartsWith("SYSTEM")&&(u=this.quotedString()),this.skipSpace(),this.skipIfStartsWith("[")&&(this.skipUntil("]"),this.skipIfStartsWith("]")||this.throwError("Missing end bracket of DTD internal subset")),this.skipSpace(),this.skipIfStartsWith(">")||this.throwError("Missing doctype end symbol `>`"),{type:o.TokenType.DocType,name:f,pubId:l,sysId:u}},c.prototype.pi=function(){var l=this.takeUntilStartsWith("?>",!0);if(this.eof()&&this.throwError("Missing processing instruction end symbol `?>`"),this.skipSpace(),this.skipIfStartsWith("?>"))return{type:o.TokenType.PI,target:l,data:""};var u=this.takeUntilStartsWith("?>");return this.eof()&&this.throwError("Missing processing instruction end symbol `?>`"),this.seek(2),{type:o.TokenType.PI,target:l,data:u}},c.prototype.text=function(){var l=this.takeUntil("<");return{type:o.TokenType.Text,data:l}},c.prototype.comment=function(){var l=this.takeUntilStartsWith("-->");return this.eof()&&this.throwError("Missing comment end symbol `-->`"),this.seek(3),{type:o.TokenType.Comment,data:l}},c.prototype.cdata=function(){var l=this.takeUntilStartsWith("]]>");return this.eof()&&this.throwError("Missing CDATA end symbol `]>`"),this.seek(3),{type:o.TokenType.CDATA,data:l}},c.prototype.openTag=function(){this.skipSpace();var l=this.takeUntil2(">","/",!0);if(this.skipSpace(),this.skipIfStartsWith(">"))return{type:o.TokenType.Element,name:l,attributes:[],selfClosing:!1};if(this.skipIfStartsWith("/>"))return{type:o.TokenType.Element,name:l,attributes:[],selfClosing:!0};for(var u=[];!this.eof();){if(this.skipSpace(),this.skipIfStartsWith(">"))return{type:o.TokenType.Element,name:l,attributes:u,selfClosing:!1};if(this.skipIfStartsWith("/>"))return{type:o.TokenType.Element,name:l,attributes:u,selfClosing:!0};var f=this.attribute();u.push(f)}this.throwError("Missing opening element tag end symbol `>`")},c.prototype.closeTag=function(){this.skipSpace();var l=this.takeUntil(">",!0);return this.skipSpace(),this.skipIfStartsWith(">")||this.throwError("Missing closing element tag end symbol `>`"),{type:o.TokenType.ClosingTag,name:l}},c.prototype.attribute=function(){this.skipSpace();var l=this.takeUntil("=",!0);return this.skipSpace(),this.skipIfStartsWith("=")||this.throwError("Missing equals sign before attribute value"),[l,this.quotedString()]},c.prototype.quotedString=function(){this.skipSpace();var l=this.take(1);c.isQuote(l)||this.throwError("Missing start quote character before quoted value");var u=this.takeUntil(l);return this.skipIfStartsWith(l)||this.throwError("Missing end quote character after quoted value"),u},c.prototype.eof=function(){return this._index>=this._length},c.prototype.skipIfStartsWith=function(l){var u=l.length;if(u===1)return this._str[this._index]===l&&(this._index++,!0);for(var f=0;f<u;f++)if(this._str[this._index+f]!==l[f])return!1;return this._index+=u,!0},c.prototype.seek=function(l){this._index+=l,this._index<0&&(this._index=0),this._index>this._length&&(this._index=this._length)},c.prototype.skipSpace=function(){for(;!this.eof()&&c.isSpace(this._str[this._index]);)this._index++},c.prototype.take=function(l){if(l===1)return this._str[this._index++];var u=this._index;return this.seek(l),this._str.slice(u,this._index)},c.prototype.takeUntil=function(l,u){u===void 0&&(u=!1);for(var f=this._index;this._index<this._length;){var v=this._str[this._index];if(v===l||u&&c.isSpace(v))break;this._index++}return this._str.slice(f,this._index)},c.prototype.takeUntil2=function(l,u,f){f===void 0&&(f=!1);for(var v=this._index;this._index<this._length;){var g=this._str[this._index];if(g===l||g===u||f&&c.isSpace(g))break;this._index++}return this._str.slice(v,this._index)},c.prototype.takeUntilStartsWith=function(l,u){u===void 0&&(u=!1);for(var f=this._index,v=l.length;this._index<this._length;){for(var g=!0,d=0;d<v;d++){var m=this._str[this._index+d],h=l[d];if(u&&c.isSpace(m))return this._str.slice(f,this._index);if(m!==h){this._index++,g=!1;break}}if(g)return this._str.slice(f,this._index)}return this._index=this._length,this._str.slice(f)},c.prototype.skipUntil=function(l){for(;this._index<this._length&&this._str[this._index]!==l;)this._index++},c.isWhiteSpaceToken=function(l){for(var u=l.data,f=0;f<u.length;f++){var v=u[f];if(v!==" "&&v!==`
`&&v!=="\r"&&v!=="	"&&v!=="\f")return!1}return!0},c.isSpace=function(l){return l===" "||l===`
`||l==="\r"||l==="	"},c.isQuote=function(l){return l==='"'||l==="'"},c.prototype.throwError=function(l){for(var u=/\r\n|\r|\n/g,f=null,v=0,g=0,d=this._str.length;(f=u.exec(this._str))!==null&&f!==null;)if(v++,f.index<this._index&&(g=u.lastIndex),f.index>this._index){d=f.index;break}throw this.err={line:v,col:this._index-g,index:this._index,str:this._str.substring(g,d)},new Error(l+`
Index: `+this.err.index+`
Ln: `+this.err.line+", Col: "+this.err.col+`
Input: `+this.err.str)},c.prototype[Symbol.iterator]=function(){return this._index=0,{next:(function(){var l=this.nextToken();return l.type===o.TokenType.EOF?{done:!0,value:null}:{done:!1,value:l}}).bind(this)}},c}();r.XMLStringLexer=s},function(n,r,a){var i=a(39);n.exports=new i({include:[a(182)]})},function(n,r,a){var i=a(39);n.exports=new i({include:[a(113)],implicit:[a(289),a(290),a(291),a(292)]})},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(91),o=a(1),s=a(3),c=a(77),l=a(109);function u(d,m){var h=v(d===void 0||f(d)?d:i.DefaultBuilderOptions),C=f(d)?m:d,p=l.createDocument();g(p,h);var S=new c.XMLBuilderImpl(p);return C!==void 0&&S.ele(C),S}function f(d){if(!o.isPlainObject(d))return!1;for(var m in d)if(d.hasOwnProperty(m)&&!i.XMLBuilderOptionKeys.has(m))return!1;return!0}function v(d){d===void 0&&(d={});var m=o.applyDefaults(d,i.DefaultBuilderOptions);if(m.convert.att.length===0||m.convert.ins.length===0||m.convert.text.length===0||m.convert.cdata.length===0||m.convert.comment.length===0)throw new Error("JS object converter strings cannot be zero length.");return m}function g(d,m,h){var C=d;C._xmlBuilderOptions=m,C._isFragment=h}r.builder=function(d,m){var h=v(f(d)?d:i.DefaultBuilderOptions),C=s.Guard.isNode(d)||o.isArray(d)?d:m;if(C===void 0)throw new Error("Invalid arguments.");if(o.isArray(C)){for(var p=[],S=0;S<C.length;S++){var I=new c.XMLBuilderImpl(C[S]);I.set(h),p.push(I)}return p}var D=new c.XMLBuilderImpl(C);return D.set(h),D},r.create=u,r.fragment=function(d,m){var h=v(d===void 0||f(d)?d:i.DefaultBuilderOptions),C=f(d)?m:d,p=l.createDocument();g(p,h,!0);var S=new c.XMLBuilderImpl(p.createDocumentFragment());return C!==void 0&&S.ele(C),S},r.convert=function(d,m,h){var C,p,S;return f(d)&&m!==void 0?(C=d,p=m,S=h):(C=i.DefaultBuilderOptions,p=d,S=m||void 0),u(C,p).end(S)}},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(77);r.builder=i.builder,r.create=i.create,r.fragment=i.fragment,r.convert=i.convert,r.createCB=i.createCB,r.fragmentCB=i.fragmentCB},function(n,r,a){a(31),a(32),a(33),a(191),a(192),a(194),a(64),a(19),a(198),a(199),a(89),a(201),a(65),a(20),a(66),a(22),a(23);var i=this&&this.__read||function(C,p){var S=typeof Symbol=="function"&&C[Symbol.iterator];if(!S)return C;var I,D,E=S.call(C),T=[];try{for(;(p===void 0||p-- >0)&&!(I=E.next()).done;)T.push(I.value)}catch(y){D={error:y}}finally{try{I&&!I.done&&(S=E.return)&&S.call(E)}finally{if(D)throw D.error}}return T},o=this&&this.__values||function(C){var p=typeof Symbol=="function"&&Symbol.iterator,S=p&&C[p],I=0;if(S)return S.call(C);if(C&&typeof C.length=="number")return{next:function(){return C&&I>=C.length&&(C=void 0),{value:C&&C[I++],done:!C}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var s=a(91),c=a(1),l=a(217),u=a(2),f=a(3),v=a(0),g=a(109),d=a(7),m=a(276),h=function(){function C(p){this._domNode=p}return Object.defineProperty(C.prototype,"node",{get:function(){return this._domNode},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),C.prototype.set=function(p){return this._options=c.applyDefaults(c.applyDefaults(this._options,p,!0),s.DefaultBuilderOptions),this},C.prototype.ele=function(p,S,I){var D,E,T,y,M,_;if(c.isObject(p))return new m.ObjectReader(this._options).parse(this,p);if(p!==null&&/^\s*</.test(p))return new m.XMLReader(this._options).parse(this,p);if(p!==null&&/^\s*[\{\[]/.test(p))return new m.JSONReader(this._options).parse(this,p);if(p!==null&&/^(\s*|(#.*)|(%.*))*---/.test(p))return new m.YAMLReader(this._options).parse(this,p);if((p===null||c.isString(p))&&c.isString(S))y=(D=i([p,S,I],3))[0],M=D[1],_=D[2];else{if(p===null)throw new Error("Element name cannot be null. "+this._debugInfo());y=(E=i([void 0,p,c.isObject(S)?S:void 0],3))[0],M=E[1],_=E[2]}if(_&&(_=c.getValue(_)),y=(T=i(this._extractNamespace(g.sanitizeInput(y,this._options.invalidCharReplacement),g.sanitizeInput(M,this._options.invalidCharReplacement),!0),2))[0],M=T[1],y===void 0){var O=i(v.namespace_extractQName(M),1)[0];y=this.node.lookupNamespaceURI(O)}var w=y!=null?this._doc.createElementNS(y,M):this._doc.createElement(M);this.node.appendChild(w);var x=new C(w),P=this._doc.doctype;if(w===this._doc.documentElement&&P!==null){var R=this._doc.implementation.createDocumentType(this._doc.documentElement.tagName,P.publicId,P.systemId);this._doc.replaceChild(R,P)}return _&&!c.isEmpty(_)&&x.att(_),x},C.prototype.remove=function(){var p=this.up();return p.node.removeChild(this.node),p},C.prototype.att=function(p,S,I){var D,E,T,y,M,_,O=this;if(c.isMap(p)||c.isObject(p))return c.forEachObject(p,function(F,U){return O.att(F,U)},this),this;if(p!=null&&(p=c.getValue(p+"")),S!=null&&(S=c.getValue(S+"")),I!=null&&(I=c.getValue(I+"")),p!==null&&!c.isString(p)||!c.isString(S)||I!==null&&!c.isString(I)){if(!c.isString(p)||S!=null&&!c.isString(S))throw new Error("Attribute name and value not specified. "+this._debugInfo());y=(E=i([void 0,p,S],3))[0],M=E[1],_=E[2]}else y=(D=i([p,S,I],3))[0],M=D[1],_=D[2];if(this._options.keepNullAttributes&&_==null)_="";else if(_==null)return this;if(!f.Guard.isElementNode(this.node))throw new Error("An attribute can only be assigned to an element node.");var w=this.node;y=(T=i(this._extractNamespace(y,M,!1),2))[0],M=T[1],M=g.sanitizeInput(M,this._options.invalidCharReplacement),y=g.sanitizeInput(y,this._options.invalidCharReplacement),_=g.sanitizeInput(_,this._options.invalidCharReplacement);var x=i(v.namespace_extractQName(M),2),P=x[0],R=x[1],L=i(v.namespace_extractQName(w.prefix?w.prefix+":"+w.localName:w.localName),1)[0],H=null;return P==="xmlns"?(y=d.namespace.XMLNS,w.namespaceURI===null&&L===R&&(H=_)):P===null&&R==="xmlns"&&L===null&&(y=d.namespace.XMLNS,H=_),H!==null&&(this._updateNamespace(H),w=this.node),y!==void 0?w.setAttributeNS(y,M,_):w.setAttribute(M,_),this},C.prototype.removeAtt=function(p,S){var I,D,E=this;if(!f.Guard.isElementNode(this.node))throw new Error("An attribute can only be removed from an element node.");if(p=c.getValue(p),S!==void 0&&(S=c.getValue(S)),p!==null&&S===void 0)D=p;else{if(p!==null&&!c.isString(p)||S===void 0)throw new Error("Attribute namespace must be a string. "+this._debugInfo());I=p,D=S}return c.isArray(D)||c.isSet(D)?c.forEachArray(D,function(T){return I===void 0?E.removeAtt(T):E.removeAtt(I,T)},this):I!==void 0?(D=g.sanitizeInput(D,this._options.invalidCharReplacement),I=g.sanitizeInput(I,this._options.invalidCharReplacement),this.node.removeAttributeNS(I,D)):(D=g.sanitizeInput(D,this._options.invalidCharReplacement),this.node.removeAttribute(D)),this},C.prototype.txt=function(p){if(p==null){if(!this._options.keepNullNodes)return this;p=""}var S=this._doc.createTextNode(g.sanitizeInput(p,this._options.invalidCharReplacement));return this.node.appendChild(S),this},C.prototype.com=function(p){if(p==null){if(!this._options.keepNullNodes)return this;p=""}var S=this._doc.createComment(g.sanitizeInput(p,this._options.invalidCharReplacement));return this.node.appendChild(S),this},C.prototype.dat=function(p){if(p==null){if(!this._options.keepNullNodes)return this;p=""}var S=this._doc.createCDATASection(g.sanitizeInput(p,this._options.invalidCharReplacement));return this.node.appendChild(S),this},C.prototype.ins=function(p,S){var I=this;if(S===void 0&&(S=""),S==null){if(!this._options.keepNullNodes)return this;S=""}if(c.isArray(p)||c.isSet(p))c.forEachArray(p,function(E){var T=(E+="").indexOf(" "),y=T===-1?E:E.substr(0,T),M=T===-1?"":E.substr(T+1);I.ins(y,M)},this);else if(c.isMap(p)||c.isObject(p))c.forEachObject(p,function(E,T){return I.ins(E,T)},this);else{var D=this._doc.createProcessingInstruction(g.sanitizeInput(p,this._options.invalidCharReplacement),g.sanitizeInput(S,this._options.invalidCharReplacement));this.node.appendChild(D)}return this},C.prototype.dec=function(p){return this._options.version=p.version||"1.0",this._options.encoding=p.encoding,this._options.standalone=p.standalone,this},C.prototype.dtd=function(p){var S=g.sanitizeInput(p&&p.name||(this._doc.documentElement?this._doc.documentElement.tagName:"ROOT"),this._options.invalidCharReplacement),I=g.sanitizeInput(p&&p.pubID||"",this._options.invalidCharReplacement),D=g.sanitizeInput(p&&p.sysID||"",this._options.invalidCharReplacement);if(this._doc.documentElement!==null&&S!==this._doc.documentElement.tagName)throw new Error("DocType name does not match document element name.");var E=this._doc.implementation.createDocumentType(S,I,D);return this._doc.doctype!==null?this._doc.replaceChild(E,this._doc.doctype):this._doc.insertBefore(E,this._doc.documentElement),this},C.prototype.import=function(p){var S,I,D=this._domNode,E=this._doc,T=p.node;if(f.Guard.isDocumentNode(T)){var y=T.documentElement;if(y===null)throw new Error("Imported document has no document element node. "+this._debugInfo());var M=E.importNode(y,!0);D.appendChild(M);var _=i(v.namespace_extractQName(M.prefix?M.prefix+":"+M.localName:M.localName),1)[0],O=D.lookupNamespaceURI(_);new C(M)._updateNamespace(O)}else if(f.Guard.isDocumentFragmentNode(T))try{for(var w=o(T.childNodes),x=w.next();!x.done;x=w.next()){var P=x.value;M=E.importNode(P,!0),D.appendChild(M),f.Guard.isElementNode(M)&&(_=i(v.namespace_extractQName(M.prefix?M.prefix+":"+M.localName:M.localName),1)[0],O=D.lookupNamespaceURI(_),new C(M)._updateNamespace(O))}}catch(R){S={error:R}}finally{try{x&&!x.done&&(I=w.return)&&I.call(w)}finally{if(S)throw S.error}}else M=E.importNode(T,!0),D.appendChild(M),f.Guard.isElementNode(M)&&(_=i(v.namespace_extractQName(M.prefix?M.prefix+":"+M.localName:M.localName),1)[0],O=D.lookupNamespaceURI(_),new C(M)._updateNamespace(O));return this},C.prototype.doc=function(){if(this._doc._isFragment){for(var p=this.node;p&&p.nodeType!==u.NodeType.DocumentFragment;)p=p.parentNode;if(p===null)throw new Error("Node has no parent node while searching for document fragment ancestor. "+this._debugInfo());return new C(p)}return new C(this._doc)},C.prototype.root=function(){var p=this._doc.documentElement;if(!p)throw new Error("Document root element is null. "+this._debugInfo());return new C(p)},C.prototype.up=function(){var p=this._domNode.parentNode;if(!p)throw new Error("Parent node is null. "+this._debugInfo());return new C(p)},C.prototype.prev=function(){var p=this._domNode.previousSibling;if(!p)throw new Error("Previous sibling node is null. "+this._debugInfo());return new C(p)},C.prototype.next=function(){var p=this._domNode.nextSibling;if(!p)throw new Error("Next sibling node is null. "+this._debugInfo());return new C(p)},C.prototype.first=function(){var p=this._domNode.firstChild;if(!p)throw new Error("First child node is null. "+this._debugInfo());return new C(p)},C.prototype.last=function(){var p=this._domNode.lastChild;if(!p)throw new Error("Last child node is null. "+this._debugInfo());return new C(p)},C.prototype.each=function(p,S,I,D){S===void 0&&(S=!1),I===void 0&&(I=!1);for(var E=this._getFirstDescendantNode(this._domNode,S,I);E[0];){var T=this._getNextDescendantNode(this._domNode,E[0],I,E[1],E[2]);p.call(D,new C(E[0]),E[1],E[2]),E=T}return this},C.prototype.map=function(p,S,I,D){S===void 0&&(S=!1),I===void 0&&(I=!1);var E=[];return this.each(function(T,y,M){return E.push(p.call(D,T,y,M))},S,I),E},C.prototype.reduce=function(p,S,I,D,E){I===void 0&&(I=!1),D===void 0&&(D=!1);var T=S;return this.each(function(y,M,_){return T=p.call(E,T,y,M,_)},I,D),T},C.prototype.find=function(p,S,I,D){S===void 0&&(S=!1),I===void 0&&(I=!1);for(var E=this._getFirstDescendantNode(this._domNode,S,I);E[0];){var T=new C(E[0]);if(p.call(D,T,E[1],E[2]))return T;E=this._getNextDescendantNode(this._domNode,E[0],I,E[1],E[2])}},C.prototype.filter=function(p,S,I,D){S===void 0&&(S=!1),I===void 0&&(I=!1);var E=[];return this.each(function(T,y,M){p.call(D,T,y,M)&&E.push(T)},S,I),E},C.prototype.every=function(p,S,I,D){S===void 0&&(S=!1),I===void 0&&(I=!1);for(var E=this._getFirstDescendantNode(this._domNode,S,I);E[0];){var T=new C(E[0]);if(!p.call(D,T,E[1],E[2]))return!1;E=this._getNextDescendantNode(this._domNode,E[0],I,E[1],E[2])}return!0},C.prototype.some=function(p,S,I,D){S===void 0&&(S=!1),I===void 0&&(I=!1);for(var E=this._getFirstDescendantNode(this._domNode,S,I);E[0];){var T=new C(E[0]);if(p.call(D,T,E[1],E[2]))return!0;E=this._getNextDescendantNode(this._domNode,E[0],I,E[1],E[2])}return!1},C.prototype.toArray=function(p,S){p===void 0&&(p=!1),S===void 0&&(S=!1);var I=[];return this.each(function(D){return I.push(D)},p,S),I},C.prototype.toString=function(p){return(p=p||{}).format===void 0&&(p.format="xml"),this._serialize(p)},C.prototype.toObject=function(p){return(p=p||{}).format===void 0&&(p.format="object"),this._serialize(p)},C.prototype.end=function(p){return(p=p||{}).format===void 0&&(p.format="xml"),this.doc()._serialize(p)},C.prototype._getFirstDescendantNode=function(p,S,I){return S?[this._domNode,0,0]:I?this._getNextDescendantNode(p,p,I,0,0):[this._domNode.firstChild,0,1]},C.prototype._getNextDescendantNode=function(p,S,I,D,E){if(!I)return p===S?[S.firstChild,0,E+1]:[S.nextSibling,D+1,E];if(S.firstChild)return[S.firstChild,0,E+1];if(S===p)return[null,-1,-1];if(S.nextSibling)return[S.nextSibling,D+1,E];for(var T=S.parentNode;T&&T!==p;){if(T.nextSibling)return[T.nextSibling,v.tree_index(T.nextSibling),E-1];T=T.parentNode,E--}return[null,-1,-1]},C.prototype._serialize=function(p){if(p.format==="xml")return new l.XMLWriter(this._options,p).serialize(this.node);if(p.format==="map")return new l.MapWriter(this._options,p).serialize(this.node);if(p.format==="object")return new l.ObjectWriter(this._options,p).serialize(this.node);if(p.format==="json")return new l.JSONWriter(this._options,p).serialize(this.node);if(p.format==="yaml")return new l.YAMLWriter(this._options,p).serialize(this.node);throw new Error("Invalid writer format: "+p.format+". "+this._debugInfo())},C.prototype._extractNamespace=function(p,S,I){var D=S.indexOf("@");if(D>0&&(p===void 0&&(p=S.slice(D+1)),S=S.slice(0,D)),p===void 0)p=I?this._options.defaultNamespace.ele:this._options.defaultNamespace.att;else if(p!==null&&p[0]==="@"){var E=p.slice(1);if((p=this._options.namespaceAlias[E])===void 0)throw new Error("Namespace alias `"+E+"` is not defined. "+this._debugInfo())}return[p,S]},C.prototype._updateNamespace=function(p){var S,I,D,E,T=this._domNode;if(f.Guard.isElementNode(T)&&p!==null&&T.namespaceURI!==p){var y=i(v.namespace_extractQName(T.prefix?T.prefix+":"+T.localName:T.localName),2),M=y[0],_=y[1],O=v.create_element(this._doc,_,p,M);try{for(var w=o(T.attributes),x=w.next();!x.done;x=w.next()){var P=x.value,R=P.prefix?P.prefix+":"+P.localName:P.localName,L=i(v.namespace_extractQName(R),1)[0],H=P.namespaceURI;H===null&&L!==null&&(H=T.lookupNamespaceURI(L)),H===null?O.setAttribute(R,P.value):O.setAttributeNS(H,R,P.value)}}catch(De){S={error:De}}finally{try{x&&!x.done&&(I=w.return)&&I.call(w)}finally{if(S)throw S.error}}var F=T.parentNode;if(F===null)throw new Error("Parent node is null."+this._debugInfo());F.replaceChild(O,T),this._domNode=O;try{for(var U=o(T.childNodes),V=U.next();!V.done;V=U.next()){var X=V.value.cloneNode(!0);if(O.appendChild(X),f.Guard.isElementNode(X)){var re=i(v.namespace_extractQName(X.prefix?X.prefix+":"+X.localName:X.localName),1)[0],ue=O.lookupNamespaceURI(re);new C(X)._updateNamespace(ue)}}}catch(De){D={error:De}}finally{try{V&&!V.done&&(E=U.return)&&E.call(U)}finally{if(D)throw D.error}}}},Object.defineProperty(C.prototype,"_doc",{get:function(){var p=this.node;if(f.Guard.isDocumentNode(p))return p;var S=p.ownerDocument;if(!S)throw new Error("Owner document is null. "+this._debugInfo());return S},enumerable:!0,configurable:!0}),C.prototype._debugInfo=function(p){var S=this.node,I=S.parentNode;p=p||S.nodeName;var D=I?I.nodeName:"";return D?"node: <"+p+">, parent: <"+D+">":"node: <"+p+">"},Object.defineProperty(C.prototype,"_options",{get:function(){var p=this._doc;if(p._xmlBuilderOptions===void 0)throw new Error("Builder options is not set.");return p._xmlBuilderOptions},set:function(p){this._doc._xmlBuilderOptions=p},enumerable:!0,configurable:!0}),C}();r.XMLBuilderImpl=h},function(n,r,a){var i=a(11),o=a(117),s=i.WeakMap;n.exports=typeof s=="function"&&/native code/.test(o(s))},function(n,r,a){var i=a(46),o=a(82),s=a(85),c=a(18);n.exports=i("Reflect","ownKeys")||function(l){var u=o.f(c(l)),f=s.f;return f?u.concat(f(l)):u}},function(n,r,a){var i=a(16),o=a(15),s=a(18),c=a(61);n.exports=i?Object.defineProperties:function(l,u){s(l);for(var f,v=c(u),g=v.length,d=0;g>d;)o.f(l,f=v[d++],u[f]);return l}},function(n,r,a){var i=a(46);n.exports=i("document","documentElement")},function(n,r,a){var i=a(24),o=a(82).f,s={}.toString,c=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];n.exports.f=function(l){return c&&s.call(l)=="[object Window]"?function(u){try{return o(u)}catch{return c.slice()}}(l):o(i(l))}},function(n,r,a){var i=a(4),o=a(36).every,s=a(48),c=a(28),l=s("every"),u=c("every");i({target:"Array",proto:!0,forced:!l||!u},{every:function(f){return o(this,f,arguments.length>1?arguments[1]:void 0)}})},function(n,r,a){var i=a(4),o=a(36).filter,s=a(63),c=a(28),l=s("filter"),u=c("filter");i({target:"Array",proto:!0,forced:!l||!u},{filter:function(f){return o(this,f,arguments.length>1?arguments[1]:void 0)}})},function(n,r,a){var i=a(46);n.exports=i("navigator","userAgent")||""},function(n,r,a){var i=a(4),o=a(36).find,s=a(130),c=a(28),l=!0,u=c("find");"find"in[]&&Array(1).find(function(){l=!1}),i({target:"Array",proto:!0,forced:l||!u},{find:function(f){return o(this,f,arguments.length>1?arguments[1]:void 0)}}),s("find")},function(n,r,a){var i=a(131).IteratorPrototype,o=a(60),s=a(40),c=a(62),l=a(49),u=function(){return this};n.exports=function(f,v,g){var d=v+" Iterator";return f.prototype=o(i,{next:s(1,g)}),c(f,d,!1,!0),l[d]=u,f}},function(n,r,a){var i=a(8);n.exports=!i(function(){function o(){}return o.prototype.constructor=null,Object.getPrototypeOf(new o)!==o.prototype})},function(n,r,a){var i=a(13);n.exports=function(o){if(!i(o)&&o!==null)throw TypeError("Can't set "+String(o)+" as a prototype");return o}},function(n,r,a){var i=a(4),o=a(36).map,s=a(63),c=a(28),l=s("map"),u=c("map");i({target:"Array",proto:!0,forced:!l||!u},{map:function(f){return o(this,f,arguments.length>1?arguments[1]:void 0)}})},function(n,r,a){var i=a(4),o=a(200).left,s=a(48),c=a(28),l=s("reduce"),u=c("reduce",{1:0});i({target:"Array",proto:!0,forced:!l||!u},{reduce:function(f){return o(this,f,arguments.length,arguments.length>1?arguments[1]:void 0)}})},function(n,r,a){var i=a(127),o=a(27),s=a(41),c=a(26),l=function(u){return function(f,v,g,d){i(v);var m=o(f),h=s(m),C=c(m.length),p=u?C-1:0,S=u?-1:1;if(g<2)for(;;){if(p in h){d=h[p],p+=S;break}if(p+=S,u?p<0:C<=p)throw TypeError("Reduce of empty array with no initial value")}for(;u?p>=0:C>p;p+=S)p in h&&(d=v(d,h[p],p,m));return d}};n.exports={left:l(!1),right:l(!0)}},function(n,r,a){var i=a(4),o=a(36).some,s=a(48),c=a(28),l=s("some"),u=c("some");i({target:"Array",proto:!0,forced:!l||!u},{some:function(f){return o(this,f,arguments.length>1?arguments[1]:void 0)}})},function(n,r,a){var i=a(90),o=a(135);n.exports=i?{}.toString:function(){return"[object "+o(this)+"]"}},function(n,r){n.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(n,r,a){var i=a(8);n.exports=!i(function(){return Object.isExtensible(Object.preventExtensions({}))})},function(n,r,a){var i=a(5),o=a(49),s=i("iterator"),c=Array.prototype;n.exports=function(l){return l!==void 0&&(o.Array===l||c[s]===l)}},function(n,r,a){var i=a(135),o=a(49),s=a(5)("iterator");n.exports=function(c){if(c!=null)return c[s]||c["@@iterator"]||o[i(c)]}},function(n,r,a){var i=a(18);n.exports=function(o,s,c,l){try{return l?s(i(c)[0],c[1]):s(c)}catch(f){var u=o.return;throw u!==void 0&&i(u.call(o)),f}}},function(n,r,a){var i=a(5)("iterator"),o=!1;try{var s=0,c={next:function(){return{done:!!s++}},return:function(){o=!0}};c[i]=function(){return this},Array.from(c,function(){throw 2})}catch{}n.exports=function(l,u){if(!u&&!o)return!1;var f=!1;try{var v={};v[i]=function(){return{next:function(){return{done:f=!0}}}},l(v)}catch{}return f}},function(n,r,a){var i=a(13),o=a(133);n.exports=function(s,c,l){var u,f;return o&&typeof(u=c.constructor)=="function"&&u!==l&&i(f=u.prototype)&&f!==l.prototype&&o(s,f),s}},function(n,r,a){var i=a(25);n.exports=function(o,s,c){for(var l in s)i(o,l,s[l],c);return o}},function(n,r,a){var i=a(46),o=a(15),s=a(5),c=a(16),l=s("species");n.exports=function(u){var f=i(u),v=o.f;c&&f&&!f[l]&&v(f,l,{configurable:!0,get:function(){return this}})}},function(n,r,a){var i=this&&this.__generator||function(c,l){var u,f,v,g,d={label:0,sent:function(){if(1&v[0])throw v[1];return v[1]},trys:[],ops:[]};return g={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function m(h){return function(C){return function(p){if(u)throw new TypeError("Generator is already executing.");for(;d;)try{if(u=1,f&&(v=2&p[0]?f.return:p[0]?f.throw||((v=f.return)&&v.call(f),0):f.next)&&!(v=v.call(f,p[1])).done)return v;switch(f=0,v&&(p=[2&p[0],v.value]),p[0]){case 0:case 1:v=p;break;case 4:return d.label++,{value:p[1],done:!1};case 5:d.label++,f=p[1],p=[0];continue;case 7:p=d.ops.pop(),d.trys.pop();continue;default:if(v=d.trys,!((v=v.length>0&&v[v.length-1])||p[0]!==6&&p[0]!==2)){d=0;continue}if(p[0]===3&&(!v||p[1]>v[0]&&p[1]<v[3])){d.label=p[1];break}if(p[0]===6&&d.label<v[1]){d.label=v[1],v=p;break}if(v&&d.label<v[2]){d.label=v[2],d.ops.push(p);break}v[2]&&d.ops.pop(),d.trys.pop();continue}p=l.call(c,d)}catch(S){p=[6,S],f=0}finally{u=v=0}if(5&p[0])throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}([h,C])}}},o=this&&this.__values||function(c){var l=typeof Symbol=="function"&&Symbol.iterator,u=l&&c[l],f=0;if(u)return u.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&f>=c.length&&(c=void 0),{value:c&&c[f++],done:!c}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function c(l){l===void 0&&(l=1e3),this._items=new Set,this._limit=l}return c.prototype.add=function(l){if(this._items.add(l),this._items.size>this._limit){var u=this._items.values().next();u.done||this._items.delete(u.value)}return this},c.prototype.delete=function(l){return this._items.delete(l)},c.prototype.has=function(l){return this._items.has(l)},c.prototype.clear=function(){this._items.clear()},Object.defineProperty(c.prototype,"size",{get:function(){return this._items.size},enumerable:!0,configurable:!0}),c.prototype.forEach=function(l,u){var f=this;this._items.forEach(function(v){return l.call(u,v,v,f)})},c.prototype.keys=function(){return i(this,function(l){switch(l.label){case 0:return[5,o(this._items.keys())];case 1:return l.sent(),[2]}})},c.prototype.values=function(){return i(this,function(l){switch(l.label){case 0:return[5,o(this._items.values())];case 1:return l.sent(),[2]}})},c.prototype.entries=function(){return i(this,function(l){switch(l.label){case 0:return[5,o(this._items.entries())];case 1:return l.sent(),[2]}})},c.prototype[Symbol.iterator]=function(){return i(this,function(l){switch(l.label){case 0:return[5,o(this._items)];case 1:return l.sent(),[2]}})},Object.defineProperty(c.prototype,Symbol.toStringTag,{get:function(){return"FixedSizeSet"},enumerable:!0,configurable:!0}),c}();r.FixedSizeSet=s},function(n,r,a){var i=this&&this.__generator||function(c,l){var u,f,v,g,d={label:0,sent:function(){if(1&v[0])throw v[1];return v[1]},trys:[],ops:[]};return g={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function m(h){return function(C){return function(p){if(u)throw new TypeError("Generator is already executing.");for(;d;)try{if(u=1,f&&(v=2&p[0]?f.return:p[0]?f.throw||((v=f.return)&&v.call(f),0):f.next)&&!(v=v.call(f,p[1])).done)return v;switch(f=0,v&&(p=[2&p[0],v.value]),p[0]){case 0:case 1:v=p;break;case 4:return d.label++,{value:p[1],done:!1};case 5:d.label++,f=p[1],p=[0];continue;case 7:p=d.ops.pop(),d.trys.pop();continue;default:if(v=d.trys,!((v=v.length>0&&v[v.length-1])||p[0]!==6&&p[0]!==2)){d=0;continue}if(p[0]===3&&(!v||p[1]>v[0]&&p[1]<v[3])){d.label=p[1];break}if(p[0]===6&&d.label<v[1]){d.label=v[1],v=p;break}if(v&&d.label<v[2]){d.label=v[2],d.ops.push(p);break}v[2]&&d.ops.pop(),d.trys.pop();continue}p=l.call(c,d)}catch(S){p=[6,S],f=0}finally{u=v=0}if(5&p[0])throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}([h,C])}}},o=this&&this.__values||function(c){var l=typeof Symbol=="function"&&Symbol.iterator,u=l&&c[l],f=0;if(u)return u.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&f>=c.length&&(c=void 0),{value:c&&c[f++],done:!c}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function c(l){l===void 0&&(l=1e3),this._items=new Map,this._limit=l}return c.prototype.get=function(l){return this._items.get(l)},c.prototype.set=function(l,u){if(this._items.set(l,u),this._items.size>this._limit){var f=this._items.keys().next();f.done||this._items.delete(f.value)}},c.prototype.delete=function(l){return this._items.delete(l)},c.prototype.has=function(l){return this._items.has(l)},c.prototype.clear=function(){this._items.clear()},Object.defineProperty(c.prototype,"size",{get:function(){return this._items.size},enumerable:!0,configurable:!0}),c.prototype.forEach=function(l,u){this._items.forEach(function(f,v){return l.call(u,v,f)})},c.prototype.keys=function(){return i(this,function(l){switch(l.label){case 0:return[5,o(this._items.keys())];case 1:return l.sent(),[2]}})},c.prototype.values=function(){return i(this,function(l){switch(l.label){case 0:return[5,o(this._items.values())];case 1:return l.sent(),[2]}})},c.prototype.entries=function(){return i(this,function(l){switch(l.label){case 0:return[5,o(this._items.entries())];case 1:return l.sent(),[2]}})},c.prototype[Symbol.iterator]=function(){return i(this,function(l){switch(l.label){case 0:return[5,o(this._items)];case 1:return l.sent(),[2]}})},Object.defineProperty(c.prototype,Symbol.toStringTag,{get:function(){return"ObjectCache"},enumerable:!0,configurable:!0}),c}();r.ObjectCache=s},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function o(s){s===void 0&&(s=1e3),this._items=new Map,this._limit=s}return o.prototype.check=function(s,c){if(this._items.get(s)===c)return!0;if(this._items.get(c)===s)return!1;var l=Math.random()<.5;if(l?this._items.set(s,c):this._items.set(c,s),this._items.size>this._limit){var u=this._items.keys().next();u.done||this._items.delete(u.value)}return l},o}();r.CompareCache=i},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function o(s){this._initialized=!1,this._value=void 0,this._initFunc=s}return Object.defineProperty(o.prototype,"value",{get:function(){return this._initialized||(this._value=this._initFunc(),this._initialized=!0),this._value},enumerable:!0,configurable:!0}),o}();r.Lazy=i},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function o(s){this._pointer=0,this._chars=Array.from(s),this._length=this._chars.length}return Object.defineProperty(o.prototype,"eof",{get:function(){return this._pointer>=this._length},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),o.prototype.codePoint=function(){if(this._codePoint===void 0)if(this.eof)this._codePoint=-1;else{var s=this._chars[this._pointer].codePointAt(0);this._codePoint=s!==void 0?s:-1}return this._codePoint},o.prototype.c=function(){return this._c===void 0&&(this._c=this.eof?"":this._chars[this._pointer]),this._c},o.prototype.remaining=function(){return this._remaining===void 0&&(this._remaining=this.eof?"":this._chars.slice(this._pointer+1).join("")),this._remaining},o.prototype.substring=function(){return this._substring===void 0&&(this._substring=this.eof?"":this._chars.slice(this._pointer).join("")),this._substring},Object.defineProperty(o.prototype,"pointer",{get:function(){return this._pointer},set:function(s){s!==this._pointer&&(this._pointer=s,this._codePoint=void 0,this._c=void 0,this._remaining=void 0,this._substring=void 0)},enumerable:!0,configurable:!0}),o}();r.StringWalker=i},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(218);r.MapWriter=i.MapWriter;var o=a(258);r.XMLWriter=o.XMLWriter;var s=a(67);r.ObjectWriter=s.ObjectWriter;var c=a(260);r.JSONWriter=c.JSONWriter;var l=a(261);r.YAMLWriter=l.YAMLWriter},function(n,r,a){a(19),a(219),a(20),a(22),a(23);var i,o=this&&this.__extends||(i=function(u,f){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,g){v.__proto__=g}||function(v,g){for(var d in g)g.hasOwnProperty(d)&&(v[d]=g[d])})(u,f)},function(u,f){function v(){this.constructor=u}i(u,f),u.prototype=f===null?Object.create(f):(v.prototype=f.prototype,new v)});Object.defineProperty(r,"__esModule",{value:!0});var s=a(1),c=a(67),l=function(u){function f(v,g){var d=u.call(this,v)||this;return d._writerOptions=s.applyDefaults(g,{format:"map",wellFormed:!1,group:!1,verbose:!1}),d}return o(f,u),f.prototype.serialize=function(v){var g=s.applyDefaults(this._writerOptions,{format:"object",wellFormed:!1,verbose:!1}),d=new c.ObjectWriter(this._builderOptions,g).serialize(v);return this._convertObject(d)},f.prototype._convertObject=function(v){if(s.isArray(v)){for(var g=0;g<v.length;g++)v[g]=this._convertObject(v[g]);return v}if(s.isObject(v)){var d=new Map;for(var m in v)d.set(m,this._convertObject(v[m]));return d}return v},f}(a(50).BaseWriter);r.MapWriter=l},function(n,r,a){var i=a(139),o=a(143);n.exports=i("Map",function(s){return function(){return s(this,arguments.length?arguments[0]:void 0)}},o)},function(n,r,a){var i=a(4),o=a(8),s=a(59),c=a(13),l=a(27),u=a(26),f=a(134),v=a(128),g=a(63),d=a(5),m=a(129),h=d("isConcatSpreadable"),C=m>=51||!o(function(){var I=[];return I[h]=!1,I.concat()[0]!==I}),p=g("concat"),S=function(I){if(!c(I))return!1;var D=I[h];return D!==void 0?!!D:s(I)};i({target:"Array",proto:!0,forced:!C||!p},{concat:function(I){var D,E,T,y,M,_=l(this),O=v(_,0),w=0;for(D=-1,T=arguments.length;D<T;D++)if(S(M=D===-1?_:arguments[D])){if(w+(y=u(M.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(E=0;E<y;E++,w++)E in M&&f(O,w,M[E])}else{if(w>=9007199254740991)throw TypeError("Maximum allowed index exceeded");f(O,w++,M)}return O.length=w,O}})},function(n,r,a){var i=a(8);function o(s,c){return RegExp(s,c)}r.UNSUPPORTED_Y=i(function(){var s=o("a","y");return s.lastIndex=2,s.exec("abcd")!=null}),r.BROKEN_CARET=i(function(){var s=o("^r","gy");return s.lastIndex=2,s.exec("str")!=null})},function(n,r,a){var i=a(223);n.exports=function(o){if(i(o))throw TypeError("The method doesn't accept regular expressions");return o}},function(n,r,a){var i=a(13),o=a(42),s=a(5)("match");n.exports=function(c){var l;return i(c)&&((l=c[s])!==void 0?!!l:o(c)=="RegExp")}},function(n,r,a){var i=a(5)("match");n.exports=function(o){var s=/./;try{"/./"[o](s)}catch{try{return s[i]=!1,"/./"[o](s)}catch{}}return!1}},function(n,r,a){a(68);var i=a(25),o=a(8),s=a(5),c=a(93),l=a(21),u=s("species"),f=!o(function(){var h=/./;return h.exec=function(){var C=[];return C.groups={a:"7"},C},"".replace(h,"$<a>")!=="7"}),v="a".replace(/./,"$0")==="$0",g=s("replace"),d=!!/./[g]&&/./[g]("a","$0")==="",m=!o(function(){var h=/(?:)/,C=h.exec;h.exec=function(){return C.apply(this,arguments)};var p="ab".split(h);return p.length!==2||p[0]!=="a"||p[1]!=="b"});n.exports=function(h,C,p,S){var I=s(h),D=!o(function(){var O={};return O[I]=function(){return 7},""[h](O)!=7}),E=D&&!o(function(){var O=!1,w=/a/;return h==="split"&&((w={}).constructor={},w.constructor[u]=function(){return w},w.flags="",w[I]=/./[I]),w.exec=function(){return O=!0,null},w[I](""),!O});if(!D||!E||h==="replace"&&(!f||!v||d)||h==="split"&&!m){var T=/./[I],y=p(I,""[h],function(O,w,x,P,R){return w.exec===c?D&&!R?{done:!0,value:T.call(w,x,P)}:{done:!0,value:O.call(x,w,P)}:{done:!1}},{REPLACE_KEEPS_$0:v,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:d}),M=y[0],_=y[1];i(String.prototype,h,M),i(RegExp.prototype,I,C==2?function(O,w){return _.call(O,this,w)}:function(O){return _.call(O,this)})}S&&l(RegExp.prototype[I],"sham",!0)}},function(n,r,a){var i=a(137).charAt;n.exports=function(o,s,c){return s+(c?i(o,s).length:1)}},function(n,r,a){var i=a(42),o=a(93);n.exports=function(s,c){var l=s.exec;if(typeof l=="function"){var u=l.call(s,c);if(typeof u!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return u}if(i(s)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return o.call(s,c)}},function(n,r,a){(function(i){Object.defineProperty(r,"__esModule",{value:!0});var o=a(96);r.forgivingBase64Encode=function(s){return i.from(s).toString("base64")},r.forgivingBase64Decode=function(s){return s===""?"":((s=s.replace(o.ASCIIWhiteSpace,"")).length%4==0&&(s.endsWith("==")?s=s.substr(0,s.length-2):s.endsWith("=")&&(s=s.substr(0,s.length-1))),s.length%4==1?null:/[0-9A-Za-z+/]/.test(s)?i.from(s,"base64").toString("utf8"):null)}}).call(this,a(145).Buffer)},function(n,r,a){r.byteLength=function(g){var d=f(g),m=d[0],h=d[1];return 3*(m+h)/4-h},r.toByteArray=function(g){var d,m,h=f(g),C=h[0],p=h[1],S=new s(function(E,T,y){return 3*(T+y)/4-y}(0,C,p)),I=0,D=p>0?C-4:C;for(m=0;m<D;m+=4)d=o[g.charCodeAt(m)]<<18|o[g.charCodeAt(m+1)]<<12|o[g.charCodeAt(m+2)]<<6|o[g.charCodeAt(m+3)],S[I++]=d>>16&255,S[I++]=d>>8&255,S[I++]=255&d;return p===2&&(d=o[g.charCodeAt(m)]<<2|o[g.charCodeAt(m+1)]>>4,S[I++]=255&d),p===1&&(d=o[g.charCodeAt(m)]<<10|o[g.charCodeAt(m+1)]<<4|o[g.charCodeAt(m+2)]>>2,S[I++]=d>>8&255,S[I++]=255&d),S},r.fromByteArray=function(g){for(var d,m=g.length,h=m%3,C=[],p=0,S=m-h;p<S;p+=16383)C.push(v(g,p,p+16383>S?S:p+16383));return h===1?(d=g[m-1],C.push(i[d>>2]+i[d<<4&63]+"==")):h===2&&(d=(g[m-2]<<8)+g[m-1],C.push(i[d>>10]+i[d>>4&63]+i[d<<2&63]+"=")),C.join("")};for(var i=[],o=[],s=typeof Uint8Array<"u"?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,u=c.length;l<u;++l)i[l]=c[l],o[c.charCodeAt(l)]=l;function f(g){var d=g.length;if(d%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var m=g.indexOf("=");return m===-1&&(m=d),[m,m===d?0:4-m%4]}function v(g,d,m){for(var h,C,p=[],S=d;S<m;S+=3)h=(g[S]<<16&16711680)+(g[S+1]<<8&65280)+(255&g[S+2]),p.push(i[(C=h)>>18&63]+i[C>>12&63]+i[C>>6&63]+i[63&C]);return p.join("")}o[45]=62,o[95]=63},function(n,r){r.read=function(a,i,o,s,c){var l,u,f=8*c-s-1,v=(1<<f)-1,g=v>>1,d=-7,m=o?c-1:0,h=o?-1:1,C=a[i+m];for(m+=h,l=C&(1<<-d)-1,C>>=-d,d+=f;d>0;l=256*l+a[i+m],m+=h,d-=8);for(u=l&(1<<-d)-1,l>>=-d,d+=s;d>0;u=256*u+a[i+m],m+=h,d-=8);if(l===0)l=1-g;else{if(l===v)return u?NaN:1/0*(C?-1:1);u+=Math.pow(2,s),l-=g}return(C?-1:1)*u*Math.pow(2,l-s)},r.write=function(a,i,o,s,c,l){var u,f,v,g=8*l-c-1,d=(1<<g)-1,m=d>>1,h=c===23?Math.pow(2,-24)-Math.pow(2,-77):0,C=s?0:l-1,p=s?1:-1,S=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(f=isNaN(i)?1:0,u=d):(u=Math.floor(Math.log(i)/Math.LN2),i*(v=Math.pow(2,-u))<1&&(u--,v*=2),(i+=u+m>=1?h/v:h*Math.pow(2,1-m))*v>=2&&(u++,v/=2),u+m>=d?(f=0,u=d):u+m>=1?(f=(i*v-1)*Math.pow(2,c),u+=m):(f=i*Math.pow(2,m-1)*Math.pow(2,c),u=0));c>=8;a[o+C]=255&f,C+=p,f/=256,c-=8);for(u=u<<c|f,g+=c;g>0;a[o+C]=255&u,C+=p,u/=256,g-=8);a[o+C-p]|=128*S}},function(n,r){var a={}.toString;n.exports=Array.isArray||function(i){return a.call(i)=="[object Array]"}},function(n,r,a){var i=this&&this.__values||function(c){var l=typeof Symbol=="function"&&Symbol.iterator,u=l&&c[l],f=0;if(u)return u.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&f>=c.length&&(c=void 0),{value:c&&c[f++],done:!c}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var o=a(1);function s(c){var l,u;if(c===null||o.isString(c)||o.isNumber(c))return c;if(o.isArray(c)){var f=new Array;try{for(var v=i(c),g=v.next();!g.done;g=v.next()){var d=g.value;f.push(s(d))}}catch(C){l={error:C}}finally{try{g&&!g.done&&(u=v.return)&&u.call(v)}finally{if(l)throw l.error}}return f}if(o.isObject(c)){f=new Map;for(var m in c)if(c.hasOwnProperty(m)){var h=c[m];f.set(m,s(h))}return f}return c}r.parseJSONFromBytes=function(c){var l=o.utf8Decode(c);return JSON.parse.call(void 0,l)},r.serializeJSONToBytes=function(c){var l=JSON.stringify.call(void 0,c);return o.utf8Encode(l)},r.parseJSONIntoInfraValues=function(c){return s(JSON.parse.call(void 0,c))},r.convertAJSONDerivedJavaScriptValueToAnInfraValue=s},function(n,r,a){var i=this&&this.__generator||function(u,f){var v,g,d,m,h={label:0,sent:function(){if(1&d[0])throw d[1];return d[1]},trys:[],ops:[]};return m={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(m[Symbol.iterator]=function(){return this}),m;function C(p){return function(S){return function(I){if(v)throw new TypeError("Generator is already executing.");for(;h;)try{if(v=1,g&&(d=2&I[0]?g.return:I[0]?g.throw||((d=g.return)&&d.call(g),0):g.next)&&!(d=d.call(g,I[1])).done)return d;switch(g=0,d&&(I=[2&I[0],d.value]),I[0]){case 0:case 1:d=I;break;case 4:return h.label++,{value:I[1],done:!1};case 5:h.label++,g=I[1],I=[0];continue;case 7:I=h.ops.pop(),h.trys.pop();continue;default:if(d=h.trys,!((d=d.length>0&&d[d.length-1])||I[0]!==6&&I[0]!==2)){h=0;continue}if(I[0]===3&&(!d||I[1]>d[0]&&I[1]<d[3])){h.label=I[1];break}if(I[0]===6&&h.label<d[1]){h.label=d[1],d=I;break}if(d&&h.label<d[2]){h.label=d[2],h.ops.push(I);break}d[2]&&h.ops.pop(),h.trys.pop();continue}I=f.call(u,h)}catch(D){I=[6,D],g=0}finally{v=d=0}if(5&I[0])throw I[1];return{value:I[0]?I[1]:void 0,done:!0}}([p,S])}}},o=this&&this.__read||function(u,f){var v=typeof Symbol=="function"&&u[Symbol.iterator];if(!v)return u;var g,d,m=v.call(u),h=[];try{for(;(f===void 0||f-- >0)&&!(g=m.next()).done;)h.push(g.value)}catch(C){d={error:C}}finally{try{g&&!g.done&&(v=m.return)&&v.call(m)}finally{if(d)throw d.error}}return h},s=this&&this.__spread||function(){for(var u=[],f=0;f<arguments.length;f++)u=u.concat(o(arguments[f]));return u},c=this&&this.__values||function(u){var f=typeof Symbol=="function"&&Symbol.iterator,v=f&&u[f],g=0;if(v)return v.call(u);if(u&&typeof u.length=="number")return{next:function(){return u&&g>=u.length&&(u=void 0),{value:u&&u[g++],done:!u}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var l=a(1);r.append=function(u,f){u.push(f)},r.extend=function(u,f){u.push.apply(u,s(f))},r.prepend=function(u,f){u.unshift(f)},r.replace=function(u,f,v){var g,d,m=0;try{for(var h=c(u),C=h.next();!C.done;C=h.next()){var p=C.value;if(l.isFunction(f))f.call(null,p)&&(u[m]=v);else if(p===f)return void(u[m]=v);m++}}catch(S){g={error:S}}finally{try{C&&!C.done&&(d=h.return)&&d.call(h)}finally{if(g)throw g.error}}},r.insert=function(u,f,v){u.splice(v,0,f)},r.remove=function(u,f){for(var v=u.length;v--;){var g=u[v];if(l.isFunction(f))f.call(null,g)&&u.splice(v,1);else if(g===f)return void u.splice(v,1)}},r.empty=function(u){u.length=0},r.contains=function(u,f){var v,g;try{for(var d=c(u),m=d.next();!m.done;m=d.next()){var h=m.value;if(l.isFunction(f)){if(f.call(null,h))return!0}else if(h===f)return!0}}catch(C){v={error:C}}finally{try{m&&!m.done&&(g=d.return)&&g.call(d)}finally{if(v)throw v.error}}return!1},r.size=function(u,f){var v,g;if(f===void 0)return u.length;var d=0;try{for(var m=c(u),h=m.next();!h.done;h=m.next()){var C=h.value;f.call(null,C)&&d++}}catch(p){v={error:p}}finally{try{h&&!h.done&&(g=m.return)&&g.call(m)}finally{if(v)throw v.error}}return d},r.isEmpty=function(u){return u.length===0},r.forEach=function(u,f){var v,g,d,m,h,C;return i(this,function(p){switch(p.label){case 0:return f!==void 0?[3,2]:[5,c(u)];case 1:return p.sent(),[3,9];case 2:p.trys.push([2,7,8,9]),v=c(u),g=v.next(),p.label=3;case 3:return g.done?[3,6]:(d=g.value,f.call(null,d)?[4,d]:[3,5]);case 4:p.sent(),p.label=5;case 5:return g=v.next(),[3,3];case 6:return[3,9];case 7:return m=p.sent(),h={error:m},[3,9];case 8:try{g&&!g.done&&(C=v.return)&&C.call(v)}finally{if(h)throw h.error}return[7];case 9:return[2]}})},r.clone=function(u){return new(Array.bind.apply(Array,s([void 0],u)))},r.sortInAscendingOrder=function(u,f){return u.sort(function(v,g){return f.call(null,v,g)?-1:1})},r.sortInDescendingOrder=function(u,f){return u.sort(function(v,g){return f.call(null,v,g)?1:-1})}},function(n,r,a){var i=this&&this.__generator||function(u,f){var v,g,d,m,h={label:0,sent:function(){if(1&d[0])throw d[1];return d[1]},trys:[],ops:[]};return m={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(m[Symbol.iterator]=function(){return this}),m;function C(p){return function(S){return function(I){if(v)throw new TypeError("Generator is already executing.");for(;h;)try{if(v=1,g&&(d=2&I[0]?g.return:I[0]?g.throw||((d=g.return)&&d.call(g),0):g.next)&&!(d=d.call(g,I[1])).done)return d;switch(g=0,d&&(I=[2&I[0],d.value]),I[0]){case 0:case 1:d=I;break;case 4:return h.label++,{value:I[1],done:!1};case 5:h.label++,g=I[1],I=[0];continue;case 7:I=h.ops.pop(),h.trys.pop();continue;default:if(d=h.trys,!((d=d.length>0&&d[d.length-1])||I[0]!==6&&I[0]!==2)){h=0;continue}if(I[0]===3&&(!d||I[1]>d[0]&&I[1]<d[3])){h.label=I[1];break}if(I[0]===6&&h.label<d[1]){h.label=d[1],d=I;break}if(d&&h.label<d[2]){h.label=d[2],h.ops.push(I);break}d[2]&&h.ops.pop(),h.trys.pop();continue}I=f.call(u,h)}catch(D){I=[6,D],g=0}finally{v=d=0}if(5&I[0])throw I[1];return{value:I[0]?I[1]:void 0,done:!0}}([p,S])}}},o=this&&this.__values||function(u){var f=typeof Symbol=="function"&&Symbol.iterator,v=f&&u[f],g=0;if(v)return v.call(u);if(u&&typeof u.length=="number")return{next:function(){return u&&g>=u.length&&(u=void 0),{value:u&&u[g++],done:!u}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__read||function(u,f){var v=typeof Symbol=="function"&&u[Symbol.iterator];if(!v)return u;var g,d,m=v.call(u),h=[];try{for(;(f===void 0||f-- >0)&&!(g=m.next()).done;)h.push(g.value)}catch(C){d={error:C}}finally{try{g&&!g.done&&(v=m.return)&&v.call(m)}finally{if(d)throw d.error}}return h},c=this&&this.__spread||function(){for(var u=[],f=0;f<arguments.length;f++)u=u.concat(s(arguments[f]));return u};Object.defineProperty(r,"__esModule",{value:!0});var l=a(1);r.get=function(u,f){return u.get(f)},r.set=function(u,f,v){u.set(f,v)},r.remove=function(u,f){var v,g,d,m;if(l.isFunction(f)){var h=[];try{for(var C=o(u),p=C.next();!p.done;p=C.next()){var S=p.value;f.call(null,S)&&h.push(S[0])}}catch(T){v={error:T}}finally{try{p&&!p.done&&(g=C.return)&&g.call(C)}finally{if(v)throw v.error}}try{for(var I=o(h),D=I.next();!D.done;D=I.next()){var E=D.value;u.delete(E)}}catch(T){d={error:T}}finally{try{D&&!D.done&&(m=I.return)&&m.call(I)}finally{if(d)throw d.error}}}else u.delete(f)},r.contains=function(u,f){var v,g;if(l.isFunction(f)){try{for(var d=o(u),m=d.next();!m.done;m=d.next()){var h=m.value;if(f.call(null,h))return!0}}catch(C){v={error:C}}finally{try{m&&!m.done&&(g=d.return)&&g.call(d)}finally{if(v)throw v.error}}return!1}return u.has(f)},r.keys=function(u){return new Set(u.keys())},r.values=function(u){return c(u.values())},r.size=function(u,f){var v,g;if(f===void 0)return u.size;var d=0;try{for(var m=o(u),h=m.next();!h.done;h=m.next()){var C=h.value;f.call(null,C)&&d++}}catch(p){v={error:p}}finally{try{h&&!h.done&&(g=m.return)&&g.call(m)}finally{if(v)throw v.error}}return d},r.isEmpty=function(u){return u.size===0},r.forEach=function(u,f){var v,g,d,m,h,C;return i(this,function(p){switch(p.label){case 0:return f!==void 0?[3,2]:[5,o(u)];case 1:return p.sent(),[3,9];case 2:p.trys.push([2,7,8,9]),v=o(u),g=v.next(),p.label=3;case 3:return g.done?[3,6]:(d=g.value,f.call(null,d)?[4,d]:[3,5]);case 4:p.sent(),p.label=5;case 5:return g=v.next(),[3,3];case 6:return[3,9];case 7:return m=p.sent(),h={error:m},[3,9];case 8:try{g&&!g.done&&(C=v.return)&&C.call(v)}finally{if(h)throw h.error}return[7];case 9:return[2]}})},r.clone=function(u){return new Map(u)},r.sortInAscendingOrder=function(u,f){var v=new(Array.bind.apply(Array,c([void 0],u)));return v.sort(function(g,d){return f.call(null,g,d)?-1:1}),new Map(v)},r.sortInDescendingOrder=function(u,f){var v=new(Array.bind.apply(Array,c([void 0],u)));return v.sort(function(g,d){return f.call(null,g,d)?1:-1}),new Map(v)}},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.HTML="http://www.w3.org/1999/xhtml",r.XML="http://www.w3.org/XML/1998/namespace",r.XMLNS="http://www.w3.org/2000/xmlns/",r.MathML="http://www.w3.org/1998/Math/MathML",r.SVG="http://www.w3.org/2000/svg",r.XLink="http://www.w3.org/1999/xlink"},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.enqueue=function(i,o){i.push(o)},r.dequeue=function(i){return i.shift()||null}},function(n,r,a){var i=this&&this.__generator||function(f,v){var g,d,m,h,C={label:0,sent:function(){if(1&m[0])throw m[1];return m[1]},trys:[],ops:[]};return h={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function p(S){return function(I){return function(D){if(g)throw new TypeError("Generator is already executing.");for(;C;)try{if(g=1,d&&(m=2&D[0]?d.return:D[0]?d.throw||((m=d.return)&&m.call(d),0):d.next)&&!(m=m.call(d,D[1])).done)return m;switch(d=0,m&&(D=[2&D[0],m.value]),D[0]){case 0:case 1:m=D;break;case 4:return C.label++,{value:D[1],done:!1};case 5:C.label++,d=D[1],D=[0];continue;case 7:D=C.ops.pop(),C.trys.pop();continue;default:if(m=C.trys,!((m=m.length>0&&m[m.length-1])||D[0]!==6&&D[0]!==2)){C=0;continue}if(D[0]===3&&(!m||D[1]>m[0]&&D[1]<m[3])){C.label=D[1];break}if(D[0]===6&&C.label<m[1]){C.label=m[1],m=D;break}if(m&&C.label<m[2]){C.label=m[2],C.ops.push(D);break}m[2]&&C.ops.pop(),C.trys.pop();continue}D=v.call(f,C)}catch(E){D=[6,E],d=0}finally{g=m=0}if(5&D[0])throw D[1];return{value:D[0]?D[1]:void 0,done:!0}}([S,I])}}},o=this&&this.__values||function(f){var v=typeof Symbol=="function"&&Symbol.iterator,g=v&&f[v],d=0;if(g)return g.call(f);if(f&&typeof f.length=="number")return{next:function(){return f&&d>=f.length&&(f=void 0),{value:f&&f[d++],done:!f}}};throw new TypeError(v?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__read||function(f,v){var g=typeof Symbol=="function"&&f[Symbol.iterator];if(!g)return f;var d,m,h=g.call(f),C=[];try{for(;(v===void 0||v-- >0)&&!(d=h.next()).done;)C.push(d.value)}catch(p){m={error:p}}finally{try{d&&!d.done&&(g=h.return)&&g.call(h)}finally{if(m)throw m.error}}return C},c=this&&this.__spread||function(){for(var f=[],v=0;v<arguments.length;v++)f=f.concat(s(arguments[v]));return f};Object.defineProperty(r,"__esModule",{value:!0});var l=a(1);function u(f,v){var g,d;try{for(var m=o(f),h=m.next();!h.done;h=m.next()){var C=h.value;if(!v.has(C))return!1}}catch(p){g={error:p}}finally{try{h&&!h.done&&(d=m.return)&&d.call(m)}finally{if(g)throw g.error}}return!0}r.append=function(f,v){f.add(v)},r.extend=function(f,v){v.forEach(f.add,f)},r.prepend=function(f,v){var g=new Set(f);f.clear(),f.add(v),g.forEach(f.add,f)},r.replace=function(f,v,g){var d,m,h=new Set;try{for(var C=o(f),p=C.next();!p.done;p=C.next()){var S=p.value;l.isFunction(v)?v.call(null,S)?h.add(g):h.add(S):S===v?h.add(g):h.add(S)}}catch(I){d={error:I}}finally{try{p&&!p.done&&(m=C.return)&&m.call(C)}finally{if(d)throw d.error}}f.clear(),h.forEach(f.add,f)},r.insert=function(f,v,g){var d,m,h=new Set,C=0;try{for(var p=o(f),S=p.next();!S.done;S=p.next()){var I=S.value;C===g&&h.add(v),h.add(I),C++}}catch(D){d={error:D}}finally{try{S&&!S.done&&(m=p.return)&&m.call(p)}finally{if(d)throw d.error}}f.clear(),h.forEach(f.add,f)},r.remove=function(f,v){var g,d,m,h;if(l.isFunction(v)){var C=[];try{for(var p=o(f),S=p.next();!S.done;S=p.next()){var I=S.value;v.call(null,I)&&C.push(I)}}catch(y){g={error:y}}finally{try{S&&!S.done&&(d=p.return)&&d.call(p)}finally{if(g)throw g.error}}try{for(var D=o(C),E=D.next();!E.done;E=D.next()){var T=E.value;f.delete(T)}}catch(y){m={error:y}}finally{try{E&&!E.done&&(h=D.return)&&h.call(D)}finally{if(m)throw m.error}}}else f.delete(v)},r.empty=function(f){f.clear()},r.contains=function(f,v){var g,d;if(!l.isFunction(v))return f.has(v);try{for(var m=o(f),h=m.next();!h.done;h=m.next()){var C=h.value;if(v.call(null,C))return!0}}catch(p){g={error:p}}finally{try{h&&!h.done&&(d=m.return)&&d.call(m)}finally{if(g)throw g.error}}return!1},r.size=function(f,v){var g,d;if(v===void 0)return f.size;var m=0;try{for(var h=o(f),C=h.next();!C.done;C=h.next()){var p=C.value;v.call(null,p)&&m++}}catch(S){g={error:S}}finally{try{C&&!C.done&&(d=h.return)&&d.call(h)}finally{if(g)throw g.error}}return m},r.isEmpty=function(f){return f.size===0},r.forEach=function(f,v){var g,d,m,h,C,p;return i(this,function(S){switch(S.label){case 0:return v!==void 0?[3,2]:[5,o(f)];case 1:return S.sent(),[3,9];case 2:S.trys.push([2,7,8,9]),g=o(f),d=g.next(),S.label=3;case 3:return d.done?[3,6]:(m=d.value,v.call(null,m)?[4,m]:[3,5]);case 4:S.sent(),S.label=5;case 5:return d=g.next(),[3,3];case 6:return[3,9];case 7:return h=S.sent(),C={error:h},[3,9];case 8:try{d&&!d.done&&(p=g.return)&&p.call(g)}finally{if(C)throw C.error}return[7];case 9:return[2]}})},r.clone=function(f){return new Set(f)},r.sortInAscendingOrder=function(f,v){var g=new(Array.bind.apply(Array,c([void 0],f)));return g.sort(function(d,m){return v.call(null,d,m)?-1:1}),new Set(g)},r.sortInDescendingOrder=function(f,v){var g=new(Array.bind.apply(Array,c([void 0],f)));return g.sort(function(d,m){return v.call(null,d,m)?1:-1}),new Set(g)},r.isSubsetOf=u,r.isSupersetOf=function(f,v){return u(v,f)},r.intersection=function(f,v){var g,d,m=new Set;try{for(var h=o(f),C=h.next();!C.done;C=h.next()){var p=C.value;v.has(p)&&m.add(p)}}catch(S){g={error:S}}finally{try{C&&!C.done&&(d=h.return)&&d.call(h)}finally{if(g)throw g.error}}return m},r.union=function(f,v){var g=new Set(f);return v.forEach(g.add,g),g},r.range=function(f,v){for(var g=new Set,d=f;d<=v;d++)g.add(d);return g}},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.push=function(i,o){i.push(o)},r.pop=function(i){return i.pop()||null}},function(n,r,a){var i=this&&this.__values||function(C){var p=typeof Symbol=="function"&&Symbol.iterator,S=p&&C[p],I=0;if(S)return S.call(C);if(C&&typeof C.length=="number")return{next:function(){return C&&I>=C.length&&(C=void 0),{value:C&&C[I++],done:!C}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var o=a(96),s=a(147),c=a(146),l=a(1);function u(C,p){for(var S=0;;){var I=S<C.length?C.charCodeAt(S):null,D=S<p.length?p.charCodeAt(S):null;if(I===null)return!0;if(I!==D)return!1;S++}}function f(C){var p,S,I=Array.from(C),D=new Uint8Array(I.length),E=0;try{for(var T=i(C),y=T.next();!y.done;y=T.next()){var M=y.value.codePointAt(0);console.assert(M!==void 0&&M<=255,"isomorphicEncode requires string bytes to be less than or equal to 0x00FF."),M!==void 0&&M<=255&&(D[E++]=M)}}catch(_){p={error:_}}finally{try{y&&!y.done&&(S=T.return)&&S.call(T)}finally{if(p)throw p.error}}return D}function v(C){return/^[\u0000-\u007F]*$/.test(C)}function g(C){var p,S,I="";try{for(var D=i(C),E=D.next();!E.done;E=D.next()){var T=E.value,y=T.codePointAt(0);I+=y!==void 0&&y>=65&&y<=90?String.fromCodePoint(y+32):T}}catch(M){p={error:M}}finally{try{E&&!E.done&&(S=D.return)&&S.call(D)}finally{if(p)throw p.error}}return I}function d(C){return C.replace(/^[\t\n\f\r ]+/,"").replace(/[\t\n\f\r ]+$/,"")}function m(C,p,S){if(!l.isArray(p))return m(C,Array.from(p),S);for(var I="";S.position<p.length&&C.call(null,p[S.position]);)I+=p[S.position],S.position++;return I}function h(C,p){m(function(S){return o.ASCIIWhiteSpace.test(S)},C,p)}r.isCodeUnitPrefix=u,r.isCodeUnitLessThan=function(C,p){if(u(p,C))return!1;if(u(C,p))return!0;for(var S=0;S<Math.min(C.length,p.length);S++){var I=C.charCodeAt(S),D=p.charCodeAt(S);if(I!==D)return I<D}return!1},r.isomorphicEncode=f,r.isASCIIString=v,r.asciiLowercase=g,r.asciiUppercase=function(C){var p,S,I="";try{for(var D=i(C),E=D.next();!E.done;E=D.next()){var T=E.value,y=T.codePointAt(0);I+=y!==void 0&&y>=97&&y<=122?String.fromCodePoint(y-32):T}}catch(M){p={error:M}}finally{try{E&&!E.done&&(S=D.return)&&S.call(D)}finally{if(p)throw p.error}}return I},r.asciiCaseInsensitiveMatch=function(C,p){return g(C)===g(p)},r.asciiEncode=function(C){return console.assert(v(C),"asciiEncode requires an ASCII string."),f(C)},r.asciiDecode=function(C){var p,S;try{for(var I=i(C),D=I.next();!D.done;D=I.next()){var E=D.value;console.assert(c.isASCIIByte(E),"asciiDecode requires an ASCII byte sequence.")}}catch(T){p={error:T}}finally{try{D&&!D.done&&(S=I.return)&&S.call(I)}finally{if(p)throw p.error}}return s.isomorphicDecode(C)},r.stripNewlines=function(C){return C.replace(/[\n\r]/g,"")},r.normalizeNewlines=function(C){return C.replace(/\r\n/g,`
`).replace(/\r/g,`
`)},r.stripLeadingAndTrailingASCIIWhitespace=d,r.stripAndCollapseASCIIWhitespace=function(C){return d(C.replace(/[\t\n\f\r ]{2,}/g," "))},r.collectASequenceOfCodePoints=m,r.skipASCIIWhitespace=h,r.strictlySplit=function C(p,S){if(!l.isArray(p))return C(Array.from(p),S);var I={position:0},D=[],E=m(function(T){return S!==T},p,I);for(D.push(E);I.position<p.length;)console.assert(p[I.position]===S,"strictlySplit found no delimiter in input string."),I.position++,E=m(function(T){return S!==T},p,I),D.push(E);return D},r.splitAStringOnASCIIWhitespace=function C(p){if(!l.isArray(p))return C(Array.from(p));var S={position:0},I=[];for(h(p,S);S.position<p.length;){var D=m(function(E){return!o.ASCIIWhiteSpace.test(E)},p,S);I.push(D),h(p,S)}return I},r.splitAStringOnCommas=function C(p){if(!l.isArray(p))return C(Array.from(p));for(var S={position:0},I=[];S.position<p.length;){var D=m(function(E){return E!==","},p,S);I.push(d(D)),S.position<p.length&&(console.assert(p[S.position]===",","splitAStringOnCommas found no delimiter in input string."),S.position++)}return I},r.concatenate=function(C,p){return p===void 0&&(p=""),C.length===0?"":C.join(p)}},function(n,r,a){var i=this&&this.__values||function(s){var c=typeof Symbol=="function"&&Symbol.iterator,l=c&&s[c],u=0;if(l)return l.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&u>=s.length&&(s=void 0),{value:s&&s[u++],done:!s}}};throw new TypeError(c?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var o=a(97);r.abort_add=function(s,c){c._abortedFlag||c._abortAlgorithms.add(s)},r.abort_remove=function(s,c){c._abortAlgorithms.delete(s)},r.abort_signalAbort=function(s){var c,l;if(!s._abortedFlag){s._abortedFlag=!0;try{for(var u=i(s._abortAlgorithms),f=u.next();!f.done;f=u.next())f.value.call(s)}catch(v){c={error:v}}finally{try{f&&!f.done&&(l=u.return)&&l.call(u)}finally{if(c)throw c.error}}s._abortAlgorithms.clear(),o.event_fireAnEvent("abort",s)}}},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(150),o=function(){function s(){}return s.asNode=function(c){if(i.Guard.isNode(c))return c;throw new Error("Invalid object. Node expected.")},s}();r.Cast=o},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function s(){}return Object.defineProperty(s.prototype,"size",{get:function(){return 0},enumerable:!0,configurable:!0}),s.prototype.add=function(c){throw new Error("Cannot add to an empty set.")},s.prototype.clear=function(){},s.prototype.delete=function(c){return!1},s.prototype.forEach=function(c,l){},s.prototype.has=function(c){return!1},s.prototype[Symbol.iterator]=function(){return new o},s.prototype.entries=function(){return new o},s.prototype.keys=function(){return new o},s.prototype.values=function(){return new o},Object.defineProperty(s.prototype,Symbol.toStringTag,{get:function(){return"EmptySet"},enumerable:!0,configurable:!0}),s}();r.EmptySet=i;var o=function(){function s(){}return s.prototype[Symbol.iterator]=function(){return this},s.prototype.next=function(){return{done:!0,value:null}},s}()},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),function(i){i[i.SchemeStart=0]="SchemeStart",i[i.Scheme=1]="Scheme",i[i.NoScheme=2]="NoScheme",i[i.SpecialRelativeOrAuthority=3]="SpecialRelativeOrAuthority",i[i.PathOrAuthority=4]="PathOrAuthority",i[i.Relative=5]="Relative",i[i.RelativeSlash=6]="RelativeSlash",i[i.SpecialAuthoritySlashes=7]="SpecialAuthoritySlashes",i[i.SpecialAuthorityIgnoreSlashes=8]="SpecialAuthorityIgnoreSlashes",i[i.Authority=9]="Authority",i[i.Host=10]="Host",i[i.Hostname=11]="Hostname",i[i.Port=12]="Port",i[i.File=13]="File",i[i.FileSlash=14]="FileSlash",i[i.FileHost=15]="FileHost",i[i.PathStart=16]="PathStart",i[i.Path=17]="Path",i[i.CannotBeABaseURLPath=18]="CannotBeABaseURLPath",i[i.Query=19]="Query",i[i.Fragment=20]="Fragment"}(r.ParserState||(r.ParserState={})),r.OpaqueOrigin=["","",null,null]},function(n,r,a){var i=a(245),o=a(247);function s(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}r.parse=D,r.resolve=function(E,T){return D(E,!1,!0).resolve(T)},r.resolveObject=function(E,T){return E?D(E,!1,!0).resolveObject(T):T},r.format=function(E){return o.isString(E)&&(E=D(E)),E instanceof s?E.format():s.prototype.format.call(E)},r.Url=s;var c=/^([a-z0-9.+-]+:)/i,l=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,f=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r",`
`,"	"]),v=["'"].concat(f),g=["%","/","?",";","#"].concat(v),d=["/","?","#"],m=/^[+a-z0-9A-Z_-]{0,63}$/,h=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,C={javascript:!0,"javascript:":!0},p={javascript:!0,"javascript:":!0},S={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},I=a(248);function D(E,T,y){if(E&&o.isObject(E)&&E instanceof s)return E;var M=new s;return M.parse(E,T,y),M}s.prototype.parse=function(E,T,y){if(!o.isString(E))throw new TypeError("Parameter 'url' must be a string, not "+typeof E);var M=E.indexOf("?"),_=M!==-1&&M<E.indexOf("#")?"?":"#",O=E.split(_);O[0]=O[0].replace(/\\/g,"/");var w=E=O.join(_);if(w=w.trim(),!y&&E.split("#").length===1){var x=u.exec(w);if(x)return this.path=w,this.href=w,this.pathname=x[1],x[2]?(this.search=x[2],this.query=T?I.parse(this.search.substr(1)):this.search.substr(1)):T&&(this.search="",this.query={}),this}var P=c.exec(w);if(P){var R=(P=P[0]).toLowerCase();this.protocol=R,w=w.substr(P.length)}if(y||P||w.match(/^\/\/[^@\/]+@[^@\/]+/)){var L=w.substr(0,2)==="//";!L||P&&p[P]||(w=w.substr(2),this.slashes=!0)}if(!p[P]&&(L||P&&!S[P])){for(var H,F,U=-1,V=0;V<d.length;V++)(X=w.indexOf(d[V]))!==-1&&(U===-1||X<U)&&(U=X);for((F=U===-1?w.lastIndexOf("@"):w.lastIndexOf("@",U))!==-1&&(H=w.slice(0,F),w=w.slice(F+1),this.auth=decodeURIComponent(H)),U=-1,V=0;V<g.length;V++){var X;(X=w.indexOf(g[V]))!==-1&&(U===-1||X<U)&&(U=X)}U===-1&&(U=w.length),this.host=w.slice(0,U),w=w.slice(U),this.parseHost(),this.hostname=this.hostname||"";var re=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!re)for(var ue=this.hostname.split(/\./),De=(V=0,ue.length);V<De;V++){var pe=ue[V];if(pe&&!pe.match(m)){for(var Te="",Fe=0,Ne=pe.length;Fe<Ne;Fe++)pe.charCodeAt(Fe)>127?Te+="x":Te+=pe[Fe];if(!Te.match(m)){var Re=ue.slice(0,V),k=ue.slice(V+1),A=pe.match(h);A&&(Re.push(A[1]),k.unshift(A[2])),k.length&&(w="/"+k.join(".")+w),this.hostname=Re.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),re||(this.hostname=i.toASCII(this.hostname));var b=this.port?":"+this.port:"",N=this.hostname||"";this.host=N+b,this.href+=this.host,re&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),w[0]!=="/"&&(w="/"+w))}if(!C[R])for(V=0,De=v.length;V<De;V++){var W=v[V];if(w.indexOf(W)!==-1){var j=encodeURIComponent(W);j===W&&(j=escape(W)),w=w.split(W).join(j)}}var K=w.indexOf("#");K!==-1&&(this.hash=w.substr(K),w=w.slice(0,K));var ge=w.indexOf("?");if(ge!==-1?(this.search=w.substr(ge),this.query=w.substr(ge+1),T&&(this.query=I.parse(this.query)),w=w.slice(0,ge)):T&&(this.search="",this.query={}),w&&(this.pathname=w),S[R]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){b=this.pathname||"";var ye=this.search||"";this.path=b+ye}return this.href=this.format(),this},s.prototype.format=function(){var E=this.auth||"";E&&(E=(E=encodeURIComponent(E)).replace(/%3A/i,":"),E+="@");var T=this.protocol||"",y=this.pathname||"",M=this.hash||"",_=!1,O="";this.host?_=E+this.host:this.hostname&&(_=E+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(_+=":"+this.port)),this.query&&o.isObject(this.query)&&Object.keys(this.query).length&&(O=I.stringify(this.query));var w=this.search||O&&"?"+O||"";return T&&T.substr(-1)!==":"&&(T+=":"),this.slashes||(!T||S[T])&&_!==!1?(_="//"+(_||""),y&&y.charAt(0)!=="/"&&(y="/"+y)):_||(_=""),M&&M.charAt(0)!=="#"&&(M="#"+M),w&&w.charAt(0)!=="?"&&(w="?"+w),T+_+(y=y.replace(/[?#]/g,function(x){return encodeURIComponent(x)}))+(w=w.replace("#","%23"))+M},s.prototype.resolve=function(E){return this.resolveObject(D(E,!1,!0)).format()},s.prototype.resolveObject=function(E){if(o.isString(E)){var T=new s;T.parse(E,!1,!0),E=T}for(var y=new s,M=Object.keys(this),_=0;_<M.length;_++){var O=M[_];y[O]=this[O]}if(y.hash=E.hash,E.href==="")return y.href=y.format(),y;if(E.slashes&&!E.protocol){for(var w=Object.keys(E),x=0;x<w.length;x++){var P=w[x];P!=="protocol"&&(y[P]=E[P])}return S[y.protocol]&&y.hostname&&!y.pathname&&(y.path=y.pathname="/"),y.href=y.format(),y}if(E.protocol&&E.protocol!==y.protocol){if(!S[E.protocol]){for(var R=Object.keys(E),L=0;L<R.length;L++){var H=R[L];y[H]=E[H]}return y.href=y.format(),y}if(y.protocol=E.protocol,E.host||p[E.protocol])y.pathname=E.pathname;else{for(var F=(E.pathname||"").split("/");F.length&&!(E.host=F.shift()););E.host||(E.host=""),E.hostname||(E.hostname=""),F[0]!==""&&F.unshift(""),F.length<2&&F.unshift(""),y.pathname=F.join("/")}if(y.search=E.search,y.query=E.query,y.host=E.host||"",y.auth=E.auth,y.hostname=E.hostname||E.host,y.port=E.port,y.pathname||y.search){var U=y.pathname||"",V=y.search||"";y.path=U+V}return y.slashes=y.slashes||E.slashes,y.href=y.format(),y}var X=y.pathname&&y.pathname.charAt(0)==="/",re=E.host||E.pathname&&E.pathname.charAt(0)==="/",ue=re||X||y.host&&E.pathname,De=ue,pe=y.pathname&&y.pathname.split("/")||[],Te=(F=E.pathname&&E.pathname.split("/")||[],y.protocol&&!S[y.protocol]);if(Te&&(y.hostname="",y.port=null,y.host&&(pe[0]===""?pe[0]=y.host:pe.unshift(y.host)),y.host="",E.protocol&&(E.hostname=null,E.port=null,E.host&&(F[0]===""?F[0]=E.host:F.unshift(E.host)),E.host=null),ue=ue&&(F[0]===""||pe[0]==="")),re)y.host=E.host||E.host===""?E.host:y.host,y.hostname=E.hostname||E.hostname===""?E.hostname:y.hostname,y.search=E.search,y.query=E.query,pe=F;else if(F.length)pe||(pe=[]),pe.pop(),pe=pe.concat(F),y.search=E.search,y.query=E.query;else if(!o.isNullOrUndefined(E.search))return Te&&(y.hostname=y.host=pe.shift(),(A=!!(y.host&&y.host.indexOf("@")>0)&&y.host.split("@"))&&(y.auth=A.shift(),y.host=y.hostname=A.shift())),y.search=E.search,y.query=E.query,o.isNull(y.pathname)&&o.isNull(y.search)||(y.path=(y.pathname?y.pathname:"")+(y.search?y.search:"")),y.href=y.format(),y;if(!pe.length)return y.pathname=null,y.search?y.path="/"+y.search:y.path=null,y.href=y.format(),y;for(var Fe=pe.slice(-1)[0],Ne=(y.host||E.host||pe.length>1)&&(Fe==="."||Fe==="..")||Fe==="",Re=0,k=pe.length;k>=0;k--)(Fe=pe[k])==="."?pe.splice(k,1):Fe===".."?(pe.splice(k,1),Re++):Re&&(pe.splice(k,1),Re--);if(!ue&&!De)for(;Re--;Re)pe.unshift("..");!ue||pe[0]===""||pe[0]&&pe[0].charAt(0)==="/"||pe.unshift(""),Ne&&pe.join("/").substr(-1)!=="/"&&pe.push("");var A,b=pe[0]===""||pe[0]&&pe[0].charAt(0)==="/";return Te&&(y.hostname=y.host=b?"":pe.length?pe.shift():"",(A=!!(y.host&&y.host.indexOf("@")>0)&&y.host.split("@"))&&(y.auth=A.shift(),y.host=y.hostname=A.shift())),(ue=ue||y.host&&pe.length)&&!b&&pe.unshift(""),pe.length?y.pathname=pe.join("/"):(y.pathname=null,y.path=null),o.isNull(y.pathname)&&o.isNull(y.search)||(y.path=(y.pathname?y.pathname:"")+(y.search?y.search:"")),y.auth=E.auth||y.auth,y.slashes=y.slashes||E.slashes,y.href=y.format(),y},s.prototype.parseHost=function(){var E=this.host,T=l.exec(E);T&&((T=T[0])!==":"&&(this.port=T.substr(1)),E=E.substr(0,E.length-T.length)),E&&(this.hostname=E)}},function(n,r,a){(function(i,o){var s;/*! https://mths.be/punycode v1.4.1 by @mathias */(function(c){r&&r.nodeType,i&&i.nodeType;var l=typeof o=="object"&&o;l.global!==l&&l.window!==l&&l.self;var u,f=2147483647,v=/^xn--/,g=/[^\x20-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,m={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},h=Math.floor,C=String.fromCharCode;function p(O){throw new RangeError(m[O])}function S(O,w){for(var x=O.length,P=[];x--;)P[x]=w(O[x]);return P}function I(O,w){var x=O.split("@"),P="";return x.length>1&&(P=x[0]+"@",O=x[1]),P+S((O=O.replace(d,".")).split("."),w).join(".")}function D(O){for(var w,x,P=[],R=0,L=O.length;R<L;)(w=O.charCodeAt(R++))>=55296&&w<=56319&&R<L?(64512&(x=O.charCodeAt(R++)))==56320?P.push(((1023&w)<<10)+(1023&x)+65536):(P.push(w),R--):P.push(w);return P}function E(O){return S(O,function(w){var x="";return w>65535&&(x+=C((w-=65536)>>>10&1023|55296),w=56320|1023&w),x+=C(w)}).join("")}function T(O,w){return O+22+75*(O<26)-((w!=0)<<5)}function y(O,w,x){var P=0;for(O=x?h(O/700):O>>1,O+=h(O/w);O>455;P+=36)O=h(O/35);return h(P+36*O/(O+38))}function M(O){var w,x,P,R,L,H,F,U,V,X,re,ue=[],De=O.length,pe=0,Te=128,Fe=72;for((x=O.lastIndexOf("-"))<0&&(x=0),P=0;P<x;++P)O.charCodeAt(P)>=128&&p("not-basic"),ue.push(O.charCodeAt(P));for(R=x>0?x+1:0;R<De;){for(L=pe,H=1,F=36;R>=De&&p("invalid-input"),((U=(re=O.charCodeAt(R++))-48<10?re-22:re-65<26?re-65:re-97<26?re-97:36)>=36||U>h((f-pe)/H))&&p("overflow"),pe+=U*H,!(U<(V=F<=Fe?1:F>=Fe+26?26:F-Fe));F+=36)H>h(f/(X=36-V))&&p("overflow"),H*=X;Fe=y(pe-L,w=ue.length+1,L==0),h(pe/w)>f-Te&&p("overflow"),Te+=h(pe/w),pe%=w,ue.splice(pe++,0,Te)}return E(ue)}function _(O){var w,x,P,R,L,H,F,U,V,X,re,ue,De,pe,Te,Fe=[];for(ue=(O=D(O)).length,w=128,x=0,L=72,H=0;H<ue;++H)(re=O[H])<128&&Fe.push(C(re));for(P=R=Fe.length,R&&Fe.push("-");P<ue;){for(F=f,H=0;H<ue;++H)(re=O[H])>=w&&re<F&&(F=re);for(F-w>h((f-x)/(De=P+1))&&p("overflow"),x+=(F-w)*De,w=F,H=0;H<ue;++H)if((re=O[H])<w&&++x>f&&p("overflow"),re==w){for(U=x,V=36;!(U<(X=V<=L?1:V>=L+26?26:V-L));V+=36)Te=U-X,pe=36-X,Fe.push(C(T(X+Te%pe,0))),U=h(Te/pe);Fe.push(C(T(U,0))),L=y(x,De,P==R),x=0,++P}++x,++w}return Fe.join("")}u={version:"1.4.1",ucs2:{decode:D,encode:E},decode:M,encode:_,toASCII:function(O){return I(O,function(w){return g.test(w)?"xn--"+_(w):w})},toUnicode:function(O){return I(O,function(w){return v.test(w)?M(w.slice(4).toLowerCase()):w})}},(s=(function(){return u}).call(r,a,r,i))===void 0||(i.exports=s)})()}).call(this,a(246)(n),a(78))},function(n,r){n.exports=function(a){return a.webpackPolyfill||(a.deprecate=function(){},a.paths=[],a.children||(a.children=[]),Object.defineProperty(a,"loaded",{enumerable:!0,get:function(){return a.l}}),Object.defineProperty(a,"id",{enumerable:!0,get:function(){return a.i}}),a.webpackPolyfill=1),a}},function(n,r,a){n.exports={isString:function(i){return typeof i=="string"},isObject:function(i){return typeof i=="object"&&i!==null},isNull:function(i){return i===null},isNullOrUndefined:function(i){return i==null}}},function(n,r,a){r.decode=r.parse=a(249),r.encode=r.stringify=a(250)},function(n,r,a){function i(s,c){return Object.prototype.hasOwnProperty.call(s,c)}n.exports=function(s,c,l,u){c=c||"&",l=l||"=";var f={};if(typeof s!="string"||s.length===0)return f;var v=/\+/g;s=s.split(c);var g=1e3;u&&typeof u.maxKeys=="number"&&(g=u.maxKeys);var d=s.length;g>0&&d>g&&(d=g);for(var m=0;m<d;++m){var h,C,p,S,I=s[m].replace(v,"%20"),D=I.indexOf(l);D>=0?(h=I.substr(0,D),C=I.substr(D+1)):(h=I,C=""),p=decodeURIComponent(h),S=decodeURIComponent(C),i(f,p)?o(f[p])?f[p].push(S):f[p]=[f[p],S]:f[p]=S}return f};var o=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"}},function(n,r,a){var i=function(l){switch(typeof l){case"string":return l;case"boolean":return l?"true":"false";case"number":return isFinite(l)?l:"";default:return""}};n.exports=function(l,u,f,v){return u=u||"&",f=f||"=",l===null&&(l=void 0),typeof l=="object"?s(c(l),function(g){var d=encodeURIComponent(i(g))+f;return o(l[g])?s(l[g],function(m){return d+encodeURIComponent(i(m))}).join(u):d+encodeURIComponent(i(l[g]))}).join(u):v?encodeURIComponent(i(v))+f+encodeURIComponent(i(l)):""};var o=Array.isArray||function(l){return Object.prototype.toString.call(l)==="[object Array]"};function s(l,u){if(l.map)return l.map(u);for(var f=[],v=0;v<l.length;v++)f.push(u(l[v],v));return f}var c=Object.keys||function(l){var u=[];for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&u.push(f);return u}},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(52);r.attr_setAnExistingAttributeValue=function(o,s){o._element===null?o._value=s:i.element_change(o,o._element,s)}},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(108),o=a(30),s=a(52);r.tokenList_validationSteps=function(c,l){if(!o.dom_hasSupportedTokens(c._attribute._localName))throw new TypeError("There are no supported tokens defined for attribute name: '"+c._attribute._localName+"'.");return o.dom_getSupportedTokens(c._attribute._localName).has(l.toLowerCase())},r.tokenList_updateSteps=function(c){(c._element.hasAttribute(c._attribute._localName)||c._tokenSet.size!==0)&&s.element_setAnAttributeValue(c._element,c._attribute._localName,i.orderedSet_serialize(c._tokenSet))},r.tokenList_serializeSteps=function(c){return s.element_getAnAttributeValue(c._element,c._attribute._localName)}},function(n,r,a){var i=this&&this.__values||function(c){var l=typeof Symbol=="function"&&Symbol.iterator,u=l&&c[l],f=0;if(u)return u.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&f>=c.length&&(c=void 0),{value:c&&c[f++],done:!c}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var o=a(1);function s(c){return o.isBoolean(c)?c:c.capture||!1}r.eventTarget_flatten=s,r.eventTarget_flattenMore=function(c){var l=s(c),u=!1,f=!1;return o.isBoolean(c)||(u=c.once||!1,f=c.passive||!1),[l,f,u]},r.eventTarget_addEventListener=function(c,l){if(l.callback!==null){for(var u=0;u<c._eventListenerList.length;u++){var f=c._eventListenerList[u];if(f.type===l.type&&f.callback.handleEvent===l.callback.handleEvent&&f.capture===l.capture)return}c._eventListenerList.push(l)}},r.eventTarget_removeEventListener=function(c,l,u){l.removed=!0,c._eventListenerList.splice(u,1)},r.eventTarget_removeAllEventListeners=function(c){var l,u;try{for(var f=i(c._eventListenerList),v=f.next();!v.done;v=f.next())v.value.removed=!0}catch(g){l={error:g}}finally{try{v&&!v.done&&(u=f.return)&&u.call(f)}finally{if(l)throw l.error}}c._eventListenerList.length=0}},function(n,r,a){var i=this&&this.__values||function(c){var l=typeof Symbol=="function"&&Symbol.iterator,u=l&&c[l],f=0;if(u)return u.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&f>=c.length&&(c=void 0),{value:c&&c[f++],done:!c}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var o=a(1),s=a(29);r.parentNode_convertNodesIntoANode=function(c,l){for(var u,f,v=null,g=0;g<c.length;g++){var d=c[g];if(o.isString(d)){var m=s.create_text(l,d);c[g]=m}}if(c.length===1)v=c[0];else{var h=v=s.create_documentFragment(l);try{for(var C=i(c),p=C.next();!p.done;p=C.next())d=p.value,h.appendChild(d)}catch(S){u={error:S}}finally{try{p&&!p.done&&(f=C.return)&&f.call(C)}finally{if(u)throw u.error}}}return v}},function(n,r,a){var i=this&&this.__values||function(T){var y=typeof Symbol=="function"&&Symbol.iterator,M=y&&T[y],_=0;if(M)return M.call(T);if(T&&typeof T.length=="number")return{next:function(){return T&&_>=T.length&&(T=void 0),{value:T&&T[_++],done:!T}}};throw new TypeError(y?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(T,y){var M=typeof Symbol=="function"&&T[Symbol.iterator];if(!M)return T;var _,O,w=M.call(T),x=[];try{for(;(y===void 0||y-- >0)&&!(_=w.next()).done;)x.push(_.value)}catch(P){O={error:P}}finally{try{_&&!_.done&&(M=w.return)&&M.call(w)}finally{if(O)throw O.error}}return x},s=this&&this.__spread||function(){for(var T=[],y=0;y<arguments.length;y++)T=T.concat(o(arguments[y]));return T};Object.defineProperty(r,"__esModule",{value:!0});var c=a(2),l=a(9),u=a(3),f=a(29),v=a(17),g=a(175),d=a(107),m=a(176),h=a(37),C=a(177);function p(T){return T._startNode===T._endNode&&T._startOffset===T._endOffset}function S(T){return v.tree_rootNode(T._startNode)}function I(T,y){return v.tree_rootNode(T)===S(y)&&g.boundaryPoint_position([T,0],y._start)===c.BoundaryPosition.After&&g.boundaryPoint_position([T,v.tree_nodeLength(T)],y._end)===c.BoundaryPosition.Before}function D(T,y){var M=v.tree_isAncestorOf(y._startNode,T,!0),_=v.tree_isAncestorOf(y._endNode,T,!0);return M&&!_||!M&&_}function E(T){var y,M,_,O,w,x,P=f.create_documentFragment(T._startNode._nodeDocument);if(p(T))return P;var R=T._startNode,L=T._startOffset,H=T._endNode,F=T._endOffset;if(R===H&&u.Guard.isCharacterDataNode(R))return(N=m.node_clone(R))._data=d.characterData_substringData(R,L,F-L),h.mutation_append(N,P),d.characterData_replaceData(R,L,F-L,""),P;for(var U=R;!v.tree_isAncestorOf(H,U,!0);){if(U._parent===null)throw new Error("Parent node  is null.");U=U._parent}var V=null;if(!v.tree_isAncestorOf(H,R,!0))try{for(var X=i(U._children),re=X.next();!re.done;re=X.next())if(D(Te=re.value,T)){V=Te;break}}catch(ye){y={error:ye}}finally{try{re&&!re.done&&(M=X.return)&&M.call(X)}finally{if(y)throw y.error}}var ue=null;if(!v.tree_isAncestorOf(R,H,!0))for(var De=s(U._children),pe=De.length-1;pe>0;pe--){var Te;if(D(Te=De[pe],T)){ue=Te;break}}var Fe,Ne,Re=[];try{for(var k=i(U._children),A=k.next();!A.done;A=k.next())if(I(ge=A.value,T)){if(u.Guard.isDocumentTypeNode(ge))throw new l.HierarchyRequestError;Re.push(ge)}}catch(ye){_={error:ye}}finally{try{A&&!A.done&&(O=k.return)&&O.call(k)}finally{if(_)throw _.error}}if(v.tree_isAncestorOf(H,R,!0))Fe=R,Ne=L;else{for(var b=R;b._parent!==null&&!v.tree_isAncestorOf(H,b._parent);)b=b._parent;if(b._parent===null)throw new Error("Parent node is null.");Fe=b._parent,Ne=1+v.tree_index(b)}if(u.Guard.isCharacterDataNode(V))(N=m.node_clone(R))._data=d.characterData_substringData(R,L,v.tree_nodeLength(R)-L),h.mutation_append(N,P),d.characterData_replaceData(R,L,v.tree_nodeLength(R)-L,"");else if(V!==null){var N=m.node_clone(V);h.mutation_append(N,P);var W=E(f.create_range([R,L],[V,v.tree_nodeLength(V)]));h.mutation_append(W,N)}try{for(var j=i(Re),K=j.next();!K.done;K=j.next()){var ge=K.value;h.mutation_append(ge,P)}}catch(ye){w={error:ye}}finally{try{K&&!K.done&&(x=j.return)&&x.call(j)}finally{if(w)throw w.error}}return u.Guard.isCharacterDataNode(ue)?((N=m.node_clone(H))._data=d.characterData_substringData(H,0,F),h.mutation_append(N,P),d.characterData_replaceData(H,0,F,"")):ue!==null&&(N=m.node_clone(ue),h.mutation_append(N,P),W=E(f.create_range([ue,0],[H,F])),h.mutation_append(W,N)),T._start=[Fe,Ne],T._end=[Fe,Ne],P}r.range_collapsed=p,r.range_root=S,r.range_isContained=I,r.range_isPartiallyContained=D,r.range_setTheStart=function(T,y,M){if(u.Guard.isDocumentTypeNode(y))throw new l.InvalidNodeTypeError;if(M>v.tree_nodeLength(y))throw new l.IndexSizeError;var _=[y,M];S(T)===v.tree_rootNode(y)&&g.boundaryPoint_position(_,T._end)!==c.BoundaryPosition.After||(T._end=_),T._start=_},r.range_setTheEnd=function(T,y,M){if(u.Guard.isDocumentTypeNode(y))throw new l.InvalidNodeTypeError;if(M>v.tree_nodeLength(y))throw new l.IndexSizeError;var _=[y,M];S(T)===v.tree_rootNode(y)&&g.boundaryPoint_position(_,T._start)!==c.BoundaryPosition.Before||(T._start=_),T._end=_},r.range_select=function(T,y){var M=T._parent;if(M===null)throw new l.InvalidNodeTypeError;var _=v.tree_index(T);y._start=[M,_],y._end=[M,_+1]},r.range_extract=E,r.range_cloneTheContents=function T(y){var M,_,O,w,x,P,R=f.create_documentFragment(y._startNode._nodeDocument);if(p(y))return R;var L=y._startNode,H=y._startOffset,F=y._endNode,U=y._endOffset;L===F&&u.Guard.isCharacterDataNode(L)&&((A=m.node_clone(L))._data=d.characterData_substringData(L,H,U-H),h.mutation_append(A,R));for(var V=L;!v.tree_isAncestorOf(F,V,!0);){if(V._parent===null)throw new Error("Parent node  is null.");V=V._parent}var X=null;if(!v.tree_isAncestorOf(F,L,!0))try{for(var re=i(V._children),ue=re.next();!ue.done;ue=re.next())if(D(Fe=ue.value,y)){X=Fe;break}}catch(K){M={error:K}}finally{try{ue&&!ue.done&&(_=re.return)&&_.call(re)}finally{if(M)throw M.error}}var De=null;if(!v.tree_isAncestorOf(L,F,!0))for(var pe=s(V._children),Te=pe.length-1;Te>0;Te--){var Fe;if(D(Fe=pe[Te],y)){De=Fe;break}}var Ne=[];try{for(var Re=i(V._children),k=Re.next();!k.done;k=Re.next())if(I(j=k.value,y)){if(u.Guard.isDocumentTypeNode(j))throw new l.HierarchyRequestError;Ne.push(j)}}catch(K){O={error:K}}finally{try{k&&!k.done&&(w=Re.return)&&w.call(Re)}finally{if(O)throw O.error}}if(u.Guard.isCharacterDataNode(X))(A=m.node_clone(L))._data=d.characterData_substringData(L,H,v.tree_nodeLength(L)-H),h.mutation_append(A,R);else if(X!==null){var A=m.node_clone(X);h.mutation_append(A,R);var b=T(f.create_range([L,H],[X,v.tree_nodeLength(X)]));h.mutation_append(b,A)}try{for(var N=i(Ne),W=N.next();!W.done;W=N.next()){var j=W.value,A=m.node_clone(j);h.mutation_append(A,R)}}catch(K){x={error:K}}finally{try{W&&!W.done&&(P=N.return)&&P.call(N)}finally{if(x)throw x.error}}return u.Guard.isCharacterDataNode(De)?((A=m.node_clone(F))._data=d.characterData_substringData(F,0,U),h.mutation_append(A,R)):De!==null&&(A=m.node_clone(De),R.append(A),b=E(f.create_range([De,0],[F,U])),h.mutation_append(b,A)),R},r.range_insert=function(T,y){var M,_;if(u.Guard.isProcessingInstructionNode(y._startNode)||u.Guard.isCommentNode(y._startNode)||u.Guard.isTextNode(y._startNode)&&y._startNode._parent===null||y._startNode===T)throw new l.HierarchyRequestError;var O,w=null;if(u.Guard.isTextNode(y._startNode))w=y._startNode;else{var x=0;try{for(var P=i(y._startNode._children),R=P.next();!R.done;R=P.next()){var L=R.value;if(x===y._startOffset){w=L;break}x++}}catch(F){M={error:F}}finally{try{R&&!R.done&&(_=P.return)&&_.call(P)}finally{if(M)throw M.error}}}if(w===null)O=y._startNode;else{if(w._parent===null)throw new Error("Parent node is null.");O=w._parent}h.mutation_ensurePreInsertionValidity(T,O,w),u.Guard.isTextNode(y._startNode)&&(w=C.text_split(y._startNode,y._startOffset)),T===w&&(w=T._nextSibling),T._parent!==null&&h.mutation_remove(T,T._parent);var H=w===null?v.tree_nodeLength(O):v.tree_index(w);u.Guard.isDocumentFragmentNode(T)?H+=v.tree_nodeLength(T):H++,h.mutation_preInsert(T,O,w),p(y)&&(y._end=[O,H])},r.range_getContainedNodes=function(T){var y;return(y={})[Symbol.iterator]=function(){var M=T.commonAncestorContainer,_=v.tree_getFirstDescendantNode(M);return{next:function(){for(;_&&!I(_,T);)_=v.tree_getNextDescendantNode(M,_);if(_===null)return{done:!0,value:null};var O={done:!1,value:_};return _=v.tree_getNextDescendantNode(M,_),O}}},y},r.range_getPartiallyContainedNodes=function(T){var y;return(y={})[Symbol.iterator]=function(){var M=T.commonAncestorContainer,_=v.tree_getFirstDescendantNode(M);return{next:function(){for(;_&&!D(_,T);)_=v.tree_getNextDescendantNode(M,_);if(_===null)return{done:!0,value:null};var O={done:!1,value:_};return _=v.tree_getNextDescendantNode(M,_),O}}},y}},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(9);r.selectors_scopeMatchASelectorsString=function(o,s){throw new i.NotSupportedError}},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(2),o=a(105);r.treeWalker_traverseChildren=function(s,c){for(var l=c?s._current._firstChild:s._current._lastChild;l!==null;){var u=o.traversal_filter(s,l);if(u===i.FilterResult.Accept)return s._current=l,l;if(u===i.FilterResult.Skip){var f=c?l._firstChild:l._lastChild;if(f!==null){l=f;continue}}for(;l!==null;){var v=c?l._nextSibling:l._previousSibling;if(v!==null){l=v;break}var g=l._parent;if(g===null||g===s._root||g===s._current)return null;l=g}}return null},r.treeWalker_traverseSiblings=function(s,c){var l=s._current;if(l===s._root)return null;for(;;){for(var u=c?l._nextSibling:l._previousSibling;u!==null;){l=u;var f=o.traversal_filter(s,l);if(f===i.FilterResult.Accept)return s._current=l,l;u=c?l._firstChild:l._lastChild,f!==i.FilterResult.Reject&&u!==null||(u=c?l._nextSibling:l._previousSibling)}if((l=l._parent)===null||l===s._root||o.traversal_filter(s,l)===i.FilterResult.Accept)return null}}},function(n,r,a){a(89),a(74);var i,o=this&&this.__extends||(i=function(v,g){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,m){d.__proto__=m}||function(d,m){for(var h in m)m.hasOwnProperty(h)&&(d[h]=m[h])})(v,g)},function(v,g){function d(){this.constructor=v}i(v,g),v.prototype=g===null?Object.create(g):(d.prototype=g.prototype,new d)});Object.defineProperty(r,"__esModule",{value:!0});var s=a(1),c=a(2),l=a(50),u=a(3),f=function(v){function g(d,m){var h=v.call(this,d)||this;return h._indentation={},h._lengthToLastNewline=0,h._writerOptions=s.applyDefaults(m,{wellFormed:!1,headless:!1,prettyPrint:!1,indent:"  ",newline:`
`,offset:0,width:0,allowEmptyTags:!1,indentTextOnlyNodes:!1,spaceBeforeSlash:!1}),h}return o(g,v),g.prototype.serialize=function(d){return this._refs={suppressPretty:!1,emptyNode:!1,markup:""},d.nodeType!==c.NodeType.Document||this._writerOptions.headless||this.declaration(this._builderOptions.version,this._builderOptions.encoding,this._builderOptions.standalone),this.serializeNode(d,this._writerOptions.wellFormed),this._writerOptions.prettyPrint&&this._refs.markup.slice(-this._writerOptions.newline.length)===this._writerOptions.newline&&(this._refs.markup=this._refs.markup.slice(0,-this._writerOptions.newline.length)),this._refs.markup},g.prototype.declaration=function(d,m,h){this._beginLine(),this._refs.markup+='<?xml version="'+d+'"',m!==void 0&&(this._refs.markup+=' encoding="'+m+'"'),h!==void 0&&(this._refs.markup+=' standalone="'+(h?"yes":"no")+'"'),this._refs.markup+="?>",this._endLine()},g.prototype.docType=function(d,m,h){this._beginLine(),this._refs.markup+=m&&h?"<!DOCTYPE "+d+' PUBLIC "'+m+'" "'+h+'">':m?"<!DOCTYPE "+d+' PUBLIC "'+m+'">':h?"<!DOCTYPE "+d+' SYSTEM "'+h+'">':"<!DOCTYPE "+d+">",this._endLine()},g.prototype.openTagBegin=function(d){this._beginLine(),this._refs.markup+="<"+d},g.prototype.openTagEnd=function(d,m,h){if(this._refs.suppressPretty=!1,this._refs.emptyNode=!1,this._writerOptions.prettyPrint&&!m&&!h){for(var C=!0,p=!0,S=this.currentNode.firstChild,I=0,D=0;S;){if(u.Guard.isExclusiveTextNode(S))D++;else{if(!u.Guard.isCDATASectionNode(S)){C=!1,p=!1;break}I++}S.data!==""&&(p=!1),S=S.nextSibling}this._refs.suppressPretty=!this._writerOptions.indentTextOnlyNodes&&C&&(I<=1&&D===0||I===0),this._refs.emptyNode=p}(h||m||this._refs.emptyNode)&&this._writerOptions.allowEmptyTags?this._refs.markup+="></"+d+">":this._refs.markup+=h?" />":m||this._refs.emptyNode?this._writerOptions.spaceBeforeSlash?" />":"/>":">",this._endLine()},g.prototype.closeTag=function(d){this._refs.emptyNode||(this._beginLine(),this._refs.markup+="</"+d+">"),this._refs.suppressPretty=!1,this._refs.emptyNode=!1,this._endLine()},g.prototype.attribute=function(d,m){var h=d+'="'+m+'"';this._writerOptions.prettyPrint&&this._writerOptions.width>0&&this._refs.markup.length-this._lengthToLastNewline+1+h.length>this._writerOptions.width?(this._endLine(),this._beginLine(),this._refs.markup+=this._indent(1)+h):this._refs.markup+=" "+h},g.prototype.text=function(d){d!==""&&(this._beginLine(),this._refs.markup+=d,this._endLine())},g.prototype.cdata=function(d){d!==""&&(this._beginLine(),this._refs.markup+="<![CDATA["+d+"]]>",this._endLine())},g.prototype.comment=function(d){this._beginLine(),this._refs.markup+="<!--"+d+"-->",this._endLine()},g.prototype.instruction=function(d,m){this._beginLine(),this._refs.markup+="<?"+(m===""?d:d+" "+m)+"?>",this._endLine()},g.prototype._beginLine=function(){this._writerOptions.prettyPrint&&!this._refs.suppressPretty&&(this._refs.markup+=this._indent(this._writerOptions.offset+this.level))},g.prototype._endLine=function(){this._writerOptions.prettyPrint&&!this._refs.suppressPretty&&(this._refs.markup+=this._writerOptions.newline,this._lengthToLastNewline=this._refs.markup.length)},g.prototype._indent=function(d){if(d<=0)return"";if(this._indentation[d]!==void 0)return this._indentation[d];var m=this._writerOptions.indent.repeat(d);return this._indentation[d]=m,m},g}(l.BaseWriter);r.XMLWriter=f},function(n,r,a){var i=a(47),o=a(35);n.exports="".repeat||function(s){var c=String(o(this)),l="",u=i(s);if(u<0||u==1/0)throw RangeError("Wrong number of repetitions");for(;u>0;(u>>>=1)&&(c+=c))1&u&&(l+=c);return l}},function(n,r,a){a(31),a(32),a(33),a(19),a(178),a(20),a(22),a(23);var i,o=this&&this.__extends||(i=function(f,v){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,d){g.__proto__=d}||function(g,d){for(var m in d)d.hasOwnProperty(m)&&(g[m]=d[m])})(f,v)},function(f,v){function g(){this.constructor=f}i(f,v),f.prototype=v===null?Object.create(v):(g.prototype=v.prototype,new g)}),s=this&&this.__values||function(f){var v=typeof Symbol=="function"&&Symbol.iterator,g=v&&f[v],d=0;if(g)return g.call(f);if(f&&typeof f.length=="number")return{next:function(){return f&&d>=f.length&&(f=void 0),{value:f&&f[d++],done:!f}}};throw new TypeError(v?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var c=a(67),l=a(1),u=function(f){function v(g,d){var m=f.call(this,g)||this;return m._writerOptions=l.applyDefaults(d,{wellFormed:!1,prettyPrint:!1,indent:"  ",newline:`
`,offset:0,group:!1,verbose:!1}),m}return o(v,f),v.prototype.serialize=function(g){var d=l.applyDefaults(this._writerOptions,{format:"object",wellFormed:!1}),m=new c.ObjectWriter(this._builderOptions,d).serialize(g);return this._beginLine(this._writerOptions,0)+this._convertObject(m,this._writerOptions)},v.prototype._convertObject=function(g,d,m){var h,C,p=this;m===void 0&&(m=0);var S="",I=this._isLeafNode(g);if(l.isArray(g)){S+="[";var D=g.length,E=0;try{for(var T=s(g),y=T.next();!y.done;y=T.next()){var M=y.value;S+=this._endLine(d,m+1)+this._beginLine(d,m+1)+this._convertObject(M,d,m+1),E<D-1&&(S+=","),E++}}catch(w){h={error:w}}finally{try{y&&!y.done&&(C=T.return)&&C.call(T)}finally{if(h)throw h.error}}S+=this._endLine(d,m)+this._beginLine(d,m),S+="]"}else if(l.isObject(g)){S+="{";var _=l.objectLength(g),O=0;l.forEachObject(g,function(w,x){I&&d.prettyPrint?S+=" ":S+=p._endLine(d,m+1)+p._beginLine(d,m+1),S+=p._key(w),d.prettyPrint&&(S+=" "),S+=p._convertObject(x,d,m+1),O<_-1&&(S+=","),O++},this),I&&d.prettyPrint?S+=" ":S+=this._endLine(d,m)+this._beginLine(d,m),S+="}"}else S+=this._val(g);return S},v.prototype._beginLine=function(g,d){if(!g.prettyPrint)return"";var m=g.offset+d+1;return m>0?new Array(m).join(g.indent):""},v.prototype._endLine=function(g,d){return g.prettyPrint?g.newline:""},v.prototype._key=function(g){return'"'+g+'":'},v.prototype._val=function(g){return JSON.stringify(g)},v.prototype._isLeafNode=function(g){return this._descendantCount(g)<=1},v.prototype._descendantCount=function(g,d){var m=this;return d===void 0&&(d=0),l.isArray(g)?l.forEachArray(g,function(h){return d+=m._descendantCount(h,d)},this):l.isObject(g)?l.forEachObject(g,function(h,C){return d+=m._descendantCount(C,d)},this):d++,d},v}(a(50).BaseWriter);r.JSONWriter=u},function(n,r,a){a(31),a(32),a(33),a(19),a(178),a(89),a(20),a(22),a(23);var i,o=this&&this.__extends||(i=function(f,v){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,d){g.__proto__=d}||function(g,d){for(var m in d)d.hasOwnProperty(m)&&(g[m]=d[m])})(f,v)},function(f,v){function g(){this.constructor=f}i(f,v),f.prototype=v===null?Object.create(v):(g.prototype=v.prototype,new g)}),s=this&&this.__values||function(f){var v=typeof Symbol=="function"&&Symbol.iterator,g=v&&f[v],d=0;if(g)return g.call(f);if(f&&typeof f.length=="number")return{next:function(){return f&&d>=f.length&&(f=void 0),{value:f&&f[d++],done:!f}}};throw new TypeError(v?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var c=a(67),l=a(1),u=function(f){function v(g,d){var m=f.call(this,g)||this;if(m._writerOptions=l.applyDefaults(d,{wellFormed:!1,indent:"  ",newline:`
`,offset:0,group:!1,verbose:!1}),m._writerOptions.indent.length<2)throw new Error("YAML indententation string must be at least two characters long.");if(m._writerOptions.offset<0)throw new Error("YAML offset should be zero or a positive number.");return m}return o(v,f),v.prototype.serialize=function(g){var d=l.applyDefaults(this._writerOptions,{format:"object",wellFormed:!1}),m=new c.ObjectWriter(this._builderOptions,d).serialize(g),h=this._beginLine(this._writerOptions,0)+"---"+this._endLine(this._writerOptions)+this._convertObject(m,this._writerOptions,0);return h.slice(-this._writerOptions.newline.length)===this._writerOptions.newline&&(h=h.slice(0,-this._writerOptions.newline.length)),h},v.prototype._convertObject=function(g,d,m,h){var C,p,S=this;h===void 0&&(h=!1);var I="";if(l.isArray(g))try{for(var D=s(g),E=D.next();!E.done;E=D.next()){var T=E.value;I+=this._beginLine(d,m,!0),l.isObject(T)?l.isEmpty(T)?I+='""'+this._endLine(d):I+=this._convertObject(T,d,m,!0):I+=this._val(T)+this._endLine(d)}}catch(y){C={error:y}}finally{try{E&&!E.done&&(p=D.return)&&p.call(D)}finally{if(C)throw C.error}}else l.forEachObject(g,function(y,M){h?(I+=S._key(y),h=!1):I+=S._beginLine(d,m)+S._key(y),l.isObject(M)?l.isEmpty(M)?I+=' ""'+S._endLine(d):I+=S._endLine(d)+S._convertObject(M,d,m+1):I+=" "+S._val(M)+S._endLine(d)},this);return I},v.prototype._beginLine=function(g,d,m){m===void 0&&(m=!1);var h=g.offset+d+1,C=new Array(h).join(g.indent);return m?C.substr(0,C.length-2)+"-"+C.substr(-1,1):C},v.prototype._endLine=function(g){return g.newline},v.prototype._key=function(g){return'"'+g+'":'},v.prototype._val=function(g){return JSON.stringify(g)},v}(a(50).BaseWriter);r.YAMLWriter=u},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),a(110).dom.setFeatures(!0);var i=a(110);r.DOMImplementation=i.DOMImplementation;var o=a(271);r.DOMParser=o.DOMParser;var s=a(274);r.XMLSerializer=s.XMLSerializer},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(3),o=a(0),s=function(){function c(){}return c.prototype.before=function(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];var f=i.Cast.asNode(this),v=f._parent;if(v!==null){for(var g=f._previousSibling,d=!0;d&&g;){d=!1;for(var m=0;m<l.length;m++){var h=l[m];if(h===g){g=g._previousSibling,d=!0;break}}}var C=o.parentNode_convertNodesIntoANode(l,f._nodeDocument);g=g===null?v._firstChild:g._nextSibling,o.mutation_preInsert(C,v,g)}},c.prototype.after=function(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];var f=i.Cast.asNode(this),v=f._parent;if(v){for(var g=f._nextSibling,d=!0;d&&g;){d=!1;for(var m=0;m<l.length;m++){var h=l[m];if(h===g){g=g._nextSibling,d=!0;break}}}var C=o.parentNode_convertNodesIntoANode(l,f._nodeDocument);o.mutation_preInsert(C,v,g)}},c.prototype.replaceWith=function(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];var f=i.Cast.asNode(this),v=f._parent;if(v){for(var g=f._nextSibling,d=!0;d&&g;){d=!1;for(var m=0;m<l.length;m++){var h=l[m];if(h===g){g=g._nextSibling,d=!0;break}}}var C=o.parentNode_convertNodesIntoANode(l,f._nodeDocument);f._parent===v?o.mutation_replace(f,C,v):o.mutation_preInsert(C,v,g)}},c.prototype.remove=function(){var l=i.Cast.asNode(this),u=l._parent;u&&o.mutation_remove(l,u)},c}();r.ChildNodeImpl=s},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){};r.DocumentOrShadowRootImpl=i},function(n,r,a){var i=this&&this.__values||function(u){var f=typeof Symbol=="function"&&Symbol.iterator,v=f&&u[f],g=0;if(v)return v.call(u);if(u&&typeof u.length=="number")return{next:function(){return u&&g>=u.length&&(u=void 0),{value:u&&u[g++],done:!u}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var o=a(6),s=a(3),c=a(7),l=function(){function u(f){this._nodeList=[],this._recordQueue=[],this._callback=f;var v=o.dom.window;c.set.append(v._mutationObservers,this)}return u.prototype.observe=function(f,v){var g,d;if((v=v||{childList:!1,subtree:!1}).attributeOldValue===void 0&&v.attributeFilter===void 0||v.attributes!==void 0||(v.attributes=!0),v.characterDataOldValue!==void 0&&v.characterData===void 0&&(v.characterData=!0),!v.childList&&!v.attributes&&!v.characterData)throw new TypeError;if(v.attributeOldValue&&!v.attributes)throw new TypeError;if(v.attributeFilter!==void 0&&!v.attributes)throw new TypeError;if(v.characterDataOldValue&&!v.characterData)throw new TypeError;var m=!1,h=v,C=function(D){var E,T;if(D.observer===p){m=!0;try{for(var y=(E=void 0,i(p._nodeList)),M=y.next();!M.done;M=y.next()){var _=M.value;c.list.remove(_._registeredObserverList,function(O){return s.Guard.isTransientRegisteredObserver(O)&&O.source===D})}}catch(O){E={error:O}}finally{try{M&&!M.done&&(T=y.return)&&T.call(y)}finally{if(E)throw E.error}}D.options=h}},p=this;try{for(var S=i(f._registeredObserverList),I=S.next();!I.done;I=S.next())C(I.value)}catch(D){g={error:D}}finally{try{I&&!I.done&&(d=S.return)&&d.call(S)}finally{if(g)throw g.error}}m||(f._registeredObserverList.push({observer:this,options:v}),this._nodeList.push(f))},u.prototype.disconnect=function(){var f,v,g=this;try{for(var d=i(this._nodeList),m=d.next();!m.done;m=d.next()){var h=m.value;c.list.remove(h._registeredObserverList,function(C){return C.observer===g})}}catch(C){f={error:C}}finally{try{m&&!m.done&&(v=d.return)&&v.call(d)}finally{if(f)throw f.error}}this._recordQueue=[]},u.prototype.takeRecords=function(){var f=this._recordQueue;return this._recordQueue=[],f},u}();r.MutationObserverImpl=l},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(3),o=function(){function s(){}return Object.defineProperty(s.prototype,"previousElementSibling",{get:function(){for(var c=i.Cast.asNode(this)._previousSibling;c;){if(i.Guard.isElementNode(c))return c;c=c._previousSibling}return null},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"nextElementSibling",{get:function(){for(var c=i.Cast.asNode(this)._nextSibling;c;){if(i.Guard.isElementNode(c))return c;c=c._nextSibling}return null},enumerable:!0,configurable:!0}),s}();r.NonDocumentTypeChildNodeImpl=o},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(3),o=a(0),s=function(){function c(){}return c.prototype.getElementById=function(l){for(var u=o.tree_getFirstDescendantNode(i.Cast.asNode(this),!1,!1,function(f){return i.Guard.isElementNode(f)});u!==null;){if(u._uniqueIdentifier===l)return u;u=o.tree_getNextDescendantNode(i.Cast.asNode(this),u,!1,!1,function(f){return i.Guard.isElementNode(f)})}return null},c}();r.NonElementParentNodeImpl=s},function(n,r,a){var i=this&&this.__values||function(l){var u=typeof Symbol=="function"&&Symbol.iterator,f=u&&l[u],v=0;if(f)return f.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&v>=l.length&&(l=void 0),{value:l&&l[v++],done:!l}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var o=a(3),s=a(0),c=function(){function l(){}return Object.defineProperty(l.prototype,"children",{get:function(){return s.create_htmlCollection(o.Cast.asNode(this))},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"firstElementChild",{get:function(){for(var u=o.Cast.asNode(this)._firstChild;u;){if(o.Guard.isElementNode(u))return u;u=u._nextSibling}return null},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"lastElementChild",{get:function(){for(var u=o.Cast.asNode(this)._lastChild;u;){if(o.Guard.isElementNode(u))return u;u=u._previousSibling}return null},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"childElementCount",{get:function(){var u,f,v=0;try{for(var g=i(o.Cast.asNode(this)._children),d=g.next();!d.done;d=g.next()){var m=d.value;o.Guard.isElementNode(m)&&v++}}catch(h){u={error:h}}finally{try{d&&!d.done&&(f=g.return)&&f.call(g)}finally{if(u)throw u.error}}return v},enumerable:!0,configurable:!0}),l.prototype.prepend=function(){for(var u=[],f=0;f<arguments.length;f++)u[f]=arguments[f];var v=o.Cast.asNode(this),g=s.parentNode_convertNodesIntoANode(u,v._nodeDocument);s.mutation_preInsert(g,v,v._firstChild)},l.prototype.append=function(){for(var u=[],f=0;f<arguments.length;f++)u[f]=arguments[f];var v=o.Cast.asNode(this),g=s.parentNode_convertNodesIntoANode(u,v._nodeDocument);s.mutation_append(g,v)},l.prototype.querySelector=function(u){var f=o.Cast.asNode(this),v=s.selectors_scopeMatchASelectorsString(u,f);return v.length===0?null:v[0]},l.prototype.querySelectorAll=function(u){var f=o.Cast.asNode(this),v=s.selectors_scopeMatchASelectorsString(u,f);return s.create_nodeListStatic(f,v)},l}();r.ParentNodeImpl=c},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(0),o=function(){function s(){}return Object.defineProperty(s.prototype,"_name",{get:function(){return this.__name||""},set:function(c){this.__name=c},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"_assignedSlot",{get:function(){return this.__assignedSlot||null},set:function(c){this.__assignedSlot=c},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"assignedSlot",{get:function(){return i.shadowTree_findASlot(this,!0)},enumerable:!0,configurable:!0}),s}();r.SlotableImpl=o},function(n,r,a){var i,o=this&&this.__extends||(i=function(f,v){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,d){g.__proto__=d}||function(g,d){for(var m in d)d.hasOwnProperty(m)&&(g[m]=d[m])})(f,v)},function(f,v){function g(){this.constructor=f}i(f,v),f.prototype=v===null?Object.create(v):(g.prototype=v.prototype,new g)});Object.defineProperty(r,"__esModule",{value:!0});var s=a(102),c=a(9),l=a(3),u=function(f){function v(g){var d=f.call(this)||this;if(l.Guard.isDocumentTypeNode(g.startContainer)||l.Guard.isAttrNode(g.startContainer)||l.Guard.isDocumentTypeNode(g.endContainer)||l.Guard.isAttrNode(g.endContainer))throw new c.InvalidNodeTypeError;return d._start=[g.startContainer,g.startOffset],d._end=[g.endContainer,g.endOffset],d}return o(v,f),v}(s.AbstractRangeImpl);r.StaticRangeImpl=u},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(272);r.DOMParser=i.DOMParserImpl},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(0),o=a(273),s=function(){function c(){}return c.prototype.parseFromString=function(l,u){if(u==="text/html")throw new Error("HTML parser not implemented.");try{return(f=new o.XMLParserImpl().parse(l))._contentType=u,f}catch(m){var f,v="http://www.mozilla.org/newlayout/xml/parsererror.xml",g=(f=i.create_xmlDocument()).createElementNS(v,"parsererror"),d=f.createElementNS(v,"error");return d.setAttribute("message",m.message),g.appendChild(d),f.appendChild(g),f}},c}();r.DOMParserImpl=s},function(n,r,a){var i=this&&this.__read||function(g,d){var m=typeof Symbol=="function"&&g[Symbol.iterator];if(!m)return g;var h,C,p=m.call(g),S=[];try{for(;(d===void 0||d-- >0)&&!(h=p.next()).done;)S.push(h.value)}catch(I){C={error:I}}finally{try{h&&!h.done&&(m=p.return)&&m.call(p)}finally{if(C)throw C.error}}return S},o=this&&this.__values||function(g){var d=typeof Symbol=="function"&&Symbol.iterator,m=d&&g[d],h=0;if(m)return m.call(g);if(g&&typeof g.length=="number")return{next:function(){return g&&h>=g.length&&(g=void 0),{value:g&&g[h++],done:!g}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var s=a(180),c=a(111),l=a(7),u=a(0),f=a(69),v=function(){function g(){}return g.prototype.parse=function(d){for(var m,h,C,p,S=new s.XMLStringLexer(d,{skipWhitespaceOnlyText:!0}),I=u.create_document(),D=I,E=S.nextToken();E.type!==c.TokenType.EOF;){switch(E.type){case c.TokenType.Declaration:var T=E;if(T.version!=="1.0")throw new Error("Invalid xml version: "+T.version);break;case c.TokenType.DocType:var y=E;if(!u.xml_isPubidChar(y.pubId))throw new Error("DocType public identifier does not match PubidChar construct.");if(!u.xml_isLegalChar(y.sysId)||y.sysId.indexOf('"')!==-1&&y.sysId.indexOf("'")!==-1)throw new Error("DocType system identifier contains invalid characters.");D.appendChild(I.implementation.createDocumentType(y.name,y.pubId,y.sysId));break;case c.TokenType.CDATA:var M=E;if(!u.xml_isLegalChar(M.data)||M.data.indexOf("]]>")!==-1)throw new Error("CDATA contains invalid characters.");D.appendChild(I.createCDATASection(M.data));break;case c.TokenType.Comment:var _=E;if(!u.xml_isLegalChar(_.data)||_.data.indexOf("--")!==-1||_.data.endsWith("-"))throw new Error("Comment data contains invalid characters.");D.appendChild(I.createComment(_.data));break;case c.TokenType.PI:var O=E;if(O.target.indexOf(":")!==-1||/^xml$/i.test(O.target))throw new Error("Processing instruction target contains invalid characters.");if(!u.xml_isLegalChar(O.data)||O.data.indexOf("?>")!==-1)throw new Error("Processing instruction data contains invalid characters.");D.appendChild(I.createProcessingInstruction(O.target,O.data));break;case c.TokenType.Text:var w=E;if(!u.xml_isLegalChar(w.data))throw new Error("Text data contains invalid characters.");D.appendChild(I.createTextNode(this._decodeText(w.data)));break;case c.TokenType.Element:var x=E,P=i(u.namespace_extractQName(x.name),2),R=P[0],L=P[1];if(L.indexOf(":")!==-1||!u.xml_isName(L))throw new Error("Node local name contains invalid characters.");if(R==="xmlns")throw new Error("An element cannot have the 'xmlns' prefix.");var H=D.lookupNamespaceURI(R),F={};try{for(var U=(m=void 0,o(x.attributes)),V=U.next();!V.done;V=U.next()){var X=i(V.value,2),re=X[0],ue=X[1];if(re==="xmlns")H=ue;else{var De=i(u.namespace_extractQName(re),2),pe=De[0],Te=De[1];pe==="xmlns"&&(Te===R&&(H=ue),F[Te]=ue)}}}catch(W){m={error:W}}finally{try{V&&!V.done&&(h=U.return)&&h.call(U)}finally{if(m)throw m.error}}var Fe=H!==null?I.createElementNS(H,x.name):I.createElement(x.name);D.appendChild(Fe);var Ne=new f.LocalNameSet;try{for(var Re=(C=void 0,o(x.attributes)),k=Re.next();!k.done;k=Re.next()){var A=i(k.value,2),b=(re=A[0],ue=A[1],i(u.namespace_extractQName(re),2)),N=(pe=b[0],Te=b[1],null);if(pe==="xmlns"||pe===null&&Te==="xmlns"?N=l.namespace.XMLNS:(N=Fe.lookupNamespaceURI(pe))!==null&&Fe.isDefaultNamespace(N)?N=null:N===null&&pe!==null&&(N=F[pe]||null),Ne.has(N,Te))throw new Error("Element contains duplicate attributes.");if(Ne.set(N,Te),N===l.namespace.XMLNS&&ue===l.namespace.XMLNS)throw new Error("XMLNS namespace is reserved.");if(Te.indexOf(":")!==-1||!u.xml_isName(Te))throw new Error("Attribute local name contains invalid characters.");if(pe==="xmlns"&&ue==="")throw new Error("Empty XML namespace is not allowed.");N!==null?Fe.setAttributeNS(N,re,this._decodeAttributeValue(ue)):Fe.setAttribute(re,this._decodeAttributeValue(ue))}}catch(W){C={error:W}}finally{try{k&&!k.done&&(p=Re.return)&&p.call(Re)}finally{if(C)throw C.error}}x.selfClosing||(D=Fe);break;case c.TokenType.ClosingTag:if(E.name!==D.nodeName)throw new Error("Closing tag name does not match opening tag name.");D._parent&&(D=D._parent)}E=S.nextToken()}return I},g.prototype._decodeText=function(d){return d==null?d:d.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")},g.prototype._decodeAttributeValue=function(d){return d==null?d:d.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")},g}();r.XMLParserImpl=v},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(275);r.XMLSerializer=i.XMLSerializerImpl},function(n,r,a){var i=this&&this.__values||function(g){var d=typeof Symbol=="function"&&Symbol.iterator,m=d&&g[d],h=0;if(m)return m.call(g);if(g&&typeof g.length=="number")return{next:function(){return g&&h>=g.length&&(g=void 0),{value:g&&g[h++],done:!g}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var o=a(2),s=a(69),c=a(95),l=a(9),u=a(7),f=a(0),v=function(){function g(){}return g.prototype.serializeToString=function(d){return this._xmlSerialization(d,!1)},g.prototype._xmlSerialization=function(d,m){if(d._nodeDocument===void 0||d._nodeDocument._hasNamespaces){var h=new c.NamespacePrefixMap;h.set("xml",u.namespace.XML);try{return this._serializeNodeNS(d,null,h,{value:1},m)}catch{throw new l.InvalidStateError}}else try{return this._serializeNode(d,m)}catch{throw new l.InvalidStateError}},g.prototype._serializeNodeNS=function(d,m,h,C,p){switch(d.nodeType){case o.NodeType.Element:return this._serializeElementNS(d,m,h,C,p);case o.NodeType.Document:return this._serializeDocumentNS(d,m,h,C,p);case o.NodeType.Comment:return this._serializeComment(d,p);case o.NodeType.Text:return this._serializeText(d,p);case o.NodeType.DocumentFragment:return this._serializeDocumentFragmentNS(d,m,h,C,p);case o.NodeType.DocumentType:return this._serializeDocumentType(d,p);case o.NodeType.ProcessingInstruction:return this._serializeProcessingInstruction(d,p);case o.NodeType.CData:return this._serializeCData(d,p);default:throw new Error("Unknown node type: "+d.nodeType)}},g.prototype._serializeNode=function(d,m){switch(d.nodeType){case o.NodeType.Element:return this._serializeElement(d,m);case o.NodeType.Document:return this._serializeDocument(d,m);case o.NodeType.Comment:return this._serializeComment(d,m);case o.NodeType.Text:return this._serializeText(d,m);case o.NodeType.DocumentFragment:return this._serializeDocumentFragment(d,m);case o.NodeType.DocumentType:return this._serializeDocumentType(d,m);case o.NodeType.ProcessingInstruction:return this._serializeProcessingInstruction(d,m);case o.NodeType.CData:return this._serializeCData(d,m);default:throw new Error("Unknown node type: "+d.nodeType)}},g.prototype._serializeElementNS=function(d,m,h,C,p){var S,I;if(p&&(d.localName.indexOf(":")!==-1||!f.xml_isName(d.localName)))throw new Error("Node local name contains invalid characters (well-formed required).");var D="<",E="",T=!1,y=!1,M=h.copy(),_={},O=this._recordNamespaceInformation(d,M,_),w=m,x=d.namespaceURI;if(w===x)O!==null&&(y=!0),D+=E=x===u.namespace.XML?"xml:"+d.localName:d.localName;else{var P=d.prefix,R=null;if(P===null&&x===O||(R=M.get(P,x)),P==="xmlns"){if(p)throw new Error("An element cannot have the 'xmlns' prefix (well-formed required).");R=P}R!==null?(E=R+":"+d.localName,O!==null&&O!==u.namespace.XML&&(w=O||null),D+=E):P!==null?(P in _&&(P=this._generatePrefix(x,M,C)),M.set(P,x),D+=E+=P+":"+d.localName,D+=" xmlns:"+P+'="'+this._serializeAttributeValue(x,p)+'"',O!==null&&(w=O||null)):O===null||O!==null&&O!==x?(y=!0,w=x,D+=E+=d.localName,D+=' xmlns="'+this._serializeAttributeValue(x,p)+'"'):(w=x,D+=E+=d.localName)}D+=this._serializeAttributesNS(d,M,C,_,y,p);var L=x===u.namespace.HTML;if(L&&d.childNodes.length===0&&g._VoidElementNames.has(d.localName)?(D+=" /",T=!0):L||d.childNodes.length!==0||(D+="/",T=!0),D+=">",T)return D;if(!(L&&d.localName==="template"))try{for(var H=i(d._children||d.childNodes),F=H.next();!F.done;F=H.next()){var U=F.value;D+=this._serializeNodeNS(U,w,M,C,p)}}catch(V){S={error:V}}finally{try{F&&!F.done&&(I=H.return)&&I.call(H)}finally{if(S)throw S.error}}return D+="</"+E+">"},g.prototype._serializeDocumentNS=function(d,m,h,C,p){var S,I;if(p&&d.documentElement===null)throw new Error("Missing document element (well-formed required).");var D="";try{for(var E=i(d._children||d.childNodes),T=E.next();!T.done;T=E.next()){var y=T.value;D+=this._serializeNodeNS(y,m,h,C,p)}}catch(M){S={error:M}}finally{try{T&&!T.done&&(I=E.return)&&I.call(E)}finally{if(S)throw S.error}}return D},g.prototype._serializeComment=function(d,m){if(m&&(!f.xml_isLegalChar(d.data)||d.data.indexOf("--")!==-1||d.data.endsWith("-")))throw new Error("Comment data contains invalid characters (well-formed required).");return"<!--"+d.data+"-->"},g.prototype._serializeText=function(d,m){if(m&&!f.xml_isLegalChar(d.data))throw new Error("Text data contains invalid characters (well-formed required).");for(var h="",C=0;C<d.data.length;C++){var p=d.data[C];h+=p==="&"?"&amp;":p==="<"?"&lt;":p===">"?"&gt;":p}return h},g.prototype._serializeDocumentFragmentNS=function(d,m,h,C,p){var S,I,D="";try{for(var E=i(d._children||d.childNodes),T=E.next();!T.done;T=E.next()){var y=T.value;D+=this._serializeNodeNS(y,m,h,C,p)}}catch(M){S={error:M}}finally{try{T&&!T.done&&(I=E.return)&&I.call(E)}finally{if(S)throw S.error}}return D},g.prototype._serializeDocumentType=function(d,m){if(m&&!f.xml_isPubidChar(d.publicId))throw new Error("DocType public identifier does not match PubidChar construct (well-formed required).");if(m&&(!f.xml_isLegalChar(d.systemId)||d.systemId.indexOf('"')!==-1&&d.systemId.indexOf("'")!==-1))throw new Error("DocType system identifier contains invalid characters (well-formed required).");return d.publicId&&d.systemId?"<!DOCTYPE "+d.name+' PUBLIC "'+d.publicId+'" "'+d.systemId+'">':d.publicId?"<!DOCTYPE "+d.name+' PUBLIC "'+d.publicId+'">':d.systemId?"<!DOCTYPE "+d.name+' SYSTEM "'+d.systemId+'">':"<!DOCTYPE "+d.name+">"},g.prototype._serializeProcessingInstruction=function(d,m){if(m&&(d.target.indexOf(":")!==-1||/^xml$/i.test(d.target)))throw new Error("Processing instruction target contains invalid characters (well-formed required).");if(m&&(!f.xml_isLegalChar(d.data)||d.data.indexOf("?>")!==-1))throw new Error("Processing instruction data contains invalid characters (well-formed required).");return"<?"+(d.data===""?d.target:d.target+" "+d.data)+"?>"},g.prototype._serializeCData=function(d,m){if(m&&d.data.indexOf("]]>")!==-1)throw new Error("CDATA contains invalid characters (well-formed required).");return"<![CDATA["+d.data+"]]>"},g.prototype._serializeAttributesNS=function(d,m,h,C,p,S){var I,D,E="",T=S?new s.LocalNameSet:void 0;try{for(var y=i(d.attributes),M=y.next();!M.done;M=y.next()){var _=M.value;if(p||S||_.namespaceURI!==null){if(S&&T&&T.has(_.namespaceURI,_.localName))throw new Error("Element contains duplicate attributes (well-formed required).");S&&T&&T.set(_.namespaceURI,_.localName);var O=_.namespaceURI,w=null;if(O!==null)if(w=m.get(_.prefix,O),O===u.namespace.XMLNS){if(_.value===u.namespace.XML||_.prefix===null&&p||_.prefix!==null&&(!(_.localName in C)||C[_.localName]!==_.value)&&m.has(_.localName,_.value))continue;if(S&&_.value===u.namespace.XMLNS)throw new Error("XMLNS namespace is reserved (well-formed required).");if(S&&_.value==="")throw new Error("Namespace prefix declarations cannot be used to undeclare a namespace (well-formed required).");_.prefix==="xmlns"&&(w="xmlns")}else w===null&&(E+=" xmlns:"+(w=_.prefix===null||m.hasPrefix(_.prefix)&&!m.has(_.prefix,O)?this._generatePrefix(O,m,h):_.prefix)+'="'+this._serializeAttributeValue(O,S)+'"');if(E+=" ",w!==null&&(E+=w+":"),S&&(_.localName.indexOf(":")!==-1||!f.xml_isName(_.localName)||_.localName==="xmlns"&&O===null))throw new Error("Attribute local name contains invalid characters (well-formed required).");E+=_.localName+'="'+this._serializeAttributeValue(_.value,S)+'"'}else E+=" "+_.localName+'="'+this._serializeAttributeValue(_.value,S)+'"'}}catch(x){I={error:x}}finally{try{M&&!M.done&&(D=y.return)&&D.call(y)}finally{if(I)throw I.error}}return E},g.prototype._recordNamespaceInformation=function(d,m,h){var C,p,S=null;try{for(var I=i(d.attributes),D=I.next();!D.done;D=I.next()){var E=D.value,T=E.namespaceURI,y=E.prefix;if(T===u.namespace.XMLNS){if(y===null){S=E.value;continue}var M=E.localName,_=E.value;if(_===u.namespace.XML||(_===""&&(_=null),m.has(M,_)))continue;m.set(M,_),h[M]=_||""}}}catch(O){C={error:O}}finally{try{D&&!D.done&&(p=I.return)&&p.call(I)}finally{if(C)throw C.error}}return S},g.prototype._generatePrefix=function(d,m,h){var C="ns"+h.value;return h.value++,m.set(C,d),C},g.prototype._serializeAttributeValue=function(d,m){if(m&&d!==null&&!f.xml_isLegalChar(d))throw new Error("Invalid characters in attribute value.");if(d===null)return"";for(var h="",C=0;C<d.length;C++){var p=d[C];h+=p==='"'?"&quot;":p==="&"?"&amp;":p==="<"?"&lt;":p===">"?"&gt;":p}return h},g.prototype._serializeElement=function(d,m){var h,C;if(m&&(d.localName.indexOf(":")!==-1||!f.xml_isName(d.localName)))throw new Error("Node local name contains invalid characters (well-formed required).");var p=!1,S=d.localName,I="<"+S;if(I+=this._serializeAttributes(d,m),d._children.size===0&&(I+="/",p=!0),I+=">",p)return I;try{for(var D=i(d._children),E=D.next();!E.done;E=D.next()){var T=E.value;I+=this._serializeNode(T,m)}}catch(y){h={error:y}}finally{try{E&&!E.done&&(C=D.return)&&C.call(D)}finally{if(h)throw h.error}}return I+="</"+S+">"},g.prototype._serializeDocument=function(d,m){var h,C;if(m&&d.documentElement===null)throw new Error("Missing document element (well-formed required).");var p="";try{for(var S=i(d._children),I=S.next();!I.done;I=S.next()){var D=I.value;p+=this._serializeNode(D,m)}}catch(E){h={error:E}}finally{try{I&&!I.done&&(C=S.return)&&C.call(S)}finally{if(h)throw h.error}}return p},g.prototype._serializeDocumentFragment=function(d,m){var h,C,p="";try{for(var S=i(d._children),I=S.next();!I.done;I=S.next()){var D=I.value;p+=this._serializeNode(D,m)}}catch(E){h={error:E}}finally{try{I&&!I.done&&(C=S.return)&&C.call(S)}finally{if(h)throw h.error}}return p},g.prototype._serializeAttributes=function(d,m){var h,C,p="",S=m?{}:void 0;try{for(var I=i(d.attributes),D=I.next();!D.done;D=I.next()){var E=D.value;if(m&&S&&E.localName in S)throw new Error("Element contains duplicate attributes (well-formed required).");if(m&&S&&(S[E.localName]=!0),m&&(E.localName.indexOf(":")!==-1||!f.xml_isName(E.localName)))throw new Error("Attribute local name contains invalid characters (well-formed required).");p+=" "+E.localName+'="'+this._serializeAttributeValue(E.value,m)+'"'}}catch(T){h={error:T}}finally{try{D&&!D.done&&(C=I.return)&&C.call(I)}finally{if(h)throw h.error}}return p},g._VoidElementNames=new Set(["area","base","basefont","bgsound","br","col","embed","frame","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]),g}();r.XMLSerializerImpl=v},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(277);r.XMLReader=i.XMLReader;var o=a(112);r.ObjectReader=o.ObjectReader;var s=a(280);r.JSONReader=s.JSONReader;var c=a(281);r.YAMLReader=c.YAMLReader},function(n,r,a){a(31),a(32),a(33),a(19),a(65),a(20),a(22),a(23);var i,o=this&&this.__extends||(i=function(d,m){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,C){h.__proto__=C}||function(h,C){for(var p in C)C.hasOwnProperty(p)&&(h[p]=C[p])})(d,m)},function(d,m){function h(){this.constructor=d}i(d,m),d.prototype=m===null?Object.create(m):(h.prototype=m.prototype,new h)}),s=this&&this.__read||function(d,m){var h=typeof Symbol=="function"&&d[Symbol.iterator];if(!h)return d;var C,p,S=h.call(d),I=[];try{for(;(m===void 0||m-- >0)&&!(C=S.next()).done;)I.push(C.value)}catch(D){p={error:D}}finally{try{C&&!C.done&&(h=S.return)&&h.call(S)}finally{if(p)throw p.error}}return I},c=this&&this.__values||function(d){var m=typeof Symbol=="function"&&Symbol.iterator,h=m&&d[m],C=0;if(h)return h.call(d);if(d&&typeof d.length=="number")return{next:function(){return d&&C>=d.length&&(d=void 0),{value:d&&d[C++],done:!d}}};throw new TypeError(m?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var l=a(180),u=a(111),f=a(7),v=a(0),g=function(d){function m(){return d!==null&&d.apply(this,arguments)||this}return o(m,d),m.prototype._parse=function(h,C){for(var p,S,I,D,E=new l.XMLStringLexer(C,{skipWhitespaceOnlyText:!0}),T=h,y=h,M=E.nextToken();M.type!==u.TokenType.EOF;){switch(M.type){case u.TokenType.Declaration:var _=M,O=this.sanitize(_.version);if(O!=="1.0")throw new Error("Invalid xml version: "+O);var w={version:O};_.encoding&&(w.encoding=this.sanitize(_.encoding)),_.standalone&&(w.standalone=this.sanitize(_.standalone)==="yes"),y.set(w);break;case u.TokenType.DocType:var x=M;y=this.docType(y,this.sanitize(x.name),this.sanitize(x.pubId),this.sanitize(x.sysId))||y;break;case u.TokenType.CDATA:var P=M;y=this.cdata(y,this.sanitize(P.data))||y;break;case u.TokenType.Comment:var R=M;y=this.comment(y,this.sanitize(R.data))||y;break;case u.TokenType.PI:var L=M;y=this.instruction(y,this.sanitize(L.target),this.sanitize(L.data))||y;break;case u.TokenType.Text:var H=M;y=this.text(y,this._decodeText(this.sanitize(H.data)))||y;break;case u.TokenType.Element:var F=M,U=this.sanitize(F.name),V=s(v.namespace_extractQName(U),1)[0],X=y.node.lookupNamespaceURI(V),re={};try{for(var ue=(p=void 0,c(F.attributes)),De=ue.next();!De.done;De=ue.next()){var pe=s(De.value,2),Te=pe[0],Fe=pe[1];if(Te=this.sanitize(Te),Fe=this.sanitize(Fe),Te==="xmlns")X=Fe;else{var Ne=s(v.namespace_extractQName(Te),2),Re=Ne[0],k=Ne[1];Re==="xmlns"&&(k===V&&(X=Fe),re[k]=Fe)}}}catch(ge){p={error:ge}}finally{try{De&&!De.done&&(S=ue.return)&&S.call(ue)}finally{if(p)throw p.error}}var A=X!==null?this.element(y,X,U):this.element(y,void 0,U);if(A===void 0)break;y.node===h.node&&(T=A);try{for(var b=(I=void 0,c(F.attributes)),N=b.next();!N.done;N=b.next()){var W=s(N.value,2);Te=W[0],Fe=W[1],Te=this.sanitize(Te),Fe=this.sanitize(Fe);var j=s(v.namespace_extractQName(Te),2),K=(Re=j[0],k=j[1],null);Re==="xmlns"||Re===null&&k==="xmlns"?K=f.namespace.XMLNS:(K=A.node.lookupNamespaceURI(Re))!==null&&A.node.isDefaultNamespace(K)?K=null:K===null&&Re!==null&&(K=re[Re]||null),K!==null?this.attribute(A,K,Te,this._decodeAttributeValue(Fe)):this.attribute(A,void 0,Te,this._decodeAttributeValue(Fe))}}catch(ge){I={error:ge}}finally{try{N&&!N.done&&(D=b.return)&&D.call(b)}finally{if(I)throw I.error}}F.selfClosing||(y=A);break;case u.TokenType.ClosingTag:y.node.parentNode&&(y=y.up())}M=E.nextToken()}return T},m}(a(75).BaseReader);r.XMLReader=g},function(n,r,a){var i=a(4),o=a(279);i({target:"Object",stat:!0,forced:Object.assign!==o},{assign:o})},function(n,r,a){var i=a(16),o=a(8),s=a(61),c=a(85),l=a(79),u=a(27),f=a(41),v=Object.assign,g=Object.defineProperty;n.exports=!v||o(function(){if(i&&v({b:1},v(g({},"a",{enumerable:!0,get:function(){g(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var d={},m={},h=Symbol();return d[h]=7,"abcdefghijklmnopqrst".split("").forEach(function(C){m[C]=C}),v({},d)[h]!=7||s(v({},m)).join("")!="abcdefghijklmnopqrst"})?function(d,m){for(var h=u(d),C=arguments.length,p=1,S=c.f,I=l.f;C>p;)for(var D,E=f(arguments[p++]),T=S?s(E).concat(S(E)):s(E),y=T.length,M=0;y>M;)D=T[M++],i&&!I.call(E,D)||(h[D]=E[D]);return h}:v},function(n,r,a){var i,o=this&&this.__extends||(i=function(l,u){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,v){f.__proto__=v}||function(f,v){for(var g in v)v.hasOwnProperty(g)&&(f[g]=v[g])})(l,u)},function(l,u){function f(){this.constructor=l}i(l,u),l.prototype=u===null?Object.create(u):(f.prototype=u.prototype,new f)});Object.defineProperty(r,"__esModule",{value:!0});var s=a(112),c=function(l){function u(){return l!==null&&l.apply(this,arguments)||this}return o(u,l),u.prototype._parse=function(f,v){return new s.ObjectReader(this._builderOptions).parse(f,JSON.parse(v))},u}(a(75).BaseReader);r.JSONReader=c},function(n,r,a){var i,o=this&&this.__extends||(i=function(f,v){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,d){g.__proto__=d}||function(g,d){for(var m in d)d.hasOwnProperty(m)&&(g[m]=d[m])})(f,v)},function(f,v){function g(){this.constructor=f}i(f,v),f.prototype=v===null?Object.create(v):(g.prototype=v.prototype,new g)});Object.defineProperty(r,"__esModule",{value:!0});var s=a(112),c=a(75),l=a(282),u=function(f){function v(){return f!==null&&f.apply(this,arguments)||this}return o(v,f),v.prototype._parse=function(g,d){var m=l.safeLoad(d);if(m===void 0)throw new Error("Unable to parse YAML document.");return new s.ObjectReader(this._builderOptions).parse(g,m)},v}(c.BaseReader);r.YAMLReader=u},function(n,r,a){var i=a(283);n.exports=i},function(n,r,a){var i=a(284),o=a(303);function s(c){return function(){throw new Error("Function "+c+" is deprecated and cannot be used.")}}n.exports.Type=a(10),n.exports.Schema=a(39),n.exports.FAILSAFE_SCHEMA=a(113),n.exports.JSON_SCHEMA=a(182),n.exports.CORE_SCHEMA=a(181),n.exports.DEFAULT_SAFE_SCHEMA=a(54),n.exports.DEFAULT_FULL_SCHEMA=a(76),n.exports.load=i.load,n.exports.loadAll=i.loadAll,n.exports.safeLoad=i.safeLoad,n.exports.safeLoadAll=i.safeLoadAll,n.exports.dump=o.dump,n.exports.safeDump=o.safeDump,n.exports.YAMLException=a(53),n.exports.MINIMAL_SCHEMA=a(113),n.exports.SAFE_SCHEMA=a(54),n.exports.DEFAULT_SCHEMA=a(76),n.exports.scan=s("scan"),n.exports.parse=s("parse"),n.exports.compose=s("compose"),n.exports.addConstructor=s("addConstructor")},function(n,r,a){var i=a(38),o=a(53),s=a(285),c=a(54),l=a(76),u=Object.prototype.hasOwnProperty,f=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,v=/[\x85\u2028\u2029]/,g=/[,\[\]\{\}]/,d=/^(?:!|!!|![a-z\-]+!)$/i,m=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function h(A){return Object.prototype.toString.call(A)}function C(A){return A===10||A===13}function p(A){return A===9||A===32}function S(A){return A===9||A===32||A===10||A===13}function I(A){return A===44||A===91||A===93||A===123||A===125}function D(A){var b;return 48<=A&&A<=57?A-48:97<=(b=32|A)&&b<=102?b-97+10:-1}function E(A){return A===48?"\0":A===97?"\x07":A===98?"\b":A===116||A===9?"	":A===110?`
`:A===118?"\v":A===102?"\f":A===114?"\r":A===101?"\x1B":A===32?" ":A===34?'"':A===47?"/":A===92?"\\":A===78?"":A===95?"":A===76?"\u2028":A===80?"\u2029":""}function T(A){return A<=65535?String.fromCharCode(A):String.fromCharCode(55296+(A-65536>>10),56320+(A-65536&1023))}for(var y=new Array(256),M=new Array(256),_=0;_<256;_++)y[_]=E(_)?1:0,M[_]=E(_);function O(A,b){this.input=A,this.filename=b.filename||null,this.schema=b.schema||l,this.onWarning=b.onWarning||null,this.legacy=b.legacy||!1,this.json=b.json||!1,this.listener=b.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=A.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function w(A,b){return new o(b,new s(A.filename,A.input,A.position,A.line,A.position-A.lineStart))}function x(A,b){throw w(A,b)}function P(A,b){A.onWarning&&A.onWarning.call(null,w(A,b))}var R={YAML:function(A,b,N){var W,j,K;A.version!==null&&x(A,"duplication of %YAML directive"),N.length!==1&&x(A,"YAML directive accepts exactly one argument"),(W=/^([0-9]+)\.([0-9]+)$/.exec(N[0]))===null&&x(A,"ill-formed argument of the YAML directive"),j=parseInt(W[1],10),K=parseInt(W[2],10),j!==1&&x(A,"unacceptable YAML version of the document"),A.version=N[0],A.checkLineBreaks=K<2,K!==1&&K!==2&&P(A,"unsupported YAML version of the document")},TAG:function(A,b,N){var W,j;N.length!==2&&x(A,"TAG directive accepts exactly two arguments"),W=N[0],j=N[1],d.test(W)||x(A,"ill-formed tag handle (first argument) of the TAG directive"),u.call(A.tagMap,W)&&x(A,'there is a previously declared suffix for "'+W+'" tag handle'),m.test(j)||x(A,"ill-formed tag prefix (second argument) of the TAG directive"),A.tagMap[W]=j}};function L(A,b,N,W){var j,K,ge,ye;if(b<N){if(ye=A.input.slice(b,N),W)for(j=0,K=ye.length;j<K;j+=1)(ge=ye.charCodeAt(j))===9||32<=ge&&ge<=1114111||x(A,"expected valid JSON character");else f.test(ye)&&x(A,"the stream contains non-printable characters");A.result+=ye}}function H(A,b,N,W){var j,K,ge,ye;for(i.isObject(N)||x(A,"cannot merge mappings; the provided source object is unacceptable"),ge=0,ye=(j=Object.keys(N)).length;ge<ye;ge+=1)K=j[ge],u.call(b,K)||(b[K]=N[K],W[K]=!0)}function F(A,b,N,W,j,K,ge,ye){var we,be;if(Array.isArray(j))for(we=0,be=(j=Array.prototype.slice.call(j)).length;we<be;we+=1)Array.isArray(j[we])&&x(A,"nested arrays are not supported inside keys"),typeof j=="object"&&h(j[we])==="[object Object]"&&(j[we]="[object Object]");if(typeof j=="object"&&h(j)==="[object Object]"&&(j="[object Object]"),j=String(j),b===null&&(b={}),W==="tag:yaml.org,2002:merge")if(Array.isArray(K))for(we=0,be=K.length;we<be;we+=1)H(A,b,K[we],N);else H(A,b,K,N);else A.json||u.call(N,j)||!u.call(b,j)||(A.line=ge||A.line,A.position=ye||A.position,x(A,"duplicated mapping key")),b[j]=K,delete N[j];return b}function U(A){var b;(b=A.input.charCodeAt(A.position))===10?A.position++:b===13?(A.position++,A.input.charCodeAt(A.position)===10&&A.position++):x(A,"a line break is expected"),A.line+=1,A.lineStart=A.position}function V(A,b,N){for(var W=0,j=A.input.charCodeAt(A.position);j!==0;){for(;p(j);)j=A.input.charCodeAt(++A.position);if(b&&j===35)do j=A.input.charCodeAt(++A.position);while(j!==10&&j!==13&&j!==0);if(!C(j))break;for(U(A),j=A.input.charCodeAt(A.position),W++,A.lineIndent=0;j===32;)A.lineIndent++,j=A.input.charCodeAt(++A.position)}return N!==-1&&W!==0&&A.lineIndent<N&&P(A,"deficient indentation"),W}function X(A){var b,N=A.position;return!((b=A.input.charCodeAt(N))!==45&&b!==46||b!==A.input.charCodeAt(N+1)||b!==A.input.charCodeAt(N+2)||(N+=3,(b=A.input.charCodeAt(N))!==0&&!S(b)))}function re(A,b){b===1?A.result+=" ":b>1&&(A.result+=i.repeat(`
`,b-1))}function ue(A,b){var N,W,j=A.tag,K=A.anchor,ge=[],ye=!1;for(A.anchor!==null&&(A.anchorMap[A.anchor]=ge),W=A.input.charCodeAt(A.position);W!==0&&W===45&&S(A.input.charCodeAt(A.position+1));)if(ye=!0,A.position++,V(A,!0,-1)&&A.lineIndent<=b)ge.push(null),W=A.input.charCodeAt(A.position);else if(N=A.line,Te(A,b,3,!1,!0),ge.push(A.result),V(A,!0,-1),W=A.input.charCodeAt(A.position),(A.line===N||A.lineIndent>b)&&W!==0)x(A,"bad indentation of a sequence entry");else if(A.lineIndent<b)break;return!!ye&&(A.tag=j,A.anchor=K,A.kind="sequence",A.result=ge,!0)}function De(A){var b,N,W,j,K=!1,ge=!1;if((j=A.input.charCodeAt(A.position))!==33)return!1;if(A.tag!==null&&x(A,"duplication of a tag property"),(j=A.input.charCodeAt(++A.position))===60?(K=!0,j=A.input.charCodeAt(++A.position)):j===33?(ge=!0,N="!!",j=A.input.charCodeAt(++A.position)):N="!",b=A.position,K){do j=A.input.charCodeAt(++A.position);while(j!==0&&j!==62);A.position<A.length?(W=A.input.slice(b,A.position),j=A.input.charCodeAt(++A.position)):x(A,"unexpected end of the stream within a verbatim tag")}else{for(;j!==0&&!S(j);)j===33&&(ge?x(A,"tag suffix cannot contain exclamation marks"):(N=A.input.slice(b-1,A.position+1),d.test(N)||x(A,"named tag handle cannot contain such characters"),ge=!0,b=A.position+1)),j=A.input.charCodeAt(++A.position);W=A.input.slice(b,A.position),g.test(W)&&x(A,"tag suffix cannot contain flow indicator characters")}return W&&!m.test(W)&&x(A,"tag name cannot contain such characters: "+W),K?A.tag=W:u.call(A.tagMap,N)?A.tag=A.tagMap[N]+W:N==="!"?A.tag="!"+W:N==="!!"?A.tag="tag:yaml.org,2002:"+W:x(A,'undeclared tag handle "'+N+'"'),!0}function pe(A){var b,N;if((N=A.input.charCodeAt(A.position))!==38)return!1;for(A.anchor!==null&&x(A,"duplication of an anchor property"),N=A.input.charCodeAt(++A.position),b=A.position;N!==0&&!S(N)&&!I(N);)N=A.input.charCodeAt(++A.position);return A.position===b&&x(A,"name of an anchor node must contain at least one character"),A.anchor=A.input.slice(b,A.position),!0}function Te(A,b,N,W,j){var K,ge,ye,we,be,Z,ie,he,se=1,me=!1,fe=!1;if(A.listener!==null&&A.listener("open",A),A.tag=null,A.anchor=null,A.kind=null,A.result=null,K=ge=ye=N===4||N===3,W&&V(A,!0,-1)&&(me=!0,A.lineIndent>b?se=1:A.lineIndent===b?se=0:A.lineIndent<b&&(se=-1)),se===1)for(;De(A)||pe(A);)V(A,!0,-1)?(me=!0,ye=K,A.lineIndent>b?se=1:A.lineIndent===b?se=0:A.lineIndent<b&&(se=-1)):ye=!1;if(ye&&(ye=me||j),se!==1&&N!==4||(ie=N===1||N===2?b:b+1,he=A.position-A.lineStart,se===1?ye&&(ue(A,he)||function(q,Pe,Le){var Ue,Me,Be,nt,Ze,at=q.tag,Ot=q.anchor,Oe={},$e={},ht=null,Ut=null,Qt=null,Rt=!1,Dn=!1;for(q.anchor!==null&&(q.anchorMap[q.anchor]=Oe),Ze=q.input.charCodeAt(q.position);Ze!==0;){if(Ue=q.input.charCodeAt(q.position+1),Be=q.line,nt=q.position,Ze!==63&&Ze!==58||!S(Ue)){if(!Te(q,Le,2,!1,!0))break;if(q.line===Be){for(Ze=q.input.charCodeAt(q.position);p(Ze);)Ze=q.input.charCodeAt(++q.position);if(Ze===58)S(Ze=q.input.charCodeAt(++q.position))||x(q,"a whitespace character is expected after the key-value separator within a block mapping"),Rt&&(F(q,Oe,$e,ht,Ut,null),ht=Ut=Qt=null),Dn=!0,Rt=!1,Me=!1,ht=q.tag,Ut=q.result;else{if(!Dn)return q.tag=at,q.anchor=Ot,!0;x(q,"can not read an implicit mapping pair; a colon is missed")}}else{if(!Dn)return q.tag=at,q.anchor=Ot,!0;x(q,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else Ze===63?(Rt&&(F(q,Oe,$e,ht,Ut,null),ht=Ut=Qt=null),Dn=!0,Rt=!0,Me=!0):Rt?(Rt=!1,Me=!0):x(q,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),q.position+=1,Ze=Ue;if((q.line===Be||q.lineIndent>Pe)&&(Te(q,Pe,4,!0,Me)&&(Rt?Ut=q.result:Qt=q.result),Rt||(F(q,Oe,$e,ht,Ut,Qt,Be,nt),ht=Ut=Qt=null),V(q,!0,-1),Ze=q.input.charCodeAt(q.position)),q.lineIndent>Pe&&Ze!==0)x(q,"bad indentation of a mapping entry");else if(q.lineIndent<Pe)break}return Rt&&F(q,Oe,$e,ht,Ut,null),Dn&&(q.tag=at,q.anchor=Ot,q.kind="mapping",q.result=Oe),Dn}(A,he,ie))||function(q,Pe){var Le,Ue,Me,Be,nt,Ze,at,Ot,Oe,$e,ht=!0,Ut=q.tag,Qt=q.anchor,Rt={};if(($e=q.input.charCodeAt(q.position))===91)Me=93,Ze=!1,Ue=[];else{if($e!==123)return!1;Me=125,Ze=!0,Ue={}}for(q.anchor!==null&&(q.anchorMap[q.anchor]=Ue),$e=q.input.charCodeAt(++q.position);$e!==0;){if(V(q,!0,Pe),($e=q.input.charCodeAt(q.position))===Me)return q.position++,q.tag=Ut,q.anchor=Qt,q.kind=Ze?"mapping":"sequence",q.result=Ue,!0;ht||x(q,"missed comma between flow collection entries"),Oe=null,Be=nt=!1,$e===63&&S(q.input.charCodeAt(q.position+1))&&(Be=nt=!0,q.position++,V(q,!0,Pe)),Le=q.line,Te(q,Pe,1,!1,!0),Ot=q.tag,at=q.result,V(q,!0,Pe),$e=q.input.charCodeAt(q.position),!nt&&q.line!==Le||$e!==58||(Be=!0,$e=q.input.charCodeAt(++q.position),V(q,!0,Pe),Te(q,Pe,1,!1,!0),Oe=q.result),Ze?F(q,Ue,Rt,Ot,at,Oe):Be?Ue.push(F(q,null,Rt,Ot,at,Oe)):Ue.push(at),V(q,!0,Pe),($e=q.input.charCodeAt(q.position))===44?(ht=!0,$e=q.input.charCodeAt(++q.position)):ht=!1}x(q,"unexpected end of the stream within a flow collection")}(A,ie)?fe=!0:(ge&&function(q,Pe){var Le,Ue,Me,Be,nt,Ze=1,at=!1,Ot=!1,Oe=Pe,$e=0,ht=!1;if((Be=q.input.charCodeAt(q.position))===124)Ue=!1;else{if(Be!==62)return!1;Ue=!0}for(q.kind="scalar",q.result="";Be!==0;)if((Be=q.input.charCodeAt(++q.position))===43||Be===45)Ze===1?Ze=Be===43?3:2:x(q,"repeat of a chomping mode identifier");else{if(!((Me=48<=(nt=Be)&&nt<=57?nt-48:-1)>=0))break;Me===0?x(q,"bad explicit indentation width of a block scalar; it cannot be less than one"):Ot?x(q,"repeat of an indentation width identifier"):(Oe=Pe+Me-1,Ot=!0)}if(p(Be)){do Be=q.input.charCodeAt(++q.position);while(p(Be));if(Be===35)do Be=q.input.charCodeAt(++q.position);while(!C(Be)&&Be!==0)}for(;Be!==0;){for(U(q),q.lineIndent=0,Be=q.input.charCodeAt(q.position);(!Ot||q.lineIndent<Oe)&&Be===32;)q.lineIndent++,Be=q.input.charCodeAt(++q.position);if(!Ot&&q.lineIndent>Oe&&(Oe=q.lineIndent),C(Be))$e++;else{if(q.lineIndent<Oe){Ze===3?q.result+=i.repeat(`
`,at?1+$e:$e):Ze===1&&at&&(q.result+=`
`);break}for(Ue?p(Be)?(ht=!0,q.result+=i.repeat(`
`,at?1+$e:$e)):ht?(ht=!1,q.result+=i.repeat(`
`,$e+1)):$e===0?at&&(q.result+=" "):q.result+=i.repeat(`
`,$e):q.result+=i.repeat(`
`,at?1+$e:$e),at=!0,Ot=!0,$e=0,Le=q.position;!C(Be)&&Be!==0;)Be=q.input.charCodeAt(++q.position);L(q,Le,q.position,!1)}}return!0}(A,ie)||function(q,Pe){var Le,Ue,Me;if((Le=q.input.charCodeAt(q.position))!==39)return!1;for(q.kind="scalar",q.result="",q.position++,Ue=Me=q.position;(Le=q.input.charCodeAt(q.position))!==0;)if(Le===39){if(L(q,Ue,q.position,!0),(Le=q.input.charCodeAt(++q.position))!==39)return!0;Ue=q.position,q.position++,Me=q.position}else C(Le)?(L(q,Ue,Me,!0),re(q,V(q,!1,Pe)),Ue=Me=q.position):q.position===q.lineStart&&X(q)?x(q,"unexpected end of the document within a single quoted scalar"):(q.position++,Me=q.position);x(q,"unexpected end of the stream within a single quoted scalar")}(A,ie)||function(q,Pe){var Le,Ue,Me,Be,nt,Ze,at;if((Ze=q.input.charCodeAt(q.position))!==34)return!1;for(q.kind="scalar",q.result="",q.position++,Le=Ue=q.position;(Ze=q.input.charCodeAt(q.position))!==0;){if(Ze===34)return L(q,Le,q.position,!0),q.position++,!0;if(Ze===92){if(L(q,Le,q.position,!0),C(Ze=q.input.charCodeAt(++q.position)))V(q,!1,Pe);else if(Ze<256&&y[Ze])q.result+=M[Ze],q.position++;else if((nt=(at=Ze)===120?2:at===117?4:at===85?8:0)>0){for(Me=nt,Be=0;Me>0;Me--)(nt=D(Ze=q.input.charCodeAt(++q.position)))>=0?Be=(Be<<4)+nt:x(q,"expected hexadecimal character");q.result+=T(Be),q.position++}else x(q,"unknown escape sequence");Le=Ue=q.position}else C(Ze)?(L(q,Le,Ue,!0),re(q,V(q,!1,Pe)),Le=Ue=q.position):q.position===q.lineStart&&X(q)?x(q,"unexpected end of the document within a double quoted scalar"):(q.position++,Ue=q.position)}x(q,"unexpected end of the stream within a double quoted scalar")}(A,ie)?fe=!0:function(q){var Pe,Le,Ue;if((Ue=q.input.charCodeAt(q.position))!==42)return!1;for(Ue=q.input.charCodeAt(++q.position),Pe=q.position;Ue!==0&&!S(Ue)&&!I(Ue);)Ue=q.input.charCodeAt(++q.position);return q.position===Pe&&x(q,"name of an alias node must contain at least one character"),Le=q.input.slice(Pe,q.position),q.anchorMap.hasOwnProperty(Le)||x(q,'unidentified alias "'+Le+'"'),q.result=q.anchorMap[Le],V(q,!0,-1),!0}(A)?(fe=!0,A.tag===null&&A.anchor===null||x(A,"alias node should not have any properties")):function(q,Pe,Le){var Ue,Me,Be,nt,Ze,at,Ot,Oe,$e=q.kind,ht=q.result;if(S(Oe=q.input.charCodeAt(q.position))||I(Oe)||Oe===35||Oe===38||Oe===42||Oe===33||Oe===124||Oe===62||Oe===39||Oe===34||Oe===37||Oe===64||Oe===96||(Oe===63||Oe===45)&&(S(Ue=q.input.charCodeAt(q.position+1))||Le&&I(Ue)))return!1;for(q.kind="scalar",q.result="",Me=Be=q.position,nt=!1;Oe!==0;){if(Oe===58){if(S(Ue=q.input.charCodeAt(q.position+1))||Le&&I(Ue))break}else if(Oe===35){if(S(q.input.charCodeAt(q.position-1)))break}else{if(q.position===q.lineStart&&X(q)||Le&&I(Oe))break;if(C(Oe)){if(Ze=q.line,at=q.lineStart,Ot=q.lineIndent,V(q,!1,-1),q.lineIndent>=Pe){nt=!0,Oe=q.input.charCodeAt(q.position);continue}q.position=Be,q.line=Ze,q.lineStart=at,q.lineIndent=Ot;break}}nt&&(L(q,Me,Be,!1),re(q,q.line-Ze),Me=Be=q.position,nt=!1),p(Oe)||(Be=q.position+1),Oe=q.input.charCodeAt(++q.position)}return L(q,Me,Be,!1),!!q.result||(q.kind=$e,q.result=ht,!1)}(A,ie,N===1)&&(fe=!0,A.tag===null&&(A.tag="?")),A.anchor!==null&&(A.anchorMap[A.anchor]=A.result)):se===0&&(fe=ye&&ue(A,he))),A.tag!==null&&A.tag!=="!")if(A.tag==="?"){for(A.result!==null&&A.kind!=="scalar"&&x(A,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+A.kind+'"'),we=0,be=A.implicitTypes.length;we<be;we+=1)if((Z=A.implicitTypes[we]).resolve(A.result)){A.result=Z.construct(A.result),A.tag=Z.tag,A.anchor!==null&&(A.anchorMap[A.anchor]=A.result);break}}else u.call(A.typeMap[A.kind||"fallback"],A.tag)?(Z=A.typeMap[A.kind||"fallback"][A.tag],A.result!==null&&Z.kind!==A.kind&&x(A,"unacceptable node kind for !<"+A.tag+'> tag; it should be "'+Z.kind+'", not "'+A.kind+'"'),Z.resolve(A.result)?(A.result=Z.construct(A.result),A.anchor!==null&&(A.anchorMap[A.anchor]=A.result)):x(A,"cannot resolve a node with !<"+A.tag+"> explicit tag")):x(A,"unknown tag !<"+A.tag+">");return A.listener!==null&&A.listener("close",A),A.tag!==null||A.anchor!==null||fe}function Fe(A){var b,N,W,j,K=A.position,ge=!1;for(A.version=null,A.checkLineBreaks=A.legacy,A.tagMap={},A.anchorMap={};(j=A.input.charCodeAt(A.position))!==0&&(V(A,!0,-1),j=A.input.charCodeAt(A.position),!(A.lineIndent>0||j!==37));){for(ge=!0,j=A.input.charCodeAt(++A.position),b=A.position;j!==0&&!S(j);)j=A.input.charCodeAt(++A.position);for(W=[],(N=A.input.slice(b,A.position)).length<1&&x(A,"directive name must not be less than one character in length");j!==0;){for(;p(j);)j=A.input.charCodeAt(++A.position);if(j===35){do j=A.input.charCodeAt(++A.position);while(j!==0&&!C(j));break}if(C(j))break;for(b=A.position;j!==0&&!S(j);)j=A.input.charCodeAt(++A.position);W.push(A.input.slice(b,A.position))}j!==0&&U(A),u.call(R,N)?R[N](A,N,W):P(A,'unknown document directive "'+N+'"')}V(A,!0,-1),A.lineIndent===0&&A.input.charCodeAt(A.position)===45&&A.input.charCodeAt(A.position+1)===45&&A.input.charCodeAt(A.position+2)===45?(A.position+=3,V(A,!0,-1)):ge&&x(A,"directives end mark is expected"),Te(A,A.lineIndent-1,4,!1,!0),V(A,!0,-1),A.checkLineBreaks&&v.test(A.input.slice(K,A.position))&&P(A,"non-ASCII line breaks are interpreted as content"),A.documents.push(A.result),A.position===A.lineStart&&X(A)?A.input.charCodeAt(A.position)===46&&(A.position+=3,V(A,!0,-1)):A.position<A.length-1&&x(A,"end of the stream or a document separator is expected")}function Ne(A,b){b=b||{},(A=String(A)).length!==0&&(A.charCodeAt(A.length-1)!==10&&A.charCodeAt(A.length-1)!==13&&(A+=`
`),A.charCodeAt(0)===65279&&(A=A.slice(1)));var N=new O(A,b),W=A.indexOf("\0");for(W!==-1&&(N.position=W,x(N,"null byte is not allowed in input")),N.input+="\0";N.input.charCodeAt(N.position)===32;)N.lineIndent+=1,N.position+=1;for(;N.position<N.length-1;)Fe(N);return N.documents}function Re(A,b,N){b!==null&&typeof b=="object"&&N===void 0&&(N=b,b=null);var W=Ne(A,N);if(typeof b!="function")return W;for(var j=0,K=W.length;j<K;j+=1)b(W[j])}function k(A,b){var N=Ne(A,b);if(N.length!==0){if(N.length===1)return N[0];throw new o("expected a single document in the stream, but found more")}}n.exports.loadAll=Re,n.exports.load=k,n.exports.safeLoadAll=function(A,b,N){return typeof b=="object"&&b!==null&&N===void 0&&(N=b,b=null),Re(A,b,i.extend({schema:c},N))},n.exports.safeLoad=function(A,b){return k(A,i.extend({schema:c},b))}},function(n,r,a){var i=a(38);function o(s,c,l,u,f){this.name=s,this.buffer=c,this.position=l,this.line=u,this.column=f}o.prototype.getSnippet=function(s,c){var l,u,f,v,g;if(!this.buffer)return null;for(s=s||4,c=c||75,l="",u=this.position;u>0&&`\0\r
\u2028\u2029`.indexOf(this.buffer.charAt(u-1))===-1;)if(u-=1,this.position-u>c/2-1){l=" ... ",u+=5;break}for(f="",v=this.position;v<this.buffer.length&&`\0\r
\u2028\u2029`.indexOf(this.buffer.charAt(v))===-1;)if((v+=1)-this.position>c/2-1){f=" ... ",v-=5;break}return g=this.buffer.slice(u,v),i.repeat(" ",s)+l+g+f+`
`+i.repeat(" ",s+this.position-u+l.length)+"^"},o.prototype.toString=function(s){var c,l="";return this.name&&(l+='in "'+this.name+'" '),l+="at line "+(this.line+1)+", column "+(this.column+1),s||(c=this.getSnippet())&&(l+=`:
`+c),l},n.exports=o},function(n,r,a){var i=a(10);n.exports=new i("tag:yaml.org,2002:str",{kind:"scalar",construct:function(o){return o!==null?o:""}})},function(n,r,a){var i=a(10);n.exports=new i("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(o){return o!==null?o:[]}})},function(n,r,a){var i=a(10);n.exports=new i("tag:yaml.org,2002:map",{kind:"mapping",construct:function(o){return o!==null?o:{}}})},function(n,r,a){var i=a(10);n.exports=new i("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(o){if(o===null)return!0;var s=o.length;return s===1&&o==="~"||s===4&&(o==="null"||o==="Null"||o==="NULL")},construct:function(){return null},predicate:function(o){return o===null},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"})},function(n,r,a){var i=a(10);n.exports=new i("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(o){if(o===null)return!1;var s=o.length;return s===4&&(o==="true"||o==="True"||o==="TRUE")||s===5&&(o==="false"||o==="False"||o==="FALSE")},construct:function(o){return o==="true"||o==="True"||o==="TRUE"},predicate:function(o){return Object.prototype.toString.call(o)==="[object Boolean]"},represent:{lowercase:function(o){return o?"true":"false"},uppercase:function(o){return o?"TRUE":"FALSE"},camelcase:function(o){return o?"True":"False"}},defaultStyle:"lowercase"})},function(n,r,a){var i=a(38),o=a(10);function s(l){return 48<=l&&l<=55}function c(l){return 48<=l&&l<=57}n.exports=new o("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(l){if(l===null)return!1;var u,f,v=l.length,g=0,d=!1;if(!v)return!1;if((u=l[g])!=="-"&&u!=="+"||(u=l[++g]),u==="0"){if(g+1===v)return!0;if((u=l[++g])==="b"){for(g++;g<v;g++)if((u=l[g])!=="_"){if(u!=="0"&&u!=="1")return!1;d=!0}return d&&u!=="_"}if(u==="x"){for(g++;g<v;g++)if((u=l[g])!=="_"){if(!(48<=(f=l.charCodeAt(g))&&f<=57||65<=f&&f<=70||97<=f&&f<=102))return!1;d=!0}return d&&u!=="_"}for(;g<v;g++)if((u=l[g])!=="_"){if(!s(l.charCodeAt(g)))return!1;d=!0}return d&&u!=="_"}if(u==="_")return!1;for(;g<v;g++)if((u=l[g])!=="_"){if(u===":")break;if(!c(l.charCodeAt(g)))return!1;d=!0}return!(!d||u==="_")&&(u!==":"||/^(:[0-5]?[0-9])+$/.test(l.slice(g)))},construct:function(l){var u,f,v=l,g=1,d=[];return v.indexOf("_")!==-1&&(v=v.replace(/_/g,"")),(u=v[0])!=="-"&&u!=="+"||(u==="-"&&(g=-1),u=(v=v.slice(1))[0]),v==="0"?0:u==="0"?v[1]==="b"?g*parseInt(v.slice(2),2):v[1]==="x"?g*parseInt(v,16):g*parseInt(v,8):v.indexOf(":")!==-1?(v.split(":").forEach(function(m){d.unshift(parseInt(m,10))}),v=0,f=1,d.forEach(function(m){v+=m*f,f*=60}),g*v):g*parseInt(v,10)},predicate:function(l){return Object.prototype.toString.call(l)==="[object Number]"&&l%1==0&&!i.isNegativeZero(l)},represent:{binary:function(l){return l>=0?"0b"+l.toString(2):"-0b"+l.toString(2).slice(1)},octal:function(l){return l>=0?"0"+l.toString(8):"-0"+l.toString(8).slice(1)},decimal:function(l){return l.toString(10)},hexadecimal:function(l){return l>=0?"0x"+l.toString(16).toUpperCase():"-0x"+l.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}})},function(n,r,a){var i=a(38),o=a(10),s=new RegExp("^(?:[-+]?(?:0|[1-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),c=/^[-+]?[0-9]+e/;n.exports=new o("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(l){return l!==null&&!(!s.test(l)||l[l.length-1]==="_")},construct:function(l){var u,f,v,g;return f=(u=l.replace(/_/g,"").toLowerCase())[0]==="-"?-1:1,g=[],"+-".indexOf(u[0])>=0&&(u=u.slice(1)),u===".inf"?f===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:u===".nan"?NaN:u.indexOf(":")>=0?(u.split(":").forEach(function(d){g.unshift(parseFloat(d,10))}),u=0,v=1,g.forEach(function(d){u+=d*v,v*=60}),f*u):f*parseFloat(u,10)},predicate:function(l){return Object.prototype.toString.call(l)==="[object Number]"&&(l%1!=0||i.isNegativeZero(l))},represent:function(l,u){var f;if(isNaN(l))switch(u){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===l)switch(u){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===l)switch(u){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(i.isNegativeZero(l))return"-0.0";return f=l.toString(10),c.test(f)?f.replace("e",".e"):f},defaultStyle:"lowercase"})},function(n,r,a){var i=a(10),o=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),s=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");n.exports=new i("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(c){return c!==null&&(o.exec(c)!==null||s.exec(c)!==null)},construct:function(c){var l,u,f,v,g,d,m,h,C=0,p=null;if((l=o.exec(c))===null&&(l=s.exec(c)),l===null)throw new Error("Date resolve error");if(u=+l[1],f=+l[2]-1,v=+l[3],!l[4])return new Date(Date.UTC(u,f,v));if(g=+l[4],d=+l[5],m=+l[6],l[7]){for(C=l[7].slice(0,3);C.length<3;)C+="0";C=+C}return l[9]&&(p=6e4*(60*+l[10]+ +(l[11]||0)),l[9]==="-"&&(p=-p)),h=new Date(Date.UTC(u,f,v,g,d,m,C)),p&&h.setTime(h.getTime()-p),h},instanceOf:Date,represent:function(c){return c.toISOString()}})},function(n,r,a){var i=a(10);n.exports=new i("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(o){return o==="<<"||o===null}})},function(n,r,a){var i;try{i=a(145).Buffer}catch{}var o=a(10),s=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;n.exports=new o("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(c){if(c===null)return!1;var l,u,f=0,v=c.length,g=s;for(u=0;u<v;u++)if(!((l=g.indexOf(c.charAt(u)))>64)){if(l<0)return!1;f+=6}return f%8==0},construct:function(c){var l,u,f=c.replace(/[\r\n=]/g,""),v=f.length,g=s,d=0,m=[];for(l=0;l<v;l++)l%4==0&&l&&(m.push(d>>16&255),m.push(d>>8&255),m.push(255&d)),d=d<<6|g.indexOf(f.charAt(l));return(u=v%4*6)===0?(m.push(d>>16&255),m.push(d>>8&255),m.push(255&d)):u===18?(m.push(d>>10&255),m.push(d>>2&255)):u===12&&m.push(d>>4&255),i?i.from?i.from(m):new i(m):m},predicate:function(c){return i&&i.isBuffer(c)},represent:function(c){var l,u,f="",v=0,g=c.length,d=s;for(l=0;l<g;l++)l%3==0&&l&&(f+=d[v>>18&63],f+=d[v>>12&63],f+=d[v>>6&63],f+=d[63&v]),v=(v<<8)+c[l];return(u=g%3)===0?(f+=d[v>>18&63],f+=d[v>>12&63],f+=d[v>>6&63],f+=d[63&v]):u===2?(f+=d[v>>10&63],f+=d[v>>4&63],f+=d[v<<2&63],f+=d[64]):u===1&&(f+=d[v>>2&63],f+=d[v<<4&63],f+=d[64],f+=d[64]),f}})},function(n,r,a){var i=a(10),o=Object.prototype.hasOwnProperty,s=Object.prototype.toString;n.exports=new i("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(c){if(c===null)return!0;var l,u,f,v,g,d=[],m=c;for(l=0,u=m.length;l<u;l+=1){if(f=m[l],g=!1,s.call(f)!=="[object Object]")return!1;for(v in f)if(o.call(f,v)){if(g)return!1;g=!0}if(!g||d.indexOf(v)!==-1)return!1;d.push(v)}return!0},construct:function(c){return c!==null?c:[]}})},function(n,r,a){var i=a(10),o=Object.prototype.toString;n.exports=new i("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(s){if(s===null)return!0;var c,l,u,f,v,g=s;for(v=new Array(g.length),c=0,l=g.length;c<l;c+=1){if(u=g[c],o.call(u)!=="[object Object]"||(f=Object.keys(u)).length!==1)return!1;v[c]=[f[0],u[f[0]]]}return!0},construct:function(s){if(s===null)return[];var c,l,u,f,v,g=s;for(v=new Array(g.length),c=0,l=g.length;c<l;c+=1)u=g[c],f=Object.keys(u),v[c]=[f[0],u[f[0]]];return v}})},function(n,r,a){var i=a(10),o=Object.prototype.hasOwnProperty;n.exports=new i("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(s){if(s===null)return!0;var c,l=s;for(c in l)if(o.call(l,c)&&l[c]!==null)return!1;return!0},construct:function(s){return s!==null?s:{}}})},function(n,r,a){var i=a(10);n.exports=new i("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:function(){return!0},construct:function(){},predicate:function(o){return o===void 0},represent:function(){return""}})},function(n,r,a){var i=a(10);n.exports=new i("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:function(o){if(o===null||o.length===0)return!1;var s=o,c=/\/([gim]*)$/.exec(o),l="";return!(s[0]==="/"&&(c&&(l=c[1]),l.length>3||s[s.length-l.length-1]!=="/"))},construct:function(o){var s=o,c=/\/([gim]*)$/.exec(o),l="";return s[0]==="/"&&(c&&(l=c[1]),s=s.slice(1,s.length-l.length-1)),new RegExp(s,l)},predicate:function(o){return Object.prototype.toString.call(o)==="[object RegExp]"},represent:function(o){var s="/"+o.source+"/";return o.global&&(s+="g"),o.multiline&&(s+="m"),o.ignoreCase&&(s+="i"),s}})},function(n,r,a){var i;try{i=a(302)}catch{typeof window<"u"&&(i=window.esprima)}var o=a(10);n.exports=new o("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:function(s){if(s===null)return!1;try{var c="("+s+")",l=i.parse(c,{range:!0});return l.type==="Program"&&l.body.length===1&&l.body[0].type==="ExpressionStatement"&&(l.body[0].expression.type==="ArrowFunctionExpression"||l.body[0].expression.type==="FunctionExpression")}catch{return!1}},construct:function(s){var c,l="("+s+")",u=i.parse(l,{range:!0}),f=[];if(u.type!=="Program"||u.body.length!==1||u.body[0].type!=="ExpressionStatement"||u.body[0].expression.type!=="ArrowFunctionExpression"&&u.body[0].expression.type!=="FunctionExpression")throw new Error("Failed to resolve function");return u.body[0].expression.params.forEach(function(v){f.push(v.name)}),c=u.body[0].expression.body.range,u.body[0].expression.body.type==="BlockStatement"?new Function(f,l.slice(c[0]+1,c[1]-1)):new Function(f,"return "+l.slice(c[0],c[1]))},predicate:function(s){return Object.prototype.toString.call(s)==="[object Function]"},represent:function(s){return s.toString()}})},function(n,r,a){var i;i=function(){return function(o){var s={};function c(l){if(s[l])return s[l].exports;var u=s[l]={exports:{},id:l,loaded:!1};return o[l].call(u.exports,u,u.exports,c),u.loaded=!0,u.exports}return c.m=o,c.c=s,c.p="",c(0)}([function(o,s,c){Object.defineProperty(s,"__esModule",{value:!0});var l=c(1),u=c(3),f=c(8),v=c(15);function g(m,h,C){var p=null,S=function(_,O){C&&C(_,O),p&&p.visit(_,O)},I=typeof C=="function"?S:null,D=!1;if(h){D=typeof h.comment=="boolean"&&h.comment;var E=typeof h.attachComment=="boolean"&&h.attachComment;(D||E)&&((p=new l.CommentHandler).attach=E,h.comment=!0,I=S)}var T,y=!1;h&&typeof h.sourceType=="string"&&(y=h.sourceType==="module"),T=h&&typeof h.jsx=="boolean"&&h.jsx?new u.JSXParser(m,h,I):new f.Parser(m,h,I);var M=y?T.parseModule():T.parseScript();return D&&p&&(M.comments=p.comments),T.config.tokens&&(M.tokens=T.tokens),T.config.tolerant&&(M.errors=T.errorHandler.errors),M}s.parse=g,s.parseModule=function(m,h,C){var p=h||{};return p.sourceType="module",g(m,p,C)},s.parseScript=function(m,h,C){var p=h||{};return p.sourceType="script",g(m,p,C)},s.tokenize=function(m,h,C){var p,S=new v.Tokenizer(m,h);p=[];try{for(;;){var I=S.getNextToken();if(!I)break;C&&(I=C(I)),p.push(I)}}catch(D){S.errorHandler.tolerate(D)}return S.errorHandler.tolerant&&(p.errors=S.errors()),p};var d=c(2);s.Syntax=d.Syntax,s.version="4.0.1"},function(o,s,c){Object.defineProperty(s,"__esModule",{value:!0});var l=c(2),u=function(){function f(){this.attach=!1,this.comments=[],this.stack=[],this.leading=[],this.trailing=[]}return f.prototype.insertInnerComments=function(v,g){if(v.type===l.Syntax.BlockStatement&&v.body.length===0){for(var d=[],m=this.leading.length-1;m>=0;--m){var h=this.leading[m];g.end.offset>=h.start&&(d.unshift(h.comment),this.leading.splice(m,1),this.trailing.splice(m,1))}d.length&&(v.innerComments=d)}},f.prototype.findTrailingComments=function(v){var g=[];if(this.trailing.length>0){for(var d=this.trailing.length-1;d>=0;--d){var m=this.trailing[d];m.start>=v.end.offset&&g.unshift(m.comment)}return this.trailing.length=0,g}var h=this.stack[this.stack.length-1];if(h&&h.node.trailingComments){var C=h.node.trailingComments[0];C&&C.range[0]>=v.end.offset&&(g=h.node.trailingComments,delete h.node.trailingComments)}return g},f.prototype.findLeadingComments=function(v){for(var g,d=[];this.stack.length>0&&(C=this.stack[this.stack.length-1])&&C.start>=v.start.offset;)g=C.node,this.stack.pop();if(g){for(var m=(g.leadingComments?g.leadingComments.length:0)-1;m>=0;--m){var h=g.leadingComments[m];h.range[1]<=v.start.offset&&(d.unshift(h),g.leadingComments.splice(m,1))}return g.leadingComments&&g.leadingComments.length===0&&delete g.leadingComments,d}for(m=this.leading.length-1;m>=0;--m){var C;(C=this.leading[m]).start<=v.start.offset&&(d.unshift(C.comment),this.leading.splice(m,1))}return d},f.prototype.visitNode=function(v,g){if(!(v.type===l.Syntax.Program&&v.body.length>0)){this.insertInnerComments(v,g);var d=this.findTrailingComments(g),m=this.findLeadingComments(g);m.length>0&&(v.leadingComments=m),d.length>0&&(v.trailingComments=d),this.stack.push({node:v,start:g.start.offset})}},f.prototype.visitComment=function(v,g){var d=v.type[0]==="L"?"Line":"Block",m={type:d,value:v.value};if(v.range&&(m.range=v.range),v.loc&&(m.loc=v.loc),this.comments.push(m),this.attach){var h={comment:{type:d,value:v.value,range:[g.start.offset,g.end.offset]},start:g.start.offset};v.loc&&(h.comment.loc=v.loc),v.type=d,this.leading.push(h),this.trailing.push(h)}},f.prototype.visit=function(v,g){v.type==="LineComment"||v.type==="BlockComment"?this.visitComment(v,g):this.attach&&this.visitNode(v,g)},f}();s.CommentHandler=u},function(o,s){Object.defineProperty(s,"__esModule",{value:!0}),s.Syntax={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForOfStatement:"ForOfStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchCase:"SwitchCase",SwitchStatement:"SwitchStatement",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"}},function(o,s,c){var l,u=this&&this.__extends||(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,D){I.__proto__=D}||function(I,D){for(var E in D)D.hasOwnProperty(E)&&(I[E]=D[E])},function(I,D){function E(){this.constructor=I}l(I,D),I.prototype=D===null?Object.create(D):(E.prototype=D.prototype,new E)});Object.defineProperty(s,"__esModule",{value:!0});var f=c(4),v=c(5),g=c(6),d=c(7),m=c(8),h=c(13),C=c(14);function p(I){var D;switch(I.type){case g.JSXSyntax.JSXIdentifier:D=I.name;break;case g.JSXSyntax.JSXNamespacedName:var E=I;D=p(E.namespace)+":"+p(E.name);break;case g.JSXSyntax.JSXMemberExpression:var T=I;D=p(T.object)+"."+p(T.property)}return D}h.TokenName[100]="JSXIdentifier",h.TokenName[101]="JSXText";var S=function(I){function D(E,T,y){return I.call(this,E,T,y)||this}return u(D,I),D.prototype.parsePrimaryExpression=function(){return this.match("<")?this.parseJSXRoot():I.prototype.parsePrimaryExpression.call(this)},D.prototype.startJSX=function(){this.scanner.index=this.startMarker.index,this.scanner.lineNumber=this.startMarker.line,this.scanner.lineStart=this.startMarker.index-this.startMarker.column},D.prototype.finishJSX=function(){this.nextToken()},D.prototype.reenterJSX=function(){this.startJSX(),this.expectJSX("}"),this.config.tokens&&this.tokens.pop()},D.prototype.createJSXNode=function(){return this.collectComments(),{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},D.prototype.createJSXChildNode=function(){return{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},D.prototype.scanXHTMLEntity=function(E){for(var T="&",y=!0,M=!1,_=!1,O=!1;!this.scanner.eof()&&y&&!M;){var w=this.scanner.source[this.scanner.index];if(w===E)break;if(M=w===";",T+=w,++this.scanner.index,!M)switch(T.length){case 2:_=w==="#";break;case 3:_&&(y=(O=w==="x")||f.Character.isDecimalDigit(w.charCodeAt(0)),_=_&&!O);break;default:y=(y=y&&!(_&&!f.Character.isDecimalDigit(w.charCodeAt(0))))&&!(O&&!f.Character.isHexDigit(w.charCodeAt(0)))}}if(y&&M&&T.length>2){var x=T.substr(1,T.length-2);_&&x.length>1?T=String.fromCharCode(parseInt(x.substr(1),10)):O&&x.length>2?T=String.fromCharCode(parseInt("0"+x.substr(1),16)):_||O||!C.XHTMLEntities[x]||(T=C.XHTMLEntities[x])}return T},D.prototype.lexJSX=function(){var E=this.scanner.source.charCodeAt(this.scanner.index);if(E===60||E===62||E===47||E===58||E===61||E===123||E===125)return{type:7,value:w=this.scanner.source[this.scanner.index++],lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index-1,end:this.scanner.index};if(E===34||E===39){for(var T=this.scanner.index,y=this.scanner.source[this.scanner.index++],M="";!this.scanner.eof()&&(x=this.scanner.source[this.scanner.index++])!==y;)M+=x==="&"?this.scanXHTMLEntity(y):x;return{type:8,value:M,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:T,end:this.scanner.index}}if(E===46){var _=this.scanner.source.charCodeAt(this.scanner.index+1),O=this.scanner.source.charCodeAt(this.scanner.index+2),w=_===46&&O===46?"...":".";return T=this.scanner.index,this.scanner.index+=w.length,{type:7,value:w,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:T,end:this.scanner.index}}if(E===96)return{type:10,value:"",lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index,end:this.scanner.index};if(f.Character.isIdentifierStart(E)&&E!==92){for(T=this.scanner.index,++this.scanner.index;!this.scanner.eof();){var x=this.scanner.source.charCodeAt(this.scanner.index);if(f.Character.isIdentifierPart(x)&&x!==92)++this.scanner.index;else{if(x!==45)break;++this.scanner.index}}return{type:100,value:this.scanner.source.slice(T,this.scanner.index),lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:T,end:this.scanner.index}}return this.scanner.lex()},D.prototype.nextJSXToken=function(){this.collectComments(),this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;var E=this.lexJSX();return this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.config.tokens&&this.tokens.push(this.convertToken(E)),E},D.prototype.nextJSXText=function(){this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;for(var E=this.scanner.index,T="";!this.scanner.eof();){var y=this.scanner.source[this.scanner.index];if(y==="{"||y==="<")break;++this.scanner.index,T+=y,f.Character.isLineTerminator(y.charCodeAt(0))&&(++this.scanner.lineNumber,y==="\r"&&this.scanner.source[this.scanner.index]===`
`&&++this.scanner.index,this.scanner.lineStart=this.scanner.index)}this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart;var M={type:101,value:T,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:E,end:this.scanner.index};return T.length>0&&this.config.tokens&&this.tokens.push(this.convertToken(M)),M},D.prototype.peekJSXToken=function(){var E=this.scanner.saveState();this.scanner.scanComments();var T=this.lexJSX();return this.scanner.restoreState(E),T},D.prototype.expectJSX=function(E){var T=this.nextJSXToken();T.type===7&&T.value===E||this.throwUnexpectedToken(T)},D.prototype.matchJSX=function(E){var T=this.peekJSXToken();return T.type===7&&T.value===E},D.prototype.parseJSXIdentifier=function(){var E=this.createJSXNode(),T=this.nextJSXToken();return T.type!==100&&this.throwUnexpectedToken(T),this.finalize(E,new v.JSXIdentifier(T.value))},D.prototype.parseJSXElementName=function(){var E=this.createJSXNode(),T=this.parseJSXIdentifier();if(this.matchJSX(":")){var y=T;this.expectJSX(":");var M=this.parseJSXIdentifier();T=this.finalize(E,new v.JSXNamespacedName(y,M))}else if(this.matchJSX("."))for(;this.matchJSX(".");){var _=T;this.expectJSX(".");var O=this.parseJSXIdentifier();T=this.finalize(E,new v.JSXMemberExpression(_,O))}return T},D.prototype.parseJSXAttributeName=function(){var E,T=this.createJSXNode(),y=this.parseJSXIdentifier();if(this.matchJSX(":")){var M=y;this.expectJSX(":");var _=this.parseJSXIdentifier();E=this.finalize(T,new v.JSXNamespacedName(M,_))}else E=y;return E},D.prototype.parseJSXStringLiteralAttribute=function(){var E=this.createJSXNode(),T=this.nextJSXToken();T.type!==8&&this.throwUnexpectedToken(T);var y=this.getTokenRaw(T);return this.finalize(E,new d.Literal(T.value,y))},D.prototype.parseJSXExpressionAttribute=function(){var E=this.createJSXNode();this.expectJSX("{"),this.finishJSX(),this.match("}")&&this.tolerateError("JSX attributes must only be assigned a non-empty expression");var T=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(E,new v.JSXExpressionContainer(T))},D.prototype.parseJSXAttributeValue=function(){return this.matchJSX("{")?this.parseJSXExpressionAttribute():this.matchJSX("<")?this.parseJSXElement():this.parseJSXStringLiteralAttribute()},D.prototype.parseJSXNameValueAttribute=function(){var E=this.createJSXNode(),T=this.parseJSXAttributeName(),y=null;return this.matchJSX("=")&&(this.expectJSX("="),y=this.parseJSXAttributeValue()),this.finalize(E,new v.JSXAttribute(T,y))},D.prototype.parseJSXSpreadAttribute=function(){var E=this.createJSXNode();this.expectJSX("{"),this.expectJSX("..."),this.finishJSX();var T=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(E,new v.JSXSpreadAttribute(T))},D.prototype.parseJSXAttributes=function(){for(var E=[];!this.matchJSX("/")&&!this.matchJSX(">");){var T=this.matchJSX("{")?this.parseJSXSpreadAttribute():this.parseJSXNameValueAttribute();E.push(T)}return E},D.prototype.parseJSXOpeningElement=function(){var E=this.createJSXNode();this.expectJSX("<");var T=this.parseJSXElementName(),y=this.parseJSXAttributes(),M=this.matchJSX("/");return M&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(E,new v.JSXOpeningElement(T,M,y))},D.prototype.parseJSXBoundaryElement=function(){var E=this.createJSXNode();if(this.expectJSX("<"),this.matchJSX("/")){this.expectJSX("/");var T=this.parseJSXElementName();return this.expectJSX(">"),this.finalize(E,new v.JSXClosingElement(T))}var y=this.parseJSXElementName(),M=this.parseJSXAttributes(),_=this.matchJSX("/");return _&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(E,new v.JSXOpeningElement(y,_,M))},D.prototype.parseJSXEmptyExpression=function(){var E=this.createJSXChildNode();return this.collectComments(),this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.finalize(E,new v.JSXEmptyExpression)},D.prototype.parseJSXExpressionContainer=function(){var E,T=this.createJSXNode();return this.expectJSX("{"),this.matchJSX("}")?(E=this.parseJSXEmptyExpression(),this.expectJSX("}")):(this.finishJSX(),E=this.parseAssignmentExpression(),this.reenterJSX()),this.finalize(T,new v.JSXExpressionContainer(E))},D.prototype.parseJSXChildren=function(){for(var E=[];!this.scanner.eof();){var T=this.createJSXChildNode(),y=this.nextJSXText();if(y.start<y.end){var M=this.getTokenRaw(y),_=this.finalize(T,new v.JSXText(y.value,M));E.push(_)}if(this.scanner.source[this.scanner.index]!=="{")break;var O=this.parseJSXExpressionContainer();E.push(O)}return E},D.prototype.parseComplexJSXElement=function(E){for(var T=[];!this.scanner.eof();){E.children=E.children.concat(this.parseJSXChildren());var y=this.createJSXChildNode(),M=this.parseJSXBoundaryElement();if(M.type===g.JSXSyntax.JSXOpeningElement){var _=M;if(_.selfClosing){var O=this.finalize(y,new v.JSXElement(_,[],null));E.children.push(O)}else T.push(E),E={node:y,opening:_,closing:null,children:[]}}if(M.type===g.JSXSyntax.JSXClosingElement){E.closing=M;var w=p(E.opening.name);if(w!==p(E.closing.name)&&this.tolerateError("Expected corresponding JSX closing tag for %0",w),!(T.length>0))break;O=this.finalize(E.node,new v.JSXElement(E.opening,E.children,E.closing)),(E=T[T.length-1]).children.push(O),T.pop()}}return E},D.prototype.parseJSXElement=function(){var E=this.createJSXNode(),T=this.parseJSXOpeningElement(),y=[],M=null;if(!T.selfClosing){var _=this.parseComplexJSXElement({node:E,opening:T,closing:M,children:y});y=_.children,M=_.closing}return this.finalize(E,new v.JSXElement(T,y,M))},D.prototype.parseJSXRoot=function(){this.config.tokens&&this.tokens.pop(),this.startJSX();var E=this.parseJSXElement();return this.finishJSX(),E},D.prototype.isStartOfExpression=function(){return I.prototype.isStartOfExpression.call(this)||this.match("<")},D}(m.Parser);s.JSXParser=S},function(o,s){Object.defineProperty(s,"__esModule",{value:!0});var c={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/};s.Character={fromCodePoint:function(l){return l<65536?String.fromCharCode(l):String.fromCharCode(55296+(l-65536>>10))+String.fromCharCode(56320+(l-65536&1023))},isWhiteSpace:function(l){return l===32||l===9||l===11||l===12||l===160||l>=5760&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(l)>=0},isLineTerminator:function(l){return l===10||l===13||l===8232||l===8233},isIdentifierStart:function(l){return l===36||l===95||l>=65&&l<=90||l>=97&&l<=122||l===92||l>=128&&c.NonAsciiIdentifierStart.test(s.Character.fromCodePoint(l))},isIdentifierPart:function(l){return l===36||l===95||l>=65&&l<=90||l>=97&&l<=122||l>=48&&l<=57||l===92||l>=128&&c.NonAsciiIdentifierPart.test(s.Character.fromCodePoint(l))},isDecimalDigit:function(l){return l>=48&&l<=57},isHexDigit:function(l){return l>=48&&l<=57||l>=65&&l<=70||l>=97&&l<=102},isOctalDigit:function(l){return l>=48&&l<=55}}},function(o,s,c){Object.defineProperty(s,"__esModule",{value:!0});var l=c(6),u=function(D){this.type=l.JSXSyntax.JSXClosingElement,this.name=D};s.JSXClosingElement=u;var f=function(D,E,T){this.type=l.JSXSyntax.JSXElement,this.openingElement=D,this.children=E,this.closingElement=T};s.JSXElement=f;var v=function(){this.type=l.JSXSyntax.JSXEmptyExpression};s.JSXEmptyExpression=v;var g=function(D){this.type=l.JSXSyntax.JSXExpressionContainer,this.expression=D};s.JSXExpressionContainer=g;var d=function(D){this.type=l.JSXSyntax.JSXIdentifier,this.name=D};s.JSXIdentifier=d;var m=function(D,E){this.type=l.JSXSyntax.JSXMemberExpression,this.object=D,this.property=E};s.JSXMemberExpression=m;var h=function(D,E){this.type=l.JSXSyntax.JSXAttribute,this.name=D,this.value=E};s.JSXAttribute=h;var C=function(D,E){this.type=l.JSXSyntax.JSXNamespacedName,this.namespace=D,this.name=E};s.JSXNamespacedName=C;var p=function(D,E,T){this.type=l.JSXSyntax.JSXOpeningElement,this.name=D,this.selfClosing=E,this.attributes=T};s.JSXOpeningElement=p;var S=function(D){this.type=l.JSXSyntax.JSXSpreadAttribute,this.argument=D};s.JSXSpreadAttribute=S;var I=function(D,E){this.type=l.JSXSyntax.JSXText,this.value=D,this.raw=E};s.JSXText=I},function(o,s){Object.defineProperty(s,"__esModule",{value:!0}),s.JSXSyntax={JSXAttribute:"JSXAttribute",JSXClosingElement:"JSXClosingElement",JSXElement:"JSXElement",JSXEmptyExpression:"JSXEmptyExpression",JSXExpressionContainer:"JSXExpressionContainer",JSXIdentifier:"JSXIdentifier",JSXMemberExpression:"JSXMemberExpression",JSXNamespacedName:"JSXNamespacedName",JSXOpeningElement:"JSXOpeningElement",JSXSpreadAttribute:"JSXSpreadAttribute",JSXText:"JSXText"}},function(o,s,c){Object.defineProperty(s,"__esModule",{value:!0});var l=c(2),u=function(Qe){this.type=l.Syntax.ArrayExpression,this.elements=Qe};s.ArrayExpression=u;var f=function(Qe){this.type=l.Syntax.ArrayPattern,this.elements=Qe};s.ArrayPattern=f;var v=function(Qe,Et,$t){this.type=l.Syntax.ArrowFunctionExpression,this.id=null,this.params=Qe,this.body=Et,this.generator=!1,this.expression=$t,this.async=!1};s.ArrowFunctionExpression=v;var g=function(Qe,Et,$t){this.type=l.Syntax.AssignmentExpression,this.operator=Qe,this.left=Et,this.right=$t};s.AssignmentExpression=g;var d=function(Qe,Et){this.type=l.Syntax.AssignmentPattern,this.left=Qe,this.right=Et};s.AssignmentPattern=d;var m=function(Qe,Et,$t){this.type=l.Syntax.ArrowFunctionExpression,this.id=null,this.params=Qe,this.body=Et,this.generator=!1,this.expression=$t,this.async=!0};s.AsyncArrowFunctionExpression=m;var h=function(Qe,Et,$t){this.type=l.Syntax.FunctionDeclaration,this.id=Qe,this.params=Et,this.body=$t,this.generator=!1,this.expression=!1,this.async=!0};s.AsyncFunctionDeclaration=h;var C=function(Qe,Et,$t){this.type=l.Syntax.FunctionExpression,this.id=Qe,this.params=Et,this.body=$t,this.generator=!1,this.expression=!1,this.async=!0};s.AsyncFunctionExpression=C;var p=function(Qe){this.type=l.Syntax.AwaitExpression,this.argument=Qe};s.AwaitExpression=p;var S=function(Qe,Et,$t){var Fn=Qe==="||"||Qe==="&&";this.type=Fn?l.Syntax.LogicalExpression:l.Syntax.BinaryExpression,this.operator=Qe,this.left=Et,this.right=$t};s.BinaryExpression=S;var I=function(Qe){this.type=l.Syntax.BlockStatement,this.body=Qe};s.BlockStatement=I;var D=function(Qe){this.type=l.Syntax.BreakStatement,this.label=Qe};s.BreakStatement=D;var E=function(Qe,Et){this.type=l.Syntax.CallExpression,this.callee=Qe,this.arguments=Et};s.CallExpression=E;var T=function(Qe,Et){this.type=l.Syntax.CatchClause,this.param=Qe,this.body=Et};s.CatchClause=T;var y=function(Qe){this.type=l.Syntax.ClassBody,this.body=Qe};s.ClassBody=y;var M=function(Qe,Et,$t){this.type=l.Syntax.ClassDeclaration,this.id=Qe,this.superClass=Et,this.body=$t};s.ClassDeclaration=M;var _=function(Qe,Et,$t){this.type=l.Syntax.ClassExpression,this.id=Qe,this.superClass=Et,this.body=$t};s.ClassExpression=_;var O=function(Qe,Et){this.type=l.Syntax.MemberExpression,this.computed=!0,this.object=Qe,this.property=Et};s.ComputedMemberExpression=O;var w=function(Qe,Et,$t){this.type=l.Syntax.ConditionalExpression,this.test=Qe,this.consequent=Et,this.alternate=$t};s.ConditionalExpression=w;var x=function(Qe){this.type=l.Syntax.ContinueStatement,this.label=Qe};s.ContinueStatement=x;var P=function(){this.type=l.Syntax.DebuggerStatement};s.DebuggerStatement=P;var R=function(Qe,Et){this.type=l.Syntax.ExpressionStatement,this.expression=Qe,this.directive=Et};s.Directive=R;var L=function(Qe,Et){this.type=l.Syntax.DoWhileStatement,this.body=Qe,this.test=Et};s.DoWhileStatement=L;var H=function(){this.type=l.Syntax.EmptyStatement};s.EmptyStatement=H;var F=function(Qe){this.type=l.Syntax.ExportAllDeclaration,this.source=Qe};s.ExportAllDeclaration=F;var U=function(Qe){this.type=l.Syntax.ExportDefaultDeclaration,this.declaration=Qe};s.ExportDefaultDeclaration=U;var V=function(Qe,Et,$t){this.type=l.Syntax.ExportNamedDeclaration,this.declaration=Qe,this.specifiers=Et,this.source=$t};s.ExportNamedDeclaration=V;var X=function(Qe,Et){this.type=l.Syntax.ExportSpecifier,this.exported=Et,this.local=Qe};s.ExportSpecifier=X;var re=function(Qe){this.type=l.Syntax.ExpressionStatement,this.expression=Qe};s.ExpressionStatement=re;var ue=function(Qe,Et,$t){this.type=l.Syntax.ForInStatement,this.left=Qe,this.right=Et,this.body=$t,this.each=!1};s.ForInStatement=ue;var De=function(Qe,Et,$t){this.type=l.Syntax.ForOfStatement,this.left=Qe,this.right=Et,this.body=$t};s.ForOfStatement=De;var pe=function(Qe,Et,$t,Fn){this.type=l.Syntax.ForStatement,this.init=Qe,this.test=Et,this.update=$t,this.body=Fn};s.ForStatement=pe;var Te=function(Qe,Et,$t,Fn){this.type=l.Syntax.FunctionDeclaration,this.id=Qe,this.params=Et,this.body=$t,this.generator=Fn,this.expression=!1,this.async=!1};s.FunctionDeclaration=Te;var Fe=function(Qe,Et,$t,Fn){this.type=l.Syntax.FunctionExpression,this.id=Qe,this.params=Et,this.body=$t,this.generator=Fn,this.expression=!1,this.async=!1};s.FunctionExpression=Fe;var Ne=function(Qe){this.type=l.Syntax.Identifier,this.name=Qe};s.Identifier=Ne;var Re=function(Qe,Et,$t){this.type=l.Syntax.IfStatement,this.test=Qe,this.consequent=Et,this.alternate=$t};s.IfStatement=Re;var k=function(Qe,Et){this.type=l.Syntax.ImportDeclaration,this.specifiers=Qe,this.source=Et};s.ImportDeclaration=k;var A=function(Qe){this.type=l.Syntax.ImportDefaultSpecifier,this.local=Qe};s.ImportDefaultSpecifier=A;var b=function(Qe){this.type=l.Syntax.ImportNamespaceSpecifier,this.local=Qe};s.ImportNamespaceSpecifier=b;var N=function(Qe,Et){this.type=l.Syntax.ImportSpecifier,this.local=Qe,this.imported=Et};s.ImportSpecifier=N;var W=function(Qe,Et){this.type=l.Syntax.LabeledStatement,this.label=Qe,this.body=Et};s.LabeledStatement=W;var j=function(Qe,Et){this.type=l.Syntax.Literal,this.value=Qe,this.raw=Et};s.Literal=j;var K=function(Qe,Et){this.type=l.Syntax.MetaProperty,this.meta=Qe,this.property=Et};s.MetaProperty=K;var ge=function(Qe,Et,$t,Fn,Rr){this.type=l.Syntax.MethodDefinition,this.key=Qe,this.computed=Et,this.value=$t,this.kind=Fn,this.static=Rr};s.MethodDefinition=ge;var ye=function(Qe){this.type=l.Syntax.Program,this.body=Qe,this.sourceType="module"};s.Module=ye;var we=function(Qe,Et){this.type=l.Syntax.NewExpression,this.callee=Qe,this.arguments=Et};s.NewExpression=we;var be=function(Qe){this.type=l.Syntax.ObjectExpression,this.properties=Qe};s.ObjectExpression=be;var Z=function(Qe){this.type=l.Syntax.ObjectPattern,this.properties=Qe};s.ObjectPattern=Z;var ie=function(Qe,Et,$t,Fn,Rr,Kt){this.type=l.Syntax.Property,this.key=Et,this.computed=$t,this.value=Fn,this.kind=Qe,this.method=Rr,this.shorthand=Kt};s.Property=ie;var he=function(Qe,Et,$t,Fn){this.type=l.Syntax.Literal,this.value=Qe,this.raw=Et,this.regex={pattern:$t,flags:Fn}};s.RegexLiteral=he;var se=function(Qe){this.type=l.Syntax.RestElement,this.argument=Qe};s.RestElement=se;var me=function(Qe){this.type=l.Syntax.ReturnStatement,this.argument=Qe};s.ReturnStatement=me;var fe=function(Qe){this.type=l.Syntax.Program,this.body=Qe,this.sourceType="script"};s.Script=fe;var q=function(Qe){this.type=l.Syntax.SequenceExpression,this.expressions=Qe};s.SequenceExpression=q;var Pe=function(Qe){this.type=l.Syntax.SpreadElement,this.argument=Qe};s.SpreadElement=Pe;var Le=function(Qe,Et){this.type=l.Syntax.MemberExpression,this.computed=!1,this.object=Qe,this.property=Et};s.StaticMemberExpression=Le;var Ue=function(){this.type=l.Syntax.Super};s.Super=Ue;var Me=function(Qe,Et){this.type=l.Syntax.SwitchCase,this.test=Qe,this.consequent=Et};s.SwitchCase=Me;var Be=function(Qe,Et){this.type=l.Syntax.SwitchStatement,this.discriminant=Qe,this.cases=Et};s.SwitchStatement=Be;var nt=function(Qe,Et){this.type=l.Syntax.TaggedTemplateExpression,this.tag=Qe,this.quasi=Et};s.TaggedTemplateExpression=nt;var Ze=function(Qe,Et){this.type=l.Syntax.TemplateElement,this.value=Qe,this.tail=Et};s.TemplateElement=Ze;var at=function(Qe,Et){this.type=l.Syntax.TemplateLiteral,this.quasis=Qe,this.expressions=Et};s.TemplateLiteral=at;var Ot=function(){this.type=l.Syntax.ThisExpression};s.ThisExpression=Ot;var Oe=function(Qe){this.type=l.Syntax.ThrowStatement,this.argument=Qe};s.ThrowStatement=Oe;var $e=function(Qe,Et,$t){this.type=l.Syntax.TryStatement,this.block=Qe,this.handler=Et,this.finalizer=$t};s.TryStatement=$e;var ht=function(Qe,Et){this.type=l.Syntax.UnaryExpression,this.operator=Qe,this.argument=Et,this.prefix=!0};s.UnaryExpression=ht;var Ut=function(Qe,Et,$t){this.type=l.Syntax.UpdateExpression,this.operator=Qe,this.argument=Et,this.prefix=$t};s.UpdateExpression=Ut;var Qt=function(Qe,Et){this.type=l.Syntax.VariableDeclaration,this.declarations=Qe,this.kind=Et};s.VariableDeclaration=Qt;var Rt=function(Qe,Et){this.type=l.Syntax.VariableDeclarator,this.id=Qe,this.init=Et};s.VariableDeclarator=Rt;var Dn=function(Qe,Et){this.type=l.Syntax.WhileStatement,this.test=Qe,this.body=Et};s.WhileStatement=Dn;var jn=function(Qe,Et){this.type=l.Syntax.WithStatement,this.object=Qe,this.body=Et};s.WithStatement=jn;var xn=function(Qe,Et){this.type=l.Syntax.YieldExpression,this.argument=Qe,this.delegate=Et};s.YieldExpression=xn},function(o,s,c){Object.defineProperty(s,"__esModule",{value:!0});var l=c(9),u=c(10),f=c(11),v=c(7),g=c(12),d=c(2),m=c(13),h=function(){function C(p,S,I){S===void 0&&(S={}),this.config={range:typeof S.range=="boolean"&&S.range,loc:typeof S.loc=="boolean"&&S.loc,source:null,tokens:typeof S.tokens=="boolean"&&S.tokens,comment:typeof S.comment=="boolean"&&S.comment,tolerant:typeof S.tolerant=="boolean"&&S.tolerant},this.config.loc&&S.source&&S.source!==null&&(this.config.source=String(S.source)),this.delegate=I,this.errorHandler=new u.ErrorHandler,this.errorHandler.tolerant=this.config.tolerant,this.scanner=new g.Scanner(p,this.errorHandler),this.scanner.trackComment=this.config.comment,this.operatorPrecedence={")":0,";":0,",":0,"=":0,"]":0,"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":11,"/":11,"%":11},this.lookahead={type:2,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0},this.hasLineTerminator=!1,this.context={isModule:!1,await:!1,allowIn:!0,allowStrictDirective:!0,allowYield:!0,firstCoverInitializedNameError:null,isAssignmentTarget:!1,isBindingElement:!1,inFunctionBody:!1,inIteration:!1,inSwitch:!1,labelSet:{},strict:!1},this.tokens=[],this.startMarker={index:0,line:this.scanner.lineNumber,column:0},this.lastMarker={index:0,line:this.scanner.lineNumber,column:0},this.nextToken(),this.lastMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}return C.prototype.throwError=function(p){for(var S=[],I=1;I<arguments.length;I++)S[I-1]=arguments[I];var D=Array.prototype.slice.call(arguments,1),E=p.replace(/%(\d)/g,function(_,O){return l.assert(O<D.length,"Message reference must be in range"),D[O]}),T=this.lastMarker.index,y=this.lastMarker.line,M=this.lastMarker.column+1;throw this.errorHandler.createError(T,y,M,E)},C.prototype.tolerateError=function(p){for(var S=[],I=1;I<arguments.length;I++)S[I-1]=arguments[I];var D=Array.prototype.slice.call(arguments,1),E=p.replace(/%(\d)/g,function(_,O){return l.assert(O<D.length,"Message reference must be in range"),D[O]}),T=this.lastMarker.index,y=this.scanner.lineNumber,M=this.lastMarker.column+1;this.errorHandler.tolerateError(T,y,M,E)},C.prototype.unexpectedTokenError=function(p,S){var I,D=S||f.Messages.UnexpectedToken;if(p?(S||(D=p.type===2?f.Messages.UnexpectedEOS:p.type===3?f.Messages.UnexpectedIdentifier:p.type===6?f.Messages.UnexpectedNumber:p.type===8?f.Messages.UnexpectedString:p.type===10?f.Messages.UnexpectedTemplate:f.Messages.UnexpectedToken,p.type===4&&(this.scanner.isFutureReservedWord(p.value)?D=f.Messages.UnexpectedReserved:this.context.strict&&this.scanner.isStrictModeReservedWord(p.value)&&(D=f.Messages.StrictReservedWord))),I=p.value):I="ILLEGAL",D=D.replace("%0",I),p&&typeof p.lineNumber=="number"){var E=p.start,T=p.lineNumber,y=this.lastMarker.index-this.lastMarker.column,M=p.start-y+1;return this.errorHandler.createError(E,T,M,D)}return E=this.lastMarker.index,T=this.lastMarker.line,M=this.lastMarker.column+1,this.errorHandler.createError(E,T,M,D)},C.prototype.throwUnexpectedToken=function(p,S){throw this.unexpectedTokenError(p,S)},C.prototype.tolerateUnexpectedToken=function(p,S){this.errorHandler.tolerate(this.unexpectedTokenError(p,S))},C.prototype.collectComments=function(){if(this.config.comment){var p=this.scanner.scanComments();if(p.length>0&&this.delegate)for(var S=0;S<p.length;++S){var I=p[S],D=void 0;D={type:I.multiLine?"BlockComment":"LineComment",value:this.scanner.source.slice(I.slice[0],I.slice[1])},this.config.range&&(D.range=I.range),this.config.loc&&(D.loc=I.loc);var E={start:{line:I.loc.start.line,column:I.loc.start.column,offset:I.range[0]},end:{line:I.loc.end.line,column:I.loc.end.column,offset:I.range[1]}};this.delegate(D,E)}}else this.scanner.scanComments()},C.prototype.getTokenRaw=function(p){return this.scanner.source.slice(p.start,p.end)},C.prototype.convertToken=function(p){var S={type:m.TokenName[p.type],value:this.getTokenRaw(p)};if(this.config.range&&(S.range=[p.start,p.end]),this.config.loc&&(S.loc={start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}),p.type===9){var I=p.pattern,D=p.flags;S.regex={pattern:I,flags:D}}return S},C.prototype.nextToken=function(){var p=this.lookahead;this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.collectComments(),this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart);var S=this.scanner.lex();return this.hasLineTerminator=p.lineNumber!==S.lineNumber,S&&this.context.strict&&S.type===3&&this.scanner.isStrictModeReservedWord(S.value)&&(S.type=4),this.lookahead=S,this.config.tokens&&S.type!==2&&this.tokens.push(this.convertToken(S)),p},C.prototype.nextRegexToken=function(){this.collectComments();var p=this.scanner.scanRegExp();return this.config.tokens&&(this.tokens.pop(),this.tokens.push(this.convertToken(p))),this.lookahead=p,this.nextToken(),p},C.prototype.createNode=function(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}},C.prototype.startNode=function(p,S){S===void 0&&(S=0);var I=p.start-p.lineStart,D=p.lineNumber;return I<0&&(I+=S,D--),{index:p.start,line:D,column:I}},C.prototype.finalize=function(p,S){if(this.config.range&&(S.range=[p.index,this.lastMarker.index]),this.config.loc&&(S.loc={start:{line:p.line,column:p.column},end:{line:this.lastMarker.line,column:this.lastMarker.column}},this.config.source&&(S.loc.source=this.config.source)),this.delegate){var I={start:{line:p.line,column:p.column,offset:p.index},end:{line:this.lastMarker.line,column:this.lastMarker.column,offset:this.lastMarker.index}};this.delegate(S,I)}return S},C.prototype.expect=function(p){var S=this.nextToken();S.type===7&&S.value===p||this.throwUnexpectedToken(S)},C.prototype.expectCommaSeparator=function(){if(this.config.tolerant){var p=this.lookahead;p.type===7&&p.value===","?this.nextToken():p.type===7&&p.value===";"?(this.nextToken(),this.tolerateUnexpectedToken(p)):this.tolerateUnexpectedToken(p,f.Messages.UnexpectedToken)}else this.expect(",")},C.prototype.expectKeyword=function(p){var S=this.nextToken();S.type===4&&S.value===p||this.throwUnexpectedToken(S)},C.prototype.match=function(p){return this.lookahead.type===7&&this.lookahead.value===p},C.prototype.matchKeyword=function(p){return this.lookahead.type===4&&this.lookahead.value===p},C.prototype.matchContextualKeyword=function(p){return this.lookahead.type===3&&this.lookahead.value===p},C.prototype.matchAssign=function(){if(this.lookahead.type!==7)return!1;var p=this.lookahead.value;return p==="="||p==="*="||p==="**="||p==="/="||p==="%="||p==="+="||p==="-="||p==="<<="||p===">>="||p===">>>="||p==="&="||p==="^="||p==="|="},C.prototype.isolateCoverGrammar=function(p){var S=this.context.isBindingElement,I=this.context.isAssignmentTarget,D=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var E=p.call(this);return this.context.firstCoverInitializedNameError!==null&&this.throwUnexpectedToken(this.context.firstCoverInitializedNameError),this.context.isBindingElement=S,this.context.isAssignmentTarget=I,this.context.firstCoverInitializedNameError=D,E},C.prototype.inheritCoverGrammar=function(p){var S=this.context.isBindingElement,I=this.context.isAssignmentTarget,D=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var E=p.call(this);return this.context.isBindingElement=this.context.isBindingElement&&S,this.context.isAssignmentTarget=this.context.isAssignmentTarget&&I,this.context.firstCoverInitializedNameError=D||this.context.firstCoverInitializedNameError,E},C.prototype.consumeSemicolon=function(){this.match(";")?this.nextToken():this.hasLineTerminator||(this.lookahead.type===2||this.match("}")||this.throwUnexpectedToken(this.lookahead),this.lastMarker.index=this.startMarker.index,this.lastMarker.line=this.startMarker.line,this.lastMarker.column=this.startMarker.column)},C.prototype.parsePrimaryExpression=function(){var p,S,I,D=this.createNode();switch(this.lookahead.type){case 3:(this.context.isModule||this.context.await)&&this.lookahead.value==="await"&&this.tolerateUnexpectedToken(this.lookahead),p=this.matchAsyncFunction()?this.parseFunctionExpression():this.finalize(D,new v.Identifier(this.nextToken().value));break;case 6:case 8:this.context.strict&&this.lookahead.octal&&this.tolerateUnexpectedToken(this.lookahead,f.Messages.StrictOctalLiteral),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,S=this.nextToken(),I=this.getTokenRaw(S),p=this.finalize(D,new v.Literal(S.value,I));break;case 1:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,S=this.nextToken(),I=this.getTokenRaw(S),p=this.finalize(D,new v.Literal(S.value==="true",I));break;case 5:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,S=this.nextToken(),I=this.getTokenRaw(S),p=this.finalize(D,new v.Literal(null,I));break;case 10:p=this.parseTemplateLiteral();break;case 7:switch(this.lookahead.value){case"(":this.context.isBindingElement=!1,p=this.inheritCoverGrammar(this.parseGroupExpression);break;case"[":p=this.inheritCoverGrammar(this.parseArrayInitializer);break;case"{":p=this.inheritCoverGrammar(this.parseObjectInitializer);break;case"/":case"/=":this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.scanner.index=this.startMarker.index,S=this.nextRegexToken(),I=this.getTokenRaw(S),p=this.finalize(D,new v.RegexLiteral(S.regex,I,S.pattern,S.flags));break;default:p=this.throwUnexpectedToken(this.nextToken())}break;case 4:!this.context.strict&&this.context.allowYield&&this.matchKeyword("yield")?p=this.parseIdentifierName():!this.context.strict&&this.matchKeyword("let")?p=this.finalize(D,new v.Identifier(this.nextToken().value)):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.matchKeyword("function")?p=this.parseFunctionExpression():this.matchKeyword("this")?(this.nextToken(),p=this.finalize(D,new v.ThisExpression)):p=this.matchKeyword("class")?this.parseClassExpression():this.throwUnexpectedToken(this.nextToken()));break;default:p=this.throwUnexpectedToken(this.nextToken())}return p},C.prototype.parseSpreadElement=function(){var p=this.createNode();this.expect("...");var S=this.inheritCoverGrammar(this.parseAssignmentExpression);return this.finalize(p,new v.SpreadElement(S))},C.prototype.parseArrayInitializer=function(){var p=this.createNode(),S=[];for(this.expect("[");!this.match("]");)if(this.match(","))this.nextToken(),S.push(null);else if(this.match("...")){var I=this.parseSpreadElement();this.match("]")||(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.expect(",")),S.push(I)}else S.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.match("]")||this.expect(",");return this.expect("]"),this.finalize(p,new v.ArrayExpression(S))},C.prototype.parsePropertyMethod=function(p){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var S=this.context.strict,I=this.context.allowStrictDirective;this.context.allowStrictDirective=p.simple;var D=this.isolateCoverGrammar(this.parseFunctionSourceElements);return this.context.strict&&p.firstRestricted&&this.tolerateUnexpectedToken(p.firstRestricted,p.message),this.context.strict&&p.stricted&&this.tolerateUnexpectedToken(p.stricted,p.message),this.context.strict=S,this.context.allowStrictDirective=I,D},C.prototype.parsePropertyMethodFunction=function(){var p=this.createNode(),S=this.context.allowYield;this.context.allowYield=!0;var I=this.parseFormalParameters(),D=this.parsePropertyMethod(I);return this.context.allowYield=S,this.finalize(p,new v.FunctionExpression(null,I.params,D,!1))},C.prototype.parsePropertyMethodAsyncFunction=function(){var p=this.createNode(),S=this.context.allowYield,I=this.context.await;this.context.allowYield=!1,this.context.await=!0;var D=this.parseFormalParameters(),E=this.parsePropertyMethod(D);return this.context.allowYield=S,this.context.await=I,this.finalize(p,new v.AsyncFunctionExpression(null,D.params,E))},C.prototype.parseObjectPropertyKey=function(){var p,S=this.createNode(),I=this.nextToken();switch(I.type){case 8:case 6:this.context.strict&&I.octal&&this.tolerateUnexpectedToken(I,f.Messages.StrictOctalLiteral);var D=this.getTokenRaw(I);p=this.finalize(S,new v.Literal(I.value,D));break;case 3:case 1:case 5:case 4:p=this.finalize(S,new v.Identifier(I.value));break;case 7:I.value==="["?(p=this.isolateCoverGrammar(this.parseAssignmentExpression),this.expect("]")):p=this.throwUnexpectedToken(I);break;default:p=this.throwUnexpectedToken(I)}return p},C.prototype.isPropertyKey=function(p,S){return p.type===d.Syntax.Identifier&&p.name===S||p.type===d.Syntax.Literal&&p.value===S},C.prototype.parseObjectProperty=function(p){var S,I=this.createNode(),D=this.lookahead,E=null,T=null,y=!1,M=!1,_=!1,O=!1;if(D.type===3){var w=D.value;this.nextToken(),y=this.match("["),E=(O=!(this.hasLineTerminator||w!=="async"||this.match(":")||this.match("(")||this.match("*")||this.match(",")))?this.parseObjectPropertyKey():this.finalize(I,new v.Identifier(w))}else this.match("*")?this.nextToken():(y=this.match("["),E=this.parseObjectPropertyKey());var x=this.qualifiedPropertyName(this.lookahead);if(D.type===3&&!O&&D.value==="get"&&x)S="get",y=this.match("["),E=this.parseObjectPropertyKey(),this.context.allowYield=!1,T=this.parseGetterMethod();else if(D.type===3&&!O&&D.value==="set"&&x)S="set",y=this.match("["),E=this.parseObjectPropertyKey(),T=this.parseSetterMethod();else if(D.type===7&&D.value==="*"&&x)S="init",y=this.match("["),E=this.parseObjectPropertyKey(),T=this.parseGeneratorMethod(),M=!0;else if(E||this.throwUnexpectedToken(this.lookahead),S="init",this.match(":")&&!O)!y&&this.isPropertyKey(E,"__proto__")&&(p.value&&this.tolerateError(f.Messages.DuplicateProtoProperty),p.value=!0),this.nextToken(),T=this.inheritCoverGrammar(this.parseAssignmentExpression);else if(this.match("("))T=O?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),M=!0;else if(D.type===3)if(w=this.finalize(I,new v.Identifier(D.value)),this.match("=")){this.context.firstCoverInitializedNameError=this.lookahead,this.nextToken(),_=!0;var P=this.isolateCoverGrammar(this.parseAssignmentExpression);T=this.finalize(I,new v.AssignmentPattern(w,P))}else _=!0,T=w;else this.throwUnexpectedToken(this.nextToken());return this.finalize(I,new v.Property(S,E,y,T,M,_))},C.prototype.parseObjectInitializer=function(){var p=this.createNode();this.expect("{");for(var S=[],I={value:!1};!this.match("}");)S.push(this.parseObjectProperty(I)),this.match("}")||this.expectCommaSeparator();return this.expect("}"),this.finalize(p,new v.ObjectExpression(S))},C.prototype.parseTemplateHead=function(){l.assert(this.lookahead.head,"Template literal must start with a template head");var p=this.createNode(),S=this.nextToken(),I=S.value,D=S.cooked;return this.finalize(p,new v.TemplateElement({raw:I,cooked:D},S.tail))},C.prototype.parseTemplateElement=function(){this.lookahead.type!==10&&this.throwUnexpectedToken();var p=this.createNode(),S=this.nextToken(),I=S.value,D=S.cooked;return this.finalize(p,new v.TemplateElement({raw:I,cooked:D},S.tail))},C.prototype.parseTemplateLiteral=function(){var p=this.createNode(),S=[],I=[],D=this.parseTemplateHead();for(I.push(D);!D.tail;)S.push(this.parseExpression()),D=this.parseTemplateElement(),I.push(D);return this.finalize(p,new v.TemplateLiteral(I,S))},C.prototype.reinterpretExpressionAsPattern=function(p){switch(p.type){case d.Syntax.Identifier:case d.Syntax.MemberExpression:case d.Syntax.RestElement:case d.Syntax.AssignmentPattern:break;case d.Syntax.SpreadElement:p.type=d.Syntax.RestElement,this.reinterpretExpressionAsPattern(p.argument);break;case d.Syntax.ArrayExpression:p.type=d.Syntax.ArrayPattern;for(var S=0;S<p.elements.length;S++)p.elements[S]!==null&&this.reinterpretExpressionAsPattern(p.elements[S]);break;case d.Syntax.ObjectExpression:for(p.type=d.Syntax.ObjectPattern,S=0;S<p.properties.length;S++)this.reinterpretExpressionAsPattern(p.properties[S].value);break;case d.Syntax.AssignmentExpression:p.type=d.Syntax.AssignmentPattern,delete p.operator,this.reinterpretExpressionAsPattern(p.left)}},C.prototype.parseGroupExpression=function(){var p;if(this.expect("("),this.match(")"))this.nextToken(),this.match("=>")||this.expect("=>"),p={type:"ArrowParameterPlaceHolder",params:[],async:!1};else{var S=this.lookahead,I=[];if(this.match("..."))p=this.parseRestElement(I),this.expect(")"),this.match("=>")||this.expect("=>"),p={type:"ArrowParameterPlaceHolder",params:[p],async:!1};else{var D=!1;if(this.context.isBindingElement=!0,p=this.inheritCoverGrammar(this.parseAssignmentExpression),this.match(",")){var E=[];for(this.context.isAssignmentTarget=!1,E.push(p);this.lookahead.type!==2&&this.match(",");){if(this.nextToken(),this.match(")")){this.nextToken();for(var T=0;T<E.length;T++)this.reinterpretExpressionAsPattern(E[T]);D=!0,p={type:"ArrowParameterPlaceHolder",params:E,async:!1}}else if(this.match("...")){for(this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),E.push(this.parseRestElement(I)),this.expect(")"),this.match("=>")||this.expect("=>"),this.context.isBindingElement=!1,T=0;T<E.length;T++)this.reinterpretExpressionAsPattern(E[T]);D=!0,p={type:"ArrowParameterPlaceHolder",params:E,async:!1}}else E.push(this.inheritCoverGrammar(this.parseAssignmentExpression));if(D)break}D||(p=this.finalize(this.startNode(S),new v.SequenceExpression(E)))}if(!D){if(this.expect(")"),this.match("=>")&&(p.type===d.Syntax.Identifier&&p.name==="yield"&&(D=!0,p={type:"ArrowParameterPlaceHolder",params:[p],async:!1}),!D)){if(this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),p.type===d.Syntax.SequenceExpression)for(T=0;T<p.expressions.length;T++)this.reinterpretExpressionAsPattern(p.expressions[T]);else this.reinterpretExpressionAsPattern(p);p={type:"ArrowParameterPlaceHolder",params:p.type===d.Syntax.SequenceExpression?p.expressions:[p],async:!1}}this.context.isBindingElement=!1}}}return p},C.prototype.parseArguments=function(){this.expect("(");var p=[];if(!this.match(")"))for(;;){var S=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAssignmentExpression);if(p.push(S),this.match(")")||(this.expectCommaSeparator(),this.match(")")))break}return this.expect(")"),p},C.prototype.isIdentifierName=function(p){return p.type===3||p.type===4||p.type===1||p.type===5},C.prototype.parseIdentifierName=function(){var p=this.createNode(),S=this.nextToken();return this.isIdentifierName(S)||this.throwUnexpectedToken(S),this.finalize(p,new v.Identifier(S.value))},C.prototype.parseNewExpression=function(){var p,S=this.createNode(),I=this.parseIdentifierName();if(l.assert(I.name==="new","New expression must start with `new`"),this.match("."))if(this.nextToken(),this.lookahead.type===3&&this.context.inFunctionBody&&this.lookahead.value==="target"){var D=this.parseIdentifierName();p=new v.MetaProperty(I,D)}else this.throwUnexpectedToken(this.lookahead);else{var E=this.isolateCoverGrammar(this.parseLeftHandSideExpression),T=this.match("(")?this.parseArguments():[];p=new v.NewExpression(E,T),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return this.finalize(S,p)},C.prototype.parseAsyncArgument=function(){var p=this.parseAssignmentExpression();return this.context.firstCoverInitializedNameError=null,p},C.prototype.parseAsyncArguments=function(){this.expect("(");var p=[];if(!this.match(")"))for(;;){var S=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAsyncArgument);if(p.push(S),this.match(")")||(this.expectCommaSeparator(),this.match(")")))break}return this.expect(")"),p},C.prototype.parseLeftHandSideExpressionAllowCall=function(){var p,S=this.lookahead,I=this.matchContextualKeyword("async"),D=this.context.allowIn;for(this.context.allowIn=!0,this.matchKeyword("super")&&this.context.inFunctionBody?(p=this.createNode(),this.nextToken(),p=this.finalize(p,new v.Super),this.match("(")||this.match(".")||this.match("[")||this.throwUnexpectedToken(this.lookahead)):p=this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match(".")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect(".");var E=this.parseIdentifierName();p=this.finalize(this.startNode(S),new v.StaticMemberExpression(p,E))}else if(this.match("(")){var T=I&&S.lineNumber===this.lookahead.lineNumber;this.context.isBindingElement=!1,this.context.isAssignmentTarget=!1;var y=T?this.parseAsyncArguments():this.parseArguments();if(p=this.finalize(this.startNode(S),new v.CallExpression(p,y)),T&&this.match("=>")){for(var M=0;M<y.length;++M)this.reinterpretExpressionAsPattern(y[M]);p={type:"ArrowParameterPlaceHolder",params:y,async:!0}}}else if(this.match("["))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("["),E=this.isolateCoverGrammar(this.parseExpression),this.expect("]"),p=this.finalize(this.startNode(S),new v.ComputedMemberExpression(p,E));else{if(this.lookahead.type!==10||!this.lookahead.head)break;var _=this.parseTemplateLiteral();p=this.finalize(this.startNode(S),new v.TaggedTemplateExpression(p,_))}return this.context.allowIn=D,p},C.prototype.parseSuper=function(){var p=this.createNode();return this.expectKeyword("super"),this.match("[")||this.match(".")||this.throwUnexpectedToken(this.lookahead),this.finalize(p,new v.Super)},C.prototype.parseLeftHandSideExpression=function(){l.assert(this.context.allowIn,"callee of new expression always allow in keyword.");for(var p=this.startNode(this.lookahead),S=this.matchKeyword("super")&&this.context.inFunctionBody?this.parseSuper():this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match("[")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("[");var I=this.isolateCoverGrammar(this.parseExpression);this.expect("]"),S=this.finalize(p,new v.ComputedMemberExpression(S,I))}else if(this.match("."))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("."),I=this.parseIdentifierName(),S=this.finalize(p,new v.StaticMemberExpression(S,I));else{if(this.lookahead.type!==10||!this.lookahead.head)break;var D=this.parseTemplateLiteral();S=this.finalize(p,new v.TaggedTemplateExpression(S,D))}return S},C.prototype.parseUpdateExpression=function(){var p,S=this.lookahead;if(this.match("++")||this.match("--")){var I=this.startNode(S),D=this.nextToken();p=this.inheritCoverGrammar(this.parseUnaryExpression),this.context.strict&&p.type===d.Syntax.Identifier&&this.scanner.isRestrictedWord(p.name)&&this.tolerateError(f.Messages.StrictLHSPrefix),this.context.isAssignmentTarget||this.tolerateError(f.Messages.InvalidLHSInAssignment);var E=!0;p=this.finalize(I,new v.UpdateExpression(D.value,p,E)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else if(p=this.inheritCoverGrammar(this.parseLeftHandSideExpressionAllowCall),!this.hasLineTerminator&&this.lookahead.type===7&&(this.match("++")||this.match("--"))){this.context.strict&&p.type===d.Syntax.Identifier&&this.scanner.isRestrictedWord(p.name)&&this.tolerateError(f.Messages.StrictLHSPostfix),this.context.isAssignmentTarget||this.tolerateError(f.Messages.InvalidLHSInAssignment),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var T=this.nextToken().value;E=!1,p=this.finalize(this.startNode(S),new v.UpdateExpression(T,p,E))}return p},C.prototype.parseAwaitExpression=function(){var p=this.createNode();this.nextToken();var S=this.parseUnaryExpression();return this.finalize(p,new v.AwaitExpression(S))},C.prototype.parseUnaryExpression=function(){var p;if(this.match("+")||this.match("-")||this.match("~")||this.match("!")||this.matchKeyword("delete")||this.matchKeyword("void")||this.matchKeyword("typeof")){var S=this.startNode(this.lookahead),I=this.nextToken();p=this.inheritCoverGrammar(this.parseUnaryExpression),p=this.finalize(S,new v.UnaryExpression(I.value,p)),this.context.strict&&p.operator==="delete"&&p.argument.type===d.Syntax.Identifier&&this.tolerateError(f.Messages.StrictDelete),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else p=this.context.await&&this.matchContextualKeyword("await")?this.parseAwaitExpression():this.parseUpdateExpression();return p},C.prototype.parseExponentiationExpression=function(){var p=this.lookahead,S=this.inheritCoverGrammar(this.parseUnaryExpression);if(S.type!==d.Syntax.UnaryExpression&&this.match("**")){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var I=S,D=this.isolateCoverGrammar(this.parseExponentiationExpression);S=this.finalize(this.startNode(p),new v.BinaryExpression("**",I,D))}return S},C.prototype.binaryPrecedence=function(p){var S=p.value;return p.type===7?this.operatorPrecedence[S]||0:p.type===4&&(S==="instanceof"||this.context.allowIn&&S==="in")?7:0},C.prototype.parseBinaryExpression=function(){var p=this.lookahead,S=this.inheritCoverGrammar(this.parseExponentiationExpression),I=this.lookahead,D=this.binaryPrecedence(I);if(D>0){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;for(var E=[p,this.lookahead],T=S,y=this.isolateCoverGrammar(this.parseExponentiationExpression),M=[T,I.value,y],_=[D];!((D=this.binaryPrecedence(this.lookahead))<=0);){for(;M.length>2&&D<=_[_.length-1];){y=M.pop();var O=M.pop();_.pop(),T=M.pop(),E.pop();var w=this.startNode(E[E.length-1]);M.push(this.finalize(w,new v.BinaryExpression(O,T,y)))}M.push(this.nextToken().value),_.push(D),E.push(this.lookahead),M.push(this.isolateCoverGrammar(this.parseExponentiationExpression))}var x=M.length-1;S=M[x];for(var P=E.pop();x>1;){var R=E.pop(),L=P&&P.lineStart;w=this.startNode(R,L),O=M[x-1],S=this.finalize(w,new v.BinaryExpression(O,M[x-2],S)),x-=2,P=R}}return S},C.prototype.parseConditionalExpression=function(){var p=this.lookahead,S=this.inheritCoverGrammar(this.parseBinaryExpression);if(this.match("?")){this.nextToken();var I=this.context.allowIn;this.context.allowIn=!0;var D=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowIn=I,this.expect(":");var E=this.isolateCoverGrammar(this.parseAssignmentExpression);S=this.finalize(this.startNode(p),new v.ConditionalExpression(S,D,E)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return S},C.prototype.checkPatternParam=function(p,S){switch(S.type){case d.Syntax.Identifier:this.validateParam(p,S,S.name);break;case d.Syntax.RestElement:this.checkPatternParam(p,S.argument);break;case d.Syntax.AssignmentPattern:this.checkPatternParam(p,S.left);break;case d.Syntax.ArrayPattern:for(var I=0;I<S.elements.length;I++)S.elements[I]!==null&&this.checkPatternParam(p,S.elements[I]);break;case d.Syntax.ObjectPattern:for(I=0;I<S.properties.length;I++)this.checkPatternParam(p,S.properties[I].value)}p.simple=p.simple&&S instanceof v.Identifier},C.prototype.reinterpretAsCoverFormalsList=function(p){var S,I=[p],D=!1;switch(p.type){case d.Syntax.Identifier:break;case"ArrowParameterPlaceHolder":I=p.params,D=p.async;break;default:return null}S={simple:!0,paramSet:{}};for(var E=0;E<I.length;++E)(T=I[E]).type===d.Syntax.AssignmentPattern?T.right.type===d.Syntax.YieldExpression&&(T.right.argument&&this.throwUnexpectedToken(this.lookahead),T.right.type=d.Syntax.Identifier,T.right.name="yield",delete T.right.argument,delete T.right.delegate):D&&T.type===d.Syntax.Identifier&&T.name==="await"&&this.throwUnexpectedToken(this.lookahead),this.checkPatternParam(S,T),I[E]=T;if(this.context.strict||!this.context.allowYield)for(E=0;E<I.length;++E){var T;(T=I[E]).type===d.Syntax.YieldExpression&&this.throwUnexpectedToken(this.lookahead)}if(S.message===f.Messages.StrictParamDupe){var y=this.context.strict?S.stricted:S.firstRestricted;this.throwUnexpectedToken(y,S.message)}return{simple:S.simple,params:I,stricted:S.stricted,firstRestricted:S.firstRestricted,message:S.message}},C.prototype.parseAssignmentExpression=function(){var p;if(!this.context.allowYield&&this.matchKeyword("yield"))p=this.parseYieldExpression();else{var S=this.lookahead,I=S;if(p=this.parseConditionalExpression(),I.type===3&&I.lineNumber===this.lookahead.lineNumber&&I.value==="async"&&(this.lookahead.type===3||this.matchKeyword("yield"))){var D=this.parsePrimaryExpression();this.reinterpretExpressionAsPattern(D),p={type:"ArrowParameterPlaceHolder",params:[D],async:!0}}if(p.type==="ArrowParameterPlaceHolder"||this.match("=>")){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var E=p.async,T=this.reinterpretAsCoverFormalsList(p);if(T){this.hasLineTerminator&&this.tolerateUnexpectedToken(this.lookahead),this.context.firstCoverInitializedNameError=null;var y=this.context.strict,M=this.context.allowStrictDirective;this.context.allowStrictDirective=T.simple;var _=this.context.allowYield,O=this.context.await;this.context.allowYield=!0,this.context.await=E;var w=this.startNode(S);this.expect("=>");var x=void 0;if(this.match("{")){var P=this.context.allowIn;this.context.allowIn=!0,x=this.parseFunctionSourceElements(),this.context.allowIn=P}else x=this.isolateCoverGrammar(this.parseAssignmentExpression);var R=x.type!==d.Syntax.BlockStatement;this.context.strict&&T.firstRestricted&&this.throwUnexpectedToken(T.firstRestricted,T.message),this.context.strict&&T.stricted&&this.tolerateUnexpectedToken(T.stricted,T.message),p=E?this.finalize(w,new v.AsyncArrowFunctionExpression(T.params,x,R)):this.finalize(w,new v.ArrowFunctionExpression(T.params,x,R)),this.context.strict=y,this.context.allowStrictDirective=M,this.context.allowYield=_,this.context.await=O}}else if(this.matchAssign()){if(this.context.isAssignmentTarget||this.tolerateError(f.Messages.InvalidLHSInAssignment),this.context.strict&&p.type===d.Syntax.Identifier){var L=p;this.scanner.isRestrictedWord(L.name)&&this.tolerateUnexpectedToken(I,f.Messages.StrictLHSAssignment),this.scanner.isStrictModeReservedWord(L.name)&&this.tolerateUnexpectedToken(I,f.Messages.StrictReservedWord)}this.match("=")?this.reinterpretExpressionAsPattern(p):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1);var H=(I=this.nextToken()).value,F=this.isolateCoverGrammar(this.parseAssignmentExpression);p=this.finalize(this.startNode(S),new v.AssignmentExpression(H,p,F)),this.context.firstCoverInitializedNameError=null}}return p},C.prototype.parseExpression=function(){var p=this.lookahead,S=this.isolateCoverGrammar(this.parseAssignmentExpression);if(this.match(",")){var I=[];for(I.push(S);this.lookahead.type!==2&&this.match(",");)this.nextToken(),I.push(this.isolateCoverGrammar(this.parseAssignmentExpression));S=this.finalize(this.startNode(p),new v.SequenceExpression(I))}return S},C.prototype.parseStatementListItem=function(){var p;if(this.context.isAssignmentTarget=!0,this.context.isBindingElement=!0,this.lookahead.type===4)switch(this.lookahead.value){case"export":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,f.Messages.IllegalExportDeclaration),p=this.parseExportDeclaration();break;case"import":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,f.Messages.IllegalImportDeclaration),p=this.parseImportDeclaration();break;case"const":p=this.parseLexicalDeclaration({inFor:!1});break;case"function":p=this.parseFunctionDeclaration();break;case"class":p=this.parseClassDeclaration();break;case"let":p=this.isLexicalDeclaration()?this.parseLexicalDeclaration({inFor:!1}):this.parseStatement();break;default:p=this.parseStatement()}else p=this.parseStatement();return p},C.prototype.parseBlock=function(){var p=this.createNode();this.expect("{");for(var S=[];!this.match("}");)S.push(this.parseStatementListItem());return this.expect("}"),this.finalize(p,new v.BlockStatement(S))},C.prototype.parseLexicalBinding=function(p,S){var I=this.createNode(),D=this.parsePattern([],p);this.context.strict&&D.type===d.Syntax.Identifier&&this.scanner.isRestrictedWord(D.name)&&this.tolerateError(f.Messages.StrictVarName);var E=null;return p==="const"?this.matchKeyword("in")||this.matchContextualKeyword("of")||(this.match("=")?(this.nextToken(),E=this.isolateCoverGrammar(this.parseAssignmentExpression)):this.throwError(f.Messages.DeclarationMissingInitializer,"const")):(!S.inFor&&D.type!==d.Syntax.Identifier||this.match("="))&&(this.expect("="),E=this.isolateCoverGrammar(this.parseAssignmentExpression)),this.finalize(I,new v.VariableDeclarator(D,E))},C.prototype.parseBindingList=function(p,S){for(var I=[this.parseLexicalBinding(p,S)];this.match(",");)this.nextToken(),I.push(this.parseLexicalBinding(p,S));return I},C.prototype.isLexicalDeclaration=function(){var p=this.scanner.saveState();this.scanner.scanComments();var S=this.scanner.lex();return this.scanner.restoreState(p),S.type===3||S.type===7&&S.value==="["||S.type===7&&S.value==="{"||S.type===4&&S.value==="let"||S.type===4&&S.value==="yield"},C.prototype.parseLexicalDeclaration=function(p){var S=this.createNode(),I=this.nextToken().value;l.assert(I==="let"||I==="const","Lexical declaration must be either let or const");var D=this.parseBindingList(I,p);return this.consumeSemicolon(),this.finalize(S,new v.VariableDeclaration(D,I))},C.prototype.parseBindingRestElement=function(p,S){var I=this.createNode();this.expect("...");var D=this.parsePattern(p,S);return this.finalize(I,new v.RestElement(D))},C.prototype.parseArrayPattern=function(p,S){var I=this.createNode();this.expect("[");for(var D=[];!this.match("]");)if(this.match(","))this.nextToken(),D.push(null);else{if(this.match("...")){D.push(this.parseBindingRestElement(p,S));break}D.push(this.parsePatternWithDefault(p,S)),this.match("]")||this.expect(",")}return this.expect("]"),this.finalize(I,new v.ArrayPattern(D))},C.prototype.parsePropertyPattern=function(p,S){var I,D,E=this.createNode(),T=!1,y=!1;if(this.lookahead.type===3){var M=this.lookahead;I=this.parseVariableIdentifier();var _=this.finalize(E,new v.Identifier(M.value));if(this.match("=")){p.push(M),y=!0,this.nextToken();var O=this.parseAssignmentExpression();D=this.finalize(this.startNode(M),new v.AssignmentPattern(_,O))}else this.match(":")?(this.expect(":"),D=this.parsePatternWithDefault(p,S)):(p.push(M),y=!0,D=_)}else T=this.match("["),I=this.parseObjectPropertyKey(),this.expect(":"),D=this.parsePatternWithDefault(p,S);return this.finalize(E,new v.Property("init",I,T,D,!1,y))},C.prototype.parseObjectPattern=function(p,S){var I=this.createNode(),D=[];for(this.expect("{");!this.match("}");)D.push(this.parsePropertyPattern(p,S)),this.match("}")||this.expect(",");return this.expect("}"),this.finalize(I,new v.ObjectPattern(D))},C.prototype.parsePattern=function(p,S){var I;return this.match("[")?I=this.parseArrayPattern(p,S):this.match("{")?I=this.parseObjectPattern(p,S):(!this.matchKeyword("let")||S!=="const"&&S!=="let"||this.tolerateUnexpectedToken(this.lookahead,f.Messages.LetInLexicalBinding),p.push(this.lookahead),I=this.parseVariableIdentifier(S)),I},C.prototype.parsePatternWithDefault=function(p,S){var I=this.lookahead,D=this.parsePattern(p,S);if(this.match("=")){this.nextToken();var E=this.context.allowYield;this.context.allowYield=!0;var T=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowYield=E,D=this.finalize(this.startNode(I),new v.AssignmentPattern(D,T))}return D},C.prototype.parseVariableIdentifier=function(p){var S=this.createNode(),I=this.nextToken();return I.type===4&&I.value==="yield"?this.context.strict?this.tolerateUnexpectedToken(I,f.Messages.StrictReservedWord):this.context.allowYield||this.throwUnexpectedToken(I):I.type!==3?this.context.strict&&I.type===4&&this.scanner.isStrictModeReservedWord(I.value)?this.tolerateUnexpectedToken(I,f.Messages.StrictReservedWord):(this.context.strict||I.value!=="let"||p!=="var")&&this.throwUnexpectedToken(I):(this.context.isModule||this.context.await)&&I.type===3&&I.value==="await"&&this.tolerateUnexpectedToken(I),this.finalize(S,new v.Identifier(I.value))},C.prototype.parseVariableDeclaration=function(p){var S=this.createNode(),I=this.parsePattern([],"var");this.context.strict&&I.type===d.Syntax.Identifier&&this.scanner.isRestrictedWord(I.name)&&this.tolerateError(f.Messages.StrictVarName);var D=null;return this.match("=")?(this.nextToken(),D=this.isolateCoverGrammar(this.parseAssignmentExpression)):I.type===d.Syntax.Identifier||p.inFor||this.expect("="),this.finalize(S,new v.VariableDeclarator(I,D))},C.prototype.parseVariableDeclarationList=function(p){var S={inFor:p.inFor},I=[];for(I.push(this.parseVariableDeclaration(S));this.match(",");)this.nextToken(),I.push(this.parseVariableDeclaration(S));return I},C.prototype.parseVariableStatement=function(){var p=this.createNode();this.expectKeyword("var");var S=this.parseVariableDeclarationList({inFor:!1});return this.consumeSemicolon(),this.finalize(p,new v.VariableDeclaration(S,"var"))},C.prototype.parseEmptyStatement=function(){var p=this.createNode();return this.expect(";"),this.finalize(p,new v.EmptyStatement)},C.prototype.parseExpressionStatement=function(){var p=this.createNode(),S=this.parseExpression();return this.consumeSemicolon(),this.finalize(p,new v.ExpressionStatement(S))},C.prototype.parseIfClause=function(){return this.context.strict&&this.matchKeyword("function")&&this.tolerateError(f.Messages.StrictFunction),this.parseStatement()},C.prototype.parseIfStatement=function(){var p,S=this.createNode(),I=null;this.expectKeyword("if"),this.expect("(");var D=this.parseExpression();return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),p=this.finalize(this.createNode(),new v.EmptyStatement)):(this.expect(")"),p=this.parseIfClause(),this.matchKeyword("else")&&(this.nextToken(),I=this.parseIfClause())),this.finalize(S,new v.IfStatement(D,p,I))},C.prototype.parseDoWhileStatement=function(){var p=this.createNode();this.expectKeyword("do");var S=this.context.inIteration;this.context.inIteration=!0;var I=this.parseStatement();this.context.inIteration=S,this.expectKeyword("while"),this.expect("(");var D=this.parseExpression();return!this.match(")")&&this.config.tolerant?this.tolerateUnexpectedToken(this.nextToken()):(this.expect(")"),this.match(";")&&this.nextToken()),this.finalize(p,new v.DoWhileStatement(I,D))},C.prototype.parseWhileStatement=function(){var p,S=this.createNode();this.expectKeyword("while"),this.expect("(");var I=this.parseExpression();if(!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),p=this.finalize(this.createNode(),new v.EmptyStatement);else{this.expect(")");var D=this.context.inIteration;this.context.inIteration=!0,p=this.parseStatement(),this.context.inIteration=D}return this.finalize(S,new v.WhileStatement(I,p))},C.prototype.parseForStatement=function(){var p,S,I,D=null,E=null,T=null,y=!0,M=this.createNode();if(this.expectKeyword("for"),this.expect("("),this.match(";"))this.nextToken();else if(this.matchKeyword("var")){D=this.createNode(),this.nextToken();var _=this.context.allowIn;this.context.allowIn=!1;var O=this.parseVariableDeclarationList({inFor:!0});if(this.context.allowIn=_,O.length===1&&this.matchKeyword("in")){var w=O[0];w.init&&(w.id.type===d.Syntax.ArrayPattern||w.id.type===d.Syntax.ObjectPattern||this.context.strict)&&this.tolerateError(f.Messages.ForInOfLoopInitializer,"for-in"),D=this.finalize(D,new v.VariableDeclaration(O,"var")),this.nextToken(),p=D,S=this.parseExpression(),D=null}else O.length===1&&O[0].init===null&&this.matchContextualKeyword("of")?(D=this.finalize(D,new v.VariableDeclaration(O,"var")),this.nextToken(),p=D,S=this.parseAssignmentExpression(),D=null,y=!1):(D=this.finalize(D,new v.VariableDeclaration(O,"var")),this.expect(";"))}else if(this.matchKeyword("const")||this.matchKeyword("let")){D=this.createNode();var x=this.nextToken().value;this.context.strict||this.lookahead.value!=="in"?(_=this.context.allowIn,this.context.allowIn=!1,O=this.parseBindingList(x,{inFor:!0}),this.context.allowIn=_,O.length===1&&O[0].init===null&&this.matchKeyword("in")?(D=this.finalize(D,new v.VariableDeclaration(O,x)),this.nextToken(),p=D,S=this.parseExpression(),D=null):O.length===1&&O[0].init===null&&this.matchContextualKeyword("of")?(D=this.finalize(D,new v.VariableDeclaration(O,x)),this.nextToken(),p=D,S=this.parseAssignmentExpression(),D=null,y=!1):(this.consumeSemicolon(),D=this.finalize(D,new v.VariableDeclaration(O,x)))):(D=this.finalize(D,new v.Identifier(x)),this.nextToken(),p=D,S=this.parseExpression(),D=null)}else{var P=this.lookahead;if(_=this.context.allowIn,this.context.allowIn=!1,D=this.inheritCoverGrammar(this.parseAssignmentExpression),this.context.allowIn=_,this.matchKeyword("in"))this.context.isAssignmentTarget&&D.type!==d.Syntax.AssignmentExpression||this.tolerateError(f.Messages.InvalidLHSInForIn),this.nextToken(),this.reinterpretExpressionAsPattern(D),p=D,S=this.parseExpression(),D=null;else if(this.matchContextualKeyword("of"))this.context.isAssignmentTarget&&D.type!==d.Syntax.AssignmentExpression||this.tolerateError(f.Messages.InvalidLHSInForLoop),this.nextToken(),this.reinterpretExpressionAsPattern(D),p=D,S=this.parseAssignmentExpression(),D=null,y=!1;else{if(this.match(",")){for(var R=[D];this.match(",");)this.nextToken(),R.push(this.isolateCoverGrammar(this.parseAssignmentExpression));D=this.finalize(this.startNode(P),new v.SequenceExpression(R))}this.expect(";")}}if(p===void 0&&(this.match(";")||(E=this.parseExpression()),this.expect(";"),this.match(")")||(T=this.parseExpression())),!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),I=this.finalize(this.createNode(),new v.EmptyStatement);else{this.expect(")");var L=this.context.inIteration;this.context.inIteration=!0,I=this.isolateCoverGrammar(this.parseStatement),this.context.inIteration=L}return p===void 0?this.finalize(M,new v.ForStatement(D,E,T,I)):y?this.finalize(M,new v.ForInStatement(p,S,I)):this.finalize(M,new v.ForOfStatement(p,S,I))},C.prototype.parseContinueStatement=function(){var p=this.createNode();this.expectKeyword("continue");var S=null;if(this.lookahead.type===3&&!this.hasLineTerminator){var I=this.parseVariableIdentifier();S=I;var D="$"+I.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,D)||this.throwError(f.Messages.UnknownLabel,I.name)}return this.consumeSemicolon(),S!==null||this.context.inIteration||this.throwError(f.Messages.IllegalContinue),this.finalize(p,new v.ContinueStatement(S))},C.prototype.parseBreakStatement=function(){var p=this.createNode();this.expectKeyword("break");var S=null;if(this.lookahead.type===3&&!this.hasLineTerminator){var I=this.parseVariableIdentifier(),D="$"+I.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,D)||this.throwError(f.Messages.UnknownLabel,I.name),S=I}return this.consumeSemicolon(),S!==null||this.context.inIteration||this.context.inSwitch||this.throwError(f.Messages.IllegalBreak),this.finalize(p,new v.BreakStatement(S))},C.prototype.parseReturnStatement=function(){this.context.inFunctionBody||this.tolerateError(f.Messages.IllegalReturn);var p=this.createNode();this.expectKeyword("return");var S=(this.match(";")||this.match("}")||this.hasLineTerminator||this.lookahead.type===2)&&this.lookahead.type!==8&&this.lookahead.type!==10?null:this.parseExpression();return this.consumeSemicolon(),this.finalize(p,new v.ReturnStatement(S))},C.prototype.parseWithStatement=function(){this.context.strict&&this.tolerateError(f.Messages.StrictModeWith);var p,S=this.createNode();this.expectKeyword("with"),this.expect("(");var I=this.parseExpression();return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),p=this.finalize(this.createNode(),new v.EmptyStatement)):(this.expect(")"),p=this.parseStatement()),this.finalize(S,new v.WithStatement(I,p))},C.prototype.parseSwitchCase=function(){var p,S=this.createNode();this.matchKeyword("default")?(this.nextToken(),p=null):(this.expectKeyword("case"),p=this.parseExpression()),this.expect(":");for(var I=[];!(this.match("}")||this.matchKeyword("default")||this.matchKeyword("case"));)I.push(this.parseStatementListItem());return this.finalize(S,new v.SwitchCase(p,I))},C.prototype.parseSwitchStatement=function(){var p=this.createNode();this.expectKeyword("switch"),this.expect("(");var S=this.parseExpression();this.expect(")");var I=this.context.inSwitch;this.context.inSwitch=!0;var D=[],E=!1;for(this.expect("{");!this.match("}");){var T=this.parseSwitchCase();T.test===null&&(E&&this.throwError(f.Messages.MultipleDefaultsInSwitch),E=!0),D.push(T)}return this.expect("}"),this.context.inSwitch=I,this.finalize(p,new v.SwitchStatement(S,D))},C.prototype.parseLabelledStatement=function(){var p,S=this.createNode(),I=this.parseExpression();if(I.type===d.Syntax.Identifier&&this.match(":")){this.nextToken();var D=I,E="$"+D.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,E)&&this.throwError(f.Messages.Redeclaration,"Label",D.name),this.context.labelSet[E]=!0;var T=void 0;if(this.matchKeyword("class"))this.tolerateUnexpectedToken(this.lookahead),T=this.parseClassDeclaration();else if(this.matchKeyword("function")){var y=this.lookahead,M=this.parseFunctionDeclaration();this.context.strict?this.tolerateUnexpectedToken(y,f.Messages.StrictFunction):M.generator&&this.tolerateUnexpectedToken(y,f.Messages.GeneratorInLegacyContext),T=M}else T=this.parseStatement();delete this.context.labelSet[E],p=new v.LabeledStatement(D,T)}else this.consumeSemicolon(),p=new v.ExpressionStatement(I);return this.finalize(S,p)},C.prototype.parseThrowStatement=function(){var p=this.createNode();this.expectKeyword("throw"),this.hasLineTerminator&&this.throwError(f.Messages.NewlineAfterThrow);var S=this.parseExpression();return this.consumeSemicolon(),this.finalize(p,new v.ThrowStatement(S))},C.prototype.parseCatchClause=function(){var p=this.createNode();this.expectKeyword("catch"),this.expect("("),this.match(")")&&this.throwUnexpectedToken(this.lookahead);for(var S=[],I=this.parsePattern(S),D={},E=0;E<S.length;E++){var T="$"+S[E].value;Object.prototype.hasOwnProperty.call(D,T)&&this.tolerateError(f.Messages.DuplicateBinding,S[E].value),D[T]=!0}this.context.strict&&I.type===d.Syntax.Identifier&&this.scanner.isRestrictedWord(I.name)&&this.tolerateError(f.Messages.StrictCatchVariable),this.expect(")");var y=this.parseBlock();return this.finalize(p,new v.CatchClause(I,y))},C.prototype.parseFinallyClause=function(){return this.expectKeyword("finally"),this.parseBlock()},C.prototype.parseTryStatement=function(){var p=this.createNode();this.expectKeyword("try");var S=this.parseBlock(),I=this.matchKeyword("catch")?this.parseCatchClause():null,D=this.matchKeyword("finally")?this.parseFinallyClause():null;return I||D||this.throwError(f.Messages.NoCatchOrFinally),this.finalize(p,new v.TryStatement(S,I,D))},C.prototype.parseDebuggerStatement=function(){var p=this.createNode();return this.expectKeyword("debugger"),this.consumeSemicolon(),this.finalize(p,new v.DebuggerStatement)},C.prototype.parseStatement=function(){var p;switch(this.lookahead.type){case 1:case 5:case 6:case 8:case 10:case 9:p=this.parseExpressionStatement();break;case 7:var S=this.lookahead.value;p=S==="{"?this.parseBlock():S==="("?this.parseExpressionStatement():S===";"?this.parseEmptyStatement():this.parseExpressionStatement();break;case 3:p=this.matchAsyncFunction()?this.parseFunctionDeclaration():this.parseLabelledStatement();break;case 4:switch(this.lookahead.value){case"break":p=this.parseBreakStatement();break;case"continue":p=this.parseContinueStatement();break;case"debugger":p=this.parseDebuggerStatement();break;case"do":p=this.parseDoWhileStatement();break;case"for":p=this.parseForStatement();break;case"function":p=this.parseFunctionDeclaration();break;case"if":p=this.parseIfStatement();break;case"return":p=this.parseReturnStatement();break;case"switch":p=this.parseSwitchStatement();break;case"throw":p=this.parseThrowStatement();break;case"try":p=this.parseTryStatement();break;case"var":p=this.parseVariableStatement();break;case"while":p=this.parseWhileStatement();break;case"with":p=this.parseWithStatement();break;default:p=this.parseExpressionStatement()}break;default:p=this.throwUnexpectedToken(this.lookahead)}return p},C.prototype.parseFunctionSourceElements=function(){var p=this.createNode();this.expect("{");var S=this.parseDirectivePrologues(),I=this.context.labelSet,D=this.context.inIteration,E=this.context.inSwitch,T=this.context.inFunctionBody;for(this.context.labelSet={},this.context.inIteration=!1,this.context.inSwitch=!1,this.context.inFunctionBody=!0;this.lookahead.type!==2&&!this.match("}");)S.push(this.parseStatementListItem());return this.expect("}"),this.context.labelSet=I,this.context.inIteration=D,this.context.inSwitch=E,this.context.inFunctionBody=T,this.finalize(p,new v.BlockStatement(S))},C.prototype.validateParam=function(p,S,I){var D="$"+I;this.context.strict?(this.scanner.isRestrictedWord(I)&&(p.stricted=S,p.message=f.Messages.StrictParamName),Object.prototype.hasOwnProperty.call(p.paramSet,D)&&(p.stricted=S,p.message=f.Messages.StrictParamDupe)):p.firstRestricted||(this.scanner.isRestrictedWord(I)?(p.firstRestricted=S,p.message=f.Messages.StrictParamName):this.scanner.isStrictModeReservedWord(I)?(p.firstRestricted=S,p.message=f.Messages.StrictReservedWord):Object.prototype.hasOwnProperty.call(p.paramSet,D)&&(p.stricted=S,p.message=f.Messages.StrictParamDupe)),typeof Object.defineProperty=="function"?Object.defineProperty(p.paramSet,D,{value:!0,enumerable:!0,writable:!0,configurable:!0}):p.paramSet[D]=!0},C.prototype.parseRestElement=function(p){var S=this.createNode();this.expect("...");var I=this.parsePattern(p);return this.match("=")&&this.throwError(f.Messages.DefaultRestParameter),this.match(")")||this.throwError(f.Messages.ParameterAfterRestParameter),this.finalize(S,new v.RestElement(I))},C.prototype.parseFormalParameter=function(p){for(var S=[],I=this.match("...")?this.parseRestElement(S):this.parsePatternWithDefault(S),D=0;D<S.length;D++)this.validateParam(p,S[D],S[D].value);p.simple=p.simple&&I instanceof v.Identifier,p.params.push(I)},C.prototype.parseFormalParameters=function(p){var S;if(S={simple:!0,params:[],firstRestricted:p},this.expect("("),!this.match(")"))for(S.paramSet={};this.lookahead.type!==2&&(this.parseFormalParameter(S),!this.match(")"))&&(this.expect(","),!this.match(")")););return this.expect(")"),{simple:S.simple,params:S.params,stricted:S.stricted,firstRestricted:S.firstRestricted,message:S.message}},C.prototype.matchAsyncFunction=function(){var p=this.matchContextualKeyword("async");if(p){var S=this.scanner.saveState();this.scanner.scanComments();var I=this.scanner.lex();this.scanner.restoreState(S),p=S.lineNumber===I.lineNumber&&I.type===4&&I.value==="function"}return p},C.prototype.parseFunctionDeclaration=function(p){var S=this.createNode(),I=this.matchContextualKeyword("async");I&&this.nextToken(),this.expectKeyword("function");var D,E=!I&&this.match("*");E&&this.nextToken();var T=null,y=null;if(!p||!this.match("(")){var M=this.lookahead;T=this.parseVariableIdentifier(),this.context.strict?this.scanner.isRestrictedWord(M.value)&&this.tolerateUnexpectedToken(M,f.Messages.StrictFunctionName):this.scanner.isRestrictedWord(M.value)?(y=M,D=f.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(M.value)&&(y=M,D=f.Messages.StrictReservedWord)}var _=this.context.await,O=this.context.allowYield;this.context.await=I,this.context.allowYield=!E;var w=this.parseFormalParameters(y),x=w.params,P=w.stricted;y=w.firstRestricted,w.message&&(D=w.message);var R=this.context.strict,L=this.context.allowStrictDirective;this.context.allowStrictDirective=w.simple;var H=this.parseFunctionSourceElements();return this.context.strict&&y&&this.throwUnexpectedToken(y,D),this.context.strict&&P&&this.tolerateUnexpectedToken(P,D),this.context.strict=R,this.context.allowStrictDirective=L,this.context.await=_,this.context.allowYield=O,I?this.finalize(S,new v.AsyncFunctionDeclaration(T,x,H)):this.finalize(S,new v.FunctionDeclaration(T,x,H,E))},C.prototype.parseFunctionExpression=function(){var p=this.createNode(),S=this.matchContextualKeyword("async");S&&this.nextToken(),this.expectKeyword("function");var I,D=!S&&this.match("*");D&&this.nextToken();var E,T=null,y=this.context.await,M=this.context.allowYield;if(this.context.await=S,this.context.allowYield=!D,!this.match("(")){var _=this.lookahead;T=this.context.strict||D||!this.matchKeyword("yield")?this.parseVariableIdentifier():this.parseIdentifierName(),this.context.strict?this.scanner.isRestrictedWord(_.value)&&this.tolerateUnexpectedToken(_,f.Messages.StrictFunctionName):this.scanner.isRestrictedWord(_.value)?(E=_,I=f.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(_.value)&&(E=_,I=f.Messages.StrictReservedWord)}var O=this.parseFormalParameters(E),w=O.params,x=O.stricted;E=O.firstRestricted,O.message&&(I=O.message);var P=this.context.strict,R=this.context.allowStrictDirective;this.context.allowStrictDirective=O.simple;var L=this.parseFunctionSourceElements();return this.context.strict&&E&&this.throwUnexpectedToken(E,I),this.context.strict&&x&&this.tolerateUnexpectedToken(x,I),this.context.strict=P,this.context.allowStrictDirective=R,this.context.await=y,this.context.allowYield=M,S?this.finalize(p,new v.AsyncFunctionExpression(T,w,L)):this.finalize(p,new v.FunctionExpression(T,w,L,D))},C.prototype.parseDirective=function(){var p=this.lookahead,S=this.createNode(),I=this.parseExpression(),D=I.type===d.Syntax.Literal?this.getTokenRaw(p).slice(1,-1):null;return this.consumeSemicolon(),this.finalize(S,D?new v.Directive(I,D):new v.ExpressionStatement(I))},C.prototype.parseDirectivePrologues=function(){for(var p=null,S=[];;){var I=this.lookahead;if(I.type!==8)break;var D=this.parseDirective();S.push(D);var E=D.directive;if(typeof E!="string")break;E==="use strict"?(this.context.strict=!0,p&&this.tolerateUnexpectedToken(p,f.Messages.StrictOctalLiteral),this.context.allowStrictDirective||this.tolerateUnexpectedToken(I,f.Messages.IllegalLanguageModeDirective)):!p&&I.octal&&(p=I)}return S},C.prototype.qualifiedPropertyName=function(p){switch(p.type){case 3:case 8:case 1:case 5:case 6:case 4:return!0;case 7:return p.value==="["}return!1},C.prototype.parseGetterMethod=function(){var p=this.createNode(),S=this.context.allowYield;this.context.allowYield=!0;var I=this.parseFormalParameters();I.params.length>0&&this.tolerateError(f.Messages.BadGetterArity);var D=this.parsePropertyMethod(I);return this.context.allowYield=S,this.finalize(p,new v.FunctionExpression(null,I.params,D,!1))},C.prototype.parseSetterMethod=function(){var p=this.createNode(),S=this.context.allowYield;this.context.allowYield=!0;var I=this.parseFormalParameters();I.params.length!==1?this.tolerateError(f.Messages.BadSetterArity):I.params[0]instanceof v.RestElement&&this.tolerateError(f.Messages.BadSetterRestParameter);var D=this.parsePropertyMethod(I);return this.context.allowYield=S,this.finalize(p,new v.FunctionExpression(null,I.params,D,!1))},C.prototype.parseGeneratorMethod=function(){var p=this.createNode(),S=this.context.allowYield;this.context.allowYield=!0;var I=this.parseFormalParameters();this.context.allowYield=!1;var D=this.parsePropertyMethod(I);return this.context.allowYield=S,this.finalize(p,new v.FunctionExpression(null,I.params,D,!0))},C.prototype.isStartOfExpression=function(){var p=!0,S=this.lookahead.value;switch(this.lookahead.type){case 7:p=S==="["||S==="("||S==="{"||S==="+"||S==="-"||S==="!"||S==="~"||S==="++"||S==="--"||S==="/"||S==="/=";break;case 4:p=S==="class"||S==="delete"||S==="function"||S==="let"||S==="new"||S==="super"||S==="this"||S==="typeof"||S==="void"||S==="yield"}return p},C.prototype.parseYieldExpression=function(){var p=this.createNode();this.expectKeyword("yield");var S=null,I=!1;if(!this.hasLineTerminator){var D=this.context.allowYield;this.context.allowYield=!1,(I=this.match("*"))?(this.nextToken(),S=this.parseAssignmentExpression()):this.isStartOfExpression()&&(S=this.parseAssignmentExpression()),this.context.allowYield=D}return this.finalize(p,new v.YieldExpression(S,I))},C.prototype.parseClassElement=function(p){var S=this.lookahead,I=this.createNode(),D="",E=null,T=null,y=!1,M=!1,_=!1,O=!1;if(this.match("*"))this.nextToken();else if(y=this.match("["),(E=this.parseObjectPropertyKey()).name==="static"&&(this.qualifiedPropertyName(this.lookahead)||this.match("*"))&&(S=this.lookahead,_=!0,y=this.match("["),this.match("*")?this.nextToken():E=this.parseObjectPropertyKey()),S.type===3&&!this.hasLineTerminator&&S.value==="async"){var w=this.lookahead.value;w!==":"&&w!=="("&&w!=="*"&&(O=!0,S=this.lookahead,E=this.parseObjectPropertyKey(),S.type===3&&S.value==="constructor"&&this.tolerateUnexpectedToken(S,f.Messages.ConstructorIsAsync))}var x=this.qualifiedPropertyName(this.lookahead);return S.type===3?S.value==="get"&&x?(D="get",y=this.match("["),E=this.parseObjectPropertyKey(),this.context.allowYield=!1,T=this.parseGetterMethod()):S.value==="set"&&x&&(D="set",y=this.match("["),E=this.parseObjectPropertyKey(),T=this.parseSetterMethod()):S.type===7&&S.value==="*"&&x&&(D="init",y=this.match("["),E=this.parseObjectPropertyKey(),T=this.parseGeneratorMethod(),M=!0),!D&&E&&this.match("(")&&(D="init",T=O?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),M=!0),D||this.throwUnexpectedToken(this.lookahead),D==="init"&&(D="method"),y||(_&&this.isPropertyKey(E,"prototype")&&this.throwUnexpectedToken(S,f.Messages.StaticPrototype),!_&&this.isPropertyKey(E,"constructor")&&((D!=="method"||!M||T&&T.generator)&&this.throwUnexpectedToken(S,f.Messages.ConstructorSpecialMethod),p.value?this.throwUnexpectedToken(S,f.Messages.DuplicateConstructor):p.value=!0,D="constructor")),this.finalize(I,new v.MethodDefinition(E,y,T,D,_))},C.prototype.parseClassElementList=function(){var p=[],S={value:!1};for(this.expect("{");!this.match("}");)this.match(";")?this.nextToken():p.push(this.parseClassElement(S));return this.expect("}"),p},C.prototype.parseClassBody=function(){var p=this.createNode(),S=this.parseClassElementList();return this.finalize(p,new v.ClassBody(S))},C.prototype.parseClassDeclaration=function(p){var S=this.createNode(),I=this.context.strict;this.context.strict=!0,this.expectKeyword("class");var D=p&&this.lookahead.type!==3?null:this.parseVariableIdentifier(),E=null;this.matchKeyword("extends")&&(this.nextToken(),E=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var T=this.parseClassBody();return this.context.strict=I,this.finalize(S,new v.ClassDeclaration(D,E,T))},C.prototype.parseClassExpression=function(){var p=this.createNode(),S=this.context.strict;this.context.strict=!0,this.expectKeyword("class");var I=this.lookahead.type===3?this.parseVariableIdentifier():null,D=null;this.matchKeyword("extends")&&(this.nextToken(),D=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var E=this.parseClassBody();return this.context.strict=S,this.finalize(p,new v.ClassExpression(I,D,E))},C.prototype.parseModule=function(){this.context.strict=!0,this.context.isModule=!0,this.scanner.isModule=!0;for(var p=this.createNode(),S=this.parseDirectivePrologues();this.lookahead.type!==2;)S.push(this.parseStatementListItem());return this.finalize(p,new v.Module(S))},C.prototype.parseScript=function(){for(var p=this.createNode(),S=this.parseDirectivePrologues();this.lookahead.type!==2;)S.push(this.parseStatementListItem());return this.finalize(p,new v.Script(S))},C.prototype.parseModuleSpecifier=function(){var p=this.createNode();this.lookahead.type!==8&&this.throwError(f.Messages.InvalidModuleSpecifier);var S=this.nextToken(),I=this.getTokenRaw(S);return this.finalize(p,new v.Literal(S.value,I))},C.prototype.parseImportSpecifier=function(){var p,S,I=this.createNode();return this.lookahead.type===3?(S=p=this.parseVariableIdentifier(),this.matchContextualKeyword("as")&&(this.nextToken(),S=this.parseVariableIdentifier())):(S=p=this.parseIdentifierName(),this.matchContextualKeyword("as")?(this.nextToken(),S=this.parseVariableIdentifier()):this.throwUnexpectedToken(this.nextToken())),this.finalize(I,new v.ImportSpecifier(S,p))},C.prototype.parseNamedImports=function(){this.expect("{");for(var p=[];!this.match("}");)p.push(this.parseImportSpecifier()),this.match("}")||this.expect(",");return this.expect("}"),p},C.prototype.parseImportDefaultSpecifier=function(){var p=this.createNode(),S=this.parseIdentifierName();return this.finalize(p,new v.ImportDefaultSpecifier(S))},C.prototype.parseImportNamespaceSpecifier=function(){var p=this.createNode();this.expect("*"),this.matchContextualKeyword("as")||this.throwError(f.Messages.NoAsAfterImportNamespace),this.nextToken();var S=this.parseIdentifierName();return this.finalize(p,new v.ImportNamespaceSpecifier(S))},C.prototype.parseImportDeclaration=function(){this.context.inFunctionBody&&this.throwError(f.Messages.IllegalImportDeclaration);var p,S=this.createNode();this.expectKeyword("import");var I=[];if(this.lookahead.type===8)p=this.parseModuleSpecifier();else{if(this.match("{")?I=I.concat(this.parseNamedImports()):this.match("*")?I.push(this.parseImportNamespaceSpecifier()):this.isIdentifierName(this.lookahead)&&!this.matchKeyword("default")?(I.push(this.parseImportDefaultSpecifier()),this.match(",")&&(this.nextToken(),this.match("*")?I.push(this.parseImportNamespaceSpecifier()):this.match("{")?I=I.concat(this.parseNamedImports()):this.throwUnexpectedToken(this.lookahead))):this.throwUnexpectedToken(this.nextToken()),!this.matchContextualKeyword("from")){var D=this.lookahead.value?f.Messages.UnexpectedToken:f.Messages.MissingFromClause;this.throwError(D,this.lookahead.value)}this.nextToken(),p=this.parseModuleSpecifier()}return this.consumeSemicolon(),this.finalize(S,new v.ImportDeclaration(I,p))},C.prototype.parseExportSpecifier=function(){var p=this.createNode(),S=this.parseIdentifierName(),I=S;return this.matchContextualKeyword("as")&&(this.nextToken(),I=this.parseIdentifierName()),this.finalize(p,new v.ExportSpecifier(S,I))},C.prototype.parseExportDeclaration=function(){this.context.inFunctionBody&&this.throwError(f.Messages.IllegalExportDeclaration);var p,S=this.createNode();if(this.expectKeyword("export"),this.matchKeyword("default"))if(this.nextToken(),this.matchKeyword("function")){var I=this.parseFunctionDeclaration(!0);p=this.finalize(S,new v.ExportDefaultDeclaration(I))}else this.matchKeyword("class")?(I=this.parseClassDeclaration(!0),p=this.finalize(S,new v.ExportDefaultDeclaration(I))):this.matchContextualKeyword("async")?(I=this.matchAsyncFunction()?this.parseFunctionDeclaration(!0):this.parseAssignmentExpression(),p=this.finalize(S,new v.ExportDefaultDeclaration(I))):(this.matchContextualKeyword("from")&&this.throwError(f.Messages.UnexpectedToken,this.lookahead.value),I=this.match("{")?this.parseObjectInitializer():this.match("[")?this.parseArrayInitializer():this.parseAssignmentExpression(),this.consumeSemicolon(),p=this.finalize(S,new v.ExportDefaultDeclaration(I)));else if(this.match("*")){if(this.nextToken(),!this.matchContextualKeyword("from")){var D=this.lookahead.value?f.Messages.UnexpectedToken:f.Messages.MissingFromClause;this.throwError(D,this.lookahead.value)}this.nextToken();var E=this.parseModuleSpecifier();this.consumeSemicolon(),p=this.finalize(S,new v.ExportAllDeclaration(E))}else if(this.lookahead.type===4){switch(I=void 0,this.lookahead.value){case"let":case"const":I=this.parseLexicalDeclaration({inFor:!1});break;case"var":case"class":case"function":I=this.parseStatementListItem();break;default:this.throwUnexpectedToken(this.lookahead)}p=this.finalize(S,new v.ExportNamedDeclaration(I,[],null))}else if(this.matchAsyncFunction())I=this.parseFunctionDeclaration(),p=this.finalize(S,new v.ExportNamedDeclaration(I,[],null));else{var T=[],y=null,M=!1;for(this.expect("{");!this.match("}");)M=M||this.matchKeyword("default"),T.push(this.parseExportSpecifier()),this.match("}")||this.expect(",");this.expect("}"),this.matchContextualKeyword("from")?(this.nextToken(),y=this.parseModuleSpecifier(),this.consumeSemicolon()):M?(D=this.lookahead.value?f.Messages.UnexpectedToken:f.Messages.MissingFromClause,this.throwError(D,this.lookahead.value)):this.consumeSemicolon(),p=this.finalize(S,new v.ExportNamedDeclaration(null,T,y))}return p},C}();s.Parser=h},function(o,s){Object.defineProperty(s,"__esModule",{value:!0}),s.assert=function(c,l){if(!c)throw new Error("ASSERT: "+l)}},function(o,s){Object.defineProperty(s,"__esModule",{value:!0});var c=function(){function l(){this.errors=[],this.tolerant=!1}return l.prototype.recordError=function(u){this.errors.push(u)},l.prototype.tolerate=function(u){if(!this.tolerant)throw u;this.recordError(u)},l.prototype.constructError=function(u,f){var v=new Error(u);try{throw v}catch(g){Object.create&&Object.defineProperty&&(v=Object.create(g),Object.defineProperty(v,"column",{value:f}))}return v},l.prototype.createError=function(u,f,v,g){var d="Line "+f+": "+g,m=this.constructError(d,v);return m.index=u,m.lineNumber=f,m.description=g,m},l.prototype.throwError=function(u,f,v,g){throw this.createError(u,f,v,g)},l.prototype.tolerateError=function(u,f,v,g){var d=this.createError(u,f,v,g);if(!this.tolerant)throw d;this.recordError(d)},l}();s.ErrorHandler=c},function(o,s){Object.defineProperty(s,"__esModule",{value:!0}),s.Messages={BadGetterArity:"Getter must not have any formal parameters",BadSetterArity:"Setter must have exactly one formal parameter",BadSetterRestParameter:"Setter function argument must not be a rest parameter",ConstructorIsAsync:"Class constructor may not be an async method",ConstructorSpecialMethod:"Class constructor may not be an accessor",DeclarationMissingInitializer:"Missing initializer in %0 declaration",DefaultRestParameter:"Unexpected token =",DuplicateBinding:"Duplicate binding %0",DuplicateConstructor:"A class may only have one constructor",DuplicateProtoProperty:"Duplicate __proto__ fields are not allowed in object literals",ForInOfLoopInitializer:"%0 loop variable declaration may not have an initializer",GeneratorInLegacyContext:"Generator declarations are not allowed in legacy contexts",IllegalBreak:"Illegal break statement",IllegalContinue:"Illegal continue statement",IllegalExportDeclaration:"Unexpected token",IllegalImportDeclaration:"Unexpected token",IllegalLanguageModeDirective:"Illegal 'use strict' directive in function with non-simple parameter list",IllegalReturn:"Illegal return statement",InvalidEscapedReservedWord:"Keyword must not contain escaped characters",InvalidHexEscapeSequence:"Invalid hexadecimal escape sequence",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",InvalidLHSInForLoop:"Invalid left-hand side in for-loop",InvalidModuleSpecifier:"Unexpected token",InvalidRegExp:"Invalid regular expression",LetInLexicalBinding:"let is disallowed as a lexically bound name",MissingFromClause:"Unexpected token",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NewlineAfterThrow:"Illegal newline after throw",NoAsAfterImportNamespace:"Unexpected token",NoCatchOrFinally:"Missing catch or finally after try",ParameterAfterRestParameter:"Rest parameter must be last formal parameter",Redeclaration:"%0 '%1' has already been declared",StaticPrototype:"Classes may not have static property named prototype",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictFunction:"In strict mode code, functions can only be declared at top level or inside a block",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictModeWith:"Strict mode code may not include a with statement",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictReservedWord:"Use of future reserved word in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",UnexpectedEOS:"Unexpected end of input",UnexpectedIdentifier:"Unexpected identifier",UnexpectedNumber:"Unexpected number",UnexpectedReserved:"Unexpected reserved word",UnexpectedString:"Unexpected string",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedToken:"Unexpected token %0",UnexpectedTokenIllegal:"Unexpected token ILLEGAL",UnknownLabel:"Undefined label '%0'",UnterminatedRegExp:"Invalid regular expression: missing /"}},function(o,s,c){Object.defineProperty(s,"__esModule",{value:!0});var l=c(9),u=c(4),f=c(11);function v(m){return"0123456789abcdef".indexOf(m.toLowerCase())}function g(m){return"01234567".indexOf(m)}var d=function(){function m(h,C){this.source=h,this.errorHandler=C,this.trackComment=!1,this.isModule=!1,this.length=h.length,this.index=0,this.lineNumber=h.length>0?1:0,this.lineStart=0,this.curlyStack=[]}return m.prototype.saveState=function(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart}},m.prototype.restoreState=function(h){this.index=h.index,this.lineNumber=h.lineNumber,this.lineStart=h.lineStart},m.prototype.eof=function(){return this.index>=this.length},m.prototype.throwUnexpectedToken=function(h){return h===void 0&&(h=f.Messages.UnexpectedTokenIllegal),this.errorHandler.throwError(this.index,this.lineNumber,this.index-this.lineStart+1,h)},m.prototype.tolerateUnexpectedToken=function(h){h===void 0&&(h=f.Messages.UnexpectedTokenIllegal),this.errorHandler.tolerateError(this.index,this.lineNumber,this.index-this.lineStart+1,h)},m.prototype.skipSingleLineComment=function(h){var C,p,S=[];for(this.trackComment&&(S=[],C=this.index-h,p={start:{line:this.lineNumber,column:this.index-this.lineStart-h},end:{}});!this.eof();){var I=this.source.charCodeAt(this.index);if(++this.index,u.Character.isLineTerminator(I)){if(this.trackComment){p.end={line:this.lineNumber,column:this.index-this.lineStart-1};var D={multiLine:!1,slice:[C+h,this.index-1],range:[C,this.index-1],loc:p};S.push(D)}return I===13&&this.source.charCodeAt(this.index)===10&&++this.index,++this.lineNumber,this.lineStart=this.index,S}}return this.trackComment&&(p.end={line:this.lineNumber,column:this.index-this.lineStart},D={multiLine:!1,slice:[C+h,this.index],range:[C,this.index],loc:p},S.push(D)),S},m.prototype.skipMultiLineComment=function(){var h,C,p=[];for(this.trackComment&&(p=[],h=this.index-2,C={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{}});!this.eof();){var S=this.source.charCodeAt(this.index);if(u.Character.isLineTerminator(S))S===13&&this.source.charCodeAt(this.index+1)===10&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else if(S===42){if(this.source.charCodeAt(this.index+1)===47){if(this.index+=2,this.trackComment){C.end={line:this.lineNumber,column:this.index-this.lineStart};var I={multiLine:!0,slice:[h+2,this.index-2],range:[h,this.index],loc:C};p.push(I)}return p}++this.index}else++this.index}return this.trackComment&&(C.end={line:this.lineNumber,column:this.index-this.lineStart},I={multiLine:!0,slice:[h+2,this.index],range:[h,this.index],loc:C},p.push(I)),this.tolerateUnexpectedToken(),p},m.prototype.scanComments=function(){var h;this.trackComment&&(h=[]);for(var C=this.index===0;!this.eof();){var p=this.source.charCodeAt(this.index);if(u.Character.isWhiteSpace(p))++this.index;else if(u.Character.isLineTerminator(p))++this.index,p===13&&this.source.charCodeAt(this.index)===10&&++this.index,++this.lineNumber,this.lineStart=this.index,C=!0;else if(p===47)if((p=this.source.charCodeAt(this.index+1))===47){this.index+=2;var S=this.skipSingleLineComment(2);this.trackComment&&(h=h.concat(S)),C=!0}else{if(p!==42)break;this.index+=2,S=this.skipMultiLineComment(),this.trackComment&&(h=h.concat(S))}else if(C&&p===45){if(this.source.charCodeAt(this.index+1)!==45||this.source.charCodeAt(this.index+2)!==62)break;this.index+=3,S=this.skipSingleLineComment(3),this.trackComment&&(h=h.concat(S))}else{if(p!==60||this.isModule||this.source.slice(this.index+1,this.index+4)!=="!--")break;this.index+=4,S=this.skipSingleLineComment(4),this.trackComment&&(h=h.concat(S))}}return h},m.prototype.isFutureReservedWord=function(h){switch(h){case"enum":case"export":case"import":case"super":return!0;default:return!1}},m.prototype.isStrictModeReservedWord=function(h){switch(h){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}},m.prototype.isRestrictedWord=function(h){return h==="eval"||h==="arguments"},m.prototype.isKeyword=function(h){switch(h.length){case 2:return h==="if"||h==="in"||h==="do";case 3:return h==="var"||h==="for"||h==="new"||h==="try"||h==="let";case 4:return h==="this"||h==="else"||h==="case"||h==="void"||h==="with"||h==="enum";case 5:return h==="while"||h==="break"||h==="catch"||h==="throw"||h==="const"||h==="yield"||h==="class"||h==="super";case 6:return h==="return"||h==="typeof"||h==="delete"||h==="switch"||h==="export"||h==="import";case 7:return h==="default"||h==="finally"||h==="extends";case 8:return h==="function"||h==="continue"||h==="debugger";case 10:return h==="instanceof";default:return!1}},m.prototype.codePointAt=function(h){var C=this.source.charCodeAt(h);if(C>=55296&&C<=56319){var p=this.source.charCodeAt(h+1);p>=56320&&p<=57343&&(C=1024*(C-55296)+p-56320+65536)}return C},m.prototype.scanHexEscape=function(h){for(var C=h==="u"?4:2,p=0,S=0;S<C;++S){if(this.eof()||!u.Character.isHexDigit(this.source.charCodeAt(this.index)))return null;p=16*p+v(this.source[this.index++])}return String.fromCharCode(p)},m.prototype.scanUnicodeCodePointEscape=function(){var h=this.source[this.index],C=0;for(h==="}"&&this.throwUnexpectedToken();!this.eof()&&(h=this.source[this.index++],u.Character.isHexDigit(h.charCodeAt(0)));)C=16*C+v(h);return(C>1114111||h!=="}")&&this.throwUnexpectedToken(),u.Character.fromCodePoint(C)},m.prototype.getIdentifier=function(){for(var h=this.index++;!this.eof();){var C=this.source.charCodeAt(this.index);if(C===92)return this.index=h,this.getComplexIdentifier();if(C>=55296&&C<57343)return this.index=h,this.getComplexIdentifier();if(!u.Character.isIdentifierPart(C))break;++this.index}return this.source.slice(h,this.index)},m.prototype.getComplexIdentifier=function(){var h,C=this.codePointAt(this.index),p=u.Character.fromCodePoint(C);for(this.index+=p.length,C===92&&(this.source.charCodeAt(this.index)!==117&&this.throwUnexpectedToken(),++this.index,this.source[this.index]==="{"?(++this.index,h=this.scanUnicodeCodePointEscape()):(h=this.scanHexEscape("u"))!==null&&h!=="\\"&&u.Character.isIdentifierStart(h.charCodeAt(0))||this.throwUnexpectedToken(),p=h);!this.eof()&&(C=this.codePointAt(this.index),u.Character.isIdentifierPart(C));)p+=h=u.Character.fromCodePoint(C),this.index+=h.length,C===92&&(p=p.substr(0,p.length-1),this.source.charCodeAt(this.index)!==117&&this.throwUnexpectedToken(),++this.index,this.source[this.index]==="{"?(++this.index,h=this.scanUnicodeCodePointEscape()):(h=this.scanHexEscape("u"))!==null&&h!=="\\"&&u.Character.isIdentifierPart(h.charCodeAt(0))||this.throwUnexpectedToken(),p+=h);return p},m.prototype.octalToDecimal=function(h){var C=h!=="0",p=g(h);return!this.eof()&&u.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(C=!0,p=8*p+g(this.source[this.index++]),"0123".indexOf(h)>=0&&!this.eof()&&u.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(p=8*p+g(this.source[this.index++]))),{code:p,octal:C}},m.prototype.scanIdentifier=function(){var h,C=this.index,p=this.source.charCodeAt(C)===92?this.getComplexIdentifier():this.getIdentifier();if((h=p.length===1?3:this.isKeyword(p)?4:p==="null"?5:p==="true"||p==="false"?1:3)!=3&&C+p.length!==this.index){var S=this.index;this.index=C,this.tolerateUnexpectedToken(f.Messages.InvalidEscapedReservedWord),this.index=S}return{type:h,value:p,lineNumber:this.lineNumber,lineStart:this.lineStart,start:C,end:this.index}},m.prototype.scanPunctuator=function(){var h=this.index,C=this.source[this.index];switch(C){case"(":case"{":C==="{"&&this.curlyStack.push("{"),++this.index;break;case".":++this.index,this.source[this.index]==="."&&this.source[this.index+1]==="."&&(this.index+=2,C="...");break;case"}":++this.index,this.curlyStack.pop();break;case")":case";":case",":case"[":case"]":case":":case"?":case"~":++this.index;break;default:(C=this.source.substr(this.index,4))===">>>="?this.index+=4:(C=C.substr(0,3))==="==="||C==="!=="||C===">>>"||C==="<<="||C===">>="||C==="**="?this.index+=3:(C=C.substr(0,2))==="&&"||C==="||"||C==="=="||C==="!="||C==="+="||C==="-="||C==="*="||C==="/="||C==="++"||C==="--"||C==="<<"||C===">>"||C==="&="||C==="|="||C==="^="||C==="%="||C==="<="||C===">="||C==="=>"||C==="**"?this.index+=2:(C=this.source[this.index],"<>=!+-*%&|^/".indexOf(C)>=0&&++this.index)}return this.index===h&&this.throwUnexpectedToken(),{type:7,value:C,lineNumber:this.lineNumber,lineStart:this.lineStart,start:h,end:this.index}},m.prototype.scanHexLiteral=function(h){for(var C="";!this.eof()&&u.Character.isHexDigit(this.source.charCodeAt(this.index));)C+=this.source[this.index++];return C.length===0&&this.throwUnexpectedToken(),u.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseInt("0x"+C,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:h,end:this.index}},m.prototype.scanBinaryLiteral=function(h){for(var C,p="";!this.eof()&&((C=this.source[this.index])==="0"||C==="1");)p+=this.source[this.index++];return p.length===0&&this.throwUnexpectedToken(),this.eof()||(C=this.source.charCodeAt(this.index),(u.Character.isIdentifierStart(C)||u.Character.isDecimalDigit(C))&&this.throwUnexpectedToken()),{type:6,value:parseInt(p,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:h,end:this.index}},m.prototype.scanOctalLiteral=function(h,C){var p="",S=!1;for(u.Character.isOctalDigit(h.charCodeAt(0))?(S=!0,p="0"+this.source[this.index++]):++this.index;!this.eof()&&u.Character.isOctalDigit(this.source.charCodeAt(this.index));)p+=this.source[this.index++];return S||p.length!==0||this.throwUnexpectedToken(),(u.Character.isIdentifierStart(this.source.charCodeAt(this.index))||u.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken(),{type:6,value:parseInt(p,8),octal:S,lineNumber:this.lineNumber,lineStart:this.lineStart,start:C,end:this.index}},m.prototype.isImplicitOctalLiteral=function(){for(var h=this.index+1;h<this.length;++h){var C=this.source[h];if(C==="8"||C==="9")return!1;if(!u.Character.isOctalDigit(C.charCodeAt(0)))return!0}return!0},m.prototype.scanNumericLiteral=function(){var h=this.index,C=this.source[h];l.assert(u.Character.isDecimalDigit(C.charCodeAt(0))||C===".","Numeric literal must start with a decimal digit or a decimal point");var p="";if(C!=="."){if(p=this.source[this.index++],C=this.source[this.index],p==="0"){if(C==="x"||C==="X")return++this.index,this.scanHexLiteral(h);if(C==="b"||C==="B")return++this.index,this.scanBinaryLiteral(h);if(C==="o"||C==="O")return this.scanOctalLiteral(C,h);if(C&&u.Character.isOctalDigit(C.charCodeAt(0))&&this.isImplicitOctalLiteral())return this.scanOctalLiteral(C,h)}for(;u.Character.isDecimalDigit(this.source.charCodeAt(this.index));)p+=this.source[this.index++];C=this.source[this.index]}if(C==="."){for(p+=this.source[this.index++];u.Character.isDecimalDigit(this.source.charCodeAt(this.index));)p+=this.source[this.index++];C=this.source[this.index]}if(C==="e"||C==="E")if(p+=this.source[this.index++],(C=this.source[this.index])!=="+"&&C!=="-"||(p+=this.source[this.index++]),u.Character.isDecimalDigit(this.source.charCodeAt(this.index)))for(;u.Character.isDecimalDigit(this.source.charCodeAt(this.index));)p+=this.source[this.index++];else this.throwUnexpectedToken();return u.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseFloat(p),lineNumber:this.lineNumber,lineStart:this.lineStart,start:h,end:this.index}},m.prototype.scanStringLiteral=function(){var h=this.index,C=this.source[h];l.assert(C==="'"||C==='"',"String literal must starts with a quote"),++this.index;for(var p=!1,S="";!this.eof();){var I=this.source[this.index++];if(I===C){C="";break}if(I==="\\")if((I=this.source[this.index++])&&u.Character.isLineTerminator(I.charCodeAt(0)))++this.lineNumber,I==="\r"&&this.source[this.index]===`
`&&++this.index,this.lineStart=this.index;else switch(I){case"u":if(this.source[this.index]==="{")++this.index,S+=this.scanUnicodeCodePointEscape();else{var D=this.scanHexEscape(I);D===null&&this.throwUnexpectedToken(),S+=D}break;case"x":var E=this.scanHexEscape(I);E===null&&this.throwUnexpectedToken(f.Messages.InvalidHexEscapeSequence),S+=E;break;case"n":S+=`
`;break;case"r":S+="\r";break;case"t":S+="	";break;case"b":S+="\b";break;case"f":S+="\f";break;case"v":S+="\v";break;case"8":case"9":S+=I,this.tolerateUnexpectedToken();break;default:if(I&&u.Character.isOctalDigit(I.charCodeAt(0))){var T=this.octalToDecimal(I);p=T.octal||p,S+=String.fromCharCode(T.code)}else S+=I}else{if(u.Character.isLineTerminator(I.charCodeAt(0)))break;S+=I}}return C!==""&&(this.index=h,this.throwUnexpectedToken()),{type:8,value:S,octal:p,lineNumber:this.lineNumber,lineStart:this.lineStart,start:h,end:this.index}},m.prototype.scanTemplate=function(){var h="",C=!1,p=this.index,S=this.source[p]==="`",I=!1,D=2;for(++this.index;!this.eof();){var E=this.source[this.index++];if(E==="`"){D=1,I=!0,C=!0;break}if(E==="$"){if(this.source[this.index]==="{"){this.curlyStack.push("${"),++this.index,C=!0;break}h+=E}else if(E==="\\")if(E=this.source[this.index++],u.Character.isLineTerminator(E.charCodeAt(0)))++this.lineNumber,E==="\r"&&this.source[this.index]===`
`&&++this.index,this.lineStart=this.index;else switch(E){case"n":h+=`
`;break;case"r":h+="\r";break;case"t":h+="	";break;case"u":if(this.source[this.index]==="{")++this.index,h+=this.scanUnicodeCodePointEscape();else{var T=this.index,y=this.scanHexEscape(E);y!==null?h+=y:(this.index=T,h+=E)}break;case"x":var M=this.scanHexEscape(E);M===null&&this.throwUnexpectedToken(f.Messages.InvalidHexEscapeSequence),h+=M;break;case"b":h+="\b";break;case"f":h+="\f";break;case"v":h+="\v";break;default:E==="0"?(u.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(f.Messages.TemplateOctalLiteral),h+="\0"):u.Character.isOctalDigit(E.charCodeAt(0))?this.throwUnexpectedToken(f.Messages.TemplateOctalLiteral):h+=E}else u.Character.isLineTerminator(E.charCodeAt(0))?(++this.lineNumber,E==="\r"&&this.source[this.index]===`
`&&++this.index,this.lineStart=this.index,h+=`
`):h+=E}return C||this.throwUnexpectedToken(),S||this.curlyStack.pop(),{type:10,value:this.source.slice(p+1,this.index-D),cooked:h,head:S,tail:I,lineNumber:this.lineNumber,lineStart:this.lineStart,start:p,end:this.index}},m.prototype.testRegExp=function(h,C){var p=h,S=this;C.indexOf("u")>=0&&(p=p.replace(/\\u\{([0-9a-fA-F]+)\}|\\u([a-fA-F0-9]{4})/g,function(I,D,E){var T=parseInt(D||E,16);return T>1114111&&S.throwUnexpectedToken(f.Messages.InvalidRegExp),T<=65535?String.fromCharCode(T):""}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,""));try{RegExp(p)}catch{this.throwUnexpectedToken(f.Messages.InvalidRegExp)}try{return new RegExp(h,C)}catch{return null}},m.prototype.scanRegExpBody=function(){var h=this.source[this.index];l.assert(h==="/","Regular expression literal must start with a slash");for(var C=this.source[this.index++],p=!1,S=!1;!this.eof();)if(C+=h=this.source[this.index++],h==="\\")h=this.source[this.index++],u.Character.isLineTerminator(h.charCodeAt(0))&&this.throwUnexpectedToken(f.Messages.UnterminatedRegExp),C+=h;else if(u.Character.isLineTerminator(h.charCodeAt(0)))this.throwUnexpectedToken(f.Messages.UnterminatedRegExp);else if(p)h==="]"&&(p=!1);else{if(h==="/"){S=!0;break}h==="["&&(p=!0)}return S||this.throwUnexpectedToken(f.Messages.UnterminatedRegExp),C.substr(1,C.length-2)},m.prototype.scanRegExpFlags=function(){for(var h="";!this.eof();){var C=this.source[this.index];if(!u.Character.isIdentifierPart(C.charCodeAt(0)))break;if(++this.index,C!=="\\"||this.eof())h+=C;else if((C=this.source[this.index])==="u"){++this.index;var p=this.index,S=this.scanHexEscape("u");if(S!==null)for(h+=S;p<this.index;++p)this.source[p];else this.index=p,h+="u";this.tolerateUnexpectedToken()}else this.tolerateUnexpectedToken()}return h},m.prototype.scanRegExp=function(){var h=this.index,C=this.scanRegExpBody(),p=this.scanRegExpFlags();return{type:9,value:"",pattern:C,flags:p,regex:this.testRegExp(C,p),lineNumber:this.lineNumber,lineStart:this.lineStart,start:h,end:this.index}},m.prototype.lex=function(){if(this.eof())return{type:2,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};var h=this.source.charCodeAt(this.index);return u.Character.isIdentifierStart(h)?this.scanIdentifier():h===40||h===41||h===59?this.scanPunctuator():h===39||h===34?this.scanStringLiteral():h===46?u.Character.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.scanNumericLiteral():this.scanPunctuator():u.Character.isDecimalDigit(h)?this.scanNumericLiteral():h===96||h===125&&this.curlyStack[this.curlyStack.length-1]==="${"?this.scanTemplate():h>=55296&&h<57343&&u.Character.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()},m}();s.Scanner=d},function(o,s){Object.defineProperty(s,"__esModule",{value:!0}),s.TokenName={},s.TokenName[1]="Boolean",s.TokenName[2]="<end>",s.TokenName[3]="Identifier",s.TokenName[4]="Keyword",s.TokenName[5]="Null",s.TokenName[6]="Numeric",s.TokenName[7]="Punctuator",s.TokenName[8]="String",s.TokenName[9]="RegularExpression",s.TokenName[10]="Template"},function(o,s){Object.defineProperty(s,"__esModule",{value:!0}),s.XHTMLEntities={quot:'"',amp:"&",apos:"'",gt:">",nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",times:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",divide:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",fnof:"",circ:"",tilde:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",bull:"",hellip:"",permil:"",prime:"",Prime:"",lsaquo:"",rsaquo:"",oline:"",frasl:"",euro:"",image:"",weierp:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",loz:"",spades:"",clubs:"",hearts:"",diams:"",lang:"",rang:""}},function(o,s,c){Object.defineProperty(s,"__esModule",{value:!0});var l=c(10),u=c(12),f=c(13),v=function(){function d(){this.values=[],this.curly=this.paren=-1}return d.prototype.beforeFunctionExpression=function(m){return["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","**=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","**","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="].indexOf(m)>=0},d.prototype.isRegexStart=function(){var m=this.values[this.values.length-1],h=m!==null;switch(m){case"this":case"]":h=!1;break;case")":var C=this.values[this.paren-1];h=C==="if"||C==="while"||C==="for"||C==="with";break;case"}":if(h=!1,this.values[this.curly-3]==="function")h=!!(p=this.values[this.curly-4])&&!this.beforeFunctionExpression(p);else if(this.values[this.curly-4]==="function"){var p;h=!(p=this.values[this.curly-5])||!this.beforeFunctionExpression(p)}}return h},d.prototype.push=function(m){m.type===7||m.type===4?(m.value==="{"?this.curly=this.values.length:m.value==="("&&(this.paren=this.values.length),this.values.push(m.value)):this.values.push(null)},d}(),g=function(){function d(m,h){this.errorHandler=new l.ErrorHandler,this.errorHandler.tolerant=!!h&&typeof h.tolerant=="boolean"&&h.tolerant,this.scanner=new u.Scanner(m,this.errorHandler),this.scanner.trackComment=!!h&&typeof h.comment=="boolean"&&h.comment,this.trackRange=!!h&&typeof h.range=="boolean"&&h.range,this.trackLoc=!!h&&typeof h.loc=="boolean"&&h.loc,this.buffer=[],this.reader=new v}return d.prototype.errors=function(){return this.errorHandler.errors},d.prototype.getNextToken=function(){if(this.buffer.length===0){var m=this.scanner.scanComments();if(this.scanner.trackComment)for(var h=0;h<m.length;++h){var C=m[h],p=this.scanner.source.slice(C.slice[0],C.slice[1]),S={type:C.multiLine?"BlockComment":"LineComment",value:p};this.trackRange&&(S.range=C.range),this.trackLoc&&(S.loc=C.loc),this.buffer.push(S)}if(!this.scanner.eof()){var I=void 0;this.trackLoc&&(I={start:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},end:{}});var D=this.scanner.source[this.scanner.index]==="/"&&this.reader.isRegexStart()?this.scanner.scanRegExp():this.scanner.lex();this.reader.push(D);var E={type:f.TokenName[D.type],value:this.scanner.source.slice(D.start,D.end)};if(this.trackRange&&(E.range=[D.start,D.end]),this.trackLoc&&(I.end={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},E.loc=I),D.type===9){var T=D.pattern,y=D.flags;E.regex={pattern:T,flags:y}}this.buffer.push(E)}}return this.buffer.shift()},d}();s.Tokenizer=g}])},n.exports=i()},function(n,r,a){var i=a(38),o=a(53),s=a(76),c=a(54),l=Object.prototype.toString,u=Object.prototype.hasOwnProperty,f={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},v=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"];function g(P){var R,L,H;if(R=P.toString(16).toUpperCase(),P<=255)L="x",H=2;else if(P<=65535)L="u",H=4;else{if(!(P<=4294967295))throw new o("code point within a string may not be greater than 0xFFFFFFFF");L="U",H=8}return"\\"+L+i.repeat("0",H-R.length)+R}function d(P){this.schema=P.schema||s,this.indent=Math.max(1,P.indent||2),this.noArrayIndent=P.noArrayIndent||!1,this.skipInvalid=P.skipInvalid||!1,this.flowLevel=i.isNothing(P.flowLevel)?-1:P.flowLevel,this.styleMap=function(R,L){var H,F,U,V,X,re,ue;if(L===null)return{};for(H={},U=0,V=(F=Object.keys(L)).length;U<V;U+=1)X=F[U],re=String(L[X]),X.slice(0,2)==="!!"&&(X="tag:yaml.org,2002:"+X.slice(2)),(ue=R.compiledTypeMap.fallback[X])&&u.call(ue.styleAliases,re)&&(re=ue.styleAliases[re]),H[X]=re;return H}(this.schema,P.styles||null),this.sortKeys=P.sortKeys||!1,this.lineWidth=P.lineWidth||80,this.noRefs=P.noRefs||!1,this.noCompatMode=P.noCompatMode||!1,this.condenseFlow=P.condenseFlow||!1,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function m(P,R){for(var L,H=i.repeat(" ",R),F=0,U=-1,V="",X=P.length;F<X;)(U=P.indexOf(`
`,F))===-1?(L=P.slice(F),F=X):(L=P.slice(F,U+1),F=U+1),L.length&&L!==`
`&&(V+=H),V+=L;return V}function h(P,R){return`
`+i.repeat(" ",P.indent*R)}function C(P){return P===32||P===9}function p(P){return 32<=P&&P<=126||161<=P&&P<=55295&&P!==8232&&P!==8233||57344<=P&&P<=65533&&P!==65279||65536<=P&&P<=1114111}function S(P,R){return p(P)&&P!==65279&&P!==44&&P!==91&&P!==93&&P!==123&&P!==125&&P!==58&&(P!==35||R&&function(L){return p(L)&&!C(L)&&L!==65279&&L!==13&&L!==10}(R))}function I(P){return/^\n* /.test(P)}function D(P,R,L,H,F){var U,V,X,re,ue=!1,De=!1,pe=H!==-1,Te=-1,Fe=p(re=P.charCodeAt(0))&&re!==65279&&!C(re)&&re!==45&&re!==63&&re!==58&&re!==44&&re!==91&&re!==93&&re!==123&&re!==125&&re!==35&&re!==38&&re!==42&&re!==33&&re!==124&&re!==61&&re!==62&&re!==39&&re!==34&&re!==37&&re!==64&&re!==96&&!C(P.charCodeAt(P.length-1));if(R)for(U=0;U<P.length;U++){if(!p(V=P.charCodeAt(U)))return 5;X=U>0?P.charCodeAt(U-1):null,Fe=Fe&&S(V,X)}else{for(U=0;U<P.length;U++){if((V=P.charCodeAt(U))===10)ue=!0,pe&&(De=De||U-Te-1>H&&P[Te+1]!==" ",Te=U);else if(!p(V))return 5;X=U>0?P.charCodeAt(U-1):null,Fe=Fe&&S(V,X)}De=De||pe&&U-Te-1>H&&P[Te+1]!==" "}return ue||De?L>9&&I(P)?5:De?4:3:Fe&&!F(P)?1:2}function E(P,R,L,H){P.dump=function(){if(R.length===0)return"''";if(!P.noCompatMode&&v.indexOf(R)!==-1)return"'"+R+"'";var F=P.indent*Math.max(1,L),U=P.lineWidth===-1?-1:Math.max(Math.min(P.lineWidth,40),P.lineWidth-F),V=H||P.flowLevel>-1&&L>=P.flowLevel;switch(D(R,V,P.indent,U,function(X){return function(re,ue){var De,pe;for(De=0,pe=re.implicitTypes.length;De<pe;De+=1)if(re.implicitTypes[De].resolve(ue))return!0;return!1}(P,X)})){case 1:return R;case 2:return"'"+R.replace(/'/g,"''")+"'";case 3:return"|"+T(R,P.indent)+y(m(R,F));case 4:return">"+T(R,P.indent)+y(m(function(X,re){for(var ue,De,pe=/(\n+)([^\n]*)/g,Te=(Ne=X.indexOf(`
`),Ne=Ne!==-1?Ne:X.length,pe.lastIndex=Ne,M(X.slice(0,Ne),re)),Fe=X[0]===`
`||X[0]===" ",Ne;De=pe.exec(X);){var Re=De[1],k=De[2];ue=k[0]===" ",Te+=Re+(Fe||ue||k===""?"":`
`)+M(k,re),Fe=ue}return Te}(R,U),F));case 5:return'"'+function(X){for(var re,ue,De,pe="",Te=0;Te<X.length;Te++)(re=X.charCodeAt(Te))>=55296&&re<=56319&&(ue=X.charCodeAt(Te+1))>=56320&&ue<=57343?(pe+=g(1024*(re-55296)+ue-56320+65536),Te++):(De=f[re],pe+=!De&&p(re)?X[Te]:De||g(re));return pe}(R)+'"';default:throw new o("impossible error: invalid scalar style")}}()}function T(P,R){var L=I(P)?String(R):"",H=P[P.length-1]===`
`;return L+(H&&(P[P.length-2]===`
`||P===`
`)?"+":H?"":"-")+`
`}function y(P){return P[P.length-1]===`
`?P.slice(0,-1):P}function M(P,R){if(P===""||P[0]===" ")return P;for(var L,H,F=/ [^ ]/g,U=0,V=0,X=0,re="";L=F.exec(P);)(X=L.index)-U>R&&(H=V>U?V:X,re+=`
`+P.slice(U,H),U=H+1),V=X;return re+=`
`,P.length-U>R&&V>U?re+=P.slice(U,V)+`
`+P.slice(V+1):re+=P.slice(U),re.slice(1)}function _(P,R,L){var H,F,U,V,X,re;for(U=0,V=(F=L?P.explicitTypes:P.implicitTypes).length;U<V;U+=1)if(((X=F[U]).instanceOf||X.predicate)&&(!X.instanceOf||typeof R=="object"&&R instanceof X.instanceOf)&&(!X.predicate||X.predicate(R))){if(P.tag=L?X.tag:"?",X.represent){if(re=P.styleMap[X.tag]||X.defaultStyle,l.call(X.represent)==="[object Function]")H=X.represent(R,re);else{if(!u.call(X.represent,re))throw new o("!<"+X.tag+'> tag resolver accepts not "'+re+'" style');H=X.represent[re](R,re)}P.dump=H}return!0}return!1}function O(P,R,L,H,F,U){P.tag=null,P.dump=L,_(P,L,!1)||_(P,L,!0);var V=l.call(P.dump);H&&(H=P.flowLevel<0||P.flowLevel>R);var X,re,ue=V==="[object Object]"||V==="[object Array]";if(ue&&(re=(X=P.duplicates.indexOf(L))!==-1),(P.tag!==null&&P.tag!=="?"||re||P.indent!==2&&R>0)&&(F=!1),re&&P.usedDuplicates[X])P.dump="*ref_"+X;else{if(ue&&re&&!P.usedDuplicates[X]&&(P.usedDuplicates[X]=!0),V==="[object Object]")H&&Object.keys(P.dump).length!==0?(function(pe,Te,Fe,Ne){var Re,k,A,b,N,W,j="",K=pe.tag,ge=Object.keys(Fe);if(pe.sortKeys===!0)ge.sort();else if(typeof pe.sortKeys=="function")ge.sort(pe.sortKeys);else if(pe.sortKeys)throw new o("sortKeys must be a boolean or a function");for(Re=0,k=ge.length;Re<k;Re+=1)W="",Ne&&Re===0||(W+=h(pe,Te)),b=Fe[A=ge[Re]],O(pe,Te+1,A,!0,!0,!0)&&((N=pe.tag!==null&&pe.tag!=="?"||pe.dump&&pe.dump.length>1024)&&(pe.dump&&pe.dump.charCodeAt(0)===10?W+="?":W+="? "),W+=pe.dump,N&&(W+=h(pe,Te)),O(pe,Te+1,b,!0,N)&&(pe.dump&&pe.dump.charCodeAt(0)===10?W+=":":W+=": ",j+=W+=pe.dump));pe.tag=K,pe.dump=j||"{}"}(P,R,P.dump,F),re&&(P.dump="&ref_"+X+P.dump)):(function(pe,Te,Fe){var Ne,Re,k,A,b,N="",W=pe.tag,j=Object.keys(Fe);for(Ne=0,Re=j.length;Ne<Re;Ne+=1)b="",Ne!==0&&(b+=", "),pe.condenseFlow&&(b+='"'),A=Fe[k=j[Ne]],O(pe,Te,k,!1,!1)&&(pe.dump.length>1024&&(b+="? "),b+=pe.dump+(pe.condenseFlow?'"':"")+":"+(pe.condenseFlow?"":" "),O(pe,Te,A,!1,!1)&&(N+=b+=pe.dump));pe.tag=W,pe.dump="{"+N+"}"}(P,R,P.dump),re&&(P.dump="&ref_"+X+" "+P.dump));else if(V==="[object Array]"){var De=P.noArrayIndent&&R>0?R-1:R;H&&P.dump.length!==0?(function(pe,Te,Fe,Ne){var Re,k,A="",b=pe.tag;for(Re=0,k=Fe.length;Re<k;Re+=1)O(pe,Te+1,Fe[Re],!0,!0)&&(Ne&&Re===0||(A+=h(pe,Te)),pe.dump&&pe.dump.charCodeAt(0)===10?A+="-":A+="- ",A+=pe.dump);pe.tag=b,pe.dump=A||"[]"}(P,De,P.dump,F),re&&(P.dump="&ref_"+X+P.dump)):(function(pe,Te,Fe){var Ne,Re,k="",A=pe.tag;for(Ne=0,Re=Fe.length;Ne<Re;Ne+=1)O(pe,Te,Fe[Ne],!1,!1)&&(Ne!==0&&(k+=","+(pe.condenseFlow?"":" ")),k+=pe.dump);pe.tag=A,pe.dump="["+k+"]"}(P,De,P.dump),re&&(P.dump="&ref_"+X+" "+P.dump))}else{if(V!=="[object String]"){if(P.skipInvalid)return!1;throw new o("unacceptable kind of an object to dump "+V)}P.tag!=="?"&&E(P,P.dump,R,U)}P.tag!==null&&P.tag!=="?"&&(P.dump="!<"+P.tag+"> "+P.dump)}return!0}function w(P,R){var L,H,F=[],U=[];for(function V(X,re,ue){var De,pe,Te;if(X!==null&&typeof X=="object")if((pe=re.indexOf(X))!==-1)ue.indexOf(pe)===-1&&ue.push(pe);else if(re.push(X),Array.isArray(X))for(pe=0,Te=X.length;pe<Te;pe+=1)V(X[pe],re,ue);else for(De=Object.keys(X),pe=0,Te=De.length;pe<Te;pe+=1)V(X[De[pe]],re,ue)}(P,F,U),L=0,H=U.length;L<H;L+=1)R.duplicates.push(F[U[L]]);R.usedDuplicates=new Array(H)}function x(P,R){var L=new d(R=R||{});return L.noRefs||w(P,L),O(L,0,P,!0,!0)?L.dump+`
`:""}n.exports.dump=x,n.exports.safeDump=function(P,R){return x(P,i.extend({schema:c},R))}},function(n,r,a){a(31),a(32),a(33),a(64),a(19),a(65),a(20),a(68),a(92),a(144),a(22),a(94),a(23);var i,o=this&&this.__extends||(i=function(D,E){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,y){T.__proto__=y}||function(T,y){for(var M in y)y.hasOwnProperty(M)&&(T[M]=y[M])})(D,E)},function(D,E){function T(){this.constructor=D}i(D,E),D.prototype=E===null?Object.create(E):(T.prototype=E.prototype,new T)}),s=this&&this.__values||function(D){var E=typeof Symbol=="function"&&Symbol.iterator,T=E&&D[E],y=0;if(T)return T.call(D);if(D&&typeof D.length=="number")return{next:function(){return D&&y>=D.length&&(D=void 0),{value:D&&D[y++],done:!D}}};throw new TypeError(E?"Object is not iterable.":"Symbol.iterator is not defined.")},c=this&&this.__read||function(D,E){var T=typeof Symbol=="function"&&D[Symbol.iterator];if(!T)return D;var y,M,_=T.call(D),O=[];try{for(;(E===void 0||E-- >0)&&!(y=_.next()).done;)O.push(y.value)}catch(w){M={error:w}}finally{try{y&&!y.done&&(T=_.return)&&T.call(_)}finally{if(M)throw M.error}}return O};Object.defineProperty(r,"__esModule",{value:!0});var l=a(91),u=a(1),f=a(183),v=a(0),g=a(7),d=a(95),m=a(69),h=a(3),C=a(305),p=a(306),S=a(307),I=function(D){function E(T,y){y===void 0&&(y=!1);var M=D.call(this)||this;return M._hasDeclaration=!1,M._docTypeName="",M._hasDocumentElement=!1,M._currentElementSerialized=!1,M._openTags=[],M._ended=!1,M._fragment=y,M._options=u.applyDefaults(T||{},l.DefaultXMLBuilderCBOptions),M._builderOptions={defaultNamespace:M._options.defaultNamespace,namespaceAlias:M._options.namespaceAlias},M._options.format==="json"?M._writer=new p.JSONCBWriter(M._options):M._options.format==="yaml"?M._writer=new S.YAMLCBWriter(M._options):M._writer=new C.XMLCBWriter(M._options),M._options.data!==void 0&&M.on("data",M._options.data),M._options.end!==void 0&&M.on("end",M._options.end),M._options.error!==void 0&&M.on("error",M._options.error),M._prefixMap=new d.NamespacePrefixMap,M._prefixMap.set("xml",g.namespace.XML),M._prefixIndex={value:1},M._push(M._writer.frontMatter()),M}return o(E,D),E.prototype.ele=function(T,y,M){var _,O;if(u.isObject(T)||u.isString(T)&&(/^\s*</.test(T)||/^\s*[\{\[]/.test(T)||/^(\s*|(#.*)|(%.*))*---/.test(T))){var w=f.fragment().set(this._options);try{w.ele(T)}catch(L){return this.emit("error",L),this}try{for(var x=s(w.node.childNodes),P=x.next();!P.done;P=x.next()){var R=P.value;this._fromNode(R)}}catch(L){_={error:L}}finally{try{P&&!P.done&&(O=x.return)&&O.call(x)}finally{if(_)throw _.error}}return this}if(this._serializeOpenTag(!0),!this._fragment&&this._hasDocumentElement&&this._writer.level===0)return this.emit("error",new Error("Document cannot have multiple document element nodes.")),this;try{this._currentElement=f.fragment(this._builderOptions).ele(T,y,M)}catch(L){return this.emit("error",L),this}return this._fragment||this._hasDocumentElement||this._docTypeName===""||this._currentElement.node._qualifiedName===this._docTypeName?(this._currentElementSerialized=!1,this._fragment||(this._hasDocumentElement=!0),this):(this.emit("error",new Error("Document element name does not match DocType declaration name.")),this)},E.prototype.att=function(T,y,M){if(this._currentElement===void 0)return this.emit("error",new Error("Cannot insert an attribute node as child of a document node.")),this;try{this._currentElement.att(T,y,M)}catch(_){return this.emit("error",_),this}return this},E.prototype.com=function(T){var y;this._serializeOpenTag(!0);try{y=f.fragment(this._builderOptions).com(T).first().node}catch(M){return this.emit("error",M),this}return!this._options.wellFormed||v.xml_isLegalChar(y.data)&&y.data.indexOf("--")===-1&&!y.data.endsWith("-")?(this._push(this._writer.comment(y.data)),this):(this.emit("error",new Error("Comment data contains invalid characters (well-formed required).")),this)},E.prototype.txt=function(T){if(!this._fragment&&this._currentElement===void 0)return this.emit("error",new Error("Cannot insert a text node as child of a document node.")),this;var y;this._serializeOpenTag(!0);try{y=f.fragment(this._builderOptions).txt(T).first().node}catch(_){return this.emit("error",_),this}if(this._options.wellFormed&&!v.xml_isLegalChar(y.data))return this.emit("error",new Error("Text data contains invalid characters (well-formed required).")),this;var M=y.data.replace(/(?!&(lt|gt|amp|apos|quot);)&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");return this._push(this._writer.text(M)),this},E.prototype.ins=function(T,y){var M;y===void 0&&(y=""),this._serializeOpenTag(!0);try{M=f.fragment(this._builderOptions).ins(T,y).first().node}catch(_){return this.emit("error",_),this}return this._options.wellFormed&&(M.target.indexOf(":")!==-1||/^xml$/i.test(M.target))?(this.emit("error",new Error("Processing instruction target contains invalid characters (well-formed required).")),this):this._options.wellFormed&&!v.xml_isLegalChar(M.data)?(this.emit("error",Error("Processing instruction data contains invalid characters (well-formed required).")),this):(this._push(this._writer.instruction(M.target,M.data)),this)},E.prototype.dat=function(T){var y;this._serializeOpenTag(!0);try{y=f.fragment(this._builderOptions).dat(T).first().node}catch(M){return this.emit("error",M),this}return this._push(this._writer.cdata(y.data)),this},E.prototype.dec=function(T){return T===void 0&&(T={version:"1.0"}),this._fragment?(this.emit("error",Error("Cannot insert an XML declaration into a document fragment.")),this):this._hasDeclaration?(this.emit("error",Error("XML declaration is already inserted.")),this):(this._push(this._writer.declaration(T.version||"1.0",T.encoding,T.standalone)),this._hasDeclaration=!0,this)},E.prototype.dtd=function(T){if(this._fragment)return this.emit("error",Error("Cannot insert a DocType declaration into a document fragment.")),this;if(this._docTypeName!=="")return this.emit("error",new Error("DocType declaration is already inserted.")),this;if(this._hasDocumentElement)return this.emit("error",new Error("Cannot insert DocType declaration after document element.")),this;var y;try{y=f.create().dtd(T).first().node}catch(M){return this.emit("error",M),this}return this._options.wellFormed&&!v.xml_isPubidChar(y.publicId)?(this.emit("error",new Error("DocType public identifier does not match PubidChar construct (well-formed required).")),this):this._options.wellFormed&&(!v.xml_isLegalChar(y.systemId)||y.systemId.indexOf('"')!==-1&&y.systemId.indexOf("'")!==-1)?(this.emit("error",new Error("DocType system identifier contains invalid characters (well-formed required).")),this):(this._docTypeName=T.name,this._push(this._writer.docType(T.name,y.publicId,y.systemId)),this)},E.prototype.import=function(T){var y,M,_=f.fragment().set(this._options);try{_.import(T)}catch(P){return this.emit("error",P),this}try{for(var O=s(_.node.childNodes),w=O.next();!w.done;w=O.next()){var x=w.value;this._fromNode(x)}}catch(P){y={error:P}}finally{try{w&&!w.done&&(M=O.return)&&M.call(O)}finally{if(y)throw y.error}}return this},E.prototype.up=function(){return this._serializeOpenTag(!1),this._serializeCloseTag(),this},E.prototype.end=function(){for(this._serializeOpenTag(!1);this._openTags.length>0;)this._serializeCloseTag();return this._push(null),this},E.prototype._serializeOpenTag=function(T){if(!this._currentElementSerialized&&this._currentElement!==void 0){var y=this._currentElement.node;if(!this._options.wellFormed||y.localName.indexOf(":")===-1&&v.xml_isName(y.localName)){var M="",_=!1,O=this._prefixMap.copy(),w={},x=this._recordNamespaceInformation(y,O,w),P=this._openTags.length===0?null:this._openTags[this._openTags.length-1][1],R=y.namespaceURI;if(R===null&&(R=P),P===R)x!==null&&(_=!0),M=R===g.namespace.XML?"xml:"+y.localName:y.localName,this._writer.beginElement(M),this._push(this._writer.openTagBegin(M));else{var L=y.prefix,H=null;if(L===null&&R===x||(H=O.get(L,R)),L==="xmlns"){if(this._options.wellFormed)return void this.emit("error",new Error("An element cannot have the 'xmlns' prefix (well-formed required)."));H=L}H!==null?(M=H+":"+y.localName,x!==null&&x!==g.namespace.XML&&(P=x||null),this._writer.beginElement(M),this._push(this._writer.openTagBegin(M))):L!==null?(L in w&&(L=this._generatePrefix(R,O,this._prefixIndex)),O.set(L,R),M+=L+":"+y.localName,this._writer.beginElement(M),this._push(this._writer.openTagBegin(M)),this._push(this._writer.attribute("xmlns:"+L,this._serializeAttributeValue(R,this._options.wellFormed))),x!==null&&(P=x||null)):x===null||x!==null&&x!==R?(_=!0,M+=y.localName,P=R,this._writer.beginElement(M),this._push(this._writer.openTagBegin(M)),this._push(this._writer.attribute("xmlns",this._serializeAttributeValue(R,this._options.wellFormed)))):(M+=y.localName,P=R,this._writer.beginElement(M),this._push(this._writer.openTagBegin(M)))}this._serializeAttributes(y,O,this._prefixIndex,w,_,this._options.wellFormed);var F=R===g.namespace.HTML;F&&!T&&E._VoidElementNames.has(y.localName)?(this._push(this._writer.openTagEnd(M,!0,!0)),this._writer.endElement(M)):F||T?this._push(this._writer.openTagEnd(M,!1,!1)):(this._push(this._writer.openTagEnd(M,!0,!1)),this._writer.endElement(M)),this._currentElementSerialized=!0,this._openTags.push([M,P,this._prefixMap,T]),this._isPrefixMapModified(this._prefixMap,O)&&(this._prefixMap=O),this._writer.level++}else this.emit("error",new Error("Node local name contains invalid characters (well-formed required)."))}},E.prototype._serializeCloseTag=function(){this._writer.level--;var T=this._openTags.pop();if(T!==void 0){var y=c(T,4),M=y[0],_=(y[1],y[2]),O=y[3];this._prefixMap=_,O&&(this._push(this._writer.closeTag(M)),this._writer.endElement(M))}else this.emit("error",new Error("Last element is undefined."))},E.prototype._push=function(T){T===null?(this._ended=!0,this.emit("end")):this._ended?this.emit("error",new Error("Cannot push to ended stream.")):T.length!==0&&(this._writer.hasData=!0,this.emit("data",T,this._writer.level))},E.prototype._fromNode=function(T){var y,M,_,O;if(h.Guard.isElementNode(T)){var w=T.prefix?T.prefix+":"+T.localName:T.localName;T.namespaceURI!==null?this.ele(T.namespaceURI,w):this.ele(w);try{for(var x=s(T.attributes),P=x.next();!P.done;P=x.next()){var R=P.value,L=R.prefix?R.prefix+":"+R.localName:R.localName;R.namespaceURI!==null?this.att(R.namespaceURI,L,R.value):this.att(L,R.value)}}catch(V){y={error:V}}finally{try{P&&!P.done&&(M=x.return)&&M.call(x)}finally{if(y)throw y.error}}try{for(var H=s(T.childNodes),F=H.next();!F.done;F=H.next()){var U=F.value;this._fromNode(U)}}catch(V){_={error:V}}finally{try{F&&!F.done&&(O=H.return)&&O.call(H)}finally{if(_)throw _.error}}this.up()}else h.Guard.isExclusiveTextNode(T)&&T.data?this.txt(T.data):h.Guard.isCommentNode(T)?this.com(T.data):h.Guard.isCDATASectionNode(T)?this.dat(T.data):h.Guard.isProcessingInstructionNode(T)&&this.ins(T.target,T.data)},E.prototype._serializeAttributes=function(T,y,M,_,O,w){var x,P,R=w?new m.LocalNameSet:void 0;try{for(var L=s(T.attributes),H=L.next();!H.done;H=L.next()){var F=H.value;if(w||O||F.namespaceURI!==null){if(w&&R&&R.has(F.namespaceURI,F.localName))return void this.emit("error",new Error("Element contains duplicate attributes (well-formed required)."));w&&R&&R.set(F.namespaceURI,F.localName);var U=F.namespaceURI,V=null;if(U!==null)if(V=y.get(F.prefix,U),U===g.namespace.XMLNS){if(F.value===g.namespace.XML||F.prefix===null&&O||F.prefix!==null&&(!(F.localName in _)||_[F.localName]!==F.value)&&y.has(F.localName,F.value))continue;if(w&&F.value===g.namespace.XMLNS)return void this.emit("error",new Error("XMLNS namespace is reserved (well-formed required)."));if(w&&F.value==="")return void this.emit("error",new Error("Namespace prefix declarations cannot be used to undeclare a namespace (well-formed required)."));F.prefix==="xmlns"&&(V="xmlns")}else V===null&&(V=F.prefix===null||y.hasPrefix(F.prefix)&&!y.has(F.prefix,U)?this._generatePrefix(U,y,M):F.prefix,this._push(this._writer.attribute("xmlns:"+V,this._serializeAttributeValue(U,this._options.wellFormed))));if(w&&(F.localName.indexOf(":")!==-1||!v.xml_isName(F.localName)||F.localName==="xmlns"&&U===null))return void this.emit("error",new Error("Attribute local name contains invalid characters (well-formed required)."));this._push(this._writer.attribute((V!==null?V+":":"")+F.localName,this._serializeAttributeValue(F.value,this._options.wellFormed)))}else this._push(this._writer.attribute(F.localName,this._serializeAttributeValue(F.value,this._options.wellFormed)))}}catch(X){x={error:X}}finally{try{H&&!H.done&&(P=L.return)&&P.call(L)}finally{if(x)throw x.error}}},E.prototype._serializeAttributeValue=function(T,y){return y&&T!==null&&!v.xml_isLegalChar(T)?(this.emit("error",new Error("Invalid characters in attribute value.")),""):T===null?"":T.replace(/(?!&(lt|gt|amp|apos|quot);)&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},E.prototype._recordNamespaceInformation=function(T,y,M){var _,O,w=null;try{for(var x=s(T.attributes),P=x.next();!P.done;P=x.next()){var R=P.value,L=R.namespaceURI,H=R.prefix;if(L===g.namespace.XMLNS){if(H===null){w=R.value;continue}var F=R.localName,U=R.value;if(U===g.namespace.XML||(U===""&&(U=null),y.has(F,U)))continue;y.set(F,U),M[F]=U||""}}}catch(V){_={error:V}}finally{try{P&&!P.done&&(O=x.return)&&O.call(x)}finally{if(_)throw _.error}}return w},E.prototype._generatePrefix=function(T,y,M){var _="ns"+M.value;return M.value++,y.set(_,T),_},E.prototype._isPrefixMapModified=function(T,y){var M=T._items,_=y._items,O=T._nullItems,w=y._nullItems;for(var x in _){var P=M[x];if(P===void 0)return!0;var R=_[x];if(P.length!==R.length)return!0;for(var L=0;L<P.length;L++)if(P[L]!==R[L])return!0}if(O.length!==w.length)return!0;for(L=0;L<O.length;L++)if(O[L]!==w[L])return!0;return!1},E._VoidElementNames=new Set(["area","base","basefont","bgsound","br","col","embed","frame","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]),E}(a(308).EventEmitter);r.XMLBuilderCBImpl=I},function(n,r,a){a(74);var i,o=this&&this.__extends||(i=function(c,l){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var v in f)f.hasOwnProperty(v)&&(u[v]=f[v])})(c,l)},function(c,l){function u(){this.constructor=c}i(c,l),c.prototype=l===null?Object.create(l):(u.prototype=l.prototype,new u)});Object.defineProperty(r,"__esModule",{value:!0});var s=function(c){function l(u){var f=c.call(this,u)||this;return f._lineLength=0,f}return o(l,c),l.prototype.frontMatter=function(){return""},l.prototype.declaration=function(u,f,v){var g=this._beginLine()+"<?xml";return g+=' version="'+u+'"',f!==void 0&&(g+=' encoding="'+f+'"'),v!==void 0&&(g+=' standalone="'+(v?"yes":"no")+'"'),g+="?>"},l.prototype.docType=function(u,f,v){var g=this._beginLine();return g+=f&&v?"<!DOCTYPE "+u+' PUBLIC "'+f+'" "'+v+'">':f?"<!DOCTYPE "+u+' PUBLIC "'+f+'">':v?"<!DOCTYPE "+u+' SYSTEM "'+v+'">':"<!DOCTYPE "+u+">"},l.prototype.comment=function(u){return this._beginLine()+"<!--"+u+"-->"},l.prototype.text=function(u){return this._beginLine()+u},l.prototype.instruction=function(u,f){return f?this._beginLine()+"<?"+u+" "+f+"?>":this._beginLine()+"<?"+u+"?>"},l.prototype.cdata=function(u){return this._beginLine()+"<![CDATA["+u+"]]>"},l.prototype.openTagBegin=function(u){return this._lineLength+=1+u.length,this._beginLine()+"<"+u},l.prototype.openTagEnd=function(u,f,v){return v?" />":f?this._writerOptions.allowEmptyTags?"></"+u+">":this._writerOptions.spaceBeforeSlash?" />":"/>":">"},l.prototype.closeTag=function(u){return this._beginLine()+"</"+u+">"},l.prototype.attribute=function(u,f){var v=u+'="'+f+'"';return this._writerOptions.prettyPrint&&this._writerOptions.width>0&&this._lineLength+1+v.length>this._writerOptions.width?(v=this._beginLine()+this._indent(1)+v,this._lineLength=v.length,v):(this._lineLength+=1+v.length," "+v)},l.prototype.beginElement=function(u){},l.prototype.endElement=function(u){},l.prototype._beginLine=function(){if(this._writerOptions.prettyPrint){var u=(this.hasData?this._writerOptions.newline:"")+this._indent(this._writerOptions.offset+this.level);return this._lineLength=u.length,u}return""},l.prototype._indent=function(u){return u<=0?"":this._writerOptions.indent.repeat(u)},l}(a(114).BaseCBWriter);r.XMLCBWriter=s},function(n,r,a){a(74);var i,o=this&&this.__extends||(i=function(c,l){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var v in f)f.hasOwnProperty(v)&&(u[v]=f[v])})(c,l)},function(c,l){function u(){this.constructor=c}i(c,l),c.prototype=l===null?Object.create(l):(u.prototype=l.prototype,new u)});Object.defineProperty(r,"__esModule",{value:!0});var s=function(c){function l(u){var f=c.call(this,u)||this;return f._hasChildren=[],f._additionalLevel=0,f}return o(l,c),l.prototype.frontMatter=function(){return""},l.prototype.declaration=function(u,f,v){return""},l.prototype.docType=function(u,f,v){return""},l.prototype.comment=function(u){return this._comma()+this._beginLine()+"{"+this._sep()+this._key(this._builderOptions.convert.comment)+this._sep()+this._val(u)+this._sep()+"}"},l.prototype.text=function(u){return this._comma()+this._beginLine()+"{"+this._sep()+this._key(this._builderOptions.convert.text)+this._sep()+this._val(u)+this._sep()+"}"},l.prototype.instruction=function(u,f){return this._comma()+this._beginLine()+"{"+this._sep()+this._key(this._builderOptions.convert.ins)+this._sep()+this._val(f?u+" "+f:u)+this._sep()+"}"},l.prototype.cdata=function(u){return this._comma()+this._beginLine()+"{"+this._sep()+this._key(this._builderOptions.convert.cdata)+this._sep()+this._val(u)+this._sep()+"}"},l.prototype.attribute=function(u,f){return this._comma()+this._beginLine(1)+"{"+this._sep()+this._key(this._builderOptions.convert.att+u)+this._sep()+this._val(f)+this._sep()+"}"},l.prototype.openTagBegin=function(u){var f=this._comma()+this._beginLine()+"{"+this._sep()+this._key(u)+this._sep()+"{";return this._additionalLevel++,this.hasData=!0,f+=this._beginLine()+this._key(this._builderOptions.convert.text)+this._sep()+"[",this._hasChildren.push(!1),f},l.prototype.openTagEnd=function(u,f,v){if(f){var g=this._sep()+"]";return this._additionalLevel--,g+=this._beginLine()+"}"+this._sep()+"}"}return""},l.prototype.closeTag=function(u){var f=this._beginLine()+"]";return this._additionalLevel--,f+=this._beginLine()+"}"+this._sep()+"}"},l.prototype.beginElement=function(u){},l.prototype.endElement=function(u){this._hasChildren.pop()},l.prototype._beginLine=function(u){return u===void 0&&(u=0),this._writerOptions.prettyPrint?(this.hasData?this._writerOptions.newline:"")+this._indent(this._writerOptions.offset+this.level+u):""},l.prototype._indent=function(u){return u+this._additionalLevel<=0?"":this._writerOptions.indent.repeat(u+this._additionalLevel)},l.prototype._comma=function(){var u=this._hasChildren[this._hasChildren.length-1]?",":"";return this._hasChildren.length>0&&(this._hasChildren[this._hasChildren.length-1]=!0),u},l.prototype._sep=function(){return this._writerOptions.prettyPrint?" ":""},l.prototype._key=function(u){return'"'+u+'":'},l.prototype._val=function(u){return JSON.stringify(u)},l}(a(114).BaseCBWriter);r.JSONCBWriter=s},function(n,r,a){a(74);var i,o=this&&this.__extends||(i=function(c,l){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var v in f)f.hasOwnProperty(v)&&(u[v]=f[v])})(c,l)},function(c,l){function u(){this.constructor=c}i(c,l),c.prototype=l===null?Object.create(l):(u.prototype=l.prototype,new u)});Object.defineProperty(r,"__esModule",{value:!0});var s=function(c){function l(u){var f=c.call(this,u)||this;if(f._rootWritten=!1,f._additionalLevel=0,u.indent.length<2)throw new Error("YAML indententation string must be at least two characters long.");if(u.offset<0)throw new Error("YAML offset should be zero or a positive number.");return f}return o(l,c),l.prototype.frontMatter=function(){return this._beginLine()+"---"},l.prototype.declaration=function(u,f,v){return""},l.prototype.docType=function(u,f,v){return""},l.prototype.comment=function(u){return this._beginLine()+this._key(this._builderOptions.convert.comment)+" "+this._val(u)},l.prototype.text=function(u){return this._beginLine()+this._key(this._builderOptions.convert.text)+" "+this._val(u)},l.prototype.instruction=function(u,f){return this._beginLine()+this._key(this._builderOptions.convert.ins)+" "+this._val(f?u+" "+f:u)},l.prototype.cdata=function(u){return this._beginLine()+this._key(this._builderOptions.convert.cdata)+" "+this._val(u)},l.prototype.attribute=function(u,f){this._additionalLevel++;var v=this._beginLine()+this._key(this._builderOptions.convert.att+u)+" "+this._val(f);return this._additionalLevel--,v},l.prototype.openTagBegin=function(u){var f=this._beginLine()+this._key(u);return this._rootWritten||(this._rootWritten=!0),this.hasData=!0,this._additionalLevel++,f+=this._beginLine(!0)+this._key(this._builderOptions.convert.text)},l.prototype.openTagEnd=function(u,f,v){return f?" "+this._val(""):""},l.prototype.closeTag=function(u){return this._additionalLevel--,""},l.prototype.beginElement=function(u){},l.prototype.endElement=function(u){},l.prototype._beginLine=function(u){return u===void 0&&(u=!1),(this.hasData?this._writerOptions.newline:"")+this._indent(this._writerOptions.offset+this.level,u)},l.prototype._indent=function(u,f){if(u+this._additionalLevel<=0)return"";var v=this._writerOptions.indent.repeat(u+this._additionalLevel);return!f&&this._rootWritten?v.substr(0,v.length-2)+"-"+v.substr(-1,1):v},l.prototype._key=function(u){return'"'+u+'":'},l.prototype._val=function(u){return JSON.stringify(u)},l}(a(114).BaseCBWriter);r.YAMLCBWriter=s},function(n,r,a){var i,o=typeof Reflect=="object"?Reflect:null,s=o&&typeof o.apply=="function"?o.apply:function(S,I,D){return Function.prototype.apply.call(S,I,D)};i=o&&typeof o.ownKeys=="function"?o.ownKeys:Object.getOwnPropertySymbols?function(S){return Object.getOwnPropertyNames(S).concat(Object.getOwnPropertySymbols(S))}:function(S){return Object.getOwnPropertyNames(S)};var c=Number.isNaN||function(S){return S!=S};function l(){l.init.call(this)}n.exports=l,l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var u=10;function f(S){if(typeof S!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof S)}function v(S){return S._maxListeners===void 0?l.defaultMaxListeners:S._maxListeners}function g(S,I,D,E){var T,y,M,_;if(f(D),(y=S._events)===void 0?(y=S._events=Object.create(null),S._eventsCount=0):(y.newListener!==void 0&&(S.emit("newListener",I,D.listener?D.listener:D),y=S._events),M=y[I]),M===void 0)M=y[I]=D,++S._eventsCount;else if(typeof M=="function"?M=y[I]=E?[D,M]:[M,D]:E?M.unshift(D):M.push(D),(T=v(S))>0&&M.length>T&&!M.warned){M.warned=!0;var O=new Error("Possible EventEmitter memory leak detected. "+M.length+" "+String(I)+" listeners added. Use emitter.setMaxListeners() to increase limit");O.name="MaxListenersExceededWarning",O.emitter=S,O.type=I,O.count=M.length,_=O,console&&console.warn&&console.warn(_)}return S}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function m(S,I,D){var E={fired:!1,wrapFn:void 0,target:S,type:I,listener:D},T=d.bind(E);return T.listener=D,E.wrapFn=T,T}function h(S,I,D){var E=S._events;if(E===void 0)return[];var T=E[I];return T===void 0?[]:typeof T=="function"?D?[T.listener||T]:[T]:D?function(y){for(var M=new Array(y.length),_=0;_<M.length;++_)M[_]=y[_].listener||y[_];return M}(T):p(T,T.length)}function C(S){var I=this._events;if(I!==void 0){var D=I[S];if(typeof D=="function")return 1;if(D!==void 0)return D.length}return 0}function p(S,I){for(var D=new Array(I),E=0;E<I;++E)D[E]=S[E];return D}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(S){if(typeof S!="number"||S<0||c(S))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+S+".");u=S}}),l.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(S){if(typeof S!="number"||S<0||c(S))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+S+".");return this._maxListeners=S,this},l.prototype.getMaxListeners=function(){return v(this)},l.prototype.emit=function(S){for(var I=[],D=1;D<arguments.length;D++)I.push(arguments[D]);var E=S==="error",T=this._events;if(T!==void 0)E=E&&T.error===void 0;else if(!E)return!1;if(E){var y;if(I.length>0&&(y=I[0]),y instanceof Error)throw y;var M=new Error("Unhandled error."+(y?" ("+y.message+")":""));throw M.context=y,M}var _=T[S];if(_===void 0)return!1;if(typeof _=="function")s(_,this,I);else{var O=_.length,w=p(_,O);for(D=0;D<O;++D)s(w[D],this,I)}return!0},l.prototype.addListener=function(S,I){return g(this,S,I,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(S,I){return g(this,S,I,!0)},l.prototype.once=function(S,I){return f(I),this.on(S,m(this,S,I)),this},l.prototype.prependOnceListener=function(S,I){return f(I),this.prependListener(S,m(this,S,I)),this},l.prototype.removeListener=function(S,I){var D,E,T,y,M;if(f(I),(E=this._events)===void 0)return this;if((D=E[S])===void 0)return this;if(D===I||D.listener===I)--this._eventsCount==0?this._events=Object.create(null):(delete E[S],E.removeListener&&this.emit("removeListener",S,D.listener||I));else if(typeof D!="function"){for(T=-1,y=D.length-1;y>=0;y--)if(D[y]===I||D[y].listener===I){M=D[y].listener,T=y;break}if(T<0)return this;T===0?D.shift():function(_,O){for(;O+1<_.length;O++)_[O]=_[O+1];_.pop()}(D,T),D.length===1&&(E[S]=D[0]),E.removeListener!==void 0&&this.emit("removeListener",S,M||I)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(S){var I,D,E;if((D=this._events)===void 0)return this;if(D.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):D[S]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete D[S]),this;if(arguments.length===0){var T,y=Object.keys(D);for(E=0;E<y.length;++E)(T=y[E])!=="removeListener"&&this.removeAllListeners(T);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(I=D[S])=="function")this.removeListener(S,I);else if(I!==void 0)for(E=I.length-1;E>=0;E--)this.removeListener(S,I[E]);return this},l.prototype.listeners=function(S){return h(this,S,!0)},l.prototype.rawListeners=function(S){return h(this,S,!1)},l.listenerCount=function(S,I){return typeof S.listenerCount=="function"?S.listenerCount(I):C.call(S,I)},l.prototype.listenerCount=C,l.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(77);r.createCB=function(o){return new i.XMLBuilderCBImpl(o)},r.fragmentCB=function(o){return new i.XMLBuilderCBImpl(o,!0)}}])})}(rS)),rS.exports}var R5e=x5e(),as=Uint8Array,t1=Uint16Array,E$=Uint32Array,T$=new as([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),y$=new as([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),b5e=new as([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),M$=function(t,e){for(var n=new t1(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var a=new E$(n[30]),r=1;r<30;++r)for(var i=n[r];i<n[r+1];++i)a[i]=i-n[r]<<5|r;return[n,a]},_$=M$(T$,2),O$=_$[0],N5e=_$[1];O$[28]=258,N5e[258]=28;var L5e=M$(y$,0),U5e=L5e[0],xy=new t1(32768);for(var va=0;va<32768;++va){var Cl=(va&43690)>>>1|(va&21845)<<1;Cl=(Cl&52428)>>>2|(Cl&13107)<<2,Cl=(Cl&61680)>>>4|(Cl&3855)<<4,xy[va]=((Cl&65280)>>>8|(Cl&255)<<8)>>>1}var wd=function(t,e,n){for(var r=t.length,a=0,i=new t1(e);a<r;++a)t[a]&&++i[t[a]-1];var o=new t1(e);for(a=0;a<e;++a)o[a]=o[a-1]+i[a-1]<<1;var s;if(n){s=new t1(1<<e);var c=15-e;for(a=0;a<r;++a)if(t[a])for(var l=a<<4|t[a],u=e-t[a],f=o[t[a]-1]++<<u,v=f|(1<<u)-1;f<=v;++f)s[xy[f]>>>c]=l}else for(s=new t1(r),a=0;a<r;++a)t[a]&&(s[a]=xy[o[t[a]-1]++]>>>15-t[a]);return s},yh=new as(288);for(var va=0;va<144;++va)yh[va]=8;for(var va=144;va<256;++va)yh[va]=9;for(var va=256;va<280;++va)yh[va]=7;for(var va=280;va<288;++va)yh[va]=8;var w$=new as(32);for(var va=0;va<32;++va)w$[va]=5;var F5e=wd(yh,9,1),V5e=wd(w$,5,1),l3=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},qs=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},u3=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},k5e=function(t){return(t+7)/8|0},G5e=function(t,e,n){(n==null||n>t.length)&&(n=t.length);var r=new(t.BYTES_PER_ELEMENT==2?t1:t.BYTES_PER_ELEMENT==4?E$:as)(n-e);return r.set(t.subarray(e,n)),r},B5e=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Xs=function(t,e,n){var r=new Error(e||B5e[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,Xs),!n)throw r;return r},O4=function(t,e,n){var r=t.length;if(!r||n&&n.f&&!n.l)return e||new as(0);var a=!e||n,i=!n||n.i;n||(n={}),e||(e=new as(r*3));var o=function(Te){var Fe=e.length;if(Te>Fe){var Ne=new as(Math.max(Fe*2,Te));Ne.set(e),e=Ne}},s=n.f||0,c=n.p||0,l=n.b||0,u=n.l,f=n.d,v=n.m,g=n.n,d=r*8;do{if(!u){s=qs(t,c,1);var m=qs(t,c+1,3);if(c+=3,m)if(m==1)u=F5e,f=V5e,v=9,g=5;else if(m==2){var S=qs(t,c,31)+257,I=qs(t,c+10,15)+4,D=S+qs(t,c+5,31)+1;c+=14;for(var E=new as(D),T=new as(19),y=0;y<I;++y)T[b5e[y]]=qs(t,c+y*3,7);c+=I*3;for(var M=l3(T),_=(1<<M)-1,O=wd(T,M,1),y=0;y<D;){var w=O[qs(t,c,_)];c+=w&15;var h=w>>>4;if(h<16)E[y++]=h;else{var x=0,P=0;for(h==16?(P=3+qs(t,c,3),c+=2,x=E[y-1]):h==17?(P=3+qs(t,c,7),c+=3):h==18&&(P=11+qs(t,c,127),c+=7);P--;)E[y++]=x}}var R=E.subarray(0,S),L=E.subarray(S);v=l3(R),g=l3(L),u=wd(R,v,1),f=wd(L,g,1)}else Xs(1);else{var h=k5e(c)+4,C=t[h-4]|t[h-3]<<8,p=h+C;if(p>r){i&&Xs(0);break}a&&o(l+C),e.set(t.subarray(h,p),l),n.b=l+=C,n.p=c=p*8,n.f=s;continue}if(c>d){i&&Xs(0);break}}a&&o(l+131072);for(var H=(1<<v)-1,F=(1<<g)-1,U=c;;U=c){var x=u[u3(t,c)&H],V=x>>>4;if(c+=x&15,c>d){i&&Xs(0);break}if(x||Xs(2),V<256)e[l++]=V;else if(V==256){U=c,u=null;break}else{var X=V-254;if(V>264){var y=V-257,re=T$[y];X=qs(t,c,(1<<re)-1)+O$[y],c+=re}var ue=f[u3(t,c)&F],De=ue>>>4;ue||Xs(3),c+=ue&15;var L=U5e[De];if(De>3){var re=y$[De];L+=u3(t,c)&(1<<re)-1,c+=re}if(c>d){i&&Xs(0);break}a&&o(l+131072);for(var pe=l+X;l<pe;l+=4)e[l]=e[l-L],e[l+1]=e[l+1-L],e[l+2]=e[l+2-L],e[l+3]=e[l+3-L];l=pe}}n.l=u,n.p=U,n.b=l,n.f=s,u&&(s=1,n.m=v,n.d=f,n.n=g)}while(!s);return l==e.length?e:G5e(e,0,l)},W5e=new as(0),H5e=function(t){(t[0]!=31||t[1]!=139||t[2]!=8)&&Xs(6,"invalid gzip data");var e=t[3],n=10;e&4&&(n+=t[10]|(t[11]<<8)+2);for(var r=(e>>3&1)+(e>>4&1);r>0;r-=!t[n++]);return n+(e&2)},$5e=function(t){var e=t.length;return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0},z5e=function(t){((t[0]&15)!=8||t[0]>>>4>7||(t[0]<<8|t[1])%31)&&Xs(6,"invalid zlib data"),t[1]&32&&Xs(6,"invalid zlib data: preset dictionaries not supported")};function q5e(t,e){return O4(t,e)}function j5e(t,e){return O4(t.subarray(H5e(t),-8),new as($5e(t)))}function Q5e(t,e){return O4((z5e(t),t.subarray(2,-4)),e)}function K5e(t,e){return t[0]==31&&t[1]==139&&t[2]==8?j5e(t):(t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31?q5e(t,e):Q5e(t,e)}var X5e=typeof TextDecoder<"u"&&new TextDecoder,Y5e=0;try{X5e.decode(W5e,{stream:!0}),Y5e=1}catch{}const w4={};function P$(t){return!!w4[t]}function Z5e(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"http",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return w4[t](e)}function A$(t,e){w4[t]=e}var J5e={get:Z5e,has:P$,registerType:A$};const Jo=[];Jo[45]=62;Jo[95]=63;const bf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(let t=0;t<bf.length;t++)Jo[bf.charCodeAt(t)]=t;function y0(t){return Jo[t.charCodeAt(0)]!==void 0}function e_e(t){const e=t.length,n=[];let r=null;for(let a=0;a<e;a++)y0(t[a])?(r||(r={start:a,count:0}),r.count++,r.end=a):t[a]==="="&&r&&(n.push(r),r=null);return r&&n.push(r),n}function t_e(t,e,n,r){const{start:a,count:i}=e,o=i%4,s=Math.floor(i/4);let c=a,l=null,u=n;for(let f=0;f<s;f++){for(;!y0(t[c]);)c++;for(l=Jo[t.charCodeAt(c++)]<<18;!y0(t[c]);)c++;for(l|=Jo[t.charCodeAt(c++)]<<12;!y0(t[c]);)c++;for(l|=Jo[t.charCodeAt(c++)]<<6;!y0(t[c]);)c++;l|=Jo[t.charCodeAt(c++)],r[u++]=l>>16&255,r[u++]=l>>8&255,r[u++]=l&255}switch(o){case 3:for(;!y0(t[c]);)c++;for(l=Jo[t.charCodeAt(c++)]<<10;!y0(t[c]);)c++;for(l|=Jo[t.charCodeAt(c++)]<<4;!y0(t[c]);)c++;l|=Jo[t.charCodeAt(c++)]>>2,r[u++]=l>>8&255,r[u++]=l&255;break;case 2:for(;!y0(t[c]);)c++;for(l=Jo[t.charCodeAt(c++)]<<2;!y0(t[c]);)c++;l|=Jo[t.charCodeAt(c++)]>>4,r[u++]=l&255;break;case 1:throw new Error("BASE64: remain 1 should not happen")}return u}function n_e(t){const e=e_e(t),n=e[e.length-1].end+1,r=(4-n%4)%4,a=(n+r)*3/4-r,i=new ArrayBuffer(a),o=new Uint8Array(i);let s=0;for(let c=0;c<e.length;c++)s+=t_e(t,e[c],s,o),s+=(4-e[c].count%4)%4;return i}function uA(t,e,n){const r=(t<<16)+(e<<8)+n;return bf[r>>18]+bf[r>>12&63]+bf[r>>6&63]+bf[r&63]}function r_e(t){const e=new Uint8Array(t),n=t.byteLength%3,r=t.byteLength-n,a=Array(r/3);for(let i=0;i<a.length;i++){const o=i*3;a[i]=uA(e[o],e[o+1],e[o+2])}if(n>0){const i=uA(e[r],e[r+1]||0,e[r+2]||0);n===1?a.push(`${i.substr(0,2)}==`):n===2&&a.push(`${i.substr(0,3)}=`)}return a.join("")}var P4={toArrayBuffer:n_e,fromArrayBuffer:r_e};function a_e(t,e){e.classHierarchy.push("vtkStringArray"),t.getComponent=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.values[n*e.numberOfComponents+r]},t.setComponent=(n,r,a)=>{a!==e.values[n*e.numberOfComponents+r]&&(e.values[n*e.numberOfComponents+r]=a,t.modified())},t.getData=()=>e.values,t.getTuple=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const a=e.numberOfComponents||1;r.length&&(r.length=a);const i=n*a;for(let o=0;o<a;o++)r[o]=e.values[i+o];return r},t.getTupleLocation=function(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:1)*e.numberOfComponents},t.getNumberOfComponents=()=>e.numberOfComponents,t.getNumberOfValues=()=>e.values.length,t.getNumberOfTuples=()=>e.values.length/e.numberOfComponents,t.getDataType=()=>e.dataType,t.newClone=()=>R$({name:e.name,numberOfComponents:e.numberOfComponents,empty:!0}),t.getName=()=>(e.name||t.setName(`vtkStringArray${t.getMTime()}`),e.name),t.setData=(n,r)=>{e.values=n,e.size=n.length,r&&(e.numberOfComponents=r),e.size%e.numberOfComponents!==0&&(e.numberOfComponents=1),t.modified()}}const i_e={name:"",numberOfComponents:1,size:0,dataType:"string"};function x$(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Object.assign(e,i_e,n),!e.empty&&!e.values&&!e.size)throw new TypeError("Cannot create vtkStringArray object without: size > 0, values");e.values?Array.isArray(e.values)&&(e.values=[...e.values]):e.values=[],e.values&&(e.size=e.values.length),J.obj(t,e),J.set(t,e,["name"]),a_e(t,e)}const R$=J.newInstance(x$,"vtkStringArray");var o_e={newInstance:R$,extend:x$};function b$(t){return new TextDecoder("latin1").decode(t)}function s_e(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;const r=b$(t),a=e.exec(r);if(!a)return{text:r};const i=a.index+a[0].length,o=r.substring(0,i);let s=null;const c=n?n.exec(r):null;if(c){const l=r.substr(c.index);s={text:o+l,binaryBuffer:t.slice(i,c.index)}}else s={text:o,binaryBuffer:t.slice(i)};return s}var c_e={arrayBufferToString:b$,extractBinary:s_e};function N$(){const t=new ArrayBuffer(4),e=new Uint8Array(t),n=new Uint32Array(t);return e[0]=161,e[1]=178,e[2]=195,e[3]=212,n[0]===3569595041?"LittleEndian":n[0]===2712847316?"BigEndian":null}const l_e=N$();function u_e(t,e){if(e<2)return;const n=new Int8Array(t),r=n.length,a=[];for(let i=0;i<r;i+=e){for(let o=0;o<e;o++)a.push(n[i+o]);for(let o=0;o<e;o++)n[i+o]=a.pop()}}var f3={ENDIANNESS:l_e,getEndianness:N$,swapBytes:u_e};const{vtkErrorMacro:L$,vtkDebugMacro:f_e}=J,A4=()=>(L$("LiteHttpDataAccessHelper does not support compression. Need to register HttpDataAccessHelper instead."),Promise.reject(new Error("LiteHttpDataAccessHelper does not support compression. Need to register HttpDataAccessHelper instead.")));let Iv=0;function oD(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=new XMLHttpRequest;return r.open(t,e,!0),n.headers&&Object.entries(n.headers).forEach(a=>{let[i,o]=a;return r.setRequestHeader(i,o)}),n.progressCallback&&r.addEventListener("progress",n.progressCallback),r}function v_e(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((n,r)=>{const a=oD("GET",t,e);a.onreadystatechange=i=>{a.readyState===4&&(a.status===200||a.status===0?n(a.response):r({xhr:a,e:i}))},a.responseType="arraybuffer",a.send()})}function g_e(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return r&&r.compression?A4():n.ref&&!n.ref.pending?new Promise((a,i)=>{const o=[e,n.ref.basepath,n.ref.id].join("/"),s=oD("GET",o,r);s.onreadystatechange=c=>{s.readyState===1&&(n.ref.pending=!0,++Iv===1&&(t!=null&&t.invokeBusy)&&t.invokeBusy(!0)),s.readyState===4&&(n.ref.pending=!1,s.status===200||s.status===0?(n.buffer=s.response,n.ref.encode==="JSON"?n.values=JSON.parse(n.buffer):(f3.ENDIANNESS!==n.ref.encode&&f3.ENDIANNESS&&(f_e(`Swap bytes of ${n.name}`),f3.swapBytes(n.buffer,gb[n.dataType])),n.values=J.newTypedArray(n.dataType,n.buffer)),n.values.length!==n.size&&L$(`Error in FetchArray: ${n.name}, does not have the proper array size. Got ${n.values.length}, instead of ${n.size}`),delete n.ref,--Iv===0&&(t!=null&&t.invokeBusy)&&t.invokeBusy(!1),t!=null&&t.modified&&t.modified(),a(n)):i({xhr:s,e:c}))},s.responseType=n.dataType!=="string"?"arraybuffer":"text",s.send()}):Promise.resolve(n)}function d_e(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return n&&n.compression?A4():new Promise((r,a)=>{const i=oD("GET",e,n);i.onreadystatechange=o=>{i.readyState===1&&++Iv===1&&t!=null&&t.invokeBusy&&t.invokeBusy(!0),i.readyState===4&&(--Iv===0&&(t!=null&&t.invokeBusy)&&t.invokeBusy(!1),i.status===200||i.status===0?r(JSON.parse(i.responseText)):a({xhr:i,e:o}))},i.responseType="text",i.send()})}function m_e(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return n&&n.compression?A4():new Promise((r,a)=>{const i=oD("GET",e,n);i.onreadystatechange=o=>{i.readyState===1&&++Iv===1&&t!=null&&t.invokeBusy&&t.invokeBusy(!0),i.readyState===4&&(--Iv===0&&(t!=null&&t.invokeBusy)&&t.invokeBusy(!1),i.status===200||i.status===0?r(i.responseText):a({xhr:i,e:o}))},i.responseType="text",i.send()})}function h_e(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new Promise((r,a)=>{const i=new Image;n.crossOrigin&&(i.crossOrigin=n.crossOrigin),i.onload=()=>r(i),i.onerror=a,i.src=e})}const p_e={fetchArray:g_e,fetchJSON:d_e,fetchText:m_e,fetchBinary:v_e,fetchImage:h_e};P$("http")||A$("http",t=>p_e);function S_e(t,e){return[...t.getElementsByTagName(e)]}function fA(t,e){return S_e(t,e)[0]}function C_e(t){return R5e.create(t)}function I_e(t){const e=/^\s*<AppendedData\s+encoding="raw">\s*_/m,n=/\n\s*<\/AppendedData>/m;return c_e.extractBinary(t,e,n)}const Fl={Int8:Int8Array,UInt8:Uint8Array,Int16:Int16Array,UInt16:Uint16Array,Int32:Int32Array,UInt32:Uint32Array,Int64:Int32Array,UInt64:Uint32Array,Float32:Float32Array,Float64:Float64Array},_m={Int8:1,UInt8:1,Int16:2,UInt16:2,Int32:4,UInt32:4,Int64:8,UInt64:8,Float32:4,Float64:8};function Ry(t){const e=t.length-1;return t.filter((n,r)=>r<e&&r%2===0)}function by(t,e,n){if(!["UInt64","UInt32"].includes(n))throw new Error(`Cannot handle a header type of ${n}`);let r=Fl[n],a=Fl[e],i=!1;n==="UInt64"&&(r=Fl.UInt32),/^U?Int64$/.test(e)&&(i=!0,a=Fl[e.replace("64","32")]);const{byteOffset:o}=t,s=_m[e],c=_m[n];let l;o%c===0?l=new r(t.buffer,o,1):l=new r(t.buffer.slice(o,o+c));const u=Number(l[0]);let f,v=u/s;i&&(v*=2);const g=o+c;return g%s===0?f=new a(t.buffer,g,v):f=new a(t.buffer.slice(g,g+u)),i&&(f=Ry(f)),f}function D_e(t,e){if(e==="UInt64"){let l=new Uint32Array(t.buffer,0,6);const u=l[0],f=l[2],v=l[4],g=[8,u,f,v];l=new Uint32Array(t.buffer,3*8,u*2);for(let d=0;d<u;d++)g.push(l[d*2]);return g}let n=new Uint32Array(t.buffer,0,3);const r=4,a=n[0],i=n[1],o=n[2],s=[r,a,i,o];n=new Uint32Array(t.buffer,3*4,a);for(let c=0;c<a;c++)s.push(n[c]);return s}function E_e(t,e){const[n]=t;return(t.length-1)*n}function T_e(t,e){const n=K5e(t);e.uint8.set(n,e.offset),e.offset+=n.length}function x4(t,e){const n=D_e(t,e),r=n[1],a=n[2],i=n[3];let o=0;r>0&&(i===0?o=r*a:o=(r-1)*a+i);const s=new ArrayBuffer(o),c={offset:0,uint8:new Uint8Array(s)};let l=E_e(n);for(;l<t.length&&t[l]!==120;)l++;for(let u=0;u<r;u++){const f=n[4+u],v=new Uint8Array(t.buffer,l,f);T_e(v,c),l+=f}return c.uint8}function Om(t,e,n,r,a,i){const o=e.getAttribute("type"),s=e.getAttribute("Name"),c=e.getAttribute("format"),l=Number(e.getAttribute("NumberOfComponents")||"1");let u=null;if(c==="ascii"){u=new Fl[o](t*l);let f=0;e.firstChild.nodeValue.split(/[\\t \\n]+/).forEach(v=>{v.trim().length&&(u[f++]=Number(v))})}else if(c==="binary"){const f=new Uint8Array(P4.toArrayBuffer(e.firstChild.nodeValue.trim()));if(n==="vtkZLibDataCompressor"){const v=x4(f,a);u=new Fl[o](v.buffer),/^U?Int64$/.test(o)&&(u=Ry(u))}else u=new Fl[o](f.buffer,_m[a]),o.indexOf("Int64")!==-1&&(u=Ry(u))}else if(c==="appended"){const f=Number(e.getAttribute("offset"));u=by(new Uint8Array(i,f),o,a)}else console.error("Format not supported",c);return{name:s,values:u,numberOfComponents:l}}function v3(t){return new TextDecoder().decode(t).split("\0").slice(0,-1)}function y_e(t,e,n,r,a){const i=t.getAttribute("Name"),o=t.getAttribute("format"),s=Number(t.getAttribute("NumberOfComponents")||"1"),l=Number(t.getAttribute("NumberOfTuples")||"1")*s,u=[];if(o==="ascii"){const f=t.firstChild.nodeValue.trim().split(/\s+/);let v=0;const g=[];for(;u.length<l;){const d=Number(f[v++]);d===0?(u.push(g.join("")),g.length=0):g.push(String.fromCharCode(d))}}else if(o==="binary"){const f=new Uint8Array(P4.toArrayBuffer(t.firstChild.nodeValue.trim()));if(e==="vtkZLibDataCompressor"){const v=x4(f,r);u.push(...v3(v))}else{const v=by(f,"UInt8",r);u.push(...v3(v))}}else if(o==="appended"){const f=Number(t.getAttribute("offset")),v=by(new Uint8Array(a,f),"UInt8",r);u.push(...v3(v))}else J.vtkErrorMacro(`Format not supported: ${o}`);return{name:i,values:u,numberOfComponents:s}}function M_e(t,e,n,r,a,i){const o={},s=e.getElementsByTagName("DataArray");for(let d=0;d<s.length;d++){const m=s[d];o[m.getAttribute("Name")]=m}const c=Om(t,o.offsets,n,r,a,i).values,l=c[c.length-1],u=Om(l,o.connectivity,n,r,a,i).values,f=new Uint32Array(t+l);let v=0,g=0;return c.forEach(d=>{const m=d-g;f[v++]=m;for(let h=0;h<m;h++)f[v++]=u[g+h];g=d}),f}function __e(t,e,n,r,a,i,o){if(e){const s=["Scalars","Vectors","Normals","Tensors","TCoords"],c={};s.forEach(f=>{const v=e.getAttribute(f);v&&(c[v]=n[`set${f}`])});const l=e.getElementsByTagName("DataArray"),u=l.length;for(let f=0;f<u;f++){const v=l[f],g=fn.newInstance(Om(t,v,r,a,i,o)),d=g.getName();(c[d]||n.addArray)(g)}}}function O_e(t,e,n,r,a){const i=[...t.getElementsByTagName("DataArray")].map(s=>fn.newInstance(Om(Number(s.getAttribute("NumberOfTuples")),s,e,n,r,a))),o=[...t.getElementsByTagName("Array")].filter(s=>s.getAttribute("type")==="String").map(s=>o_e.newInstance(y_e(s,e,n,r,a)));return[...i,...o]}function w_e(t,e){e.classHierarchy.push("vtkXMLReader"),e.dataAccessHelper||(e.dataAccessHelper=J5e.get("http"));function n(r){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.dataAccessHelper.fetchBinary(r,a)}t.setUrl=function(r){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.url=r;const i=r.split("/");return i.pop(),e.baseURL=i.join("/"),t.loadData(a)},t.loadData=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return n(e.url,r).then(t.parseAsArrayBuffer)},t.parseAsArrayBuffer=r=>{if(!r)return!1;if(r!==e.rawDataBuffer)t.modified();else return!0;const{text:a,binaryBuffer:i}=I_e(r);e.rawDataBuffer=r,e.binaryBuffer=i;const s=C_e(a).root(),c=s.node,l=c.getAttribute("type"),u=c.getAttribute("compressor"),f=c.getAttribute("byte_order"),v=c.getAttribute("header_type")||"UInt32";if(u&&u!=="vtkZLibDataCompressor")return console.error("Invalid compressor",u),!1;if(f&&f!=="LittleEndian")return console.error("Only LittleEndian encoding is supported"),!1;if(l!==e.dataType)return console.error("Invalid data type",l,"expecting",e.dataType),!1;if(fA(c,"AppendedData")){const m=fA(c,"AppendedData"),h=m.getAttribute("encoding"),C=s.filter(T=>{const{node:y}=T;return y.nodeType===Node.ELEMENT_NODE&&y.getAttribute("format")==="appended"&&y.hasAttribute("offset")},!1,!0).map(T=>({node:T.node,offset:Number(T.node.getAttribute("offset"))}));C.sort((T,y)=>T.offset-y.offset);let p=e.binaryBuffer;h==="base64"&&(p=m.textContent.trim().substr(1));const S=[];for(let T=0;T<C.length;++T){const y=C[T].offset;let M=0;T===C.length-1?M=p.length||p.byteLength:M=C[T+1].offset,h==="base64"?S.push(new Uint8Array(P4.toArrayBuffer(p.substring(y,M)))):S.push(new Uint8Array(p.slice(y,M)))}if(u==="vtkZLibDataCompressor")for(let T=0;T<S.length;++T){const y=S[T],M=x4(y,v),_=new Uint8Array(M.length+_m[v]);new Fl[v](_.buffer,0,1)[0]=M.length,_.set(M,_m[v]),S[T]=_}const I=S.reduce((T,y)=>T+y.length,0),D=new ArrayBuffer(I),E=new Uint8Array(D);for(let T=0,y=0;T<S.length;++T)C[T].node.setAttribute("offset",y),E.set(S[T],y),y+=S[T].length;if(e.binaryBuffer=D,!e.binaryBuffer)return console.error("Processing appended data format: requires binaryBuffer to parse"),!1}t.parseXML(c,l,u,f,v);const d=c.getElementsByTagName(l)[0].getElementsByTagName("FieldData")[0];if(d){const m=O_e(d,u,f,v,e.binaryBuffer);for(let h=0;h<e.output.length;h++){const C=e.output[h].getFieldData();for(let p=0;p<m.length;p++)C.addArray(m[p])}}return!0},t.requestData=(r,a)=>{t.parseAsArrayBuffer(e.rawDataBuffer)}}const P_e={};function A_e(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,P_e,n),J.obj(t,e),J.get(t,e,["url","baseURL"]),J.setGet(t,e,["dataAccessHelper"]),J.algo(t,e,0,1),w_e(t,e)}var wm={extend:A_e,processDataArray:Om,processFieldData:__e,processCells:M_e};function x_e(t,e,n,r,a,i,o){const s=Number(n.getAttribute(`NumberOf${e}`));if(s>0){const c=n.getElementsByTagName(e)[0].getElementsByTagName("DataArray")[0],{values:l,numberOfComponents:u}=wm.processDataArray(s,c,r,a,i,o);t[`get${e}`]().setData(l,u)}return s}function R_e(t,e,n,r,a,i,o){const s=Number(n.getAttribute(`NumberOf${e}`));if(s>0){const c=wm.processCells(s,n.getElementsByTagName(e)[0],r,a,i,o);t[`get${e}`]().setData(c)}return s}function b_e(t,e){e.classHierarchy.push("vtkXMLPolyDataReader"),t.parseXML=(n,r,a,i,o)=>{const c=n.getElementsByTagName(e.dataType)[0].getElementsByTagName("Piece"),l=c.length;for(let u=0;u<l;u++){const f=ci.newInstance(),v=c[u],g=x_e(f,"Points",v,a,i,o,e.binaryBuffer);let d=0;["Verts","Lines","Strips","Polys"].forEach(m=>{d+=R_e(f,m,v,a,i,o,e.binaryBuffer)}),wm.processFieldData(g,v.getElementsByTagName("PointData")[0],f.getPointData(),a,i,o,e.binaryBuffer),wm.processFieldData(d,v.getElementsByTagName("CellData")[0],f.getCellData(),a,i,o,e.binaryBuffer),e.output[u]=f}}}const N_e={dataType:"PolyData"};function U$(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,N_e,n),wm.extend(t,e,n),b_e(t,e)}const L_e=J.newInstance(U$,"vtkXMLPolyDataReader");var U_e={newInstance:L_e,extend:U$},_C;(function(t){t[t.ANNOTATED_CUBE=1]="ANNOTATED_CUBE",t[t.AXES=2]="AXES",t[t.CUSTOM=3]="CUSTOM"})(_C||(_C={}));const _0=class _0 extends Xa{constructor(e={},n={configuration:{orientationWidget:{enabled:!0,viewportCorner:sA.Corners.BOTTOM_RIGHT,viewportSize:.15,minPixelSize:100,maxPixelSize:300},overlayMarkerType:_0.OVERLAY_MARKER_TYPES.ANNOTATED_CUBE,overlayConfiguration:{[_0.OVERLAY_MARKER_TYPES.ANNOTATED_CUBE]:{faceProperties:{xPlus:{text:"L",faceColor:"#ffff00",faceRotation:90},xMinus:{text:"R",faceColor:"#ffff00",faceRotation:270},yPlus:{text:"P",faceColor:"#00ffff",fontColor:"white",faceRotation:180},yMinus:{text:"A",faceColor:"#00ffff",fontColor:"white"},zPlus:{text:"S"},zMinus:{text:"I"}},defaultStyle:{fontStyle:"bold",fontFamily:"Arial",fontColor:"black",fontSizeScale:r=>r/2,faceColor:"#0000ff",edgeThickness:.1,edgeColor:"black",resolution:400}},[_0.OVERLAY_MARKER_TYPES.AXES]:{},[_0.OVERLAY_MARKER_TYPES.CUSTOM]:{polyDataURL:"https://raw.githubusercontent.com/Slicer/Slicer/80ad0a04dacf134754459557bf2638c63f3d1d1b/Base/Logic/Resources/OrientationMarkers/Human.vtp"}}}}){super(e,n),this._resizeObservers=new Map,this.onSetToolEnabled=()=>{this.initViewports(),this._subscribeToViewportEvents()},this.onSetToolActive=()=>{this.initViewports(),this._subscribeToViewportEvents()},this.onSetToolDisabled=()=>{this.cleanUpData(),this._unsubscribeToViewportNewVolumeSet()},this._getViewportsInfo=()=>Vi(this.toolGroupId).viewportsInfo,this.resize=r=>{const a=this.orientationMarkers[r];if(!a)return;const{orientationWidget:i}=a;i.updateViewport()},this.orientationMarkers={},this.updatingOrientationMarker={}}_unsubscribeToViewportNewVolumeSet(){const e=()=>{this._getViewportsInfo().forEach(({viewportId:r,renderingEngineId:a})=>{const{viewport:i}=Ka(r,a),{element:o}=i;o.removeEventListener(vt.VOLUME_VIEWPORT_NEW_VOLUME,this.initViewports.bind(this)),this._resizeObservers.get(r).unobserve(o)})};ot.removeEventListener(B.TOOLGROUP_VIEWPORT_ADDED,n=>{n.detail.toolGroupId===this.toolGroupId&&(e(),this.initViewports())})}_subscribeToViewportEvents(){const e=()=>{this._getViewportsInfo().forEach(({viewportId:r,renderingEngineId:a})=>{const{viewport:i}=Ka(r,a),{element:o}=i;this.initViewports(),o.addEventListener(vt.VOLUME_VIEWPORT_NEW_VOLUME,this.initViewports.bind(this));const s=new ResizeObserver(()=>{setTimeout(()=>{const c=Ka(r,a);if(!c)return;const{viewport:l}=c;this.resize(r),l.render()},100)});s.observe(o),this._resizeObservers.set(r,s)})};e(),ot.addEventListener(B.TOOLGROUP_VIEWPORT_ADDED,n=>{n.detail.toolGroupId===this.toolGroupId&&(e(),this.initViewports())})}cleanUpData(){to()[0].getViewports().forEach(a=>{const i=this.orientationMarkers[a.id];if(!i)return;const{actor:o,orientationWidget:s}=i;s==null||s.setEnabled(!1),s==null||s.delete(),o==null||o.delete(),a.getRenderingEngine().offscreenMultiRenderWindow.getRenderWindow().render(),a.getRenderingEngine().render(),delete this.orientationMarkers[a.id]})}initViewports(){const n=to()[0];if(!n)return;let r=n.getViewports();r=jI(r,this.getToolName()),r.forEach(a=>{const i=a.getWidget(this.getToolName());(!i||i.isDeleted())&&this.addAxisActorInViewport(a)})}async addAxisActorInViewport(e){const n=e.id;if(!this.updatingOrientationMarker[n]){this.updatingOrientationMarker[n]=!0;const r=this.configuration.overlayMarkerType,a=this.configuration.overlayConfiguration[r];if(this.orientationMarkers[n]){const{actor:d,orientationWidget:m}=this.orientationMarkers[n];e.getRenderer().removeActor(d),m.setEnabled(!1)}let i;r===1?i=this.createAnnotationCube(a):r===2?i=P5e.newInstance():r===3&&(i=await this.createCustomActor());const o=e.getRenderer(),s=e.getRenderingEngine().offscreenMultiRenderWindow.getRenderWindow(),{enabled:c,viewportCorner:l,viewportSize:u,minPixelSize:f,maxPixelSize:v}=this.configuration.orientationWidget,g=sA.newInstance({actor:i,interactor:s.getInteractor(),parentRenderer:o});g.setEnabled(c),g.setViewportCorner(l),g.setViewportSize(u),g.setMinPixelSize(f),g.setMaxPixelSize(v),g.updateMarkerOrientation(),this.orientationMarkers[n]={orientationWidget:g,actor:i},e.addWidget(this.getToolName(),g),s.render(),e.getRenderingEngine().render(),this.updatingOrientationMarker[n]=!1}}async createCustomActor(){const e=this.configuration.overlayConfiguration[_C.CUSTOM].polyDataURL,r=await(await fetch(e)).arrayBuffer(),a=U_e.newInstance();a.parseAsArrayBuffer(r),a.update();const i=ci.newInstance();i.shallowCopy(a.getOutputData()),i.getPointData().setActiveScalars("Color");const o=K0.newInstance();o.setInputData(i),o.setColorModeToDirectScalars();const s=Z0.newInstance();return s.setMapper(o),s.rotateZ(180),s}createAnnotationCube(e){const n=cA.newInstance();return n.setDefaultStyle({...e.defaultStyle}),n.setXPlusFaceProperty({...e.faceProperties.xPlus}),n.setXMinusFaceProperty({...e.faceProperties.xMinus}),n.setYPlusFaceProperty({...e.faceProperties.yPlus}),n.setYMinusFaceProperty({...e.faceProperties.yMinus}),n.setZPlusFaceProperty({...e.faceProperties.zPlus}),n.setZMinusFaceProperty({...e.faceProperties.zMinus}),n}async createAnnotatedCubeActor(){const e=cA.newInstance(),{faceProperties:n,defaultStyle:r}=this.configuration.annotatedCube;return e.setDefaultStyle(r),Object.keys(n).forEach(a=>{const i=`set${a.charAt(0).toUpperCase()+a.slice(1)}FaceProperty`;e[i](n[a])}),e}};_0.CUBE=1,_0.AXIS=2,_0.VTPFILE=3,_0.OVERLAY_MARKER_TYPES=_C;let OC=_0;OC.toolName="OrientationMarker";const Hd=class Hd extends Xa{constructor(e={},n={supportedInteractionTypes:["Mouse","Touch"],configuration:{hoverTimeout:100,mode:Hd.SelectMode.Border,searchRadius:6}}){super(e,n),this.mouseMoveCallback=r=>(this.hoverTimer&&clearTimeout(this.hoverTimer),this.hoverTimer=setTimeout(()=>{this._setActiveSegment(r),this.hoverTimer=null},this.configuration.hoverTimeout),!0),this.onSetToolEnabled=()=>{this.onSetToolActive()},this.onSetToolActive=()=>{this.hoverTimer=null},this.onSetToolDisabled=()=>{this.hoverTimer=null},this.hoverTimer=null}_setActiveSegment(e={}){if(st.isInteractingWithTool)return;const{element:n,currentPoints:r}=e.detail,a=r.world,i=Ae(n);if(!i)return;const{viewport:o}=i,s=hu(o.id);s&&this._setActiveSegmentForType(s,a,o)}_setActiveSegmentForType(e,n,r){if(!r.getImageData())return;const{segmentationId:i,representationData:o}=e;let s;if(this.configuration.mode===Hd.SelectMode.Inside?s=$W(i,n,{viewport:r}):o.Labelmap?s=zW(i,n,{viewport:r,searchRadius:this.configuration.searchRadius}):o.Contour?s=jW(i):o.Surface,!s||s===0)return;TC(i,s);const l=r.getRenderingEngine().getViewports().map(u=>u.id);Go(i),qe(l)}};Hd.SelectMode={Inside:"Inside",Border:"Border"};let wC=Hd;wC.toolName="SegmentSelectTool";let F$=class extends Br{constructor(e={}){super(e,{supportedInteractionTypes:["Mouse","Touch"],configuration:{shadow:!0,preventHandleOutsideImage:!1}}),this.addNewAnnotation=n=>{const r=n.detail,{currentPoints:a,element:i}=r,o=a.world,s=Ae(i),{viewport:c,renderingEngine:l}=s;this.isDrawing=!0;const u=c.getCamera(),{viewPlaneNormal:f,viewUp:v}=u,g=this.getReferencedImageId(c,o,f,v),d={metadata:{viewPlaneNormal:[0,0,1],viewUp:[0,1,0],FrameOfReferenceUID:c.getFrameOfReferenceUID(),referencedImageId:g,toolName:this.getToolName()},data:{invalidated:!0,handles:{points:[[...o],[...o],[...o],[...o]],activeHandleIndex:null},cachedStats:{},active:!0}};qn(d,i);const m=Bt(i,this.getToolName(),!1);return this.editData={annotation:d,viewportUIDsToRender:m,handleIndex:3,newAnnotation:!0,hasMoved:!1},this._activateDraw(i),Yt(i),n.preventDefault(),qe(m),d},this.getHandleNearImagePoint=(n,r,a,i)=>{const o=Ae(n),{viewport:s}=o,{data:c}=r,{points:l}=c.handles;for(let u=0;u<l.length;u++){const f=l[u],v=s.worldToCanvas(f);if(sa(a,v)<i===!0)return c.handles.activeHandleIndex=u,f}c.handles.activeHandleIndex=null},this.isPointNearTool=(n,r,a,i)=>{const o=Ae(n),{viewport:s}=o,{data:c}=r,{points:l}=c.handles,u=s.worldToCanvas(l[0]),f=s.worldToCanvas(l[3]),v=this._getRectangleImageCoordinates([u,f]),g=[a[0],a[1]],{left:d,top:m,width:h,height:C}=v;if($_([d,m,h,C],g)<=i)return!0},this.toolSelectedCallback=(n,r,a="mouse")=>{const i=n.detail,{element:o}=i,{data:s}=r;s.active=!0;const c=Bt(o,this.getToolName(),!1);this.editData={annotation:r,viewportUIDsToRender:c},this._activateModify(o),Yt(o),qe(c),n.preventDefault()},this.handleSelectedCallback=(n,r,a,i="mouse")=>{const o=n.detail,{element:s}=o,{data:c}=r;c.active=!0;let l;a.worldPosition||(l=c.handles.points.findIndex(f=>f===a));const u=Bt(s,this.getToolName(),!1);this.editData={annotation:r,viewportUIDsToRender:u,handleIndex:l},this._activateModify(s),Yt(s),qe(u),n.preventDefault()},this._endCallback=n=>{const r=n.detail,{element:a}=r,{annotation:i,viewportUIDsToRender:o,newAnnotation:s,hasMoved:c}=this.editData,{data:l}=i;s&&!c||(this.doneEditMemo(),l.active=!1,l.handles.activeHandleIndex=null,this._deactivateModify(a),this._deactivateDraw(a),Mn(a),this.editData=null,this.isDrawing=!1,this.isHandleOutsideImage&&this.configuration.preventHandleOutsideImage&&sr(i.annotationUID),qe(o))},this._dragCallback=n=>{this.isDrawing=!0;const r=n.detail,{element:a}=r,{annotation:i,viewportUIDsToRender:o,handleIndex:s,newAnnotation:c}=this.editData;this.createMemo(a,i,{newAnnotation:c});const{data:l}=i;if(s===void 0){const{deltaPoints:u}=r,f=u.world,{points:v}=l.handles;v.forEach(g=>{g[0]+=f[0],g[1]+=f[1],g[2]+=f[2]}),l.invalidated=!0}else{const{currentPoints:u}=r,f=Ae(a),{worldToCanvas:v,canvasToWorld:g}=f.viewport,d=u.world,{points:m}=l.handles;m[s]=[...d];let h,C,p,S,I,D,E,T;switch(s){case 0:case 3:h=v(m[0]),S=v(m[3]),C=[S[0],h[1]],p=[h[0],S[1]],D=g(C),E=g(p),m[1]=D,m[2]=E;break;case 1:case 2:C=v(m[1]),p=v(m[2]),h=[p[0],C[1]],S=[C[0],p[1]],I=g(h),T=g(S),m[0]=I,m[3]=T;break}l.invalidated=!0}this.editData.hasMoved=!0,Ae(a),qe(o)},this._activateDraw=n=>{st.isInteractingWithTool=!0,n.addEventListener(B.MOUSE_UP,this._endCallback),n.addEventListener(B.MOUSE_DRAG,this._dragCallback),n.addEventListener(B.MOUSE_MOVE,this._dragCallback),n.addEventListener(B.MOUSE_CLICK,this._endCallback),n.addEventListener(B.TOUCH_END,this._endCallback),n.addEventListener(B.TOUCH_DRAG,this._dragCallback)},this._deactivateDraw=n=>{st.isInteractingWithTool=!1,n.removeEventListener(B.MOUSE_UP,this._endCallback),n.removeEventListener(B.MOUSE_DRAG,this._dragCallback),n.removeEventListener(B.MOUSE_MOVE,this._dragCallback),n.removeEventListener(B.MOUSE_CLICK,this._endCallback),n.removeEventListener(B.TOUCH_END,this._endCallback),n.removeEventListener(B.TOUCH_DRAG,this._dragCallback)},this._activateModify=n=>{st.isInteractingWithTool=!0,n.addEventListener(B.MOUSE_UP,this._endCallback),n.addEventListener(B.MOUSE_DRAG,this._dragCallback),n.addEventListener(B.MOUSE_CLICK,this._endCallback),n.addEventListener(B.TOUCH_END,this._endCallback),n.addEventListener(B.TOUCH_DRAG,this._dragCallback)},this._deactivateModify=n=>{st.isInteractingWithTool=!1,n.removeEventListener(B.MOUSE_UP,this._endCallback),n.removeEventListener(B.MOUSE_DRAG,this._dragCallback),n.removeEventListener(B.MOUSE_CLICK,this._endCallback),n.removeEventListener(B.TOUCH_END,this._endCallback),n.removeEventListener(B.TOUCH_DRAG,this._dragCallback)},this.renderAnnotation=(n,r)=>{const{viewport:i}=n,{element:o}=i;let s=nr(this.getToolName(),o);if(!(s!=null&&s.length)||(s=this.filterInteractableAnnotationsForElement(o,s),!(s!=null&&s.length)))return!1;const c={toolGroupId:this.toolGroupId,toolName:this.getToolName(),viewportId:n.viewport.id};for(let l=0;l<s.length;l++){const u=s[l],{annotationUID:f}=u,v=u.data,{points:g,activeHandleIndex:d}=v.handles,m=g.map(D=>i.worldToCanvas(D)),h=this.getStyle("lineWidth",c,u),C=this.getStyle("lineDash",c,u),p=this.getStyle("color",c,u);if(!i.getRenderingEngine()){console.warn("Rendering Engine has been destroyed");return}let S;!this.editData&&d!==null&&(S=[m[d]]),S&&Hr(r,f,"0",S,{color:p}),yG(r,f,"0",m[0],m[3],{color:"black",lineDash:C,lineWidth:h})}},this._getRectangleImageCoordinates=n=>{const[r,a]=n;return{left:Math.min(r[0],a[0]),top:Math.min(r[1],a[1]),width:Math.abs(r[0]-a[0]),height:Math.abs(r[1]-a[1])}},this._calculateCachedStats=(n,r,a,i,o)=>{const{data:s}=n,{viewportUID:c,renderingEngineUID:l,sceneUID:u}=o,f=s.handles.points[0],v=s.handles.points[3],{cachedStats:g}=s,d=Object.keys(g);for(let C=0;C<d.length;C++){const p=d[C],{imageVolume:S}=this._getImageVolumeFromTargetUID(p,i),{dimensions:I,scalarData:D,vtkImageData:E,metadata:T}=S,y=qt(0,0,0),M=qt(0,0,0);if(E.worldToIndexVec3(f,y),y[0]=Math.floor(y[0]),y[1]=Math.floor(y[1]),y[2]=Math.floor(y[2]),E.worldToIndexVec3(v,M),M[0]=Math.floor(M[0]),M[1]=Math.floor(M[1]),M[2]=Math.floor(M[2]),this._isInsideVolume(y,M,I)){this.isHandleOutsideImage=!1;const _=Math.min(y[0],M[0]),O=Math.max(y[0],M[0]),w=Math.min(y[1],M[1]),x=Math.max(y[1],M[1]),P=Math.min(y[2],M[2]),R=Math.max(y[2],M[2]),{worldWidth:L,worldHeight:H}=iD(r,a,f,v),F=L*H;let U=0,V=0,X=0;const re=I[0],ue=I[0]*I[1];for(let De=P;De<=R;De++)for(let pe=w;pe<=x;pe++)for(let Te=_;Te<=O;Te++){const Fe=D[De*ue+pe*re+Te];U++,V+=Fe}V/=U;for(let De=P;De<=R;De++)for(let pe=w;pe<=x;pe++)for(let Te=_;Te<=O;Te++){const Ne=D[De*ue+pe*re+Te]-V;X+=Ne*Ne}X/=U,X=Math.sqrt(X),g[p]={Modality:T.Modality,area:F,mean:V,stdDev:X}}else this.isHandleOutsideImage=!0,g[p]={Modality:T.Modality}}s.invalidated=!1;const m=B.ANNOTATION_MODIFIED;return Dt(ot,m,{annotation:n,viewportUID:c,renderingEngineUID:l,sceneUID:u}),g},this._isInsideVolume=(n,r,a)=>ga(n,a)&&ga(r,a),this._getTargetVolumeUID=n=>{if(this.configuration.volumeUID)return this.configuration.volumeUID;const r=n.getVolumeActors();if(!(!r&&!r.length))return r[0].uid},this._throttledCalculateCachedStats=no(this._calculateCachedStats,100,{trailing:!0})}cancel(e){if(!this.isDrawing)return;this.isDrawing=!1,this._deactivateDraw(e),this._deactivateModify(e),Mn(e);const{annotation:n,viewportUIDsToRender:r}=this.editData,{data:a}=n;return a.active=!1,a.handles.activeHandleIndex=null,qe(r),this.editData=null,n.metadata.annotationUID}_getImageVolumeFromTargetUID(e,n){let r,a;if(e.startsWith("stackTarget")){const i=e.indexOf(":"),o=e.substring(i+1);r=n.getViewport(o).getImageData()}else r=Ye.getVolume(e);return{imageVolume:r,viewport:a}}_getTargetStackUID(e){return`stackTarget:${e.uid}`}};F$.toolName="VideoRedaction";const sD=Object.freeze(Object.defineProperty({__proto__:null,AdvancedMagnifyTool:ym,AngleTool:MC,AnnotationDisplayTool:du,AnnotationTool:Br,ArrowAnnotateTool:YH,BaseTool:Xa,BidirectionalTool:v4,BrushTool:f4,CONSTANTS:GDe,CircleROIStartEndThresholdTool:l$,CircleROITool:y4,CircleScissorsTool:s$,CobbAngleTool:ZH,CrosshairsTool:RH,DragProbeTool:qH,ETDRSGridTool:QH,EllipticalROITool:jH,Enums:XV,EraserTool:n$,HeightTool:zH,KeyImageTool:e$,LabelmapBaseTool:b1,LengthTool:$H,LivewireContourSegmentationTool:XH,LivewireContourTool:M4,MIPJumpToClickTool:xH,MagnifyTool:bH,OrientationMarkerTool:OC,OverlayGridTool:LH,PaintFillTool:u$,PanTool:yH,PlanarFreehandContourSegmentationTool:Eh,PlanarFreehandROITool:n4,PlanarRotateTool:PH,ProbeTool:T4,RectangleROIStartEndThresholdTool:s4,RectangleROIThresholdTool:c4,RectangleROITool:eD,RectangleScissorsTool:o$,ReferenceCursors:kH,ReferenceLinesTool:NH,RegionSegmentPlusTool:a$,RegionSegmentTool:r$,ScaleOverlayTool:GH,SculptorTool:WH,SegmentSelectTool:wC,SegmentationIntersectionTool:UH,SphereScissorsTool:c$,SplineContourSegmentationTool:KH,SplineROITool:Mm,StackScrollTool:wH,Synchronizer:sW,SynchronizerManager:UDe,ToolGroupManager:Dme,TrackballRotateTool:MH,Types:Nye,UltrasoundDirectionalTool:JH,VideoRedactionTool:F$,VolumeRotateTool:HH,WholeBodySegmentTool:i$,WindowLevelRegionTool:OH,WindowLevelTool:_H,ZoomTool:AH,addTool:sk,annotation:XSe,cancelActiveManipulations:ADe,cursors:hme,destroy:FDe,drawing:i2e,init:cW,removeTool:Pme,segmentation:tMe,splines:oMe,get state(){return st},synchronizers:oEe,utilities:bye},Symbol.toStringTag,{value:"Module"})),{LengthTool:F_e,HeightTool:vA,ProbeTool:gA,RectangleROITool:dA,EllipticalROITool:mA,CircleROITool:hA,BidirectionalTool:pA,CobbAngleTool:SA,ArrowAnnotateTool:CA,PlanarFreehandROITool:IA,EraserTool:DA,KeyImageTool:EA,VideoRedactionTool:TA}=sD,ds=new Map;ds.set(F_e.toolName,{});ds.set(vA.toolName,{tool:vA});ds.set(gA.toolName,{tool:gA});ds.set(dA.toolName,{tool:dA});ds.set(mA.toolName,{tool:mA});ds.set(hA.toolName,{tool:hA});ds.set(pA.toolName,{tool:pA});ds.set(SA.toolName,{tool:SA});ds.set(CA.toolName,{tool:CA});ds.set(IA.toolName,{tool:IA,configuration:{calculateStats:!0}});ds.set(DA.toolName,{tool:DA});ds.set(EA.toolName,{tool:EA});ds.set(TA.toolName,{tool:TA});const{MouseBindings:yA,KeyboardBindings:V_e}=XV;yA.Primary,yA.Primary,V_e.Shift;const{SplineContourSegmentationTool:jl,LivewireContourSegmentationTool:Ny,PlanarFreehandContourSegmentationTool:Ly}=sD,pu=new Map,R4={interpolation:{enabled:!0},decimate:{enabled:!0,epsilon:.5}};pu.set(Ly.toolName,{tool:Ly});pu.set(Ny.toolName,{tool:Ny});pu.set("CatmullRomSplineROI",{tool:jl,baseTool:jl.toolName,configuration:{splineType:jl.SplineTypes.CatmullRom}});pu.set("LinearSplineROI",{baseTool:jl.toolName,configuration:{splineType:jl.SplineTypes.Linear}});pu.set("BSplineROI",{baseTool:jl.toolName,configuration:{splineType:jl.SplineTypes.BSpline}});pu.set("FreeformInterpolation",{baseTool:Ly.toolName,configuration:R4});pu.set("SplineInterpolation",{baseTool:jl.toolName,configuration:R4});pu.set("LivewireInterpolation",{baseTool:Ny.toolName,configuration:R4});var Yg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function k_e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var V$={exports:{}};(function(t){(function(e,n){t.exports?t.exports=n():e.log=n()})(Yg,function(){var e=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),a=["trace","debug","info","warn","error"],i={},o=null;function s(m,h){var C=m[h];if(typeof C.bind=="function")return C.bind(m);try{return Function.prototype.bind.call(C,m)}catch{return function(){return Function.prototype.apply.apply(C,[m,arguments])}}}function c(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function l(m){return m==="debug"&&(m="log"),typeof console===n?!1:m==="trace"&&r?c:console[m]!==void 0?s(console,m):console.log!==void 0?s(console,"log"):e}function u(){for(var m=this.getLevel(),h=0;h<a.length;h++){var C=a[h];this[C]=h<m?e:this.methodFactory(C,m,this.name)}if(this.log=this.debug,typeof console===n&&m<this.levels.SILENT)return"No console available for logging"}function f(m){return function(){typeof console!==n&&(u.call(this),this[m].apply(this,arguments))}}function v(m,h,C){return l(m)||f.apply(this,arguments)}function g(m,h){var C=this,p,S,I,D="loglevel";typeof m=="string"?D+=":"+m:typeof m=="symbol"&&(D=void 0);function E(O){var w=(a[O]||"silent").toUpperCase();if(!(typeof window===n||!D)){try{window.localStorage[D]=w;return}catch{}try{window.document.cookie=encodeURIComponent(D)+"="+w+";"}catch{}}}function T(){var O;if(!(typeof window===n||!D)){try{O=window.localStorage[D]}catch{}if(typeof O===n)try{var w=window.document.cookie,x=encodeURIComponent(D),P=w.indexOf(x+"=");P!==-1&&(O=/^([^;]+)/.exec(w.slice(P+x.length+1))[1])}catch{}return C.levels[O]===void 0&&(O=void 0),O}}function y(){if(!(typeof window===n||!D)){try{window.localStorage.removeItem(D)}catch{}try{window.document.cookie=encodeURIComponent(D)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function M(O){var w=O;if(typeof w=="string"&&C.levels[w.toUpperCase()]!==void 0&&(w=C.levels[w.toUpperCase()]),typeof w=="number"&&w>=0&&w<=C.levels.SILENT)return w;throw new TypeError("log.setLevel() called with invalid level: "+O)}C.name=m,C.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},C.methodFactory=h||v,C.getLevel=function(){return I??S??p},C.setLevel=function(O,w){return I=M(O),w!==!1&&E(I),u.call(C)},C.setDefaultLevel=function(O){S=M(O),T()||C.setLevel(O,!1)},C.resetLevel=function(){I=null,y(),u.call(C)},C.enableAll=function(O){C.setLevel(C.levels.TRACE,O)},C.disableAll=function(O){C.setLevel(C.levels.SILENT,O)},C.rebuild=function(){if(o!==C&&(p=M(o.getLevel())),u.call(C),o===C)for(var O in i)i[O].rebuild()},p=M(o?o.getLevel():"WARN");var _=T();_!=null&&(I=M(_)),u.call(C)}o=new g,o.getLogger=function(h){if(typeof h!="symbol"&&typeof h!="string"||h==="")throw new TypeError("You must supply a name when creating a logger.");var C=i[h];return C||(C=i[h]=new g(h,o.methodFactory)),C};var d=typeof window!==n?window.log:void 0;return o.noConflict=function(){return typeof window!==n&&window.log===o&&(window.log=d),o},o.getLoggers=function(){return i},o.default=o,o})})(V$);var G_e=V$.exports,Ga=k_e(G_e);Ga.setLevel("warn");var g3=Ga.getLogger("validation.dcmjs");function Zt(t,e,n){return e=yn(e),$_e(t,k$()?Reflect.construct(e,n||[],yn(t).constructor):e.apply(t,n))}function k$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(k$=function(){return!!t})()}function B_e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,a,i,o,s=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(u){l=!0,a=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw a}}return s}}function MA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Aa(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MA(Object(n),!0).forEach(function(r){cD(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function W_e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function G$(t){var e=W_e(t,"string");return typeof e=="symbol"?e:String(e)}function N1(t){"@babel/helpers - typeof";return N1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N1(t)}function Pt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _A(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,G$(r.key),r)}}function At(t,e,n){return e&&_A(t.prototype,e),n&&_A(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function cD(t,e,n){return e=G$(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Uy(t,e)}function yn(t){return yn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},yn(t)}function Uy(t,e){return Uy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Uy(t,e)}function H_e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $_e(t,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return H_e(t)}function z_e(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&(t=yn(t),t!==null););return t}function An(){return typeof Reflect<"u"&&Reflect.get?An=Reflect.get.bind():An=function(e,n,r){var a=z_e(e,n);if(a){var i=Object.getOwnPropertyDescriptor(a,n);return i.get?i.get.call(arguments.length<3?e:r):i.value}},An.apply(this,arguments)}function Ja(t,e){return j_e(t)||B_e(t,e)||b4(t,e)||X_e()}function ns(t){return q_e(t)||Q_e(t)||b4(t)||K_e()}function q_e(t){if(Array.isArray(t))return Fy(t)}function j_e(t){if(Array.isArray(t))return t}function Q_e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function b4(t,e){if(t){if(typeof t=="string")return Fy(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fy(t,e)}}function Fy(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function K_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function X_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OA(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=b4(t))||e){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(c){throw c},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){n=n.call(t)},n:function(){var c=n.next();return i=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!i&&n.return!=null&&n.return()}finally{if(o)throw s}}}}/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const Y_e=4,wA=0,PA=1,Z_e=2;function eg(t){let e=t.length;for(;--e>=0;)t[e]=0}const J_e=0,B$=1,e4e=2,t4e=3,n4e=258,N4=29,Mh=256,Pm=Mh+1+N4,ev=30,L4=19,W$=2*Pm+1,n1=15,d3=16,r4e=7,U4=256,H$=16,$$=17,z$=18,Vy=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),aS=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),a4e=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),q$=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),i4e=512,_c=new Array((Pm+2)*2);eg(_c);const Pd=new Array(ev*2);eg(Pd);const Am=new Array(i4e);eg(Am);const xm=new Array(n4e-t4e+1);eg(xm);const F4=new Array(N4);eg(F4);const PC=new Array(ev);eg(PC);function m3(t,e,n,r,a){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=r,this.max_length=a,this.has_stree=t&&t.length}let j$,Q$,K$;function h3(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}const X$=t=>t<256?Am[t]:Am[256+(t>>>7)],Rm=(t,e)=>{t.pending_buf[t.pending++]=e&255,t.pending_buf[t.pending++]=e>>>8&255},Uo=(t,e,n)=>{t.bi_valid>d3-n?(t.bi_buf|=e<<t.bi_valid&65535,Rm(t,t.bi_buf),t.bi_buf=e>>d3-t.bi_valid,t.bi_valid+=n-d3):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)},x0=(t,e,n)=>{Uo(t,n[e*2],n[e*2+1])},Y$=(t,e)=>{let n=0;do n|=t&1,t>>>=1,n<<=1;while(--e>0);return n>>>1},o4e=t=>{t.bi_valid===16?(Rm(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=t.bi_buf&255,t.bi_buf>>=8,t.bi_valid-=8)},s4e=(t,e)=>{const n=e.dyn_tree,r=e.max_code,a=e.stat_desc.static_tree,i=e.stat_desc.has_stree,o=e.stat_desc.extra_bits,s=e.stat_desc.extra_base,c=e.stat_desc.max_length;let l,u,f,v,g,d,m=0;for(v=0;v<=n1;v++)t.bl_count[v]=0;for(n[t.heap[t.heap_max]*2+1]=0,l=t.heap_max+1;l<W$;l++)u=t.heap[l],v=n[n[u*2+1]*2+1]+1,v>c&&(v=c,m++),n[u*2+1]=v,!(u>r)&&(t.bl_count[v]++,g=0,u>=s&&(g=o[u-s]),d=n[u*2],t.opt_len+=d*(v+g),i&&(t.static_len+=d*(a[u*2+1]+g)));if(m!==0){do{for(v=c-1;t.bl_count[v]===0;)v--;t.bl_count[v]--,t.bl_count[v+1]+=2,t.bl_count[c]--,m-=2}while(m>0);for(v=c;v!==0;v--)for(u=t.bl_count[v];u!==0;)f=t.heap[--l],!(f>r)&&(n[f*2+1]!==v&&(t.opt_len+=(v-n[f*2+1])*n[f*2],n[f*2+1]=v),u--)}},Z$=(t,e,n)=>{const r=new Array(n1+1);let a=0,i,o;for(i=1;i<=n1;i++)a=a+n[i-1]<<1,r[i]=a;for(o=0;o<=e;o++){let s=t[o*2+1];s!==0&&(t[o*2]=Y$(r[s]++,s))}},c4e=()=>{let t,e,n,r,a;const i=new Array(n1+1);for(n=0,r=0;r<N4-1;r++)for(F4[r]=n,t=0;t<1<<Vy[r];t++)xm[n++]=r;for(xm[n-1]=r,a=0,r=0;r<16;r++)for(PC[r]=a,t=0;t<1<<aS[r];t++)Am[a++]=r;for(a>>=7;r<ev;r++)for(PC[r]=a<<7,t=0;t<1<<aS[r]-7;t++)Am[256+a++]=r;for(e=0;e<=n1;e++)i[e]=0;for(t=0;t<=143;)_c[t*2+1]=8,t++,i[8]++;for(;t<=255;)_c[t*2+1]=9,t++,i[9]++;for(;t<=279;)_c[t*2+1]=7,t++,i[7]++;for(;t<=287;)_c[t*2+1]=8,t++,i[8]++;for(Z$(_c,Pm+1,i),t=0;t<ev;t++)Pd[t*2+1]=5,Pd[t*2]=Y$(t,5);j$=new m3(_c,Vy,Mh+1,Pm,n1),Q$=new m3(Pd,aS,0,ev,n1),K$=new m3(new Array(0),a4e,0,L4,r4e)},J$=t=>{let e;for(e=0;e<Pm;e++)t.dyn_ltree[e*2]=0;for(e=0;e<ev;e++)t.dyn_dtree[e*2]=0;for(e=0;e<L4;e++)t.bl_tree[e*2]=0;t.dyn_ltree[U4*2]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},ez=t=>{t.bi_valid>8?Rm(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},AA=(t,e,n,r)=>{const a=e*2,i=n*2;return t[a]<t[i]||t[a]===t[i]&&r[e]<=r[n]},p3=(t,e,n)=>{const r=t.heap[n];let a=n<<1;for(;a<=t.heap_len&&(a<t.heap_len&&AA(e,t.heap[a+1],t.heap[a],t.depth)&&a++,!AA(e,r,t.heap[a],t.depth));)t.heap[n]=t.heap[a],n=a,a<<=1;t.heap[n]=r},xA=(t,e,n)=>{let r,a,i=0,o,s;if(t.sym_next!==0)do r=t.pending_buf[t.sym_buf+i++]&255,r+=(t.pending_buf[t.sym_buf+i++]&255)<<8,a=t.pending_buf[t.sym_buf+i++],r===0?x0(t,a,e):(o=xm[a],x0(t,o+Mh+1,e),s=Vy[o],s!==0&&(a-=F4[o],Uo(t,a,s)),r--,o=X$(r),x0(t,o,n),s=aS[o],s!==0&&(r-=PC[o],Uo(t,r,s)));while(i<t.sym_next);x0(t,U4,e)},ky=(t,e)=>{const n=e.dyn_tree,r=e.stat_desc.static_tree,a=e.stat_desc.has_stree,i=e.stat_desc.elems;let o,s,c=-1,l;for(t.heap_len=0,t.heap_max=W$,o=0;o<i;o++)n[o*2]!==0?(t.heap[++t.heap_len]=c=o,t.depth[o]=0):n[o*2+1]=0;for(;t.heap_len<2;)l=t.heap[++t.heap_len]=c<2?++c:0,n[l*2]=1,t.depth[l]=0,t.opt_len--,a&&(t.static_len-=r[l*2+1]);for(e.max_code=c,o=t.heap_len>>1;o>=1;o--)p3(t,n,o);l=i;do o=t.heap[1],t.heap[1]=t.heap[t.heap_len--],p3(t,n,1),s=t.heap[1],t.heap[--t.heap_max]=o,t.heap[--t.heap_max]=s,n[l*2]=n[o*2]+n[s*2],t.depth[l]=(t.depth[o]>=t.depth[s]?t.depth[o]:t.depth[s])+1,n[o*2+1]=n[s*2+1]=l,t.heap[1]=l++,p3(t,n,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],s4e(t,e),Z$(n,c,t.bl_count)},RA=(t,e,n)=>{let r,a=-1,i,o=e[0*2+1],s=0,c=7,l=4;for(o===0&&(c=138,l=3),e[(n+1)*2+1]=65535,r=0;r<=n;r++)i=o,o=e[(r+1)*2+1],!(++s<c&&i===o)&&(s<l?t.bl_tree[i*2]+=s:i!==0?(i!==a&&t.bl_tree[i*2]++,t.bl_tree[H$*2]++):s<=10?t.bl_tree[$$*2]++:t.bl_tree[z$*2]++,s=0,a=i,o===0?(c=138,l=3):i===o?(c=6,l=3):(c=7,l=4))},bA=(t,e,n)=>{let r,a=-1,i,o=e[0*2+1],s=0,c=7,l=4;for(o===0&&(c=138,l=3),r=0;r<=n;r++)if(i=o,o=e[(r+1)*2+1],!(++s<c&&i===o)){if(s<l)do x0(t,i,t.bl_tree);while(--s!==0);else i!==0?(i!==a&&(x0(t,i,t.bl_tree),s--),x0(t,H$,t.bl_tree),Uo(t,s-3,2)):s<=10?(x0(t,$$,t.bl_tree),Uo(t,s-3,3)):(x0(t,z$,t.bl_tree),Uo(t,s-11,7));s=0,a=i,o===0?(c=138,l=3):i===o?(c=6,l=3):(c=7,l=4)}},l4e=t=>{let e;for(RA(t,t.dyn_ltree,t.l_desc.max_code),RA(t,t.dyn_dtree,t.d_desc.max_code),ky(t,t.bl_desc),e=L4-1;e>=3&&t.bl_tree[q$[e]*2+1]===0;e--);return t.opt_len+=3*(e+1)+5+5+4,e},u4e=(t,e,n,r)=>{let a;for(Uo(t,e-257,5),Uo(t,n-1,5),Uo(t,r-4,4),a=0;a<r;a++)Uo(t,t.bl_tree[q$[a]*2+1],3);bA(t,t.dyn_ltree,e-1),bA(t,t.dyn_dtree,n-1)},f4e=t=>{let e=4093624447,n;for(n=0;n<=31;n++,e>>>=1)if(e&1&&t.dyn_ltree[n*2]!==0)return wA;if(t.dyn_ltree[9*2]!==0||t.dyn_ltree[10*2]!==0||t.dyn_ltree[13*2]!==0)return PA;for(n=32;n<Mh;n++)if(t.dyn_ltree[n*2]!==0)return PA;return wA};let NA=!1;const v4e=t=>{NA||(c4e(),NA=!0),t.l_desc=new h3(t.dyn_ltree,j$),t.d_desc=new h3(t.dyn_dtree,Q$),t.bl_desc=new h3(t.bl_tree,K$),t.bi_buf=0,t.bi_valid=0,J$(t)},tz=(t,e,n,r)=>{Uo(t,(J_e<<1)+(r?1:0),3),ez(t),Rm(t,n),Rm(t,~n),n&&t.pending_buf.set(t.window.subarray(e,e+n),t.pending),t.pending+=n},g4e=t=>{Uo(t,B$<<1,3),x0(t,U4,_c),o4e(t)},d4e=(t,e,n,r)=>{let a,i,o=0;t.level>0?(t.strm.data_type===Z_e&&(t.strm.data_type=f4e(t)),ky(t,t.l_desc),ky(t,t.d_desc),o=l4e(t),a=t.opt_len+3+7>>>3,i=t.static_len+3+7>>>3,i<=a&&(a=i)):a=i=n+5,n+4<=a&&e!==-1?tz(t,e,n,r):t.strategy===Y_e||i===a?(Uo(t,(B$<<1)+(r?1:0),3),xA(t,_c,Pd)):(Uo(t,(e4e<<1)+(r?1:0),3),u4e(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),xA(t,t.dyn_ltree,t.dyn_dtree)),J$(t),r&&ez(t)},m4e=(t,e,n)=>(t.pending_buf[t.sym_buf+t.sym_next++]=e,t.pending_buf[t.sym_buf+t.sym_next++]=e>>8,t.pending_buf[t.sym_buf+t.sym_next++]=n,e===0?t.dyn_ltree[n*2]++:(t.matches++,e--,t.dyn_ltree[(xm[n]+Mh+1)*2]++,t.dyn_dtree[X$(e)*2]++),t.sym_next===t.sym_end);var h4e=v4e,p4e=tz,S4e=d4e,C4e=m4e,I4e=g4e,D4e={_tr_init:h4e,_tr_stored_block:p4e,_tr_flush_block:S4e,_tr_tally:C4e,_tr_align:I4e};const E4e=(t,e,n,r)=>{let a=t&65535|0,i=t>>>16&65535|0,o=0;for(;n!==0;){o=n>2e3?2e3:n,n-=o;do a=a+e[r++]|0,i=i+a|0;while(--o);a%=65521,i%=65521}return a|i<<16|0};var bm=E4e;const T4e=()=>{let t,e=[];for(var n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=t&1?3988292384^t>>>1:t>>>1;e[n]=t}return e},y4e=new Uint32Array(T4e()),M4e=(t,e,n,r)=>{const a=y4e,i=r+n;t^=-1;for(let o=r;o<i;o++)t=t>>>8^a[(t^e[o])&255];return t^-1};var yi=M4e,L1={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Q1={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:_4e,_tr_stored_block:Gy,_tr_flush_block:O4e,_tr_tally:Ql,_tr_align:w4e}=D4e,{Z_NO_FLUSH:Kl,Z_PARTIAL_FLUSH:P4e,Z_FULL_FLUSH:A4e,Z_FINISH:Os,Z_BLOCK:LA,Z_OK:bi,Z_STREAM_END:UA,Z_STREAM_ERROR:W0,Z_DATA_ERROR:x4e,Z_BUF_ERROR:S3,Z_DEFAULT_COMPRESSION:R4e,Z_FILTERED:b4e,Z_HUFFMAN_ONLY:i2,Z_RLE:N4e,Z_FIXED:L4e,Z_DEFAULT_STRATEGY:U4e,Z_UNKNOWN:F4e,Z_DEFLATED:lD}=Q1,V4e=9,k4e=15,G4e=8,B4e=29,W4e=256,By=W4e+1+B4e,H4e=30,$4e=19,z4e=2*By+1,q4e=15,pr=3,Vl=258,H0=Vl+pr+1,j4e=32,Dv=42,V4=57,Wy=69,Hy=73,$y=91,zy=103,r1=113,Zg=666,Co=1,tg=2,U1=3,ng=4,Q4e=3,a1=(t,e)=>(t.msg=L1[e],e),FA=t=>t*2-(t>4?9:0),Pl=t=>{let e=t.length;for(;--e>=0;)t[e]=0},K4e=t=>{let e,n,r,a=t.w_size;e=t.hash_size,r=e;do n=t.head[--r],t.head[r]=n>=a?n-a:0;while(--e);e=a,r=e;do n=t.prev[--r],t.prev[r]=n>=a?n-a:0;while(--e)};let X4e=(t,e,n)=>(e<<t.hash_shift^n)&t.hash_mask,Xl=X4e;const Xo=t=>{const e=t.state;let n=e.pending;n>t.avail_out&&(n=t.avail_out),n!==0&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+n),t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,e.pending===0&&(e.pending_out=0))},ss=(t,e)=>{O4e(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,Xo(t.strm)},_r=(t,e)=>{t.pending_buf[t.pending++]=e},wg=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=e&255},qy=(t,e,n,r)=>{let a=t.avail_in;return a>r&&(a=r),a===0?0:(t.avail_in-=a,e.set(t.input.subarray(t.next_in,t.next_in+a),n),t.state.wrap===1?t.adler=bm(t.adler,e,a,n):t.state.wrap===2&&(t.adler=yi(t.adler,e,a,n)),t.next_in+=a,t.total_in+=a,a)},nz=(t,e)=>{let n=t.max_chain_length,r=t.strstart,a,i,o=t.prev_length,s=t.nice_match;const c=t.strstart>t.w_size-H0?t.strstart-(t.w_size-H0):0,l=t.window,u=t.w_mask,f=t.prev,v=t.strstart+Vl;let g=l[r+o-1],d=l[r+o];t.prev_length>=t.good_match&&(n>>=2),s>t.lookahead&&(s=t.lookahead);do if(a=e,!(l[a+o]!==d||l[a+o-1]!==g||l[a]!==l[r]||l[++a]!==l[r+1])){r+=2,a++;do;while(l[++r]===l[++a]&&l[++r]===l[++a]&&l[++r]===l[++a]&&l[++r]===l[++a]&&l[++r]===l[++a]&&l[++r]===l[++a]&&l[++r]===l[++a]&&l[++r]===l[++a]&&r<v);if(i=Vl-(v-r),r=v-Vl,i>o){if(t.match_start=e,o=i,i>=s)break;g=l[r+o-1],d=l[r+o]}}while((e=f[e&u])>c&&--n!==0);return o<=t.lookahead?o:t.lookahead},Ev=t=>{const e=t.w_size;let n,r,a;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-H0)&&(t.window.set(t.window.subarray(e,e+e-r),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,t.insert>t.strstart&&(t.insert=t.strstart),K4e(t),r+=e),t.strm.avail_in===0)break;if(n=qy(t.strm,t.window,t.strstart+t.lookahead,r),t.lookahead+=n,t.lookahead+t.insert>=pr)for(a=t.strstart-t.insert,t.ins_h=t.window[a],t.ins_h=Xl(t,t.ins_h,t.window[a+1]);t.insert&&(t.ins_h=Xl(t,t.ins_h,t.window[a+pr-1]),t.prev[a&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=a,a++,t.insert--,!(t.lookahead+t.insert<pr)););}while(t.lookahead<H0&&t.strm.avail_in!==0)},rz=(t,e)=>{let n=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,r,a,i,o=0,s=t.strm.avail_in;do{if(r=65535,i=t.bi_valid+42>>3,t.strm.avail_out<i||(i=t.strm.avail_out-i,a=t.strstart-t.block_start,r>a+t.strm.avail_in&&(r=a+t.strm.avail_in),r>i&&(r=i),r<n&&(r===0&&e!==Os||e===Kl||r!==a+t.strm.avail_in)))break;o=e===Os&&r===a+t.strm.avail_in?1:0,Gy(t,0,0,o),t.pending_buf[t.pending-4]=r,t.pending_buf[t.pending-3]=r>>8,t.pending_buf[t.pending-2]=~r,t.pending_buf[t.pending-1]=~r>>8,Xo(t.strm),a&&(a>r&&(a=r),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+a),t.strm.next_out),t.strm.next_out+=a,t.strm.avail_out-=a,t.strm.total_out+=a,t.block_start+=a,r-=a),r&&(qy(t.strm,t.strm.output,t.strm.next_out,r),t.strm.next_out+=r,t.strm.avail_out-=r,t.strm.total_out+=r)}while(o===0);return s-=t.strm.avail_in,s&&(s>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=s&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-s,t.strm.next_in),t.strstart),t.strstart+=s,t.insert+=s>t.w_size-t.insert?t.w_size-t.insert:s),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),o?ng:e!==Kl&&e!==Os&&t.strm.avail_in===0&&t.strstart===t.block_start?tg:(i=t.window_size-t.strstart,t.strm.avail_in>i&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,i+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),i>t.strm.avail_in&&(i=t.strm.avail_in),i&&(qy(t.strm,t.window,t.strstart,i),t.strstart+=i,t.insert+=i>t.w_size-t.insert?t.w_size-t.insert:i),t.high_water<t.strstart&&(t.high_water=t.strstart),i=t.bi_valid+42>>3,i=t.pending_buf_size-i>65535?65535:t.pending_buf_size-i,n=i>t.w_size?t.w_size:i,a=t.strstart-t.block_start,(a>=n||(a||e===Os)&&e!==Kl&&t.strm.avail_in===0&&a<=i)&&(r=a>i?i:a,o=e===Os&&t.strm.avail_in===0&&r===a?1:0,Gy(t,t.block_start,r,o),t.block_start+=r,Xo(t.strm)),o?U1:Co)},C3=(t,e)=>{let n,r;for(;;){if(t.lookahead<H0){if(Ev(t),t.lookahead<H0&&e===Kl)return Co;if(t.lookahead===0)break}if(n=0,t.lookahead>=pr&&(t.ins_h=Xl(t,t.ins_h,t.window[t.strstart+pr-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),n!==0&&t.strstart-n<=t.w_size-H0&&(t.match_length=nz(t,n)),t.match_length>=pr)if(r=Ql(t,t.strstart-t.match_start,t.match_length-pr),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=pr){t.match_length--;do t.strstart++,t.ins_h=Xl(t,t.ins_h,t.window[t.strstart+pr-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(--t.match_length!==0);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=Xl(t,t.ins_h,t.window[t.strstart+1]);else r=Ql(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(ss(t,!1),t.strm.avail_out===0))return Co}return t.insert=t.strstart<pr-1?t.strstart:pr-1,e===Os?(ss(t,!0),t.strm.avail_out===0?U1:ng):t.sym_next&&(ss(t,!1),t.strm.avail_out===0)?Co:tg},gf=(t,e)=>{let n,r,a;for(;;){if(t.lookahead<H0){if(Ev(t),t.lookahead<H0&&e===Kl)return Co;if(t.lookahead===0)break}if(n=0,t.lookahead>=pr&&(t.ins_h=Xl(t,t.ins_h,t.window[t.strstart+pr-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=pr-1,n!==0&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-H0&&(t.match_length=nz(t,n),t.match_length<=5&&(t.strategy===b4e||t.match_length===pr&&t.strstart-t.match_start>4096)&&(t.match_length=pr-1)),t.prev_length>=pr&&t.match_length<=t.prev_length){a=t.strstart+t.lookahead-pr,r=Ql(t,t.strstart-1-t.prev_match,t.prev_length-pr),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=a&&(t.ins_h=Xl(t,t.ins_h,t.window[t.strstart+pr-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(--t.prev_length!==0);if(t.match_available=0,t.match_length=pr-1,t.strstart++,r&&(ss(t,!1),t.strm.avail_out===0))return Co}else if(t.match_available){if(r=Ql(t,0,t.window[t.strstart-1]),r&&ss(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return Co}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=Ql(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<pr-1?t.strstart:pr-1,e===Os?(ss(t,!0),t.strm.avail_out===0?U1:ng):t.sym_next&&(ss(t,!1),t.strm.avail_out===0)?Co:tg},Y4e=(t,e)=>{let n,r,a,i;const o=t.window;for(;;){if(t.lookahead<=Vl){if(Ev(t),t.lookahead<=Vl&&e===Kl)return Co;if(t.lookahead===0)break}if(t.match_length=0,t.lookahead>=pr&&t.strstart>0&&(a=t.strstart-1,r=o[a],r===o[++a]&&r===o[++a]&&r===o[++a])){i=t.strstart+Vl;do;while(r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&a<i);t.match_length=Vl-(i-a),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=pr?(n=Ql(t,1,t.match_length-pr),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=Ql(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(ss(t,!1),t.strm.avail_out===0))return Co}return t.insert=0,e===Os?(ss(t,!0),t.strm.avail_out===0?U1:ng):t.sym_next&&(ss(t,!1),t.strm.avail_out===0)?Co:tg},Z4e=(t,e)=>{let n;for(;;){if(t.lookahead===0&&(Ev(t),t.lookahead===0)){if(e===Kl)return Co;break}if(t.match_length=0,n=Ql(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(ss(t,!1),t.strm.avail_out===0))return Co}return t.insert=0,e===Os?(ss(t,!0),t.strm.avail_out===0?U1:ng):t.sym_next&&(ss(t,!1),t.strm.avail_out===0)?Co:tg};function D0(t,e,n,r,a){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=r,this.func=a}const Jg=[new D0(0,0,0,0,rz),new D0(4,4,8,4,C3),new D0(4,5,16,8,C3),new D0(4,6,32,32,C3),new D0(4,4,16,16,gf),new D0(8,16,32,32,gf),new D0(8,16,128,128,gf),new D0(8,32,128,256,gf),new D0(32,128,258,1024,gf),new D0(32,258,258,4096,gf)],J4e=t=>{t.window_size=2*t.w_size,Pl(t.head),t.max_lazy_match=Jg[t.level].max_lazy,t.good_match=Jg[t.level].good_length,t.nice_match=Jg[t.level].nice_length,t.max_chain_length=Jg[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=pr-1,t.match_available=0,t.ins_h=0};function eOe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=lD,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(z4e*2),this.dyn_dtree=new Uint16Array((2*H4e+1)*2),this.bl_tree=new Uint16Array((2*$4e+1)*2),Pl(this.dyn_ltree),Pl(this.dyn_dtree),Pl(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(q4e+1),this.heap=new Uint16Array(2*By+1),Pl(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*By+1),Pl(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const _h=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.status!==Dv&&e.status!==V4&&e.status!==Wy&&e.status!==Hy&&e.status!==$y&&e.status!==zy&&e.status!==r1&&e.status!==Zg?1:0},az=t=>{if(_h(t))return a1(t,W0);t.total_in=t.total_out=0,t.data_type=F4e;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap===2?V4:e.wrap?Dv:r1,t.adler=e.wrap===2?0:1,e.last_flush=-2,_4e(e),bi},iz=t=>{const e=az(t);return e===bi&&J4e(t.state),e},tOe=(t,e)=>_h(t)||t.state.wrap!==2?W0:(t.state.gzhead=e,bi),oz=(t,e,n,r,a,i)=>{if(!t)return W0;let o=1;if(e===R4e&&(e=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),a<1||a>V4e||n!==lD||r<8||r>15||e<0||e>9||i<0||i>L4e||r===8&&o!==1)return a1(t,W0);r===8&&(r=9);const s=new eOe;return t.state=s,s.strm=t,s.status=Dv,s.wrap=o,s.gzhead=null,s.w_bits=r,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=a+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+pr-1)/pr),s.window=new Uint8Array(s.w_size*2),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<a+6,s.pending_buf_size=s.lit_bufsize*4,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=(s.lit_bufsize-1)*3,s.level=e,s.strategy=i,s.method=n,iz(t)},nOe=(t,e)=>oz(t,e,lD,k4e,G4e,U4e),rOe=(t,e)=>{if(_h(t)||e>LA||e<0)return t?a1(t,W0):W0;const n=t.state;if(!t.output||t.avail_in!==0&&!t.input||n.status===Zg&&e!==Os)return a1(t,t.avail_out===0?S3:W0);const r=n.last_flush;if(n.last_flush=e,n.pending!==0){if(Xo(t),t.avail_out===0)return n.last_flush=-1,bi}else if(t.avail_in===0&&FA(e)<=FA(r)&&e!==Os)return a1(t,S3);if(n.status===Zg&&t.avail_in!==0)return a1(t,S3);if(n.status===Dv&&n.wrap===0&&(n.status=r1),n.status===Dv){let a=lD+(n.w_bits-8<<4)<<8,i=-1;if(n.strategy>=i2||n.level<2?i=0:n.level<6?i=1:n.level===6?i=2:i=3,a|=i<<6,n.strstart!==0&&(a|=j4e),a+=31-a%31,wg(n,a),n.strstart!==0&&(wg(n,t.adler>>>16),wg(n,t.adler&65535)),t.adler=1,n.status=r1,Xo(t),n.pending!==0)return n.last_flush=-1,bi}if(n.status===V4){if(t.adler=0,_r(n,31),_r(n,139),_r(n,8),n.gzhead)_r(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),_r(n,n.gzhead.time&255),_r(n,n.gzhead.time>>8&255),_r(n,n.gzhead.time>>16&255),_r(n,n.gzhead.time>>24&255),_r(n,n.level===9?2:n.strategy>=i2||n.level<2?4:0),_r(n,n.gzhead.os&255),n.gzhead.extra&&n.gzhead.extra.length&&(_r(n,n.gzhead.extra.length&255),_r(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(t.adler=yi(t.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=Wy;else if(_r(n,0),_r(n,0),_r(n,0),_r(n,0),_r(n,0),_r(n,n.level===9?2:n.strategy>=i2||n.level<2?4:0),_r(n,Q4e),n.status=r1,Xo(t),n.pending!==0)return n.last_flush=-1,bi}if(n.status===Wy){if(n.gzhead.extra){let a=n.pending,i=(n.gzhead.extra.length&65535)-n.gzindex;for(;n.pending+i>n.pending_buf_size;){let s=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+s),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>a&&(t.adler=yi(t.adler,n.pending_buf,n.pending-a,a)),n.gzindex+=s,Xo(t),n.pending!==0)return n.last_flush=-1,bi;a=0,i-=s}let o=new Uint8Array(n.gzhead.extra);n.pending_buf.set(o.subarray(n.gzindex,n.gzindex+i),n.pending),n.pending+=i,n.gzhead.hcrc&&n.pending>a&&(t.adler=yi(t.adler,n.pending_buf,n.pending-a,a)),n.gzindex=0}n.status=Hy}if(n.status===Hy){if(n.gzhead.name){let a=n.pending,i;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>a&&(t.adler=yi(t.adler,n.pending_buf,n.pending-a,a)),Xo(t),n.pending!==0)return n.last_flush=-1,bi;a=0}n.gzindex<n.gzhead.name.length?i=n.gzhead.name.charCodeAt(n.gzindex++)&255:i=0,_r(n,i)}while(i!==0);n.gzhead.hcrc&&n.pending>a&&(t.adler=yi(t.adler,n.pending_buf,n.pending-a,a)),n.gzindex=0}n.status=$y}if(n.status===$y){if(n.gzhead.comment){let a=n.pending,i;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>a&&(t.adler=yi(t.adler,n.pending_buf,n.pending-a,a)),Xo(t),n.pending!==0)return n.last_flush=-1,bi;a=0}n.gzindex<n.gzhead.comment.length?i=n.gzhead.comment.charCodeAt(n.gzindex++)&255:i=0,_r(n,i)}while(i!==0);n.gzhead.hcrc&&n.pending>a&&(t.adler=yi(t.adler,n.pending_buf,n.pending-a,a))}n.status=zy}if(n.status===zy){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(Xo(t),n.pending!==0))return n.last_flush=-1,bi;_r(n,t.adler&255),_r(n,t.adler>>8&255),t.adler=0}if(n.status=r1,Xo(t),n.pending!==0)return n.last_flush=-1,bi}if(t.avail_in!==0||n.lookahead!==0||e!==Kl&&n.status!==Zg){let a=n.level===0?rz(n,e):n.strategy===i2?Z4e(n,e):n.strategy===N4e?Y4e(n,e):Jg[n.level].func(n,e);if((a===U1||a===ng)&&(n.status=Zg),a===Co||a===U1)return t.avail_out===0&&(n.last_flush=-1),bi;if(a===tg&&(e===P4e?w4e(n):e!==LA&&(Gy(n,0,0,!1),e===A4e&&(Pl(n.head),n.lookahead===0&&(n.strstart=0,n.block_start=0,n.insert=0))),Xo(t),t.avail_out===0))return n.last_flush=-1,bi}return e!==Os?bi:n.wrap<=0?UA:(n.wrap===2?(_r(n,t.adler&255),_r(n,t.adler>>8&255),_r(n,t.adler>>16&255),_r(n,t.adler>>24&255),_r(n,t.total_in&255),_r(n,t.total_in>>8&255),_r(n,t.total_in>>16&255),_r(n,t.total_in>>24&255)):(wg(n,t.adler>>>16),wg(n,t.adler&65535)),Xo(t),n.wrap>0&&(n.wrap=-n.wrap),n.pending!==0?bi:UA)},aOe=t=>{if(_h(t))return W0;const e=t.state.status;return t.state=null,e===r1?a1(t,x4e):bi},iOe=(t,e)=>{let n=e.length;if(_h(t))return W0;const r=t.state,a=r.wrap;if(a===2||a===1&&r.status!==Dv||r.lookahead)return W0;if(a===1&&(t.adler=bm(t.adler,e,n,0)),r.wrap=0,n>=r.w_size){a===0&&(Pl(r.head),r.strstart=0,r.block_start=0,r.insert=0);let c=new Uint8Array(r.w_size);c.set(e.subarray(n-r.w_size,n),0),e=c,n=r.w_size}const i=t.avail_in,o=t.next_in,s=t.input;for(t.avail_in=n,t.next_in=0,t.input=e,Ev(r);r.lookahead>=pr;){let c=r.strstart,l=r.lookahead-(pr-1);do r.ins_h=Xl(r,r.ins_h,r.window[c+pr-1]),r.prev[c&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=c,c++;while(--l);r.strstart=c,r.lookahead=pr-1,Ev(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=pr-1,r.match_available=0,t.next_in=o,t.input=s,t.avail_in=i,r.wrap=a,bi};var oOe=nOe,sOe=oz,cOe=iz,lOe=az,uOe=tOe,fOe=rOe,vOe=aOe,gOe=iOe,dOe="pako deflate (from Nodeca project)",Ad={deflateInit:oOe,deflateInit2:sOe,deflateReset:cOe,deflateResetKeep:lOe,deflateSetHeader:uOe,deflate:fOe,deflateEnd:vOe,deflateSetDictionary:gOe,deflateInfo:dOe};const mOe=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var hOe=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const n=e.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const r in n)mOe(n,r)&&(t[r]=n[r])}}return t},pOe=t=>{let e=0;for(let r=0,a=t.length;r<a;r++)e+=t[r].length;const n=new Uint8Array(e);for(let r=0,a=0,i=t.length;r<i;r++){let o=t[r];n.set(o,a),a+=o.length}return n},uD={assign:hOe,flattenChunks:pOe};let sz=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{sz=!1}const Nm=new Uint8Array(256);for(let t=0;t<256;t++)Nm[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Nm[254]=Nm[254]=1;var SOe=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,n,r,a,i,o=t.length,s=0;for(a=0;a<o;a++)n=t.charCodeAt(a),(n&64512)===55296&&a+1<o&&(r=t.charCodeAt(a+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),a++)),s+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Uint8Array(s),i=0,a=0;i<s;a++)n=t.charCodeAt(a),(n&64512)===55296&&a+1<o&&(r=t.charCodeAt(a+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),a++)),n<128?e[i++]=n:n<2048?(e[i++]=192|n>>>6,e[i++]=128|n&63):n<65536?(e[i++]=224|n>>>12,e[i++]=128|n>>>6&63,e[i++]=128|n&63):(e[i++]=240|n>>>18,e[i++]=128|n>>>12&63,e[i++]=128|n>>>6&63,e[i++]=128|n&63);return e};const COe=(t,e)=>{if(e<65534&&t.subarray&&sz)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let n="";for(let r=0;r<e;r++)n+=String.fromCharCode(t[r]);return n};var IOe=(t,e)=>{const n=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let r,a;const i=new Array(n*2);for(a=0,r=0;r<n;){let o=t[r++];if(o<128){i[a++]=o;continue}let s=Nm[o];if(s>4){i[a++]=65533,r+=s-1;continue}for(o&=s===2?31:s===3?15:7;s>1&&r<n;)o=o<<6|t[r++]&63,s--;if(s>1){i[a++]=65533;continue}o<65536?i[a++]=o:(o-=65536,i[a++]=55296|o>>10&1023,i[a++]=56320|o&1023)}return COe(i,a)},DOe=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let n=e-1;for(;n>=0&&(t[n]&192)===128;)n--;return n<0||n===0?e:n+Nm[t[n]]>e?n:e},Lm={string2buf:SOe,buf2string:IOe,utf8border:DOe};function EOe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var cz=EOe;const lz=Object.prototype.toString,{Z_NO_FLUSH:TOe,Z_SYNC_FLUSH:yOe,Z_FULL_FLUSH:MOe,Z_FINISH:_Oe,Z_OK:AC,Z_STREAM_END:OOe,Z_DEFAULT_COMPRESSION:wOe,Z_DEFAULT_STRATEGY:POe,Z_DEFLATED:AOe}=Q1;function Oh(t){this.options=uD.assign({level:wOe,method:AOe,chunkSize:16384,windowBits:15,memLevel:8,strategy:POe},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new cz,this.strm.avail_out=0;let n=Ad.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==AC)throw new Error(L1[n]);if(e.header&&Ad.deflateSetHeader(this.strm,e.header),e.dictionary){let r;if(typeof e.dictionary=="string"?r=Lm.string2buf(e.dictionary):lz.call(e.dictionary)==="[object ArrayBuffer]"?r=new Uint8Array(e.dictionary):r=e.dictionary,n=Ad.deflateSetDictionary(this.strm,r),n!==AC)throw new Error(L1[n]);this._dict_set=!0}}Oh.prototype.push=function(t,e){const n=this.strm,r=this.options.chunkSize;let a,i;if(this.ended)return!1;for(e===~~e?i=e:i=e===!0?_Oe:TOe,typeof t=="string"?n.input=Lm.string2buf(t):lz.call(t)==="[object ArrayBuffer]"?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;){if(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(i===yOe||i===MOe)&&n.avail_out<=6){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(a=Ad.deflate(n,i),a===OOe)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),a=Ad.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===AC;if(n.avail_out===0){this.onData(n.output);continue}if(i>0&&n.next_out>0){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(n.avail_in===0)break}return!0};Oh.prototype.onData=function(t){this.chunks.push(t)};Oh.prototype.onEnd=function(t){t===AC&&(this.result=uD.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function k4(t,e){const n=new Oh(e);if(n.push(t,!0),n.err)throw n.msg||L1[n.err];return n.result}function xOe(t,e){return e=e||{},e.raw=!0,k4(t,e)}function ROe(t,e){return e=e||{},e.gzip=!0,k4(t,e)}var bOe=Oh,NOe=k4,LOe=xOe,UOe=ROe,FOe=Q1,VOe={Deflate:bOe,deflate:NOe,deflateRaw:LOe,gzip:UOe,constants:FOe};const o2=16209,kOe=16191;var GOe=function(e,n){let r,a,i,o,s,c,l,u,f,v,g,d,m,h,C,p,S,I,D,E,T,y,M,_;const O=e.state;r=e.next_in,M=e.input,a=r+(e.avail_in-5),i=e.next_out,_=e.output,o=i-(n-e.avail_out),s=i+(e.avail_out-257),c=O.dmax,l=O.wsize,u=O.whave,f=O.wnext,v=O.window,g=O.hold,d=O.bits,m=O.lencode,h=O.distcode,C=(1<<O.lenbits)-1,p=(1<<O.distbits)-1;e:do{d<15&&(g+=M[r++]<<d,d+=8,g+=M[r++]<<d,d+=8),S=m[g&C];t:for(;;){if(I=S>>>24,g>>>=I,d-=I,I=S>>>16&255,I===0)_[i++]=S&65535;else if(I&16){D=S&65535,I&=15,I&&(d<I&&(g+=M[r++]<<d,d+=8),D+=g&(1<<I)-1,g>>>=I,d-=I),d<15&&(g+=M[r++]<<d,d+=8,g+=M[r++]<<d,d+=8),S=h[g&p];n:for(;;){if(I=S>>>24,g>>>=I,d-=I,I=S>>>16&255,I&16){if(E=S&65535,I&=15,d<I&&(g+=M[r++]<<d,d+=8,d<I&&(g+=M[r++]<<d,d+=8)),E+=g&(1<<I)-1,E>c){e.msg="invalid distance too far back",O.mode=o2;break e}if(g>>>=I,d-=I,I=i-o,E>I){if(I=E-I,I>u&&O.sane){e.msg="invalid distance too far back",O.mode=o2;break e}if(T=0,y=v,f===0){if(T+=l-I,I<D){D-=I;do _[i++]=v[T++];while(--I);T=i-E,y=_}}else if(f<I){if(T+=l+f-I,I-=f,I<D){D-=I;do _[i++]=v[T++];while(--I);if(T=0,f<D){I=f,D-=I;do _[i++]=v[T++];while(--I);T=i-E,y=_}}}else if(T+=f-I,I<D){D-=I;do _[i++]=v[T++];while(--I);T=i-E,y=_}for(;D>2;)_[i++]=y[T++],_[i++]=y[T++],_[i++]=y[T++],D-=3;D&&(_[i++]=y[T++],D>1&&(_[i++]=y[T++]))}else{T=i-E;do _[i++]=_[T++],_[i++]=_[T++],_[i++]=_[T++],D-=3;while(D>2);D&&(_[i++]=_[T++],D>1&&(_[i++]=_[T++]))}}else if(I&64){e.msg="invalid distance code",O.mode=o2;break e}else{S=h[(S&65535)+(g&(1<<I)-1)];continue n}break}}else if(I&64)if(I&32){O.mode=kOe;break e}else{e.msg="invalid literal/length code",O.mode=o2;break e}else{S=m[(S&65535)+(g&(1<<I)-1)];continue t}break}}while(r<a&&i<s);D=d>>3,r-=D,d-=D<<3,g&=(1<<d)-1,e.next_in=r,e.next_out=i,e.avail_in=r<a?5+(a-r):5-(r-a),e.avail_out=i<s?257+(s-i):257-(i-s),O.hold=g,O.bits=d};const df=15,VA=852,kA=592,GA=0,I3=1,BA=2,BOe=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),WOe=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),HOe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),$Oe=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),zOe=(t,e,n,r,a,i,o,s)=>{const c=s.bits;let l=0,u=0,f=0,v=0,g=0,d=0,m=0,h=0,C=0,p=0,S,I,D,E,T,y=null,M;const _=new Uint16Array(df+1),O=new Uint16Array(df+1);let w=null,x,P,R;for(l=0;l<=df;l++)_[l]=0;for(u=0;u<r;u++)_[e[n+u]]++;for(g=c,v=df;v>=1&&_[v]===0;v--);if(g>v&&(g=v),v===0)return a[i++]=1<<24|64<<16|0,a[i++]=1<<24|64<<16|0,s.bits=1,0;for(f=1;f<v&&_[f]===0;f++);for(g<f&&(g=f),h=1,l=1;l<=df;l++)if(h<<=1,h-=_[l],h<0)return-1;if(h>0&&(t===GA||v!==1))return-1;for(O[1]=0,l=1;l<df;l++)O[l+1]=O[l]+_[l];for(u=0;u<r;u++)e[n+u]!==0&&(o[O[e[n+u]]++]=u);if(t===GA?(y=w=o,M=20):t===I3?(y=BOe,w=WOe,M=257):(y=HOe,w=$Oe,M=0),p=0,u=0,l=f,T=i,d=g,m=0,D=-1,C=1<<g,E=C-1,t===I3&&C>VA||t===BA&&C>kA)return 1;for(;;){x=l-m,o[u]+1<M?(P=0,R=o[u]):o[u]>=M?(P=w[o[u]-M],R=y[o[u]-M]):(P=96,R=0),S=1<<l-m,I=1<<d,f=I;do I-=S,a[T+(p>>m)+I]=x<<24|P<<16|R|0;while(I!==0);for(S=1<<l-1;p&S;)S>>=1;if(S!==0?(p&=S-1,p+=S):p=0,u++,--_[l]===0){if(l===v)break;l=e[n+o[u]]}if(l>g&&(p&E)!==D){for(m===0&&(m=g),T+=f,d=l-m,h=1<<d;d+m<v&&(h-=_[d+m],!(h<=0));)d++,h<<=1;if(C+=1<<d,t===I3&&C>VA||t===BA&&C>kA)return 1;D=p&E,a[D]=g<<24|d<<16|T-i|0}}return p!==0&&(a[T+p]=l-m<<24|64<<16|0),s.bits=g,0};var xd=zOe;const qOe=0,uz=1,fz=2,{Z_FINISH:WA,Z_BLOCK:jOe,Z_TREES:s2,Z_OK:F1,Z_STREAM_END:QOe,Z_NEED_DICT:KOe,Z_STREAM_ERROR:Ls,Z_DATA_ERROR:vz,Z_MEM_ERROR:gz,Z_BUF_ERROR:XOe,Z_DEFLATED:HA}=Q1,fD=16180,$A=16181,zA=16182,qA=16183,jA=16184,QA=16185,KA=16186,XA=16187,YA=16188,ZA=16189,xC=16190,hc=16191,D3=16192,JA=16193,E3=16194,e6=16195,t6=16196,n6=16197,r6=16198,c2=16199,l2=16200,a6=16201,i6=16202,o6=16203,s6=16204,c6=16205,T3=16206,l6=16207,u6=16208,Sa=16209,dz=16210,mz=16211,YOe=852,ZOe=592,JOe=15,e8e=JOe,f6=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function t8e(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const K1=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<fD||e.mode>mz?1:0},hz=t=>{if(K1(t))return Ls;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=fD,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(YOe),e.distcode=e.distdyn=new Int32Array(ZOe),e.sane=1,e.back=-1,F1},pz=t=>{if(K1(t))return Ls;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,hz(t)},Sz=(t,e)=>{let n;if(K1(t))return Ls;const r=t.state;return e<0?(n=0,e=-e):(n=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Ls:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,pz(t))},Cz=(t,e)=>{if(!t)return Ls;const n=new t8e;t.state=n,n.strm=t,n.window=null,n.mode=fD;const r=Sz(t,e);return r!==F1&&(t.state=null),r},n8e=t=>Cz(t,e8e);let v6=!0,y3,M3;const r8e=t=>{if(v6){y3=new Int32Array(512),M3=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(xd(uz,t.lens,0,288,y3,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;xd(fz,t.lens,0,32,M3,0,t.work,{bits:5}),v6=!1}t.lencode=y3,t.lenbits=9,t.distcode=M3,t.distbits=5},Iz=(t,e,n,r)=>{let a;const i=t.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),r>=i.wsize?(i.window.set(e.subarray(n-i.wsize,n),0),i.wnext=0,i.whave=i.wsize):(a=i.wsize-i.wnext,a>r&&(a=r),i.window.set(e.subarray(n-r,n-r+a),i.wnext),r-=a,r?(i.window.set(e.subarray(n-r,n),0),i.wnext=r,i.whave=i.wsize):(i.wnext+=a,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=a))),0},a8e=(t,e)=>{let n,r,a,i,o,s,c,l,u,f,v,g,d,m,h=0,C,p,S,I,D,E,T,y;const M=new Uint8Array(4);let _,O;const w=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(K1(t)||!t.output||!t.input&&t.avail_in!==0)return Ls;n=t.state,n.mode===hc&&(n.mode=D3),o=t.next_out,a=t.output,c=t.avail_out,i=t.next_in,r=t.input,s=t.avail_in,l=n.hold,u=n.bits,f=s,v=c,y=F1;e:for(;;)switch(n.mode){case fD:if(n.wrap===0){n.mode=D3;break}for(;u<16;){if(s===0)break e;s--,l+=r[i++]<<u,u+=8}if(n.wrap&2&&l===35615){n.wbits===0&&(n.wbits=15),n.check=0,M[0]=l&255,M[1]=l>>>8&255,n.check=yi(n.check,M,2,0),l=0,u=0,n.mode=$A;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((l&255)<<8)+(l>>8))%31){t.msg="incorrect header check",n.mode=Sa;break}if((l&15)!==HA){t.msg="unknown compression method",n.mode=Sa;break}if(l>>>=4,u-=4,T=(l&15)+8,n.wbits===0&&(n.wbits=T),T>15||T>n.wbits){t.msg="invalid window size",n.mode=Sa;break}n.dmax=1<<n.wbits,n.flags=0,t.adler=n.check=1,n.mode=l&512?ZA:hc,l=0,u=0;break;case $A:for(;u<16;){if(s===0)break e;s--,l+=r[i++]<<u,u+=8}if(n.flags=l,(n.flags&255)!==HA){t.msg="unknown compression method",n.mode=Sa;break}if(n.flags&57344){t.msg="unknown header flags set",n.mode=Sa;break}n.head&&(n.head.text=l>>8&1),n.flags&512&&n.wrap&4&&(M[0]=l&255,M[1]=l>>>8&255,n.check=yi(n.check,M,2,0)),l=0,u=0,n.mode=zA;case zA:for(;u<32;){if(s===0)break e;s--,l+=r[i++]<<u,u+=8}n.head&&(n.head.time=l),n.flags&512&&n.wrap&4&&(M[0]=l&255,M[1]=l>>>8&255,M[2]=l>>>16&255,M[3]=l>>>24&255,n.check=yi(n.check,M,4,0)),l=0,u=0,n.mode=qA;case qA:for(;u<16;){if(s===0)break e;s--,l+=r[i++]<<u,u+=8}n.head&&(n.head.xflags=l&255,n.head.os=l>>8),n.flags&512&&n.wrap&4&&(M[0]=l&255,M[1]=l>>>8&255,n.check=yi(n.check,M,2,0)),l=0,u=0,n.mode=jA;case jA:if(n.flags&1024){for(;u<16;){if(s===0)break e;s--,l+=r[i++]<<u,u+=8}n.length=l,n.head&&(n.head.extra_len=l),n.flags&512&&n.wrap&4&&(M[0]=l&255,M[1]=l>>>8&255,n.check=yi(n.check,M,2,0)),l=0,u=0}else n.head&&(n.head.extra=null);n.mode=QA;case QA:if(n.flags&1024&&(g=n.length,g>s&&(g=s),g&&(n.head&&(T=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(i,i+g),T)),n.flags&512&&n.wrap&4&&(n.check=yi(n.check,r,g,i)),s-=g,i+=g,n.length-=g),n.length))break e;n.length=0,n.mode=KA;case KA:if(n.flags&2048){if(s===0)break e;g=0;do T=r[i+g++],n.head&&T&&n.length<65536&&(n.head.name+=String.fromCharCode(T));while(T&&g<s);if(n.flags&512&&n.wrap&4&&(n.check=yi(n.check,r,g,i)),s-=g,i+=g,T)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=XA;case XA:if(n.flags&4096){if(s===0)break e;g=0;do T=r[i+g++],n.head&&T&&n.length<65536&&(n.head.comment+=String.fromCharCode(T));while(T&&g<s);if(n.flags&512&&n.wrap&4&&(n.check=yi(n.check,r,g,i)),s-=g,i+=g,T)break e}else n.head&&(n.head.comment=null);n.mode=YA;case YA:if(n.flags&512){for(;u<16;){if(s===0)break e;s--,l+=r[i++]<<u,u+=8}if(n.wrap&4&&l!==(n.check&65535)){t.msg="header crc mismatch",n.mode=Sa;break}l=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=hc;break;case ZA:for(;u<32;){if(s===0)break e;s--,l+=r[i++]<<u,u+=8}t.adler=n.check=f6(l),l=0,u=0,n.mode=xC;case xC:if(n.havedict===0)return t.next_out=o,t.avail_out=c,t.next_in=i,t.avail_in=s,n.hold=l,n.bits=u,KOe;t.adler=n.check=1,n.mode=hc;case hc:if(e===jOe||e===s2)break e;case D3:if(n.last){l>>>=u&7,u-=u&7,n.mode=T3;break}for(;u<3;){if(s===0)break e;s--,l+=r[i++]<<u,u+=8}switch(n.last=l&1,l>>>=1,u-=1,l&3){case 0:n.mode=JA;break;case 1:if(r8e(n),n.mode=c2,e===s2){l>>>=2,u-=2;break e}break;case 2:n.mode=t6;break;case 3:t.msg="invalid block type",n.mode=Sa}l>>>=2,u-=2;break;case JA:for(l>>>=u&7,u-=u&7;u<32;){if(s===0)break e;s--,l+=r[i++]<<u,u+=8}if((l&65535)!==(l>>>16^65535)){t.msg="invalid stored block lengths",n.mode=Sa;break}if(n.length=l&65535,l=0,u=0,n.mode=E3,e===s2)break e;case E3:n.mode=e6;case e6:if(g=n.length,g){if(g>s&&(g=s),g>c&&(g=c),g===0)break e;a.set(r.subarray(i,i+g),o),s-=g,i+=g,c-=g,o+=g,n.length-=g;break}n.mode=hc;break;case t6:for(;u<14;){if(s===0)break e;s--,l+=r[i++]<<u,u+=8}if(n.nlen=(l&31)+257,l>>>=5,u-=5,n.ndist=(l&31)+1,l>>>=5,u-=5,n.ncode=(l&15)+4,l>>>=4,u-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=Sa;break}n.have=0,n.mode=n6;case n6:for(;n.have<n.ncode;){for(;u<3;){if(s===0)break e;s--,l+=r[i++]<<u,u+=8}n.lens[w[n.have++]]=l&7,l>>>=3,u-=3}for(;n.have<19;)n.lens[w[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,_={bits:n.lenbits},y=xd(qOe,n.lens,0,19,n.lencode,0,n.work,_),n.lenbits=_.bits,y){t.msg="invalid code lengths set",n.mode=Sa;break}n.have=0,n.mode=r6;case r6:for(;n.have<n.nlen+n.ndist;){for(;h=n.lencode[l&(1<<n.lenbits)-1],C=h>>>24,p=h>>>16&255,S=h&65535,!(C<=u);){if(s===0)break e;s--,l+=r[i++]<<u,u+=8}if(S<16)l>>>=C,u-=C,n.lens[n.have++]=S;else{if(S===16){for(O=C+2;u<O;){if(s===0)break e;s--,l+=r[i++]<<u,u+=8}if(l>>>=C,u-=C,n.have===0){t.msg="invalid bit length repeat",n.mode=Sa;break}T=n.lens[n.have-1],g=3+(l&3),l>>>=2,u-=2}else if(S===17){for(O=C+3;u<O;){if(s===0)break e;s--,l+=r[i++]<<u,u+=8}l>>>=C,u-=C,T=0,g=3+(l&7),l>>>=3,u-=3}else{for(O=C+7;u<O;){if(s===0)break e;s--,l+=r[i++]<<u,u+=8}l>>>=C,u-=C,T=0,g=11+(l&127),l>>>=7,u-=7}if(n.have+g>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=Sa;break}for(;g--;)n.lens[n.have++]=T}}if(n.mode===Sa)break;if(n.lens[256]===0){t.msg="invalid code -- missing end-of-block",n.mode=Sa;break}if(n.lenbits=9,_={bits:n.lenbits},y=xd(uz,n.lens,0,n.nlen,n.lencode,0,n.work,_),n.lenbits=_.bits,y){t.msg="invalid literal/lengths set",n.mode=Sa;break}if(n.distbits=6,n.distcode=n.distdyn,_={bits:n.distbits},y=xd(fz,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,_),n.distbits=_.bits,y){t.msg="invalid distances set",n.mode=Sa;break}if(n.mode=c2,e===s2)break e;case c2:n.mode=l2;case l2:if(s>=6&&c>=258){t.next_out=o,t.avail_out=c,t.next_in=i,t.avail_in=s,n.hold=l,n.bits=u,GOe(t,v),o=t.next_out,a=t.output,c=t.avail_out,i=t.next_in,r=t.input,s=t.avail_in,l=n.hold,u=n.bits,n.mode===hc&&(n.back=-1);break}for(n.back=0;h=n.lencode[l&(1<<n.lenbits)-1],C=h>>>24,p=h>>>16&255,S=h&65535,!(C<=u);){if(s===0)break e;s--,l+=r[i++]<<u,u+=8}if(p&&!(p&240)){for(I=C,D=p,E=S;h=n.lencode[E+((l&(1<<I+D)-1)>>I)],C=h>>>24,p=h>>>16&255,S=h&65535,!(I+C<=u);){if(s===0)break e;s--,l+=r[i++]<<u,u+=8}l>>>=I,u-=I,n.back+=I}if(l>>>=C,u-=C,n.back+=C,n.length=S,p===0){n.mode=c6;break}if(p&32){n.back=-1,n.mode=hc;break}if(p&64){t.msg="invalid literal/length code",n.mode=Sa;break}n.extra=p&15,n.mode=a6;case a6:if(n.extra){for(O=n.extra;u<O;){if(s===0)break e;s--,l+=r[i++]<<u,u+=8}n.length+=l&(1<<n.extra)-1,l>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=i6;case i6:for(;h=n.distcode[l&(1<<n.distbits)-1],C=h>>>24,p=h>>>16&255,S=h&65535,!(C<=u);){if(s===0)break e;s--,l+=r[i++]<<u,u+=8}if(!(p&240)){for(I=C,D=p,E=S;h=n.distcode[E+((l&(1<<I+D)-1)>>I)],C=h>>>24,p=h>>>16&255,S=h&65535,!(I+C<=u);){if(s===0)break e;s--,l+=r[i++]<<u,u+=8}l>>>=I,u-=I,n.back+=I}if(l>>>=C,u-=C,n.back+=C,p&64){t.msg="invalid distance code",n.mode=Sa;break}n.offset=S,n.extra=p&15,n.mode=o6;case o6:if(n.extra){for(O=n.extra;u<O;){if(s===0)break e;s--,l+=r[i++]<<u,u+=8}n.offset+=l&(1<<n.extra)-1,l>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=Sa;break}n.mode=s6;case s6:if(c===0)break e;if(g=v-c,n.offset>g){if(g=n.offset-g,g>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=Sa;break}g>n.wnext?(g-=n.wnext,d=n.wsize-g):d=n.wnext-g,g>n.length&&(g=n.length),m=n.window}else m=a,d=o-n.offset,g=n.length;g>c&&(g=c),c-=g,n.length-=g;do a[o++]=m[d++];while(--g);n.length===0&&(n.mode=l2);break;case c6:if(c===0)break e;a[o++]=n.length,c--,n.mode=l2;break;case T3:if(n.wrap){for(;u<32;){if(s===0)break e;s--,l|=r[i++]<<u,u+=8}if(v-=c,t.total_out+=v,n.total+=v,n.wrap&4&&v&&(t.adler=n.check=n.flags?yi(n.check,a,v,o-v):bm(n.check,a,v,o-v)),v=c,n.wrap&4&&(n.flags?l:f6(l))!==n.check){t.msg="incorrect data check",n.mode=Sa;break}l=0,u=0}n.mode=l6;case l6:if(n.wrap&&n.flags){for(;u<32;){if(s===0)break e;s--,l+=r[i++]<<u,u+=8}if(n.wrap&4&&l!==(n.total&4294967295)){t.msg="incorrect length check",n.mode=Sa;break}l=0,u=0}n.mode=u6;case u6:y=QOe;break e;case Sa:y=vz;break e;case dz:return gz;case mz:default:return Ls}return t.next_out=o,t.avail_out=c,t.next_in=i,t.avail_in=s,n.hold=l,n.bits=u,(n.wsize||v!==t.avail_out&&n.mode<Sa&&(n.mode<T3||e!==WA))&&Iz(t,t.output,t.next_out,v-t.avail_out),f-=t.avail_in,v-=t.avail_out,t.total_in+=f,t.total_out+=v,n.total+=v,n.wrap&4&&v&&(t.adler=n.check=n.flags?yi(n.check,a,v,t.next_out-v):bm(n.check,a,v,t.next_out-v)),t.data_type=n.bits+(n.last?64:0)+(n.mode===hc?128:0)+(n.mode===c2||n.mode===E3?256:0),(f===0&&v===0||e===WA)&&y===F1&&(y=XOe),y},i8e=t=>{if(K1(t))return Ls;let e=t.state;return e.window&&(e.window=null),t.state=null,F1},o8e=(t,e)=>{if(K1(t))return Ls;const n=t.state;return n.wrap&2?(n.head=e,e.done=!1,F1):Ls},s8e=(t,e)=>{const n=e.length;let r,a,i;return K1(t)||(r=t.state,r.wrap!==0&&r.mode!==xC)?Ls:r.mode===xC&&(a=1,a=bm(a,e,n,0),a!==r.check)?vz:(i=Iz(t,e,n,n),i?(r.mode=dz,gz):(r.havedict=1,F1))};var c8e=pz,l8e=Sz,u8e=hz,f8e=n8e,v8e=Cz,g8e=a8e,d8e=i8e,m8e=o8e,h8e=s8e,p8e="pako inflate (from Nodeca project)",Oc={inflateReset:c8e,inflateReset2:l8e,inflateResetKeep:u8e,inflateInit:f8e,inflateInit2:v8e,inflate:g8e,inflateEnd:d8e,inflateGetHeader:m8e,inflateSetDictionary:h8e,inflateInfo:p8e};function S8e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var C8e=S8e;const Dz=Object.prototype.toString,{Z_NO_FLUSH:I8e,Z_FINISH:D8e,Z_OK:Um,Z_STREAM_END:_3,Z_NEED_DICT:O3,Z_STREAM_ERROR:E8e,Z_DATA_ERROR:g6,Z_MEM_ERROR:T8e}=Q1;function wh(t){this.options=uD.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new cz,this.strm.avail_out=0;let n=Oc.inflateInit2(this.strm,e.windowBits);if(n!==Um)throw new Error(L1[n]);if(this.header=new C8e,Oc.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=Lm.string2buf(e.dictionary):Dz.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=Oc.inflateSetDictionary(this.strm,e.dictionary),n!==Um)))throw new Error(L1[n])}wh.prototype.push=function(t,e){const n=this.strm,r=this.options.chunkSize,a=this.options.dictionary;let i,o,s;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?D8e:I8e,Dz.call(t)==="[object ArrayBuffer]"?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),i=Oc.inflate(n,o),i===O3&&a&&(i=Oc.inflateSetDictionary(n,a),i===Um?i=Oc.inflate(n,o):i===g6&&(i=O3));n.avail_in>0&&i===_3&&n.state.wrap>0&&t[n.next_in]!==0;)Oc.inflateReset(n),i=Oc.inflate(n,o);switch(i){case E8e:case g6:case O3:case T8e:return this.onEnd(i),this.ended=!0,!1}if(s=n.avail_out,n.next_out&&(n.avail_out===0||i===_3))if(this.options.to==="string"){let c=Lm.utf8border(n.output,n.next_out),l=n.next_out-c,u=Lm.buf2string(n.output,c);n.next_out=l,n.avail_out=r-l,l&&n.output.set(n.output.subarray(c,c+l),0),this.onData(u)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(i===Um&&s===0)){if(i===_3)return i=Oc.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};wh.prototype.onData=function(t){this.chunks.push(t)};wh.prototype.onEnd=function(t){t===Um&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=uD.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function G4(t,e){const n=new wh(e);if(n.push(t),n.err)throw n.msg||L1[n.err];return n.result}function y8e(t,e){return e=e||{},e.raw=!0,G4(t,e)}var M8e=wh,_8e=G4,O8e=y8e,w8e=G4,P8e=Q1,A8e={Inflate:M8e,inflate:_8e,inflateRaw:O8e,ungzip:w8e,constants:P8e};const{Deflate:x8e,deflate:R8e,deflateRaw:b8e,gzip:N8e}=VOe,{Inflate:L8e,inflate:U8e,inflateRaw:F8e,ungzip:V8e}=A8e;var k8e=x8e,G8e=R8e,B8e=b8e,W8e=N8e,H8e=L8e,$8e=U8e,z8e=F8e,q8e=V8e,j8e=Q1,Q8e={Deflate:k8e,deflate:G8e,deflateRaw:B8e,gzip:W8e,Inflate:H8e,inflate:$8e,inflateRaw:z8e,ungzip:q8e,constants:j8e};function pc(t){if(isNaN(t))throw new Error("Not a number: "+t);return typeof t=="string"?parseInt(t):t}function d6(t){return typeof t=="string"?parseFloat(t):t}var Ez=function(){function t(e,n){Pt(this,t),this.buffer=typeof e=="number"?new ArrayBuffer(e):e,this.buffer||(this.buffer=new ArrayBuffer(0)),this.view=new DataView(this.buffer),this.offset=0,this.isLittleEndian=n||!1,this.size=0,this.encoder=new TextEncoder("utf-8")}return At(t,[{key:"setEndian",value:function(n){this.isLittleEndian=n}},{key:"writeUint8",value:function(n){return this.checkSize(1),this.view.setUint8(this.offset,pc(n)),this.increment(1)}},{key:"writeUint8Repeat",value:function(n,r){var a=pc(n);this.checkSize(r);for(var i=0;i<r;i++)this.view.setUint8(this.offset+i,a);return this.increment(r)}},{key:"writeInt8",value:function(n){return this.checkSize(1),this.view.setInt8(this.offset,pc(n)),this.increment(1)}},{key:"writeUint16",value:function(n){return this.checkSize(2),this.view.setUint16(this.offset,pc(n),this.isLittleEndian),this.increment(2)}},{key:"writeTwoUint16s",value:function(n){this.checkSize(4);var r=n>>16,a=n&65535;return this.view.setUint16(this.offset,pc(r),this.isLittleEndian),this.view.setUint16(this.offset+2,pc(a),this.isLittleEndian),this.increment(4)}},{key:"writeInt16",value:function(n){return this.checkSize(2),this.view.setInt16(this.offset,pc(n),this.isLittleEndian),this.increment(2)}},{key:"writeUint32",value:function(n){return this.checkSize(4),this.view.setUint32(this.offset,pc(n),this.isLittleEndian),this.increment(4)}},{key:"writeInt32",value:function(n){return this.checkSize(4),this.view.setInt32(this.offset,pc(n),this.isLittleEndian),this.increment(4)}},{key:"writeFloat",value:function(n){return this.checkSize(4),this.view.setFloat32(this.offset,d6(n),this.isLittleEndian),this.increment(4)}},{key:"writeDouble",value:function(n){return this.checkSize(8),this.view.setFloat64(this.offset,d6(n),this.isLittleEndian),this.increment(8)}},{key:"writeUTF8String",value:function(n){var r=this.encoder.encode(n);return this.checkSize(r.byteLength),new Uint8Array(this.buffer).set(r,this.offset),this.increment(r.byteLength)}},{key:"writeAsciiString",value:function(n){n=n||"";var r=n.length;this.checkSize(r);for(var a=this.offset,i=0;i<r;i++){var o=n.charCodeAt(i);this.view.setUint8(a+i,o)}return this.increment(r)}},{key:"readUint32",value:function(){var n=this.view.getUint32(this.offset,this.isLittleEndian);return this.increment(4),n}},{key:"readUint16",value:function(){var n=this.view.getUint16(this.offset,this.isLittleEndian);return this.increment(2),n}},{key:"readUint8",value:function(){var n=this.view.getUint8(this.offset);return this.increment(1),n}},{key:"peekUint8",value:function(n){return this.view.getUint8(this.offset+n)}},{key:"readUint8Array",value:function(n){var r=new Uint8Array(this.buffer,this.offset,n);return this.increment(n),r}},{key:"readUint16Array",value:function(n){for(var r=n/2,a=new Uint16Array(r),i=0;i++<r;)a[i]=this.view.getUint16(this.offset,this.isLittleEndian),this.offset+=2;return a}},{key:"readInt16",value:function(){var n=this.view.getInt16(this.offset,this.isLittleEndian);return this.increment(2),n}},{key:"readInt32",value:function(){var n=this.view.getInt32(this.offset,this.isLittleEndian);return this.increment(4),n}},{key:"readFloat",value:function(){var n=this.view.getFloat32(this.offset,this.isLittleEndian);return this.increment(4),n}},{key:"readDouble",value:function(){var n=this.view.getFloat64(this.offset,this.isLittleEndian);return this.increment(8),n}},{key:"readAsciiString",value:function(n){var r="",a=this.offset,i=this.offset+n;i>=this.buffer.byteLength&&(i=this.buffer.byteLength);for(var o=a;o<i;++o)r+=String.fromCharCode(this.view.getUint8(o));return this.increment(i-a),r}},{key:"readVR",value:function(){var n=String.fromCharCode(this.view.getUint8(this.offset))+String.fromCharCode(this.view.getUint8(this.offset+1));return this.increment(2),n}},{key:"readEncodedString",value:function(n){this.offset+n>=this.buffer.byteLength&&(n=this.buffer.byteLength-this.offset);var r=new DataView(this.buffer,this.offset,n),a=this.decoder.decode(r);return this.increment(n),a}},{key:"readHex",value:function(n){for(var r="",a=0;a<n;a++)r+=this.readUint8().toString(16);return r}},{key:"checkSize",value:function(n){if(this.offset+n>this.buffer.byteLength){var r=this.offset+n+this.buffer.byteLength,a=new ArrayBuffer(r);new Uint8Array(a).set(new Uint8Array(this.buffer)),this.buffer=a,this.view=new DataView(this.buffer)}}},{key:"concat",value:function(n){var r=this.buffer.byteLength-this.offset;if(n.size>r){var a=new ArrayBuffer(this.offset+n.size),i=new Uint8Array(a);i.set(new Uint8Array(this.getBuffer(0,this.offset))),i.set(new Uint8Array(n.getBuffer(0,n.size)),this.offset),this.buffer=a,this.view=new DataView(this.buffer)}else{var o=new Uint8Array(this.buffer);o.set(new Uint8Array(n.getBuffer(0,n.size)),this.offset)}return this.offset+=n.size,this.size=this.offset,this.buffer.byteLength}},{key:"increment",value:function(n){return this.offset+=n,this.offset>this.size&&(this.size=this.offset),n}},{key:"getBuffer",value:function(n,r){return!n&&!r&&(n=0,r=this.size),this.buffer.slice(n,r)}},{key:"more",value:function(n){if(this.offset+n>this.endOffset)throw new Error("Request more than currently allocated buffer");var r=new kl(this.buffer,null,{start:this.offset,stop:this.offset+n});return this.increment(n),r}},{key:"reset",value:function(){return this.offset=0,this}},{key:"end",value:function(){return this.offset>=this.buffer.byteLength}},{key:"toEnd",value:function(){this.offset=this.buffer.byteLength}}]),t}(),kl=function(t){Jt(e,t);function e(n,r){var a,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{start:null,stop:null,noCopy:!1};return Pt(this,e),a=Zt(this,e,[n,r]),a.offset=i.start||0,a.size=i.stop||a.buffer.byteLength,a.noCopy=i.noCopy,a.startOffset=a.offset,a.endOffset=a.size,a.decoder=new TextDecoder("latin1"),a}return At(e,[{key:"setDecoder",value:function(r){this.decoder=r}},{key:"getBuffer",value:function(r,a){return this.noCopy?new Uint8Array(this.buffer,r,a-r):(!r&&!a&&(r=0,a=this.size),this.buffer.slice(r,a))}},{key:"reset",value:function(){return this.offset=this.startOffset,this}},{key:"end",value:function(){return this.offset>=this.endOffset}},{key:"toEnd",value:function(){this.offset=this.endOffset}},{key:"writeUint8",value:function(r){throw new Error(r,"writeUint8 not implemented")}},{key:"writeUint8Repeat",value:function(r,a){throw new Error("writeUint8Repeat not implemented (value: ".concat(r,", count: ").concat(a,")"))}},{key:"writeInt8",value:function(r){throw new Error(r,"writeInt8 not implemented")}},{key:"writeUint16",value:function(r){throw new Error(r,"writeUint16 not implemented")}},{key:"writeTwoUint16s",value:function(r){throw new Error(r,"writeTwoUint16s not implemented")}},{key:"writeInt16",value:function(r){throw new Error(r,"writeInt16 not implemented")}},{key:"writeUint32",value:function(r){throw new Error(r,"writeUint32 not implemented")}},{key:"writeInt32",value:function(r){throw new Error(r,"writeInt32 not implemented")}},{key:"writeFloat",value:function(r){throw new Error(r,"writeFloat not implemented")}},{key:"writeDouble",value:function(r){throw new Error(r,"writeDouble not implemented")}},{key:"writeAsciiString",value:function(r){throw new Error(r,"writeAsciiString not implemented")}},{key:"writeUTF8String",value:function(r){throw new Error(r,"writeUTF8String not implemented")}},{key:"checkSize",value:function(r){throw new Error(r,"checkSize not implemented")}},{key:"concat",value:function(r){throw new Error(r,"concat not implemented")}}]),e}(Ez),K8e=function(t){Jt(e,t);function e(n,r){Pt(this,e);var a=Q8e.inflateRaw(n.getBuffer(n.offset,n.size));return Zt(this,e,[a.buffer,n.littleEndian,r])}return At(e)}(kl),RC=function(t){Jt(e,t);function e(n,r){var a;return Pt(this,e),a=Zt(this,e,[n,r]),a.size=0,a}return At(e)}(Ez),Rd="1.2.840.10008.1.2",ed="1.2.840.10008.1.2.1",X8e="1.2.840.10008.1.2.1.99",Y8e="1.2.840.10008.1.2.2",Kc=92,Wo=0,ao=32,B4=61;function jy(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(t==null)return e?[]:void 0;if(typeof t=="string"||t instanceof String){var n=t.split(String.fromCharCode(Kc)).filter(Boolean),r=n.map(function(a){var i=a.split(String.fromCharCode(B4));return Aa(Aa(Aa({},i[0]?{Alphabetic:i[0]}:{}),i[1]?{Ideographic:i[1]}:{}),i[2]?{Phonetic:i[2]}:{})});return e?r:r[0]}else return!Array.isArray(t)&&e?[Object.assign({},t)]:t}function Tz(t){if(typeof t=="string"||t instanceof String)return t;var e=String.fromCharCode(B4);return Array.isArray(t)||(t=[t]),t.filter(Boolean).map(function(n){var r,a,i;return n===void 0||typeof n=="string"||n instanceof String?n:[(r=n.Alphabetic)!==null&&r!==void 0?r:"",(a=n.Ideographic)!==null&&a!==void 0?a:"",(i=n.Phonetic)!==null&&i!==void 0?i:""].join(e).replace(new RegExp("".concat(e,"*$")),"")}).join(String.fromCharCode(Kc))}function Z8e(t){return t.__hasValueAccessors||(Object.defineProperty(t,"__hasValueAccessors",{value:!0}),Object.defineProperty(t,"toJSON",{value:function(){return Array.isArray(this)?this.filter(Boolean).map(function(n){return jy(n,!1)}):jy(this)}}),Object.defineProperty(t,"toString",{value:function(){return Tz(t)}})),t}var w3={pnObjectToString:Tz,pnConvertToJsonObject:jy,pnAddValueAccessors:Z8e},J8e={"(0000,0000)":{tag:"(0000,0000)",vr:"UL",name:"CommandGroupLength",vm:"1",version:"DICOM"},"(0000,0002)":{tag:"(0000,0002)",vr:"UI",name:"AffectedSOPClassUID",vm:"1",version:"DICOM"},"(0000,0003)":{tag:"(0000,0003)",vr:"UI",name:"RequestedSOPClassUID",vm:"1",version:"DICOM"},"(0000,0100)":{tag:"(0000,0100)",vr:"US",name:"CommandField",vm:"1",version:"DICOM"},"(0000,0110)":{tag:"(0000,0110)",vr:"US",name:"MessageID",vm:"1",version:"DICOM"},"(0000,0120)":{tag:"(0000,0120)",vr:"US",name:"MessageIDBeingRespondedTo",vm:"1",version:"DICOM"},"(0000,0600)":{tag:"(0000,0600)",vr:"AE",name:"MoveDestination",vm:"1",version:"DICOM"},"(0000,0700)":{tag:"(0000,0700)",vr:"US",name:"Priority",vm:"1",version:"DICOM"},"(0000,0800)":{tag:"(0000,0800)",vr:"US",name:"CommandDataSetType",vm:"1",version:"DICOM"},"(0000,0900)":{tag:"(0000,0900)",vr:"US",name:"Status",vm:"1",version:"DICOM"},"(0000,0901)":{tag:"(0000,0901)",vr:"AT",name:"OffendingElement",vm:"1-n",version:"DICOM"},"(0000,0902)":{tag:"(0000,0902)",vr:"LO",name:"ErrorComment",vm:"1",version:"DICOM"},"(0000,0903)":{tag:"(0000,0903)",vr:"US",name:"ErrorID",vm:"1",version:"DICOM"},"(0000,1000)":{tag:"(0000,1000)",vr:"UI",name:"AffectedSOPInstanceUID",vm:"1",version:"DICOM"},"(0000,1001)":{tag:"(0000,1001)",vr:"UI",name:"RequestedSOPInstanceUID",vm:"1",version:"DICOM"},"(0000,1002)":{tag:"(0000,1002)",vr:"US",name:"EventTypeID",vm:"1",version:"DICOM"},"(0000,1005)":{tag:"(0000,1005)",vr:"AT",name:"AttributeIdentifierList",vm:"1-n",version:"DICOM"},"(0000,1008)":{tag:"(0000,1008)",vr:"US",name:"ActionTypeID",vm:"1",version:"DICOM"},"(0000,1020)":{tag:"(0000,1020)",vr:"US",name:"NumberOfRemainingSuboperations",vm:"1",version:"DICOM"},"(0000,1021)":{tag:"(0000,1021)",vr:"US",name:"NumberOfCompletedSuboperations",vm:"1",version:"DICOM"},"(0000,1022)":{tag:"(0000,1022)",vr:"US",name:"NumberOfFailedSuboperations",vm:"1",version:"DICOM"},"(0000,1023)":{tag:"(0000,1023)",vr:"US",name:"NumberOfWarningSuboperations",vm:"1",version:"DICOM"},"(0000,1030)":{tag:"(0000,1030)",vr:"AE",name:"MoveOriginatorApplicationEntityTitle",vm:"1",version:"DICOM"},"(0000,1031)":{tag:"(0000,1031)",vr:"US",name:"MoveOriginatorMessageID",vm:"1",version:"DICOM"},"(0002,0000)":{tag:"(0002,0000)",vr:"UL",name:"FileMetaInformationGroupLength",vm:"1",version:"DICOM"},"(0002,0001)":{tag:"(0002,0001)",vr:"OB",name:"FileMetaInformationVersion",vm:"1",version:"DICOM"},"(0002,0002)":{tag:"(0002,0002)",vr:"UI",name:"MediaStorageSOPClassUID",vm:"1",version:"DICOM"},"(0002,0003)":{tag:"(0002,0003)",vr:"UI",name:"MediaStorageSOPInstanceUID",vm:"1",version:"DICOM"},"(0002,0010)":{tag:"(0002,0010)",vr:"UI",name:"TransferSyntaxUID",vm:"1",version:"DICOM"},"(0002,0012)":{tag:"(0002,0012)",vr:"UI",name:"ImplementationClassUID",vm:"1",version:"DICOM"},"(0002,0013)":{tag:"(0002,0013)",vr:"SH",name:"ImplementationVersionName",vm:"1",version:"DICOM"},"(0002,0016)":{tag:"(0002,0016)",vr:"AE",name:"SourceApplicationEntityTitle",vm:"1",version:"DICOM"},"(0002,0017)":{tag:"(0002,0017)",vr:"AE",name:"SendingApplicationEntityTitle",vm:"1",version:"DICOM"},"(0002,0018)":{tag:"(0002,0018)",vr:"AE",name:"ReceivingApplicationEntityTitle",vm:"1",version:"DICOM"},"(0002,0100)":{tag:"(0002,0100)",vr:"UI",name:"PrivateInformationCreatorUID",vm:"1",version:"DICOM"},"(0002,0102)":{tag:"(0002,0102)",vr:"OB",name:"PrivateInformation",vm:"1",version:"DICOM"},"(0004,1130)":{tag:"(0004,1130)",vr:"CS",name:"FileSetID",vm:"1",version:"DICOM"},"(0004,1141)":{tag:"(0004,1141)",vr:"CS",name:"FileSetDescriptorFileID",vm:"1-8",version:"DICOM"},"(0004,1142)":{tag:"(0004,1142)",vr:"CS",name:"SpecificCharacterSetOfFileSetDescriptorFile",vm:"1",version:"DICOM"},"(0004,1200)":{tag:"(0004,1200)",vr:"up",name:"OffsetOfTheFirstDirectoryRecordOfTheRootDirectoryEntity",vm:"1",version:"DICOM"},"(0004,1202)":{tag:"(0004,1202)",vr:"up",name:"OffsetOfTheLastDirectoryRecordOfTheRootDirectoryEntity",vm:"1",version:"DICOM"},"(0004,1212)":{tag:"(0004,1212)",vr:"US",name:"FileSetConsistencyFlag",vm:"1",version:"DICOM"},"(0004,1220)":{tag:"(0004,1220)",vr:"SQ",name:"DirectoryRecordSequence",vm:"1",version:"DICOM"},"(0004,1400)":{tag:"(0004,1400)",vr:"up",name:"OffsetOfTheNextDirectoryRecord",vm:"1",version:"DICOM"},"(0004,1410)":{tag:"(0004,1410)",vr:"US",name:"RecordInUseFlag",vm:"1",version:"DICOM"},"(0004,1420)":{tag:"(0004,1420)",vr:"up",name:"OffsetOfReferencedLowerLevelDirectoryEntity",vm:"1",version:"DICOM"},"(0004,1430)":{tag:"(0004,1430)",vr:"CS",name:"DirectoryRecordType",vm:"1",version:"DICOM"},"(0004,1432)":{tag:"(0004,1432)",vr:"UI",name:"PrivateRecordUID",vm:"1",version:"DICOM"},"(0004,1500)":{tag:"(0004,1500)",vr:"CS",name:"ReferencedFileID",vm:"1-8",version:"DICOM"},"(0004,1510)":{tag:"(0004,1510)",vr:"UI",name:"ReferencedSOPClassUIDInFile",vm:"1",version:"DICOM"},"(0004,1511)":{tag:"(0004,1511)",vr:"UI",name:"ReferencedSOPInstanceUIDInFile",vm:"1",version:"DICOM"},"(0004,1512)":{tag:"(0004,1512)",vr:"UI",name:"ReferencedTransferSyntaxUIDInFile",vm:"1",version:"DICOM"},"(0004,151A)":{tag:"(0004,151A)",vr:"UI",name:"ReferencedRelatedGeneralSOPClassUIDInFile",vm:"1-n",version:"DICOM"},"(0008,0005)":{tag:"(0008,0005)",vr:"CS",name:"SpecificCharacterSet",vm:"1-n",version:"DICOM"},"(0008,0006)":{tag:"(0008,0006)",vr:"SQ",name:"LanguageCodeSequence",vm:"1",version:"DICOM"},"(0008,0008)":{tag:"(0008,0008)",vr:"CS",name:"ImageType",vm:"2-n",version:"DICOM"},"(0008,0012)":{tag:"(0008,0012)",vr:"DA",name:"InstanceCreationDate",vm:"1",version:"DICOM"},"(0008,0013)":{tag:"(0008,0013)",vr:"TM",name:"InstanceCreationTime",vm:"1",version:"DICOM"},"(0008,0014)":{tag:"(0008,0014)",vr:"UI",name:"InstanceCreatorUID",vm:"1",version:"DICOM"},"(0008,0015)":{tag:"(0008,0015)",vr:"DT",name:"InstanceCoercionDateTime",vm:"1",version:"DICOM"},"(0008,0016)":{tag:"(0008,0016)",vr:"UI",name:"SOPClassUID",vm:"1",version:"DICOM"},"(0008,0017)":{tag:"(0008,0017)",vr:"UI",name:"AcquisitionUID",vm:"1",version:"DICOM"},"(0008,0018)":{tag:"(0008,0018)",vr:"UI",name:"SOPInstanceUID",vm:"1",version:"DICOM"},"(0008,0019)":{tag:"(0008,0019)",vr:"UI",name:"PyramidUID",vm:"1",version:"DICOM"},"(0008,001A)":{tag:"(0008,001A)",vr:"UI",name:"RelatedGeneralSOPClassUID",vm:"1-n",version:"DICOM"},"(0008,001B)":{tag:"(0008,001B)",vr:"UI",name:"OriginalSpecializedSOPClassUID",vm:"1",version:"DICOM"},"(0008,001C)":{tag:"(0008,001C)",vr:"CS",name:"SyntheticData",vm:"1",version:"DICOM"},"(0008,0020)":{tag:"(0008,0020)",vr:"DA",name:"StudyDate",vm:"1",version:"DICOM"},"(0008,0021)":{tag:"(0008,0021)",vr:"DA",name:"SeriesDate",vm:"1",version:"DICOM"},"(0008,0022)":{tag:"(0008,0022)",vr:"DA",name:"AcquisitionDate",vm:"1",version:"DICOM"},"(0008,0023)":{tag:"(0008,0023)",vr:"DA",name:"ContentDate",vm:"1",version:"DICOM"},"(0008,002A)":{tag:"(0008,002A)",vr:"DT",name:"AcquisitionDateTime",vm:"1",version:"DICOM"},"(0008,0030)":{tag:"(0008,0030)",vr:"TM",name:"StudyTime",vm:"1",version:"DICOM"},"(0008,0031)":{tag:"(0008,0031)",vr:"TM",name:"SeriesTime",vm:"1",version:"DICOM"},"(0008,0032)":{tag:"(0008,0032)",vr:"TM",name:"AcquisitionTime",vm:"1",version:"DICOM"},"(0008,0033)":{tag:"(0008,0033)",vr:"TM",name:"ContentTime",vm:"1",version:"DICOM"},"(0008,0050)":{tag:"(0008,0050)",vr:"SH",name:"AccessionNumber",vm:"1",version:"DICOM"},"(0008,0051)":{tag:"(0008,0051)",vr:"SQ",name:"IssuerOfAccessionNumberSequence",vm:"1",version:"DICOM"},"(0008,0052)":{tag:"(0008,0052)",vr:"CS",name:"QueryRetrieveLevel",vm:"1",version:"DICOM"},"(0008,0053)":{tag:"(0008,0053)",vr:"CS",name:"QueryRetrieveView",vm:"1",version:"DICOM"},"(0008,0054)":{tag:"(0008,0054)",vr:"AE",name:"RetrieveAETitle",vm:"1-n",version:"DICOM"},"(0008,0055)":{tag:"(0008,0055)",vr:"AE",name:"StationAETitle",vm:"1",version:"DICOM"},"(0008,0056)":{tag:"(0008,0056)",vr:"CS",name:"InstanceAvailability",vm:"1",version:"DICOM"},"(0008,0058)":{tag:"(0008,0058)",vr:"UI",name:"FailedSOPInstanceUIDList",vm:"1-n",version:"DICOM"},"(0008,0060)":{tag:"(0008,0060)",vr:"CS",name:"Modality",vm:"1",version:"DICOM"},"(0008,0061)":{tag:"(0008,0061)",vr:"CS",name:"ModalitiesInStudy",vm:"1-n",version:"DICOM"},"(0008,0062)":{tag:"(0008,0062)",vr:"UI",name:"SOPClassesInStudy",vm:"1-n",version:"DICOM"},"(0008,0063)":{tag:"(0008,0063)",vr:"SQ",name:"AnatomicRegionsInStudyCodeSequence",vm:"1",version:"DICOM"},"(0008,0064)":{tag:"(0008,0064)",vr:"CS",name:"ConversionType",vm:"1",version:"DICOM"},"(0008,0068)":{tag:"(0008,0068)",vr:"CS",name:"PresentationIntentType",vm:"1",version:"DICOM"},"(0008,0070)":{tag:"(0008,0070)",vr:"LO",name:"Manufacturer",vm:"1",version:"DICOM"},"(0008,0080)":{tag:"(0008,0080)",vr:"LO",name:"InstitutionName",vm:"1",version:"DICOM"},"(0008,0081)":{tag:"(0008,0081)",vr:"ST",name:"InstitutionAddress",vm:"1",version:"DICOM"},"(0008,0082)":{tag:"(0008,0082)",vr:"SQ",name:"InstitutionCodeSequence",vm:"1",version:"DICOM"},"(0008,0090)":{tag:"(0008,0090)",vr:"PN",name:"ReferringPhysicianName",vm:"1",version:"DICOM"},"(0008,0092)":{tag:"(0008,0092)",vr:"ST",name:"ReferringPhysicianAddress",vm:"1",version:"DICOM"},"(0008,0094)":{tag:"(0008,0094)",vr:"SH",name:"ReferringPhysicianTelephoneNumbers",vm:"1-n",version:"DICOM"},"(0008,0096)":{tag:"(0008,0096)",vr:"SQ",name:"ReferringPhysicianIdentificationSequence",vm:"1",version:"DICOM"},"(0008,009C)":{tag:"(0008,009C)",vr:"PN",name:"ConsultingPhysicianName",vm:"1-n",version:"DICOM"},"(0008,009D)":{tag:"(0008,009D)",vr:"SQ",name:"ConsultingPhysicianIdentificationSequence",vm:"1",version:"DICOM"},"(0008,0100)":{tag:"(0008,0100)",vr:"SH",name:"CodeValue",vm:"1",version:"DICOM"},"(0008,0101)":{tag:"(0008,0101)",vr:"LO",name:"ExtendedCodeValue",vm:"1",version:"DICOM/DICOS"},"(0008,0102)":{tag:"(0008,0102)",vr:"SH",name:"CodingSchemeDesignator",vm:"1",version:"DICOM"},"(0008,0103)":{tag:"(0008,0103)",vr:"SH",name:"CodingSchemeVersion",vm:"1",version:"DICOM"},"(0008,0104)":{tag:"(0008,0104)",vr:"LO",name:"CodeMeaning",vm:"1",version:"DICOM"},"(0008,0105)":{tag:"(0008,0105)",vr:"CS",name:"MappingResource",vm:"1",version:"DICOM"},"(0008,0106)":{tag:"(0008,0106)",vr:"DT",name:"ContextGroupVersion",vm:"1",version:"DICOM"},"(0008,0107)":{tag:"(0008,0107)",vr:"DT",name:"ContextGroupLocalVersion",vm:"1",version:"DICOM"},"(0008,0108)":{tag:"(0008,0108)",vr:"LT",name:"ExtendedCodeMeaning",vm:"1",version:"DICOM/DICOS"},"(0008,0109)":{tag:"(0008,0109)",vr:"SQ",name:"CodingSchemeResourcesSequence",vm:"1",version:"DICOM"},"(0008,010A)":{tag:"(0008,010A)",vr:"CS",name:"CodingSchemeURLType",vm:"1",version:"DICOM"},"(0008,010B)":{tag:"(0008,010B)",vr:"CS",name:"ContextGroupExtensionFlag",vm:"1",version:"DICOM"},"(0008,010C)":{tag:"(0008,010C)",vr:"UI",name:"CodingSchemeUID",vm:"1",version:"DICOM"},"(0008,010D)":{tag:"(0008,010D)",vr:"UI",name:"ContextGroupExtensionCreatorUID",vm:"1",version:"DICOM"},"(0008,010E)":{tag:"(0008,010E)",vr:"UR",name:"CodingSchemeURL",vm:"1",version:"DICOM"},"(0008,010F)":{tag:"(0008,010F)",vr:"CS",name:"ContextIdentifier",vm:"1",version:"DICOM"},"(0008,0110)":{tag:"(0008,0110)",vr:"SQ",name:"CodingSchemeIdentificationSequence",vm:"1",version:"DICOM"},"(0008,0112)":{tag:"(0008,0112)",vr:"LO",name:"CodingSchemeRegistry",vm:"1",version:"DICOM"},"(0008,0114)":{tag:"(0008,0114)",vr:"ST",name:"CodingSchemeExternalID",vm:"1",version:"DICOM"},"(0008,0115)":{tag:"(0008,0115)",vr:"ST",name:"CodingSchemeName",vm:"1",version:"DICOM"},"(0008,0116)":{tag:"(0008,0116)",vr:"ST",name:"CodingSchemeResponsibleOrganization",vm:"1",version:"DICOM"},"(0008,0117)":{tag:"(0008,0117)",vr:"UI",name:"ContextUID",vm:"1",version:"DICOM"},"(0008,0118)":{tag:"(0008,0118)",vr:"UI",name:"MappingResourceUID",vm:"1",version:"DICOM"},"(0008,0119)":{tag:"(0008,0119)",vr:"UC",name:"LongCodeValue",vm:"1",version:"DICOM"},"(0008,0120)":{tag:"(0008,0120)",vr:"UR",name:"URNCodeValue",vm:"1",version:"DICOM"},"(0008,0121)":{tag:"(0008,0121)",vr:"SQ",name:"EquivalentCodeSequence",vm:"1",version:"DICOM"},"(0008,0122)":{tag:"(0008,0122)",vr:"LO",name:"MappingResourceName",vm:"1",version:"DICOM"},"(0008,0123)":{tag:"(0008,0123)",vr:"SQ",name:"ContextGroupIdentificationSequence",vm:"1",version:"DICOM"},"(0008,0124)":{tag:"(0008,0124)",vr:"SQ",name:"MappingResourceIdentificationSequence",vm:"1",version:"DICOM"},"(0008,0201)":{tag:"(0008,0201)",vr:"SH",name:"TimezoneOffsetFromUTC",vm:"1",version:"DICOM"},"(0008,0220)":{tag:"(0008,0220)",vr:"SQ",name:"ResponsibleGroupCodeSequence",vm:"1",version:"DICOM"},"(0008,0221)":{tag:"(0008,0221)",vr:"CS",name:"EquipmentModality",vm:"1",version:"DICOM"},"(0008,0222)":{tag:"(0008,0222)",vr:"LO",name:"ManufacturerRelatedModelGroup",vm:"1",version:"DICOM"},"(0008,0300)":{tag:"(0008,0300)",vr:"SQ",name:"PrivateDataElementCharacteristicsSequence",vm:"1",version:"DICOM"},"(0008,0301)":{tag:"(0008,0301)",vr:"US",name:"PrivateGroupReference",vm:"1",version:"DICOM"},"(0008,0302)":{tag:"(0008,0302)",vr:"LO",name:"PrivateCreatorReference",vm:"1",version:"DICOM"},"(0008,0303)":{tag:"(0008,0303)",vr:"CS",name:"BlockIdentifyingInformationStatus",vm:"1",version:"DICOM"},"(0008,0304)":{tag:"(0008,0304)",vr:"US",name:"NonidentifyingPrivateElements",vm:"1-n",version:"DICOM"},"(0008,0305)":{tag:"(0008,0305)",vr:"SQ",name:"DeidentificationActionSequence",vm:"1",version:"DICOM"},"(0008,0306)":{tag:"(0008,0306)",vr:"US",name:"IdentifyingPrivateElements",vm:"1-n",version:"DICOM"},"(0008,0307)":{tag:"(0008,0307)",vr:"CS",name:"DeidentificationAction",vm:"1",version:"DICOM"},"(0008,0308)":{tag:"(0008,0308)",vr:"US",name:"PrivateDataElement",vm:"1",version:"DICOM"},"(0008,0309)":{tag:"(0008,0309)",vr:"UL",name:"PrivateDataElementValueMultiplicity",vm:"1-3",version:"DICOM"},"(0008,030A)":{tag:"(0008,030A)",vr:"CS",name:"PrivateDataElementValueRepresentation",vm:"1",version:"DICOM"},"(0008,030B)":{tag:"(0008,030B)",vr:"UL",name:"PrivateDataElementNumberOfItems",vm:"1-2",version:"DICOM"},"(0008,030C)":{tag:"(0008,030C)",vr:"UC",name:"PrivateDataElementName",vm:"1",version:"DICOM"},"(0008,030D)":{tag:"(0008,030D)",vr:"UC",name:"PrivateDataElementKeyword",vm:"1",version:"DICOM"},"(0008,030E)":{tag:"(0008,030E)",vr:"UT",name:"PrivateDataElementDescription",vm:"1",version:"DICOM"},"(0008,030F)":{tag:"(0008,030F)",vr:"UT",name:"PrivateDataElementEncoding",vm:"1",version:"DICOM"},"(0008,0310)":{tag:"(0008,0310)",vr:"SQ",name:"PrivateDataElementDefinitionSequence",vm:"1",version:"DICOM"},"(0008,0400)":{tag:"(0008,0400)",vr:"SQ",name:"ScopeOfInventorySequence",vm:"1",version:"DICOM"},"(0008,0401)":{tag:"(0008,0401)",vr:"LT",name:"InventoryPurpose",vm:"1",version:"DICOM"},"(0008,0402)":{tag:"(0008,0402)",vr:"LT",name:"InventoryInstanceDescription",vm:"1",version:"DICOM"},"(0008,0403)":{tag:"(0008,0403)",vr:"CS",name:"InventoryLevel",vm:"1",version:"DICOM"},"(0008,0404)":{tag:"(0008,0404)",vr:"DT",name:"ItemInventoryDateTime",vm:"1",version:"DICOM"},"(0008,0405)":{tag:"(0008,0405)",vr:"CS",name:"RemovedFromOperationalUse",vm:"1",version:"DICOM"},"(0008,0406)":{tag:"(0008,0406)",vr:"SQ",name:"ReasonForRemovalCodeSequence",vm:"1",version:"DICOM"},"(0008,0407)":{tag:"(0008,0407)",vr:"UR",name:"StoredInstanceBaseURI",vm:"1",version:"DICOM"},"(0008,0408)":{tag:"(0008,0408)",vr:"UR",name:"FolderAccessURI",vm:"1",version:"DICOM"},"(0008,0409)":{tag:"(0008,0409)",vr:"UR",name:"FileAccessURI",vm:"1",version:"DICOM"},"(0008,040A)":{tag:"(0008,040A)",vr:"CS",name:"ContainerFileType",vm:"1",version:"DICOM"},"(0008,040B)":{tag:"(0008,040B)",vr:"UR",name:"FilenameInContainer",vm:"1",version:"DICOM"},"(0008,040C)":{tag:"(0008,040C)",vr:"UV",name:"FileOffsetInContainer",vm:"1",version:"DICOM"},"(0008,040D)":{tag:"(0008,040D)",vr:"UV",name:"FileLengthInContainer",vm:"1",version:"DICOM"},"(0008,040E)":{tag:"(0008,040E)",vr:"UI",name:"StoredInstanceTransferSyntaxUID",vm:"1",version:"DICOM"},"(0008,040F)":{tag:"(0008,040F)",vr:"CS",name:"ExtendedMatchingMechanisms",vm:"1-n",version:"DICOM"},"(0008,0410)":{tag:"(0008,0410)",vr:"SQ",name:"RangeMatchingSequence",vm:"1",version:"DICOM"},"(0008,0411)":{tag:"(0008,0411)",vr:"SQ",name:"ListOfUIDMatchingSequence",vm:"1",version:"DICOM"},"(0008,0412)":{tag:"(0008,0412)",vr:"SQ",name:"EmptyValueMatchingSequence",vm:"1",version:"DICOM"},"(0008,0413)":{tag:"(0008,0413)",vr:"SQ",name:"GeneralMatchingSequence",vm:"1",version:"DICOM"},"(0008,0414)":{tag:"(0008,0414)",vr:"US",name:"RequestedStatusInterval",vm:"1",version:"DICOM"},"(0008,0415)":{tag:"(0008,0415)",vr:"CS",name:"RetainInstances",vm:"1",version:"DICOM"},"(0008,0416)":{tag:"(0008,0416)",vr:"DT",name:"ExpirationDateTime",vm:"1",version:"DICOM"},"(0008,0417)":{tag:"(0008,0417)",vr:"CS",name:"TransactionStatus",vm:"1",version:"DICOM"},"(0008,0418)":{tag:"(0008,0418)",vr:"LT",name:"TransactionStatusComment",vm:"1",version:"DICOM"},"(0008,0419)":{tag:"(0008,0419)",vr:"SQ",name:"FileSetAccessSequence",vm:"1",version:"DICOM"},"(0008,041A)":{tag:"(0008,041A)",vr:"SQ",name:"FileAccessSequence",vm:"1",version:"DICOM"},"(0008,041B)":{tag:"(0008,041B)",vr:"OB",name:"RecordKey",vm:"1",version:"DICOM"},"(0008,041C)":{tag:"(0008,041C)",vr:"OB",name:"PriorRecordKey",vm:"1",version:"DICOM"},"(0008,041D)":{tag:"(0008,041D)",vr:"SQ",name:"MetadataSequence",vm:"1",version:"DICOM"},"(0008,041E)":{tag:"(0008,041E)",vr:"SQ",name:"UpdatedMetadataSequence",vm:"1",version:"DICOM"},"(0008,041F)":{tag:"(0008,041F)",vr:"DT",name:"StudyUpdateDateTime",vm:"1",version:"DICOM"},"(0008,0420)":{tag:"(0008,0420)",vr:"SQ",name:"InventoryAccessEndPointsSequence",vm:"1",version:"DICOM"},"(0008,0421)":{tag:"(0008,0421)",vr:"SQ",name:"StudyAccessEndPointsSequence",vm:"1",version:"DICOM"},"(0008,0422)":{tag:"(0008,0422)",vr:"SQ",name:"IncorporatedInventoryInstanceSequence",vm:"1",version:"DICOM"},"(0008,0423)":{tag:"(0008,0423)",vr:"SQ",name:"InventoriedStudiesSequence",vm:"1",version:"DICOM"},"(0008,0424)":{tag:"(0008,0424)",vr:"SQ",name:"InventoriedSeriesSequence",vm:"1",version:"DICOM"},"(0008,0425)":{tag:"(0008,0425)",vr:"SQ",name:"InventoriedInstancesSequence",vm:"1",version:"DICOM"},"(0008,0426)":{tag:"(0008,0426)",vr:"CS",name:"InventoryCompletionStatus",vm:"1",version:"DICOM"},"(0008,0427)":{tag:"(0008,0427)",vr:"UL",name:"NumberOfStudyRecordsInInstance",vm:"1",version:"DICOM"},"(0008,0428)":{tag:"(0008,0428)",vr:"UV",name:"TotalNumberOfStudyRecords",vm:"1",version:"DICOM"},"(0008,0429)":{tag:"(0008,0429)",vr:"UV",name:"MaximumNumberOfRecords",vm:"1",version:"DICOM"},"(0008,1010)":{tag:"(0008,1010)",vr:"SH",name:"StationName",vm:"1",version:"DICOM"},"(0008,1030)":{tag:"(0008,1030)",vr:"LO",name:"StudyDescription",vm:"1",version:"DICOM"},"(0008,1032)":{tag:"(0008,1032)",vr:"SQ",name:"ProcedureCodeSequence",vm:"1",version:"DICOM"},"(0008,103E)":{tag:"(0008,103E)",vr:"LO",name:"SeriesDescription",vm:"1",version:"DICOM"},"(0008,103F)":{tag:"(0008,103F)",vr:"SQ",name:"SeriesDescriptionCodeSequence",vm:"1",version:"DICOM"},"(0008,1040)":{tag:"(0008,1040)",vr:"LO",name:"InstitutionalDepartmentName",vm:"1",version:"DICOM"},"(0008,1041)":{tag:"(0008,1041)",vr:"SQ",name:"InstitutionalDepartmentTypeCodeSequence",vm:"1",version:"DICOM"},"(0008,1048)":{tag:"(0008,1048)",vr:"PN",name:"PhysiciansOfRecord",vm:"1-n",version:"DICOM"},"(0008,1049)":{tag:"(0008,1049)",vr:"SQ",name:"PhysiciansOfRecordIdentificationSequence",vm:"1",version:"DICOM"},"(0008,1050)":{tag:"(0008,1050)",vr:"PN",name:"PerformingPhysicianName",vm:"1-n",version:"DICOM"},"(0008,1052)":{tag:"(0008,1052)",vr:"SQ",name:"PerformingPhysicianIdentificationSequence",vm:"1",version:"DICOM"},"(0008,1060)":{tag:"(0008,1060)",vr:"PN",name:"NameOfPhysiciansReadingStudy",vm:"1-n",version:"DICOM"},"(0008,1062)":{tag:"(0008,1062)",vr:"SQ",name:"PhysiciansReadingStudyIdentificationSequence",vm:"1",version:"DICOM"},"(0008,1070)":{tag:"(0008,1070)",vr:"PN",name:"OperatorsName",vm:"1-n",version:"DICOM"},"(0008,1072)":{tag:"(0008,1072)",vr:"SQ",name:"OperatorIdentificationSequence",vm:"1",version:"DICOM"},"(0008,1080)":{tag:"(0008,1080)",vr:"LO",name:"AdmittingDiagnosesDescription",vm:"1-n",version:"DICOM"},"(0008,1084)":{tag:"(0008,1084)",vr:"SQ",name:"AdmittingDiagnosesCodeSequence",vm:"1",version:"DICOM"},"(0008,1088)":{tag:"(0008,1088)",vr:"LO",name:"PyramidDescription",vm:"1",version:"DICOM"},"(0008,1090)":{tag:"(0008,1090)",vr:"LO",name:"ManufacturerModelName",vm:"1",version:"DICOM"},"(0008,1110)":{tag:"(0008,1110)",vr:"SQ",name:"ReferencedStudySequence",vm:"1",version:"DICOM"},"(0008,1111)":{tag:"(0008,1111)",vr:"SQ",name:"ReferencedPerformedProcedureStepSequence",vm:"1",version:"DICOM"},"(0008,1112)":{tag:"(0008,1112)",vr:"SQ",name:"ReferencedInstancesBySOPClassSequence",vm:"1",version:"DICOM"},"(0008,1115)":{tag:"(0008,1115)",vr:"SQ",name:"ReferencedSeriesSequence",vm:"1",version:"DICOM"},"(0008,1120)":{tag:"(0008,1120)",vr:"SQ",name:"ReferencedPatientSequence",vm:"1",version:"DICOM"},"(0008,1125)":{tag:"(0008,1125)",vr:"SQ",name:"ReferencedVisitSequence",vm:"1",version:"DICOM"},"(0008,1134)":{tag:"(0008,1134)",vr:"SQ",name:"ReferencedStereometricInstanceSequence",vm:"1",version:"DICOM"},"(0008,113A)":{tag:"(0008,113A)",vr:"SQ",name:"ReferencedWaveformSequence",vm:"1",version:"DICOM"},"(0008,1140)":{tag:"(0008,1140)",vr:"SQ",name:"ReferencedImageSequence",vm:"1",version:"DICOM"},"(0008,114A)":{tag:"(0008,114A)",vr:"SQ",name:"ReferencedInstanceSequence",vm:"1",version:"DICOM"},"(0008,114B)":{tag:"(0008,114B)",vr:"SQ",name:"ReferencedRealWorldValueMappingInstanceSequence",vm:"1",version:"DICOM"},"(0008,1150)":{tag:"(0008,1150)",vr:"UI",name:"ReferencedSOPClassUID",vm:"1",version:"DICOM"},"(0008,1155)":{tag:"(0008,1155)",vr:"UI",name:"ReferencedSOPInstanceUID",vm:"1",version:"DICOM"},"(0008,1156)":{tag:"(0008,1156)",vr:"SQ",name:"DefinitionSourceSequence",vm:"1",version:"DICOM"},"(0008,115A)":{tag:"(0008,115A)",vr:"UI",name:"SOPClassesSupported",vm:"1-n",version:"DICOM"},"(0008,1160)":{tag:"(0008,1160)",vr:"IS",name:"ReferencedFrameNumber",vm:"1-n",version:"DICOM"},"(0008,1161)":{tag:"(0008,1161)",vr:"UL",name:"SimpleFrameList",vm:"1-n",version:"DICOM"},"(0008,1162)":{tag:"(0008,1162)",vr:"UL",name:"CalculatedFrameList",vm:"3-3n",version:"DICOM"},"(0008,1163)":{tag:"(0008,1163)",vr:"FD",name:"TimeRange",vm:"2",version:"DICOM"},"(0008,1164)":{tag:"(0008,1164)",vr:"SQ",name:"FrameExtractionSequence",vm:"1",version:"DICOM"},"(0008,1167)":{tag:"(0008,1167)",vr:"UI",name:"MultiFrameSourceSOPInstanceUID",vm:"1",version:"DICOM"},"(0008,1190)":{tag:"(0008,1190)",vr:"UR",name:"RetrieveURL",vm:"1",version:"DICOM"},"(0008,1195)":{tag:"(0008,1195)",vr:"UI",name:"TransactionUID",vm:"1",version:"DICOM"},"(0008,1196)":{tag:"(0008,1196)",vr:"US",name:"WarningReason",vm:"1",version:"DICOM"},"(0008,1197)":{tag:"(0008,1197)",vr:"US",name:"FailureReason",vm:"1",version:"DICOM"},"(0008,1198)":{tag:"(0008,1198)",vr:"SQ",name:"FailedSOPSequence",vm:"1",version:"DICOM"},"(0008,1199)":{tag:"(0008,1199)",vr:"SQ",name:"ReferencedSOPSequence",vm:"1",version:"DICOM"},"(0008,119A)":{tag:"(0008,119A)",vr:"SQ",name:"OtherFailuresSequence",vm:"1",version:"DICOM"},"(0008,119B)":{tag:"(0008,119B)",vr:"SQ",name:"FailedStudySequence",vm:"1",version:"DICOM"},"(0008,1200)":{tag:"(0008,1200)",vr:"SQ",name:"StudiesContainingOtherReferencedInstancesSequence",vm:"1",version:"DICOM"},"(0008,1250)":{tag:"(0008,1250)",vr:"SQ",name:"RelatedSeriesSequence",vm:"1",version:"DICOM"},"(0008,2111)":{tag:"(0008,2111)",vr:"ST",name:"DerivationDescription",vm:"1",version:"DICOM"},"(0008,2112)":{tag:"(0008,2112)",vr:"SQ",name:"SourceImageSequence",vm:"1",version:"DICOM"},"(0008,2120)":{tag:"(0008,2120)",vr:"SH",name:"StageName",vm:"1",version:"DICOM"},"(0008,2122)":{tag:"(0008,2122)",vr:"IS",name:"StageNumber",vm:"1",version:"DICOM"},"(0008,2124)":{tag:"(0008,2124)",vr:"IS",name:"NumberOfStages",vm:"1",version:"DICOM"},"(0008,2127)":{tag:"(0008,2127)",vr:"SH",name:"ViewName",vm:"1",version:"DICOM"},"(0008,2128)":{tag:"(0008,2128)",vr:"IS",name:"ViewNumber",vm:"1",version:"DICOM"},"(0008,2129)":{tag:"(0008,2129)",vr:"IS",name:"NumberOfEventTimers",vm:"1",version:"DICOM"},"(0008,212A)":{tag:"(0008,212A)",vr:"IS",name:"NumberOfViewsInStage",vm:"1",version:"DICOM"},"(0008,2130)":{tag:"(0008,2130)",vr:"DS",name:"EventElapsedTimes",vm:"1-n",version:"DICOM"},"(0008,2132)":{tag:"(0008,2132)",vr:"LO",name:"EventTimerNames",vm:"1-n",version:"DICOM"},"(0008,2133)":{tag:"(0008,2133)",vr:"SQ",name:"EventTimerSequence",vm:"1",version:"DICOM"},"(0008,2134)":{tag:"(0008,2134)",vr:"FD",name:"EventTimeOffset",vm:"1",version:"DICOM"},"(0008,2135)":{tag:"(0008,2135)",vr:"SQ",name:"EventCodeSequence",vm:"1",version:"DICOM"},"(0008,2142)":{tag:"(0008,2142)",vr:"IS",name:"StartTrim",vm:"1",version:"DICOM"},"(0008,2143)":{tag:"(0008,2143)",vr:"IS",name:"StopTrim",vm:"1",version:"DICOM"},"(0008,2144)":{tag:"(0008,2144)",vr:"IS",name:"RecommendedDisplayFrameRate",vm:"1",version:"DICOM"},"(0008,2218)":{tag:"(0008,2218)",vr:"SQ",name:"AnatomicRegionSequence",vm:"1",version:"DICOM"},"(0008,2220)":{tag:"(0008,2220)",vr:"SQ",name:"AnatomicRegionModifierSequence",vm:"1",version:"DICOM"},"(0008,2228)":{tag:"(0008,2228)",vr:"SQ",name:"PrimaryAnatomicStructureSequence",vm:"1",version:"DICOM"},"(0008,2229)":{tag:"(0008,2229)",vr:"SQ",name:"AnatomicStructureSpaceOrRegionSequence",vm:"1",version:"DICOM"},"(0008,2230)":{tag:"(0008,2230)",vr:"SQ",name:"PrimaryAnatomicStructureModifierSequence",vm:"1",version:"DICOM"},"(0008,3001)":{tag:"(0008,3001)",vr:"SQ",name:"AlternateRepresentationSequence",vm:"1",version:"DICOM"},"(0008,3002)":{tag:"(0008,3002)",vr:"UI",name:"AvailableTransferSyntaxUID",vm:"1-n",version:"DICOM"},"(0008,3010)":{tag:"(0008,3010)",vr:"UI",name:"IrradiationEventUID",vm:"1-n",version:"DICOM"},"(0008,3011)":{tag:"(0008,3011)",vr:"SQ",name:"SourceIrradiationEventSequence",vm:"1",version:"DICOM"},"(0008,3012)":{tag:"(0008,3012)",vr:"UI",name:"RadiopharmaceuticalAdministrationEventUID",vm:"1",version:"DICOM"},"(0008,9007)":{tag:"(0008,9007)",vr:"CS",name:"FrameType",vm:"4",version:"DICOM"},"(0008,9092)":{tag:"(0008,9092)",vr:"SQ",name:"ReferencedImageEvidenceSequence",vm:"1",version:"DICOM"},"(0008,9121)":{tag:"(0008,9121)",vr:"SQ",name:"ReferencedRawDataSequence",vm:"1",version:"DICOM"},"(0008,9123)":{tag:"(0008,9123)",vr:"UI",name:"CreatorVersionUID",vm:"1",version:"DICOM"},"(0008,9124)":{tag:"(0008,9124)",vr:"SQ",name:"DerivationImageSequence",vm:"1",version:"DICOM"},"(0008,9154)":{tag:"(0008,9154)",vr:"SQ",name:"SourceImageEvidenceSequence",vm:"1",version:"DICOM"},"(0008,9205)":{tag:"(0008,9205)",vr:"CS",name:"PixelPresentation",vm:"1",version:"DICOM"},"(0008,9206)":{tag:"(0008,9206)",vr:"CS",name:"VolumetricProperties",vm:"1",version:"DICOM"},"(0008,9207)":{tag:"(0008,9207)",vr:"CS",name:"VolumeBasedCalculationTechnique",vm:"1",version:"DICOM"},"(0008,9208)":{tag:"(0008,9208)",vr:"CS",name:"ComplexImageComponent",vm:"1",version:"DICOM"},"(0008,9209)":{tag:"(0008,9209)",vr:"CS",name:"AcquisitionContrast",vm:"1",version:"DICOM"},"(0008,9215)":{tag:"(0008,9215)",vr:"SQ",name:"DerivationCodeSequence",vm:"1",version:"DICOM"},"(0008,9237)":{tag:"(0008,9237)",vr:"SQ",name:"ReferencedPresentationStateSequence",vm:"1",version:"DICOM"},"(0008,9410)":{tag:"(0008,9410)",vr:"SQ",name:"ReferencedOtherPlaneSequence",vm:"1",version:"DICOM"},"(0008,9458)":{tag:"(0008,9458)",vr:"SQ",name:"FrameDisplaySequence",vm:"1",version:"DICOM"},"(0008,9459)":{tag:"(0008,9459)",vr:"FL",name:"RecommendedDisplayFrameRateInFloat",vm:"1",version:"DICOM"},"(0008,9460)":{tag:"(0008,9460)",vr:"CS",name:"SkipFrameRangeFlag",vm:"1",version:"DICOM"},"(0010,0010)":{tag:"(0010,0010)",vr:"PN",name:"PatientName",vm:"1",version:"DICOM"},"(0010,0020)":{tag:"(0010,0020)",vr:"LO",name:"PatientID",vm:"1",version:"DICOM"},"(0010,0021)":{tag:"(0010,0021)",vr:"LO",name:"IssuerOfPatientID",vm:"1",version:"DICOM"},"(0010,0022)":{tag:"(0010,0022)",vr:"CS",name:"TypeOfPatientID",vm:"1",version:"DICOM"},"(0010,0024)":{tag:"(0010,0024)",vr:"SQ",name:"IssuerOfPatientIDQualifiersSequence",vm:"1",version:"DICOM"},"(0010,0026)":{tag:"(0010,0026)",vr:"SQ",name:"SourcePatientGroupIdentificationSequence",vm:"1",version:"DICOM"},"(0010,0027)":{tag:"(0010,0027)",vr:"SQ",name:"GroupOfPatientsIdentificationSequence",vm:"1",version:"DICOM"},"(0010,0028)":{tag:"(0010,0028)",vr:"US",name:"SubjectRelativePositionInImage",vm:"3",version:"DICOM"},"(0010,0030)":{tag:"(0010,0030)",vr:"DA",name:"PatientBirthDate",vm:"1",version:"DICOM"},"(0010,0032)":{tag:"(0010,0032)",vr:"TM",name:"PatientBirthTime",vm:"1",version:"DICOM"},"(0010,0033)":{tag:"(0010,0033)",vr:"LO",name:"PatientBirthDateInAlternativeCalendar",vm:"1",version:"DICOM"},"(0010,0034)":{tag:"(0010,0034)",vr:"LO",name:"PatientDeathDateInAlternativeCalendar",vm:"1",version:"DICOM"},"(0010,0035)":{tag:"(0010,0035)",vr:"CS",name:"PatientAlternativeCalendar",vm:"1",version:"DICOM"},"(0010,0040)":{tag:"(0010,0040)",vr:"CS",name:"PatientSex",vm:"1",version:"DICOM"},"(0010,0050)":{tag:"(0010,0050)",vr:"SQ",name:"PatientInsurancePlanCodeSequence",vm:"1",version:"DICOM"},"(0010,0101)":{tag:"(0010,0101)",vr:"SQ",name:"PatientPrimaryLanguageCodeSequence",vm:"1",version:"DICOM"},"(0010,0102)":{tag:"(0010,0102)",vr:"SQ",name:"PatientPrimaryLanguageModifierCodeSequence",vm:"1",version:"DICOM"},"(0010,0200)":{tag:"(0010,0200)",vr:"CS",name:"QualityControlSubject",vm:"1",version:"DICOM"},"(0010,0201)":{tag:"(0010,0201)",vr:"SQ",name:"QualityControlSubjectTypeCodeSequence",vm:"1",version:"DICOM"},"(0010,0212)":{tag:"(0010,0212)",vr:"UC",name:"StrainDescription",vm:"1",version:"DICOM"},"(0010,0213)":{tag:"(0010,0213)",vr:"LO",name:"StrainNomenclature",vm:"1",version:"DICOM"},"(0010,0214)":{tag:"(0010,0214)",vr:"LO",name:"StrainStockNumber",vm:"1",version:"DICOM"},"(0010,0215)":{tag:"(0010,0215)",vr:"SQ",name:"StrainSourceRegistryCodeSequence",vm:"1",version:"DICOM"},"(0010,0216)":{tag:"(0010,0216)",vr:"SQ",name:"StrainStockSequence",vm:"1",version:"DICOM"},"(0010,0217)":{tag:"(0010,0217)",vr:"LO",name:"StrainSource",vm:"1",version:"DICOM"},"(0010,0218)":{tag:"(0010,0218)",vr:"UT",name:"StrainAdditionalInformation",vm:"1",version:"DICOM"},"(0010,0219)":{tag:"(0010,0219)",vr:"SQ",name:"StrainCodeSequence",vm:"1",version:"DICOM"},"(0010,0221)":{tag:"(0010,0221)",vr:"SQ",name:"GeneticModificationsSequence",vm:"1",version:"DICOM"},"(0010,0222)":{tag:"(0010,0222)",vr:"UC",name:"GeneticModificationsDescription",vm:"1",version:"DICOM"},"(0010,0223)":{tag:"(0010,0223)",vr:"LO",name:"GeneticModificationsNomenclature",vm:"1",version:"DICOM"},"(0010,0229)":{tag:"(0010,0229)",vr:"SQ",name:"GeneticModificationsCodeSequence",vm:"1",version:"DICOM"},"(0010,1000)":{tag:"(0010,1000)",vr:"LO",name:"OtherPatientIDs",vm:"1-n",version:"DICOM"},"(0010,1001)":{tag:"(0010,1001)",vr:"PN",name:"OtherPatientNames",vm:"1-n",version:"DICOM"},"(0010,1002)":{tag:"(0010,1002)",vr:"SQ",name:"OtherPatientIDsSequence",vm:"1",version:"DICOM"},"(0010,1005)":{tag:"(0010,1005)",vr:"PN",name:"PatientBirthName",vm:"1",version:"DICOM"},"(0010,1010)":{tag:"(0010,1010)",vr:"AS",name:"PatientAge",vm:"1",version:"DICOM"},"(0010,1020)":{tag:"(0010,1020)",vr:"DS",name:"PatientSize",vm:"1",version:"DICOM"},"(0010,1021)":{tag:"(0010,1021)",vr:"SQ",name:"PatientSizeCodeSequence",vm:"1",version:"DICOM"},"(0010,1022)":{tag:"(0010,1022)",vr:"DS",name:"PatientBodyMassIndex",vm:"1",version:"DICOM"},"(0010,1023)":{tag:"(0010,1023)",vr:"DS",name:"MeasuredAPDimension",vm:"1",version:"DICOM"},"(0010,1024)":{tag:"(0010,1024)",vr:"DS",name:"MeasuredLateralDimension",vm:"1",version:"DICOM"},"(0010,1030)":{tag:"(0010,1030)",vr:"DS",name:"PatientWeight",vm:"1",version:"DICOM"},"(0010,1040)":{tag:"(0010,1040)",vr:"LO",name:"PatientAddress",vm:"1",version:"DICOM"},"(0010,1060)":{tag:"(0010,1060)",vr:"PN",name:"PatientMotherBirthName",vm:"1",version:"DICOM"},"(0010,1080)":{tag:"(0010,1080)",vr:"LO",name:"MilitaryRank",vm:"1",version:"DICOM"},"(0010,1081)":{tag:"(0010,1081)",vr:"LO",name:"BranchOfService",vm:"1",version:"DICOM"},"(0010,1090)":{tag:"(0010,1090)",vr:"LO",name:"MedicalRecordLocator",vm:"1",version:"DICOM"},"(0010,1100)":{tag:"(0010,1100)",vr:"SQ",name:"ReferencedPatientPhotoSequence",vm:"1",version:"DICOM"},"(0010,2000)":{tag:"(0010,2000)",vr:"LO",name:"MedicalAlerts",vm:"1-n",version:"DICOM"},"(0010,2110)":{tag:"(0010,2110)",vr:"LO",name:"Allergies",vm:"1-n",version:"DICOM"},"(0010,2150)":{tag:"(0010,2150)",vr:"LO",name:"CountryOfResidence",vm:"1",version:"DICOM"},"(0010,2152)":{tag:"(0010,2152)",vr:"LO",name:"RegionOfResidence",vm:"1",version:"DICOM"},"(0010,2154)":{tag:"(0010,2154)",vr:"SH",name:"PatientTelephoneNumbers",vm:"1-n",version:"DICOM"},"(0010,2155)":{tag:"(0010,2155)",vr:"LT",name:"PatientTelecomInformation",vm:"1",version:"DICOM"},"(0010,2160)":{tag:"(0010,2160)",vr:"SH",name:"EthnicGroup",vm:"1",version:"DICOM"},"(0010,2161)":{tag:"(0010,2161)",vr:"SQ",name:"EthnicGroupCodeSequence",vm:"1",version:"DICOM"},"(0010,2180)":{tag:"(0010,2180)",vr:"SH",name:"Occupation",vm:"1",version:"DICOM"},"(0010,21A0)":{tag:"(0010,21A0)",vr:"CS",name:"SmokingStatus",vm:"1",version:"DICOM"},"(0010,21B0)":{tag:"(0010,21B0)",vr:"LT",name:"AdditionalPatientHistory",vm:"1",version:"DICOM"},"(0010,21C0)":{tag:"(0010,21C0)",vr:"US",name:"PregnancyStatus",vm:"1",version:"DICOM"},"(0010,21D0)":{tag:"(0010,21D0)",vr:"DA",name:"LastMenstrualDate",vm:"1",version:"DICOM"},"(0010,21F0)":{tag:"(0010,21F0)",vr:"LO",name:"PatientReligiousPreference",vm:"1",version:"DICOM"},"(0010,2201)":{tag:"(0010,2201)",vr:"LO",name:"PatientSpeciesDescription",vm:"1",version:"DICOM"},"(0010,2202)":{tag:"(0010,2202)",vr:"SQ",name:"PatientSpeciesCodeSequence",vm:"1",version:"DICOM"},"(0010,2203)":{tag:"(0010,2203)",vr:"CS",name:"PatientSexNeutered",vm:"1",version:"DICOM"},"(0010,2210)":{tag:"(0010,2210)",vr:"CS",name:"AnatomicalOrientationType",vm:"1",version:"DICOM"},"(0010,2292)":{tag:"(0010,2292)",vr:"LO",name:"PatientBreedDescription",vm:"1",version:"DICOM"},"(0010,2293)":{tag:"(0010,2293)",vr:"SQ",name:"PatientBreedCodeSequence",vm:"1",version:"DICOM"},"(0010,2294)":{tag:"(0010,2294)",vr:"SQ",name:"BreedRegistrationSequence",vm:"1",version:"DICOM"},"(0010,2295)":{tag:"(0010,2295)",vr:"LO",name:"BreedRegistrationNumber",vm:"1",version:"DICOM"},"(0010,2296)":{tag:"(0010,2296)",vr:"SQ",name:"BreedRegistryCodeSequence",vm:"1",version:"DICOM"},"(0010,2297)":{tag:"(0010,2297)",vr:"PN",name:"ResponsiblePerson",vm:"1",version:"DICOM"},"(0010,2298)":{tag:"(0010,2298)",vr:"CS",name:"ResponsiblePersonRole",vm:"1",version:"DICOM"},"(0010,2299)":{tag:"(0010,2299)",vr:"LO",name:"ResponsibleOrganization",vm:"1",version:"DICOM"},"(0010,4000)":{tag:"(0010,4000)",vr:"LT",name:"PatientComments",vm:"1",version:"DICOM"},"(0010,9431)":{tag:"(0010,9431)",vr:"FL",name:"ExaminedBodyThickness",vm:"1",version:"DICOM"},"(0012,0010)":{tag:"(0012,0010)",vr:"LO",name:"ClinicalTrialSponsorName",vm:"1",version:"DICOM"},"(0012,0020)":{tag:"(0012,0020)",vr:"LO",name:"ClinicalTrialProtocolID",vm:"1",version:"DICOM"},"(0012,0021)":{tag:"(0012,0021)",vr:"LO",name:"ClinicalTrialProtocolName",vm:"1",version:"DICOM"},"(0012,0022)":{tag:"(0012,0022)",vr:"LO",name:"IssuerOfClinicalTrialProtocolID",vm:"1",version:"DICOM"},"(0012,0023)":{tag:"(0012,0023)",vr:"SQ",name:"OtherClinicalTrialProtocolIDsSequence",vm:"1",version:"DICOM"},"(0012,0030)":{tag:"(0012,0030)",vr:"LO",name:"ClinicalTrialSiteID",vm:"1",version:"DICOM"},"(0012,0031)":{tag:"(0012,0031)",vr:"LO",name:"ClinicalTrialSiteName",vm:"1",version:"DICOM"},"(0012,0032)":{tag:"(0012,0032)",vr:"LO",name:"IssuerOfClinicalTrialSiteID",vm:"1",version:"DICOM"},"(0012,0040)":{tag:"(0012,0040)",vr:"LO",name:"ClinicalTrialSubjectID",vm:"1",version:"DICOM"},"(0012,0041)":{tag:"(0012,0041)",vr:"LO",name:"IssuerOfClinicalTrialSubjectID",vm:"1",version:"DICOM"},"(0012,0042)":{tag:"(0012,0042)",vr:"LO",name:"ClinicalTrialSubjectReadingID",vm:"1",version:"DICOM"},"(0012,0043)":{tag:"(0012,0043)",vr:"LO",name:"IssuerOfClinicalTrialSubjectReadingID",vm:"1",version:"DICOM"},"(0012,0050)":{tag:"(0012,0050)",vr:"LO",name:"ClinicalTrialTimePointID",vm:"1",version:"DICOM"},"(0012,0051)":{tag:"(0012,0051)",vr:"ST",name:"ClinicalTrialTimePointDescription",vm:"1",version:"DICOM"},"(0012,0052)":{tag:"(0012,0052)",vr:"FD",name:"LongitudinalTemporalOffsetFromEvent",vm:"1",version:"DICOM"},"(0012,0053)":{tag:"(0012,0053)",vr:"CS",name:"LongitudinalTemporalEventType",vm:"1",version:"DICOM"},"(0012,0054)":{tag:"(0012,0054)",vr:"SQ",name:"ClinicalTrialTimePointTypeCodeSequence",vm:"1",version:"DICOM"},"(0012,0055)":{tag:"(0012,0055)",vr:"LO",name:"IssuerOfClinicalTrialTimePointID",vm:"1",version:"DICOM"},"(0012,0060)":{tag:"(0012,0060)",vr:"LO",name:"ClinicalTrialCoordinatingCenterName",vm:"1",version:"DICOM"},"(0012,0062)":{tag:"(0012,0062)",vr:"CS",name:"PatientIdentityRemoved",vm:"1",version:"DICOM"},"(0012,0063)":{tag:"(0012,0063)",vr:"LO",name:"DeidentificationMethod",vm:"1-n",version:"DICOM"},"(0012,0064)":{tag:"(0012,0064)",vr:"SQ",name:"DeidentificationMethodCodeSequence",vm:"1",version:"DICOM"},"(0012,0071)":{tag:"(0012,0071)",vr:"LO",name:"ClinicalTrialSeriesID",vm:"1",version:"DICOM"},"(0012,0072)":{tag:"(0012,0072)",vr:"LO",name:"ClinicalTrialSeriesDescription",vm:"1",version:"DICOM"},"(0012,0073)":{tag:"(0012,0073)",vr:"LO",name:"IssuerOfClinicalTrialSeriesID",vm:"1",version:"DICOM"},"(0012,0081)":{tag:"(0012,0081)",vr:"LO",name:"ClinicalTrialProtocolEthicsCommitteeName",vm:"1",version:"DICOM"},"(0012,0082)":{tag:"(0012,0082)",vr:"LO",name:"ClinicalTrialProtocolEthicsCommitteeApprovalNumber",vm:"1",version:"DICOM"},"(0012,0083)":{tag:"(0012,0083)",vr:"SQ",name:"ConsentForClinicalTrialUseSequence",vm:"1",version:"DICOM"},"(0012,0084)":{tag:"(0012,0084)",vr:"CS",name:"DistributionType",vm:"1",version:"DICOM"},"(0012,0085)":{tag:"(0012,0085)",vr:"CS",name:"ConsentForDistributionFlag",vm:"1",version:"DICOM"},"(0014,0025)":{tag:"(0014,0025)",vr:"ST",name:"ComponentManufacturingProcedure",vm:"1-n",version:"DICOM/DICONDE"},"(0014,0028)":{tag:"(0014,0028)",vr:"ST",name:"ComponentManufacturer",vm:"1-n",version:"DICOM/DICONDE"},"(0014,0030)":{tag:"(0014,0030)",vr:"DS",name:"MaterialThickness",vm:"1-n",version:"DICOM/DICONDE"},"(0014,0032)":{tag:"(0014,0032)",vr:"DS",name:"MaterialPipeDiameter",vm:"1-n",version:"DICOM/DICONDE"},"(0014,0034)":{tag:"(0014,0034)",vr:"DS",name:"MaterialIsolationDiameter",vm:"1-n",version:"DICOM/DICONDE"},"(0014,0042)":{tag:"(0014,0042)",vr:"ST",name:"MaterialGrade",vm:"1-n",version:"DICOM/DICONDE"},"(0014,0044)":{tag:"(0014,0044)",vr:"ST",name:"MaterialPropertiesDescription",vm:"1-n",version:"DICOM/DICONDE"},"(0014,0046)":{tag:"(0014,0046)",vr:"LT",name:"MaterialNotes",vm:"1",version:"DICOM/DICONDE"},"(0014,0050)":{tag:"(0014,0050)",vr:"CS",name:"ComponentShape",vm:"1",version:"DICOM/DICONDE"},"(0014,0052)":{tag:"(0014,0052)",vr:"CS",name:"CurvatureType",vm:"1",version:"DICOM/DICONDE"},"(0014,0054)":{tag:"(0014,0054)",vr:"DS",name:"OuterDiameter",vm:"1",version:"DICOM/DICONDE"},"(0014,0056)":{tag:"(0014,0056)",vr:"DS",name:"InnerDiameter",vm:"1",version:"DICOM/DICONDE"},"(0014,1010)":{tag:"(0014,1010)",vr:"ST",name:"ActualEnvironmentalConditions",vm:"1",version:"DICOM/DICONDE"},"(0014,1020)":{tag:"(0014,1020)",vr:"DA",name:"ExpiryDate",vm:"1",version:"DICOM/DICONDE"},"(0014,1040)":{tag:"(0014,1040)",vr:"ST",name:"EnvironmentalConditions",vm:"1",version:"DICOM/DICONDE"},"(0014,2002)":{tag:"(0014,2002)",vr:"SQ",name:"EvaluatorSequence",vm:"1",version:"DICOM/DICONDE"},"(0014,2004)":{tag:"(0014,2004)",vr:"IS",name:"EvaluatorNumber",vm:"1",version:"DICOM/DICONDE"},"(0014,2006)":{tag:"(0014,2006)",vr:"PN",name:"EvaluatorName",vm:"1",version:"DICOM/DICONDE"},"(0014,2008)":{tag:"(0014,2008)",vr:"IS",name:"EvaluationAttempt",vm:"1",version:"DICOM/DICONDE"},"(0014,2012)":{tag:"(0014,2012)",vr:"SQ",name:"IndicationSequence",vm:"1",version:"DICOM/DICONDE"},"(0014,2014)":{tag:"(0014,2014)",vr:"IS",name:"IndicationNumber",vm:"1",version:"DICOM/DICONDE"},"(0014,2016)":{tag:"(0014,2016)",vr:"SH",name:"IndicationLabel",vm:"1",version:"DICOM/DICONDE"},"(0014,2018)":{tag:"(0014,2018)",vr:"ST",name:"IndicationDescription",vm:"1",version:"DICOM/DICONDE"},"(0014,201A)":{tag:"(0014,201A)",vr:"CS",name:"IndicationType",vm:"1-n",version:"DICOM/DICONDE"},"(0014,201C)":{tag:"(0014,201C)",vr:"CS",name:"IndicationDisposition",vm:"1",version:"DICOM/DICONDE"},"(0014,201E)":{tag:"(0014,201E)",vr:"SQ",name:"IndicationROISequence",vm:"1",version:"DICOM/DICONDE"},"(0014,2030)":{tag:"(0014,2030)",vr:"SQ",name:"IndicationPhysicalPropertySequence",vm:"1",version:"DICOM/DICONDE"},"(0014,2032)":{tag:"(0014,2032)",vr:"SH",name:"PropertyLabel",vm:"1",version:"DICOM/DICONDE"},"(0014,2202)":{tag:"(0014,2202)",vr:"IS",name:"CoordinateSystemNumberOfAxes",vm:"1",version:"DICOM/DICONDE"},"(0014,2204)":{tag:"(0014,2204)",vr:"SQ",name:"CoordinateSystemAxesSequence",vm:"1",version:"DICOM/DICONDE"},"(0014,2206)":{tag:"(0014,2206)",vr:"ST",name:"CoordinateSystemAxisDescription",vm:"1",version:"DICOM/DICONDE"},"(0014,2208)":{tag:"(0014,2208)",vr:"CS",name:"CoordinateSystemDataSetMapping",vm:"1",version:"DICOM/DICONDE"},"(0014,220A)":{tag:"(0014,220A)",vr:"IS",name:"CoordinateSystemAxisNumber",vm:"1",version:"DICOM/DICONDE"},"(0014,220C)":{tag:"(0014,220C)",vr:"CS",name:"CoordinateSystemAxisType",vm:"1",version:"DICOM/DICONDE"},"(0014,220E)":{tag:"(0014,220E)",vr:"CS",name:"CoordinateSystemAxisUnits",vm:"1",version:"DICOM/DICONDE"},"(0014,2210)":{tag:"(0014,2210)",vr:"OB",name:"CoordinateSystemAxisValues",vm:"1",version:"DICOM/DICONDE"},"(0014,2220)":{tag:"(0014,2220)",vr:"SQ",name:"CoordinateSystemTransformSequence",vm:"1",version:"DICOM/DICONDE"},"(0014,2222)":{tag:"(0014,2222)",vr:"ST",name:"TransformDescription",vm:"1",version:"DICOM/DICONDE"},"(0014,2224)":{tag:"(0014,2224)",vr:"IS",name:"TransformNumberOfAxes",vm:"1",version:"DICOM/DICONDE"},"(0014,2226)":{tag:"(0014,2226)",vr:"IS",name:"TransformOrderOfAxes",vm:"1-n",version:"DICOM/DICONDE"},"(0014,2228)":{tag:"(0014,2228)",vr:"CS",name:"TransformedAxisUnits",vm:"1",version:"DICOM/DICONDE"},"(0014,222A)":{tag:"(0014,222A)",vr:"DS",name:"CoordinateSystemTransformRotationAndScaleMatrix",vm:"1-n",version:"DICOM/DICONDE"},"(0014,222C)":{tag:"(0014,222C)",vr:"DS",name:"CoordinateSystemTransformTranslationMatrix",vm:"1-n",version:"DICOM/DICONDE"},"(0014,3011)":{tag:"(0014,3011)",vr:"DS",name:"InternalDetectorFrameTime",vm:"1",version:"DICOM/DICONDE"},"(0014,3012)":{tag:"(0014,3012)",vr:"DS",name:"NumberOfFramesIntegrated",vm:"1",version:"DICOM/DICONDE"},"(0014,3020)":{tag:"(0014,3020)",vr:"SQ",name:"DetectorTemperatureSequence",vm:"1",version:"DICOM/DICONDE"},"(0014,3022)":{tag:"(0014,3022)",vr:"ST",name:"SensorName",vm:"1",version:"DICOM/DICONDE"},"(0014,3024)":{tag:"(0014,3024)",vr:"DS",name:"HorizontalOffsetOfSensor",vm:"1",version:"DICOM/DICONDE"},"(0014,3026)":{tag:"(0014,3026)",vr:"DS",name:"VerticalOffsetOfSensor",vm:"1",version:"DICOM/DICONDE"},"(0014,3028)":{tag:"(0014,3028)",vr:"DS",name:"SensorTemperature",vm:"1",version:"DICOM/DICONDE"},"(0014,3040)":{tag:"(0014,3040)",vr:"SQ",name:"DarkCurrentSequence",vm:"1",version:"DICOM/DICONDE"},"(0014,3050)":{tag:"(0014,3050)",vr:"ox",name:"DarkCurrentCounts",vm:"1",version:"DICOM/DICONDE"},"(0014,3060)":{tag:"(0014,3060)",vr:"SQ",name:"GainCorrectionReferenceSequence",vm:"1",version:"DICOM/DICONDE"},"(0014,3070)":{tag:"(0014,3070)",vr:"ox",name:"AirCounts",vm:"1",version:"DICOM/DICONDE"},"(0014,3071)":{tag:"(0014,3071)",vr:"DS",name:"KVUsedInGainCalibration",vm:"1",version:"DICOM/DICONDE"},"(0014,3072)":{tag:"(0014,3072)",vr:"DS",name:"MAUsedInGainCalibration",vm:"1",version:"DICOM/DICONDE"},"(0014,3073)":{tag:"(0014,3073)",vr:"DS",name:"NumberOfFramesUsedForIntegration",vm:"1",version:"DICOM/DICONDE"},"(0014,3074)":{tag:"(0014,3074)",vr:"LO",name:"FilterMaterialUsedInGainCalibration",vm:"1",version:"DICOM/DICONDE"},"(0014,3075)":{tag:"(0014,3075)",vr:"DS",name:"FilterThicknessUsedInGainCalibration",vm:"1",version:"DICOM/DICONDE"},"(0014,3076)":{tag:"(0014,3076)",vr:"DA",name:"DateOfGainCalibration",vm:"1",version:"DICOM/DICONDE"},"(0014,3077)":{tag:"(0014,3077)",vr:"TM",name:"TimeOfGainCalibration",vm:"1",version:"DICOM/DICONDE"},"(0014,3080)":{tag:"(0014,3080)",vr:"OB",name:"BadPixelImage",vm:"1",version:"DICOM/DICONDE"},"(0014,3099)":{tag:"(0014,3099)",vr:"LT",name:"CalibrationNotes",vm:"1",version:"DICOM/DICONDE"},"(0014,4002)":{tag:"(0014,4002)",vr:"SQ",name:"PulserEquipmentSequence",vm:"1",version:"DICOM/DICONDE"},"(0014,4004)":{tag:"(0014,4004)",vr:"CS",name:"PulserType",vm:"1",version:"DICOM/DICONDE"},"(0014,4006)":{tag:"(0014,4006)",vr:"LT",name:"PulserNotes",vm:"1",version:"DICOM/DICONDE"},"(0014,4008)":{tag:"(0014,4008)",vr:"SQ",name:"ReceiverEquipmentSequence",vm:"1",version:"DICOM/DICONDE"},"(0014,400A)":{tag:"(0014,400A)",vr:"CS",name:"AmplifierType",vm:"1",version:"DICOM/DICONDE"},"(0014,400C)":{tag:"(0014,400C)",vr:"LT",name:"ReceiverNotes",vm:"1",version:"DICOM/DICONDE"},"(0014,400E)":{tag:"(0014,400E)",vr:"SQ",name:"PreAmplifierEquipmentSequence",vm:"1",version:"DICOM/DICONDE"},"(0014,400F)":{tag:"(0014,400F)",vr:"LT",name:"PreAmplifierNotes",vm:"1",version:"DICOM/DICONDE"},"(0014,4010)":{tag:"(0014,4010)",vr:"SQ",name:"TransmitTransducerSequence",vm:"1",version:"DICOM/DICONDE"},"(0014,4011)":{tag:"(0014,4011)",vr:"SQ",name:"ReceiveTransducerSequence",vm:"1",version:"DICOM/DICONDE"},"(0014,4012)":{tag:"(0014,4012)",vr:"US",name:"NumberOfElements",vm:"1",version:"DICOM/DICONDE"},"(0014,4013)":{tag:"(0014,4013)",vr:"CS",name:"ElementShape",vm:"1",version:"DICOM/DICONDE"},"(0014,4014)":{tag:"(0014,4014)",vr:"DS",name:"ElementDimensionA",vm:"1",version:"DICOM/DICONDE"},"(0014,4015)":{tag:"(0014,4015)",vr:"DS",name:"ElementDimensionB",vm:"1",version:"DICOM/DICONDE"},"(0014,4016)":{tag:"(0014,4016)",vr:"DS",name:"ElementPitchA",vm:"1",version:"DICOM/DICONDE"},"(0014,4017)":{tag:"(0014,4017)",vr:"DS",name:"MeasuredBeamDimensionA",vm:"1",version:"DICOM/DICONDE"},"(0014,4018)":{tag:"(0014,4018)",vr:"DS",name:"MeasuredBeamDimensionB",vm:"1",version:"DICOM/DICONDE"},"(0014,4019)":{tag:"(0014,4019)",vr:"DS",name:"LocationOfMeasuredBeamDiameter",vm:"1",version:"DICOM/DICONDE"},"(0014,401A)":{tag:"(0014,401A)",vr:"DS",name:"NominalFrequency",vm:"1",version:"DICOM/DICONDE"},"(0014,401B)":{tag:"(0014,401B)",vr:"DS",name:"MeasuredCenterFrequency",vm:"1",version:"DICOM/DICONDE"},"(0014,401C)":{tag:"(0014,401C)",vr:"DS",name:"MeasuredBandwidth",vm:"1",version:"DICOM/DICONDE"},"(0014,401D)":{tag:"(0014,401D)",vr:"DS",name:"ElementPitchB",vm:"1",version:"DICOM/DICONDE"},"(0014,4020)":{tag:"(0014,4020)",vr:"SQ",name:"PulserSettingsSequence",vm:"1",version:"DICOM/DICONDE"},"(0014,4022)":{tag:"(0014,4022)",vr:"DS",name:"PulseWidth",vm:"1",version:"DICOM/DICONDE"},"(0014,4024)":{tag:"(0014,4024)",vr:"DS",name:"ExcitationFrequency",vm:"1",version:"DICOM/DICONDE"},"(0014,4026)":{tag:"(0014,4026)",vr:"CS",name:"ModulationType",vm:"1",version:"DICOM/DICONDE"},"(0014,4028)":{tag:"(0014,4028)",vr:"DS",name:"Damping",vm:"1",version:"DICOM/DICONDE"},"(0014,4030)":{tag:"(0014,4030)",vr:"SQ",name:"ReceiverSettingsSequence",vm:"1",version:"DICOM/DICONDE"},"(0014,4031)":{tag:"(0014,4031)",vr:"DS",name:"AcquiredSoundpathLength",vm:"1",version:"DICOM/DICONDE"},"(0014,4032)":{tag:"(0014,4032)",vr:"CS",name:"AcquisitionCompressionType",vm:"1",version:"DICOM/DICONDE"},"(0014,4033)":{tag:"(0014,4033)",vr:"IS",name:"AcquisitionSampleSize",vm:"1",version:"DICOM/DICONDE"},"(0014,4034)":{tag:"(0014,4034)",vr:"DS",name:"RectifierSmoothing",vm:"1",version:"DICOM/DICONDE"},"(0014,4035)":{tag:"(0014,4035)",vr:"SQ",name:"DACSequence",vm:"1",version:"DICOM/DICONDE"},"(0014,4036)":{tag:"(0014,4036)",vr:"CS",name:"DACType",vm:"1",version:"DICOM/DICONDE"},"(0014,4038)":{tag:"(0014,4038)",vr:"DS",name:"DACGainPoints",vm:"1-n",version:"DICOM/DICONDE"},"(0014,403A)":{tag:"(0014,403A)",vr:"DS",name:"DACTimePoints",vm:"1-n",version:"DICOM/DICONDE"},"(0014,403C)":{tag:"(0014,403C)",vr:"DS",name:"DACAmplitude",vm:"1-n",version:"DICOM/DICONDE"},"(0014,4040)":{tag:"(0014,4040)",vr:"SQ",name:"PreAmplifierSettingsSequence",vm:"1",version:"DICOM/DICONDE"},"(0014,4050)":{tag:"(0014,4050)",vr:"SQ",name:"TransmitTransducerSettingsSequence",vm:"1",version:"DICOM/DICONDE"},"(0014,4051)":{tag:"(0014,4051)",vr:"SQ",name:"ReceiveTransducerSettingsSequence",vm:"1",version:"DICOM/DICONDE"},"(0014,4052)":{tag:"(0014,4052)",vr:"DS",name:"IncidentAngle",vm:"1",version:"DICOM/DICONDE"},"(0014,4054)":{tag:"(0014,4054)",vr:"ST",name:"CouplingTechnique",vm:"1",version:"DICOM/DICONDE"},"(0014,4056)":{tag:"(0014,4056)",vr:"ST",name:"CouplingMedium",vm:"1",version:"DICOM/DICONDE"},"(0014,4057)":{tag:"(0014,4057)",vr:"DS",name:"CouplingVelocity",vm:"1",version:"DICOM/DICONDE"},"(0014,4058)":{tag:"(0014,4058)",vr:"DS",name:"ProbeCenterLocationX",vm:"1",version:"DICOM/DICONDE"},"(0014,4059)":{tag:"(0014,4059)",vr:"DS",name:"ProbeCenterLocationZ",vm:"1",version:"DICOM/DICONDE"},"(0014,405A)":{tag:"(0014,405A)",vr:"DS",name:"SoundPathLength",vm:"1",version:"DICOM/DICONDE"},"(0014,405C)":{tag:"(0014,405C)",vr:"ST",name:"DelayLawIdentifier",vm:"1",version:"DICOM/DICONDE"},"(0014,4060)":{tag:"(0014,4060)",vr:"SQ",name:"GateSettingsSequence",vm:"1",version:"DICOM/DICONDE"},"(0014,4062)":{tag:"(0014,4062)",vr:"DS",name:"GateThreshold",vm:"1",version:"DICOM/DICONDE"},"(0014,4064)":{tag:"(0014,4064)",vr:"DS",name:"VelocityOfSound",vm:"1",version:"DICOM/DICONDE"},"(0014,4070)":{tag:"(0014,4070)",vr:"SQ",name:"CalibrationSettingsSequence",vm:"1",version:"DICOM/DICONDE"},"(0014,4072)":{tag:"(0014,4072)",vr:"ST",name:"CalibrationProcedure",vm:"1",version:"DICOM/DICONDE"},"(0014,4074)":{tag:"(0014,4074)",vr:"SH",name:"ProcedureVersion",vm:"1",version:"DICOM/DICONDE"},"(0014,4076)":{tag:"(0014,4076)",vr:"DA",name:"ProcedureCreationDate",vm:"1",version:"DICOM/DICONDE"},"(0014,4078)":{tag:"(0014,4078)",vr:"DA",name:"ProcedureExpirationDate",vm:"1",version:"DICOM/DICONDE"},"(0014,407A)":{tag:"(0014,407A)",vr:"DA",name:"ProcedureLastModifiedDate",vm:"1",version:"DICOM/DICONDE"},"(0014,407C)":{tag:"(0014,407C)",vr:"TM",name:"CalibrationTime",vm:"1-n",version:"DICOM/DICONDE"},"(0014,407E)":{tag:"(0014,407E)",vr:"DA",name:"CalibrationDate",vm:"1-n",version:"DICOM/DICONDE"},"(0014,4080)":{tag:"(0014,4080)",vr:"SQ",name:"ProbeDriveEquipmentSequence",vm:"1",version:"DICOM/DICONDE"},"(0014,4081)":{tag:"(0014,4081)",vr:"CS",name:"DriveType",vm:"1",version:"DICOM/DICONDE"},"(0014,4082)":{tag:"(0014,4082)",vr:"LT",name:"ProbeDriveNotes",vm:"1",version:"DICOM/DICONDE"},"(0014,4083)":{tag:"(0014,4083)",vr:"SQ",name:"DriveProbeSequence",vm:"1",version:"DICOM/DICONDE"},"(0014,4084)":{tag:"(0014,4084)",vr:"DS",name:"ProbeInductance",vm:"1",version:"DICOM/DICONDE"},"(0014,4085)":{tag:"(0014,4085)",vr:"DS",name:"ProbeResistance",vm:"1",version:"DICOM/DICONDE"},"(0014,4086)":{tag:"(0014,4086)",vr:"SQ",name:"ReceiveProbeSequence",vm:"1",version:"DICOM/DICONDE"},"(0014,4087)":{tag:"(0014,4087)",vr:"SQ",name:"ProbeDriveSettingsSequence",vm:"1",version:"DICOM/DICONDE"},"(0014,4088)":{tag:"(0014,4088)",vr:"DS",name:"BridgeResistors",vm:"1",version:"DICOM/DICONDE"},"(0014,4089)":{tag:"(0014,4089)",vr:"DS",name:"ProbeOrientationAngle",vm:"1",version:"DICOM/DICONDE"},"(0014,408B)":{tag:"(0014,408B)",vr:"DS",name:"UserSelectedGainY",vm:"1",version:"DICOM/DICONDE"},"(0014,408C)":{tag:"(0014,408C)",vr:"DS",name:"UserSelectedPhase",vm:"1",version:"DICOM/DICONDE"},"(0014,408D)":{tag:"(0014,408D)",vr:"DS",name:"UserSelectedOffsetX",vm:"1",version:"DICOM/DICONDE"},"(0014,408E)":{tag:"(0014,408E)",vr:"DS",name:"UserSelectedOffsetY",vm:"1",version:"DICOM/DICONDE"},"(0014,4091)":{tag:"(0014,4091)",vr:"SQ",name:"ChannelSettingsSequence",vm:"1",version:"DICOM/DICONDE"},"(0014,4092)":{tag:"(0014,4092)",vr:"DS",name:"ChannelThreshold",vm:"1",version:"DICOM/DICONDE"},"(0014,409A)":{tag:"(0014,409A)",vr:"SQ",name:"ScannerSettingsSequence",vm:"1",version:"DICOM/DICONDE"},"(0014,409B)":{tag:"(0014,409B)",vr:"ST",name:"ScanProcedure",vm:"1",version:"DICOM/DICONDE"},"(0014,409C)":{tag:"(0014,409C)",vr:"DS",name:"TranslationRateX",vm:"1",version:"DICOM/DICONDE"},"(0014,409D)":{tag:"(0014,409D)",vr:"DS",name:"TranslationRateY",vm:"1",version:"DICOM/DICONDE"},"(0014,409F)":{tag:"(0014,409F)",vr:"DS",name:"ChannelOverlap",vm:"1",version:"DICOM/DICONDE"},"(0014,40A0)":{tag:"(0014,40A0)",vr:"LO",name:"ImageQualityIndicatorType",vm:"1",version:"DICOM/DICONDE"},"(0014,40A1)":{tag:"(0014,40A1)",vr:"LO",name:"ImageQualityIndicatorMaterial",vm:"1",version:"DICOM/DICONDE"},"(0014,40A2)":{tag:"(0014,40A2)",vr:"LO",name:"ImageQualityIndicatorSize",vm:"1",version:"DICOM/DICONDE"},"(0014,5002)":{tag:"(0014,5002)",vr:"IS",name:"LINACEnergy",vm:"1",version:"DICOM/DICONDE"},"(0014,5004)":{tag:"(0014,5004)",vr:"IS",name:"LINACOutput",vm:"1",version:"DICOM/DICONDE"},"(0014,5100)":{tag:"(0014,5100)",vr:"US",name:"ActiveAperture",vm:"1",version:"DICOM/DICONDE"},"(0014,5101)":{tag:"(0014,5101)",vr:"DS",name:"TotalAperture",vm:"1",version:"DICOM/DICONDE"},"(0014,5102)":{tag:"(0014,5102)",vr:"DS",name:"ApertureElevation",vm:"1",version:"DICOM/DICONDE"},"(0014,5103)":{tag:"(0014,5103)",vr:"DS",name:"MainLobeAngle",vm:"1",version:"DICOM/DICONDE"},"(0014,5104)":{tag:"(0014,5104)",vr:"DS",name:"MainRoofAngle",vm:"1",version:"DICOM/DICONDE"},"(0014,5105)":{tag:"(0014,5105)",vr:"CS",name:"ConnectorType",vm:"1",version:"DICOM/DICONDE"},"(0014,5106)":{tag:"(0014,5106)",vr:"SH",name:"WedgeModelNumber",vm:"1",version:"DICOM/DICONDE"},"(0014,5107)":{tag:"(0014,5107)",vr:"DS",name:"WedgeAngleFloat",vm:"1",version:"DICOM/DICONDE"},"(0014,5108)":{tag:"(0014,5108)",vr:"DS",name:"WedgeRoofAngle",vm:"1",version:"DICOM/DICONDE"},"(0014,5109)":{tag:"(0014,5109)",vr:"CS",name:"WedgeElement1Position",vm:"1",version:"DICOM/DICONDE"},"(0014,510A)":{tag:"(0014,510A)",vr:"DS",name:"WedgeMaterialVelocity",vm:"1",version:"DICOM/DICONDE"},"(0014,510B)":{tag:"(0014,510B)",vr:"SH",name:"WedgeMaterial",vm:"1",version:"DICOM/DICONDE"},"(0014,510C)":{tag:"(0014,510C)",vr:"DS",name:"WedgeOffsetZ",vm:"1",version:"DICOM/DICONDE"},"(0014,510D)":{tag:"(0014,510D)",vr:"DS",name:"WedgeOriginOffsetX",vm:"1",version:"DICOM/DICONDE"},"(0014,510E)":{tag:"(0014,510E)",vr:"DS",name:"WedgeTimeDelay",vm:"1",version:"DICOM/DICONDE"},"(0014,510F)":{tag:"(0014,510F)",vr:"SH",name:"WedgeName",vm:"1",version:"DICOM/DICONDE"},"(0014,5110)":{tag:"(0014,5110)",vr:"SH",name:"WedgeManufacturerName",vm:"1",version:"DICOM/DICONDE"},"(0014,5111)":{tag:"(0014,5111)",vr:"LO",name:"WedgeDescription",vm:"1",version:"DICOM/DICONDE"},"(0014,5112)":{tag:"(0014,5112)",vr:"DS",name:"NominalBeamAngle",vm:"1",version:"DICOM/DICONDE"},"(0014,5113)":{tag:"(0014,5113)",vr:"DS",name:"WedgeOffsetX",vm:"1",version:"DICOM/DICONDE"},"(0014,5114)":{tag:"(0014,5114)",vr:"DS",name:"WedgeOffsetY",vm:"1",version:"DICOM/DICONDE"},"(0014,5115)":{tag:"(0014,5115)",vr:"DS",name:"WedgeTotalLength",vm:"1",version:"DICOM/DICONDE"},"(0014,5116)":{tag:"(0014,5116)",vr:"DS",name:"WedgeInContactLength",vm:"1",version:"DICOM/DICONDE"},"(0014,5117)":{tag:"(0014,5117)",vr:"DS",name:"WedgeFrontGap",vm:"1",version:"DICOM/DICONDE"},"(0014,5118)":{tag:"(0014,5118)",vr:"DS",name:"WedgeTotalHeight",vm:"1",version:"DICOM/DICONDE"},"(0014,5119)":{tag:"(0014,5119)",vr:"DS",name:"WedgeFrontHeight",vm:"1",version:"DICOM/DICONDE"},"(0014,511A)":{tag:"(0014,511A)",vr:"DS",name:"WedgeRearHeight",vm:"1",version:"DICOM/DICONDE"},"(0014,511B)":{tag:"(0014,511B)",vr:"DS",name:"WedgeTotalWidth",vm:"1",version:"DICOM/DICONDE"},"(0014,511C)":{tag:"(0014,511C)",vr:"DS",name:"WedgeInContactWidth",vm:"1",version:"DICOM/DICONDE"},"(0014,511D)":{tag:"(0014,511D)",vr:"DS",name:"WedgeChamferHeight",vm:"1",version:"DICOM/DICONDE"},"(0014,511E)":{tag:"(0014,511E)",vr:"CS",name:"WedgeCurve",vm:"1",version:"DICOM/DICONDE"},"(0014,511F)":{tag:"(0014,511F)",vr:"DS",name:"RadiusAlongWedge",vm:"1",version:"DICOM/DICONDE"},"(0012,0086)":{tag:"(0012,0086)",vr:"DA",name:"EthicsCommitteeApprovalEffectivenessStartDate",vm:"1",version:"DICOM"},"(0012,0087)":{tag:"(0012,0087)",vr:"DA",name:"EthicsCommitteeApprovalEffectivenessEndDate",vm:"1",version:"DICOM"},"(0014,0100)":{tag:"(0014,0100)",vr:"LO",name:"ComponentWelderIDs",vm:"1-n",version:"DICOM"},"(0014,0101)":{tag:"(0014,0101)",vr:"CS",name:"SecondaryApprovalStatus",vm:"1",version:"DICOM"},"(0014,0102)":{tag:"(0014,0102)",vr:"DA",name:"SecondaryReviewDate",vm:"1",version:"DICOM"},"(0014,0103)":{tag:"(0014,0103)",vr:"TM",name:"SecondaryReviewTime",vm:"1",version:"DICOM"},"(0014,0104)":{tag:"(0014,0104)",vr:"PN",name:"SecondaryReviewerName",vm:"1",version:"DICOM"},"(0014,0105)":{tag:"(0014,0105)",vr:"ST",name:"RepairID",vm:"1",version:"DICOM"},"(0014,0106)":{tag:"(0014,0106)",vr:"SQ",name:"MultipleComponentApprovalSequence",vm:"1",version:"DICOM"},"(0014,0107)":{tag:"(0014,0107)",vr:"CS",name:"OtherApprovalStatus",vm:"1-n",version:"DICOM"},"(0014,0108)":{tag:"(0014,0108)",vr:"CS",name:"OtherSecondaryApprovalStatus",vm:"1-n",version:"DICOM"},"(0014,0200)":{tag:"(0014,0200)",vr:"SQ",name:"DataElementLabelSequence",vm:"1",version:"DICOM"},"(0014,0201)":{tag:"(0014,0201)",vr:"SQ",name:"DataElementLabelItemSequence",vm:"1",version:"DICOM"},"(0014,0202)":{tag:"(0014,0202)",vr:"AT",name:"DataElement",vm:"1",version:"DICOM"},"(0014,0203)":{tag:"(0014,0203)",vr:"LO",name:"DataElementName",vm:"1",version:"DICOM"},"(0014,0204)":{tag:"(0014,0204)",vr:"LO",name:"DataElementDescription",vm:"1",version:"DICOM"},"(0014,0205)":{tag:"(0014,0205)",vr:"CS",name:"DataElementConditionality",vm:"1",version:"DICOM"},"(0014,0206)":{tag:"(0014,0206)",vr:"IS",name:"DataElementMinimumCharacters",vm:"1",version:"DICOM"},"(0014,0207)":{tag:"(0014,0207)",vr:"IS",name:"DataElementMaximumCharacters",vm:"1",version:"DICOM"},"(0014,3100)":{tag:"(0014,3100)",vr:"LT",name:"LinearityCorrectionTechnique",vm:"1",version:"DICOM"},"(0014,3101)":{tag:"(0014,3101)",vr:"LT",name:"BeamHardeningCorrectionTechnique",vm:"1",version:"DICOM"},"(0016,0001)":{tag:"(0016,0001)",vr:"DS",name:"WhitePoint",vm:"1",version:"DICOM"},"(0016,0002)":{tag:"(0016,0002)",vr:"DS",name:"PrimaryChromaticities",vm:"3",version:"DICOM"},"(0016,0003)":{tag:"(0016,0003)",vr:"UT",name:"BatteryLevel",vm:"1",version:"DICOM"},"(0016,0004)":{tag:"(0016,0004)",vr:"DS",name:"ExposureTimeInSeconds",vm:"1",version:"DICOM"},"(0016,0005)":{tag:"(0016,0005)",vr:"DS",name:"FNumber",vm:"1",version:"DICOM"},"(0016,0006)":{tag:"(0016,0006)",vr:"IS",name:"OECFRows",vm:"1",version:"DICOM"},"(0016,0007)":{tag:"(0016,0007)",vr:"IS",name:"OECFColumns",vm:"1",version:"DICOM"},"(0016,0008)":{tag:"(0016,0008)",vr:"UC",name:"OECFColumnNames",vm:"1-n",version:"DICOM"},"(0016,0009)":{tag:"(0016,0009)",vr:"DS",name:"OECFValues",vm:"1-n",version:"DICOM"},"(0016,000A)":{tag:"(0016,000A)",vr:"IS",name:"SpatialFrequencyResponseRows",vm:"1",version:"DICOM"},"(0016,000B)":{tag:"(0016,000B)",vr:"IS",name:"SpatialFrequencyResponseColumns",vm:"1",version:"DICOM"},"(0016,000C)":{tag:"(0016,000C)",vr:"UC",name:"SpatialFrequencyResponseColumnNames",vm:"1-n",version:"DICOM"},"(0016,000D)":{tag:"(0016,000D)",vr:"DS",name:"SpatialFrequencyResponseValues",vm:"1-n",version:"DICOM"},"(0016,000E)":{tag:"(0016,000E)",vr:"IS",name:"ColorFilterArrayPatternRows",vm:"1",version:"DICOM"},"(0016,000F)":{tag:"(0016,000F)",vr:"IS",name:"ColorFilterArrayPatternColumns",vm:"1",version:"DICOM"},"(0016,0010)":{tag:"(0016,0010)",vr:"DS",name:"ColorFilterArrayPatternValues",vm:"1-n",version:"DICOM"},"(0016,0011)":{tag:"(0016,0011)",vr:"US",name:"FlashFiringStatus",vm:"1",version:"DICOM"},"(0016,0012)":{tag:"(0016,0012)",vr:"US",name:"FlashReturnStatus",vm:"1",version:"DICOM"},"(0016,0013)":{tag:"(0016,0013)",vr:"US",name:"FlashMode",vm:"1",version:"DICOM"},"(0016,0014)":{tag:"(0016,0014)",vr:"US",name:"FlashFunctionPresent",vm:"1",version:"DICOM"},"(0016,0015)":{tag:"(0016,0015)",vr:"US",name:"FlashRedEyeMode",vm:"1",version:"DICOM"},"(0016,0016)":{tag:"(0016,0016)",vr:"US",name:"ExposureProgram",vm:"1",version:"DICOM"},"(0016,0017)":{tag:"(0016,0017)",vr:"UT",name:"SpectralSensitivity",vm:"1",version:"DICOM"},"(0016,0018)":{tag:"(0016,0018)",vr:"IS",name:"PhotographicSensitivity",vm:"1",version:"DICOM"},"(0016,0019)":{tag:"(0016,0019)",vr:"IS",name:"SelfTimerMode",vm:"1",version:"DICOM"},"(0016,001A)":{tag:"(0016,001A)",vr:"US",name:"SensitivityType",vm:"1",version:"DICOM"},"(0016,001B)":{tag:"(0016,001B)",vr:"IS",name:"StandardOutputSensitivity",vm:"1",version:"DICOM"},"(0016,001C)":{tag:"(0016,001C)",vr:"IS",name:"RecommendedExposureIndex",vm:"1",version:"DICOM"},"(0016,001D)":{tag:"(0016,001D)",vr:"IS",name:"ISOSpeed",vm:"1",version:"DICOM"},"(0016,001E)":{tag:"(0016,001E)",vr:"IS",name:"ISOSpeedLatitudeyyy",vm:"1",version:"DICOM"},"(0016,001F)":{tag:"(0016,001F)",vr:"IS",name:"ISOSpeedLatitudezzz",vm:"1",version:"DICOM"},"(0016,0020)":{tag:"(0016,0020)",vr:"UT",name:"EXIFVersion",vm:"1",version:"DICOM"},"(0016,0021)":{tag:"(0016,0021)",vr:"DS",name:"ShutterSpeedValue",vm:"1",version:"DICOM"},"(0016,0022)":{tag:"(0016,0022)",vr:"DS",name:"ApertureValue",vm:"1",version:"DICOM"},"(0016,0023)":{tag:"(0016,0023)",vr:"DS",name:"BrightnessValue",vm:"1",version:"DICOM"},"(0016,0024)":{tag:"(0016,0024)",vr:"DS",name:"ExposureBiasValue",vm:"1",version:"DICOM"},"(0016,0025)":{tag:"(0016,0025)",vr:"DS",name:"MaxApertureValue",vm:"1",version:"DICOM"},"(0016,0026)":{tag:"(0016,0026)",vr:"DS",name:"SubjectDistance",vm:"1",version:"DICOM"},"(0016,0027)":{tag:"(0016,0027)",vr:"US",name:"MeteringMode",vm:"1",version:"DICOM"},"(0016,0028)":{tag:"(0016,0028)",vr:"US",name:"LightSource",vm:"1",version:"DICOM"},"(0016,0029)":{tag:"(0016,0029)",vr:"DS",name:"FocalLength",vm:"1",version:"DICOM"},"(0016,002A)":{tag:"(0016,002A)",vr:"IS",name:"SubjectArea",vm:"2-4",version:"DICOM"},"(0016,002B)":{tag:"(0016,002B)",vr:"OB",name:"MakerNote",vm:"1",version:"DICOM"},"(0016,0030)":{tag:"(0016,0030)",vr:"DS",name:"Temperature",vm:"1",version:"DICOM"},"(0016,0031)":{tag:"(0016,0031)",vr:"DS",name:"Humidity",vm:"1",version:"DICOM"},"(0016,0032)":{tag:"(0016,0032)",vr:"DS",name:"Pressure",vm:"1",version:"DICOM"},"(0016,0033)":{tag:"(0016,0033)",vr:"DS",name:"WaterDepth",vm:"1",version:"DICOM"},"(0016,0034)":{tag:"(0016,0034)",vr:"DS",name:"Acceleration",vm:"1",version:"DICOM"},"(0016,0035)":{tag:"(0016,0035)",vr:"DS",name:"CameraElevationAngle",vm:"1",version:"DICOM"},"(0016,0036)":{tag:"(0016,0036)",vr:"DS",name:"FlashEnergy",vm:"1-2",version:"DICOM"},"(0016,0037)":{tag:"(0016,0037)",vr:"IS",name:"SubjectLocation",vm:"2",version:"DICOM"},"(0016,0038)":{tag:"(0016,0038)",vr:"DS",name:"PhotographicExposureIndex",vm:"1",version:"DICOM"},"(0016,0039)":{tag:"(0016,0039)",vr:"US",name:"SensingMethod",vm:"1",version:"DICOM"},"(0016,003A)":{tag:"(0016,003A)",vr:"US",name:"FileSource",vm:"1",version:"DICOM"},"(0016,003B)":{tag:"(0016,003B)",vr:"US",name:"SceneType",vm:"1",version:"DICOM"},"(0016,0041)":{tag:"(0016,0041)",vr:"US",name:"CustomRendered",vm:"1",version:"DICOM"},"(0016,0042)":{tag:"(0016,0042)",vr:"US",name:"ExposureMode",vm:"1",version:"DICOM"},"(0016,0043)":{tag:"(0016,0043)",vr:"US",name:"WhiteBalance",vm:"1",version:"DICOM"},"(0016,0044)":{tag:"(0016,0044)",vr:"DS",name:"DigitalZoomRatio",vm:"1",version:"DICOM"},"(0016,0045)":{tag:"(0016,0045)",vr:"IS",name:"FocalLengthIn35mmFilm",vm:"1",version:"DICOM"},"(0016,0046)":{tag:"(0016,0046)",vr:"US",name:"SceneCaptureType",vm:"1",version:"DICOM"},"(0016,0047)":{tag:"(0016,0047)",vr:"US",name:"GainControl",vm:"1",version:"DICOM"},"(0016,0048)":{tag:"(0016,0048)",vr:"US",name:"Contrast",vm:"1",version:"DICOM"},"(0016,0049)":{tag:"(0016,0049)",vr:"US",name:"Saturation",vm:"1",version:"DICOM"},"(0016,004A)":{tag:"(0016,004A)",vr:"US",name:"Sharpness",vm:"1",version:"DICOM"},"(0016,004B)":{tag:"(0016,004B)",vr:"OB",name:"DeviceSettingDescription",vm:"1",version:"DICOM"},"(0016,004C)":{tag:"(0016,004C)",vr:"US",name:"SubjectDistanceRange",vm:"1",version:"DICOM"},"(0016,004D)":{tag:"(0016,004D)",vr:"UT",name:"CameraOwnerName",vm:"1",version:"DICOM"},"(0016,004E)":{tag:"(0016,004E)",vr:"DS",name:"LensSpecification",vm:"4",version:"DICOM"},"(0016,004F)":{tag:"(0016,004F)",vr:"UT",name:"LensMake",vm:"1",version:"DICOM"},"(0016,0050)":{tag:"(0016,0050)",vr:"UT",name:"LensModel",vm:"1",version:"DICOM"},"(0016,0051)":{tag:"(0016,0051)",vr:"UT",name:"LensSerialNumber",vm:"1",version:"DICOM"},"(0016,0061)":{tag:"(0016,0061)",vr:"CS",name:"InteroperabilityIndex",vm:"1",version:"DICOM"},"(0016,0062)":{tag:"(0016,0062)",vr:"OB",name:"InteroperabilityVersion",vm:"1",version:"DICOM"},"(0016,0070)":{tag:"(0016,0070)",vr:"OB",name:"GPSVersionID",vm:"1",version:"DICOM"},"(0016,0071)":{tag:"(0016,0071)",vr:"CS",name:"GPSLatitudeRef",vm:"1",version:"DICOM"},"(0016,0072)":{tag:"(0016,0072)",vr:"DS",name:"GPSLatitude",vm:"3",version:"DICOM"},"(0016,0073)":{tag:"(0016,0073)",vr:"CS",name:"GPSLongitudeRef",vm:"1",version:"DICOM"},"(0016,0074)":{tag:"(0016,0074)",vr:"DS",name:"GPSLongitude",vm:"3",version:"DICOM"},"(0016,0075)":{tag:"(0016,0075)",vr:"US",name:"GPSAltitudeRef",vm:"1",version:"DICOM"},"(0016,0076)":{tag:"(0016,0076)",vr:"DS",name:"GPSAltitude",vm:"1",version:"DICOM"},"(0016,0077)":{tag:"(0016,0077)",vr:"DT",name:"GPSTimeStamp",vm:"1",version:"DICOM"},"(0016,0078)":{tag:"(0016,0078)",vr:"UT",name:"GPSSatellites",vm:"1",version:"DICOM"},"(0016,0079)":{tag:"(0016,0079)",vr:"CS",name:"GPSStatus",vm:"1",version:"DICOM"},"(0016,007A)":{tag:"(0016,007A)",vr:"CS",name:"GPSMeasureMode",vm:"1",version:"DICOM"},"(0016,007B)":{tag:"(0016,007B)",vr:"DS",name:"GPSDOP",vm:"1",version:"DICOM"},"(0016,007C)":{tag:"(0016,007C)",vr:"CS",name:"GPSSpeedRef",vm:"1",version:"DICOM"},"(0016,007D)":{tag:"(0016,007D)",vr:"DS",name:"GPSSpeed",vm:"1",version:"DICOM"},"(0016,007E)":{tag:"(0016,007E)",vr:"CS",name:"GPSTrackRef",vm:"1",version:"DICOM"},"(0016,007F)":{tag:"(0016,007F)",vr:"DS",name:"GPSTrack",vm:"1",version:"DICOM"},"(0016,0080)":{tag:"(0016,0080)",vr:"CS",name:"GPSImgDirectionRef",vm:"1",version:"DICOM"},"(0016,0081)":{tag:"(0016,0081)",vr:"DS",name:"GPSImgDirection",vm:"1",version:"DICOM"},"(0016,0082)":{tag:"(0016,0082)",vr:"UT",name:"GPSMapDatum",vm:"1",version:"DICOM"},"(0016,0083)":{tag:"(0016,0083)",vr:"CS",name:"GPSDestLatitudeRef",vm:"1",version:"DICOM"},"(0016,0084)":{tag:"(0016,0084)",vr:"DS",name:"GPSDestLatitude",vm:"3",version:"DICOM"},"(0016,0085)":{tag:"(0016,0085)",vr:"CS",name:"GPSDestLongitudeRef",vm:"1",version:"DICOM"},"(0016,0086)":{tag:"(0016,0086)",vr:"DS",name:"GPSDestLongitude",vm:"3",version:"DICOM"},"(0016,0087)":{tag:"(0016,0087)",vr:"CS",name:"GPSDestBearingRef",vm:"1",version:"DICOM"},"(0016,0088)":{tag:"(0016,0088)",vr:"DS",name:"GPSDestBearing",vm:"1",version:"DICOM"},"(0016,0089)":{tag:"(0016,0089)",vr:"CS",name:"GPSDestDistanceRef",vm:"1",version:"DICOM"},"(0016,008A)":{tag:"(0016,008A)",vr:"DS",name:"GPSDestDistance",vm:"1",version:"DICOM"},"(0016,008B)":{tag:"(0016,008B)",vr:"OB",name:"GPSProcessingMethod",vm:"1",version:"DICOM"},"(0016,008C)":{tag:"(0016,008C)",vr:"OB",name:"GPSAreaInformation",vm:"1",version:"DICOM"},"(0016,008D)":{tag:"(0016,008D)",vr:"DT",name:"GPSDateStamp",vm:"1",version:"DICOM"},"(0016,008E)":{tag:"(0016,008E)",vr:"IS",name:"GPSDifferential",vm:"1",version:"DICOM"},"(0016,1001)":{tag:"(0016,1001)",vr:"CS",name:"LightSourcePolarization",vm:"1",version:"DICOM"},"(0016,1002)":{tag:"(0016,1002)",vr:"DS",name:"EmitterColorTemperature",vm:"1",version:"DICOM"},"(0016,1003)":{tag:"(0016,1003)",vr:"CS",name:"ContactMethod",vm:"1",version:"DICOM"},"(0016,1004)":{tag:"(0016,1004)",vr:"CS",name:"ImmersionMedia",vm:"1-n",version:"DICOM"},"(0016,1005)":{tag:"(0016,1005)",vr:"DS",name:"OpticalMagnificationFactor",vm:"1",version:"DICOM"},"(0018,0010)":{tag:"(0018,0010)",vr:"LO",name:"ContrastBolusAgent",vm:"1",version:"DICOM"},"(0018,0012)":{tag:"(0018,0012)",vr:"SQ",name:"ContrastBolusAgentSequence",vm:"1",version:"DICOM"},"(0018,0013)":{tag:"(0018,0013)",vr:"FL",name:"ContrastBolusT1Relaxivity",vm:"1",version:"DICOM"},"(0018,0014)":{tag:"(0018,0014)",vr:"SQ",name:"ContrastBolusAdministrationRouteSequence",vm:"1",version:"DICOM"},"(0018,0015)":{tag:"(0018,0015)",vr:"CS",name:"BodyPartExamined",vm:"1",version:"DICOM"},"(0018,0020)":{tag:"(0018,0020)",vr:"CS",name:"ScanningSequence",vm:"1-n",version:"DICOM"},"(0018,0021)":{tag:"(0018,0021)",vr:"CS",name:"SequenceVariant",vm:"1-n",version:"DICOM"},"(0018,0022)":{tag:"(0018,0022)",vr:"CS",name:"ScanOptions",vm:"1-n",version:"DICOM"},"(0018,0023)":{tag:"(0018,0023)",vr:"CS",name:"MRAcquisitionType",vm:"1",version:"DICOM"},"(0018,0024)":{tag:"(0018,0024)",vr:"SH",name:"SequenceName",vm:"1",version:"DICOM"},"(0018,0025)":{tag:"(0018,0025)",vr:"CS",name:"AngioFlag",vm:"1",version:"DICOM"},"(0018,0026)":{tag:"(0018,0026)",vr:"SQ",name:"InterventionDrugInformationSequence",vm:"1",version:"DICOM"},"(0018,0027)":{tag:"(0018,0027)",vr:"TM",name:"InterventionDrugStopTime",vm:"1",version:"DICOM"},"(0018,0028)":{tag:"(0018,0028)",vr:"DS",name:"InterventionDrugDose",vm:"1",version:"DICOM"},"(0018,0029)":{tag:"(0018,0029)",vr:"SQ",name:"InterventionDrugCodeSequence",vm:"1",version:"DICOM"},"(0018,002A)":{tag:"(0018,002A)",vr:"SQ",name:"AdditionalDrugSequence",vm:"1",version:"DICOM"},"(0018,0031)":{tag:"(0018,0031)",vr:"LO",name:"Radiopharmaceutical",vm:"1",version:"DICOM"},"(0018,0034)":{tag:"(0018,0034)",vr:"LO",name:"InterventionDrugName",vm:"1",version:"DICOM"},"(0018,0035)":{tag:"(0018,0035)",vr:"TM",name:"InterventionDrugStartTime",vm:"1",version:"DICOM"},"(0018,0036)":{tag:"(0018,0036)",vr:"SQ",name:"InterventionSequence",vm:"1",version:"DICOM"},"(0018,0038)":{tag:"(0018,0038)",vr:"CS",name:"InterventionStatus",vm:"1",version:"DICOM"},"(0018,003A)":{tag:"(0018,003A)",vr:"ST",name:"InterventionDescription",vm:"1",version:"DICOM"},"(0018,0040)":{tag:"(0018,0040)",vr:"IS",name:"CineRate",vm:"1",version:"DICOM"},"(0018,0042)":{tag:"(0018,0042)",vr:"CS",name:"InitialCineRunState",vm:"1",version:"DICOM"},"(0018,0050)":{tag:"(0018,0050)",vr:"DS",name:"SliceThickness",vm:"1",version:"DICOM"},"(0018,0060)":{tag:"(0018,0060)",vr:"DS",name:"KVP",vm:"1",version:"DICOM"},"(0018,0070)":{tag:"(0018,0070)",vr:"IS",name:"CountsAccumulated",vm:"1",version:"DICOM"},"(0018,0071)":{tag:"(0018,0071)",vr:"CS",name:"AcquisitionTerminationCondition",vm:"1",version:"DICOM"},"(0018,0072)":{tag:"(0018,0072)",vr:"DS",name:"EffectiveDuration",vm:"1",version:"DICOM"},"(0018,0073)":{tag:"(0018,0073)",vr:"CS",name:"AcquisitionStartCondition",vm:"1",version:"DICOM"},"(0018,0074)":{tag:"(0018,0074)",vr:"IS",name:"AcquisitionStartConditionData",vm:"1",version:"DICOM"},"(0018,0075)":{tag:"(0018,0075)",vr:"IS",name:"AcquisitionTerminationConditionData",vm:"1",version:"DICOM"},"(0018,0080)":{tag:"(0018,0080)",vr:"DS",name:"RepetitionTime",vm:"1",version:"DICOM"},"(0018,0081)":{tag:"(0018,0081)",vr:"DS",name:"EchoTime",vm:"1",version:"DICOM"},"(0018,0082)":{tag:"(0018,0082)",vr:"DS",name:"InversionTime",vm:"1",version:"DICOM"},"(0018,0083)":{tag:"(0018,0083)",vr:"DS",name:"NumberOfAverages",vm:"1",version:"DICOM"},"(0018,0084)":{tag:"(0018,0084)",vr:"DS",name:"ImagingFrequency",vm:"1",version:"DICOM"},"(0018,0085)":{tag:"(0018,0085)",vr:"SH",name:"ImagedNucleus",vm:"1",version:"DICOM"},"(0018,0086)":{tag:"(0018,0086)",vr:"IS",name:"EchoNumbers",vm:"1-n",version:"DICOM"},"(0018,0087)":{tag:"(0018,0087)",vr:"DS",name:"MagneticFieldStrength",vm:"1",version:"DICOM"},"(0018,0088)":{tag:"(0018,0088)",vr:"DS",name:"SpacingBetweenSlices",vm:"1",version:"DICOM"},"(0018,0089)":{tag:"(0018,0089)",vr:"IS",name:"NumberOfPhaseEncodingSteps",vm:"1",version:"DICOM"},"(0018,0090)":{tag:"(0018,0090)",vr:"DS",name:"DataCollectionDiameter",vm:"1",version:"DICOM"},"(0018,0091)":{tag:"(0018,0091)",vr:"IS",name:"EchoTrainLength",vm:"1",version:"DICOM"},"(0018,0093)":{tag:"(0018,0093)",vr:"DS",name:"PercentSampling",vm:"1",version:"DICOM"},"(0018,0094)":{tag:"(0018,0094)",vr:"DS",name:"PercentPhaseFieldOfView",vm:"1",version:"DICOM"},"(0018,0095)":{tag:"(0018,0095)",vr:"DS",name:"PixelBandwidth",vm:"1",version:"DICOM"},"(0018,1000)":{tag:"(0018,1000)",vr:"LO",name:"DeviceSerialNumber",vm:"1",version:"DICOM"},"(0018,1002)":{tag:"(0018,1002)",vr:"UI",name:"DeviceUID",vm:"1",version:"DICOM"},"(0018,1003)":{tag:"(0018,1003)",vr:"LO",name:"DeviceID",vm:"1",version:"DICOM"},"(0018,1004)":{tag:"(0018,1004)",vr:"LO",name:"PlateID",vm:"1",version:"DICOM"},"(0018,1005)":{tag:"(0018,1005)",vr:"LO",name:"GeneratorID",vm:"1",version:"DICOM"},"(0018,1006)":{tag:"(0018,1006)",vr:"LO",name:"GridID",vm:"1",version:"DICOM"},"(0018,1007)":{tag:"(0018,1007)",vr:"LO",name:"CassetteID",vm:"1",version:"DICOM"},"(0018,1008)":{tag:"(0018,1008)",vr:"LO",name:"GantryID",vm:"1",version:"DICOM"},"(0018,1009)":{tag:"(0018,1009)",vr:"UT",name:"UniqueDeviceIdentifier",vm:"1",version:"DICOM"},"(0018,100A)":{tag:"(0018,100A)",vr:"SQ",name:"UDISequence",vm:"1",version:"DICOM"},"(0018,100B)":{tag:"(0018,100B)",vr:"UI",name:"ManufacturerDeviceClassUID",vm:"1-n",version:"DICOM"},"(0018,1010)":{tag:"(0018,1010)",vr:"LO",name:"SecondaryCaptureDeviceID",vm:"1",version:"DICOM"},"(0018,1012)":{tag:"(0018,1012)",vr:"DA",name:"DateOfSecondaryCapture",vm:"1",version:"DICOM"},"(0018,1014)":{tag:"(0018,1014)",vr:"TM",name:"TimeOfSecondaryCapture",vm:"1",version:"DICOM"},"(0018,1016)":{tag:"(0018,1016)",vr:"LO",name:"SecondaryCaptureDeviceManufacturer",vm:"1",version:"DICOM"},"(0018,1018)":{tag:"(0018,1018)",vr:"LO",name:"SecondaryCaptureDeviceManufacturerModelName",vm:"1",version:"DICOM"},"(0018,1019)":{tag:"(0018,1019)",vr:"LO",name:"SecondaryCaptureDeviceSoftwareVersions",vm:"1-n",version:"DICOM"},"(0018,1020)":{tag:"(0018,1020)",vr:"LO",name:"SoftwareVersions",vm:"1-n",version:"DICOM"},"(0018,1022)":{tag:"(0018,1022)",vr:"SH",name:"VideoImageFormatAcquired",vm:"1",version:"DICOM"},"(0018,1023)":{tag:"(0018,1023)",vr:"LO",name:"DigitalImageFormatAcquired",vm:"1",version:"DICOM"},"(0018,1030)":{tag:"(0018,1030)",vr:"LO",name:"ProtocolName",vm:"1",version:"DICOM"},"(0018,1040)":{tag:"(0018,1040)",vr:"LO",name:"ContrastBolusRoute",vm:"1",version:"DICOM"},"(0018,1041)":{tag:"(0018,1041)",vr:"DS",name:"ContrastBolusVolume",vm:"1",version:"DICOM"},"(0018,1042)":{tag:"(0018,1042)",vr:"TM",name:"ContrastBolusStartTime",vm:"1",version:"DICOM"},"(0018,1043)":{tag:"(0018,1043)",vr:"TM",name:"ContrastBolusStopTime",vm:"1",version:"DICOM"},"(0018,1044)":{tag:"(0018,1044)",vr:"DS",name:"ContrastBolusTotalDose",vm:"1",version:"DICOM"},"(0018,1045)":{tag:"(0018,1045)",vr:"IS",name:"SyringeCounts",vm:"1",version:"DICOM"},"(0018,1046)":{tag:"(0018,1046)",vr:"DS",name:"ContrastFlowRate",vm:"1-n",version:"DICOM"},"(0018,1047)":{tag:"(0018,1047)",vr:"DS",name:"ContrastFlowDuration",vm:"1-n",version:"DICOM"},"(0018,1048)":{tag:"(0018,1048)",vr:"CS",name:"ContrastBolusIngredient",vm:"1",version:"DICOM"},"(0018,1049)":{tag:"(0018,1049)",vr:"DS",name:"ContrastBolusIngredientConcentration",vm:"1",version:"DICOM"},"(0018,1050)":{tag:"(0018,1050)",vr:"DS",name:"SpatialResolution",vm:"1",version:"DICOM"},"(0018,1060)":{tag:"(0018,1060)",vr:"DS",name:"TriggerTime",vm:"1",version:"DICOM"},"(0018,1061)":{tag:"(0018,1061)",vr:"LO",name:"TriggerSourceOrType",vm:"1",version:"DICOM"},"(0018,1062)":{tag:"(0018,1062)",vr:"IS",name:"NominalInterval",vm:"1",version:"DICOM"},"(0018,1063)":{tag:"(0018,1063)",vr:"DS",name:"FrameTime",vm:"1",version:"DICOM"},"(0018,1064)":{tag:"(0018,1064)",vr:"LO",name:"CardiacFramingType",vm:"1",version:"DICOM"},"(0018,1065)":{tag:"(0018,1065)",vr:"DS",name:"FrameTimeVector",vm:"1-n",version:"DICOM"},"(0018,1066)":{tag:"(0018,1066)",vr:"DS",name:"FrameDelay",vm:"1",version:"DICOM"},"(0018,1067)":{tag:"(0018,1067)",vr:"DS",name:"ImageTriggerDelay",vm:"1",version:"DICOM"},"(0018,1068)":{tag:"(0018,1068)",vr:"DS",name:"MultiplexGroupTimeOffset",vm:"1",version:"DICOM"},"(0018,1069)":{tag:"(0018,1069)",vr:"DS",name:"TriggerTimeOffset",vm:"1",version:"DICOM"},"(0018,106A)":{tag:"(0018,106A)",vr:"CS",name:"SynchronizationTrigger",vm:"1",version:"DICOM"},"(0018,106C)":{tag:"(0018,106C)",vr:"US",name:"SynchronizationChannel",vm:"2",version:"DICOM"},"(0018,106E)":{tag:"(0018,106E)",vr:"UL",name:"TriggerSamplePosition",vm:"1",version:"DICOM"},"(0018,1070)":{tag:"(0018,1070)",vr:"LO",name:"RadiopharmaceuticalRoute",vm:"1",version:"DICOM"},"(0018,1071)":{tag:"(0018,1071)",vr:"DS",name:"RadiopharmaceuticalVolume",vm:"1",version:"DICOM"},"(0018,1072)":{tag:"(0018,1072)",vr:"TM",name:"RadiopharmaceuticalStartTime",vm:"1",version:"DICOM"},"(0018,1073)":{tag:"(0018,1073)",vr:"TM",name:"RadiopharmaceuticalStopTime",vm:"1",version:"DICOM"},"(0018,1074)":{tag:"(0018,1074)",vr:"DS",name:"RadionuclideTotalDose",vm:"1",version:"DICOM"},"(0018,1075)":{tag:"(0018,1075)",vr:"DS",name:"RadionuclideHalfLife",vm:"1",version:"DICOM"},"(0018,1076)":{tag:"(0018,1076)",vr:"DS",name:"RadionuclidePositronFraction",vm:"1",version:"DICOM"},"(0018,1077)":{tag:"(0018,1077)",vr:"DS",name:"RadiopharmaceuticalSpecificActivity",vm:"1",version:"DICOM"},"(0018,1078)":{tag:"(0018,1078)",vr:"DT",name:"RadiopharmaceuticalStartDateTime",vm:"1",version:"DICOM"},"(0018,1079)":{tag:"(0018,1079)",vr:"DT",name:"RadiopharmaceuticalStopDateTime",vm:"1",version:"DICOM"},"(0018,1080)":{tag:"(0018,1080)",vr:"CS",name:"BeatRejectionFlag",vm:"1",version:"DICOM"},"(0018,1081)":{tag:"(0018,1081)",vr:"IS",name:"LowRRValue",vm:"1",version:"DICOM"},"(0018,1082)":{tag:"(0018,1082)",vr:"IS",name:"HighRRValue",vm:"1",version:"DICOM"},"(0018,1083)":{tag:"(0018,1083)",vr:"IS",name:"IntervalsAcquired",vm:"1",version:"DICOM"},"(0018,1084)":{tag:"(0018,1084)",vr:"IS",name:"IntervalsRejected",vm:"1",version:"DICOM"},"(0018,1085)":{tag:"(0018,1085)",vr:"LO",name:"PVCRejection",vm:"1",version:"DICOM"},"(0018,1086)":{tag:"(0018,1086)",vr:"IS",name:"SkipBeats",vm:"1",version:"DICOM"},"(0018,1088)":{tag:"(0018,1088)",vr:"IS",name:"HeartRate",vm:"1",version:"DICOM"},"(0018,1090)":{tag:"(0018,1090)",vr:"IS",name:"CardiacNumberOfImages",vm:"1",version:"DICOM"},"(0018,1094)":{tag:"(0018,1094)",vr:"IS",name:"TriggerWindow",vm:"1",version:"DICOM"},"(0018,1100)":{tag:"(0018,1100)",vr:"DS",name:"ReconstructionDiameter",vm:"1",version:"DICOM"},"(0018,1110)":{tag:"(0018,1110)",vr:"DS",name:"DistanceSourceToDetector",vm:"1",version:"DICOM"},"(0018,1111)":{tag:"(0018,1111)",vr:"DS",name:"DistanceSourceToPatient",vm:"1",version:"DICOM"},"(0018,1114)":{tag:"(0018,1114)",vr:"DS",name:"EstimatedRadiographicMagnificationFactor",vm:"1",version:"DICOM"},"(0018,1120)":{tag:"(0018,1120)",vr:"DS",name:"GantryDetectorTilt",vm:"1",version:"DICOM"},"(0018,1121)":{tag:"(0018,1121)",vr:"DS",name:"GantryDetectorSlew",vm:"1",version:"DICOM"},"(0018,1130)":{tag:"(0018,1130)",vr:"DS",name:"TableHeight",vm:"1",version:"DICOM"},"(0018,1131)":{tag:"(0018,1131)",vr:"DS",name:"TableTraverse",vm:"1",version:"DICOM"},"(0018,1134)":{tag:"(0018,1134)",vr:"CS",name:"TableMotion",vm:"1",version:"DICOM"},"(0018,1135)":{tag:"(0018,1135)",vr:"DS",name:"TableVerticalIncrement",vm:"1-n",version:"DICOM"},"(0018,1136)":{tag:"(0018,1136)",vr:"DS",name:"TableLateralIncrement",vm:"1-n",version:"DICOM"},"(0018,1137)":{tag:"(0018,1137)",vr:"DS",name:"TableLongitudinalIncrement",vm:"1-n",version:"DICOM"},"(0018,1138)":{tag:"(0018,1138)",vr:"DS",name:"TableAngle",vm:"1",version:"DICOM"},"(0018,113A)":{tag:"(0018,113A)",vr:"CS",name:"TableType",vm:"1",version:"DICOM"},"(0018,1140)":{tag:"(0018,1140)",vr:"CS",name:"RotationDirection",vm:"1",version:"DICOM"},"(0018,1142)":{tag:"(0018,1142)",vr:"DS",name:"RadialPosition",vm:"1-n",version:"DICOM"},"(0018,1143)":{tag:"(0018,1143)",vr:"DS",name:"ScanArc",vm:"1",version:"DICOM"},"(0018,1144)":{tag:"(0018,1144)",vr:"DS",name:"AngularStep",vm:"1",version:"DICOM"},"(0018,1145)":{tag:"(0018,1145)",vr:"DS",name:"CenterOfRotationOffset",vm:"1",version:"DICOM"},"(0018,1147)":{tag:"(0018,1147)",vr:"CS",name:"FieldOfViewShape",vm:"1",version:"DICOM"},"(0018,1149)":{tag:"(0018,1149)",vr:"IS",name:"FieldOfViewDimensions",vm:"1-2",version:"DICOM"},"(0018,1150)":{tag:"(0018,1150)",vr:"IS",name:"ExposureTime",vm:"1",version:"DICOM"},"(0018,1151)":{tag:"(0018,1151)",vr:"IS",name:"XRayTubeCurrent",vm:"1",version:"DICOM"},"(0018,1152)":{tag:"(0018,1152)",vr:"IS",name:"Exposure",vm:"1",version:"DICOM"},"(0018,1153)":{tag:"(0018,1153)",vr:"IS",name:"ExposureInuAs",vm:"1",version:"DICOM"},"(0018,1154)":{tag:"(0018,1154)",vr:"DS",name:"AveragePulseWidth",vm:"1",version:"DICOM"},"(0018,1155)":{tag:"(0018,1155)",vr:"CS",name:"RadiationSetting",vm:"1",version:"DICOM"},"(0018,1156)":{tag:"(0018,1156)",vr:"CS",name:"RectificationType",vm:"1",version:"DICOM"},"(0018,115A)":{tag:"(0018,115A)",vr:"CS",name:"RadiationMode",vm:"1",version:"DICOM"},"(0018,115E)":{tag:"(0018,115E)",vr:"DS",name:"ImageAndFluoroscopyAreaDoseProduct",vm:"1",version:"DICOM"},"(0018,1160)":{tag:"(0018,1160)",vr:"SH",name:"FilterType",vm:"1",version:"DICOM"},"(0018,1161)":{tag:"(0018,1161)",vr:"LO",name:"TypeOfFilters",vm:"1-n",version:"DICOM"},"(0018,1162)":{tag:"(0018,1162)",vr:"DS",name:"IntensifierSize",vm:"1",version:"DICOM"},"(0018,1164)":{tag:"(0018,1164)",vr:"DS",name:"ImagerPixelSpacing",vm:"2",version:"DICOM"},"(0018,1166)":{tag:"(0018,1166)",vr:"CS",name:"Grid",vm:"1-n",version:"DICOM"},"(0018,1170)":{tag:"(0018,1170)",vr:"IS",name:"GeneratorPower",vm:"1",version:"DICOM"},"(0018,1180)":{tag:"(0018,1180)",vr:"SH",name:"CollimatorGridName",vm:"1",version:"DICOM"},"(0018,1181)":{tag:"(0018,1181)",vr:"CS",name:"CollimatorType",vm:"1",version:"DICOM"},"(0018,1182)":{tag:"(0018,1182)",vr:"IS",name:"FocalDistance",vm:"1-2",version:"DICOM"},"(0018,1183)":{tag:"(0018,1183)",vr:"DS",name:"XFocusCenter",vm:"1-2",version:"DICOM"},"(0018,1184)":{tag:"(0018,1184)",vr:"DS",name:"YFocusCenter",vm:"1-2",version:"DICOM"},"(0018,1190)":{tag:"(0018,1190)",vr:"DS",name:"FocalSpots",vm:"1-n",version:"DICOM"},"(0018,1191)":{tag:"(0018,1191)",vr:"CS",name:"AnodeTargetMaterial",vm:"1",version:"DICOM"},"(0018,11A0)":{tag:"(0018,11A0)",vr:"DS",name:"BodyPartThickness",vm:"1",version:"DICOM"},"(0018,11A2)":{tag:"(0018,11A2)",vr:"DS",name:"CompressionForce",vm:"1",version:"DICOM"},"(0018,11A3)":{tag:"(0018,11A3)",vr:"DS",name:"CompressionPressure",vm:"1",version:"DICOM"},"(0018,11A4)":{tag:"(0018,11A4)",vr:"LO",name:"PaddleDescription",vm:"1",version:"DICOM"},"(0018,11A5)":{tag:"(0018,11A5)",vr:"DS",name:"CompressionContactArea",vm:"1",version:"DICOM"},"(0018,11B0)":{tag:"(0018,11B0)",vr:"LO",name:"AcquisitionMode",vm:"1",version:"DICOM"},"(0018,11B1)":{tag:"(0018,11B1)",vr:"LO",name:"DoseModeName",vm:"1",version:"DICOM"},"(0018,11B2)":{tag:"(0018,11B2)",vr:"CS",name:"AcquiredSubtractionMaskFlag",vm:"1",version:"DICOM"},"(0018,11B3)":{tag:"(0018,11B3)",vr:"CS",name:"FluoroscopyPersistenceFlag",vm:"1",version:"DICOM"},"(0018,11B4)":{tag:"(0018,11B4)",vr:"CS",name:"FluoroscopyLastImageHoldPersistenceFlag",vm:"1",version:"DICOM"},"(0018,11B5)":{tag:"(0018,11B5)",vr:"IS",name:"UpperLimitNumberOfPersistentFluoroscopyFrames",vm:"1",version:"DICOM"},"(0018,11B6)":{tag:"(0018,11B6)",vr:"CS",name:"ContrastBolusAutoInjectionTriggerFlag",vm:"1",version:"DICOM"},"(0018,11B7)":{tag:"(0018,11B7)",vr:"FD",name:"ContrastBolusInjectionDelay",vm:"1",version:"DICOM"},"(0018,11B8)":{tag:"(0018,11B8)",vr:"SQ",name:"XAAcquisitionPhaseDetailsSequence",vm:"1",version:"DICOM"},"(0018,11B9)":{tag:"(0018,11B9)",vr:"FD",name:"XAAcquisitionFrameRate",vm:"1",version:"DICOM"},"(0018,11BA)":{tag:"(0018,11BA)",vr:"SQ",name:"XAPlaneDetailsSequence",vm:"1",version:"DICOM"},"(0018,11BB)":{tag:"(0018,11BB)",vr:"LO",name:"AcquisitionFieldOfViewLabel",vm:"1",version:"DICOM"},"(0018,11BC)":{tag:"(0018,11BC)",vr:"SQ",name:"XRayFilterDetailsSequence",vm:"1",version:"DICOM"},"(0018,11BD)":{tag:"(0018,11BD)",vr:"FD",name:"XAAcquisitionDuration",vm:"1",version:"DICOM"},"(0018,11BE)":{tag:"(0018,11BE)",vr:"CS",name:"ReconstructionPipelineType",vm:"1",version:"DICOM"},"(0018,11BF)":{tag:"(0018,11BF)",vr:"SQ",name:"ImageFilterDetailsSequence",vm:"1",version:"DICOM"},"(0018,11C0)":{tag:"(0018,11C0)",vr:"CS",name:"AppliedMaskSubtractionFlag",vm:"1",version:"DICOM"},"(0018,11C1)":{tag:"(0018,11C1)",vr:"SQ",name:"RequestedSeriesDescriptionCodeSequence",vm:"1",version:"DICOM"},"(0018,1200)":{tag:"(0018,1200)",vr:"DA",name:"DateOfLastCalibration",vm:"1-n",version:"DICOM"},"(0018,1201)":{tag:"(0018,1201)",vr:"TM",name:"TimeOfLastCalibration",vm:"1-n",version:"DICOM"},"(0018,1202)":{tag:"(0018,1202)",vr:"DT",name:"DateTimeOfLastCalibration",vm:"1",version:"DICOM"},"(0018,1203)":{tag:"(0018,1203)",vr:"DT",name:"CalibrationDateTime",vm:"1",version:"DICOM"},"(0018,1204)":{tag:"(0018,1204)",vr:"DA",name:"DateOfManufacture",vm:"1",version:"DICOM"},"(0018,1205)":{tag:"(0018,1205)",vr:"DA",name:"DateOfInstallation",vm:"1",version:"DICOM"},"(0018,1210)":{tag:"(0018,1210)",vr:"SH",name:"ConvolutionKernel",vm:"1-n",version:"DICOM"},"(0018,1242)":{tag:"(0018,1242)",vr:"IS",name:"ActualFrameDuration",vm:"1",version:"DICOM"},"(0018,1243)":{tag:"(0018,1243)",vr:"IS",name:"CountRate",vm:"1",version:"DICOM"},"(0018,1244)":{tag:"(0018,1244)",vr:"US",name:"PreferredPlaybackSequencing",vm:"1",version:"DICOM"},"(0018,1250)":{tag:"(0018,1250)",vr:"SH",name:"ReceiveCoilName",vm:"1",version:"DICOM"},"(0018,1251)":{tag:"(0018,1251)",vr:"SH",name:"TransmitCoilName",vm:"1",version:"DICOM"},"(0018,1260)":{tag:"(0018,1260)",vr:"SH",name:"PlateType",vm:"1",version:"DICOM"},"(0018,1261)":{tag:"(0018,1261)",vr:"LO",name:"PhosphorType",vm:"1",version:"DICOM"},"(0018,1271)":{tag:"(0018,1271)",vr:"FD",name:"WaterEquivalentDiameter",vm:"1",version:"DICOM"},"(0018,1272)":{tag:"(0018,1272)",vr:"SQ",name:"WaterEquivalentDiameterCalculationMethodCodeSequence",vm:"1",version:"DICOM"},"(0018,1300)":{tag:"(0018,1300)",vr:"DS",name:"ScanVelocity",vm:"1",version:"DICOM"},"(0018,1301)":{tag:"(0018,1301)",vr:"CS",name:"WholeBodyTechnique",vm:"1-n",version:"DICOM"},"(0018,1302)":{tag:"(0018,1302)",vr:"IS",name:"ScanLength",vm:"1",version:"DICOM"},"(0018,1310)":{tag:"(0018,1310)",vr:"US",name:"AcquisitionMatrix",vm:"4",version:"DICOM"},"(0018,1312)":{tag:"(0018,1312)",vr:"CS",name:"InPlanePhaseEncodingDirection",vm:"1",version:"DICOM"},"(0018,1314)":{tag:"(0018,1314)",vr:"DS",name:"FlipAngle",vm:"1",version:"DICOM"},"(0018,1315)":{tag:"(0018,1315)",vr:"CS",name:"VariableFlipAngleFlag",vm:"1",version:"DICOM"},"(0018,1316)":{tag:"(0018,1316)",vr:"DS",name:"SAR",vm:"1",version:"DICOM"},"(0018,1318)":{tag:"(0018,1318)",vr:"DS",name:"dBdt",vm:"1",version:"DICOM"},"(0018,1400)":{tag:"(0018,1400)",vr:"LO",name:"AcquisitionDeviceProcessingDescription",vm:"1",version:"DICOM"},"(0018,1401)":{tag:"(0018,1401)",vr:"LO",name:"AcquisitionDeviceProcessingCode",vm:"1",version:"DICOM"},"(0018,1402)":{tag:"(0018,1402)",vr:"CS",name:"CassetteOrientation",vm:"1",version:"DICOM"},"(0018,1403)":{tag:"(0018,1403)",vr:"CS",name:"CassetteSize",vm:"1",version:"DICOM"},"(0018,1404)":{tag:"(0018,1404)",vr:"US",name:"ExposuresOnPlate",vm:"1",version:"DICOM"},"(0018,1405)":{tag:"(0018,1405)",vr:"IS",name:"RelativeXRayExposure",vm:"1",version:"DICOM"},"(0018,1411)":{tag:"(0018,1411)",vr:"DS",name:"ExposureIndex",vm:"1",version:"DICOM"},"(0018,1412)":{tag:"(0018,1412)",vr:"DS",name:"TargetExposureIndex",vm:"1",version:"DICOM"},"(0018,1413)":{tag:"(0018,1413)",vr:"DS",name:"DeviationIndex",vm:"1",version:"DICOM"},"(0018,1450)":{tag:"(0018,1450)",vr:"DS",name:"ColumnAngulation",vm:"1",version:"DICOM"},"(0018,1460)":{tag:"(0018,1460)",vr:"DS",name:"TomoLayerHeight",vm:"1",version:"DICOM"},"(0018,1470)":{tag:"(0018,1470)",vr:"DS",name:"TomoAngle",vm:"1",version:"DICOM"},"(0018,1480)":{tag:"(0018,1480)",vr:"DS",name:"TomoTime",vm:"1",version:"DICOM"},"(0018,1490)":{tag:"(0018,1490)",vr:"CS",name:"TomoType",vm:"1",version:"DICOM"},"(0018,1491)":{tag:"(0018,1491)",vr:"CS",name:"TomoClass",vm:"1",version:"DICOM"},"(0018,1495)":{tag:"(0018,1495)",vr:"IS",name:"NumberOfTomosynthesisSourceImages",vm:"1",version:"DICOM"},"(0018,1500)":{tag:"(0018,1500)",vr:"CS",name:"PositionerMotion",vm:"1",version:"DICOM"},"(0018,1508)":{tag:"(0018,1508)",vr:"CS",name:"PositionerType",vm:"1",version:"DICOM"},"(0018,1510)":{tag:"(0018,1510)",vr:"DS",name:"PositionerPrimaryAngle",vm:"1",version:"DICOM"},"(0018,1511)":{tag:"(0018,1511)",vr:"DS",name:"PositionerSecondaryAngle",vm:"1",version:"DICOM"},"(0018,1520)":{tag:"(0018,1520)",vr:"DS",name:"PositionerPrimaryAngleIncrement",vm:"1-n",version:"DICOM"},"(0018,1521)":{tag:"(0018,1521)",vr:"DS",name:"PositionerSecondaryAngleIncrement",vm:"1-n",version:"DICOM"},"(0018,1530)":{tag:"(0018,1530)",vr:"DS",name:"DetectorPrimaryAngle",vm:"1",version:"DICOM"},"(0018,1531)":{tag:"(0018,1531)",vr:"DS",name:"DetectorSecondaryAngle",vm:"1",version:"DICOM"},"(0018,1600)":{tag:"(0018,1600)",vr:"CS",name:"ShutterShape",vm:"1-3",version:"DICOM"},"(0018,1602)":{tag:"(0018,1602)",vr:"IS",name:"ShutterLeftVerticalEdge",vm:"1",version:"DICOM"},"(0018,1604)":{tag:"(0018,1604)",vr:"IS",name:"ShutterRightVerticalEdge",vm:"1",version:"DICOM"},"(0018,1606)":{tag:"(0018,1606)",vr:"IS",name:"ShutterUpperHorizontalEdge",vm:"1",version:"DICOM"},"(0018,1608)":{tag:"(0018,1608)",vr:"IS",name:"ShutterLowerHorizontalEdge",vm:"1",version:"DICOM"},"(0018,1610)":{tag:"(0018,1610)",vr:"IS",name:"CenterOfCircularShutter",vm:"2",version:"DICOM"},"(0018,1612)":{tag:"(0018,1612)",vr:"IS",name:"RadiusOfCircularShutter",vm:"1",version:"DICOM"},"(0018,1620)":{tag:"(0018,1620)",vr:"IS",name:"VerticesOfThePolygonalShutter",vm:"2-2n",version:"DICOM"},"(0018,1622)":{tag:"(0018,1622)",vr:"US",name:"ShutterPresentationValue",vm:"1",version:"DICOM"},"(0018,1623)":{tag:"(0018,1623)",vr:"US",name:"ShutterOverlayGroup",vm:"1",version:"DICOM"},"(0018,1624)":{tag:"(0018,1624)",vr:"US",name:"ShutterPresentationColorCIELabValue",vm:"3",version:"DICOM"},"(0018,1630)":{tag:"(0018,1630)",vr:"CS",name:"OutlineShapeType",vm:"1",version:"DICOM"},"(0018,1631)":{tag:"(0018,1631)",vr:"FD",name:"OutlineLeftVerticalEdge",vm:"1",version:"DICOM"},"(0018,1632)":{tag:"(0018,1632)",vr:"FD",name:"OutlineRightVerticalEdge",vm:"1",version:"DICOM"},"(0018,1633)":{tag:"(0018,1633)",vr:"FD",name:"OutlineUpperHorizontalEdge",vm:"1",version:"DICOM"},"(0018,1634)":{tag:"(0018,1634)",vr:"FD",name:"OutlineLowerHorizontalEdge",vm:"1",version:"DICOM"},"(0018,1635)":{tag:"(0018,1635)",vr:"FD",name:"CenterOfCircularOutline",vm:"2",version:"DICOM"},"(0018,1636)":{tag:"(0018,1636)",vr:"FD",name:"DiameterOfCircularOutline",vm:"1",version:"DICOM"},"(0018,1637)":{tag:"(0018,1637)",vr:"UL",name:"NumberOfPolygonalVertices",vm:"1",version:"DICOM"},"(0018,1638)":{tag:"(0018,1638)",vr:"OF",name:"VerticesOfThePolygonalOutline",vm:"1",version:"DICOM"},"(0018,1700)":{tag:"(0018,1700)",vr:"CS",name:"CollimatorShape",vm:"1-3",version:"DICOM"},"(0018,1702)":{tag:"(0018,1702)",vr:"IS",name:"CollimatorLeftVerticalEdge",vm:"1",version:"DICOM"},"(0018,1704)":{tag:"(0018,1704)",vr:"IS",name:"CollimatorRightVerticalEdge",vm:"1",version:"DICOM"},"(0018,1706)":{tag:"(0018,1706)",vr:"IS",name:"CollimatorUpperHorizontalEdge",vm:"1",version:"DICOM"},"(0018,1708)":{tag:"(0018,1708)",vr:"IS",name:"CollimatorLowerHorizontalEdge",vm:"1",version:"DICOM"},"(0018,1710)":{tag:"(0018,1710)",vr:"IS",name:"CenterOfCircularCollimator",vm:"2",version:"DICOM"},"(0018,1712)":{tag:"(0018,1712)",vr:"IS",name:"RadiusOfCircularCollimator",vm:"1",version:"DICOM"},"(0018,1720)":{tag:"(0018,1720)",vr:"IS",name:"VerticesOfThePolygonalCollimator",vm:"2-2n",version:"DICOM"},"(0018,1800)":{tag:"(0018,1800)",vr:"CS",name:"AcquisitionTimeSynchronized",vm:"1",version:"DICOM"},"(0018,1801)":{tag:"(0018,1801)",vr:"SH",name:"TimeSource",vm:"1",version:"DICOM"},"(0018,1802)":{tag:"(0018,1802)",vr:"CS",name:"TimeDistributionProtocol",vm:"1",version:"DICOM"},"(0018,1803)":{tag:"(0018,1803)",vr:"LO",name:"NTPSourceAddress",vm:"1",version:"DICOM"},"(0018,2001)":{tag:"(0018,2001)",vr:"IS",name:"PageNumberVector",vm:"1-n",version:"DICOM"},"(0018,2002)":{tag:"(0018,2002)",vr:"SH",name:"FrameLabelVector",vm:"1-n",version:"DICOM"},"(0018,2003)":{tag:"(0018,2003)",vr:"DS",name:"FramePrimaryAngleVector",vm:"1-n",version:"DICOM"},"(0018,2004)":{tag:"(0018,2004)",vr:"DS",name:"FrameSecondaryAngleVector",vm:"1-n",version:"DICOM"},"(0018,2005)":{tag:"(0018,2005)",vr:"DS",name:"SliceLocationVector",vm:"1-n",version:"DICOM"},"(0018,2006)":{tag:"(0018,2006)",vr:"SH",name:"DisplayWindowLabelVector",vm:"1-n",version:"DICOM"},"(0018,2010)":{tag:"(0018,2010)",vr:"DS",name:"NominalScannedPixelSpacing",vm:"2",version:"DICOM"},"(0018,2020)":{tag:"(0018,2020)",vr:"CS",name:"DigitizingDeviceTransportDirection",vm:"1",version:"DICOM"},"(0018,2030)":{tag:"(0018,2030)",vr:"DS",name:"RotationOfScannedFilm",vm:"1",version:"DICOM"},"(0018,2041)":{tag:"(0018,2041)",vr:"SQ",name:"BiopsyTargetSequence",vm:"1",version:"DICOM"},"(0018,2042)":{tag:"(0018,2042)",vr:"UI",name:"TargetUID",vm:"1",version:"DICOM"},"(0018,2043)":{tag:"(0018,2043)",vr:"FL",name:"LocalizingCursorPosition",vm:"2",version:"DICOM"},"(0018,2044)":{tag:"(0018,2044)",vr:"FL",name:"CalculatedTargetPosition",vm:"3",version:"DICOM"},"(0018,2045)":{tag:"(0018,2045)",vr:"SH",name:"TargetLabel",vm:"1",version:"DICOM"},"(0018,2046)":{tag:"(0018,2046)",vr:"FL",name:"DisplayedZValue",vm:"1",version:"DICOM"},"(0018,3100)":{tag:"(0018,3100)",vr:"CS",name:"IVUSAcquisition",vm:"1",version:"DICOM"},"(0018,3101)":{tag:"(0018,3101)",vr:"DS",name:"IVUSPullbackRate",vm:"1",version:"DICOM"},"(0018,3102)":{tag:"(0018,3102)",vr:"DS",name:"IVUSGatedRate",vm:"1",version:"DICOM"},"(0018,3103)":{tag:"(0018,3103)",vr:"IS",name:"IVUSPullbackStartFrameNumber",vm:"1",version:"DICOM"},"(0018,3104)":{tag:"(0018,3104)",vr:"IS",name:"IVUSPullbackStopFrameNumber",vm:"1",version:"DICOM"},"(0018,3105)":{tag:"(0018,3105)",vr:"IS",name:"LesionNumber",vm:"1-n",version:"DICOM"},"(0018,5000)":{tag:"(0018,5000)",vr:"SH",name:"OutputPower",vm:"1-n",version:"DICOM"},"(0018,5010)":{tag:"(0018,5010)",vr:"LO",name:"TransducerData",vm:"1-n",version:"DICOM"},"(0018,5011)":{tag:"(0018,5011)",vr:"SQ",name:"TransducerIdentificationSequence",vm:"1",version:"DICOM"},"(0018,5012)":{tag:"(0018,5012)",vr:"DS",name:"FocusDepth",vm:"1",version:"DICOM"},"(0018,5020)":{tag:"(0018,5020)",vr:"LO",name:"ProcessingFunction",vm:"1",version:"DICOM"},"(0018,5022)":{tag:"(0018,5022)",vr:"DS",name:"MechanicalIndex",vm:"1",version:"DICOM"},"(0018,5024)":{tag:"(0018,5024)",vr:"DS",name:"BoneThermalIndex",vm:"1",version:"DICOM"},"(0018,5026)":{tag:"(0018,5026)",vr:"DS",name:"CranialThermalIndex",vm:"1",version:"DICOM"},"(0018,5027)":{tag:"(0018,5027)",vr:"DS",name:"SoftTissueThermalIndex",vm:"1",version:"DICOM"},"(0018,5028)":{tag:"(0018,5028)",vr:"DS",name:"SoftTissueFocusThermalIndex",vm:"1",version:"DICOM"},"(0018,5029)":{tag:"(0018,5029)",vr:"DS",name:"SoftTissueSurfaceThermalIndex",vm:"1",version:"DICOM"},"(0018,5050)":{tag:"(0018,5050)",vr:"IS",name:"DepthOfScanField",vm:"1",version:"DICOM"},"(0018,5100)":{tag:"(0018,5100)",vr:"CS",name:"PatientPosition",vm:"1",version:"DICOM"},"(0018,5101)":{tag:"(0018,5101)",vr:"CS",name:"ViewPosition",vm:"1",version:"DICOM"},"(0018,5104)":{tag:"(0018,5104)",vr:"SQ",name:"ProjectionEponymousNameCodeSequence",vm:"1",version:"DICOM"},"(0018,6000)":{tag:"(0018,6000)",vr:"DS",name:"Sensitivity",vm:"1",version:"DICOM"},"(0018,6011)":{tag:"(0018,6011)",vr:"SQ",name:"SequenceOfUltrasoundRegions",vm:"1",version:"DICOM"},"(0018,6012)":{tag:"(0018,6012)",vr:"US",name:"RegionSpatialFormat",vm:"1",version:"DICOM"},"(0018,6014)":{tag:"(0018,6014)",vr:"US",name:"RegionDataType",vm:"1",version:"DICOM"},"(0018,6016)":{tag:"(0018,6016)",vr:"UL",name:"RegionFlags",vm:"1",version:"DICOM"},"(0018,6018)":{tag:"(0018,6018)",vr:"UL",name:"RegionLocationMinX0",vm:"1",version:"DICOM"},"(0018,601A)":{tag:"(0018,601A)",vr:"UL",name:"RegionLocationMinY0",vm:"1",version:"DICOM"},"(0018,601C)":{tag:"(0018,601C)",vr:"UL",name:"RegionLocationMaxX1",vm:"1",version:"DICOM"},"(0018,601E)":{tag:"(0018,601E)",vr:"UL",name:"RegionLocationMaxY1",vm:"1",version:"DICOM"},"(0018,6020)":{tag:"(0018,6020)",vr:"SL",name:"ReferencePixelX0",vm:"1",version:"DICOM"},"(0018,6022)":{tag:"(0018,6022)",vr:"SL",name:"ReferencePixelY0",vm:"1",version:"DICOM"},"(0018,6024)":{tag:"(0018,6024)",vr:"US",name:"PhysicalUnitsXDirection",vm:"1",version:"DICOM"},"(0018,6026)":{tag:"(0018,6026)",vr:"US",name:"PhysicalUnitsYDirection",vm:"1",version:"DICOM"},"(0018,6028)":{tag:"(0018,6028)",vr:"FD",name:"ReferencePixelPhysicalValueX",vm:"1",version:"DICOM"},"(0018,602A)":{tag:"(0018,602A)",vr:"FD",name:"ReferencePixelPhysicalValueY",vm:"1",version:"DICOM"},"(0018,602C)":{tag:"(0018,602C)",vr:"FD",name:"PhysicalDeltaX",vm:"1",version:"DICOM"},"(0018,602E)":{tag:"(0018,602E)",vr:"FD",name:"PhysicalDeltaY",vm:"1",version:"DICOM"},"(0018,6030)":{tag:"(0018,6030)",vr:"UL",name:"TransducerFrequency",vm:"1",version:"DICOM"},"(0018,6031)":{tag:"(0018,6031)",vr:"CS",name:"TransducerType",vm:"1",version:"DICOM"},"(0018,6032)":{tag:"(0018,6032)",vr:"UL",name:"PulseRepetitionFrequency",vm:"1",version:"DICOM"},"(0018,6034)":{tag:"(0018,6034)",vr:"FD",name:"DopplerCorrectionAngle",vm:"1",version:"DICOM"},"(0018,6036)":{tag:"(0018,6036)",vr:"FD",name:"SteeringAngle",vm:"1",version:"DICOM"},"(0018,6039)":{tag:"(0018,6039)",vr:"SL",name:"DopplerSampleVolumeXPosition",vm:"1",version:"DICOM"},"(0018,603B)":{tag:"(0018,603B)",vr:"SL",name:"DopplerSampleVolumeYPosition",vm:"1",version:"DICOM"},"(0018,603D)":{tag:"(0018,603D)",vr:"SL",name:"TMLinePositionX0",vm:"1",version:"DICOM"},"(0018,603F)":{tag:"(0018,603F)",vr:"SL",name:"TMLinePositionY0",vm:"1",version:"DICOM"},"(0018,6041)":{tag:"(0018,6041)",vr:"SL",name:"TMLinePositionX1",vm:"1",version:"DICOM"},"(0018,6043)":{tag:"(0018,6043)",vr:"SL",name:"TMLinePositionY1",vm:"1",version:"DICOM"},"(0018,6044)":{tag:"(0018,6044)",vr:"US",name:"PixelComponentOrganization",vm:"1",version:"DICOM"},"(0018,6046)":{tag:"(0018,6046)",vr:"UL",name:"PixelComponentMask",vm:"1",version:"DICOM"},"(0018,6048)":{tag:"(0018,6048)",vr:"UL",name:"PixelComponentRangeStart",vm:"1",version:"DICOM"},"(0018,604A)":{tag:"(0018,604A)",vr:"UL",name:"PixelComponentRangeStop",vm:"1",version:"DICOM"},"(0018,604C)":{tag:"(0018,604C)",vr:"US",name:"PixelComponentPhysicalUnits",vm:"1",version:"DICOM"},"(0018,604E)":{tag:"(0018,604E)",vr:"US",name:"PixelComponentDataType",vm:"1",version:"DICOM"},"(0018,6050)":{tag:"(0018,6050)",vr:"UL",name:"NumberOfTableBreakPoints",vm:"1",version:"DICOM"},"(0018,6052)":{tag:"(0018,6052)",vr:"UL",name:"TableOfXBreakPoints",vm:"1-n",version:"DICOM"},"(0018,6054)":{tag:"(0018,6054)",vr:"FD",name:"TableOfYBreakPoints",vm:"1-n",version:"DICOM"},"(0018,6056)":{tag:"(0018,6056)",vr:"UL",name:"NumberOfTableEntries",vm:"1",version:"DICOM"},"(0018,6058)":{tag:"(0018,6058)",vr:"UL",name:"TableOfPixelValues",vm:"1-n",version:"DICOM"},"(0018,605A)":{tag:"(0018,605A)",vr:"FL",name:"TableOfParameterValues",vm:"1-n",version:"DICOM"},"(0018,6060)":{tag:"(0018,6060)",vr:"FL",name:"RWaveTimeVector",vm:"1-n",version:"DICOM"},"(0018,6070)":{tag:"(0018,6070)",vr:"US",name:"ActiveImageAreaOverlayGroup",vm:"1",version:"DICOM"},"(0018,7000)":{tag:"(0018,7000)",vr:"CS",name:"DetectorConditionsNominalFlag",vm:"1",version:"DICOM"},"(0018,7001)":{tag:"(0018,7001)",vr:"DS",name:"DetectorTemperature",vm:"1",version:"DICOM"},"(0018,7004)":{tag:"(0018,7004)",vr:"CS",name:"DetectorType",vm:"1",version:"DICOM"},"(0018,7005)":{tag:"(0018,7005)",vr:"CS",name:"DetectorConfiguration",vm:"1",version:"DICOM"},"(0018,7006)":{tag:"(0018,7006)",vr:"LT",name:"DetectorDescription",vm:"1",version:"DICOM"},"(0018,7008)":{tag:"(0018,7008)",vr:"LT",name:"DetectorMode",vm:"1",version:"DICOM"},"(0018,700A)":{tag:"(0018,700A)",vr:"SH",name:"DetectorID",vm:"1",version:"DICOM"},"(0018,700C)":{tag:"(0018,700C)",vr:"DA",name:"DateOfLastDetectorCalibration",vm:"1",version:"DICOM"},"(0018,700E)":{tag:"(0018,700E)",vr:"TM",name:"TimeOfLastDetectorCalibration",vm:"1",version:"DICOM"},"(0018,7010)":{tag:"(0018,7010)",vr:"IS",name:"ExposuresOnDetectorSinceLastCalibration",vm:"1",version:"DICOM"},"(0018,7011)":{tag:"(0018,7011)",vr:"IS",name:"ExposuresOnDetectorSinceManufactured",vm:"1",version:"DICOM"},"(0018,7012)":{tag:"(0018,7012)",vr:"DS",name:"DetectorTimeSinceLastExposure",vm:"1",version:"DICOM"},"(0018,7014)":{tag:"(0018,7014)",vr:"DS",name:"DetectorActiveTime",vm:"1",version:"DICOM"},"(0018,7016)":{tag:"(0018,7016)",vr:"DS",name:"DetectorActivationOffsetFromExposure",vm:"1",version:"DICOM"},"(0018,701A)":{tag:"(0018,701A)",vr:"DS",name:"DetectorBinning",vm:"2",version:"DICOM"},"(0018,7020)":{tag:"(0018,7020)",vr:"DS",name:"DetectorElementPhysicalSize",vm:"2",version:"DICOM"},"(0018,7022)":{tag:"(0018,7022)",vr:"DS",name:"DetectorElementSpacing",vm:"2",version:"DICOM"},"(0018,7024)":{tag:"(0018,7024)",vr:"CS",name:"DetectorActiveShape",vm:"1",version:"DICOM"},"(0018,7026)":{tag:"(0018,7026)",vr:"DS",name:"DetectorActiveDimensions",vm:"1-2",version:"DICOM"},"(0018,7028)":{tag:"(0018,7028)",vr:"DS",name:"DetectorActiveOrigin",vm:"2",version:"DICOM"},"(0018,702A)":{tag:"(0018,702A)",vr:"LO",name:"DetectorManufacturerName",vm:"1",version:"DICOM"},"(0018,702B)":{tag:"(0018,702B)",vr:"LO",name:"DetectorManufacturerModelName",vm:"1",version:"DICOM"},"(0018,7030)":{tag:"(0018,7030)",vr:"DS",name:"FieldOfViewOrigin",vm:"2",version:"DICOM"},"(0018,7032)":{tag:"(0018,7032)",vr:"DS",name:"FieldOfViewRotation",vm:"1",version:"DICOM"},"(0018,7034)":{tag:"(0018,7034)",vr:"CS",name:"FieldOfViewHorizontalFlip",vm:"1",version:"DICOM"},"(0018,7036)":{tag:"(0018,7036)",vr:"FL",name:"PixelDataAreaOriginRelativeToFOV",vm:"2",version:"DICOM"},"(0018,7038)":{tag:"(0018,7038)",vr:"FL",name:"PixelDataAreaRotationAngleRelativeToFOV",vm:"1",version:"DICOM"},"(0018,7040)":{tag:"(0018,7040)",vr:"LT",name:"GridAbsorbingMaterial",vm:"1",version:"DICOM"},"(0018,7041)":{tag:"(0018,7041)",vr:"LT",name:"GridSpacingMaterial",vm:"1",version:"DICOM"},"(0018,7042)":{tag:"(0018,7042)",vr:"DS",name:"GridThickness",vm:"1",version:"DICOM"},"(0018,7044)":{tag:"(0018,7044)",vr:"DS",name:"GridPitch",vm:"1",version:"DICOM"},"(0018,7046)":{tag:"(0018,7046)",vr:"IS",name:"GridAspectRatio",vm:"2",version:"DICOM"},"(0018,7048)":{tag:"(0018,7048)",vr:"DS",name:"GridPeriod",vm:"1",version:"DICOM"},"(0018,704C)":{tag:"(0018,704C)",vr:"DS",name:"GridFocalDistance",vm:"1",version:"DICOM"},"(0018,7050)":{tag:"(0018,7050)",vr:"CS",name:"FilterMaterial",vm:"1-n",version:"DICOM"},"(0018,7052)":{tag:"(0018,7052)",vr:"DS",name:"FilterThicknessMinimum",vm:"1-n",version:"DICOM"},"(0018,7054)":{tag:"(0018,7054)",vr:"DS",name:"FilterThicknessMaximum",vm:"1-n",version:"DICOM"},"(0018,7056)":{tag:"(0018,7056)",vr:"FL",name:"FilterBeamPathLengthMinimum",vm:"1-n",version:"DICOM"},"(0018,7058)":{tag:"(0018,7058)",vr:"FL",name:"FilterBeamPathLengthMaximum",vm:"1-n",version:"DICOM"},"(0018,7060)":{tag:"(0018,7060)",vr:"CS",name:"ExposureControlMode",vm:"1",version:"DICOM"},"(0018,7062)":{tag:"(0018,7062)",vr:"LT",name:"ExposureControlModeDescription",vm:"1",version:"DICOM"},"(0018,7064)":{tag:"(0018,7064)",vr:"CS",name:"ExposureStatus",vm:"1",version:"DICOM"},"(0018,7065)":{tag:"(0018,7065)",vr:"DS",name:"PhototimerSetting",vm:"1",version:"DICOM"},"(0018,8150)":{tag:"(0018,8150)",vr:"DS",name:"ExposureTimeInuS",vm:"1",version:"DICOM"},"(0018,8151)":{tag:"(0018,8151)",vr:"DS",name:"XRayTubeCurrentInuA",vm:"1",version:"DICOM"},"(0018,9004)":{tag:"(0018,9004)",vr:"CS",name:"ContentQualification",vm:"1",version:"DICOM"},"(0018,9005)":{tag:"(0018,9005)",vr:"SH",name:"PulseSequenceName",vm:"1",version:"DICOM"},"(0018,9006)":{tag:"(0018,9006)",vr:"SQ",name:"MRImagingModifierSequence",vm:"1",version:"DICOM"},"(0018,9008)":{tag:"(0018,9008)",vr:"CS",name:"EchoPulseSequence",vm:"1",version:"DICOM"},"(0018,9009)":{tag:"(0018,9009)",vr:"CS",name:"InversionRecovery",vm:"1",version:"DICOM"},"(0018,9010)":{tag:"(0018,9010)",vr:"CS",name:"FlowCompensation",vm:"1",version:"DICOM"},"(0018,9011)":{tag:"(0018,9011)",vr:"CS",name:"MultipleSpinEcho",vm:"1",version:"DICOM"},"(0018,9012)":{tag:"(0018,9012)",vr:"CS",name:"MultiPlanarExcitation",vm:"1",version:"DICOM"},"(0018,9014)":{tag:"(0018,9014)",vr:"CS",name:"PhaseContrast",vm:"1",version:"DICOM"},"(0018,9015)":{tag:"(0018,9015)",vr:"CS",name:"TimeOfFlightContrast",vm:"1",version:"DICOM"},"(0018,9016)":{tag:"(0018,9016)",vr:"CS",name:"Spoiling",vm:"1",version:"DICOM"},"(0018,9017)":{tag:"(0018,9017)",vr:"CS",name:"SteadyStatePulseSequence",vm:"1",version:"DICOM"},"(0018,9018)":{tag:"(0018,9018)",vr:"CS",name:"EchoPlanarPulseSequence",vm:"1",version:"DICOM"},"(0018,9019)":{tag:"(0018,9019)",vr:"FD",name:"TagAngleFirstAxis",vm:"1",version:"DICOM"},"(0018,9020)":{tag:"(0018,9020)",vr:"CS",name:"MagnetizationTransfer",vm:"1",version:"DICOM"},"(0018,9021)":{tag:"(0018,9021)",vr:"CS",name:"T2Preparation",vm:"1",version:"DICOM"},"(0018,9022)":{tag:"(0018,9022)",vr:"CS",name:"BloodSignalNulling",vm:"1",version:"DICOM"},"(0018,9024)":{tag:"(0018,9024)",vr:"CS",name:"SaturationRecovery",vm:"1",version:"DICOM"},"(0018,9025)":{tag:"(0018,9025)",vr:"CS",name:"SpectrallySelectedSuppression",vm:"1",version:"DICOM"},"(0018,9026)":{tag:"(0018,9026)",vr:"CS",name:"SpectrallySelectedExcitation",vm:"1",version:"DICOM"},"(0018,9027)":{tag:"(0018,9027)",vr:"CS",name:"SpatialPresaturation",vm:"1",version:"DICOM"},"(0018,9028)":{tag:"(0018,9028)",vr:"CS",name:"Tagging",vm:"1",version:"DICOM"},"(0018,9029)":{tag:"(0018,9029)",vr:"CS",name:"OversamplingPhase",vm:"1",version:"DICOM"},"(0018,9030)":{tag:"(0018,9030)",vr:"FD",name:"TagSpacingFirstDimension",vm:"1",version:"DICOM"},"(0018,9032)":{tag:"(0018,9032)",vr:"CS",name:"GeometryOfKSpaceTraversal",vm:"1",version:"DICOM"},"(0018,9033)":{tag:"(0018,9033)",vr:"CS",name:"SegmentedKSpaceTraversal",vm:"1",version:"DICOM"},"(0018,9034)":{tag:"(0018,9034)",vr:"CS",name:"RectilinearPhaseEncodeReordering",vm:"1",version:"DICOM"},"(0018,9035)":{tag:"(0018,9035)",vr:"FD",name:"TagThickness",vm:"1",version:"DICOM"},"(0018,9036)":{tag:"(0018,9036)",vr:"CS",name:"PartialFourierDirection",vm:"1",version:"DICOM"},"(0018,9037)":{tag:"(0018,9037)",vr:"CS",name:"CardiacSynchronizationTechnique",vm:"1",version:"DICOM"},"(0018,9041)":{tag:"(0018,9041)",vr:"LO",name:"ReceiveCoilManufacturerName",vm:"1",version:"DICOM"},"(0018,9042)":{tag:"(0018,9042)",vr:"SQ",name:"MRReceiveCoilSequence",vm:"1",version:"DICOM"},"(0018,9043)":{tag:"(0018,9043)",vr:"CS",name:"ReceiveCoilType",vm:"1",version:"DICOM"},"(0018,9044)":{tag:"(0018,9044)",vr:"CS",name:"QuadratureReceiveCoil",vm:"1",version:"DICOM"},"(0018,9045)":{tag:"(0018,9045)",vr:"SQ",name:"MultiCoilDefinitionSequence",vm:"1",version:"DICOM"},"(0018,9046)":{tag:"(0018,9046)",vr:"LO",name:"MultiCoilConfiguration",vm:"1",version:"DICOM"},"(0018,9047)":{tag:"(0018,9047)",vr:"SH",name:"MultiCoilElementName",vm:"1",version:"DICOM"},"(0018,9048)":{tag:"(0018,9048)",vr:"CS",name:"MultiCoilElementUsed",vm:"1",version:"DICOM"},"(0018,9049)":{tag:"(0018,9049)",vr:"SQ",name:"MRTransmitCoilSequence",vm:"1",version:"DICOM"},"(0018,9050)":{tag:"(0018,9050)",vr:"LO",name:"TransmitCoilManufacturerName",vm:"1",version:"DICOM"},"(0018,9051)":{tag:"(0018,9051)",vr:"CS",name:"TransmitCoilType",vm:"1",version:"DICOM"},"(0018,9052)":{tag:"(0018,9052)",vr:"FD",name:"SpectralWidth",vm:"1-2",version:"DICOM"},"(0018,9053)":{tag:"(0018,9053)",vr:"FD",name:"ChemicalShiftReference",vm:"1-2",version:"DICOM"},"(0018,9054)":{tag:"(0018,9054)",vr:"CS",name:"VolumeLocalizationTechnique",vm:"1",version:"DICOM"},"(0018,9058)":{tag:"(0018,9058)",vr:"US",name:"MRAcquisitionFrequencyEncodingSteps",vm:"1",version:"DICOM"},"(0018,9059)":{tag:"(0018,9059)",vr:"CS",name:"Decoupling",vm:"1",version:"DICOM"},"(0018,9060)":{tag:"(0018,9060)",vr:"CS",name:"DecoupledNucleus",vm:"1-2",version:"DICOM"},"(0018,9061)":{tag:"(0018,9061)",vr:"FD",name:"DecouplingFrequency",vm:"1-2",version:"DICOM"},"(0018,9062)":{tag:"(0018,9062)",vr:"CS",name:"DecouplingMethod",vm:"1",version:"DICOM"},"(0018,9063)":{tag:"(0018,9063)",vr:"FD",name:"DecouplingChemicalShiftReference",vm:"1-2",version:"DICOM"},"(0018,9064)":{tag:"(0018,9064)",vr:"CS",name:"KSpaceFiltering",vm:"1",version:"DICOM"},"(0018,9065)":{tag:"(0018,9065)",vr:"CS",name:"TimeDomainFiltering",vm:"1-2",version:"DICOM"},"(0018,9066)":{tag:"(0018,9066)",vr:"US",name:"NumberOfZeroFills",vm:"1-2",version:"DICOM"},"(0018,9067)":{tag:"(0018,9067)",vr:"CS",name:"BaselineCorrection",vm:"1",version:"DICOM"},"(0018,9069)":{tag:"(0018,9069)",vr:"FD",name:"ParallelReductionFactorInPlane",vm:"1",version:"DICOM"},"(0018,9070)":{tag:"(0018,9070)",vr:"FD",name:"CardiacRRIntervalSpecified",vm:"1",version:"DICOM"},"(0018,9073)":{tag:"(0018,9073)",vr:"FD",name:"AcquisitionDuration",vm:"1",version:"DICOM"},"(0018,9074)":{tag:"(0018,9074)",vr:"DT",name:"FrameAcquisitionDateTime",vm:"1",version:"DICOM"},"(0018,9075)":{tag:"(0018,9075)",vr:"CS",name:"DiffusionDirectionality",vm:"1",version:"DICOM"},"(0018,9076)":{tag:"(0018,9076)",vr:"SQ",name:"DiffusionGradientDirectionSequence",vm:"1",version:"DICOM"},"(0018,9077)":{tag:"(0018,9077)",vr:"CS",name:"ParallelAcquisition",vm:"1",version:"DICOM"},"(0018,9078)":{tag:"(0018,9078)",vr:"CS",name:"ParallelAcquisitionTechnique",vm:"1",version:"DICOM"},"(0018,9079)":{tag:"(0018,9079)",vr:"FD",name:"InversionTimes",vm:"1-n",version:"DICOM"},"(0018,9080)":{tag:"(0018,9080)",vr:"ST",name:"MetaboliteMapDescription",vm:"1",version:"DICOM"},"(0018,9081)":{tag:"(0018,9081)",vr:"CS",name:"PartialFourier",vm:"1",version:"DICOM"},"(0018,9082)":{tag:"(0018,9082)",vr:"FD",name:"EffectiveEchoTime",vm:"1",version:"DICOM"},"(0018,9083)":{tag:"(0018,9083)",vr:"SQ",name:"MetaboliteMapCodeSequence",vm:"1",version:"DICOM"},"(0018,9084)":{tag:"(0018,9084)",vr:"SQ",name:"ChemicalShiftSequence",vm:"1",version:"DICOM"},"(0018,9085)":{tag:"(0018,9085)",vr:"CS",name:"CardiacSignalSource",vm:"1",version:"DICOM"},"(0018,9087)":{tag:"(0018,9087)",vr:"FD",name:"DiffusionBValue",vm:"1",version:"DICOM"},"(0018,9089)":{tag:"(0018,9089)",vr:"FD",name:"DiffusionGradientOrientation",vm:"3",version:"DICOM"},"(0018,9090)":{tag:"(0018,9090)",vr:"FD",name:"VelocityEncodingDirection",vm:"3",version:"DICOM"},"(0018,9091)":{tag:"(0018,9091)",vr:"FD",name:"VelocityEncodingMinimumValue",vm:"1",version:"DICOM"},"(0018,9092)":{tag:"(0018,9092)",vr:"SQ",name:"VelocityEncodingAcquisitionSequence",vm:"1",version:"DICOM"},"(0018,9093)":{tag:"(0018,9093)",vr:"US",name:"NumberOfKSpaceTrajectories",vm:"1",version:"DICOM"},"(0018,9094)":{tag:"(0018,9094)",vr:"CS",name:"CoverageOfKSpace",vm:"1",version:"DICOM"},"(0018,9095)":{tag:"(0018,9095)",vr:"UL",name:"SpectroscopyAcquisitionPhaseRows",vm:"1",version:"DICOM"},"(0018,9098)":{tag:"(0018,9098)",vr:"FD",name:"TransmitterFrequency",vm:"1-2",version:"DICOM"},"(0018,9100)":{tag:"(0018,9100)",vr:"CS",name:"ResonantNucleus",vm:"1-2",version:"DICOM"},"(0018,9101)":{tag:"(0018,9101)",vr:"CS",name:"FrequencyCorrection",vm:"1",version:"DICOM"},"(0018,9103)":{tag:"(0018,9103)",vr:"SQ",name:"MRSpectroscopyFOVGeometrySequence",vm:"1",version:"DICOM"},"(0018,9104)":{tag:"(0018,9104)",vr:"FD",name:"SlabThickness",vm:"1",version:"DICOM"},"(0018,9105)":{tag:"(0018,9105)",vr:"FD",name:"SlabOrientation",vm:"3",version:"DICOM"},"(0018,9106)":{tag:"(0018,9106)",vr:"FD",name:"MidSlabPosition",vm:"3",version:"DICOM"},"(0018,9107)":{tag:"(0018,9107)",vr:"SQ",name:"MRSpatialSaturationSequence",vm:"1",version:"DICOM"},"(0018,9112)":{tag:"(0018,9112)",vr:"SQ",name:"MRTimingAndRelatedParametersSequence",vm:"1",version:"DICOM"},"(0018,9114)":{tag:"(0018,9114)",vr:"SQ",name:"MREchoSequence",vm:"1",version:"DICOM"},"(0018,9115)":{tag:"(0018,9115)",vr:"SQ",name:"MRModifierSequence",vm:"1",version:"DICOM"},"(0018,9117)":{tag:"(0018,9117)",vr:"SQ",name:"MRDiffusionSequence",vm:"1",version:"DICOM"},"(0018,9118)":{tag:"(0018,9118)",vr:"SQ",name:"CardiacSynchronizationSequence",vm:"1",version:"DICOM"},"(0018,9119)":{tag:"(0018,9119)",vr:"SQ",name:"MRAveragesSequence",vm:"1",version:"DICOM"},"(0018,9125)":{tag:"(0018,9125)",vr:"SQ",name:"MRFOVGeometrySequence",vm:"1",version:"DICOM"},"(0018,9126)":{tag:"(0018,9126)",vr:"SQ",name:"VolumeLocalizationSequence",vm:"1",version:"DICOM"},"(0018,9127)":{tag:"(0018,9127)",vr:"UL",name:"SpectroscopyAcquisitionDataColumns",vm:"1",version:"DICOM"},"(0018,9147)":{tag:"(0018,9147)",vr:"CS",name:"DiffusionAnisotropyType",vm:"1",version:"DICOM"},"(0018,9151)":{tag:"(0018,9151)",vr:"DT",name:"FrameReferenceDateTime",vm:"1",version:"DICOM"},"(0018,9152)":{tag:"(0018,9152)",vr:"SQ",name:"MRMetaboliteMapSequence",vm:"1",version:"DICOM"},"(0018,9155)":{tag:"(0018,9155)",vr:"FD",name:"ParallelReductionFactorOutOfPlane",vm:"1",version:"DICOM"},"(0018,9159)":{tag:"(0018,9159)",vr:"UL",name:"SpectroscopyAcquisitionOutOfPlanePhaseSteps",vm:"1",version:"DICOM"},"(0018,9168)":{tag:"(0018,9168)",vr:"FD",name:"ParallelReductionFactorSecondInPlane",vm:"1",version:"DICOM"},"(0018,9169)":{tag:"(0018,9169)",vr:"CS",name:"CardiacBeatRejectionTechnique",vm:"1",version:"DICOM"},"(0018,9170)":{tag:"(0018,9170)",vr:"CS",name:"RespiratoryMotionCompensationTechnique",vm:"1",version:"DICOM"},"(0018,9171)":{tag:"(0018,9171)",vr:"CS",name:"RespiratorySignalSource",vm:"1",version:"DICOM"},"(0018,9172)":{tag:"(0018,9172)",vr:"CS",name:"BulkMotionCompensationTechnique",vm:"1",version:"DICOM"},"(0018,9173)":{tag:"(0018,9173)",vr:"CS",name:"BulkMotionSignalSource",vm:"1",version:"DICOM"},"(0018,9174)":{tag:"(0018,9174)",vr:"CS",name:"ApplicableSafetyStandardAgency",vm:"1",version:"DICOM"},"(0018,9175)":{tag:"(0018,9175)",vr:"LO",name:"ApplicableSafetyStandardDescription",vm:"1",version:"DICOM"},"(0018,9176)":{tag:"(0018,9176)",vr:"SQ",name:"OperatingModeSequence",vm:"1",version:"DICOM"},"(0018,9177)":{tag:"(0018,9177)",vr:"CS",name:"OperatingModeType",vm:"1",version:"DICOM"},"(0018,9178)":{tag:"(0018,9178)",vr:"CS",name:"OperatingMode",vm:"1",version:"DICOM"},"(0018,9179)":{tag:"(0018,9179)",vr:"CS",name:"SpecificAbsorptionRateDefinition",vm:"1",version:"DICOM"},"(0018,9180)":{tag:"(0018,9180)",vr:"CS",name:"GradientOutputType",vm:"1",version:"DICOM"},"(0018,9181)":{tag:"(0018,9181)",vr:"FD",name:"SpecificAbsorptionRateValue",vm:"1",version:"DICOM"},"(0018,9182)":{tag:"(0018,9182)",vr:"FD",name:"GradientOutput",vm:"1",version:"DICOM"},"(0018,9183)":{tag:"(0018,9183)",vr:"CS",name:"FlowCompensationDirection",vm:"1",version:"DICOM"},"(0018,9184)":{tag:"(0018,9184)",vr:"FD",name:"TaggingDelay",vm:"1",version:"DICOM"},"(0018,9185)":{tag:"(0018,9185)",vr:"ST",name:"RespiratoryMotionCompensationTechniqueDescription",vm:"1",version:"DICOM"},"(0018,9186)":{tag:"(0018,9186)",vr:"SH",name:"RespiratorySignalSourceID",vm:"1",version:"DICOM"},"(0018,9197)":{tag:"(0018,9197)",vr:"SQ",name:"MRVelocityEncodingSequence",vm:"1",version:"DICOM"},"(0018,9198)":{tag:"(0018,9198)",vr:"CS",name:"FirstOrderPhaseCorrection",vm:"1",version:"DICOM"},"(0018,9199)":{tag:"(0018,9199)",vr:"CS",name:"WaterReferencedPhaseCorrection",vm:"1",version:"DICOM"},"(0018,9200)":{tag:"(0018,9200)",vr:"CS",name:"MRSpectroscopyAcquisitionType",vm:"1",version:"DICOM"},"(0018,9214)":{tag:"(0018,9214)",vr:"CS",name:"RespiratoryCyclePosition",vm:"1",version:"DICOM"},"(0018,9217)":{tag:"(0018,9217)",vr:"FD",name:"VelocityEncodingMaximumValue",vm:"1",version:"DICOM"},"(0018,9218)":{tag:"(0018,9218)",vr:"FD",name:"TagSpacingSecondDimension",vm:"1",version:"DICOM"},"(0018,9219)":{tag:"(0018,9219)",vr:"SS",name:"TagAngleSecondAxis",vm:"1",version:"DICOM"},"(0018,9220)":{tag:"(0018,9220)",vr:"FD",name:"FrameAcquisitionDuration",vm:"1",version:"DICOM"},"(0018,9226)":{tag:"(0018,9226)",vr:"SQ",name:"MRImageFrameTypeSequence",vm:"1",version:"DICOM"},"(0018,9227)":{tag:"(0018,9227)",vr:"SQ",name:"MRSpectroscopyFrameTypeSequence",vm:"1",version:"DICOM"},"(0018,9231)":{tag:"(0018,9231)",vr:"US",name:"MRAcquisitionPhaseEncodingStepsInPlane",vm:"1",version:"DICOM"},"(0018,9232)":{tag:"(0018,9232)",vr:"US",name:"MRAcquisitionPhaseEncodingStepsOutOfPlane",vm:"1",version:"DICOM"},"(0018,9234)":{tag:"(0018,9234)",vr:"UL",name:"SpectroscopyAcquisitionPhaseColumns",vm:"1",version:"DICOM"},"(0018,9236)":{tag:"(0018,9236)",vr:"CS",name:"CardiacCyclePosition",vm:"1",version:"DICOM"},"(0018,9239)":{tag:"(0018,9239)",vr:"SQ",name:"SpecificAbsorptionRateSequence",vm:"1",version:"DICOM"},"(0018,9240)":{tag:"(0018,9240)",vr:"US",name:"RFEchoTrainLength",vm:"1",version:"DICOM"},"(0018,9241)":{tag:"(0018,9241)",vr:"US",name:"GradientEchoTrainLength",vm:"1",version:"DICOM"},"(0018,9250)":{tag:"(0018,9250)",vr:"CS",name:"ArterialSpinLabelingContrast",vm:"1",version:"DICOM"},"(0018,9251)":{tag:"(0018,9251)",vr:"SQ",name:"MRArterialSpinLabelingSequence",vm:"1",version:"DICOM"},"(0018,9252)":{tag:"(0018,9252)",vr:"LO",name:"ASLTechniqueDescription",vm:"1",version:"DICOM"},"(0018,9253)":{tag:"(0018,9253)",vr:"US",name:"ASLSlabNumber",vm:"1",version:"DICOM"},"(0018,9254)":{tag:"(0018,9254)",vr:"FD",name:"ASLSlabThickness",vm:"1",version:"DICOM"},"(0018,9255)":{tag:"(0018,9255)",vr:"FD",name:"ASLSlabOrientation",vm:"3",version:"DICOM"},"(0018,9256)":{tag:"(0018,9256)",vr:"FD",name:"ASLMidSlabPosition",vm:"3",version:"DICOM"},"(0018,9257)":{tag:"(0018,9257)",vr:"CS",name:"ASLContext",vm:"1",version:"DICOM"},"(0018,9258)":{tag:"(0018,9258)",vr:"UL",name:"ASLPulseTrainDuration",vm:"1",version:"DICOM"},"(0018,9259)":{tag:"(0018,9259)",vr:"CS",name:"ASLCrusherFlag",vm:"1",version:"DICOM"},"(0018,925A)":{tag:"(0018,925A)",vr:"FD",name:"ASLCrusherFlowLimit",vm:"1",version:"DICOM"},"(0018,925B)":{tag:"(0018,925B)",vr:"LO",name:"ASLCrusherDescription",vm:"1",version:"DICOM"},"(0018,925C)":{tag:"(0018,925C)",vr:"CS",name:"ASLBolusCutoffFlag",vm:"1",version:"DICOM"},"(0018,925D)":{tag:"(0018,925D)",vr:"SQ",name:"ASLBolusCutoffTimingSequence",vm:"1",version:"DICOM"},"(0018,925E)":{tag:"(0018,925E)",vr:"LO",name:"ASLBolusCutoffTechnique",vm:"1",version:"DICOM"},"(0018,925F)":{tag:"(0018,925F)",vr:"UL",name:"ASLBolusCutoffDelayTime",vm:"1",version:"DICOM"},"(0018,9260)":{tag:"(0018,9260)",vr:"SQ",name:"ASLSlabSequence",vm:"1",version:"DICOM"},"(0018,9295)":{tag:"(0018,9295)",vr:"FD",name:"ChemicalShiftMinimumIntegrationLimitInppm",vm:"1",version:"DICOM"},"(0018,9296)":{tag:"(0018,9296)",vr:"FD",name:"ChemicalShiftMaximumIntegrationLimitInppm",vm:"1",version:"DICOM"},"(0018,9297)":{tag:"(0018,9297)",vr:"CS",name:"WaterReferenceAcquisition",vm:"1",version:"DICOM"},"(0018,9298)":{tag:"(0018,9298)",vr:"IS",name:"EchoPeakPosition",vm:"1",version:"DICOM"},"(0018,9301)":{tag:"(0018,9301)",vr:"SQ",name:"CTAcquisitionTypeSequence",vm:"1",version:"DICOM"},"(0018,9302)":{tag:"(0018,9302)",vr:"CS",name:"AcquisitionType",vm:"1",version:"DICOM"},"(0018,9303)":{tag:"(0018,9303)",vr:"FD",name:"TubeAngle",vm:"1",version:"DICOM"},"(0018,9304)":{tag:"(0018,9304)",vr:"SQ",name:"CTAcquisitionDetailsSequence",vm:"1",version:"DICOM"},"(0018,9305)":{tag:"(0018,9305)",vr:"FD",name:"RevolutionTime",vm:"1",version:"DICOM"},"(0018,9306)":{tag:"(0018,9306)",vr:"FD",name:"SingleCollimationWidth",vm:"1",version:"DICOM"},"(0018,9307)":{tag:"(0018,9307)",vr:"FD",name:"TotalCollimationWidth",vm:"1",version:"DICOM"},"(0018,9308)":{tag:"(0018,9308)",vr:"SQ",name:"CTTableDynamicsSequence",vm:"1",version:"DICOM"},"(0018,9309)":{tag:"(0018,9309)",vr:"FD",name:"TableSpeed",vm:"1",version:"DICOM"},"(0018,9310)":{tag:"(0018,9310)",vr:"FD",name:"TableFeedPerRotation",vm:"1",version:"DICOM"},"(0018,9311)":{tag:"(0018,9311)",vr:"FD",name:"SpiralPitchFactor",vm:"1",version:"DICOM"},"(0018,9312)":{tag:"(0018,9312)",vr:"SQ",name:"CTGeometrySequence",vm:"1",version:"DICOM"},"(0018,9313)":{tag:"(0018,9313)",vr:"FD",name:"DataCollectionCenterPatient",vm:"3",version:"DICOM"},"(0018,9314)":{tag:"(0018,9314)",vr:"SQ",name:"CTReconstructionSequence",vm:"1",version:"DICOM"},"(0018,9315)":{tag:"(0018,9315)",vr:"CS",name:"ReconstructionAlgorithm",vm:"1",version:"DICOM"},"(0018,9316)":{tag:"(0018,9316)",vr:"CS",name:"ConvolutionKernelGroup",vm:"1",version:"DICOM"},"(0018,9317)":{tag:"(0018,9317)",vr:"FD",name:"ReconstructionFieldOfView",vm:"2",version:"DICOM"},"(0018,9318)":{tag:"(0018,9318)",vr:"FD",name:"ReconstructionTargetCenterPatient",vm:"3",version:"DICOM"},"(0018,9319)":{tag:"(0018,9319)",vr:"FD",name:"ReconstructionAngle",vm:"1",version:"DICOM"},"(0018,9320)":{tag:"(0018,9320)",vr:"SH",name:"ImageFilter",vm:"1",version:"DICOM"},"(0018,9321)":{tag:"(0018,9321)",vr:"SQ",name:"CTExposureSequence",vm:"1",version:"DICOM"},"(0018,9322)":{tag:"(0018,9322)",vr:"FD",name:"ReconstructionPixelSpacing",vm:"2",version:"DICOM"},"(0018,9323)":{tag:"(0018,9323)",vr:"CS",name:"ExposureModulationType",vm:"1",version:"DICOM"},"(0018,9324)":{tag:"(0018,9324)",vr:"FD",name:"EstimatedDoseSaving",vm:"1",version:"DICOM"},"(0018,9325)":{tag:"(0018,9325)",vr:"SQ",name:"CTXRayDetailsSequence",vm:"1",version:"DICOM"},"(0018,9326)":{tag:"(0018,9326)",vr:"SQ",name:"CTPositionSequence",vm:"1",version:"DICOM"},"(0018,9327)":{tag:"(0018,9327)",vr:"FD",name:"TablePosition",vm:"1",version:"DICOM"},"(0018,9328)":{tag:"(0018,9328)",vr:"FD",name:"ExposureTimeInms",vm:"1",version:"DICOM"},"(0018,9329)":{tag:"(0018,9329)",vr:"SQ",name:"CTImageFrameTypeSequence",vm:"1",version:"DICOM"},"(0018,9330)":{tag:"(0018,9330)",vr:"FD",name:"XRayTubeCurrentInmA",vm:"1",version:"DICOM"},"(0018,9332)":{tag:"(0018,9332)",vr:"FD",name:"ExposureInmAs",vm:"1",version:"DICOM"},"(0018,9333)":{tag:"(0018,9333)",vr:"CS",name:"ConstantVolumeFlag",vm:"1",version:"DICOM"},"(0018,9334)":{tag:"(0018,9334)",vr:"CS",name:"FluoroscopyFlag",vm:"1",version:"DICOM"},"(0018,9335)":{tag:"(0018,9335)",vr:"FD",name:"DistanceSourceToDataCollectionCenter",vm:"1",version:"DICOM"},"(0018,9337)":{tag:"(0018,9337)",vr:"US",name:"ContrastBolusAgentNumber",vm:"1",version:"DICOM"},"(0018,9338)":{tag:"(0018,9338)",vr:"SQ",name:"ContrastBolusIngredientCodeSequence",vm:"1",version:"DICOM"},"(0018,9340)":{tag:"(0018,9340)",vr:"SQ",name:"ContrastAdministrationProfileSequence",vm:"1",version:"DICOM"},"(0018,9341)":{tag:"(0018,9341)",vr:"SQ",name:"ContrastBolusUsageSequence",vm:"1",version:"DICOM"},"(0018,9342)":{tag:"(0018,9342)",vr:"CS",name:"ContrastBolusAgentAdministered",vm:"1",version:"DICOM"},"(0018,9343)":{tag:"(0018,9343)",vr:"CS",name:"ContrastBolusAgentDetected",vm:"1",version:"DICOM"},"(0018,9344)":{tag:"(0018,9344)",vr:"CS",name:"ContrastBolusAgentPhase",vm:"1",version:"DICOM"},"(0018,9345)":{tag:"(0018,9345)",vr:"FD",name:"CTDIvol",vm:"1",version:"DICOM"},"(0018,9346)":{tag:"(0018,9346)",vr:"SQ",name:"CTDIPhantomTypeCodeSequence",vm:"1",version:"DICOM"},"(0018,9351)":{tag:"(0018,9351)",vr:"FL",name:"CalciumScoringMassFactorPatient",vm:"1",version:"DICOM"},"(0018,9352)":{tag:"(0018,9352)",vr:"FL",name:"CalciumScoringMassFactorDevice",vm:"3",version:"DICOM"},"(0018,9353)":{tag:"(0018,9353)",vr:"FL",name:"EnergyWeightingFactor",vm:"1",version:"DICOM"},"(0018,9360)":{tag:"(0018,9360)",vr:"SQ",name:"CTAdditionalXRaySourceSequence",vm:"1",version:"DICOM"},"(0018,9361)":{tag:"(0018,9361)",vr:"CS",name:"MultienergyCTAcquisition",vm:"1",version:"DICOM"},"(0018,9362)":{tag:"(0018,9362)",vr:"SQ",name:"MultienergyCTAcquisitionSequence",vm:"1",version:"DICOM"},"(0018,9363)":{tag:"(0018,9363)",vr:"SQ",name:"MultienergyCTProcessingSequence",vm:"1",version:"DICOM"},"(0018,9364)":{tag:"(0018,9364)",vr:"SQ",name:"MultienergyCTCharacteristicsSequence",vm:"1",version:"DICOM"},"(0018,9365)":{tag:"(0018,9365)",vr:"SQ",name:"MultienergyCTXRaySourceSequence",vm:"1",version:"DICOM"},"(0018,9366)":{tag:"(0018,9366)",vr:"US",name:"XRaySourceIndex",vm:"1",version:"DICOM"},"(0018,9367)":{tag:"(0018,9367)",vr:"UC",name:"XRaySourceID",vm:"1",version:"DICOM"},"(0018,9368)":{tag:"(0018,9368)",vr:"CS",name:"MultienergySourceTechnique",vm:"1",version:"DICOM"},"(0018,9369)":{tag:"(0018,9369)",vr:"DT",name:"SourceStartDateTime",vm:"1",version:"DICOM"},"(0018,936A)":{tag:"(0018,936A)",vr:"DT",name:"SourceEndDateTime",vm:"1",version:"DICOM"},"(0018,936B)":{tag:"(0018,936B)",vr:"US",name:"SwitchingPhaseNumber",vm:"1",version:"DICOM"},"(0018,936C)":{tag:"(0018,936C)",vr:"DS",name:"SwitchingPhaseNominalDuration",vm:"1",version:"DICOM"},"(0018,936D)":{tag:"(0018,936D)",vr:"DS",name:"SwitchingPhaseTransitionDuration",vm:"1",version:"DICOM"},"(0018,936E)":{tag:"(0018,936E)",vr:"DS",name:"EffectiveBinEnergy",vm:"1",version:"DICOM"},"(0018,936F)":{tag:"(0018,936F)",vr:"SQ",name:"MultienergyCTXRayDetectorSequence",vm:"1",version:"DICOM"},"(0018,9370)":{tag:"(0018,9370)",vr:"US",name:"XRayDetectorIndex",vm:"1",version:"DICOM"},"(0018,9371)":{tag:"(0018,9371)",vr:"UC",name:"XRayDetectorID",vm:"1",version:"DICOM"},"(0018,9372)":{tag:"(0018,9372)",vr:"CS",name:"MultienergyDetectorType",vm:"1",version:"DICOM"},"(0018,9373)":{tag:"(0018,9373)",vr:"ST",name:"XRayDetectorLabel",vm:"1",version:"DICOM"},"(0018,9374)":{tag:"(0018,9374)",vr:"DS",name:"NominalMaxEnergy",vm:"1",version:"DICOM"},"(0018,9375)":{tag:"(0018,9375)",vr:"DS",name:"NominalMinEnergy",vm:"1",version:"DICOM"},"(0018,9376)":{tag:"(0018,9376)",vr:"US",name:"ReferencedXRayDetectorIndex",vm:"1-n",version:"DICOM"},"(0018,9377)":{tag:"(0018,9377)",vr:"US",name:"ReferencedXRaySourceIndex",vm:"1-n",version:"DICOM"},"(0018,9378)":{tag:"(0018,9378)",vr:"US",name:"ReferencedPathIndex",vm:"1-n",version:"DICOM"},"(0018,9379)":{tag:"(0018,9379)",vr:"SQ",name:"MultienergyCTPathSequence",vm:"1",version:"DICOM"},"(0018,937A)":{tag:"(0018,937A)",vr:"US",name:"MultienergyCTPathIndex",vm:"1",version:"DICOM"},"(0018,937B)":{tag:"(0018,937B)",vr:"UT",name:"MultienergyAcquisitionDescription",vm:"1",version:"DICOM"},"(0018,937C)":{tag:"(0018,937C)",vr:"FD",name:"MonoenergeticEnergyEquivalent",vm:"1",version:"DICOM"},"(0018,937D)":{tag:"(0018,937D)",vr:"SQ",name:"MaterialCodeSequence",vm:"1",version:"DICOM"},"(0018,937E)":{tag:"(0018,937E)",vr:"CS",name:"DecompositionMethod",vm:"1",version:"DICOM"},"(0018,937F)":{tag:"(0018,937F)",vr:"UT",name:"DecompositionDescription",vm:"1",version:"DICOM"},"(0018,9380)":{tag:"(0018,9380)",vr:"SQ",name:"DecompositionAlgorithmIdentificationSequence",vm:"1",version:"DICOM"},"(0018,9381)":{tag:"(0018,9381)",vr:"SQ",name:"DecompositionMaterialSequence",vm:"1",version:"DICOM"},"(0018,9382)":{tag:"(0018,9382)",vr:"SQ",name:"MaterialAttenuationSequence",vm:"1",version:"DICOM"},"(0018,9383)":{tag:"(0018,9383)",vr:"DS",name:"PhotonEnergy",vm:"1",version:"DICOM"},"(0018,9384)":{tag:"(0018,9384)",vr:"DS",name:"XRayMassAttenuationCoefficient",vm:"1",version:"DICOM"},"(0018,9401)":{tag:"(0018,9401)",vr:"SQ",name:"ProjectionPixelCalibrationSequence",vm:"1",version:"DICOM"},"(0018,9402)":{tag:"(0018,9402)",vr:"FL",name:"DistanceSourceToIsocenter",vm:"1",version:"DICOM"},"(0018,9403)":{tag:"(0018,9403)",vr:"FL",name:"DistanceObjectToTableTop",vm:"1",version:"DICOM"},"(0018,9404)":{tag:"(0018,9404)",vr:"FL",name:"ObjectPixelSpacingInCenterOfBeam",vm:"2",version:"DICOM"},"(0018,9405)":{tag:"(0018,9405)",vr:"SQ",name:"PositionerPositionSequence",vm:"1",version:"DICOM"},"(0018,9406)":{tag:"(0018,9406)",vr:"SQ",name:"TablePositionSequence",vm:"1",version:"DICOM"},"(0018,9407)":{tag:"(0018,9407)",vr:"SQ",name:"CollimatorShapeSequence",vm:"1",version:"DICOM"},"(0018,9410)":{tag:"(0018,9410)",vr:"CS",name:"PlanesInAcquisition",vm:"1",version:"DICOM"},"(0018,9412)":{tag:"(0018,9412)",vr:"SQ",name:"XAXRFFrameCharacteristicsSequence",vm:"1",version:"DICOM"},"(0018,9417)":{tag:"(0018,9417)",vr:"SQ",name:"FrameAcquisitionSequence",vm:"1",version:"DICOM"},"(0018,9420)":{tag:"(0018,9420)",vr:"CS",name:"XRayReceptorType",vm:"1",version:"DICOM"},"(0018,9423)":{tag:"(0018,9423)",vr:"LO",name:"AcquisitionProtocolName",vm:"1",version:"DICOM"},"(0018,9424)":{tag:"(0018,9424)",vr:"LT",name:"AcquisitionProtocolDescription",vm:"1",version:"DICOM"},"(0018,9425)":{tag:"(0018,9425)",vr:"CS",name:"ContrastBolusIngredientOpaque",vm:"1",version:"DICOM"},"(0018,9426)":{tag:"(0018,9426)",vr:"FL",name:"DistanceReceptorPlaneToDetectorHousing",vm:"1",version:"DICOM"},"(0018,9427)":{tag:"(0018,9427)",vr:"CS",name:"IntensifierActiveShape",vm:"1",version:"DICOM"},"(0018,9428)":{tag:"(0018,9428)",vr:"FL",name:"IntensifierActiveDimensions",vm:"1-2",version:"DICOM"},"(0018,9429)":{tag:"(0018,9429)",vr:"FL",name:"PhysicalDetectorSize",vm:"2",version:"DICOM"},"(0018,9430)":{tag:"(0018,9430)",vr:"FL",name:"PositionOfIsocenterProjection",vm:"2",version:"DICOM"},"(0018,9432)":{tag:"(0018,9432)",vr:"SQ",name:"FieldOfViewSequence",vm:"1",version:"DICOM"},"(0018,9433)":{tag:"(0018,9433)",vr:"LO",name:"FieldOfViewDescription",vm:"1",version:"DICOM"},"(0018,9434)":{tag:"(0018,9434)",vr:"SQ",name:"ExposureControlSensingRegionsSequence",vm:"1",version:"DICOM"},"(0018,9435)":{tag:"(0018,9435)",vr:"CS",name:"ExposureControlSensingRegionShape",vm:"1",version:"DICOM"},"(0018,9436)":{tag:"(0018,9436)",vr:"SS",name:"ExposureControlSensingRegionLeftVerticalEdge",vm:"1",version:"DICOM"},"(0018,9437)":{tag:"(0018,9437)",vr:"SS",name:"ExposureControlSensingRegionRightVerticalEdge",vm:"1",version:"DICOM"},"(0018,9438)":{tag:"(0018,9438)",vr:"SS",name:"ExposureControlSensingRegionUpperHorizontalEdge",vm:"1",version:"DICOM"},"(0018,9439)":{tag:"(0018,9439)",vr:"SS",name:"ExposureControlSensingRegionLowerHorizontalEdge",vm:"1",version:"DICOM"},"(0018,9440)":{tag:"(0018,9440)",vr:"SS",name:"CenterOfCircularExposureControlSensingRegion",vm:"2",version:"DICOM"},"(0018,9441)":{tag:"(0018,9441)",vr:"US",name:"RadiusOfCircularExposureControlSensingRegion",vm:"1",version:"DICOM"},"(0018,9442)":{tag:"(0018,9442)",vr:"SS",name:"VerticesOfThePolygonalExposureControlSensingRegion",vm:"2-n",version:"DICOM"},"(0018,9447)":{tag:"(0018,9447)",vr:"FL",name:"ColumnAngulationPatient",vm:"1",version:"DICOM"},"(0018,9449)":{tag:"(0018,9449)",vr:"FL",name:"BeamAngle",vm:"1",version:"DICOM"},"(0018,9451)":{tag:"(0018,9451)",vr:"SQ",name:"FrameDetectorParametersSequence",vm:"1",version:"DICOM"},"(0018,9452)":{tag:"(0018,9452)",vr:"FL",name:"CalculatedAnatomyThickness",vm:"1",version:"DICOM"},"(0018,9455)":{tag:"(0018,9455)",vr:"SQ",name:"CalibrationSequence",vm:"1",version:"DICOM"},"(0018,9456)":{tag:"(0018,9456)",vr:"SQ",name:"ObjectThicknessSequence",vm:"1",version:"DICOM"},"(0018,9457)":{tag:"(0018,9457)",vr:"CS",name:"PlaneIdentification",vm:"1",version:"DICOM"},"(0018,9461)":{tag:"(0018,9461)",vr:"FL",name:"FieldOfViewDimensionsInFloat",vm:"1-2",version:"DICOM"},"(0018,9462)":{tag:"(0018,9462)",vr:"SQ",name:"IsocenterReferenceSystemSequence",vm:"1",version:"DICOM"},"(0018,9463)":{tag:"(0018,9463)",vr:"FL",name:"PositionerIsocenterPrimaryAngle",vm:"1",version:"DICOM"},"(0018,9464)":{tag:"(0018,9464)",vr:"FL",name:"PositionerIsocenterSecondaryAngle",vm:"1",version:"DICOM"},"(0018,9465)":{tag:"(0018,9465)",vr:"FL",name:"PositionerIsocenterDetectorRotationAngle",vm:"1",version:"DICOM"},"(0018,9466)":{tag:"(0018,9466)",vr:"FL",name:"TableXPositionToIsocenter",vm:"1",version:"DICOM"},"(0018,9467)":{tag:"(0018,9467)",vr:"FL",name:"TableYPositionToIsocenter",vm:"1",version:"DICOM"},"(0018,9468)":{tag:"(0018,9468)",vr:"FL",name:"TableZPositionToIsocenter",vm:"1",version:"DICOM"},"(0018,9469)":{tag:"(0018,9469)",vr:"FL",name:"TableHorizontalRotationAngle",vm:"1",version:"DICOM"},"(0018,9470)":{tag:"(0018,9470)",vr:"FL",name:"TableHeadTiltAngle",vm:"1",version:"DICOM"},"(0018,9471)":{tag:"(0018,9471)",vr:"FL",name:"TableCradleTiltAngle",vm:"1",version:"DICOM"},"(0018,9472)":{tag:"(0018,9472)",vr:"SQ",name:"FrameDisplayShutterSequence",vm:"1",version:"DICOM"},"(0018,9473)":{tag:"(0018,9473)",vr:"FL",name:"AcquiredImageAreaDoseProduct",vm:"1",version:"DICOM"},"(0018,9474)":{tag:"(0018,9474)",vr:"CS",name:"CArmPositionerTabletopRelationship",vm:"1",version:"DICOM"},"(0018,9476)":{tag:"(0018,9476)",vr:"SQ",name:"XRayGeometrySequence",vm:"1",version:"DICOM"},"(0018,9477)":{tag:"(0018,9477)",vr:"SQ",name:"IrradiationEventIdentificationSequence",vm:"1",version:"DICOM"},"(0018,9504)":{tag:"(0018,9504)",vr:"SQ",name:"XRay3DFrameTypeSequence",vm:"1",version:"DICOM"},"(0018,9506)":{tag:"(0018,9506)",vr:"SQ",name:"ContributingSourcesSequence",vm:"1",version:"DICOM"},"(0018,9507)":{tag:"(0018,9507)",vr:"SQ",name:"XRay3DAcquisitionSequence",vm:"1",version:"DICOM"},"(0018,9508)":{tag:"(0018,9508)",vr:"FL",name:"PrimaryPositionerScanArc",vm:"1",version:"DICOM"},"(0018,9509)":{tag:"(0018,9509)",vr:"FL",name:"SecondaryPositionerScanArc",vm:"1",version:"DICOM"},"(0018,9510)":{tag:"(0018,9510)",vr:"FL",name:"PrimaryPositionerScanStartAngle",vm:"1",version:"DICOM"},"(0018,9511)":{tag:"(0018,9511)",vr:"FL",name:"SecondaryPositionerScanStartAngle",vm:"1",version:"DICOM"},"(0018,9514)":{tag:"(0018,9514)",vr:"FL",name:"PrimaryPositionerIncrement",vm:"1",version:"DICOM"},"(0018,9515)":{tag:"(0018,9515)",vr:"FL",name:"SecondaryPositionerIncrement",vm:"1",version:"DICOM"},"(0018,9516)":{tag:"(0018,9516)",vr:"DT",name:"StartAcquisitionDateTime",vm:"1",version:"DICOM"},"(0018,9517)":{tag:"(0018,9517)",vr:"DT",name:"EndAcquisitionDateTime",vm:"1",version:"DICOM"},"(0018,9518)":{tag:"(0018,9518)",vr:"SS",name:"PrimaryPositionerIncrementSign",vm:"1",version:"DICOM"},"(0018,9519)":{tag:"(0018,9519)",vr:"SS",name:"SecondaryPositionerIncrementSign",vm:"1",version:"DICOM"},"(0018,9524)":{tag:"(0018,9524)",vr:"LO",name:"ApplicationName",vm:"1",version:"DICOM"},"(0018,9525)":{tag:"(0018,9525)",vr:"LO",name:"ApplicationVersion",vm:"1",version:"DICOM"},"(0018,9526)":{tag:"(0018,9526)",vr:"LO",name:"ApplicationManufacturer",vm:"1",version:"DICOM"},"(0018,9527)":{tag:"(0018,9527)",vr:"CS",name:"AlgorithmType",vm:"1",version:"DICOM"},"(0018,9528)":{tag:"(0018,9528)",vr:"LO",name:"AlgorithmDescription",vm:"1",version:"DICOM"},"(0018,9530)":{tag:"(0018,9530)",vr:"SQ",name:"XRay3DReconstructionSequence",vm:"1",version:"DICOM"},"(0018,9531)":{tag:"(0018,9531)",vr:"LO",name:"ReconstructionDescription",vm:"1",version:"DICOM"},"(0018,9538)":{tag:"(0018,9538)",vr:"SQ",name:"PerProjectionAcquisitionSequence",vm:"1",version:"DICOM"},"(0018,9541)":{tag:"(0018,9541)",vr:"SQ",name:"DetectorPositionSequence",vm:"1",version:"DICOM"},"(0018,9542)":{tag:"(0018,9542)",vr:"SQ",name:"XRayAcquisitionDoseSequence",vm:"1",version:"DICOM"},"(0018,9543)":{tag:"(0018,9543)",vr:"FD",name:"XRaySourceIsocenterPrimaryAngle",vm:"1",version:"DICOM"},"(0018,9544)":{tag:"(0018,9544)",vr:"FD",name:"XRaySourceIsocenterSecondaryAngle",vm:"1",version:"DICOM"},"(0018,9545)":{tag:"(0018,9545)",vr:"FD",name:"BreastSupportIsocenterPrimaryAngle",vm:"1",version:"DICOM"},"(0018,9546)":{tag:"(0018,9546)",vr:"FD",name:"BreastSupportIsocenterSecondaryAngle",vm:"1",version:"DICOM"},"(0018,9547)":{tag:"(0018,9547)",vr:"FD",name:"BreastSupportXPositionToIsocenter",vm:"1",version:"DICOM"},"(0018,9548)":{tag:"(0018,9548)",vr:"FD",name:"BreastSupportYPositionToIsocenter",vm:"1",version:"DICOM"},"(0018,9549)":{tag:"(0018,9549)",vr:"FD",name:"BreastSupportZPositionToIsocenter",vm:"1",version:"DICOM"},"(0018,9550)":{tag:"(0018,9550)",vr:"FD",name:"DetectorIsocenterPrimaryAngle",vm:"1",version:"DICOM"},"(0018,9551)":{tag:"(0018,9551)",vr:"FD",name:"DetectorIsocenterSecondaryAngle",vm:"1",version:"DICOM"},"(0018,9552)":{tag:"(0018,9552)",vr:"FD",name:"DetectorXPositionToIsocenter",vm:"1",version:"DICOM"},"(0018,9553)":{tag:"(0018,9553)",vr:"FD",name:"DetectorYPositionToIsocenter",vm:"1",version:"DICOM"},"(0018,9554)":{tag:"(0018,9554)",vr:"FD",name:"DetectorZPositionToIsocenter",vm:"1",version:"DICOM"},"(0018,9555)":{tag:"(0018,9555)",vr:"SQ",name:"XRayGridSequence",vm:"1",version:"DICOM"},"(0018,9556)":{tag:"(0018,9556)",vr:"SQ",name:"XRayFilterSequence",vm:"1",version:"DICOM"},"(0018,9557)":{tag:"(0018,9557)",vr:"FD",name:"DetectorActiveAreaTLHCPosition",vm:"3",version:"DICOM"},"(0018,9558)":{tag:"(0018,9558)",vr:"FD",name:"DetectorActiveAreaOrientation",vm:"6",version:"DICOM"},"(0018,9559)":{tag:"(0018,9559)",vr:"CS",name:"PositionerPrimaryAngleDirection",vm:"1",version:"DICOM"},"(0018,9601)":{tag:"(0018,9601)",vr:"SQ",name:"DiffusionBMatrixSequence",vm:"1",version:"DICOM"},"(0018,9602)":{tag:"(0018,9602)",vr:"FD",name:"DiffusionBValueXX",vm:"1",version:"DICOM"},"(0018,9603)":{tag:"(0018,9603)",vr:"FD",name:"DiffusionBValueXY",vm:"1",version:"DICOM"},"(0018,9604)":{tag:"(0018,9604)",vr:"FD",name:"DiffusionBValueXZ",vm:"1",version:"DICOM"},"(0018,9605)":{tag:"(0018,9605)",vr:"FD",name:"DiffusionBValueYY",vm:"1",version:"DICOM"},"(0018,9606)":{tag:"(0018,9606)",vr:"FD",name:"DiffusionBValueYZ",vm:"1",version:"DICOM"},"(0018,9607)":{tag:"(0018,9607)",vr:"FD",name:"DiffusionBValueZZ",vm:"1",version:"DICOM"},"(0018,9621)":{tag:"(0018,9621)",vr:"SQ",name:"FunctionalMRSequence",vm:"1",version:"DICOM"},"(0018,9622)":{tag:"(0018,9622)",vr:"CS",name:"FunctionalSettlingPhaseFramesPresent",vm:"1",version:"DICOM"},"(0018,9623)":{tag:"(0018,9623)",vr:"DT",name:"FunctionalSyncPulse",vm:"1",version:"DICOM"},"(0018,9624)":{tag:"(0018,9624)",vr:"CS",name:"SettlingPhaseFrame",vm:"1",version:"DICOM"},"(0018,9701)":{tag:"(0018,9701)",vr:"DT",name:"DecayCorrectionDateTime",vm:"1",version:"DICOM"},"(0018,9715)":{tag:"(0018,9715)",vr:"FD",name:"StartDensityThreshold",vm:"1",version:"DICOM"},"(0018,9716)":{tag:"(0018,9716)",vr:"FD",name:"StartRelativeDensityDifferenceThreshold",vm:"1",version:"DICOM"},"(0018,9717)":{tag:"(0018,9717)",vr:"FD",name:"StartCardiacTriggerCountThreshold",vm:"1",version:"DICOM"},"(0018,9718)":{tag:"(0018,9718)",vr:"FD",name:"StartRespiratoryTriggerCountThreshold",vm:"1",version:"DICOM"},"(0018,9719)":{tag:"(0018,9719)",vr:"FD",name:"TerminationCountsThreshold",vm:"1",version:"DICOM"},"(0018,9720)":{tag:"(0018,9720)",vr:"FD",name:"TerminationDensityThreshold",vm:"1",version:"DICOM"},"(0018,9721)":{tag:"(0018,9721)",vr:"FD",name:"TerminationRelativeDensityThreshold",vm:"1",version:"DICOM"},"(0018,9722)":{tag:"(0018,9722)",vr:"FD",name:"TerminationTimeThreshold",vm:"1",version:"DICOM"},"(0018,9723)":{tag:"(0018,9723)",vr:"FD",name:"TerminationCardiacTriggerCountThreshold",vm:"1",version:"DICOM"},"(0018,9724)":{tag:"(0018,9724)",vr:"FD",name:"TerminationRespiratoryTriggerCountThreshold",vm:"1",version:"DICOM"},"(0018,9725)":{tag:"(0018,9725)",vr:"CS",name:"DetectorGeometry",vm:"1",version:"DICOM"},"(0018,9726)":{tag:"(0018,9726)",vr:"FD",name:"TransverseDetectorSeparation",vm:"1",version:"DICOM"},"(0018,9727)":{tag:"(0018,9727)",vr:"FD",name:"AxialDetectorDimension",vm:"1",version:"DICOM"},"(0018,9729)":{tag:"(0018,9729)",vr:"US",name:"RadiopharmaceuticalAgentNumber",vm:"1",version:"DICOM"},"(0018,9732)":{tag:"(0018,9732)",vr:"SQ",name:"PETFrameAcquisitionSequence",vm:"1",version:"DICOM"},"(0018,9733)":{tag:"(0018,9733)",vr:"SQ",name:"PETDetectorMotionDetailsSequence",vm:"1",version:"DICOM"},"(0018,9734)":{tag:"(0018,9734)",vr:"SQ",name:"PETTableDynamicsSequence",vm:"1",version:"DICOM"},"(0018,9735)":{tag:"(0018,9735)",vr:"SQ",name:"PETPositionSequence",vm:"1",version:"DICOM"},"(0018,9736)":{tag:"(0018,9736)",vr:"SQ",name:"PETFrameCorrectionFactorsSequence",vm:"1",version:"DICOM"},"(0018,9737)":{tag:"(0018,9737)",vr:"SQ",name:"RadiopharmaceuticalUsageSequence",vm:"1",version:"DICOM"},"(0018,9738)":{tag:"(0018,9738)",vr:"CS",name:"AttenuationCorrectionSource",vm:"1",version:"DICOM"},"(0018,9739)":{tag:"(0018,9739)",vr:"US",name:"NumberOfIterations",vm:"1",version:"DICOM"},"(0018,9740)":{tag:"(0018,9740)",vr:"US",name:"NumberOfSubsets",vm:"1",version:"DICOM"},"(0018,9749)":{tag:"(0018,9749)",vr:"SQ",name:"PETReconstructionSequence",vm:"1",version:"DICOM"},"(0018,9751)":{tag:"(0018,9751)",vr:"SQ",name:"PETFrameTypeSequence",vm:"1",version:"DICOM"},"(0018,9755)":{tag:"(0018,9755)",vr:"CS",name:"TimeOfFlightInformationUsed",vm:"1",version:"DICOM"},"(0018,9756)":{tag:"(0018,9756)",vr:"CS",name:"ReconstructionType",vm:"1",version:"DICOM"},"(0018,9758)":{tag:"(0018,9758)",vr:"CS",name:"DecayCorrected",vm:"1",version:"DICOM"},"(0018,9759)":{tag:"(0018,9759)",vr:"CS",name:"AttenuationCorrected",vm:"1",version:"DICOM"},"(0018,9760)":{tag:"(0018,9760)",vr:"CS",name:"ScatterCorrected",vm:"1",version:"DICOM"},"(0018,9761)":{tag:"(0018,9761)",vr:"CS",name:"DeadTimeCorrected",vm:"1",version:"DICOM"},"(0018,9762)":{tag:"(0018,9762)",vr:"CS",name:"GantryMotionCorrected",vm:"1",version:"DICOM"},"(0018,9763)":{tag:"(0018,9763)",vr:"CS",name:"PatientMotionCorrected",vm:"1",version:"DICOM"},"(0018,9764)":{tag:"(0018,9764)",vr:"CS",name:"CountLossNormalizationCorrected",vm:"1",version:"DICOM"},"(0018,9765)":{tag:"(0018,9765)",vr:"CS",name:"RandomsCorrected",vm:"1",version:"DICOM"},"(0018,9766)":{tag:"(0018,9766)",vr:"CS",name:"NonUniformRadialSamplingCorrected",vm:"1",version:"DICOM"},"(0018,9767)":{tag:"(0018,9767)",vr:"CS",name:"SensitivityCalibrated",vm:"1",version:"DICOM"},"(0018,9768)":{tag:"(0018,9768)",vr:"CS",name:"DetectorNormalizationCorrection",vm:"1",version:"DICOM"},"(0018,9769)":{tag:"(0018,9769)",vr:"CS",name:"IterativeReconstructionMethod",vm:"1",version:"DICOM"},"(0018,9770)":{tag:"(0018,9770)",vr:"CS",name:"AttenuationCorrectionTemporalRelationship",vm:"1",version:"DICOM"},"(0018,9771)":{tag:"(0018,9771)",vr:"SQ",name:"PatientPhysiologicalStateSequence",vm:"1",version:"DICOM"},"(0018,9772)":{tag:"(0018,9772)",vr:"SQ",name:"PatientPhysiologicalStateCodeSequence",vm:"1",version:"DICOM"},"(0018,9801)":{tag:"(0018,9801)",vr:"FD",name:"DepthsOfFocus",vm:"1-n",version:"DICOM"},"(0018,9803)":{tag:"(0018,9803)",vr:"SQ",name:"ExcludedIntervalsSequence",vm:"1",version:"DICOM"},"(0018,9804)":{tag:"(0018,9804)",vr:"DT",name:"ExclusionStartDateTime",vm:"1",version:"DICOM"},"(0018,9805)":{tag:"(0018,9805)",vr:"FD",name:"ExclusionDuration",vm:"1",version:"DICOM"},"(0018,9806)":{tag:"(0018,9806)",vr:"SQ",name:"USImageDescriptionSequence",vm:"1",version:"DICOM"},"(0018,9807)":{tag:"(0018,9807)",vr:"SQ",name:"ImageDataTypeSequence",vm:"1",version:"DICOM"},"(0018,9808)":{tag:"(0018,9808)",vr:"CS",name:"DataType",vm:"1",version:"DICOM"},"(0018,9809)":{tag:"(0018,9809)",vr:"SQ",name:"TransducerScanPatternCodeSequence",vm:"1",version:"DICOM"},"(0018,980B)":{tag:"(0018,980B)",vr:"CS",name:"AliasedDataType",vm:"1",version:"DICOM"},"(0018,980C)":{tag:"(0018,980C)",vr:"CS",name:"PositionMeasuringDeviceUsed",vm:"1",version:"DICOM"},"(0018,980D)":{tag:"(0018,980D)",vr:"SQ",name:"TransducerGeometryCodeSequence",vm:"1",version:"DICOM"},"(0018,980E)":{tag:"(0018,980E)",vr:"SQ",name:"TransducerBeamSteeringCodeSequence",vm:"1",version:"DICOM"},"(0018,980F)":{tag:"(0018,980F)",vr:"SQ",name:"TransducerApplicationCodeSequence",vm:"1",version:"DICOM"},"(0018,9810)":{tag:"(0018,9810)",vr:"xs",name:"ZeroVelocityPixelValue",vm:"1",version:"DICOM"},"(0018,9821)":{tag:"(0018,9821)",vr:"SQ",name:"PhotoacousticExcitationCharacteristicsSequence",vm:"1",version:"DICOM"},"(0018,9822)":{tag:"(0018,9822)",vr:"FD",name:"ExcitationSpectralWidth",vm:"1",version:"DICOM"},"(0018,9823)":{tag:"(0018,9823)",vr:"FD",name:"ExcitationEnergy",vm:"1",version:"DICOM"},"(0018,9824)":{tag:"(0018,9824)",vr:"FD",name:"ExcitationPulseDuration",vm:"1",version:"DICOM"},"(0018,9825)":{tag:"(0018,9825)",vr:"SQ",name:"ExcitationWavelengthSequence",vm:"1",version:"DICOM"},"(0018,9826)":{tag:"(0018,9826)",vr:"FD",name:"ExcitationWavelength",vm:"1",version:"DICOM"},"(0018,9828)":{tag:"(0018,9828)",vr:"CS",name:"IlluminationTranslationFlag",vm:"1",version:"DICOM"},"(0018,9829)":{tag:"(0018,9829)",vr:"CS",name:"AcousticCouplingMediumFlag",vm:"1",version:"DICOM"},"(0018,982A)":{tag:"(0018,982A)",vr:"SQ",name:"AcousticCouplingMediumCodeSequence",vm:"1",version:"DICOM"},"(0018,982B)":{tag:"(0018,982B)",vr:"FD",name:"AcousticCouplingMediumTemperature",vm:"1",version:"DICOM"},"(0018,982C)":{tag:"(0018,982C)",vr:"SQ",name:"TransducerResponseSequence",vm:"1",version:"DICOM"},"(0018,982D)":{tag:"(0018,982D)",vr:"FD",name:"CenterFrequency",vm:"1",version:"DICOM"},"(0018,982E)":{tag:"(0018,982E)",vr:"FD",name:"FractionalBandwidth",vm:"1",version:"DICOM"},"(0018,982F)":{tag:"(0018,982F)",vr:"FD",name:"LowerCutoffFrequency",vm:"1",version:"DICOM"},"(0018,9830)":{tag:"(0018,9830)",vr:"FD",name:"UpperCutoffFrequency",vm:"1",version:"DICOM"},"(0018,9831)":{tag:"(0018,9831)",vr:"SQ",name:"TransducerTechnologySequence",vm:"1",version:"DICOM"},"(0018,9832)":{tag:"(0018,9832)",vr:"SQ",name:"SoundSpeedCorrectionMechanismCodeSequence",vm:"1",version:"DICOM"},"(0018,9833)":{tag:"(0018,9833)",vr:"FD",name:"ObjectSoundSpeed",vm:"1",version:"DICOM"},"(0018,9834)":{tag:"(0018,9834)",vr:"FD",name:"AcousticCouplingMediumSoundSpeed",vm:"1",version:"DICOM"},"(0018,9835)":{tag:"(0018,9835)",vr:"SQ",name:"PhotoacousticImageFrameTypeSequence",vm:"1",version:"DICOM"},"(0018,9836)":{tag:"(0018,9836)",vr:"SQ",name:"ImageDataTypeCodeSequence",vm:"1",version:"DICOM"},"(0018,9900)":{tag:"(0018,9900)",vr:"LO",name:"ReferenceLocationLabel",vm:"1",version:"DICOM"},"(0018,9901)":{tag:"(0018,9901)",vr:"UT",name:"ReferenceLocationDescription",vm:"1",version:"DICOM"},"(0018,9902)":{tag:"(0018,9902)",vr:"SQ",name:"ReferenceBasisCodeSequence",vm:"1",version:"DICOM"},"(0018,9903)":{tag:"(0018,9903)",vr:"SQ",name:"ReferenceGeometryCodeSequence",vm:"1",version:"DICOM"},"(0018,9904)":{tag:"(0018,9904)",vr:"DS",name:"OffsetDistance",vm:"1",version:"DICOM"},"(0018,9905)":{tag:"(0018,9905)",vr:"CS",name:"OffsetDirection",vm:"1",version:"DICOM"},"(0018,9906)":{tag:"(0018,9906)",vr:"SQ",name:"PotentialScheduledProtocolCodeSequence",vm:"1",version:"DICOM"},"(0018,9907)":{tag:"(0018,9907)",vr:"SQ",name:"PotentialRequestedProcedureCodeSequence",vm:"1",version:"DICOM"},"(0018,9908)":{tag:"(0018,9908)",vr:"UC",name:"PotentialReasonsForProcedure",vm:"1-n",version:"DICOM"},"(0018,9909)":{tag:"(0018,9909)",vr:"SQ",name:"PotentialReasonsForProcedureCodeSequence",vm:"1",version:"DICOM"},"(0018,990A)":{tag:"(0018,990A)",vr:"UC",name:"PotentialDiagnosticTasks",vm:"1-n",version:"DICOM"},"(0018,990B)":{tag:"(0018,990B)",vr:"SQ",name:"ContraindicationsCodeSequence",vm:"1",version:"DICOM"},"(0018,990C)":{tag:"(0018,990C)",vr:"SQ",name:"ReferencedDefinedProtocolSequence",vm:"1",version:"DICOM"},"(0018,990D)":{tag:"(0018,990D)",vr:"SQ",name:"ReferencedPerformedProtocolSequence",vm:"1",version:"DICOM"},"(0018,990E)":{tag:"(0018,990E)",vr:"SQ",name:"PredecessorProtocolSequence",vm:"1",version:"DICOM"},"(0018,990F)":{tag:"(0018,990F)",vr:"UT",name:"ProtocolPlanningInformation",vm:"1",version:"DICOM"},"(0018,9910)":{tag:"(0018,9910)",vr:"UT",name:"ProtocolDesignRationale",vm:"1",version:"DICOM"},"(0018,9911)":{tag:"(0018,9911)",vr:"SQ",name:"PatientSpecificationSequence",vm:"1",version:"DICOM"},"(0018,9912)":{tag:"(0018,9912)",vr:"SQ",name:"ModelSpecificationSequence",vm:"1",version:"DICOM"},"(0018,9913)":{tag:"(0018,9913)",vr:"SQ",name:"ParametersSpecificationSequence",vm:"1",version:"DICOM"},"(0018,9914)":{tag:"(0018,9914)",vr:"SQ",name:"InstructionSequence",vm:"1",version:"DICOM"},"(0018,9915)":{tag:"(0018,9915)",vr:"US",name:"InstructionIndex",vm:"1",version:"DICOM"},"(0018,9916)":{tag:"(0018,9916)",vr:"LO",name:"InstructionText",vm:"1",version:"DICOM"},"(0018,9917)":{tag:"(0018,9917)",vr:"UT",name:"InstructionDescription",vm:"1",version:"DICOM"},"(0018,9918)":{tag:"(0018,9918)",vr:"CS",name:"InstructionPerformedFlag",vm:"1",version:"DICOM"},"(0018,9919)":{tag:"(0018,9919)",vr:"DT",name:"InstructionPerformedDateTime",vm:"1",version:"DICOM"},"(0018,991A)":{tag:"(0018,991A)",vr:"UT",name:"InstructionPerformanceComment",vm:"1",version:"DICOM"},"(0018,991B)":{tag:"(0018,991B)",vr:"SQ",name:"PatientPositioningInstructionSequence",vm:"1",version:"DICOM"},"(0018,991C)":{tag:"(0018,991C)",vr:"SQ",name:"PositioningMethodCodeSequence",vm:"1",version:"DICOM"},"(0018,991D)":{tag:"(0018,991D)",vr:"SQ",name:"PositioningLandmarkSequence",vm:"1",version:"DICOM"},"(0018,991E)":{tag:"(0018,991E)",vr:"UI",name:"TargetFrameOfReferenceUID",vm:"1",version:"DICOM"},"(0018,991F)":{tag:"(0018,991F)",vr:"SQ",name:"AcquisitionProtocolElementSpecificationSequence",vm:"1",version:"DICOM"},"(0018,9920)":{tag:"(0018,9920)",vr:"SQ",name:"AcquisitionProtocolElementSequence",vm:"1",version:"DICOM"},"(0018,9921)":{tag:"(0018,9921)",vr:"US",name:"ProtocolElementNumber",vm:"1",version:"DICOM"},"(0018,9922)":{tag:"(0018,9922)",vr:"LO",name:"ProtocolElementName",vm:"1",version:"DICOM"},"(0018,9923)":{tag:"(0018,9923)",vr:"UT",name:"ProtocolElementCharacteristicsSummary",vm:"1",version:"DICOM"},"(0018,9924)":{tag:"(0018,9924)",vr:"UT",name:"ProtocolElementPurpose",vm:"1",version:"DICOM"},"(0018,9930)":{tag:"(0018,9930)",vr:"CS",name:"AcquisitionMotion",vm:"1",version:"DICOM"},"(0018,9931)":{tag:"(0018,9931)",vr:"SQ",name:"AcquisitionStartLocationSequence",vm:"1",version:"DICOM"},"(0018,9932)":{tag:"(0018,9932)",vr:"SQ",name:"AcquisitionEndLocationSequence",vm:"1",version:"DICOM"},"(0018,9933)":{tag:"(0018,9933)",vr:"SQ",name:"ReconstructionProtocolElementSpecificationSequence",vm:"1",version:"DICOM"},"(0018,9934)":{tag:"(0018,9934)",vr:"SQ",name:"ReconstructionProtocolElementSequence",vm:"1",version:"DICOM"},"(0018,9935)":{tag:"(0018,9935)",vr:"SQ",name:"StorageProtocolElementSpecificationSequence",vm:"1",version:"DICOM"},"(0018,9936)":{tag:"(0018,9936)",vr:"SQ",name:"StorageProtocolElementSequence",vm:"1",version:"DICOM"},"(0018,9937)":{tag:"(0018,9937)",vr:"LO",name:"RequestedSeriesDescription",vm:"1",version:"DICOM"},"(0018,9938)":{tag:"(0018,9938)",vr:"US",name:"SourceAcquisitionProtocolElementNumber",vm:"1-n",version:"DICOM"},"(0018,9939)":{tag:"(0018,9939)",vr:"US",name:"SourceAcquisitionBeamNumber",vm:"1-n",version:"DICOM"},"(0018,993A)":{tag:"(0018,993A)",vr:"US",name:"SourceReconstructionProtocolElementNumber",vm:"1-n",version:"DICOM"},"(0018,993B)":{tag:"(0018,993B)",vr:"SQ",name:"ReconstructionStartLocationSequence",vm:"1",version:"DICOM"},"(0018,993C)":{tag:"(0018,993C)",vr:"SQ",name:"ReconstructionEndLocationSequence",vm:"1",version:"DICOM"},"(0018,993D)":{tag:"(0018,993D)",vr:"SQ",name:"ReconstructionAlgorithmSequence",vm:"1",version:"DICOM"},"(0018,993E)":{tag:"(0018,993E)",vr:"SQ",name:"ReconstructionTargetCenterLocationSequence",vm:"1",version:"DICOM"},"(0018,9941)":{tag:"(0018,9941)",vr:"UT",name:"ImageFilterDescription",vm:"1",version:"DICOM"},"(0018,9942)":{tag:"(0018,9942)",vr:"FD",name:"CTDIvolNotificationTrigger",vm:"1",version:"DICOM"},"(0018,9943)":{tag:"(0018,9943)",vr:"FD",name:"DLPNotificationTrigger",vm:"1",version:"DICOM"},"(0018,9944)":{tag:"(0018,9944)",vr:"CS",name:"AutoKVPSelectionType",vm:"1",version:"DICOM"},"(0018,9945)":{tag:"(0018,9945)",vr:"FD",name:"AutoKVPUpperBound",vm:"1",version:"DICOM"},"(0018,9946)":{tag:"(0018,9946)",vr:"FD",name:"AutoKVPLowerBound",vm:"1",version:"DICOM"},"(0018,9947)":{tag:"(0018,9947)",vr:"CS",name:"ProtocolDefinedPatientPosition",vm:"1",version:"DICOM"},"(0018,A001)":{tag:"(0018,A001)",vr:"SQ",name:"ContributingEquipmentSequence",vm:"1",version:"DICOM"},"(0018,A002)":{tag:"(0018,A002)",vr:"DT",name:"ContributionDateTime",vm:"1",version:"DICOM"},"(0018,A003)":{tag:"(0018,A003)",vr:"ST",name:"ContributionDescription",vm:"1",version:"DICOM"},"(0020,000D)":{tag:"(0020,000D)",vr:"UI",name:"StudyInstanceUID",vm:"1",version:"DICOM"},"(0020,000E)":{tag:"(0020,000E)",vr:"UI",name:"SeriesInstanceUID",vm:"1",version:"DICOM"},"(0020,0010)":{tag:"(0020,0010)",vr:"SH",name:"StudyID",vm:"1",version:"DICOM"},"(0020,0011)":{tag:"(0020,0011)",vr:"IS",name:"SeriesNumber",vm:"1",version:"DICOM"},"(0020,0012)":{tag:"(0020,0012)",vr:"IS",name:"AcquisitionNumber",vm:"1",version:"DICOM"},"(0020,0013)":{tag:"(0020,0013)",vr:"IS",name:"InstanceNumber",vm:"1",version:"DICOM"},"(0020,0019)":{tag:"(0020,0019)",vr:"IS",name:"ItemNumber",vm:"1",version:"DICOM"},"(0020,0020)":{tag:"(0020,0020)",vr:"CS",name:"PatientOrientation",vm:"2",version:"DICOM"},"(0020,0027)":{tag:"(0020,0027)",vr:"LO",name:"PyramidLabel",vm:"1",version:"DICOM"},"(0020,0032)":{tag:"(0020,0032)",vr:"DS",name:"ImagePositionPatient",vm:"3",version:"DICOM"},"(0020,0037)":{tag:"(0020,0037)",vr:"DS",name:"ImageOrientationPatient",vm:"6",version:"DICOM"},"(0020,0052)":{tag:"(0020,0052)",vr:"UI",name:"FrameOfReferenceUID",vm:"1",version:"DICOM"},"(0020,0060)":{tag:"(0020,0060)",vr:"CS",name:"Laterality",vm:"1",version:"DICOM"},"(0020,0062)":{tag:"(0020,0062)",vr:"CS",name:"ImageLaterality",vm:"1",version:"DICOM"},"(0020,0100)":{tag:"(0020,0100)",vr:"IS",name:"TemporalPositionIdentifier",vm:"1",version:"DICOM"},"(0020,0105)":{tag:"(0020,0105)",vr:"IS",name:"NumberOfTemporalPositions",vm:"1",version:"DICOM"},"(0020,0110)":{tag:"(0020,0110)",vr:"DS",name:"TemporalResolution",vm:"1",version:"DICOM"},"(0020,0200)":{tag:"(0020,0200)",vr:"UI",name:"SynchronizationFrameOfReferenceUID",vm:"1",version:"DICOM"},"(0020,0242)":{tag:"(0020,0242)",vr:"UI",name:"SOPInstanceUIDOfConcatenationSource",vm:"1",version:"DICOM"},"(0020,1002)":{tag:"(0020,1002)",vr:"IS",name:"ImagesInAcquisition",vm:"1",version:"DICOM"},"(0020,103F)":{tag:"(0020,103F)",vr:"LO",name:"TargetPositionReferenceIndicator",vm:"1",version:"DICOM"},"(0020,1040)":{tag:"(0020,1040)",vr:"LO",name:"PositionReferenceIndicator",vm:"1",version:"DICOM"},"(0020,1041)":{tag:"(0020,1041)",vr:"DS",name:"SliceLocation",vm:"1",version:"DICOM"},"(0020,1200)":{tag:"(0020,1200)",vr:"IS",name:"NumberOfPatientRelatedStudies",vm:"1",version:"DICOM"},"(0020,1202)":{tag:"(0020,1202)",vr:"IS",name:"NumberOfPatientRelatedSeries",vm:"1",version:"DICOM"},"(0020,1204)":{tag:"(0020,1204)",vr:"IS",name:"NumberOfPatientRelatedInstances",vm:"1",version:"DICOM"},"(0020,1206)":{tag:"(0020,1206)",vr:"IS",name:"NumberOfStudyRelatedSeries",vm:"1",version:"DICOM"},"(0020,1208)":{tag:"(0020,1208)",vr:"IS",name:"NumberOfStudyRelatedInstances",vm:"1",version:"DICOM"},"(0020,1209)":{tag:"(0020,1209)",vr:"IS",name:"NumberOfSeriesRelatedInstances",vm:"1",version:"DICOM"},"(0020,4000)":{tag:"(0020,4000)",vr:"LT",name:"ImageComments",vm:"1",version:"DICOM"},"(0020,9056)":{tag:"(0020,9056)",vr:"SH",name:"StackID",vm:"1",version:"DICOM"},"(0020,9057)":{tag:"(0020,9057)",vr:"UL",name:"InStackPositionNumber",vm:"1",version:"DICOM"},"(0020,9071)":{tag:"(0020,9071)",vr:"SQ",name:"FrameAnatomySequence",vm:"1",version:"DICOM"},"(0020,9072)":{tag:"(0020,9072)",vr:"CS",name:"FrameLaterality",vm:"1",version:"DICOM"},"(0020,9111)":{tag:"(0020,9111)",vr:"SQ",name:"FrameContentSequence",vm:"1",version:"DICOM"},"(0020,9113)":{tag:"(0020,9113)",vr:"SQ",name:"PlanePositionSequence",vm:"1",version:"DICOM"},"(0020,9116)":{tag:"(0020,9116)",vr:"SQ",name:"PlaneOrientationSequence",vm:"1",version:"DICOM"},"(0020,9128)":{tag:"(0020,9128)",vr:"UL",name:"TemporalPositionIndex",vm:"1",version:"DICOM"},"(0020,9153)":{tag:"(0020,9153)",vr:"FD",name:"NominalCardiacTriggerDelayTime",vm:"1",version:"DICOM"},"(0020,9154)":{tag:"(0020,9154)",vr:"FL",name:"NominalCardiacTriggerTimePriorToRPeak",vm:"1",version:"DICOM"},"(0020,9155)":{tag:"(0020,9155)",vr:"FL",name:"ActualCardiacTriggerTimePriorToRPeak",vm:"1",version:"DICOM"},"(0020,9156)":{tag:"(0020,9156)",vr:"US",name:"FrameAcquisitionNumber",vm:"1",version:"DICOM"},"(0020,9157)":{tag:"(0020,9157)",vr:"UL",name:"DimensionIndexValues",vm:"1-n",version:"DICOM"},"(0020,9158)":{tag:"(0020,9158)",vr:"LT",name:"FrameComments",vm:"1",version:"DICOM"},"(0020,9161)":{tag:"(0020,9161)",vr:"UI",name:"ConcatenationUID",vm:"1",version:"DICOM"},"(0020,9162)":{tag:"(0020,9162)",vr:"US",name:"InConcatenationNumber",vm:"1",version:"DICOM"},"(0020,9163)":{tag:"(0020,9163)",vr:"US",name:"InConcatenationTotalNumber",vm:"1",version:"DICOM"},"(0020,9164)":{tag:"(0020,9164)",vr:"UI",name:"DimensionOrganizationUID",vm:"1",version:"DICOM"},"(0020,9165)":{tag:"(0020,9165)",vr:"AT",name:"DimensionIndexPointer",vm:"1",version:"DICOM"},"(0020,9167)":{tag:"(0020,9167)",vr:"AT",name:"FunctionalGroupPointer",vm:"1",version:"DICOM"},"(0020,9170)":{tag:"(0020,9170)",vr:"SQ",name:"UnassignedSharedConvertedAttributesSequence",vm:"1",version:"DICOM"},"(0020,9171)":{tag:"(0020,9171)",vr:"SQ",name:"UnassignedPerFrameConvertedAttributesSequence",vm:"1",version:"DICOM"},"(0020,9172)":{tag:"(0020,9172)",vr:"SQ",name:"ConversionSourceAttributesSequence",vm:"1",version:"DICOM"},"(0020,9213)":{tag:"(0020,9213)",vr:"LO",name:"DimensionIndexPrivateCreator",vm:"1",version:"DICOM"},"(0020,9221)":{tag:"(0020,9221)",vr:"SQ",name:"DimensionOrganizationSequence",vm:"1",version:"DICOM"},"(0020,9222)":{tag:"(0020,9222)",vr:"SQ",name:"DimensionIndexSequence",vm:"1",version:"DICOM"},"(0020,9228)":{tag:"(0020,9228)",vr:"UL",name:"ConcatenationFrameOffsetNumber",vm:"1",version:"DICOM"},"(0020,9238)":{tag:"(0020,9238)",vr:"LO",name:"FunctionalGroupPrivateCreator",vm:"1",version:"DICOM"},"(0020,9241)":{tag:"(0020,9241)",vr:"FL",name:"NominalPercentageOfCardiacPhase",vm:"1",version:"DICOM"},"(0020,9245)":{tag:"(0020,9245)",vr:"FL",name:"NominalPercentageOfRespiratoryPhase",vm:"1",version:"DICOM"},"(0020,9246)":{tag:"(0020,9246)",vr:"FL",name:"StartingRespiratoryAmplitude",vm:"1",version:"DICOM"},"(0020,9247)":{tag:"(0020,9247)",vr:"CS",name:"StartingRespiratoryPhase",vm:"1",version:"DICOM"},"(0020,9248)":{tag:"(0020,9248)",vr:"FL",name:"EndingRespiratoryAmplitude",vm:"1",version:"DICOM"},"(0020,9249)":{tag:"(0020,9249)",vr:"CS",name:"EndingRespiratoryPhase",vm:"1",version:"DICOM"},"(0020,9250)":{tag:"(0020,9250)",vr:"CS",name:"RespiratoryTriggerType",vm:"1",version:"DICOM"},"(0020,9251)":{tag:"(0020,9251)",vr:"FD",name:"RRIntervalTimeNominal",vm:"1",version:"DICOM"},"(0020,9252)":{tag:"(0020,9252)",vr:"FD",name:"ActualCardiacTriggerDelayTime",vm:"1",version:"DICOM"},"(0020,9253)":{tag:"(0020,9253)",vr:"SQ",name:"RespiratorySynchronizationSequence",vm:"1",version:"DICOM"},"(0020,9254)":{tag:"(0020,9254)",vr:"FD",name:"RespiratoryIntervalTime",vm:"1",version:"DICOM"},"(0020,9255)":{tag:"(0020,9255)",vr:"FD",name:"NominalRespiratoryTriggerDelayTime",vm:"1",version:"DICOM"},"(0020,9256)":{tag:"(0020,9256)",vr:"FD",name:"RespiratoryTriggerDelayThreshold",vm:"1",version:"DICOM"},"(0020,9257)":{tag:"(0020,9257)",vr:"FD",name:"ActualRespiratoryTriggerDelayTime",vm:"1",version:"DICOM"},"(0020,9301)":{tag:"(0020,9301)",vr:"FD",name:"ImagePositionVolume",vm:"3",version:"DICOM"},"(0020,9302)":{tag:"(0020,9302)",vr:"FD",name:"ImageOrientationVolume",vm:"6",version:"DICOM"},"(0020,9307)":{tag:"(0020,9307)",vr:"CS",name:"UltrasoundAcquisitionGeometry",vm:"1",version:"DICOM"},"(0020,9308)":{tag:"(0020,9308)",vr:"FD",name:"ApexPosition",vm:"3",version:"DICOM"},"(0020,9309)":{tag:"(0020,9309)",vr:"FD",name:"VolumeToTransducerMappingMatrix",vm:"16",version:"DICOM"},"(0020,930A)":{tag:"(0020,930A)",vr:"FD",name:"VolumeToTableMappingMatrix",vm:"16",version:"DICOM"},"(0020,930B)":{tag:"(0020,930B)",vr:"CS",name:"VolumeToTransducerRelationship",vm:"1",version:"DICOM"},"(0020,930C)":{tag:"(0020,930C)",vr:"CS",name:"PatientFrameOfReferenceSource",vm:"1",version:"DICOM"},"(0020,930D)":{tag:"(0020,930D)",vr:"FD",name:"TemporalPositionTimeOffset",vm:"1",version:"DICOM"},"(0020,930E)":{tag:"(0020,930E)",vr:"SQ",name:"PlanePositionVolumeSequence",vm:"1",version:"DICOM"},"(0020,930F)":{tag:"(0020,930F)",vr:"SQ",name:"PlaneOrientationVolumeSequence",vm:"1",version:"DICOM"},"(0020,9310)":{tag:"(0020,9310)",vr:"SQ",name:"TemporalPositionSequence",vm:"1",version:"DICOM"},"(0020,9311)":{tag:"(0020,9311)",vr:"CS",name:"DimensionOrganizationType",vm:"1",version:"DICOM"},"(0020,9312)":{tag:"(0020,9312)",vr:"UI",name:"VolumeFrameOfReferenceUID",vm:"1",version:"DICOM"},"(0020,9313)":{tag:"(0020,9313)",vr:"UI",name:"TableFrameOfReferenceUID",vm:"1",version:"DICOM"},"(0020,9421)":{tag:"(0020,9421)",vr:"LO",name:"DimensionDescriptionLabel",vm:"1",version:"DICOM"},"(0020,9450)":{tag:"(0020,9450)",vr:"SQ",name:"PatientOrientationInFrameSequence",vm:"1",version:"DICOM"},"(0020,9453)":{tag:"(0020,9453)",vr:"LO",name:"FrameLabel",vm:"1",version:"DICOM"},"(0020,9518)":{tag:"(0020,9518)",vr:"US",name:"AcquisitionIndex",vm:"1-n",version:"DICOM"},"(0020,9529)":{tag:"(0020,9529)",vr:"SQ",name:"ContributingSOPInstancesReferenceSequence",vm:"1",version:"DICOM"},"(0020,9536)":{tag:"(0020,9536)",vr:"US",name:"ReconstructionIndex",vm:"1",version:"DICOM"},"(0022,0001)":{tag:"(0022,0001)",vr:"US",name:"LightPathFilterPassThroughWavelength",vm:"1",version:"DICOM"},"(0022,0002)":{tag:"(0022,0002)",vr:"US",name:"LightPathFilterPassBand",vm:"2",version:"DICOM"},"(0022,0003)":{tag:"(0022,0003)",vr:"US",name:"ImagePathFilterPassThroughWavelength",vm:"1",version:"DICOM"},"(0022,0004)":{tag:"(0022,0004)",vr:"US",name:"ImagePathFilterPassBand",vm:"2",version:"DICOM"},"(0022,0005)":{tag:"(0022,0005)",vr:"CS",name:"PatientEyeMovementCommanded",vm:"1",version:"DICOM"},"(0022,0006)":{tag:"(0022,0006)",vr:"SQ",name:"PatientEyeMovementCommandCodeSequence",vm:"1",version:"DICOM"},"(0022,0007)":{tag:"(0022,0007)",vr:"FL",name:"SphericalLensPower",vm:"1",version:"DICOM"},"(0022,0008)":{tag:"(0022,0008)",vr:"FL",name:"CylinderLensPower",vm:"1",version:"DICOM"},"(0022,0009)":{tag:"(0022,0009)",vr:"FL",name:"CylinderAxis",vm:"1",version:"DICOM"},"(0022,000A)":{tag:"(0022,000A)",vr:"FL",name:"EmmetropicMagnification",vm:"1",version:"DICOM"},"(0022,000B)":{tag:"(0022,000B)",vr:"FL",name:"IntraOcularPressure",vm:"1",version:"DICOM"},"(0022,000C)":{tag:"(0022,000C)",vr:"FL",name:"HorizontalFieldOfView",vm:"1",version:"DICOM"},"(0022,000D)":{tag:"(0022,000D)",vr:"CS",name:"PupilDilated",vm:"1",version:"DICOM"},"(0022,000E)":{tag:"(0022,000E)",vr:"FL",name:"DegreeOfDilation",vm:"1",version:"DICOM"},"(0022,000F)":{tag:"(0022,000F)",vr:"FD",name:"VertexDistance",vm:"1",version:"DICOM"},"(0022,0010)":{tag:"(0022,0010)",vr:"FL",name:"StereoBaselineAngle",vm:"1",version:"DICOM"},"(0022,0011)":{tag:"(0022,0011)",vr:"FL",name:"StereoBaselineDisplacement",vm:"1",version:"DICOM"},"(0022,0012)":{tag:"(0022,0012)",vr:"FL",name:"StereoHorizontalPixelOffset",vm:"1",version:"DICOM"},"(0022,0013)":{tag:"(0022,0013)",vr:"FL",name:"StereoVerticalPixelOffset",vm:"1",version:"DICOM"},"(0022,0014)":{tag:"(0022,0014)",vr:"FL",name:"StereoRotation",vm:"1",version:"DICOM"},"(0022,0015)":{tag:"(0022,0015)",vr:"SQ",name:"AcquisitionDeviceTypeCodeSequence",vm:"1",version:"DICOM"},"(0022,0016)":{tag:"(0022,0016)",vr:"SQ",name:"IlluminationTypeCodeSequence",vm:"1",version:"DICOM"},"(0022,0017)":{tag:"(0022,0017)",vr:"SQ",name:"LightPathFilterTypeStackCodeSequence",vm:"1",version:"DICOM"},"(0022,0018)":{tag:"(0022,0018)",vr:"SQ",name:"ImagePathFilterTypeStackCodeSequence",vm:"1",version:"DICOM"},"(0022,0019)":{tag:"(0022,0019)",vr:"SQ",name:"LensesCodeSequence",vm:"1",version:"DICOM"},"(0022,001A)":{tag:"(0022,001A)",vr:"SQ",name:"ChannelDescriptionCodeSequence",vm:"1",version:"DICOM"},"(0022,001B)":{tag:"(0022,001B)",vr:"SQ",name:"RefractiveStateSequence",vm:"1",version:"DICOM"},"(0022,001C)":{tag:"(0022,001C)",vr:"SQ",name:"MydriaticAgentCodeSequence",vm:"1",version:"DICOM"},"(0022,001D)":{tag:"(0022,001D)",vr:"SQ",name:"RelativeImagePositionCodeSequence",vm:"1",version:"DICOM"},"(0022,001E)":{tag:"(0022,001E)",vr:"FL",name:"CameraAngleOfView",vm:"1",version:"DICOM"},"(0022,0020)":{tag:"(0022,0020)",vr:"SQ",name:"StereoPairsSequence",vm:"1",version:"DICOM"},"(0022,0021)":{tag:"(0022,0021)",vr:"SQ",name:"LeftImageSequence",vm:"1",version:"DICOM"},"(0022,0022)":{tag:"(0022,0022)",vr:"SQ",name:"RightImageSequence",vm:"1",version:"DICOM"},"(0022,0028)":{tag:"(0022,0028)",vr:"CS",name:"StereoPairsPresent",vm:"1",version:"DICOM"},"(0022,0030)":{tag:"(0022,0030)",vr:"FL",name:"AxialLengthOfTheEye",vm:"1",version:"DICOM"},"(0022,0031)":{tag:"(0022,0031)",vr:"SQ",name:"OphthalmicFrameLocationSequence",vm:"1",version:"DICOM"},"(0022,0032)":{tag:"(0022,0032)",vr:"FL",name:"ReferenceCoordinates",vm:"2-2n",version:"DICOM"},"(0022,0035)":{tag:"(0022,0035)",vr:"FL",name:"DepthSpatialResolution",vm:"1",version:"DICOM"},"(0022,0036)":{tag:"(0022,0036)",vr:"FL",name:"MaximumDepthDistortion",vm:"1",version:"DICOM"},"(0022,0037)":{tag:"(0022,0037)",vr:"FL",name:"AlongScanSpatialResolution",vm:"1",version:"DICOM"},"(0022,0038)":{tag:"(0022,0038)",vr:"FL",name:"MaximumAlongScanDistortion",vm:"1",version:"DICOM"},"(0022,0039)":{tag:"(0022,0039)",vr:"CS",name:"OphthalmicImageOrientation",vm:"1",version:"DICOM"},"(0022,0041)":{tag:"(0022,0041)",vr:"FL",name:"DepthOfTransverseImage",vm:"1",version:"DICOM"},"(0022,0042)":{tag:"(0022,0042)",vr:"SQ",name:"MydriaticAgentConcentrationUnitsSequence",vm:"1",version:"DICOM"},"(0022,0048)":{tag:"(0022,0048)",vr:"FL",name:"AcrossScanSpatialResolution",vm:"1",version:"DICOM"},"(0022,0049)":{tag:"(0022,0049)",vr:"FL",name:"MaximumAcrossScanDistortion",vm:"1",version:"DICOM"},"(0022,004E)":{tag:"(0022,004E)",vr:"DS",name:"MydriaticAgentConcentration",vm:"1",version:"DICOM"},"(0022,0055)":{tag:"(0022,0055)",vr:"FL",name:"IlluminationWaveLength",vm:"1",version:"DICOM"},"(0022,0056)":{tag:"(0022,0056)",vr:"FL",name:"IlluminationPower",vm:"1",version:"DICOM"},"(0022,0057)":{tag:"(0022,0057)",vr:"FL",name:"IlluminationBandwidth",vm:"1",version:"DICOM"},"(0022,0058)":{tag:"(0022,0058)",vr:"SQ",name:"MydriaticAgentSequence",vm:"1",version:"DICOM"},"(0022,1007)":{tag:"(0022,1007)",vr:"SQ",name:"OphthalmicAxialMeasurementsRightEyeSequence",vm:"1",version:"DICOM"},"(0022,1008)":{tag:"(0022,1008)",vr:"SQ",name:"OphthalmicAxialMeasurementsLeftEyeSequence",vm:"1",version:"DICOM"},"(0022,1009)":{tag:"(0022,1009)",vr:"CS",name:"OphthalmicAxialMeasurementsDeviceType",vm:"1",version:"DICOM"},"(0022,1010)":{tag:"(0022,1010)",vr:"CS",name:"OphthalmicAxialLengthMeasurementsType",vm:"1",version:"DICOM"},"(0022,1012)":{tag:"(0022,1012)",vr:"SQ",name:"OphthalmicAxialLengthSequence",vm:"1",version:"DICOM"},"(0022,1019)":{tag:"(0022,1019)",vr:"FL",name:"OphthalmicAxialLength",vm:"1",version:"DICOM"},"(0022,1024)":{tag:"(0022,1024)",vr:"SQ",name:"LensStatusCodeSequence",vm:"1",version:"DICOM"},"(0022,1025)":{tag:"(0022,1025)",vr:"SQ",name:"VitreousStatusCodeSequence",vm:"1",version:"DICOM"},"(0022,1028)":{tag:"(0022,1028)",vr:"SQ",name:"IOLFormulaCodeSequence",vm:"1",version:"DICOM"},"(0022,1029)":{tag:"(0022,1029)",vr:"LO",name:"IOLFormulaDetail",vm:"1",version:"DICOM"},"(0022,1033)":{tag:"(0022,1033)",vr:"FL",name:"KeratometerIndex",vm:"1",version:"DICOM"},"(0022,1035)":{tag:"(0022,1035)",vr:"SQ",name:"SourceOfOphthalmicAxialLengthCodeSequence",vm:"1",version:"DICOM"},"(0022,1036)":{tag:"(0022,1036)",vr:"SQ",name:"SourceOfCornealSizeDataCodeSequence",vm:"1",version:"DICOM"},"(0022,1037)":{tag:"(0022,1037)",vr:"FL",name:"TargetRefraction",vm:"1",version:"DICOM"},"(0022,1039)":{tag:"(0022,1039)",vr:"CS",name:"RefractiveProcedureOccurred",vm:"1",version:"DICOM"},"(0022,1040)":{tag:"(0022,1040)",vr:"SQ",name:"RefractiveSurgeryTypeCodeSequence",vm:"1",version:"DICOM"},"(0022,1044)":{tag:"(0022,1044)",vr:"SQ",name:"OphthalmicUltrasoundMethodCodeSequence",vm:"1",version:"DICOM"},"(0022,1045)":{tag:"(0022,1045)",vr:"SQ",name:"SurgicallyInducedAstigmatismSequence",vm:"1",version:"DICOM"},"(0022,1046)":{tag:"(0022,1046)",vr:"CS",name:"TypeOfOpticalCorrection",vm:"1",version:"DICOM"},"(0022,1047)":{tag:"(0022,1047)",vr:"SQ",name:"ToricIOLPowerSequence",vm:"1",version:"DICOM"},"(0022,1048)":{tag:"(0022,1048)",vr:"SQ",name:"PredictedToricErrorSequence",vm:"1",version:"DICOM"},"(0022,1049)":{tag:"(0022,1049)",vr:"CS",name:"PreSelectedForImplantation",vm:"1",version:"DICOM"},"(0022,104A)":{tag:"(0022,104A)",vr:"SQ",name:"ToricIOLPowerForExactEmmetropiaSequence",vm:"1",version:"DICOM"},"(0022,104B)":{tag:"(0022,104B)",vr:"SQ",name:"ToricIOLPowerForExactTargetRefractionSequence",vm:"1",version:"DICOM"},"(0022,1050)":{tag:"(0022,1050)",vr:"SQ",name:"OphthalmicAxialLengthMeasurementsSequence",vm:"1",version:"DICOM"},"(0022,1053)":{tag:"(0022,1053)",vr:"FL",name:"IOLPower",vm:"1",version:"DICOM"},"(0022,1054)":{tag:"(0022,1054)",vr:"FL",name:"PredictedRefractiveError",vm:"1",version:"DICOM"},"(0022,1059)":{tag:"(0022,1059)",vr:"FL",name:"OphthalmicAxialLengthVelocity",vm:"1",version:"DICOM"},"(0022,1065)":{tag:"(0022,1065)",vr:"LO",name:"LensStatusDescription",vm:"1",version:"DICOM"},"(0022,1066)":{tag:"(0022,1066)",vr:"LO",name:"VitreousStatusDescription",vm:"1",version:"DICOM"},"(0022,1090)":{tag:"(0022,1090)",vr:"SQ",name:"IOLPowerSequence",vm:"1",version:"DICOM"},"(0022,1092)":{tag:"(0022,1092)",vr:"SQ",name:"LensConstantSequence",vm:"1",version:"DICOM"},"(0022,1093)":{tag:"(0022,1093)",vr:"LO",name:"IOLManufacturer",vm:"1",version:"DICOM"},"(0022,1095)":{tag:"(0022,1095)",vr:"LO",name:"ImplantName",vm:"1",version:"DICOM"},"(0022,1096)":{tag:"(0022,1096)",vr:"SQ",name:"KeratometryMeasurementTypeCodeSequence",vm:"1",version:"DICOM"},"(0022,1097)":{tag:"(0022,1097)",vr:"LO",name:"ImplantPartNumber",vm:"1",version:"DICOM"},"(0022,1100)":{tag:"(0022,1100)",vr:"SQ",name:"ReferencedOphthalmicAxialMeasurementsSequence",vm:"1",version:"DICOM"},"(0022,1101)":{tag:"(0022,1101)",vr:"SQ",name:"OphthalmicAxialLengthMeasurementsSegmentNameCodeSequence",vm:"1",version:"DICOM"},"(0022,1103)":{tag:"(0022,1103)",vr:"SQ",name:"RefractiveErrorBeforeRefractiveSurgeryCodeSequence",vm:"1",version:"DICOM"},"(0022,1121)":{tag:"(0022,1121)",vr:"FL",name:"IOLPowerForExactEmmetropia",vm:"1",version:"DICOM"},"(0022,1122)":{tag:"(0022,1122)",vr:"FL",name:"IOLPowerForExactTargetRefraction",vm:"1",version:"DICOM"},"(0022,1125)":{tag:"(0022,1125)",vr:"SQ",name:"AnteriorChamberDepthDefinitionCodeSequence",vm:"1",version:"DICOM"},"(0022,1127)":{tag:"(0022,1127)",vr:"SQ",name:"LensThicknessSequence",vm:"1",version:"DICOM"},"(0022,1128)":{tag:"(0022,1128)",vr:"SQ",name:"AnteriorChamberDepthSequence",vm:"1",version:"DICOM"},"(0022,112A)":{tag:"(0022,112A)",vr:"SQ",name:"CalculationCommentSequence",vm:"1",version:"DICOM"},"(0022,112B)":{tag:"(0022,112B)",vr:"CS",name:"CalculationCommentType",vm:"1",version:"DICOM"},"(0022,112C)":{tag:"(0022,112C)",vr:"LT",name:"CalculationComment",vm:"1",version:"DICOM"},"(0022,1130)":{tag:"(0022,1130)",vr:"FL",name:"LensThickness",vm:"1",version:"DICOM"},"(0022,1131)":{tag:"(0022,1131)",vr:"FL",name:"AnteriorChamberDepth",vm:"1",version:"DICOM"},"(0022,1132)":{tag:"(0022,1132)",vr:"SQ",name:"SourceOfLensThicknessDataCodeSequence",vm:"1",version:"DICOM"},"(0022,1133)":{tag:"(0022,1133)",vr:"SQ",name:"SourceOfAnteriorChamberDepthDataCodeSequence",vm:"1",version:"DICOM"},"(0022,1134)":{tag:"(0022,1134)",vr:"SQ",name:"SourceOfRefractiveMeasurementsSequence",vm:"1",version:"DICOM"},"(0022,1135)":{tag:"(0022,1135)",vr:"SQ",name:"SourceOfRefractiveMeasurementsCodeSequence",vm:"1",version:"DICOM"},"(0022,1140)":{tag:"(0022,1140)",vr:"CS",name:"OphthalmicAxialLengthMeasurementModified",vm:"1",version:"DICOM"},"(0022,1150)":{tag:"(0022,1150)",vr:"SQ",name:"OphthalmicAxialLengthDataSourceCodeSequence",vm:"1",version:"DICOM"},"(0022,1155)":{tag:"(0022,1155)",vr:"FL",name:"SignalToNoiseRatio",vm:"1",version:"DICOM"},"(0022,1159)":{tag:"(0022,1159)",vr:"LO",name:"OphthalmicAxialLengthDataSourceDescription",vm:"1",version:"DICOM"},"(0022,1210)":{tag:"(0022,1210)",vr:"SQ",name:"OphthalmicAxialLengthMeasurementsTotalLengthSequence",vm:"1",version:"DICOM"},"(0022,1211)":{tag:"(0022,1211)",vr:"SQ",name:"OphthalmicAxialLengthMeasurementsSegmentalLengthSequence",vm:"1",version:"DICOM"},"(0022,1212)":{tag:"(0022,1212)",vr:"SQ",name:"OphthalmicAxialLengthMeasurementsLengthSummationSequence",vm:"1",version:"DICOM"},"(0022,1220)":{tag:"(0022,1220)",vr:"SQ",name:"UltrasoundOphthalmicAxialLengthMeasurementsSequence",vm:"1",version:"DICOM"},"(0022,1225)":{tag:"(0022,1225)",vr:"SQ",name:"OpticalOphthalmicAxialLengthMeasurementsSequence",vm:"1",version:"DICOM"},"(0022,1230)":{tag:"(0022,1230)",vr:"SQ",name:"UltrasoundSelectedOphthalmicAxialLengthSequence",vm:"1",version:"DICOM"},"(0022,1250)":{tag:"(0022,1250)",vr:"SQ",name:"OphthalmicAxialLengthSelectionMethodCodeSequence",vm:"1",version:"DICOM"},"(0022,1255)":{tag:"(0022,1255)",vr:"SQ",name:"OpticalSelectedOphthalmicAxialLengthSequence",vm:"1",version:"DICOM"},"(0022,1257)":{tag:"(0022,1257)",vr:"SQ",name:"SelectedSegmentalOphthalmicAxialLengthSequence",vm:"1",version:"DICOM"},"(0022,1260)":{tag:"(0022,1260)",vr:"SQ",name:"SelectedTotalOphthalmicAxialLengthSequence",vm:"1",version:"DICOM"},"(0022,1262)":{tag:"(0022,1262)",vr:"SQ",name:"OphthalmicAxialLengthQualityMetricSequence",vm:"1",version:"DICOM"},"(0022,1300)":{tag:"(0022,1300)",vr:"SQ",name:"IntraocularLensCalculationsRightEyeSequence",vm:"1",version:"DICOM"},"(0022,1310)":{tag:"(0022,1310)",vr:"SQ",name:"IntraocularLensCalculationsLeftEyeSequence",vm:"1",version:"DICOM"},"(0022,1330)":{tag:"(0022,1330)",vr:"SQ",name:"ReferencedOphthalmicAxialLengthMeasurementQCImageSequence",vm:"1",version:"DICOM"},"(0022,1415)":{tag:"(0022,1415)",vr:"CS",name:"OphthalmicMappingDeviceType",vm:"1",version:"DICOM"},"(0022,1420)":{tag:"(0022,1420)",vr:"SQ",name:"AcquisitionMethodCodeSequence",vm:"1",version:"DICOM"},"(0022,1423)":{tag:"(0022,1423)",vr:"SQ",name:"AcquisitionMethodAlgorithmSequence",vm:"1",version:"DICOM"},"(0022,1436)":{tag:"(0022,1436)",vr:"SQ",name:"OphthalmicThicknessMapTypeCodeSequence",vm:"1",version:"DICOM"},"(0022,1443)":{tag:"(0022,1443)",vr:"SQ",name:"OphthalmicThicknessMappingNormalsSequence",vm:"1",version:"DICOM"},"(0022,1445)":{tag:"(0022,1445)",vr:"SQ",name:"RetinalThicknessDefinitionCodeSequence",vm:"1",version:"DICOM"},"(0022,1450)":{tag:"(0022,1450)",vr:"SQ",name:"PixelValueMappingToCodedConceptSequence",vm:"1",version:"DICOM"},"(0022,1452)":{tag:"(0022,1452)",vr:"xs",name:"MappedPixelValue",vm:"1",version:"DICOM"},"(0022,1454)":{tag:"(0022,1454)",vr:"LO",name:"PixelValueMappingExplanation",vm:"1",version:"DICOM"},"(0022,1458)":{tag:"(0022,1458)",vr:"SQ",name:"OphthalmicThicknessMapQualityThresholdSequence",vm:"1",version:"DICOM"},"(0022,1460)":{tag:"(0022,1460)",vr:"FL",name:"OphthalmicThicknessMapThresholdQualityRating",vm:"1",version:"DICOM"},"(0022,1463)":{tag:"(0022,1463)",vr:"FL",name:"AnatomicStructureReferencePoint",vm:"2",version:"DICOM"},"(0022,1465)":{tag:"(0022,1465)",vr:"SQ",name:"RegistrationToLocalizerSequence",vm:"1",version:"DICOM"},"(0022,1466)":{tag:"(0022,1466)",vr:"CS",name:"RegisteredLocalizerUnits",vm:"1",version:"DICOM"},"(0022,1467)":{tag:"(0022,1467)",vr:"FL",name:"RegisteredLocalizerTopLeftHandCorner",vm:"2",version:"DICOM"},"(0022,1468)":{tag:"(0022,1468)",vr:"FL",name:"RegisteredLocalizerBottomRightHandCorner",vm:"2",version:"DICOM"},"(0022,1470)":{tag:"(0022,1470)",vr:"SQ",name:"OphthalmicThicknessMapQualityRatingSequence",vm:"1",version:"DICOM"},"(0022,1472)":{tag:"(0022,1472)",vr:"SQ",name:"RelevantOPTAttributesSequence",vm:"1",version:"DICOM"},"(0022,1512)":{tag:"(0022,1512)",vr:"SQ",name:"TransformationMethodCodeSequence",vm:"1",version:"DICOM"},"(0022,1513)":{tag:"(0022,1513)",vr:"SQ",name:"TransformationAlgorithmSequence",vm:"1",version:"DICOM"},"(0022,1515)":{tag:"(0022,1515)",vr:"CS",name:"OphthalmicAxialLengthMethod",vm:"1",version:"DICOM"},"(0022,1517)":{tag:"(0022,1517)",vr:"FL",name:"OphthalmicFOV",vm:"1",version:"DICOM"},"(0022,1518)":{tag:"(0022,1518)",vr:"SQ",name:"TwoDimensionalToThreeDimensionalMapSequence",vm:"1",version:"DICOM"},"(0022,1525)":{tag:"(0022,1525)",vr:"SQ",name:"WideFieldOphthalmicPhotographyQualityRatingSequence",vm:"1",version:"DICOM"},"(0022,1526)":{tag:"(0022,1526)",vr:"SQ",name:"WideFieldOphthalmicPhotographyQualityThresholdSequence",vm:"1",version:"DICOM"},"(0022,1527)":{tag:"(0022,1527)",vr:"FL",name:"WideFieldOphthalmicPhotographyThresholdQualityRating",vm:"1",version:"DICOM"},"(0022,1528)":{tag:"(0022,1528)",vr:"FL",name:"XCoordinatesCenterPixelViewAngle",vm:"1",version:"DICOM"},"(0022,1529)":{tag:"(0022,1529)",vr:"FL",name:"YCoordinatesCenterPixelViewAngle",vm:"1",version:"DICOM"},"(0022,1530)":{tag:"(0022,1530)",vr:"UL",name:"NumberOfMapPoints",vm:"1",version:"DICOM"},"(0022,1531)":{tag:"(0022,1531)",vr:"OF",name:"TwoDimensionalToThreeDimensionalMapData",vm:"1",version:"DICOM"},"(0022,1612)":{tag:"(0022,1612)",vr:"SQ",name:"DerivationAlgorithmSequence",vm:"1",version:"DICOM"},"(0022,1615)":{tag:"(0022,1615)",vr:"SQ",name:"OphthalmicImageTypeCodeSequence",vm:"1",version:"DICOM"},"(0022,1616)":{tag:"(0022,1616)",vr:"LO",name:"OphthalmicImageTypeDescription",vm:"1",version:"DICOM"},"(0022,1618)":{tag:"(0022,1618)",vr:"SQ",name:"ScanPatternTypeCodeSequence",vm:"1",version:"DICOM"},"(0022,1620)":{tag:"(0022,1620)",vr:"SQ",name:"ReferencedSurfaceMeshIdentificationSequence",vm:"1",version:"DICOM"},"(0022,1622)":{tag:"(0022,1622)",vr:"CS",name:"OphthalmicVolumetricPropertiesFlag",vm:"1",version:"DICOM"},"(0022,1624)":{tag:"(0022,1624)",vr:"FL",name:"OphthalmicAnatomicReferencePointXCoordinate",vm:"1",version:"DICOM"},"(0022,1626)":{tag:"(0022,1626)",vr:"FL",name:"OphthalmicAnatomicReferencePointYCoordinate",vm:"1",version:"DICOM"},"(0022,1628)":{tag:"(0022,1628)",vr:"SQ",name:"OphthalmicEnFaceImageQualityRatingSequence",vm:"1",version:"DICOM"},"(0022,1630)":{tag:"(0022,1630)",vr:"DS",name:"QualityThreshold",vm:"1",version:"DICOM"},"(0022,1640)":{tag:"(0022,1640)",vr:"SQ",name:"OCTBscanAnalysisAcquisitionParametersSequence",vm:"1",version:"DICOM"},"(0022,1642)":{tag:"(0022,1642)",vr:"UL",name:"NumberofBscansPerFrame",vm:"1",version:"DICOM"},"(0022,1643)":{tag:"(0022,1643)",vr:"FL",name:"BscanSlabThickness",vm:"1",version:"DICOM"},"(0022,1644)":{tag:"(0022,1644)",vr:"FL",name:"DistanceBetweenBscanSlabs",vm:"1",version:"DICOM"},"(0022,1645)":{tag:"(0022,1645)",vr:"FL",name:"BscanCycleTime",vm:"1",version:"DICOM"},"(0022,1646)":{tag:"(0022,1646)",vr:"FL",name:"BscanCycleTimeVector",vm:"1-n",version:"DICOM"},"(0022,1649)":{tag:"(0022,1649)",vr:"FL",name:"AscanRate",vm:"1",version:"DICOM"},"(0022,1650)":{tag:"(0022,1650)",vr:"FL",name:"BscanRate",vm:"1",version:"DICOM"},"(0022,1658)":{tag:"(0022,1658)",vr:"UL",name:"SurfaceMeshZPixelOffset",vm:"1",version:"DICOM"},"(0024,0010)":{tag:"(0024,0010)",vr:"FL",name:"VisualFieldHorizontalExtent",vm:"1",version:"DICOM"},"(0024,0011)":{tag:"(0024,0011)",vr:"FL",name:"VisualFieldVerticalExtent",vm:"1",version:"DICOM"},"(0024,0012)":{tag:"(0024,0012)",vr:"CS",name:"VisualFieldShape",vm:"1",version:"DICOM"},"(0024,0016)":{tag:"(0024,0016)",vr:"SQ",name:"ScreeningTestModeCodeSequence",vm:"1",version:"DICOM"},"(0024,0018)":{tag:"(0024,0018)",vr:"FL",name:"MaximumStimulusLuminance",vm:"1",version:"DICOM"},"(0024,0020)":{tag:"(0024,0020)",vr:"FL",name:"BackgroundLuminance",vm:"1",version:"DICOM"},"(0024,0021)":{tag:"(0024,0021)",vr:"SQ",name:"StimulusColorCodeSequence",vm:"1",version:"DICOM"},"(0024,0024)":{tag:"(0024,0024)",vr:"SQ",name:"BackgroundIlluminationColorCodeSequence",vm:"1",version:"DICOM"},"(0024,0025)":{tag:"(0024,0025)",vr:"FL",name:"StimulusArea",vm:"1",version:"DICOM"},"(0024,0028)":{tag:"(0024,0028)",vr:"FL",name:"StimulusPresentationTime",vm:"1",version:"DICOM"},"(0024,0032)":{tag:"(0024,0032)",vr:"SQ",name:"FixationSequence",vm:"1",version:"DICOM"},"(0024,0033)":{tag:"(0024,0033)",vr:"SQ",name:"FixationMonitoringCodeSequence",vm:"1",version:"DICOM"},"(0024,0034)":{tag:"(0024,0034)",vr:"SQ",name:"VisualFieldCatchTrialSequence",vm:"1",version:"DICOM"},"(0024,0035)":{tag:"(0024,0035)",vr:"US",name:"FixationCheckedQuantity",vm:"1",version:"DICOM"},"(0024,0036)":{tag:"(0024,0036)",vr:"US",name:"PatientNotProperlyFixatedQuantity",vm:"1",version:"DICOM"},"(0024,0037)":{tag:"(0024,0037)",vr:"CS",name:"PresentedVisualStimuliDataFlag",vm:"1",version:"DICOM"},"(0024,0038)":{tag:"(0024,0038)",vr:"US",name:"NumberOfVisualStimuli",vm:"1",version:"DICOM"},"(0024,0039)":{tag:"(0024,0039)",vr:"CS",name:"ExcessiveFixationLossesDataFlag",vm:"1",version:"DICOM"},"(0024,0040)":{tag:"(0024,0040)",vr:"CS",name:"ExcessiveFixationLosses",vm:"1",version:"DICOM"},"(0024,0042)":{tag:"(0024,0042)",vr:"US",name:"StimuliRetestingQuantity",vm:"1",version:"DICOM"},"(0024,0044)":{tag:"(0024,0044)",vr:"LT",name:"CommentsOnPatientPerformanceOfVisualField",vm:"1",version:"DICOM"},"(0024,0045)":{tag:"(0024,0045)",vr:"CS",name:"FalseNegativesEstimateFlag",vm:"1",version:"DICOM"},"(0024,0046)":{tag:"(0024,0046)",vr:"FL",name:"FalseNegativesEstimate",vm:"1",version:"DICOM"},"(0024,0048)":{tag:"(0024,0048)",vr:"US",name:"NegativeCatchTrialsQuantity",vm:"1",version:"DICOM"},"(0024,0050)":{tag:"(0024,0050)",vr:"US",name:"FalseNegativesQuantity",vm:"1",version:"DICOM"},"(0024,0051)":{tag:"(0024,0051)",vr:"CS",name:"ExcessiveFalseNegativesDataFlag",vm:"1",version:"DICOM"},"(0024,0052)":{tag:"(0024,0052)",vr:"CS",name:"ExcessiveFalseNegatives",vm:"1",version:"DICOM"},"(0024,0053)":{tag:"(0024,0053)",vr:"CS",name:"FalsePositivesEstimateFlag",vm:"1",version:"DICOM"},"(0024,0054)":{tag:"(0024,0054)",vr:"FL",name:"FalsePositivesEstimate",vm:"1",version:"DICOM"},"(0024,0055)":{tag:"(0024,0055)",vr:"CS",name:"CatchTrialsDataFlag",vm:"1",version:"DICOM"},"(0024,0056)":{tag:"(0024,0056)",vr:"US",name:"PositiveCatchTrialsQuantity",vm:"1",version:"DICOM"},"(0024,0057)":{tag:"(0024,0057)",vr:"CS",name:"TestPointNormalsDataFlag",vm:"1",version:"DICOM"},"(0024,0058)":{tag:"(0024,0058)",vr:"SQ",name:"TestPointNormalsSequence",vm:"1",version:"DICOM"},"(0024,0059)":{tag:"(0024,0059)",vr:"CS",name:"GlobalDeviationProbabilityNormalsFlag",vm:"1",version:"DICOM"},"(0024,0060)":{tag:"(0024,0060)",vr:"US",name:"FalsePositivesQuantity",vm:"1",version:"DICOM"},"(0024,0061)":{tag:"(0024,0061)",vr:"CS",name:"ExcessiveFalsePositivesDataFlag",vm:"1",version:"DICOM"},"(0024,0062)":{tag:"(0024,0062)",vr:"CS",name:"ExcessiveFalsePositives",vm:"1",version:"DICOM"},"(0024,0063)":{tag:"(0024,0063)",vr:"CS",name:"VisualFieldTestNormalsFlag",vm:"1",version:"DICOM"},"(0024,0064)":{tag:"(0024,0064)",vr:"SQ",name:"ResultsNormalsSequence",vm:"1",version:"DICOM"},"(0024,0065)":{tag:"(0024,0065)",vr:"SQ",name:"AgeCorrectedSensitivityDeviationAlgorithmSequence",vm:"1",version:"DICOM"},"(0024,0066)":{tag:"(0024,0066)",vr:"FL",name:"GlobalDeviationFromNormal",vm:"1",version:"DICOM"},"(0024,0067)":{tag:"(0024,0067)",vr:"SQ",name:"GeneralizedDefectSensitivityDeviationAlgorithmSequence",vm:"1",version:"DICOM"},"(0024,0068)":{tag:"(0024,0068)",vr:"FL",name:"LocalizedDeviationFromNormal",vm:"1",version:"DICOM"},"(0024,0069)":{tag:"(0024,0069)",vr:"LO",name:"PatientReliabilityIndicator",vm:"1",version:"DICOM"},"(0024,0070)":{tag:"(0024,0070)",vr:"FL",name:"VisualFieldMeanSensitivity",vm:"1",version:"DICOM"},"(0024,0071)":{tag:"(0024,0071)",vr:"FL",name:"GlobalDeviationProbability",vm:"1",version:"DICOM"},"(0024,0072)":{tag:"(0024,0072)",vr:"CS",name:"LocalDeviationProbabilityNormalsFlag",vm:"1",version:"DICOM"},"(0024,0073)":{tag:"(0024,0073)",vr:"FL",name:"LocalizedDeviationProbability",vm:"1",version:"DICOM"},"(0024,0074)":{tag:"(0024,0074)",vr:"CS",name:"ShortTermFluctuationCalculated",vm:"1",version:"DICOM"},"(0024,0075)":{tag:"(0024,0075)",vr:"FL",name:"ShortTermFluctuation",vm:"1",version:"DICOM"},"(0024,0076)":{tag:"(0024,0076)",vr:"CS",name:"ShortTermFluctuationProbabilityCalculated",vm:"1",version:"DICOM"},"(0024,0077)":{tag:"(0024,0077)",vr:"FL",name:"ShortTermFluctuationProbability",vm:"1",version:"DICOM"},"(0024,0078)":{tag:"(0024,0078)",vr:"CS",name:"CorrectedLocalizedDeviationFromNormalCalculated",vm:"1",version:"DICOM"},"(0024,0079)":{tag:"(0024,0079)",vr:"FL",name:"CorrectedLocalizedDeviationFromNormal",vm:"1",version:"DICOM"},"(0024,0080)":{tag:"(0024,0080)",vr:"CS",name:"CorrectedLocalizedDeviationFromNormalProbabilityCalculated",vm:"1",version:"DICOM"},"(0024,0081)":{tag:"(0024,0081)",vr:"FL",name:"CorrectedLocalizedDeviationFromNormalProbability",vm:"1",version:"DICOM"},"(0024,0083)":{tag:"(0024,0083)",vr:"SQ",name:"GlobalDeviationProbabilitySequence",vm:"1",version:"DICOM"},"(0024,0085)":{tag:"(0024,0085)",vr:"SQ",name:"LocalizedDeviationProbabilitySequence",vm:"1",version:"DICOM"},"(0024,0086)":{tag:"(0024,0086)",vr:"CS",name:"FovealSensitivityMeasured",vm:"1",version:"DICOM"},"(0024,0087)":{tag:"(0024,0087)",vr:"FL",name:"FovealSensitivity",vm:"1",version:"DICOM"},"(0024,0088)":{tag:"(0024,0088)",vr:"FL",name:"VisualFieldTestDuration",vm:"1",version:"DICOM"},"(0024,0089)":{tag:"(0024,0089)",vr:"SQ",name:"VisualFieldTestPointSequence",vm:"1",version:"DICOM"},"(0024,0090)":{tag:"(0024,0090)",vr:"FL",name:"VisualFieldTestPointXCoordinate",vm:"1",version:"DICOM"},"(0024,0091)":{tag:"(0024,0091)",vr:"FL",name:"VisualFieldTestPointYCoordinate",vm:"1",version:"DICOM"},"(0024,0092)":{tag:"(0024,0092)",vr:"FL",name:"AgeCorrectedSensitivityDeviationValue",vm:"1",version:"DICOM"},"(0024,0093)":{tag:"(0024,0093)",vr:"CS",name:"StimulusResults",vm:"1",version:"DICOM"},"(0024,0094)":{tag:"(0024,0094)",vr:"FL",name:"SensitivityValue",vm:"1",version:"DICOM"},"(0024,0095)":{tag:"(0024,0095)",vr:"CS",name:"RetestStimulusSeen",vm:"1",version:"DICOM"},"(0024,0096)":{tag:"(0024,0096)",vr:"FL",name:"RetestSensitivityValue",vm:"1",version:"DICOM"},"(0024,0097)":{tag:"(0024,0097)",vr:"SQ",name:"VisualFieldTestPointNormalsSequence",vm:"1",version:"DICOM"},"(0024,0098)":{tag:"(0024,0098)",vr:"FL",name:"QuantifiedDefect",vm:"1",version:"DICOM"},"(0024,0100)":{tag:"(0024,0100)",vr:"FL",name:"AgeCorrectedSensitivityDeviationProbabilityValue",vm:"1",version:"DICOM"},"(0024,0102)":{tag:"(0024,0102)",vr:"CS",name:"GeneralizedDefectCorrectedSensitivityDeviationFlag",vm:"1",version:"DICOM"},"(0024,0103)":{tag:"(0024,0103)",vr:"FL",name:"GeneralizedDefectCorrectedSensitivityDeviationValue",vm:"1",version:"DICOM"},"(0024,0104)":{tag:"(0024,0104)",vr:"FL",name:"GeneralizedDefectCorrectedSensitivityDeviationProbabilityValue",vm:"1",version:"DICOM"},"(0024,0105)":{tag:"(0024,0105)",vr:"FL",name:"MinimumSensitivityValue",vm:"1",version:"DICOM"},"(0024,0106)":{tag:"(0024,0106)",vr:"CS",name:"BlindSpotLocalized",vm:"1",version:"DICOM"},"(0024,0107)":{tag:"(0024,0107)",vr:"FL",name:"BlindSpotXCoordinate",vm:"1",version:"DICOM"},"(0024,0108)":{tag:"(0024,0108)",vr:"FL",name:"BlindSpotYCoordinate",vm:"1",version:"DICOM"},"(0024,0110)":{tag:"(0024,0110)",vr:"SQ",name:"VisualAcuityMeasurementSequence",vm:"1",version:"DICOM"},"(0024,0112)":{tag:"(0024,0112)",vr:"SQ",name:"RefractiveParametersUsedOnPatientSequence",vm:"1",version:"DICOM"},"(0024,0113)":{tag:"(0024,0113)",vr:"CS",name:"MeasurementLaterality",vm:"1",version:"DICOM"},"(0024,0114)":{tag:"(0024,0114)",vr:"SQ",name:"OphthalmicPatientClinicalInformationLeftEyeSequence",vm:"1",version:"DICOM"},"(0024,0115)":{tag:"(0024,0115)",vr:"SQ",name:"OphthalmicPatientClinicalInformationRightEyeSequence",vm:"1",version:"DICOM"},"(0024,0117)":{tag:"(0024,0117)",vr:"CS",name:"FovealPointNormativeDataFlag",vm:"1",version:"DICOM"},"(0024,0118)":{tag:"(0024,0118)",vr:"FL",name:"FovealPointProbabilityValue",vm:"1",version:"DICOM"},"(0024,0120)":{tag:"(0024,0120)",vr:"CS",name:"ScreeningBaselineMeasured",vm:"1",version:"DICOM"},"(0024,0122)":{tag:"(0024,0122)",vr:"SQ",name:"ScreeningBaselineMeasuredSequence",vm:"1",version:"DICOM"},"(0024,0124)":{tag:"(0024,0124)",vr:"CS",name:"ScreeningBaselineType",vm:"1",version:"DICOM"},"(0024,0126)":{tag:"(0024,0126)",vr:"FL",name:"ScreeningBaselineValue",vm:"1",version:"DICOM"},"(0024,0202)":{tag:"(0024,0202)",vr:"LO",name:"AlgorithmSource",vm:"1",version:"DICOM"},"(0024,0306)":{tag:"(0024,0306)",vr:"LO",name:"DataSetName",vm:"1",version:"DICOM"},"(0024,0307)":{tag:"(0024,0307)",vr:"LO",name:"DataSetVersion",vm:"1",version:"DICOM"},"(0024,0308)":{tag:"(0024,0308)",vr:"LO",name:"DataSetSource",vm:"1",version:"DICOM"},"(0024,0309)":{tag:"(0024,0309)",vr:"LO",name:"DataSetDescription",vm:"1",version:"DICOM"},"(0024,0317)":{tag:"(0024,0317)",vr:"SQ",name:"VisualFieldTestReliabilityGlobalIndexSequence",vm:"1",version:"DICOM"},"(0024,0320)":{tag:"(0024,0320)",vr:"SQ",name:"VisualFieldGlobalResultsIndexSequence",vm:"1",version:"DICOM"},"(0024,0325)":{tag:"(0024,0325)",vr:"SQ",name:"DataObservationSequence",vm:"1",version:"DICOM"},"(0024,0338)":{tag:"(0024,0338)",vr:"CS",name:"IndexNormalsFlag",vm:"1",version:"DICOM"},"(0024,0341)":{tag:"(0024,0341)",vr:"FL",name:"IndexProbability",vm:"1",version:"DICOM"},"(0024,0344)":{tag:"(0024,0344)",vr:"SQ",name:"IndexProbabilitySequence",vm:"1",version:"DICOM"},"(0028,0002)":{tag:"(0028,0002)",vr:"US",name:"SamplesPerPixel",vm:"1",version:"DICOM"},"(0028,0003)":{tag:"(0028,0003)",vr:"US",name:"SamplesPerPixelUsed",vm:"1",version:"DICOM"},"(0028,0004)":{tag:"(0028,0004)",vr:"CS",name:"PhotometricInterpretation",vm:"1",version:"DICOM"},"(0028,0006)":{tag:"(0028,0006)",vr:"US",name:"PlanarConfiguration",vm:"1",version:"DICOM"},"(0028,0008)":{tag:"(0028,0008)",vr:"IS",name:"NumberOfFrames",vm:"1",version:"DICOM"},"(0028,0009)":{tag:"(0028,0009)",vr:"AT",name:"FrameIncrementPointer",vm:"1-n",version:"DICOM"},"(0028,000A)":{tag:"(0028,000A)",vr:"AT",name:"FrameDimensionPointer",vm:"1-n",version:"DICOM"},"(0028,0010)":{tag:"(0028,0010)",vr:"US",name:"Rows",vm:"1",version:"DICOM"},"(0028,0011)":{tag:"(0028,0011)",vr:"US",name:"Columns",vm:"1",version:"DICOM"},"(0028,0014)":{tag:"(0028,0014)",vr:"US",name:"UltrasoundColorDataPresent",vm:"1",version:"DICOM"},"(0028,0030)":{tag:"(0028,0030)",vr:"DS",name:"PixelSpacing",vm:"2",version:"DICOM"},"(0028,0031)":{tag:"(0028,0031)",vr:"DS",name:"ZoomFactor",vm:"2",version:"DICOM"},"(0028,0032)":{tag:"(0028,0032)",vr:"DS",name:"ZoomCenter",vm:"2",version:"DICOM"},"(0028,0034)":{tag:"(0028,0034)",vr:"IS",name:"PixelAspectRatio",vm:"2",version:"DICOM"},"(0028,0051)":{tag:"(0028,0051)",vr:"CS",name:"CorrectedImage",vm:"1-n",version:"DICOM"},"(0028,0100)":{tag:"(0028,0100)",vr:"US",name:"BitsAllocated",vm:"1",version:"DICOM"},"(0028,0101)":{tag:"(0028,0101)",vr:"US",name:"BitsStored",vm:"1",version:"DICOM"},"(0028,0102)":{tag:"(0028,0102)",vr:"US",name:"HighBit",vm:"1",version:"DICOM"},"(0028,0103)":{tag:"(0028,0103)",vr:"US",name:"PixelRepresentation",vm:"1",version:"DICOM"},"(0028,0106)":{tag:"(0028,0106)",vr:"xs",name:"SmallestImagePixelValue",vm:"1",version:"DICOM"},"(0028,0107)":{tag:"(0028,0107)",vr:"xs",name:"LargestImagePixelValue",vm:"1",version:"DICOM"},"(0028,0108)":{tag:"(0028,0108)",vr:"xs",name:"SmallestPixelValueInSeries",vm:"1",version:"DICOM"},"(0028,0109)":{tag:"(0028,0109)",vr:"xs",name:"LargestPixelValueInSeries",vm:"1",version:"DICOM"},"(0028,0120)":{tag:"(0028,0120)",vr:"xs",name:"PixelPaddingValue",vm:"1",version:"DICOM"},"(0028,0121)":{tag:"(0028,0121)",vr:"xs",name:"PixelPaddingRangeLimit",vm:"1",version:"DICOM"},"(0028,0122)":{tag:"(0028,0122)",vr:"FL",name:"FloatPixelPaddingValue",vm:"1",version:"DICOM"},"(0028,0123)":{tag:"(0028,0123)",vr:"FD",name:"DoubleFloatPixelPaddingValue",vm:"1",version:"DICOM"},"(0028,0124)":{tag:"(0028,0124)",vr:"FL",name:"FloatPixelPaddingRangeLimit",vm:"1",version:"DICOM"},"(0028,0125)":{tag:"(0028,0125)",vr:"FD",name:"DoubleFloatPixelPaddingRangeLimit",vm:"1",version:"DICOM"},"(0028,0300)":{tag:"(0028,0300)",vr:"CS",name:"QualityControlImage",vm:"1",version:"DICOM"},"(0028,0301)":{tag:"(0028,0301)",vr:"CS",name:"BurnedInAnnotation",vm:"1",version:"DICOM"},"(0028,0302)":{tag:"(0028,0302)",vr:"CS",name:"RecognizableVisualFeatures",vm:"1",version:"DICOM"},"(0028,0303)":{tag:"(0028,0303)",vr:"CS",name:"LongitudinalTemporalInformationModified",vm:"1",version:"DICOM"},"(0028,0304)":{tag:"(0028,0304)",vr:"UI",name:"ReferencedColorPaletteInstanceUID",vm:"1",version:"DICOM"},"(0028,0A02)":{tag:"(0028,0A02)",vr:"CS",name:"PixelSpacingCalibrationType",vm:"1",version:"DICOM"},"(0028,0A04)":{tag:"(0028,0A04)",vr:"LO",name:"PixelSpacingCalibrationDescription",vm:"1",version:"DICOM"},"(0028,1040)":{tag:"(0028,1040)",vr:"CS",name:"PixelIntensityRelationship",vm:"1",version:"DICOM"},"(0028,1041)":{tag:"(0028,1041)",vr:"SS",name:"PixelIntensityRelationshipSign",vm:"1",version:"DICOM"},"(0028,1050)":{tag:"(0028,1050)",vr:"DS",name:"WindowCenter",vm:"1-n",version:"DICOM"},"(0028,1051)":{tag:"(0028,1051)",vr:"DS",name:"WindowWidth",vm:"1-n",version:"DICOM"},"(0028,1052)":{tag:"(0028,1052)",vr:"DS",name:"RescaleIntercept",vm:"1",version:"DICOM"},"(0028,1053)":{tag:"(0028,1053)",vr:"DS",name:"RescaleSlope",vm:"1",version:"DICOM"},"(0028,1054)":{tag:"(0028,1054)",vr:"LO",name:"RescaleType",vm:"1",version:"DICOM"},"(0028,1055)":{tag:"(0028,1055)",vr:"LO",name:"WindowCenterWidthExplanation",vm:"1-n",version:"DICOM"},"(0028,1056)":{tag:"(0028,1056)",vr:"CS",name:"VOILUTFunction",vm:"1",version:"DICOM"},"(0028,1090)":{tag:"(0028,1090)",vr:"CS",name:"RecommendedViewingMode",vm:"1",version:"DICOM"},"(0028,1101)":{tag:"(0028,1101)",vr:"xs",name:"RedPaletteColorLookupTableDescriptor",vm:"3",version:"DICOM"},"(0028,1102)":{tag:"(0028,1102)",vr:"xs",name:"GreenPaletteColorLookupTableDescriptor",vm:"3",version:"DICOM"},"(0028,1103)":{tag:"(0028,1103)",vr:"xs",name:"BluePaletteColorLookupTableDescriptor",vm:"3",version:"DICOM"},"(0028,1104)":{tag:"(0028,1104)",vr:"US",name:"AlphaPaletteColorLookupTableDescriptor",vm:"3",version:"DICOM"},"(0028,1199)":{tag:"(0028,1199)",vr:"UI",name:"PaletteColorLookupTableUID",vm:"1",version:"DICOM"},"(0028,1201)":{tag:"(0028,1201)",vr:"OW",name:"RedPaletteColorLookupTableData",vm:"1",version:"DICOM"},"(0028,1202)":{tag:"(0028,1202)",vr:"OW",name:"GreenPaletteColorLookupTableData",vm:"1",version:"DICOM"},"(0028,1203)":{tag:"(0028,1203)",vr:"OW",name:"BluePaletteColorLookupTableData",vm:"1",version:"DICOM"},"(0028,1204)":{tag:"(0028,1204)",vr:"OW",name:"AlphaPaletteColorLookupTableData",vm:"1",version:"DICOM"},"(0028,1221)":{tag:"(0028,1221)",vr:"OW",name:"SegmentedRedPaletteColorLookupTableData",vm:"1",version:"DICOM"},"(0028,1222)":{tag:"(0028,1222)",vr:"OW",name:"SegmentedGreenPaletteColorLookupTableData",vm:"1",version:"DICOM"},"(0028,1223)":{tag:"(0028,1223)",vr:"OW",name:"SegmentedBluePaletteColorLookupTableData",vm:"1",version:"DICOM"},"(0028,1230)":{tag:"(0028,1230)",vr:"SQ",name:"StoredValueColorRangeSequence",vm:"1",version:"DICOM"},"(0028,1231)":{tag:"(0028,1231)",vr:"FD",name:"MinimumStoredValueMapped",vm:"1",version:"DICOM"},"(0028,1232)":{tag:"(0028,1232)",vr:"FD",name:"MaximumStoredValueMapped",vm:"1",version:"DICOM"},"(0028,1300)":{tag:"(0028,1300)",vr:"CS",name:"BreastImplantPresent",vm:"1",version:"DICOM"},"(0028,1350)":{tag:"(0028,1350)",vr:"CS",name:"PartialView",vm:"1",version:"DICOM"},"(0028,1351)":{tag:"(0028,1351)",vr:"ST",name:"PartialViewDescription",vm:"1",version:"DICOM"},"(0028,1352)":{tag:"(0028,1352)",vr:"SQ",name:"PartialViewCodeSequence",vm:"1",version:"DICOM"},"(0028,135A)":{tag:"(0028,135A)",vr:"CS",name:"SpatialLocationsPreserved",vm:"1",version:"DICOM"},"(0028,1401)":{tag:"(0028,1401)",vr:"SQ",name:"DataFrameAssignmentSequence",vm:"1",version:"DICOM"},"(0028,1402)":{tag:"(0028,1402)",vr:"CS",name:"DataPathAssignment",vm:"1",version:"DICOM"},"(0028,1403)":{tag:"(0028,1403)",vr:"US",name:"BitsMappedToColorLookupTable",vm:"1",version:"DICOM"},"(0028,1404)":{tag:"(0028,1404)",vr:"SQ",name:"BlendingLUT1Sequence",vm:"1",version:"DICOM"},"(0028,1405)":{tag:"(0028,1405)",vr:"CS",name:"BlendingLUT1TransferFunction",vm:"1",version:"DICOM"},"(0028,1406)":{tag:"(0028,1406)",vr:"FD",name:"BlendingWeightConstant",vm:"1",version:"DICOM"},"(0028,1407)":{tag:"(0028,1407)",vr:"US",name:"BlendingLookupTableDescriptor",vm:"3",version:"DICOM"},"(0028,1408)":{tag:"(0028,1408)",vr:"OW",name:"BlendingLookupTableData",vm:"1",version:"DICOM"},"(0028,140B)":{tag:"(0028,140B)",vr:"SQ",name:"EnhancedPaletteColorLookupTableSequence",vm:"1",version:"DICOM"},"(0028,140C)":{tag:"(0028,140C)",vr:"SQ",name:"BlendingLUT2Sequence",vm:"1",version:"DICOM"},"(0028,140D)":{tag:"(0028,140D)",vr:"CS",name:"BlendingLUT2TransferFunction",vm:"1",version:"DICOM"},"(0028,140E)":{tag:"(0028,140E)",vr:"CS",name:"DataPathID",vm:"1",version:"DICOM"},"(0028,140F)":{tag:"(0028,140F)",vr:"CS",name:"RGBLUTTransferFunction",vm:"1",version:"DICOM"},"(0028,1410)":{tag:"(0028,1410)",vr:"CS",name:"AlphaLUTTransferFunction",vm:"1",version:"DICOM"},"(0028,2000)":{tag:"(0028,2000)",vr:"OB",name:"ICCProfile",vm:"1",version:"DICOM"},"(0028,2110)":{tag:"(0028,2110)",vr:"CS",name:"LossyImageCompression",vm:"1",version:"DICOM"},"(0028,2112)":{tag:"(0028,2112)",vr:"DS",name:"LossyImageCompressionRatio",vm:"1-n",version:"DICOM"},"(0028,2114)":{tag:"(0028,2114)",vr:"CS",name:"LossyImageCompressionMethod",vm:"1-n",version:"DICOM"},"(0028,3000)":{tag:"(0028,3000)",vr:"SQ",name:"ModalityLUTSequence",vm:"1",version:"DICOM"},"(0028,3001)":{tag:"(0028,3001)",vr:"SQ",name:"VariableModalityLUTSequence",vm:"1",version:"DICOM"},"(0028,3002)":{tag:"(0028,3002)",vr:"xs",name:"LUTDescriptor",vm:"3",version:"DICOM"},"(0028,3003)":{tag:"(0028,3003)",vr:"LO",name:"LUTExplanation",vm:"1",version:"DICOM"},"(0028,3004)":{tag:"(0028,3004)",vr:"LO",name:"ModalityLUTType",vm:"1",version:"DICOM"},"(0028,3006)":{tag:"(0028,3006)",vr:"lt",name:"LUTData",vm:"1-n",version:"DICOM"},"(0028,3010)":{tag:"(0028,3010)",vr:"SQ",name:"VOILUTSequence",vm:"1",version:"DICOM"},"(0028,3110)":{tag:"(0028,3110)",vr:"SQ",name:"SoftcopyVOILUTSequence",vm:"1",version:"DICOM"},"(0028,6010)":{tag:"(0028,6010)",vr:"US",name:"RepresentativeFrameNumber",vm:"1",version:"DICOM"},"(0028,6020)":{tag:"(0028,6020)",vr:"US",name:"FrameNumbersOfInterest",vm:"1-n",version:"DICOM"},"(0028,6022)":{tag:"(0028,6022)",vr:"LO",name:"FrameOfInterestDescription",vm:"1-n",version:"DICOM"},"(0028,6023)":{tag:"(0028,6023)",vr:"CS",name:"FrameOfInterestType",vm:"1-n",version:"DICOM"},"(0028,6040)":{tag:"(0028,6040)",vr:"US",name:"RWavePointer",vm:"1-n",version:"DICOM"},"(0028,6100)":{tag:"(0028,6100)",vr:"SQ",name:"MaskSubtractionSequence",vm:"1",version:"DICOM"},"(0028,6101)":{tag:"(0028,6101)",vr:"CS",name:"MaskOperation",vm:"1",version:"DICOM"},"(0028,6102)":{tag:"(0028,6102)",vr:"US",name:"ApplicableFrameRange",vm:"2-2n",version:"DICOM"},"(0028,6110)":{tag:"(0028,6110)",vr:"US",name:"MaskFrameNumbers",vm:"1-n",version:"DICOM"},"(0028,6112)":{tag:"(0028,6112)",vr:"US",name:"ContrastFrameAveraging",vm:"1",version:"DICOM"},"(0028,6114)":{tag:"(0028,6114)",vr:"FL",name:"MaskSubPixelShift",vm:"2",version:"DICOM"},"(0028,6120)":{tag:"(0028,6120)",vr:"SS",name:"TIDOffset",vm:"1",version:"DICOM"},"(0028,6190)":{tag:"(0028,6190)",vr:"ST",name:"MaskOperationExplanation",vm:"1",version:"DICOM"},"(0028,7000)":{tag:"(0028,7000)",vr:"SQ",name:"EquipmentAdministratorSequence",vm:"1",version:"DICOM"},"(0028,7001)":{tag:"(0028,7001)",vr:"US",name:"NumberOfDisplaySubsystems",vm:"1",version:"DICOM"},"(0028,7002)":{tag:"(0028,7002)",vr:"US",name:"CurrentConfigurationID",vm:"1",version:"DICOM"},"(0028,7003)":{tag:"(0028,7003)",vr:"US",name:"DisplaySubsystemID",vm:"1",version:"DICOM"},"(0028,7004)":{tag:"(0028,7004)",vr:"SH",name:"DisplaySubsystemName",vm:"1",version:"DICOM"},"(0028,7005)":{tag:"(0028,7005)",vr:"LO",name:"DisplaySubsystemDescription",vm:"1",version:"DICOM"},"(0028,7006)":{tag:"(0028,7006)",vr:"CS",name:"SystemStatus",vm:"1",version:"DICOM"},"(0028,7007)":{tag:"(0028,7007)",vr:"LO",name:"SystemStatusComment",vm:"1",version:"DICOM"},"(0028,7008)":{tag:"(0028,7008)",vr:"SQ",name:"TargetLuminanceCharacteristicsSequence",vm:"1",version:"DICOM"},"(0028,7009)":{tag:"(0028,7009)",vr:"US",name:"LuminanceCharacteristicsID",vm:"1",version:"DICOM"},"(0028,700A)":{tag:"(0028,700A)",vr:"SQ",name:"DisplaySubsystemConfigurationSequence",vm:"1",version:"DICOM"},"(0028,700B)":{tag:"(0028,700B)",vr:"US",name:"ConfigurationID",vm:"1",version:"DICOM"},"(0028,700C)":{tag:"(0028,700C)",vr:"SH",name:"ConfigurationName",vm:"1",version:"DICOM"},"(0028,700D)":{tag:"(0028,700D)",vr:"LO",name:"ConfigurationDescription",vm:"1",version:"DICOM"},"(0028,700E)":{tag:"(0028,700E)",vr:"US",name:"ReferencedTargetLuminanceCharacteristicsID",vm:"1",version:"DICOM"},"(0028,700F)":{tag:"(0028,700F)",vr:"SQ",name:"QAResultsSequence",vm:"1",version:"DICOM"},"(0028,7010)":{tag:"(0028,7010)",vr:"SQ",name:"DisplaySubsystemQAResultsSequence",vm:"1",version:"DICOM"},"(0028,7011)":{tag:"(0028,7011)",vr:"SQ",name:"ConfigurationQAResultsSequence",vm:"1",version:"DICOM"},"(0028,7012)":{tag:"(0028,7012)",vr:"SQ",name:"MeasurementEquipmentSequence",vm:"1",version:"DICOM"},"(0028,7013)":{tag:"(0028,7013)",vr:"CS",name:"MeasurementFunctions",vm:"1-n",version:"DICOM"},"(0028,7014)":{tag:"(0028,7014)",vr:"CS",name:"MeasurementEquipmentType",vm:"1",version:"DICOM"},"(0028,7015)":{tag:"(0028,7015)",vr:"SQ",name:"VisualEvaluationResultSequence",vm:"1",version:"DICOM"},"(0028,7016)":{tag:"(0028,7016)",vr:"SQ",name:"DisplayCalibrationResultSequence",vm:"1",version:"DICOM"},"(0028,7017)":{tag:"(0028,7017)",vr:"US",name:"DDLValue",vm:"1",version:"DICOM"},"(0028,7018)":{tag:"(0028,7018)",vr:"FL",name:"CIExyWhitePoint",vm:"2",version:"DICOM"},"(0028,7019)":{tag:"(0028,7019)",vr:"CS",name:"DisplayFunctionType",vm:"1",version:"DICOM"},"(0028,701A)":{tag:"(0028,701A)",vr:"FL",name:"GammaValue",vm:"1",version:"DICOM"},"(0028,701B)":{tag:"(0028,701B)",vr:"US",name:"NumberOfLuminancePoints",vm:"1",version:"DICOM"},"(0028,701C)":{tag:"(0028,701C)",vr:"SQ",name:"LuminanceResponseSequence",vm:"1",version:"DICOM"},"(0028,701D)":{tag:"(0028,701D)",vr:"FL",name:"TargetMinimumLuminance",vm:"1",version:"DICOM"},"(0028,701E)":{tag:"(0028,701E)",vr:"FL",name:"TargetMaximumLuminance",vm:"1",version:"DICOM"},"(0028,701F)":{tag:"(0028,701F)",vr:"FL",name:"LuminanceValue",vm:"1",version:"DICOM"},"(0028,7020)":{tag:"(0028,7020)",vr:"LO",name:"LuminanceResponseDescription",vm:"1",version:"DICOM"},"(0028,7021)":{tag:"(0028,7021)",vr:"CS",name:"WhitePointFlag",vm:"1",version:"DICOM"},"(0028,7022)":{tag:"(0028,7022)",vr:"SQ",name:"DisplayDeviceTypeCodeSequence",vm:"1",version:"DICOM"},"(0028,7023)":{tag:"(0028,7023)",vr:"SQ",name:"DisplaySubsystemSequence",vm:"1",version:"DICOM"},"(0028,7024)":{tag:"(0028,7024)",vr:"SQ",name:"LuminanceResultSequence",vm:"1",version:"DICOM"},"(0028,7025)":{tag:"(0028,7025)",vr:"CS",name:"AmbientLightValueSource",vm:"1",version:"DICOM"},"(0028,7026)":{tag:"(0028,7026)",vr:"CS",name:"MeasuredCharacteristics",vm:"1-n",version:"DICOM"},"(0028,7027)":{tag:"(0028,7027)",vr:"SQ",name:"LuminanceUniformityResultSequence",vm:"1",version:"DICOM"},"(0028,7028)":{tag:"(0028,7028)",vr:"SQ",name:"VisualEvaluationTestSequence",vm:"1",version:"DICOM"},"(0028,7029)":{tag:"(0028,7029)",vr:"CS",name:"TestResult",vm:"1",version:"DICOM"},"(0028,702A)":{tag:"(0028,702A)",vr:"LO",name:"TestResultComment",vm:"1",version:"DICOM"},"(0028,702B)":{tag:"(0028,702B)",vr:"CS",name:"TestImageValidation",vm:"1",version:"DICOM"},"(0028,702C)":{tag:"(0028,702C)",vr:"SQ",name:"TestPatternCodeSequence",vm:"1",version:"DICOM"},"(0028,702D)":{tag:"(0028,702D)",vr:"SQ",name:"MeasurementPatternCodeSequence",vm:"1",version:"DICOM"},"(0028,702E)":{tag:"(0028,702E)",vr:"SQ",name:"VisualEvaluationMethodCodeSequence",vm:"1",version:"DICOM"},"(0028,7FE0)":{tag:"(0028,7FE0)",vr:"UR",name:"PixelDataProviderURL",vm:"1",version:"DICOM"},"(0028,9001)":{tag:"(0028,9001)",vr:"UL",name:"DataPointRows",vm:"1",version:"DICOM"},"(0028,9002)":{tag:"(0028,9002)",vr:"UL",name:"DataPointColumns",vm:"1",version:"DICOM"},"(0028,9003)":{tag:"(0028,9003)",vr:"CS",name:"SignalDomainColumns",vm:"1",version:"DICOM"},"(0028,9108)":{tag:"(0028,9108)",vr:"CS",name:"DataRepresentation",vm:"1",version:"DICOM"},"(0028,9110)":{tag:"(0028,9110)",vr:"SQ",name:"PixelMeasuresSequence",vm:"1",version:"DICOM"},"(0028,9132)":{tag:"(0028,9132)",vr:"SQ",name:"FrameVOILUTSequence",vm:"1",version:"DICOM"},"(0028,9145)":{tag:"(0028,9145)",vr:"SQ",name:"PixelValueTransformationSequence",vm:"1",version:"DICOM"},"(0028,9235)":{tag:"(0028,9235)",vr:"CS",name:"SignalDomainRows",vm:"1",version:"DICOM"},"(0028,9411)":{tag:"(0028,9411)",vr:"FL",name:"DisplayFilterPercentage",vm:"1",version:"DICOM"},"(0028,9415)":{tag:"(0028,9415)",vr:"SQ",name:"FramePixelShiftSequence",vm:"1",version:"DICOM"},"(0028,9416)":{tag:"(0028,9416)",vr:"US",name:"SubtractionItemID",vm:"1",version:"DICOM"},"(0028,9422)":{tag:"(0028,9422)",vr:"SQ",name:"PixelIntensityRelationshipLUTSequence",vm:"1",version:"DICOM"},"(0028,9443)":{tag:"(0028,9443)",vr:"SQ",name:"FramePixelDataPropertiesSequence",vm:"1",version:"DICOM"},"(0028,9444)":{tag:"(0028,9444)",vr:"CS",name:"GeometricalProperties",vm:"1",version:"DICOM"},"(0028,9445)":{tag:"(0028,9445)",vr:"FL",name:"GeometricMaximumDistortion",vm:"1",version:"DICOM"},"(0028,9446)":{tag:"(0028,9446)",vr:"CS",name:"ImageProcessingApplied",vm:"1-n",version:"DICOM"},"(0028,9454)":{tag:"(0028,9454)",vr:"CS",name:"MaskSelectionMode",vm:"1",version:"DICOM"},"(0028,9474)":{tag:"(0028,9474)",vr:"CS",name:"LUTFunction",vm:"1",version:"DICOM"},"(0028,9478)":{tag:"(0028,9478)",vr:"FL",name:"MaskVisibilityPercentage",vm:"1",version:"DICOM"},"(0028,9501)":{tag:"(0028,9501)",vr:"SQ",name:"PixelShiftSequence",vm:"1",version:"DICOM"},"(0028,9502)":{tag:"(0028,9502)",vr:"SQ",name:"RegionPixelShiftSequence",vm:"1",version:"DICOM"},"(0028,9503)":{tag:"(0028,9503)",vr:"SS",name:"VerticesOfTheRegion",vm:"2-2n",version:"DICOM"},"(0028,9505)":{tag:"(0028,9505)",vr:"SQ",name:"MultiFramePresentationSequence",vm:"1",version:"DICOM"},"(0028,9506)":{tag:"(0028,9506)",vr:"US",name:"PixelShiftFrameRange",vm:"2-2n",version:"DICOM"},"(0028,9507)":{tag:"(0028,9507)",vr:"US",name:"LUTFrameRange",vm:"2-2n",version:"DICOM"},"(0028,9520)":{tag:"(0028,9520)",vr:"DS",name:"ImageToEquipmentMappingMatrix",vm:"16",version:"DICOM"},"(0028,9537)":{tag:"(0028,9537)",vr:"CS",name:"EquipmentCoordinateSystemIdentification",vm:"1",version:"DICOM"},"(0032,1031)":{tag:"(0032,1031)",vr:"SQ",name:"RequestingPhysicianIdentificationSequence",vm:"1",version:"DICOM"},"(0032,1032)":{tag:"(0032,1032)",vr:"PN",name:"RequestingPhysician",vm:"1",version:"DICOM"},"(0032,1033)":{tag:"(0032,1033)",vr:"LO",name:"RequestingService",vm:"1",version:"DICOM"},"(0032,1034)":{tag:"(0032,1034)",vr:"SQ",name:"RequestingServiceCodeSequence",vm:"1",version:"DICOM"},"(0032,1060)":{tag:"(0032,1060)",vr:"LO",name:"RequestedProcedureDescription",vm:"1",version:"DICOM"},"(0032,1064)":{tag:"(0032,1064)",vr:"SQ",name:"RequestedProcedureCodeSequence",vm:"1",version:"DICOM"},"(0032,1065)":{tag:"(0032,1065)",vr:"SQ",name:"RequestedLateralityCodeSequence",vm:"1",version:"DICOM"},"(0032,1066)":{tag:"(0032,1066)",vr:"UT",name:"ReasonForVisit",vm:"1",version:"DICOM"},"(0032,1067)":{tag:"(0032,1067)",vr:"SQ",name:"ReasonForVisitCodeSequence",vm:"1",version:"DICOM"},"(0032,1070)":{tag:"(0032,1070)",vr:"LO",name:"RequestedContrastAgent",vm:"1",version:"DICOM"},"(0034,0001)":{tag:"(0034,0001)",vr:"SQ",name:"FlowIdentifierSequence",vm:"1",version:"DICOM"},"(0034,0002)":{tag:"(0034,0002)",vr:"OB",name:"FlowIdentifier",vm:"1",version:"DICOM"},"(0034,0003)":{tag:"(0034,0003)",vr:"UI",name:"FlowTransferSyntaxUID",vm:"1",version:"DICOM"},"(0034,0004)":{tag:"(0034,0004)",vr:"UL",name:"FlowRTPSamplingRate",vm:"1",version:"DICOM"},"(0034,0005)":{tag:"(0034,0005)",vr:"OB",name:"SourceIdentifier",vm:"1",version:"DICOM"},"(0034,0007)":{tag:"(0034,0007)",vr:"OB",name:"FrameOriginTimestamp",vm:"1",version:"DICOM"},"(0034,0008)":{tag:"(0034,0008)",vr:"CS",name:"IncludesImagingSubject",vm:"1",version:"DICOM"},"(0034,0009)":{tag:"(0034,0009)",vr:"SQ",name:"FrameUsefulnessGroupSequence",vm:"1",version:"DICOM"},"(0034,000A)":{tag:"(0034,000A)",vr:"SQ",name:"RealTimeBulkDataFlowSequence",vm:"1",version:"DICOM"},"(0034,000B)":{tag:"(0034,000B)",vr:"SQ",name:"CameraPositionGroupSequence",vm:"1",version:"DICOM"},"(0034,000C)":{tag:"(0034,000C)",vr:"CS",name:"IncludesInformation",vm:"1",version:"DICOM"},"(0034,000D)":{tag:"(0034,000D)",vr:"SQ",name:"TimeOfFrameGroupSequence",vm:"1",version:"DICOM"},"(0038,0004)":{tag:"(0038,0004)",vr:"SQ",name:"ReferencedPatientAliasSequence",vm:"1",version:"DICOM"},"(0038,0008)":{tag:"(0038,0008)",vr:"CS",name:"VisitStatusID",vm:"1",version:"DICOM"},"(0038,0010)":{tag:"(0038,0010)",vr:"LO",name:"AdmissionID",vm:"1",version:"DICOM"},"(0038,0014)":{tag:"(0038,0014)",vr:"SQ",name:"IssuerOfAdmissionIDSequence",vm:"1",version:"DICOM"},"(0038,0016)":{tag:"(0038,0016)",vr:"LO",name:"RouteOfAdmissions",vm:"1",version:"DICOM"},"(0038,0020)":{tag:"(0038,0020)",vr:"DA",name:"AdmittingDate",vm:"1",version:"DICOM"},"(0038,0021)":{tag:"(0038,0021)",vr:"TM",name:"AdmittingTime",vm:"1",version:"DICOM"},"(0038,0050)":{tag:"(0038,0050)",vr:"LO",name:"SpecialNeeds",vm:"1",version:"DICOM"},"(0038,0060)":{tag:"(0038,0060)",vr:"LO",name:"ServiceEpisodeID",vm:"1",version:"DICOM"},"(0038,0062)":{tag:"(0038,0062)",vr:"LO",name:"ServiceEpisodeDescription",vm:"1",version:"DICOM"},"(0038,0064)":{tag:"(0038,0064)",vr:"SQ",name:"IssuerOfServiceEpisodeIDSequence",vm:"1",version:"DICOM"},"(0038,0100)":{tag:"(0038,0100)",vr:"SQ",name:"PertinentDocumentsSequence",vm:"1",version:"DICOM"},"(0038,0101)":{tag:"(0038,0101)",vr:"SQ",name:"PertinentResourcesSequence",vm:"1",version:"DICOM"},"(0038,0102)":{tag:"(0038,0102)",vr:"LO",name:"ResourceDescription",vm:"1",version:"DICOM"},"(0038,0300)":{tag:"(0038,0300)",vr:"LO",name:"CurrentPatientLocation",vm:"1",version:"DICOM"},"(0038,0400)":{tag:"(0038,0400)",vr:"LO",name:"PatientInstitutionResidence",vm:"1",version:"DICOM"},"(0038,0500)":{tag:"(0038,0500)",vr:"LO",name:"PatientState",vm:"1",version:"DICOM"},"(0038,0502)":{tag:"(0038,0502)",vr:"SQ",name:"PatientClinicalTrialParticipationSequence",vm:"1",version:"DICOM"},"(0038,4000)":{tag:"(0038,4000)",vr:"LT",name:"VisitComments",vm:"1",version:"DICOM"},"(003A,0004)":{tag:"(003A,0004)",vr:"CS",name:"WaveformOriginality",vm:"1",version:"DICOM"},"(003A,0005)":{tag:"(003A,0005)",vr:"US",name:"NumberOfWaveformChannels",vm:"1",version:"DICOM"},"(003A,0010)":{tag:"(003A,0010)",vr:"UL",name:"NumberOfWaveformSamples",vm:"1",version:"DICOM"},"(003A,001A)":{tag:"(003A,001A)",vr:"DS",name:"SamplingFrequency",vm:"1",version:"DICOM"},"(003A,0020)":{tag:"(003A,0020)",vr:"SH",name:"MultiplexGroupLabel",vm:"1",version:"DICOM"},"(003A,0200)":{tag:"(003A,0200)",vr:"SQ",name:"ChannelDefinitionSequence",vm:"1",version:"DICOM"},"(003A,0202)":{tag:"(003A,0202)",vr:"IS",name:"WaveformChannelNumber",vm:"1",version:"DICOM"},"(003A,0203)":{tag:"(003A,0203)",vr:"SH",name:"ChannelLabel",vm:"1",version:"DICOM"},"(003A,0205)":{tag:"(003A,0205)",vr:"CS",name:"ChannelStatus",vm:"1-n",version:"DICOM"},"(003A,0208)":{tag:"(003A,0208)",vr:"SQ",name:"ChannelSourceSequence",vm:"1",version:"DICOM"},"(003A,0209)":{tag:"(003A,0209)",vr:"SQ",name:"ChannelSourceModifiersSequence",vm:"1",version:"DICOM"},"(003A,020A)":{tag:"(003A,020A)",vr:"SQ",name:"SourceWaveformSequence",vm:"1",version:"DICOM"},"(003A,020C)":{tag:"(003A,020C)",vr:"LO",name:"ChannelDerivationDescription",vm:"1",version:"DICOM"},"(003A,0210)":{tag:"(003A,0210)",vr:"DS",name:"ChannelSensitivity",vm:"1",version:"DICOM"},"(003A,0211)":{tag:"(003A,0211)",vr:"SQ",name:"ChannelSensitivityUnitsSequence",vm:"1",version:"DICOM"},"(003A,0212)":{tag:"(003A,0212)",vr:"DS",name:"ChannelSensitivityCorrectionFactor",vm:"1",version:"DICOM"},"(003A,0213)":{tag:"(003A,0213)",vr:"DS",name:"ChannelBaseline",vm:"1",version:"DICOM"},"(003A,0214)":{tag:"(003A,0214)",vr:"DS",name:"ChannelTimeSkew",vm:"1",version:"DICOM"},"(003A,0215)":{tag:"(003A,0215)",vr:"DS",name:"ChannelSampleSkew",vm:"1",version:"DICOM"},"(003A,0218)":{tag:"(003A,0218)",vr:"DS",name:"ChannelOffset",vm:"1",version:"DICOM"},"(003A,021A)":{tag:"(003A,021A)",vr:"US",name:"WaveformBitsStored",vm:"1",version:"DICOM"},"(003A,0220)":{tag:"(003A,0220)",vr:"DS",name:"FilterLowFrequency",vm:"1",version:"DICOM"},"(003A,0221)":{tag:"(003A,0221)",vr:"DS",name:"FilterHighFrequency",vm:"1",version:"DICOM"},"(003A,0222)":{tag:"(003A,0222)",vr:"DS",name:"NotchFilterFrequency",vm:"1",version:"DICOM"},"(003A,0223)":{tag:"(003A,0223)",vr:"DS",name:"NotchFilterBandwidth",vm:"1",version:"DICOM"},"(003A,0230)":{tag:"(003A,0230)",vr:"FL",name:"WaveformDataDisplayScale",vm:"1",version:"DICOM"},"(003A,0231)":{tag:"(003A,0231)",vr:"US",name:"WaveformDisplayBackgroundCIELabValue",vm:"3",version:"DICOM"},"(003A,0240)":{tag:"(003A,0240)",vr:"SQ",name:"WaveformPresentationGroupSequence",vm:"1",version:"DICOM"},"(003A,0241)":{tag:"(003A,0241)",vr:"US",name:"PresentationGroupNumber",vm:"1",version:"DICOM"},"(003A,0242)":{tag:"(003A,0242)",vr:"SQ",name:"ChannelDisplaySequence",vm:"1",version:"DICOM"},"(003A,0244)":{tag:"(003A,0244)",vr:"US",name:"ChannelRecommendedDisplayCIELabValue",vm:"3",version:"DICOM"},"(003A,0245)":{tag:"(003A,0245)",vr:"FL",name:"ChannelPosition",vm:"1",version:"DICOM"},"(003A,0246)":{tag:"(003A,0246)",vr:"CS",name:"DisplayShadingFlag",vm:"1",version:"DICOM"},"(003A,0247)":{tag:"(003A,0247)",vr:"FL",name:"FractionalChannelDisplayScale",vm:"1",version:"DICOM"},"(003A,0248)":{tag:"(003A,0248)",vr:"FL",name:"AbsoluteChannelDisplayScale",vm:"1",version:"DICOM"},"(003A,0300)":{tag:"(003A,0300)",vr:"SQ",name:"MultiplexedAudioChannelsDescriptionCodeSequence",vm:"1",version:"DICOM"},"(003A,0301)":{tag:"(003A,0301)",vr:"IS",name:"ChannelIdentificationCode",vm:"1",version:"DICOM"},"(003A,0302)":{tag:"(003A,0302)",vr:"CS",name:"ChannelMode",vm:"1",version:"DICOM"},"(003A,0310)":{tag:"(003A,0310)",vr:"UI",name:"MultiplexGroupUID",vm:"1",version:"DICOM"},"(003A,0311)":{tag:"(003A,0311)",vr:"DS",name:"PowerlineFrequency",vm:"1",version:"DICOM"},"(003A,0312)":{tag:"(003A,0312)",vr:"SQ",name:"ChannelImpedanceSequence",vm:"1",version:"DICOM"},"(003A,0313)":{tag:"(003A,0313)",vr:"DS",name:"ImpedanceValue",vm:"1",version:"DICOM"},"(003A,0314)":{tag:"(003A,0314)",vr:"DT",name:"ImpedanceMeasurementDateTime",vm:"1",version:"DICOM"},"(003A,0315)":{tag:"(003A,0315)",vr:"DS",name:"ImpedanceMeasurementFrequency",vm:"1",version:"DICOM"},"(003A,0316)":{tag:"(003A,0316)",vr:"CS",name:"ImpedanceMeasurementCurrentType",vm:"1",version:"DICOM"},"(003A,0317)":{tag:"(003A,0317)",vr:"CS",name:"WaveformAmplifierType",vm:"1",version:"DICOM"},"(003A,0318)":{tag:"(003A,0318)",vr:"SQ",name:"FilterLowFrequencyCharacteristicsSequence",vm:"1",version:"DICOM"},"(003A,0319)":{tag:"(003A,0319)",vr:"SQ",name:"FilterHighFrequencyCharacteristicsSequence",vm:"1",version:"DICOM"},"(003A,0320)":{tag:"(003A,0320)",vr:"SQ",name:"SummarizedFilterLookupTable",vm:"1",version:"DICOM"},"(003A,0321)":{tag:"(003A,0321)",vr:"SQ",name:"NotchFilterCharacteristicsSequence",vm:"1",version:"DICOM"},"(003A,0322)":{tag:"(003A,0322)",vr:"CS",name:"WaveformFilterType",vm:"1",version:"DICOM"},"(003A,0323)":{tag:"(003A,0323)",vr:"SQ",name:"AnalogFilterCharacteristicsSequence",vm:"1",version:"DICOM"},"(003A,0324)":{tag:"(003A,0324)",vr:"DS",name:"AnalogFilterRollOff",vm:"1",version:"DICOM"},"(003A,0325)":{tag:"(003A,0325)",vr:"SQ",name:"AnalogFilterType",vm:"1",version:"DICOM"},"(003A,0326)":{tag:"(003A,0326)",vr:"SQ",name:"DigitalFilterCharacteristicsSequence",vm:"1",version:"DICOM"},"(003A,0327)":{tag:"(003A,0327)",vr:"IS",name:"DigitalFilterOrder",vm:"1",version:"DICOM"},"(003A,0328)":{tag:"(003A,0328)",vr:"SQ",name:"DigitalFilterTypeCodeSequence",vm:"1",version:"DICOM"},"(003A,0329)":{tag:"(003A,0329)",vr:"ST",name:"WaveformFilterDescription",vm:"1",version:"DICOM"},"(003A,032A)":{tag:"(003A,032A)",vr:"SQ",name:"FilterLookupTableSequence",vm:"1",version:"DICOM"},"(003A,032B)":{tag:"(003A,032B)",vr:"ST",name:"FilterLookupTableDescription",vm:"1",version:"DICOM"},"(003A,032C)":{tag:"(003A,032C)",vr:"SQ",name:"FrequencyEncodingCodeSequence",vm:"1",version:"DICOM"},"(003A,032D)":{tag:"(003A,032D)",vr:"SQ",name:"MagnitudeEncodingCodeSequence",vm:"1",version:"DICOM"},"(003A,032E)":{tag:"(003A,032E)",vr:"OD",name:"FilterLookupTableData",vm:"1",version:"DICOM"},"(0040,0001)":{tag:"(0040,0001)",vr:"AE",name:"ScheduledStationAETitle",vm:"1-n",version:"DICOM"},"(0040,0002)":{tag:"(0040,0002)",vr:"DA",name:"ScheduledProcedureStepStartDate",vm:"1",version:"DICOM"},"(0040,0003)":{tag:"(0040,0003)",vr:"TM",name:"ScheduledProcedureStepStartTime",vm:"1",version:"DICOM"},"(0040,0004)":{tag:"(0040,0004)",vr:"DA",name:"ScheduledProcedureStepEndDate",vm:"1",version:"DICOM"},"(0040,0005)":{tag:"(0040,0005)",vr:"TM",name:"ScheduledProcedureStepEndTime",vm:"1",version:"DICOM"},"(0040,0006)":{tag:"(0040,0006)",vr:"PN",name:"ScheduledPerformingPhysicianName",vm:"1",version:"DICOM"},"(0040,0007)":{tag:"(0040,0007)",vr:"LO",name:"ScheduledProcedureStepDescription",vm:"1",version:"DICOM"},"(0040,0008)":{tag:"(0040,0008)",vr:"SQ",name:"ScheduledProtocolCodeSequence",vm:"1",version:"DICOM"},"(0040,0009)":{tag:"(0040,0009)",vr:"SH",name:"ScheduledProcedureStepID",vm:"1",version:"DICOM"},"(0040,000A)":{tag:"(0040,000A)",vr:"SQ",name:"StageCodeSequence",vm:"1",version:"DICOM"},"(0040,000B)":{tag:"(0040,000B)",vr:"SQ",name:"ScheduledPerformingPhysicianIdentificationSequence",vm:"1",version:"DICOM"},"(0040,0010)":{tag:"(0040,0010)",vr:"SH",name:"ScheduledStationName",vm:"1-n",version:"DICOM"},"(0040,0011)":{tag:"(0040,0011)",vr:"SH",name:"ScheduledProcedureStepLocation",vm:"1",version:"DICOM"},"(0040,0012)":{tag:"(0040,0012)",vr:"LO",name:"PreMedication",vm:"1",version:"DICOM"},"(0040,0020)":{tag:"(0040,0020)",vr:"CS",name:"ScheduledProcedureStepStatus",vm:"1",version:"DICOM"},"(0040,0026)":{tag:"(0040,0026)",vr:"SQ",name:"OrderPlacerIdentifierSequence",vm:"1",version:"DICOM"},"(0040,0027)":{tag:"(0040,0027)",vr:"SQ",name:"OrderFillerIdentifierSequence",vm:"1",version:"DICOM"},"(0040,0031)":{tag:"(0040,0031)",vr:"UT",name:"LocalNamespaceEntityID",vm:"1",version:"DICOM"},"(0040,0032)":{tag:"(0040,0032)",vr:"UT",name:"UniversalEntityID",vm:"1",version:"DICOM"},"(0040,0033)":{tag:"(0040,0033)",vr:"CS",name:"UniversalEntityIDType",vm:"1",version:"DICOM"},"(0040,0035)":{tag:"(0040,0035)",vr:"CS",name:"IdentifierTypeCode",vm:"1",version:"DICOM"},"(0040,0036)":{tag:"(0040,0036)",vr:"SQ",name:"AssigningFacilitySequence",vm:"1",version:"DICOM"},"(0040,0039)":{tag:"(0040,0039)",vr:"SQ",name:"AssigningJurisdictionCodeSequence",vm:"1",version:"DICOM"},"(0040,003A)":{tag:"(0040,003A)",vr:"SQ",name:"AssigningAgencyOrDepartmentCodeSequence",vm:"1",version:"DICOM"},"(0040,0100)":{tag:"(0040,0100)",vr:"SQ",name:"ScheduledProcedureStepSequence",vm:"1",version:"DICOM"},"(0040,0220)":{tag:"(0040,0220)",vr:"SQ",name:"ReferencedNonImageCompositeSOPInstanceSequence",vm:"1",version:"DICOM"},"(0040,0241)":{tag:"(0040,0241)",vr:"AE",name:"PerformedStationAETitle",vm:"1",version:"DICOM"},"(0040,0242)":{tag:"(0040,0242)",vr:"SH",name:"PerformedStationName",vm:"1",version:"DICOM"},"(0040,0243)":{tag:"(0040,0243)",vr:"SH",name:"PerformedLocation",vm:"1",version:"DICOM"},"(0040,0244)":{tag:"(0040,0244)",vr:"DA",name:"PerformedProcedureStepStartDate",vm:"1",version:"DICOM"},"(0040,0245)":{tag:"(0040,0245)",vr:"TM",name:"PerformedProcedureStepStartTime",vm:"1",version:"DICOM"},"(0040,0250)":{tag:"(0040,0250)",vr:"DA",name:"PerformedProcedureStepEndDate",vm:"1",version:"DICOM"},"(0040,0251)":{tag:"(0040,0251)",vr:"TM",name:"PerformedProcedureStepEndTime",vm:"1",version:"DICOM"},"(0040,0252)":{tag:"(0040,0252)",vr:"CS",name:"PerformedProcedureStepStatus",vm:"1",version:"DICOM"},"(0040,0253)":{tag:"(0040,0253)",vr:"SH",name:"PerformedProcedureStepID",vm:"1",version:"DICOM"},"(0040,0254)":{tag:"(0040,0254)",vr:"LO",name:"PerformedProcedureStepDescription",vm:"1",version:"DICOM"},"(0040,0255)":{tag:"(0040,0255)",vr:"LO",name:"PerformedProcedureTypeDescription",vm:"1",version:"DICOM"},"(0040,0260)":{tag:"(0040,0260)",vr:"SQ",name:"PerformedProtocolCodeSequence",vm:"1",version:"DICOM"},"(0040,0261)":{tag:"(0040,0261)",vr:"CS",name:"PerformedProtocolType",vm:"1",version:"DICOM"},"(0040,0270)":{tag:"(0040,0270)",vr:"SQ",name:"ScheduledStepAttributesSequence",vm:"1",version:"DICOM"},"(0040,0275)":{tag:"(0040,0275)",vr:"SQ",name:"RequestAttributesSequence",vm:"1",version:"DICOM"},"(0040,0280)":{tag:"(0040,0280)",vr:"ST",name:"CommentsOnThePerformedProcedureStep",vm:"1",version:"DICOM"},"(0040,0281)":{tag:"(0040,0281)",vr:"SQ",name:"PerformedProcedureStepDiscontinuationReasonCodeSequence",vm:"1",version:"DICOM"},"(0040,0293)":{tag:"(0040,0293)",vr:"SQ",name:"QuantitySequence",vm:"1",version:"DICOM"},"(0040,0294)":{tag:"(0040,0294)",vr:"DS",name:"Quantity",vm:"1",version:"DICOM"},"(0040,0295)":{tag:"(0040,0295)",vr:"SQ",name:"MeasuringUnitsSequence",vm:"1",version:"DICOM"},"(0040,0296)":{tag:"(0040,0296)",vr:"SQ",name:"BillingItemSequence",vm:"1",version:"DICOM"},"(0040,0300)":{tag:"(0040,0300)",vr:"US",name:"TotalTimeOfFluoroscopy",vm:"1",version:"DICOM"},"(0040,0301)":{tag:"(0040,0301)",vr:"US",name:"TotalNumberOfExposures",vm:"1",version:"DICOM"},"(0040,0302)":{tag:"(0040,0302)",vr:"US",name:"EntranceDose",vm:"1",version:"DICOM"},"(0040,0303)":{tag:"(0040,0303)",vr:"US",name:"ExposedArea",vm:"1-2",version:"DICOM"},"(0040,0306)":{tag:"(0040,0306)",vr:"DS",name:"DistanceSourceToEntrance",vm:"1",version:"DICOM"},"(0040,030E)":{tag:"(0040,030E)",vr:"SQ",name:"ExposureDoseSequence",vm:"1",version:"DICOM"},"(0040,0310)":{tag:"(0040,0310)",vr:"ST",name:"CommentsOnRadiationDose",vm:"1",version:"DICOM"},"(0040,0312)":{tag:"(0040,0312)",vr:"DS",name:"XRayOutput",vm:"1",version:"DICOM"},"(0040,0314)":{tag:"(0040,0314)",vr:"DS",name:"HalfValueLayer",vm:"1",version:"DICOM"},"(0040,0316)":{tag:"(0040,0316)",vr:"DS",name:"OrganDose",vm:"1",version:"DICOM"},"(0040,0318)":{tag:"(0040,0318)",vr:"CS",name:"OrganExposed",vm:"1",version:"DICOM"},"(0040,0320)":{tag:"(0040,0320)",vr:"SQ",name:"BillingProcedureStepSequence",vm:"1",version:"DICOM"},"(0040,0321)":{tag:"(0040,0321)",vr:"SQ",name:"FilmConsumptionSequence",vm:"1",version:"DICOM"},"(0040,0324)":{tag:"(0040,0324)",vr:"SQ",name:"BillingSuppliesAndDevicesSequence",vm:"1",version:"DICOM"},"(0040,0340)":{tag:"(0040,0340)",vr:"SQ",name:"PerformedSeriesSequence",vm:"1",version:"DICOM"},"(0040,0400)":{tag:"(0040,0400)",vr:"LT",name:"CommentsOnTheScheduledProcedureStep",vm:"1",version:"DICOM"},"(0040,0440)":{tag:"(0040,0440)",vr:"SQ",name:"ProtocolContextSequence",vm:"1",version:"DICOM"},"(0040,0441)":{tag:"(0040,0441)",vr:"SQ",name:"ContentItemModifierSequence",vm:"1",version:"DICOM"},"(0040,0500)":{tag:"(0040,0500)",vr:"SQ",name:"ScheduledSpecimenSequence",vm:"1",version:"DICOM"},"(0040,0512)":{tag:"(0040,0512)",vr:"LO",name:"ContainerIdentifier",vm:"1",version:"DICOM"},"(0040,0513)":{tag:"(0040,0513)",vr:"SQ",name:"IssuerOfTheContainerIdentifierSequence",vm:"1",version:"DICOM"},"(0040,0515)":{tag:"(0040,0515)",vr:"SQ",name:"AlternateContainerIdentifierSequence",vm:"1",version:"DICOM"},"(0040,0518)":{tag:"(0040,0518)",vr:"SQ",name:"ContainerTypeCodeSequence",vm:"1",version:"DICOM"},"(0040,051A)":{tag:"(0040,051A)",vr:"LO",name:"ContainerDescription",vm:"1",version:"DICOM"},"(0040,0520)":{tag:"(0040,0520)",vr:"SQ",name:"ContainerComponentSequence",vm:"1",version:"DICOM"},"(0040,0551)":{tag:"(0040,0551)",vr:"LO",name:"SpecimenIdentifier",vm:"1",version:"DICOM"},"(0040,0554)":{tag:"(0040,0554)",vr:"UI",name:"SpecimenUID",vm:"1",version:"DICOM"},"(0040,0555)":{tag:"(0040,0555)",vr:"SQ",name:"AcquisitionContextSequence",vm:"1",version:"DICOM"},"(0040,0556)":{tag:"(0040,0556)",vr:"ST",name:"AcquisitionContextDescription",vm:"1",version:"DICOM"},"(0040,0560)":{tag:"(0040,0560)",vr:"SQ",name:"SpecimenDescriptionSequence",vm:"1",version:"DICOM"},"(0040,0562)":{tag:"(0040,0562)",vr:"SQ",name:"IssuerOfTheSpecimenIdentifierSequence",vm:"1",version:"DICOM"},"(0040,059A)":{tag:"(0040,059A)",vr:"SQ",name:"SpecimenTypeCodeSequence",vm:"1",version:"DICOM"},"(0040,0600)":{tag:"(0040,0600)",vr:"LO",name:"SpecimenShortDescription",vm:"1",version:"DICOM"},"(0040,0602)":{tag:"(0040,0602)",vr:"UT",name:"SpecimenDetailedDescription",vm:"1",version:"DICOM"},"(0040,0610)":{tag:"(0040,0610)",vr:"SQ",name:"SpecimenPreparationSequence",vm:"1",version:"DICOM"},"(0040,0612)":{tag:"(0040,0612)",vr:"SQ",name:"SpecimenPreparationStepContentItemSequence",vm:"1",version:"DICOM"},"(0040,0620)":{tag:"(0040,0620)",vr:"SQ",name:"SpecimenLocalizationContentItemSequence",vm:"1",version:"DICOM"},"(0040,0710)":{tag:"(0040,0710)",vr:"SQ",name:"WholeSlideMicroscopyImageFrameTypeSequence",vm:"1",version:"DICOM"},"(0040,071A)":{tag:"(0040,071A)",vr:"SQ",name:"ImageCenterPointCoordinatesSequence",vm:"1",version:"DICOM"},"(0040,072A)":{tag:"(0040,072A)",vr:"DS",name:"XOffsetInSlideCoordinateSystem",vm:"1",version:"DICOM"},"(0040,073A)":{tag:"(0040,073A)",vr:"DS",name:"YOffsetInSlideCoordinateSystem",vm:"1",version:"DICOM"},"(0040,074A)":{tag:"(0040,074A)",vr:"DS",name:"ZOffsetInSlideCoordinateSystem",vm:"1",version:"DICOM"},"(0040,08EA)":{tag:"(0040,08EA)",vr:"SQ",name:"MeasurementUnitsCodeSequence",vm:"1",version:"DICOM"},"(0040,1001)":{tag:"(0040,1001)",vr:"SH",name:"RequestedProcedureID",vm:"1",version:"DICOM"},"(0040,1002)":{tag:"(0040,1002)",vr:"LO",name:"ReasonForTheRequestedProcedure",vm:"1",version:"DICOM"},"(0040,1003)":{tag:"(0040,1003)",vr:"SH",name:"RequestedProcedurePriority",vm:"1",version:"DICOM"},"(0040,1004)":{tag:"(0040,1004)",vr:"LO",name:"PatientTransportArrangements",vm:"1",version:"DICOM"},"(0040,1005)":{tag:"(0040,1005)",vr:"LO",name:"RequestedProcedureLocation",vm:"1",version:"DICOM"},"(0040,1008)":{tag:"(0040,1008)",vr:"LO",name:"ConfidentialityCode",vm:"1",version:"DICOM"},"(0040,1009)":{tag:"(0040,1009)",vr:"SH",name:"ReportingPriority",vm:"1",version:"DICOM"},"(0040,100A)":{tag:"(0040,100A)",vr:"SQ",name:"ReasonForRequestedProcedureCodeSequence",vm:"1",version:"DICOM"},"(0040,1010)":{tag:"(0040,1010)",vr:"PN",name:"NamesOfIntendedRecipientsOfResults",vm:"1-n",version:"DICOM"},"(0040,1011)":{tag:"(0040,1011)",vr:"SQ",name:"IntendedRecipientsOfResultsIdentificationSequence",vm:"1",version:"DICOM"},"(0040,1012)":{tag:"(0040,1012)",vr:"SQ",name:"ReasonForPerformedProcedureCodeSequence",vm:"1",version:"DICOM"},"(0040,1101)":{tag:"(0040,1101)",vr:"SQ",name:"PersonIdentificationCodeSequence",vm:"1",version:"DICOM"},"(0040,1102)":{tag:"(0040,1102)",vr:"ST",name:"PersonAddress",vm:"1",version:"DICOM"},"(0040,1103)":{tag:"(0040,1103)",vr:"LO",name:"PersonTelephoneNumbers",vm:"1-n",version:"DICOM"},"(0040,1104)":{tag:"(0040,1104)",vr:"LT",name:"PersonTelecomInformation",vm:"1",version:"DICOM"},"(0040,1400)":{tag:"(0040,1400)",vr:"LT",name:"RequestedProcedureComments",vm:"1",version:"DICOM"},"(0040,2004)":{tag:"(0040,2004)",vr:"DA",name:"IssueDateOfImagingServiceRequest",vm:"1",version:"DICOM"},"(0040,2005)":{tag:"(0040,2005)",vr:"TM",name:"IssueTimeOfImagingServiceRequest",vm:"1",version:"DICOM"},"(0040,2008)":{tag:"(0040,2008)",vr:"PN",name:"OrderEnteredBy",vm:"1",version:"DICOM"},"(0040,2009)":{tag:"(0040,2009)",vr:"SH",name:"OrderEntererLocation",vm:"1",version:"DICOM"},"(0040,2010)":{tag:"(0040,2010)",vr:"SH",name:"OrderCallbackPhoneNumber",vm:"1",version:"DICOM"},"(0040,2011)":{tag:"(0040,2011)",vr:"LT",name:"OrderCallbackTelecomInformation",vm:"1",version:"DICOM"},"(0040,2016)":{tag:"(0040,2016)",vr:"LO",name:"PlacerOrderNumberImagingServiceRequest",vm:"1",version:"DICOM"},"(0040,2017)":{tag:"(0040,2017)",vr:"LO",name:"FillerOrderNumberImagingServiceRequest",vm:"1",version:"DICOM"},"(0040,2400)":{tag:"(0040,2400)",vr:"LT",name:"ImagingServiceRequestComments",vm:"1",version:"DICOM"},"(0040,3001)":{tag:"(0040,3001)",vr:"LO",name:"ConfidentialityConstraintOnPatientDataDescription",vm:"1",version:"DICOM"},"(0040,4005)":{tag:"(0040,4005)",vr:"DT",name:"ScheduledProcedureStepStartDateTime",vm:"1",version:"DICOM"},"(0040,4007)":{tag:"(0040,4007)",vr:"SQ",name:"PerformedProcessingApplicationsCodeSequence",vm:"1",version:"DICOM"},"(0040,4008)":{tag:"(0040,4008)",vr:"DT",name:"ScheduledProcedureStepExpirationDateTime",vm:"1",version:"DICOM"},"(0040,4009)":{tag:"(0040,4009)",vr:"SQ",name:"HumanPerformerCodeSequence",vm:"1",version:"DICOM"},"(0040,4010)":{tag:"(0040,4010)",vr:"DT",name:"ScheduledProcedureStepModificationDateTime",vm:"1",version:"DICOM"},"(0040,4011)":{tag:"(0040,4011)",vr:"DT",name:"ExpectedCompletionDateTime",vm:"1",version:"DICOM"},"(0040,4018)":{tag:"(0040,4018)",vr:"SQ",name:"ScheduledWorkitemCodeSequence",vm:"1",version:"DICOM"},"(0040,4019)":{tag:"(0040,4019)",vr:"SQ",name:"PerformedWorkitemCodeSequence",vm:"1",version:"DICOM"},"(0040,4020)":{tag:"(0040,4020)",vr:"CS",name:"InputAvailabilityFlag",vm:"1",version:"DICOM"},"(0040,4021)":{tag:"(0040,4021)",vr:"SQ",name:"InputInformationSequence",vm:"1",version:"DICOM"},"(0040,4025)":{tag:"(0040,4025)",vr:"SQ",name:"ScheduledStationNameCodeSequence",vm:"1",version:"DICOM"},"(0040,4026)":{tag:"(0040,4026)",vr:"SQ",name:"ScheduledStationClassCodeSequence",vm:"1",version:"DICOM"},"(0040,4027)":{tag:"(0040,4027)",vr:"SQ",name:"ScheduledStationGeographicLocationCodeSequence",vm:"1",version:"DICOM"},"(0040,4028)":{tag:"(0040,4028)",vr:"SQ",name:"PerformedStationNameCodeSequence",vm:"1",version:"DICOM"},"(0040,4029)":{tag:"(0040,4029)",vr:"SQ",name:"PerformedStationClassCodeSequence",vm:"1",version:"DICOM"},"(0040,4030)":{tag:"(0040,4030)",vr:"SQ",name:"PerformedStationGeographicLocationCodeSequence",vm:"1",version:"DICOM"},"(0040,4033)":{tag:"(0040,4033)",vr:"SQ",name:"OutputInformationSequence",vm:"1",version:"DICOM"},"(0040,4034)":{tag:"(0040,4034)",vr:"SQ",name:"ScheduledHumanPerformersSequence",vm:"1",version:"DICOM"},"(0040,4035)":{tag:"(0040,4035)",vr:"SQ",name:"ActualHumanPerformersSequence",vm:"1",version:"DICOM"},"(0040,4036)":{tag:"(0040,4036)",vr:"LO",name:"HumanPerformerOrganization",vm:"1",version:"DICOM"},"(0040,4037)":{tag:"(0040,4037)",vr:"PN",name:"HumanPerformerName",vm:"1",version:"DICOM"},"(0040,4040)":{tag:"(0040,4040)",vr:"CS",name:"RawDataHandling",vm:"1",version:"DICOM"},"(0040,4041)":{tag:"(0040,4041)",vr:"CS",name:"InputReadinessState",vm:"1",version:"DICOM"},"(0040,4050)":{tag:"(0040,4050)",vr:"DT",name:"PerformedProcedureStepStartDateTime",vm:"1",version:"DICOM"},"(0040,4051)":{tag:"(0040,4051)",vr:"DT",name:"PerformedProcedureStepEndDateTime",vm:"1",version:"DICOM"},"(0040,4052)":{tag:"(0040,4052)",vr:"DT",name:"ProcedureStepCancellationDateTime",vm:"1",version:"DICOM"},"(0040,8302)":{tag:"(0040,8302)",vr:"DS",name:"EntranceDoseInmGy",vm:"1",version:"DICOM"},"(0040,8303)":{tag:"(0040,8303)",vr:"CS",name:"EntranceDoseDerivation",vm:"1",version:"DICOM"},"(0040,9092)":{tag:"(0040,9092)",vr:"SQ",name:"ParametricMapFrameTypeSequence",vm:"1",version:"DICOM"},"(0040,9094)":{tag:"(0040,9094)",vr:"SQ",name:"ReferencedImageRealWorldValueMappingSequence",vm:"1",version:"DICOM"},"(0040,9096)":{tag:"(0040,9096)",vr:"SQ",name:"RealWorldValueMappingSequence",vm:"1",version:"DICOM"},"(0040,9098)":{tag:"(0040,9098)",vr:"SQ",name:"PixelValueMappingCodeSequence",vm:"1",version:"DICOM"},"(0040,9210)":{tag:"(0040,9210)",vr:"SH",name:"LUTLabel",vm:"1",version:"DICOM"},"(0040,9211)":{tag:"(0040,9211)",vr:"xs",name:"RealWorldValueLastValueMapped",vm:"1",version:"DICOM"},"(0040,9212)":{tag:"(0040,9212)",vr:"FD",name:"RealWorldValueLUTData",vm:"1-n",version:"DICOM"},"(0040,9216)":{tag:"(0040,9216)",vr:"xs",name:"RealWorldValueFirstValueMapped",vm:"1",version:"DICOM"},"(0040,9220)":{tag:"(0040,9220)",vr:"SQ",name:"QuantityDefinitionSequence",vm:"1",version:"DICOM"},"(0040,9224)":{tag:"(0040,9224)",vr:"FD",name:"RealWorldValueIntercept",vm:"1",version:"DICOM"},"(0040,9225)":{tag:"(0040,9225)",vr:"FD",name:"RealWorldValueSlope",vm:"1",version:"DICOM"},"(0040,A010)":{tag:"(0040,A010)",vr:"CS",name:"RelationshipType",vm:"1",version:"DICOM"},"(0040,A027)":{tag:"(0040,A027)",vr:"LO",name:"VerifyingOrganization",vm:"1",version:"DICOM"},"(0040,A030)":{tag:"(0040,A030)",vr:"DT",name:"VerificationDateTime",vm:"1",version:"DICOM"},"(0040,A032)":{tag:"(0040,A032)",vr:"DT",name:"ObservationDateTime",vm:"1",version:"DICOM"},"(0040,A033)":{tag:"(0040,A033)",vr:"DT",name:"ObservationStartDateTime",vm:"1",version:"DICOM"},"(0040,A040)":{tag:"(0040,A040)",vr:"CS",name:"ValueType",vm:"1",version:"DICOM"},"(0040,A043)":{tag:"(0040,A043)",vr:"SQ",name:"ConceptNameCodeSequence",vm:"1",version:"DICOM"},"(0040,A050)":{tag:"(0040,A050)",vr:"CS",name:"ContinuityOfContent",vm:"1",version:"DICOM"},"(0040,A073)":{tag:"(0040,A073)",vr:"SQ",name:"VerifyingObserverSequence",vm:"1",version:"DICOM"},"(0040,A075)":{tag:"(0040,A075)",vr:"PN",name:"VerifyingObserverName",vm:"1",version:"DICOM"},"(0040,A078)":{tag:"(0040,A078)",vr:"SQ",name:"AuthorObserverSequence",vm:"1",version:"DICOM"},"(0040,A07A)":{tag:"(0040,A07A)",vr:"SQ",name:"ParticipantSequence",vm:"1",version:"DICOM"},"(0040,A07C)":{tag:"(0040,A07C)",vr:"SQ",name:"CustodialOrganizationSequence",vm:"1",version:"DICOM"},"(0040,A080)":{tag:"(0040,A080)",vr:"CS",name:"ParticipationType",vm:"1",version:"DICOM"},"(0040,A082)":{tag:"(0040,A082)",vr:"DT",name:"ParticipationDateTime",vm:"1",version:"DICOM"},"(0040,A084)":{tag:"(0040,A084)",vr:"CS",name:"ObserverType",vm:"1",version:"DICOM"},"(0040,A088)":{tag:"(0040,A088)",vr:"SQ",name:"VerifyingObserverIdentificationCodeSequence",vm:"1",version:"DICOM"},"(0040,A0B0)":{tag:"(0040,A0B0)",vr:"US",name:"ReferencedWaveformChannels",vm:"2-2n",version:"DICOM"},"(0040,A120)":{tag:"(0040,A120)",vr:"DT",name:"DateTime",vm:"1",version:"DICOM"},"(0040,A121)":{tag:"(0040,A121)",vr:"DA",name:"Date",vm:"1",version:"DICOM"},"(0040,A122)":{tag:"(0040,A122)",vr:"TM",name:"Time",vm:"1",version:"DICOM"},"(0040,A123)":{tag:"(0040,A123)",vr:"PN",name:"PersonName",vm:"1",version:"DICOM"},"(0040,A124)":{tag:"(0040,A124)",vr:"UI",name:"UID",vm:"1",version:"DICOM"},"(0040,A130)":{tag:"(0040,A130)",vr:"CS",name:"TemporalRangeType",vm:"1",version:"DICOM"},"(0040,A132)":{tag:"(0040,A132)",vr:"UL",name:"ReferencedSamplePositions",vm:"1-n",version:"DICOM"},"(0040,A136)":{tag:"(0040,A136)",vr:"US",name:"ReferencedFrameNumbers",vm:"1-n",version:"DICOM"},"(0040,A138)":{tag:"(0040,A138)",vr:"DS",name:"ReferencedTimeOffsets",vm:"1-n",version:"DICOM"},"(0040,A13A)":{tag:"(0040,A13A)",vr:"DT",name:"ReferencedDateTime",vm:"1-n",version:"DICOM"},"(0040,A160)":{tag:"(0040,A160)",vr:"UT",name:"TextValue",vm:"1",version:"DICOM"},"(0040,A161)":{tag:"(0040,A161)",vr:"FD",name:"FloatingPointValue",vm:"1-n",version:"DICOM"},"(0040,A162)":{tag:"(0040,A162)",vr:"SL",name:"RationalNumeratorValue",vm:"1-n",version:"DICOM"},"(0040,A163)":{tag:"(0040,A163)",vr:"UL",name:"RationalDenominatorValue",vm:"1-n",version:"DICOM"},"(0040,A168)":{tag:"(0040,A168)",vr:"SQ",name:"ConceptCodeSequence",vm:"1",version:"DICOM"},"(0040,A170)":{tag:"(0040,A170)",vr:"SQ",name:"PurposeOfReferenceCodeSequence",vm:"1",version:"DICOM"},"(0040,A171)":{tag:"(0040,A171)",vr:"UI",name:"ObservationUID",vm:"1",version:"DICOM"},"(0040,A180)":{tag:"(0040,A180)",vr:"US",name:"AnnotationGroupNumber",vm:"1",version:"DICOM"},"(0040,A195)":{tag:"(0040,A195)",vr:"SQ",name:"ModifierCodeSequence",vm:"1",version:"DICOM"},"(0040,A300)":{tag:"(0040,A300)",vr:"SQ",name:"MeasuredValueSequence",vm:"1",version:"DICOM"},"(0040,A301)":{tag:"(0040,A301)",vr:"SQ",name:"NumericValueQualifierCodeSequence",vm:"1",version:"DICOM"},"(0040,A30A)":{tag:"(0040,A30A)",vr:"DS",name:"NumericValue",vm:"1-n",version:"DICOM"},"(0040,A360)":{tag:"(0040,A360)",vr:"SQ",name:"PredecessorDocumentsSequence",vm:"1",version:"DICOM"},"(0040,A370)":{tag:"(0040,A370)",vr:"SQ",name:"ReferencedRequestSequence",vm:"1",version:"DICOM"},"(0040,A372)":{tag:"(0040,A372)",vr:"SQ",name:"PerformedProcedureCodeSequence",vm:"1",version:"DICOM"},"(0040,A375)":{tag:"(0040,A375)",vr:"SQ",name:"CurrentRequestedProcedureEvidenceSequence",vm:"1",version:"DICOM"},"(0040,A385)":{tag:"(0040,A385)",vr:"SQ",name:"PertinentOtherEvidenceSequence",vm:"1",version:"DICOM"},"(0040,A390)":{tag:"(0040,A390)",vr:"SQ",name:"HL7StructuredDocumentReferenceSequence",vm:"1",version:"DICOM"},"(0040,A491)":{tag:"(0040,A491)",vr:"CS",name:"CompletionFlag",vm:"1",version:"DICOM"},"(0040,A492)":{tag:"(0040,A492)",vr:"LO",name:"CompletionFlagDescription",vm:"1",version:"DICOM"},"(0040,A493)":{tag:"(0040,A493)",vr:"CS",name:"VerificationFlag",vm:"1",version:"DICOM"},"(0040,A494)":{tag:"(0040,A494)",vr:"CS",name:"ArchiveRequested",vm:"1",version:"DICOM"},"(0040,A496)":{tag:"(0040,A496)",vr:"CS",name:"PreliminaryFlag",vm:"1",version:"DICOM"},"(0040,A504)":{tag:"(0040,A504)",vr:"SQ",name:"ContentTemplateSequence",vm:"1",version:"DICOM"},"(0040,A525)":{tag:"(0040,A525)",vr:"SQ",name:"IdenticalDocumentsSequence",vm:"1",version:"DICOM"},"(0040,A730)":{tag:"(0040,A730)",vr:"SQ",name:"ContentSequence",vm:"1",version:"DICOM"},"(0040,A801)":{tag:"(0040,A801)",vr:"SQ",name:"TabulatedValuesSequence",vm:"1",version:"DICOM"},"(0040,A802)":{tag:"(0040,A802)",vr:"UL",name:"NumberOfTableRows",vm:"1",version:"DICOM"},"(0040,A803)":{tag:"(0040,A803)",vr:"UL",name:"NumbeOfTableColumns",vm:"1",version:"DICOM"},"(0040,A804)":{tag:"(0040,A804)",vr:"UL",name:"TableRowNumber",vm:"1",version:"DICOM"},"(0040,A805)":{tag:"(0040,A805)",vr:"UL",name:"TableColumnNumber",vm:"1",version:"DICOM"},"(0040,A806)":{tag:"(0040,A806)",vr:"SQ",name:"TableRowDefinitionSequence",vm:"1",version:"DICOM"},"(0040,A807)":{tag:"(0040,A807)",vr:"SQ",name:"TableColumnDefinitionSequence",vm:"1",version:"DICOM"},"(0040,A808)":{tag:"(0040,A808)",vr:"SQ",name:"CellValuesSequence",vm:"1",version:"DICOM"},"(0040,B020)":{tag:"(0040,B020)",vr:"SQ",name:"WaveformAnnotationSequence",vm:"1",version:"DICOM"},"(0040,DB00)":{tag:"(0040,DB00)",vr:"CS",name:"TemplateIdentifier",vm:"1",version:"DICOM"},"(0040,DB73)":{tag:"(0040,DB73)",vr:"UL",name:"ReferencedContentItemIdentifier",vm:"1-n",version:"DICOM"},"(0040,E001)":{tag:"(0040,E001)",vr:"ST",name:"HL7InstanceIdentifier",vm:"1",version:"DICOM"},"(0040,E004)":{tag:"(0040,E004)",vr:"DT",name:"HL7DocumentEffectiveTime",vm:"1",version:"DICOM"},"(0040,E006)":{tag:"(0040,E006)",vr:"SQ",name:"HL7DocumentTypeCodeSequence",vm:"1",version:"DICOM"},"(0040,E008)":{tag:"(0040,E008)",vr:"SQ",name:"DocumentClassCodeSequence",vm:"1",version:"DICOM"},"(0040,E010)":{tag:"(0040,E010)",vr:"UR",name:"RetrieveURI",vm:"1",version:"DICOM"},"(0040,E011)":{tag:"(0040,E011)",vr:"UI",name:"RetrieveLocationUID",vm:"1",version:"DICOM"},"(0040,E020)":{tag:"(0040,E020)",vr:"CS",name:"TypeOfInstances",vm:"1",version:"DICOM"},"(0040,E021)":{tag:"(0040,E021)",vr:"SQ",name:"DICOMRetrievalSequence",vm:"1",version:"DICOM"},"(0040,E022)":{tag:"(0040,E022)",vr:"SQ",name:"DICOMMediaRetrievalSequence",vm:"1",version:"DICOM"},"(0040,E023)":{tag:"(0040,E023)",vr:"SQ",name:"WADORetrievalSequence",vm:"1",version:"DICOM"},"(0040,E024)":{tag:"(0040,E024)",vr:"SQ",name:"XDSRetrievalSequence",vm:"1",version:"DICOM"},"(0040,E025)":{tag:"(0040,E025)",vr:"SQ",name:"WADORSRetrievalSequence",vm:"1",version:"DICOM"},"(0040,E030)":{tag:"(0040,E030)",vr:"UI",name:"RepositoryUniqueID",vm:"1",version:"DICOM"},"(0040,E031)":{tag:"(0040,E031)",vr:"UI",name:"HomeCommunityID",vm:"1",version:"DICOM"},"(0042,0010)":{tag:"(0042,0010)",vr:"ST",name:"DocumentTitle",vm:"1",version:"DICOM"},"(0042,0011)":{tag:"(0042,0011)",vr:"OB",name:"EncapsulatedDocument",vm:"1",version:"DICOM"},"(0042,0012)":{tag:"(0042,0012)",vr:"LO",name:"MIMETypeOfEncapsulatedDocument",vm:"1",version:"DICOM"},"(0042,0013)":{tag:"(0042,0013)",vr:"SQ",name:"SourceInstanceSequence",vm:"1",version:"DICOM"},"(0042,0014)":{tag:"(0042,0014)",vr:"LO",name:"ListOfMIMETypes",vm:"1-n",version:"DICOM"},"(0042,0015)":{tag:"(0042,0015)",vr:"UL",name:"EncapsulatedDocumentLength",vm:"1",version:"DICOM"},"(0044,0001)":{tag:"(0044,0001)",vr:"ST",name:"ProductPackageIdentifier",vm:"1",version:"DICOM"},"(0044,0002)":{tag:"(0044,0002)",vr:"CS",name:"SubstanceAdministrationApproval",vm:"1",version:"DICOM"},"(0044,0003)":{tag:"(0044,0003)",vr:"LT",name:"ApprovalStatusFurtherDescription",vm:"1",version:"DICOM"},"(0044,0004)":{tag:"(0044,0004)",vr:"DT",name:"ApprovalStatusDateTime",vm:"1",version:"DICOM"},"(0044,0007)":{tag:"(0044,0007)",vr:"SQ",name:"ProductTypeCodeSequence",vm:"1",version:"DICOM"},"(0044,0008)":{tag:"(0044,0008)",vr:"LO",name:"ProductName",vm:"1-n",version:"DICOM"},"(0044,0009)":{tag:"(0044,0009)",vr:"LT",name:"ProductDescription",vm:"1",version:"DICOM"},"(0044,000A)":{tag:"(0044,000A)",vr:"LO",name:"ProductLotIdentifier",vm:"1",version:"DICOM"},"(0044,000B)":{tag:"(0044,000B)",vr:"DT",name:"ProductExpirationDateTime",vm:"1",version:"DICOM"},"(0044,0010)":{tag:"(0044,0010)",vr:"DT",name:"SubstanceAdministrationDateTime",vm:"1",version:"DICOM"},"(0044,0011)":{tag:"(0044,0011)",vr:"LO",name:"SubstanceAdministrationNotes",vm:"1",version:"DICOM"},"(0044,0012)":{tag:"(0044,0012)",vr:"LO",name:"SubstanceAdministrationDeviceID",vm:"1",version:"DICOM"},"(0044,0013)":{tag:"(0044,0013)",vr:"SQ",name:"ProductParameterSequence",vm:"1",version:"DICOM"},"(0044,0019)":{tag:"(0044,0019)",vr:"SQ",name:"SubstanceAdministrationParameterSequence",vm:"1",version:"DICOM"},"(0044,0100)":{tag:"(0044,0100)",vr:"SQ",name:"ApprovalSequence",vm:"1",version:"DICOM"},"(0044,0101)":{tag:"(0044,0101)",vr:"SQ",name:"AssertionCodeSequence",vm:"1",version:"DICOM"},"(0044,0102)":{tag:"(0044,0102)",vr:"UI",name:"AssertionUID",vm:"1",version:"DICOM"},"(0044,0103)":{tag:"(0044,0103)",vr:"SQ",name:"AsserterIdentificationSequence",vm:"1",version:"DICOM"},"(0044,0104)":{tag:"(0044,0104)",vr:"DT",name:"AssertionDateTime",vm:"1",version:"DICOM"},"(0044,0105)":{tag:"(0044,0105)",vr:"DT",name:"AssertionExpirationDateTime",vm:"1",version:"DICOM"},"(0044,0106)":{tag:"(0044,0106)",vr:"UT",name:"AssertionComments",vm:"1",version:"DICOM"},"(0044,0107)":{tag:"(0044,0107)",vr:"SQ",name:"RelatedAssertionSequence",vm:"1",version:"DICOM"},"(0044,0108)":{tag:"(0044,0108)",vr:"UI",name:"ReferencedAssertionUID",vm:"1",version:"DICOM"},"(0044,0109)":{tag:"(0044,0109)",vr:"SQ",name:"ApprovalSubjectSequence",vm:"1",version:"DICOM"},"(0044,010A)":{tag:"(0044,010A)",vr:"SQ",name:"OrganizationalRoleCodeSequence",vm:"1",version:"DICOM"},"(0046,0012)":{tag:"(0046,0012)",vr:"LO",name:"LensDescription",vm:"1",version:"DICOM"},"(0046,0014)":{tag:"(0046,0014)",vr:"SQ",name:"RightLensSequence",vm:"1",version:"DICOM"},"(0046,0015)":{tag:"(0046,0015)",vr:"SQ",name:"LeftLensSequence",vm:"1",version:"DICOM"},"(0046,0016)":{tag:"(0046,0016)",vr:"SQ",name:"UnspecifiedLateralityLensSequence",vm:"1",version:"DICOM"},"(0046,0018)":{tag:"(0046,0018)",vr:"SQ",name:"CylinderSequence",vm:"1",version:"DICOM"},"(0046,0028)":{tag:"(0046,0028)",vr:"SQ",name:"PrismSequence",vm:"1",version:"DICOM"},"(0046,0030)":{tag:"(0046,0030)",vr:"FD",name:"HorizontalPrismPower",vm:"1",version:"DICOM"},"(0046,0032)":{tag:"(0046,0032)",vr:"CS",name:"HorizontalPrismBase",vm:"1",version:"DICOM"},"(0046,0034)":{tag:"(0046,0034)",vr:"FD",name:"VerticalPrismPower",vm:"1",version:"DICOM"},"(0046,0036)":{tag:"(0046,0036)",vr:"CS",name:"VerticalPrismBase",vm:"1",version:"DICOM"},"(0046,0038)":{tag:"(0046,0038)",vr:"CS",name:"LensSegmentType",vm:"1",version:"DICOM"},"(0046,0040)":{tag:"(0046,0040)",vr:"FD",name:"OpticalTransmittance",vm:"1",version:"DICOM"},"(0046,0042)":{tag:"(0046,0042)",vr:"FD",name:"ChannelWidth",vm:"1",version:"DICOM"},"(0046,0044)":{tag:"(0046,0044)",vr:"FD",name:"PupilSize",vm:"1",version:"DICOM"},"(0046,0046)":{tag:"(0046,0046)",vr:"FD",name:"CornealSize",vm:"1",version:"DICOM"},"(0046,0047)":{tag:"(0046,0047)",vr:"SQ",name:"CornealSizeSequence",vm:"1",version:"DICOM"},"(0046,0050)":{tag:"(0046,0050)",vr:"SQ",name:"AutorefractionRightEyeSequence",vm:"1",version:"DICOM"},"(0046,0052)":{tag:"(0046,0052)",vr:"SQ",name:"AutorefractionLeftEyeSequence",vm:"1",version:"DICOM"},"(0046,0060)":{tag:"(0046,0060)",vr:"FD",name:"DistancePupillaryDistance",vm:"1",version:"DICOM"},"(0046,0062)":{tag:"(0046,0062)",vr:"FD",name:"NearPupillaryDistance",vm:"1",version:"DICOM"},"(0046,0063)":{tag:"(0046,0063)",vr:"FD",name:"IntermediatePupillaryDistance",vm:"1",version:"DICOM"},"(0046,0064)":{tag:"(0046,0064)",vr:"FD",name:"OtherPupillaryDistance",vm:"1",version:"DICOM"},"(0046,0070)":{tag:"(0046,0070)",vr:"SQ",name:"KeratometryRightEyeSequence",vm:"1",version:"DICOM"},"(0046,0071)":{tag:"(0046,0071)",vr:"SQ",name:"KeratometryLeftEyeSequence",vm:"1",version:"DICOM"},"(0046,0074)":{tag:"(0046,0074)",vr:"SQ",name:"SteepKeratometricAxisSequence",vm:"1",version:"DICOM"},"(0046,0075)":{tag:"(0046,0075)",vr:"FD",name:"RadiusOfCurvature",vm:"1",version:"DICOM"},"(0046,0076)":{tag:"(0046,0076)",vr:"FD",name:"KeratometricPower",vm:"1",version:"DICOM"},"(0046,0077)":{tag:"(0046,0077)",vr:"FD",name:"KeratometricAxis",vm:"1",version:"DICOM"},"(0046,0080)":{tag:"(0046,0080)",vr:"SQ",name:"FlatKeratometricAxisSequence",vm:"1",version:"DICOM"},"(0046,0092)":{tag:"(0046,0092)",vr:"CS",name:"BackgroundColor",vm:"1",version:"DICOM"},"(0046,0094)":{tag:"(0046,0094)",vr:"CS",name:"Optotype",vm:"1",version:"DICOM"},"(0046,0095)":{tag:"(0046,0095)",vr:"CS",name:"OptotypePresentation",vm:"1",version:"DICOM"},"(0046,0097)":{tag:"(0046,0097)",vr:"SQ",name:"SubjectiveRefractionRightEyeSequence",vm:"1",version:"DICOM"},"(0046,0098)":{tag:"(0046,0098)",vr:"SQ",name:"SubjectiveRefractionLeftEyeSequence",vm:"1",version:"DICOM"},"(0046,0100)":{tag:"(0046,0100)",vr:"SQ",name:"AddNearSequence",vm:"1",version:"DICOM"},"(0046,0101)":{tag:"(0046,0101)",vr:"SQ",name:"AddIntermediateSequence",vm:"1",version:"DICOM"},"(0046,0102)":{tag:"(0046,0102)",vr:"SQ",name:"AddOtherSequence",vm:"1",version:"DICOM"},"(0046,0104)":{tag:"(0046,0104)",vr:"FD",name:"AddPower",vm:"1",version:"DICOM"},"(0046,0106)":{tag:"(0046,0106)",vr:"FD",name:"ViewingDistance",vm:"1",version:"DICOM"},"(0046,0110)":{tag:"(0046,0110)",vr:"SQ",name:"CorneaMeasurementsSequence",vm:"1",version:"DICOM"},"(0046,0111)":{tag:"(0046,0111)",vr:"SQ",name:"SourceOfCorneaMeasurementDataCodeSequence",vm:"1",version:"DICOM"},"(0046,0112)":{tag:"(0046,0112)",vr:"SQ",name:"SteepCornealAxisSequence",vm:"1",version:"DICOM"},"(0046,0113)":{tag:"(0046,0113)",vr:"SQ",name:"FlatCornealAxisSequence",vm:"1",version:"DICOM"},"(0046,0114)":{tag:"(0046,0114)",vr:"FD",name:"CornealPower",vm:"1",version:"DICOM"},"(0046,0115)":{tag:"(0046,0115)",vr:"FD",name:"CornealAxis",vm:"1",version:"DICOM"},"(0046,0116)":{tag:"(0046,0116)",vr:"SQ",name:"CorneaMeasurementMethodCodeSequence",vm:"1",version:"DICOM"},"(0046,0117)":{tag:"(0046,0117)",vr:"FL",name:"RefractiveIndexOfCornea",vm:"1",version:"DICOM"},"(0046,0118)":{tag:"(0046,0118)",vr:"FL",name:"RefractiveIndexOfAqueousHumor",vm:"1",version:"DICOM"},"(0046,0121)":{tag:"(0046,0121)",vr:"SQ",name:"VisualAcuityTypeCodeSequence",vm:"1",version:"DICOM"},"(0046,0122)":{tag:"(0046,0122)",vr:"SQ",name:"VisualAcuityRightEyeSequence",vm:"1",version:"DICOM"},"(0046,0123)":{tag:"(0046,0123)",vr:"SQ",name:"VisualAcuityLeftEyeSequence",vm:"1",version:"DICOM"},"(0046,0124)":{tag:"(0046,0124)",vr:"SQ",name:"VisualAcuityBothEyesOpenSequence",vm:"1",version:"DICOM"},"(0046,0125)":{tag:"(0046,0125)",vr:"CS",name:"ViewingDistanceType",vm:"1",version:"DICOM"},"(0046,0135)":{tag:"(0046,0135)",vr:"SS",name:"VisualAcuityModifiers",vm:"2",version:"DICOM"},"(0046,0137)":{tag:"(0046,0137)",vr:"FD",name:"DecimalVisualAcuity",vm:"1",version:"DICOM"},"(0046,0139)":{tag:"(0046,0139)",vr:"LO",name:"OptotypeDetailedDefinition",vm:"1",version:"DICOM"},"(0046,0145)":{tag:"(0046,0145)",vr:"SQ",name:"ReferencedRefractiveMeasurementsSequence",vm:"1",version:"DICOM"},"(0046,0146)":{tag:"(0046,0146)",vr:"FD",name:"SpherePower",vm:"1",version:"DICOM"},"(0046,0147)":{tag:"(0046,0147)",vr:"FD",name:"CylinderPower",vm:"1",version:"DICOM"},"(0046,0201)":{tag:"(0046,0201)",vr:"CS",name:"CornealTopographySurface",vm:"1",version:"DICOM"},"(0046,0202)":{tag:"(0046,0202)",vr:"FL",name:"CornealVertexLocation",vm:"2",version:"DICOM"},"(0046,0203)":{tag:"(0046,0203)",vr:"FL",name:"PupilCentroidXCoordinate",vm:"1",version:"DICOM"},"(0046,0204)":{tag:"(0046,0204)",vr:"FL",name:"PupilCentroidYCoordinate",vm:"1",version:"DICOM"},"(0046,0205)":{tag:"(0046,0205)",vr:"FL",name:"EquivalentPupilRadius",vm:"1",version:"DICOM"},"(0046,0207)":{tag:"(0046,0207)",vr:"SQ",name:"CornealTopographyMapTypeCodeSequence",vm:"1",version:"DICOM"},"(0046,0208)":{tag:"(0046,0208)",vr:"IS",name:"VerticesOfTheOutlineOfPupil",vm:"2-2n",version:"DICOM"},"(0046,0210)":{tag:"(0046,0210)",vr:"SQ",name:"CornealTopographyMappingNormalsSequence",vm:"1",version:"DICOM"},"(0046,0211)":{tag:"(0046,0211)",vr:"SQ",name:"MaximumCornealCurvatureSequence",vm:"1",version:"DICOM"},"(0046,0212)":{tag:"(0046,0212)",vr:"FL",name:"MaximumCornealCurvature",vm:"1",version:"DICOM"},"(0046,0213)":{tag:"(0046,0213)",vr:"FL",name:"MaximumCornealCurvatureLocation",vm:"2",version:"DICOM"},"(0046,0215)":{tag:"(0046,0215)",vr:"SQ",name:"MinimumKeratometricSequence",vm:"1",version:"DICOM"},"(0046,0218)":{tag:"(0046,0218)",vr:"SQ",name:"SimulatedKeratometricCylinderSequence",vm:"1",version:"DICOM"},"(0046,0220)":{tag:"(0046,0220)",vr:"FL",name:"AverageCornealPower",vm:"1",version:"DICOM"},"(0046,0224)":{tag:"(0046,0224)",vr:"FL",name:"CornealISValue",vm:"1",version:"DICOM"},"(0046,0227)":{tag:"(0046,0227)",vr:"FL",name:"AnalyzedArea",vm:"1",version:"DICOM"},"(0046,0230)":{tag:"(0046,0230)",vr:"FL",name:"SurfaceRegularityIndex",vm:"1",version:"DICOM"},"(0046,0232)":{tag:"(0046,0232)",vr:"FL",name:"SurfaceAsymmetryIndex",vm:"1",version:"DICOM"},"(0046,0234)":{tag:"(0046,0234)",vr:"FL",name:"CornealEccentricityIndex",vm:"1",version:"DICOM"},"(0046,0236)":{tag:"(0046,0236)",vr:"FL",name:"KeratoconusPredictionIndex",vm:"1",version:"DICOM"},"(0046,0238)":{tag:"(0046,0238)",vr:"FL",name:"DecimalPotentialVisualAcuity",vm:"1",version:"DICOM"},"(0046,0242)":{tag:"(0046,0242)",vr:"CS",name:"CornealTopographyMapQualityEvaluation",vm:"1",version:"DICOM"},"(0046,0244)":{tag:"(0046,0244)",vr:"SQ",name:"SourceImageCornealProcessedDataSequence",vm:"1",version:"DICOM"},"(0046,0247)":{tag:"(0046,0247)",vr:"FL",name:"CornealPointLocation",vm:"3",version:"DICOM"},"(0046,0248)":{tag:"(0046,0248)",vr:"CS",name:"CornealPointEstimated",vm:"1",version:"DICOM"},"(0046,0249)":{tag:"(0046,0249)",vr:"FL",name:"AxialPower",vm:"1",version:"DICOM"},"(0046,0250)":{tag:"(0046,0250)",vr:"FL",name:"TangentialPower",vm:"1",version:"DICOM"},"(0046,0251)":{tag:"(0046,0251)",vr:"FL",name:"RefractivePower",vm:"1",version:"DICOM"},"(0046,0252)":{tag:"(0046,0252)",vr:"FL",name:"RelativeElevation",vm:"1",version:"DICOM"},"(0046,0253)":{tag:"(0046,0253)",vr:"FL",name:"CornealWavefront",vm:"1",version:"DICOM"},"(0048,0001)":{tag:"(0048,0001)",vr:"FL",name:"ImagedVolumeWidth",vm:"1",version:"DICOM"},"(0048,0002)":{tag:"(0048,0002)",vr:"FL",name:"ImagedVolumeHeight",vm:"1",version:"DICOM"},"(0048,0003)":{tag:"(0048,0003)",vr:"FL",name:"ImagedVolumeDepth",vm:"1",version:"DICOM"},"(0048,0006)":{tag:"(0048,0006)",vr:"UL",name:"TotalPixelMatrixColumns",vm:"1",version:"DICOM"},"(0048,0007)":{tag:"(0048,0007)",vr:"UL",name:"TotalPixelMatrixRows",vm:"1",version:"DICOM"},"(0048,0008)":{tag:"(0048,0008)",vr:"SQ",name:"TotalPixelMatrixOriginSequence",vm:"1",version:"DICOM"},"(0048,0010)":{tag:"(0048,0010)",vr:"CS",name:"SpecimenLabelInImage",vm:"1",version:"DICOM"},"(0048,0011)":{tag:"(0048,0011)",vr:"CS",name:"FocusMethod",vm:"1",version:"DICOM"},"(0048,0012)":{tag:"(0048,0012)",vr:"CS",name:"ExtendedDepthOfField",vm:"1",version:"DICOM"},"(0048,0013)":{tag:"(0048,0013)",vr:"US",name:"NumberOfFocalPlanes",vm:"1",version:"DICOM"},"(0048,0014)":{tag:"(0048,0014)",vr:"FL",name:"DistanceBetweenFocalPlanes",vm:"1",version:"DICOM"},"(0048,0015)":{tag:"(0048,0015)",vr:"US",name:"RecommendedAbsentPixelCIELabValue",vm:"3",version:"DICOM"},"(0048,0100)":{tag:"(0048,0100)",vr:"SQ",name:"IlluminatorTypeCodeSequence",vm:"1",version:"DICOM"},"(0048,0102)":{tag:"(0048,0102)",vr:"DS",name:"ImageOrientationSlide",vm:"6",version:"DICOM"},"(0048,0105)":{tag:"(0048,0105)",vr:"SQ",name:"OpticalPathSequence",vm:"1",version:"DICOM"},"(0048,0106)":{tag:"(0048,0106)",vr:"SH",name:"OpticalPathIdentifier",vm:"1",version:"DICOM"},"(0048,0107)":{tag:"(0048,0107)",vr:"ST",name:"OpticalPathDescription",vm:"1",version:"DICOM"},"(0048,0108)":{tag:"(0048,0108)",vr:"SQ",name:"IlluminationColorCodeSequence",vm:"1",version:"DICOM"},"(0048,0110)":{tag:"(0048,0110)",vr:"SQ",name:"SpecimenReferenceSequence",vm:"1",version:"DICOM"},"(0048,0111)":{tag:"(0048,0111)",vr:"DS",name:"CondenserLensPower",vm:"1",version:"DICOM"},"(0048,0112)":{tag:"(0048,0112)",vr:"DS",name:"ObjectiveLensPower",vm:"1",version:"DICOM"},"(0048,0113)":{tag:"(0048,0113)",vr:"DS",name:"ObjectiveLensNumericalAperture",vm:"1",version:"DICOM"},"(0048,0114)":{tag:"(0048,0114)",vr:"CS",name:"ConfocalMode",vm:"1",version:"DICOM"},"(0048,0115)":{tag:"(0048,0115)",vr:"CS",name:"TissueLocation",vm:"1",version:"DICOM"},"(0048,0116)":{tag:"(0048,0116)",vr:"SQ",name:"ConfocalMicroscopyImageFrameTypeSequence",vm:"1",version:"DICOM"},"(0048,0117)":{tag:"(0048,0117)",vr:"FD",name:"ImageAcquisitionDepth",vm:"1",version:"DICOM"},"(0048,0120)":{tag:"(0048,0120)",vr:"SQ",name:"PaletteColorLookupTableSequence",vm:"1",version:"DICOM"},"(0048,0200)":{tag:"(0048,0200)",vr:"SQ",name:"ReferencedImageNavigationSequence",vm:"1",version:"DICOM"},"(0048,0201)":{tag:"(0048,0201)",vr:"US",name:"TopLeftHandCornerOfLocalizerArea",vm:"2",version:"DICOM"},"(0048,0202)":{tag:"(0048,0202)",vr:"US",name:"BottomRightHandCornerOfLocalizerArea",vm:"2",version:"DICOM"},"(0048,0207)":{tag:"(0048,0207)",vr:"SQ",name:"OpticalPathIdentificationSequence",vm:"1",version:"DICOM"},"(0048,021A)":{tag:"(0048,021A)",vr:"SQ",name:"PlanePositionSlideSequence",vm:"1",version:"DICOM"},"(0048,021E)":{tag:"(0048,021E)",vr:"SL",name:"ColumnPositionInTotalImagePixelMatrix",vm:"1",version:"DICOM"},"(0048,021F)":{tag:"(0048,021F)",vr:"SL",name:"RowPositionInTotalImagePixelMatrix",vm:"1",version:"DICOM"},"(0048,0301)":{tag:"(0048,0301)",vr:"CS",name:"PixelOriginInterpretation",vm:"1",version:"DICOM"},"(0048,0302)":{tag:"(0048,0302)",vr:"UL",name:"NumberOfOpticalPaths",vm:"1",version:"DICOM"},"(0048,0303)":{tag:"(0048,0303)",vr:"UL",name:"TotalPixelMatrixFocalPlanes",vm:"1",version:"DICOM"},"(0050,0004)":{tag:"(0050,0004)",vr:"CS",name:"CalibrationImage",vm:"1",version:"DICOM"},"(0050,0010)":{tag:"(0050,0010)",vr:"SQ",name:"DeviceSequence",vm:"1",version:"DICOM"},"(0050,0012)":{tag:"(0050,0012)",vr:"SQ",name:"ContainerComponentTypeCodeSequence",vm:"1",version:"DICOM"},"(0050,0013)":{tag:"(0050,0013)",vr:"FD",name:"ContainerComponentThickness",vm:"1",version:"DICOM"},"(0050,0014)":{tag:"(0050,0014)",vr:"DS",name:"DeviceLength",vm:"1",version:"DICOM"},"(0050,0015)":{tag:"(0050,0015)",vr:"FD",name:"ContainerComponentWidth",vm:"1",version:"DICOM"},"(0050,0016)":{tag:"(0050,0016)",vr:"DS",name:"DeviceDiameter",vm:"1",version:"DICOM"},"(0050,0017)":{tag:"(0050,0017)",vr:"CS",name:"DeviceDiameterUnits",vm:"1",version:"DICOM"},"(0050,0018)":{tag:"(0050,0018)",vr:"DS",name:"DeviceVolume",vm:"1",version:"DICOM"},"(0050,0019)":{tag:"(0050,0019)",vr:"DS",name:"InterMarkerDistance",vm:"1",version:"DICOM"},"(0050,001A)":{tag:"(0050,001A)",vr:"CS",name:"ContainerComponentMaterial",vm:"1",version:"DICOM"},"(0050,001B)":{tag:"(0050,001B)",vr:"LO",name:"ContainerComponentID",vm:"1",version:"DICOM"},"(0050,001C)":{tag:"(0050,001C)",vr:"FD",name:"ContainerComponentLength",vm:"1",version:"DICOM"},"(0050,001D)":{tag:"(0050,001D)",vr:"FD",name:"ContainerComponentDiameter",vm:"1",version:"DICOM"},"(0050,001E)":{tag:"(0050,001E)",vr:"LO",name:"ContainerComponentDescription",vm:"1",version:"DICOM"},"(0050,0020)":{tag:"(0050,0020)",vr:"LO",name:"DeviceDescription",vm:"1",version:"DICOM"},"(0050,0021)":{tag:"(0050,0021)",vr:"ST",name:"LongDeviceDescription",vm:"1",version:"DICOM"},"(0052,0001)":{tag:"(0052,0001)",vr:"FL",name:"ContrastBolusIngredientPercentByVolume",vm:"1",version:"DICOM"},"(0052,0002)":{tag:"(0052,0002)",vr:"FD",name:"OCTFocalDistance",vm:"1",version:"DICOM"},"(0052,0003)":{tag:"(0052,0003)",vr:"FD",name:"BeamSpotSize",vm:"1",version:"DICOM"},"(0052,0004)":{tag:"(0052,0004)",vr:"FD",name:"EffectiveRefractiveIndex",vm:"1",version:"DICOM"},"(0052,0006)":{tag:"(0052,0006)",vr:"CS",name:"OCTAcquisitionDomain",vm:"1",version:"DICOM"},"(0052,0007)":{tag:"(0052,0007)",vr:"FD",name:"OCTOpticalCenterWavelength",vm:"1",version:"DICOM"},"(0052,0008)":{tag:"(0052,0008)",vr:"FD",name:"AxialResolution",vm:"1",version:"DICOM"},"(0052,0009)":{tag:"(0052,0009)",vr:"FD",name:"RangingDepth",vm:"1",version:"DICOM"},"(0052,0011)":{tag:"(0052,0011)",vr:"FD",name:"ALineRate",vm:"1",version:"DICOM"},"(0052,0012)":{tag:"(0052,0012)",vr:"US",name:"ALinesPerFrame",vm:"1",version:"DICOM"},"(0052,0013)":{tag:"(0052,0013)",vr:"FD",name:"CatheterRotationalRate",vm:"1",version:"DICOM"},"(0052,0014)":{tag:"(0052,0014)",vr:"FD",name:"ALinePixelSpacing",vm:"1",version:"DICOM"},"(0052,0016)":{tag:"(0052,0016)",vr:"SQ",name:"ModeOfPercutaneousAccessSequence",vm:"1",version:"DICOM"},"(0052,0025)":{tag:"(0052,0025)",vr:"SQ",name:"IntravascularOCTFrameTypeSequence",vm:"1",version:"DICOM"},"(0052,0026)":{tag:"(0052,0026)",vr:"CS",name:"OCTZOffsetApplied",vm:"1",version:"DICOM"},"(0052,0027)":{tag:"(0052,0027)",vr:"SQ",name:"IntravascularFrameContentSequence",vm:"1",version:"DICOM"},"(0052,0028)":{tag:"(0052,0028)",vr:"FD",name:"IntravascularLongitudinalDistance",vm:"1",version:"DICOM"},"(0052,0029)":{tag:"(0052,0029)",vr:"SQ",name:"IntravascularOCTFrameContentSequence",vm:"1",version:"DICOM"},"(0052,0030)":{tag:"(0052,0030)",vr:"SS",name:"OCTZOffsetCorrection",vm:"1",version:"DICOM"},"(0052,0031)":{tag:"(0052,0031)",vr:"CS",name:"CatheterDirectionOfRotation",vm:"1",version:"DICOM"},"(0052,0033)":{tag:"(0052,0033)",vr:"FD",name:"SeamLineLocation",vm:"1",version:"DICOM"},"(0052,0034)":{tag:"(0052,0034)",vr:"FD",name:"FirstALineLocation",vm:"1",version:"DICOM"},"(0052,0036)":{tag:"(0052,0036)",vr:"US",name:"SeamLineIndex",vm:"1",version:"DICOM"},"(0052,0038)":{tag:"(0052,0038)",vr:"US",name:"NumberOfPaddedALines",vm:"1",version:"DICOM"},"(0052,0039)":{tag:"(0052,0039)",vr:"CS",name:"InterpolationType",vm:"1",version:"DICOM"},"(0052,003A)":{tag:"(0052,003A)",vr:"CS",name:"RefractiveIndexApplied",vm:"1",version:"DICOM"},"(0054,0010)":{tag:"(0054,0010)",vr:"US",name:"EnergyWindowVector",vm:"1-n",version:"DICOM"},"(0054,0011)":{tag:"(0054,0011)",vr:"US",name:"NumberOfEnergyWindows",vm:"1",version:"DICOM"},"(0054,0012)":{tag:"(0054,0012)",vr:"SQ",name:"EnergyWindowInformationSequence",vm:"1",version:"DICOM"},"(0054,0013)":{tag:"(0054,0013)",vr:"SQ",name:"EnergyWindowRangeSequence",vm:"1",version:"DICOM"},"(0054,0014)":{tag:"(0054,0014)",vr:"DS",name:"EnergyWindowLowerLimit",vm:"1",version:"DICOM"},"(0054,0015)":{tag:"(0054,0015)",vr:"DS",name:"EnergyWindowUpperLimit",vm:"1",version:"DICOM"},"(0054,0016)":{tag:"(0054,0016)",vr:"SQ",name:"RadiopharmaceuticalInformationSequence",vm:"1",version:"DICOM"},"(0054,0017)":{tag:"(0054,0017)",vr:"IS",name:"ResidualSyringeCounts",vm:"1",version:"DICOM"},"(0054,0018)":{tag:"(0054,0018)",vr:"SH",name:"EnergyWindowName",vm:"1",version:"DICOM"},"(0054,0020)":{tag:"(0054,0020)",vr:"US",name:"DetectorVector",vm:"1-n",version:"DICOM"},"(0054,0021)":{tag:"(0054,0021)",vr:"US",name:"NumberOfDetectors",vm:"1",version:"DICOM"},"(0054,0022)":{tag:"(0054,0022)",vr:"SQ",name:"DetectorInformationSequence",vm:"1",version:"DICOM"},"(0054,0030)":{tag:"(0054,0030)",vr:"US",name:"PhaseVector",vm:"1-n",version:"DICOM"},"(0054,0031)":{tag:"(0054,0031)",vr:"US",name:"NumberOfPhases",vm:"1",version:"DICOM"},"(0054,0032)":{tag:"(0054,0032)",vr:"SQ",name:"PhaseInformationSequence",vm:"1",version:"DICOM"},"(0054,0033)":{tag:"(0054,0033)",vr:"US",name:"NumberOfFramesInPhase",vm:"1",version:"DICOM"},"(0054,0036)":{tag:"(0054,0036)",vr:"IS",name:"PhaseDelay",vm:"1",version:"DICOM"},"(0054,0038)":{tag:"(0054,0038)",vr:"IS",name:"PauseBetweenFrames",vm:"1",version:"DICOM"},"(0054,0039)":{tag:"(0054,0039)",vr:"CS",name:"PhaseDescription",vm:"1",version:"DICOM"},"(0054,0050)":{tag:"(0054,0050)",vr:"US",name:"RotationVector",vm:"1-n",version:"DICOM"},"(0054,0051)":{tag:"(0054,0051)",vr:"US",name:"NumberOfRotations",vm:"1",version:"DICOM"},"(0054,0052)":{tag:"(0054,0052)",vr:"SQ",name:"RotationInformationSequence",vm:"1",version:"DICOM"},"(0054,0053)":{tag:"(0054,0053)",vr:"US",name:"NumberOfFramesInRotation",vm:"1",version:"DICOM"},"(0054,0060)":{tag:"(0054,0060)",vr:"US",name:"RRIntervalVector",vm:"1-n",version:"DICOM"},"(0054,0061)":{tag:"(0054,0061)",vr:"US",name:"NumberOfRRIntervals",vm:"1",version:"DICOM"},"(0054,0062)":{tag:"(0054,0062)",vr:"SQ",name:"GatedInformationSequence",vm:"1",version:"DICOM"},"(0054,0063)":{tag:"(0054,0063)",vr:"SQ",name:"DataInformationSequence",vm:"1",version:"DICOM"},"(0054,0070)":{tag:"(0054,0070)",vr:"US",name:"TimeSlotVector",vm:"1-n",version:"DICOM"},"(0054,0071)":{tag:"(0054,0071)",vr:"US",name:"NumberOfTimeSlots",vm:"1",version:"DICOM"},"(0054,0072)":{tag:"(0054,0072)",vr:"SQ",name:"TimeSlotInformationSequence",vm:"1",version:"DICOM"},"(0054,0073)":{tag:"(0054,0073)",vr:"DS",name:"TimeSlotTime",vm:"1",version:"DICOM"},"(0054,0080)":{tag:"(0054,0080)",vr:"US",name:"SliceVector",vm:"1-n",version:"DICOM"},"(0054,0081)":{tag:"(0054,0081)",vr:"US",name:"NumberOfSlices",vm:"1",version:"DICOM"},"(0054,0090)":{tag:"(0054,0090)",vr:"US",name:"AngularViewVector",vm:"1-n",version:"DICOM"},"(0054,0100)":{tag:"(0054,0100)",vr:"US",name:"TimeSliceVector",vm:"1-n",version:"DICOM"},"(0054,0101)":{tag:"(0054,0101)",vr:"US",name:"NumberOfTimeSlices",vm:"1",version:"DICOM"},"(0054,0200)":{tag:"(0054,0200)",vr:"DS",name:"StartAngle",vm:"1",version:"DICOM"},"(0054,0202)":{tag:"(0054,0202)",vr:"CS",name:"TypeOfDetectorMotion",vm:"1",version:"DICOM"},"(0054,0210)":{tag:"(0054,0210)",vr:"IS",name:"TriggerVector",vm:"1-n",version:"DICOM"},"(0054,0211)":{tag:"(0054,0211)",vr:"US",name:"NumberOfTriggersInPhase",vm:"1",version:"DICOM"},"(0054,0220)":{tag:"(0054,0220)",vr:"SQ",name:"ViewCodeSequence",vm:"1",version:"DICOM"},"(0054,0222)":{tag:"(0054,0222)",vr:"SQ",name:"ViewModifierCodeSequence",vm:"1",version:"DICOM"},"(0054,0300)":{tag:"(0054,0300)",vr:"SQ",name:"RadionuclideCodeSequence",vm:"1",version:"DICOM"},"(0054,0302)":{tag:"(0054,0302)",vr:"SQ",name:"AdministrationRouteCodeSequence",vm:"1",version:"DICOM"},"(0054,0304)":{tag:"(0054,0304)",vr:"SQ",name:"RadiopharmaceuticalCodeSequence",vm:"1",version:"DICOM"},"(0054,0306)":{tag:"(0054,0306)",vr:"SQ",name:"CalibrationDataSequence",vm:"1",version:"DICOM"},"(0054,0308)":{tag:"(0054,0308)",vr:"US",name:"EnergyWindowNumber",vm:"1",version:"DICOM"},"(0054,0400)":{tag:"(0054,0400)",vr:"SH",name:"ImageID",vm:"1",version:"DICOM"},"(0054,0410)":{tag:"(0054,0410)",vr:"SQ",name:"PatientOrientationCodeSequence",vm:"1",version:"DICOM"},"(0054,0412)":{tag:"(0054,0412)",vr:"SQ",name:"PatientOrientationModifierCodeSequence",vm:"1",version:"DICOM"},"(0054,0414)":{tag:"(0054,0414)",vr:"SQ",name:"PatientGantryRelationshipCodeSequence",vm:"1",version:"DICOM"},"(0054,0500)":{tag:"(0054,0500)",vr:"CS",name:"SliceProgressionDirection",vm:"1",version:"DICOM"},"(0054,0501)":{tag:"(0054,0501)",vr:"CS",name:"ScanProgressionDirection",vm:"1",version:"DICOM"},"(0054,1000)":{tag:"(0054,1000)",vr:"CS",name:"SeriesType",vm:"2",version:"DICOM"},"(0054,1001)":{tag:"(0054,1001)",vr:"CS",name:"Units",vm:"1",version:"DICOM"},"(0054,1002)":{tag:"(0054,1002)",vr:"CS",name:"CountsSource",vm:"1",version:"DICOM"},"(0054,1004)":{tag:"(0054,1004)",vr:"CS",name:"ReprojectionMethod",vm:"1",version:"DICOM"},"(0054,1006)":{tag:"(0054,1006)",vr:"CS",name:"SUVType",vm:"1",version:"DICOM"},"(0054,1100)":{tag:"(0054,1100)",vr:"CS",name:"RandomsCorrectionMethod",vm:"1",version:"DICOM"},"(0054,1101)":{tag:"(0054,1101)",vr:"LO",name:"AttenuationCorrectionMethod",vm:"1",version:"DICOM"},"(0054,1102)":{tag:"(0054,1102)",vr:"CS",name:"DecayCorrection",vm:"1",version:"DICOM"},"(0054,1103)":{tag:"(0054,1103)",vr:"LO",name:"ReconstructionMethod",vm:"1",version:"DICOM"},"(0054,1104)":{tag:"(0054,1104)",vr:"LO",name:"DetectorLinesOfResponseUsed",vm:"1",version:"DICOM"},"(0054,1105)":{tag:"(0054,1105)",vr:"LO",name:"ScatterCorrectionMethod",vm:"1",version:"DICOM"},"(0054,1200)":{tag:"(0054,1200)",vr:"DS",name:"AxialAcceptance",vm:"1",version:"DICOM"},"(0054,1201)":{tag:"(0054,1201)",vr:"IS",name:"AxialMash",vm:"2",version:"DICOM"},"(0054,1202)":{tag:"(0054,1202)",vr:"IS",name:"TransverseMash",vm:"1",version:"DICOM"},"(0054,1203)":{tag:"(0054,1203)",vr:"DS",name:"DetectorElementSize",vm:"2",version:"DICOM"},"(0054,1210)":{tag:"(0054,1210)",vr:"DS",name:"CoincidenceWindowWidth",vm:"1",version:"DICOM"},"(0054,1220)":{tag:"(0054,1220)",vr:"CS",name:"SecondaryCountsType",vm:"1-n",version:"DICOM"},"(0054,1300)":{tag:"(0054,1300)",vr:"DS",name:"FrameReferenceTime",vm:"1",version:"DICOM"},"(0054,1310)":{tag:"(0054,1310)",vr:"IS",name:"PrimaryPromptsCountsAccumulated",vm:"1",version:"DICOM"},"(0054,1311)":{tag:"(0054,1311)",vr:"IS",name:"SecondaryCountsAccumulated",vm:"1-n",version:"DICOM"},"(0054,1320)":{tag:"(0054,1320)",vr:"DS",name:"SliceSensitivityFactor",vm:"1",version:"DICOM"},"(0054,1321)":{tag:"(0054,1321)",vr:"DS",name:"DecayFactor",vm:"1",version:"DICOM"},"(0054,1322)":{tag:"(0054,1322)",vr:"DS",name:"DoseCalibrationFactor",vm:"1",version:"DICOM"},"(0054,1323)":{tag:"(0054,1323)",vr:"DS",name:"ScatterFractionFactor",vm:"1",version:"DICOM"},"(0054,1324)":{tag:"(0054,1324)",vr:"DS",name:"DeadTimeFactor",vm:"1",version:"DICOM"},"(0054,1330)":{tag:"(0054,1330)",vr:"US",name:"ImageIndex",vm:"1",version:"DICOM"},"(0060,3000)":{tag:"(0060,3000)",vr:"SQ",name:"HistogramSequence",vm:"1",version:"DICOM"},"(0060,3002)":{tag:"(0060,3002)",vr:"US",name:"HistogramNumberOfBins",vm:"1",version:"DICOM"},"(0060,3004)":{tag:"(0060,3004)",vr:"xs",name:"HistogramFirstBinValue",vm:"1",version:"DICOM"},"(0060,3006)":{tag:"(0060,3006)",vr:"xs",name:"HistogramLastBinValue",vm:"1",version:"DICOM"},"(0060,3008)":{tag:"(0060,3008)",vr:"US",name:"HistogramBinWidth",vm:"1",version:"DICOM"},"(0060,3010)":{tag:"(0060,3010)",vr:"LO",name:"HistogramExplanation",vm:"1",version:"DICOM"},"(0060,3020)":{tag:"(0060,3020)",vr:"UL",name:"HistogramData",vm:"1-n",version:"DICOM"},"(0062,0001)":{tag:"(0062,0001)",vr:"CS",name:"SegmentationType",vm:"1",version:"DICOM"},"(0062,0002)":{tag:"(0062,0002)",vr:"SQ",name:"SegmentSequence",vm:"1",version:"DICOM"},"(0062,0003)":{tag:"(0062,0003)",vr:"SQ",name:"SegmentedPropertyCategoryCodeSequence",vm:"1",version:"DICOM"},"(0062,0004)":{tag:"(0062,0004)",vr:"US",name:"SegmentNumber",vm:"1",version:"DICOM"},"(0062,0005)":{tag:"(0062,0005)",vr:"LO",name:"SegmentLabel",vm:"1",version:"DICOM"},"(0062,0006)":{tag:"(0062,0006)",vr:"ST",name:"SegmentDescription",vm:"1",version:"DICOM"},"(0062,0007)":{tag:"(0062,0007)",vr:"SQ",name:"SegmentationAlgorithmIdentificationSequence",vm:"1",version:"DICOM"},"(0062,0008)":{tag:"(0062,0008)",vr:"CS",name:"SegmentAlgorithmType",vm:"1",version:"DICOM"},"(0062,0009)":{tag:"(0062,0009)",vr:"LO",name:"SegmentAlgorithmName",vm:"1",version:"DICOM"},"(0062,000A)":{tag:"(0062,000A)",vr:"SQ",name:"SegmentIdentificationSequence",vm:"1",version:"DICOM"},"(0062,000B)":{tag:"(0062,000B)",vr:"US",name:"ReferencedSegmentNumber",vm:"1-n",version:"DICOM"},"(0062,000C)":{tag:"(0062,000C)",vr:"US",name:"RecommendedDisplayGrayscaleValue",vm:"1",version:"DICOM"},"(0062,000D)":{tag:"(0062,000D)",vr:"US",name:"RecommendedDisplayCIELabValue",vm:"3",version:"DICOM"},"(0062,000E)":{tag:"(0062,000E)",vr:"US",name:"MaximumFractionalValue",vm:"1",version:"DICOM"},"(0062,000F)":{tag:"(0062,000F)",vr:"SQ",name:"SegmentedPropertyTypeCodeSequence",vm:"1",version:"DICOM"},"(0062,0010)":{tag:"(0062,0010)",vr:"CS",name:"SegmentationFractionalType",vm:"1",version:"DICOM"},"(0062,0011)":{tag:"(0062,0011)",vr:"SQ",name:"SegmentedPropertyTypeModifierCodeSequence",vm:"1",version:"DICOM"},"(0062,0012)":{tag:"(0062,0012)",vr:"SQ",name:"UsedSegmentsSequence",vm:"1",version:"DICOM"},"(0062,0013)":{tag:"(0062,0013)",vr:"CS",name:"SegmentsOverlap",vm:"1",version:"DICOM"},"(0062,0020)":{tag:"(0062,0020)",vr:"UT",name:"TrackingID",vm:"1",version:"DICOM"},"(0062,0021)":{tag:"(0062,0021)",vr:"UI",name:"TrackingUID",vm:"1",version:"DICOM"},"(0064,0002)":{tag:"(0064,0002)",vr:"SQ",name:"DeformableRegistrationSequence",vm:"1",version:"DICOM"},"(0064,0003)":{tag:"(0064,0003)",vr:"UI",name:"SourceFrameOfReferenceUID",vm:"1",version:"DICOM"},"(0064,0005)":{tag:"(0064,0005)",vr:"SQ",name:"DeformableRegistrationGridSequence",vm:"1",version:"DICOM"},"(0064,0007)":{tag:"(0064,0007)",vr:"UL",name:"GridDimensions",vm:"3",version:"DICOM"},"(0064,0008)":{tag:"(0064,0008)",vr:"FD",name:"GridResolution",vm:"3",version:"DICOM"},"(0064,0009)":{tag:"(0064,0009)",vr:"OF",name:"VectorGridData",vm:"1",version:"DICOM"},"(0064,000F)":{tag:"(0064,000F)",vr:"SQ",name:"PreDeformationMatrixRegistrationSequence",vm:"1",version:"DICOM"},"(0064,0010)":{tag:"(0064,0010)",vr:"SQ",name:"PostDeformationMatrixRegistrationSequence",vm:"1",version:"DICOM"},"(0066,0001)":{tag:"(0066,0001)",vr:"UL",name:"NumberOfSurfaces",vm:"1",version:"DICOM"},"(0066,0002)":{tag:"(0066,0002)",vr:"SQ",name:"SurfaceSequence",vm:"1",version:"DICOM"},"(0066,0003)":{tag:"(0066,0003)",vr:"UL",name:"SurfaceNumber",vm:"1",version:"DICOM"},"(0066,0004)":{tag:"(0066,0004)",vr:"LT",name:"SurfaceComments",vm:"1",version:"DICOM"},"(0066,0009)":{tag:"(0066,0009)",vr:"CS",name:"SurfaceProcessing",vm:"1",version:"DICOM"},"(0066,000A)":{tag:"(0066,000A)",vr:"FL",name:"SurfaceProcessingRatio",vm:"1",version:"DICOM"},"(0066,000B)":{tag:"(0066,000B)",vr:"LO",name:"SurfaceProcessingDescription",vm:"1",version:"DICOM"},"(0066,000C)":{tag:"(0066,000C)",vr:"FL",name:"RecommendedPresentationOpacity",vm:"1",version:"DICOM"},"(0066,000D)":{tag:"(0066,000D)",vr:"CS",name:"RecommendedPresentationType",vm:"1",version:"DICOM"},"(0066,000E)":{tag:"(0066,000E)",vr:"CS",name:"FiniteVolume",vm:"1",version:"DICOM"},"(0066,0010)":{tag:"(0066,0010)",vr:"CS",name:"Manifold",vm:"1",version:"DICOM"},"(0066,0011)":{tag:"(0066,0011)",vr:"SQ",name:"SurfacePointsSequence",vm:"1",version:"DICOM"},"(0066,0012)":{tag:"(0066,0012)",vr:"SQ",name:"SurfacePointsNormalsSequence",vm:"1",version:"DICOM"},"(0066,0013)":{tag:"(0066,0013)",vr:"SQ",name:"SurfaceMeshPrimitivesSequence",vm:"1",version:"DICOM"},"(0066,0015)":{tag:"(0066,0015)",vr:"UL",name:"NumberOfSurfacePoints",vm:"1",version:"DICOM"},"(0066,0016)":{tag:"(0066,0016)",vr:"OF",name:"PointCoordinatesData",vm:"1",version:"DICOM"},"(0066,0017)":{tag:"(0066,0017)",vr:"FL",name:"PointPositionAccuracy",vm:"3",version:"DICOM"},"(0066,0018)":{tag:"(0066,0018)",vr:"FL",name:"MeanPointDistance",vm:"1",version:"DICOM"},"(0066,0019)":{tag:"(0066,0019)",vr:"FL",name:"MaximumPointDistance",vm:"1",version:"DICOM"},"(0066,001A)":{tag:"(0066,001A)",vr:"FL",name:"PointsBoundingBoxCoordinates",vm:"6",version:"DICOM"},"(0066,001B)":{tag:"(0066,001B)",vr:"FL",name:"AxisOfRotation",vm:"3",version:"DICOM"},"(0066,001C)":{tag:"(0066,001C)",vr:"FL",name:"CenterOfRotation",vm:"3",version:"DICOM"},"(0066,001E)":{tag:"(0066,001E)",vr:"UL",name:"NumberOfVectors",vm:"1",version:"DICOM"},"(0066,001F)":{tag:"(0066,001F)",vr:"US",name:"VectorDimensionality",vm:"1",version:"DICOM"},"(0066,0020)":{tag:"(0066,0020)",vr:"FL",name:"VectorAccuracy",vm:"1-n",version:"DICOM"},"(0066,0021)":{tag:"(0066,0021)",vr:"OF",name:"VectorCoordinateData",vm:"1",version:"DICOM"},"(0066,0022)":{tag:"(0066,0022)",vr:"OD",name:"DoublePointCoordinatesData",vm:"1",version:"DICOM"},"(0066,0023)":{tag:"(0066,0023)",vr:"OW",name:"TrianglePointIndexList",vm:"1",version:"DICOM"},"(0066,0024)":{tag:"(0066,0024)",vr:"OW",name:"EdgePointIndexList",vm:"1",version:"DICOM"},"(0066,0025)":{tag:"(0066,0025)",vr:"OW",name:"VertexPointIndexList",vm:"1",version:"DICOM"},"(0066,0026)":{tag:"(0066,0026)",vr:"SQ",name:"TriangleStripSequence",vm:"1",version:"DICOM"},"(0066,0027)":{tag:"(0066,0027)",vr:"SQ",name:"TriangleFanSequence",vm:"1",version:"DICOM"},"(0066,0028)":{tag:"(0066,0028)",vr:"SQ",name:"LineSequence",vm:"1",version:"DICOM"},"(0066,0029)":{tag:"(0066,0029)",vr:"OW",name:"PrimitivePointIndexList",vm:"1",version:"DICOM"},"(0066,002A)":{tag:"(0066,002A)",vr:"UL",name:"SurfaceCount",vm:"1",version:"DICOM"},"(0066,002B)":{tag:"(0066,002B)",vr:"SQ",name:"ReferencedSurfaceSequence",vm:"1",version:"DICOM"},"(0066,002C)":{tag:"(0066,002C)",vr:"UL",name:"ReferencedSurfaceNumber",vm:"1",version:"DICOM"},"(0066,002D)":{tag:"(0066,002D)",vr:"SQ",name:"SegmentSurfaceGenerationAlgorithmIdentificationSequence",vm:"1",version:"DICOM"},"(0066,002E)":{tag:"(0066,002E)",vr:"SQ",name:"SegmentSurfaceSourceInstanceSequence",vm:"1",version:"DICOM"},"(0066,002F)":{tag:"(0066,002F)",vr:"SQ",name:"AlgorithmFamilyCodeSequence",vm:"1",version:"DICOM"},"(0066,0030)":{tag:"(0066,0030)",vr:"SQ",name:"AlgorithmNameCodeSequence",vm:"1",version:"DICOM"},"(0066,0031)":{tag:"(0066,0031)",vr:"LO",name:"AlgorithmVersion",vm:"1",version:"DICOM"},"(0066,0032)":{tag:"(0066,0032)",vr:"LT",name:"AlgorithmParameters",vm:"1",version:"DICOM"},"(0066,0034)":{tag:"(0066,0034)",vr:"SQ",name:"FacetSequence",vm:"1",version:"DICOM"},"(0066,0035)":{tag:"(0066,0035)",vr:"SQ",name:"SurfaceProcessingAlgorithmIdentificationSequence",vm:"1",version:"DICOM"},"(0066,0036)":{tag:"(0066,0036)",vr:"LO",name:"AlgorithmName",vm:"1",version:"DICOM"},"(0066,0037)":{tag:"(0066,0037)",vr:"FL",name:"RecommendedPointRadius",vm:"1",version:"DICOM"},"(0066,0038)":{tag:"(0066,0038)",vr:"FL",name:"RecommendedLineThickness",vm:"1",version:"DICOM"},"(0066,0040)":{tag:"(0066,0040)",vr:"UL",name:"LongPrimitivePointIndexList",vm:"1-n",version:"DICOM"},"(0066,0041)":{tag:"(0066,0041)",vr:"UL",name:"LongTrianglePointIndexList",vm:"3-3n",version:"DICOM"},"(0066,0042)":{tag:"(0066,0042)",vr:"UL",name:"LongEdgePointIndexList",vm:"2-2n",version:"DICOM"},"(0066,0043)":{tag:"(0066,0043)",vr:"UL",name:"LongVertexPointIndexList",vm:"1-n",version:"DICOM"},"(0066,0101)":{tag:"(0066,0101)",vr:"SQ",name:"TrackSetSequence",vm:"1",version:"DICOM"},"(0066,0102)":{tag:"(0066,0102)",vr:"SQ",name:"TrackSequence",vm:"1",version:"DICOM"},"(0066,0103)":{tag:"(0066,0103)",vr:"OW",name:"RecommendedDisplayCIELabValueList",vm:"1",version:"DICOM"},"(0066,0104)":{tag:"(0066,0104)",vr:"SQ",name:"TrackingAlgorithmIdentificationSequence",vm:"1",version:"DICOM"},"(0066,0105)":{tag:"(0066,0105)",vr:"UL",name:"TrackSetNumber",vm:"1",version:"DICOM"},"(0066,0106)":{tag:"(0066,0106)",vr:"LO",name:"TrackSetLabel",vm:"1",version:"DICOM"},"(0066,0107)":{tag:"(0066,0107)",vr:"UT",name:"TrackSetDescription",vm:"1",version:"DICOM"},"(0066,0108)":{tag:"(0066,0108)",vr:"SQ",name:"TrackSetAnatomicalTypeCodeSequence",vm:"1",version:"DICOM"},"(0066,0121)":{tag:"(0066,0121)",vr:"SQ",name:"MeasurementsSequence",vm:"1",version:"DICOM"},"(0066,0124)":{tag:"(0066,0124)",vr:"SQ",name:"TrackSetStatisticsSequence",vm:"1",version:"DICOM"},"(0066,0125)":{tag:"(0066,0125)",vr:"OF",name:"FloatingPointValues",vm:"1",version:"DICOM"},"(0066,0129)":{tag:"(0066,0129)",vr:"OL",name:"TrackPointIndexList",vm:"1",version:"DICOM"},"(0066,0130)":{tag:"(0066,0130)",vr:"SQ",name:"TrackStatisticsSequence",vm:"1",version:"DICOM"},"(0066,0132)":{tag:"(0066,0132)",vr:"SQ",name:"MeasurementValuesSequence",vm:"1",version:"DICOM"},"(0066,0133)":{tag:"(0066,0133)",vr:"SQ",name:"DiffusionAcquisitionCodeSequence",vm:"1",version:"DICOM"},"(0066,0134)":{tag:"(0066,0134)",vr:"SQ",name:"DiffusionModelCodeSequence",vm:"1",version:"DICOM"},"(0068,6210)":{tag:"(0068,6210)",vr:"LO",name:"ImplantSize",vm:"1",version:"DICOM"},"(0068,6221)":{tag:"(0068,6221)",vr:"LO",name:"ImplantTemplateVersion",vm:"1",version:"DICOM"},"(0068,6222)":{tag:"(0068,6222)",vr:"SQ",name:"ReplacedImplantTemplateSequence",vm:"1",version:"DICOM"},"(0068,6223)":{tag:"(0068,6223)",vr:"CS",name:"ImplantType",vm:"1",version:"DICOM"},"(0068,6224)":{tag:"(0068,6224)",vr:"SQ",name:"DerivationImplantTemplateSequence",vm:"1",version:"DICOM"},"(0068,6225)":{tag:"(0068,6225)",vr:"SQ",name:"OriginalImplantTemplateSequence",vm:"1",version:"DICOM"},"(0068,6226)":{tag:"(0068,6226)",vr:"DT",name:"EffectiveDateTime",vm:"1",version:"DICOM"},"(0068,6230)":{tag:"(0068,6230)",vr:"SQ",name:"ImplantTargetAnatomySequence",vm:"1",version:"DICOM"},"(0068,6260)":{tag:"(0068,6260)",vr:"SQ",name:"InformationFromManufacturerSequence",vm:"1",version:"DICOM"},"(0068,6265)":{tag:"(0068,6265)",vr:"SQ",name:"NotificationFromManufacturerSequence",vm:"1",version:"DICOM"},"(0068,6270)":{tag:"(0068,6270)",vr:"DT",name:"InformationIssueDateTime",vm:"1",version:"DICOM"},"(0068,6280)":{tag:"(0068,6280)",vr:"ST",name:"InformationSummary",vm:"1",version:"DICOM"},"(0068,62A0)":{tag:"(0068,62A0)",vr:"SQ",name:"ImplantRegulatoryDisapprovalCodeSequence",vm:"1",version:"DICOM"},"(0068,62A5)":{tag:"(0068,62A5)",vr:"FD",name:"OverallTemplateSpatialTolerance",vm:"1",version:"DICOM"},"(0068,62C0)":{tag:"(0068,62C0)",vr:"SQ",name:"HPGLDocumentSequence",vm:"1",version:"DICOM"},"(0068,62D0)":{tag:"(0068,62D0)",vr:"US",name:"HPGLDocumentID",vm:"1",version:"DICOM"},"(0068,62D5)":{tag:"(0068,62D5)",vr:"LO",name:"HPGLDocumentLabel",vm:"1",version:"DICOM"},"(0068,62E0)":{tag:"(0068,62E0)",vr:"SQ",name:"ViewOrientationCodeSequence",vm:"1",version:"DICOM"},"(0068,62F0)":{tag:"(0068,62F0)",vr:"FD",name:"ViewOrientationModifier",vm:"9",version:"DICOM"},"(0068,62F2)":{tag:"(0068,62F2)",vr:"FD",name:"HPGLDocumentScaling",vm:"1",version:"DICOM"},"(0068,6300)":{tag:"(0068,6300)",vr:"OB",name:"HPGLDocument",vm:"1",version:"DICOM"},"(0068,6310)":{tag:"(0068,6310)",vr:"US",name:"HPGLContourPenNumber",vm:"1",version:"DICOM"},"(0068,6320)":{tag:"(0068,6320)",vr:"SQ",name:"HPGLPenSequence",vm:"1",version:"DICOM"},"(0068,6330)":{tag:"(0068,6330)",vr:"US",name:"HPGLPenNumber",vm:"1",version:"DICOM"},"(0068,6340)":{tag:"(0068,6340)",vr:"LO",name:"HPGLPenLabel",vm:"1",version:"DICOM"},"(0068,6345)":{tag:"(0068,6345)",vr:"ST",name:"HPGLPenDescription",vm:"1",version:"DICOM"},"(0068,6346)":{tag:"(0068,6346)",vr:"FD",name:"RecommendedRotationPoint",vm:"2",version:"DICOM"},"(0068,6347)":{tag:"(0068,6347)",vr:"FD",name:"BoundingRectangle",vm:"4",version:"DICOM"},"(0068,6350)":{tag:"(0068,6350)",vr:"US",name:"ImplantTemplate3DModelSurfaceNumber",vm:"1-n",version:"DICOM"},"(0068,6360)":{tag:"(0068,6360)",vr:"SQ",name:"SurfaceModelDescriptionSequence",vm:"1",version:"DICOM"},"(0068,6380)":{tag:"(0068,6380)",vr:"LO",name:"SurfaceModelLabel",vm:"1",version:"DICOM"},"(0068,6390)":{tag:"(0068,6390)",vr:"FD",name:"SurfaceModelScalingFactor",vm:"1",version:"DICOM"},"(0068,63A0)":{tag:"(0068,63A0)",vr:"SQ",name:"MaterialsCodeSequence",vm:"1",version:"DICOM"},"(0068,63A4)":{tag:"(0068,63A4)",vr:"SQ",name:"CoatingMaterialsCodeSequence",vm:"1",version:"DICOM"},"(0068,63A8)":{tag:"(0068,63A8)",vr:"SQ",name:"ImplantTypeCodeSequence",vm:"1",version:"DICOM"},"(0068,63AC)":{tag:"(0068,63AC)",vr:"SQ",name:"FixationMethodCodeSequence",vm:"1",version:"DICOM"},"(0068,63B0)":{tag:"(0068,63B0)",vr:"SQ",name:"MatingFeatureSetsSequence",vm:"1",version:"DICOM"},"(0068,63C0)":{tag:"(0068,63C0)",vr:"US",name:"MatingFeatureSetID",vm:"1",version:"DICOM"},"(0068,63D0)":{tag:"(0068,63D0)",vr:"LO",name:"MatingFeatureSetLabel",vm:"1",version:"DICOM"},"(0068,63E0)":{tag:"(0068,63E0)",vr:"SQ",name:"MatingFeatureSequence",vm:"1",version:"DICOM"},"(0068,63F0)":{tag:"(0068,63F0)",vr:"US",name:"MatingFeatureID",vm:"1",version:"DICOM"},"(0068,6400)":{tag:"(0068,6400)",vr:"SQ",name:"MatingFeatureDegreeOfFreedomSequence",vm:"1",version:"DICOM"},"(0068,6410)":{tag:"(0068,6410)",vr:"US",name:"DegreeOfFreedomID",vm:"1",version:"DICOM"},"(0068,6420)":{tag:"(0068,6420)",vr:"CS",name:"DegreeOfFreedomType",vm:"1",version:"DICOM"},"(0068,6430)":{tag:"(0068,6430)",vr:"SQ",name:"TwoDMatingFeatureCoordinatesSequence",vm:"1",version:"DICOM"},"(0068,6440)":{tag:"(0068,6440)",vr:"US",name:"ReferencedHPGLDocumentID",vm:"1",version:"DICOM"},"(0068,6450)":{tag:"(0068,6450)",vr:"FD",name:"TwoDMatingPoint",vm:"2",version:"DICOM"},"(0068,6460)":{tag:"(0068,6460)",vr:"FD",name:"TwoDMatingAxes",vm:"4",version:"DICOM"},"(0068,6470)":{tag:"(0068,6470)",vr:"SQ",name:"TwoDDegreeOfFreedomSequence",vm:"1",version:"DICOM"},"(0068,6490)":{tag:"(0068,6490)",vr:"FD",name:"ThreeDDegreeOfFreedomAxis",vm:"3",version:"DICOM"},"(0068,64A0)":{tag:"(0068,64A0)",vr:"FD",name:"RangeOfFreedom",vm:"2",version:"DICOM"},"(0068,64C0)":{tag:"(0068,64C0)",vr:"FD",name:"ThreeDMatingPoint",vm:"3",version:"DICOM"},"(0068,64D0)":{tag:"(0068,64D0)",vr:"FD",name:"ThreeDMatingAxes",vm:"9",version:"DICOM"},"(0068,64F0)":{tag:"(0068,64F0)",vr:"FD",name:"TwoDDegreeOfFreedomAxis",vm:"3",version:"DICOM"},"(0068,6500)":{tag:"(0068,6500)",vr:"SQ",name:"PlanningLandmarkPointSequence",vm:"1",version:"DICOM"},"(0068,6510)":{tag:"(0068,6510)",vr:"SQ",name:"PlanningLandmarkLineSequence",vm:"1",version:"DICOM"},"(0068,6520)":{tag:"(0068,6520)",vr:"SQ",name:"PlanningLandmarkPlaneSequence",vm:"1",version:"DICOM"},"(0068,6530)":{tag:"(0068,6530)",vr:"US",name:"PlanningLandmarkID",vm:"1",version:"DICOM"},"(0068,6540)":{tag:"(0068,6540)",vr:"LO",name:"PlanningLandmarkDescription",vm:"1",version:"DICOM"},"(0068,6545)":{tag:"(0068,6545)",vr:"SQ",name:"PlanningLandmarkIdentificationCodeSequence",vm:"1",version:"DICOM"},"(0068,6550)":{tag:"(0068,6550)",vr:"SQ",name:"TwoDPointCoordinatesSequence",vm:"1",version:"DICOM"},"(0068,6560)":{tag:"(0068,6560)",vr:"FD",name:"TwoDPointCoordinates",vm:"2",version:"DICOM"},"(0068,6590)":{tag:"(0068,6590)",vr:"FD",name:"ThreeDPointCoordinates",vm:"3",version:"DICOM"},"(0068,65A0)":{tag:"(0068,65A0)",vr:"SQ",name:"TwoDLineCoordinatesSequence",vm:"1",version:"DICOM"},"(0068,65B0)":{tag:"(0068,65B0)",vr:"FD",name:"TwoDLineCoordinates",vm:"4",version:"DICOM"},"(0068,65D0)":{tag:"(0068,65D0)",vr:"FD",name:"ThreeDLineCoordinates",vm:"6",version:"DICOM"},"(0068,65E0)":{tag:"(0068,65E0)",vr:"SQ",name:"TwoDPlaneCoordinatesSequence",vm:"1",version:"DICOM"},"(0068,65F0)":{tag:"(0068,65F0)",vr:"FD",name:"TwoDPlaneIntersection",vm:"4",version:"DICOM"},"(0068,6610)":{tag:"(0068,6610)",vr:"FD",name:"ThreeDPlaneOrigin",vm:"3",version:"DICOM"},"(0068,6620)":{tag:"(0068,6620)",vr:"FD",name:"ThreeDPlaneNormal",vm:"3",version:"DICOM"},"(0068,7001)":{tag:"(0068,7001)",vr:"CS",name:"ModelModification",vm:"1",version:"DICOM"},"(0068,7002)":{tag:"(0068,7002)",vr:"CS",name:"ModelMirroring",vm:"1",version:"DICOM"},"(0068,7003)":{tag:"(0068,7003)",vr:"SQ",name:"ModelUsageCodeSequence",vm:"1",version:"DICOM"},"(0068,7004)":{tag:"(0068,7004)",vr:"UI",name:"ModelGroupUID",vm:"1",version:"DICOM"},"(0068,7005)":{tag:"(0068,7005)",vr:"UR",name:"RelativeURIReferenceWithinEncapsulatedDocument",vm:"1",version:"DICOM"},"(006A,0001)":{tag:"(006A,0001)",vr:"CS",name:"AnnotationCoordinateType",vm:"1",version:"DICOM"},"(006A,0002)":{tag:"(006A,0002)",vr:"SQ",name:"AnnotationGroupSequence",vm:"1",version:"DICOM"},"(006A,0003)":{tag:"(006A,0003)",vr:"UI",name:"AnnotationGroupUID",vm:"1",version:"DICOM"},"(006A,0005)":{tag:"(006A,0005)",vr:"LO",name:"AnnotationGroupLabel",vm:"1",version:"DICOM"},"(006A,0006)":{tag:"(006A,0006)",vr:"UT",name:"AnnotationGroupDescription",vm:"1",version:"DICOM"},"(006A,0007)":{tag:"(006A,0007)",vr:"CS",name:"AnnotationGroupGenerationType",vm:"1",version:"DICOM"},"(006A,0008)":{tag:"(006A,0008)",vr:"SQ",name:"AnnotationGroupAlgorithmIdentificationSequence",vm:"1",version:"DICOM"},"(006A,0009)":{tag:"(006A,0009)",vr:"SQ",name:"AnnotationPropertyCategoryCodeSequence",vm:"1",version:"DICOM"},"(006A,000A)":{tag:"(006A,000A)",vr:"SQ",name:"AnnotationPropertyTypeCodeSequence",vm:"1",version:"DICOM"},"(006A,000B)":{tag:"(006A,000B)",vr:"SQ",name:"AnnotationPropertyTypeModifierCodeSequence",vm:"1",version:"DICOM"},"(006A,000C)":{tag:"(006A,000C)",vr:"UL",name:"NumberOfAnnotations",vm:"1",version:"DICOM"},"(006A,000D)":{tag:"(006A,000D)",vr:"CS",name:"AnnotationAppliesToAllOpticalPaths",vm:"1",version:"DICOM"},"(006A,000E)":{tag:"(006A,000E)",vr:"SH",name:"ReferencedOpticalPathIdentifier",vm:"1-n",version:"DICOM"},"(006A,000F)":{tag:"(006A,000F)",vr:"CS",name:"AnnotationAppliesToAllZPlanes",vm:"1",version:"DICOM"},"(006A,0010)":{tag:"(006A,0010)",vr:"FD",name:"CommonZCoordinateValue",vm:"1-n",version:"DICOM"},"(006A,0011)":{tag:"(006A,0011)",vr:"OL",name:"AnnotationIndexList",vm:"1",version:"DICOM"},"(0070,0001)":{tag:"(0070,0001)",vr:"SQ",name:"GraphicAnnotationSequence",vm:"1",version:"DICOM"},"(0070,0002)":{tag:"(0070,0002)",vr:"CS",name:"GraphicLayer",vm:"1",version:"DICOM"},"(0070,0003)":{tag:"(0070,0003)",vr:"CS",name:"BoundingBoxAnnotationUnits",vm:"1",version:"DICOM"},"(0070,0004)":{tag:"(0070,0004)",vr:"CS",name:"AnchorPointAnnotationUnits",vm:"1",version:"DICOM"},"(0070,0005)":{tag:"(0070,0005)",vr:"CS",name:"GraphicAnnotationUnits",vm:"1",version:"DICOM"},"(0070,0006)":{tag:"(0070,0006)",vr:"ST",name:"UnformattedTextValue",vm:"1",version:"DICOM"},"(0070,0008)":{tag:"(0070,0008)",vr:"SQ",name:"TextObjectSequence",vm:"1",version:"DICOM"},"(0070,0009)":{tag:"(0070,0009)",vr:"SQ",name:"GraphicObjectSequence",vm:"1",version:"DICOM"},"(0070,0010)":{tag:"(0070,0010)",vr:"FL",name:"BoundingBoxTopLeftHandCorner",vm:"2",version:"DICOM"},"(0070,0011)":{tag:"(0070,0011)",vr:"FL",name:"BoundingBoxBottomRightHandCorner",vm:"2",version:"DICOM"},"(0070,0012)":{tag:"(0070,0012)",vr:"CS",name:"BoundingBoxTextHorizontalJustification",vm:"1",version:"DICOM"},"(0070,0014)":{tag:"(0070,0014)",vr:"FL",name:"AnchorPoint",vm:"2",version:"DICOM"},"(0070,0015)":{tag:"(0070,0015)",vr:"CS",name:"AnchorPointVisibility",vm:"1",version:"DICOM"},"(0070,0020)":{tag:"(0070,0020)",vr:"US",name:"GraphicDimensions",vm:"1",version:"DICOM"},"(0070,0021)":{tag:"(0070,0021)",vr:"US",name:"NumberOfGraphicPoints",vm:"1",version:"DICOM"},"(0070,0022)":{tag:"(0070,0022)",vr:"FL",name:"GraphicData",vm:"2-n",version:"DICOM"},"(0070,0023)":{tag:"(0070,0023)",vr:"CS",name:"GraphicType",vm:"1",version:"DICOM"},"(0070,0024)":{tag:"(0070,0024)",vr:"CS",name:"GraphicFilled",vm:"1",version:"DICOM"},"(0070,0041)":{tag:"(0070,0041)",vr:"CS",name:"ImageHorizontalFlip",vm:"1",version:"DICOM"},"(0070,0042)":{tag:"(0070,0042)",vr:"US",name:"ImageRotation",vm:"1",version:"DICOM"},"(0070,0052)":{tag:"(0070,0052)",vr:"SL",name:"DisplayedAreaTopLeftHandCorner",vm:"2",version:"DICOM"},"(0070,0053)":{tag:"(0070,0053)",vr:"SL",name:"DisplayedAreaBottomRightHandCorner",vm:"2",version:"DICOM"},"(0070,005A)":{tag:"(0070,005A)",vr:"SQ",name:"DisplayedAreaSelectionSequence",vm:"1",version:"DICOM"},"(0070,0060)":{tag:"(0070,0060)",vr:"SQ",name:"GraphicLayerSequence",vm:"1",version:"DICOM"},"(0070,0062)":{tag:"(0070,0062)",vr:"IS",name:"GraphicLayerOrder",vm:"1",version:"DICOM"},"(0070,0066)":{tag:"(0070,0066)",vr:"US",name:"GraphicLayerRecommendedDisplayGrayscaleValue",vm:"1",version:"DICOM"},"(0070,0068)":{tag:"(0070,0068)",vr:"LO",name:"GraphicLayerDescription",vm:"1",version:"DICOM"},"(0070,0080)":{tag:"(0070,0080)",vr:"CS",name:"ContentLabel",vm:"1",version:"DICOM"},"(0070,0081)":{tag:"(0070,0081)",vr:"LO",name:"ContentDescription",vm:"1",version:"DICOM"},"(0070,0082)":{tag:"(0070,0082)",vr:"DA",name:"PresentationCreationDate",vm:"1",version:"DICOM"},"(0070,0083)":{tag:"(0070,0083)",vr:"TM",name:"PresentationCreationTime",vm:"1",version:"DICOM"},"(0070,0084)":{tag:"(0070,0084)",vr:"PN",name:"ContentCreatorName",vm:"1",version:"DICOM"},"(0070,0086)":{tag:"(0070,0086)",vr:"SQ",name:"ContentCreatorIdentificationCodeSequence",vm:"1",version:"DICOM"},"(0070,0087)":{tag:"(0070,0087)",vr:"SQ",name:"AlternateContentDescriptionSequence",vm:"1",version:"DICOM"},"(0070,0100)":{tag:"(0070,0100)",vr:"CS",name:"PresentationSizeMode",vm:"1",version:"DICOM"},"(0070,0101)":{tag:"(0070,0101)",vr:"DS",name:"PresentationPixelSpacing",vm:"2",version:"DICOM"},"(0070,0102)":{tag:"(0070,0102)",vr:"IS",name:"PresentationPixelAspectRatio",vm:"2",version:"DICOM"},"(0070,0103)":{tag:"(0070,0103)",vr:"FL",name:"PresentationPixelMagnificationRatio",vm:"1",version:"DICOM"},"(0070,0207)":{tag:"(0070,0207)",vr:"LO",name:"GraphicGroupLabel",vm:"1",version:"DICOM"},"(0070,0208)":{tag:"(0070,0208)",vr:"ST",name:"GraphicGroupDescription",vm:"1",version:"DICOM"},"(0070,0209)":{tag:"(0070,0209)",vr:"SQ",name:"CompoundGraphicSequence",vm:"1",version:"DICOM"},"(0070,0226)":{tag:"(0070,0226)",vr:"UL",name:"CompoundGraphicInstanceID",vm:"1",version:"DICOM"},"(0070,0227)":{tag:"(0070,0227)",vr:"LO",name:"FontName",vm:"1",version:"DICOM"},"(0070,0228)":{tag:"(0070,0228)",vr:"CS",name:"FontNameType",vm:"1",version:"DICOM"},"(0070,0229)":{tag:"(0070,0229)",vr:"LO",name:"CSSFontName",vm:"1",version:"DICOM"},"(0070,0230)":{tag:"(0070,0230)",vr:"FD",name:"RotationAngle",vm:"1",version:"DICOM"},"(0070,0231)":{tag:"(0070,0231)",vr:"SQ",name:"TextStyleSequence",vm:"1",version:"DICOM"},"(0070,0232)":{tag:"(0070,0232)",vr:"SQ",name:"LineStyleSequence",vm:"1",version:"DICOM"},"(0070,0233)":{tag:"(0070,0233)",vr:"SQ",name:"FillStyleSequence",vm:"1",version:"DICOM"},"(0070,0234)":{tag:"(0070,0234)",vr:"SQ",name:"GraphicGroupSequence",vm:"1",version:"DICOM"},"(0070,0241)":{tag:"(0070,0241)",vr:"US",name:"TextColorCIELabValue",vm:"3",version:"DICOM"},"(0070,0242)":{tag:"(0070,0242)",vr:"CS",name:"HorizontalAlignment",vm:"1",version:"DICOM"},"(0070,0243)":{tag:"(0070,0243)",vr:"CS",name:"VerticalAlignment",vm:"1",version:"DICOM"},"(0070,0244)":{tag:"(0070,0244)",vr:"CS",name:"ShadowStyle",vm:"1",version:"DICOM"},"(0070,0245)":{tag:"(0070,0245)",vr:"FL",name:"ShadowOffsetX",vm:"1",version:"DICOM"},"(0070,0246)":{tag:"(0070,0246)",vr:"FL",name:"ShadowOffsetY",vm:"1",version:"DICOM"},"(0070,0247)":{tag:"(0070,0247)",vr:"US",name:"ShadowColorCIELabValue",vm:"3",version:"DICOM"},"(0070,0248)":{tag:"(0070,0248)",vr:"CS",name:"Underlined",vm:"1",version:"DICOM"},"(0070,0249)":{tag:"(0070,0249)",vr:"CS",name:"Bold",vm:"1",version:"DICOM"},"(0070,0250)":{tag:"(0070,0250)",vr:"CS",name:"Italic",vm:"1",version:"DICOM"},"(0070,0251)":{tag:"(0070,0251)",vr:"US",name:"PatternOnColorCIELabValue",vm:"3",version:"DICOM"},"(0070,0252)":{tag:"(0070,0252)",vr:"US",name:"PatternOffColorCIELabValue",vm:"3",version:"DICOM"},"(0070,0253)":{tag:"(0070,0253)",vr:"FL",name:"LineThickness",vm:"1",version:"DICOM"},"(0070,0254)":{tag:"(0070,0254)",vr:"CS",name:"LineDashingStyle",vm:"1",version:"DICOM"},"(0070,0255)":{tag:"(0070,0255)",vr:"UL",name:"LinePattern",vm:"1",version:"DICOM"},"(0070,0256)":{tag:"(0070,0256)",vr:"OB",name:"FillPattern",vm:"1",version:"DICOM"},"(0070,0257)":{tag:"(0070,0257)",vr:"CS",name:"FillMode",vm:"1",version:"DICOM"},"(0070,0258)":{tag:"(0070,0258)",vr:"FL",name:"ShadowOpacity",vm:"1",version:"DICOM"},"(0070,0261)":{tag:"(0070,0261)",vr:"FL",name:"GapLength",vm:"1",version:"DICOM"},"(0070,0262)":{tag:"(0070,0262)",vr:"FL",name:"DiameterOfVisibility",vm:"1",version:"DICOM"},"(0070,0273)":{tag:"(0070,0273)",vr:"FL",name:"RotationPoint",vm:"2",version:"DICOM"},"(0070,0274)":{tag:"(0070,0274)",vr:"CS",name:"TickAlignment",vm:"1",version:"DICOM"},"(0070,0278)":{tag:"(0070,0278)",vr:"CS",name:"ShowTickLabel",vm:"1",version:"DICOM"},"(0070,0279)":{tag:"(0070,0279)",vr:"CS",name:"TickLabelAlignment",vm:"1",version:"DICOM"},"(0070,0282)":{tag:"(0070,0282)",vr:"CS",name:"CompoundGraphicUnits",vm:"1",version:"DICOM"},"(0070,0284)":{tag:"(0070,0284)",vr:"FL",name:"PatternOnOpacity",vm:"1",version:"DICOM"},"(0070,0285)":{tag:"(0070,0285)",vr:"FL",name:"PatternOffOpacity",vm:"1",version:"DICOM"},"(0070,0287)":{tag:"(0070,0287)",vr:"SQ",name:"MajorTicksSequence",vm:"1",version:"DICOM"},"(0070,0288)":{tag:"(0070,0288)",vr:"FL",name:"TickPosition",vm:"1",version:"DICOM"},"(0070,0289)":{tag:"(0070,0289)",vr:"SH",name:"TickLabel",vm:"1",version:"DICOM"},"(0070,0294)":{tag:"(0070,0294)",vr:"CS",name:"CompoundGraphicType",vm:"1",version:"DICOM"},"(0070,0295)":{tag:"(0070,0295)",vr:"UL",name:"GraphicGroupID",vm:"1",version:"DICOM"},"(0070,0306)":{tag:"(0070,0306)",vr:"CS",name:"ShapeType",vm:"1",version:"DICOM"},"(0070,0308)":{tag:"(0070,0308)",vr:"SQ",name:"RegistrationSequence",vm:"1",version:"DICOM"},"(0070,0309)":{tag:"(0070,0309)",vr:"SQ",name:"MatrixRegistrationSequence",vm:"1",version:"DICOM"},"(0070,030A)":{tag:"(0070,030A)",vr:"SQ",name:"MatrixSequence",vm:"1",version:"DICOM"},"(0070,030B)":{tag:"(0070,030B)",vr:"FD",name:"FrameOfReferenceToDisplayedCoordinateSystemTransformationMatrix",vm:"16",version:"DICOM"},"(0070,030C)":{tag:"(0070,030C)",vr:"CS",name:"FrameOfReferenceTransformationMatrixType",vm:"1",version:"DICOM"},"(0070,030D)":{tag:"(0070,030D)",vr:"SQ",name:"RegistrationTypeCodeSequence",vm:"1",version:"DICOM"},"(0070,030F)":{tag:"(0070,030F)",vr:"ST",name:"FiducialDescription",vm:"1",version:"DICOM"},"(0070,0310)":{tag:"(0070,0310)",vr:"SH",name:"FiducialIdentifier",vm:"1",version:"DICOM"},"(0070,0311)":{tag:"(0070,0311)",vr:"SQ",name:"FiducialIdentifierCodeSequence",vm:"1",version:"DICOM"},"(0070,0312)":{tag:"(0070,0312)",vr:"FD",name:"ContourUncertaintyRadius",vm:"1",version:"DICOM"},"(0070,0314)":{tag:"(0070,0314)",vr:"SQ",name:"UsedFiducialsSequence",vm:"1",version:"DICOM"},"(0070,0315)":{tag:"(0070,0315)",vr:"SQ",name:"UsedRTStructureSetROISequence",vm:"1",version:"DICOM"},"(0070,0318)":{tag:"(0070,0318)",vr:"SQ",name:"GraphicCoordinatesDataSequence",vm:"1",version:"DICOM"},"(0070,031A)":{tag:"(0070,031A)",vr:"UI",name:"FiducialUID",vm:"1",version:"DICOM"},"(0070,031B)":{tag:"(0070,031B)",vr:"UI",name:"ReferencedFiducialUID",vm:"1",version:"DICOM"},"(0070,031C)":{tag:"(0070,031C)",vr:"SQ",name:"FiducialSetSequence",vm:"1",version:"DICOM"},"(0070,031E)":{tag:"(0070,031E)",vr:"SQ",name:"FiducialSequence",vm:"1",version:"DICOM"},"(0070,031F)":{tag:"(0070,031F)",vr:"SQ",name:"FiducialsPropertyCategoryCodeSequence",vm:"1",version:"DICOM"},"(0070,0401)":{tag:"(0070,0401)",vr:"US",name:"GraphicLayerRecommendedDisplayCIELabValue",vm:"3",version:"DICOM"},"(0070,0402)":{tag:"(0070,0402)",vr:"SQ",name:"BlendingSequence",vm:"1",version:"DICOM"},"(0070,0403)":{tag:"(0070,0403)",vr:"FL",name:"RelativeOpacity",vm:"1",version:"DICOM"},"(0070,0404)":{tag:"(0070,0404)",vr:"SQ",name:"ReferencedSpatialRegistrationSequence",vm:"1",version:"DICOM"},"(0070,0405)":{tag:"(0070,0405)",vr:"CS",name:"BlendingPosition",vm:"1",version:"DICOM"},"(0070,1209)":{tag:"(0070,1209)",vr:"UI",name:"VolumetricPresentationInputSetUID",vm:"1",version:"DICOM"},"(0070,120A)":{tag:"(0070,120A)",vr:"SQ",name:"VolumetricPresentationInputSetSequence",vm:"1",version:"DICOM"},"(0070,120B)":{tag:"(0070,120B)",vr:"CS",name:"GlobalCrop",vm:"1",version:"DICOM"},"(0070,120C)":{tag:"(0070,120C)",vr:"US",name:"GlobalCroppingSpecificationIndex",vm:"1-n",version:"DICOM"},"(0070,120D)":{tag:"(0070,120D)",vr:"CS",name:"RenderingMethod",vm:"1",version:"DICOM"},"(0070,1602)":{tag:"(0070,1602)",vr:"CS",name:"RenderProjection",vm:"1",version:"DICOM"},"(0070,1603)":{tag:"(0070,1603)",vr:"FD",name:"ViewpointPosition",vm:"3",version:"DICOM"},"(0070,1604)":{tag:"(0070,1604)",vr:"FD",name:"ViewpointLookAtPoint",vm:"3",version:"DICOM"},"(0070,1605)":{tag:"(0070,1605)",vr:"FD",name:"ViewpointUpDirection",vm:"3",version:"DICOM"},"(0070,1606)":{tag:"(0070,1606)",vr:"FD",name:"RenderFieldOfView",vm:"6",version:"DICOM"},"(0070,1607)":{tag:"(0070,1607)",vr:"FD",name:"SamplingStepSize",vm:"1",version:"DICOM"},"(0070,1701)":{tag:"(0070,1701)",vr:"CS",name:"ShadingStyle",vm:"1",version:"DICOM"},"(0070,1702)":{tag:"(0070,1702)",vr:"FD",name:"AmbientReflectionIntensity",vm:"1",version:"DICOM"},"(0070,1703)":{tag:"(0070,1703)",vr:"FD",name:"LightDirection",vm:"3",version:"DICOM"},"(0070,1704)":{tag:"(0070,1704)",vr:"FD",name:"DiffuseReflectionIntensity",vm:"1",version:"DICOM"},"(0070,1705)":{tag:"(0070,1705)",vr:"FD",name:"SpecularReflectionIntensity",vm:"1",version:"DICOM"},"(0070,1706)":{tag:"(0070,1706)",vr:"FD",name:"Shininess",vm:"1",version:"DICOM"},"(0070,1A06)":{tag:"(0070,1A06)",vr:"FD",name:"SwivelRange",vm:"1",version:"DICOM"},"(0070,1A07)":{tag:"(0070,1A07)",vr:"OD",name:"VolumetricCurveUpDirections",vm:"1",version:"DICOM"},"(0070,1A08)":{tag:"(0070,1A08)",vr:"SQ",name:"VolumeStreamSequence",vm:"1",version:"DICOM"},"(0070,1A09)":{tag:"(0070,1A09)",vr:"LO",name:"RGBATransferFunctionDescription",vm:"1",version:"DICOM"},"(0070,1B01)":{tag:"(0070,1B01)",vr:"SQ",name:"AdvancedBlendingSequence",vm:"1",version:"DICOM"},"(0070,1B02)":{tag:"(0070,1B02)",vr:"US",name:"BlendingInputNumber",vm:"1",version:"DICOM"},"(0070,1B03)":{tag:"(0070,1B03)",vr:"SQ",name:"BlendingDisplayInputSequence",vm:"1",version:"DICOM"},"(0070,1B04)":{tag:"(0070,1B04)",vr:"SQ",name:"BlendingDisplaySequence",vm:"1",version:"DICOM"},"(0070,1B06)":{tag:"(0070,1B06)",vr:"CS",name:"BlendingMode",vm:"1",version:"DICOM"},"(0070,1B07)":{tag:"(0070,1B07)",vr:"CS",name:"TimeSeriesBlending",vm:"1",version:"DICOM"},"(0070,1B08)":{tag:"(0070,1B08)",vr:"CS",name:"GeometryForDisplay",vm:"1",version:"DICOM"},"(0070,1B11)":{tag:"(0070,1B11)",vr:"SQ",name:"ThresholdSequence",vm:"1",version:"DICOM"},"(0070,1B12)":{tag:"(0070,1B12)",vr:"SQ",name:"ThresholdValueSequence",vm:"1",version:"DICOM"},"(0070,1B13)":{tag:"(0070,1B13)",vr:"CS",name:"ThresholdType",vm:"1",version:"DICOM"},"(0070,1B14)":{tag:"(0070,1B14)",vr:"FD",name:"ThresholdValue",vm:"1",version:"DICOM"},"(0072,0002)":{tag:"(0072,0002)",vr:"SH",name:"HangingProtocolName",vm:"1",version:"DICOM"},"(0072,0004)":{tag:"(0072,0004)",vr:"LO",name:"HangingProtocolDescription",vm:"1",version:"DICOM"},"(0072,0006)":{tag:"(0072,0006)",vr:"CS",name:"HangingProtocolLevel",vm:"1",version:"DICOM"},"(0072,0008)":{tag:"(0072,0008)",vr:"LO",name:"HangingProtocolCreator",vm:"1",version:"DICOM"},"(0072,000A)":{tag:"(0072,000A)",vr:"DT",name:"HangingProtocolCreationDateTime",vm:"1",version:"DICOM"},"(0072,000C)":{tag:"(0072,000C)",vr:"SQ",name:"HangingProtocolDefinitionSequence",vm:"1",version:"DICOM"},"(0072,000E)":{tag:"(0072,000E)",vr:"SQ",name:"HangingProtocolUserIdentificationCodeSequence",vm:"1",version:"DICOM"},"(0072,0010)":{tag:"(0072,0010)",vr:"LO",name:"HangingProtocolUserGroupName",vm:"1",version:"DICOM"},"(0072,0012)":{tag:"(0072,0012)",vr:"SQ",name:"SourceHangingProtocolSequence",vm:"1",version:"DICOM"},"(0072,0014)":{tag:"(0072,0014)",vr:"US",name:"NumberOfPriorsReferenced",vm:"1",version:"DICOM"},"(0072,0020)":{tag:"(0072,0020)",vr:"SQ",name:"ImageSetsSequence",vm:"1",version:"DICOM"},"(0072,0022)":{tag:"(0072,0022)",vr:"SQ",name:"ImageSetSelectorSequence",vm:"1",version:"DICOM"},"(0072,0024)":{tag:"(0072,0024)",vr:"CS",name:"ImageSetSelectorUsageFlag",vm:"1",version:"DICOM"},"(0072,0026)":{tag:"(0072,0026)",vr:"AT",name:"SelectorAttribute",vm:"1",version:"DICOM"},"(0072,0028)":{tag:"(0072,0028)",vr:"US",name:"SelectorValueNumber",vm:"1",version:"DICOM"},"(0072,0030)":{tag:"(0072,0030)",vr:"SQ",name:"TimeBasedImageSetsSequence",vm:"1",version:"DICOM"},"(0072,0032)":{tag:"(0072,0032)",vr:"US",name:"ImageSetNumber",vm:"1",version:"DICOM"},"(0072,0034)":{tag:"(0072,0034)",vr:"CS",name:"ImageSetSelectorCategory",vm:"1",version:"DICOM"},"(0072,0038)":{tag:"(0072,0038)",vr:"US",name:"RelativeTime",vm:"2",version:"DICOM"},"(0072,003A)":{tag:"(0072,003A)",vr:"CS",name:"RelativeTimeUnits",vm:"1",version:"DICOM"},"(0072,003C)":{tag:"(0072,003C)",vr:"SS",name:"AbstractPriorValue",vm:"2",version:"DICOM"},"(0072,003E)":{tag:"(0072,003E)",vr:"SQ",name:"AbstractPriorCodeSequence",vm:"1",version:"DICOM"},"(0072,0040)":{tag:"(0072,0040)",vr:"LO",name:"ImageSetLabel",vm:"1",version:"DICOM"},"(0072,0050)":{tag:"(0072,0050)",vr:"CS",name:"SelectorAttributeVR",vm:"1",version:"DICOM"},"(0072,0052)":{tag:"(0072,0052)",vr:"AT",name:"SelectorSequencePointer",vm:"1-n",version:"DICOM"},"(0072,0054)":{tag:"(0072,0054)",vr:"LO",name:"SelectorSequencePointerPrivateCreator",vm:"1-n",version:"DICOM"},"(0072,0056)":{tag:"(0072,0056)",vr:"LO",name:"SelectorAttributePrivateCreator",vm:"1",version:"DICOM"},"(0072,005E)":{tag:"(0072,005E)",vr:"AE",name:"SelectorAEValue",vm:"1-n",version:"DICOM"},"(0072,005F)":{tag:"(0072,005F)",vr:"AS",name:"SelectorASValue",vm:"1-n",version:"DICOM"},"(0072,0060)":{tag:"(0072,0060)",vr:"AT",name:"SelectorATValue",vm:"1-n",version:"DICOM"},"(0072,0061)":{tag:"(0072,0061)",vr:"DA",name:"SelectorDAValue",vm:"1-n",version:"DICOM"},"(0072,0062)":{tag:"(0072,0062)",vr:"CS",name:"SelectorCSValue",vm:"1-n",version:"DICOM"},"(0072,0063)":{tag:"(0072,0063)",vr:"DT",name:"SelectorDTValue",vm:"1-n",version:"DICOM"},"(0072,0064)":{tag:"(0072,0064)",vr:"IS",name:"SelectorISValue",vm:"1-n",version:"DICOM"},"(0072,0065)":{tag:"(0072,0065)",vr:"OB",name:"SelectorOBValue",vm:"1",version:"DICOM"},"(0072,0066)":{tag:"(0072,0066)",vr:"LO",name:"SelectorLOValue",vm:"1-n",version:"DICOM"},"(0072,0067)":{tag:"(0072,0067)",vr:"OF",name:"SelectorOFValue",vm:"1",version:"DICOM"},"(0072,0068)":{tag:"(0072,0068)",vr:"LT",name:"SelectorLTValue",vm:"1",version:"DICOM"},"(0072,0069)":{tag:"(0072,0069)",vr:"OW",name:"SelectorOWValue",vm:"1",version:"DICOM"},"(0072,006A)":{tag:"(0072,006A)",vr:"PN",name:"SelectorPNValue",vm:"1-n",version:"DICOM"},"(0072,006B)":{tag:"(0072,006B)",vr:"TM",name:"SelectorTMValue",vm:"1-n",version:"DICOM"},"(0072,006C)":{tag:"(0072,006C)",vr:"SH",name:"SelectorSHValue",vm:"1-n",version:"DICOM"},"(0072,006D)":{tag:"(0072,006D)",vr:"UN",name:"SelectorUNValue",vm:"1",version:"DICOM"},"(0072,006E)":{tag:"(0072,006E)",vr:"ST",name:"SelectorSTValue",vm:"1",version:"DICOM"},"(0072,006F)":{tag:"(0072,006F)",vr:"UC",name:"SelectorUCValue",vm:"1-n",version:"DICOM"},"(0072,0070)":{tag:"(0072,0070)",vr:"UT",name:"SelectorUTValue",vm:"1",version:"DICOM"},"(0072,0071)":{tag:"(0072,0071)",vr:"UR",name:"SelectorURValue",vm:"1",version:"DICOM"},"(0072,0072)":{tag:"(0072,0072)",vr:"DS",name:"SelectorDSValue",vm:"1-n",version:"DICOM"},"(0072,0073)":{tag:"(0072,0073)",vr:"OD",name:"SelectorODValue",vm:"1",version:"DICOM"},"(0072,0074)":{tag:"(0072,0074)",vr:"FD",name:"SelectorFDValue",vm:"1-n",version:"DICOM"},"(0072,0075)":{tag:"(0072,0075)",vr:"OL",name:"SelectorOLValue",vm:"1",version:"DICOM"},"(0072,0076)":{tag:"(0072,0076)",vr:"FL",name:"SelectorFLValue",vm:"1-n",version:"DICOM"},"(0072,0078)":{tag:"(0072,0078)",vr:"UL",name:"SelectorULValue",vm:"1-n",version:"DICOM"},"(0072,007A)":{tag:"(0072,007A)",vr:"US",name:"SelectorUSValue",vm:"1-n",version:"DICOM"},"(0072,007C)":{tag:"(0072,007C)",vr:"SL",name:"SelectorSLValue",vm:"1-n",version:"DICOM"},"(0072,007E)":{tag:"(0072,007E)",vr:"SS",name:"SelectorSSValue",vm:"1-n",version:"DICOM"},"(0072,007F)":{tag:"(0072,007F)",vr:"UI",name:"SelectorUIValue",vm:"1-n",version:"DICOM"},"(0072,0080)":{tag:"(0072,0080)",vr:"SQ",name:"SelectorCodeSequenceValue",vm:"1",version:"DICOM"},"(0072,0081)":{tag:"(0072,0081)",vr:"OV",name:"SelectorOVValue",vm:"1",version:"DICOM"},"(0072,0082)":{tag:"(0072,0082)",vr:"SV",name:"SelectorSVValue",vm:"1-n",version:"DICOM"},"(0072,0083)":{tag:"(0072,0083)",vr:"UV",name:"SelectorUVValue",vm:"1-n",version:"DICOM"},"(0072,0100)":{tag:"(0072,0100)",vr:"US",name:"NumberOfScreens",vm:"1",version:"DICOM"},"(0072,0102)":{tag:"(0072,0102)",vr:"SQ",name:"NominalScreenDefinitionSequence",vm:"1",version:"DICOM"},"(0072,0104)":{tag:"(0072,0104)",vr:"US",name:"NumberOfVerticalPixels",vm:"1",version:"DICOM"},"(0072,0106)":{tag:"(0072,0106)",vr:"US",name:"NumberOfHorizontalPixels",vm:"1",version:"DICOM"},"(0072,0108)":{tag:"(0072,0108)",vr:"FD",name:"DisplayEnvironmentSpatialPosition",vm:"4",version:"DICOM"},"(0072,010A)":{tag:"(0072,010A)",vr:"US",name:"ScreenMinimumGrayscaleBitDepth",vm:"1",version:"DICOM"},"(0072,010C)":{tag:"(0072,010C)",vr:"US",name:"ScreenMinimumColorBitDepth",vm:"1",version:"DICOM"},"(0072,010E)":{tag:"(0072,010E)",vr:"US",name:"ApplicationMaximumRepaintTime",vm:"1",version:"DICOM"},"(0072,0200)":{tag:"(0072,0200)",vr:"SQ",name:"DisplaySetsSequence",vm:"1",version:"DICOM"},"(0072,0202)":{tag:"(0072,0202)",vr:"US",name:"DisplaySetNumber",vm:"1",version:"DICOM"},"(0072,0203)":{tag:"(0072,0203)",vr:"LO",name:"DisplaySetLabel",vm:"1",version:"DICOM"},"(0072,0204)":{tag:"(0072,0204)",vr:"US",name:"DisplaySetPresentationGroup",vm:"1",version:"DICOM"},"(0072,0206)":{tag:"(0072,0206)",vr:"LO",name:"DisplaySetPresentationGroupDescription",vm:"1",version:"DICOM"},"(0072,0208)":{tag:"(0072,0208)",vr:"CS",name:"PartialDataDisplayHandling",vm:"1",version:"DICOM"},"(0072,0210)":{tag:"(0072,0210)",vr:"SQ",name:"SynchronizedScrollingSequence",vm:"1",version:"DICOM"},"(0072,0212)":{tag:"(0072,0212)",vr:"US",name:"DisplaySetScrollingGroup",vm:"2-n",version:"DICOM"},"(0072,0214)":{tag:"(0072,0214)",vr:"SQ",name:"NavigationIndicatorSequence",vm:"1",version:"DICOM"},"(0072,0216)":{tag:"(0072,0216)",vr:"US",name:"NavigationDisplaySet",vm:"1",version:"DICOM"},"(0072,0218)":{tag:"(0072,0218)",vr:"US",name:"ReferenceDisplaySets",vm:"1-n",version:"DICOM"},"(0072,0300)":{tag:"(0072,0300)",vr:"SQ",name:"ImageBoxesSequence",vm:"1",version:"DICOM"},"(0072,0302)":{tag:"(0072,0302)",vr:"US",name:"ImageBoxNumber",vm:"1",version:"DICOM"},"(0072,0304)":{tag:"(0072,0304)",vr:"CS",name:"ImageBoxLayoutType",vm:"1",version:"DICOM"},"(0072,0306)":{tag:"(0072,0306)",vr:"US",name:"ImageBoxTileHorizontalDimension",vm:"1",version:"DICOM"},"(0072,0308)":{tag:"(0072,0308)",vr:"US",name:"ImageBoxTileVerticalDimension",vm:"1",version:"DICOM"},"(0072,0310)":{tag:"(0072,0310)",vr:"CS",name:"ImageBoxScrollDirection",vm:"1",version:"DICOM"},"(0072,0312)":{tag:"(0072,0312)",vr:"CS",name:"ImageBoxSmallScrollType",vm:"1",version:"DICOM"},"(0072,0314)":{tag:"(0072,0314)",vr:"US",name:"ImageBoxSmallScrollAmount",vm:"1",version:"DICOM"},"(0072,0316)":{tag:"(0072,0316)",vr:"CS",name:"ImageBoxLargeScrollType",vm:"1",version:"DICOM"},"(0072,0318)":{tag:"(0072,0318)",vr:"US",name:"ImageBoxLargeScrollAmount",vm:"1",version:"DICOM"},"(0072,0320)":{tag:"(0072,0320)",vr:"US",name:"ImageBoxOverlapPriority",vm:"1",version:"DICOM"},"(0072,0330)":{tag:"(0072,0330)",vr:"FD",name:"CineRelativeToRealTime",vm:"1",version:"DICOM"},"(0072,0400)":{tag:"(0072,0400)",vr:"SQ",name:"FilterOperationsSequence",vm:"1",version:"DICOM"},"(0072,0402)":{tag:"(0072,0402)",vr:"CS",name:"FilterByCategory",vm:"1",version:"DICOM"},"(0072,0404)":{tag:"(0072,0404)",vr:"CS",name:"FilterByAttributePresence",vm:"1",version:"DICOM"},"(0072,0406)":{tag:"(0072,0406)",vr:"CS",name:"FilterByOperator",vm:"1",version:"DICOM"},"(0072,0420)":{tag:"(0072,0420)",vr:"US",name:"StructuredDisplayBackgroundCIELabValue",vm:"3",version:"DICOM"},"(0072,0421)":{tag:"(0072,0421)",vr:"US",name:"EmptyImageBoxCIELabValue",vm:"3",version:"DICOM"},"(0072,0422)":{tag:"(0072,0422)",vr:"SQ",name:"StructuredDisplayImageBoxSequence",vm:"1",version:"DICOM"},"(0072,0424)":{tag:"(0072,0424)",vr:"SQ",name:"StructuredDisplayTextBoxSequence",vm:"1",version:"DICOM"},"(0072,0427)":{tag:"(0072,0427)",vr:"SQ",name:"ReferencedFirstFrameSequence",vm:"1",version:"DICOM"},"(0072,0430)":{tag:"(0072,0430)",vr:"SQ",name:"ImageBoxSynchronizationSequence",vm:"1",version:"DICOM"},"(0072,0432)":{tag:"(0072,0432)",vr:"US",name:"SynchronizedImageBoxList",vm:"2-n",version:"DICOM"},"(0072,0434)":{tag:"(0072,0434)",vr:"CS",name:"TypeOfSynchronization",vm:"1",version:"DICOM"},"(0072,0500)":{tag:"(0072,0500)",vr:"CS",name:"BlendingOperationType",vm:"1",version:"DICOM"},"(0072,0510)":{tag:"(0072,0510)",vr:"CS",name:"ReformattingOperationType",vm:"1",version:"DICOM"},"(0072,0512)":{tag:"(0072,0512)",vr:"FD",name:"ReformattingThickness",vm:"1",version:"DICOM"},"(0072,0514)":{tag:"(0072,0514)",vr:"FD",name:"ReformattingInterval",vm:"1",version:"DICOM"},"(0072,0516)":{tag:"(0072,0516)",vr:"CS",name:"ReformattingOperationInitialViewDirection",vm:"1",version:"DICOM"},"(0072,0520)":{tag:"(0072,0520)",vr:"CS",name:"ThreeDRenderingType",vm:"1-n",version:"DICOM"},"(0072,0600)":{tag:"(0072,0600)",vr:"SQ",name:"SortingOperationsSequence",vm:"1",version:"DICOM"},"(0072,0602)":{tag:"(0072,0602)",vr:"CS",name:"SortByCategory",vm:"1",version:"DICOM"},"(0072,0604)":{tag:"(0072,0604)",vr:"CS",name:"SortingDirection",vm:"1",version:"DICOM"},"(0072,0700)":{tag:"(0072,0700)",vr:"CS",name:"DisplaySetPatientOrientation",vm:"2",version:"DICOM"},"(0072,0702)":{tag:"(0072,0702)",vr:"CS",name:"VOIType",vm:"1",version:"DICOM"},"(0072,0704)":{tag:"(0072,0704)",vr:"CS",name:"PseudoColorType",vm:"1",version:"DICOM"},"(0072,0705)":{tag:"(0072,0705)",vr:"SQ",name:"PseudoColorPaletteInstanceReferenceSequence",vm:"1",version:"DICOM"},"(0072,0706)":{tag:"(0072,0706)",vr:"CS",name:"ShowGrayscaleInverted",vm:"1",version:"DICOM"},"(0072,0710)":{tag:"(0072,0710)",vr:"CS",name:"ShowImageTrueSizeFlag",vm:"1",version:"DICOM"},"(0072,0712)":{tag:"(0072,0712)",vr:"CS",name:"ShowGraphicAnnotationFlag",vm:"1",version:"DICOM"},"(0072,0714)":{tag:"(0072,0714)",vr:"CS",name:"ShowPatientDemographicsFlag",vm:"1",version:"DICOM"},"(0072,0716)":{tag:"(0072,0716)",vr:"CS",name:"ShowAcquisitionTechniquesFlag",vm:"1",version:"DICOM"},"(0072,0717)":{tag:"(0072,0717)",vr:"CS",name:"DisplaySetHorizontalJustification",vm:"1",version:"DICOM"},"(0072,0718)":{tag:"(0072,0718)",vr:"CS",name:"DisplaySetVerticalJustification",vm:"1",version:"DICOM"},"(0074,0120)":{tag:"(0074,0120)",vr:"FD",name:"ContinuationStartMeterset",vm:"1",version:"DICOM"},"(0074,0121)":{tag:"(0074,0121)",vr:"FD",name:"ContinuationEndMeterset",vm:"1",version:"DICOM"},"(0074,1000)":{tag:"(0074,1000)",vr:"CS",name:"ProcedureStepState",vm:"1",version:"DICOM"},"(0074,1002)":{tag:"(0074,1002)",vr:"SQ",name:"ProcedureStepProgressInformationSequence",vm:"1",version:"DICOM"},"(0074,1004)":{tag:"(0074,1004)",vr:"DS",name:"ProcedureStepProgress",vm:"1",version:"DICOM"},"(0074,1006)":{tag:"(0074,1006)",vr:"ST",name:"ProcedureStepProgressDescription",vm:"1",version:"DICOM"},"(0074,1007)":{tag:"(0074,1007)",vr:"SQ",name:"ProcedureStepProgressParametersSequence",vm:"1",version:"DICOM"},"(0074,1008)":{tag:"(0074,1008)",vr:"SQ",name:"ProcedureStepCommunicationsURISequence",vm:"1",version:"DICOM"},"(0074,100A)":{tag:"(0074,100A)",vr:"UR",name:"ContactURI",vm:"1",version:"DICOM"},"(0074,100C)":{tag:"(0074,100C)",vr:"LO",name:"ContactDisplayName",vm:"1",version:"DICOM"},"(0074,100E)":{tag:"(0074,100E)",vr:"SQ",name:"ProcedureStepDiscontinuationReasonCodeSequence",vm:"1",version:"DICOM"},"(0074,1020)":{tag:"(0074,1020)",vr:"SQ",name:"BeamTaskSequence",vm:"1",version:"DICOM"},"(0074,1022)":{tag:"(0074,1022)",vr:"CS",name:"BeamTaskType",vm:"1",version:"DICOM"},"(0074,1025)":{tag:"(0074,1025)",vr:"CS",name:"AutosequenceFlag",vm:"1",version:"DICOM"},"(0074,1026)":{tag:"(0074,1026)",vr:"FD",name:"TableTopVerticalAdjustedPosition",vm:"1",version:"DICOM"},"(0074,1027)":{tag:"(0074,1027)",vr:"FD",name:"TableTopLongitudinalAdjustedPosition",vm:"1",version:"DICOM"},"(0074,1028)":{tag:"(0074,1028)",vr:"FD",name:"TableTopLateralAdjustedPosition",vm:"1",version:"DICOM"},"(0074,102A)":{tag:"(0074,102A)",vr:"FD",name:"PatientSupportAdjustedAngle",vm:"1",version:"DICOM"},"(0074,102B)":{tag:"(0074,102B)",vr:"FD",name:"TableTopEccentricAdjustedAngle",vm:"1",version:"DICOM"},"(0074,102C)":{tag:"(0074,102C)",vr:"FD",name:"TableTopPitchAdjustedAngle",vm:"1",version:"DICOM"},"(0074,102D)":{tag:"(0074,102D)",vr:"FD",name:"TableTopRollAdjustedAngle",vm:"1",version:"DICOM"},"(0074,1030)":{tag:"(0074,1030)",vr:"SQ",name:"DeliveryVerificationImageSequence",vm:"1",version:"DICOM"},"(0074,1032)":{tag:"(0074,1032)",vr:"CS",name:"VerificationImageTiming",vm:"1",version:"DICOM"},"(0074,1034)":{tag:"(0074,1034)",vr:"CS",name:"DoubleExposureFlag",vm:"1",version:"DICOM"},"(0074,1036)":{tag:"(0074,1036)",vr:"CS",name:"DoubleExposureOrdering",vm:"1",version:"DICOM"},"(0074,1040)":{tag:"(0074,1040)",vr:"SQ",name:"RelatedReferenceRTImageSequence",vm:"1",version:"DICOM"},"(0074,1042)":{tag:"(0074,1042)",vr:"SQ",name:"GeneralMachineVerificationSequence",vm:"1",version:"DICOM"},"(0074,1044)":{tag:"(0074,1044)",vr:"SQ",name:"ConventionalMachineVerificationSequence",vm:"1",version:"DICOM"},"(0074,1046)":{tag:"(0074,1046)",vr:"SQ",name:"IonMachineVerificationSequence",vm:"1",version:"DICOM"},"(0074,1048)":{tag:"(0074,1048)",vr:"SQ",name:"FailedAttributesSequence",vm:"1",version:"DICOM"},"(0074,104A)":{tag:"(0074,104A)",vr:"SQ",name:"OverriddenAttributesSequence",vm:"1",version:"DICOM"},"(0074,104C)":{tag:"(0074,104C)",vr:"SQ",name:"ConventionalControlPointVerificationSequence",vm:"1",version:"DICOM"},"(0074,104E)":{tag:"(0074,104E)",vr:"SQ",name:"IonControlPointVerificationSequence",vm:"1",version:"DICOM"},"(0074,1050)":{tag:"(0074,1050)",vr:"SQ",name:"AttributeOccurrenceSequence",vm:"1",version:"DICOM"},"(0074,1052)":{tag:"(0074,1052)",vr:"AT",name:"AttributeOccurrencePointer",vm:"1",version:"DICOM"},"(0074,1054)":{tag:"(0074,1054)",vr:"UL",name:"AttributeItemSelector",vm:"1",version:"DICOM"},"(0074,1056)":{tag:"(0074,1056)",vr:"LO",name:"AttributeOccurrencePrivateCreator",vm:"1",version:"DICOM"},"(0074,1057)":{tag:"(0074,1057)",vr:"IS",name:"SelectorSequencePointerItems",vm:"1-n",version:"DICOM"},"(0074,1200)":{tag:"(0074,1200)",vr:"CS",name:"ScheduledProcedureStepPriority",vm:"1",version:"DICOM"},"(0074,1202)":{tag:"(0074,1202)",vr:"LO",name:"WorklistLabel",vm:"1",version:"DICOM"},"(0074,1204)":{tag:"(0074,1204)",vr:"LO",name:"ProcedureStepLabel",vm:"1",version:"DICOM"},"(0074,1210)":{tag:"(0074,1210)",vr:"SQ",name:"ScheduledProcessingParametersSequence",vm:"1",version:"DICOM"},"(0074,1212)":{tag:"(0074,1212)",vr:"SQ",name:"PerformedProcessingParametersSequence",vm:"1",version:"DICOM"},"(0074,1216)":{tag:"(0074,1216)",vr:"SQ",name:"UnifiedProcedureStepPerformedProcedureSequence",vm:"1",version:"DICOM"},"(0074,1224)":{tag:"(0074,1224)",vr:"SQ",name:"ReplacedProcedureStepSequence",vm:"1",version:"DICOM"},"(0074,1230)":{tag:"(0074,1230)",vr:"LO",name:"DeletionLock",vm:"1",version:"DICOM"},"(0074,1234)":{tag:"(0074,1234)",vr:"AE",name:"ReceivingAE",vm:"1",version:"DICOM"},"(0074,1236)":{tag:"(0074,1236)",vr:"AE",name:"RequestingAE",vm:"1",version:"DICOM"},"(0074,1238)":{tag:"(0074,1238)",vr:"LT",name:"ReasonForCancellation",vm:"1",version:"DICOM"},"(0074,1242)":{tag:"(0074,1242)",vr:"CS",name:"SCPStatus",vm:"1",version:"DICOM"},"(0074,1244)":{tag:"(0074,1244)",vr:"CS",name:"SubscriptionListStatus",vm:"1",version:"DICOM"},"(0074,1246)":{tag:"(0074,1246)",vr:"CS",name:"UnifiedProcedureStepListStatus",vm:"1",version:"DICOM"},"(0074,1324)":{tag:"(0074,1324)",vr:"UL",name:"BeamOrderIndex",vm:"1",version:"DICOM"},"(0074,1338)":{tag:"(0074,1338)",vr:"FD",name:"DoubleExposureMeterset",vm:"1",version:"DICOM"},"(0074,133A)":{tag:"(0074,133A)",vr:"FD",name:"DoubleExposureFieldDelta",vm:"4",version:"DICOM"},"(0074,1401)":{tag:"(0074,1401)",vr:"SQ",name:"BrachyTaskSequence",vm:"1",version:"DICOM"},"(0074,1402)":{tag:"(0074,1402)",vr:"DS",name:"ContinuationStartTotalReferenceAirKerma",vm:"1",version:"DICOM"},"(0074,1403)":{tag:"(0074,1403)",vr:"DS",name:"ContinuationEndTotalReferenceAirKerma",vm:"1",version:"DICOM"},"(0074,1404)":{tag:"(0074,1404)",vr:"IS",name:"ContinuationPulseNumber",vm:"1",version:"DICOM"},"(0074,1405)":{tag:"(0074,1405)",vr:"SQ",name:"ChannelDeliveryOrderSequence",vm:"1",version:"DICOM"},"(0074,1406)":{tag:"(0074,1406)",vr:"IS",name:"ReferencedChannelNumber",vm:"1",version:"DICOM"},"(0074,1407)":{tag:"(0074,1407)",vr:"DS",name:"StartCumulativeTimeWeight",vm:"1",version:"DICOM"},"(0074,1408)":{tag:"(0074,1408)",vr:"DS",name:"EndCumulativeTimeWeight",vm:"1",version:"DICOM"},"(0074,1409)":{tag:"(0074,1409)",vr:"SQ",name:"OmittedChannelSequence",vm:"1",version:"DICOM"},"(0074,140A)":{tag:"(0074,140A)",vr:"CS",name:"ReasonForChannelOmission",vm:"1",version:"DICOM"},"(0074,140B)":{tag:"(0074,140B)",vr:"LO",name:"ReasonForChannelOmissionDescription",vm:"1",version:"DICOM"},"(0074,140C)":{tag:"(0074,140C)",vr:"IS",name:"ChannelDeliveryOrderIndex",vm:"1",version:"DICOM"},"(0074,140D)":{tag:"(0074,140D)",vr:"SQ",name:"ChannelDeliveryContinuationSequence",vm:"1",version:"DICOM"},"(0074,140E)":{tag:"(0074,140E)",vr:"SQ",name:"OmittedApplicationSetupSequence",vm:"1",version:"DICOM"},"(0076,0001)":{tag:"(0076,0001)",vr:"LO",name:"ImplantAssemblyTemplateName",vm:"1",version:"DICOM"},"(0076,0003)":{tag:"(0076,0003)",vr:"LO",name:"ImplantAssemblyTemplateIssuer",vm:"1",version:"DICOM"},"(0076,0006)":{tag:"(0076,0006)",vr:"LO",name:"ImplantAssemblyTemplateVersion",vm:"1",version:"DICOM"},"(0076,0008)":{tag:"(0076,0008)",vr:"SQ",name:"ReplacedImplantAssemblyTemplateSequence",vm:"1",version:"DICOM"},"(0076,000A)":{tag:"(0076,000A)",vr:"CS",name:"ImplantAssemblyTemplateType",vm:"1",version:"DICOM"},"(0076,000C)":{tag:"(0076,000C)",vr:"SQ",name:"OriginalImplantAssemblyTemplateSequence",vm:"1",version:"DICOM"},"(0076,000E)":{tag:"(0076,000E)",vr:"SQ",name:"DerivationImplantAssemblyTemplateSequence",vm:"1",version:"DICOM"},"(0076,0010)":{tag:"(0076,0010)",vr:"SQ",name:"ImplantAssemblyTemplateTargetAnatomySequence",vm:"1",version:"DICOM"},"(0076,0020)":{tag:"(0076,0020)",vr:"SQ",name:"ProcedureTypeCodeSequence",vm:"1",version:"DICOM"},"(0076,0030)":{tag:"(0076,0030)",vr:"LO",name:"SurgicalTechnique",vm:"1",version:"DICOM"},"(0076,0032)":{tag:"(0076,0032)",vr:"SQ",name:"ComponentTypesSequence",vm:"1",version:"DICOM"},"(0076,0034)":{tag:"(0076,0034)",vr:"CS",name:"ComponentTypeCodeSequence",vm:"1",version:"DICOM"},"(0076,0036)":{tag:"(0076,0036)",vr:"CS",name:"ExclusiveComponentType",vm:"1",version:"DICOM"},"(0076,0038)":{tag:"(0076,0038)",vr:"CS",name:"MandatoryComponentType",vm:"1",version:"DICOM"},"(0076,0040)":{tag:"(0076,0040)",vr:"SQ",name:"ComponentSequence",vm:"1",version:"DICOM"},"(0076,0055)":{tag:"(0076,0055)",vr:"US",name:"ComponentID",vm:"1",version:"DICOM"},"(0076,0060)":{tag:"(0076,0060)",vr:"SQ",name:"ComponentAssemblySequence",vm:"1",version:"DICOM"},"(0076,0070)":{tag:"(0076,0070)",vr:"US",name:"Component1ReferencedID",vm:"1",version:"DICOM"},"(0076,0080)":{tag:"(0076,0080)",vr:"US",name:"Component1ReferencedMatingFeatureSetID",vm:"1",version:"DICOM"},"(0076,0090)":{tag:"(0076,0090)",vr:"US",name:"Component1ReferencedMatingFeatureID",vm:"1",version:"DICOM"},"(0076,00A0)":{tag:"(0076,00A0)",vr:"US",name:"Component2ReferencedID",vm:"1",version:"DICOM"},"(0076,00B0)":{tag:"(0076,00B0)",vr:"US",name:"Component2ReferencedMatingFeatureSetID",vm:"1",version:"DICOM"},"(0076,00C0)":{tag:"(0076,00C0)",vr:"US",name:"Component2ReferencedMatingFeatureID",vm:"1",version:"DICOM"},"(0078,0001)":{tag:"(0078,0001)",vr:"LO",name:"ImplantTemplateGroupName",vm:"1",version:"DICOM"},"(0078,0010)":{tag:"(0078,0010)",vr:"ST",name:"ImplantTemplateGroupDescription",vm:"1",version:"DICOM"},"(0078,0020)":{tag:"(0078,0020)",vr:"LO",name:"ImplantTemplateGroupIssuer",vm:"1",version:"DICOM"},"(0078,0024)":{tag:"(0078,0024)",vr:"LO",name:"ImplantTemplateGroupVersion",vm:"1",version:"DICOM"},"(0078,0026)":{tag:"(0078,0026)",vr:"SQ",name:"ReplacedImplantTemplateGroupSequence",vm:"1",version:"DICOM"},"(0078,0028)":{tag:"(0078,0028)",vr:"SQ",name:"ImplantTemplateGroupTargetAnatomySequence",vm:"1",version:"DICOM"},"(0078,002A)":{tag:"(0078,002A)",vr:"SQ",name:"ImplantTemplateGroupMembersSequence",vm:"1",version:"DICOM"},"(0078,002E)":{tag:"(0078,002E)",vr:"US",name:"ImplantTemplateGroupMemberID",vm:"1",version:"DICOM"},"(0078,0050)":{tag:"(0078,0050)",vr:"FD",name:"ThreeDImplantTemplateGroupMemberMatchingPoint",vm:"3",version:"DICOM"},"(0078,0060)":{tag:"(0078,0060)",vr:"FD",name:"ThreeDImplantTemplateGroupMemberMatchingAxes",vm:"9",version:"DICOM"},"(0078,0070)":{tag:"(0078,0070)",vr:"SQ",name:"ImplantTemplateGroupMemberMatching2DCoordinatesSequence",vm:"1",version:"DICOM"},"(0078,0090)":{tag:"(0078,0090)",vr:"FD",name:"TwoDImplantTemplateGroupMemberMatchingPoint",vm:"2",version:"DICOM"},"(0078,00A0)":{tag:"(0078,00A0)",vr:"FD",name:"TwoDImplantTemplateGroupMemberMatchingAxes",vm:"4",version:"DICOM"},"(0078,00B0)":{tag:"(0078,00B0)",vr:"SQ",name:"ImplantTemplateGroupVariationDimensionSequence",vm:"1",version:"DICOM"},"(0078,00B2)":{tag:"(0078,00B2)",vr:"LO",name:"ImplantTemplateGroupVariationDimensionName",vm:"1",version:"DICOM"},"(0078,00B4)":{tag:"(0078,00B4)",vr:"SQ",name:"ImplantTemplateGroupVariationDimensionRankSequence",vm:"1",version:"DICOM"},"(0078,00B6)":{tag:"(0078,00B6)",vr:"US",name:"ReferencedImplantTemplateGroupMemberID",vm:"1",version:"DICOM"},"(0078,00B8)":{tag:"(0078,00B8)",vr:"US",name:"ImplantTemplateGroupVariationDimensionRank",vm:"1",version:"DICOM"},"(0080,0001)":{tag:"(0080,0001)",vr:"SQ",name:"SurfaceScanAcquisitionTypeCodeSequence",vm:"1",version:"DICOM"},"(0080,0002)":{tag:"(0080,0002)",vr:"SQ",name:"SurfaceScanModeCodeSequence",vm:"1",version:"DICOM"},"(0080,0003)":{tag:"(0080,0003)",vr:"SQ",name:"RegistrationMethodCodeSequence",vm:"1",version:"DICOM"},"(0080,0004)":{tag:"(0080,0004)",vr:"FD",name:"ShotDurationTime",vm:"1",version:"DICOM"},"(0080,0005)":{tag:"(0080,0005)",vr:"FD",name:"ShotOffsetTime",vm:"1",version:"DICOM"},"(0080,0006)":{tag:"(0080,0006)",vr:"US",name:"SurfacePointPresentationValueData",vm:"1-n",version:"DICOM"},"(0080,0007)":{tag:"(0080,0007)",vr:"US",name:"SurfacePointColorCIELabValueData",vm:"3-3n",version:"DICOM"},"(0080,0008)":{tag:"(0080,0008)",vr:"SQ",name:"UVMappingSequence",vm:"1",version:"DICOM"},"(0080,0009)":{tag:"(0080,0009)",vr:"SH",name:"TextureLabel",vm:"1",version:"DICOM"},"(0080,0010)":{tag:"(0080,0010)",vr:"OF",name:"UValueData",vm:"1-n",version:"DICOM"},"(0080,0011)":{tag:"(0080,0011)",vr:"OF",name:"VValueData",vm:"1-n",version:"DICOM"},"(0080,0012)":{tag:"(0080,0012)",vr:"SQ",name:"ReferencedTextureSequence",vm:"1",version:"DICOM"},"(0080,0013)":{tag:"(0080,0013)",vr:"SQ",name:"ReferencedSurfaceDataSequence",vm:"1",version:"DICOM"},"(0082,0001)":{tag:"(0082,0001)",vr:"CS",name:"AssessmentSummary",vm:"1",version:"DICOM"},"(0082,0003)":{tag:"(0082,0003)",vr:"UT",name:"AssessmentSummaryDescription",vm:"1",version:"DICOM"},"(0082,0004)":{tag:"(0082,0004)",vr:"SQ",name:"AssessedSOPInstanceSequence",vm:"1",version:"DICOM"},"(0082,0005)":{tag:"(0082,0005)",vr:"SQ",name:"ReferencedComparisonSOPInstanceSequence",vm:"1",version:"DICOM"},"(0082,0006)":{tag:"(0082,0006)",vr:"UL",name:"NumberOfAssessmentObservations",vm:"1",version:"DICOM"},"(0082,0007)":{tag:"(0082,0007)",vr:"SQ",name:"AssessmentObservationsSequence",vm:"1",version:"DICOM"},"(0082,0008)":{tag:"(0082,0008)",vr:"CS",name:"ObservationSignificance",vm:"1",version:"DICOM"},"(0082,000A)":{tag:"(0082,000A)",vr:"UT",name:"ObservationDescription",vm:"1",version:"DICOM"},"(0082,000C)":{tag:"(0082,000C)",vr:"SQ",name:"StructuredConstraintObservationSequence",vm:"1",version:"DICOM"},"(0082,0010)":{tag:"(0082,0010)",vr:"SQ",name:"AssessedAttributeValueSequence",vm:"1",version:"DICOM"},"(0082,0016)":{tag:"(0082,0016)",vr:"LO",name:"AssessmentSetID",vm:"1",version:"DICOM"},"(0082,0017)":{tag:"(0082,0017)",vr:"SQ",name:"AssessmentRequesterSequence",vm:"1",version:"DICOM"},"(0082,0018)":{tag:"(0082,0018)",vr:"LO",name:"SelectorAttributeName",vm:"1",version:"DICOM"},"(0082,0019)":{tag:"(0082,0019)",vr:"LO",name:"SelectorAttributeKeyword",vm:"1",version:"DICOM"},"(0082,0021)":{tag:"(0082,0021)",vr:"SQ",name:"AssessmentTypeCodeSequence",vm:"1",version:"DICOM"},"(0082,0022)":{tag:"(0082,0022)",vr:"SQ",name:"ObservationBasisCodeSequence",vm:"1",version:"DICOM"},"(0082,0023)":{tag:"(0082,0023)",vr:"LO",name:"AssessmentLabel",vm:"1",version:"DICOM"},"(0082,0032)":{tag:"(0082,0032)",vr:"CS",name:"ConstraintType",vm:"1",version:"DICOM"},"(0082,0033)":{tag:"(0082,0033)",vr:"UT",name:"SpecificationSelectionGuidance",vm:"1",version:"DICOM"},"(0082,0034)":{tag:"(0082,0034)",vr:"SQ",name:"ConstraintValueSequence",vm:"1",version:"DICOM"},"(0082,0035)":{tag:"(0082,0035)",vr:"SQ",name:"RecommendedDefaultValueSequence",vm:"1",version:"DICOM"},"(0082,0036)":{tag:"(0082,0036)",vr:"CS",name:"ConstraintViolationSignificance",vm:"1",version:"DICOM"},"(0082,0037)":{tag:"(0082,0037)",vr:"UT",name:"ConstraintViolationCondition",vm:"1",version:"DICOM"},"(0082,0038)":{tag:"(0082,0038)",vr:"CS",name:"ModifiableConstraintFlag",vm:"1",version:"DICOM"},"(0088,0130)":{tag:"(0088,0130)",vr:"SH",name:"StorageMediaFileSetID",vm:"1",version:"DICOM"},"(0088,0140)":{tag:"(0088,0140)",vr:"UI",name:"StorageMediaFileSetUID",vm:"1",version:"DICOM"},"(0088,0200)":{tag:"(0088,0200)",vr:"SQ",name:"IconImageSequence",vm:"1",version:"DICOM"},"(0100,0410)":{tag:"(0100,0410)",vr:"CS",name:"SOPInstanceStatus",vm:"1",version:"DICOM"},"(0100,0420)":{tag:"(0100,0420)",vr:"DT",name:"SOPAuthorizationDateTime",vm:"1",version:"DICOM"},"(0100,0424)":{tag:"(0100,0424)",vr:"LT",name:"SOPAuthorizationComment",vm:"1",version:"DICOM"},"(0100,0426)":{tag:"(0100,0426)",vr:"LO",name:"AuthorizationEquipmentCertificationNumber",vm:"1",version:"DICOM"},"(0400,0005)":{tag:"(0400,0005)",vr:"US",name:"MACIDNumber",vm:"1",version:"DICOM"},"(0400,0010)":{tag:"(0400,0010)",vr:"UI",name:"MACCalculationTransferSyntaxUID",vm:"1",version:"DICOM"},"(0400,0015)":{tag:"(0400,0015)",vr:"CS",name:"MACAlgorithm",vm:"1",version:"DICOM"},"(0400,0020)":{tag:"(0400,0020)",vr:"AT",name:"DataElementsSigned",vm:"1-n",version:"DICOM"},"(0400,0100)":{tag:"(0400,0100)",vr:"UI",name:"DigitalSignatureUID",vm:"1",version:"DICOM"},"(0400,0105)":{tag:"(0400,0105)",vr:"DT",name:"DigitalSignatureDateTime",vm:"1",version:"DICOM"},"(0400,0110)":{tag:"(0400,0110)",vr:"CS",name:"CertificateType",vm:"1",version:"DICOM"},"(0400,0115)":{tag:"(0400,0115)",vr:"OB",name:"CertificateOfSigner",vm:"1",version:"DICOM"},"(0400,0120)":{tag:"(0400,0120)",vr:"OB",name:"Signature",vm:"1",version:"DICOM"},"(0400,0305)":{tag:"(0400,0305)",vr:"CS",name:"CertifiedTimestampType",vm:"1",version:"DICOM"},"(0400,0310)":{tag:"(0400,0310)",vr:"OB",name:"CertifiedTimestamp",vm:"1",version:"DICOM"},"(0400,0401)":{tag:"(0400,0401)",vr:"SQ",name:"DigitalSignaturePurposeCodeSequence",vm:"1",version:"DICOM"},"(0400,0402)":{tag:"(0400,0402)",vr:"SQ",name:"ReferencedDigitalSignatureSequence",vm:"1",version:"DICOM"},"(0400,0403)":{tag:"(0400,0403)",vr:"SQ",name:"ReferencedSOPInstanceMACSequence",vm:"1",version:"DICOM"},"(0400,0404)":{tag:"(0400,0404)",vr:"OB",name:"MAC",vm:"1",version:"DICOM"},"(0400,0500)":{tag:"(0400,0500)",vr:"SQ",name:"EncryptedAttributesSequence",vm:"1",version:"DICOM"},"(0400,0510)":{tag:"(0400,0510)",vr:"UI",name:"EncryptedContentTransferSyntaxUID",vm:"1",version:"DICOM"},"(0400,0520)":{tag:"(0400,0520)",vr:"OB",name:"EncryptedContent",vm:"1",version:"DICOM"},"(0400,0550)":{tag:"(0400,0550)",vr:"SQ",name:"ModifiedAttributesSequence",vm:"1",version:"DICOM"},"(0400,0551)":{tag:"(0400,0551)",vr:"SQ",name:"NonconformingModifiedAttributesSequence",vm:"1",version:"DICOM"},"(0400,0552)":{tag:"(0400,0552)",vr:"OB",name:"NonconformingDataElementValue",vm:"1",version:"DICOM"},"(0400,0561)":{tag:"(0400,0561)",vr:"SQ",name:"OriginalAttributesSequence",vm:"1",version:"DICOM"},"(0400,0562)":{tag:"(0400,0562)",vr:"DT",name:"AttributeModificationDateTime",vm:"1",version:"DICOM"},"(0400,0563)":{tag:"(0400,0563)",vr:"LO",name:"ModifyingSystem",vm:"1",version:"DICOM"},"(0400,0564)":{tag:"(0400,0564)",vr:"LO",name:"SourceOfPreviousValues",vm:"1",version:"DICOM"},"(0400,0565)":{tag:"(0400,0565)",vr:"CS",name:"ReasonForTheAttributeModification",vm:"1",version:"DICOM"},"(0400,0600)":{tag:"(0400,0600)",vr:"CS",name:"InstanceOriginStatus",vm:"1",version:"DICOM"},"(2000,0010)":{tag:"(2000,0010)",vr:"IS",name:"NumberOfCopies",vm:"1",version:"DICOM"},"(2000,001E)":{tag:"(2000,001E)",vr:"SQ",name:"PrinterConfigurationSequence",vm:"1",version:"DICOM"},"(2000,0020)":{tag:"(2000,0020)",vr:"CS",name:"PrintPriority",vm:"1",version:"DICOM"},"(2000,0030)":{tag:"(2000,0030)",vr:"CS",name:"MediumType",vm:"1",version:"DICOM"},"(2000,0040)":{tag:"(2000,0040)",vr:"CS",name:"FilmDestination",vm:"1",version:"DICOM"},"(2000,0050)":{tag:"(2000,0050)",vr:"LO",name:"FilmSessionLabel",vm:"1",version:"DICOM"},"(2000,0060)":{tag:"(2000,0060)",vr:"IS",name:"MemoryAllocation",vm:"1",version:"DICOM"},"(2000,0061)":{tag:"(2000,0061)",vr:"IS",name:"MaximumMemoryAllocation",vm:"1",version:"DICOM"},"(2000,00A0)":{tag:"(2000,00A0)",vr:"US",name:"MemoryBitDepth",vm:"1",version:"DICOM"},"(2000,00A1)":{tag:"(2000,00A1)",vr:"US",name:"PrintingBitDepth",vm:"1",version:"DICOM"},"(2000,00A2)":{tag:"(2000,00A2)",vr:"SQ",name:"MediaInstalledSequence",vm:"1",version:"DICOM"},"(2000,00A4)":{tag:"(2000,00A4)",vr:"SQ",name:"OtherMediaAvailableSequence",vm:"1",version:"DICOM"},"(2000,00A8)":{tag:"(2000,00A8)",vr:"SQ",name:"SupportedImageDisplayFormatsSequence",vm:"1",version:"DICOM"},"(2000,0500)":{tag:"(2000,0500)",vr:"SQ",name:"ReferencedFilmBoxSequence",vm:"1",version:"DICOM"},"(2010,0010)":{tag:"(2010,0010)",vr:"ST",name:"ImageDisplayFormat",vm:"1",version:"DICOM"},"(2010,0030)":{tag:"(2010,0030)",vr:"CS",name:"AnnotationDisplayFormatID",vm:"1",version:"DICOM"},"(2010,0040)":{tag:"(2010,0040)",vr:"CS",name:"FilmOrientation",vm:"1",version:"DICOM"},"(2010,0050)":{tag:"(2010,0050)",vr:"CS",name:"FilmSizeID",vm:"1",version:"DICOM"},"(2010,0052)":{tag:"(2010,0052)",vr:"CS",name:"PrinterResolutionID",vm:"1",version:"DICOM"},"(2010,0054)":{tag:"(2010,0054)",vr:"CS",name:"DefaultPrinterResolutionID",vm:"1",version:"DICOM"},"(2010,0060)":{tag:"(2010,0060)",vr:"CS",name:"MagnificationType",vm:"1",version:"DICOM"},"(2010,0080)":{tag:"(2010,0080)",vr:"CS",name:"SmoothingType",vm:"1",version:"DICOM"},"(2010,00A6)":{tag:"(2010,00A6)",vr:"CS",name:"DefaultMagnificationType",vm:"1",version:"DICOM"},"(2010,00A7)":{tag:"(2010,00A7)",vr:"CS",name:"OtherMagnificationTypesAvailable",vm:"1-n",version:"DICOM"},"(2010,00A8)":{tag:"(2010,00A8)",vr:"CS",name:"DefaultSmoothingType",vm:"1",version:"DICOM"},"(2010,00A9)":{tag:"(2010,00A9)",vr:"CS",name:"OtherSmoothingTypesAvailable",vm:"1-n",version:"DICOM"},"(2010,0100)":{tag:"(2010,0100)",vr:"CS",name:"BorderDensity",vm:"1",version:"DICOM"},"(2010,0110)":{tag:"(2010,0110)",vr:"CS",name:"EmptyImageDensity",vm:"1",version:"DICOM"},"(2010,0120)":{tag:"(2010,0120)",vr:"US",name:"MinDensity",vm:"1",version:"DICOM"},"(2010,0130)":{tag:"(2010,0130)",vr:"US",name:"MaxDensity",vm:"1",version:"DICOM"},"(2010,0140)":{tag:"(2010,0140)",vr:"CS",name:"Trim",vm:"1",version:"DICOM"},"(2010,0150)":{tag:"(2010,0150)",vr:"ST",name:"ConfigurationInformation",vm:"1",version:"DICOM"},"(2010,0152)":{tag:"(2010,0152)",vr:"LT",name:"ConfigurationInformationDescription",vm:"1",version:"DICOM"},"(2010,0154)":{tag:"(2010,0154)",vr:"IS",name:"MaximumCollatedFilms",vm:"1",version:"DICOM"},"(2010,015E)":{tag:"(2010,015E)",vr:"US",name:"Illumination",vm:"1",version:"DICOM"},"(2010,0160)":{tag:"(2010,0160)",vr:"US",name:"ReflectedAmbientLight",vm:"1",version:"DICOM"},"(2010,0376)":{tag:"(2010,0376)",vr:"DS",name:"PrinterPixelSpacing",vm:"2",version:"DICOM"},"(2010,0500)":{tag:"(2010,0500)",vr:"SQ",name:"ReferencedFilmSessionSequence",vm:"1",version:"DICOM"},"(2010,0510)":{tag:"(2010,0510)",vr:"SQ",name:"ReferencedImageBoxSequence",vm:"1",version:"DICOM"},"(2010,0520)":{tag:"(2010,0520)",vr:"SQ",name:"ReferencedBasicAnnotationBoxSequence",vm:"1",version:"DICOM"},"(2020,0010)":{tag:"(2020,0010)",vr:"US",name:"ImageBoxPosition",vm:"1",version:"DICOM"},"(2020,0020)":{tag:"(2020,0020)",vr:"CS",name:"Polarity",vm:"1",version:"DICOM"},"(2020,0030)":{tag:"(2020,0030)",vr:"DS",name:"RequestedImageSize",vm:"1",version:"DICOM"},"(2020,0040)":{tag:"(2020,0040)",vr:"CS",name:"RequestedDecimateCropBehavior",vm:"1",version:"DICOM"},"(2020,0050)":{tag:"(2020,0050)",vr:"CS",name:"RequestedResolutionID",vm:"1",version:"DICOM"},"(2020,00A0)":{tag:"(2020,00A0)",vr:"CS",name:"RequestedImageSizeFlag",vm:"1",version:"DICOM"},"(2020,00A2)":{tag:"(2020,00A2)",vr:"CS",name:"DecimateCropResult",vm:"1",version:"DICOM"},"(2020,0110)":{tag:"(2020,0110)",vr:"SQ",name:"BasicGrayscaleImageSequence",vm:"1",version:"DICOM"},"(2020,0111)":{tag:"(2020,0111)",vr:"SQ",name:"BasicColorImageSequence",vm:"1",version:"DICOM"},"(2030,0010)":{tag:"(2030,0010)",vr:"US",name:"AnnotationPosition",vm:"1",version:"DICOM"},"(2030,0020)":{tag:"(2030,0020)",vr:"LO",name:"TextString",vm:"1",version:"DICOM"},"(2050,0010)":{tag:"(2050,0010)",vr:"SQ",name:"PresentationLUTSequence",vm:"1",version:"DICOM"},"(2050,0020)":{tag:"(2050,0020)",vr:"CS",name:"PresentationLUTShape",vm:"1",version:"DICOM"},"(2050,0500)":{tag:"(2050,0500)",vr:"SQ",name:"ReferencedPresentationLUTSequence",vm:"1",version:"DICOM"},"(2100,0020)":{tag:"(2100,0020)",vr:"CS",name:"ExecutionStatus",vm:"1",version:"DICOM"},"(2100,0030)":{tag:"(2100,0030)",vr:"CS",name:"ExecutionStatusInfo",vm:"1",version:"DICOM"},"(2100,0040)":{tag:"(2100,0040)",vr:"DA",name:"CreationDate",vm:"1",version:"DICOM"},"(2100,0050)":{tag:"(2100,0050)",vr:"TM",name:"CreationTime",vm:"1",version:"DICOM"},"(2100,0070)":{tag:"(2100,0070)",vr:"AE",name:"Originator",vm:"1",version:"DICOM"},"(2100,0160)":{tag:"(2100,0160)",vr:"SH",name:"OwnerID",vm:"1",version:"DICOM"},"(2100,0170)":{tag:"(2100,0170)",vr:"IS",name:"NumberOfFilms",vm:"1",version:"DICOM"},"(2110,0010)":{tag:"(2110,0010)",vr:"CS",name:"PrinterStatus",vm:"1",version:"DICOM"},"(2110,0020)":{tag:"(2110,0020)",vr:"CS",name:"PrinterStatusInfo",vm:"1",version:"DICOM"},"(2110,0030)":{tag:"(2110,0030)",vr:"LO",name:"PrinterName",vm:"1",version:"DICOM"},"(2200,0001)":{tag:"(2200,0001)",vr:"CS",name:"LabelUsingInformationExtractedFromInstances",vm:"1",version:"DICOM"},"(2200,0002)":{tag:"(2200,0002)",vr:"UT",name:"LabelText",vm:"1",version:"DICOM"},"(2200,0003)":{tag:"(2200,0003)",vr:"CS",name:"LabelStyleSelection",vm:"1",version:"DICOM"},"(2200,0004)":{tag:"(2200,0004)",vr:"LT",name:"MediaDisposition",vm:"1",version:"DICOM"},"(2200,0005)":{tag:"(2200,0005)",vr:"LT",name:"BarcodeValue",vm:"1",version:"DICOM"},"(2200,0006)":{tag:"(2200,0006)",vr:"CS",name:"BarcodeSymbology",vm:"1",version:"DICOM"},"(2200,0007)":{tag:"(2200,0007)",vr:"CS",name:"AllowMediaSplitting",vm:"1",version:"DICOM"},"(2200,0008)":{tag:"(2200,0008)",vr:"CS",name:"IncludeNonDICOMObjects",vm:"1",version:"DICOM"},"(2200,0009)":{tag:"(2200,0009)",vr:"CS",name:"IncludeDisplayApplication",vm:"1",version:"DICOM"},"(2200,000A)":{tag:"(2200,000A)",vr:"CS",name:"PreserveCompositeInstancesAfterMediaCreation",vm:"1",version:"DICOM"},"(2200,000B)":{tag:"(2200,000B)",vr:"US",name:"TotalNumberOfPiecesOfMediaCreated",vm:"1",version:"DICOM"},"(2200,000C)":{tag:"(2200,000C)",vr:"LO",name:"RequestedMediaApplicationProfile",vm:"1",version:"DICOM"},"(2200,000D)":{tag:"(2200,000D)",vr:"SQ",name:"ReferencedStorageMediaSequence",vm:"1",version:"DICOM"},"(2200,000E)":{tag:"(2200,000E)",vr:"AT",name:"FailureAttributes",vm:"1-n",version:"DICOM"},"(2200,000F)":{tag:"(2200,000F)",vr:"CS",name:"AllowLossyCompression",vm:"1",version:"DICOM"},"(2200,0020)":{tag:"(2200,0020)",vr:"CS",name:"RequestPriority",vm:"1",version:"DICOM"},"(3002,0002)":{tag:"(3002,0002)",vr:"SH",name:"RTImageLabel",vm:"1",version:"DICOM"},"(3002,0003)":{tag:"(3002,0003)",vr:"LO",name:"RTImageName",vm:"1",version:"DICOM"},"(3002,0004)":{tag:"(3002,0004)",vr:"ST",name:"RTImageDescription",vm:"1",version:"DICOM"},"(3002,000A)":{tag:"(3002,000A)",vr:"CS",name:"ReportedValuesOrigin",vm:"1",version:"DICOM"},"(3002,000C)":{tag:"(3002,000C)",vr:"CS",name:"RTImagePlane",vm:"1",version:"DICOM"},"(3002,000D)":{tag:"(3002,000D)",vr:"DS",name:"XRayImageReceptorTranslation",vm:"3",version:"DICOM"},"(3002,000E)":{tag:"(3002,000E)",vr:"DS",name:"XRayImageReceptorAngle",vm:"1",version:"DICOM"},"(3002,0010)":{tag:"(3002,0010)",vr:"DS",name:"RTImageOrientation",vm:"6",version:"DICOM"},"(3002,0011)":{tag:"(3002,0011)",vr:"DS",name:"ImagePlanePixelSpacing",vm:"2",version:"DICOM"},"(3002,0012)":{tag:"(3002,0012)",vr:"DS",name:"RTImagePosition",vm:"2",version:"DICOM"},"(3002,0020)":{tag:"(3002,0020)",vr:"SH",name:"RadiationMachineName",vm:"1",version:"DICOM"},"(3002,0022)":{tag:"(3002,0022)",vr:"DS",name:"RadiationMachineSAD",vm:"1",version:"DICOM"},"(3002,0024)":{tag:"(3002,0024)",vr:"DS",name:"RadiationMachineSSD",vm:"1",version:"DICOM"},"(3002,0026)":{tag:"(3002,0026)",vr:"DS",name:"RTImageSID",vm:"1",version:"DICOM"},"(3002,0028)":{tag:"(3002,0028)",vr:"DS",name:"SourceToReferenceObjectDistance",vm:"1",version:"DICOM"},"(3002,0029)":{tag:"(3002,0029)",vr:"IS",name:"FractionNumber",vm:"1",version:"DICOM"},"(3002,0030)":{tag:"(3002,0030)",vr:"SQ",name:"ExposureSequence",vm:"1",version:"DICOM"},"(3002,0032)":{tag:"(3002,0032)",vr:"DS",name:"MetersetExposure",vm:"1",version:"DICOM"},"(3002,0034)":{tag:"(3002,0034)",vr:"DS",name:"DiaphragmPosition",vm:"4",version:"DICOM"},"(3002,0040)":{tag:"(3002,0040)",vr:"SQ",name:"FluenceMapSequence",vm:"1",version:"DICOM"},"(3002,0041)":{tag:"(3002,0041)",vr:"CS",name:"FluenceDataSource",vm:"1",version:"DICOM"},"(3002,0042)":{tag:"(3002,0042)",vr:"DS",name:"FluenceDataScale",vm:"1",version:"DICOM"},"(3002,0050)":{tag:"(3002,0050)",vr:"SQ",name:"PrimaryFluenceModeSequence",vm:"1",version:"DICOM"},"(3002,0051)":{tag:"(3002,0051)",vr:"CS",name:"FluenceMode",vm:"1",version:"DICOM"},"(3002,0052)":{tag:"(3002,0052)",vr:"SH",name:"FluenceModeID",vm:"1",version:"DICOM"},"(3002,0100)":{tag:"(3002,0100)",vr:"IS",name:"SelectedFrameNumber",vm:"1",version:"DICOM"},"(3002,0101)":{tag:"(3002,0101)",vr:"SQ",name:"SelectedFrameFunctionalGroupsSequence",vm:"1",version:"DICOM"},"(3002,0102)":{tag:"(3002,0102)",vr:"SQ",name:"RTImageFrameGeneralContentSequence",vm:"1",version:"DICOM"},"(3002,0103)":{tag:"(3002,0103)",vr:"SQ",name:"RTImageFrameContextSequence",vm:"1",version:"DICOM"},"(3002,0104)":{tag:"(3002,0104)",vr:"SQ",name:"RTImageScopeSequence",vm:"1",version:"DICOM"},"(3002,0105)":{tag:"(3002,0105)",vr:"CS",name:"BeamModifierCoordinatesPresenceFlag",vm:"1",version:"DICOM"},"(3002,0106)":{tag:"(3002,0106)",vr:"FD",name:"StartCumulativeMeterset",vm:"1",version:"DICOM"},"(3002,0107)":{tag:"(3002,0107)",vr:"FD",name:"StopCumulativeMeterset",vm:"1",version:"DICOM"},"(3002,0108)":{tag:"(3002,0108)",vr:"SQ",name:"RTAcquisitionPatientPositionSequence",vm:"1",version:"DICOM"},"(3002,0109)":{tag:"(3002,0109)",vr:"SQ",name:"RTImageFrameImagingDevicePositionSequence",vm:"1",version:"DICOM"},"(3002,010A)":{tag:"(3002,010A)",vr:"SQ",name:"RTImageFramekVRadiationAcquisitionSequence",vm:"1",version:"DICOM"},"(3002,010B)":{tag:"(3002,010B)",vr:"SQ",name:"RTImageFrameMVRadiationAcquisitionSequence",vm:"1",version:"DICOM"},"(3002,010C)":{tag:"(3002,010C)",vr:"SQ",name:"RTImageFrameRadiationAcquisitionSequence",vm:"1",version:"DICOM"},"(3002,010D)":{tag:"(3002,010D)",vr:"SQ",name:"ImagingSourcePositionSequence",vm:"1",version:"DICOM"},"(3002,010E)":{tag:"(3002,010E)",vr:"SQ",name:"ImageReceptorPositionSequence",vm:"1",version:"DICOM"},"(3002,010F)":{tag:"(3002,010F)",vr:"FD",name:"DevicePositionToEquipmentMappingMatrix",vm:"16",version:"DICOM"},"(3002,0110)":{tag:"(3002,0110)",vr:"SQ",name:"DevicePositionParameterSequence",vm:"1",version:"DICOM"},"(3002,0111)":{tag:"(3002,0111)",vr:"CS",name:"ImagingSourceLocationSpecificationType",vm:"1",version:"DICOM"},"(3002,0112)":{tag:"(3002,0112)",vr:"SQ",name:"ImagingDeviceLocationMatrixSequence",vm:"1",version:"DICOM"},"(3002,0113)":{tag:"(3002,0113)",vr:"SQ",name:"ImagingDeviceLocationParameterSequence",vm:"1",version:"DICOM"},"(3002,0114)":{tag:"(3002,0114)",vr:"SQ",name:"ImagingApertureSequence",vm:"1",version:"DICOM"},"(3002,0115)":{tag:"(3002,0115)",vr:"CS",name:"ImagingApertureSpecificationType",vm:"1",version:"DICOM"},"(3002,0116)":{tag:"(3002,0116)",vr:"US",name:"NumberOfAcquisitionDevices",vm:"1",version:"DICOM"},"(3002,0117)":{tag:"(3002,0117)",vr:"SQ",name:"AcquisitionDeviceSequence",vm:"1",version:"DICOM"},"(3002,0118)":{tag:"(3002,0118)",vr:"SQ",name:"AcquisitionTaskSequence",vm:"1",version:"DICOM"},"(3002,0119)":{tag:"(3002,0119)",vr:"SQ",name:"AcquisitionTaskWorkitemCodeSequence",vm:"1",version:"DICOM"},"(3002,011A)":{tag:"(3002,011A)",vr:"SQ",name:"AcquisitionSubtaskSequence",vm:"1",version:"DICOM"},"(3002,011B)":{tag:"(3002,011B)",vr:"SQ",name:"SubtaskWorkitemCodeSequence",vm:"1",version:"DICOM"},"(3002,011C)":{tag:"(3002,011C)",vr:"US",name:"AcquisitionTaskIndex",vm:"1",version:"DICOM"},"(3002,011D)":{tag:"(3002,011D)",vr:"US",name:"AcquisitionSubtaskIndex",vm:"1",version:"DICOM"},"(3002,011E)":{tag:"(3002,011E)",vr:"SQ",name:"ReferencedBaselineParametersRTRadiationInstanceSequence",vm:"1",version:"DICOM"},"(3002,011F)":{tag:"(3002,011F)",vr:"SQ",name:"PositionAcquisitionTemplateIdentificationSequence",vm:"1",version:"DICOM"},"(3002,0120)":{tag:"(3002,0120)",vr:"ST",name:"PositionAcquisitionTemplateID",vm:"1",version:"DICOM"},"(3002,0121)":{tag:"(3002,0121)",vr:"LO",name:"PositionAcquisitionTemplateName",vm:"1",version:"DICOM"},"(3002,0122)":{tag:"(3002,0122)",vr:"SQ",name:"PositionAcquisitionTemplateCodeSequence",vm:"1",version:"DICOM"},"(3002,0123)":{tag:"(3002,0123)",vr:"LT",name:"PositionAcquisitionTemplateDescription",vm:"1",version:"DICOM"},"(3002,0124)":{tag:"(3002,0124)",vr:"SQ",name:"AcquisitionTaskApplicabilitySequence",vm:"1",version:"DICOM"},"(3002,0125)":{tag:"(3002,0125)",vr:"SQ",name:"ProjectionImagingAcquisitionParameterSequence",vm:"1",version:"DICOM"},"(3002,0126)":{tag:"(3002,0126)",vr:"SQ",name:"CTImagingAcquisitionParameterSequence",vm:"1",version:"DICOM"},"(3002,0127)":{tag:"(3002,0127)",vr:"SQ",name:"KVImagingGenerationParametersSequence",vm:"1",version:"DICOM"},"(3002,0128)":{tag:"(3002,0128)",vr:"SQ",name:"MVImagingGenerationParametersSequence",vm:"1",version:"DICOM"},"(3002,0129)":{tag:"(3002,0129)",vr:"CS",name:"AcquisitionSignalType",vm:"1",version:"DICOM"},"(3002,012A)":{tag:"(3002,012A)",vr:"CS",name:"AcquisitionMethod",vm:"1",version:"DICOM"},"(3002,012B)":{tag:"(3002,012B)",vr:"SQ",name:"ScanStartPositionSequence",vm:"1",version:"DICOM"},"(3002,012C)":{tag:"(3002,012C)",vr:"SQ",name:"ScanStopPositionSequence",vm:"1",version:"DICOM"},"(3002,012D)":{tag:"(3002,012D)",vr:"FD",name:"ImagingSourceToBeamModifierDefinitionPlaneDistance",vm:"1",version:"DICOM"},"(3002,012E)":{tag:"(3002,012E)",vr:"CS",name:"ScanArcType",vm:"1",version:"DICOM"},"(3002,012F)":{tag:"(3002,012F)",vr:"CS",name:"DetectorPositioningType",vm:"1",version:"DICOM"},"(3002,0130)":{tag:"(3002,0130)",vr:"SQ",name:"AdditionalRTAccessoryDeviceSequence",vm:"1",version:"DICOM"},"(3002,0131)":{tag:"(3002,0131)",vr:"SQ",name:"DeviceSpecificAcquisitionParameterSequence",vm:"1",version:"DICOM"},"(3002,0132)":{tag:"(3002,0132)",vr:"SQ",name:"ReferencedPositionReferenceInstanceSequence",vm:"1",version:"DICOM"},"(3002,0133)":{tag:"(3002,0133)",vr:"SQ",name:"EnergyDerivationCodeSequence",vm:"1",version:"DICOM"},"(3002,0134)":{tag:"(3002,0134)",vr:"FD",name:"MaximumCumulativeMetersetExposure",vm:"1",version:"DICOM"},"(3002,0135)":{tag:"(3002,0135)",vr:"SQ",name:"AcquisitionInitiationSequence",vm:"1",version:"DICOM"},"(3004,0001)":{tag:"(3004,0001)",vr:"CS",name:"DVHType",vm:"1",version:"DICOM"},"(3004,0002)":{tag:"(3004,0002)",vr:"CS",name:"DoseUnits",vm:"1",version:"DICOM"},"(3004,0004)":{tag:"(3004,0004)",vr:"CS",name:"DoseType",vm:"1",version:"DICOM"},"(3004,0005)":{tag:"(3004,0005)",vr:"CS",name:"SpatialTransformOfDose",vm:"1",version:"DICOM"},"(3004,0006)":{tag:"(3004,0006)",vr:"LO",name:"DoseComment",vm:"1",version:"DICOM"},"(3004,0008)":{tag:"(3004,0008)",vr:"DS",name:"NormalizationPoint",vm:"3",version:"DICOM"},"(3004,000A)":{tag:"(3004,000A)",vr:"CS",name:"DoseSummationType",vm:"1",version:"DICOM"},"(3004,000C)":{tag:"(3004,000C)",vr:"DS",name:"GridFrameOffsetVector",vm:"2-n",version:"DICOM"},"(3004,000E)":{tag:"(3004,000E)",vr:"DS",name:"DoseGridScaling",vm:"1",version:"DICOM"},"(3004,0010)":{tag:"(3004,0010)",vr:"SQ",name:"RTDoseROISequence",vm:"1",version:"DICOM"},"(3004,0012)":{tag:"(3004,0012)",vr:"DS",name:"DoseValue",vm:"1",version:"DICOM"},"(3004,0014)":{tag:"(3004,0014)",vr:"CS",name:"TissueHeterogeneityCorrection",vm:"1-3",version:"DICOM"},"(3004,0040)":{tag:"(3004,0040)",vr:"DS",name:"DVHNormalizationPoint",vm:"3",version:"DICOM"},"(3004,0042)":{tag:"(3004,0042)",vr:"DS",name:"DVHNormalizationDoseValue",vm:"1",version:"DICOM"},"(3004,0050)":{tag:"(3004,0050)",vr:"SQ",name:"DVHSequence",vm:"1",version:"DICOM"},"(3004,0052)":{tag:"(3004,0052)",vr:"DS",name:"DVHDoseScaling",vm:"1",version:"DICOM"},"(3004,0054)":{tag:"(3004,0054)",vr:"CS",name:"DVHVolumeUnits",vm:"1",version:"DICOM"},"(3004,0056)":{tag:"(3004,0056)",vr:"IS",name:"DVHNumberOfBins",vm:"1",version:"DICOM"},"(3004,0058)":{tag:"(3004,0058)",vr:"DS",name:"DVHData",vm:"2-2n",version:"DICOM"},"(3004,0060)":{tag:"(3004,0060)",vr:"SQ",name:"DVHReferencedROISequence",vm:"1",version:"DICOM"},"(3004,0062)":{tag:"(3004,0062)",vr:"CS",name:"DVHROIContributionType",vm:"1",version:"DICOM"},"(3004,0070)":{tag:"(3004,0070)",vr:"DS",name:"DVHMinimumDose",vm:"1",version:"DICOM"},"(3004,0072)":{tag:"(3004,0072)",vr:"DS",name:"DVHMaximumDose",vm:"1",version:"DICOM"},"(3004,0074)":{tag:"(3004,0074)",vr:"DS",name:"DVHMeanDose",vm:"1",version:"DICOM"},"(3006,0002)":{tag:"(3006,0002)",vr:"SH",name:"StructureSetLabel",vm:"1",version:"DICOM"},"(3006,0004)":{tag:"(3006,0004)",vr:"LO",name:"StructureSetName",vm:"1",version:"DICOM"},"(3006,0006)":{tag:"(3006,0006)",vr:"ST",name:"StructureSetDescription",vm:"1",version:"DICOM"},"(3006,0008)":{tag:"(3006,0008)",vr:"DA",name:"StructureSetDate",vm:"1",version:"DICOM"},"(3006,0009)":{tag:"(3006,0009)",vr:"TM",name:"StructureSetTime",vm:"1",version:"DICOM"},"(3006,0010)":{tag:"(3006,0010)",vr:"SQ",name:"ReferencedFrameOfReferenceSequence",vm:"1",version:"DICOM"},"(3006,0012)":{tag:"(3006,0012)",vr:"SQ",name:"RTReferencedStudySequence",vm:"1",version:"DICOM"},"(3006,0014)":{tag:"(3006,0014)",vr:"SQ",name:"RTReferencedSeriesSequence",vm:"1",version:"DICOM"},"(3006,0016)":{tag:"(3006,0016)",vr:"SQ",name:"ContourImageSequence",vm:"1",version:"DICOM"},"(3006,0018)":{tag:"(3006,0018)",vr:"SQ",name:"PredecessorStructureSetSequence",vm:"1",version:"DICOM"},"(3006,0020)":{tag:"(3006,0020)",vr:"SQ",name:"StructureSetROISequence",vm:"1",version:"DICOM"},"(3006,0022)":{tag:"(3006,0022)",vr:"IS",name:"ROINumber",vm:"1",version:"DICOM"},"(3006,0024)":{tag:"(3006,0024)",vr:"UI",name:"ReferencedFrameOfReferenceUID",vm:"1",version:"DICOM"},"(3006,0026)":{tag:"(3006,0026)",vr:"LO",name:"ROIName",vm:"1",version:"DICOM"},"(3006,0028)":{tag:"(3006,0028)",vr:"ST",name:"ROIDescription",vm:"1",version:"DICOM"},"(3006,002A)":{tag:"(3006,002A)",vr:"IS",name:"ROIDisplayColor",vm:"3",version:"DICOM"},"(3006,002C)":{tag:"(3006,002C)",vr:"DS",name:"ROIVolume",vm:"1",version:"DICOM"},"(3006,002D)":{tag:"(3006,002D)",vr:"DT",name:"ROIDateTime",vm:"1",version:"DICOM"},"(3006,002E)":{tag:"(3006,002E)",vr:"DT",name:"ROIObservationDateTime",vm:"1",version:"DICOM"},"(3006,0030)":{tag:"(3006,0030)",vr:"SQ",name:"RTRelatedROISequence",vm:"1",version:"DICOM"},"(3006,0033)":{tag:"(3006,0033)",vr:"CS",name:"RTROIRelationship",vm:"1",version:"DICOM"},"(3006,0036)":{tag:"(3006,0036)",vr:"CS",name:"ROIGenerationAlgorithm",vm:"1",version:"DICOM"},"(3006,0037)":{tag:"(3006,0037)",vr:"SQ",name:"ROIDerivationAlgorithmIdentificationSequence",vm:"1",version:"DICOM"},"(3006,0038)":{tag:"(3006,0038)",vr:"LO",name:"ROIGenerationDescription",vm:"1",version:"DICOM"},"(3006,0039)":{tag:"(3006,0039)",vr:"SQ",name:"ROIContourSequence",vm:"1",version:"DICOM"},"(3006,0040)":{tag:"(3006,0040)",vr:"SQ",name:"ContourSequence",vm:"1",version:"DICOM"},"(3006,0042)":{tag:"(3006,0042)",vr:"CS",name:"ContourGeometricType",vm:"1",version:"DICOM"},"(3006,0044)":{tag:"(3006,0044)",vr:"DS",name:"ContourSlabThickness",vm:"1",version:"DICOM"},"(3006,0045)":{tag:"(3006,0045)",vr:"DS",name:"ContourOffsetVector",vm:"3",version:"DICOM"},"(3006,0046)":{tag:"(3006,0046)",vr:"IS",name:"NumberOfContourPoints",vm:"1",version:"DICOM"},"(3006,0048)":{tag:"(3006,0048)",vr:"IS",name:"ContourNumber",vm:"1",version:"DICOM"},"(3006,0049)":{tag:"(3006,0049)",vr:"IS",name:"AttachedContours",vm:"1-n",version:"DICOM"},"(3006,004A)":{tag:"(3006,004A)",vr:"SQ",name:"SourcePixelPlanesCharacteristicsSequence",vm:"1",version:"DICOM"},"(3006,004B)":{tag:"(3006,004B)",vr:"SQ",name:"SourceSeriesSequence",vm:"1",version:"DICOM"},"(3006,004C)":{tag:"(3006,004C)",vr:"SQ",name:"SourceSeriesInformationSequence",vm:"1",version:"DICOM"},"(3006,004D)":{tag:"(3006,004D)",vr:"SQ",name:"ROICreatorSequence",vm:"1",version:"DICOM"},"(3006,004E)":{tag:"(3006,004E)",vr:"SQ",name:"ROIInterpreterSequence",vm:"1",version:"DICOM"},"(3006,004F)":{tag:"(3006,004F)",vr:"SQ",name:"ROIObservationContextCodeSequence",vm:"1",version:"DICOM"},"(3006,0050)":{tag:"(3006,0050)",vr:"DS",name:"ContourData",vm:"3-3n",version:"DICOM"},"(3006,0080)":{tag:"(3006,0080)",vr:"SQ",name:"RTROIObservationsSequence",vm:"1",version:"DICOM"},"(3006,0082)":{tag:"(3006,0082)",vr:"IS",name:"ObservationNumber",vm:"1",version:"DICOM"},"(3006,0084)":{tag:"(3006,0084)",vr:"IS",name:"ReferencedROINumber",vm:"1",version:"DICOM"},"(3006,0085)":{tag:"(3006,0085)",vr:"SH",name:"ROIObservationLabel",vm:"1",version:"DICOM"},"(3006,0086)":{tag:"(3006,0086)",vr:"SQ",name:"RTROIIdentificationCodeSequence",vm:"1",version:"DICOM"},"(3006,0088)":{tag:"(3006,0088)",vr:"ST",name:"ROIObservationDescription",vm:"1",version:"DICOM"},"(3006,00A0)":{tag:"(3006,00A0)",vr:"SQ",name:"RelatedRTROIObservationsSequence",vm:"1",version:"DICOM"},"(3006,00A4)":{tag:"(3006,00A4)",vr:"CS",name:"RTROIInterpretedType",vm:"1",version:"DICOM"},"(3006,00A6)":{tag:"(3006,00A6)",vr:"PN",name:"ROIInterpreter",vm:"1",version:"DICOM"},"(3006,00B0)":{tag:"(3006,00B0)",vr:"SQ",name:"ROIPhysicalPropertiesSequence",vm:"1",version:"DICOM"},"(3006,00B2)":{tag:"(3006,00B2)",vr:"CS",name:"ROIPhysicalProperty",vm:"1",version:"DICOM"},"(3006,00B4)":{tag:"(3006,00B4)",vr:"DS",name:"ROIPhysicalPropertyValue",vm:"1",version:"DICOM"},"(3006,00B6)":{tag:"(3006,00B6)",vr:"SQ",name:"ROIElementalCompositionSequence",vm:"1",version:"DICOM"},"(3006,00B7)":{tag:"(3006,00B7)",vr:"US",name:"ROIElementalCompositionAtomicNumber",vm:"1",version:"DICOM"},"(3006,00B8)":{tag:"(3006,00B8)",vr:"FL",name:"ROIElementalCompositionAtomicMassFraction",vm:"1",version:"DICOM"},"(3006,00B9)":{tag:"(3006,00B9)",vr:"SQ",name:"AdditionalRTROIIdentificationCodeSequence",vm:"1",version:"DICOM"},"(3006,00C6)":{tag:"(3006,00C6)",vr:"DS",name:"FrameOfReferenceTransformationMatrix",vm:"16",version:"DICOM"},"(3006,00C8)":{tag:"(3006,00C8)",vr:"LO",name:"FrameOfReferenceTransformationComment",vm:"1",version:"DICOM"},"(3006,00C9)":{tag:"(3006,00C9)",vr:"SQ",name:"PatientLocationCoordinatesSequence",vm:"1",version:"DICOM"},"(3006,00CA)":{tag:"(3006,00CA)",vr:"SQ",name:"PatientLocationCoordinatesCodeSequence",vm:"1",version:"DICOM"},"(3006,00CB)":{tag:"(3006,00CB)",vr:"SQ",name:"PatientSupportPositionSequence",vm:"1",version:"DICOM"},"(3008,0010)":{tag:"(3008,0010)",vr:"SQ",name:"MeasuredDoseReferenceSequence",vm:"1",version:"DICOM"},"(3008,0012)":{tag:"(3008,0012)",vr:"ST",name:"MeasuredDoseDescription",vm:"1",version:"DICOM"},"(3008,0014)":{tag:"(3008,0014)",vr:"CS",name:"MeasuredDoseType",vm:"1",version:"DICOM"},"(3008,0016)":{tag:"(3008,0016)",vr:"DS",name:"MeasuredDoseValue",vm:"1",version:"DICOM"},"(3008,0020)":{tag:"(3008,0020)",vr:"SQ",name:"TreatmentSessionBeamSequence",vm:"1",version:"DICOM"},"(3008,0021)":{tag:"(3008,0021)",vr:"SQ",name:"TreatmentSessionIonBeamSequence",vm:"1",version:"DICOM"},"(3008,0022)":{tag:"(3008,0022)",vr:"IS",name:"CurrentFractionNumber",vm:"1",version:"DICOM"},"(3008,0024)":{tag:"(3008,0024)",vr:"DA",name:"TreatmentControlPointDate",vm:"1",version:"DICOM"},"(3008,0025)":{tag:"(3008,0025)",vr:"TM",name:"TreatmentControlPointTime",vm:"1",version:"DICOM"},"(3008,002A)":{tag:"(3008,002A)",vr:"CS",name:"TreatmentTerminationStatus",vm:"1",version:"DICOM"},"(3008,002B)":{tag:"(3008,002B)",vr:"SH",name:"TreatmentTerminationCode",vm:"1",version:"DICOM"},"(3008,002C)":{tag:"(3008,002C)",vr:"CS",name:"TreatmentVerificationStatus",vm:"1",version:"DICOM"},"(3008,0030)":{tag:"(3008,0030)",vr:"SQ",name:"ReferencedTreatmentRecordSequence",vm:"1",version:"DICOM"},"(3008,0032)":{tag:"(3008,0032)",vr:"DS",name:"SpecifiedPrimaryMeterset",vm:"1",version:"DICOM"},"(3008,0033)":{tag:"(3008,0033)",vr:"DS",name:"SpecifiedSecondaryMeterset",vm:"1",version:"DICOM"},"(3008,0036)":{tag:"(3008,0036)",vr:"DS",name:"DeliveredPrimaryMeterset",vm:"1",version:"DICOM"},"(3008,0037)":{tag:"(3008,0037)",vr:"DS",name:"DeliveredSecondaryMeterset",vm:"1",version:"DICOM"},"(3008,003A)":{tag:"(3008,003A)",vr:"DS",name:"SpecifiedTreatmentTime",vm:"1",version:"DICOM"},"(3008,003B)":{tag:"(3008,003B)",vr:"DS",name:"DeliveredTreatmentTime",vm:"1",version:"DICOM"},"(3008,0040)":{tag:"(3008,0040)",vr:"SQ",name:"ControlPointDeliverySequence",vm:"1",version:"DICOM"},"(3008,0041)":{tag:"(3008,0041)",vr:"SQ",name:"IonControlPointDeliverySequence",vm:"1",version:"DICOM"},"(3008,0042)":{tag:"(3008,0042)",vr:"DS",name:"SpecifiedMeterset",vm:"1",version:"DICOM"},"(3008,0044)":{tag:"(3008,0044)",vr:"DS",name:"DeliveredMeterset",vm:"1",version:"DICOM"},"(3008,0045)":{tag:"(3008,0045)",vr:"FL",name:"MetersetRateSet",vm:"1",version:"DICOM"},"(3008,0046)":{tag:"(3008,0046)",vr:"FL",name:"MetersetRateDelivered",vm:"1",version:"DICOM"},"(3008,0047)":{tag:"(3008,0047)",vr:"FL",name:"ScanSpotMetersetsDelivered",vm:"1-n",version:"DICOM"},"(3008,0048)":{tag:"(3008,0048)",vr:"DS",name:"DoseRateDelivered",vm:"1",version:"DICOM"},"(3008,0050)":{tag:"(3008,0050)",vr:"SQ",name:"TreatmentSummaryCalculatedDoseReferenceSequence",vm:"1",version:"DICOM"},"(3008,0052)":{tag:"(3008,0052)",vr:"DS",name:"CumulativeDoseToDoseReference",vm:"1",version:"DICOM"},"(3008,0054)":{tag:"(3008,0054)",vr:"DA",name:"FirstTreatmentDate",vm:"1",version:"DICOM"},"(3008,0056)":{tag:"(3008,0056)",vr:"DA",name:"MostRecentTreatmentDate",vm:"1",version:"DICOM"},"(3008,005A)":{tag:"(3008,005A)",vr:"IS",name:"NumberOfFractionsDelivered",vm:"1",version:"DICOM"},"(3008,0060)":{tag:"(3008,0060)",vr:"SQ",name:"OverrideSequence",vm:"1",version:"DICOM"},"(3008,0061)":{tag:"(3008,0061)",vr:"AT",name:"ParameterSequencePointer",vm:"1",version:"DICOM"},"(3008,0062)":{tag:"(3008,0062)",vr:"AT",name:"OverrideParameterPointer",vm:"1",version:"DICOM"},"(3008,0063)":{tag:"(3008,0063)",vr:"IS",name:"ParameterItemIndex",vm:"1",version:"DICOM"},"(3008,0064)":{tag:"(3008,0064)",vr:"IS",name:"MeasuredDoseReferenceNumber",vm:"1",version:"DICOM"},"(3008,0065)":{tag:"(3008,0065)",vr:"AT",name:"ParameterPointer",vm:"1",version:"DICOM"},"(3008,0066)":{tag:"(3008,0066)",vr:"ST",name:"OverrideReason",vm:"1",version:"DICOM"},"(3008,0067)":{tag:"(3008,0067)",vr:"US",name:"ParameterValueNumber",vm:"1",version:"DICOM"},"(3008,0068)":{tag:"(3008,0068)",vr:"SQ",name:"CorrectedParameterSequence",vm:"1",version:"DICOM"},"(3008,006A)":{tag:"(3008,006A)",vr:"FL",name:"CorrectionValue",vm:"1",version:"DICOM"},"(3008,0070)":{tag:"(3008,0070)",vr:"SQ",name:"CalculatedDoseReferenceSequence",vm:"1",version:"DICOM"},"(3008,0072)":{tag:"(3008,0072)",vr:"IS",name:"CalculatedDoseReferenceNumber",vm:"1",version:"DICOM"},"(3008,0074)":{tag:"(3008,0074)",vr:"ST",name:"CalculatedDoseReferenceDescription",vm:"1",version:"DICOM"},"(3008,0076)":{tag:"(3008,0076)",vr:"DS",name:"CalculatedDoseReferenceDoseValue",vm:"1",version:"DICOM"},"(3008,0078)":{tag:"(3008,0078)",vr:"DS",name:"StartMeterset",vm:"1",version:"DICOM"},"(3008,007A)":{tag:"(3008,007A)",vr:"DS",name:"EndMeterset",vm:"1",version:"DICOM"},"(3008,0080)":{tag:"(3008,0080)",vr:"SQ",name:"ReferencedMeasuredDoseReferenceSequence",vm:"1",version:"DICOM"},"(3008,0082)":{tag:"(3008,0082)",vr:"IS",name:"ReferencedMeasuredDoseReferenceNumber",vm:"1",version:"DICOM"},"(3008,0090)":{tag:"(3008,0090)",vr:"SQ",name:"ReferencedCalculatedDoseReferenceSequence",vm:"1",version:"DICOM"},"(3008,0092)":{tag:"(3008,0092)",vr:"IS",name:"ReferencedCalculatedDoseReferenceNumber",vm:"1",version:"DICOM"},"(3008,00A0)":{tag:"(3008,00A0)",vr:"SQ",name:"BeamLimitingDeviceLeafPairsSequence",vm:"1",version:"DICOM"},"(3008,00A1)":{tag:"(3008,00A1)",vr:"SQ",name:"EnhancedRTBeamLimitingDeviceSequence",vm:"1",version:"DICOM"},"(3008,00A2)":{tag:"(3008,00A2)",vr:"SQ",name:"EnhancedRTBeamLimitingOpeningSequence",vm:"1",version:"DICOM"},"(3008,00A3)":{tag:"(3008,00A3)",vr:"CS",name:"EnhancedRTBeamLimitingDeviceDefinitionFlag",vm:"1",version:"DICOM"},"(3008,00A4)":{tag:"(3008,00A4)",vr:"FD",name:"ParallelRTBeamDelimiterOpeningExtents",vm:"2-2n",version:"DICOM"},"(3008,00B0)":{tag:"(3008,00B0)",vr:"SQ",name:"RecordedWedgeSequence",vm:"1",version:"DICOM"},"(3008,00C0)":{tag:"(3008,00C0)",vr:"SQ",name:"RecordedCompensatorSequence",vm:"1",version:"DICOM"},"(3008,00D0)":{tag:"(3008,00D0)",vr:"SQ",name:"RecordedBlockSequence",vm:"1",version:"DICOM"},"(3008,00D1)":{tag:"(3008,00D1)",vr:"SQ",name:"RecordedBlockSlabSequence",vm:"1",version:"DICOM"},"(3008,00E0)":{tag:"(3008,00E0)",vr:"SQ",name:"TreatmentSummaryMeasuredDoseReferenceSequence",vm:"1",version:"DICOM"},"(3008,00F0)":{tag:"(3008,00F0)",vr:"SQ",name:"RecordedSnoutSequence",vm:"1",version:"DICOM"},"(3008,00F2)":{tag:"(3008,00F2)",vr:"SQ",name:"RecordedRangeShifterSequence",vm:"1",version:"DICOM"},"(3008,00F4)":{tag:"(3008,00F4)",vr:"SQ",name:"RecordedLateralSpreadingDeviceSequence",vm:"1",version:"DICOM"},"(3008,00F6)":{tag:"(3008,00F6)",vr:"SQ",name:"RecordedRangeModulatorSequence",vm:"1",version:"DICOM"},"(3008,0100)":{tag:"(3008,0100)",vr:"SQ",name:"RecordedSourceSequence",vm:"1",version:"DICOM"},"(3008,0105)":{tag:"(3008,0105)",vr:"LO",name:"SourceSerialNumber",vm:"1",version:"DICOM"},"(3008,0110)":{tag:"(3008,0110)",vr:"SQ",name:"TreatmentSessionApplicationSetupSequence",vm:"1",version:"DICOM"},"(3008,0116)":{tag:"(3008,0116)",vr:"CS",name:"ApplicationSetupCheck",vm:"1",version:"DICOM"},"(3008,0120)":{tag:"(3008,0120)",vr:"SQ",name:"RecordedBrachyAccessoryDeviceSequence",vm:"1",version:"DICOM"},"(3008,0122)":{tag:"(3008,0122)",vr:"IS",name:"ReferencedBrachyAccessoryDeviceNumber",vm:"1",version:"DICOM"},"(3008,0130)":{tag:"(3008,0130)",vr:"SQ",name:"RecordedChannelSequence",vm:"1",version:"DICOM"},"(3008,0132)":{tag:"(3008,0132)",vr:"DS",name:"SpecifiedChannelTotalTime",vm:"1",version:"DICOM"},"(3008,0134)":{tag:"(3008,0134)",vr:"DS",name:"DeliveredChannelTotalTime",vm:"1",version:"DICOM"},"(3008,0136)":{tag:"(3008,0136)",vr:"IS",name:"SpecifiedNumberOfPulses",vm:"1",version:"DICOM"},"(3008,0138)":{tag:"(3008,0138)",vr:"IS",name:"DeliveredNumberOfPulses",vm:"1",version:"DICOM"},"(3008,013A)":{tag:"(3008,013A)",vr:"DS",name:"SpecifiedPulseRepetitionInterval",vm:"1",version:"DICOM"},"(3008,013C)":{tag:"(3008,013C)",vr:"DS",name:"DeliveredPulseRepetitionInterval",vm:"1",version:"DICOM"},"(3008,0140)":{tag:"(3008,0140)",vr:"SQ",name:"RecordedSourceApplicatorSequence",vm:"1",version:"DICOM"},"(3008,0142)":{tag:"(3008,0142)",vr:"IS",name:"ReferencedSourceApplicatorNumber",vm:"1",version:"DICOM"},"(3008,0150)":{tag:"(3008,0150)",vr:"SQ",name:"RecordedChannelShieldSequence",vm:"1",version:"DICOM"},"(3008,0152)":{tag:"(3008,0152)",vr:"IS",name:"ReferencedChannelShieldNumber",vm:"1",version:"DICOM"},"(3008,0160)":{tag:"(3008,0160)",vr:"SQ",name:"BrachyControlPointDeliveredSequence",vm:"1",version:"DICOM"},"(3008,0162)":{tag:"(3008,0162)",vr:"DA",name:"SafePositionExitDate",vm:"1",version:"DICOM"},"(3008,0164)":{tag:"(3008,0164)",vr:"TM",name:"SafePositionExitTime",vm:"1",version:"DICOM"},"(3008,0166)":{tag:"(3008,0166)",vr:"DA",name:"SafePositionReturnDate",vm:"1",version:"DICOM"},"(3008,0168)":{tag:"(3008,0168)",vr:"TM",name:"SafePositionReturnTime",vm:"1",version:"DICOM"},"(3008,0171)":{tag:"(3008,0171)",vr:"SQ",name:"PulseSpecificBrachyControlPointDeliveredSequence",vm:"1",version:"DICOM"},"(3008,0172)":{tag:"(3008,0172)",vr:"US",name:"PulseNumber",vm:"1",version:"DICOM"},"(3008,0173)":{tag:"(3008,0173)",vr:"SQ",name:"BrachyPulseControlPointDeliveredSequence",vm:"1",version:"DICOM"},"(3008,0200)":{tag:"(3008,0200)",vr:"CS",name:"CurrentTreatmentStatus",vm:"1",version:"DICOM"},"(3008,0202)":{tag:"(3008,0202)",vr:"ST",name:"TreatmentStatusComment",vm:"1",version:"DICOM"},"(3008,0220)":{tag:"(3008,0220)",vr:"SQ",name:"FractionGroupSummarySequence",vm:"1",version:"DICOM"},"(3008,0223)":{tag:"(3008,0223)",vr:"IS",name:"ReferencedFractionNumber",vm:"1",version:"DICOM"},"(3008,0224)":{tag:"(3008,0224)",vr:"CS",name:"FractionGroupType",vm:"1",version:"DICOM"},"(3008,0230)":{tag:"(3008,0230)",vr:"CS",name:"BeamStopperPosition",vm:"1",version:"DICOM"},"(3008,0240)":{tag:"(3008,0240)",vr:"SQ",name:"FractionStatusSummarySequence",vm:"1",version:"DICOM"},"(3008,0250)":{tag:"(3008,0250)",vr:"DA",name:"TreatmentDate",vm:"1",version:"DICOM"},"(3008,0251)":{tag:"(3008,0251)",vr:"TM",name:"TreatmentTime",vm:"1",version:"DICOM"},"(300A,0002)":{tag:"(300A,0002)",vr:"SH",name:"RTPlanLabel",vm:"1",version:"DICOM"},"(300A,0003)":{tag:"(300A,0003)",vr:"LO",name:"RTPlanName",vm:"1",version:"DICOM"},"(300A,0004)":{tag:"(300A,0004)",vr:"ST",name:"RTPlanDescription",vm:"1",version:"DICOM"},"(300A,0006)":{tag:"(300A,0006)",vr:"DA",name:"RTPlanDate",vm:"1",version:"DICOM"},"(300A,0007)":{tag:"(300A,0007)",vr:"TM",name:"RTPlanTime",vm:"1",version:"DICOM"},"(300A,0009)":{tag:"(300A,0009)",vr:"LO",name:"TreatmentProtocols",vm:"1-n",version:"DICOM"},"(300A,000A)":{tag:"(300A,000A)",vr:"CS",name:"PlanIntent",vm:"1",version:"DICOM"},"(300A,000B)":{tag:"(300A,000B)",vr:"LO",name:"TreatmentSites",vm:"1-n",version:"DICOM"},"(300A,000C)":{tag:"(300A,000C)",vr:"CS",name:"RTPlanGeometry",vm:"1",version:"DICOM"},"(300A,000E)":{tag:"(300A,000E)",vr:"ST",name:"PrescriptionDescription",vm:"1",version:"DICOM"},"(300A,0010)":{tag:"(300A,0010)",vr:"SQ",name:"DoseReferenceSequence",vm:"1",version:"DICOM"},"(300A,0012)":{tag:"(300A,0012)",vr:"IS",name:"DoseReferenceNumber",vm:"1",version:"DICOM"},"(300A,0013)":{tag:"(300A,0013)",vr:"UI",name:"DoseReferenceUID",vm:"1",version:"DICOM"},"(300A,0014)":{tag:"(300A,0014)",vr:"CS",name:"DoseReferenceStructureType",vm:"1",version:"DICOM"},"(300A,0015)":{tag:"(300A,0015)",vr:"CS",name:"NominalBeamEnergyUnit",vm:"1",version:"DICOM"},"(300A,0016)":{tag:"(300A,0016)",vr:"LO",name:"DoseReferenceDescription",vm:"1",version:"DICOM"},"(300A,0018)":{tag:"(300A,0018)",vr:"DS",name:"DoseReferencePointCoordinates",vm:"3",version:"DICOM"},"(300A,001A)":{tag:"(300A,001A)",vr:"DS",name:"NominalPriorDose",vm:"1",version:"DICOM"},"(300A,0020)":{tag:"(300A,0020)",vr:"CS",name:"DoseReferenceType",vm:"1",version:"DICOM"},"(300A,0021)":{tag:"(300A,0021)",vr:"DS",name:"ConstraintWeight",vm:"1",version:"DICOM"},"(300A,0022)":{tag:"(300A,0022)",vr:"DS",name:"DeliveryWarningDose",vm:"1",version:"DICOM"},"(300A,0023)":{tag:"(300A,0023)",vr:"DS",name:"DeliveryMaximumDose",vm:"1",version:"DICOM"},"(300A,0025)":{tag:"(300A,0025)",vr:"DS",name:"TargetMinimumDose",vm:"1",version:"DICOM"},"(300A,0026)":{tag:"(300A,0026)",vr:"DS",name:"TargetPrescriptionDose",vm:"1",version:"DICOM"},"(300A,0027)":{tag:"(300A,0027)",vr:"DS",name:"TargetMaximumDose",vm:"1",version:"DICOM"},"(300A,0028)":{tag:"(300A,0028)",vr:"DS",name:"TargetUnderdoseVolumeFraction",vm:"1",version:"DICOM"},"(300A,002A)":{tag:"(300A,002A)",vr:"DS",name:"OrganAtRiskFullVolumeDose",vm:"1",version:"DICOM"},"(300A,002B)":{tag:"(300A,002B)",vr:"DS",name:"OrganAtRiskLimitDose",vm:"1",version:"DICOM"},"(300A,002C)":{tag:"(300A,002C)",vr:"DS",name:"OrganAtRiskMaximumDose",vm:"1",version:"DICOM"},"(300A,002D)":{tag:"(300A,002D)",vr:"DS",name:"OrganAtRiskOverdoseVolumeFraction",vm:"1",version:"DICOM"},"(300A,0040)":{tag:"(300A,0040)",vr:"SQ",name:"ToleranceTableSequence",vm:"1",version:"DICOM"},"(300A,0042)":{tag:"(300A,0042)",vr:"IS",name:"ToleranceTableNumber",vm:"1",version:"DICOM"},"(300A,0043)":{tag:"(300A,0043)",vr:"SH",name:"ToleranceTableLabel",vm:"1",version:"DICOM"},"(300A,0044)":{tag:"(300A,0044)",vr:"DS",name:"GantryAngleTolerance",vm:"1",version:"DICOM"},"(300A,0046)":{tag:"(300A,0046)",vr:"DS",name:"BeamLimitingDeviceAngleTolerance",vm:"1",version:"DICOM"},"(300A,0048)":{tag:"(300A,0048)",vr:"SQ",name:"BeamLimitingDeviceToleranceSequence",vm:"1",version:"DICOM"},"(300A,004A)":{tag:"(300A,004A)",vr:"DS",name:"BeamLimitingDevicePositionTolerance",vm:"1",version:"DICOM"},"(300A,004B)":{tag:"(300A,004B)",vr:"FL",name:"SnoutPositionTolerance",vm:"1",version:"DICOM"},"(300A,004C)":{tag:"(300A,004C)",vr:"DS",name:"PatientSupportAngleTolerance",vm:"1",version:"DICOM"},"(300A,004E)":{tag:"(300A,004E)",vr:"DS",name:"TableTopEccentricAngleTolerance",vm:"1",version:"DICOM"},"(300A,004F)":{tag:"(300A,004F)",vr:"FL",name:"TableTopPitchAngleTolerance",vm:"1",version:"DICOM"},"(300A,0050)":{tag:"(300A,0050)",vr:"FL",name:"TableTopRollAngleTolerance",vm:"1",version:"DICOM"},"(300A,0051)":{tag:"(300A,0051)",vr:"DS",name:"TableTopVerticalPositionTolerance",vm:"1",version:"DICOM"},"(300A,0052)":{tag:"(300A,0052)",vr:"DS",name:"TableTopLongitudinalPositionTolerance",vm:"1",version:"DICOM"},"(300A,0053)":{tag:"(300A,0053)",vr:"DS",name:"TableTopLateralPositionTolerance",vm:"1",version:"DICOM"},"(300A,0054)":{tag:"(300A,0054)",vr:"UI",name:"TableTopPositionAlignmentUID",vm:"1",version:"DICOM"},"(300A,0055)":{tag:"(300A,0055)",vr:"CS",name:"RTPlanRelationship",vm:"1",version:"DICOM"},"(300A,0070)":{tag:"(300A,0070)",vr:"SQ",name:"FractionGroupSequence",vm:"1",version:"DICOM"},"(300A,0071)":{tag:"(300A,0071)",vr:"IS",name:"FractionGroupNumber",vm:"1",version:"DICOM"},"(300A,0072)":{tag:"(300A,0072)",vr:"LO",name:"FractionGroupDescription",vm:"1",version:"DICOM"},"(300A,0078)":{tag:"(300A,0078)",vr:"IS",name:"NumberOfFractionsPlanned",vm:"1",version:"DICOM"},"(300A,0079)":{tag:"(300A,0079)",vr:"IS",name:"NumberOfFractionPatternDigitsPerDay",vm:"1",version:"DICOM"},"(300A,007A)":{tag:"(300A,007A)",vr:"IS",name:"RepeatFractionCycleLength",vm:"1",version:"DICOM"},"(300A,007B)":{tag:"(300A,007B)",vr:"LT",name:"FractionPattern",vm:"1",version:"DICOM"},"(300A,0080)":{tag:"(300A,0080)",vr:"IS",name:"NumberOfBeams",vm:"1",version:"DICOM"},"(300A,0082)":{tag:"(300A,0082)",vr:"DS",name:"BeamDoseSpecificationPoint",vm:"3",version:"DICOM"},"(300A,0083)":{tag:"(300A,0083)",vr:"UI",name:"ReferencedDoseReferenceUID",vm:"1",version:"DICOM"},"(300A,0084)":{tag:"(300A,0084)",vr:"DS",name:"BeamDose",vm:"1",version:"DICOM"},"(300A,0086)":{tag:"(300A,0086)",vr:"DS",name:"BeamMeterset",vm:"1",version:"DICOM"},"(300A,008B)":{tag:"(300A,008B)",vr:"CS",name:"BeamDoseMeaning",vm:"1",version:"DICOM"},"(300A,008C)":{tag:"(300A,008C)",vr:"SQ",name:"BeamDoseVerificationControlPointSequence",vm:"1",version:"DICOM"},"(300A,008D)":{tag:"(300A,008D)",vr:"FL",name:"AverageBeamDosePointDepth",vm:"1",version:"DICOM"},"(300A,008E)":{tag:"(300A,008E)",vr:"FL",name:"AverageBeamDosePointEquivalentDepth",vm:"1",version:"DICOM"},"(300A,008F)":{tag:"(300A,008F)",vr:"FL",name:"AverageBeamDosePointSSD",vm:"1",version:"DICOM"},"(300A,0090)":{tag:"(300A,0090)",vr:"CS",name:"BeamDoseType",vm:"1",version:"DICOM"},"(300A,0091)":{tag:"(300A,0091)",vr:"DS",name:"AlternateBeamDose",vm:"1",version:"DICOM"},"(300A,0092)":{tag:"(300A,0092)",vr:"CS",name:"AlternateBeamDoseType",vm:"1",version:"DICOM"},"(300A,0093)":{tag:"(300A,0093)",vr:"CS",name:"DepthValueAveragingFlag",vm:"1",version:"DICOM"},"(300A,0094)":{tag:"(300A,0094)",vr:"DS",name:"BeamDosePointSourceToExternalContourDistance",vm:"1",version:"DICOM"},"(300A,00A0)":{tag:"(300A,00A0)",vr:"IS",name:"NumberOfBrachyApplicationSetups",vm:"1",version:"DICOM"},"(300A,00A2)":{tag:"(300A,00A2)",vr:"DS",name:"BrachyApplicationSetupDoseSpecificationPoint",vm:"3",version:"DICOM"},"(300A,00A4)":{tag:"(300A,00A4)",vr:"DS",name:"BrachyApplicationSetupDose",vm:"1",version:"DICOM"},"(300A,00B0)":{tag:"(300A,00B0)",vr:"SQ",name:"BeamSequence",vm:"1",version:"DICOM"},"(300A,00B2)":{tag:"(300A,00B2)",vr:"SH",name:"TreatmentMachineName",vm:"1",version:"DICOM"},"(300A,00B3)":{tag:"(300A,00B3)",vr:"CS",name:"PrimaryDosimeterUnit",vm:"1",version:"DICOM"},"(300A,00B4)":{tag:"(300A,00B4)",vr:"DS",name:"SourceAxisDistance",vm:"1",version:"DICOM"},"(300A,00B6)":{tag:"(300A,00B6)",vr:"SQ",name:"BeamLimitingDeviceSequence",vm:"1",version:"DICOM"},"(300A,00B8)":{tag:"(300A,00B8)",vr:"CS",name:"RTBeamLimitingDeviceType",vm:"1",version:"DICOM"},"(300A,00BA)":{tag:"(300A,00BA)",vr:"DS",name:"SourceToBeamLimitingDeviceDistance",vm:"1",version:"DICOM"},"(300A,00BB)":{tag:"(300A,00BB)",vr:"FL",name:"IsocenterToBeamLimitingDeviceDistance",vm:"1",version:"DICOM"},"(300A,00BC)":{tag:"(300A,00BC)",vr:"IS",name:"NumberOfLeafJawPairs",vm:"1",version:"DICOM"},"(300A,00BE)":{tag:"(300A,00BE)",vr:"DS",name:"LeafPositionBoundaries",vm:"3-n",version:"DICOM"},"(300A,00C0)":{tag:"(300A,00C0)",vr:"IS",name:"BeamNumber",vm:"1",version:"DICOM"},"(300A,00C2)":{tag:"(300A,00C2)",vr:"LO",name:"BeamName",vm:"1",version:"DICOM"},"(300A,00C3)":{tag:"(300A,00C3)",vr:"ST",name:"BeamDescription",vm:"1",version:"DICOM"},"(300A,00C4)":{tag:"(300A,00C4)",vr:"CS",name:"BeamType",vm:"1",version:"DICOM"},"(300A,00C5)":{tag:"(300A,00C5)",vr:"FD",name:"BeamDeliveryDurationLimit",vm:"1",version:"DICOM"},"(300A,00C6)":{tag:"(300A,00C6)",vr:"CS",name:"RadiationType",vm:"1",version:"DICOM"},"(300A,00C7)":{tag:"(300A,00C7)",vr:"CS",name:"HighDoseTechniqueType",vm:"1",version:"DICOM"},"(300A,00C8)":{tag:"(300A,00C8)",vr:"IS",name:"ReferenceImageNumber",vm:"1",version:"DICOM"},"(300A,00CA)":{tag:"(300A,00CA)",vr:"SQ",name:"PlannedVerificationImageSequence",vm:"1",version:"DICOM"},"(300A,00CC)":{tag:"(300A,00CC)",vr:"LO",name:"ImagingDeviceSpecificAcquisitionParameters",vm:"1-n",version:"DICOM"},"(300A,00CE)":{tag:"(300A,00CE)",vr:"CS",name:"TreatmentDeliveryType",vm:"1",version:"DICOM"},"(300A,00D0)":{tag:"(300A,00D0)",vr:"IS",name:"NumberOfWedges",vm:"1",version:"DICOM"},"(300A,00D1)":{tag:"(300A,00D1)",vr:"SQ",name:"WedgeSequence",vm:"1",version:"DICOM"},"(300A,00D2)":{tag:"(300A,00D2)",vr:"IS",name:"WedgeNumber",vm:"1",version:"DICOM"},"(300A,00D3)":{tag:"(300A,00D3)",vr:"CS",name:"WedgeType",vm:"1",version:"DICOM"},"(300A,00D4)":{tag:"(300A,00D4)",vr:"SH",name:"WedgeID",vm:"1",version:"DICOM"},"(300A,00D5)":{tag:"(300A,00D5)",vr:"IS",name:"WedgeAngle",vm:"1",version:"DICOM"},"(300A,00D6)":{tag:"(300A,00D6)",vr:"DS",name:"WedgeFactor",vm:"1",version:"DICOM"},"(300A,00D7)":{tag:"(300A,00D7)",vr:"FL",name:"TotalWedgeTrayWaterEquivalentThickness",vm:"1",version:"DICOM"},"(300A,00D8)":{tag:"(300A,00D8)",vr:"DS",name:"WedgeOrientation",vm:"1",version:"DICOM"},"(300A,00D9)":{tag:"(300A,00D9)",vr:"FL",name:"IsocenterToWedgeTrayDistance",vm:"1",version:"DICOM"},"(300A,00DA)":{tag:"(300A,00DA)",vr:"DS",name:"SourceToWedgeTrayDistance",vm:"1",version:"DICOM"},"(300A,00DB)":{tag:"(300A,00DB)",vr:"FL",name:"WedgeThinEdgePosition",vm:"1",version:"DICOM"},"(300A,00DC)":{tag:"(300A,00DC)",vr:"SH",name:"BolusID",vm:"1",version:"DICOM"},"(300A,00DD)":{tag:"(300A,00DD)",vr:"ST",name:"BolusDescription",vm:"1",version:"DICOM"},"(300A,00DE)":{tag:"(300A,00DE)",vr:"DS",name:"EffectiveWedgeAngle",vm:"1",version:"DICOM"},"(300A,00E0)":{tag:"(300A,00E0)",vr:"IS",name:"NumberOfCompensators",vm:"1",version:"DICOM"},"(300A,00E1)":{tag:"(300A,00E1)",vr:"SH",name:"MaterialID",vm:"1",version:"DICOM"},"(300A,00E2)":{tag:"(300A,00E2)",vr:"DS",name:"TotalCompensatorTrayFactor",vm:"1",version:"DICOM"},"(300A,00E3)":{tag:"(300A,00E3)",vr:"SQ",name:"CompensatorSequence",vm:"1",version:"DICOM"},"(300A,00E4)":{tag:"(300A,00E4)",vr:"IS",name:"CompensatorNumber",vm:"1",version:"DICOM"},"(300A,00E5)":{tag:"(300A,00E5)",vr:"SH",name:"CompensatorID",vm:"1",version:"DICOM"},"(300A,00E6)":{tag:"(300A,00E6)",vr:"DS",name:"SourceToCompensatorTrayDistance",vm:"1",version:"DICOM"},"(300A,00E7)":{tag:"(300A,00E7)",vr:"IS",name:"CompensatorRows",vm:"1",version:"DICOM"},"(300A,00E8)":{tag:"(300A,00E8)",vr:"IS",name:"CompensatorColumns",vm:"1",version:"DICOM"},"(300A,00E9)":{tag:"(300A,00E9)",vr:"DS",name:"CompensatorPixelSpacing",vm:"2",version:"DICOM"},"(300A,00EA)":{tag:"(300A,00EA)",vr:"DS",name:"CompensatorPosition",vm:"2",version:"DICOM"},"(300A,00EB)":{tag:"(300A,00EB)",vr:"DS",name:"CompensatorTransmissionData",vm:"1-n",version:"DICOM"},"(300A,00EC)":{tag:"(300A,00EC)",vr:"DS",name:"CompensatorThicknessData",vm:"1-n",version:"DICOM"},"(300A,00ED)":{tag:"(300A,00ED)",vr:"IS",name:"NumberOfBoli",vm:"1",version:"DICOM"},"(300A,00EE)":{tag:"(300A,00EE)",vr:"CS",name:"CompensatorType",vm:"1",version:"DICOM"},"(300A,00EF)":{tag:"(300A,00EF)",vr:"SH",name:"CompensatorTrayID",vm:"1",version:"DICOM"},"(300A,00F0)":{tag:"(300A,00F0)",vr:"IS",name:"NumberOfBlocks",vm:"1",version:"DICOM"},"(300A,00F2)":{tag:"(300A,00F2)",vr:"DS",name:"TotalBlockTrayFactor",vm:"1",version:"DICOM"},"(300A,00F3)":{tag:"(300A,00F3)",vr:"FL",name:"TotalBlockTrayWaterEquivalentThickness",vm:"1",version:"DICOM"},"(300A,00F4)":{tag:"(300A,00F4)",vr:"SQ",name:"BlockSequence",vm:"1",version:"DICOM"},"(300A,00F5)":{tag:"(300A,00F5)",vr:"SH",name:"BlockTrayID",vm:"1",version:"DICOM"},"(300A,00F6)":{tag:"(300A,00F6)",vr:"DS",name:"SourceToBlockTrayDistance",vm:"1",version:"DICOM"},"(300A,00F7)":{tag:"(300A,00F7)",vr:"FL",name:"IsocenterToBlockTrayDistance",vm:"1",version:"DICOM"},"(300A,00F8)":{tag:"(300A,00F8)",vr:"CS",name:"BlockType",vm:"1",version:"DICOM"},"(300A,00F9)":{tag:"(300A,00F9)",vr:"LO",name:"AccessoryCode",vm:"1",version:"DICOM"},"(300A,00FA)":{tag:"(300A,00FA)",vr:"CS",name:"BlockDivergence",vm:"1",version:"DICOM"},"(300A,00FB)":{tag:"(300A,00FB)",vr:"CS",name:"BlockMountingPosition",vm:"1",version:"DICOM"},"(300A,00FC)":{tag:"(300A,00FC)",vr:"IS",name:"BlockNumber",vm:"1",version:"DICOM"},"(300A,00FE)":{tag:"(300A,00FE)",vr:"LO",name:"BlockName",vm:"1",version:"DICOM"},"(300A,0100)":{tag:"(300A,0100)",vr:"DS",name:"BlockThickness",vm:"1",version:"DICOM"},"(300A,0102)":{tag:"(300A,0102)",vr:"DS",name:"BlockTransmission",vm:"1",version:"DICOM"},"(300A,0104)":{tag:"(300A,0104)",vr:"IS",name:"BlockNumberOfPoints",vm:"1",version:"DICOM"},"(300A,0106)":{tag:"(300A,0106)",vr:"DS",name:"BlockData",vm:"2-2n",version:"DICOM"},"(300A,0107)":{tag:"(300A,0107)",vr:"SQ",name:"ApplicatorSequence",vm:"1",version:"DICOM"},"(300A,0108)":{tag:"(300A,0108)",vr:"SH",name:"ApplicatorID",vm:"1",version:"DICOM"},"(300A,0109)":{tag:"(300A,0109)",vr:"CS",name:"ApplicatorType",vm:"1",version:"DICOM"},"(300A,010A)":{tag:"(300A,010A)",vr:"LO",name:"ApplicatorDescription",vm:"1",version:"DICOM"},"(300A,010C)":{tag:"(300A,010C)",vr:"DS",name:"CumulativeDoseReferenceCoefficient",vm:"1",version:"DICOM"},"(300A,010E)":{tag:"(300A,010E)",vr:"DS",name:"FinalCumulativeMetersetWeight",vm:"1",version:"DICOM"},"(300A,0110)":{tag:"(300A,0110)",vr:"IS",name:"NumberOfControlPoints",vm:"1",version:"DICOM"},"(300A,0111)":{tag:"(300A,0111)",vr:"SQ",name:"ControlPointSequence",vm:"1",version:"DICOM"},"(300A,0112)":{tag:"(300A,0112)",vr:"IS",name:"ControlPointIndex",vm:"1",version:"DICOM"},"(300A,0114)":{tag:"(300A,0114)",vr:"DS",name:"NominalBeamEnergy",vm:"1",version:"DICOM"},"(300A,0115)":{tag:"(300A,0115)",vr:"DS",name:"DoseRateSet",vm:"1",version:"DICOM"},"(300A,0116)":{tag:"(300A,0116)",vr:"SQ",name:"WedgePositionSequence",vm:"1",version:"DICOM"},"(300A,0118)":{tag:"(300A,0118)",vr:"CS",name:"WedgePosition",vm:"1",version:"DICOM"},"(300A,011A)":{tag:"(300A,011A)",vr:"SQ",name:"BeamLimitingDevicePositionSequence",vm:"1",version:"DICOM"},"(300A,011C)":{tag:"(300A,011C)",vr:"DS",name:"LeafJawPositions",vm:"2-2n",version:"DICOM"},"(300A,011E)":{tag:"(300A,011E)",vr:"DS",name:"GantryAngle",vm:"1",version:"DICOM"},"(300A,011F)":{tag:"(300A,011F)",vr:"CS",name:"GantryRotationDirection",vm:"1",version:"DICOM"},"(300A,0120)":{tag:"(300A,0120)",vr:"DS",name:"BeamLimitingDeviceAngle",vm:"1",version:"DICOM"},"(300A,0121)":{tag:"(300A,0121)",vr:"CS",name:"BeamLimitingDeviceRotationDirection",vm:"1",version:"DICOM"},"(300A,0122)":{tag:"(300A,0122)",vr:"DS",name:"PatientSupportAngle",vm:"1",version:"DICOM"},"(300A,0123)":{tag:"(300A,0123)",vr:"CS",name:"PatientSupportRotationDirection",vm:"1",version:"DICOM"},"(300A,0124)":{tag:"(300A,0124)",vr:"DS",name:"TableTopEccentricAxisDistance",vm:"1",version:"DICOM"},"(300A,0125)":{tag:"(300A,0125)",vr:"DS",name:"TableTopEccentricAngle",vm:"1",version:"DICOM"},"(300A,0126)":{tag:"(300A,0126)",vr:"CS",name:"TableTopEccentricRotationDirection",vm:"1",version:"DICOM"},"(300A,0128)":{tag:"(300A,0128)",vr:"DS",name:"TableTopVerticalPosition",vm:"1",version:"DICOM"},"(300A,0129)":{tag:"(300A,0129)",vr:"DS",name:"TableTopLongitudinalPosition",vm:"1",version:"DICOM"},"(300A,012A)":{tag:"(300A,012A)",vr:"DS",name:"TableTopLateralPosition",vm:"1",version:"DICOM"},"(300A,012C)":{tag:"(300A,012C)",vr:"DS",name:"IsocenterPosition",vm:"3",version:"DICOM"},"(300A,012E)":{tag:"(300A,012E)",vr:"DS",name:"SurfaceEntryPoint",vm:"3",version:"DICOM"},"(300A,0130)":{tag:"(300A,0130)",vr:"DS",name:"SourceToSurfaceDistance",vm:"1",version:"DICOM"},"(300A,0131)":{tag:"(300A,0131)",vr:"FL",name:"AverageBeamDosePointSourceToExternalContourSurfaceDistance",vm:"1",version:"DICOM"},"(300A,0132)":{tag:"(300A,0132)",vr:"FL",name:"SourceToExternalContourDistance",vm:"1",version:"DICOM"},"(300A,0133)":{tag:"(300A,0133)",vr:"FL",name:"ExternalContourEntryPoint",vm:"3",version:"DICOM"},"(300A,0134)":{tag:"(300A,0134)",vr:"DS",name:"CumulativeMetersetWeight",vm:"1",version:"DICOM"},"(300A,0140)":{tag:"(300A,0140)",vr:"FL",name:"TableTopPitchAngle",vm:"1",version:"DICOM"},"(300A,0142)":{tag:"(300A,0142)",vr:"CS",name:"TableTopPitchRotationDirection",vm:"1",version:"DICOM"},"(300A,0144)":{tag:"(300A,0144)",vr:"FL",name:"TableTopRollAngle",vm:"1",version:"DICOM"},"(300A,0146)":{tag:"(300A,0146)",vr:"CS",name:"TableTopRollRotationDirection",vm:"1",version:"DICOM"},"(300A,0148)":{tag:"(300A,0148)",vr:"FL",name:"HeadFixationAngle",vm:"1",version:"DICOM"},"(300A,014A)":{tag:"(300A,014A)",vr:"FL",name:"GantryPitchAngle",vm:"1",version:"DICOM"},"(300A,014C)":{tag:"(300A,014C)",vr:"CS",name:"GantryPitchRotationDirection",vm:"1",version:"DICOM"},"(300A,014E)":{tag:"(300A,014E)",vr:"FL",name:"GantryPitchAngleTolerance",vm:"1",version:"DICOM"},"(300A,0150)":{tag:"(300A,0150)",vr:"CS",name:"FixationEye",vm:"1",version:"DICOM"},"(300A,0151)":{tag:"(300A,0151)",vr:"DS",name:"ChairHeadFramePosition",vm:"1",version:"DICOM"},"(300A,0152)":{tag:"(300A,0152)",vr:"DS",name:"HeadFixationAngleTolerance",vm:"1",version:"DICOM"},"(300A,0153)":{tag:"(300A,0153)",vr:"DS",name:"ChairHeadFramePositionTolerance",vm:"1",version:"DICOM"},"(300A,0154)":{tag:"(300A,0154)",vr:"DS",name:"FixationLightAzimuthalAngleTolerance",vm:"1",version:"DICOM"},"(300A,0155)":{tag:"(300A,0155)",vr:"DS",name:"FixationLightPolarAngleTolerance",vm:"1",version:"DICOM"},"(300A,0180)":{tag:"(300A,0180)",vr:"SQ",name:"PatientSetupSequence",vm:"1",version:"DICOM"},"(300A,0182)":{tag:"(300A,0182)",vr:"IS",name:"PatientSetupNumber",vm:"1",version:"DICOM"},"(300A,0183)":{tag:"(300A,0183)",vr:"LO",name:"PatientSetupLabel",vm:"1",version:"DICOM"},"(300A,0184)":{tag:"(300A,0184)",vr:"LO",name:"PatientAdditionalPosition",vm:"1",version:"DICOM"},"(300A,0190)":{tag:"(300A,0190)",vr:"SQ",name:"FixationDeviceSequence",vm:"1",version:"DICOM"},"(300A,0192)":{tag:"(300A,0192)",vr:"CS",name:"FixationDeviceType",vm:"1",version:"DICOM"},"(300A,0194)":{tag:"(300A,0194)",vr:"SH",name:"FixationDeviceLabel",vm:"1",version:"DICOM"},"(300A,0196)":{tag:"(300A,0196)",vr:"ST",name:"FixationDeviceDescription",vm:"1",version:"DICOM"},"(300A,0198)":{tag:"(300A,0198)",vr:"SH",name:"FixationDevicePosition",vm:"1",version:"DICOM"},"(300A,0199)":{tag:"(300A,0199)",vr:"FL",name:"FixationDevicePitchAngle",vm:"1",version:"DICOM"},"(300A,019A)":{tag:"(300A,019A)",vr:"FL",name:"FixationDeviceRollAngle",vm:"1",version:"DICOM"},"(300A,01A0)":{tag:"(300A,01A0)",vr:"SQ",name:"ShieldingDeviceSequence",vm:"1",version:"DICOM"},"(300A,01A2)":{tag:"(300A,01A2)",vr:"CS",name:"ShieldingDeviceType",vm:"1",version:"DICOM"},"(300A,01A4)":{tag:"(300A,01A4)",vr:"SH",name:"ShieldingDeviceLabel",vm:"1",version:"DICOM"},"(300A,01A6)":{tag:"(300A,01A6)",vr:"ST",name:"ShieldingDeviceDescription",vm:"1",version:"DICOM"},"(300A,01A8)":{tag:"(300A,01A8)",vr:"SH",name:"ShieldingDevicePosition",vm:"1",version:"DICOM"},"(300A,01B0)":{tag:"(300A,01B0)",vr:"CS",name:"SetupTechnique",vm:"1",version:"DICOM"},"(300A,01B2)":{tag:"(300A,01B2)",vr:"ST",name:"SetupTechniqueDescription",vm:"1",version:"DICOM"},"(300A,01B4)":{tag:"(300A,01B4)",vr:"SQ",name:"SetupDeviceSequence",vm:"1",version:"DICOM"},"(300A,01B6)":{tag:"(300A,01B6)",vr:"CS",name:"SetupDeviceType",vm:"1",version:"DICOM"},"(300A,01B8)":{tag:"(300A,01B8)",vr:"SH",name:"SetupDeviceLabel",vm:"1",version:"DICOM"},"(300A,01BA)":{tag:"(300A,01BA)",vr:"ST",name:"SetupDeviceDescription",vm:"1",version:"DICOM"},"(300A,01BC)":{tag:"(300A,01BC)",vr:"DS",name:"SetupDeviceParameter",vm:"1",version:"DICOM"},"(300A,01D0)":{tag:"(300A,01D0)",vr:"ST",name:"SetupReferenceDescription",vm:"1",version:"DICOM"},"(300A,01D2)":{tag:"(300A,01D2)",vr:"DS",name:"TableTopVerticalSetupDisplacement",vm:"1",version:"DICOM"},"(300A,01D4)":{tag:"(300A,01D4)",vr:"DS",name:"TableTopLongitudinalSetupDisplacement",vm:"1",version:"DICOM"},"(300A,01D6)":{tag:"(300A,01D6)",vr:"DS",name:"TableTopLateralSetupDisplacement",vm:"1",version:"DICOM"},"(300A,0200)":{tag:"(300A,0200)",vr:"CS",name:"BrachyTreatmentTechnique",vm:"1",version:"DICOM"},"(300A,0202)":{tag:"(300A,0202)",vr:"CS",name:"BrachyTreatmentType",vm:"1",version:"DICOM"},"(300A,0206)":{tag:"(300A,0206)",vr:"SQ",name:"TreatmentMachineSequence",vm:"1",version:"DICOM"},"(300A,0210)":{tag:"(300A,0210)",vr:"SQ",name:"SourceSequence",vm:"1",version:"DICOM"},"(300A,0212)":{tag:"(300A,0212)",vr:"IS",name:"SourceNumber",vm:"1",version:"DICOM"},"(300A,0214)":{tag:"(300A,0214)",vr:"CS",name:"SourceType",vm:"1",version:"DICOM"},"(300A,0216)":{tag:"(300A,0216)",vr:"LO",name:"SourceManufacturer",vm:"1",version:"DICOM"},"(300A,0218)":{tag:"(300A,0218)",vr:"DS",name:"ActiveSourceDiameter",vm:"1",version:"DICOM"},"(300A,021A)":{tag:"(300A,021A)",vr:"DS",name:"ActiveSourceLength",vm:"1",version:"DICOM"},"(300A,021B)":{tag:"(300A,021B)",vr:"SH",name:"SourceModelID",vm:"1",version:"DICOM"},"(300A,021C)":{tag:"(300A,021C)",vr:"LO",name:"SourceDescription",vm:"1",version:"DICOM"},"(300A,0222)":{tag:"(300A,0222)",vr:"DS",name:"SourceEncapsulationNominalThickness",vm:"1",version:"DICOM"},"(300A,0224)":{tag:"(300A,0224)",vr:"DS",name:"SourceEncapsulationNominalTransmission",vm:"1",version:"DICOM"},"(300A,0226)":{tag:"(300A,0226)",vr:"LO",name:"SourceIsotopeName",vm:"1",version:"DICOM"},"(300A,0228)":{tag:"(300A,0228)",vr:"DS",name:"SourceIsotopeHalfLife",vm:"1",version:"DICOM"},"(300A,0229)":{tag:"(300A,0229)",vr:"CS",name:"SourceStrengthUnits",vm:"1",version:"DICOM"},"(300A,022A)":{tag:"(300A,022A)",vr:"DS",name:"ReferenceAirKermaRate",vm:"1",version:"DICOM"},"(300A,022B)":{tag:"(300A,022B)",vr:"DS",name:"SourceStrength",vm:"1",version:"DICOM"},"(300A,022C)":{tag:"(300A,022C)",vr:"DA",name:"SourceStrengthReferenceDate",vm:"1",version:"DICOM"},"(300A,022E)":{tag:"(300A,022E)",vr:"TM",name:"SourceStrengthReferenceTime",vm:"1",version:"DICOM"},"(300A,0230)":{tag:"(300A,0230)",vr:"SQ",name:"ApplicationSetupSequence",vm:"1",version:"DICOM"},"(300A,0232)":{tag:"(300A,0232)",vr:"CS",name:"ApplicationSetupType",vm:"1",version:"DICOM"},"(300A,0234)":{tag:"(300A,0234)",vr:"IS",name:"ApplicationSetupNumber",vm:"1",version:"DICOM"},"(300A,0236)":{tag:"(300A,0236)",vr:"LO",name:"ApplicationSetupName",vm:"1",version:"DICOM"},"(300A,0238)":{tag:"(300A,0238)",vr:"LO",name:"ApplicationSetupManufacturer",vm:"1",version:"DICOM"},"(300A,0240)":{tag:"(300A,0240)",vr:"IS",name:"TemplateNumber",vm:"1",version:"DICOM"},"(300A,0242)":{tag:"(300A,0242)",vr:"SH",name:"TemplateType",vm:"1",version:"DICOM"},"(300A,0244)":{tag:"(300A,0244)",vr:"LO",name:"TemplateName",vm:"1",version:"DICOM"},"(300A,0250)":{tag:"(300A,0250)",vr:"DS",name:"TotalReferenceAirKerma",vm:"1",version:"DICOM"},"(300A,0260)":{tag:"(300A,0260)",vr:"SQ",name:"BrachyAccessoryDeviceSequence",vm:"1",version:"DICOM"},"(300A,0262)":{tag:"(300A,0262)",vr:"IS",name:"BrachyAccessoryDeviceNumber",vm:"1",version:"DICOM"},"(300A,0263)":{tag:"(300A,0263)",vr:"SH",name:"BrachyAccessoryDeviceID",vm:"1",version:"DICOM"},"(300A,0264)":{tag:"(300A,0264)",vr:"CS",name:"BrachyAccessoryDeviceType",vm:"1",version:"DICOM"},"(300A,0266)":{tag:"(300A,0266)",vr:"LO",name:"BrachyAccessoryDeviceName",vm:"1",version:"DICOM"},"(300A,026A)":{tag:"(300A,026A)",vr:"DS",name:"BrachyAccessoryDeviceNominalThickness",vm:"1",version:"DICOM"},"(300A,026C)":{tag:"(300A,026C)",vr:"DS",name:"BrachyAccessoryDeviceNominalTransmission",vm:"1",version:"DICOM"},"(300A,0271)":{tag:"(300A,0271)",vr:"DS",name:"ChannelEffectiveLength",vm:"1",version:"DICOM"},"(300A,0272)":{tag:"(300A,0272)",vr:"DS",name:"ChannelInnerLength",vm:"1",version:"DICOM"},"(300A,0273)":{tag:"(300A,0273)",vr:"SH",name:"AfterloaderChannelID",vm:"1",version:"DICOM"},"(300A,0274)":{tag:"(300A,0274)",vr:"DS",name:"SourceApplicatorTipLength",vm:"1",version:"DICOM"},"(300A,0280)":{tag:"(300A,0280)",vr:"SQ",name:"ChannelSequence",vm:"1",version:"DICOM"},"(300A,0282)":{tag:"(300A,0282)",vr:"IS",name:"ChannelNumber",vm:"1",version:"DICOM"},"(300A,0284)":{tag:"(300A,0284)",vr:"DS",name:"ChannelLength",vm:"1",version:"DICOM"},"(300A,0286)":{tag:"(300A,0286)",vr:"DS",name:"ChannelTotalTime",vm:"1",version:"DICOM"},"(300A,0288)":{tag:"(300A,0288)",vr:"CS",name:"SourceMovementType",vm:"1",version:"DICOM"},"(300A,028A)":{tag:"(300A,028A)",vr:"IS",name:"NumberOfPulses",vm:"1",version:"DICOM"},"(300A,028C)":{tag:"(300A,028C)",vr:"DS",name:"PulseRepetitionInterval",vm:"1",version:"DICOM"},"(300A,0290)":{tag:"(300A,0290)",vr:"IS",name:"SourceApplicatorNumber",vm:"1",version:"DICOM"},"(300A,0291)":{tag:"(300A,0291)",vr:"SH",name:"SourceApplicatorID",vm:"1",version:"DICOM"},"(300A,0292)":{tag:"(300A,0292)",vr:"CS",name:"SourceApplicatorType",vm:"1",version:"DICOM"},"(300A,0294)":{tag:"(300A,0294)",vr:"LO",name:"SourceApplicatorName",vm:"1",version:"DICOM"},"(300A,0296)":{tag:"(300A,0296)",vr:"DS",name:"SourceApplicatorLength",vm:"1",version:"DICOM"},"(300A,0298)":{tag:"(300A,0298)",vr:"LO",name:"SourceApplicatorManufacturer",vm:"1",version:"DICOM"},"(300A,029C)":{tag:"(300A,029C)",vr:"DS",name:"SourceApplicatorWallNominalThickness",vm:"1",version:"DICOM"},"(300A,029E)":{tag:"(300A,029E)",vr:"DS",name:"SourceApplicatorWallNominalTransmission",vm:"1",version:"DICOM"},"(300A,02A0)":{tag:"(300A,02A0)",vr:"DS",name:"SourceApplicatorStepSize",vm:"1",version:"DICOM"},"(300A,02A1)":{tag:"(300A,02A1)",vr:"IS",name:"ApplicatorShapeReferencedROINumber",vm:"1",version:"DICOM"},"(300A,02A2)":{tag:"(300A,02A2)",vr:"IS",name:"TransferTubeNumber",vm:"1",version:"DICOM"},"(300A,02A4)":{tag:"(300A,02A4)",vr:"DS",name:"TransferTubeLength",vm:"1",version:"DICOM"},"(300A,02B0)":{tag:"(300A,02B0)",vr:"SQ",name:"ChannelShieldSequence",vm:"1",version:"DICOM"},"(300A,02B2)":{tag:"(300A,02B2)",vr:"IS",name:"ChannelShieldNumber",vm:"1",version:"DICOM"},"(300A,02B3)":{tag:"(300A,02B3)",vr:"SH",name:"ChannelShieldID",vm:"1",version:"DICOM"},"(300A,02B4)":{tag:"(300A,02B4)",vr:"LO",name:"ChannelShieldName",vm:"1",version:"DICOM"},"(300A,02B8)":{tag:"(300A,02B8)",vr:"DS",name:"ChannelShieldNominalThickness",vm:"1",version:"DICOM"},"(300A,02BA)":{tag:"(300A,02BA)",vr:"DS",name:"ChannelShieldNominalTransmission",vm:"1",version:"DICOM"},"(300A,02C8)":{tag:"(300A,02C8)",vr:"DS",name:"FinalCumulativeTimeWeight",vm:"1",version:"DICOM"},"(300A,02D0)":{tag:"(300A,02D0)",vr:"SQ",name:"BrachyControlPointSequence",vm:"1",version:"DICOM"},"(300A,02D2)":{tag:"(300A,02D2)",vr:"DS",name:"ControlPointRelativePosition",vm:"1",version:"DICOM"},"(300A,02D4)":{tag:"(300A,02D4)",vr:"DS",name:"ControlPoint3DPosition",vm:"3",version:"DICOM"},"(300A,02D6)":{tag:"(300A,02D6)",vr:"DS",name:"CumulativeTimeWeight",vm:"1",version:"DICOM"},"(300A,02E0)":{tag:"(300A,02E0)",vr:"CS",name:"CompensatorDivergence",vm:"1",version:"DICOM"},"(300A,02E1)":{tag:"(300A,02E1)",vr:"CS",name:"CompensatorMountingPosition",vm:"1",version:"DICOM"},"(300A,02E2)":{tag:"(300A,02E2)",vr:"DS",name:"SourceToCompensatorDistance",vm:"1-n",version:"DICOM"},"(300A,02E3)":{tag:"(300A,02E3)",vr:"FL",name:"TotalCompensatorTrayWaterEquivalentThickness",vm:"1",version:"DICOM"},"(300A,02E4)":{tag:"(300A,02E4)",vr:"FL",name:"IsocenterToCompensatorTrayDistance",vm:"1",version:"DICOM"},"(300A,02E5)":{tag:"(300A,02E5)",vr:"FL",name:"CompensatorColumnOffset",vm:"1",version:"DICOM"},"(300A,02E6)":{tag:"(300A,02E6)",vr:"FL",name:"IsocenterToCompensatorDistances",vm:"1-n",version:"DICOM"},"(300A,02E7)":{tag:"(300A,02E7)",vr:"FL",name:"CompensatorRelativeStoppingPowerRatio",vm:"1",version:"DICOM"},"(300A,02E8)":{tag:"(300A,02E8)",vr:"FL",name:"CompensatorMillingToolDiameter",vm:"1",version:"DICOM"},"(300A,02EA)":{tag:"(300A,02EA)",vr:"SQ",name:"IonRangeCompensatorSequence",vm:"1",version:"DICOM"},"(300A,02EB)":{tag:"(300A,02EB)",vr:"LT",name:"CompensatorDescription",vm:"1",version:"DICOM"},"(300A,0302)":{tag:"(300A,0302)",vr:"IS",name:"RadiationMassNumber",vm:"1",version:"DICOM"},"(300A,0304)":{tag:"(300A,0304)",vr:"IS",name:"RadiationAtomicNumber",vm:"1",version:"DICOM"},"(300A,0306)":{tag:"(300A,0306)",vr:"SS",name:"RadiationChargeState",vm:"1",version:"DICOM"},"(300A,0308)":{tag:"(300A,0308)",vr:"CS",name:"ScanMode",vm:"1",version:"DICOM"},"(300A,0309)":{tag:"(300A,0309)",vr:"CS",name:"ModulatedScanModeType",vm:"1",version:"DICOM"},"(300A,030A)":{tag:"(300A,030A)",vr:"FL",name:"VirtualSourceAxisDistances",vm:"2",version:"DICOM"},"(300A,030C)":{tag:"(300A,030C)",vr:"SQ",name:"SnoutSequence",vm:"1",version:"DICOM"},"(300A,030D)":{tag:"(300A,030D)",vr:"FL",name:"SnoutPosition",vm:"1",version:"DICOM"},"(300A,030F)":{tag:"(300A,030F)",vr:"SH",name:"SnoutID",vm:"1",version:"DICOM"},"(300A,0312)":{tag:"(300A,0312)",vr:"IS",name:"NumberOfRangeShifters",vm:"1",version:"DICOM"},"(300A,0314)":{tag:"(300A,0314)",vr:"SQ",name:"RangeShifterSequence",vm:"1",version:"DICOM"},"(300A,0316)":{tag:"(300A,0316)",vr:"IS",name:"RangeShifterNumber",vm:"1",version:"DICOM"},"(300A,0318)":{tag:"(300A,0318)",vr:"SH",name:"RangeShifterID",vm:"1",version:"DICOM"},"(300A,0320)":{tag:"(300A,0320)",vr:"CS",name:"RangeShifterType",vm:"1",version:"DICOM"},"(300A,0322)":{tag:"(300A,0322)",vr:"LO",name:"RangeShifterDescription",vm:"1",version:"DICOM"},"(300A,0330)":{tag:"(300A,0330)",vr:"IS",name:"NumberOfLateralSpreadingDevices",vm:"1",version:"DICOM"},"(300A,0332)":{tag:"(300A,0332)",vr:"SQ",name:"LateralSpreadingDeviceSequence",vm:"1",version:"DICOM"},"(300A,0334)":{tag:"(300A,0334)",vr:"IS",name:"LateralSpreadingDeviceNumber",vm:"1",version:"DICOM"},"(300A,0336)":{tag:"(300A,0336)",vr:"SH",name:"LateralSpreadingDeviceID",vm:"1",version:"DICOM"},"(300A,0338)":{tag:"(300A,0338)",vr:"CS",name:"LateralSpreadingDeviceType",vm:"1",version:"DICOM"},"(300A,033A)":{tag:"(300A,033A)",vr:"LO",name:"LateralSpreadingDeviceDescription",vm:"1",version:"DICOM"},"(300A,033C)":{tag:"(300A,033C)",vr:"FL",name:"LateralSpreadingDeviceWaterEquivalentThickness",vm:"1",version:"DICOM"},"(300A,0340)":{tag:"(300A,0340)",vr:"IS",name:"NumberOfRangeModulators",vm:"1",version:"DICOM"},"(300A,0342)":{tag:"(300A,0342)",vr:"SQ",name:"RangeModulatorSequence",vm:"1",version:"DICOM"},"(300A,0344)":{tag:"(300A,0344)",vr:"IS",name:"RangeModulatorNumber",vm:"1",version:"DICOM"},"(300A,0346)":{tag:"(300A,0346)",vr:"SH",name:"RangeModulatorID",vm:"1",version:"DICOM"},"(300A,0348)":{tag:"(300A,0348)",vr:"CS",name:"RangeModulatorType",vm:"1",version:"DICOM"},"(300A,034A)":{tag:"(300A,034A)",vr:"LO",name:"RangeModulatorDescription",vm:"1",version:"DICOM"},"(300A,034C)":{tag:"(300A,034C)",vr:"SH",name:"BeamCurrentModulationID",vm:"1",version:"DICOM"},"(300A,0350)":{tag:"(300A,0350)",vr:"CS",name:"PatientSupportType",vm:"1",version:"DICOM"},"(300A,0352)":{tag:"(300A,0352)",vr:"SH",name:"PatientSupportID",vm:"1",version:"DICOM"},"(300A,0354)":{tag:"(300A,0354)",vr:"LO",name:"PatientSupportAccessoryCode",vm:"1",version:"DICOM"},"(300A,0355)":{tag:"(300A,0355)",vr:"LO",name:"TrayAccessoryCode",vm:"1",version:"DICOM"},"(300A,0356)":{tag:"(300A,0356)",vr:"FL",name:"FixationLightAzimuthalAngle",vm:"1",version:"DICOM"},"(300A,0358)":{tag:"(300A,0358)",vr:"FL",name:"FixationLightPolarAngle",vm:"1",version:"DICOM"},"(300A,035A)":{tag:"(300A,035A)",vr:"FL",name:"MetersetRate",vm:"1",version:"DICOM"},"(300A,0360)":{tag:"(300A,0360)",vr:"SQ",name:"RangeShifterSettingsSequence",vm:"1",version:"DICOM"},"(300A,0362)":{tag:"(300A,0362)",vr:"LO",name:"RangeShifterSetting",vm:"1",version:"DICOM"},"(300A,0364)":{tag:"(300A,0364)",vr:"FL",name:"IsocenterToRangeShifterDistance",vm:"1",version:"DICOM"},"(300A,0366)":{tag:"(300A,0366)",vr:"FL",name:"RangeShifterWaterEquivalentThickness",vm:"1",version:"DICOM"},"(300A,0370)":{tag:"(300A,0370)",vr:"SQ",name:"LateralSpreadingDeviceSettingsSequence",vm:"1",version:"DICOM"},"(300A,0372)":{tag:"(300A,0372)",vr:"LO",name:"LateralSpreadingDeviceSetting",vm:"1",version:"DICOM"},"(300A,0374)":{tag:"(300A,0374)",vr:"FL",name:"IsocenterToLateralSpreadingDeviceDistance",vm:"1",version:"DICOM"},"(300A,0380)":{tag:"(300A,0380)",vr:"SQ",name:"RangeModulatorSettingsSequence",vm:"1",version:"DICOM"},"(300A,0382)":{tag:"(300A,0382)",vr:"FL",name:"RangeModulatorGatingStartValue",vm:"1",version:"DICOM"},"(300A,0384)":{tag:"(300A,0384)",vr:"FL",name:"RangeModulatorGatingStopValue",vm:"1",version:"DICOM"},"(300A,0386)":{tag:"(300A,0386)",vr:"FL",name:"RangeModulatorGatingStartWaterEquivalentThickness",vm:"1",version:"DICOM"},"(300A,0388)":{tag:"(300A,0388)",vr:"FL",name:"RangeModulatorGatingStopWaterEquivalentThickness",vm:"1",version:"DICOM"},"(300A,038A)":{tag:"(300A,038A)",vr:"FL",name:"IsocenterToRangeModulatorDistance",vm:"1",version:"DICOM"},"(300A,038F)":{tag:"(300A,038F)",vr:"FL",name:"ScanSpotTimeOffset",vm:"1-n",version:"DICOM"},"(300A,0390)":{tag:"(300A,0390)",vr:"SH",name:"ScanSpotTuneID",vm:"1",version:"DICOM"},"(300A,0391)":{tag:"(300A,0391)",vr:"IS",name:"ScanSpotPrescribedIndices",vm:"1-n",version:"DICOM"},"(300A,0392)":{tag:"(300A,0392)",vr:"IS",name:"NumberOfScanSpotPositions",vm:"1",version:"DICOM"},"(300A,0393)":{tag:"(300A,0393)",vr:"CS",name:"ScanSpotReordered",vm:"1",version:"DICOM"},"(300A,0394)":{tag:"(300A,0394)",vr:"FL",name:"ScanSpotPositionMap",vm:"1-n",version:"DICOM"},"(300A,0395)":{tag:"(300A,0395)",vr:"CS",name:"ScanSpotReorderingAllowed",vm:"1",version:"DICOM"},"(300A,0396)":{tag:"(300A,0396)",vr:"FL",name:"ScanSpotMetersetWeights",vm:"1-n",version:"DICOM"},"(300A,0398)":{tag:"(300A,0398)",vr:"FL",name:"ScanningSpotSize",vm:"2",version:"DICOM"},"(300A,0399)":{tag:"(300A,0399)",vr:"FL",name:"ScanSpotSizesDelivered",vm:"2-2n",version:"DICOM"},"(300A,039A)":{tag:"(300A,039A)",vr:"IS",name:"NumberOfPaintings",vm:"1",version:"DICOM"},"(300A,03A0)":{tag:"(300A,03A0)",vr:"SQ",name:"IonToleranceTableSequence",vm:"1",version:"DICOM"},"(300A,03A2)":{tag:"(300A,03A2)",vr:"SQ",name:"IonBeamSequence",vm:"1",version:"DICOM"},"(300A,03A4)":{tag:"(300A,03A4)",vr:"SQ",name:"IonBeamLimitingDeviceSequence",vm:"1",version:"DICOM"},"(300A,03A6)":{tag:"(300A,03A6)",vr:"SQ",name:"IonBlockSequence",vm:"1",version:"DICOM"},"(300A,03A8)":{tag:"(300A,03A8)",vr:"SQ",name:"IonControlPointSequence",vm:"1",version:"DICOM"},"(300A,03AA)":{tag:"(300A,03AA)",vr:"SQ",name:"IonWedgeSequence",vm:"1",version:"DICOM"},"(300A,03AC)":{tag:"(300A,03AC)",vr:"SQ",name:"IonWedgePositionSequence",vm:"1",version:"DICOM"},"(300A,0401)":{tag:"(300A,0401)",vr:"SQ",name:"ReferencedSetupImageSequence",vm:"1",version:"DICOM"},"(300A,0402)":{tag:"(300A,0402)",vr:"ST",name:"SetupImageComment",vm:"1",version:"DICOM"},"(300A,0410)":{tag:"(300A,0410)",vr:"SQ",name:"MotionSynchronizationSequence",vm:"1",version:"DICOM"},"(300A,0412)":{tag:"(300A,0412)",vr:"FL",name:"ControlPointOrientation",vm:"3",version:"DICOM"},"(300A,0420)":{tag:"(300A,0420)",vr:"SQ",name:"GeneralAccessorySequence",vm:"1",version:"DICOM"},"(300A,0421)":{tag:"(300A,0421)",vr:"SH",name:"GeneralAccessoryID",vm:"1",version:"DICOM"},"(300A,0422)":{tag:"(300A,0422)",vr:"ST",name:"GeneralAccessoryDescription",vm:"1",version:"DICOM"},"(300A,0423)":{tag:"(300A,0423)",vr:"CS",name:"GeneralAccessoryType",vm:"1",version:"DICOM"},"(300A,0424)":{tag:"(300A,0424)",vr:"IS",name:"GeneralAccessoryNumber",vm:"1",version:"DICOM"},"(300A,0425)":{tag:"(300A,0425)",vr:"FL",name:"SourceToGeneralAccessoryDistance",vm:"1",version:"DICOM"},"(300A,0426)":{tag:"(300A,0426)",vr:"DS",name:"IsocenterToGeneralAccessoryDistance",vm:"1",version:"DICOM"},"(300A,0431)":{tag:"(300A,0431)",vr:"SQ",name:"ApplicatorGeometrySequence",vm:"1",version:"DICOM"},"(300A,0432)":{tag:"(300A,0432)",vr:"CS",name:"ApplicatorApertureShape",vm:"1",version:"DICOM"},"(300A,0433)":{tag:"(300A,0433)",vr:"FL",name:"ApplicatorOpening",vm:"1",version:"DICOM"},"(300A,0434)":{tag:"(300A,0434)",vr:"FL",name:"ApplicatorOpeningX",vm:"1",version:"DICOM"},"(300A,0435)":{tag:"(300A,0435)",vr:"FL",name:"ApplicatorOpeningY",vm:"1",version:"DICOM"},"(300A,0436)":{tag:"(300A,0436)",vr:"FL",name:"SourceToApplicatorMountingPositionDistance",vm:"1",version:"DICOM"},"(300A,0440)":{tag:"(300A,0440)",vr:"IS",name:"NumberOfBlockSlabItems",vm:"1",version:"DICOM"},"(300A,0441)":{tag:"(300A,0441)",vr:"SQ",name:"BlockSlabSequence",vm:"1",version:"DICOM"},"(300A,0442)":{tag:"(300A,0442)",vr:"DS",name:"BlockSlabThickness",vm:"1",version:"DICOM"},"(300A,0443)":{tag:"(300A,0443)",vr:"US",name:"BlockSlabNumber",vm:"1",version:"DICOM"},"(300A,0450)":{tag:"(300A,0450)",vr:"SQ",name:"DeviceMotionControlSequence",vm:"1",version:"DICOM"},"(300A,0451)":{tag:"(300A,0451)",vr:"CS",name:"DeviceMotionExecutionMode",vm:"1",version:"DICOM"},"(300A,0452)":{tag:"(300A,0452)",vr:"CS",name:"DeviceMotionObservationMode",vm:"1",version:"DICOM"},"(300A,0453)":{tag:"(300A,0453)",vr:"SQ",name:"DeviceMotionParameterCodeSequence",vm:"1",version:"DICOM"},"(300A,0501)":{tag:"(300A,0501)",vr:"FL",name:"DistalDepthFraction",vm:"1",version:"DICOM"},"(300A,0502)":{tag:"(300A,0502)",vr:"FL",name:"DistalDepth",vm:"1",version:"DICOM"},"(300A,0503)":{tag:"(300A,0503)",vr:"FL",name:"NominalRangeModulationFractions",vm:"2",version:"DICOM"},"(300A,0504)":{tag:"(300A,0504)",vr:"FL",name:"NominalRangeModulatedRegionDepths",vm:"2",version:"DICOM"},"(300A,0505)":{tag:"(300A,0505)",vr:"SQ",name:"DepthDoseParametersSequence",vm:"1",version:"DICOM"},"(300A,0506)":{tag:"(300A,0506)",vr:"SQ",name:"DeliveredDepthDoseParametersSequence",vm:"1",version:"DICOM"},"(300A,0507)":{tag:"(300A,0507)",vr:"FL",name:"DeliveredDistalDepthFraction",vm:"1",version:"DICOM"},"(300A,0508)":{tag:"(300A,0508)",vr:"FL",name:"DeliveredDistalDepth",vm:"1",version:"DICOM"},"(300A,0509)":{tag:"(300A,0509)",vr:"FL",name:"DeliveredNominalRangeModulationFractions",vm:"2",version:"DICOM"},"(300A,0510)":{tag:"(300A,0510)",vr:"FL",name:"DeliveredNominalRangeModulatedRegionDepths",vm:"2",version:"DICOM"},"(300A,0511)":{tag:"(300A,0511)",vr:"CS",name:"DeliveredReferenceDoseDefinition",vm:"1",version:"DICOM"},"(300A,0512)":{tag:"(300A,0512)",vr:"CS",name:"ReferenceDoseDefinition",vm:"1",version:"DICOM"},"(300A,0600)":{tag:"(300A,0600)",vr:"US",name:"RTControlPointIndex",vm:"1",version:"DICOM"},"(300A,0601)":{tag:"(300A,0601)",vr:"US",name:"RadiationGenerationModeIndex",vm:"1",version:"DICOM"},"(300A,0602)":{tag:"(300A,0602)",vr:"US",name:"ReferencedDefinedDeviceIndex",vm:"1",version:"DICOM"},"(300A,0603)":{tag:"(300A,0603)",vr:"US",name:"RadiationDoseIdentificationIndex",vm:"1",version:"DICOM"},"(300A,0604)":{tag:"(300A,0604)",vr:"US",name:"NumberOfRTControlPoints",vm:"1",version:"DICOM"},"(300A,0605)":{tag:"(300A,0605)",vr:"US",name:"ReferencedRadiationGenerationModeIndex",vm:"1",version:"DICOM"},"(300A,0606)":{tag:"(300A,0606)",vr:"US",name:"TreatmentPositionIndex",vm:"1",version:"DICOM"},"(300A,0607)":{tag:"(300A,0607)",vr:"US",name:"ReferencedDeviceIndex",vm:"1",version:"DICOM"},"(300A,0608)":{tag:"(300A,0608)",vr:"LO",name:"TreatmentPositionGroupLabel",vm:"1",version:"DICOM"},"(300A,0609)":{tag:"(300A,0609)",vr:"UI",name:"TreatmentPositionGroupUID",vm:"1",version:"DICOM"},"(300A,060A)":{tag:"(300A,060A)",vr:"SQ",name:"TreatmentPositionGroupSequence",vm:"1",version:"DICOM"},"(300A,060B)":{tag:"(300A,060B)",vr:"US",name:"ReferencedTreatmentPositionIndex",vm:"1",version:"DICOM"},"(300A,060C)":{tag:"(300A,060C)",vr:"US",name:"ReferencedRadiationDoseIdentificationIndex",vm:"1",version:"DICOM"},"(300A,060D)":{tag:"(300A,060D)",vr:"FD",name:"RTAccessoryHolderWaterEquivalentThickness",vm:"1",version:"DICOM"},"(300A,060E)":{tag:"(300A,060E)",vr:"US",name:"ReferencedRTAccessoryHolderDeviceIndex",vm:"1",version:"DICOM"},"(300A,060F)":{tag:"(300A,060F)",vr:"CS",name:"RTAccessoryHolderSlotExistenceFlag",vm:"1",version:"DICOM"},"(300A,0610)":{tag:"(300A,0610)",vr:"SQ",name:"RTAccessoryHolderSlotSequence",vm:"1",version:"DICOM"},"(300A,0611)":{tag:"(300A,0611)",vr:"LO",name:"RTAccessoryHolderSlotID",vm:"1",version:"DICOM"},"(300A,0612)":{tag:"(300A,0612)",vr:"FD",name:"RTAccessoryHolderSlotDistance",vm:"1",version:"DICOM"},"(300A,0613)":{tag:"(300A,0613)",vr:"FD",name:"RTAccessorySlotDistance",vm:"1",version:"DICOM"},"(300A,0614)":{tag:"(300A,0614)",vr:"SQ",name:"RTAccessoryHolderDefinitionSequence",vm:"1",version:"DICOM"},"(300A,0615)":{tag:"(300A,0615)",vr:"LO",name:"RTAccessoryDeviceSlotID",vm:"1",version:"DICOM"},"(300A,0616)":{tag:"(300A,0616)",vr:"SQ",name:"RTRadiationSequence",vm:"1",version:"DICOM"},"(300A,0617)":{tag:"(300A,0617)",vr:"SQ",name:"RadiationDoseSequence",vm:"1",version:"DICOM"},"(300A,0618)":{tag:"(300A,0618)",vr:"SQ",name:"RadiationDoseIdentificationSequence",vm:"1",version:"DICOM"},"(300A,0619)":{tag:"(300A,0619)",vr:"LO",name:"RadiationDoseIdentificationLabel",vm:"1",version:"DICOM"},"(300A,061A)":{tag:"(300A,061A)",vr:"CS",name:"ReferenceDoseType",vm:"1",version:"DICOM"},"(300A,061B)":{tag:"(300A,061B)",vr:"CS",name:"PrimaryDoseValueIndicator",vm:"1",version:"DICOM"},"(300A,061C)":{tag:"(300A,061C)",vr:"SQ",name:"DoseValuesSequence",vm:"1",version:"DICOM"},"(300A,061D)":{tag:"(300A,061D)",vr:"CS",name:"DoseValuePurpose",vm:"1-n",version:"DICOM"},"(300A,061E)":{tag:"(300A,061E)",vr:"FD",name:"ReferenceDosePointCoordinates",vm:"3",version:"DICOM"},"(300A,061F)":{tag:"(300A,061F)",vr:"SQ",name:"RadiationDoseValuesParametersSequence",vm:"1",version:"DICOM"},"(300A,0620)":{tag:"(300A,0620)",vr:"SQ",name:"MetersetToDoseMappingSequence",vm:"1",version:"DICOM"},"(300A,0621)":{tag:"(300A,0621)",vr:"SQ",name:"ExpectedInVivoMeasurementValuesSequence",vm:"1",version:"DICOM"},"(300A,0622)":{tag:"(300A,0622)",vr:"US",name:"ExpectedInVivoMeasurementValueIndex",vm:"1",version:"DICOM"},"(300A,0623)":{tag:"(300A,0623)",vr:"LO",name:"RadiationDoseInVivoMeasurementLabel",vm:"1",version:"DICOM"},"(300A,0624)":{tag:"(300A,0624)",vr:"FD",name:"RadiationDoseCentralAxisDisplacement",vm:"2",version:"DICOM"},"(300A,0625)":{tag:"(300A,0625)",vr:"FD",name:"RadiationDoseValue",vm:"1",version:"DICOM"},"(300A,0626)":{tag:"(300A,0626)",vr:"FD",name:"RadiationDoseSourceToSkinDistance",vm:"1",version:"DICOM"},"(300A,0627)":{tag:"(300A,0627)",vr:"FD",name:"RadiationDoseMeasurementPointCoordinates",vm:"3",version:"DICOM"},"(300A,0628)":{tag:"(300A,0628)",vr:"FD",name:"RadiationDoseSourceToExternalContourDistance",vm:"1",version:"DICOM"},"(300A,0629)":{tag:"(300A,0629)",vr:"SQ",name:"RTToleranceSetSequence",vm:"1",version:"DICOM"},"(300A,062A)":{tag:"(300A,062A)",vr:"LO",name:"RTToleranceSetLabel",vm:"1",version:"DICOM"},"(300A,062B)":{tag:"(300A,062B)",vr:"SQ",name:"AttributeToleranceValuesSequence",vm:"1",version:"DICOM"},"(300A,062C)":{tag:"(300A,062C)",vr:"FD",name:"ToleranceValue",vm:"1",version:"DICOM"},"(300A,062D)":{tag:"(300A,062D)",vr:"SQ",name:"PatientSupportPositionToleranceSequence",vm:"1",version:"DICOM"},"(300A,062E)":{tag:"(300A,062E)",vr:"FD",name:"TreatmentTimeLimit",vm:"1",version:"DICOM"},"(300A,062F)":{tag:"(300A,062F)",vr:"SQ",name:"CArmPhotonElectronControlPointSequence",vm:"1",version:"DICOM"},"(300A,0630)":{tag:"(300A,0630)",vr:"SQ",name:"ReferencedRTRadiationSequence",vm:"1",version:"DICOM"},"(300A,0631)":{tag:"(300A,0631)",vr:"SQ",name:"ReferencedRTInstanceSequence",vm:"1",version:"DICOM"},"(300A,0632)":{tag:"(300A,0632)",vr:"SQ",name:"ReferencedRTPatientSetupSequence",vm:"1",version:"DICOM"},"(300A,0634)":{tag:"(300A,0634)",vr:"FD",name:"SourceToPatientSurfaceDistance",vm:"1",version:"DICOM"},"(300A,0635)":{tag:"(300A,0635)",vr:"SQ",name:"TreatmentMachineSpecialModeCodeSequence",vm:"1",version:"DICOM"},"(300A,0636)":{tag:"(300A,0636)",vr:"US",name:"IntendedNumberOfFractions",vm:"1",version:"DICOM"},"(300A,0637)":{tag:"(300A,0637)",vr:"CS",name:"RTRadiationSetIntent",vm:"1",version:"DICOM"},"(300A,0638)":{tag:"(300A,0638)",vr:"CS",name:"RTRadiationPhysicalAndGeometricContentDetailFlag",vm:"1",version:"DICOM"},"(300A,0639)":{tag:"(300A,0639)",vr:"CS",name:"RTRecordFlag",vm:"1",version:"DICOM"},"(300A,063A)":{tag:"(300A,063A)",vr:"SQ",name:"TreatmentDeviceIdentificationSequence",vm:"1",version:"DICOM"},"(300A,063B)":{tag:"(300A,063B)",vr:"SQ",name:"ReferencedRTPhysicianIntentSequence",vm:"1",version:"DICOM"},"(300A,063C)":{tag:"(300A,063C)",vr:"FD",name:"CumulativeMeterset",vm:"1",version:"DICOM"},"(300A,063D)":{tag:"(300A,063D)",vr:"FD",name:"DeliveryRate",vm:"1",version:"DICOM"},"(300A,063E)":{tag:"(300A,063E)",vr:"SQ",name:"DeliveryRateUnitSequence",vm:"1",version:"DICOM"},"(300A,063F)":{tag:"(300A,063F)",vr:"SQ",name:"TreatmentPositionSequence",vm:"1",version:"DICOM"},"(300A,0640)":{tag:"(300A,0640)",vr:"FD",name:"RadiationSourceAxisDistance",vm:"1",version:"DICOM"},"(300A,0641)":{tag:"(300A,0641)",vr:"US",name:"NumberOfRTBeamLimitingDevices",vm:"1",version:"DICOM"},"(300A,0642)":{tag:"(300A,0642)",vr:"FD",name:"RTBeamLimitingDeviceProximalDistance",vm:"1",version:"DICOM"},"(300A,0643)":{tag:"(300A,0643)",vr:"FD",name:"RTBeamLimitingDeviceDistalDistance",vm:"1",version:"DICOM"},"(300A,0644)":{tag:"(300A,0644)",vr:"SQ",name:"ParallelRTBeamDelimiterDeviceOrientationLabelCodeSequence",vm:"1",version:"DICOM"},"(300A,0645)":{tag:"(300A,0645)",vr:"FD",name:"BeamModifierOrientationAngle",vm:"1",version:"DICOM"},"(300A,0646)":{tag:"(300A,0646)",vr:"SQ",name:"FixedRTBeamDelimiterDeviceSequence",vm:"1",version:"DICOM"},"(300A,0647)":{tag:"(300A,0647)",vr:"SQ",name:"ParallelRTBeamDelimiterDeviceSequence",vm:"1",version:"DICOM"},"(300A,0648)":{tag:"(300A,0648)",vr:"US",name:"NumberOfParallelRTBeamDelimiters",vm:"1",version:"DICOM"},"(300A,0649)":{tag:"(300A,0649)",vr:"FD",name:"ParallelRTBeamDelimiterBoundaries",vm:"2-n",version:"DICOM"},"(300A,064A)":{tag:"(300A,064A)",vr:"FD",name:"ParallelRTBeamDelimiterPositions",vm:"2-n",version:"DICOM"},"(300A,064B)":{tag:"(300A,064B)",vr:"FD",name:"RTBeamLimitingDeviceOffset",vm:"2",version:"DICOM"},"(300A,064C)":{tag:"(300A,064C)",vr:"SQ",name:"RTBeamDelimiterGeometrySequence",vm:"1",version:"DICOM"},"(300A,064D)":{tag:"(300A,064D)",vr:"SQ",name:"RTBeamLimitingDeviceDefinitionSequence",vm:"1",version:"DICOM"},"(300A,064E)":{tag:"(300A,064E)",vr:"CS",name:"ParallelRTBeamDelimiterOpeningMode",vm:"1",version:"DICOM"},"(300A,064F)":{tag:"(300A,064F)",vr:"CS",name:"ParallelRTBeamDelimiterLeafMountingSide",vm:"1-n",version:"DICOM"},"(300A,0650)":{tag:"(300A,0650)",vr:"UI",name:"PatientSetupUID",vm:"1",version:"DICOM"},"(300A,0651)":{tag:"(300A,0651)",vr:"SQ",name:"WedgeDefinitionSequence",vm:"1",version:"DICOM"},"(300A,0652)":{tag:"(300A,0652)",vr:"FD",name:"RadiationBeamWedgeAngle",vm:"1",version:"DICOM"},"(300A,0653)":{tag:"(300A,0653)",vr:"FD",name:"RadiationBeamWedgeThinEdgeDistance",vm:"1",version:"DICOM"},"(300A,0654)":{tag:"(300A,0654)",vr:"FD",name:"RadiationBeamEffectiveWedgeAngle",vm:"1",version:"DICOM"},"(300A,0655)":{tag:"(300A,0655)",vr:"US",name:"NumberOfWedgePositions",vm:"1",version:"DICOM"},"(300A,0656)":{tag:"(300A,0656)",vr:"SQ",name:"RTBeamLimitingDeviceOpeningSequence",vm:"1",version:"DICOM"},"(300A,0657)":{tag:"(300A,0657)",vr:"US",name:"NumberOfRTBeamLimitingDeviceOpenings",vm:"1",version:"DICOM"},"(300A,0658)":{tag:"(300A,0658)",vr:"SQ",name:"RadiationDosimeterUnitSequence",vm:"1",version:"DICOM"},"(300A,0659)":{tag:"(300A,0659)",vr:"SQ",name:"RTDeviceDistanceReferenceLocationCodeSequence",vm:"1",version:"DICOM"},"(300A,065A)":{tag:"(300A,065A)",vr:"SQ",name:"RadiationDeviceConfigurationAndCommissioningKeySequence",vm:"1",version:"DICOM"},"(300A,065B)":{tag:"(300A,065B)",vr:"SQ",name:"PatientSupportPositionParameterSequence",vm:"1",version:"DICOM"},"(300A,065C)":{tag:"(300A,065C)",vr:"CS",name:"PatientSupportPositionSpecificationMethod",vm:"1",version:"DICOM"},"(300A,065D)":{tag:"(300A,065D)",vr:"SQ",name:"PatientSupportPositionDeviceParameterSequence",vm:"1",version:"DICOM"},"(300A,065E)":{tag:"(300A,065E)",vr:"US",name:"DeviceOrderIndex",vm:"1",version:"DICOM"},"(300A,065F)":{tag:"(300A,065F)",vr:"US",name:"PatientSupportPositionParameterOrderIndex",vm:"1",version:"DICOM"},"(300A,0660)":{tag:"(300A,0660)",vr:"SQ",name:"PatientSupportPositionDeviceToleranceSequence",vm:"1",version:"DICOM"},"(300A,0661)":{tag:"(300A,0661)",vr:"US",name:"PatientSupportPositionToleranceOrderIndex",vm:"1",version:"DICOM"},"(300A,0662)":{tag:"(300A,0662)",vr:"SQ",name:"CompensatorDefinitionSequence",vm:"1",version:"DICOM"},"(300A,0663)":{tag:"(300A,0663)",vr:"CS",name:"CompensatorMapOrientation",vm:"1",version:"DICOM"},"(300A,0664)":{tag:"(300A,0664)",vr:"OF",name:"CompensatorProximalThicknessMap",vm:"1",version:"DICOM"},"(300A,0665)":{tag:"(300A,0665)",vr:"OF",name:"CompensatorDistalThicknessMap",vm:"1",version:"DICOM"},"(300A,0666)":{tag:"(300A,0666)",vr:"FD",name:"CompensatorBasePlaneOffset",vm:"1",version:"DICOM"},"(300A,0667)":{tag:"(300A,0667)",vr:"SQ",name:"CompensatorShapeFabricationCodeSequence",vm:"1",version:"DICOM"},"(300A,0668)":{tag:"(300A,0668)",vr:"SQ",name:"CompensatorShapeSequence",vm:"1",version:"DICOM"},"(300A,0669)":{tag:"(300A,0669)",vr:"FD",name:"RadiationBeamCompensatorMillingToolDiameter",vm:"1",version:"DICOM"},"(300A,066A)":{tag:"(300A,066A)",vr:"SQ",name:"BlockDefinitionSequence",vm:"1",version:"DICOM"},"(300A,066B)":{tag:"(300A,066B)",vr:"OF",name:"BlockEdgeData",vm:"1",version:"DICOM"},"(300A,066C)":{tag:"(300A,066C)",vr:"CS",name:"BlockOrientation",vm:"1",version:"DICOM"},"(300A,066D)":{tag:"(300A,066D)",vr:"FD",name:"RadiationBeamBlockThickness",vm:"1",version:"DICOM"},"(300A,066E)":{tag:"(300A,066E)",vr:"FD",name:"RadiationBeamBlockSlabThickness",vm:"1",version:"DICOM"},"(300A,066F)":{tag:"(300A,066F)",vr:"SQ",name:"BlockEdgeDataSequence",vm:"1",version:"DICOM"},"(300A,0670)":{tag:"(300A,0670)",vr:"US",name:"NumberOfRTAccessoryHolders",vm:"1",version:"DICOM"},"(300A,0671)":{tag:"(300A,0671)",vr:"SQ",name:"GeneralAccessoryDefinitionSequence",vm:"1",version:"DICOM"},"(300A,0672)":{tag:"(300A,0672)",vr:"US",name:"NumberOfGeneralAccessories",vm:"1",version:"DICOM"},"(300A,0673)":{tag:"(300A,0673)",vr:"SQ",name:"BolusDefinitionSequence",vm:"1",version:"DICOM"},"(300A,0674)":{tag:"(300A,0674)",vr:"US",name:"NumberOfBoluses",vm:"1",version:"DICOM"},"(300A,0675)":{tag:"(300A,0675)",vr:"UI",name:"EquipmentFrameOfReferenceUID",vm:"1",version:"DICOM"},"(300A,0676)":{tag:"(300A,0676)",vr:"ST",name:"EquipmentFrameOfReferenceDescription",vm:"1",version:"DICOM"},"(300A,0677)":{tag:"(300A,0677)",vr:"SQ",name:"EquipmentReferencePointCoordinatesSequence",vm:"1",version:"DICOM"},"(300A,0678)":{tag:"(300A,0678)",vr:"SQ",name:"EquipmentReferencePointCodeSequence",vm:"1",version:"DICOM"},"(300A,0679)":{tag:"(300A,0679)",vr:"FD",name:"RTBeamLimitingDeviceAngle",vm:"1",version:"DICOM"},"(300A,067A)":{tag:"(300A,067A)",vr:"FD",name:"SourceRollAngle",vm:"1",version:"DICOM"},"(300A,067B)":{tag:"(300A,067B)",vr:"SQ",name:"RadiationGenerationModeSequence",vm:"1",version:"DICOM"},"(300A,067C)":{tag:"(300A,067C)",vr:"SH",name:"RadiationGenerationModeLabel",vm:"1",version:"DICOM"},"(300A,067D)":{tag:"(300A,067D)",vr:"ST",name:"RadiationGenerationModeDescription",vm:"1",version:"DICOM"},"(300A,067E)":{tag:"(300A,067E)",vr:"SQ",name:"RadiationGenerationModeMachineCodeSequence",vm:"1",version:"DICOM"},"(300A,067F)":{tag:"(300A,067F)",vr:"SQ",name:"RadiationTypeCodeSequence",vm:"1",version:"DICOM"},"(300A,0680)":{tag:"(300A,0680)",vr:"DS",name:"NominalEnergy",vm:"1",version:"DICOM"},"(300A,0681)":{tag:"(300A,0681)",vr:"DS",name:"MinimumNominalEnergy",vm:"1",version:"DICOM"},"(300A,0682)":{tag:"(300A,0682)",vr:"DS",name:"MaximumNominalEnergy",vm:"1",version:"DICOM"},"(300A,0683)":{tag:"(300A,0683)",vr:"SQ",name:"RadiationFluenceModifierCodeSequence",vm:"1",version:"DICOM"},"(300A,0684)":{tag:"(300A,0684)",vr:"SQ",name:"EnergyUnitCodeSequence",vm:"1",version:"DICOM"},"(300A,0685)":{tag:"(300A,0685)",vr:"US",name:"NumberOfRadiationGenerationModes",vm:"1",version:"DICOM"},"(300A,0686)":{tag:"(300A,0686)",vr:"SQ",name:"PatientSupportDevicesSequence",vm:"1",version:"DICOM"},"(300A,0687)":{tag:"(300A,0687)",vr:"US",name:"NumberOfPatientSupportDevices",vm:"1",version:"DICOM"},"(300A,0688)":{tag:"(300A,0688)",vr:"FD",name:"RTBeamModifierDefinitionDistance",vm:"1",version:"DICOM"},"(300A,0689)":{tag:"(300A,0689)",vr:"SQ",name:"BeamAreaLimitSequence",vm:"1",version:"DICOM"},"(300A,068A)":{tag:"(300A,068A)",vr:"SQ",name:"ReferencedRTPrescriptionSequence",vm:"1",version:"DICOM"},"(300A,068B)":{tag:"(300A,068B)",vr:"CS",name:"DoseValueInterpretation",vm:"1",version:"DICOM"},"(300A,0700)":{tag:"(300A,0700)",vr:"UI",name:"TreatmentSessionUID",vm:"1",version:"DICOM"},"(300A,0701)":{tag:"(300A,0701)",vr:"CS",name:"RTRadiationUsage",vm:"1",version:"DICOM"},"(300A,0702)":{tag:"(300A,0702)",vr:"SQ",name:"ReferencedRTRadiationSetSequence",vm:"1",version:"DICOM"},"(300A,0703)":{tag:"(300A,0703)",vr:"SQ",name:"ReferencedRTRadiationRecordSequence",vm:"1",version:"DICOM"},"(300A,0704)":{tag:"(300A,0704)",vr:"US",name:"RTRadiationSetDeliveryNumber",vm:"1",version:"DICOM"},"(300A,0705)":{tag:"(300A,0705)",vr:"US",name:"ClinicalFractionNumber",vm:"1",version:"DICOM"},"(300A,0706)":{tag:"(300A,0706)",vr:"CS",name:"RTTreatmentFractionCompletionStatus",vm:"1",version:"DICOM"},"(300A,0707)":{tag:"(300A,0707)",vr:"CS",name:"RTRadiationSetUsage",vm:"1",version:"DICOM"},"(300A,0708)":{tag:"(300A,0708)",vr:"CS",name:"TreatmentDeliveryContinuationFlag",vm:"1",version:"DICOM"},"(300A,0709)":{tag:"(300A,0709)",vr:"CS",name:"TreatmentRecordContentOrigin",vm:"1",version:"DICOM"},"(300A,0714)":{tag:"(300A,0714)",vr:"CS",name:"RTTreatmentTerminationStatus",vm:"1",version:"DICOM"},"(300A,0715)":{tag:"(300A,0715)",vr:"SQ",name:"RTTreatmentTerminationReasonCodeSequence",vm:"1",version:"DICOM"},"(300A,0716)":{tag:"(300A,0716)",vr:"SQ",name:"MachineSpecificTreatmentTerminationCodeSequence",vm:"1",version:"DICOM"},"(300A,0722)":{tag:"(300A,0722)",vr:"SQ",name:"RTRadiationSalvageRecordControlPointSequence",vm:"1",version:"DICOM"},"(300A,0723)":{tag:"(300A,0723)",vr:"CS",name:"StartingMetersetValueKnownFlag",vm:"1",version:"DICOM"},"(300A,0730)":{tag:"(300A,0730)",vr:"ST",name:"TreatmentTerminationDescription",vm:"1",version:"DICOM"},"(300A,0731)":{tag:"(300A,0731)",vr:"SQ",name:"TreatmentToleranceViolationSequence",vm:"1",version:"DICOM"},"(300A,0732)":{tag:"(300A,0732)",vr:"CS",name:"TreatmentToleranceViolationCategory",vm:"1",version:"DICOM"},"(300A,0733)":{tag:"(300A,0733)",vr:"SQ",name:"TreatmentToleranceViolationAttributeSequence",vm:"1",version:"DICOM"},"(300A,0734)":{tag:"(300A,0734)",vr:"ST",name:"TreatmentToleranceViolationDescription",vm:"1",version:"DICOM"},"(300A,0735)":{tag:"(300A,0735)",vr:"ST",name:"TreatmentToleranceViolationIdentification",vm:"1",version:"DICOM"},"(300A,0736)":{tag:"(300A,0736)",vr:"DT",name:"TreatmentToleranceViolationDateTime",vm:"1",version:"DICOM"},"(300A,073A)":{tag:"(300A,073A)",vr:"DT",name:"RecordedRTControlPointDateTime",vm:"1",version:"DICOM"},"(300A,073B)":{tag:"(300A,073B)",vr:"US",name:"ReferencedRadiationRTControlPointIndex",vm:"1",version:"DICOM"},"(300A,073E)":{tag:"(300A,073E)",vr:"SQ",name:"AlternateValueSequence",vm:"1",version:"DICOM"},"(300A,073F)":{tag:"(300A,073F)",vr:"SQ",name:"ConfirmationSequence",vm:"1",version:"DICOM"},"(300A,0740)":{tag:"(300A,0740)",vr:"SQ",name:"InterlockSequence",vm:"1",version:"DICOM"},"(300A,0741)":{tag:"(300A,0741)",vr:"DT",name:"InterlockDateTime",vm:"1",version:"DICOM"},"(300A,0742)":{tag:"(300A,0742)",vr:"ST",name:"InterlockDescription",vm:"1",version:"DICOM"},"(300A,0743)":{tag:"(300A,0743)",vr:"SQ",name:"InterlockOriginatingDeviceSequence",vm:"1",version:"DICOM"},"(300A,0744)":{tag:"(300A,0744)",vr:"SQ",name:"InterlockCodeSequence",vm:"1",version:"DICOM"},"(300A,0745)":{tag:"(300A,0745)",vr:"SQ",name:"InterlockResolutionCodeSequence",vm:"1",version:"DICOM"},"(300A,0746)":{tag:"(300A,0746)",vr:"SQ",name:"InterlockResolutionUserSequence",vm:"1",version:"DICOM"},"(300A,0760)":{tag:"(300A,0760)",vr:"DT",name:"OverrideDateTime",vm:"1",version:"DICOM"},"(300A,0761)":{tag:"(300A,0761)",vr:"SQ",name:"TreatmentToleranceViolationTypeCodeSequence",vm:"1",version:"DICOM"},"(300A,0762)":{tag:"(300A,0762)",vr:"SQ",name:"TreatmentToleranceViolationCauseCodeSequence",vm:"1",version:"DICOM"},"(300A,0772)":{tag:"(300A,0772)",vr:"SQ",name:"MeasuredMetersetToDoseMappingSequence",vm:"1",version:"DICOM"},"(300A,0773)":{tag:"(300A,0773)",vr:"US",name:"ReferencedExpectedInVivoMeasurementValueIndex",vm:"1",version:"DICOM"},"(300A,0774)":{tag:"(300A,0774)",vr:"SQ",name:"DoseMeasurementDeviceCodeSequence",vm:"1",version:"DICOM"},"(300A,0780)":{tag:"(300A,0780)",vr:"SQ",name:"AdditionalParameterRecordingInstanceSequence",vm:"1",version:"DICOM"},"(300A,0783)":{tag:"(300A,0783)",vr:"ST",name:"InterlockOriginDescription",vm:"1",version:"DICOM"},"(300A,0784)":{tag:"(300A,0784)",vr:"SQ",name:"RTPatientPositionScopeSequence",vm:"1",version:"DICOM"},"(300A,0785)":{tag:"(300A,0785)",vr:"UI",name:"ReferencedTreatmentPositionGroupUID",vm:"1",version:"DICOM"},"(300A,0786)":{tag:"(300A,0786)",vr:"US",name:"RadiationOrderIndex",vm:"1",version:"DICOM"},"(300A,0787)":{tag:"(300A,0787)",vr:"SQ",name:"OmittedRadiationSequence",vm:"1",version:"DICOM"},"(300A,0788)":{tag:"(300A,0788)",vr:"SQ",name:"ReasonForOmissionCodeSequence",vm:"1",version:"DICOM"},"(300A,0789)":{tag:"(300A,0789)",vr:"SQ",name:"RTDeliveryStartPatientPositionSequence",vm:"1",version:"DICOM"},"(300A,078A)":{tag:"(300A,078A)",vr:"SQ",name:"RTTreatmentPreparationPatientPositionSequence",vm:"1",version:"DICOM"},"(300A,078B)":{tag:"(300A,078B)",vr:"SQ",name:"ReferencedRTTreatmentPreparationSequence",vm:"1",version:"DICOM"},"(300A,078C)":{tag:"(300A,078C)",vr:"SQ",name:"ReferencedPatientSetupPhotoSequence",vm:"1",version:"DICOM"},"(300A,078D)":{tag:"(300A,078D)",vr:"SQ",name:"PatientTreatmentPreparationMethodCodeSequence",vm:"1",version:"DICOM"},"(300A,078E)":{tag:"(300A,078E)",vr:"LT",name:"PatientTreatmentPreparationProcedureParameterDescription",vm:"1",version:"DICOM"},"(300A,078F)":{tag:"(300A,078F)",vr:"SQ",name:"PatientTreatmentPreparationDeviceSequence",vm:"1",version:"DICOM"},"(300A,0790)":{tag:"(300A,0790)",vr:"SQ",name:"PatientTreatmentPreparationProcedureSequence",vm:"1",version:"DICOM"},"(300A,0791)":{tag:"(300A,0791)",vr:"SQ",name:"PatientTreatmentPreparationProcedureCodeSequence",vm:"1",version:"DICOM"},"(300A,0792)":{tag:"(300A,0792)",vr:"LT",name:"PatientTreatmentPreparationMethodDescription",vm:"1",version:"DICOM"},"(300A,0793)":{tag:"(300A,0793)",vr:"SQ",name:"PatientTreatmentPreparationProcedureParameterSequence",vm:"1",version:"DICOM"},"(300A,0794)":{tag:"(300A,0794)",vr:"LT",name:"PatientSetupPhotoDescription",vm:"1",version:"DICOM"},"(300A,0795)":{tag:"(300A,0795)",vr:"US",name:"PatientTreatmentPreparationProcedureIndex",vm:"1",version:"DICOM"},"(300A,0796)":{tag:"(300A,0796)",vr:"US",name:"ReferencedPatientSetupProcedureIndex",vm:"1",version:"DICOM"},"(300A,0797)":{tag:"(300A,0797)",vr:"SQ",name:"RTRadiationTaskSequence",vm:"1",version:"DICOM"},"(300A,0798)":{tag:"(300A,0798)",vr:"SQ",name:"RTPatientPositionDisplacementSequence",vm:"1",version:"DICOM"},"(300A,0799)":{tag:"(300A,0799)",vr:"SQ",name:"RTPatientPositionSequence",vm:"1",version:"DICOM"},"(300A,079A)":{tag:"(300A,079A)",vr:"LO",name:"DisplacementReferenceLabel",vm:"1",version:"DICOM"},"(300A,079B)":{tag:"(300A,079B)",vr:"FD",name:"DisplacementMatrix",vm:"16",version:"DICOM"},"(300A,079C)":{tag:"(300A,079C)",vr:"SQ",name:"PatientSupportDisplacementSequence",vm:"1",version:"DICOM"},"(300A,079D)":{tag:"(300A,079D)",vr:"SQ",name:"DisplacementReferenceLocationCodeSequence",vm:"1",version:"DICOM"},"(300A,079E)":{tag:"(300A,079E)",vr:"CS",name:"RTRadiationSetDeliveryUsage",vm:"1",version:"DICOM"},"(300A,079F)":{tag:"(300A,079F)",vr:"SQ",name:"PatientTreatmentPreparationSequence",vm:"1",version:"DICOM"},"(300A,07A0)":{tag:"(300A,07A0)",vr:"SQ",name:"PatientToEquipmentRelationshipSequence",vm:"1",version:"DICOM"},"(300A,07A1)":{tag:"(300A,07A1)",vr:"SQ",name:"ImagingEquipmentToTreatmentDeliveryDeviceRelationshipSequence",vm:"1",version:"DICOM"},"(300C,0002)":{tag:"(300C,0002)",vr:"SQ",name:"ReferencedRTPlanSequence",vm:"1",version:"DICOM"},"(300C,0004)":{tag:"(300C,0004)",vr:"SQ",name:"ReferencedBeamSequence",vm:"1",version:"DICOM"},"(300C,0006)":{tag:"(300C,0006)",vr:"IS",name:"ReferencedBeamNumber",vm:"1",version:"DICOM"},"(300C,0007)":{tag:"(300C,0007)",vr:"IS",name:"ReferencedReferenceImageNumber",vm:"1",version:"DICOM"},"(300C,0008)":{tag:"(300C,0008)",vr:"DS",name:"StartCumulativeMetersetWeight",vm:"1",version:"DICOM"},"(300C,0009)":{tag:"(300C,0009)",vr:"DS",name:"EndCumulativeMetersetWeight",vm:"1",version:"DICOM"},"(300C,000A)":{tag:"(300C,000A)",vr:"SQ",name:"ReferencedBrachyApplicationSetupSequence",vm:"1",version:"DICOM"},"(300C,000C)":{tag:"(300C,000C)",vr:"IS",name:"ReferencedBrachyApplicationSetupNumber",vm:"1",version:"DICOM"},"(300C,000E)":{tag:"(300C,000E)",vr:"IS",name:"ReferencedSourceNumber",vm:"1",version:"DICOM"},"(300C,0020)":{tag:"(300C,0020)",vr:"SQ",name:"ReferencedFractionGroupSequence",vm:"1",version:"DICOM"},"(300C,0022)":{tag:"(300C,0022)",vr:"IS",name:"ReferencedFractionGroupNumber",vm:"1",version:"DICOM"},"(300C,0040)":{tag:"(300C,0040)",vr:"SQ",name:"ReferencedVerificationImageSequence",vm:"1",version:"DICOM"},"(300C,0042)":{tag:"(300C,0042)",vr:"SQ",name:"ReferencedReferenceImageSequence",vm:"1",version:"DICOM"},"(300C,0050)":{tag:"(300C,0050)",vr:"SQ",name:"ReferencedDoseReferenceSequence",vm:"1",version:"DICOM"},"(300C,0051)":{tag:"(300C,0051)",vr:"IS",name:"ReferencedDoseReferenceNumber",vm:"1",version:"DICOM"},"(300C,0055)":{tag:"(300C,0055)",vr:"SQ",name:"BrachyReferencedDoseReferenceSequence",vm:"1",version:"DICOM"},"(300C,0060)":{tag:"(300C,0060)",vr:"SQ",name:"ReferencedStructureSetSequence",vm:"1",version:"DICOM"},"(300C,006A)":{tag:"(300C,006A)",vr:"IS",name:"ReferencedPatientSetupNumber",vm:"1",version:"DICOM"},"(300C,0080)":{tag:"(300C,0080)",vr:"SQ",name:"ReferencedDoseSequence",vm:"1",version:"DICOM"},"(300C,00A0)":{tag:"(300C,00A0)",vr:"IS",name:"ReferencedToleranceTableNumber",vm:"1",version:"DICOM"},"(300C,00B0)":{tag:"(300C,00B0)",vr:"SQ",name:"ReferencedBolusSequence",vm:"1",version:"DICOM"},"(300C,00C0)":{tag:"(300C,00C0)",vr:"IS",name:"ReferencedWedgeNumber",vm:"1",version:"DICOM"},"(300C,00D0)":{tag:"(300C,00D0)",vr:"IS",name:"ReferencedCompensatorNumber",vm:"1",version:"DICOM"},"(300C,00E0)":{tag:"(300C,00E0)",vr:"IS",name:"ReferencedBlockNumber",vm:"1",version:"DICOM"},"(300C,00F0)":{tag:"(300C,00F0)",vr:"IS",name:"ReferencedControlPointIndex",vm:"1",version:"DICOM"},"(300C,00F2)":{tag:"(300C,00F2)",vr:"SQ",name:"ReferencedControlPointSequence",vm:"1",version:"DICOM"},"(300C,00F4)":{tag:"(300C,00F4)",vr:"IS",name:"ReferencedStartControlPointIndex",vm:"1",version:"DICOM"},"(300C,00F6)":{tag:"(300C,00F6)",vr:"IS",name:"ReferencedStopControlPointIndex",vm:"1",version:"DICOM"},"(300C,0100)":{tag:"(300C,0100)",vr:"IS",name:"ReferencedRangeShifterNumber",vm:"1",version:"DICOM"},"(300C,0102)":{tag:"(300C,0102)",vr:"IS",name:"ReferencedLateralSpreadingDeviceNumber",vm:"1",version:"DICOM"},"(300C,0104)":{tag:"(300C,0104)",vr:"IS",name:"ReferencedRangeModulatorNumber",vm:"1",version:"DICOM"},"(300C,0111)":{tag:"(300C,0111)",vr:"SQ",name:"OmittedBeamTaskSequence",vm:"1",version:"DICOM"},"(300C,0112)":{tag:"(300C,0112)",vr:"CS",name:"ReasonForOmission",vm:"1",version:"DICOM"},"(300C,0113)":{tag:"(300C,0113)",vr:"LO",name:"ReasonForOmissionDescription",vm:"1",version:"DICOM"},"(300C,0114)":{tag:"(300C,0114)",vr:"SQ",name:"PrescriptionOverviewSequence",vm:"1",version:"DICOM"},"(300C,0115)":{tag:"(300C,0115)",vr:"FL",name:"TotalPrescriptionDose",vm:"1",version:"DICOM"},"(300C,0116)":{tag:"(300C,0116)",vr:"SQ",name:"PlanOverviewSequence",vm:"1",version:"DICOM"},"(300C,0117)":{tag:"(300C,0117)",vr:"US",name:"PlanOverviewIndex",vm:"1",version:"DICOM"},"(300C,0118)":{tag:"(300C,0118)",vr:"US",name:"ReferencedPlanOverviewIndex",vm:"1",version:"DICOM"},"(300C,0119)":{tag:"(300C,0119)",vr:"US",name:"NumberOfFractionsIncluded",vm:"1",version:"DICOM"},"(300C,0120)":{tag:"(300C,0120)",vr:"SQ",name:"DoseCalibrationConditionsSequence",vm:"1",version:"DICOM"},"(300C,0121)":{tag:"(300C,0121)",vr:"FD",name:"AbsorbedDoseToMetersetRatio",vm:"1",version:"DICOM"},"(300C,0122)":{tag:"(300C,0122)",vr:"FD",name:"DelineatedRadiationFieldSize",vm:"2",version:"DICOM"},"(300C,0123)":{tag:"(300C,0123)",vr:"CS",name:"DoseCalibrationConditionsVerifiedFlag",vm:"1",version:"DICOM"},"(300C,0124)":{tag:"(300C,0124)",vr:"FD",name:"CalibrationReferencePointDepth",vm:"1",version:"DICOM"},"(300C,0125)":{tag:"(300C,0125)",vr:"SQ",name:"GatingBeamHoldTransitionSequence",vm:"1",version:"DICOM"},"(300C,0126)":{tag:"(300C,0126)",vr:"CS",name:"BeamHoldTransition",vm:"1",version:"DICOM"},"(300C,0127)":{tag:"(300C,0127)",vr:"DT",name:"BeamHoldTransitionDateTime",vm:"1",version:"DICOM"},"(300C,0128)":{tag:"(300C,0128)",vr:"SQ",name:"BeamHoldOriginatingDeviceSequence",vm:"1",version:"DICOM"},"(300C,0129)":{tag:"(300C,0129)",vr:"CS",name:"BeamHoldTransitionTriggerSource",vm:"1",version:"DICOM"},"(300E,0002)":{tag:"(300E,0002)",vr:"CS",name:"ApprovalStatus",vm:"1",version:"DICOM"},"(300E,0004)":{tag:"(300E,0004)",vr:"DA",name:"ReviewDate",vm:"1",version:"DICOM"},"(300E,0005)":{tag:"(300E,0005)",vr:"TM",name:"ReviewTime",vm:"1",version:"DICOM"},"(300E,0008)":{tag:"(300E,0008)",vr:"PN",name:"ReviewerName",vm:"1",version:"DICOM"},"(4010,0001)":{tag:"(4010,0001)",vr:"CS",name:"LowEnergyDetectors",vm:"1",version:"DICOM/DICOS"},"(4010,0002)":{tag:"(4010,0002)",vr:"CS",name:"HighEnergyDetectors",vm:"1",version:"DICOM/DICOS"},"(4010,0004)":{tag:"(4010,0004)",vr:"SQ",name:"DetectorGeometrySequence",vm:"1",version:"DICOM/DICOS"},"(4010,1001)":{tag:"(4010,1001)",vr:"SQ",name:"ThreatROIVoxelSequence",vm:"1",version:"DICOM/DICOS"},"(4010,1004)":{tag:"(4010,1004)",vr:"FL",name:"ThreatROIBase",vm:"3",version:"DICOM/DICOS"},"(4010,1005)":{tag:"(4010,1005)",vr:"FL",name:"ThreatROIExtents",vm:"3",version:"DICOM/DICOS"},"(4010,1006)":{tag:"(4010,1006)",vr:"OB",name:"ThreatROIBitmap",vm:"1",version:"DICOM/DICOS"},"(4010,1007)":{tag:"(4010,1007)",vr:"SH",name:"RouteSegmentID",vm:"1",version:"DICOM/DICOS"},"(4010,1008)":{tag:"(4010,1008)",vr:"CS",name:"GantryType",vm:"1",version:"DICOM/DICOS"},"(4010,1009)":{tag:"(4010,1009)",vr:"CS",name:"OOIOwnerType",vm:"1",version:"DICOM/DICOS"},"(4010,100A)":{tag:"(4010,100A)",vr:"SQ",name:"RouteSegmentSequence",vm:"1",version:"DICOM/DICOS"},"(4010,1010)":{tag:"(4010,1010)",vr:"US",name:"PotentialThreatObjectID",vm:"1",version:"DICOM/DICOS"},"(4010,1011)":{tag:"(4010,1011)",vr:"SQ",name:"ThreatSequence",vm:"1",version:"DICOM/DICOS"},"(4010,1012)":{tag:"(4010,1012)",vr:"CS",name:"ThreatCategory",vm:"1",version:"DICOM/DICOS"},"(4010,1013)":{tag:"(4010,1013)",vr:"LT",name:"ThreatCategoryDescription",vm:"1",version:"DICOM/DICOS"},"(4010,1014)":{tag:"(4010,1014)",vr:"CS",name:"ATDAbilityAssessment",vm:"1",version:"DICOM/DICOS"},"(4010,1015)":{tag:"(4010,1015)",vr:"CS",name:"ATDAssessmentFlag",vm:"1",version:"DICOM/DICOS"},"(4010,1016)":{tag:"(4010,1016)",vr:"FL",name:"ATDAssessmentProbability",vm:"1",version:"DICOM/DICOS"},"(4010,1017)":{tag:"(4010,1017)",vr:"FL",name:"Mass",vm:"1",version:"DICOM/DICOS"},"(4010,1018)":{tag:"(4010,1018)",vr:"FL",name:"Density",vm:"1",version:"DICOM/DICOS"},"(4010,1019)":{tag:"(4010,1019)",vr:"FL",name:"ZEffective",vm:"1",version:"DICOM/DICOS"},"(4010,101A)":{tag:"(4010,101A)",vr:"SH",name:"BoardingPassID",vm:"1",version:"DICOM/DICOS"},"(4010,101B)":{tag:"(4010,101B)",vr:"FL",name:"CenterOfMass",vm:"3",version:"DICOM/DICOS"},"(4010,101C)":{tag:"(4010,101C)",vr:"FL",name:"CenterOfPTO",vm:"3",version:"DICOM/DICOS"},"(4010,101D)":{tag:"(4010,101D)",vr:"FL",name:"BoundingPolygon",vm:"6-n",version:"DICOM/DICOS"},"(4010,101E)":{tag:"(4010,101E)",vr:"SH",name:"RouteSegmentStartLocationID",vm:"1",version:"DICOM/DICOS"},"(4010,101F)":{tag:"(4010,101F)",vr:"SH",name:"RouteSegmentEndLocationID",vm:"1",version:"DICOM/DICOS"},"(4010,1020)":{tag:"(4010,1020)",vr:"CS",name:"RouteSegmentLocationIDType",vm:"1",version:"DICOM/DICOS"},"(4010,1021)":{tag:"(4010,1021)",vr:"CS",name:"AbortReason",vm:"1-n",version:"DICOM/DICOS"},"(4010,1023)":{tag:"(4010,1023)",vr:"FL",name:"VolumeOfPTO",vm:"1",version:"DICOM/DICOS"},"(4010,1024)":{tag:"(4010,1024)",vr:"CS",name:"AbortFlag",vm:"1",version:"DICOM/DICOS"},"(4010,1025)":{tag:"(4010,1025)",vr:"DT",name:"RouteSegmentStartTime",vm:"1",version:"DICOM/DICOS"},"(4010,1026)":{tag:"(4010,1026)",vr:"DT",name:"RouteSegmentEndTime",vm:"1",version:"DICOM/DICOS"},"(4010,1027)":{tag:"(4010,1027)",vr:"CS",name:"TDRType",vm:"1",version:"DICOM/DICOS"},"(4010,1028)":{tag:"(4010,1028)",vr:"CS",name:"InternationalRouteSegment",vm:"1",version:"DICOM/DICOS"},"(4010,1029)":{tag:"(4010,1029)",vr:"LO",name:"ThreatDetectionAlgorithmandVersion",vm:"1-n",version:"DICOM/DICOS"},"(4010,102A)":{tag:"(4010,102A)",vr:"SH",name:"AssignedLocation",vm:"1",version:"DICOM/DICOS"},"(4010,102B)":{tag:"(4010,102B)",vr:"DT",name:"AlarmDecisionTime",vm:"1",version:"DICOM/DICOS"},"(4010,1031)":{tag:"(4010,1031)",vr:"CS",name:"AlarmDecision",vm:"1",version:"DICOM/DICOS"},"(4010,1033)":{tag:"(4010,1033)",vr:"US",name:"NumberOfTotalObjects",vm:"1",version:"DICOM/DICOS"},"(4010,1034)":{tag:"(4010,1034)",vr:"US",name:"NumberOfAlarmObjects",vm:"1",version:"DICOM/DICOS"},"(4010,1037)":{tag:"(4010,1037)",vr:"SQ",name:"PTORepresentationSequence",vm:"1",version:"DICOM/DICOS"},"(4010,1038)":{tag:"(4010,1038)",vr:"SQ",name:"ATDAssessmentSequence",vm:"1",version:"DICOM/DICOS"},"(4010,1039)":{tag:"(4010,1039)",vr:"CS",name:"TIPType",vm:"1",version:"DICOM/DICOS"},"(4010,103A)":{tag:"(4010,103A)",vr:"CS",name:"DICOSVersion",vm:"1",version:"DICOM/DICOS"},"(4010,1041)":{tag:"(4010,1041)",vr:"DT",name:"OOIOwnerCreationTime",vm:"1",version:"DICOM/DICOS"},"(4010,1042)":{tag:"(4010,1042)",vr:"CS",name:"OOIType",vm:"1",version:"DICOM/DICOS"},"(4010,1043)":{tag:"(4010,1043)",vr:"FL",name:"OOISize",vm:"3",version:"DICOM/DICOS"},"(4010,1044)":{tag:"(4010,1044)",vr:"CS",name:"AcquisitionStatus",vm:"1",version:"DICOM/DICOS"},"(4010,1045)":{tag:"(4010,1045)",vr:"SQ",name:"BasisMaterialsCodeSequence",vm:"1",version:"DICOM/DICOS"},"(4010,1046)":{tag:"(4010,1046)",vr:"CS",name:"PhantomType",vm:"1",version:"DICOM/DICOS"},"(4010,1047)":{tag:"(4010,1047)",vr:"SQ",name:"OOIOwnerSequence",vm:"1",version:"DICOM/DICOS"},"(4010,1048)":{tag:"(4010,1048)",vr:"CS",name:"ScanType",vm:"1",version:"DICOM/DICOS"},"(4010,1051)":{tag:"(4010,1051)",vr:"LO",name:"ItineraryID",vm:"1",version:"DICOM/DICOS"},"(4010,1052)":{tag:"(4010,1052)",vr:"SH",name:"ItineraryIDType",vm:"1",version:"DICOM/DICOS"},"(4010,1053)":{tag:"(4010,1053)",vr:"LO",name:"ItineraryIDAssigningAuthority",vm:"1",version:"DICOM/DICOS"},"(4010,1054)":{tag:"(4010,1054)",vr:"SH",name:"RouteID",vm:"1",version:"DICOM/DICOS"},"(4010,1055)":{tag:"(4010,1055)",vr:"SH",name:"RouteIDAssigningAuthority",vm:"1",version:"DICOM/DICOS"},"(4010,1056)":{tag:"(4010,1056)",vr:"CS",name:"InboundArrivalType",vm:"1",version:"DICOM/DICOS"},"(4010,1058)":{tag:"(4010,1058)",vr:"SH",name:"CarrierID",vm:"1",version:"DICOM/DICOS"},"(4010,1059)":{tag:"(4010,1059)",vr:"CS",name:"CarrierIDAssigningAuthority",vm:"1",version:"DICOM/DICOS"},"(4010,1060)":{tag:"(4010,1060)",vr:"FL",name:"SourceOrientation",vm:"3",version:"DICOM/DICOS"},"(4010,1061)":{tag:"(4010,1061)",vr:"FL",name:"SourcePosition",vm:"3",version:"DICOM/DICOS"},"(4010,1062)":{tag:"(4010,1062)",vr:"FL",name:"BeltHeight",vm:"1",version:"DICOM/DICOS"},"(4010,1064)":{tag:"(4010,1064)",vr:"SQ",name:"AlgorithmRoutingCodeSequence",vm:"1",version:"DICOM/DICOS"},"(4010,1067)":{tag:"(4010,1067)",vr:"CS",name:"TransportClassification",vm:"1",version:"DICOM/DICOS"},"(4010,1068)":{tag:"(4010,1068)",vr:"LT",name:"OOITypeDescriptor",vm:"1",version:"DICOM/DICOS"},"(4010,1069)":{tag:"(4010,1069)",vr:"FL",name:"TotalProcessingTime",vm:"1",version:"DICOM/DICOS"},"(4010,106C)":{tag:"(4010,106C)",vr:"OB",name:"DetectorCalibrationData",vm:"1",version:"DICOM/DICOS"},"(4010,106D)":{tag:"(4010,106D)",vr:"CS",name:"AdditionalScreeningPerformed",vm:"1",version:"DICOM/DICOS"},"(4010,106E)":{tag:"(4010,106E)",vr:"CS",name:"AdditionalInspectionSelectionCriteria",vm:"1",version:"DICOM/DICOS"},"(4010,106F)":{tag:"(4010,106F)",vr:"SQ",name:"AdditionalInspectionMethodSequence",vm:"1",version:"DICOM/DICOS"},"(4010,1070)":{tag:"(4010,1070)",vr:"CS",name:"AITDeviceType",vm:"1",version:"DICOM/DICOS"},"(4010,1071)":{tag:"(4010,1071)",vr:"SQ",name:"QRMeasurementsSequence",vm:"1",version:"DICOM/DICOS"},"(4010,1072)":{tag:"(4010,1072)",vr:"SQ",name:"TargetMaterialSequence",vm:"1",version:"DICOM/DICOS"},"(4010,1073)":{tag:"(4010,1073)",vr:"FD",name:"SNRThreshold",vm:"1",version:"DICOM/DICOS"},"(4010,1075)":{tag:"(4010,1075)",vr:"DS",name:"ImageScaleRepresentation",vm:"1",version:"DICOM/DICOS"},"(4010,1076)":{tag:"(4010,1076)",vr:"SQ",name:"ReferencedPTOSequence",vm:"1",version:"DICOM/DICOS"},"(4010,1077)":{tag:"(4010,1077)",vr:"SQ",name:"ReferencedTDRInstanceSequence",vm:"1",version:"DICOM/DICOS"},"(4010,1078)":{tag:"(4010,1078)",vr:"ST",name:"PTOLocationDescription",vm:"1",version:"DICOM/DICOS"},"(4010,1079)":{tag:"(4010,1079)",vr:"SQ",name:"AnomalyLocatorIndicatorSequence",vm:"1",version:"DICOM/DICOS"},"(4010,107A)":{tag:"(4010,107A)",vr:"FL",name:"AnomalyLocatorIndicator",vm:"3",version:"DICOM/DICOS"},"(4010,107B)":{tag:"(4010,107B)",vr:"SQ",name:"PTORegionSequence",vm:"1",version:"DICOM/DICOS"},"(4010,107C)":{tag:"(4010,107C)",vr:"CS",name:"InspectionSelectionCriteria",vm:"1",version:"DICOM/DICOS"},"(4010,107D)":{tag:"(4010,107D)",vr:"SQ",name:"SecondaryInspectionMethodSequence",vm:"1",version:"DICOM/DICOS"},"(4010,107E)":{tag:"(4010,107E)",vr:"DS",name:"PRCSToRCSOrientation",vm:"6",version:"DICOM/DICOS"},"(3010,0001)":{tag:"(3010,0001)",vr:"SQ",name:"RadiobiologicalDoseEffectSequence",vm:"1",version:"DICOM"},"(3010,0002)":{tag:"(3010,0002)",vr:"CS",name:"RadiobiologicalDoseEffectFlag",vm:"1",version:"DICOM"},"(3010,0003)":{tag:"(3010,0003)",vr:"SQ",name:"EffectiveDoseCalculationMethodCategoryCodeSequence",vm:"1",version:"DICOM"},"(3010,0004)":{tag:"(3010,0004)",vr:"SQ",name:"EffectiveDoseCalculationMethodCodeSequence",vm:"1",version:"DICOM"},"(3010,0005)":{tag:"(3010,0005)",vr:"LO",name:"EffectiveDoseCalculationMethodDescription",vm:"1",version:"DICOM"},"(3010,0006)":{tag:"(3010,0006)",vr:"UI",name:"ConceptualVolumeUID",vm:"1",version:"DICOM"},"(3010,0007)":{tag:"(3010,0007)",vr:"SQ",name:"OriginatingSOPInstanceReferenceSequence",vm:"1",version:"DICOM"},"(3010,0008)":{tag:"(3010,0008)",vr:"SQ",name:"ConceptualVolumeConstituentSequence",vm:"1",version:"DICOM"},"(3010,0009)":{tag:"(3010,0009)",vr:"SQ",name:"EquivalentConceptualVolumeInstanceReferenceSequence",vm:"1",version:"DICOM"},"(3010,000A)":{tag:"(3010,000A)",vr:"SQ",name:"EquivalentConceptualVolumesSequence",vm:"1",version:"DICOM"},"(3010,000B)":{tag:"(3010,000B)",vr:"UI",name:"ReferencedConceptualVolumeUID",vm:"1",version:"DICOM"},"(3010,000C)":{tag:"(3010,000C)",vr:"UT",name:"ConceptualVolumeCombinationExpression",vm:"1",version:"DICOM"},"(3010,000D)":{tag:"(3010,000D)",vr:"US",name:"ConceptualVolumeConstituentIndex",vm:"1",version:"DICOM"},"(3010,000E)":{tag:"(3010,000E)",vr:"CS",name:"ConceptualVolumeCombinationFlag",vm:"1",version:"DICOM"},"(3010,000F)":{tag:"(3010,000F)",vr:"ST",name:"ConceptualVolumeCombinationDescription",vm:"1",version:"DICOM"},"(3010,0010)":{tag:"(3010,0010)",vr:"CS",name:"ConceptualVolumeSegmentationDefinedFlag",vm:"1",version:"DICOM"},"(3010,0011)":{tag:"(3010,0011)",vr:"SQ",name:"ConceptualVolumeSegmentationReferenceSequence",vm:"1",version:"DICOM"},"(3010,0012)":{tag:"(3010,0012)",vr:"SQ",name:"ConceptualVolumeConstituentSegmentationReferenceSequence",vm:"1",version:"DICOM"},"(3010,0013)":{tag:"(3010,0013)",vr:"UI",name:"ConstituentConceptualVolumeUID",vm:"1",version:"DICOM"},"(3010,0014)":{tag:"(3010,0014)",vr:"SQ",name:"DerivationConceptualVolumeSequence",vm:"1",version:"DICOM"},"(3010,0015)":{tag:"(3010,0015)",vr:"UI",name:"SourceConceptualVolumeUID",vm:"1",version:"DICOM"},"(3010,0016)":{tag:"(3010,0016)",vr:"SQ",name:"ConceptualVolumeDerivationAlgorithmSequence",vm:"1",version:"DICOM"},"(3010,0017)":{tag:"(3010,0017)",vr:"ST",name:"ConceptualVolumeDescription",vm:"1",version:"DICOM"},"(3010,0018)":{tag:"(3010,0018)",vr:"SQ",name:"SourceConceptualVolumeSequence",vm:"1",version:"DICOM"},"(3010,0019)":{tag:"(3010,0019)",vr:"SQ",name:"AuthorIdentificationSequence",vm:"1",version:"DICOM"},"(3010,001A)":{tag:"(3010,001A)",vr:"LO",name:"ManufacturerModelVersion",vm:"1",version:"DICOM"},"(3010,001B)":{tag:"(3010,001B)",vr:"UC",name:"DeviceAlternateIdentifier",vm:"1",version:"DICOM"},"(3010,001C)":{tag:"(3010,001C)",vr:"CS",name:"DeviceAlternateIdentifierType",vm:"1",version:"DICOM"},"(3010,001D)":{tag:"(3010,001D)",vr:"LT",name:"DeviceAlternateIdentifierFormat",vm:"1",version:"DICOM"},"(3010,001E)":{tag:"(3010,001E)",vr:"LO",name:"SegmentationCreationTemplateLabel",vm:"1",version:"DICOM"},"(3010,001F)":{tag:"(3010,001F)",vr:"UI",name:"SegmentationTemplateUID",vm:"1",version:"DICOM"},"(3010,0020)":{tag:"(3010,0020)",vr:"US",name:"ReferencedSegmentReferenceIndex",vm:"1",version:"DICOM"},"(3010,0021)":{tag:"(3010,0021)",vr:"SQ",name:"SegmentReferenceSequence",vm:"1",version:"DICOM"},"(3010,0022)":{tag:"(3010,0022)",vr:"US",name:"SegmentReferenceIndex",vm:"1",version:"DICOM"},"(3010,0023)":{tag:"(3010,0023)",vr:"SQ",name:"DirectSegmentReferenceSequence",vm:"1",version:"DICOM"},"(3010,0024)":{tag:"(3010,0024)",vr:"SQ",name:"CombinationSegmentReferenceSequence",vm:"1",version:"DICOM"},"(3010,0025)":{tag:"(3010,0025)",vr:"SQ",name:"ConceptualVolumeSequence",vm:"1",version:"DICOM"},"(3010,0026)":{tag:"(3010,0026)",vr:"SQ",name:"SegmentedRTAccessoryDeviceSequence",vm:"1",version:"DICOM"},"(3010,0027)":{tag:"(3010,0027)",vr:"SQ",name:"SegmentCharacteristicsSequence",vm:"1",version:"DICOM"},"(3010,0028)":{tag:"(3010,0028)",vr:"SQ",name:"RelatedSegmentCharacteristicsSequence",vm:"1",version:"DICOM"},"(3010,0029)":{tag:"(3010,0029)",vr:"US",name:"SegmentCharacteristicsPrecedence",vm:"1",version:"DICOM"},"(3010,002A)":{tag:"(3010,002A)",vr:"SQ",name:"RTSegmentAnnotationSequence",vm:"1",version:"DICOM"},"(3010,002B)":{tag:"(3010,002B)",vr:"SQ",name:"SegmentAnnotationCategoryCodeSequence",vm:"1",version:"DICOM"},"(3010,002C)":{tag:"(3010,002C)",vr:"SQ",name:"SegmentAnnotationTypeCodeSequence",vm:"1",version:"DICOM"},"(3010,002D)":{tag:"(3010,002D)",vr:"LO",name:"DeviceLabel",vm:"1",version:"DICOM"},"(3010,002E)":{tag:"(3010,002E)",vr:"SQ",name:"DeviceTypeCodeSequence",vm:"1",version:"DICOM"},"(3010,002F)":{tag:"(3010,002F)",vr:"SQ",name:"SegmentAnnotationTypeModifierCodeSequence",vm:"1",version:"DICOM"},"(3010,0030)":{tag:"(3010,0030)",vr:"SQ",name:"PatientEquipmentRelationshipCodeSequence",vm:"1",version:"DICOM"},"(3010,0031)":{tag:"(3010,0031)",vr:"UI",name:"ReferencedFiducialsUID",vm:"1",version:"DICOM"},"(3010,0032)":{tag:"(3010,0032)",vr:"SQ",name:"PatientTreatmentOrientationSequence",vm:"1",version:"DICOM"},"(3010,0033)":{tag:"(3010,0033)",vr:"SH",name:"UserContentLabel",vm:"1",version:"DICOM"},"(3010,0034)":{tag:"(3010,0034)",vr:"LO",name:"UserContentLongLabel",vm:"1",version:"DICOM"},"(3010,0035)":{tag:"(3010,0035)",vr:"SH",name:"EntityLabel",vm:"1",version:"DICOM"},"(3010,0036)":{tag:"(3010,0036)",vr:"LO",name:"EntityName",vm:"1",version:"DICOM"},"(3010,0037)":{tag:"(3010,0037)",vr:"ST",name:"EntityDescription",vm:"1",version:"DICOM"},"(3010,0038)":{tag:"(3010,0038)",vr:"LO",name:"EntityLongLabel",vm:"1",version:"DICOM"},"(3010,0039)":{tag:"(3010,0039)",vr:"US",name:"DeviceIndex",vm:"1",version:"DICOM"},"(3010,003A)":{tag:"(3010,003A)",vr:"US",name:"RTTreatmentPhaseIndex",vm:"1",version:"DICOM"},"(3010,003B)":{tag:"(3010,003B)",vr:"UI",name:"RTTreatmentPhaseUID",vm:"1",version:"DICOM"},"(3010,003C)":{tag:"(3010,003C)",vr:"US",name:"RTPrescriptionIndex",vm:"1",version:"DICOM"},"(3010,003D)":{tag:"(3010,003D)",vr:"US",name:"RTSegmentAnnotationIndex",vm:"1",version:"DICOM"},"(3010,003E)":{tag:"(3010,003E)",vr:"US",name:"BasisRTTreatmentPhaseIndex",vm:"1",version:"DICOM"},"(3010,003F)":{tag:"(3010,003F)",vr:"US",name:"RelatedRTTreatmentPhaseIndex",vm:"1",version:"DICOM"},"(3010,0040)":{tag:"(3010,0040)",vr:"US",name:"ReferencedRTTreatmentPhaseIndex",vm:"1",version:"DICOM"},"(3010,0041)":{tag:"(3010,0041)",vr:"US",name:"ReferencedRTPrescriptionIndex",vm:"1",version:"DICOM"},"(3010,0042)":{tag:"(3010,0042)",vr:"US",name:"ReferencedParentRTPrescriptionIndex",vm:"1",version:"DICOM"},"(3010,0043)":{tag:"(3010,0043)",vr:"ST",name:"ManufacturerDeviceIdentifier",vm:"1",version:"DICOM"},"(3010,0044)":{tag:"(3010,0044)",vr:"SQ",name:"InstanceLevelReferencedPerformedProcedureStepSequence",vm:"1",version:"DICOM"},"(3010,0045)":{tag:"(3010,0045)",vr:"CS",name:"RTTreatmentPhaseIntentPresenceFlag",vm:"1",version:"DICOM"},"(3010,0046)":{tag:"(3010,0046)",vr:"CS",name:"RadiotherapyTreatmentType",vm:"1",version:"DICOM"},"(3010,0047)":{tag:"(3010,0047)",vr:"CS",name:"TeletherapyRadiationType",vm:"1-n",version:"DICOM"},"(3010,0048)":{tag:"(3010,0048)",vr:"CS",name:"BrachytherapySourceType",vm:"1-n",version:"DICOM"},"(3010,0049)":{tag:"(3010,0049)",vr:"SQ",name:"ReferencedRTTreatmentPhaseSequence",vm:"1",version:"DICOM"},"(3010,004A)":{tag:"(3010,004A)",vr:"SQ",name:"ReferencedDirectSegmentInstanceSequence",vm:"1",version:"DICOM"},"(3010,004B)":{tag:"(3010,004B)",vr:"SQ",name:"IntendedRTTreatmentPhaseSequence",vm:"1",version:"DICOM"},"(3010,004C)":{tag:"(3010,004C)",vr:"DA",name:"IntendedPhaseStartDate",vm:"1",version:"DICOM"},"(3010,004D)":{tag:"(3010,004D)",vr:"DA",name:"IntendedPhaseEndDate",vm:"1",version:"DICOM"},"(3010,004E)":{tag:"(3010,004E)",vr:"SQ",name:"RTTreatmentPhaseIntervalSequence",vm:"1",version:"DICOM"},"(3010,004F)":{tag:"(3010,004F)",vr:"CS",name:"TemporalRelationshipIntervalAnchor",vm:"1",version:"DICOM"},"(3010,0050)":{tag:"(3010,0050)",vr:"FD",name:"MinimumNumberOfIntervalDays",vm:"1",version:"DICOM"},"(3010,0051)":{tag:"(3010,0051)",vr:"FD",name:"MaximumNumberOfIntervalDays",vm:"1",version:"DICOM"},"(3010,0052)":{tag:"(3010,0052)",vr:"UI",name:"PertinentSOPClassesInStudy",vm:"1-n",version:"DICOM"},"(3010,0053)":{tag:"(3010,0053)",vr:"UI",name:"PertinentSOPClassesInSeries",vm:"1-n",version:"DICOM"},"(3010,0054)":{tag:"(3010,0054)",vr:"LO",name:"RTPrescriptionLabel",vm:"1",version:"DICOM"},"(3010,0055)":{tag:"(3010,0055)",vr:"SQ",name:"RTPhysicianIntentPredecessorSequence",vm:"1",version:"DICOM"},"(3010,0056)":{tag:"(3010,0056)",vr:"LO",name:"RTTreatmentApproachLabel",vm:"1",version:"DICOM"},"(3010,0057)":{tag:"(3010,0057)",vr:"SQ",name:"RTPhysicianIntentSequence",vm:"1",version:"DICOM"},"(3010,0058)":{tag:"(3010,0058)",vr:"US",name:"RTPhysicianIntentIndex",vm:"1",version:"DICOM"},"(3010,0059)":{tag:"(3010,0059)",vr:"CS",name:"RTTreatmentIntentType",vm:"1",version:"DICOM"},"(3010,005A)":{tag:"(3010,005A)",vr:"UT",name:"RTPhysicianIntentNarrative",vm:"1",version:"DICOM"},"(3010,005B)":{tag:"(3010,005B)",vr:"SQ",name:"RTProtocolCodeSequence",vm:"1",version:"DICOM"},"(3010,005C)":{tag:"(3010,005C)",vr:"ST",name:"ReasonForSuperseding",vm:"1",version:"DICOM"},"(3010,005D)":{tag:"(3010,005D)",vr:"SQ",name:"RTDiagnosisCodeSequence",vm:"1",version:"DICOM"},"(3010,005E)":{tag:"(3010,005E)",vr:"US",name:"ReferencedRTPhysicianIntentIndex",vm:"1",version:"DICOM"},"(3010,005F)":{tag:"(3010,005F)",vr:"SQ",name:"RTPhysicianIntentInputInstanceSequence",vm:"1",version:"DICOM"},"(3010,0060)":{tag:"(3010,0060)",vr:"SQ",name:"RTAnatomicPrescriptionSequence",vm:"1",version:"DICOM"},"(3010,0061)":{tag:"(3010,0061)",vr:"UT",name:"PriorTreatmentDoseDescription",vm:"1",version:"DICOM"},"(3010,0062)":{tag:"(3010,0062)",vr:"SQ",name:"PriorTreatmentReferenceSequence",vm:"1",version:"DICOM"},"(3010,0063)":{tag:"(3010,0063)",vr:"CS",name:"DosimetricObjectiveEvaluationScope",vm:"1",version:"DICOM"},"(3010,0064)":{tag:"(3010,0064)",vr:"SQ",name:"TherapeuticRoleCategoryCodeSequence",vm:"1",version:"DICOM"},"(3010,0065)":{tag:"(3010,0065)",vr:"SQ",name:"TherapeuticRoleTypeCodeSequence",vm:"1",version:"DICOM"},"(3010,0066)":{tag:"(3010,0066)",vr:"US",name:"ConceptualVolumeOptimizationPrecedence",vm:"1",version:"DICOM"},"(3010,0067)":{tag:"(3010,0067)",vr:"SQ",name:"ConceptualVolumeCategoryCodeSequence",vm:"1",version:"DICOM"},"(3010,0068)":{tag:"(3010,0068)",vr:"CS",name:"ConceptualVolumeBlockingConstraint",vm:"1",version:"DICOM"},"(3010,0069)":{tag:"(3010,0069)",vr:"SQ",name:"ConceptualVolumeTypeCodeSequence",vm:"1",version:"DICOM"},"(3010,006A)":{tag:"(3010,006A)",vr:"SQ",name:"ConceptualVolumeTypeModifierCodeSequence",vm:"1",version:"DICOM"},"(3010,006B)":{tag:"(3010,006B)",vr:"SQ",name:"RTPrescriptionSequence",vm:"1",version:"DICOM"},"(3010,006C)":{tag:"(3010,006C)",vr:"SQ",name:"DosimetricObjectiveSequence",vm:"1",version:"DICOM"},"(3010,006D)":{tag:"(3010,006D)",vr:"SQ",name:"DosimetricObjectiveTypeCodeSequence",vm:"1",version:"DICOM"},"(3010,006E)":{tag:"(3010,006E)",vr:"UI",name:"DosimetricObjectiveUID",vm:"1",version:"DICOM"},"(3010,006F)":{tag:"(3010,006F)",vr:"UI",name:"ReferencedDosimetricObjectiveUID",vm:"1",version:"DICOM"},"(3010,0070)":{tag:"(3010,0070)",vr:"SQ",name:"DosimetricObjectiveParameterSequence",vm:"1",version:"DICOM"},"(3010,0071)":{tag:"(3010,0071)",vr:"SQ",name:"ReferencedDosimetricObjectivesSequence",vm:"1",version:"DICOM"},"(3010,0073)":{tag:"(3010,0073)",vr:"CS",name:"AbsoluteDosimetricObjectiveFlag",vm:"1",version:"DICOM"},"(3010,0074)":{tag:"(3010,0074)",vr:"FD",name:"DosimetricObjectiveWeight",vm:"1",version:"DICOM"},"(3010,0075)":{tag:"(3010,0075)",vr:"CS",name:"DosimetricObjectivePurpose",vm:"1",version:"DICOM"},"(3010,0076)":{tag:"(3010,0076)",vr:"SQ",name:"PlanningInputInformationSequence",vm:"1",version:"DICOM"},"(3010,0077)":{tag:"(3010,0077)",vr:"LO",name:"TreatmentSite",vm:"1",version:"DICOM"},"(3010,0078)":{tag:"(3010,0078)",vr:"SQ",name:"TreatmentSiteCodeSequence",vm:"1",version:"DICOM"},"(3010,0079)":{tag:"(3010,0079)",vr:"SQ",name:"FractionPatternSequence",vm:"1",version:"DICOM"},"(3010,007A)":{tag:"(3010,007A)",vr:"UT",name:"TreatmentTechniqueNotes",vm:"1",version:"DICOM"},"(3010,007B)":{tag:"(3010,007B)",vr:"UT",name:"PrescriptionNotes",vm:"1",version:"DICOM"},"(3010,007C)":{tag:"(3010,007C)",vr:"IS",name:"NumberOfIntervalFractions",vm:"1",version:"DICOM"},"(3010,007D)":{tag:"(3010,007D)",vr:"US",name:"NumberOfFractions",vm:"1",version:"DICOM"},"(3010,007E)":{tag:"(3010,007E)",vr:"US",name:"IntendedDeliveryDuration",vm:"1",version:"DICOM"},"(3010,007F)":{tag:"(3010,007F)",vr:"UT",name:"FractionationNotes",vm:"1",version:"DICOM"},"(3010,0080)":{tag:"(3010,0080)",vr:"SQ",name:"RTTreatmentTechniqueCodeSequence",vm:"1",version:"DICOM"},"(3010,0081)":{tag:"(3010,0081)",vr:"SQ",name:"PrescriptionNotesSequence",vm:"1",version:"DICOM"},"(3010,0082)":{tag:"(3010,0082)",vr:"SQ",name:"FractionBasedRelationshipSequence",vm:"1",version:"DICOM"},"(3010,0083)":{tag:"(3010,0083)",vr:"CS",name:"FractionBasedRelationshipIntervalAnchor",vm:"1",version:"DICOM"},"(3010,0084)":{tag:"(3010,0084)",vr:"FD",name:"MinimumHoursBetweenFractions",vm:"1",version:"DICOM"},"(3010,0085)":{tag:"(3010,0085)",vr:"TM",name:"IntendedFractionStartTime",vm:"1-n",version:"DICOM"},"(3010,0086)":{tag:"(3010,0086)",vr:"LT",name:"IntendedStartDayOfWeek",vm:"1",version:"DICOM"},"(3010,0087)":{tag:"(3010,0087)",vr:"SQ",name:"WeekdayFractionPatternSequence",vm:"1",version:"DICOM"},"(3010,0088)":{tag:"(3010,0088)",vr:"SQ",name:"DeliveryTimeStructureCodeSequence",vm:"1",version:"DICOM"},"(3010,0089)":{tag:"(3010,0089)",vr:"SQ",name:"TreatmentSiteModifierCodeSequence",vm:"1",version:"DICOM"},"(3010,0090)":{tag:"(3010,0090)",vr:"CS",name:"RoboticBaseLocationIndicator",vm:"1",version:"DICOM"},"(3010,0091)":{tag:"(3010,0091)",vr:"SQ",name:"RoboticPathNodeSetCodeSequence",vm:"1",version:"DICOM"},"(3010,0092)":{tag:"(3010,0092)",vr:"UL",name:"RoboticNodeIdentifier",vm:"1",version:"DICOM"},"(3010,0093)":{tag:"(3010,0093)",vr:"FD",name:"RTTreatmentSourceCoordinates",vm:"3",version:"DICOM"},"(3010,0094)":{tag:"(3010,0094)",vr:"FD",name:"RadiationSourceCoordinateSystemYawAngle",vm:"1",version:"DICOM"},"(3010,0095)":{tag:"(3010,0095)",vr:"FD",name:"RadiationSourceCoordinateSystemRollAngle",vm:"1",version:"DICOM"},"(3010,0096)":{tag:"(3010,0096)",vr:"FD",name:"RadiationSourceCoordinateSystemPitchAngle",vm:"1",version:"DICOM"},"(3010,0097)":{tag:"(3010,0097)",vr:"SQ",name:"RoboticPathControlPointSequence",vm:"1",version:"DICOM"},"(3010,0098)":{tag:"(3010,0098)",vr:"SQ",name:"TomotherapeuticControlPointSequence",vm:"1",version:"DICOM"},"(3010,0099)":{tag:"(3010,0099)",vr:"FD",name:"TomotherapeuticLeafOpenDurations",vm:"1-n",version:"DICOM"},"(3010,009A)":{tag:"(3010,009A)",vr:"FD",name:"TomotherapeuticLeafInitialClosedDurations",vm:"1-n",version:"DICOM"},"(3010,00A0)":{tag:"(3010,00A0)",vr:"SQ",name:"ConceptualVolumeIdentificationSequence",vm:"1",version:"DICOM"},"(4FFE,0001)":{tag:"(4FFE,0001)",vr:"SQ",name:"MACParametersSequence",vm:"1",version:"DICOM"},"(5200,9229)":{tag:"(5200,9229)",vr:"SQ",name:"SharedFunctionalGroupsSequence",vm:"1",version:"DICOM"},"(5200,9230)":{tag:"(5200,9230)",vr:"SQ",name:"PerFrameFunctionalGroupsSequence",vm:"1",version:"DICOM"},"(5400,0100)":{tag:"(5400,0100)",vr:"SQ",name:"WaveformSequence",vm:"1",version:"DICOM"},"(5400,0110)":{tag:"(5400,0110)",vr:"ox",name:"ChannelMinimumValue",vm:"1",version:"DICOM"},"(5400,0112)":{tag:"(5400,0112)",vr:"ox",name:"ChannelMaximumValue",vm:"1",version:"DICOM"},"(5400,1004)":{tag:"(5400,1004)",vr:"US",name:"WaveformBitsAllocated",vm:"1",version:"DICOM"},"(5400,1006)":{tag:"(5400,1006)",vr:"CS",name:"WaveformSampleInterpretation",vm:"1",version:"DICOM"},"(5400,100A)":{tag:"(5400,100A)",vr:"ox",name:"WaveformPaddingValue",vm:"1",version:"DICOM"},"(5400,1010)":{tag:"(5400,1010)",vr:"ox",name:"WaveformData",vm:"1",version:"DICOM"},"(5600,0010)":{tag:"(5600,0010)",vr:"OF",name:"FirstOrderPhaseCorrectionAngle",vm:"1",version:"DICOM"},"(5600,0020)":{tag:"(5600,0020)",vr:"OF",name:"SpectroscopyData",vm:"1",version:"DICOM"},"(6000-60FF,0010)":{tag:"(6000-60FF,0010)",vr:"US",name:"OverlayRows",vm:"1",version:"DICOM"},"(6000-60FF,0011)":{tag:"(6000-60FF,0011)",vr:"US",name:"OverlayColumns",vm:"1",version:"DICOM"},"(6000-60FF,0015)":{tag:"(6000-60FF,0015)",vr:"IS",name:"NumberOfFramesInOverlay",vm:"1",version:"DICOM"},"(6000-60FF,0022)":{tag:"(6000-60FF,0022)",vr:"LO",name:"OverlayDescription",vm:"1",version:"DICOM"},"(6000-60FF,0040)":{tag:"(6000-60FF,0040)",vr:"CS",name:"OverlayType",vm:"1",version:"DICOM"},"(6000-60FF,0045)":{tag:"(6000-60FF,0045)",vr:"LO",name:"OverlaySubtype",vm:"1",version:"DICOM"},"(6000-60FF,0050)":{tag:"(6000-60FF,0050)",vr:"SS",name:"OverlayOrigin",vm:"2",version:"DICOM"},"(6000-60FF,0051)":{tag:"(6000-60FF,0051)",vr:"US",name:"ImageFrameOrigin",vm:"1",version:"DICOM"},"(6000-60FF,0100)":{tag:"(6000-60FF,0100)",vr:"US",name:"OverlayBitsAllocated",vm:"1",version:"DICOM"},"(6000-60FF,0102)":{tag:"(6000-60FF,0102)",vr:"US",name:"OverlayBitPosition",vm:"1",version:"DICOM"},"(6000-60FF,1001)":{tag:"(6000-60FF,1001)",vr:"CS",name:"OverlayActivationLayer",vm:"1",version:"DICOM"},"(6000-60FF,1301)":{tag:"(6000-60FF,1301)",vr:"IS",name:"ROIArea",vm:"1",version:"DICOM"},"(6000-60FF,1302)":{tag:"(6000-60FF,1302)",vr:"DS",name:"ROIMean",vm:"1",version:"DICOM"},"(6000-60FF,1303)":{tag:"(6000-60FF,1303)",vr:"DS",name:"ROIStandardDeviation",vm:"1",version:"DICOM"},"(6000-60FF,1500)":{tag:"(6000-60FF,1500)",vr:"LO",name:"OverlayLabel",vm:"1",version:"DICOM"},"(6000-60FF,3000)":{tag:"(6000-60FF,3000)",vr:"ox",name:"OverlayData",vm:"1",version:"DICOM"},"(7FE0,0001)":{tag:"(7FE0,0001)",vr:"OV",name:"ExtendedOffsetTable",vm:"1",version:"DICOM"},"(7FE0,0002)":{tag:"(7FE0,0002)",vr:"OV",name:"ExtendedOffsetTableLengths",vm:"1",version:"DICOM"},"(7FE0,0003)":{tag:"(7FE0,0003)",vr:"UV",name:"EncapsulatedPixelDataValueTotalLength",vm:"1",version:"DICOM"},"(7FE0,0008)":{tag:"(7FE0,0008)",vr:"OF",name:"FloatPixelData",vm:"1",version:"DICOM"},"(7FE0,0009)":{tag:"(7FE0,0009)",vr:"OD",name:"DoubleFloatPixelData",vm:"1",version:"DICOM"},"(7FE0,0010)":{tag:"(7FE0,0010)",vr:"ox",name:"PixelData",vm:"1",version:"DICOM"},"(FFFA,FFFA)":{tag:"(FFFA,FFFA)",vr:"SQ",name:"DigitalSignaturesSequence",vm:"1",version:"DICOM"},"(FFFC,FFFC)":{tag:"(FFFC,FFFC)",vr:"OB",name:"DataSetTrailingPadding",vm:"1",version:"DICOM"},"(FFFE,E000)":{tag:"(FFFE,E000)",vr:"na",name:"Item",vm:"1",version:"DICOM"},"(FFFE,E00D)":{tag:"(FFFE,E00D)",vr:"na",name:"ItemDelimitationItem",vm:"1",version:"DICOM"},"(FFFE,E0DD)":{tag:"(FFFE,E0DD)",vr:"na",name:"SequenceDelimitationItem",vm:"1",version:"DICOM"},"(0028,1224)":{tag:"(0028,1224)",vr:"OW",name:"SegmentedAlphaPaletteColorLookupTableData",vm:"1",version:"Supplement_156"},"(0070,1101)":{tag:"(0070,1101)",vr:"UI",name:"PresentationDisplayCollectionUID",vm:"1",version:"Supplement_156"},"(0070,1102)":{tag:"(0070,1102)",vr:"UI",name:"PresentationSequenceCollectionUID",vm:"1",version:"Supplement_156"},"(0070,1103)":{tag:"(0070,1103)",vr:"US",name:"PresentationSequencePositionIndex",vm:"1",version:"Supplement_156"},"(0070,1104)":{tag:"(0070,1104)",vr:"SQ",name:"RenderedImageReferenceSequence",vm:"1",version:"Supplement_156"},"(0070,1201)":{tag:"(0070,1201)",vr:"SQ",name:"VolumetricPresentationStateInputSequence",vm:"1",version:"Supplement_156"},"(0070,1202)":{tag:"(0070,1202)",vr:"CS",name:"PresentationInputType",vm:"1",version:"Supplement_156"},"(0070,1203)":{tag:"(0070,1203)",vr:"US",name:"InputSequencePositionIndex",vm:"1",version:"Supplement_156"},"(0070,1204)":{tag:"(0070,1204)",vr:"CS",name:"Crop",vm:"1",version:"Supplement_156"},"(0070,1205)":{tag:"(0070,1205)",vr:"US",name:"CroppingSpecificationIndex",vm:"1-n",version:"Supplement_156"},"(0070,1206)":{tag:"(0070,1206)",vr:"CS",name:"CompositingMethod",vm:"1",version:"Supplement_156"},"(0070,1207)":{tag:"(0070,1207)",vr:"US",name:"VolumetricPresentationInputNumber",vm:"1",version:"Supplement_156"},"(0070,1208)":{tag:"(0070,1208)",vr:"CS",name:"ImageVolumeGeometry",vm:"1",version:"Supplement_156"},"(0070,1301)":{tag:"(0070,1301)",vr:"SQ",name:"VolumeCroppingSequence",vm:"1",version:"Supplement_156"},"(0070,1302)":{tag:"(0070,1302)",vr:"CS",name:"VolumeCroppingMethod",vm:"1",version:"Supplement_156"},"(0070,1303)":{tag:"(0070,1303)",vr:"FD",name:"BoundingBoxCrop",vm:"6",version:"Supplement_156"},"(0070,1304)":{tag:"(0070,1304)",vr:"SQ",name:"ObliqueCroppingPlaneSequence",vm:"1",version:"Supplement_156"},"(0070,1305)":{tag:"(0070,1305)",vr:"FD",name:"ObliqueCroppingPlane",vm:"4",version:"Supplement_156"},"(0070,1306)":{tag:"(0070,1306)",vr:"FD",name:"ObliqueCroppingPlaneNormal",vm:"3",version:"Supplement_156"},"(0070,1309)":{tag:"(0070,1309)",vr:"US",name:"CroppingSpecificationNumber",vm:"1",version:"Supplement_156"},"(0070,1501)":{tag:"(0070,1501)",vr:"CS",name:"MultiPlanarReconstructionStyle",vm:"1",version:"Supplement_156"},"(0070,1502)":{tag:"(0070,1502)",vr:"CS",name:"MPRThicknessType",vm:"1",version:"Supplement_156"},"(0070,1503)":{tag:"(0070,1503)",vr:"FD",name:"MPRSlabThickness",vm:"1",version:"Supplement_156"},"(0070,1505)":{tag:"(0070,1505)",vr:"FD",name:"MPRTopLeftHandCorner",vm:"3",version:"Supplement_156"},"(0070,1507)":{tag:"(0070,1507)",vr:"FD",name:"MPRViewWidthDirection",vm:"3",version:"Supplement_156"},"(0070,1508)":{tag:"(0070,1508)",vr:"FD",name:"MPRViewWidth",vm:"1",version:"Supplement_156"},"(0070,150C)":{tag:"(0070,150C)",vr:"FL",name:"NumberOfVolumetricCurvePoints",vm:"1",version:"Supplement_156"},"(0070,150D)":{tag:"(0070,150D)",vr:"OD",name:"VolumetricCurvePoints",vm:"1",version:"Supplement_156"},"(0070,1511)":{tag:"(0070,1511)",vr:"FD",name:"MPRViewHeightDirection",vm:"3",version:"Supplement_156"},"(0070,1512)":{tag:"(0070,1512)",vr:"FD",name:"MPRViewHeight",vm:"1",version:"Supplement_156"},"(0070,1801)":{tag:"(0070,1801)",vr:"SQ",name:"PresentationStateClassificationComponentSequence",vm:"1",version:"Supplement_156"},"(0070,1802)":{tag:"(0070,1802)",vr:"CS",name:"ComponentType",vm:"1",version:"Supplement_156"},"(0070,1803)":{tag:"(0070,1803)",vr:"SQ",name:"ComponentInputSequence",vm:"1",version:"Supplement_156"},"(0070,1804)":{tag:"(0070,1804)",vr:"US",name:"VolumetricPresentationInputIndex",vm:"1",version:"Supplement_156"},"(0070,1805)":{tag:"(0070,1805)",vr:"SQ",name:"PresentationStateCompositorComponentSequence",vm:"1",version:"Supplement_156"},"(0070,1806)":{tag:"(0070,1806)",vr:"SQ",name:"WeightingTransferFunctionSequence",vm:"1",version:"Supplement_156"},"(0070,1807)":{tag:"(0070,1807)",vr:"US",name:"WeightingLookupTableDescriptor",vm:"3",version:"Supplement_156"},"(0070,1808)":{tag:"(0070,1808)",vr:"OB",name:"WeightingLookupTableData",vm:"1",version:"Supplement_156"},"(0070,1901)":{tag:"(0070,1901)",vr:"SQ",name:"VolumetricAnnotationSequence",vm:"1",version:"Supplement_156"},"(0070,1903)":{tag:"(0070,1903)",vr:"SQ",name:"ReferencedStructuredContextSequence",vm:"1",version:"Supplement_156"},"(0070,1904)":{tag:"(0070,1904)",vr:"UI",name:"ReferencedContentItem",vm:"1",version:"Supplement_156"},"(0070,1905)":{tag:"(0070,1905)",vr:"SQ",name:"VolumetricPresentationInputAnnotationSequence",vm:"1",version:"Supplement_156"},"(0070,1907)":{tag:"(0070,1907)",vr:"CS",name:"AnnotationClipping",vm:"1",version:"Supplement_156"},"(0070,1A01)":{tag:"(0070,1A01)",vr:"CS",name:"PresentationAnimationStyle",vm:"1",version:"Supplement_156"},"(0070,1A03)":{tag:"(0070,1A03)",vr:"FD",name:"RecommendedAnimationRate",vm:"1",version:"Supplement_156"},"(0070,1A04)":{tag:"(0070,1A04)",vr:"SQ",name:"AnimationCurveSequence",vm:"1",version:"Supplement_156"},"(0070,1A05)":{tag:"(0070,1A05)",vr:"FD",name:"AnimationStepSize",vm:"1",version:"Supplement_156"},"(0040,4070)":{tag:"(0040,4070)",vr:"SQ",name:"OutputDestinationSequence",vm:"1",version:"CP_1441"},"(0040,4071)":{tag:"(0040,4071)",vr:"SQ",name:"DICOMStorageSequence",vm:"1",version:"CP_1441"},"(0040,4072)":{tag:"(0040,4072)",vr:"SQ",name:"STOWRSStorageSequence",vm:"1",version:"CP_1441"},"(0040,4073)":{tag:"(0040,4073)",vr:"UR",name:"StorageURL",vm:"1",version:"CP_1441"},"(0040,4074)":{tag:"(0040,4074)",vr:"SQ",name:"XDSStorageSequence",vm:"1",version:"CP_1441"},"(0028,2002)":{tag:"(0028,2002)",vr:"CS",name:"ColorSpace",vm:"1",version:"CP_1454"},"(0040,9213)":{tag:"(0040,9213)",vr:"FD",name:"DoubleFloatRealWorldValueLastValueMapped",vm:"1",version:"CP_1458"},"(0040,9214)":{tag:"(0040,9214)",vr:"FD",name:"DoubleFloatRealWorldValueFirstValueMapped",vm:"1",version:"CP_1458"},"(0018,1320)":{tag:"(0018,1320)",vr:"FL",name:"B1rms",vm:"1",version:"CP_1461"},"(0009-o-FFFF,0000)":{tag:"(0009-o-FFFF,0000)",vr:"UL",name:"PrivateGroupLength",vm:"1",version:"PRIVATE"},"(0009-o-FFFF,0010-u-00FF)":{tag:"(0009-o-FFFF,0010-u-00FF)",vr:"LO",name:"PrivateCreator",vm:"1",version:"PRIVATE"},"(0001-o-0007,0000)":{tag:"(0001-o-0007,0000)",vr:"UL",name:"IllegalGroupLength",vm:"1",version:"ILLEGAL"},"(0001-o-0007,0010-u-00FF)":{tag:"(0001-o-0007,0010-u-00FF)",vr:"LO",name:"IllegalPrivateCreator",vm:"1",version:"ILLEGAL"},"(0000-u-FFFF,0000)":{tag:"(0000-u-FFFF,0000)",vr:"UL",name:"GenericGroupLength",vm:"1",version:"GENERIC"},"(0000,0001)":{tag:"(0000,0001)",vr:"UL",name:"RETIRED_CommandLengthToEnd",vm:"1",version:"DICOM/retired"},"(0000,0010)":{tag:"(0000,0010)",vr:"SH",name:"RETIRED_CommandRecognitionCode",vm:"1",version:"DICOM/retired"},"(0000,0200)":{tag:"(0000,0200)",vr:"AE",name:"RETIRED_Initiator",vm:"1",version:"DICOM/retired"},"(0000,0300)":{tag:"(0000,0300)",vr:"AE",name:"RETIRED_Receiver",vm:"1",version:"DICOM/retired"},"(0000,0400)":{tag:"(0000,0400)",vr:"AE",name:"RETIRED_FindLocation",vm:"1",version:"DICOM/retired"},"(0000,0850)":{tag:"(0000,0850)",vr:"US",name:"RETIRED_NumberOfMatches",vm:"1",version:"DICOM/retired"},"(0000,0860)":{tag:"(0000,0860)",vr:"US",name:"RETIRED_ResponseSequenceNumber",vm:"1",version:"DICOM/retired"},"(0000,4000)":{tag:"(0000,4000)",vr:"LT",name:"RETIRED_DialogReceiver",vm:"1",version:"DICOM/retired"},"(0000,4010)":{tag:"(0000,4010)",vr:"LT",name:"RETIRED_TerminalType",vm:"1",version:"DICOM/retired"},"(0000,5010)":{tag:"(0000,5010)",vr:"SH",name:"RETIRED_MessageSetID",vm:"1",version:"DICOM/retired"},"(0000,5020)":{tag:"(0000,5020)",vr:"SH",name:"RETIRED_EndMessageID",vm:"1",version:"DICOM/retired"},"(0000,5110)":{tag:"(0000,5110)",vr:"LT",name:"RETIRED_DisplayFormat",vm:"1",version:"DICOM/retired"},"(0000,5120)":{tag:"(0000,5120)",vr:"LT",name:"RETIRED_PagePositionID",vm:"1",version:"DICOM/retired"},"(0000,5130)":{tag:"(0000,5130)",vr:"CS",name:"RETIRED_TextFormatID",vm:"1",version:"DICOM/retired"},"(0000,5140)":{tag:"(0000,5140)",vr:"CS",name:"RETIRED_NormalReverse",vm:"1",version:"DICOM/retired"},"(0000,5150)":{tag:"(0000,5150)",vr:"CS",name:"RETIRED_AddGrayScale",vm:"1",version:"DICOM/retired"},"(0000,5160)":{tag:"(0000,5160)",vr:"CS",name:"RETIRED_Borders",vm:"1",version:"DICOM/retired"},"(0000,5170)":{tag:"(0000,5170)",vr:"IS",name:"RETIRED_Copies",vm:"1",version:"DICOM/retired"},"(0000,5180)":{tag:"(0000,5180)",vr:"CS",name:"RETIRED_CommandMagnificationType",vm:"1",version:"DICOM/retired"},"(0000,5190)":{tag:"(0000,5190)",vr:"CS",name:"RETIRED_Erase",vm:"1",version:"DICOM/retired"},"(0000,51A0)":{tag:"(0000,51A0)",vr:"CS",name:"RETIRED_Print",vm:"1",version:"DICOM/retired"},"(0000,51B0)":{tag:"(0000,51B0)",vr:"US",name:"RETIRED_Overlays",vm:"1-n",version:"DICOM/retired"},"(0004,1504)":{tag:"(0004,1504)",vr:"up",name:"RETIRED_MRDRDirectoryRecordOffset",vm:"1",version:"DICOM/retired"},"(0004,1600)":{tag:"(0004,1600)",vr:"UL",name:"RETIRED_NumberOfReferences",vm:"1",version:"DICOM/retired"},"(0008,0001)":{tag:"(0008,0001)",vr:"UL",name:"RETIRED_LengthToEnd",vm:"1",version:"DICOM/retired"},"(0008,0010)":{tag:"(0008,0010)",vr:"SH",name:"RETIRED_RecognitionCode",vm:"1",version:"DICOM/retired"},"(0008,0024)":{tag:"(0008,0024)",vr:"DA",name:"RETIRED_OverlayDate",vm:"1",version:"DICOM/retired"},"(0008,0025)":{tag:"(0008,0025)",vr:"DA",name:"RETIRED_CurveDate",vm:"1",version:"DICOM/retired"},"(0008,0034)":{tag:"(0008,0034)",vr:"TM",name:"RETIRED_OverlayTime",vm:"1",version:"DICOM/retired"},"(0008,0035)":{tag:"(0008,0035)",vr:"TM",name:"RETIRED_CurveTime",vm:"1",version:"DICOM/retired"},"(0008,0040)":{tag:"(0008,0040)",vr:"US",name:"RETIRED_DataSetType",vm:"1",version:"DICOM/retired"},"(0008,0041)":{tag:"(0008,0041)",vr:"LO",name:"RETIRED_DataSetSubtype",vm:"1",version:"DICOM/retired"},"(0008,0042)":{tag:"(0008,0042)",vr:"CS",name:"RETIRED_NuclearMedicineSeriesType",vm:"1",version:"DICOM/retired"},"(0008,1000)":{tag:"(0008,1000)",vr:"AE",name:"RETIRED_NetworkID",vm:"1",version:"DICOM/retired"},"(0008,1100)":{tag:"(0008,1100)",vr:"SQ",name:"RETIRED_ReferencedResultsSequence",vm:"1",version:"DICOM/retired"},"(0008,1130)":{tag:"(0008,1130)",vr:"SQ",name:"RETIRED_ReferencedOverlaySequence",vm:"1",version:"DICOM/retired"},"(0008,1145)":{tag:"(0008,1145)",vr:"SQ",name:"RETIRED_ReferencedCurveSequence",vm:"1",version:"DICOM/retired"},"(0008,2110)":{tag:"(0008,2110)",vr:"CS",name:"RETIRED_LossyImageCompressionRetired",vm:"1",version:"DICOM/retired"},"(0008,2200)":{tag:"(0008,2200)",vr:"CS",name:"RETIRED_TransducerPosition",vm:"1",version:"DICOM/retired"},"(0008,2204)":{tag:"(0008,2204)",vr:"CS",name:"RETIRED_TransducerOrientation",vm:"1",version:"DICOM/retired"},"(0008,2208)":{tag:"(0008,2208)",vr:"CS",name:"RETIRED_AnatomicStructure",vm:"1",version:"DICOM/retired"},"(0008,2240)":{tag:"(0008,2240)",vr:"SQ",name:"RETIRED_TransducerPositionSequence",vm:"1",version:"DICOM/retired"},"(0008,2242)":{tag:"(0008,2242)",vr:"SQ",name:"RETIRED_TransducerPositionModifierSequence",vm:"1",version:"DICOM/retired"},"(0008,2244)":{tag:"(0008,2244)",vr:"SQ",name:"RETIRED_TransducerOrientationSequence",vm:"1",version:"DICOM/retired"},"(0008,2246)":{tag:"(0008,2246)",vr:"SQ",name:"RETIRED_TransducerOrientationModifierSequence",vm:"1",version:"DICOM/retired"},"(0008,2251)":{tag:"(0008,2251)",vr:"SQ",name:"RETIRED_AnatomicStructureSpaceOrRegionCodeSequenceTrial",vm:"1",version:"DICOM/retired"},"(0008,2253)":{tag:"(0008,2253)",vr:"SQ",name:"RETIRED_AnatomicPortalOfEntranceCodeSequenceTrial",vm:"1",version:"DICOM/retired"},"(0008,2255)":{tag:"(0008,2255)",vr:"SQ",name:"RETIRED_AnatomicApproachDirectionCodeSequenceTrial",vm:"1",version:"DICOM/retired"},"(0008,2256)":{tag:"(0008,2256)",vr:"ST",name:"RETIRED_AnatomicPerspectiveDescriptionTrial",vm:"1",version:"DICOM/retired"},"(0008,2257)":{tag:"(0008,2257)",vr:"SQ",name:"RETIRED_AnatomicPerspectiveCodeSequenceTrial",vm:"1",version:"DICOM/retired"},"(0008,2258)":{tag:"(0008,2258)",vr:"ST",name:"RETIRED_AnatomicLocationOfExaminingInstrumentDescriptionTrial",vm:"1",version:"DICOM/retired"},"(0008,2259)":{tag:"(0008,2259)",vr:"SQ",name:"RETIRED_AnatomicLocationOfExaminingInstrumentCodeSequenceTrial",vm:"1",version:"DICOM/retired"},"(0008,225A)":{tag:"(0008,225A)",vr:"SQ",name:"RETIRED_AnatomicStructureSpaceOrRegionModifierCodeSequenceTrial",vm:"1",version:"DICOM/retired"},"(0008,225C)":{tag:"(0008,225C)",vr:"SQ",name:"RETIRED_OnAxisBackgroundAnatomicStructureCodeSequenceTrial",vm:"1",version:"DICOM/retired"},"(0008,4000)":{tag:"(0008,4000)",vr:"LT",name:"RETIRED_IdentifyingComments",vm:"1",version:"DICOM/retired"},"(0010,1050)":{tag:"(0010,1050)",vr:"LO",name:"RETIRED_InsurancePlanIdentification",vm:"1-n",version:"DICOM/retired"},"(0014,0023)":{tag:"(0014,0023)",vr:"ST",name:"RETIRED_CADFileFormat",vm:"1-n",version:"DICOM/retired"},"(0014,0024)":{tag:"(0014,0024)",vr:"ST",name:"RETIRED_ComponentReferenceSystem",vm:"1-n",version:"DICOM/retired"},"(0014,0045)":{tag:"(0014,0045)",vr:"ST",name:"RETIRED_MaterialPropertiesFileFormatRetired",vm:"1-n",version:"DICOM/retired"},"(0018,0030)":{tag:"(0018,0030)",vr:"LO",name:"RETIRED_Radionuclide",vm:"1-n",version:"DICOM/retired"},"(0018,0032)":{tag:"(0018,0032)",vr:"DS",name:"RETIRED_EnergyWindowCenterline",vm:"1",version:"DICOM/retired"},"(0018,0033)":{tag:"(0018,0033)",vr:"DS",name:"RETIRED_EnergyWindowTotalWidth",vm:"1-n",version:"DICOM/retired"},"(0018,0037)":{tag:"(0018,0037)",vr:"CS",name:"RETIRED_TherapyType",vm:"1",version:"DICOM/retired"},"(0018,0039)":{tag:"(0018,0039)",vr:"CS",name:"RETIRED_TherapyDescription",vm:"1",version:"DICOM/retired"},"(0018,0061)":{tag:"(0018,0061)",vr:"DS",name:"RETIRED_undefined",vm:"1",version:"DICOM/retired"},"(0018,1011)":{tag:"(0018,1011)",vr:"LO",name:"RETIRED_HardcopyCreationDeviceID",vm:"1",version:"DICOM/retired"},"(0018,1017)":{tag:"(0018,1017)",vr:"LO",name:"RETIRED_HardcopyDeviceManufacturer",vm:"1",version:"DICOM/retired"},"(0018,101A)":{tag:"(0018,101A)",vr:"LO",name:"RETIRED_HardcopyDeviceSoftwareVersion",vm:"1-n",version:"DICOM/retired"},"(0018,101B)":{tag:"(0018,101B)",vr:"LO",name:"RETIRED_HardcopyDeviceManufacturerModelName",vm:"1",version:"DICOM/retired"},"(0018,1141)":{tag:"(0018,1141)",vr:"DS",name:"RETIRED_AngularPosition",vm:"1",version:"DICOM/retired"},"(0018,1146)":{tag:"(0018,1146)",vr:"DS",name:"RETIRED_RotationOffset",vm:"1-n",version:"DICOM/retired"},"(0018,1240)":{tag:"(0018,1240)",vr:"IS",name:"RETIRED_UpperLowerPixelValues",vm:"1-n",version:"DICOM/retired"},"(0018,4000)":{tag:"(0018,4000)",vr:"LT",name:"RETIRED_AcquisitionComments",vm:"1",version:"DICOM/retired"},"(0018,5021)":{tag:"(0018,5021)",vr:"LO",name:"RETIRED_PostprocessingFunction",vm:"1",version:"DICOM/retired"},"(0018,5030)":{tag:"(0018,5030)",vr:"DS",name:"RETIRED_DynamicRange",vm:"1",version:"DICOM/retired"},"(0018,5040)":{tag:"(0018,5040)",vr:"DS",name:"RETIRED_TotalGain",vm:"1",version:"DICOM/retired"},"(0018,5210)":{tag:"(0018,5210)",vr:"DS",name:"RETIRED_ImageTransformationMatrix",vm:"6",version:"DICOM/retired"},"(0018,5212)":{tag:"(0018,5212)",vr:"DS",name:"RETIRED_ImageTranslationVector",vm:"3",version:"DICOM/retired"},"(0018,6038)":{tag:"(0018,6038)",vr:"UL",name:"RETIRED_DopplerSampleVolumeXPositionRetired",vm:"1",version:"DICOM/retired"},"(0018,603A)":{tag:"(0018,603A)",vr:"UL",name:"RETIRED_DopplerSampleVolumeYPositionRetired",vm:"1",version:"DICOM/retired"},"(0018,603C)":{tag:"(0018,603C)",vr:"UL",name:"RETIRED_TMLinePositionX0Retired",vm:"1",version:"DICOM/retired"},"(0018,603E)":{tag:"(0018,603E)",vr:"UL",name:"RETIRED_TMLinePositionY0Retired",vm:"1",version:"DICOM/retired"},"(0018,6040)":{tag:"(0018,6040)",vr:"UL",name:"RETIRED_TMLinePositionX1Retired",vm:"1",version:"DICOM/retired"},"(0018,6042)":{tag:"(0018,6042)",vr:"UL",name:"RETIRED_TMLinePositionY1Retired",vm:"1",version:"DICOM/retired"},"(0018,9096)":{tag:"(0018,9096)",vr:"FD",name:"RETIRED_ParallelReductionFactorInPlaneRetired",vm:"1",version:"DICOM/retired"},"(0018,9166)":{tag:"(0018,9166)",vr:"CS",name:"RETIRED_BulkMotionStatus",vm:"1",version:"DICOM/retired"},"(0018,9195)":{tag:"(0018,9195)",vr:"FD",name:"RETIRED_ChemicalShiftMinimumIntegrationLimitInHz",vm:"1",version:"DICOM/retired"},"(0018,9196)":{tag:"(0018,9196)",vr:"FD",name:"RETIRED_ChemicalShiftMaximumIntegrationLimitInHz",vm:"1",version:"DICOM/retired"},"(0020,0014)":{tag:"(0020,0014)",vr:"IS",name:"RETIRED_IsotopeNumber",vm:"1",version:"DICOM/retired"},"(0020,0015)":{tag:"(0020,0015)",vr:"IS",name:"RETIRED_PhaseNumber",vm:"1",version:"DICOM/retired"},"(0020,0016)":{tag:"(0020,0016)",vr:"IS",name:"RETIRED_IntervalNumber",vm:"1",version:"DICOM/retired"},"(0020,0017)":{tag:"(0020,0017)",vr:"IS",name:"RETIRED_TimeSlotNumber",vm:"1",version:"DICOM/retired"},"(0020,0018)":{tag:"(0020,0018)",vr:"IS",name:"RETIRED_AngleNumber",vm:"1",version:"DICOM/retired"},"(0020,0022)":{tag:"(0020,0022)",vr:"IS",name:"RETIRED_OverlayNumber",vm:"1",version:"DICOM/retired"},"(0020,0024)":{tag:"(0020,0024)",vr:"IS",name:"RETIRED_CurveNumber",vm:"1",version:"DICOM/retired"},"(0020,0026)":{tag:"(0020,0026)",vr:"IS",name:"RETIRED_LUTNumber",vm:"1",version:"DICOM/retired"},"(0020,0030)":{tag:"(0020,0030)",vr:"DS",name:"RETIRED_ImagePosition",vm:"3",version:"DICOM/retired"},"(0020,0035)":{tag:"(0020,0035)",vr:"DS",name:"RETIRED_ImageOrientation",vm:"6",version:"DICOM/retired"},"(0020,0050)":{tag:"(0020,0050)",vr:"DS",name:"RETIRED_Location",vm:"1",version:"DICOM/retired"},"(0020,0070)":{tag:"(0020,0070)",vr:"LO",name:"RETIRED_ImageGeometryType",vm:"1",version:"DICOM/retired"},"(0020,0080)":{tag:"(0020,0080)",vr:"CS",name:"RETIRED_MaskingImage",vm:"1-n",version:"DICOM/retired"},"(0020,00AA)":{tag:"(0020,00AA)",vr:"IS",name:"RETIRED_ReportNumber",vm:"1",version:"DICOM/retired"},"(0020,1000)":{tag:"(0020,1000)",vr:"IS",name:"RETIRED_SeriesInStudy",vm:"1",version:"DICOM/retired"},"(0020,1001)":{tag:"(0020,1001)",vr:"IS",name:"RETIRED_AcquisitionsInSeries",vm:"1",version:"DICOM/retired"},"(0020,1003)":{tag:"(0020,1003)",vr:"IS",name:"RETIRED_ImagesInSeries",vm:"1",version:"DICOM/retired"},"(0020,1004)":{tag:"(0020,1004)",vr:"IS",name:"RETIRED_AcquisitionsInStudy",vm:"1",version:"DICOM/retired"},"(0020,1005)":{tag:"(0020,1005)",vr:"IS",name:"RETIRED_ImagesInStudy",vm:"1",version:"DICOM/retired"},"(0020,1020)":{tag:"(0020,1020)",vr:"LO",name:"RETIRED_Reference",vm:"1-n",version:"DICOM/retired"},"(0020,1070)":{tag:"(0020,1070)",vr:"IS",name:"RETIRED_OtherStudyNumbers",vm:"1-n",version:"DICOM/retired"},"(0020,3100-31FF)":{tag:"(0020,3100-31FF)",vr:"CS",name:"RETIRED_SourceImageIDs",vm:"1-n",version:"DICOM/retired"},"(0020,3401)":{tag:"(0020,3401)",vr:"CS",name:"RETIRED_ModifyingDeviceID",vm:"1",version:"DICOM/retired"},"(0020,3402)":{tag:"(0020,3402)",vr:"CS",name:"RETIRED_ModifiedImageID",vm:"1",version:"DICOM/retired"},"(0020,3403)":{tag:"(0020,3403)",vr:"DA",name:"RETIRED_ModifiedImageDate",vm:"1",version:"DICOM/retired"},"(0020,3404)":{tag:"(0020,3404)",vr:"LO",name:"RETIRED_ModifyingDeviceManufacturer",vm:"1",version:"DICOM/retired"},"(0020,3405)":{tag:"(0020,3405)",vr:"TM",name:"RETIRED_ModifiedImageTime",vm:"1",version:"DICOM/retired"},"(0020,3406)":{tag:"(0020,3406)",vr:"LO",name:"RETIRED_ModifiedImageDescription",vm:"1",version:"DICOM/retired"},"(0020,5000)":{tag:"(0020,5000)",vr:"AT",name:"RETIRED_OriginalImageIdentification",vm:"1-n",version:"DICOM/retired"},"(0020,5002)":{tag:"(0020,5002)",vr:"LO",name:"RETIRED_OriginalImageIdentificationNomenclature",vm:"1-n",version:"DICOM/retired"},"(0022,1094)":{tag:"(0022,1094)",vr:"LO",name:"RETIRED_LensConstantDescription",vm:"1",version:"DICOM/retired"},"(0022,1153)":{tag:"(0022,1153)",vr:"SQ",name:"RETIRED_OphthalmicAxialLengthAcquisitionMethodCodeSequence",vm:"1",version:"DICOM/retired"},"(0022,1265)":{tag:"(0022,1265)",vr:"SQ",name:"RETIRED_OphthalmicAxialLengthQualityMetricTypeCodeSequence",vm:"1",version:"DICOM/retired"},"(0022,1273)":{tag:"(0022,1273)",vr:"LO",name:"RETIRED_OphthalmicAxialLengthQualityMetricTypeDescription",vm:"1",version:"DICOM/retired"},"(0028,0005)":{tag:"(0028,0005)",vr:"US",name:"RETIRED_ImageDimensions",vm:"1",version:"DICOM/retired"},"(0028,0012)":{tag:"(0028,0012)",vr:"US",name:"RETIRED_Planes",vm:"1",version:"DICOM/retired"},"(0028,0040)":{tag:"(0028,0040)",vr:"CS",name:"RETIRED_ImageFormat",vm:"1",version:"DICOM/retired"},"(0028,0050)":{tag:"(0028,0050)",vr:"LO",name:"RETIRED_ManipulatedImage",vm:"1-n",version:"DICOM/retired"},"(0028,005F)":{tag:"(0028,005F)",vr:"LO",name:"RETIRED_CompressionRecognitionCode",vm:"1",version:"DICOM/retired"},"(0028,0060)":{tag:"(0028,0060)",vr:"CS",name:"RETIRED_CompressionCode",vm:"1",version:"DICOM/retired"},"(0028,0061)":{tag:"(0028,0061)",vr:"SH",name:"RETIRED_CompressionOriginator",vm:"1",version:"DICOM/retired"},"(0028,0062)":{tag:"(0028,0062)",vr:"LO",name:"RETIRED_CompressionLabel",vm:"1",version:"DICOM/retired"},"(0028,0063)":{tag:"(0028,0063)",vr:"SH",name:"RETIRED_CompressionDescription",vm:"1",version:"DICOM/retired"},"(0028,0065)":{tag:"(0028,0065)",vr:"CS",name:"RETIRED_CompressionSequence",vm:"1-n",version:"DICOM/retired"},"(0028,0066)":{tag:"(0028,0066)",vr:"AT",name:"RETIRED_CompressionStepPointers",vm:"1-n",version:"DICOM/retired"},"(0028,0068)":{tag:"(0028,0068)",vr:"US",name:"RETIRED_RepeatInterval",vm:"1",version:"DICOM/retired"},"(0028,0069)":{tag:"(0028,0069)",vr:"US",name:"RETIRED_BitsGrouped",vm:"1",version:"DICOM/retired"},"(0028,0070)":{tag:"(0028,0070)",vr:"US",name:"RETIRED_PerimeterTable",vm:"1-n",version:"DICOM/retired"},"(0028,0071)":{tag:"(0028,0071)",vr:"xs",name:"RETIRED_PerimeterValue",vm:"1",version:"DICOM/retired"},"(0028,0080)":{tag:"(0028,0080)",vr:"US",name:"RETIRED_PredictorRows",vm:"1",version:"DICOM/retired"},"(0028,0081)":{tag:"(0028,0081)",vr:"US",name:"RETIRED_PredictorColumns",vm:"1",version:"DICOM/retired"},"(0028,0082)":{tag:"(0028,0082)",vr:"US",name:"RETIRED_PredictorConstants",vm:"1-n",version:"DICOM/retired"},"(0028,0090)":{tag:"(0028,0090)",vr:"CS",name:"RETIRED_BlockedPixels",vm:"1",version:"DICOM/retired"},"(0028,0091)":{tag:"(0028,0091)",vr:"US",name:"RETIRED_BlockRows",vm:"1",version:"DICOM/retired"},"(0028,0092)":{tag:"(0028,0092)",vr:"US",name:"RETIRED_BlockColumns",vm:"1",version:"DICOM/retired"},"(0028,0093)":{tag:"(0028,0093)",vr:"US",name:"RETIRED_RowOverlap",vm:"1",version:"DICOM/retired"},"(0028,0094)":{tag:"(0028,0094)",vr:"US",name:"RETIRED_ColumnOverlap",vm:"1",version:"DICOM/retired"},"(0028,0104)":{tag:"(0028,0104)",vr:"xs",name:"RETIRED_SmallestValidPixelValue",vm:"1",version:"DICOM/retired"},"(0028,0105)":{tag:"(0028,0105)",vr:"xs",name:"RETIRED_LargestValidPixelValue",vm:"1",version:"DICOM/retired"},"(0028,0110)":{tag:"(0028,0110)",vr:"xs",name:"RETIRED_SmallestImagePixelValueInPlane",vm:"1",version:"DICOM/retired"},"(0028,0111)":{tag:"(0028,0111)",vr:"xs",name:"RETIRED_LargestImagePixelValueInPlane",vm:"1",version:"DICOM/retired"},"(0028,0200)":{tag:"(0028,0200)",vr:"US",name:"RETIRED_ImageLocation",vm:"1",version:"DICOM/retired"},"(0028,0400)":{tag:"(0028,0400)",vr:"LO",name:"RETIRED_TransformLabel",vm:"1",version:"DICOM/retired"},"(0028,0401)":{tag:"(0028,0401)",vr:"LO",name:"RETIRED_TransformVersionNumber",vm:"1",version:"DICOM/retired"},"(0028,0402)":{tag:"(0028,0402)",vr:"US",name:"RETIRED_NumberOfTransformSteps",vm:"1",version:"DICOM/retired"},"(0028,0403)":{tag:"(0028,0403)",vr:"LO",name:"RETIRED_SequenceOfCompressedData",vm:"1-n",version:"DICOM/retired"},"(0028,0404)":{tag:"(0028,0404)",vr:"AT",name:"RETIRED_DetailsOfCoefficients",vm:"1-n",version:"DICOM/retired"},"(0028,0410)":{tag:"(0028,0410)",vr:"US",name:"RETIRED_RowsForNthOrderCoefficients",vm:"1",version:"DICOM/retired"},"(0028,0411)":{tag:"(0028,0411)",vr:"US",name:"RETIRED_ColumnsForNthOrderCoefficients",vm:"1",version:"DICOM/retired"},"(0028,0412)":{tag:"(0028,0412)",vr:"LO",name:"RETIRED_CoefficientCoding",vm:"1-n",version:"DICOM/retired"},"(0028,0413)":{tag:"(0028,0413)",vr:"AT",name:"RETIRED_CoefficientCodingPointers",vm:"1-n",version:"DICOM/retired"},"(0028,0700)":{tag:"(0028,0700)",vr:"LO",name:"RETIRED_DCTLabel",vm:"1",version:"DICOM/retired"},"(0028,0701)":{tag:"(0028,0701)",vr:"CS",name:"RETIRED_DataBlockDescription",vm:"1-n",version:"DICOM/retired"},"(0028,0702)":{tag:"(0028,0702)",vr:"AT",name:"RETIRED_DataBlock",vm:"1-n",version:"DICOM/retired"},"(0028,0710)":{tag:"(0028,0710)",vr:"US",name:"RETIRED_NormalizationFactorFormat",vm:"1",version:"DICOM/retired"},"(0028,0720)":{tag:"(0028,0720)",vr:"US",name:"RETIRED_ZonalMapNumberFormat",vm:"1",version:"DICOM/retired"},"(0028,0721)":{tag:"(0028,0721)",vr:"AT",name:"RETIRED_ZonalMapLocation",vm:"1-n",version:"DICOM/retired"},"(0028,0722)":{tag:"(0028,0722)",vr:"US",name:"RETIRED_ZonalMapFormat",vm:"1",version:"DICOM/retired"},"(0028,0730)":{tag:"(0028,0730)",vr:"US",name:"RETIRED_AdaptiveMapFormat",vm:"1",version:"DICOM/retired"},"(0028,0740)":{tag:"(0028,0740)",vr:"US",name:"RETIRED_CodeNumberFormat",vm:"1",version:"DICOM/retired"},"(0028,0800)":{tag:"(0028,0800)",vr:"CS",name:"RETIRED_CodeLabel",vm:"1-n",version:"DICOM/retired"},"(0028,0802)":{tag:"(0028,0802)",vr:"US",name:"RETIRED_NumberOfTables",vm:"1",version:"DICOM/retired"},"(0028,0803)":{tag:"(0028,0803)",vr:"AT",name:"RETIRED_CodeTableLocation",vm:"1-n",version:"DICOM/retired"},"(0028,0804)":{tag:"(0028,0804)",vr:"US",name:"RETIRED_BitsForCodeWord",vm:"1",version:"DICOM/retired"},"(0028,0808)":{tag:"(0028,0808)",vr:"AT",name:"RETIRED_ImageDataLocation",vm:"1-n",version:"DICOM/retired"},"(0028,1080)":{tag:"(0028,1080)",vr:"CS",name:"RETIRED_GrayScale",vm:"1",version:"DICOM/retired"},"(0028,1100)":{tag:"(0028,1100)",vr:"xs",name:"RETIRED_GrayLookupTableDescriptor",vm:"3",version:"DICOM/retired"},"(0028,1111)":{tag:"(0028,1111)",vr:"xs",name:"RETIRED_LargeRedPaletteColorLookupTableDescriptor",vm:"4",version:"DICOM/retired"},"(0028,1112)":{tag:"(0028,1112)",vr:"xs",name:"RETIRED_LargeGreenPaletteColorLookupTableDescriptor",vm:"4",version:"DICOM/retired"},"(0028,1113)":{tag:"(0028,1113)",vr:"xs",name:"RETIRED_LargeBluePaletteColorLookupTableDescriptor",vm:"4",version:"DICOM/retired"},"(0028,1200)":{tag:"(0028,1200)",vr:"lt",name:"RETIRED_GrayLookupTableData",vm:"1-n",version:"DICOM/retired"},"(0028,1211)":{tag:"(0028,1211)",vr:"OW",name:"RETIRED_LargeRedPaletteColorLookupTableData",vm:"1",version:"DICOM/retired"},"(0028,1212)":{tag:"(0028,1212)",vr:"OW",name:"RETIRED_LargeGreenPaletteColorLookupTableData",vm:"1",version:"DICOM/retired"},"(0028,1213)":{tag:"(0028,1213)",vr:"OW",name:"RETIRED_LargeBluePaletteColorLookupTableData",vm:"1",version:"DICOM/retired"},"(0028,1214)":{tag:"(0028,1214)",vr:"UI",name:"RETIRED_LargePaletteColorLookupTableUID",vm:"1",version:"DICOM/retired"},"(0028,4000)":{tag:"(0028,4000)",vr:"LT",name:"RETIRED_ImagePresentationComments",vm:"1",version:"DICOM/retired"},"(0028,5000)":{tag:"(0028,5000)",vr:"SQ",name:"RETIRED_BiPlaneAcquisitionSequence",vm:"1",version:"DICOM/retired"},"(0028,6030)":{tag:"(0028,6030)",vr:"US",name:"RETIRED_MaskPointers",vm:"1-n",version:"DICOM/retired"},"(0028,9099)":{tag:"(0028,9099)",vr:"US",name:"RETIRED_LargestMonochromePixelValue",vm:"1",version:"DICOM/retired"},"(0032,000A)":{tag:"(0032,000A)",vr:"CS",name:"RETIRED_StudyStatusID",vm:"1",version:"DICOM/retired"},"(0032,000C)":{tag:"(0032,000C)",vr:"CS",name:"RETIRED_StudyPriorityID",vm:"1",version:"DICOM/retired"},"(0032,0012)":{tag:"(0032,0012)",vr:"LO",name:"RETIRED_StudyIDIssuer",vm:"1",version:"DICOM/retired"},"(0032,0032)":{tag:"(0032,0032)",vr:"DA",name:"RETIRED_StudyVerifiedDate",vm:"1",version:"DICOM/retired"},"(0032,0033)":{tag:"(0032,0033)",vr:"TM",name:"RETIRED_StudyVerifiedTime",vm:"1",version:"DICOM/retired"},"(0032,0034)":{tag:"(0032,0034)",vr:"DA",name:"RETIRED_StudyReadDate",vm:"1",version:"DICOM/retired"},"(0032,0035)":{tag:"(0032,0035)",vr:"TM",name:"RETIRED_StudyReadTime",vm:"1",version:"DICOM/retired"},"(0032,1000)":{tag:"(0032,1000)",vr:"DA",name:"RETIRED_ScheduledStudyStartDate",vm:"1",version:"DICOM/retired"},"(0032,1001)":{tag:"(0032,1001)",vr:"TM",name:"RETIRED_ScheduledStudyStartTime",vm:"1",version:"DICOM/retired"},"(0032,1010)":{tag:"(0032,1010)",vr:"DA",name:"RETIRED_ScheduledStudyStopDate",vm:"1",version:"DICOM/retired"},"(0032,1011)":{tag:"(0032,1011)",vr:"TM",name:"RETIRED_ScheduledStudyStopTime",vm:"1",version:"DICOM/retired"},"(0032,1020)":{tag:"(0032,1020)",vr:"LO",name:"RETIRED_ScheduledStudyLocation",vm:"1",version:"DICOM/retired"},"(0032,1021)":{tag:"(0032,1021)",vr:"AE",name:"RETIRED_ScheduledStudyLocationAETitle",vm:"1-n",version:"DICOM/retired"},"(0032,1030)":{tag:"(0032,1030)",vr:"LO",name:"RETIRED_ReasonForStudy",vm:"1",version:"DICOM/retired"},"(0032,1040)":{tag:"(0032,1040)",vr:"DA",name:"RETIRED_StudyArrivalDate",vm:"1",version:"DICOM/retired"},"(0032,1041)":{tag:"(0032,1041)",vr:"TM",name:"RETIRED_StudyArrivalTime",vm:"1",version:"DICOM/retired"},"(0032,1050)":{tag:"(0032,1050)",vr:"DA",name:"RETIRED_StudyCompletionDate",vm:"1",version:"DICOM/retired"},"(0032,1051)":{tag:"(0032,1051)",vr:"TM",name:"RETIRED_StudyCompletionTime",vm:"1",version:"DICOM/retired"},"(0032,1055)":{tag:"(0032,1055)",vr:"CS",name:"RETIRED_StudyComponentStatusID",vm:"1",version:"DICOM/retired"},"(0032,4000)":{tag:"(0032,4000)",vr:"LT",name:"RETIRED_StudyComments",vm:"1",version:"DICOM/retired"},"(0038,0011)":{tag:"(0038,0011)",vr:"LO",name:"RETIRED_IssuerOfAdmissionID",vm:"1",version:"DICOM/retired"},"(0038,001A)":{tag:"(0038,001A)",vr:"DA",name:"RETIRED_ScheduledAdmissionDate",vm:"1",version:"DICOM/retired"},"(0038,001B)":{tag:"(0038,001B)",vr:"TM",name:"RETIRED_ScheduledAdmissionTime",vm:"1",version:"DICOM/retired"},"(0038,001C)":{tag:"(0038,001C)",vr:"DA",name:"RETIRED_ScheduledDischargeDate",vm:"1",version:"DICOM/retired"},"(0038,001D)":{tag:"(0038,001D)",vr:"TM",name:"RETIRED_ScheduledDischargeTime",vm:"1",version:"DICOM/retired"},"(0038,001E)":{tag:"(0038,001E)",vr:"LO",name:"RETIRED_ScheduledPatientInstitutionResidence",vm:"1",version:"DICOM/retired"},"(0038,0030)":{tag:"(0038,0030)",vr:"DA",name:"RETIRED_DischargeDate",vm:"1",version:"DICOM/retired"},"(0038,0032)":{tag:"(0038,0032)",vr:"TM",name:"RETIRED_DischargeTime",vm:"1",version:"DICOM/retired"},"(0038,0040)":{tag:"(0038,0040)",vr:"LO",name:"RETIRED_DischargeDiagnosisDescription",vm:"1",version:"DICOM/retired"},"(0038,0044)":{tag:"(0038,0044)",vr:"SQ",name:"RETIRED_DischargeDiagnosisCodeSequence",vm:"1",version:"DICOM/retired"},"(0038,0061)":{tag:"(0038,0061)",vr:"LO",name:"RETIRED_IssuerOfServiceEpisodeID",vm:"1",version:"DICOM/retired"},"(0040,0307)":{tag:"(0040,0307)",vr:"DS",name:"RETIRED_DistanceSourceToSupport",vm:"1",version:"DICOM/retired"},"(0040,0330)":{tag:"(0040,0330)",vr:"SQ",name:"RETIRED_ReferencedProcedureStepSequence",vm:"1",version:"DICOM/retired"},"(0040,050A)":{tag:"(0040,050A)",vr:"LO",name:"RETIRED_SpecimenAccessionNumber",vm:"1",version:"DICOM/retired"},"(0040,0550)":{tag:"(0040,0550)",vr:"SQ",name:"RETIRED_SpecimenSequence",vm:"1",version:"DICOM/retired"},"(0040,0552)":{tag:"(0040,0552)",vr:"SQ",name:"RETIRED_SpecimenDescriptionSequenceTrial",vm:"1",version:"DICOM/retired"},"(0040,0553)":{tag:"(0040,0553)",vr:"ST",name:"RETIRED_SpecimenDescriptionTrial",vm:"1",version:"DICOM/retired"},"(0040,06FA)":{tag:"(0040,06FA)",vr:"LO",name:"RETIRED_SlideIdentifier",vm:"1",version:"DICOM/retired"},"(0040,08D8)":{tag:"(0040,08D8)",vr:"SQ",name:"RETIRED_PixelSpacingSequence",vm:"1",version:"DICOM/retired"},"(0040,08DA)":{tag:"(0040,08DA)",vr:"SQ",name:"RETIRED_CoordinateSystemAxisCodeSequence",vm:"1",version:"DICOM/retired"},"(0040,09F8)":{tag:"(0040,09F8)",vr:"SQ",name:"RETIRED_VitalStainCodeSequenceTrial",vm:"1",version:"DICOM/retired"},"(0040,1006)":{tag:"(0040,1006)",vr:"SH",name:"RETIRED_PlacerOrderNumberProcedure",vm:"1",version:"DICOM/retired"},"(0040,1007)":{tag:"(0040,1007)",vr:"SH",name:"RETIRED_FillerOrderNumberProcedure",vm:"1",version:"DICOM/retired"},"(0040,1060)":{tag:"(0040,1060)",vr:"LO",name:"RETIRED_RequestedProcedureDescriptionTrial",vm:"1",version:"DICOM/retired"},"(0040,2001)":{tag:"(0040,2001)",vr:"LO",name:"RETIRED_ReasonForTheImagingServiceRequest",vm:"1",version:"DICOM/retired"},"(0040,2006)":{tag:"(0040,2006)",vr:"SH",name:"RETIRED_PlacerOrderNumberImagingServiceRequestRetired",vm:"1",version:"DICOM/retired"},"(0040,2007)":{tag:"(0040,2007)",vr:"SH",name:"RETIRED_FillerOrderNumberImagingServiceRequestRetired",vm:"1",version:"DICOM/retired"},"(0040,4001)":{tag:"(0040,4001)",vr:"CS",name:"RETIRED_GeneralPurposeScheduledProcedureStepStatus",vm:"1",version:"DICOM/retired"},"(0040,4002)":{tag:"(0040,4002)",vr:"CS",name:"RETIRED_GeneralPurposePerformedProcedureStepStatus",vm:"1",version:"DICOM/retired"},"(0040,4003)":{tag:"(0040,4003)",vr:"CS",name:"RETIRED_GeneralPurposeScheduledProcedureStepPriority",vm:"1",version:"DICOM/retired"},"(0040,4004)":{tag:"(0040,4004)",vr:"SQ",name:"RETIRED_ScheduledProcessingApplicationsCodeSequence",vm:"1",version:"DICOM/retired"},"(0040,4006)":{tag:"(0040,4006)",vr:"CS",name:"RETIRED_MultipleCopiesFlag",vm:"1",version:"DICOM/retired"},"(0040,4015)":{tag:"(0040,4015)",vr:"SQ",name:"RETIRED_ResultingGeneralPurposePerformedProcedureStepsSequence",vm:"1",version:"DICOM/retired"},"(0040,4016)":{tag:"(0040,4016)",vr:"SQ",name:"RETIRED_ReferencedGeneralPurposeScheduledProcedureStepSequence",vm:"1",version:"DICOM/retired"},"(0040,4022)":{tag:"(0040,4022)",vr:"SQ",name:"RETIRED_RelevantInformationSequence",vm:"1",version:"DICOM/retired"},"(0040,4023)":{tag:"(0040,4023)",vr:"UI",name:"RETIRED_ReferencedGeneralPurposeScheduledProcedureStepTransactionUID",vm:"1",version:"DICOM/retired"},"(0040,4031)":{tag:"(0040,4031)",vr:"SQ",name:"RETIRED_RequestedSubsequentWorkitemCodeSequence",vm:"1",version:"DICOM/retired"},"(0040,4032)":{tag:"(0040,4032)",vr:"SQ",name:"RETIRED_NonDICOMOutputCodeSequence",vm:"1",version:"DICOM/retired"},"(0040,A007)":{tag:"(0040,A007)",vr:"CS",name:"RETIRED_FindingsFlagTrial",vm:"1",version:"DICOM/retired"},"(0040,A020)":{tag:"(0040,A020)",vr:"SQ",name:"RETIRED_FindingsSequenceTrial",vm:"1",version:"DICOM/retired"},"(0040,A021)":{tag:"(0040,A021)",vr:"UI",name:"RETIRED_FindingsGroupUIDTrial",vm:"1",version:"DICOM/retired"},"(0040,A022)":{tag:"(0040,A022)",vr:"UI",name:"RETIRED_ReferencedFindingsGroupUIDTrial",vm:"1",version:"DICOM/retired"},"(0040,A023)":{tag:"(0040,A023)",vr:"DA",name:"RETIRED_FindingsGroupRecordingDateTrial",vm:"1",version:"DICOM/retired"},"(0040,A024)":{tag:"(0040,A024)",vr:"TM",name:"RETIRED_FindingsGroupRecordingTimeTrial",vm:"1",version:"DICOM/retired"},"(0040,A026)":{tag:"(0040,A026)",vr:"SQ",name:"RETIRED_FindingsSourceCategoryCodeSequenceTrial",vm:"1",version:"DICOM/retired"},"(0040,A028)":{tag:"(0040,A028)",vr:"SQ",name:"RETIRED_DocumentingOrganizationIdentifierCodeSequenceTrial",vm:"1",version:"DICOM/retired"},"(0040,A047)":{tag:"(0040,A047)",vr:"LO",name:"RETIRED_MeasurementPrecisionDescriptionTrial",vm:"1",version:"DICOM/retired"},"(0040,A057)":{tag:"(0040,A057)",vr:"CS",name:"RETIRED_UrgencyOrPriorityAlertsTrial",vm:"1-n",version:"DICOM/retired"},"(0040,A060)":{tag:"(0040,A060)",vr:"LO",name:"RETIRED_SequencingIndicatorTrial",vm:"1",version:"DICOM/retired"},"(0040,A066)":{tag:"(0040,A066)",vr:"SQ",name:"RETIRED_DocumentIdentifierCodeSequenceTrial",vm:"1",version:"DICOM/retired"},"(0040,A067)":{tag:"(0040,A067)",vr:"PN",name:"RETIRED_DocumentAuthorTrial",vm:"1",version:"DICOM/retired"},"(0040,A068)":{tag:"(0040,A068)",vr:"SQ",name:"RETIRED_DocumentAuthorIdentifierCodeSequenceTrial",vm:"1",version:"DICOM/retired"},"(0040,A070)":{tag:"(0040,A070)",vr:"SQ",name:"RETIRED_IdentifierCodeSequenceTrial",vm:"1",version:"DICOM/retired"},"(0040,A074)":{tag:"(0040,A074)",vr:"OB",name:"RETIRED_ObjectBinaryIdentifierTrial",vm:"1",version:"DICOM/retired"},"(0040,A076)":{tag:"(0040,A076)",vr:"SQ",name:"RETIRED_DocumentingObserverIdentifierCodeSequenceTrial",vm:"1",version:"DICOM/retired"},"(0040,A085)":{tag:"(0040,A085)",vr:"SQ",name:"RETIRED_ProcedureIdentifierCodeSequenceTrial",vm:"1",version:"DICOM/retired"},"(0040,A089)":{tag:"(0040,A089)",vr:"OB",name:"RETIRED_ObjectDirectoryBinaryIdentifierTrial",vm:"1",version:"DICOM/retired"},"(0040,A090)":{tag:"(0040,A090)",vr:"SQ",name:"RETIRED_EquivalentCDADocumentSequence",vm:"1",version:"DICOM/retired"},"(0040,A110)":{tag:"(0040,A110)",vr:"DA",name:"RETIRED_DateOfDocumentOrVerbalTransactionTrial",vm:"1",version:"DICOM/retired"},"(0040,A112)":{tag:"(0040,A112)",vr:"TM",name:"RETIRED_TimeOfDocumentCreationOrVerbalTransactionTrial",vm:"1",version:"DICOM/retired"},"(0040,A125)":{tag:"(0040,A125)",vr:"CS",name:"RETIRED_ReportStatusIDTrial",vm:"2",version:"DICOM/retired"},"(0040,A167)":{tag:"(0040,A167)",vr:"SQ",name:"RETIRED_ObservationCategoryCodeSequenceTrial",vm:"1",version:"DICOM/retired"},"(0040,A16A)":{tag:"(0040,A16A)",vr:"ST",name:"RETIRED_BibliographicCitationTrial",vm:"1",version:"DICOM/retired"},"(0040,A172)":{tag:"(0040,A172)",vr:"UI",name:"RETIRED_ReferencedObservationUIDTrial",vm:"1",version:"DICOM/retired"},"(0040,A173)":{tag:"(0040,A173)",vr:"CS",name:"RETIRED_ReferencedObservationClassTrial",vm:"1",version:"DICOM/retired"},"(0040,A174)":{tag:"(0040,A174)",vr:"CS",name:"RETIRED_ReferencedObjectObservationClassTrial",vm:"1",version:"DICOM/retired"},"(0040,A192)":{tag:"(0040,A192)",vr:"DA",name:"RETIRED_ObservationDateTrial",vm:"1",version:"DICOM/retired"},"(0040,A193)":{tag:"(0040,A193)",vr:"TM",name:"RETIRED_ObservationTimeTrial",vm:"1",version:"DICOM/retired"},"(0040,A194)":{tag:"(0040,A194)",vr:"CS",name:"RETIRED_MeasurementAutomationTrial",vm:"1",version:"DICOM/retired"},"(0040,A224)":{tag:"(0040,A224)",vr:"ST",name:"RETIRED_IdentificationDescriptionTrial",vm:"1",version:"DICOM/retired"},"(0040,A290)":{tag:"(0040,A290)",vr:"CS",name:"RETIRED_CoordinatesSetGeometricTypeTrial",vm:"1",version:"DICOM/retired"},"(0040,A296)":{tag:"(0040,A296)",vr:"SQ",name:"RETIRED_AlgorithmCodeSequenceTrial",vm:"1",version:"DICOM/retired"},"(0040,A297)":{tag:"(0040,A297)",vr:"ST",name:"RETIRED_AlgorithmDescriptionTrial",vm:"1",version:"DICOM/retired"},"(0040,A29A)":{tag:"(0040,A29A)",vr:"SL",name:"RETIRED_PixelCoordinatesSetTrial",vm:"2-2n",version:"DICOM/retired"},"(0040,A307)":{tag:"(0040,A307)",vr:"PN",name:"RETIRED_CurrentObserverTrial",vm:"1",version:"DICOM/retired"},"(0040,A313)":{tag:"(0040,A313)",vr:"SQ",name:"RETIRED_ReferencedAccessionSequenceTrial",vm:"1",version:"DICOM/retired"},"(0040,A33A)":{tag:"(0040,A33A)",vr:"ST",name:"RETIRED_ReportStatusCommentTrial",vm:"1",version:"DICOM/retired"},"(0040,A340)":{tag:"(0040,A340)",vr:"SQ",name:"RETIRED_ProcedureContextSequenceTrial",vm:"1",version:"DICOM/retired"},"(0040,A352)":{tag:"(0040,A352)",vr:"PN",name:"RETIRED_VerbalSourceTrial",vm:"1",version:"DICOM/retired"},"(0040,A353)":{tag:"(0040,A353)",vr:"ST",name:"RETIRED_AddressTrial",vm:"1",version:"DICOM/retired"},"(0040,A354)":{tag:"(0040,A354)",vr:"LO",name:"RETIRED_TelephoneNumberTrial",vm:"1",version:"DICOM/retired"},"(0040,A358)":{tag:"(0040,A358)",vr:"SQ",name:"RETIRED_VerbalSourceIdentifierCodeSequenceTrial",vm:"1",version:"DICOM/retired"},"(0040,A380)":{tag:"(0040,A380)",vr:"SQ",name:"RETIRED_ReportDetailSequenceTrial",vm:"1",version:"DICOM/retired"},"(0040,A402)":{tag:"(0040,A402)",vr:"UI",name:"RETIRED_ObservationSubjectUIDTrial",vm:"1",version:"DICOM/retired"},"(0040,A403)":{tag:"(0040,A403)",vr:"CS",name:"RETIRED_ObservationSubjectClassTrial",vm:"1",version:"DICOM/retired"},"(0040,A404)":{tag:"(0040,A404)",vr:"SQ",name:"RETIRED_ObservationSubjectTypeCodeSequenceTrial",vm:"1",version:"DICOM/retired"},"(0040,A600)":{tag:"(0040,A600)",vr:"CS",name:"RETIRED_ObservationSubjectContextFlagTrial",vm:"1",version:"DICOM/retired"},"(0040,A601)":{tag:"(0040,A601)",vr:"CS",name:"RETIRED_ObserverContextFlagTrial",vm:"1",version:"DICOM/retired"},"(0040,A603)":{tag:"(0040,A603)",vr:"CS",name:"RETIRED_ProcedureContextFlagTrial",vm:"1",version:"DICOM/retired"},"(0040,A731)":{tag:"(0040,A731)",vr:"SQ",name:"RETIRED_RelationshipSequenceTrial",vm:"1",version:"DICOM/retired"},"(0040,A732)":{tag:"(0040,A732)",vr:"SQ",name:"RETIRED_RelationshipTypeCodeSequenceTrial",vm:"1",version:"DICOM/retired"},"(0040,A744)":{tag:"(0040,A744)",vr:"SQ",name:"RETIRED_LanguageCodeSequenceTrial",vm:"1",version:"DICOM/retired"},"(0040,A992)":{tag:"(0040,A992)",vr:"ST",name:"RETIRED_UniformResourceLocatorTrial",vm:"1",version:"DICOM/retired"},"(0040,DB06)":{tag:"(0040,DB06)",vr:"DT",name:"RETIRED_TemplateVersion",vm:"1",version:"DICOM/retired"},"(0040,DB07)":{tag:"(0040,DB07)",vr:"DT",name:"RETIRED_TemplateLocalVersion",vm:"1",version:"DICOM/retired"},"(0040,DB0B)":{tag:"(0040,DB0B)",vr:"CS",name:"RETIRED_TemplateExtensionFlag",vm:"1",version:"DICOM/retired"},"(0040,DB0C)":{tag:"(0040,DB0C)",vr:"UI",name:"RETIRED_TemplateExtensionOrganizationUID",vm:"1",version:"DICOM/retired"},"(0040,DB0D)":{tag:"(0040,DB0D)",vr:"UI",name:"RETIRED_TemplateExtensionCreatorUID",vm:"1",version:"DICOM/retired"},"(0054,1400)":{tag:"(0054,1400)",vr:"CS",name:"RETIRED_CountsIncluded",vm:"1-n",version:"DICOM/retired"},"(0054,1401)":{tag:"(0054,1401)",vr:"CS",name:"RETIRED_DeadTimeCorrectionFlag",vm:"1",version:"DICOM/retired"},"(0070,0040)":{tag:"(0070,0040)",vr:"IS",name:"RETIRED_ImageRotationRetired",vm:"1",version:"DICOM/retired"},"(0070,0050)":{tag:"(0070,0050)",vr:"US",name:"RETIRED_DisplayedAreaTopLeftHandCornerTrial",vm:"2",version:"DICOM/retired"},"(0070,0051)":{tag:"(0070,0051)",vr:"US",name:"RETIRED_DisplayedAreaBottomRightHandCornerTrial",vm:"2",version:"DICOM/retired"},"(0070,0067)":{tag:"(0070,0067)",vr:"US",name:"RETIRED_GraphicLayerRecommendedDisplayRGBValue",vm:"3",version:"DICOM/retired"},"(0074,1024)":{tag:"(0074,1024)",vr:"IS",name:"RETIRED_BeamOrderIndexTrial",vm:"1",version:"DICOM/retired"},"(0074,1038)":{tag:"(0074,1038)",vr:"DS",name:"RETIRED_DoubleExposureMetersetTrial",vm:"1",version:"DICOM/retired"},"(0074,103A)":{tag:"(0074,103A)",vr:"DS",name:"RETIRED_DoubleExposureFieldDeltaTrial",vm:"4",version:"DICOM/retired"},"(0074,1220)":{tag:"(0074,1220)",vr:"SQ",name:"RETIRED_RelatedProcedureStepSequence",vm:"1",version:"DICOM/retired"},"(0074,1222)":{tag:"(0074,1222)",vr:"LO",name:"RETIRED_ProcedureStepRelationshipType",vm:"1",version:"DICOM/retired"},"(0088,0904)":{tag:"(0088,0904)",vr:"LO",name:"RETIRED_TopicTitle",vm:"1",version:"DICOM/retired"},"(0088,0906)":{tag:"(0088,0906)",vr:"ST",name:"RETIRED_TopicSubject",vm:"1",version:"DICOM/retired"},"(0088,0910)":{tag:"(0088,0910)",vr:"LO",name:"RETIRED_TopicAuthor",vm:"1",version:"DICOM/retired"},"(0088,0912)":{tag:"(0088,0912)",vr:"LO",name:"RETIRED_TopicKeywords",vm:"1-32",version:"DICOM/retired"},"(0400,0315)":{tag:"(0400,0315)",vr:"FL",name:"RETIRED_undefined",vm:"1",version:"DICOM/retired"},"(1000,0010)":{tag:"(1000,0010)",vr:"US",name:"RETIRED_EscapeTriplet",vm:"3",version:"DICOM/retired"},"(1000,0011)":{tag:"(1000,0011)",vr:"US",name:"RETIRED_RunLengthTriplet",vm:"3",version:"DICOM/retired"},"(1000,0012)":{tag:"(1000,0012)",vr:"US",name:"RETIRED_HuffmanTableSize",vm:"1",version:"DICOM/retired"},"(1000,0013)":{tag:"(1000,0013)",vr:"US",name:"RETIRED_HuffmanTableTriplet",vm:"3",version:"DICOM/retired"},"(1000,0014)":{tag:"(1000,0014)",vr:"US",name:"RETIRED_ShiftTableSize",vm:"1",version:"DICOM/retired"},"(1000,0015)":{tag:"(1000,0015)",vr:"US",name:"RETIRED_ShiftTableTriplet",vm:"3",version:"DICOM/retired"},"(1010,0004)":{tag:"(1010,0004)",vr:"US",name:"RETIRED_ZonalMap",vm:"1-n",version:"DICOM/retired"},"(2000,0062)":{tag:"(2000,0062)",vr:"CS",name:"RETIRED_ColorImagePrintingFlag",vm:"1",version:"DICOM/retired"},"(2000,0063)":{tag:"(2000,0063)",vr:"CS",name:"RETIRED_CollationFlag",vm:"1",version:"DICOM/retired"},"(2000,0065)":{tag:"(2000,0065)",vr:"CS",name:"RETIRED_AnnotationFlag",vm:"1",version:"DICOM/retired"},"(2000,0067)":{tag:"(2000,0067)",vr:"CS",name:"RETIRED_ImageOverlayFlag",vm:"1",version:"DICOM/retired"},"(2000,0069)":{tag:"(2000,0069)",vr:"CS",name:"RETIRED_PresentationLUTFlag",vm:"1",version:"DICOM/retired"},"(2000,006A)":{tag:"(2000,006A)",vr:"CS",name:"RETIRED_ImageBoxPresentationLUTFlag",vm:"1",version:"DICOM/retired"},"(2000,0510)":{tag:"(2000,0510)",vr:"SQ",name:"RETIRED_ReferencedStoredPrintSequence",vm:"1",version:"DICOM/retired"},"(2020,0130)":{tag:"(2020,0130)",vr:"SQ",name:"RETIRED_ReferencedImageOverlayBoxSequence",vm:"1",version:"DICOM/retired"},"(2020,0140)":{tag:"(2020,0140)",vr:"SQ",name:"RETIRED_ReferencedVOILUTBoxSequence",vm:"1",version:"DICOM/retired"},"(2040,0010)":{tag:"(2040,0010)",vr:"SQ",name:"RETIRED_ReferencedOverlayPlaneSequence",vm:"1",version:"DICOM/retired"},"(2040,0011)":{tag:"(2040,0011)",vr:"US",name:"RETIRED_ReferencedOverlayPlaneGroups",vm:"1-99",version:"DICOM/retired"},"(2040,0020)":{tag:"(2040,0020)",vr:"SQ",name:"RETIRED_OverlayPixelDataSequence",vm:"1",version:"DICOM/retired"},"(2040,0060)":{tag:"(2040,0060)",vr:"CS",name:"RETIRED_OverlayMagnificationType",vm:"1",version:"DICOM/retired"},"(2040,0070)":{tag:"(2040,0070)",vr:"CS",name:"RETIRED_OverlaySmoothingType",vm:"1",version:"DICOM/retired"},"(2040,0072)":{tag:"(2040,0072)",vr:"CS",name:"RETIRED_OverlayOrImageMagnification",vm:"1",version:"DICOM/retired"},"(2040,0074)":{tag:"(2040,0074)",vr:"US",name:"RETIRED_MagnifyToNumberOfColumns",vm:"1",version:"DICOM/retired"},"(2040,0080)":{tag:"(2040,0080)",vr:"CS",name:"RETIRED_OverlayForegroundDensity",vm:"1",version:"DICOM/retired"},"(2040,0082)":{tag:"(2040,0082)",vr:"CS",name:"RETIRED_OverlayBackgroundDensity",vm:"1",version:"DICOM/retired"},"(2040,0090)":{tag:"(2040,0090)",vr:"CS",name:"RETIRED_OverlayMode",vm:"1",version:"DICOM/retired"},"(2040,0100)":{tag:"(2040,0100)",vr:"CS",name:"RETIRED_ThresholdDensity",vm:"1",version:"DICOM/retired"},"(2040,0500)":{tag:"(2040,0500)",vr:"SQ",name:"RETIRED_ReferencedImageBoxSequenceRetired",vm:"1",version:"DICOM/retired"},"(2100,0010)":{tag:"(2100,0010)",vr:"SH",name:"RETIRED_PrintJobID",vm:"1",version:"DICOM/retired"},"(2100,0140)":{tag:"(2100,0140)",vr:"AE",name:"RETIRED_DestinationAE",vm:"1",version:"DICOM/retired"},"(2100,0500)":{tag:"(2100,0500)",vr:"SQ",name:"RETIRED_ReferencedPrintJobSequencePullStoredPrint",vm:"1",version:"DICOM/retired"},"(2110,0099)":{tag:"(2110,0099)",vr:"SH",name:"RETIRED_PrintQueueID",vm:"1",version:"DICOM/retired"},"(2120,0010)":{tag:"(2120,0010)",vr:"CS",name:"RETIRED_QueueStatus",vm:"1",version:"DICOM/retired"},"(2120,0050)":{tag:"(2120,0050)",vr:"SQ",name:"RETIRED_PrintJobDescriptionSequence",vm:"1",version:"DICOM/retired"},"(2120,0070)":{tag:"(2120,0070)",vr:"SQ",name:"RETIRED_ReferencedPrintJobSequence",vm:"1",version:"DICOM/retired"},"(2130,0010)":{tag:"(2130,0010)",vr:"SQ",name:"RETIRED_PrintManagementCapabilitiesSequence",vm:"1",version:"DICOM/retired"},"(2130,0015)":{tag:"(2130,0015)",vr:"SQ",name:"RETIRED_PrinterCharacteristicsSequence",vm:"1",version:"DICOM/retired"},"(2130,0030)":{tag:"(2130,0030)",vr:"SQ",name:"RETIRED_FilmBoxContentSequence",vm:"1",version:"DICOM/retired"},"(2130,0040)":{tag:"(2130,0040)",vr:"SQ",name:"RETIRED_ImageBoxContentSequence",vm:"1",version:"DICOM/retired"},"(2130,0050)":{tag:"(2130,0050)",vr:"SQ",name:"RETIRED_AnnotationContentSequence",vm:"1",version:"DICOM/retired"},"(2130,0060)":{tag:"(2130,0060)",vr:"SQ",name:"RETIRED_ImageOverlayBoxContentSequence",vm:"1",version:"DICOM/retired"},"(2130,0080)":{tag:"(2130,0080)",vr:"SQ",name:"RETIRED_PresentationLUTContentSequence",vm:"1",version:"DICOM/retired"},"(2130,00A0)":{tag:"(2130,00A0)",vr:"SQ",name:"RETIRED_ProposedStudySequence",vm:"1",version:"DICOM/retired"},"(2130,00C0)":{tag:"(2130,00C0)",vr:"SQ",name:"RETIRED_OriginalImageSequence",vm:"1",version:"DICOM/retired"},"(3006,00C0)":{tag:"(3006,00C0)",vr:"SQ",name:"RETIRED_FrameOfReferenceRelationshipSequence",vm:"1",version:"DICOM/retired"},"(3006,00C2)":{tag:"(3006,00C2)",vr:"UI",name:"RETIRED_RelatedFrameOfReferenceUID",vm:"1",version:"DICOM/retired"},"(3006,00C4)":{tag:"(3006,00C4)",vr:"CS",name:"RETIRED_FrameOfReferenceTransformationType",vm:"1",version:"DICOM/retired"},"(300A,0088)":{tag:"(300A,0088)",vr:"FL",name:"RETIRED_BeamDosePointDepth",vm:"1",version:"DICOM/retired"},"(300A,0089)":{tag:"(300A,0089)",vr:"FL",name:"RETIRED_BeamDosePointEquivalentDepth",vm:"1",version:"DICOM/retired"},"(300A,008A)":{tag:"(300A,008A)",vr:"FL",name:"RETIRED_BeamDosePointSSD",vm:"1",version:"DICOM/retired"},"(300A,0782)":{tag:"(300A,0782)",vr:"US",name:"RETIRED_undefined",vm:"1",version:"DICOM/retired"},"(4000,0010)":{tag:"(4000,0010)",vr:"LT",name:"RETIRED_Arbitrary",vm:"1",version:"DICOM/retired"},"(4000,4000)":{tag:"(4000,4000)",vr:"LT",name:"RETIRED_TextComments",vm:"1",version:"DICOM/retired"},"(4008,0040)":{tag:"(4008,0040)",vr:"SH",name:"RETIRED_ResultsID",vm:"1",version:"DICOM/retired"},"(4008,0042)":{tag:"(4008,0042)",vr:"LO",name:"RETIRED_ResultsIDIssuer",vm:"1",version:"DICOM/retired"},"(4008,0050)":{tag:"(4008,0050)",vr:"SQ",name:"RETIRED_ReferencedInterpretationSequence",vm:"1",version:"DICOM/retired"},"(4008,00FF)":{tag:"(4008,00FF)",vr:"CS",name:"RETIRED_ReportProductionStatusTrial",vm:"1",version:"DICOM/retired"},"(4008,0100)":{tag:"(4008,0100)",vr:"DA",name:"RETIRED_InterpretationRecordedDate",vm:"1",version:"DICOM/retired"},"(4008,0101)":{tag:"(4008,0101)",vr:"TM",name:"RETIRED_InterpretationRecordedTime",vm:"1",version:"DICOM/retired"},"(4008,0102)":{tag:"(4008,0102)",vr:"PN",name:"RETIRED_InterpretationRecorder",vm:"1",version:"DICOM/retired"},"(4008,0103)":{tag:"(4008,0103)",vr:"LO",name:"RETIRED_ReferenceToRecordedSound",vm:"1",version:"DICOM/retired"},"(4008,0108)":{tag:"(4008,0108)",vr:"DA",name:"RETIRED_InterpretationTranscriptionDate",vm:"1",version:"DICOM/retired"},"(4008,0109)":{tag:"(4008,0109)",vr:"TM",name:"RETIRED_InterpretationTranscriptionTime",vm:"1",version:"DICOM/retired"},"(4008,010A)":{tag:"(4008,010A)",vr:"PN",name:"RETIRED_InterpretationTranscriber",vm:"1",version:"DICOM/retired"},"(4008,010B)":{tag:"(4008,010B)",vr:"ST",name:"RETIRED_InterpretationText",vm:"1",version:"DICOM/retired"},"(4008,010C)":{tag:"(4008,010C)",vr:"PN",name:"RETIRED_InterpretationAuthor",vm:"1",version:"DICOM/retired"},"(4008,0111)":{tag:"(4008,0111)",vr:"SQ",name:"RETIRED_InterpretationApproverSequence",vm:"1",version:"DICOM/retired"},"(4008,0112)":{tag:"(4008,0112)",vr:"DA",name:"RETIRED_InterpretationApprovalDate",vm:"1",version:"DICOM/retired"},"(4008,0113)":{tag:"(4008,0113)",vr:"TM",name:"RETIRED_InterpretationApprovalTime",vm:"1",version:"DICOM/retired"},"(4008,0114)":{tag:"(4008,0114)",vr:"PN",name:"RETIRED_PhysicianApprovingInterpretation",vm:"1",version:"DICOM/retired"},"(4008,0115)":{tag:"(4008,0115)",vr:"LT",name:"RETIRED_InterpretationDiagnosisDescription",vm:"1",version:"DICOM/retired"},"(4008,0117)":{tag:"(4008,0117)",vr:"SQ",name:"RETIRED_InterpretationDiagnosisCodeSequence",vm:"1",version:"DICOM/retired"},"(4008,0118)":{tag:"(4008,0118)",vr:"SQ",name:"RETIRED_ResultsDistributionListSequence",vm:"1",version:"DICOM/retired"},"(4008,0119)":{tag:"(4008,0119)",vr:"PN",name:"RETIRED_DistributionName",vm:"1",version:"DICOM/retired"},"(4008,011A)":{tag:"(4008,011A)",vr:"LO",name:"RETIRED_DistributionAddress",vm:"1",version:"DICOM/retired"},"(4008,0200)":{tag:"(4008,0200)",vr:"SH",name:"RETIRED_InterpretationID",vm:"1",version:"DICOM/retired"},"(4008,0202)":{tag:"(4008,0202)",vr:"LO",name:"RETIRED_InterpretationIDIssuer",vm:"1",version:"DICOM/retired"},"(4008,0210)":{tag:"(4008,0210)",vr:"CS",name:"RETIRED_InterpretationTypeID",vm:"1",version:"DICOM/retired"},"(4008,0212)":{tag:"(4008,0212)",vr:"CS",name:"RETIRED_InterpretationStatusID",vm:"1",version:"DICOM/retired"},"(4008,0300)":{tag:"(4008,0300)",vr:"ST",name:"RETIRED_Impressions",vm:"1",version:"DICOM/retired"},"(4008,4000)":{tag:"(4008,4000)",vr:"ST",name:"RETIRED_ResultsComments",vm:"1",version:"DICOM/retired"},"(5000-50FF,0005)":{tag:"(5000-50FF,0005)",vr:"US",name:"RETIRED_CurveDimensions",vm:"1",version:"DICOM/retired"},"(5000-50FF,0010)":{tag:"(5000-50FF,0010)",vr:"US",name:"RETIRED_NumberOfPoints",vm:"1",version:"DICOM/retired"},"(5000-50FF,0020)":{tag:"(5000-50FF,0020)",vr:"CS",name:"RETIRED_TypeOfData",vm:"1",version:"DICOM/retired"},"(5000-50FF,0022)":{tag:"(5000-50FF,0022)",vr:"LO",name:"RETIRED_CurveDescription",vm:"1",version:"DICOM/retired"},"(5000-50FF,0030)":{tag:"(5000-50FF,0030)",vr:"SH",name:"RETIRED_AxisUnits",vm:"1-n",version:"DICOM/retired"},"(5000-50FF,0040)":{tag:"(5000-50FF,0040)",vr:"SH",name:"RETIRED_AxisLabels",vm:"1-n",version:"DICOM/retired"},"(5000-50FF,0103)":{tag:"(5000-50FF,0103)",vr:"US",name:"RETIRED_DataValueRepresentation",vm:"1",version:"DICOM/retired"},"(5000-50FF,0104)":{tag:"(5000-50FF,0104)",vr:"US",name:"RETIRED_MinimumCoordinateValue",vm:"1-n",version:"DICOM/retired"},"(5000-50FF,0105)":{tag:"(5000-50FF,0105)",vr:"US",name:"RETIRED_MaximumCoordinateValue",vm:"1-n",version:"DICOM/retired"},"(5000-50FF,0106)":{tag:"(5000-50FF,0106)",vr:"SH",name:"RETIRED_CurveRange",vm:"1-n",version:"DICOM/retired"},"(5000-50FF,0110)":{tag:"(5000-50FF,0110)",vr:"US",name:"RETIRED_CurveDataDescriptor",vm:"1-n",version:"DICOM/retired"},"(5000-50FF,0112)":{tag:"(5000-50FF,0112)",vr:"US",name:"RETIRED_CoordinateStartValue",vm:"1-n",version:"DICOM/retired"},"(5000-50FF,0114)":{tag:"(5000-50FF,0114)",vr:"US",name:"RETIRED_CoordinateStepValue",vm:"1-n",version:"DICOM/retired"},"(5000-50FF,1001)":{tag:"(5000-50FF,1001)",vr:"CS",name:"RETIRED_CurveActivationLayer",vm:"1",version:"DICOM/retired"},"(5000-50FF,2000)":{tag:"(5000-50FF,2000)",vr:"US",name:"RETIRED_AudioType",vm:"1",version:"DICOM/retired"},"(5000-50FF,2002)":{tag:"(5000-50FF,2002)",vr:"US",name:"RETIRED_AudioSampleFormat",vm:"1",version:"DICOM/retired"},"(5000-50FF,2004)":{tag:"(5000-50FF,2004)",vr:"US",name:"RETIRED_NumberOfChannels",vm:"1",version:"DICOM/retired"},"(5000-50FF,2006)":{tag:"(5000-50FF,2006)",vr:"UL",name:"RETIRED_NumberOfSamples",vm:"1",version:"DICOM/retired"},"(5000-50FF,2008)":{tag:"(5000-50FF,2008)",vr:"UL",name:"RETIRED_SampleRate",vm:"1",version:"DICOM/retired"},"(5000-50FF,200A)":{tag:"(5000-50FF,200A)",vr:"UL",name:"RETIRED_TotalTime",vm:"1",version:"DICOM/retired"},"(5000-50FF,200C)":{tag:"(5000-50FF,200C)",vr:"ox",name:"RETIRED_AudioSampleData",vm:"1",version:"DICOM/retired"},"(5000-50FF,200E)":{tag:"(5000-50FF,200E)",vr:"LT",name:"RETIRED_AudioComments",vm:"1",version:"DICOM/retired"},"(5000-50FF,2500)":{tag:"(5000-50FF,2500)",vr:"LO",name:"RETIRED_CurveLabel",vm:"1",version:"DICOM/retired"},"(5000-50FF,2600)":{tag:"(5000-50FF,2600)",vr:"SQ",name:"RETIRED_CurveReferencedOverlaySequence",vm:"1",version:"DICOM/retired"},"(5000-50FF,2610)":{tag:"(5000-50FF,2610)",vr:"US",name:"RETIRED_CurveReferencedOverlayGroup",vm:"1",version:"DICOM/retired"},"(5000-50FF,3000)":{tag:"(5000-50FF,3000)",vr:"ox",name:"RETIRED_CurveData",vm:"1",version:"DICOM/retired"},"(6000-60FF,0012)":{tag:"(6000-60FF,0012)",vr:"US",name:"RETIRED_OverlayPlanes",vm:"1",version:"DICOM/retired"},"(6000-60FF,0052)":{tag:"(6000-60FF,0052)",vr:"US",name:"RETIRED_OverlayPlaneOrigin",vm:"1",version:"DICOM/retired"},"(6000-60FF,0060)":{tag:"(6000-60FF,0060)",vr:"CS",name:"RETIRED_OverlayCompressionCode",vm:"1",version:"DICOM/retired"},"(6000-60FF,0061)":{tag:"(6000-60FF,0061)",vr:"SH",name:"RETIRED_OverlayCompressionOriginator",vm:"1",version:"DICOM/retired"},"(6000-60FF,0062)":{tag:"(6000-60FF,0062)",vr:"SH",name:"RETIRED_OverlayCompressionLabel",vm:"1",version:"DICOM/retired"},"(6000-60FF,0063)":{tag:"(6000-60FF,0063)",vr:"CS",name:"RETIRED_OverlayCompressionDescription",vm:"1",version:"DICOM/retired"},"(6000-60FF,0066)":{tag:"(6000-60FF,0066)",vr:"AT",name:"RETIRED_OverlayCompressionStepPointers",vm:"1-n",version:"DICOM/retired"},"(6000-60FF,0068)":{tag:"(6000-60FF,0068)",vr:"US",name:"RETIRED_OverlayRepeatInterval",vm:"1",version:"DICOM/retired"},"(6000-60FF,0069)":{tag:"(6000-60FF,0069)",vr:"US",name:"RETIRED_OverlayBitsGrouped",vm:"1",version:"DICOM/retired"},"(6000-60FF,0110)":{tag:"(6000-60FF,0110)",vr:"CS",name:"RETIRED_OverlayFormat",vm:"1",version:"DICOM/retired"},"(6000-60FF,0200)":{tag:"(6000-60FF,0200)",vr:"US",name:"RETIRED_OverlayLocation",vm:"1",version:"DICOM/retired"},"(6000-60FF,0800)":{tag:"(6000-60FF,0800)",vr:"CS",name:"RETIRED_OverlayCodeLabel",vm:"1-n",version:"DICOM/retired"},"(6000-60FF,0802)":{tag:"(6000-60FF,0802)",vr:"US",name:"RETIRED_OverlayNumberOfTables",vm:"1",version:"DICOM/retired"},"(6000-60FF,0803)":{tag:"(6000-60FF,0803)",vr:"AT",name:"RETIRED_OverlayCodeTableLocation",vm:"1-n",version:"DICOM/retired"},"(6000-60FF,0804)":{tag:"(6000-60FF,0804)",vr:"US",name:"RETIRED_OverlayBitsForCodeWord",vm:"1",version:"DICOM/retired"},"(6000-60FF,1100)":{tag:"(6000-60FF,1100)",vr:"US",name:"RETIRED_OverlayDescriptorGray",vm:"1",version:"DICOM/retired"},"(6000-60FF,1101)":{tag:"(6000-60FF,1101)",vr:"US",name:"RETIRED_OverlayDescriptorRed",vm:"1",version:"DICOM/retired"},"(6000-60FF,1102)":{tag:"(6000-60FF,1102)",vr:"US",name:"RETIRED_OverlayDescriptorGreen",vm:"1",version:"DICOM/retired"},"(6000-60FF,1103)":{tag:"(6000-60FF,1103)",vr:"US",name:"RETIRED_OverlayDescriptorBlue",vm:"1",version:"DICOM/retired"},"(6000-60FF,1200)":{tag:"(6000-60FF,1200)",vr:"US",name:"RETIRED_OverlaysGray",vm:"1-n",version:"DICOM/retired"},"(6000-60FF,1201)":{tag:"(6000-60FF,1201)",vr:"US",name:"RETIRED_OverlaysRed",vm:"1-n",version:"DICOM/retired"},"(6000-60FF,1202)":{tag:"(6000-60FF,1202)",vr:"US",name:"RETIRED_OverlaysGreen",vm:"1-n",version:"DICOM/retired"},"(6000-60FF,1203)":{tag:"(6000-60FF,1203)",vr:"US",name:"RETIRED_OverlaysBlue",vm:"1-n",version:"DICOM/retired"},"(6000-60FF,4000)":{tag:"(6000-60FF,4000)",vr:"LT",name:"RETIRED_OverlayComments",vm:"1",version:"DICOM/retired"},"(7FE0,0020)":{tag:"(7FE0,0020)",vr:"OW",name:"RETIRED_CoefficientsSDVN",vm:"1",version:"DICOM/retired"},"(7FE0,0030)":{tag:"(7FE0,0030)",vr:"OW",name:"RETIRED_CoefficientsSDHN",vm:"1",version:"DICOM/retired"},"(7FE0,0040)":{tag:"(7FE0,0040)",vr:"OW",name:"RETIRED_CoefficientsSDDN",vm:"1",version:"DICOM/retired"},"(7F00-7FFF,0010)":{tag:"(7F00-7FFF,0010)",vr:"ox",name:"RETIRED_VariablePixelData",vm:"1",version:"DICOM/retired"},"(7F00-7FFF,0011)":{tag:"(7F00-7FFF,0011)",vr:"US",name:"RETIRED_VariableNextDataGroup",vm:"1",version:"DICOM/retired"},"(7F00-7FFF,0020)":{tag:"(7F00-7FFF,0020)",vr:"OW",name:"RETIRED_VariableCoefficientsSDVN",vm:"1",version:"DICOM/retired"},"(7F00-7FFF,0030)":{tag:"(7F00-7FFF,0030)",vr:"OW",name:"RETIRED_VariableCoefficientsSDHN",vm:"1",version:"DICOM/retired"},"(7F00-7FFF,0040)":{tag:"(7F00-7FFF,0040)",vr:"OW",name:"RETIRED_VariableCoefficientsSDDN",vm:"1",version:"DICOM/retired"},"":{tag:""},'(0019,"1.2.840.113681",10)':{tag:'(0019,"1.2.840.113681",10)',vr:"ST",name:"CRImageParamsCommon",vm:"1",version:"PrivateTag"},'(0019,"1.2.840.113681",11)':{tag:'(0019,"1.2.840.113681",11)',vr:"ST",name:"CRImageIPParamsSingle",vm:"1",version:"PrivateTag"},'(0019,"1.2.840.113681",12)':{tag:'(0019,"1.2.840.113681",12)',vr:"ST",name:"CRImageIPParamsLeft",vm:"1",version:"PrivateTag"},'(0019,"1.2.840.113681",13)':{tag:'(0019,"1.2.840.113681",13)',vr:"ST",name:"CRImageIPParamsRight",vm:"1",version:"PrivateTag"},'(0087,"1.2.840.113708.794.1.1.2.0",10)':{tag:'(0087,"1.2.840.113708.794.1.1.2.0",10)',vr:"CS",name:"MediaType",vm:"1",version:"PrivateTag"},'(0087,"1.2.840.113708.794.1.1.2.0",20)':{tag:'(0087,"1.2.840.113708.794.1.1.2.0",20)',vr:"CS",name:"MediaLocation",vm:"1",version:"PrivateTag"},'(0087,"1.2.840.113708.794.1.1.2.0",50)':{tag:'(0087,"1.2.840.113708.794.1.1.2.0",50)',vr:"IS",name:"EstimatedRetrieveTime",vm:"1",version:"PrivateTag"},'(0009,"ACUSON",00)':{tag:'(0009,"ACUSON",00)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"ACUSON",01)':{tag:'(0009,"ACUSON",01)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"ACUSON",02)':{tag:'(0009,"ACUSON",02)',vr:"UN",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"ACUSON",03)':{tag:'(0009,"ACUSON",03)',vr:"UN",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"ACUSON",04)':{tag:'(0009,"ACUSON",04)',vr:"UN",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"ACUSON",05)':{tag:'(0009,"ACUSON",05)',vr:"UN",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"ACUSON",06)':{tag:'(0009,"ACUSON",06)',vr:"UN",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"ACUSON",07)':{tag:'(0009,"ACUSON",07)',vr:"UN",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"ACUSON",08)':{tag:'(0009,"ACUSON",08)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"ACUSON",09)':{tag:'(0009,"ACUSON",09)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"ACUSON",0a)':{tag:'(0009,"ACUSON",0a)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"ACUSON",0b)':{tag:'(0009,"ACUSON",0b)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"ACUSON",0c)':{tag:'(0009,"ACUSON",0c)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"ACUSON",0d)':{tag:'(0009,"ACUSON",0d)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"ACUSON",0e)':{tag:'(0009,"ACUSON",0e)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"ACUSON",0f)':{tag:'(0009,"ACUSON",0f)',vr:"UN",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"ACUSON",10)':{tag:'(0009,"ACUSON",10)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"ACUSON",11)':{tag:'(0009,"ACUSON",11)',vr:"UN",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"ACUSON",12)':{tag:'(0009,"ACUSON",12)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"ACUSON",13)':{tag:'(0009,"ACUSON",13)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"ACUSON",14)':{tag:'(0009,"ACUSON",14)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"ACUSON",15)':{tag:'(0009,"ACUSON",15)',vr:"UN",name:"Unknown",vm:"1",version:"PrivateTag"},'(0003,"AEGIS_DICOM_2.00",00)':{tag:'(0003,"AEGIS_DICOM_2.00",00)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0005,"AEGIS_DICOM_2.00",00)':{tag:'(0005,"AEGIS_DICOM_2.00",00)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0009,"AEGIS_DICOM_2.00",00)':{tag:'(0009,"AEGIS_DICOM_2.00",00)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"AEGIS_DICOM_2.00",00)':{tag:'(0019,"AEGIS_DICOM_2.00",00)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0029,"AEGIS_DICOM_2.00",00)':{tag:'(0029,"AEGIS_DICOM_2.00",00)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(1369,"AEGIS_DICOM_2.00",00)':{tag:'(1369,"AEGIS_DICOM_2.00",00)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0009,"AGFA",10)':{tag:'(0009,"AGFA",10)',vr:"LO",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"AGFA",11)':{tag:'(0009,"AGFA",11)',vr:"LO",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"AGFA",13)':{tag:'(0009,"AGFA",13)',vr:"LO",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"AGFA",14)':{tag:'(0009,"AGFA",14)',vr:"LO",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"AGFA",15)':{tag:'(0009,"AGFA",15)',vr:"LO",name:"Unknown",vm:"1",version:"PrivateTag"},'(0031,"AGFA PACS Archive Mirroring 1.0",00)':{tag:'(0031,"AGFA PACS Archive Mirroring 1.0",00)',vr:"CS",name:"StudyStatus",vm:"1",version:"PrivateTag"},'(0031,"AGFA PACS Archive Mirroring 1.0",01)':{tag:'(0031,"AGFA PACS Archive Mirroring 1.0",01)',vr:"UL",name:"DateTimeVerified",vm:"1",version:"PrivateTag"},'(0029,"CAMTRONICS IP",10)':{tag:'(0029,"CAMTRONICS IP",10)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"CAMTRONICS IP",20)':{tag:'(0029,"CAMTRONICS IP",20)',vr:"UN",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"CAMTRONICS IP",30)':{tag:'(0029,"CAMTRONICS IP",30)',vr:"UN",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"CAMTRONICS IP",40)':{tag:'(0029,"CAMTRONICS IP",40)',vr:"UN",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"CAMTRONICS",10)':{tag:'(0029,"CAMTRONICS",10)',vr:"LT",name:"Commentline",vm:"1",version:"PrivateTag"},'(0029,"CAMTRONICS",20)':{tag:'(0029,"CAMTRONICS",20)',vr:"DS",name:"EdgeEnhancementCoefficient",vm:"1",version:"PrivateTag"},'(0029,"CAMTRONICS",50)':{tag:'(0029,"CAMTRONICS",50)',vr:"LT",name:"SceneText",vm:"1",version:"PrivateTag"},'(0029,"CAMTRONICS",60)':{tag:'(0029,"CAMTRONICS",60)',vr:"LT",name:"ImageText",vm:"1",version:"PrivateTag"},'(0029,"CAMTRONICS",70)':{tag:'(0029,"CAMTRONICS",70)',vr:"IS",name:"PixelShiftHorizontal",vm:"1",version:"PrivateTag"},'(0029,"CAMTRONICS",80)':{tag:'(0029,"CAMTRONICS",80)',vr:"IS",name:"PixelShiftVertical",vm:"1",version:"PrivateTag"},'(0029,"CAMTRONICS",90)':{tag:'(0029,"CAMTRONICS",90)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"CARDIO-D.R. 1.0",00)':{tag:'(0009,"CARDIO-D.R. 1.0",00)',vr:"UL",name:"FileLocation",vm:"1",version:"PrivateTag"},'(0009,"CARDIO-D.R. 1.0",01)':{tag:'(0009,"CARDIO-D.R. 1.0",01)',vr:"UL",name:"FileSize",vm:"1",version:"PrivateTag"},'(0009,"CARDIO-D.R. 1.0",40)':{tag:'(0009,"CARDIO-D.R. 1.0",40)',vr:"SQ",name:"AlternateImageSequence",vm:"1",version:"PrivateTag"},'(0019,"CARDIO-D.R. 1.0",00)':{tag:'(0019,"CARDIO-D.R. 1.0",00)',vr:"CS",name:"ImageBlankingShape",vm:"1",version:"PrivateTag"},'(0019,"CARDIO-D.R. 1.0",02)':{tag:'(0019,"CARDIO-D.R. 1.0",02)',vr:"IS",name:"ImageBlankingLeftVerticalEdge",vm:"1",version:"PrivateTag"},'(0019,"CARDIO-D.R. 1.0",04)':{tag:'(0019,"CARDIO-D.R. 1.0",04)',vr:"IS",name:"ImageBlankingRightVerticalEdge",vm:"1",version:"PrivateTag"},'(0019,"CARDIO-D.R. 1.0",06)':{tag:'(0019,"CARDIO-D.R. 1.0",06)',vr:"IS",name:"ImageBlankingUpperHorizontalEdge",vm:"1",version:"PrivateTag"},'(0019,"CARDIO-D.R. 1.0",08)':{tag:'(0019,"CARDIO-D.R. 1.0",08)',vr:"IS",name:"ImageBlankingLowerHorizontalEdge",vm:"1",version:"PrivateTag"},'(0019,"CARDIO-D.R. 1.0",10)':{tag:'(0019,"CARDIO-D.R. 1.0",10)',vr:"IS",name:"CenterOfCircularImageBlanking",vm:"1",version:"PrivateTag"},'(0019,"CARDIO-D.R. 1.0",12)':{tag:'(0019,"CARDIO-D.R. 1.0",12)',vr:"IS",name:"RadiusOfCircularImageBlanking",vm:"1",version:"PrivateTag"},'(0019,"CARDIO-D.R. 1.0",30)':{tag:'(0019,"CARDIO-D.R. 1.0",30)',vr:"UL",name:"MaximumImageFrameSize",vm:"1",version:"PrivateTag"},'(0021,"CARDIO-D.R. 1.0",13)':{tag:'(0021,"CARDIO-D.R. 1.0",13)',vr:"IS",name:"ImageSequenceNumber",vm:"1",version:"PrivateTag"},'(0029,"CARDIO-D.R. 1.0",00)':{tag:'(0029,"CARDIO-D.R. 1.0",00)',vr:"SQ",name:"EdgeEnhancementSequence",vm:"1",version:"PrivateTag"},'(0029,"CARDIO-D.R. 1.0",01)':{tag:'(0029,"CARDIO-D.R. 1.0",01)',vr:"US",name:"ConvolutionKernelSize",vm:"2",version:"PrivateTag"},'(0029,"CARDIO-D.R. 1.0",02)':{tag:'(0029,"CARDIO-D.R. 1.0",02)',vr:"DS",name:"ConvolutionKernelCoefficients",vm:"1-n",version:"PrivateTag"},'(0029,"CARDIO-D.R. 1.0",03)':{tag:'(0029,"CARDIO-D.R. 1.0",03)',vr:"DS",name:"EdgeEnhancementGain",vm:"1",version:"PrivateTag"},'(0025,"CMR42 CIRCLECVI",1010)':{tag:'(0025,"CMR42 CIRCLECVI",1010)',vr:"LO",name:"WorkspaceID",vm:"1",version:"PrivateTag"},'(0025,"CMR42 CIRCLECVI",1020)':{tag:'(0025,"CMR42 CIRCLECVI",1020)',vr:"LO",name:"WorkspaceTimeString",vm:"1",version:"PrivateTag"},'(0025,"CMR42 CIRCLECVI",1030)':{tag:'(0025,"CMR42 CIRCLECVI",1030)',vr:"OB",name:"WorkspaceStream",vm:"1",version:"PrivateTag"},'(0009,"DCMTK_ANONYMIZER",00)':{tag:'(0009,"DCMTK_ANONYMIZER",00)',vr:"SQ",name:"AnonymizerUIDMap",vm:"1",version:"PrivateTag"},'(0009,"DCMTK_ANONYMIZER",10)':{tag:'(0009,"DCMTK_ANONYMIZER",10)',vr:"UI",name:"AnonymizerUIDKey",vm:"1",version:"PrivateTag"},'(0009,"DCMTK_ANONYMIZER",20)':{tag:'(0009,"DCMTK_ANONYMIZER",20)',vr:"UI",name:"AnonymizerUIDValue",vm:"1",version:"PrivateTag"},'(0009,"DCMTK_ANONYMIZER",30)':{tag:'(0009,"DCMTK_ANONYMIZER",30)',vr:"SQ",name:"AnonymizerPatientIDMap",vm:"1",version:"PrivateTag"},'(0009,"DCMTK_ANONYMIZER",40)':{tag:'(0009,"DCMTK_ANONYMIZER",40)',vr:"LO",name:"AnonymizerPatientIDKey",vm:"1",version:"PrivateTag"},'(0009,"DCMTK_ANONYMIZER",50)':{tag:'(0009,"DCMTK_ANONYMIZER",50)',vr:"LO",name:"AnonymizerPatientIDValue",vm:"1",version:"PrivateTag"},'(0019,"DIDI TO PCR 1.1",22)':{tag:'(0019,"DIDI TO PCR 1.1",22)',vr:"UN",name:"RouteAET",vm:"1",version:"PrivateTag"},'(0019,"DIDI TO PCR 1.1",23)':{tag:'(0019,"DIDI TO PCR 1.1",23)',vr:"DS",name:"PCRPrintScale",vm:"1",version:"PrivateTag"},'(0019,"DIDI TO PCR 1.1",24)':{tag:'(0019,"DIDI TO PCR 1.1",24)',vr:"UN",name:"PCRPrintJobEnd",vm:"1",version:"PrivateTag"},'(0019,"DIDI TO PCR 1.1",25)':{tag:'(0019,"DIDI TO PCR 1.1",25)',vr:"IS",name:"PCRNoFilmCopies",vm:"1",version:"PrivateTag"},'(0019,"DIDI TO PCR 1.1",26)':{tag:'(0019,"DIDI TO PCR 1.1",26)',vr:"IS",name:"PCRFilmLayoutPosition",vm:"1",version:"PrivateTag"},'(0019,"DIDI TO PCR 1.1",27)':{tag:'(0019,"DIDI TO PCR 1.1",27)',vr:"UN",name:"PCRPrintReportName",vm:"1",version:"PrivateTag"},'(0019,"DIDI TO PCR 1.1",70)':{tag:'(0019,"DIDI TO PCR 1.1",70)',vr:"UN",name:"RADProtocolPrinter",vm:"1",version:"PrivateTag"},'(0019,"DIDI TO PCR 1.1",71)':{tag:'(0019,"DIDI TO PCR 1.1",71)',vr:"UN",name:"RADProtocolMedium",vm:"1",version:"PrivateTag"},'(0019,"DIDI TO PCR 1.1",90)':{tag:'(0019,"DIDI TO PCR 1.1",90)',vr:"LO",name:"UnprocessedFlag",vm:"1",version:"PrivateTag"},'(0019,"DIDI TO PCR 1.1",91)':{tag:'(0019,"DIDI TO PCR 1.1",91)',vr:"UN",name:"KeyValues",vm:"1",version:"PrivateTag"},'(0019,"DIDI TO PCR 1.1",92)':{tag:'(0019,"DIDI TO PCR 1.1",92)',vr:"UN",name:"DestinationPostprocessingFunction",vm:"1",version:"PrivateTag"},'(0019,"DIDI TO PCR 1.1",A0)':{tag:'(0019,"DIDI TO PCR 1.1",A0)',vr:"UN",name:"Version",vm:"1",version:"PrivateTag"},'(0019,"DIDI TO PCR 1.1",A1)':{tag:'(0019,"DIDI TO PCR 1.1",A1)',vr:"UN",name:"RangingMode",vm:"1",version:"PrivateTag"},'(0019,"DIDI TO PCR 1.1",A2)':{tag:'(0019,"DIDI TO PCR 1.1",A2)',vr:"UN",name:"AbdomenBrightness",vm:"1",version:"PrivateTag"},'(0019,"DIDI TO PCR 1.1",A3)':{tag:'(0019,"DIDI TO PCR 1.1",A3)',vr:"UN",name:"FixedBrightness",vm:"1",version:"PrivateTag"},'(0019,"DIDI TO PCR 1.1",A4)':{tag:'(0019,"DIDI TO PCR 1.1",A4)',vr:"UN",name:"DetailContrast",vm:"1",version:"PrivateTag"},'(0019,"DIDI TO PCR 1.1",A5)':{tag:'(0019,"DIDI TO PCR 1.1",A5)',vr:"UN",name:"ContrastBalance",vm:"1",version:"PrivateTag"},'(0019,"DIDI TO PCR 1.1",A6)':{tag:'(0019,"DIDI TO PCR 1.1",A6)',vr:"UN",name:"StructureBoost",vm:"1",version:"PrivateTag"},'(0019,"DIDI TO PCR 1.1",A7)':{tag:'(0019,"DIDI TO PCR 1.1",A7)',vr:"UN",name:"StructurePreference",vm:"1",version:"PrivateTag"},'(0019,"DIDI TO PCR 1.1",A8)':{tag:'(0019,"DIDI TO PCR 1.1",A8)',vr:"UN",name:"NoiseRobustness",vm:"1",version:"PrivateTag"},'(0019,"DIDI TO PCR 1.1",A9)':{tag:'(0019,"DIDI TO PCR 1.1",A9)',vr:"UN",name:"NoiseDoseLimit",vm:"1",version:"PrivateTag"},'(0019,"DIDI TO PCR 1.1",AA)':{tag:'(0019,"DIDI TO PCR 1.1",AA)',vr:"UN",name:"NoiseDoseStep",vm:"1",version:"PrivateTag"},'(0019,"DIDI TO PCR 1.1",AB)':{tag:'(0019,"DIDI TO PCR 1.1",AB)',vr:"UN",name:"NoiseFrequencyLimit",vm:"1",version:"PrivateTag"},'(0019,"DIDI TO PCR 1.1",AC)':{tag:'(0019,"DIDI TO PCR 1.1",AC)',vr:"UN",name:"WeakContrastLimit",vm:"1",version:"PrivateTag"},'(0019,"DIDI TO PCR 1.1",AD)':{tag:'(0019,"DIDI TO PCR 1.1",AD)',vr:"UN",name:"StrongContrastLimit",vm:"1",version:"PrivateTag"},'(0019,"DIDI TO PCR 1.1",AE)':{tag:'(0019,"DIDI TO PCR 1.1",AE)',vr:"UN",name:"StructureBoostOffset",vm:"1",version:"PrivateTag"},'(0019,"DIDI TO PCR 1.1",AF)':{tag:'(0019,"DIDI TO PCR 1.1",AF)',vr:"UN",name:"SmoothGain",vm:"1",version:"PrivateTag"},'(0019,"DIDI TO PCR 1.1",B0)':{tag:'(0019,"DIDI TO PCR 1.1",B0)',vr:"UN",name:"MeasureField1",vm:"1",version:"PrivateTag"},'(0019,"DIDI TO PCR 1.1",B1)':{tag:'(0019,"DIDI TO PCR 1.1",B1)',vr:"UN",name:"MeasureField2",vm:"1",version:"PrivateTag"},'(0019,"DIDI TO PCR 1.1",B2)':{tag:'(0019,"DIDI TO PCR 1.1",B2)',vr:"UN",name:"KeyPercentile1",vm:"1",version:"PrivateTag"},'(0019,"DIDI TO PCR 1.1",B3)':{tag:'(0019,"DIDI TO PCR 1.1",B3)',vr:"UN",name:"KeyPercentile2",vm:"1",version:"PrivateTag"},'(0019,"DIDI TO PCR 1.1",B4)':{tag:'(0019,"DIDI TO PCR 1.1",B4)',vr:"UN",name:"DensityLUT",vm:"1",version:"PrivateTag"},'(0019,"DIDI TO PCR 1.1",B5)':{tag:'(0019,"DIDI TO PCR 1.1",B5)',vr:"UN",name:"Brightness",vm:"1",version:"PrivateTag"},'(0019,"DIDI TO PCR 1.1",B6)':{tag:'(0019,"DIDI TO PCR 1.1",B6)',vr:"UN",name:"Gamma",vm:"1",version:"PrivateTag"},'(0089,"DIDI TO PCR 1.1",10)':{tag:'(0089,"DIDI TO PCR 1.1",10)',vr:"SQ",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"DIGISCAN IMAGE",31)':{tag:'(0029,"DIGISCAN IMAGE",31)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0029,"DIGISCAN IMAGE",32)':{tag:'(0029,"DIGISCAN IMAGE",32)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0029,"DIGISCAN IMAGE",33)':{tag:'(0029,"DIGISCAN IMAGE",33)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"DIGISCAN IMAGE",34)':{tag:'(0029,"DIGISCAN IMAGE",34)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(7001-o-70ff,"DLX_ANNOT_01",04)':{tag:'(7001-o-70ff,"DLX_ANNOT_01",04)',vr:"ST",name:"TextAnnotation",vm:"1",version:"PrivateTag"},'(7001-o-70ff,"DLX_ANNOT_01",05)':{tag:'(7001-o-70ff,"DLX_ANNOT_01",05)',vr:"IS",name:"Box",vm:"2",version:"PrivateTag"},'(7001-o-70ff,"DLX_ANNOT_01",07)':{tag:'(7001-o-70ff,"DLX_ANNOT_01",07)',vr:"IS",name:"ArrowEnd",vm:"2",version:"PrivateTag"},'(0015,"DLX_EXAMS_01",01)':{tag:'(0015,"DLX_EXAMS_01",01)',vr:"DS",name:"StenosisCalibrationRatio",vm:"1",version:"PrivateTag"},'(0015,"DLX_EXAMS_01",02)':{tag:'(0015,"DLX_EXAMS_01",02)',vr:"DS",name:"StenosisMagnification",vm:"1",version:"PrivateTag"},'(0015,"DLX_EXAMS_01",03)':{tag:'(0015,"DLX_EXAMS_01",03)',vr:"DS",name:"CardiacCalibrationRatio",vm:"1",version:"PrivateTag"},'(6001-o-60ff,"DLX_LKUP_01",01)':{tag:'(6001-o-60ff,"DLX_LKUP_01",01)',vr:"US",name:"GrayPaletteColorLookupTableDescriptor",vm:"3",version:"PrivateTag"},'(6001-o-60ff,"DLX_LKUP_01",02)':{tag:'(6001-o-60ff,"DLX_LKUP_01",02)',vr:"US",name:"GrayPaletteColorLookupTableData",vm:"1",version:"PrivateTag"},'(0011,"DLX_PATNT_01",01)':{tag:'(0011,"DLX_PATNT_01",01)',vr:"LT",name:"PatientDOB",vm:"1",version:"PrivateTag"},'(0019,"DLX_SERIE_01",01)':{tag:'(0019,"DLX_SERIE_01",01)',vr:"DS",name:"AngleValueLArm",vm:"1",version:"PrivateTag"},'(0019,"DLX_SERIE_01",02)':{tag:'(0019,"DLX_SERIE_01",02)',vr:"DS",name:"AngleValuePArm",vm:"1",version:"PrivateTag"},'(0019,"DLX_SERIE_01",03)':{tag:'(0019,"DLX_SERIE_01",03)',vr:"DS",name:"AngleValueCArm",vm:"1",version:"PrivateTag"},'(0019,"DLX_SERIE_01",04)':{tag:'(0019,"DLX_SERIE_01",04)',vr:"CS",name:"AngleLabelLArm",vm:"1",version:"PrivateTag"},'(0019,"DLX_SERIE_01",05)':{tag:'(0019,"DLX_SERIE_01",05)',vr:"CS",name:"AngleLabelPArm",vm:"1",version:"PrivateTag"},'(0019,"DLX_SERIE_01",06)':{tag:'(0019,"DLX_SERIE_01",06)',vr:"CS",name:"AngleLabelCArm",vm:"1",version:"PrivateTag"},'(0019,"DLX_SERIE_01",07)':{tag:'(0019,"DLX_SERIE_01",07)',vr:"ST",name:"ProcedureName",vm:"1",version:"PrivateTag"},'(0019,"DLX_SERIE_01",08)':{tag:'(0019,"DLX_SERIE_01",08)',vr:"ST",name:"ExamName",vm:"1",version:"PrivateTag"},'(0019,"DLX_SERIE_01",09)':{tag:'(0019,"DLX_SERIE_01",09)',vr:"SH",name:"PatientSize",vm:"1",version:"PrivateTag"},'(0019,"DLX_SERIE_01",0a)':{tag:'(0019,"DLX_SERIE_01",0a)',vr:"IS",name:"RecordView",vm:"1",version:"PrivateTag"},'(0019,"DLX_SERIE_01",10)':{tag:'(0019,"DLX_SERIE_01",10)',vr:"DS",name:"InjectorDelay",vm:"1",version:"PrivateTag"},'(0019,"DLX_SERIE_01",11)':{tag:'(0019,"DLX_SERIE_01",11)',vr:"CS",name:"AutoInject",vm:"1",version:"PrivateTag"},'(0019,"DLX_SERIE_01",14)':{tag:'(0019,"DLX_SERIE_01",14)',vr:"IS",name:"AcquisitionMode",vm:"1",version:"PrivateTag"},'(0019,"DLX_SERIE_01",15)':{tag:'(0019,"DLX_SERIE_01",15)',vr:"CS",name:"CameraRotationEnabled",vm:"1",version:"PrivateTag"},'(0019,"DLX_SERIE_01",16)':{tag:'(0019,"DLX_SERIE_01",16)',vr:"CS",name:"ReverseSweep",vm:"1",version:"PrivateTag"},'(0019,"DLX_SERIE_01",17)':{tag:'(0019,"DLX_SERIE_01",17)',vr:"IS",name:"SpatialFilterStrength",vm:"1",version:"PrivateTag"},'(0019,"DLX_SERIE_01",18)':{tag:'(0019,"DLX_SERIE_01",18)',vr:"IS",name:"ZoomFactor",vm:"1",version:"PrivateTag"},'(0019,"DLX_SERIE_01",19)':{tag:'(0019,"DLX_SERIE_01",19)',vr:"IS",name:"XZoomCenter",vm:"1",version:"PrivateTag"},'(0019,"DLX_SERIE_01",1a)':{tag:'(0019,"DLX_SERIE_01",1a)',vr:"IS",name:"YZoomCenter",vm:"1",version:"PrivateTag"},'(0019,"DLX_SERIE_01",1b)':{tag:'(0019,"DLX_SERIE_01",1b)',vr:"DS",name:"Focus",vm:"1",version:"PrivateTag"},'(0019,"DLX_SERIE_01",1c)':{tag:'(0019,"DLX_SERIE_01",1c)',vr:"CS",name:"Dose",vm:"1",version:"PrivateTag"},'(0019,"DLX_SERIE_01",1d)':{tag:'(0019,"DLX_SERIE_01",1d)',vr:"IS",name:"SideMark",vm:"1",version:"PrivateTag"},'(0019,"DLX_SERIE_01",1e)':{tag:'(0019,"DLX_SERIE_01",1e)',vr:"IS",name:"PercentageLandscape",vm:"1",version:"PrivateTag"},'(0019,"DLX_SERIE_01",1f)':{tag:'(0019,"DLX_SERIE_01",1f)',vr:"DS",name:"ExposureDuration",vm:"1",version:"PrivateTag"},'(00E1,"ELSCINT1",01)':{tag:'(00E1,"ELSCINT1",01)',vr:"US",name:"DataDictionaryVersion",vm:"1",version:"PrivateTag"},'(00E1,"ELSCINT1",14)':{tag:'(00E1,"ELSCINT1",14)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(00E1,"ELSCINT1",22)':{tag:'(00E1,"ELSCINT1",22)',vr:"DS",name:"Unknown",vm:"2",version:"PrivateTag"},'(00E1,"ELSCINT1",23)':{tag:'(00E1,"ELSCINT1",23)',vr:"DS",name:"Unknown",vm:"2",version:"PrivateTag"},'(00E1,"ELSCINT1",24)':{tag:'(00E1,"ELSCINT1",24)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(00E1,"ELSCINT1",25)':{tag:'(00E1,"ELSCINT1",25)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(00E1,"ELSCINT1",40)':{tag:'(00E1,"ELSCINT1",40)',vr:"SH",name:"OffsetFromCTMRImages",vm:"1",version:"PrivateTag"},'(0601,"ELSCINT1",00)':{tag:'(0601,"ELSCINT1",00)',vr:"SH",name:"ImplementationVersion",vm:"1",version:"PrivateTag"},'(0601,"ELSCINT1",20)':{tag:'(0601,"ELSCINT1",20)',vr:"DS",name:"RelativeTablePosition",vm:"1",version:"PrivateTag"},'(0601,"ELSCINT1",21)':{tag:'(0601,"ELSCINT1",21)',vr:"DS",name:"RelativeTableHeight",vm:"1",version:"PrivateTag"},'(0601,"ELSCINT1",30)':{tag:'(0601,"ELSCINT1",30)',vr:"SH",name:"SurviewDirection",vm:"1",version:"PrivateTag"},'(0601,"ELSCINT1",31)':{tag:'(0601,"ELSCINT1",31)',vr:"DS",name:"SurviewLength",vm:"1",version:"PrivateTag"},'(0601,"ELSCINT1",50)':{tag:'(0601,"ELSCINT1",50)',vr:"SH",name:"ImageViewType",vm:"1",version:"PrivateTag"},'(0601,"ELSCINT1",70)':{tag:'(0601,"ELSCINT1",70)',vr:"DS",name:"BatchNumber",vm:"1",version:"PrivateTag"},'(0601,"ELSCINT1",71)':{tag:'(0601,"ELSCINT1",71)',vr:"DS",name:"BatchSize",vm:"1",version:"PrivateTag"},'(0601,"ELSCINT1",72)':{tag:'(0601,"ELSCINT1",72)',vr:"DS",name:"BatchSliceNumber",vm:"1",version:"PrivateTag"},'(0009,"FDMS 1.0",04)':{tag:'(0009,"FDMS 1.0",04)',vr:"SH",name:"ImageControlUnit",vm:"1",version:"PrivateTag"},'(0009,"FDMS 1.0",05)':{tag:'(0009,"FDMS 1.0",05)',vr:"OW",name:"ImageUID",vm:"1",version:"PrivateTag"},'(0009,"FDMS 1.0",06)':{tag:'(0009,"FDMS 1.0",06)',vr:"OW",name:"RouteImageUID",vm:"1",version:"PrivateTag"},'(0009,"FDMS 1.0",08)':{tag:'(0009,"FDMS 1.0",08)',vr:"UL",name:"ImageDisplayInformationVersionNo",vm:"1",version:"PrivateTag"},'(0009,"FDMS 1.0",09)':{tag:'(0009,"FDMS 1.0",09)',vr:"UL",name:"PatientInformationVersionNo",vm:"1",version:"PrivateTag"},'(0009,"FDMS 1.0",0C)':{tag:'(0009,"FDMS 1.0",0C)',vr:"OW",name:"FilmUID",vm:"1",version:"PrivateTag"},'(0009,"FDMS 1.0",10)':{tag:'(0009,"FDMS 1.0",10)',vr:"CS",name:"ExposureUnitTypeCode",vm:"1",version:"PrivateTag"},'(0009,"FDMS 1.0",80)':{tag:'(0009,"FDMS 1.0",80)',vr:"LO",name:"KanjiHospitalName",vm:"1",version:"PrivateTag"},'(0009,"FDMS 1.0",90)':{tag:'(0009,"FDMS 1.0",90)',vr:"ST",name:"DistributionCode",vm:"1",version:"PrivateTag"},'(0009,"FDMS 1.0",92)':{tag:'(0009,"FDMS 1.0",92)',vr:"SH",name:"KanjiDepartmentName",vm:"1",version:"PrivateTag"},'(0009,"FDMS 1.0",F0)':{tag:'(0009,"FDMS 1.0",F0)',vr:"CS",name:"BlackeningProcessFlag",vm:"1",version:"PrivateTag"},'(0019,"FDMS 1.0",15)':{tag:'(0019,"FDMS 1.0",15)',vr:"LO",name:"KanjiBodyPartForExposure",vm:"1",version:"PrivateTag"},'(0019,"FDMS 1.0",32)':{tag:'(0019,"FDMS 1.0",32)',vr:"LO",name:"KanjiMenuName",vm:"1",version:"PrivateTag"},'(0019,"FDMS 1.0",40)':{tag:'(0019,"FDMS 1.0",40)',vr:"CS",name:"ImageProcessingType",vm:"1",version:"PrivateTag"},'(0019,"FDMS 1.0",50)':{tag:'(0019,"FDMS 1.0",50)',vr:"CS",name:"EDRMode",vm:"1",version:"PrivateTag"},'(0019,"FDMS 1.0",60)':{tag:'(0019,"FDMS 1.0",60)',vr:"SH",name:"RadiographersCode",vm:"1",version:"PrivateTag"},'(0019,"FDMS 1.0",70)':{tag:'(0019,"FDMS 1.0",70)',vr:"IS",name:"SplitExposureFormat",vm:"1",version:"PrivateTag"},'(0019,"FDMS 1.0",71)':{tag:'(0019,"FDMS 1.0",71)',vr:"IS",name:"NoOfSplitExposureFrames",vm:"1",version:"PrivateTag"},'(0019,"FDMS 1.0",80)':{tag:'(0019,"FDMS 1.0",80)',vr:"IS",name:"ReadingPositionSpecification",vm:"1",version:"PrivateTag"},'(0019,"FDMS 1.0",81)':{tag:'(0019,"FDMS 1.0",81)',vr:"IS",name:"ReadingSensitivityCenter",vm:"1",version:"PrivateTag"},'(0019,"FDMS 1.0",90)':{tag:'(0019,"FDMS 1.0",90)',vr:"SH",name:"FilmAnnotationCharacterString1",vm:"1",version:"PrivateTag"},'(0019,"FDMS 1.0",91)':{tag:'(0019,"FDMS 1.0",91)',vr:"SH",name:"FilmAnnotationCharacterString2",vm:"1",version:"PrivateTag"},'(0021,"FDMS 1.0",10)':{tag:'(0021,"FDMS 1.0",10)',vr:"CS",name:"FCRImageID",vm:"1",version:"PrivateTag"},'(0021,"FDMS 1.0",30)':{tag:'(0021,"FDMS 1.0",30)',vr:"CS",name:"SetNo",vm:"1",version:"PrivateTag"},'(0021,"FDMS 1.0",40)':{tag:'(0021,"FDMS 1.0",40)',vr:"IS",name:"ImageNoInTheSet",vm:"1",version:"PrivateTag"},'(0021,"FDMS 1.0",50)':{tag:'(0021,"FDMS 1.0",50)',vr:"CS",name:"PairProcessingInformation",vm:"1",version:"PrivateTag"},'(0021,"FDMS 1.0",80)':{tag:'(0021,"FDMS 1.0",80)',vr:"OB",name:"EquipmentTypeSpecificInformation",vm:"1",version:"PrivateTag"},'(0023,"FDMS 1.0",10)':{tag:'(0023,"FDMS 1.0",10)',vr:"SQ",name:"Unknown",vm:"1",version:"PrivateTag"},'(0023,"FDMS 1.0",20)':{tag:'(0023,"FDMS 1.0",20)',vr:"SQ",name:"Unknown",vm:"1",version:"PrivateTag"},'(0023,"FDMS 1.0",30)':{tag:'(0023,"FDMS 1.0",30)',vr:"SQ",name:"Unknown",vm:"1",version:"PrivateTag"},'(0025,"FDMS 1.0",10)':{tag:'(0025,"FDMS 1.0",10)',vr:"US",name:"RelativeLightEmissionAmountSk",vm:"1",version:"PrivateTag"},'(0025,"FDMS 1.0",11)':{tag:'(0025,"FDMS 1.0",11)',vr:"US",name:"TermOfCorrectionForEachIPTypeSt",vm:"1",version:"PrivateTag"},'(0025,"FDMS 1.0",12)':{tag:'(0025,"FDMS 1.0",12)',vr:"US",name:"ReadingGainGp",vm:"1",version:"PrivateTag"},'(0025,"FDMS 1.0",13)':{tag:'(0025,"FDMS 1.0",13)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0025,"FDMS 1.0",15)':{tag:'(0025,"FDMS 1.0",15)',vr:"CS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0025,"FDMS 1.0",20)':{tag:'(0025,"FDMS 1.0",20)',vr:"US",name:"Unknown",vm:"2",version:"PrivateTag"},'(0025,"FDMS 1.0",21)':{tag:'(0025,"FDMS 1.0",21)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0025,"FDMS 1.0",30)':{tag:'(0025,"FDMS 1.0",30)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0025,"FDMS 1.0",31)':{tag:'(0025,"FDMS 1.0",31)',vr:"SS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0025,"FDMS 1.0",32)':{tag:'(0025,"FDMS 1.0",32)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0025,"FDMS 1.0",33)':{tag:'(0025,"FDMS 1.0",33)',vr:"SS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0025,"FDMS 1.0",34)':{tag:'(0025,"FDMS 1.0",34)',vr:"SS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0025,"FDMS 1.0",40)':{tag:'(0025,"FDMS 1.0",40)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0025,"FDMS 1.0",41)':{tag:'(0025,"FDMS 1.0",41)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0025,"FDMS 1.0",42)':{tag:'(0025,"FDMS 1.0",42)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0025,"FDMS 1.0",43)':{tag:'(0025,"FDMS 1.0",43)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0025,"FDMS 1.0",50)':{tag:'(0025,"FDMS 1.0",50)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0025,"FDMS 1.0",51)':{tag:'(0025,"FDMS 1.0",51)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0025,"FDMS 1.0",52)':{tag:'(0025,"FDMS 1.0",52)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0025,"FDMS 1.0",53)':{tag:'(0025,"FDMS 1.0",53)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0025,"FDMS 1.0",60)':{tag:'(0025,"FDMS 1.0",60)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0025,"FDMS 1.0",61)':{tag:'(0025,"FDMS 1.0",61)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0025,"FDMS 1.0",62)':{tag:'(0025,"FDMS 1.0",62)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0025,"FDMS 1.0",63)':{tag:'(0025,"FDMS 1.0",63)',vr:"CS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0025,"FDMS 1.0",70)':{tag:'(0025,"FDMS 1.0",70)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0025,"FDMS 1.0",71)':{tag:'(0025,"FDMS 1.0",71)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0025,"FDMS 1.0",72)':{tag:'(0025,"FDMS 1.0",72)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0025,"FDMS 1.0",73)':{tag:'(0025,"FDMS 1.0",73)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0025,"FDMS 1.0",74)':{tag:'(0025,"FDMS 1.0",74)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0025,"FDMS 1.0",80)':{tag:'(0025,"FDMS 1.0",80)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0025,"FDMS 1.0",81)':{tag:'(0025,"FDMS 1.0",81)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0025,"FDMS 1.0",82)':{tag:'(0025,"FDMS 1.0",82)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0025,"FDMS 1.0",83)':{tag:'(0025,"FDMS 1.0",83)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0025,"FDMS 1.0",84)':{tag:'(0025,"FDMS 1.0",84)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0025,"FDMS 1.0",90)':{tag:'(0025,"FDMS 1.0",90)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0025,"FDMS 1.0",91)':{tag:'(0025,"FDMS 1.0",91)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0025,"FDMS 1.0",92)':{tag:'(0025,"FDMS 1.0",92)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0025,"FDMS 1.0",93)':{tag:'(0025,"FDMS 1.0",93)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0025,"FDMS 1.0",94)':{tag:'(0025,"FDMS 1.0",94)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0025,"FDMS 1.0",95)':{tag:'(0025,"FDMS 1.0",95)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0025,"FDMS 1.0",96)':{tag:'(0025,"FDMS 1.0",96)',vr:"CS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0025,"FDMS 1.0",a0)':{tag:'(0025,"FDMS 1.0",a0)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0025,"FDMS 1.0",a1)':{tag:'(0025,"FDMS 1.0",a1)',vr:"SS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0025,"FDMS 1.0",a2)':{tag:'(0025,"FDMS 1.0",a2)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0025,"FDMS 1.0",a3)':{tag:'(0025,"FDMS 1.0",a3)',vr:"SS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0027,"FDMS 1.0",10)':{tag:'(0027,"FDMS 1.0",10)',vr:"SQ",name:"Unknown",vm:"1",version:"PrivateTag"},'(0027,"FDMS 1.0",20)':{tag:'(0027,"FDMS 1.0",20)',vr:"SQ",name:"Unknown",vm:"1",version:"PrivateTag"},'(0027,"FDMS 1.0",30)':{tag:'(0027,"FDMS 1.0",30)',vr:"SQ",name:"Unknown",vm:"1",version:"PrivateTag"},'(0027,"FDMS 1.0",40)':{tag:'(0027,"FDMS 1.0",40)',vr:"SQ",name:"Unknown",vm:"1",version:"PrivateTag"},'(0027,"FDMS 1.0",50)':{tag:'(0027,"FDMS 1.0",50)',vr:"SQ",name:"Unknown",vm:"1",version:"PrivateTag"},'(0027,"FDMS 1.0",60)':{tag:'(0027,"FDMS 1.0",60)',vr:"SQ",name:"Unknown",vm:"1",version:"PrivateTag"},'(0027,"FDMS 1.0",70)':{tag:'(0027,"FDMS 1.0",70)',vr:"SQ",name:"Unknown",vm:"1",version:"PrivateTag"},'(0027,"FDMS 1.0",80)':{tag:'(0027,"FDMS 1.0",80)',vr:"SQ",name:"Unknown",vm:"1",version:"PrivateTag"},'(0027,"FDMS 1.0",a0)':{tag:'(0027,"FDMS 1.0",a0)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0027,"FDMS 1.0",a1)':{tag:'(0027,"FDMS 1.0",a1)',vr:"CS",name:"Unknown",vm:"2",version:"PrivateTag"},'(0027,"FDMS 1.0",a2)':{tag:'(0027,"FDMS 1.0",a2)',vr:"CS",name:"Unknown",vm:"2",version:"PrivateTag"},'(0027,"FDMS 1.0",a3)':{tag:'(0027,"FDMS 1.0",a3)',vr:"SS",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0029,"FDMS 1.0",20)':{tag:'(0029,"FDMS 1.0",20)',vr:"CS",name:"ImageScanningDirection",vm:"1",version:"PrivateTag"},'(0029,"FDMS 1.0",30)':{tag:'(0029,"FDMS 1.0",30)',vr:"CS",name:"ExtendedReadingSizeValue",vm:"1",version:"PrivateTag"},'(0029,"FDMS 1.0",34)':{tag:'(0029,"FDMS 1.0",34)',vr:"US",name:"MagnificationReductionRatio",vm:"1",version:"PrivateTag"},'(0029,"FDMS 1.0",44)':{tag:'(0029,"FDMS 1.0",44)',vr:"CS",name:"LineDensityCode",vm:"1",version:"PrivateTag"},'(0029,"FDMS 1.0",50)':{tag:'(0029,"FDMS 1.0",50)',vr:"CS",name:"DataCompressionCode",vm:"1",version:"PrivateTag"},'(2011,"FDMS 1.0",11)':{tag:'(2011,"FDMS 1.0",11)',vr:"CS",name:"ImagePosition SpecifyingFlag",vm:"1",version:"PrivateTag"},'(50F1,"FDMS 1.0",06)':{tag:'(50F1,"FDMS 1.0",06)',vr:"CS",name:"EnergySubtractionParam",vm:"1",version:"PrivateTag"},'(50F1,"FDMS 1.0",07)':{tag:'(50F1,"FDMS 1.0",07)',vr:"CS",name:"SubtractionRegistrationResult",vm:"1",version:"PrivateTag"},'(50F1,"FDMS 1.0",08)':{tag:'(50F1,"FDMS 1.0",08)',vr:"CS",name:"EnergySubtractionParam2",vm:"1",version:"PrivateTag"},'(50F1,"FDMS 1.0",09)':{tag:'(50F1,"FDMS 1.0",09)',vr:"SL",name:"AfinConversionCoefficient",vm:"1",version:"PrivateTag"},'(50F1,"FDMS 1.0",10)':{tag:'(50F1,"FDMS 1.0",10)',vr:"CS",name:"FilmOutputFormat",vm:"1",version:"PrivateTag"},'(50F1,"FDMS 1.0",20)':{tag:'(50F1,"FDMS 1.0",20)',vr:"CS",name:"ImageProcessingModificationFlag",vm:"1",version:"PrivateTag"},'(0009,"FFP DATA",01)':{tag:'(0009,"FFP DATA",01)',vr:"UN",name:"CRHeaderInformation",vm:"1",version:"PrivateTag"},'(0019,"GE ??? From Adantage Review CS",30)':{tag:'(0019,"GE ??? From Adantage Review CS",30)',vr:"LO",name:"CREDRMode",vm:"1",version:"PrivateTag"},'(0019,"GE ??? From Adantage Review CS",40)':{tag:'(0019,"GE ??? From Adantage Review CS",40)',vr:"LO",name:"CRLatitude",vm:"1",version:"PrivateTag"},'(0019,"GE ??? From Adantage Review CS",50)':{tag:'(0019,"GE ??? From Adantage Review CS",50)',vr:"LO",name:"CRGroupNumber",vm:"1",version:"PrivateTag"},'(0019,"GE ??? From Adantage Review CS",70)':{tag:'(0019,"GE ??? From Adantage Review CS",70)',vr:"LO",name:"CRImageSerialNumber",vm:"1",version:"PrivateTag"},'(0019,"GE ??? From Adantage Review CS",80)':{tag:'(0019,"GE ??? From Adantage Review CS",80)',vr:"LO",name:"CRBarCodeNumber",vm:"1",version:"PrivateTag"},'(0019,"GE ??? From Adantage Review CS",90)':{tag:'(0019,"GE ??? From Adantage Review CS",90)',vr:"LO",name:"CRFilmOutputExposures",vm:"1",version:"PrivateTag"},'(0009,"GEMS_ACQU_01",24)':{tag:'(0009,"GEMS_ACQU_01",24)',vr:"DS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"GEMS_ACQU_01",25)':{tag:'(0009,"GEMS_ACQU_01",25)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"GEMS_ACQU_01",3e)':{tag:'(0009,"GEMS_ACQU_01",3e)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"GEMS_ACQU_01",3f)':{tag:'(0009,"GEMS_ACQU_01",3f)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"GEMS_ACQU_01",42)':{tag:'(0009,"GEMS_ACQU_01",42)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"GEMS_ACQU_01",43)':{tag:'(0009,"GEMS_ACQU_01",43)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"GEMS_ACQU_01",f8)':{tag:'(0009,"GEMS_ACQU_01",f8)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"GEMS_ACQU_01",fb)':{tag:'(0009,"GEMS_ACQU_01",fb)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",01)':{tag:'(0019,"GEMS_ACQU_01",01)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",02)':{tag:'(0019,"GEMS_ACQU_01",02)',vr:"SL",name:"NumberOfCellsInDetector",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",03)':{tag:'(0019,"GEMS_ACQU_01",03)',vr:"DS",name:"CellNumberAtTheta",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",04)':{tag:'(0019,"GEMS_ACQU_01",04)',vr:"DS",name:"CellSpacing",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",05)':{tag:'(0019,"GEMS_ACQU_01",05)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",06)':{tag:'(0019,"GEMS_ACQU_01",06)',vr:"UN",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",0e)':{tag:'(0019,"GEMS_ACQU_01",0e)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",0f)':{tag:'(0019,"GEMS_ACQU_01",0f)',vr:"DS",name:"HorizontalFrameOfReference",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",11)':{tag:'(0019,"GEMS_ACQU_01",11)',vr:"SS",name:"SeriesContrast",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",12)':{tag:'(0019,"GEMS_ACQU_01",12)',vr:"SS",name:"LastPseq",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",13)':{tag:'(0019,"GEMS_ACQU_01",13)',vr:"SS",name:"StartNumberForBaseline",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",14)':{tag:'(0019,"GEMS_ACQU_01",14)',vr:"SS",name:"End NumberForBaseline",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",15)':{tag:'(0019,"GEMS_ACQU_01",15)',vr:"SS",name:"StartNumberForEnhancedScans",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",16)':{tag:'(0019,"GEMS_ACQU_01",16)',vr:"SS",name:"EndNumberForEnhancedScans",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",17)':{tag:'(0019,"GEMS_ACQU_01",17)',vr:"SS",name:"SeriesPlane",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",18)':{tag:'(0019,"GEMS_ACQU_01",18)',vr:"LO",name:"FirstScanRAS",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",19)':{tag:'(0019,"GEMS_ACQU_01",19)',vr:"DS",name:"FirstScanLocation",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",1a)':{tag:'(0019,"GEMS_ACQU_01",1a)',vr:"LO",name:"LastScanRAS",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",1b)':{tag:'(0019,"GEMS_ACQU_01",1b)',vr:"DS",name:"LastScanLocation",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",1e)':{tag:'(0019,"GEMS_ACQU_01",1e)',vr:"DS",name:"DisplayFieldOfView",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",20)':{tag:'(0019,"GEMS_ACQU_01",20)',vr:"DS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",22)':{tag:'(0019,"GEMS_ACQU_01",22)',vr:"DS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",23)':{tag:'(0019,"GEMS_ACQU_01",23)',vr:"DS",name:"TableSpeed",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",24)':{tag:'(0019,"GEMS_ACQU_01",24)',vr:"DS",name:"MidScanTime",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",25)':{tag:'(0019,"GEMS_ACQU_01",25)',vr:"SS",name:"MidScanFlag",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",26)':{tag:'(0019,"GEMS_ACQU_01",26)',vr:"SL",name:"DegreesOfAzimuth",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",27)':{tag:'(0019,"GEMS_ACQU_01",27)',vr:"DS",name:"GantryPeriod",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",2a)':{tag:'(0019,"GEMS_ACQU_01",2a)',vr:"DS",name:"XrayOnPosition",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",2b)':{tag:'(0019,"GEMS_ACQU_01",2b)',vr:"DS",name:"XrayOffPosition",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",2c)':{tag:'(0019,"GEMS_ACQU_01",2c)',vr:"SL",name:"NumberOfTriggers",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",2d)':{tag:'(0019,"GEMS_ACQU_01",2d)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",2e)':{tag:'(0019,"GEMS_ACQU_01",2e)',vr:"DS",name:"AngleOfFirstView",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",2f)':{tag:'(0019,"GEMS_ACQU_01",2f)',vr:"DS",name:"TriggerFrequency",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",39)':{tag:'(0019,"GEMS_ACQU_01",39)',vr:"SS",name:"ScanFOVType",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",3a)':{tag:'(0019,"GEMS_ACQU_01",3a)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",3b)':{tag:'(0019,"GEMS_ACQU_01",3b)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",3c)':{tag:'(0019,"GEMS_ACQU_01",3c)',vr:"UN",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",3e)':{tag:'(0019,"GEMS_ACQU_01",3e)',vr:"UN",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",3f)':{tag:'(0019,"GEMS_ACQU_01",3f)',vr:"UN",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",40)':{tag:'(0019,"GEMS_ACQU_01",40)',vr:"SS",name:"StatReconFlag",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",41)':{tag:'(0019,"GEMS_ACQU_01",41)',vr:"SS",name:"ComputeType",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",42)':{tag:'(0019,"GEMS_ACQU_01",42)',vr:"SS",name:"SegmentNumber",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",43)':{tag:'(0019,"GEMS_ACQU_01",43)',vr:"SS",name:"TotalSegmentsRequested",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",44)':{tag:'(0019,"GEMS_ACQU_01",44)',vr:"DS",name:"InterscanDelay",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",47)':{tag:'(0019,"GEMS_ACQU_01",47)',vr:"SS",name:"ViewCompressionFactor",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",48)':{tag:'(0019,"GEMS_ACQU_01",48)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",49)':{tag:'(0019,"GEMS_ACQU_01",49)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",4a)':{tag:'(0019,"GEMS_ACQU_01",4a)',vr:"SS",name:"TotalNumberOfRefChannels",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",4b)':{tag:'(0019,"GEMS_ACQU_01",4b)',vr:"SL",name:"DataSizeForScanData",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",52)':{tag:'(0019,"GEMS_ACQU_01",52)',vr:"SS",name:"ReconPostProcessingFlag",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",54)':{tag:'(0019,"GEMS_ACQU_01",54)',vr:"UN",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",57)':{tag:'(0019,"GEMS_ACQU_01",57)',vr:"SS",name:"CTWaterNumber",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",58)':{tag:'(0019,"GEMS_ACQU_01",58)',vr:"SS",name:"CTBoneNumber",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",5a)':{tag:'(0019,"GEMS_ACQU_01",5a)',vr:"FL",name:"AcquisitionDuration",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",5d)':{tag:'(0019,"GEMS_ACQU_01",5d)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",5e)':{tag:'(0019,"GEMS_ACQU_01",5e)',vr:"SL",name:"NumberOfChannels1To512",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",5f)':{tag:'(0019,"GEMS_ACQU_01",5f)',vr:"SL",name:"IncrementBetweenChannels",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",60)':{tag:'(0019,"GEMS_ACQU_01",60)',vr:"SL",name:"StartingView",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",61)':{tag:'(0019,"GEMS_ACQU_01",61)',vr:"SL",name:"NumberOfViews",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",62)':{tag:'(0019,"GEMS_ACQU_01",62)',vr:"SL",name:"IncrementBetweenViews",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",6a)':{tag:'(0019,"GEMS_ACQU_01",6a)',vr:"SS",name:"DependantOnNumberOfViewsProcessed",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",6b)':{tag:'(0019,"GEMS_ACQU_01",6b)',vr:"SS",name:"FieldOfViewInDetectorCells",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",70)':{tag:'(0019,"GEMS_ACQU_01",70)',vr:"SS",name:"ValueOfBackProjectionButton",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",71)':{tag:'(0019,"GEMS_ACQU_01",71)',vr:"SS",name:"SetIfFatqEstimatesWereUsed",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",72)':{tag:'(0019,"GEMS_ACQU_01",72)',vr:"DS",name:"ZChannelAvgOverViews",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",73)':{tag:'(0019,"GEMS_ACQU_01",73)',vr:"DS",name:"AvgOfLeftRefChannelsOverViews",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",74)':{tag:'(0019,"GEMS_ACQU_01",74)',vr:"DS",name:"MaxLeftChannelOverViews",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",75)':{tag:'(0019,"GEMS_ACQU_01",75)',vr:"DS",name:"AvgOfRightRefChannelsOverViews",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",76)':{tag:'(0019,"GEMS_ACQU_01",76)',vr:"DS",name:"MaxRightChannelOverViews",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",7d)':{tag:'(0019,"GEMS_ACQU_01",7d)',vr:"DS",name:"SecondEcho",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",7e)':{tag:'(0019,"GEMS_ACQU_01",7e)',vr:"SS",name:"NumberOfEchos",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",7f)':{tag:'(0019,"GEMS_ACQU_01",7f)',vr:"DS",name:"TableDelta",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",81)':{tag:'(0019,"GEMS_ACQU_01",81)',vr:"SS",name:"Contiguous",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",82)':{tag:'(0019,"GEMS_ACQU_01",82)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",83)':{tag:'(0019,"GEMS_ACQU_01",83)',vr:"DS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",84)':{tag:'(0019,"GEMS_ACQU_01",84)',vr:"DS",name:"PeakSAR",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",85)':{tag:'(0019,"GEMS_ACQU_01",85)',vr:"SS",name:"MonitorSAR",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",86)':{tag:'(0019,"GEMS_ACQU_01",86)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",87)':{tag:'(0019,"GEMS_ACQU_01",87)',vr:"DS",name:"CardiacRepetition Time",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",88)':{tag:'(0019,"GEMS_ACQU_01",88)',vr:"SS",name:"ImagesPerCardiacCycle",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",8a)':{tag:'(0019,"GEMS_ACQU_01",8a)',vr:"SS",name:"ActualReceiveGainAnalog",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",8b)':{tag:'(0019,"GEMS_ACQU_01",8b)',vr:"SS",name:"ActualReceiveGainDigital",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",8d)':{tag:'(0019,"GEMS_ACQU_01",8d)',vr:"DS",name:"DelayAfterTrigger",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",8f)':{tag:'(0019,"GEMS_ACQU_01",8f)',vr:"SS",name:"SwapPhaseFrequency",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",90)':{tag:'(0019,"GEMS_ACQU_01",90)',vr:"SS",name:"PauseInterval",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",91)':{tag:'(0019,"GEMS_ACQU_01",91)',vr:"DS",name:"PulseTime",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",92)':{tag:'(0019,"GEMS_ACQU_01",92)',vr:"SL",name:"SliceOffsetOnFrequencyAxis",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",93)':{tag:'(0019,"GEMS_ACQU_01",93)',vr:"DS",name:"CenterFrequency",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",94)':{tag:'(0019,"GEMS_ACQU_01",94)',vr:"SS",name:"TransmitGain",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",95)':{tag:'(0019,"GEMS_ACQU_01",95)',vr:"SS",name:"AnalogReceiverGain",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",96)':{tag:'(0019,"GEMS_ACQU_01",96)',vr:"SS",name:"DigitalReceiverGain",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",97)':{tag:'(0019,"GEMS_ACQU_01",97)',vr:"SL",name:"BitmapDefiningCVs",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",98)':{tag:'(0019,"GEMS_ACQU_01",98)',vr:"SS",name:"CenterFrequencyMethod",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",99)':{tag:'(0019,"GEMS_ACQU_01",99)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",9b)':{tag:'(0019,"GEMS_ACQU_01",9b)',vr:"SS",name:"PulseSequenceMode",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",9c)':{tag:'(0019,"GEMS_ACQU_01",9c)',vr:"LO",name:"PulseSequenceName",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",9d)':{tag:'(0019,"GEMS_ACQU_01",9d)',vr:"DT",name:"PulseSequenceDate",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",9e)':{tag:'(0019,"GEMS_ACQU_01",9e)',vr:"LO",name:"InternalPulseSequenceName",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",9f)':{tag:'(0019,"GEMS_ACQU_01",9f)',vr:"SS",name:"TransmittingCoil",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",a0)':{tag:'(0019,"GEMS_ACQU_01",a0)',vr:"SS",name:"SurfaceCoilType",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",a1)':{tag:'(0019,"GEMS_ACQU_01",a1)',vr:"SS",name:"ExtremityCoilFlag",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",a2)':{tag:'(0019,"GEMS_ACQU_01",a2)',vr:"SL",name:"RawDataRunNumber",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",a3)':{tag:'(0019,"GEMS_ACQU_01",a3)',vr:"UL",name:"CalibratedFieldStrength",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",a4)':{tag:'(0019,"GEMS_ACQU_01",a4)',vr:"SS",name:"SATFatWaterBone",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",a5)':{tag:'(0019,"GEMS_ACQU_01",a5)',vr:"DS",name:"ReceiveBandwidth",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",a7)':{tag:'(0019,"GEMS_ACQU_01",a7)',vr:"DS",name:"UserData",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",a8)':{tag:'(0019,"GEMS_ACQU_01",a8)',vr:"DS",name:"UserData",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",a9)':{tag:'(0019,"GEMS_ACQU_01",a9)',vr:"DS",name:"UserData",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",aa)':{tag:'(0019,"GEMS_ACQU_01",aa)',vr:"DS",name:"UserData",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",ab)':{tag:'(0019,"GEMS_ACQU_01",ab)',vr:"DS",name:"UserData",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",ac)':{tag:'(0019,"GEMS_ACQU_01",ac)',vr:"DS",name:"UserData",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",ad)':{tag:'(0019,"GEMS_ACQU_01",ad)',vr:"DS",name:"UserData",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",ae)':{tag:'(0019,"GEMS_ACQU_01",ae)',vr:"DS",name:"UserData",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",af)':{tag:'(0019,"GEMS_ACQU_01",af)',vr:"DS",name:"UserData",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",b0)':{tag:'(0019,"GEMS_ACQU_01",b0)',vr:"DS",name:"UserData",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",b1)':{tag:'(0019,"GEMS_ACQU_01",b1)',vr:"DS",name:"UserData",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",b2)':{tag:'(0019,"GEMS_ACQU_01",b2)',vr:"DS",name:"UserData",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",b3)':{tag:'(0019,"GEMS_ACQU_01",b3)',vr:"DS",name:"UserData",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",b4)':{tag:'(0019,"GEMS_ACQU_01",b4)',vr:"DS",name:"UserData",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",b5)':{tag:'(0019,"GEMS_ACQU_01",b5)',vr:"DS",name:"UserData",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",b6)':{tag:'(0019,"GEMS_ACQU_01",b6)',vr:"DS",name:"UserData",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",b7)':{tag:'(0019,"GEMS_ACQU_01",b7)',vr:"DS",name:"UserData",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",b8)':{tag:'(0019,"GEMS_ACQU_01",b8)',vr:"DS",name:"UserData",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",b9)':{tag:'(0019,"GEMS_ACQU_01",b9)',vr:"DS",name:"UserData",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",ba)':{tag:'(0019,"GEMS_ACQU_01",ba)',vr:"DS",name:"UserData",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",bb)':{tag:'(0019,"GEMS_ACQU_01",bb)',vr:"DS",name:"UserData",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",bc)':{tag:'(0019,"GEMS_ACQU_01",bc)',vr:"DS",name:"UserData",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",bd)':{tag:'(0019,"GEMS_ACQU_01",bd)',vr:"DS",name:"UserData",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",be)':{tag:'(0019,"GEMS_ACQU_01",be)',vr:"DS",name:"ProjectionAngle",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",c0)':{tag:'(0019,"GEMS_ACQU_01",c0)',vr:"SS",name:"SaturationPlanes",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",c1)':{tag:'(0019,"GEMS_ACQU_01",c1)',vr:"SS",name:"SurfaceCoilIntensityCorrectionFlag",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",c2)':{tag:'(0019,"GEMS_ACQU_01",c2)',vr:"SS",name:"SATLocationR",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",c3)':{tag:'(0019,"GEMS_ACQU_01",c3)',vr:"SS",name:"SATLocationL",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",c4)':{tag:'(0019,"GEMS_ACQU_01",c4)',vr:"SS",name:"SATLocationA",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",c5)':{tag:'(0019,"GEMS_ACQU_01",c5)',vr:"SS",name:"SATLocationP",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",c6)':{tag:'(0019,"GEMS_ACQU_01",c6)',vr:"SS",name:"SATLocationH",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",c7)':{tag:'(0019,"GEMS_ACQU_01",c7)',vr:"SS",name:"SATLocationF",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",c8)':{tag:'(0019,"GEMS_ACQU_01",c8)',vr:"SS",name:"SATThicknessRL",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",c9)':{tag:'(0019,"GEMS_ACQU_01",c9)',vr:"SS",name:"SATThicknessAP",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",ca)':{tag:'(0019,"GEMS_ACQU_01",ca)',vr:"SS",name:"SATThicknessHF",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",cb)':{tag:'(0019,"GEMS_ACQU_01",cb)',vr:"SS",name:"PrescribedFlowAxis",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",cc)':{tag:'(0019,"GEMS_ACQU_01",cc)',vr:"SS",name:"VelocityEncoding",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",cd)':{tag:'(0019,"GEMS_ACQU_01",cd)',vr:"SS",name:"ThicknessDisclaimer",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",ce)':{tag:'(0019,"GEMS_ACQU_01",ce)',vr:"SS",name:"PrescanType",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",cf)':{tag:'(0019,"GEMS_ACQU_01",cf)',vr:"SS",name:"PrescanStatus",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",d0)':{tag:'(0019,"GEMS_ACQU_01",d0)',vr:"SH",name:"RawDataType",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",d2)':{tag:'(0019,"GEMS_ACQU_01",d2)',vr:"SS",name:"ProjectionAlgorithm",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",d3)':{tag:'(0019,"GEMS_ACQU_01",d3)',vr:"SH",name:"ProjectionAlgorithm",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",d4)':{tag:'(0019,"GEMS_ACQU_01",d4)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",d5)':{tag:'(0019,"GEMS_ACQU_01",d5)',vr:"SS",name:"FractionalEcho",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",d6)':{tag:'(0019,"GEMS_ACQU_01",d6)',vr:"SS",name:"PrepPulse",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",d7)':{tag:'(0019,"GEMS_ACQU_01",d7)',vr:"SS",name:"CardiacPhases",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",d8)':{tag:'(0019,"GEMS_ACQU_01",d8)',vr:"SS",name:"VariableEchoFlag",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",d9)':{tag:'(0019,"GEMS_ACQU_01",d9)',vr:"DS",name:"ConcatenatedSAT",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",da)':{tag:'(0019,"GEMS_ACQU_01",da)',vr:"SS",name:"ReferenceChannelUsed",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",db)':{tag:'(0019,"GEMS_ACQU_01",db)',vr:"DS",name:"BackProjectorCoefficient",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",dc)':{tag:'(0019,"GEMS_ACQU_01",dc)',vr:"SS",name:"PrimarySpeedCorrectionUsed",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",dd)':{tag:'(0019,"GEMS_ACQU_01",dd)',vr:"SS",name:"OverrangeCorrectionUsed",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",de)':{tag:'(0019,"GEMS_ACQU_01",de)',vr:"DS",name:"DynamicZAlphaValue",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",df)':{tag:'(0019,"GEMS_ACQU_01",df)',vr:"DS",name:"UserData",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",e0)':{tag:'(0019,"GEMS_ACQU_01",e0)',vr:"DS",name:"UserData",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",e1)':{tag:'(0019,"GEMS_ACQU_01",e1)',vr:"DS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",e2)':{tag:'(0019,"GEMS_ACQU_01",e2)',vr:"DS",name:"VelocityEncodeScale",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",e3)':{tag:'(0019,"GEMS_ACQU_01",e3)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",e4)':{tag:'(0019,"GEMS_ACQU_01",e4)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",e5)':{tag:'(0019,"GEMS_ACQU_01",e5)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",e6)':{tag:'(0019,"GEMS_ACQU_01",e6)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",e8)':{tag:'(0019,"GEMS_ACQU_01",e8)',vr:"DS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",e9)':{tag:'(0019,"GEMS_ACQU_01",e9)',vr:"DS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",eb)':{tag:'(0019,"GEMS_ACQU_01",eb)',vr:"DS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",ec)':{tag:'(0019,"GEMS_ACQU_01",ec)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",f0)':{tag:'(0019,"GEMS_ACQU_01",f0)',vr:"UN",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",f1)':{tag:'(0019,"GEMS_ACQU_01",f1)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",f2)':{tag:'(0019,"GEMS_ACQU_01",f2)',vr:"SS",name:"FastPhases",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",f3)':{tag:'(0019,"GEMS_ACQU_01",f3)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",f4)':{tag:'(0019,"GEMS_ACQU_01",f4)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"GEMS_ACQU_01",f9)':{tag:'(0019,"GEMS_ACQU_01",f9)',vr:"DS",name:"TransmitGain",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_1.0 BLOCK1",00)':{tag:'(0023,"GEMS_ACRQA_1.0 BLOCK1",00)',vr:"LO",name:"CRExposureMenuCode",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_1.0 BLOCK1",10)':{tag:'(0023,"GEMS_ACRQA_1.0 BLOCK1",10)',vr:"LO",name:"CRExposureMenuString",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_1.0 BLOCK1",20)':{tag:'(0023,"GEMS_ACRQA_1.0 BLOCK1",20)',vr:"LO",name:"CREDRMode",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_1.0 BLOCK1",30)':{tag:'(0023,"GEMS_ACRQA_1.0 BLOCK1",30)',vr:"LO",name:"CRLatitude",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_1.0 BLOCK1",40)':{tag:'(0023,"GEMS_ACRQA_1.0 BLOCK1",40)',vr:"LO",name:"CRGroupNumber",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_1.0 BLOCK1",50)':{tag:'(0023,"GEMS_ACRQA_1.0 BLOCK1",50)',vr:"US",name:"CRImageSerialNumber",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_1.0 BLOCK1",60)':{tag:'(0023,"GEMS_ACRQA_1.0 BLOCK1",60)',vr:"LO",name:"CRBarCodeNumber",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_1.0 BLOCK1",70)':{tag:'(0023,"GEMS_ACRQA_1.0 BLOCK1",70)',vr:"LO",name:"CRFilmOutputExposure",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_1.0 BLOCK1",80)':{tag:'(0023,"GEMS_ACRQA_1.0 BLOCK1",80)',vr:"LO",name:"CRFilmFormat",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_1.0 BLOCK1",90)':{tag:'(0023,"GEMS_ACRQA_1.0 BLOCK1",90)',vr:"LO",name:"CRSShiftString",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_1.0 BLOCK2",00)':{tag:'(0023,"GEMS_ACRQA_1.0 BLOCK2",00)',vr:"US",name:"CRSShift",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_1.0 BLOCK2",10)':{tag:'(0023,"GEMS_ACRQA_1.0 BLOCK2",10)',vr:"DS",name:"CRCShift",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_1.0 BLOCK2",20)':{tag:'(0023,"GEMS_ACRQA_1.0 BLOCK2",20)',vr:"DS",name:"CRGT",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_1.0 BLOCK2",30)':{tag:'(0023,"GEMS_ACRQA_1.0 BLOCK2",30)',vr:"DS",name:"CRGA",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_1.0 BLOCK2",40)':{tag:'(0023,"GEMS_ACRQA_1.0 BLOCK2",40)',vr:"DS",name:"CRGC",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_1.0 BLOCK2",50)':{tag:'(0023,"GEMS_ACRQA_1.0 BLOCK2",50)',vr:"DS",name:"CRGS",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_1.0 BLOCK2",60)':{tag:'(0023,"GEMS_ACRQA_1.0 BLOCK2",60)',vr:"DS",name:"CRRT",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_1.0 BLOCK2",70)':{tag:'(0023,"GEMS_ACRQA_1.0 BLOCK2",70)',vr:"DS",name:"CRRE",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_1.0 BLOCK2",80)':{tag:'(0023,"GEMS_ACRQA_1.0 BLOCK2",80)',vr:"US",name:"CRRN",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_1.0 BLOCK2",90)':{tag:'(0023,"GEMS_ACRQA_1.0 BLOCK2",90)',vr:"DS",name:"CRDRT",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_1.0 BLOCK3",00)':{tag:'(0023,"GEMS_ACRQA_1.0 BLOCK3",00)',vr:"DS",name:"CRDRE",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_1.0 BLOCK3",10)':{tag:'(0023,"GEMS_ACRQA_1.0 BLOCK3",10)',vr:"US",name:"CRDRN",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_1.0 BLOCK3",20)':{tag:'(0023,"GEMS_ACRQA_1.0 BLOCK3",20)',vr:"DS",name:"CRORE",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_1.0 BLOCK3",30)':{tag:'(0023,"GEMS_ACRQA_1.0 BLOCK3",30)',vr:"US",name:"CRORN",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_1.0 BLOCK3",40)':{tag:'(0023,"GEMS_ACRQA_1.0 BLOCK3",40)',vr:"US",name:"CRORD",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_1.0 BLOCK3",50)':{tag:'(0023,"GEMS_ACRQA_1.0 BLOCK3",50)',vr:"LO",name:"CRCassetteSize",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_1.0 BLOCK3",60)':{tag:'(0023,"GEMS_ACRQA_1.0 BLOCK3",60)',vr:"LO",name:"CRMachineID",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_1.0 BLOCK3",70)':{tag:'(0023,"GEMS_ACRQA_1.0 BLOCK3",70)',vr:"LO",name:"CRMachineType",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_1.0 BLOCK3",80)':{tag:'(0023,"GEMS_ACRQA_1.0 BLOCK3",80)',vr:"LO",name:"CRTechnicianCode",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_1.0 BLOCK3",90)':{tag:'(0023,"GEMS_ACRQA_1.0 BLOCK3",90)',vr:"LO",name:"CREnergySubtractionParameters",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_2.0 BLOCK1",00)':{tag:'(0023,"GEMS_ACRQA_2.0 BLOCK1",00)',vr:"LO",name:"CRExposureMenuCode",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_2.0 BLOCK1",10)':{tag:'(0023,"GEMS_ACRQA_2.0 BLOCK1",10)',vr:"LO",name:"CRExposureMenuString",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_2.0 BLOCK1",20)':{tag:'(0023,"GEMS_ACRQA_2.0 BLOCK1",20)',vr:"LO",name:"CREDRMode",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_2.0 BLOCK1",30)':{tag:'(0023,"GEMS_ACRQA_2.0 BLOCK1",30)',vr:"LO",name:"CRLatitude",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_2.0 BLOCK1",40)':{tag:'(0023,"GEMS_ACRQA_2.0 BLOCK1",40)',vr:"LO",name:"CRGroupNumber",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_2.0 BLOCK1",50)':{tag:'(0023,"GEMS_ACRQA_2.0 BLOCK1",50)',vr:"US",name:"CRImageSerialNumber",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_2.0 BLOCK1",60)':{tag:'(0023,"GEMS_ACRQA_2.0 BLOCK1",60)',vr:"LO",name:"CRBarCodeNumber",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_2.0 BLOCK1",70)':{tag:'(0023,"GEMS_ACRQA_2.0 BLOCK1",70)',vr:"LO",name:"CRFilmOutputExposure",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_2.0 BLOCK1",80)':{tag:'(0023,"GEMS_ACRQA_2.0 BLOCK1",80)',vr:"LO",name:"CRFilmFormat",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_2.0 BLOCK1",90)':{tag:'(0023,"GEMS_ACRQA_2.0 BLOCK1",90)',vr:"LO",name:"CRSShiftString",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_2.0 BLOCK2",00)':{tag:'(0023,"GEMS_ACRQA_2.0 BLOCK2",00)',vr:"US",name:"CRSShift",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_2.0 BLOCK2",10)':{tag:'(0023,"GEMS_ACRQA_2.0 BLOCK2",10)',vr:"LO",name:"CRCShift",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_2.0 BLOCK2",20)':{tag:'(0023,"GEMS_ACRQA_2.0 BLOCK2",20)',vr:"LO",name:"CRGT",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_2.0 BLOCK2",30)':{tag:'(0023,"GEMS_ACRQA_2.0 BLOCK2",30)',vr:"DS",name:"CRGA",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_2.0 BLOCK2",40)':{tag:'(0023,"GEMS_ACRQA_2.0 BLOCK2",40)',vr:"DS",name:"CRGC",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_2.0 BLOCK2",50)':{tag:'(0023,"GEMS_ACRQA_2.0 BLOCK2",50)',vr:"DS",name:"CRGS",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_2.0 BLOCK2",60)':{tag:'(0023,"GEMS_ACRQA_2.0 BLOCK2",60)',vr:"LO",name:"CRRT",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_2.0 BLOCK2",70)':{tag:'(0023,"GEMS_ACRQA_2.0 BLOCK2",70)',vr:"DS",name:"CRRE",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_2.0 BLOCK2",80)':{tag:'(0023,"GEMS_ACRQA_2.0 BLOCK2",80)',vr:"US",name:"CRRN",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_2.0 BLOCK2",90)':{tag:'(0023,"GEMS_ACRQA_2.0 BLOCK2",90)',vr:"DS",name:"CRDRT",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_2.0 BLOCK3",00)':{tag:'(0023,"GEMS_ACRQA_2.0 BLOCK3",00)',vr:"DS",name:"CRDRE",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_2.0 BLOCK3",10)':{tag:'(0023,"GEMS_ACRQA_2.0 BLOCK3",10)',vr:"US",name:"CRDRN",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_2.0 BLOCK3",20)':{tag:'(0023,"GEMS_ACRQA_2.0 BLOCK3",20)',vr:"DS",name:"CRORE",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_2.0 BLOCK3",30)':{tag:'(0023,"GEMS_ACRQA_2.0 BLOCK3",30)',vr:"US",name:"CRORN",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_2.0 BLOCK3",40)':{tag:'(0023,"GEMS_ACRQA_2.0 BLOCK3",40)',vr:"US",name:"CRORD",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_2.0 BLOCK3",50)':{tag:'(0023,"GEMS_ACRQA_2.0 BLOCK3",50)',vr:"LO",name:"CRCassetteSize",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_2.0 BLOCK3",60)':{tag:'(0023,"GEMS_ACRQA_2.0 BLOCK3",60)',vr:"LO",name:"CRMachineID",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_2.0 BLOCK3",70)':{tag:'(0023,"GEMS_ACRQA_2.0 BLOCK3",70)',vr:"LO",name:"CRMachineType",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_2.0 BLOCK3",80)':{tag:'(0023,"GEMS_ACRQA_2.0 BLOCK3",80)',vr:"LO",name:"CRTechnicianCode",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_2.0 BLOCK3",90)':{tag:'(0023,"GEMS_ACRQA_2.0 BLOCK3",90)',vr:"LO",name:"CREnergySubtractionParameters",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_2.0 BLOCK3",f0)':{tag:'(0023,"GEMS_ACRQA_2.0 BLOCK3",f0)',vr:"LO",name:"CRDistributionCode",vm:"1",version:"PrivateTag"},'(0023,"GEMS_ACRQA_2.0 BLOCK3",ff)':{tag:'(0023,"GEMS_ACRQA_2.0 BLOCK3",ff)',vr:"US",name:"CRShuttersApplied",vm:"1",version:"PrivateTag"},'(0047,"GEMS_ADWSoft_3D1",01)':{tag:'(0047,"GEMS_ADWSoft_3D1",01)',vr:"SQ",name:"Reconstruction Parameters Sequence",vm:"1",version:"PrivateTag"},'(0047,"GEMS_ADWSoft_3D1",50)':{tag:'(0047,"GEMS_ADWSoft_3D1",50)',vr:"UL",name:"VolumeVoxelCount",vm:"1",version:"PrivateTag"},'(0047,"GEMS_ADWSoft_3D1",51)':{tag:'(0047,"GEMS_ADWSoft_3D1",51)',vr:"UL",name:"VolumeSegmentCount",vm:"1",version:"PrivateTag"},'(0047,"GEMS_ADWSoft_3D1",53)':{tag:'(0047,"GEMS_ADWSoft_3D1",53)',vr:"US",name:"VolumeSliceSize",vm:"1",version:"PrivateTag"},'(0047,"GEMS_ADWSoft_3D1",54)':{tag:'(0047,"GEMS_ADWSoft_3D1",54)',vr:"US",name:"VolumeSliceCount",vm:"1",version:"PrivateTag"},'(0047,"GEMS_ADWSoft_3D1",55)':{tag:'(0047,"GEMS_ADWSoft_3D1",55)',vr:"SL",name:"VolumeThresholdValue",vm:"1",version:"PrivateTag"},'(0047,"GEMS_ADWSoft_3D1",57)':{tag:'(0047,"GEMS_ADWSoft_3D1",57)',vr:"DS",name:"VolumeVoxelRatio",vm:"1",version:"PrivateTag"},'(0047,"GEMS_ADWSoft_3D1",58)':{tag:'(0047,"GEMS_ADWSoft_3D1",58)',vr:"DS",name:"VolumeVoxelSize",vm:"1",version:"PrivateTag"},'(0047,"GEMS_ADWSoft_3D1",59)':{tag:'(0047,"GEMS_ADWSoft_3D1",59)',vr:"US",name:"VolumeZPositionSize",vm:"1",version:"PrivateTag"},'(0047,"GEMS_ADWSoft_3D1",60)':{tag:'(0047,"GEMS_ADWSoft_3D1",60)',vr:"DS",name:"VolumeBaseLine",vm:"9",version:"PrivateTag"},'(0047,"GEMS_ADWSoft_3D1",61)':{tag:'(0047,"GEMS_ADWSoft_3D1",61)',vr:"DS",name:"VolumeCenterPoint",vm:"3",version:"PrivateTag"},'(0047,"GEMS_ADWSoft_3D1",63)':{tag:'(0047,"GEMS_ADWSoft_3D1",63)',vr:"SL",name:"VolumeSkewBase",vm:"1",version:"PrivateTag"},'(0047,"GEMS_ADWSoft_3D1",64)':{tag:'(0047,"GEMS_ADWSoft_3D1",64)',vr:"DS",name:"VolumeRegistrationTransformRotationMatrix",vm:"9",version:"PrivateTag"},'(0047,"GEMS_ADWSoft_3D1",65)':{tag:'(0047,"GEMS_ADWSoft_3D1",65)',vr:"DS",name:"VolumeRegistrationTransformTranslationVector",vm:"3",version:"PrivateTag"},'(0047,"GEMS_ADWSoft_3D1",70)':{tag:'(0047,"GEMS_ADWSoft_3D1",70)',vr:"DS",name:"KVPList",vm:"1-n",version:"PrivateTag"},'(0047,"GEMS_ADWSoft_3D1",71)':{tag:'(0047,"GEMS_ADWSoft_3D1",71)',vr:"IS",name:"XRayTubeCurrentList",vm:"1-n",version:"PrivateTag"},'(0047,"GEMS_ADWSoft_3D1",72)':{tag:'(0047,"GEMS_ADWSoft_3D1",72)',vr:"IS",name:"ExposureList",vm:"1-n",version:"PrivateTag"},'(0047,"GEMS_ADWSoft_3D1",80)':{tag:'(0047,"GEMS_ADWSoft_3D1",80)',vr:"LO",name:"AcquisitionDLXIdentifier",vm:"1",version:"PrivateTag"},'(0047,"GEMS_ADWSoft_3D1",85)':{tag:'(0047,"GEMS_ADWSoft_3D1",85)',vr:"SQ",name:"AcquisitionDLX2DSeriesSequence",vm:"1",version:"PrivateTag"},'(0047,"GEMS_ADWSoft_3D1",89)':{tag:'(0047,"GEMS_ADWSoft_3D1",89)',vr:"DS",name:"ContrastAgentVolumeList",vm:"1-n",version:"PrivateTag"},'(0047,"GEMS_ADWSoft_3D1",8A)':{tag:'(0047,"GEMS_ADWSoft_3D1",8A)',vr:"US",name:"NumberOfInjections",vm:"1",version:"PrivateTag"},'(0047,"GEMS_ADWSoft_3D1",8B)':{tag:'(0047,"GEMS_ADWSoft_3D1",8B)',vr:"US",name:"FrameCount",vm:"1",version:"PrivateTag"},'(0047,"GEMS_ADWSoft_3D1",91)':{tag:'(0047,"GEMS_ADWSoft_3D1",91)',vr:"LO",name:"XA3DReconstructionAlgorithmName",vm:"1",version:"PrivateTag"},'(0047,"GEMS_ADWSoft_3D1",92)':{tag:'(0047,"GEMS_ADWSoft_3D1",92)',vr:"CS",name:"XA3DReconstructionAlgorithmVersion",vm:"1",version:"PrivateTag"},'(0047,"GEMS_ADWSoft_3D1",93)':{tag:'(0047,"GEMS_ADWSoft_3D1",93)',vr:"DA",name:"DLXCalibrationDate",vm:"1",version:"PrivateTag"},'(0047,"GEMS_ADWSoft_3D1",94)':{tag:'(0047,"GEMS_ADWSoft_3D1",94)',vr:"TM",name:"DLXCalibrationTime",vm:"1",version:"PrivateTag"},'(0047,"GEMS_ADWSoft_3D1",95)':{tag:'(0047,"GEMS_ADWSoft_3D1",95)',vr:"CS",name:"DLXCalibrationStatus",vm:"1",version:"PrivateTag"},'(0047,"GEMS_ADWSoft_3D1",96)':{tag:'(0047,"GEMS_ADWSoft_3D1",96)',vr:"IS",name:"UsedFrames",vm:"1-n",version:"PrivateTag"},'(0047,"GEMS_ADWSoft_3D1",98)':{tag:'(0047,"GEMS_ADWSoft_3D1",98)',vr:"US",name:"TransformCount",vm:"1",version:"PrivateTag"},'(0047,"GEMS_ADWSoft_3D1",99)':{tag:'(0047,"GEMS_ADWSoft_3D1",99)',vr:"SQ",name:"TransformSequence",vm:"1",version:"PrivateTag"},'(0047,"GEMS_ADWSoft_3D1",9A)':{tag:'(0047,"GEMS_ADWSoft_3D1",9A)',vr:"DS",name:"TransformRotationMatrix",vm:"9",version:"PrivateTag"},'(0047,"GEMS_ADWSoft_3D1",9B)':{tag:'(0047,"GEMS_ADWSoft_3D1",9B)',vr:"DS",name:"TransformTranslationVector",vm:"3",version:"PrivateTag"},'(0047,"GEMS_ADWSoft_3D1",9C)':{tag:'(0047,"GEMS_ADWSoft_3D1",9C)',vr:"LO",name:"TransformLabel",vm:"1",version:"PrivateTag"},'(0047,"GEMS_ADWSoft_3D1",B0)':{tag:'(0047,"GEMS_ADWSoft_3D1",B0)',vr:"SQ",name:"WireframeList",vm:"1",version:"PrivateTag"},'(0047,"GEMS_ADWSoft_3D1",B1)':{tag:'(0047,"GEMS_ADWSoft_3D1",B1)',vr:"US",name:"WireframeCount",vm:"1",version:"PrivateTag"},'(0047,"GEMS_ADWSoft_3D1",B2)':{tag:'(0047,"GEMS_ADWSoft_3D1",B2)',vr:"US",name:"LocationSystem",vm:"1",version:"PrivateTag"},'(0047,"GEMS_ADWSoft_3D1",B5)':{tag:'(0047,"GEMS_ADWSoft_3D1",B5)',vr:"LO",name:"WireframeName",vm:"1",version:"PrivateTag"},'(0047,"GEMS_ADWSoft_3D1",B6)':{tag:'(0047,"GEMS_ADWSoft_3D1",B6)',vr:"LO",name:"WireframeGroupName",vm:"1",version:"PrivateTag"},'(0047,"GEMS_ADWSoft_3D1",B7)':{tag:'(0047,"GEMS_ADWSoft_3D1",B7)',vr:"LO",name:"WireframeColor",vm:"1",version:"PrivateTag"},'(0047,"GEMS_ADWSoft_3D1",B8)':{tag:'(0047,"GEMS_ADWSoft_3D1",B8)',vr:"SL",name:"WireframeAttributes",vm:"1",version:"PrivateTag"},'(0047,"GEMS_ADWSoft_3D1",B9)':{tag:'(0047,"GEMS_ADWSoft_3D1",B9)',vr:"SL",name:"WireframePointCount",vm:"1",version:"PrivateTag"},'(0047,"GEMS_ADWSoft_3D1",BA)':{tag:'(0047,"GEMS_ADWSoft_3D1",BA)',vr:"SL",name:"WireframeTimestamp",vm:"1",version:"PrivateTag"},'(0047,"GEMS_ADWSoft_3D1",BB)':{tag:'(0047,"GEMS_ADWSoft_3D1",BB)',vr:"SQ",name:"WireframePointList",vm:"1",version:"PrivateTag"},'(0047,"GEMS_ADWSoft_3D1",BC)':{tag:'(0047,"GEMS_ADWSoft_3D1",BC)',vr:"DS",name:"WireframePointsCoordinates",vm:"3",version:"PrivateTag"},'(0047,"GEMS_ADWSoft_3D1",C0)':{tag:'(0047,"GEMS_ADWSoft_3D1",C0)',vr:"DS",name:"VolumeUpperLeftHighCornerRAS",vm:"3",version:"PrivateTag"},'(0047,"GEMS_ADWSoft_3D1",C1)':{tag:'(0047,"GEMS_ADWSoft_3D1",C1)',vr:"DS",name:"VolumeSliceToRASRotationMatrix",vm:"9",version:"PrivateTag"},'(0047,"GEMS_ADWSoft_3D1",C2)':{tag:'(0047,"GEMS_ADWSoft_3D1",C2)',vr:"DS",name:"VolumeUpperLeftHighCornerTLOC",vm:"1",version:"PrivateTag"},'(0047,"GEMS_ADWSoft_3D1",D1)':{tag:'(0047,"GEMS_ADWSoft_3D1",D1)',vr:"OB",name:"VolumeSegmentList",vm:"1",version:"PrivateTag"},'(0047,"GEMS_ADWSoft_3D1",D2)':{tag:'(0047,"GEMS_ADWSoft_3D1",D2)',vr:"OB",name:"VolumeGradientList",vm:"1",version:"PrivateTag"},'(0047,"GEMS_ADWSoft_3D1",D3)':{tag:'(0047,"GEMS_ADWSoft_3D1",D3)',vr:"OB",name:"VolumeDensityList",vm:"1",version:"PrivateTag"},'(0047,"GEMS_ADWSoft_3D1",D4)':{tag:'(0047,"GEMS_ADWSoft_3D1",D4)',vr:"OB",name:"VolumeZPositionList",vm:"1",version:"PrivateTag"},'(0047,"GEMS_ADWSoft_3D1",D5)':{tag:'(0047,"GEMS_ADWSoft_3D1",D5)',vr:"OB",name:"VolumeOriginalIndexList",vm:"1",version:"PrivateTag"},'(0039,"GEMS_ADWSoft_DPO",80)':{tag:'(0039,"GEMS_ADWSoft_DPO",80)',vr:"IS",name:"PrivateEntityNumber",vm:"1",version:"PrivateTag"},'(0039,"GEMS_ADWSoft_DPO",85)':{tag:'(0039,"GEMS_ADWSoft_DPO",85)',vr:"DA",name:"PrivateEntityDate",vm:"1",version:"PrivateTag"},'(0039,"GEMS_ADWSoft_DPO",90)':{tag:'(0039,"GEMS_ADWSoft_DPO",90)',vr:"TM",name:"PrivateEntityTime",vm:"1",version:"PrivateTag"},'(0039,"GEMS_ADWSoft_DPO",95)':{tag:'(0039,"GEMS_ADWSoft_DPO",95)',vr:"LO",name:"PrivateEntityLaunchCommand",vm:"1",version:"PrivateTag"},'(0039,"GEMS_ADWSoft_DPO",AA)':{tag:'(0039,"GEMS_ADWSoft_DPO",AA)',vr:"CS",name:"PrivateEntityType",vm:"1",version:"PrivateTag"},'(0033,"GEMS_CTHD_01",02)':{tag:'(0033,"GEMS_CTHD_01",02)',vr:"UN",name:"Unknown",vm:"1",version:"PrivateTag"},'(0037,"GEMS_DRS_1",10)':{tag:'(0037,"GEMS_DRS_1",10)',vr:"LO",name:"ReferringDepartment",vm:"1",version:"PrivateTag"},'(0037,"GEMS_DRS_1",20)':{tag:'(0037,"GEMS_DRS_1",20)',vr:"US",name:"ScreenNumber",vm:"1",version:"PrivateTag"},'(0037,"GEMS_DRS_1",40)':{tag:'(0037,"GEMS_DRS_1",40)',vr:"SH",name:"LeftOrientation",vm:"1",version:"PrivateTag"},'(0037,"GEMS_DRS_1",42)':{tag:'(0037,"GEMS_DRS_1",42)',vr:"SH",name:"RightOrientation",vm:"1",version:"PrivateTag"},'(0037,"GEMS_DRS_1",50)':{tag:'(0037,"GEMS_DRS_1",50)',vr:"CS",name:"Inversion",vm:"1",version:"PrivateTag"},'(0037,"GEMS_DRS_1",60)':{tag:'(0037,"GEMS_DRS_1",60)',vr:"US",name:"DSA",vm:"1",version:"PrivateTag"},'(0009,"GEMS_GENIE_1",10)':{tag:'(0009,"GEMS_GENIE_1",10)',vr:"LO",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"GEMS_GENIE_1",11)':{tag:'(0009,"GEMS_GENIE_1",11)',vr:"SL",name:"StudyFlags",vm:"1",version:"PrivateTag"},'(0009,"GEMS_GENIE_1",12)':{tag:'(0009,"GEMS_GENIE_1",12)',vr:"SL",name:"StudyType",vm:"1",version:"PrivateTag"},'(0009,"GEMS_GENIE_1",1e)':{tag:'(0009,"GEMS_GENIE_1",1e)',vr:"UI",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"GEMS_GENIE_1",20)':{tag:'(0009,"GEMS_GENIE_1",20)',vr:"LO",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"GEMS_GENIE_1",21)':{tag:'(0009,"GEMS_GENIE_1",21)',vr:"SL",name:"SeriesFlags",vm:"1",version:"PrivateTag"},'(0009,"GEMS_GENIE_1",22)':{tag:'(0009,"GEMS_GENIE_1",22)',vr:"SH",name:"UserOrientation",vm:"1",version:"PrivateTag"},'(0009,"GEMS_GENIE_1",23)':{tag:'(0009,"GEMS_GENIE_1",23)',vr:"SL",name:"InitiationType",vm:"1",version:"PrivateTag"},'(0009,"GEMS_GENIE_1",24)':{tag:'(0009,"GEMS_GENIE_1",24)',vr:"SL",name:"InitiationDelay",vm:"1",version:"PrivateTag"},'(0009,"GEMS_GENIE_1",25)':{tag:'(0009,"GEMS_GENIE_1",25)',vr:"SL",name:"InitiationCountRate",vm:"1",version:"PrivateTag"},'(0009,"GEMS_GENIE_1",26)':{tag:'(0009,"GEMS_GENIE_1",26)',vr:"SL",name:"NumberEnergySets",vm:"1",version:"PrivateTag"},'(0009,"GEMS_GENIE_1",27)':{tag:'(0009,"GEMS_GENIE_1",27)',vr:"SL",name:"NumberDetectors",vm:"1",version:"PrivateTag"},'(0009,"GEMS_GENIE_1",29)':{tag:'(0009,"GEMS_GENIE_1",29)',vr:"SL",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"GEMS_GENIE_1",2a)':{tag:'(0009,"GEMS_GENIE_1",2a)',vr:"SL",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"GEMS_GENIE_1",2c)':{tag:'(0009,"GEMS_GENIE_1",2c)',vr:"LO",name:"SeriesComments",vm:"1",version:"PrivateTag"},'(0009,"GEMS_GENIE_1",2d)':{tag:'(0009,"GEMS_GENIE_1",2d)',vr:"SL",name:"TrackBeatAverage",vm:"1",version:"PrivateTag"},'(0009,"GEMS_GENIE_1",2e)':{tag:'(0009,"GEMS_GENIE_1",2e)',vr:"FD",name:"DistancePrescribed",vm:"1",version:"PrivateTag"},'(0009,"GEMS_GENIE_1",30)':{tag:'(0009,"GEMS_GENIE_1",30)',vr:"LO",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"GEMS_GENIE_1",35)':{tag:'(0009,"GEMS_GENIE_1",35)',vr:"SL",name:"GantryLocusType",vm:"1",version:"PrivateTag"},'(0009,"GEMS_GENIE_1",37)':{tag:'(0009,"GEMS_GENIE_1",37)',vr:"SL",name:"StartingHeartRate",vm:"1",version:"PrivateTag"},'(0009,"GEMS_GENIE_1",38)':{tag:'(0009,"GEMS_GENIE_1",38)',vr:"SL",name:"RRWindowWidth",vm:"1",version:"PrivateTag"},'(0009,"GEMS_GENIE_1",39)':{tag:'(0009,"GEMS_GENIE_1",39)',vr:"SL",name:"RRWindowOffset",vm:"1",version:"PrivateTag"},'(0009,"GEMS_GENIE_1",3a)':{tag:'(0009,"GEMS_GENIE_1",3a)',vr:"SL",name:"PercentCycleImaged",vm:"1",version:"PrivateTag"},'(0009,"GEMS_GENIE_1",40)':{tag:'(0009,"GEMS_GENIE_1",40)',vr:"LO",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"GEMS_GENIE_1",41)':{tag:'(0009,"GEMS_GENIE_1",41)',vr:"SL",name:"PatientFlags",vm:"1",version:"PrivateTag"},'(0009,"GEMS_GENIE_1",42)':{tag:'(0009,"GEMS_GENIE_1",42)',vr:"DA",name:"PatientCreationDate",vm:"1",version:"PrivateTag"},'(0009,"GEMS_GENIE_1",43)':{tag:'(0009,"GEMS_GENIE_1",43)',vr:"TM",name:"PatientCreationTime",vm:"1",version:"PrivateTag"},'(0011,"GEMS_GENIE_1",0a)':{tag:'(0011,"GEMS_GENIE_1",0a)',vr:"SL",name:"SeriesType",vm:"1",version:"PrivateTag"},'(0011,"GEMS_GENIE_1",0b)':{tag:'(0011,"GEMS_GENIE_1",0b)',vr:"SL",name:"EffectiveSeriesDuration",vm:"1",version:"PrivateTag"},'(0011,"GEMS_GENIE_1",0c)':{tag:'(0011,"GEMS_GENIE_1",0c)',vr:"SL",name:"NumBeats",vm:"1",version:"PrivateTag"},'(0011,"GEMS_GENIE_1",0d)':{tag:'(0011,"GEMS_GENIE_1",0d)',vr:"LO",name:"RadioNuclideName",vm:"1",version:"PrivateTag"},'(0011,"GEMS_GENIE_1",10)':{tag:'(0011,"GEMS_GENIE_1",10)',vr:"LO",name:"Unknown",vm:"1",version:"PrivateTag"},'(0011,"GEMS_GENIE_1",12)':{tag:'(0011,"GEMS_GENIE_1",12)',vr:"LO",name:"DatasetName",vm:"1",version:"PrivateTag"},'(0011,"GEMS_GENIE_1",13)':{tag:'(0011,"GEMS_GENIE_1",13)',vr:"SL",name:"DatasetType",vm:"1",version:"PrivateTag"},'(0011,"GEMS_GENIE_1",15)':{tag:'(0011,"GEMS_GENIE_1",15)',vr:"SL",name:"DetectorNumber",vm:"1",version:"PrivateTag"},'(0011,"GEMS_GENIE_1",16)':{tag:'(0011,"GEMS_GENIE_1",16)',vr:"SL",name:"EnergyNumber",vm:"1",version:"PrivateTag"},'(0011,"GEMS_GENIE_1",17)':{tag:'(0011,"GEMS_GENIE_1",17)',vr:"SL",name:"RRIntervalWindowNumber",vm:"1",version:"PrivateTag"},'(0011,"GEMS_GENIE_1",18)':{tag:'(0011,"GEMS_GENIE_1",18)',vr:"SL",name:"MGBinNumber",vm:"1",version:"PrivateTag"},'(0011,"GEMS_GENIE_1",19)':{tag:'(0011,"GEMS_GENIE_1",19)',vr:"FD",name:"RadiusOfRotation",vm:"1",version:"PrivateTag"},'(0011,"GEMS_GENIE_1",1a)':{tag:'(0011,"GEMS_GENIE_1",1a)',vr:"SL",name:"DetectorCountZone",vm:"1",version:"PrivateTag"},'(0011,"GEMS_GENIE_1",1b)':{tag:'(0011,"GEMS_GENIE_1",1b)',vr:"SL",name:"NumEnergyWindows",vm:"1",version:"PrivateTag"},'(0011,"GEMS_GENIE_1",1c)':{tag:'(0011,"GEMS_GENIE_1",1c)',vr:"SL",name:"EnergyOffset",vm:"4",version:"PrivateTag"},'(0011,"GEMS_GENIE_1",1d)':{tag:'(0011,"GEMS_GENIE_1",1d)',vr:"SL",name:"EnergyRange",vm:"1",version:"PrivateTag"},'(0011,"GEMS_GENIE_1",1f)':{tag:'(0011,"GEMS_GENIE_1",1f)',vr:"SL",name:"ImageOrientation",vm:"1",version:"PrivateTag"},'(0011,"GEMS_GENIE_1",23)':{tag:'(0011,"GEMS_GENIE_1",23)',vr:"SL",name:"UseFOVMask",vm:"1",version:"PrivateTag"},'(0011,"GEMS_GENIE_1",24)':{tag:'(0011,"GEMS_GENIE_1",24)',vr:"SL",name:"FOVMaskYCutoffAngle",vm:"1",version:"PrivateTag"},'(0011,"GEMS_GENIE_1",25)':{tag:'(0011,"GEMS_GENIE_1",25)',vr:"SL",name:"FOVMaskCutoffAngle",vm:"1",version:"PrivateTag"},'(0011,"GEMS_GENIE_1",26)':{tag:'(0011,"GEMS_GENIE_1",26)',vr:"SL",name:"TableOrientation",vm:"1",version:"PrivateTag"},'(0011,"GEMS_GENIE_1",27)':{tag:'(0011,"GEMS_GENIE_1",27)',vr:"SL",name:"ROITopLeft",vm:"2",version:"PrivateTag"},'(0011,"GEMS_GENIE_1",28)':{tag:'(0011,"GEMS_GENIE_1",28)',vr:"SL",name:"ROIBottomRight",vm:"2",version:"PrivateTag"},'(0011,"GEMS_GENIE_1",30)':{tag:'(0011,"GEMS_GENIE_1",30)',vr:"LO",name:"Unknown",vm:"1",version:"PrivateTag"},'(0011,"GEMS_GENIE_1",33)':{tag:'(0011,"GEMS_GENIE_1",33)',vr:"LO",name:"EnergyCorrectName",vm:"1",version:"PrivateTag"},'(0011,"GEMS_GENIE_1",34)':{tag:'(0011,"GEMS_GENIE_1",34)',vr:"LO",name:"SpatialCorrectName",vm:"1",version:"PrivateTag"},'(0011,"GEMS_GENIE_1",35)':{tag:'(0011,"GEMS_GENIE_1",35)',vr:"LO",name:"TuningCalibName",vm:"1",version:"PrivateTag"},'(0011,"GEMS_GENIE_1",36)':{tag:'(0011,"GEMS_GENIE_1",36)',vr:"LO",name:"UniformityCorrectName",vm:"1",version:"PrivateTag"},'(0011,"GEMS_GENIE_1",37)':{tag:'(0011,"GEMS_GENIE_1",37)',vr:"LO",name:"AcquisitionSpecificCorrectName",vm:"1",version:"PrivateTag"},'(0011,"GEMS_GENIE_1",38)':{tag:'(0011,"GEMS_GENIE_1",38)',vr:"SL",name:"ByteOrder",vm:"1",version:"PrivateTag"},'(0011,"GEMS_GENIE_1",3a)':{tag:'(0011,"GEMS_GENIE_1",3a)',vr:"SL",name:"PictureFormat",vm:"1",version:"PrivateTag"},'(0011,"GEMS_GENIE_1",3b)':{tag:'(0011,"GEMS_GENIE_1",3b)',vr:"FD",name:"PixelScale",vm:"1",version:"PrivateTag"},'(0011,"GEMS_GENIE_1",3c)':{tag:'(0011,"GEMS_GENIE_1",3c)',vr:"FD",name:"PixelOffset",vm:"1",version:"PrivateTag"},'(0011,"GEMS_GENIE_1",3e)':{tag:'(0011,"GEMS_GENIE_1",3e)',vr:"SL",name:"FOVShape",vm:"1",version:"PrivateTag"},'(0011,"GEMS_GENIE_1",3f)':{tag:'(0011,"GEMS_GENIE_1",3f)',vr:"SL",name:"DatasetFlags",vm:"1",version:"PrivateTag"},'(0011,"GEMS_GENIE_1",44)':{tag:'(0011,"GEMS_GENIE_1",44)',vr:"FD",name:"ThresholdCenter",vm:"1",version:"PrivateTag"},'(0011,"GEMS_GENIE_1",45)':{tag:'(0011,"GEMS_GENIE_1",45)',vr:"FD",name:"ThresholdWidth",vm:"1",version:"PrivateTag"},'(0011,"GEMS_GENIE_1",46)':{tag:'(0011,"GEMS_GENIE_1",46)',vr:"SL",name:"InterpolationType",vm:"1",version:"PrivateTag"},'(0011,"GEMS_GENIE_1",55)':{tag:'(0011,"GEMS_GENIE_1",55)',vr:"FD",name:"Period",vm:"1",version:"PrivateTag"},'(0011,"GEMS_GENIE_1",56)':{tag:'(0011,"GEMS_GENIE_1",56)',vr:"FD",name:"ElapsedTime",vm:"1",version:"PrivateTag"},'(0013,"GEMS_GENIE_1",10)':{tag:'(0013,"GEMS_GENIE_1",10)',vr:"FD",name:"DigitalFOV",vm:"2",version:"PrivateTag"},'(0013,"GEMS_GENIE_1",11)':{tag:'(0013,"GEMS_GENIE_1",11)',vr:"SL",name:"Unknown",vm:"1",version:"PrivateTag"},'(0013,"GEMS_GENIE_1",12)':{tag:'(0013,"GEMS_GENIE_1",12)',vr:"SL",name:"Unknown",vm:"1",version:"PrivateTag"},'(0013,"GEMS_GENIE_1",16)':{tag:'(0013,"GEMS_GENIE_1",16)',vr:"SL",name:"AutoTrackPeak",vm:"1",version:"PrivateTag"},'(0013,"GEMS_GENIE_1",17)':{tag:'(0013,"GEMS_GENIE_1",17)',vr:"SL",name:"AutoTrackWidth",vm:"1",version:"PrivateTag"},'(0013,"GEMS_GENIE_1",18)':{tag:'(0013,"GEMS_GENIE_1",18)',vr:"FD",name:"TransmissionScanTime",vm:"1",version:"PrivateTag"},'(0013,"GEMS_GENIE_1",19)':{tag:'(0013,"GEMS_GENIE_1",19)',vr:"FD",name:"TransmissionMaskWidth",vm:"1",version:"PrivateTag"},'(0013,"GEMS_GENIE_1",1a)':{tag:'(0013,"GEMS_GENIE_1",1a)',vr:"FD",name:"CopperAttenuatorThickness",vm:"1",version:"PrivateTag"},'(0013,"GEMS_GENIE_1",1c)':{tag:'(0013,"GEMS_GENIE_1",1c)',vr:"FD",name:"Unknown",vm:"1",version:"PrivateTag"},'(0013,"GEMS_GENIE_1",1d)':{tag:'(0013,"GEMS_GENIE_1",1d)',vr:"FD",name:"Unknown",vm:"1",version:"PrivateTag"},'(0013,"GEMS_GENIE_1",1e)':{tag:'(0013,"GEMS_GENIE_1",1e)',vr:"FD",name:"TomoViewOffset",vm:"1-n",version:"PrivateTag"},'(0013,"GEMS_GENIE_1",26)':{tag:'(0013,"GEMS_GENIE_1",26)',vr:"LT",name:"StudyComments",vm:"1",version:"PrivateTag"},'(0033,"GEMS_GNHD_01",01)':{tag:'(0033,"GEMS_GNHD_01",01)',vr:"UN",name:"Unknown",vm:"1",version:"PrivateTag"},'(0033,"GEMS_GNHD_01",02)':{tag:'(0033,"GEMS_GNHD_01",02)',vr:"UN",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"GEMS_IDEN_01",01)':{tag:'(0009,"GEMS_IDEN_01",01)',vr:"LO",name:"FullFidelity",vm:"1",version:"PrivateTag"},'(0009,"GEMS_IDEN_01",02)':{tag:'(0009,"GEMS_IDEN_01",02)',vr:"SH",name:"SuiteId",vm:"1",version:"PrivateTag"},'(0009,"GEMS_IDEN_01",04)':{tag:'(0009,"GEMS_IDEN_01",04)',vr:"SH",name:"ProductId",vm:"1",version:"PrivateTag"},'(0009,"GEMS_IDEN_01",17)':{tag:'(0009,"GEMS_IDEN_01",17)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"GEMS_IDEN_01",1a)':{tag:'(0009,"GEMS_IDEN_01",1a)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"GEMS_IDEN_01",20)':{tag:'(0009,"GEMS_IDEN_01",20)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"GEMS_IDEN_01",27)':{tag:'(0009,"GEMS_IDEN_01",27)',vr:"SL",name:"ImageActualDate",vm:"1",version:"PrivateTag"},'(0009,"GEMS_IDEN_01",2f)':{tag:'(0009,"GEMS_IDEN_01",2f)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"GEMS_IDEN_01",30)':{tag:'(0009,"GEMS_IDEN_01",30)',vr:"SH",name:"ServiceId",vm:"1",version:"PrivateTag"},'(0009,"GEMS_IDEN_01",31)':{tag:'(0009,"GEMS_IDEN_01",31)',vr:"SH",name:"MobileLocationNumber",vm:"1",version:"PrivateTag"},'(0009,"GEMS_IDEN_01",e2)':{tag:'(0009,"GEMS_IDEN_01",e2)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"GEMS_IDEN_01",e3)':{tag:'(0009,"GEMS_IDEN_01",e3)',vr:"UI",name:"EquipmentUID",vm:"1",version:"PrivateTag"},'(0009,"GEMS_IDEN_01",e6)':{tag:'(0009,"GEMS_IDEN_01",e6)',vr:"SH",name:"GenesisVersionNow",vm:"1",version:"PrivateTag"},'(0009,"GEMS_IDEN_01",e7)':{tag:'(0009,"GEMS_IDEN_01",e7)',vr:"UL",name:"ExamRecordChecksum",vm:"1",version:"PrivateTag"},'(0009,"GEMS_IDEN_01",e8)':{tag:'(0009,"GEMS_IDEN_01",e8)',vr:"UL",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"GEMS_IDEN_01",e9)':{tag:'(0009,"GEMS_IDEN_01",e9)',vr:"SL",name:"ActualSeriesDataTimeStamp",vm:"1",version:"PrivateTag"},'(0027,"GEMS_IMAG_01",06)':{tag:'(0027,"GEMS_IMAG_01",06)',vr:"SL",name:"ImageArchiveFlag",vm:"1",version:"PrivateTag"},'(0027,"GEMS_IMAG_01",10)':{tag:'(0027,"GEMS_IMAG_01",10)',vr:"SS",name:"ScoutType",vm:"1",version:"PrivateTag"},'(0027,"GEMS_IMAG_01",1c)':{tag:'(0027,"GEMS_IMAG_01",1c)',vr:"SL",name:"VmaMamp",vm:"1",version:"PrivateTag"},'(0027,"GEMS_IMAG_01",1d)':{tag:'(0027,"GEMS_IMAG_01",1d)',vr:"SS",name:"VmaPhase",vm:"1",version:"PrivateTag"},'(0027,"GEMS_IMAG_01",1e)':{tag:'(0027,"GEMS_IMAG_01",1e)',vr:"SL",name:"VmaMod",vm:"1",version:"PrivateTag"},'(0027,"GEMS_IMAG_01",1f)':{tag:'(0027,"GEMS_IMAG_01",1f)',vr:"SL",name:"VmaClip",vm:"1",version:"PrivateTag"},'(0027,"GEMS_IMAG_01",20)':{tag:'(0027,"GEMS_IMAG_01",20)',vr:"SS",name:"SmartScanOnOffFlag",vm:"1",version:"PrivateTag"},'(0027,"GEMS_IMAG_01",30)':{tag:'(0027,"GEMS_IMAG_01",30)',vr:"SH",name:"ForeignImageRevision",vm:"1",version:"PrivateTag"},'(0027,"GEMS_IMAG_01",31)':{tag:'(0027,"GEMS_IMAG_01",31)',vr:"SS",name:"ImagingMode",vm:"1",version:"PrivateTag"},'(0027,"GEMS_IMAG_01",32)':{tag:'(0027,"GEMS_IMAG_01",32)',vr:"SS",name:"PulseSequence",vm:"1",version:"PrivateTag"},'(0027,"GEMS_IMAG_01",33)':{tag:'(0027,"GEMS_IMAG_01",33)',vr:"SL",name:"ImagingOptions",vm:"1",version:"PrivateTag"},'(0027,"GEMS_IMAG_01",35)':{tag:'(0027,"GEMS_IMAG_01",35)',vr:"SS",name:"PlaneType",vm:"1",version:"PrivateTag"},'(0027,"GEMS_IMAG_01",36)':{tag:'(0027,"GEMS_IMAG_01",36)',vr:"SL",name:"ObliquePlane",vm:"1",version:"PrivateTag"},'(0027,"GEMS_IMAG_01",40)':{tag:'(0027,"GEMS_IMAG_01",40)',vr:"SH",name:"RASLetterOfImageLocation",vm:"1",version:"PrivateTag"},'(0027,"GEMS_IMAG_01",41)':{tag:'(0027,"GEMS_IMAG_01",41)',vr:"FL",name:"ImageLocation",vm:"1",version:"PrivateTag"},'(0027,"GEMS_IMAG_01",42)':{tag:'(0027,"GEMS_IMAG_01",42)',vr:"FL",name:"CenterRCoordOfPlaneImage",vm:"1",version:"PrivateTag"},'(0027,"GEMS_IMAG_01",43)':{tag:'(0027,"GEMS_IMAG_01",43)',vr:"FL",name:"CenterACoordOfPlaneImage",vm:"1",version:"PrivateTag"},'(0027,"GEMS_IMAG_01",44)':{tag:'(0027,"GEMS_IMAG_01",44)',vr:"FL",name:"CenterSCoordOfPlaneImage",vm:"1",version:"PrivateTag"},'(0027,"GEMS_IMAG_01",45)':{tag:'(0027,"GEMS_IMAG_01",45)',vr:"FL",name:"NormalRCoord",vm:"1",version:"PrivateTag"},'(0027,"GEMS_IMAG_01",46)':{tag:'(0027,"GEMS_IMAG_01",46)',vr:"FL",name:"NormalACoord",vm:"1",version:"PrivateTag"},'(0027,"GEMS_IMAG_01",47)':{tag:'(0027,"GEMS_IMAG_01",47)',vr:"FL",name:"NormalSCoord",vm:"1",version:"PrivateTag"},'(0027,"GEMS_IMAG_01",48)':{tag:'(0027,"GEMS_IMAG_01",48)',vr:"FL",name:"RCoordOfTopRightCorner",vm:"1",version:"PrivateTag"},'(0027,"GEMS_IMAG_01",49)':{tag:'(0027,"GEMS_IMAG_01",49)',vr:"FL",name:"ACoordOfTopRightCorner",vm:"1",version:"PrivateTag"},'(0027,"GEMS_IMAG_01",4a)':{tag:'(0027,"GEMS_IMAG_01",4a)',vr:"FL",name:"SCoordOfTopRightCorner",vm:"1",version:"PrivateTag"},'(0027,"GEMS_IMAG_01",4b)':{tag:'(0027,"GEMS_IMAG_01",4b)',vr:"FL",name:"RCoordOfBottomRightCorner",vm:"1",version:"PrivateTag"},'(0027,"GEMS_IMAG_01",4c)':{tag:'(0027,"GEMS_IMAG_01",4c)',vr:"FL",name:"ACoordOfBottomRightCorner",vm:"1",version:"PrivateTag"},'(0027,"GEMS_IMAG_01",4d)':{tag:'(0027,"GEMS_IMAG_01",4d)',vr:"FL",name:"SCoordOfBottomRightCorner",vm:"1",version:"PrivateTag"},'(0027,"GEMS_IMAG_01",50)':{tag:'(0027,"GEMS_IMAG_01",50)',vr:"FL",name:"TableStartLocation",vm:"1",version:"PrivateTag"},'(0027,"GEMS_IMAG_01",51)':{tag:'(0027,"GEMS_IMAG_01",51)',vr:"FL",name:"TableEndLocation",vm:"1",version:"PrivateTag"},'(0027,"GEMS_IMAG_01",52)':{tag:'(0027,"GEMS_IMAG_01",52)',vr:"SH",name:"RASLetterForSideOfImage",vm:"1",version:"PrivateTag"},'(0027,"GEMS_IMAG_01",53)':{tag:'(0027,"GEMS_IMAG_01",53)',vr:"SH",name:"RASLetterForAnteriorPosterior",vm:"1",version:"PrivateTag"},'(0027,"GEMS_IMAG_01",54)':{tag:'(0027,"GEMS_IMAG_01",54)',vr:"SH",name:"RASLetterForScoutStartLoc",vm:"1",version:"PrivateTag"},'(0027,"GEMS_IMAG_01",55)':{tag:'(0027,"GEMS_IMAG_01",55)',vr:"SH",name:"RASLetterForScoutEndLoc",vm:"1",version:"PrivateTag"},'(0027,"GEMS_IMAG_01",60)':{tag:'(0027,"GEMS_IMAG_01",60)',vr:"FL",name:"ImageDimensionX",vm:"1",version:"PrivateTag"},'(0027,"GEMS_IMAG_01",61)':{tag:'(0027,"GEMS_IMAG_01",61)',vr:"FL",name:"ImageDimensionY",vm:"1",version:"PrivateTag"},'(0027,"GEMS_IMAG_01",62)':{tag:'(0027,"GEMS_IMAG_01",62)',vr:"FL",name:"NumberOfExcitations",vm:"1",version:"PrivateTag"},'(0029,"GEMS_IMPS_01",04)':{tag:'(0029,"GEMS_IMPS_01",04)',vr:"SL",name:"LowerRangeOfPixels",vm:"1",version:"PrivateTag"},'(0029,"GEMS_IMPS_01",05)':{tag:'(0029,"GEMS_IMPS_01",05)',vr:"DS",name:"LowerRangeOfPixels",vm:"1",version:"PrivateTag"},'(0029,"GEMS_IMPS_01",06)':{tag:'(0029,"GEMS_IMPS_01",06)',vr:"DS",name:"LowerRangeOfPixels",vm:"1",version:"PrivateTag"},'(0029,"GEMS_IMPS_01",07)':{tag:'(0029,"GEMS_IMPS_01",07)',vr:"SL",name:"LowerRangeOfPixels",vm:"1",version:"PrivateTag"},'(0029,"GEMS_IMPS_01",08)':{tag:'(0029,"GEMS_IMPS_01",08)',vr:"SH",name:"LowerRangeOfPixels",vm:"1",version:"PrivateTag"},'(0029,"GEMS_IMPS_01",09)':{tag:'(0029,"GEMS_IMPS_01",09)',vr:"SH",name:"LowerRangeOfPixels",vm:"1",version:"PrivateTag"},'(0029,"GEMS_IMPS_01",0a)':{tag:'(0029,"GEMS_IMPS_01",0a)',vr:"SS",name:"LowerRangeOfPixels",vm:"1",version:"PrivateTag"},'(0029,"GEMS_IMPS_01",15)':{tag:'(0029,"GEMS_IMPS_01",15)',vr:"SL",name:"LowerRangeOfPixels",vm:"1",version:"PrivateTag"},'(0029,"GEMS_IMPS_01",16)':{tag:'(0029,"GEMS_IMPS_01",16)',vr:"SL",name:"LowerRangeOfPixels",vm:"1",version:"PrivateTag"},'(0029,"GEMS_IMPS_01",17)':{tag:'(0029,"GEMS_IMPS_01",17)',vr:"SL",name:"LowerRangeOfPixels",vm:"1",version:"PrivateTag"},'(0029,"GEMS_IMPS_01",18)':{tag:'(0029,"GEMS_IMPS_01",18)',vr:"SL",name:"UpperRangeOfPixels",vm:"1",version:"PrivateTag"},'(0029,"GEMS_IMPS_01",1a)':{tag:'(0029,"GEMS_IMPS_01",1a)',vr:"SL",name:"LengthOfTotalHeaderInBytes",vm:"1",version:"PrivateTag"},'(0029,"GEMS_IMPS_01",26)':{tag:'(0029,"GEMS_IMPS_01",26)',vr:"SS",name:"VersionOfHeaderStructure",vm:"1",version:"PrivateTag"},'(0029,"GEMS_IMPS_01",34)':{tag:'(0029,"GEMS_IMPS_01",34)',vr:"SL",name:"AdvantageCompOverflow",vm:"1",version:"PrivateTag"},'(0029,"GEMS_IMPS_01",35)':{tag:'(0029,"GEMS_IMPS_01",35)',vr:"SL",name:"AdvantageCompUnderflow",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",01)':{tag:'(0043,"GEMS_PARM_01",01)',vr:"SS",name:"BitmapOfPrescanOptions",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",02)':{tag:'(0043,"GEMS_PARM_01",02)',vr:"SS",name:"GradientOffsetInX",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",03)':{tag:'(0043,"GEMS_PARM_01",03)',vr:"SS",name:"GradientOffsetInY",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",04)':{tag:'(0043,"GEMS_PARM_01",04)',vr:"SS",name:"GradientOffsetInZ",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",05)':{tag:'(0043,"GEMS_PARM_01",05)',vr:"SS",name:"ImageIsOriginalOrUnoriginal",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",06)':{tag:'(0043,"GEMS_PARM_01",06)',vr:"SS",name:"NumberOfEPIShots",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",07)':{tag:'(0043,"GEMS_PARM_01",07)',vr:"SS",name:"ViewsPerSegment",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",08)':{tag:'(0043,"GEMS_PARM_01",08)',vr:"SS",name:"RespiratoryRateInBPM",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",09)':{tag:'(0043,"GEMS_PARM_01",09)',vr:"SS",name:"RespiratoryTriggerPoint",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",0a)':{tag:'(0043,"GEMS_PARM_01",0a)',vr:"SS",name:"TypeOfReceiverUsed",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",0b)':{tag:'(0043,"GEMS_PARM_01",0b)',vr:"DS",name:"PeakRateOfChangeOfGradientField",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",0c)':{tag:'(0043,"GEMS_PARM_01",0c)',vr:"DS",name:"LimitsInUnitsOfPercent",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",0d)':{tag:'(0043,"GEMS_PARM_01",0d)',vr:"DS",name:"PSDEstimatedLimit",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",0e)':{tag:'(0043,"GEMS_PARM_01",0e)',vr:"DS",name:"PSDEstimatedLimitInTeslaPerSecond",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",0f)':{tag:'(0043,"GEMS_PARM_01",0f)',vr:"DS",name:"SARAvgHead",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",10)':{tag:'(0043,"GEMS_PARM_01",10)',vr:"US",name:"WindowValue",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",11)':{tag:'(0043,"GEMS_PARM_01",11)',vr:"US",name:"TotalInputViews",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",12)':{tag:'(0043,"GEMS_PARM_01",12)',vr:"SS",name:"XrayChain",vm:"3",version:"PrivateTag"},'(0043,"GEMS_PARM_01",13)':{tag:'(0043,"GEMS_PARM_01",13)',vr:"SS",name:"ReconKernelParameters",vm:"5",version:"PrivateTag"},'(0043,"GEMS_PARM_01",14)':{tag:'(0043,"GEMS_PARM_01",14)',vr:"SS",name:"CalibrationParameters",vm:"3",version:"PrivateTag"},'(0043,"GEMS_PARM_01",15)':{tag:'(0043,"GEMS_PARM_01",15)',vr:"SS",name:"TotalOutputViews",vm:"3",version:"PrivateTag"},'(0043,"GEMS_PARM_01",16)':{tag:'(0043,"GEMS_PARM_01",16)',vr:"SS",name:"NumberOfOverranges",vm:"5",version:"PrivateTag"},'(0043,"GEMS_PARM_01",17)':{tag:'(0043,"GEMS_PARM_01",17)',vr:"DS",name:"IBHImageScaleFactors",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",18)':{tag:'(0043,"GEMS_PARM_01",18)',vr:"DS",name:"BBHCoefficients",vm:"3",version:"PrivateTag"},'(0043,"GEMS_PARM_01",19)':{tag:'(0043,"GEMS_PARM_01",19)',vr:"SS",name:"NumberOfBBHChainsToBlend",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",1a)':{tag:'(0043,"GEMS_PARM_01",1a)',vr:"SL",name:"StartingChannelNumber",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",1b)':{tag:'(0043,"GEMS_PARM_01",1b)',vr:"SS",name:"PPScanParameters",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",1c)':{tag:'(0043,"GEMS_PARM_01",1c)',vr:"SS",name:"GEImageIntegrity",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",1d)':{tag:'(0043,"GEMS_PARM_01",1d)',vr:"SS",name:"LevelValue",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",1e)':{tag:'(0043,"GEMS_PARM_01",1e)',vr:"DS",name:"DeltaStartTime",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",1f)':{tag:'(0043,"GEMS_PARM_01",1f)',vr:"SL",name:"MaxOverrangesInAView",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",20)':{tag:'(0043,"GEMS_PARM_01",20)',vr:"DS",name:"AvgOverrangesAllViews",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",21)':{tag:'(0043,"GEMS_PARM_01",21)',vr:"SS",name:"CorrectedAfterglowTerms",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",25)':{tag:'(0043,"GEMS_PARM_01",25)',vr:"SS",name:"ReferenceChannels",vm:"6",version:"PrivateTag"},'(0043,"GEMS_PARM_01",26)':{tag:'(0043,"GEMS_PARM_01",26)',vr:"US",name:"NoViewsRefChannelsBlocked",vm:"6",version:"PrivateTag"},'(0043,"GEMS_PARM_01",27)':{tag:'(0043,"GEMS_PARM_01",27)',vr:"SH",name:"ScanPitchRatio",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",28)':{tag:'(0043,"GEMS_PARM_01",28)',vr:"OB",name:"UniqueImageIdentifier",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",29)':{tag:'(0043,"GEMS_PARM_01",29)',vr:"OB",name:"HistogramTables",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",2a)':{tag:'(0043,"GEMS_PARM_01",2a)',vr:"OB",name:"UserDefinedData",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",2b)':{tag:'(0043,"GEMS_PARM_01",2b)',vr:"SS",name:"PrivateScanOptions",vm:"4",version:"PrivateTag"},'(0043,"GEMS_PARM_01",2c)':{tag:'(0043,"GEMS_PARM_01",2c)',vr:"SS",name:"EffectiveEchoSpacing",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",2d)':{tag:'(0043,"GEMS_PARM_01",2d)',vr:"SH",name:"StringSlopField1",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",2e)':{tag:'(0043,"GEMS_PARM_01",2e)',vr:"SH",name:"StringSlopField2",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",2f)':{tag:'(0043,"GEMS_PARM_01",2f)',vr:"SS",name:"RawDataType",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",30)':{tag:'(0043,"GEMS_PARM_01",30)',vr:"SS",name:"RawDataType",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",31)':{tag:'(0043,"GEMS_PARM_01",31)',vr:"DS",name:"RACoordOfTargetReconCentre",vm:"2",version:"PrivateTag"},'(0043,"GEMS_PARM_01",32)':{tag:'(0043,"GEMS_PARM_01",32)',vr:"SS",name:"RawDataType",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",33)':{tag:'(0043,"GEMS_PARM_01",33)',vr:"FL",name:"NegScanSpacing",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",34)':{tag:'(0043,"GEMS_PARM_01",34)',vr:"IS",name:"OffsetFrequency",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",35)':{tag:'(0043,"GEMS_PARM_01",35)',vr:"UL",name:"UserUsageTag",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",36)':{tag:'(0043,"GEMS_PARM_01",36)',vr:"UL",name:"UserFillMapMSW",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",37)':{tag:'(0043,"GEMS_PARM_01",37)',vr:"UL",name:"UserFillMapLSW",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",38)':{tag:'(0043,"GEMS_PARM_01",38)',vr:"FL",name:"User25ToUser48",vm:"24",version:"PrivateTag"},'(0043,"GEMS_PARM_01",39)':{tag:'(0043,"GEMS_PARM_01",39)',vr:"IS",name:"SlopInteger6ToSlopInteger9",vm:"4",version:"PrivateTag"},'(0043,"GEMS_PARM_01",40)':{tag:'(0043,"GEMS_PARM_01",40)',vr:"FL",name:"TriggerOnPosition",vm:"4",version:"PrivateTag"},'(0043,"GEMS_PARM_01",41)':{tag:'(0043,"GEMS_PARM_01",41)',vr:"FL",name:"DegreeOfRotation",vm:"4",version:"PrivateTag"},'(0043,"GEMS_PARM_01",42)':{tag:'(0043,"GEMS_PARM_01",42)',vr:"SL",name:"DASTriggerSource",vm:"4",version:"PrivateTag"},'(0043,"GEMS_PARM_01",43)':{tag:'(0043,"GEMS_PARM_01",43)',vr:"SL",name:"DASFpaGain",vm:"4",version:"PrivateTag"},'(0043,"GEMS_PARM_01",44)':{tag:'(0043,"GEMS_PARM_01",44)',vr:"SL",name:"DASOutputSource",vm:"4",version:"PrivateTag"},'(0043,"GEMS_PARM_01",45)':{tag:'(0043,"GEMS_PARM_01",45)',vr:"SL",name:"DASAdInput",vm:"4",version:"PrivateTag"},'(0043,"GEMS_PARM_01",46)':{tag:'(0043,"GEMS_PARM_01",46)',vr:"SL",name:"DASCalMode",vm:"4",version:"PrivateTag"},'(0043,"GEMS_PARM_01",47)':{tag:'(0043,"GEMS_PARM_01",47)',vr:"SL",name:"DASCalFrequency",vm:"4",version:"PrivateTag"},'(0043,"GEMS_PARM_01",48)':{tag:'(0043,"GEMS_PARM_01",48)',vr:"SL",name:"DASRegXm",vm:"4",version:"PrivateTag"},'(0043,"GEMS_PARM_01",49)':{tag:'(0043,"GEMS_PARM_01",49)',vr:"SL",name:"DASAutoZero",vm:"4",version:"PrivateTag"},'(0043,"GEMS_PARM_01",4a)':{tag:'(0043,"GEMS_PARM_01",4a)',vr:"SS",name:"StartingChannelOfView",vm:"4",version:"PrivateTag"},'(0043,"GEMS_PARM_01",4b)':{tag:'(0043,"GEMS_PARM_01",4b)',vr:"SL",name:"DASXmPattern",vm:"4",version:"PrivateTag"},'(0043,"GEMS_PARM_01",4c)':{tag:'(0043,"GEMS_PARM_01",4c)',vr:"SS",name:"TGGCTriggerMode",vm:"4",version:"PrivateTag"},'(0043,"GEMS_PARM_01",4d)':{tag:'(0043,"GEMS_PARM_01",4d)',vr:"FL",name:"StartScanToXrayOnDelay",vm:"4",version:"PrivateTag"},'(0043,"GEMS_PARM_01",4e)':{tag:'(0043,"GEMS_PARM_01",4e)',vr:"FL",name:"DurationOfXrayOn",vm:"4",version:"PrivateTag"},'(0043,"GEMS_PARM_01",60)':{tag:'(0043,"GEMS_PARM_01",60)',vr:"IS",name:"SlopInteger10ToSlopInteger17",vm:"8",version:"PrivateTag"},'(0043,"GEMS_PARM_01",61)':{tag:'(0043,"GEMS_PARM_01",61)',vr:"UI",name:"ScannerStudyEntityUID",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",62)':{tag:'(0043,"GEMS_PARM_01",62)',vr:"SH",name:"ScannerStudyID",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",6f)':{tag:'(0043,"GEMS_PARM_01",6f)',vr:"DS",name:"ScannerTableEntry",vm:"3",version:"PrivateTag"},'(0043,"GEMS_PARM_01",70)':{tag:'(0043,"GEMS_PARM_01",70)',vr:"LO",name:"ParadigmName",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",71)':{tag:'(0043,"GEMS_PARM_01",71)',vr:"ST",name:"ParadigmDescription",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",72)':{tag:'(0043,"GEMS_PARM_01",72)',vr:"UI",name:"ParadigmUID",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",73)':{tag:'(0043,"GEMS_PARM_01",73)',vr:"US",name:"ExperimentType",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",74)':{tag:'(0043,"GEMS_PARM_01",74)',vr:"US",name:"NumberOfRestVolumes",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",75)':{tag:'(0043,"GEMS_PARM_01",75)',vr:"US",name:"NumberOfActiveVolumes",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",76)':{tag:'(0043,"GEMS_PARM_01",76)',vr:"US",name:"NumberOfDummyScans",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",77)':{tag:'(0043,"GEMS_PARM_01",77)',vr:"SH",name:"ApplicationName",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",78)':{tag:'(0043,"GEMS_PARM_01",78)',vr:"SH",name:"ApplicationVersion",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",79)':{tag:'(0043,"GEMS_PARM_01",79)',vr:"US",name:"SlicesPerVolume",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",7a)':{tag:'(0043,"GEMS_PARM_01",7a)',vr:"US",name:"ExpectedTimePoints",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",7b)':{tag:'(0043,"GEMS_PARM_01",7b)',vr:"FL",name:"RegressorValues",vm:"1-n",version:"PrivateTag"},'(0043,"GEMS_PARM_01",7c)':{tag:'(0043,"GEMS_PARM_01",7c)',vr:"FL",name:"DelayAfterSliceGroup",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",7d)':{tag:'(0043,"GEMS_PARM_01",7d)',vr:"US",name:"ReconModeFlagWord",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",7e)':{tag:'(0043,"GEMS_PARM_01",7e)',vr:"LO",name:"PACCSpecificInformation",vm:"1-n",version:"PrivateTag"},'(0043,"GEMS_PARM_01",7f)':{tag:'(0043,"GEMS_PARM_01",7f)',vr:"DS",name:"EDWIScaleFactor",vm:"1-n",version:"PrivateTag"},'(0043,"GEMS_PARM_01",80)':{tag:'(0043,"GEMS_PARM_01",80)',vr:"LO",name:"CoilIDData",vm:"1-n",version:"PrivateTag"},'(0043,"GEMS_PARM_01",81)':{tag:'(0043,"GEMS_PARM_01",81)',vr:"LO",name:"GECoilName",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",82)':{tag:'(0043,"GEMS_PARM_01",82)',vr:"LO",name:"SystemConfigurationInformation",vm:"1-n",version:"PrivateTag"},'(0043,"GEMS_PARM_01",83)':{tag:'(0043,"GEMS_PARM_01",83)',vr:"DS",name:"AssetRFactors",vm:"1-2",version:"PrivateTag"},'(0043,"GEMS_PARM_01",84)':{tag:'(0043,"GEMS_PARM_01",84)',vr:"LO",name:"AdditionalAssetData",vm:"5-n",version:"PrivateTag"},'(0043,"GEMS_PARM_01",85)':{tag:'(0043,"GEMS_PARM_01",85)',vr:"UT",name:"DebugDataTextFormat",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",86)':{tag:'(0043,"GEMS_PARM_01",86)',vr:"OB",name:"DebugDataBinaryFormat",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",87)':{tag:'(0043,"GEMS_PARM_01",87)',vr:"UT",name:"ScannerSoftwareVersionLongForm",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",88)':{tag:'(0043,"GEMS_PARM_01",88)',vr:"UI",name:"PUREAcquisitionCalibrationSeriesUID",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",89)':{tag:'(0043,"GEMS_PARM_01",89)',vr:"LO",name:"GoverningBodydBdtAndSARDefinition",vm:"3",version:"PrivateTag"},'(0043,"GEMS_PARM_01",8a)':{tag:'(0043,"GEMS_PARM_01",8a)',vr:"CS",name:"PrivateInPlanePhaseEncodingDirection",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",8b)':{tag:'(0043,"GEMS_PARM_01",8b)',vr:"OB",name:"FMRIBinaryDataBlock",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",8c)':{tag:'(0043,"GEMS_PARM_01",8c)',vr:"DS",name:"VoxelLocation",vm:"6",version:"PrivateTag"},'(0043,"GEMS_PARM_01",8d)':{tag:'(0043,"GEMS_PARM_01",8d)',vr:"DS",name:"SATBandLocations",vm:"7-7n",version:"PrivateTag"},'(0043,"GEMS_PARM_01",8e)':{tag:'(0043,"GEMS_PARM_01",8e)',vr:"DS",name:"SpectroPrescanValues",vm:"3",version:"PrivateTag"},'(0043,"GEMS_PARM_01",8f)':{tag:'(0043,"GEMS_PARM_01",8f)',vr:"DS",name:"SpectroParameters",vm:"3",version:"PrivateTag"},'(0043,"GEMS_PARM_01",90)':{tag:'(0043,"GEMS_PARM_01",90)',vr:"LO",name:"SARDefinition",vm:"1-n",version:"PrivateTag"},'(0043,"GEMS_PARM_01",91)':{tag:'(0043,"GEMS_PARM_01",91)',vr:"DS",name:"SARValue",vm:"1-n",version:"PrivateTag"},'(0043,"GEMS_PARM_01",92)':{tag:'(0043,"GEMS_PARM_01",92)',vr:"LO",name:"ImageErrorText",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",93)':{tag:'(0043,"GEMS_PARM_01",93)',vr:"DS",name:"SpectroQuantitationValues",vm:"1-n",version:"PrivateTag"},'(0043,"GEMS_PARM_01",94)':{tag:'(0043,"GEMS_PARM_01",94)',vr:"DS",name:"SpectroRatioValues",vm:"1-n",version:"PrivateTag"},'(0043,"GEMS_PARM_01",95)':{tag:'(0043,"GEMS_PARM_01",95)',vr:"LO",name:"PrescanReuseString",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",96)':{tag:'(0043,"GEMS_PARM_01",96)',vr:"CS",name:"ContentQualification",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",97)':{tag:'(0043,"GEMS_PARM_01",97)',vr:"LO",name:"ImageFilteringParameters",vm:"9",version:"PrivateTag"},'(0043,"GEMS_PARM_01",98)':{tag:'(0043,"GEMS_PARM_01",98)',vr:"UI",name:"ASSETAcquisitionCalibrationSeriesUID",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",99)':{tag:'(0043,"GEMS_PARM_01",99)',vr:"LO",name:"ExtendedOptions",vm:"1-n",version:"PrivateTag"},'(0043,"GEMS_PARM_01",9a)':{tag:'(0043,"GEMS_PARM_01",9a)',vr:"IS",name:"RxStackIdentification",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",9b)':{tag:'(0043,"GEMS_PARM_01",9b)',vr:"DS",name:"NPWFactor",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",9c)':{tag:'(0043,"GEMS_PARM_01",9c)',vr:"OB",name:"ResearchTag1",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",9d)':{tag:'(0043,"GEMS_PARM_01",9d)',vr:"OB",name:"ResearchTag2",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",9e)':{tag:'(0043,"GEMS_PARM_01",9e)',vr:"OB",name:"ResearchTag3",vm:"1",version:"PrivateTag"},'(0043,"GEMS_PARM_01",9f)':{tag:'(0043,"GEMS_PARM_01",9f)',vr:"OB",name:"ResearchTag4",vm:"1",version:"PrivateTag"},'(0011,"GEMS_PATI_01",10)':{tag:'(0011,"GEMS_PATI_01",10)',vr:"SS",name:"PatientStatus",vm:"1",version:"PrivateTag"},'(0021,"GEMS_RELA_01",03)':{tag:'(0021,"GEMS_RELA_01",03)',vr:"SS",name:"SeriesFromWhichPrescribed",vm:"1",version:"PrivateTag"},'(0021,"GEMS_RELA_01",05)':{tag:'(0021,"GEMS_RELA_01",05)',vr:"SH",name:"GenesisVersionNow",vm:"1",version:"PrivateTag"},'(0021,"GEMS_RELA_01",07)':{tag:'(0021,"GEMS_RELA_01",07)',vr:"UL",name:"SeriesRecordChecksum",vm:"1",version:"PrivateTag"},'(0021,"GEMS_RELA_01",15)':{tag:'(0021,"GEMS_RELA_01",15)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0021,"GEMS_RELA_01",16)':{tag:'(0021,"GEMS_RELA_01",16)',vr:"SS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0021,"GEMS_RELA_01",18)':{tag:'(0021,"GEMS_RELA_01",18)',vr:"SH",name:"GenesisVersionNow",vm:"1",version:"PrivateTag"},'(0021,"GEMS_RELA_01",19)':{tag:'(0021,"GEMS_RELA_01",19)',vr:"UL",name:"AcqReconRecordChecksum",vm:"1",version:"PrivateTag"},'(0021,"GEMS_RELA_01",20)':{tag:'(0021,"GEMS_RELA_01",20)',vr:"DS",name:"TableStartLocation",vm:"1",version:"PrivateTag"},'(0021,"GEMS_RELA_01",35)':{tag:'(0021,"GEMS_RELA_01",35)',vr:"SS",name:"SeriesFromWhichPrescribed",vm:"1",version:"PrivateTag"},'(0021,"GEMS_RELA_01",36)':{tag:'(0021,"GEMS_RELA_01",36)',vr:"SS",name:"ImageFromWhichPrescribed",vm:"1",version:"PrivateTag"},'(0021,"GEMS_RELA_01",37)':{tag:'(0021,"GEMS_RELA_01",37)',vr:"SS",name:"ScreenFormat",vm:"1",version:"PrivateTag"},'(0021,"GEMS_RELA_01",4a)':{tag:'(0021,"GEMS_RELA_01",4a)',vr:"LO",name:"AnatomicalReferenceForScout",vm:"1",version:"PrivateTag"},'(0021,"GEMS_RELA_01",4e)':{tag:'(0021,"GEMS_RELA_01",4e)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0021,"GEMS_RELA_01",4f)':{tag:'(0021,"GEMS_RELA_01",4f)',vr:"SS",name:"LocationsInAcquisition",vm:"1",version:"PrivateTag"},'(0021,"GEMS_RELA_01",50)':{tag:'(0021,"GEMS_RELA_01",50)',vr:"SS",name:"GraphicallyPrescribed",vm:"1",version:"PrivateTag"},'(0021,"GEMS_RELA_01",51)':{tag:'(0021,"GEMS_RELA_01",51)',vr:"DS",name:"RotationFromSourceXRot",vm:"1",version:"PrivateTag"},'(0021,"GEMS_RELA_01",52)':{tag:'(0021,"GEMS_RELA_01",52)',vr:"DS",name:"RotationFromSourceYRot",vm:"1",version:"PrivateTag"},'(0021,"GEMS_RELA_01",53)':{tag:'(0021,"GEMS_RELA_01",53)',vr:"DS",name:"RotationFromSourceZRot",vm:"1",version:"PrivateTag"},'(0021,"GEMS_RELA_01",54)':{tag:'(0021,"GEMS_RELA_01",54)',vr:"SH",name:"ImagePosition",vm:"3",version:"PrivateTag"},'(0021,"GEMS_RELA_01",55)':{tag:'(0021,"GEMS_RELA_01",55)',vr:"SH",name:"ImageOrientation",vm:"6",version:"PrivateTag"},'(0021,"GEMS_RELA_01",56)':{tag:'(0021,"GEMS_RELA_01",56)',vr:"SL",name:"IntegerSlop",vm:"1",version:"PrivateTag"},'(0021,"GEMS_RELA_01",57)':{tag:'(0021,"GEMS_RELA_01",57)',vr:"SL",name:"IntegerSlop",vm:"1",version:"PrivateTag"},'(0021,"GEMS_RELA_01",58)':{tag:'(0021,"GEMS_RELA_01",58)',vr:"SL",name:"IntegerSlop",vm:"1",version:"PrivateTag"},'(0021,"GEMS_RELA_01",59)':{tag:'(0021,"GEMS_RELA_01",59)',vr:"SL",name:"IntegerSlop",vm:"1",version:"PrivateTag"},'(0021,"GEMS_RELA_01",5a)':{tag:'(0021,"GEMS_RELA_01",5a)',vr:"SL",name:"IntegerSlop",vm:"1",version:"PrivateTag"},'(0021,"GEMS_RELA_01",5b)':{tag:'(0021,"GEMS_RELA_01",5b)',vr:"DS",name:"FloatSlop",vm:"1",version:"PrivateTag"},'(0021,"GEMS_RELA_01",5c)':{tag:'(0021,"GEMS_RELA_01",5c)',vr:"DS",name:"FloatSlop",vm:"1",version:"PrivateTag"},'(0021,"GEMS_RELA_01",5d)':{tag:'(0021,"GEMS_RELA_01",5d)',vr:"DS",name:"FloatSlop",vm:"1",version:"PrivateTag"},'(0021,"GEMS_RELA_01",5e)':{tag:'(0021,"GEMS_RELA_01",5e)',vr:"DS",name:"FloatSlop",vm:"1",version:"PrivateTag"},'(0021,"GEMS_RELA_01",5f)':{tag:'(0021,"GEMS_RELA_01",5f)',vr:"DS",name:"FloatSlop",vm:"1",version:"PrivateTag"},'(0021,"GEMS_RELA_01",70)':{tag:'(0021,"GEMS_RELA_01",70)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0021,"GEMS_RELA_01",71)':{tag:'(0021,"GEMS_RELA_01",71)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0021,"GEMS_RELA_01",81)':{tag:'(0021,"GEMS_RELA_01",81)',vr:"DS",name:"AutoWindowLevelAlpha",vm:"1",version:"PrivateTag"},'(0021,"GEMS_RELA_01",82)':{tag:'(0021,"GEMS_RELA_01",82)',vr:"DS",name:"AutoWindowLevelBeta",vm:"1",version:"PrivateTag"},'(0021,"GEMS_RELA_01",83)':{tag:'(0021,"GEMS_RELA_01",83)',vr:"DS",name:"AutoWindowLevelWindow",vm:"1",version:"PrivateTag"},'(0021,"GEMS_RELA_01",84)':{tag:'(0021,"GEMS_RELA_01",84)',vr:"DS",name:"AutoWindowLevelLevel",vm:"1",version:"PrivateTag"},'(0021,"GEMS_RELA_01",90)':{tag:'(0021,"GEMS_RELA_01",90)',vr:"SS",name:"TubeFocalSpotPosition",vm:"1",version:"PrivateTag"},'(0021,"GEMS_RELA_01",91)':{tag:'(0021,"GEMS_RELA_01",91)',vr:"SS",name:"BiopsyPosition",vm:"1",version:"PrivateTag"},'(0021,"GEMS_RELA_01",92)':{tag:'(0021,"GEMS_RELA_01",92)',vr:"FL",name:"BiopsyTLocation",vm:"1",version:"PrivateTag"},'(0021,"GEMS_RELA_01",93)':{tag:'(0021,"GEMS_RELA_01",93)',vr:"FL",name:"BiopsyRefLocation",vm:"1",version:"PrivateTag"},'(0045,"GEMS_SENO_02",04)':{tag:'(0045,"GEMS_SENO_02",04)',vr:"CS",name:"AES",vm:"1",version:"PrivateTag"},'(0045,"GEMS_SENO_02",06)':{tag:'(0045,"GEMS_SENO_02",06)',vr:"DS",name:"Angulation",vm:"1",version:"PrivateTag"},'(0045,"GEMS_SENO_02",09)':{tag:'(0045,"GEMS_SENO_02",09)',vr:"DS",name:"RealMagnificationFactor",vm:"1",version:"PrivateTag"},'(0045,"GEMS_SENO_02",0b)':{tag:'(0045,"GEMS_SENO_02",0b)',vr:"CS",name:"SenographType",vm:"1",version:"PrivateTag"},'(0045,"GEMS_SENO_02",0c)':{tag:'(0045,"GEMS_SENO_02",0c)',vr:"DS",name:"IntegrationTime",vm:"1",version:"PrivateTag"},'(0045,"GEMS_SENO_02",0d)':{tag:'(0045,"GEMS_SENO_02",0d)',vr:"DS",name:"ROIOriginXY",vm:"1",version:"PrivateTag"},'(0045,"GEMS_SENO_02",11)':{tag:'(0045,"GEMS_SENO_02",11)',vr:"DS",name:"ReceptorSizeCmXY",vm:"2",version:"PrivateTag"},'(0045,"GEMS_SENO_02",12)':{tag:'(0045,"GEMS_SENO_02",12)',vr:"IS",name:"ReceptorSizePixelsXY",vm:"2",version:"PrivateTag"},'(0045,"GEMS_SENO_02",13)':{tag:'(0045,"GEMS_SENO_02",13)',vr:"ST",name:"Screen",vm:"1",version:"PrivateTag"},'(0045,"GEMS_SENO_02",14)':{tag:'(0045,"GEMS_SENO_02",14)',vr:"DS",name:"PixelPitchMicrons",vm:"1",version:"PrivateTag"},'(0045,"GEMS_SENO_02",15)':{tag:'(0045,"GEMS_SENO_02",15)',vr:"IS",name:"PixelDepthBits",vm:"1",version:"PrivateTag"},'(0045,"GEMS_SENO_02",16)':{tag:'(0045,"GEMS_SENO_02",16)',vr:"IS",name:"BinningFactorXY",vm:"2",version:"PrivateTag"},'(0045,"GEMS_SENO_02",1B)':{tag:'(0045,"GEMS_SENO_02",1B)',vr:"CS",name:"ClinicalView",vm:"1",version:"PrivateTag"},'(0045,"GEMS_SENO_02",1D)':{tag:'(0045,"GEMS_SENO_02",1D)',vr:"DS",name:"MeanOfRawGrayLevels",vm:"1",version:"PrivateTag"},'(0045,"GEMS_SENO_02",1E)':{tag:'(0045,"GEMS_SENO_02",1E)',vr:"DS",name:"MeanOfOffsetGrayLevels",vm:"1",version:"PrivateTag"},'(0045,"GEMS_SENO_02",1F)':{tag:'(0045,"GEMS_SENO_02",1F)',vr:"DS",name:"MeanOfCorrectedGrayLevels",vm:"1",version:"PrivateTag"},'(0045,"GEMS_SENO_02",20)':{tag:'(0045,"GEMS_SENO_02",20)',vr:"DS",name:"MeanOfRegionGrayLevels",vm:"1",version:"PrivateTag"},'(0045,"GEMS_SENO_02",21)':{tag:'(0045,"GEMS_SENO_02",21)',vr:"DS",name:"MeanOfLogRegionGrayLevels",vm:"1",version:"PrivateTag"},'(0045,"GEMS_SENO_02",22)':{tag:'(0045,"GEMS_SENO_02",22)',vr:"DS",name:"StandardDeviationOfRawGrayLevels",vm:"1",version:"PrivateTag"},'(0045,"GEMS_SENO_02",23)':{tag:'(0045,"GEMS_SENO_02",23)',vr:"DS",name:"StandardDeviationOfCorrectedGrayLevels",vm:"1",version:"PrivateTag"},'(0045,"GEMS_SENO_02",24)':{tag:'(0045,"GEMS_SENO_02",24)',vr:"DS",name:"StandardDeviationOfRegionGrayLevels",vm:"1",version:"PrivateTag"},'(0045,"GEMS_SENO_02",25)':{tag:'(0045,"GEMS_SENO_02",25)',vr:"DS",name:"StandardDeviationOfLogRegionGrayLevels",vm:"1",version:"PrivateTag"},'(0045,"GEMS_SENO_02",26)':{tag:'(0045,"GEMS_SENO_02",26)',vr:"OB",name:"MAOBuffer",vm:"1",version:"PrivateTag"},'(0045,"GEMS_SENO_02",27)':{tag:'(0045,"GEMS_SENO_02",27)',vr:"IS",name:"SetNumber",vm:"1",version:"PrivateTag"},'(0045,"GEMS_SENO_02",28)':{tag:'(0045,"GEMS_SENO_02",28)',vr:"CS",name:"WindowingType",vm:"1",version:"PrivateTag"},'(0045,"GEMS_SENO_02",29)':{tag:'(0045,"GEMS_SENO_02",29)',vr:"DS",name:"WindowingParameters",vm:"1-n",version:"PrivateTag"},'(0045,"GEMS_SENO_02",2a)':{tag:'(0045,"GEMS_SENO_02",2a)',vr:"IS",name:"CrosshairCursorXCoordinates",vm:"1",version:"PrivateTag"},'(0045,"GEMS_SENO_02",2b)':{tag:'(0045,"GEMS_SENO_02",2b)',vr:"IS",name:"CrosshairCursorYCoordinates",vm:"1",version:"PrivateTag"},'(0045,"GEMS_SENO_02",39)':{tag:'(0045,"GEMS_SENO_02",39)',vr:"US",name:"VignetteRows",vm:"1",version:"PrivateTag"},'(0045,"GEMS_SENO_02",3a)':{tag:'(0045,"GEMS_SENO_02",3a)',vr:"US",name:"VignetteColumns",vm:"1",version:"PrivateTag"},'(0045,"GEMS_SENO_02",3b)':{tag:'(0045,"GEMS_SENO_02",3b)',vr:"US",name:"VignetteBitsAllocated",vm:"1",version:"PrivateTag"},'(0045,"GEMS_SENO_02",3c)':{tag:'(0045,"GEMS_SENO_02",3c)',vr:"US",name:"VignetteBitsStored",vm:"1",version:"PrivateTag"},'(0045,"GEMS_SENO_02",3d)':{tag:'(0045,"GEMS_SENO_02",3d)',vr:"US",name:"VignetteHighBit",vm:"1",version:"PrivateTag"},'(0045,"GEMS_SENO_02",3e)':{tag:'(0045,"GEMS_SENO_02",3e)',vr:"US",name:"VignettePixelRepresentation",vm:"1",version:"PrivateTag"},'(0045,"GEMS_SENO_02",3f)':{tag:'(0045,"GEMS_SENO_02",3f)',vr:"OB",name:"VignettePixelData",vm:"1",version:"PrivateTag"},'(0025,"GEMS_SERS_01",06)':{tag:'(0025,"GEMS_SERS_01",06)',vr:"SS",name:"LastPulseSequenceUsed",vm:"1",version:"PrivateTag"},'(0025,"GEMS_SERS_01",07)':{tag:'(0025,"GEMS_SERS_01",07)',vr:"SL",name:"ImagesInSeries",vm:"1",version:"PrivateTag"},'(0025,"GEMS_SERS_01",10)':{tag:'(0025,"GEMS_SERS_01",10)',vr:"SL",name:"LandmarkCounter",vm:"1",version:"PrivateTag"},'(0025,"GEMS_SERS_01",11)':{tag:'(0025,"GEMS_SERS_01",11)',vr:"SS",name:"NumberOfAcquisitions",vm:"1",version:"PrivateTag"},'(0025,"GEMS_SERS_01",14)':{tag:'(0025,"GEMS_SERS_01",14)',vr:"SL",name:"IndicatesNumberOfUpdatesToHeader",vm:"1",version:"PrivateTag"},'(0025,"GEMS_SERS_01",17)':{tag:'(0025,"GEMS_SERS_01",17)',vr:"SL",name:"SeriesCompleteFlag",vm:"1",version:"PrivateTag"},'(0025,"GEMS_SERS_01",18)':{tag:'(0025,"GEMS_SERS_01",18)',vr:"SL",name:"NumberOfImagesArchived",vm:"1",version:"PrivateTag"},'(0025,"GEMS_SERS_01",19)':{tag:'(0025,"GEMS_SERS_01",19)',vr:"SL",name:"LastImageNumberUsed",vm:"1",version:"PrivateTag"},'(0025,"GEMS_SERS_01",1a)':{tag:'(0025,"GEMS_SERS_01",1a)',vr:"SH",name:"PrimaryReceiverSuiteAndHost",vm:"1",version:"PrivateTag"},'(0023,"GEMS_STDY_01",01)':{tag:'(0023,"GEMS_STDY_01",01)',vr:"SL",name:"NumberOfSeriesInStudy",vm:"1",version:"PrivateTag"},'(0023,"GEMS_STDY_01",02)':{tag:'(0023,"GEMS_STDY_01",02)',vr:"SL",name:"NumberOfUnarchivedSeries",vm:"1",version:"PrivateTag"},'(0023,"GEMS_STDY_01",10)':{tag:'(0023,"GEMS_STDY_01",10)',vr:"SS",name:"ReferenceImageField",vm:"1",version:"PrivateTag"},'(0023,"GEMS_STDY_01",50)':{tag:'(0023,"GEMS_STDY_01",50)',vr:"SS",name:"SummaryImage",vm:"1",version:"PrivateTag"},'(0023,"GEMS_STDY_01",70)':{tag:'(0023,"GEMS_STDY_01",70)',vr:"FD",name:"StartTimeSecsInFirstAxial",vm:"1",version:"PrivateTag"},'(0023,"GEMS_STDY_01",74)':{tag:'(0023,"GEMS_STDY_01",74)',vr:"SL",name:"NumberOfUpdatesToHeader",vm:"1",version:"PrivateTag"},'(0023,"GEMS_STDY_01",7d)':{tag:'(0023,"GEMS_STDY_01",7d)',vr:"SS",name:"IndicatesIfStudyHasCompleteInfo",vm:"1",version:"PrivateTag"},'(0033,"GEMS_YMHD_01",05)':{tag:'(0033,"GEMS_YMHD_01",05)',vr:"UN",name:"Unknown",vm:"1",version:"PrivateTag"},'(0033,"GEMS_YMHD_01",06)':{tag:'(0033,"GEMS_YMHD_01",06)',vr:"UN",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"GE_GENESIS_REV3.0",39)':{tag:'(0019,"GE_GENESIS_REV3.0",39)',vr:"SS",name:"AxialType",vm:"1",version:"PrivateTag"},'(0019,"GE_GENESIS_REV3.0",8f)':{tag:'(0019,"GE_GENESIS_REV3.0",8f)',vr:"SS",name:"SwapPhaseFrequency",vm:"1",version:"PrivateTag"},'(0019,"GE_GENESIS_REV3.0",9c)':{tag:'(0019,"GE_GENESIS_REV3.0",9c)',vr:"SS",name:"PulseSequenceName",vm:"1",version:"PrivateTag"},'(0019,"GE_GENESIS_REV3.0",9f)':{tag:'(0019,"GE_GENESIS_REV3.0",9f)',vr:"SS",name:"CoilType",vm:"1",version:"PrivateTag"},'(0019,"GE_GENESIS_REV3.0",a4)':{tag:'(0019,"GE_GENESIS_REV3.0",a4)',vr:"SS",name:"SATFatWaterBone",vm:"1",version:"PrivateTag"},'(0019,"GE_GENESIS_REV3.0",c0)':{tag:'(0019,"GE_GENESIS_REV3.0",c0)',vr:"SS",name:"BitmapOfSATSelections",vm:"1",version:"PrivateTag"},'(0019,"GE_GENESIS_REV3.0",c1)':{tag:'(0019,"GE_GENESIS_REV3.0",c1)',vr:"SS",name:"SurfaceCoilIntensityCorrectionFlag",vm:"1",version:"PrivateTag"},'(0019,"GE_GENESIS_REV3.0",cb)':{tag:'(0019,"GE_GENESIS_REV3.0",cb)',vr:"SS",name:"PhaseContrastFlowAxis",vm:"1",version:"PrivateTag"},'(0019,"GE_GENESIS_REV3.0",cc)':{tag:'(0019,"GE_GENESIS_REV3.0",cc)',vr:"SS",name:"PhaseContrastVelocityEncoding",vm:"1",version:"PrivateTag"},'(0019,"GE_GENESIS_REV3.0",d5)':{tag:'(0019,"GE_GENESIS_REV3.0",d5)',vr:"SS",name:"FractionalEcho",vm:"1",version:"PrivateTag"},'(0019,"GE_GENESIS_REV3.0",d8)':{tag:'(0019,"GE_GENESIS_REV3.0",d8)',vr:"SS",name:"VariableEchoFlag",vm:"1",version:"PrivateTag"},'(0019,"GE_GENESIS_REV3.0",d9)':{tag:'(0019,"GE_GENESIS_REV3.0",d9)',vr:"DS",name:"ConcatenatedSat",vm:"1",version:"PrivateTag"},'(0019,"GE_GENESIS_REV3.0",f2)':{tag:'(0019,"GE_GENESIS_REV3.0",f2)',vr:"SS",name:"NumberOfPhases",vm:"1",version:"PrivateTag"},'(0043,"GE_GENESIS_REV3.0",1e)':{tag:'(0043,"GE_GENESIS_REV3.0",1e)',vr:"DS",name:"DeltaStartTime",vm:"1",version:"PrivateTag"},'(0043,"GE_GENESIS_REV3.0",27)':{tag:'(0043,"GE_GENESIS_REV3.0",27)',vr:"SH",name:"ScanPitchRatio",vm:"1",version:"PrivateTag"},'(0029,"INTELERAD MEDICAL SYSTEMS",01)':{tag:'(0029,"INTELERAD MEDICAL SYSTEMS",01)',vr:"FD",name:"ImageCompressionFraction",vm:"1",version:"PrivateTag"},'(0029,"INTELERAD MEDICAL SYSTEMS",02)':{tag:'(0029,"INTELERAD MEDICAL SYSTEMS",02)',vr:"FD",name:"ImageQuality",vm:"1",version:"PrivateTag"},'(0029,"INTELERAD MEDICAL SYSTEMS",03)':{tag:'(0029,"INTELERAD MEDICAL SYSTEMS",03)',vr:"FD",name:"ImageBytesTransferred",vm:"1",version:"PrivateTag"},'(0029,"INTELERAD MEDICAL SYSTEMS",10)':{tag:'(0029,"INTELERAD MEDICAL SYSTEMS",10)',vr:"SH",name:"J2cParameterType",vm:"1",version:"PrivateTag"},'(0029,"INTELERAD MEDICAL SYSTEMS",11)':{tag:'(0029,"INTELERAD MEDICAL SYSTEMS",11)',vr:"US",name:"J2cPixelRepresentation",vm:"1",version:"PrivateTag"},'(0029,"INTELERAD MEDICAL SYSTEMS",12)':{tag:'(0029,"INTELERAD MEDICAL SYSTEMS",12)',vr:"US",name:"J2cBitsAllocated",vm:"1",version:"PrivateTag"},'(0029,"INTELERAD MEDICAL SYSTEMS",13)':{tag:'(0029,"INTELERAD MEDICAL SYSTEMS",13)',vr:"US",name:"J2cPixelShiftValue",vm:"1",version:"PrivateTag"},'(0029,"INTELERAD MEDICAL SYSTEMS",14)':{tag:'(0029,"INTELERAD MEDICAL SYSTEMS",14)',vr:"US",name:"J2cPlanarConfiguration",vm:"1",version:"PrivateTag"},'(0029,"INTELERAD MEDICAL SYSTEMS",15)':{tag:'(0029,"INTELERAD MEDICAL SYSTEMS",15)',vr:"DS",name:"J2cRescaleIntercept",vm:"1",version:"PrivateTag"},'(0029,"INTELERAD MEDICAL SYSTEMS",20)':{tag:'(0029,"INTELERAD MEDICAL SYSTEMS",20)',vr:"LO",name:"PixelDataMD5SumPerFrame",vm:"1",version:"PrivateTag"},'(0029,"INTELERAD MEDICAL SYSTEMS",21)':{tag:'(0029,"INTELERAD MEDICAL SYSTEMS",21)',vr:"US",name:"HistogramPercentileLabels",vm:"1",version:"PrivateTag"},'(0029,"INTELERAD MEDICAL SYSTEMS",22)':{tag:'(0029,"INTELERAD MEDICAL SYSTEMS",22)',vr:"FD",name:"HistogramPercentileValues",vm:"1",version:"PrivateTag"},'(3f01,"INTELERAD MEDICAL SYSTEMS",01)':{tag:'(3f01,"INTELERAD MEDICAL SYSTEMS",01)',vr:"LO",name:"InstitutionCode",vm:"1",version:"PrivateTag"},'(3f01,"INTELERAD MEDICAL SYSTEMS",02)':{tag:'(3f01,"INTELERAD MEDICAL SYSTEMS",02)',vr:"LO",name:"RoutedTransferAE",vm:"1",version:"PrivateTag"},'(3f01,"INTELERAD MEDICAL SYSTEMS",03)':{tag:'(3f01,"INTELERAD MEDICAL SYSTEMS",03)',vr:"LO",name:"SourceAE",vm:"1",version:"PrivateTag"},'(3f01,"INTELERAD MEDICAL SYSTEMS",04)':{tag:'(3f01,"INTELERAD MEDICAL SYSTEMS",04)',vr:"SH",name:"DeferredValidation",vm:"1",version:"PrivateTag"},'(3f01,"INTELERAD MEDICAL SYSTEMS",05)':{tag:'(3f01,"INTELERAD MEDICAL SYSTEMS",05)',vr:"LO",name:"SeriesOwner",vm:"1",version:"PrivateTag"},'(3f01,"INTELERAD MEDICAL SYSTEMS",06)':{tag:'(3f01,"INTELERAD MEDICAL SYSTEMS",06)',vr:"LO",name:"OrderGroupNumber",vm:"1",version:"PrivateTag"},'(3f01,"INTELERAD MEDICAL SYSTEMS",07)':{tag:'(3f01,"INTELERAD MEDICAL SYSTEMS",07)',vr:"SH",name:"StrippedPixelData",vm:"1",version:"PrivateTag"},'(3f01,"INTELERAD MEDICAL SYSTEMS",08)':{tag:'(3f01,"INTELERAD MEDICAL SYSTEMS",08)',vr:"SH",name:"PendingMoveRequest",vm:"1",version:"PrivateTag"},'(0041,"INTEGRIS 1.0",20)':{tag:'(0041,"INTEGRIS 1.0",20)',vr:"FL",name:"AccumulatedFluoroscopyDose",vm:"1",version:"PrivateTag"},'(0041,"INTEGRIS 1.0",30)':{tag:'(0041,"INTEGRIS 1.0",30)',vr:"FL",name:"AccumulatedExposureDose",vm:"1",version:"PrivateTag"},'(0041,"INTEGRIS 1.0",40)':{tag:'(0041,"INTEGRIS 1.0",40)',vr:"FL",name:"TotalDose",vm:"1",version:"PrivateTag"},'(0041,"INTEGRIS 1.0",41)':{tag:'(0041,"INTEGRIS 1.0",41)',vr:"FL",name:"TotalNumberOfFrames",vm:"1",version:"PrivateTag"},'(0041,"INTEGRIS 1.0",50)':{tag:'(0041,"INTEGRIS 1.0",50)',vr:"SQ",name:"ExposureInformationSequence",vm:"1",version:"PrivateTag"},'(0009,"INTEGRIS 1.0",08)':{tag:'(0009,"INTEGRIS 1.0",08)',vr:"CS",name:"ExposureChannel",vm:"1-n",version:"PrivateTag"},'(0009,"INTEGRIS 1.0",32)':{tag:'(0009,"INTEGRIS 1.0",32)',vr:"TM",name:"ExposureStartTime",vm:"1",version:"PrivateTag"},'(0019,"INTEGRIS 1.0",00)':{tag:'(0019,"INTEGRIS 1.0",00)',vr:"LO",name:"APRName",vm:"1",version:"PrivateTag"},'(0019,"INTEGRIS 1.0",40)':{tag:'(0019,"INTEGRIS 1.0",40)',vr:"DS",name:"FrameRate",vm:"1",version:"PrivateTag"},'(0021,"INTEGRIS 1.0",12)':{tag:'(0021,"INTEGRIS 1.0",12)',vr:"IS",name:"ExposureNumber",vm:"1",version:"PrivateTag"},'(0029,"INTEGRIS 1.0",08)':{tag:'(0029,"INTEGRIS 1.0",08)',vr:"IS",name:"NumberOfExposureResults",vm:"1",version:"PrivateTag"},'(0029,"ISG shadow",70)':{tag:'(0029,"ISG shadow",70)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"ISG shadow",80)':{tag:'(0029,"ISG shadow",80)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"ISG shadow",90)':{tag:'(0029,"ISG shadow",90)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"ISI",01)':{tag:'(0009,"ISI",01)',vr:"UN",name:"SIENETGeneralPurposeIMGEF",vm:"1",version:"PrivateTag"},'(0009,"MERGE TECHNOLOGIES, INC.",00)':{tag:'(0009,"MERGE TECHNOLOGIES, INC.",00)',vr:"OB",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"OCULUS Optikgeraete GmbH",1010)':{tag:'(0029,"OCULUS Optikgeraete GmbH",1010)',vr:"OB",name:"OriginalMeasuringData",vm:"1",version:"PrivateTag"},'(0029,"OCULUS Optikgeraete GmbH",1012)':{tag:'(0029,"OCULUS Optikgeraete GmbH",1012)',vr:"UL",name:"OriginalMeasuringDataLength",vm:"1",version:"PrivateTag"},'(0029,"OCULUS Optikgeraete GmbH",1020)':{tag:'(0029,"OCULUS Optikgeraete GmbH",1020)',vr:"OB",name:"OriginalMeasuringRawData",vm:"1",version:"PrivateTag"},'(0029,"OCULUS Optikgeraete GmbH",1022)':{tag:'(0029,"OCULUS Optikgeraete GmbH",1022)',vr:"UL",name:"OriginalMeasuringRawDataLength",vm:"1",version:"PrivateTag"},'(0041,"PAPYRUS 3.0",00)':{tag:'(0041,"PAPYRUS 3.0",00)',vr:"LT",name:"PapyrusComments",vm:"1",version:"PrivateTag"},'(0041,"PAPYRUS 3.0",10)':{tag:'(0041,"PAPYRUS 3.0",10)',vr:"SQ",name:"PointerSequence",vm:"1",version:"PrivateTag"},'(0041,"PAPYRUS 3.0",11)':{tag:'(0041,"PAPYRUS 3.0",11)',vr:"UL",name:"ImagePointer",vm:"1",version:"PrivateTag"},'(0041,"PAPYRUS 3.0",12)':{tag:'(0041,"PAPYRUS 3.0",12)',vr:"UL",name:"PixelOffset",vm:"1",version:"PrivateTag"},'(0041,"PAPYRUS 3.0",13)':{tag:'(0041,"PAPYRUS 3.0",13)',vr:"SQ",name:"ImageIdentifierSequence",vm:"1",version:"PrivateTag"},'(0041,"PAPYRUS 3.0",14)':{tag:'(0041,"PAPYRUS 3.0",14)',vr:"SQ",name:"ExternalFileReferenceSequence",vm:"1",version:"PrivateTag"},'(0041,"PAPYRUS 3.0",15)':{tag:'(0041,"PAPYRUS 3.0",15)',vr:"US",name:"NumberOfImages",vm:"1",version:"PrivateTag"},'(0041,"PAPYRUS 3.0",21)':{tag:'(0041,"PAPYRUS 3.0",21)',vr:"UI",name:"ReferencedSOPClassUID",vm:"1",version:"PrivateTag"},'(0041,"PAPYRUS 3.0",22)':{tag:'(0041,"PAPYRUS 3.0",22)',vr:"UI",name:"ReferencedSOPInstanceUID",vm:"1",version:"PrivateTag"},'(0041,"PAPYRUS 3.0",31)':{tag:'(0041,"PAPYRUS 3.0",31)',vr:"LT",name:"ReferencedFileName",vm:"1",version:"PrivateTag"},'(0041,"PAPYRUS 3.0",32)':{tag:'(0041,"PAPYRUS 3.0",32)',vr:"LT",name:"ReferencedFilePath",vm:"1-n",version:"PrivateTag"},'(0041,"PAPYRUS 3.0",41)':{tag:'(0041,"PAPYRUS 3.0",41)',vr:"UI",name:"ReferencedImageSOPClassUID",vm:"1",version:"PrivateTag"},'(0041,"PAPYRUS 3.0",42)':{tag:'(0041,"PAPYRUS 3.0",42)',vr:"UI",name:"ReferencedImageSOPInstanceUID",vm:"1",version:"PrivateTag"},'(0041,"PAPYRUS 3.0",50)':{tag:'(0041,"PAPYRUS 3.0",50)',vr:"SQ",name:"ImageSequence",vm:"1",version:"PrivateTag"},'(6001-o-60ff,"PAPYRUS 3.0",00)':{tag:'(6001-o-60ff,"PAPYRUS 3.0",00)',vr:"IS",name:"OverlayID",vm:"1",version:"PrivateTag"},'(6001-o-60ff,"PAPYRUS 3.0",01)':{tag:'(6001-o-60ff,"PAPYRUS 3.0",01)',vr:"LT",name:"LinkedOverlays",vm:"1-n",version:"PrivateTag"},'(6001-o-60ff,"PAPYRUS 3.0",10)':{tag:'(6001-o-60ff,"PAPYRUS 3.0",10)',vr:"US",name:"OverlayRows",vm:"1",version:"PrivateTag"},'(6001-o-60ff,"PAPYRUS 3.0",11)':{tag:'(6001-o-60ff,"PAPYRUS 3.0",11)',vr:"US",name:"OverlayColumns",vm:"1",version:"PrivateTag"},'(6001-o-60ff,"PAPYRUS 3.0",40)':{tag:'(6001-o-60ff,"PAPYRUS 3.0",40)',vr:"LO",name:"OverlayType",vm:"1",version:"PrivateTag"},'(6001-o-60ff,"PAPYRUS 3.0",50)':{tag:'(6001-o-60ff,"PAPYRUS 3.0",50)',vr:"US",name:"OverlayOrigin",vm:"1-n",version:"PrivateTag"},'(6001-o-60ff,"PAPYRUS 3.0",60)':{tag:'(6001-o-60ff,"PAPYRUS 3.0",60)',vr:"LO",name:"Editable",vm:"1",version:"PrivateTag"},'(6001-o-60ff,"PAPYRUS 3.0",70)':{tag:'(6001-o-60ff,"PAPYRUS 3.0",70)',vr:"LO",name:"OverlayFont",vm:"1",version:"PrivateTag"},'(6001-o-60ff,"PAPYRUS 3.0",72)':{tag:'(6001-o-60ff,"PAPYRUS 3.0",72)',vr:"LO",name:"OverlayStyle",vm:"1",version:"PrivateTag"},'(6001-o-60ff,"PAPYRUS 3.0",74)':{tag:'(6001-o-60ff,"PAPYRUS 3.0",74)',vr:"US",name:"OverlayFontSize",vm:"1",version:"PrivateTag"},'(6001-o-60ff,"PAPYRUS 3.0",76)':{tag:'(6001-o-60ff,"PAPYRUS 3.0",76)',vr:"LO",name:"OverlayColor",vm:"1",version:"PrivateTag"},'(6001-o-60ff,"PAPYRUS 3.0",78)':{tag:'(6001-o-60ff,"PAPYRUS 3.0",78)',vr:"US",name:"ShadowSize",vm:"1",version:"PrivateTag"},'(6001-o-60ff,"PAPYRUS 3.0",80)':{tag:'(6001-o-60ff,"PAPYRUS 3.0",80)',vr:"LO",name:"FillPattern",vm:"1",version:"PrivateTag"},'(6001-o-60ff,"PAPYRUS 3.0",82)':{tag:'(6001-o-60ff,"PAPYRUS 3.0",82)',vr:"US",name:"OverlayPenSize",vm:"1",version:"PrivateTag"},'(6001-o-60ff,"PAPYRUS 3.0",a0)':{tag:'(6001-o-60ff,"PAPYRUS 3.0",a0)',vr:"LO",name:"Label",vm:"1",version:"PrivateTag"},'(6001-o-60ff,"PAPYRUS 3.0",a2)':{tag:'(6001-o-60ff,"PAPYRUS 3.0",a2)',vr:"LT",name:"PostItText",vm:"1",version:"PrivateTag"},'(6001-o-60ff,"PAPYRUS 3.0",a4)':{tag:'(6001-o-60ff,"PAPYRUS 3.0",a4)',vr:"US",name:"AnchorPoint",vm:"2",version:"PrivateTag"},'(6001-o-60ff,"PAPYRUS 3.0",b0)':{tag:'(6001-o-60ff,"PAPYRUS 3.0",b0)',vr:"LO",name:"ROIType",vm:"1",version:"PrivateTag"},'(6001-o-60ff,"PAPYRUS 3.0",b2)':{tag:'(6001-o-60ff,"PAPYRUS 3.0",b2)',vr:"LT",name:"AttachedAnnotation",vm:"1",version:"PrivateTag"},'(6001-o-60ff,"PAPYRUS 3.0",ba)':{tag:'(6001-o-60ff,"PAPYRUS 3.0",ba)',vr:"US",name:"ContourPoints",vm:"1-n",version:"PrivateTag"},'(6001-o-60ff,"PAPYRUS 3.0",bc)':{tag:'(6001-o-60ff,"PAPYRUS 3.0",bc)',vr:"US",name:"MaskData",vm:"1-n",version:"PrivateTag"},'(6001-o-60ff,"PAPYRUS 3.0",c0)':{tag:'(6001-o-60ff,"PAPYRUS 3.0",c0)',vr:"SQ",name:"UINOverlaySequence",vm:"1",version:"PrivateTag"},'(0009,"PAPYRUS",00)':{tag:'(0009,"PAPYRUS",00)',vr:"LT",name:"OriginalFileName",vm:"1",version:"PrivateTag"},'(0009,"PAPYRUS",10)':{tag:'(0009,"PAPYRUS",10)',vr:"LT",name:"OriginalFileLocation",vm:"1",version:"PrivateTag"},'(0009,"PAPYRUS",18)':{tag:'(0009,"PAPYRUS",18)',vr:"LT",name:"DataSetIdentifier",vm:"1",version:"PrivateTag"},'(0041,"PAPYRUS",00)':{tag:'(0041,"PAPYRUS",00)',vr:"LT",name:"PapyrusComments",vm:"1-n",version:"PrivateTag"},'(0041,"PAPYRUS",10)':{tag:'(0041,"PAPYRUS",10)',vr:"US",name:"FolderType",vm:"1",version:"PrivateTag"},'(0041,"PAPYRUS",11)':{tag:'(0041,"PAPYRUS",11)',vr:"LT",name:"PatientFolderDataSetID",vm:"1",version:"PrivateTag"},'(0041,"PAPYRUS",20)':{tag:'(0041,"PAPYRUS",20)',vr:"LT",name:"FolderName",vm:"1",version:"PrivateTag"},'(0041,"PAPYRUS",30)':{tag:'(0041,"PAPYRUS",30)',vr:"DA",name:"CreationDate",vm:"1",version:"PrivateTag"},'(0041,"PAPYRUS",32)':{tag:'(0041,"PAPYRUS",32)',vr:"TM",name:"CreationTime",vm:"1",version:"PrivateTag"},'(0041,"PAPYRUS",34)':{tag:'(0041,"PAPYRUS",34)',vr:"DA",name:"ModifiedDate",vm:"1",version:"PrivateTag"},'(0041,"PAPYRUS",36)':{tag:'(0041,"PAPYRUS",36)',vr:"TM",name:"ModifiedTime",vm:"1",version:"PrivateTag"},'(0041,"PAPYRUS",40)':{tag:'(0041,"PAPYRUS",40)',vr:"LT",name:"OwnerName",vm:"1-n",version:"PrivateTag"},'(0041,"PAPYRUS",50)':{tag:'(0041,"PAPYRUS",50)',vr:"LT",name:"FolderStatus",vm:"1",version:"PrivateTag"},'(0041,"PAPYRUS",60)':{tag:'(0041,"PAPYRUS",60)',vr:"UL",name:"NumberOfImages",vm:"1",version:"PrivateTag"},'(0041,"PAPYRUS",62)':{tag:'(0041,"PAPYRUS",62)',vr:"UL",name:"NumberOfOther",vm:"1",version:"PrivateTag"},'(0041,"PAPYRUS",a0)':{tag:'(0041,"PAPYRUS",a0)',vr:"LT",name:"ExternalFolderElementDSID",vm:"1-n",version:"PrivateTag"},'(0041,"PAPYRUS",a1)':{tag:'(0041,"PAPYRUS",a1)',vr:"US",name:"ExternalFolderElementDataSetType",vm:"1-n",version:"PrivateTag"},'(0041,"PAPYRUS",a2)':{tag:'(0041,"PAPYRUS",a2)',vr:"LT",name:"ExternalFolderElementFileLocation",vm:"1-n",version:"PrivateTag"},'(0041,"PAPYRUS",a3)':{tag:'(0041,"PAPYRUS",a3)',vr:"UL",name:"ExternalFolderElementLength",vm:"1-n",version:"PrivateTag"},'(0041,"PAPYRUS",b0)':{tag:'(0041,"PAPYRUS",b0)',vr:"LT",name:"InternalFolderElementDSID",vm:"1-n",version:"PrivateTag"},'(0041,"PAPYRUS",b1)':{tag:'(0041,"PAPYRUS",b1)',vr:"US",name:"InternalFolderElementDataSetType",vm:"1-n",version:"PrivateTag"},'(0041,"PAPYRUS",b2)':{tag:'(0041,"PAPYRUS",b2)',vr:"UL",name:"InternalOffsetToDataSet",vm:"1-n",version:"PrivateTag"},'(0041,"PAPYRUS",b3)':{tag:'(0041,"PAPYRUS",b3)',vr:"UL",name:"InternalOffsetToImage",vm:"1-n",version:"PrivateTag"},'(2001,"Philips Imaging DD 001",01)':{tag:'(2001,"Philips Imaging DD 001",01)',vr:"FL",name:"ChemicalShift",vm:"1",version:"PrivateTag"},'(2001,"Philips Imaging DD 001",02)':{tag:'(2001,"Philips Imaging DD 001",02)',vr:"IS",name:"ChemicalShiftNumberMR",vm:"1",version:"PrivateTag"},'(2001,"Philips Imaging DD 001",03)':{tag:'(2001,"Philips Imaging DD 001",03)',vr:"FL",name:"DiffusionBFactor",vm:"1",version:"PrivateTag"},'(2001,"Philips Imaging DD 001",04)':{tag:'(2001,"Philips Imaging DD 001",04)',vr:"CS",name:"DiffusionDirection",vm:"1",version:"PrivateTag"},'(2001,"Philips Imaging DD 001",06)':{tag:'(2001,"Philips Imaging DD 001",06)',vr:"CS",name:"ImageEnhanced",vm:"1",version:"PrivateTag"},'(2001,"Philips Imaging DD 001",07)':{tag:'(2001,"Philips Imaging DD 001",07)',vr:"CS",name:"ImageTypeEDES",vm:"1",version:"PrivateTag"},'(2001,"Philips Imaging DD 001",08)':{tag:'(2001,"Philips Imaging DD 001",08)',vr:"IS",name:"PhaseNumber",vm:"1",version:"PrivateTag"},'(2001,"Philips Imaging DD 001",09)':{tag:'(2001,"Philips Imaging DD 001",09)',vr:"FL",name:"ImagePrepulseDelay",vm:"1",version:"PrivateTag"},'(2001,"Philips Imaging DD 001",0a)':{tag:'(2001,"Philips Imaging DD 001",0a)',vr:"IS",name:"SliceNumberMR",vm:"1",version:"PrivateTag"},'(2001,"Philips Imaging DD 001",0b)':{tag:'(2001,"Philips Imaging DD 001",0b)',vr:"CS",name:"SliceOrientation",vm:"1",version:"PrivateTag"},'(2001,"Philips Imaging DD 001",0c)':{tag:'(2001,"Philips Imaging DD 001",0c)',vr:"CS",name:"ArrhythmiaRejection",vm:"1",version:"PrivateTag"},'(2001,"Philips Imaging DD 001",0e)':{tag:'(2001,"Philips Imaging DD 001",0e)',vr:"CS",name:"CardiacCycled",vm:"1",version:"PrivateTag"},'(2001,"Philips Imaging DD 001",0f)':{tag:'(2001,"Philips Imaging DD 001",0f)',vr:"SS",name:"CardiacGateWidth",vm:"1",version:"PrivateTag"},'(2001,"Philips Imaging DD 001",10)':{tag:'(2001,"Philips Imaging DD 001",10)',vr:"CS",name:"CardiacSync",vm:"1",version:"PrivateTag"},'(2001,"Philips Imaging DD 001",11)':{tag:'(2001,"Philips Imaging DD 001",11)',vr:"FL",name:"DiffusionEchoTime",vm:"1",version:"PrivateTag"},'(2001,"Philips Imaging DD 001",12)':{tag:'(2001,"Philips Imaging DD 001",12)',vr:"CS",name:"DynamicSeries",vm:"1",version:"PrivateTag"},'(2001,"Philips Imaging DD 001",13)':{tag:'(2001,"Philips Imaging DD 001",13)',vr:"SL",name:"EPIFactor",vm:"1",version:"PrivateTag"},'(2001,"Philips Imaging DD 001",14)':{tag:'(2001,"Philips Imaging DD 001",14)',vr:"SL",name:"NumberOfEchoes",vm:"1",version:"PrivateTag"},'(2001,"Philips Imaging DD 001",15)':{tag:'(2001,"Philips Imaging DD 001",15)',vr:"SS",name:"NumberOfLocations",vm:"1",version:"PrivateTag"},'(2001,"Philips Imaging DD 001",16)':{tag:'(2001,"Philips Imaging DD 001",16)',vr:"SS",name:"NumberOfPCDirections",vm:"1",version:"PrivateTag"},'(2001,"Philips Imaging DD 001",17)':{tag:'(2001,"Philips Imaging DD 001",17)',vr:"SL",name:"NumberOfPhasesMR",vm:"1",version:"PrivateTag"},'(2001,"Philips Imaging DD 001",18)':{tag:'(2001,"Philips Imaging DD 001",18)',vr:"SL",name:"NumberOfSlicesMR",vm:"1",version:"PrivateTag"},'(2001,"Philips Imaging DD 001",19)':{tag:'(2001,"Philips Imaging DD 001",19)',vr:"CS",name:"PartialMatrixScanned",vm:"1",version:"PrivateTag"},'(2001,"Philips Imaging DD 001",1a)':{tag:'(2001,"Philips Imaging DD 001",1a)',vr:"FL",name:"PCVelocity",vm:"1-n",version:"PrivateTag"},'(2001,"Philips Imaging DD 001",1b)':{tag:'(2001,"Philips Imaging DD 001",1b)',vr:"FL",name:"PrepulseDelay",vm:"1",version:"PrivateTag"},'(2001,"Philips Imaging DD 001",1c)':{tag:'(2001,"Philips Imaging DD 001",1c)',vr:"CS",name:"PrepulseType",vm:"1",version:"PrivateTag"},'(2001,"Philips Imaging DD 001",1d)':{tag:'(2001,"Philips Imaging DD 001",1d)',vr:"IS",name:"ReconstructionNumberMR",vm:"1",version:"PrivateTag"},'(2001,"Philips Imaging DD 001",1f)':{tag:'(2001,"Philips Imaging DD 001",1f)',vr:"CS",name:"RespirationSync",vm:"1",version:"PrivateTag"},'(2001,"Philips Imaging DD 001",20)':{tag:'(2001,"Philips Imaging DD 001",20)',vr:"LO",name:"ScanningTechnique",vm:"1",version:"PrivateTag"},'(2001,"Philips Imaging DD 001",21)':{tag:'(2001,"Philips Imaging DD 001",21)',vr:"CS",name:"SPIR",vm:"1",version:"PrivateTag"},'(2001,"Philips Imaging DD 001",22)':{tag:'(2001,"Philips Imaging DD 001",22)',vr:"FL",name:"WaterFatShift",vm:"1",version:"PrivateTag"},'(2001,"Philips Imaging DD 001",23)':{tag:'(2001,"Philips Imaging DD 001",23)',vr:"DS",name:"FlipAnglePhilips",vm:"1",version:"PrivateTag"},'(2001,"Philips Imaging DD 001",24)':{tag:'(2001,"Philips Imaging DD 001",24)',vr:"CS",name:"SeriesIsInteractive",vm:"1",version:"PrivateTag"},'(2001,"Philips Imaging DD 001",25)':{tag:'(2001,"Philips Imaging DD 001",25)',vr:"SH",name:"EchoTimeDisplayMR",vm:"1",version:"PrivateTag"},'(2001,"Philips Imaging DD 001",26)':{tag:'(2001,"Philips Imaging DD 001",26)',vr:"CS",name:"PresentationStateSubtractionActive",vm:"1",version:"PrivateTag"},'(2001,"Philips Imaging DD 001",2d)':{tag:'(2001,"Philips Imaging DD 001",2d)',vr:"SS",name:"StackNumberOfSlices",vm:"1",version:"PrivateTag"},'(2001,"Philips Imaging DD 001",32)':{tag:'(2001,"Philips Imaging DD 001",32)',vr:"FL",name:"StackRadialAngle",vm:"1",version:"PrivateTag"},'(2001,"Philips Imaging DD 001",33)':{tag:'(2001,"Philips Imaging DD 001",33)',vr:"CS",name:"StackRadialAxis",vm:"1",version:"PrivateTag"},'(2001,"Philips Imaging DD 001",35)':{tag:'(2001,"Philips Imaging DD 001",35)',vr:"SS",name:"StackSliceNumber",vm:"1",version:"PrivateTag"},'(2001,"Philips Imaging DD 001",36)':{tag:'(2001,"Philips Imaging DD 001",36)',vr:"CS",name:"StackType",vm:"1",version:"PrivateTag"},'(2001,"Philips Imaging DD 001",3f)':{tag:'(2001,"Philips Imaging DD 001",3f)',vr:"CS",name:"ZoomMode",vm:"1",version:"PrivateTag"},'(2001,"Philips Imaging DD 001",58)':{tag:'(2001,"Philips Imaging DD 001",58)',vr:"UL",name:"ContrastTransferTaste",vm:"1",version:"PrivateTag"},'(2001,"Philips Imaging DD 001",5f)':{tag:'(2001,"Philips Imaging DD 001",5f)',vr:"SQ",name:"StackSequence",vm:"1",version:"PrivateTag"},'(2001,"Philips Imaging DD 001",60)':{tag:'(2001,"Philips Imaging DD 001",60)',vr:"SL",name:"NumberOfStacks",vm:"1",version:"PrivateTag"},'(2001,"Philips Imaging DD 001",61)':{tag:'(2001,"Philips Imaging DD 001",61)',vr:"CS",name:"SeriesTransmitted",vm:"1",version:"PrivateTag"},'(2001,"Philips Imaging DD 001",62)':{tag:'(2001,"Philips Imaging DD 001",62)',vr:"CS",name:"SeriesCommitted",vm:"1",version:"PrivateTag"},'(2001,"Philips Imaging DD 001",63)':{tag:'(2001,"Philips Imaging DD 001",63)',vr:"CS",name:"ExaminationSource",vm:"1",version:"PrivateTag"},'(2001,"Philips Imaging DD 001",67)':{tag:'(2001,"Philips Imaging DD 001",67)',vr:"CS",name:"LinearPresentationGLTrafoShapeSub",vm:"1",version:"PrivateTag"},'(2001,"Philips Imaging DD 001",77)':{tag:'(2001,"Philips Imaging DD 001",77)',vr:"CS",name:"GLTrafoType",vm:"1",version:"PrivateTag"},'(2001,"Philips Imaging DD 001",7b)':{tag:'(2001,"Philips Imaging DD 001",7b)',vr:"IS",name:"AcquisitionNumber",vm:"1",version:"PrivateTag"},'(2001,"Philips Imaging DD 001",81)':{tag:'(2001,"Philips Imaging DD 001",81)',vr:"IS",name:"NumberOfDynamicScans",vm:"1",version:"PrivateTag"},'(2001,"Philips Imaging DD 001",9f)':{tag:'(2001,"Philips Imaging DD 001",9f)',vr:"US",name:"PixelProcessingKernelSize",vm:"1",version:"PrivateTag"},'(2001,"Philips Imaging DD 001",a1)':{tag:'(2001,"Philips Imaging DD 001",a1)',vr:"CS",name:"IsRawImage",vm:"1",version:"PrivateTag"},'(2001,"Philips Imaging DD 001",f1)':{tag:'(2001,"Philips Imaging DD 001",f1)',vr:"FL",name:"ProspectiveMotionCorrection",vm:"1",version:"PrivateTag"},'(2001,"Philips Imaging DD 001",f2)':{tag:'(2001,"Philips Imaging DD 001",f2)',vr:"FL",name:"RetrospectiveMotionCorrection",vm:"1",version:"PrivateTag"},'(2001,"PHILIPS IMAGING DD 001",01)':{tag:'(2001,"PHILIPS IMAGING DD 001",01)',vr:"FL",name:"ChemicalShift",vm:"1",version:"PrivateTag"},'(2001,"PHILIPS IMAGING DD 001",02)':{tag:'(2001,"PHILIPS IMAGING DD 001",02)',vr:"IS",name:"ChemicalShiftNumberMR",vm:"1",version:"PrivateTag"},'(2001,"PHILIPS IMAGING DD 001",03)':{tag:'(2001,"PHILIPS IMAGING DD 001",03)',vr:"FL",name:"DiffusionBFactor",vm:"1",version:"PrivateTag"},'(2001,"PHILIPS IMAGING DD 001",04)':{tag:'(2001,"PHILIPS IMAGING DD 001",04)',vr:"CS",name:"DiffusionDirection",vm:"1",version:"PrivateTag"},'(2001,"PHILIPS IMAGING DD 001",06)':{tag:'(2001,"PHILIPS IMAGING DD 001",06)',vr:"CS",name:"ImageEnhanced",vm:"1",version:"PrivateTag"},'(2001,"PHILIPS IMAGING DD 001",07)':{tag:'(2001,"PHILIPS IMAGING DD 001",07)',vr:"CS",name:"ImageTypeEDES",vm:"1",version:"PrivateTag"},'(2001,"PHILIPS IMAGING DD 001",08)':{tag:'(2001,"PHILIPS IMAGING DD 001",08)',vr:"IS",name:"PhaseNumber",vm:"1",version:"PrivateTag"},'(2001,"PHILIPS IMAGING DD 001",09)':{tag:'(2001,"PHILIPS IMAGING DD 001",09)',vr:"FL",name:"ImagePrepulseDelay",vm:"1",version:"PrivateTag"},'(2001,"PHILIPS IMAGING DD 001",0a)':{tag:'(2001,"PHILIPS IMAGING DD 001",0a)',vr:"IS",name:"SliceNumberMR",vm:"1",version:"PrivateTag"},'(2001,"PHILIPS IMAGING DD 001",0b)':{tag:'(2001,"PHILIPS IMAGING DD 001",0b)',vr:"CS",name:"SliceOrientation",vm:"1",version:"PrivateTag"},'(2001,"PHILIPS IMAGING DD 001",0c)':{tag:'(2001,"PHILIPS IMAGING DD 001",0c)',vr:"CS",name:"ArrhythmiaRejection",vm:"1",version:"PrivateTag"},'(2001,"PHILIPS IMAGING DD 001",0e)':{tag:'(2001,"PHILIPS IMAGING DD 001",0e)',vr:"CS",name:"CardiacCycled",vm:"1",version:"PrivateTag"},'(2001,"PHILIPS IMAGING DD 001",0f)':{tag:'(2001,"PHILIPS IMAGING DD 001",0f)',vr:"SS",name:"CardiacGateWidth",vm:"1",version:"PrivateTag"},'(2001,"PHILIPS IMAGING DD 001",10)':{tag:'(2001,"PHILIPS IMAGING DD 001",10)',vr:"CS",name:"CardiacSync",vm:"1",version:"PrivateTag"},'(2001,"PHILIPS IMAGING DD 001",11)':{tag:'(2001,"PHILIPS IMAGING DD 001",11)',vr:"FL",name:"DiffusionEchoTime",vm:"1",version:"PrivateTag"},'(2001,"PHILIPS IMAGING DD 001",12)':{tag:'(2001,"PHILIPS IMAGING DD 001",12)',vr:"CS",name:"DynamicSeries",vm:"1",version:"PrivateTag"},'(2001,"PHILIPS IMAGING DD 001",13)':{tag:'(2001,"PHILIPS IMAGING DD 001",13)',vr:"SL",name:"EPIFactor",vm:"1",version:"PrivateTag"},'(2001,"PHILIPS IMAGING DD 001",14)':{tag:'(2001,"PHILIPS IMAGING DD 001",14)',vr:"SL",name:"NumberOfEchoes",vm:"1",version:"PrivateTag"},'(2001,"PHILIPS IMAGING DD 001",15)':{tag:'(2001,"PHILIPS IMAGING DD 001",15)',vr:"SS",name:"NumberOfLocations",vm:"1",version:"PrivateTag"},'(2001,"PHILIPS IMAGING DD 001",16)':{tag:'(2001,"PHILIPS IMAGING DD 001",16)',vr:"SS",name:"NumberOfPCDirections",vm:"1",version:"PrivateTag"},'(2001,"PHILIPS IMAGING DD 001",17)':{tag:'(2001,"PHILIPS IMAGING DD 001",17)',vr:"SL",name:"NumberOfPhasesMR",vm:"1",version:"PrivateTag"},'(2001,"PHILIPS IMAGING DD 001",18)':{tag:'(2001,"PHILIPS IMAGING DD 001",18)',vr:"SL",name:"NumberOfSlicesMR",vm:"1",version:"PrivateTag"},'(2001,"PHILIPS IMAGING DD 001",19)':{tag:'(2001,"PHILIPS IMAGING DD 001",19)',vr:"CS",name:"PartialMatrixScanned",vm:"1",version:"PrivateTag"},'(2001,"PHILIPS IMAGING DD 001",1a)':{tag:'(2001,"PHILIPS IMAGING DD 001",1a)',vr:"FL",name:"PCVelocity",vm:"1-n",version:"PrivateTag"},'(2001,"PHILIPS IMAGING DD 001",1b)':{tag:'(2001,"PHILIPS IMAGING DD 001",1b)',vr:"FL",name:"PrepulseDelay",vm:"1",version:"PrivateTag"},'(2001,"PHILIPS IMAGING DD 001",1c)':{tag:'(2001,"PHILIPS IMAGING DD 001",1c)',vr:"CS",name:"PrepulseType",vm:"1",version:"PrivateTag"},'(2001,"PHILIPS IMAGING DD 001",1d)':{tag:'(2001,"PHILIPS IMAGING DD 001",1d)',vr:"IS",name:"ReconstructionNumberMR",vm:"1",version:"PrivateTag"},'(2001,"PHILIPS IMAGING DD 001",1f)':{tag:'(2001,"PHILIPS IMAGING DD 001",1f)',vr:"CS",name:"RespirationSync",vm:"1",version:"PrivateTag"},'(2001,"PHILIPS IMAGING DD 001",20)':{tag:'(2001,"PHILIPS IMAGING DD 001",20)',vr:"LO",name:"ScanningTechnique",vm:"1",version:"PrivateTag"},'(2001,"PHILIPS IMAGING DD 001",21)':{tag:'(2001,"PHILIPS IMAGING DD 001",21)',vr:"CS",name:"SPIR",vm:"1",version:"PrivateTag"},'(2001,"PHILIPS IMAGING DD 001",22)':{tag:'(2001,"PHILIPS IMAGING DD 001",22)',vr:"FL",name:"WaterFatShift",vm:"1",version:"PrivateTag"},'(2001,"PHILIPS IMAGING DD 001",23)':{tag:'(2001,"PHILIPS IMAGING DD 001",23)',vr:"DS",name:"FlipAnglePhilips",vm:"1",version:"PrivateTag"},'(2001,"PHILIPS IMAGING DD 001",24)':{tag:'(2001,"PHILIPS IMAGING DD 001",24)',vr:"CS",name:"SeriesIsInteractive",vm:"1",version:"PrivateTag"},'(2001,"PHILIPS IMAGING DD 001",25)':{tag:'(2001,"PHILIPS IMAGING DD 001",25)',vr:"SH",name:"EchoTimeDisplayMR",vm:"1",version:"PrivateTag"},'(2001,"PHILIPS IMAGING DD 001",26)':{tag:'(2001,"PHILIPS IMAGING DD 001",26)',vr:"CS",name:"PresentationStateSubtractionActive",vm:"1",version:"PrivateTag"},'(2001,"PHILIPS IMAGING DD 001",2d)':{tag:'(2001,"PHILIPS IMAGING DD 001",2d)',vr:"SS",name:"StackNumberOfSlices",vm:"1",version:"PrivateTag"},'(2001,"PHILIPS IMAGING DD 001",32)':{tag:'(2001,"PHILIPS IMAGING DD 001",32)',vr:"FL",name:"StackRadialAngle",vm:"1",version:"PrivateTag"},'(2001,"PHILIPS IMAGING DD 001",33)':{tag:'(2001,"PHILIPS IMAGING DD 001",33)',vr:"CS",name:"StackRadialAxis",vm:"1",version:"PrivateTag"},'(2001,"PHILIPS IMAGING DD 001",35)':{tag:'(2001,"PHILIPS IMAGING DD 001",35)',vr:"SS",name:"StackSliceNumber",vm:"1",version:"PrivateTag"},'(2001,"PHILIPS IMAGING DD 001",36)':{tag:'(2001,"PHILIPS IMAGING DD 001",36)',vr:"CS",name:"StackType",vm:"1",version:"PrivateTag"},'(2001,"PHILIPS IMAGING DD 001",3f)':{tag:'(2001,"PHILIPS IMAGING DD 001",3f)',vr:"CS",name:"ZoomMode",vm:"1",version:"PrivateTag"},'(2001,"PHILIPS IMAGING DD 001",58)':{tag:'(2001,"PHILIPS IMAGING DD 001",58)',vr:"UL",name:"ContrastTransferTaste",vm:"1",version:"PrivateTag"},'(2001,"PHILIPS IMAGING DD 001",5f)':{tag:'(2001,"PHILIPS IMAGING DD 001",5f)',vr:"SQ",name:"StackSequence",vm:"1",version:"PrivateTag"},'(2001,"PHILIPS IMAGING DD 001",60)':{tag:'(2001,"PHILIPS IMAGING DD 001",60)',vr:"SL",name:"NumberOfStacks",vm:"1",version:"PrivateTag"},'(2001,"PHILIPS IMAGING DD 001",61)':{tag:'(2001,"PHILIPS IMAGING DD 001",61)',vr:"CS",name:"SeriesTransmitted",vm:"1",version:"PrivateTag"},'(2001,"PHILIPS IMAGING DD 001",62)':{tag:'(2001,"PHILIPS IMAGING DD 001",62)',vr:"CS",name:"SeriesCommitted",vm:"1",version:"PrivateTag"},'(2001,"PHILIPS IMAGING DD 001",63)':{tag:'(2001,"PHILIPS IMAGING DD 001",63)',vr:"CS",name:"ExaminationSource",vm:"1",version:"PrivateTag"},'(2001,"PHILIPS IMAGING DD 001",67)':{tag:'(2001,"PHILIPS IMAGING DD 001",67)',vr:"CS",name:"LinearPresentationGLTrafoShapeSub",vm:"1",version:"PrivateTag"},'(2001,"PHILIPS IMAGING DD 001",77)':{tag:'(2001,"PHILIPS IMAGING DD 001",77)',vr:"CS",name:"GLTrafoType",vm:"1",version:"PrivateTag"},'(2001,"PHILIPS IMAGING DD 001",7b)':{tag:'(2001,"PHILIPS IMAGING DD 001",7b)',vr:"IS",name:"AcquisitionNumber",vm:"1",version:"PrivateTag"},'(2001,"PHILIPS IMAGING DD 001",81)':{tag:'(2001,"PHILIPS IMAGING DD 001",81)',vr:"IS",name:"NumberOfDynamicScans",vm:"1",version:"PrivateTag"},'(2001,"PHILIPS IMAGING DD 001",9f)':{tag:'(2001,"PHILIPS IMAGING DD 001",9f)',vr:"US",name:"PixelProcessingKernelSize",vm:"1",version:"PrivateTag"},'(2001,"PHILIPS IMAGING DD 001",a1)':{tag:'(2001,"PHILIPS IMAGING DD 001",a1)',vr:"CS",name:"IsRawImage",vm:"1",version:"PrivateTag"},'(2001,"PHILIPS IMAGING DD 001",f1)':{tag:'(2001,"PHILIPS IMAGING DD 001",f1)',vr:"FL",name:"ProspectiveMotionCorrection",vm:"1",version:"PrivateTag"},'(2001,"PHILIPS IMAGING DD 001",f2)':{tag:'(2001,"PHILIPS IMAGING DD 001",f2)',vr:"FL",name:"RetrospectiveMotionCorrection",vm:"1",version:"PrivateTag"},'(2005,"Philips MR Imaging DD 001",05)':{tag:'(2005,"Philips MR Imaging DD 001",05)',vr:"CS",name:"SynergyReconstructionType",vm:"1",version:"PrivateTag"},'(2005,"Philips MR Imaging DD 001",1e)':{tag:'(2005,"Philips MR Imaging DD 001",1e)',vr:"SH",name:"MIPProtocol",vm:"1",version:"PrivateTag"},'(2005,"Philips MR Imaging DD 001",1f)':{tag:'(2005,"Philips MR Imaging DD 001",1f)',vr:"SH",name:"MPRProtocol",vm:"1",version:"PrivateTag"},'(2005,"Philips MR Imaging DD 001",20)':{tag:'(2005,"Philips MR Imaging DD 001",20)',vr:"SL",name:"NumberOfChemicalShifts",vm:"1",version:"PrivateTag"},'(2005,"Philips MR Imaging DD 001",2d)':{tag:'(2005,"Philips MR Imaging DD 001",2d)',vr:"SS",name:"NumberOfStackSlices",vm:"1",version:"PrivateTag"},'(2005,"Philips MR Imaging DD 001",83)':{tag:'(2005,"Philips MR Imaging DD 001",83)',vr:"SQ",name:"Unknown",vm:"1",version:"PrivateTag"},'(2005,"Philips MR Imaging DD 001",a1)':{tag:'(2005,"Philips MR Imaging DD 001",a1)',vr:"CS",name:"SyncraScanType",vm:"1",version:"PrivateTag"},'(2005,"Philips MR Imaging DD 001",b0)':{tag:'(2005,"Philips MR Imaging DD 001",b0)',vr:"FL",name:"DiffusionDirectionRL",vm:"1",version:"PrivateTag"},'(2005,"Philips MR Imaging DD 001",b1)':{tag:'(2005,"Philips MR Imaging DD 001",b1)',vr:"FL",name:"DiffusionDirectionAP",vm:"1",version:"PrivateTag"},'(2005,"Philips MR Imaging DD 001",b2)':{tag:'(2005,"Philips MR Imaging DD 001",b2)',vr:"FL",name:"DiffusionDirectionFH",vm:"1",version:"PrivateTag"},'(2005,"Philips MR Imaging DD 005",02)':{tag:'(2005,"Philips MR Imaging DD 005",02)',vr:"SQ",name:"Unknown",vm:"1",version:"PrivateTag"},'(2005,"PHILIPS MR IMAGING DD 001",05)':{tag:'(2005,"PHILIPS MR IMAGING DD 001",05)',vr:"CS",name:"SynergyReconstructionType",vm:"1",version:"PrivateTag"},'(2005,"PHILIPS MR IMAGING DD 001",1e)':{tag:'(2005,"PHILIPS MR IMAGING DD 001",1e)',vr:"SH",name:"MIPProtocol",vm:"1",version:"PrivateTag"},'(2005,"PHILIPS MR IMAGING DD 001",1f)':{tag:'(2005,"PHILIPS MR IMAGING DD 001",1f)',vr:"SH",name:"MPRProtocol",vm:"1",version:"PrivateTag"},'(2005,"PHILIPS MR IMAGING DD 001",20)':{tag:'(2005,"PHILIPS MR IMAGING DD 001",20)',vr:"SL",name:"NumberOfChemicalShifts",vm:"1",version:"PrivateTag"},'(2005,"PHILIPS MR IMAGING DD 001",2d)':{tag:'(2005,"PHILIPS MR IMAGING DD 001",2d)',vr:"SS",name:"NumberOfStackSlices",vm:"1",version:"PrivateTag"},'(2005,"PHILIPS MR IMAGING DD 001",83)':{tag:'(2005,"PHILIPS MR IMAGING DD 001",83)',vr:"SQ",name:"Unknown",vm:"1",version:"PrivateTag"},'(2005,"PHILIPS MR IMAGING DD 001",a1)':{tag:'(2005,"PHILIPS MR IMAGING DD 001",a1)',vr:"CS",name:"SyncraScanType",vm:"1",version:"PrivateTag"},'(2005,"PHILIPS MR IMAGING DD 001",b0)':{tag:'(2005,"PHILIPS MR IMAGING DD 001",b0)',vr:"FL",name:"DiffusionDirectionRL",vm:"1",version:"PrivateTag"},'(2005,"PHILIPS MR IMAGING DD 001",b1)':{tag:'(2005,"PHILIPS MR IMAGING DD 001",b1)',vr:"FL",name:"DiffusionDirectionAP",vm:"1",version:"PrivateTag"},'(2005,"PHILIPS MR IMAGING DD 001",b2)':{tag:'(2005,"PHILIPS MR IMAGING DD 001",b2)',vr:"FL",name:"DiffusionDirectionFH",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR R5.5/PART",1000)':{tag:'(0019,"PHILIPS MR R5.5/PART",1000)',vr:"DS",name:"FieldOfView",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR R5.6/PART",1000)':{tag:'(0019,"PHILIPS MR R5.6/PART",1000)',vr:"DS",name:"FieldOfView",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR SPECTRO;1",01)':{tag:'(0019,"PHILIPS MR SPECTRO;1",01)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR SPECTRO;1",02)':{tag:'(0019,"PHILIPS MR SPECTRO;1",02)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR SPECTRO;1",03)':{tag:'(0019,"PHILIPS MR SPECTRO;1",03)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR SPECTRO;1",04)':{tag:'(0019,"PHILIPS MR SPECTRO;1",04)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR SPECTRO;1",05)':{tag:'(0019,"PHILIPS MR SPECTRO;1",05)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR SPECTRO;1",06)':{tag:'(0019,"PHILIPS MR SPECTRO;1",06)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR SPECTRO;1",07)':{tag:'(0019,"PHILIPS MR SPECTRO;1",07)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR SPECTRO;1",08)':{tag:'(0019,"PHILIPS MR SPECTRO;1",08)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR SPECTRO;1",09)':{tag:'(0019,"PHILIPS MR SPECTRO;1",09)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR SPECTRO;1",10)':{tag:'(0019,"PHILIPS MR SPECTRO;1",10)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR SPECTRO;1",12)':{tag:'(0019,"PHILIPS MR SPECTRO;1",12)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR SPECTRO;1",13)':{tag:'(0019,"PHILIPS MR SPECTRO;1",13)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR SPECTRO;1",14)':{tag:'(0019,"PHILIPS MR SPECTRO;1",14)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR SPECTRO;1",15)':{tag:'(0019,"PHILIPS MR SPECTRO;1",15)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"PHILIPS MR SPECTRO;1",16)':{tag:'(0019,"PHILIPS MR SPECTRO;1",16)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR SPECTRO;1",17)':{tag:'(0019,"PHILIPS MR SPECTRO;1",17)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR SPECTRO;1",18)':{tag:'(0019,"PHILIPS MR SPECTRO;1",18)',vr:"UN",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR SPECTRO;1",20)':{tag:'(0019,"PHILIPS MR SPECTRO;1",20)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR SPECTRO;1",21)':{tag:'(0019,"PHILIPS MR SPECTRO;1",21)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR SPECTRO;1",22)':{tag:'(0019,"PHILIPS MR SPECTRO;1",22)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR SPECTRO;1",23)':{tag:'(0019,"PHILIPS MR SPECTRO;1",23)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR SPECTRO;1",24)':{tag:'(0019,"PHILIPS MR SPECTRO;1",24)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR SPECTRO;1",25)':{tag:'(0019,"PHILIPS MR SPECTRO;1",25)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR SPECTRO;1",26)':{tag:'(0019,"PHILIPS MR SPECTRO;1",26)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR SPECTRO;1",27)':{tag:'(0019,"PHILIPS MR SPECTRO;1",27)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR SPECTRO;1",28)':{tag:'(0019,"PHILIPS MR SPECTRO;1",28)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR SPECTRO;1",29)':{tag:'(0019,"PHILIPS MR SPECTRO;1",29)',vr:"IS",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"PHILIPS MR SPECTRO;1",31)':{tag:'(0019,"PHILIPS MR SPECTRO;1",31)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR SPECTRO;1",32)':{tag:'(0019,"PHILIPS MR SPECTRO;1",32)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR SPECTRO;1",41)':{tag:'(0019,"PHILIPS MR SPECTRO;1",41)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR SPECTRO;1",42)':{tag:'(0019,"PHILIPS MR SPECTRO;1",42)',vr:"IS",name:"Unknown",vm:"2",version:"PrivateTag"},'(0019,"PHILIPS MR SPECTRO;1",43)':{tag:'(0019,"PHILIPS MR SPECTRO;1",43)',vr:"IS",name:"Unknown",vm:"2",version:"PrivateTag"},'(0019,"PHILIPS MR SPECTRO;1",45)':{tag:'(0019,"PHILIPS MR SPECTRO;1",45)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR SPECTRO;1",46)':{tag:'(0019,"PHILIPS MR SPECTRO;1",46)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR SPECTRO;1",47)':{tag:'(0019,"PHILIPS MR SPECTRO;1",47)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR SPECTRO;1",48)':{tag:'(0019,"PHILIPS MR SPECTRO;1",48)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR SPECTRO;1",49)':{tag:'(0019,"PHILIPS MR SPECTRO;1",49)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR SPECTRO;1",50)':{tag:'(0019,"PHILIPS MR SPECTRO;1",50)',vr:"UN",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR SPECTRO;1",60)':{tag:'(0019,"PHILIPS MR SPECTRO;1",60)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR SPECTRO;1",61)':{tag:'(0019,"PHILIPS MR SPECTRO;1",61)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR SPECTRO;1",70)':{tag:'(0019,"PHILIPS MR SPECTRO;1",70)',vr:"UN",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR SPECTRO;1",71)':{tag:'(0019,"PHILIPS MR SPECTRO;1",71)',vr:"IS",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"PHILIPS MR SPECTRO;1",72)':{tag:'(0019,"PHILIPS MR SPECTRO;1",72)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR SPECTRO;1",73)':{tag:'(0019,"PHILIPS MR SPECTRO;1",73)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR SPECTRO;1",74)':{tag:'(0019,"PHILIPS MR SPECTRO;1",74)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR SPECTRO;1",76)':{tag:'(0019,"PHILIPS MR SPECTRO;1",76)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR SPECTRO;1",77)':{tag:'(0019,"PHILIPS MR SPECTRO;1",77)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR SPECTRO;1",78)':{tag:'(0019,"PHILIPS MR SPECTRO;1",78)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR SPECTRO;1",79)':{tag:'(0019,"PHILIPS MR SPECTRO;1",79)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR SPECTRO;1",80)':{tag:'(0019,"PHILIPS MR SPECTRO;1",80)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"PHILIPS MR",10)':{tag:'(0009,"PHILIPS MR",10)',vr:"LO",name:"SPIRelease",vm:"1",version:"PrivateTag"},'(0009,"PHILIPS MR",12)':{tag:'(0009,"PHILIPS MR",12)',vr:"LO",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/LAST",09)':{tag:'(0019,"PHILIPS MR/LAST",09)',vr:"DS",name:"MainMagneticField",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/LAST",0e)':{tag:'(0019,"PHILIPS MR/LAST",0e)',vr:"IS",name:"FlowCompensation",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/LAST",b1)':{tag:'(0019,"PHILIPS MR/LAST",b1)',vr:"IS",name:"MinimumRRInterval",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/LAST",b2)':{tag:'(0019,"PHILIPS MR/LAST",b2)',vr:"IS",name:"MaximumRRInterval",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/LAST",b3)':{tag:'(0019,"PHILIPS MR/LAST",b3)',vr:"IS",name:"NumberOfRejections",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/LAST",b4)':{tag:'(0019,"PHILIPS MR/LAST",b4)',vr:"IS",name:"NumberOfRRIntervals",vm:"1-n",version:"PrivateTag"},'(0019,"PHILIPS MR/LAST",b5)':{tag:'(0019,"PHILIPS MR/LAST",b5)',vr:"IS",name:"ArrhythmiaRejection",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/LAST",c0)':{tag:'(0019,"PHILIPS MR/LAST",c0)',vr:"DS",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"PHILIPS MR/LAST",c6)':{tag:'(0019,"PHILIPS MR/LAST",c6)',vr:"IS",name:"CycledMultipleSlice",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/LAST",ce)':{tag:'(0019,"PHILIPS MR/LAST",ce)',vr:"IS",name:"REST",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/LAST",d5)':{tag:'(0019,"PHILIPS MR/LAST",d5)',vr:"DS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/LAST",d6)':{tag:'(0019,"PHILIPS MR/LAST",d6)',vr:"IS",name:"FourierInterpolation",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/LAST",d9)':{tag:'(0019,"PHILIPS MR/LAST",d9)',vr:"IS",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"PHILIPS MR/LAST",e0)':{tag:'(0019,"PHILIPS MR/LAST",e0)',vr:"IS",name:"Prepulse",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/LAST",e1)':{tag:'(0019,"PHILIPS MR/LAST",e1)',vr:"DS",name:"PrepulseDelay",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/LAST",e2)':{tag:'(0019,"PHILIPS MR/LAST",e2)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/LAST",e3)':{tag:'(0019,"PHILIPS MR/LAST",e3)',vr:"DS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/LAST",f0)':{tag:'(0019,"PHILIPS MR/LAST",f0)',vr:"LT",name:"WSProtocolString1",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/LAST",f1)':{tag:'(0019,"PHILIPS MR/LAST",f1)',vr:"LT",name:"WSProtocolString2",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/LAST",f2)':{tag:'(0019,"PHILIPS MR/LAST",f2)',vr:"LT",name:"WSProtocolString3",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/LAST",f3)':{tag:'(0019,"PHILIPS MR/LAST",f3)',vr:"LT",name:"WSProtocolString4",vm:"1",version:"PrivateTag"},'(0021,"PHILIPS MR/LAST",00)':{tag:'(0021,"PHILIPS MR/LAST",00)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0021,"PHILIPS MR/LAST",10)':{tag:'(0021,"PHILIPS MR/LAST",10)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0021,"PHILIPS MR/LAST",20)':{tag:'(0021,"PHILIPS MR/LAST",20)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0021,"PHILIPS MR/LAST",21)':{tag:'(0021,"PHILIPS MR/LAST",21)',vr:"DS",name:"SliceGap",vm:"1",version:"PrivateTag"},'(0021,"PHILIPS MR/LAST",22)':{tag:'(0021,"PHILIPS MR/LAST",22)',vr:"DS",name:"StackRadialAngle",vm:"1",version:"PrivateTag"},'(0027,"PHILIPS MR/LAST",00)':{tag:'(0027,"PHILIPS MR/LAST",00)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0027,"PHILIPS MR/LAST",11)':{tag:'(0027,"PHILIPS MR/LAST",11)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0027,"PHILIPS MR/LAST",12)':{tag:'(0027,"PHILIPS MR/LAST",12)',vr:"DS",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0027,"PHILIPS MR/LAST",13)':{tag:'(0027,"PHILIPS MR/LAST",13)',vr:"DS",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0027,"PHILIPS MR/LAST",14)':{tag:'(0027,"PHILIPS MR/LAST",14)',vr:"DS",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0027,"PHILIPS MR/LAST",15)':{tag:'(0027,"PHILIPS MR/LAST",15)',vr:"DS",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0027,"PHILIPS MR/LAST",16)':{tag:'(0027,"PHILIPS MR/LAST",16)',vr:"LO",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"PHILIPS MR/LAST",10)':{tag:'(0029,"PHILIPS MR/LAST",10)',vr:"DS",name:"FPMin",vm:"1",version:"PrivateTag"},'(0029,"PHILIPS MR/LAST",20)':{tag:'(0029,"PHILIPS MR/LAST",20)',vr:"DS",name:"FPMax",vm:"1",version:"PrivateTag"},'(0029,"PHILIPS MR/LAST",30)':{tag:'(0029,"PHILIPS MR/LAST",30)',vr:"DS",name:"ScaledMinimum",vm:"1",version:"PrivateTag"},'(0029,"PHILIPS MR/LAST",40)':{tag:'(0029,"PHILIPS MR/LAST",40)',vr:"DS",name:"ScaledMaximum",vm:"1",version:"PrivateTag"},'(0029,"PHILIPS MR/LAST",50)':{tag:'(0029,"PHILIPS MR/LAST",50)',vr:"DS",name:"WindowMinimum",vm:"1",version:"PrivateTag"},'(0029,"PHILIPS MR/LAST",60)':{tag:'(0029,"PHILIPS MR/LAST",60)',vr:"DS",name:"WindowMaximum",vm:"1",version:"PrivateTag"},'(0029,"PHILIPS MR/LAST",61)':{tag:'(0029,"PHILIPS MR/LAST",61)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"PHILIPS MR/LAST",70)':{tag:'(0029,"PHILIPS MR/LAST",70)',vr:"DS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"PHILIPS MR/LAST",71)':{tag:'(0029,"PHILIPS MR/LAST",71)',vr:"DS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"PHILIPS MR/LAST",72)':{tag:'(0029,"PHILIPS MR/LAST",72)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"PHILIPS MR/LAST",80)':{tag:'(0029,"PHILIPS MR/LAST",80)',vr:"IS",name:"ViewCenter",vm:"1",version:"PrivateTag"},'(0029,"PHILIPS MR/LAST",81)':{tag:'(0029,"PHILIPS MR/LAST",81)',vr:"IS",name:"ViewSize",vm:"1",version:"PrivateTag"},'(0029,"PHILIPS MR/LAST",82)':{tag:'(0029,"PHILIPS MR/LAST",82)',vr:"IS",name:"ViewZoom",vm:"1",version:"PrivateTag"},'(0029,"PHILIPS MR/LAST",83)':{tag:'(0029,"PHILIPS MR/LAST",83)',vr:"IS",name:"ViewTransform",vm:"1",version:"PrivateTag"},'(6001,"PHILIPS MR/LAST",00)':{tag:'(6001,"PHILIPS MR/LAST",00)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",1000)':{tag:'(0019,"PHILIPS MR/PART",1000)',vr:"DS",name:"FieldOfView",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",1005)':{tag:'(0019,"PHILIPS MR/PART",1005)',vr:"DS",name:"CCAngulation",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",1006)':{tag:'(0019,"PHILIPS MR/PART",1006)',vr:"DS",name:"APAngulation",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",1007)':{tag:'(0019,"PHILIPS MR/PART",1007)',vr:"DS",name:"LRAngulation",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",1008)':{tag:'(0019,"PHILIPS MR/PART",1008)',vr:"IS",name:"PatientPosition",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",1009)':{tag:'(0019,"PHILIPS MR/PART",1009)',vr:"IS",name:"PatientOrientation",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",100a)':{tag:'(0019,"PHILIPS MR/PART",100a)',vr:"IS",name:"SliceOrientation",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",100b)':{tag:'(0019,"PHILIPS MR/PART",100b)',vr:"DS",name:"LROffcenter",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",100c)':{tag:'(0019,"PHILIPS MR/PART",100c)',vr:"DS",name:"CCOffcenter",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",100d)':{tag:'(0019,"PHILIPS MR/PART",100d)',vr:"DS",name:"APOffcenter",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",100e)':{tag:'(0019,"PHILIPS MR/PART",100e)',vr:"DS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",100f)':{tag:'(0019,"PHILIPS MR/PART",100f)',vr:"IS",name:"NumberOfSlices",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",1010)':{tag:'(0019,"PHILIPS MR/PART",1010)',vr:"DS",name:"SliceFactor",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",1011)':{tag:'(0019,"PHILIPS MR/PART",1011)',vr:"DS",name:"EchoTimes",vm:"1-n",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",1015)':{tag:'(0019,"PHILIPS MR/PART",1015)',vr:"IS",name:"DynamicStudy",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",1018)':{tag:'(0019,"PHILIPS MR/PART",1018)',vr:"DS",name:"HeartbeatInterval",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",1019)':{tag:'(0019,"PHILIPS MR/PART",1019)',vr:"DS",name:"RepetitionTimeFFE",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",101a)':{tag:'(0019,"PHILIPS MR/PART",101a)',vr:"DS",name:"FFEFlipAngle",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",101b)':{tag:'(0019,"PHILIPS MR/PART",101b)',vr:"IS",name:"NumberOfScans",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",1021)':{tag:'(0019,"PHILIPS MR/PART",1021)',vr:"DS",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",1022)':{tag:'(0019,"PHILIPS MR/PART",1022)',vr:"DS",name:"DynamicScanTimeBegin",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",1024)':{tag:'(0019,"PHILIPS MR/PART",1024)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",1064)':{tag:'(0019,"PHILIPS MR/PART",1064)',vr:"DS",name:"RepetitionTimeSE",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",1065)':{tag:'(0019,"PHILIPS MR/PART",1065)',vr:"DS",name:"RepetitionTimeIR",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",1069)':{tag:'(0019,"PHILIPS MR/PART",1069)',vr:"IS",name:"NumberOfPhases",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",106a)':{tag:'(0019,"PHILIPS MR/PART",106a)',vr:"IS",name:"CardiacFrequency",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",106b)':{tag:'(0019,"PHILIPS MR/PART",106b)',vr:"DS",name:"InversionDelay",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",106c)':{tag:'(0019,"PHILIPS MR/PART",106c)',vr:"DS",name:"GateDelay",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",106d)':{tag:'(0019,"PHILIPS MR/PART",106d)',vr:"DS",name:"GateWidth",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",106e)':{tag:'(0019,"PHILIPS MR/PART",106e)',vr:"DS",name:"TriggerDelayTime",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",1080)':{tag:'(0019,"PHILIPS MR/PART",1080)',vr:"IS",name:"NumberOfChemicalShifts",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",1081)':{tag:'(0019,"PHILIPS MR/PART",1081)',vr:"DS",name:"ChemicalShift",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",1084)':{tag:'(0019,"PHILIPS MR/PART",1084)',vr:"IS",name:"NumberOfRows",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",1085)':{tag:'(0019,"PHILIPS MR/PART",1085)',vr:"IS",name:"NumberOfSamples",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",1094)':{tag:'(0019,"PHILIPS MR/PART",1094)',vr:"LO",name:"MagnetizationTransferContrast",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",1095)':{tag:'(0019,"PHILIPS MR/PART",1095)',vr:"LO",name:"SpectralPresaturationWithInversionRecovery",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",1096)':{tag:'(0019,"PHILIPS MR/PART",1096)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",1097)':{tag:'(0019,"PHILIPS MR/PART",1097)',vr:"LO",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",10a0)':{tag:'(0019,"PHILIPS MR/PART",10a0)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",10a1)':{tag:'(0019,"PHILIPS MR/PART",10a1)',vr:"DS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",10a3)':{tag:'(0019,"PHILIPS MR/PART",10a3)',vr:"DS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",10a4)':{tag:'(0019,"PHILIPS MR/PART",10a4)',vr:"CS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",10c8)':{tag:'(0019,"PHILIPS MR/PART",10c8)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",10c9)':{tag:'(0019,"PHILIPS MR/PART",10c9)',vr:"IS",name:"FoldoverDirectionTransverse",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",10ca)':{tag:'(0019,"PHILIPS MR/PART",10ca)',vr:"IS",name:"FoldoverDirectionSagittal",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",10cb)':{tag:'(0019,"PHILIPS MR/PART",10cb)',vr:"IS",name:"FoldoverDirectionCoronal",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",10cc)':{tag:'(0019,"PHILIPS MR/PART",10cc)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",10cd)':{tag:'(0019,"PHILIPS MR/PART",10cd)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",10ce)':{tag:'(0019,"PHILIPS MR/PART",10ce)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",10cf)':{tag:'(0019,"PHILIPS MR/PART",10cf)',vr:"IS",name:"NumberOfEchoes",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",10d0)':{tag:'(0019,"PHILIPS MR/PART",10d0)',vr:"IS",name:"ScanResolution",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",10d2)':{tag:'(0019,"PHILIPS MR/PART",10d2)',vr:"LO",name:"WaterFatShift",vm:"2",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",10d4)':{tag:'(0019,"PHILIPS MR/PART",10d4)',vr:"IS",name:"ArtifactReduction",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",10d5)':{tag:'(0019,"PHILIPS MR/PART",10d5)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",10d6)':{tag:'(0019,"PHILIPS MR/PART",10d6)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",10d7)':{tag:'(0019,"PHILIPS MR/PART",10d7)',vr:"DS",name:"ScanPercentage",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",10d8)':{tag:'(0019,"PHILIPS MR/PART",10d8)',vr:"IS",name:"Halfscan",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",10d9)':{tag:'(0019,"PHILIPS MR/PART",10d9)',vr:"IS",name:"EPIFactor",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",10da)':{tag:'(0019,"PHILIPS MR/PART",10da)',vr:"IS",name:"TurboFactor",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",10db)':{tag:'(0019,"PHILIPS MR/PART",10db)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",10e0)':{tag:'(0019,"PHILIPS MR/PART",10e0)',vr:"IS",name:"PercentageOfScanCompleted",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",10e1)':{tag:'(0019,"PHILIPS MR/PART",10e1)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",1100)':{tag:'(0019,"PHILIPS MR/PART",1100)',vr:"IS",name:"NumberOfStacks",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",1101)':{tag:'(0019,"PHILIPS MR/PART",1101)',vr:"IS",name:"StackType",vm:"1-n",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",1102)':{tag:'(0019,"PHILIPS MR/PART",1102)',vr:"IS",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",110b)':{tag:'(0019,"PHILIPS MR/PART",110b)',vr:"DS",name:"LROffcenter",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",110c)':{tag:'(0019,"PHILIPS MR/PART",110c)',vr:"DS",name:"CCOffcenter",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",110d)':{tag:'(0019,"PHILIPS MR/PART",110d)',vr:"DS",name:"APOffcenter",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",1145)':{tag:'(0019,"PHILIPS MR/PART",1145)',vr:"IS",name:"ReconstructionResolution",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",11fc)':{tag:'(0019,"PHILIPS MR/PART",11fc)',vr:"IS",name:"ResonanceFrequency",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",12c0)':{tag:'(0019,"PHILIPS MR/PART",12c0)',vr:"DS",name:"TriggerDelayTimes",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",12e0)':{tag:'(0019,"PHILIPS MR/PART",12e0)',vr:"IS",name:"PrepulseType",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",12e1)':{tag:'(0019,"PHILIPS MR/PART",12e1)',vr:"DS",name:"PrepulseDelay",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS MR/PART",12e3)':{tag:'(0019,"PHILIPS MR/PART",12e3)',vr:"DS",name:"PhaseContrastVelocity",vm:"1",version:"PrivateTag"},'(0021,"PHILIPS MR/PART",1000)':{tag:'(0021,"PHILIPS MR/PART",1000)',vr:"IS",name:"ReconstructionNumber",vm:"1",version:"PrivateTag"},'(0021,"PHILIPS MR/PART",1010)':{tag:'(0021,"PHILIPS MR/PART",1010)',vr:"IS",name:"ImageType",vm:"1",version:"PrivateTag"},'(0021,"PHILIPS MR/PART",1020)':{tag:'(0021,"PHILIPS MR/PART",1020)',vr:"IS",name:"SliceNumber",vm:"1",version:"PrivateTag"},'(0021,"PHILIPS MR/PART",1030)':{tag:'(0021,"PHILIPS MR/PART",1030)',vr:"IS",name:"EchoNumber",vm:"1",version:"PrivateTag"},'(0021,"PHILIPS MR/PART",1031)':{tag:'(0021,"PHILIPS MR/PART",1031)',vr:"DS",name:"PatientReferenceID",vm:"1",version:"PrivateTag"},'(0021,"PHILIPS MR/PART",1035)':{tag:'(0021,"PHILIPS MR/PART",1035)',vr:"IS",name:"ChemicalShiftNumber",vm:"1",version:"PrivateTag"},'(0021,"PHILIPS MR/PART",1040)':{tag:'(0021,"PHILIPS MR/PART",1040)',vr:"IS",name:"PhaseNumber",vm:"1",version:"PrivateTag"},'(0021,"PHILIPS MR/PART",1050)':{tag:'(0021,"PHILIPS MR/PART",1050)',vr:"IS",name:"DynamicScanNumber",vm:"1",version:"PrivateTag"},'(0021,"PHILIPS MR/PART",1060)':{tag:'(0021,"PHILIPS MR/PART",1060)',vr:"IS",name:"NumberOfRowsInObject",vm:"1",version:"PrivateTag"},'(0021,"PHILIPS MR/PART",1061)':{tag:'(0021,"PHILIPS MR/PART",1061)',vr:"IS",name:"RowNumber",vm:"1-n",version:"PrivateTag"},'(0021,"PHILIPS MR/PART",1062)':{tag:'(0021,"PHILIPS MR/PART",1062)',vr:"IS",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0021,"PHILIPS MR/PART",1100)':{tag:'(0021,"PHILIPS MR/PART",1100)',vr:"DA",name:"ScanDate",vm:"1",version:"PrivateTag"},'(0021,"PHILIPS MR/PART",1110)':{tag:'(0021,"PHILIPS MR/PART",1110)',vr:"TM",name:"ScanTime",vm:"1",version:"PrivateTag"},'(0021,"PHILIPS MR/PART",1221)':{tag:'(0021,"PHILIPS MR/PART",1221)',vr:"IS",name:"SliceGap",vm:"1",version:"PrivateTag"},'(0029,"PHILIPS MR/PART",00)':{tag:'(0029,"PHILIPS MR/PART",00)',vr:"DS",name:"Unknown",vm:"2",version:"PrivateTag"},'(0029,"PHILIPS MR/PART",04)':{tag:'(0029,"PHILIPS MR/PART",04)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"PHILIPS MR/PART",10)':{tag:'(0029,"PHILIPS MR/PART",10)',vr:"DS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"PHILIPS MR/PART",11)':{tag:'(0029,"PHILIPS MR/PART",11)',vr:"DS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"PHILIPS MR/PART",20)':{tag:'(0029,"PHILIPS MR/PART",20)',vr:"LO",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"PHILIPS MR/PART",31)':{tag:'(0029,"PHILIPS MR/PART",31)',vr:"DS",name:"Unknown",vm:"2",version:"PrivateTag"},'(0029,"PHILIPS MR/PART",32)':{tag:'(0029,"PHILIPS MR/PART",32)',vr:"DS",name:"Unknown",vm:"2",version:"PrivateTag"},'(0029,"PHILIPS MR/PART",c3)':{tag:'(0029,"PHILIPS MR/PART",c3)',vr:"IS",name:"ScanResolution",vm:"1",version:"PrivateTag"},'(0029,"PHILIPS MR/PART",c4)':{tag:'(0029,"PHILIPS MR/PART",c4)',vr:"IS",name:"FieldOfView",vm:"1",version:"PrivateTag"},'(0029,"PHILIPS MR/PART",d5)':{tag:'(0029,"PHILIPS MR/PART",d5)',vr:"LT",name:"SliceThickness",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS-MR-1",11)':{tag:'(0019,"PHILIPS-MR-1",11)',vr:"IS",name:"ChemicalShiftNumber",vm:"1",version:"PrivateTag"},'(0019,"PHILIPS-MR-1",12)':{tag:'(0019,"PHILIPS-MR-1",12)',vr:"IS",name:"PhaseNumber",vm:"1",version:"PrivateTag"},'(0021,"PHILIPS-MR-1",01)':{tag:'(0021,"PHILIPS-MR-1",01)',vr:"IS",name:"ReconstructionNumber",vm:"1",version:"PrivateTag"},'(0021,"PHILIPS-MR-1",02)':{tag:'(0021,"PHILIPS-MR-1",02)',vr:"IS",name:"SliceNumber",vm:"1",version:"PrivateTag"},'(7001,"Picker NM Private Group",01)':{tag:'(7001,"Picker NM Private Group",01)',vr:"UI",name:"Unknown",vm:"1",version:"PrivateTag"},'(7001,"Picker NM Private Group",02)':{tag:'(7001,"Picker NM Private Group",02)',vr:"OB",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CM VA0  ACQU",10)':{tag:'(0019,"SIEMENS CM VA0  ACQU",10)',vr:"LT",name:"ParameterFileName",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CM VA0  ACQU",11)':{tag:'(0019,"SIEMENS CM VA0  ACQU",11)',vr:"LO",name:"SequenceFileName",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CM VA0  ACQU",12)':{tag:'(0019,"SIEMENS CM VA0  ACQU",12)',vr:"LT",name:"SequenceFileOwner",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CM VA0  ACQU",13)':{tag:'(0019,"SIEMENS CM VA0  ACQU",13)',vr:"LT",name:"SequenceDescription",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CM VA0  ACQU",14)':{tag:'(0019,"SIEMENS CM VA0  ACQU",14)',vr:"LT",name:"EPIFileName",vm:"1",version:"PrivateTag"},'(0009,"SIEMENS CM VA0  CMS",00)':{tag:'(0009,"SIEMENS CM VA0  CMS",00)',vr:"DS",name:"NumberOfMeasurements",vm:"1",version:"PrivateTag"},'(0009,"SIEMENS CM VA0  CMS",10)':{tag:'(0009,"SIEMENS CM VA0  CMS",10)',vr:"LT",name:"StorageMode",vm:"1",version:"PrivateTag"},'(0009,"SIEMENS CM VA0  CMS",12)':{tag:'(0009,"SIEMENS CM VA0  CMS",12)',vr:"UL",name:"EvaluationMaskImage",vm:"1",version:"PrivateTag"},'(0009,"SIEMENS CM VA0  CMS",26)':{tag:'(0009,"SIEMENS CM VA0  CMS",26)',vr:"DA",name:"LastMoveDate",vm:"1",version:"PrivateTag"},'(0009,"SIEMENS CM VA0  CMS",27)':{tag:'(0009,"SIEMENS CM VA0  CMS",27)',vr:"TM",name:"LastMoveTime",vm:"1",version:"PrivateTag"},'(0011,"SIEMENS CM VA0  CMS",0a)':{tag:'(0011,"SIEMENS CM VA0  CMS",0a)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0011,"SIEMENS CM VA0  CMS",10)':{tag:'(0011,"SIEMENS CM VA0  CMS",10)',vr:"DA",name:"RegistrationDate",vm:"1",version:"PrivateTag"},'(0011,"SIEMENS CM VA0  CMS",11)':{tag:'(0011,"SIEMENS CM VA0  CMS",11)',vr:"TM",name:"RegistrationTime",vm:"1",version:"PrivateTag"},'(0011,"SIEMENS CM VA0  CMS",22)':{tag:'(0011,"SIEMENS CM VA0  CMS",22)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0011,"SIEMENS CM VA0  CMS",23)':{tag:'(0011,"SIEMENS CM VA0  CMS",23)',vr:"DS",name:"UsedPatientWeight",vm:"1",version:"PrivateTag"},'(0011,"SIEMENS CM VA0  CMS",40)':{tag:'(0011,"SIEMENS CM VA0  CMS",40)',vr:"IS",name:"OrganCode",vm:"1",version:"PrivateTag"},'(0013,"SIEMENS CM VA0  CMS",00)':{tag:'(0013,"SIEMENS CM VA0  CMS",00)',vr:"LT",name:"ModifyingPhysician",vm:"1",version:"PrivateTag"},'(0013,"SIEMENS CM VA0  CMS",10)':{tag:'(0013,"SIEMENS CM VA0  CMS",10)',vr:"DA",name:"ModificationDate",vm:"1",version:"PrivateTag"},'(0013,"SIEMENS CM VA0  CMS",12)':{tag:'(0013,"SIEMENS CM VA0  CMS",12)',vr:"TM",name:"ModificationTime",vm:"1",version:"PrivateTag"},'(0013,"SIEMENS CM VA0  CMS",20)':{tag:'(0013,"SIEMENS CM VA0  CMS",20)',vr:"LO",name:"PatientName",vm:"1",version:"PrivateTag"},'(0013,"SIEMENS CM VA0  CMS",22)':{tag:'(0013,"SIEMENS CM VA0  CMS",22)',vr:"LO",name:"PatientId",vm:"1",version:"PrivateTag"},'(0013,"SIEMENS CM VA0  CMS",30)':{tag:'(0013,"SIEMENS CM VA0  CMS",30)',vr:"DA",name:"PatientBirthdate",vm:"1",version:"PrivateTag"},'(0013,"SIEMENS CM VA0  CMS",31)':{tag:'(0013,"SIEMENS CM VA0  CMS",31)',vr:"DS",name:"PatientWeight",vm:"1",version:"PrivateTag"},'(0013,"SIEMENS CM VA0  CMS",32)':{tag:'(0013,"SIEMENS CM VA0  CMS",32)',vr:"LT",name:"PatientsMaidenName",vm:"1",version:"PrivateTag"},'(0013,"SIEMENS CM VA0  CMS",33)':{tag:'(0013,"SIEMENS CM VA0  CMS",33)',vr:"LT",name:"ReferringPhysician",vm:"1",version:"PrivateTag"},'(0013,"SIEMENS CM VA0  CMS",34)':{tag:'(0013,"SIEMENS CM VA0  CMS",34)',vr:"LT",name:"AdmittingDiagnosis",vm:"1",version:"PrivateTag"},'(0013,"SIEMENS CM VA0  CMS",35)':{tag:'(0013,"SIEMENS CM VA0  CMS",35)',vr:"LO",name:"PatientSex",vm:"1",version:"PrivateTag"},'(0013,"SIEMENS CM VA0  CMS",40)':{tag:'(0013,"SIEMENS CM VA0  CMS",40)',vr:"LO",name:"ProcedureDescription",vm:"1",version:"PrivateTag"},'(0013,"SIEMENS CM VA0  CMS",42)':{tag:'(0013,"SIEMENS CM VA0  CMS",42)',vr:"LO",name:"RestDirection",vm:"1",version:"PrivateTag"},'(0013,"SIEMENS CM VA0  CMS",44)':{tag:'(0013,"SIEMENS CM VA0  CMS",44)',vr:"LO",name:"PatientPosition",vm:"1",version:"PrivateTag"},'(0013,"SIEMENS CM VA0  CMS",46)':{tag:'(0013,"SIEMENS CM VA0  CMS",46)',vr:"LT",name:"ViewDirection",vm:"1",version:"PrivateTag"},'(0013,"SIEMENS CM VA0  CMS",50)':{tag:'(0013,"SIEMENS CM VA0  CMS",50)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0013,"SIEMENS CM VA0  CMS",51)':{tag:'(0013,"SIEMENS CM VA0  CMS",51)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0013,"SIEMENS CM VA0  CMS",52)':{tag:'(0013,"SIEMENS CM VA0  CMS",52)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0013,"SIEMENS CM VA0  CMS",53)':{tag:'(0013,"SIEMENS CM VA0  CMS",53)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0013,"SIEMENS CM VA0  CMS",54)':{tag:'(0013,"SIEMENS CM VA0  CMS",54)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0013,"SIEMENS CM VA0  CMS",55)':{tag:'(0013,"SIEMENS CM VA0  CMS",55)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0013,"SIEMENS CM VA0  CMS",56)':{tag:'(0013,"SIEMENS CM VA0  CMS",56)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CM VA0  CMS",10)':{tag:'(0019,"SIEMENS CM VA0  CMS",10)',vr:"DS",name:"NetFrequency",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CM VA0  CMS",20)':{tag:'(0019,"SIEMENS CM VA0  CMS",20)',vr:"LT",name:"MeasurementMode",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CM VA0  CMS",30)':{tag:'(0019,"SIEMENS CM VA0  CMS",30)',vr:"LT",name:"CalculationMode",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CM VA0  CMS",50)':{tag:'(0019,"SIEMENS CM VA0  CMS",50)',vr:"IS",name:"NoiseLevel",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CM VA0  CMS",60)':{tag:'(0019,"SIEMENS CM VA0  CMS",60)',vr:"IS",name:"NumberOfDataBytes",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS CM VA0  CMS",20)':{tag:'(0021,"SIEMENS CM VA0  CMS",20)',vr:"DS",name:"FoV",vm:"2",version:"PrivateTag"},'(0021,"SIEMENS CM VA0  CMS",22)':{tag:'(0021,"SIEMENS CM VA0  CMS",22)',vr:"DS",name:"ImageMagnificationFactor",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS CM VA0  CMS",24)':{tag:'(0021,"SIEMENS CM VA0  CMS",24)',vr:"DS",name:"ImageScrollOffset",vm:"2",version:"PrivateTag"},'(0021,"SIEMENS CM VA0  CMS",26)':{tag:'(0021,"SIEMENS CM VA0  CMS",26)',vr:"IS",name:"ImagePixelOffset",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS CM VA0  CMS",30)':{tag:'(0021,"SIEMENS CM VA0  CMS",30)',vr:"LT",name:"ViewDirection",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS CM VA0  CMS",32)':{tag:'(0021,"SIEMENS CM VA0  CMS",32)',vr:"CS",name:"PatientRestDirection",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS CM VA0  CMS",60)':{tag:'(0021,"SIEMENS CM VA0  CMS",60)',vr:"DS",name:"ImagePosition",vm:"3",version:"PrivateTag"},'(0021,"SIEMENS CM VA0  CMS",61)':{tag:'(0021,"SIEMENS CM VA0  CMS",61)',vr:"DS",name:"ImageNormal",vm:"3",version:"PrivateTag"},'(0021,"SIEMENS CM VA0  CMS",63)':{tag:'(0021,"SIEMENS CM VA0  CMS",63)',vr:"DS",name:"ImageDistance",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS CM VA0  CMS",65)':{tag:'(0021,"SIEMENS CM VA0  CMS",65)',vr:"US",name:"ImagePositioningHistoryMask",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS CM VA0  CMS",6a)':{tag:'(0021,"SIEMENS CM VA0  CMS",6a)',vr:"DS",name:"ImageRow",vm:"3",version:"PrivateTag"},'(0021,"SIEMENS CM VA0  CMS",6b)':{tag:'(0021,"SIEMENS CM VA0  CMS",6b)',vr:"DS",name:"ImageColumn",vm:"3",version:"PrivateTag"},'(0021,"SIEMENS CM VA0  CMS",70)':{tag:'(0021,"SIEMENS CM VA0  CMS",70)',vr:"LT",name:"PatientOrientationSet1",vm:"3",version:"PrivateTag"},'(0021,"SIEMENS CM VA0  CMS",71)':{tag:'(0021,"SIEMENS CM VA0  CMS",71)',vr:"LT",name:"PatientOrientationSet2",vm:"3",version:"PrivateTag"},'(0021,"SIEMENS CM VA0  CMS",80)':{tag:'(0021,"SIEMENS CM VA0  CMS",80)',vr:"LT",name:"StudyName",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS CM VA0  CMS",82)':{tag:'(0021,"SIEMENS CM VA0  CMS",82)',vr:"LT",name:"StudyType",vm:"3",version:"PrivateTag"},'(0029,"SIEMENS CM VA0  CMS",10)':{tag:'(0029,"SIEMENS CM VA0  CMS",10)',vr:"LT",name:"WindowStyle",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS CM VA0  CMS",11)':{tag:'(0029,"SIEMENS CM VA0  CMS",11)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS CM VA0  CMS",13)':{tag:'(0029,"SIEMENS CM VA0  CMS",13)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS CM VA0  CMS",20)':{tag:'(0029,"SIEMENS CM VA0  CMS",20)',vr:"LT",name:"PixelQualityCode",vm:"3",version:"PrivateTag"},'(0029,"SIEMENS CM VA0  CMS",22)':{tag:'(0029,"SIEMENS CM VA0  CMS",22)',vr:"IS",name:"PixelQualityValue",vm:"3",version:"PrivateTag"},'(0029,"SIEMENS CM VA0  CMS",50)':{tag:'(0029,"SIEMENS CM VA0  CMS",50)',vr:"LT",name:"ArchiveCode",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS CM VA0  CMS",51)':{tag:'(0029,"SIEMENS CM VA0  CMS",51)',vr:"LT",name:"ExposureCode",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS CM VA0  CMS",52)':{tag:'(0029,"SIEMENS CM VA0  CMS",52)',vr:"LT",name:"SortCode",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS CM VA0  CMS",53)':{tag:'(0029,"SIEMENS CM VA0  CMS",53)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS CM VA0  CMS",60)':{tag:'(0029,"SIEMENS CM VA0  CMS",60)',vr:"LT",name:"Splash",vm:"1",version:"PrivateTag"},'(0051,"SIEMENS CM VA0  CMS",10)':{tag:'(0051,"SIEMENS CM VA0  CMS",10)',vr:"LT",name:"ImageText",vm:"1-n",version:"PrivateTag"},'(6021,"SIEMENS CM VA0  CMS",00)':{tag:'(6021,"SIEMENS CM VA0  CMS",00)',vr:"LT",name:"ImageGraphicsFormatCode",vm:"1",version:"PrivateTag"},'(6021,"SIEMENS CM VA0  CMS",10)':{tag:'(6021,"SIEMENS CM VA0  CMS",10)',vr:"LT",name:"ImageGraphics",vm:"1",version:"PrivateTag"},'(7fe1,"SIEMENS CM VA0  CMS",00)':{tag:'(7fe1,"SIEMENS CM VA0  CMS",00)',vr:"OB",name:"BinaryData",vm:"1-n",version:"PrivateTag"},'(0009,"SIEMENS CM VA0  LAB",10)':{tag:'(0009,"SIEMENS CM VA0  LAB",10)',vr:"LT",name:"GeneratorIdentificationLabel",vm:"1",version:"PrivateTag"},'(0009,"SIEMENS CM VA0  LAB",11)':{tag:'(0009,"SIEMENS CM VA0  LAB",11)',vr:"LT",name:"GantryIdentificationLabel",vm:"1",version:"PrivateTag"},'(0009,"SIEMENS CM VA0  LAB",12)':{tag:'(0009,"SIEMENS CM VA0  LAB",12)',vr:"LT",name:"X-RayTubeIdentificationLabel",vm:"1",version:"PrivateTag"},'(0009,"SIEMENS CM VA0  LAB",13)':{tag:'(0009,"SIEMENS CM VA0  LAB",13)',vr:"LT",name:"DetectorIdentificationLabel",vm:"1",version:"PrivateTag"},'(0009,"SIEMENS CM VA0  LAB",14)':{tag:'(0009,"SIEMENS CM VA0  LAB",14)',vr:"LT",name:"DASIdentificationLabel",vm:"1",version:"PrivateTag"},'(0009,"SIEMENS CM VA0  LAB",15)':{tag:'(0009,"SIEMENS CM VA0  LAB",15)',vr:"LT",name:"SMIIdentificationLabel",vm:"1",version:"PrivateTag"},'(0009,"SIEMENS CM VA0  LAB",16)':{tag:'(0009,"SIEMENS CM VA0  LAB",16)',vr:"LT",name:"CPUIdentificationLabel",vm:"1",version:"PrivateTag"},'(0009,"SIEMENS CM VA0  LAB",20)':{tag:'(0009,"SIEMENS CM VA0  LAB",20)',vr:"LT",name:"HeaderVersion",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS CSA HEADER",08)':{tag:'(0029,"SIEMENS CSA HEADER",08)',vr:"CS",name:"CSAImageHeaderType",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS CSA HEADER",09)':{tag:'(0029,"SIEMENS CSA HEADER",09)',vr:"LO",name:"CSAImageHeaderVersion",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS CSA HEADER",10)':{tag:'(0029,"SIEMENS CSA HEADER",10)',vr:"OB",name:"CSAImageHeaderInfo",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS CSA HEADER",18)':{tag:'(0029,"SIEMENS CSA HEADER",18)',vr:"CS",name:"CSASeriesHeaderType",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS CSA HEADER",19)':{tag:'(0029,"SIEMENS CSA HEADER",19)',vr:"LO",name:"CSASeriesHeaderVersion",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS CSA HEADER",20)':{tag:'(0029,"SIEMENS CSA HEADER",20)',vr:"OB",name:"CSASeriesHeaderInfo",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS CSA NON-IMAGE",08)':{tag:'(0029,"SIEMENS CSA NON-IMAGE",08)',vr:"CS",name:"CSADataType",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS CSA NON-IMAGE",09)':{tag:'(0029,"SIEMENS CSA NON-IMAGE",09)',vr:"LO",name:"CSADataVersion",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS CSA NON-IMAGE",10)':{tag:'(0029,"SIEMENS CSA NON-IMAGE",10)',vr:"OB",name:"CSADataInfo",vm:"1",version:"PrivateTag"},'(7FE1,"SIEMENS CSA NON-IMAGE",10)':{tag:'(7FE1,"SIEMENS CSA NON-IMAGE",10)',vr:"OB",name:"CSAData",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  COAD",10)':{tag:'(0019,"SIEMENS CT VA0  COAD",10)',vr:"DS",name:"DistanceSourceToSourceSideCollimator",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  COAD",11)':{tag:'(0019,"SIEMENS CT VA0  COAD",11)',vr:"DS",name:"DistanceSourceToDetectorSideCollimator",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  COAD",20)':{tag:'(0019,"SIEMENS CT VA0  COAD",20)',vr:"IS",name:"NumberOfPossibleChannels",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  COAD",21)':{tag:'(0019,"SIEMENS CT VA0  COAD",21)',vr:"IS",name:"MeanChannelNumber",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  COAD",22)':{tag:'(0019,"SIEMENS CT VA0  COAD",22)',vr:"DS",name:"DetectorSpacing",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  COAD",23)':{tag:'(0019,"SIEMENS CT VA0  COAD",23)',vr:"DS",name:"DetectorCenter",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  COAD",24)':{tag:'(0019,"SIEMENS CT VA0  COAD",24)',vr:"DS",name:"ReadingIntegrationTime",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  COAD",50)':{tag:'(0019,"SIEMENS CT VA0  COAD",50)',vr:"DS",name:"DetectorAlignment",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  COAD",52)':{tag:'(0019,"SIEMENS CT VA0  COAD",52)',vr:"DS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  COAD",54)':{tag:'(0019,"SIEMENS CT VA0  COAD",54)',vr:"DS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  COAD",60)':{tag:'(0019,"SIEMENS CT VA0  COAD",60)',vr:"DS",name:"FocusAlignment",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  COAD",65)':{tag:'(0019,"SIEMENS CT VA0  COAD",65)',vr:"UL",name:"FocalSpotDeflectionAmplitude",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  COAD",66)':{tag:'(0019,"SIEMENS CT VA0  COAD",66)',vr:"UL",name:"FocalSpotDeflectionPhase",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  COAD",67)':{tag:'(0019,"SIEMENS CT VA0  COAD",67)',vr:"UL",name:"FocalSpotDeflectionOffset",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  COAD",70)':{tag:'(0019,"SIEMENS CT VA0  COAD",70)',vr:"DS",name:"WaterScalingFactor",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  COAD",71)':{tag:'(0019,"SIEMENS CT VA0  COAD",71)',vr:"DS",name:"InterpolationFactor",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  COAD",80)':{tag:'(0019,"SIEMENS CT VA0  COAD",80)',vr:"LT",name:"PatientRegion",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  COAD",82)':{tag:'(0019,"SIEMENS CT VA0  COAD",82)',vr:"LT",name:"PatientPhaseOfLife",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  COAD",90)':{tag:'(0019,"SIEMENS CT VA0  COAD",90)',vr:"DS",name:"OsteoOffset",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  COAD",92)':{tag:'(0019,"SIEMENS CT VA0  COAD",92)',vr:"DS",name:"OsteoRegressionLineSlope",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  COAD",93)':{tag:'(0019,"SIEMENS CT VA0  COAD",93)',vr:"DS",name:"OsteoRegressionLineIntercept",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  COAD",94)':{tag:'(0019,"SIEMENS CT VA0  COAD",94)',vr:"DS",name:"OsteoStandardizationCode",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  COAD",96)':{tag:'(0019,"SIEMENS CT VA0  COAD",96)',vr:"IS",name:"OsteoPhantomNumber",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  COAD",A3)':{tag:'(0019,"SIEMENS CT VA0  COAD",A3)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  COAD",A4)':{tag:'(0019,"SIEMENS CT VA0  COAD",A4)',vr:"DS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  COAD",A5)':{tag:'(0019,"SIEMENS CT VA0  COAD",A5)',vr:"DS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  COAD",A6)':{tag:'(0019,"SIEMENS CT VA0  COAD",A6)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  COAD",A7)':{tag:'(0019,"SIEMENS CT VA0  COAD",A7)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  COAD",A8)':{tag:'(0019,"SIEMENS CT VA0  COAD",A8)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  COAD",A9)':{tag:'(0019,"SIEMENS CT VA0  COAD",A9)',vr:"DS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  COAD",AA)':{tag:'(0019,"SIEMENS CT VA0  COAD",AA)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  COAD",AB)':{tag:'(0019,"SIEMENS CT VA0  COAD",AB)',vr:"DS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  COAD",AC)':{tag:'(0019,"SIEMENS CT VA0  COAD",AC)',vr:"DS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  COAD",AD)':{tag:'(0019,"SIEMENS CT VA0  COAD",AD)',vr:"DS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  COAD",AE)':{tag:'(0019,"SIEMENS CT VA0  COAD",AE)',vr:"DS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  COAD",AF)':{tag:'(0019,"SIEMENS CT VA0  COAD",AF)',vr:"DS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  COAD",B0)':{tag:'(0019,"SIEMENS CT VA0  COAD",B0)',vr:"DS",name:"FeedPerRotation",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  COAD",BD)':{tag:'(0019,"SIEMENS CT VA0  COAD",BD)',vr:"IS",name:"PulmoTriggerLevel",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  COAD",BE)':{tag:'(0019,"SIEMENS CT VA0  COAD",BE)',vr:"DS",name:"ExpiratoricReserveVolume",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  COAD",BF)':{tag:'(0019,"SIEMENS CT VA0  COAD",BF)',vr:"DS",name:"VitalCapacity",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  COAD",C0)':{tag:'(0019,"SIEMENS CT VA0  COAD",C0)',vr:"DS",name:"PulmoWater",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  COAD",C1)':{tag:'(0019,"SIEMENS CT VA0  COAD",C1)',vr:"DS",name:"PulmoAir",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  COAD",C2)':{tag:'(0019,"SIEMENS CT VA0  COAD",C2)',vr:"DA",name:"PulmoDate",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  COAD",C3)':{tag:'(0019,"SIEMENS CT VA0  COAD",C3)',vr:"TM",name:"PulmoTime",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  GEN",10)':{tag:'(0019,"SIEMENS CT VA0  GEN",10)',vr:"DS",name:"SourceSideCollimatorAperture",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  GEN",11)':{tag:'(0019,"SIEMENS CT VA0  GEN",11)',vr:"DS",name:"DetectorSideCollimatorAperture",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  GEN",20)':{tag:'(0019,"SIEMENS CT VA0  GEN",20)',vr:"DS",name:"ExposureTime",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  GEN",21)':{tag:'(0019,"SIEMENS CT VA0  GEN",21)',vr:"DS",name:"ExposureCurrent",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  GEN",25)':{tag:'(0019,"SIEMENS CT VA0  GEN",25)',vr:"DS",name:"KVPGeneratorPowerCurrent",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  GEN",26)':{tag:'(0019,"SIEMENS CT VA0  GEN",26)',vr:"DS",name:"GeneratorVoltage",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  GEN",40)':{tag:'(0019,"SIEMENS CT VA0  GEN",40)',vr:"UL",name:"MasterControlMask",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  GEN",42)':{tag:'(0019,"SIEMENS CT VA0  GEN",42)',vr:"US",name:"ProcessingMask",vm:"5",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  GEN",44)':{tag:'(0019,"SIEMENS CT VA0  GEN",44)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  GEN",45)':{tag:'(0019,"SIEMENS CT VA0  GEN",45)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  GEN",62)':{tag:'(0019,"SIEMENS CT VA0  GEN",62)',vr:"IS",name:"NumberOfVirtuellChannels",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  GEN",70)':{tag:'(0019,"SIEMENS CT VA0  GEN",70)',vr:"IS",name:"NumberOfReadings",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  GEN",71)':{tag:'(0019,"SIEMENS CT VA0  GEN",71)',vr:"LT",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  GEN",74)':{tag:'(0019,"SIEMENS CT VA0  GEN",74)',vr:"IS",name:"NumberOfProjections",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  GEN",75)':{tag:'(0019,"SIEMENS CT VA0  GEN",75)',vr:"IS",name:"NumberOfBytes",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  GEN",80)':{tag:'(0019,"SIEMENS CT VA0  GEN",80)',vr:"LT",name:"ReconstructionAlgorithmSet",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  GEN",81)':{tag:'(0019,"SIEMENS CT VA0  GEN",81)',vr:"LT",name:"ReconstructionAlgorithmIndex",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  GEN",82)':{tag:'(0019,"SIEMENS CT VA0  GEN",82)',vr:"LT",name:"RegenerationSoftwareVersion",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS CT VA0  GEN",88)':{tag:'(0019,"SIEMENS CT VA0  GEN",88)',vr:"DS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS CT VA0  GEN",10)':{tag:'(0021,"SIEMENS CT VA0  GEN",10)',vr:"IS",name:"RotationAngle",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS CT VA0  GEN",11)':{tag:'(0021,"SIEMENS CT VA0  GEN",11)',vr:"IS",name:"StartAngle",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS CT VA0  GEN",20)':{tag:'(0021,"SIEMENS CT VA0  GEN",20)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0021,"SIEMENS CT VA0  GEN",30)':{tag:'(0021,"SIEMENS CT VA0  GEN",30)',vr:"IS",name:"TopogramTubePosition",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS CT VA0  GEN",32)':{tag:'(0021,"SIEMENS CT VA0  GEN",32)',vr:"DS",name:"LengthOfTopogram",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS CT VA0  GEN",34)':{tag:'(0021,"SIEMENS CT VA0  GEN",34)',vr:"DS",name:"TopogramCorrectionFactor",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS CT VA0  GEN",36)':{tag:'(0021,"SIEMENS CT VA0  GEN",36)',vr:"DS",name:"MaximumTablePosition",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS CT VA0  GEN",40)':{tag:'(0021,"SIEMENS CT VA0  GEN",40)',vr:"IS",name:"TableMoveDirectionCode",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS CT VA0  GEN",45)':{tag:'(0021,"SIEMENS CT VA0  GEN",45)',vr:"IS",name:"VOIStartRow",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS CT VA0  GEN",46)':{tag:'(0021,"SIEMENS CT VA0  GEN",46)',vr:"IS",name:"VOIStopRow",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS CT VA0  GEN",47)':{tag:'(0021,"SIEMENS CT VA0  GEN",47)',vr:"IS",name:"VOIStartColumn",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS CT VA0  GEN",48)':{tag:'(0021,"SIEMENS CT VA0  GEN",48)',vr:"IS",name:"VOIStopColumn",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS CT VA0  GEN",49)':{tag:'(0021,"SIEMENS CT VA0  GEN",49)',vr:"IS",name:"VOIStartSlice",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS CT VA0  GEN",4a)':{tag:'(0021,"SIEMENS CT VA0  GEN",4a)',vr:"IS",name:"VOIStopSlice",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS CT VA0  GEN",50)':{tag:'(0021,"SIEMENS CT VA0  GEN",50)',vr:"IS",name:"VectorStartRow",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS CT VA0  GEN",51)':{tag:'(0021,"SIEMENS CT VA0  GEN",51)',vr:"IS",name:"VectorRowStep",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS CT VA0  GEN",52)':{tag:'(0021,"SIEMENS CT VA0  GEN",52)',vr:"IS",name:"VectorStartColumn",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS CT VA0  GEN",53)':{tag:'(0021,"SIEMENS CT VA0  GEN",53)',vr:"IS",name:"VectorColumnStep",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS CT VA0  GEN",60)':{tag:'(0021,"SIEMENS CT VA0  GEN",60)',vr:"IS",name:"RangeTypeCode",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS CT VA0  GEN",62)':{tag:'(0021,"SIEMENS CT VA0  GEN",62)',vr:"IS",name:"ReferenceTypeCode",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS CT VA0  GEN",70)':{tag:'(0021,"SIEMENS CT VA0  GEN",70)',vr:"DS",name:"ObjectOrientation",vm:"3",version:"PrivateTag"},'(0021,"SIEMENS CT VA0  GEN",72)':{tag:'(0021,"SIEMENS CT VA0  GEN",72)',vr:"DS",name:"LightOrientation",vm:"3",version:"PrivateTag"},'(0021,"SIEMENS CT VA0  GEN",75)':{tag:'(0021,"SIEMENS CT VA0  GEN",75)',vr:"DS",name:"LightBrightness",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS CT VA0  GEN",76)':{tag:'(0021,"SIEMENS CT VA0  GEN",76)',vr:"DS",name:"LightContrast",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS CT VA0  GEN",7a)':{tag:'(0021,"SIEMENS CT VA0  GEN",7a)',vr:"IS",name:"OverlayThreshold",vm:"2",version:"PrivateTag"},'(0021,"SIEMENS CT VA0  GEN",7b)':{tag:'(0021,"SIEMENS CT VA0  GEN",7b)',vr:"IS",name:"SurfaceThreshold",vm:"2",version:"PrivateTag"},'(0021,"SIEMENS CT VA0  GEN",7c)':{tag:'(0021,"SIEMENS CT VA0  GEN",7c)',vr:"IS",name:"GreyScaleThreshold",vm:"2",version:"PrivateTag"},'(0021,"SIEMENS CT VA0  GEN",a0)':{tag:'(0021,"SIEMENS CT VA0  GEN",a0)',vr:"DS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS CT VA0  GEN",a2)':{tag:'(0021,"SIEMENS CT VA0  GEN",a2)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS CT VA0  GEN",a7)':{tag:'(0021,"SIEMENS CT VA0  GEN",a7)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"SIEMENS CT VA0  IDE",10)':{tag:'(0009,"SIEMENS CT VA0  IDE",10)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"SIEMENS CT VA0  IDE",30)':{tag:'(0009,"SIEMENS CT VA0  IDE",30)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"SIEMENS CT VA0  IDE",31)':{tag:'(0009,"SIEMENS CT VA0  IDE",31)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"SIEMENS CT VA0  IDE",32)':{tag:'(0009,"SIEMENS CT VA0  IDE",32)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"SIEMENS CT VA0  IDE",34)':{tag:'(0009,"SIEMENS CT VA0  IDE",34)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"SIEMENS CT VA0  IDE",40)':{tag:'(0009,"SIEMENS CT VA0  IDE",40)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"SIEMENS CT VA0  IDE",42)':{tag:'(0009,"SIEMENS CT VA0  IDE",42)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"SIEMENS CT VA0  IDE",50)':{tag:'(0009,"SIEMENS CT VA0  IDE",50)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"SIEMENS CT VA0  IDE",51)':{tag:'(0009,"SIEMENS CT VA0  IDE",51)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"SIEMENS CT VA0  ORI",20)':{tag:'(0009,"SIEMENS CT VA0  ORI",20)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"SIEMENS CT VA0  ORI",30)':{tag:'(0009,"SIEMENS CT VA0  ORI",30)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(6021,"SIEMENS CT VA0  OST",00)':{tag:'(6021,"SIEMENS CT VA0  OST",00)',vr:"LT",name:"OsteoContourComment",vm:"1",version:"PrivateTag"},'(6021,"SIEMENS CT VA0  OST",10)':{tag:'(6021,"SIEMENS CT VA0  OST",10)',vr:"US",name:"OsteoContourBuffer",vm:"256",version:"PrivateTag"},'(0021,"SIEMENS CT VA0  RAW",10)':{tag:'(0021,"SIEMENS CT VA0  RAW",10)',vr:"UL",name:"CreationMask",vm:"2",version:"PrivateTag"},'(0021,"SIEMENS CT VA0  RAW",20)':{tag:'(0021,"SIEMENS CT VA0  RAW",20)',vr:"UL",name:"EvaluationMask",vm:"2",version:"PrivateTag"},'(0021,"SIEMENS CT VA0  RAW",30)':{tag:'(0021,"SIEMENS CT VA0  RAW",30)',vr:"US",name:"ExtendedProcessingMask",vm:"7",version:"PrivateTag"},'(0021,"SIEMENS CT VA0  RAW",40)':{tag:'(0021,"SIEMENS CT VA0  RAW",40)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0021,"SIEMENS CT VA0  RAW",41)':{tag:'(0021,"SIEMENS CT VA0  RAW",41)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0021,"SIEMENS CT VA0  RAW",42)':{tag:'(0021,"SIEMENS CT VA0  RAW",42)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0021,"SIEMENS CT VA0  RAW",43)':{tag:'(0021,"SIEMENS CT VA0  RAW",43)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0021,"SIEMENS CT VA0  RAW",44)':{tag:'(0021,"SIEMENS CT VA0  RAW",44)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0021,"SIEMENS CT VA0  RAW",50)':{tag:'(0021,"SIEMENS CT VA0  RAW",50)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"SIEMENS DICOM",10)':{tag:'(0009,"SIEMENS DICOM",10)',vr:"UN",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"SIEMENS DICOM",12)':{tag:'(0009,"SIEMENS DICOM",12)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS DLR.01",10)':{tag:'(0019,"SIEMENS DLR.01",10)',vr:"LT",name:"MeasurementMode",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS DLR.01",11)':{tag:'(0019,"SIEMENS DLR.01",11)',vr:"LT",name:"ImageType",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS DLR.01",15)':{tag:'(0019,"SIEMENS DLR.01",15)',vr:"LT",name:"SoftwareVersion",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS DLR.01",20)':{tag:'(0019,"SIEMENS DLR.01",20)',vr:"LT",name:"MPMCode",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS DLR.01",21)':{tag:'(0019,"SIEMENS DLR.01",21)',vr:"LT",name:"Latitude",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS DLR.01",22)':{tag:'(0019,"SIEMENS DLR.01",22)',vr:"LT",name:"Sensitivity",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS DLR.01",23)':{tag:'(0019,"SIEMENS DLR.01",23)',vr:"LT",name:"EDR",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS DLR.01",24)':{tag:'(0019,"SIEMENS DLR.01",24)',vr:"LT",name:"LFix",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS DLR.01",25)':{tag:'(0019,"SIEMENS DLR.01",25)',vr:"LT",name:"SFix",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS DLR.01",26)':{tag:'(0019,"SIEMENS DLR.01",26)',vr:"LT",name:"PresetMode",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS DLR.01",27)':{tag:'(0019,"SIEMENS DLR.01",27)',vr:"LT",name:"Region",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS DLR.01",28)':{tag:'(0019,"SIEMENS DLR.01",28)',vr:"LT",name:"Subregion",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS DLR.01",30)':{tag:'(0019,"SIEMENS DLR.01",30)',vr:"LT",name:"Orientation",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS DLR.01",31)':{tag:'(0019,"SIEMENS DLR.01",31)',vr:"LT",name:"MarkOnFilm",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS DLR.01",32)':{tag:'(0019,"SIEMENS DLR.01",32)',vr:"LT",name:"RotationOnDRC",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS DLR.01",40)':{tag:'(0019,"SIEMENS DLR.01",40)',vr:"LT",name:"ReaderType",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS DLR.01",41)':{tag:'(0019,"SIEMENS DLR.01",41)',vr:"LT",name:"SubModality",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS DLR.01",42)':{tag:'(0019,"SIEMENS DLR.01",42)',vr:"LT",name:"ReaderSerialNumber",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS DLR.01",50)':{tag:'(0019,"SIEMENS DLR.01",50)',vr:"LT",name:"CassetteScale",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS DLR.01",51)':{tag:'(0019,"SIEMENS DLR.01",51)',vr:"LT",name:"CassetteMatrix",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS DLR.01",52)':{tag:'(0019,"SIEMENS DLR.01",52)',vr:"LT",name:"CassetteSubmatrix",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS DLR.01",53)':{tag:'(0019,"SIEMENS DLR.01",53)',vr:"LT",name:"Barcode",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS DLR.01",60)':{tag:'(0019,"SIEMENS DLR.01",60)',vr:"LT",name:"ContrastType",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS DLR.01",61)':{tag:'(0019,"SIEMENS DLR.01",61)',vr:"LT",name:"RotationAmount",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS DLR.01",62)':{tag:'(0019,"SIEMENS DLR.01",62)',vr:"LT",name:"RotationCenter",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS DLR.01",63)':{tag:'(0019,"SIEMENS DLR.01",63)',vr:"LT",name:"DensityShift",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS DLR.01",64)':{tag:'(0019,"SIEMENS DLR.01",64)',vr:"US",name:"FrequencyRank",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS DLR.01",65)':{tag:'(0019,"SIEMENS DLR.01",65)',vr:"LT",name:"FrequencyEnhancement",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS DLR.01",66)':{tag:'(0019,"SIEMENS DLR.01",66)',vr:"LT",name:"FrequencyType",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS DLR.01",67)':{tag:'(0019,"SIEMENS DLR.01",67)',vr:"LT",name:"KernelLength",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS DLR.01",68)':{tag:'(0019,"SIEMENS DLR.01",68)',vr:"UL",name:"KernelMode",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS DLR.01",69)':{tag:'(0019,"SIEMENS DLR.01",69)',vr:"UL",name:"ConvolutionMode",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS DLR.01",70)':{tag:'(0019,"SIEMENS DLR.01",70)',vr:"LT",name:"PLASource",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS DLR.01",71)':{tag:'(0019,"SIEMENS DLR.01",71)',vr:"LT",name:"PLADestination",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS DLR.01",75)':{tag:'(0019,"SIEMENS DLR.01",75)',vr:"LT",name:"UIDOriginalImage",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS DLR.01",76)':{tag:'(0019,"SIEMENS DLR.01",76)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS DLR.01",80)':{tag:'(0019,"SIEMENS DLR.01",80)',vr:"LT",name:"ReaderHeader",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS DLR.01",90)':{tag:'(0019,"SIEMENS DLR.01",90)',vr:"LT",name:"PLAOfSecondaryDestination",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS DLR.01",a0)':{tag:'(0019,"SIEMENS DLR.01",a0)',vr:"DS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS DLR.01",a1)':{tag:'(0019,"SIEMENS DLR.01",a1)',vr:"DS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0041,"SIEMENS DLR.01",10)':{tag:'(0041,"SIEMENS DLR.01",10)',vr:"US",name:"NumberOfHardcopies",vm:"1",version:"PrivateTag"},'(0041,"SIEMENS DLR.01",20)':{tag:'(0041,"SIEMENS DLR.01",20)',vr:"LT",name:"FilmFormat",vm:"1",version:"PrivateTag"},'(0041,"SIEMENS DLR.01",30)':{tag:'(0041,"SIEMENS DLR.01",30)',vr:"LT",name:"FilmSize",vm:"1",version:"PrivateTag"},'(0041,"SIEMENS DLR.01",31)':{tag:'(0041,"SIEMENS DLR.01",31)',vr:"LT",name:"FullFilmFormat",vm:"1",version:"PrivateTag"},'(0003,"SIEMENS ISI",08)':{tag:'(0003,"SIEMENS ISI",08)',vr:"US",name:"ISICommandField",vm:"1",version:"PrivateTag"},'(0003,"SIEMENS ISI",11)':{tag:'(0003,"SIEMENS ISI",11)',vr:"US",name:"AttachIDApplicationCode",vm:"1",version:"PrivateTag"},'(0003,"SIEMENS ISI",12)':{tag:'(0003,"SIEMENS ISI",12)',vr:"UL",name:"AttachIDMessageCount",vm:"1",version:"PrivateTag"},'(0003,"SIEMENS ISI",13)':{tag:'(0003,"SIEMENS ISI",13)',vr:"DA",name:"AttachIDDate",vm:"1",version:"PrivateTag"},'(0003,"SIEMENS ISI",14)':{tag:'(0003,"SIEMENS ISI",14)',vr:"TM",name:"AttachIDTime",vm:"1",version:"PrivateTag"},'(0003,"SIEMENS ISI",20)':{tag:'(0003,"SIEMENS ISI",20)',vr:"US",name:"MessageType",vm:"1",version:"PrivateTag"},'(0003,"SIEMENS ISI",30)':{tag:'(0003,"SIEMENS ISI",30)',vr:"DA",name:"MaxWaitingDate",vm:"1",version:"PrivateTag"},'(0003,"SIEMENS ISI",31)':{tag:'(0003,"SIEMENS ISI",31)',vr:"TM",name:"MaxWaitingTime",vm:"1",version:"PrivateTag"},'(0009,"SIEMENS ISI",01)':{tag:'(0009,"SIEMENS ISI",01)',vr:"UN",name:"RISPatientInfoIMGEF",vm:"1",version:"PrivateTag"},'(0011,"SIEMENS ISI",03)':{tag:'(0011,"SIEMENS ISI",03)',vr:"LT",name:"PatientUID",vm:"1",version:"PrivateTag"},'(0011,"SIEMENS ISI",04)':{tag:'(0011,"SIEMENS ISI",04)',vr:"LT",name:"PatientID",vm:"1",version:"PrivateTag"},'(0011,"SIEMENS ISI",0a)':{tag:'(0011,"SIEMENS ISI",0a)',vr:"LT",name:"CaseID",vm:"1",version:"PrivateTag"},'(0011,"SIEMENS ISI",22)':{tag:'(0011,"SIEMENS ISI",22)',vr:"LT",name:"RequestID",vm:"1",version:"PrivateTag"},'(0011,"SIEMENS ISI",23)':{tag:'(0011,"SIEMENS ISI",23)',vr:"LT",name:"ExaminationUID",vm:"1",version:"PrivateTag"},'(0011,"SIEMENS ISI",a1)':{tag:'(0011,"SIEMENS ISI",a1)',vr:"DA",name:"PatientRegistrationDate",vm:"1",version:"PrivateTag"},'(0011,"SIEMENS ISI",a2)':{tag:'(0011,"SIEMENS ISI",a2)',vr:"TM",name:"PatientRegistrationTime",vm:"1",version:"PrivateTag"},'(0011,"SIEMENS ISI",b0)':{tag:'(0011,"SIEMENS ISI",b0)',vr:"LT",name:"PatientLastName",vm:"1",version:"PrivateTag"},'(0011,"SIEMENS ISI",b2)':{tag:'(0011,"SIEMENS ISI",b2)',vr:"LT",name:"PatientFirstName",vm:"1",version:"PrivateTag"},'(0011,"SIEMENS ISI",b4)':{tag:'(0011,"SIEMENS ISI",b4)',vr:"LT",name:"PatientHospitalStatus",vm:"1",version:"PrivateTag"},'(0011,"SIEMENS ISI",bc)':{tag:'(0011,"SIEMENS ISI",bc)',vr:"TM",name:"CurrentLocationTime",vm:"1",version:"PrivateTag"},'(0011,"SIEMENS ISI",c0)':{tag:'(0011,"SIEMENS ISI",c0)',vr:"LT",name:"PatientInsuranceStatus",vm:"1",version:"PrivateTag"},'(0011,"SIEMENS ISI",d0)':{tag:'(0011,"SIEMENS ISI",d0)',vr:"LT",name:"PatientBillingType",vm:"1",version:"PrivateTag"},'(0011,"SIEMENS ISI",d2)':{tag:'(0011,"SIEMENS ISI",d2)',vr:"LT",name:"PatientBillingAddress",vm:"1",version:"PrivateTag"},'(0031,"SIEMENS ISI",12)':{tag:'(0031,"SIEMENS ISI",12)',vr:"LT",name:"ExaminationReason",vm:"1",version:"PrivateTag"},'(0031,"SIEMENS ISI",30)':{tag:'(0031,"SIEMENS ISI",30)',vr:"DA",name:"RequestedDate",vm:"1",version:"PrivateTag"},'(0031,"SIEMENS ISI",32)':{tag:'(0031,"SIEMENS ISI",32)',vr:"TM",name:"WorklistRequestStartTime",vm:"1",version:"PrivateTag"},'(0031,"SIEMENS ISI",33)':{tag:'(0031,"SIEMENS ISI",33)',vr:"TM",name:"WorklistRequestEndTime",vm:"1",version:"PrivateTag"},'(0031,"SIEMENS ISI",4a)':{tag:'(0031,"SIEMENS ISI",4a)',vr:"TM",name:"RequestedTime",vm:"1",version:"PrivateTag"},'(0031,"SIEMENS ISI",80)':{tag:'(0031,"SIEMENS ISI",80)',vr:"LT",name:"RequestedLocation",vm:"1",version:"PrivateTag"},'(0055,"SIEMENS ISI",46)':{tag:'(0055,"SIEMENS ISI",46)',vr:"LT",name:"CurrentWard",vm:"1",version:"PrivateTag"},'(0193,"SIEMENS ISI",02)':{tag:'(0193,"SIEMENS ISI",02)',vr:"DS",name:"RISKey",vm:"1",version:"PrivateTag"},'(0307,"SIEMENS ISI",01)':{tag:'(0307,"SIEMENS ISI",01)',vr:"UN",name:"RISWorklistIMGEF",vm:"1",version:"PrivateTag"},'(0309,"SIEMENS ISI",01)':{tag:'(0309,"SIEMENS ISI",01)',vr:"UN",name:"RISReportIMGEF",vm:"1",version:"PrivateTag"},'(4009,"SIEMENS ISI",01)':{tag:'(4009,"SIEMENS ISI",01)',vr:"LT",name:"ReportID",vm:"1",version:"PrivateTag"},'(4009,"SIEMENS ISI",20)':{tag:'(4009,"SIEMENS ISI",20)',vr:"LT",name:"ReportStatus",vm:"1",version:"PrivateTag"},'(4009,"SIEMENS ISI",30)':{tag:'(4009,"SIEMENS ISI",30)',vr:"DA",name:"ReportCreationDate",vm:"1",version:"PrivateTag"},'(4009,"SIEMENS ISI",70)':{tag:'(4009,"SIEMENS ISI",70)',vr:"LT",name:"ReportApprovingPhysician",vm:"1",version:"PrivateTag"},'(4009,"SIEMENS ISI",e0)':{tag:'(4009,"SIEMENS ISI",e0)',vr:"LT",name:"ReportText",vm:"1",version:"PrivateTag"},'(4009,"SIEMENS ISI",e1)':{tag:'(4009,"SIEMENS ISI",e1)',vr:"LT",name:"ReportAuthor",vm:"1",version:"PrivateTag"},'(4009,"SIEMENS ISI",e3)':{tag:'(4009,"SIEMENS ISI",e3)',vr:"LT",name:"ReportingRadiologist",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MED DISPLAY",04)':{tag:'(0029,"SIEMENS MED DISPLAY",04)',vr:"LT",name:"PhotometricInterpretation",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MED DISPLAY",10)':{tag:'(0029,"SIEMENS MED DISPLAY",10)',vr:"US",name:"RowsOfSubmatrix",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MED DISPLAY",11)':{tag:'(0029,"SIEMENS MED DISPLAY",11)',vr:"US",name:"ColumnsOfSubmatrix",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MED DISPLAY",20)':{tag:'(0029,"SIEMENS MED DISPLAY",20)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MED DISPLAY",21)':{tag:'(0029,"SIEMENS MED DISPLAY",21)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MED DISPLAY",50)':{tag:'(0029,"SIEMENS MED DISPLAY",50)',vr:"US",name:"OriginOfSubmatrix",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MED DISPLAY",99)':{tag:'(0029,"SIEMENS MED DISPLAY",99)',vr:"LT",name:"ShutterType",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MED DISPLAY",a0)':{tag:'(0029,"SIEMENS MED DISPLAY",a0)',vr:"US",name:"RowsOfRectangularShutter",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MED DISPLAY",a1)':{tag:'(0029,"SIEMENS MED DISPLAY",a1)',vr:"US",name:"ColumnsOfRectangularShutter",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MED DISPLAY",a2)':{tag:'(0029,"SIEMENS MED DISPLAY",a2)',vr:"US",name:"OriginOfRectangularShutter",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MED DISPLAY",b0)':{tag:'(0029,"SIEMENS MED DISPLAY",b0)',vr:"US",name:"RadiusOfCircularShutter",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MED DISPLAY",b2)':{tag:'(0029,"SIEMENS MED DISPLAY",b2)',vr:"US",name:"OriginOfCircularShutter",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MED DISPLAY",c1)':{tag:'(0029,"SIEMENS MED DISPLAY",c1)',vr:"US",name:"ContourOfIrregularShutter",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MED HG",10)':{tag:'(0029,"SIEMENS MED HG",10)',vr:"US",name:"ListOfGroupNumbers",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MED HG",15)':{tag:'(0029,"SIEMENS MED HG",15)',vr:"LT",name:"ListOfShadowOwnerCodes",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MED HG",20)':{tag:'(0029,"SIEMENS MED HG",20)',vr:"US",name:"ListOfElementNumbers",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MED HG",30)':{tag:'(0029,"SIEMENS MED HG",30)',vr:"US",name:"ListOfTotalDisplayLength",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MED HG",40)':{tag:'(0029,"SIEMENS MED HG",40)',vr:"LT",name:"ListOfDisplayPrefix",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MED HG",50)':{tag:'(0029,"SIEMENS MED HG",50)',vr:"LT",name:"ListOfDisplayPostfix",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MED HG",60)':{tag:'(0029,"SIEMENS MED HG",60)',vr:"US",name:"ListOfTextPosition",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MED HG",70)':{tag:'(0029,"SIEMENS MED HG",70)',vr:"LT",name:"ListOfTextConcatenation",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MED MG",10)':{tag:'(0029,"SIEMENS MED MG",10)',vr:"US",name:"ListOfGroupNumbers",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MED MG",15)':{tag:'(0029,"SIEMENS MED MG",15)',vr:"LT",name:"ListOfShadowOwnerCodes",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MED MG",20)':{tag:'(0029,"SIEMENS MED MG",20)',vr:"US",name:"ListOfElementNumbers",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MED MG",30)':{tag:'(0029,"SIEMENS MED MG",30)',vr:"US",name:"ListOfTotalDisplayLength",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MED MG",40)':{tag:'(0029,"SIEMENS MED MG",40)',vr:"LT",name:"ListOfDisplayPrefix",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MED MG",50)':{tag:'(0029,"SIEMENS MED MG",50)',vr:"LT",name:"ListOfDisplayPostfix",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MED MG",60)':{tag:'(0029,"SIEMENS MED MG",60)',vr:"US",name:"ListOfTextPosition",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MED MG",70)':{tag:'(0029,"SIEMENS MED MG",70)',vr:"LT",name:"ListOfTextConcatenation",vm:"1",version:"PrivateTag"},'(0009,"SIEMENS MED",10)':{tag:'(0009,"SIEMENS MED",10)',vr:"LO",name:"RecognitionCode",vm:"1",version:"PrivateTag"},'(0009,"SIEMENS MED",30)':{tag:'(0009,"SIEMENS MED",30)',vr:"UL",name:"ByteOffsetOfOriginalHeader",vm:"1",version:"PrivateTag"},'(0009,"SIEMENS MED",31)':{tag:'(0009,"SIEMENS MED",31)',vr:"UL",name:"LengthOfOriginalHeader",vm:"1",version:"PrivateTag"},'(0009,"SIEMENS MED",40)':{tag:'(0009,"SIEMENS MED",40)',vr:"UL",name:"ByteOffsetOfPixelmatrix",vm:"1",version:"PrivateTag"},'(0009,"SIEMENS MED",41)':{tag:'(0009,"SIEMENS MED",41)',vr:"UL",name:"LengthOfPixelmatrixInBytes",vm:"1",version:"PrivateTag"},'(0009,"SIEMENS MED",50)':{tag:'(0009,"SIEMENS MED",50)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"SIEMENS MED",51)':{tag:'(0009,"SIEMENS MED",51)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"SIEMENS MED",f5)':{tag:'(0009,"SIEMENS MED",f5)',vr:"LT",name:"PDMEFIDPlaceholder",vm:"1",version:"PrivateTag"},'(0009,"SIEMENS MED",f6)':{tag:'(0009,"SIEMENS MED",f6)',vr:"LT",name:"PDMDataObjectTypeExtension",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MED",10)':{tag:'(0021,"SIEMENS MED",10)',vr:"DS",name:"Zoom",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MED",11)':{tag:'(0021,"SIEMENS MED",11)',vr:"DS",name:"Target",vm:"2",version:"PrivateTag"},'(0021,"SIEMENS MED",12)':{tag:'(0021,"SIEMENS MED",12)',vr:"IS",name:"TubeAngle",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MED",20)':{tag:'(0021,"SIEMENS MED",20)',vr:"US",name:"ROIMask",vm:"1",version:"PrivateTag"},'(7001,"SIEMENS MED",10)':{tag:'(7001,"SIEMENS MED",10)',vr:"LT",name:"Dummy",vm:"1",version:"PrivateTag"},'(7003,"SIEMENS MED",10)':{tag:'(7003,"SIEMENS MED",10)',vr:"LT",name:"Header",vm:"1",version:"PrivateTag"},'(7005,"SIEMENS MED",10)':{tag:'(7005,"SIEMENS MED",10)',vr:"LT",name:"Dummy",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MEDCOM HEADER",08)':{tag:'(0029,"SIEMENS MEDCOM HEADER",08)',vr:"CS",name:"MedComHeaderType",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MEDCOM HEADER",09)':{tag:'(0029,"SIEMENS MEDCOM HEADER",09)',vr:"LO",name:"MedComHeaderVersion",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MEDCOM HEADER",10)':{tag:'(0029,"SIEMENS MEDCOM HEADER",10)',vr:"OB",name:"MedComHeaderInfo",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MEDCOM HEADER",20)':{tag:'(0029,"SIEMENS MEDCOM HEADER",20)',vr:"OB",name:"MedComHistoryInformation",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MEDCOM HEADER",31)':{tag:'(0029,"SIEMENS MEDCOM HEADER",31)',vr:"LO",name:"PMTFInformation1",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MEDCOM HEADER",32)':{tag:'(0029,"SIEMENS MEDCOM HEADER",32)',vr:"UL",name:"PMTFInformation2",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MEDCOM HEADER",33)':{tag:'(0029,"SIEMENS MEDCOM HEADER",33)',vr:"UL",name:"PMTFInformation3",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MEDCOM HEADER",34)':{tag:'(0029,"SIEMENS MEDCOM HEADER",34)',vr:"CS",name:"PMTFInformation4",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MEDCOM HEADER",35)':{tag:'(0029,"SIEMENS MEDCOM HEADER",35)',vr:"UL",name:"PMTFInformation5",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MEDCOM HEADER",40)':{tag:'(0029,"SIEMENS MEDCOM HEADER",40)',vr:"SQ",name:"ApplicationHeaderSequence",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MEDCOM HEADER",41)':{tag:'(0029,"SIEMENS MEDCOM HEADER",41)',vr:"CS",name:"ApplicationHeaderType",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MEDCOM HEADER",42)':{tag:'(0029,"SIEMENS MEDCOM HEADER",42)',vr:"LO",name:"ApplicationHeaderID",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MEDCOM HEADER",43)':{tag:'(0029,"SIEMENS MEDCOM HEADER",43)',vr:"LO",name:"ApplicationHeaderVersion",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MEDCOM HEADER",44)':{tag:'(0029,"SIEMENS MEDCOM HEADER",44)',vr:"OB",name:"ApplicationHeaderInfo",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MEDCOM HEADER",50)':{tag:'(0029,"SIEMENS MEDCOM HEADER",50)',vr:"LO",name:"WorkflowControlFlags",vm:"8",version:"PrivateTag"},'(0029,"SIEMENS MEDCOM HEADER",51)':{tag:'(0029,"SIEMENS MEDCOM HEADER",51)',vr:"CS",name:"ArchiveManagementFlagKeepOnline",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MEDCOM HEADER",52)':{tag:'(0029,"SIEMENS MEDCOM HEADER",52)',vr:"CS",name:"ArchiveManagementFlagDoNotArchive",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MEDCOM HEADER",53)':{tag:'(0029,"SIEMENS MEDCOM HEADER",53)',vr:"CS",name:"ImageLocationStatus",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MEDCOM HEADER",54)':{tag:'(0029,"SIEMENS MEDCOM HEADER",54)',vr:"DS",name:"EstimatedRetrieveTime",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MEDCOM HEADER",55)':{tag:'(0029,"SIEMENS MEDCOM HEADER",55)',vr:"DS",name:"DataSizeOfRetrievedImages",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MEDCOM HEADER",70)':{tag:'(0029,"SIEMENS MEDCOM HEADER",70)',vr:"SQ",name:"SiemensLinkSequence",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MEDCOM HEADER",71)':{tag:'(0029,"SIEMENS MEDCOM HEADER",71)',vr:"AT",name:"ReferencedTag",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MEDCOM HEADER",72)':{tag:'(0029,"SIEMENS MEDCOM HEADER",72)',vr:"CS",name:"ReferencedTagType",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MEDCOM HEADER",73)':{tag:'(0029,"SIEMENS MEDCOM HEADER",73)',vr:"UL",name:"ReferencedValueLength",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MEDCOM HEADER",74)':{tag:'(0029,"SIEMENS MEDCOM HEADER",74)',vr:"CS",name:"ReferencedObjectDeviceType",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MEDCOM HEADER",75)':{tag:'(0029,"SIEMENS MEDCOM HEADER",75)',vr:"OB",name:"ReferencedObjectDeviceLocation",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MEDCOM HEADER",76)':{tag:'(0029,"SIEMENS MEDCOM HEADER",76)',vr:"OB",name:"ReferencedObjectDeviceID",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MEDCOM HEADER2",60)':{tag:'(0029,"SIEMENS MEDCOM HEADER2",60)',vr:"LO",name:"SeriesWorkflowStatus",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MEDCOM OOG",08)':{tag:'(0029,"SIEMENS MEDCOM OOG",08)',vr:"CS",name:"MEDCOMOOGType",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MEDCOM OOG",09)':{tag:'(0029,"SIEMENS MEDCOM OOG",09)',vr:"LO",name:"MEDCOMOOGVersion",vm:"1",version:"PrivateTag"},'(0029,"SIEMENS MEDCOM OOG",10)':{tag:'(0029,"SIEMENS MEDCOM OOG",10)',vr:"OB",name:"MEDCOMOOGInfo",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  COAD",12)':{tag:'(0019,"SIEMENS MR VA0  COAD",12)',vr:"DS",name:"MagneticFieldStrength",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  COAD",14)':{tag:'(0019,"SIEMENS MR VA0  COAD",14)',vr:"DS",name:"ADCVoltage",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  COAD",16)':{tag:'(0019,"SIEMENS MR VA0  COAD",16)',vr:"DS",name:"ADCOffset",vm:"2",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  COAD",20)':{tag:'(0019,"SIEMENS MR VA0  COAD",20)',vr:"DS",name:"TransmitterAmplitude",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  COAD",21)':{tag:'(0019,"SIEMENS MR VA0  COAD",21)',vr:"IS",name:"NumberOfTransmitterAmplitudes",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  COAD",22)':{tag:'(0019,"SIEMENS MR VA0  COAD",22)',vr:"DS",name:"TransmitterAttenuator",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  COAD",24)':{tag:'(0019,"SIEMENS MR VA0  COAD",24)',vr:"DS",name:"TransmitterCalibration",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  COAD",26)':{tag:'(0019,"SIEMENS MR VA0  COAD",26)',vr:"DS",name:"TransmitterReference",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  COAD",50)':{tag:'(0019,"SIEMENS MR VA0  COAD",50)',vr:"DS",name:"ReceiverTotalGain",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  COAD",51)':{tag:'(0019,"SIEMENS MR VA0  COAD",51)',vr:"DS",name:"ReceiverAmplifierGain",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  COAD",52)':{tag:'(0019,"SIEMENS MR VA0  COAD",52)',vr:"DS",name:"ReceiverPreamplifierGain",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  COAD",54)':{tag:'(0019,"SIEMENS MR VA0  COAD",54)',vr:"DS",name:"ReceiverCableAttenuation",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  COAD",55)':{tag:'(0019,"SIEMENS MR VA0  COAD",55)',vr:"DS",name:"ReceiverReferenceGain",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  COAD",56)':{tag:'(0019,"SIEMENS MR VA0  COAD",56)',vr:"DS",name:"ReceiverFilterFrequency",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  COAD",60)':{tag:'(0019,"SIEMENS MR VA0  COAD",60)',vr:"DS",name:"ReconstructionScaleFactor",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  COAD",62)':{tag:'(0019,"SIEMENS MR VA0  COAD",62)',vr:"DS",name:"ReferenceScaleFactor",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  COAD",70)':{tag:'(0019,"SIEMENS MR VA0  COAD",70)',vr:"DS",name:"PhaseGradientAmplitude",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  COAD",71)':{tag:'(0019,"SIEMENS MR VA0  COAD",71)',vr:"DS",name:"ReadoutGradientAmplitude",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  COAD",72)':{tag:'(0019,"SIEMENS MR VA0  COAD",72)',vr:"DS",name:"SelectionGradientAmplitude",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  COAD",80)':{tag:'(0019,"SIEMENS MR VA0  COAD",80)',vr:"DS",name:"GradientDelayTime",vm:"3",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  COAD",82)':{tag:'(0019,"SIEMENS MR VA0  COAD",82)',vr:"DS",name:"TotalGradientDelayTime",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  COAD",90)':{tag:'(0019,"SIEMENS MR VA0  COAD",90)',vr:"LT",name:"SensitivityCorrectionLabel",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  COAD",91)':{tag:'(0019,"SIEMENS MR VA0  COAD",91)',vr:"DS",name:"SaturationPhaseEncodingVectorCoronalComponent",vm:"6",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  COAD",92)':{tag:'(0019,"SIEMENS MR VA0  COAD",92)',vr:"DS",name:"SaturationReadoutVectorCoronalComponent",vm:"6",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  COAD",a0)':{tag:'(0019,"SIEMENS MR VA0  COAD",a0)',vr:"US",name:"RFWatchdogMask",vm:"3",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  COAD",a1)':{tag:'(0019,"SIEMENS MR VA0  COAD",a1)',vr:"DS",name:"EPIReconstructionSlope",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  COAD",a2)':{tag:'(0019,"SIEMENS MR VA0  COAD",a2)',vr:"DS",name:"RFPowerErrorIndicator",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  COAD",a5)':{tag:'(0019,"SIEMENS MR VA0  COAD",a5)',vr:"DS",name:"SpecificAbsorptionRateWholeBody",vm:"3",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  COAD",a6)':{tag:'(0019,"SIEMENS MR VA0  COAD",a6)',vr:"DS",name:"SpecificEnergyDose",vm:"3",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  COAD",b0)':{tag:'(0019,"SIEMENS MR VA0  COAD",b0)',vr:"UL",name:"AdjustmentStatusMask",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  COAD",c1)':{tag:'(0019,"SIEMENS MR VA0  COAD",c1)',vr:"DS",name:"EPICapacity",vm:"6",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  COAD",c2)':{tag:'(0019,"SIEMENS MR VA0  COAD",c2)',vr:"DS",name:"EPIInductance",vm:"3",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  COAD",c3)':{tag:'(0019,"SIEMENS MR VA0  COAD",c3)',vr:"IS",name:"EPISwitchConfigurationCode",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  COAD",c4)':{tag:'(0019,"SIEMENS MR VA0  COAD",c4)',vr:"IS",name:"EPISwitchHardwareCode",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  COAD",c5)':{tag:'(0019,"SIEMENS MR VA0  COAD",c5)',vr:"DS",name:"EPISwitchDelayTime",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  COAD",d1)':{tag:'(0019,"SIEMENS MR VA0  COAD",d1)',vr:"DS",name:"FlowSensitivity",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  COAD",d2)':{tag:'(0019,"SIEMENS MR VA0  COAD",d2)',vr:"LT",name:"CalculationSubmode",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  COAD",d3)':{tag:'(0019,"SIEMENS MR VA0  COAD",d3)',vr:"DS",name:"FieldOfViewRatio",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  COAD",d4)':{tag:'(0019,"SIEMENS MR VA0  COAD",d4)',vr:"IS",name:"BaseRawMatrixSize",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  COAD",d5)':{tag:'(0019,"SIEMENS MR VA0  COAD",d5)',vr:"IS",name:"2DOversamplingLines",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  COAD",d6)':{tag:'(0019,"SIEMENS MR VA0  COAD",d6)',vr:"IS",name:"3DPhaseOversamplingPartitions",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  COAD",d7)':{tag:'(0019,"SIEMENS MR VA0  COAD",d7)',vr:"IS",name:"EchoLinePosition",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  COAD",d8)':{tag:'(0019,"SIEMENS MR VA0  COAD",d8)',vr:"IS",name:"EchoColumnPosition",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  COAD",d9)':{tag:'(0019,"SIEMENS MR VA0  COAD",d9)',vr:"IS",name:"LinesPerSegment",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  COAD",da)':{tag:'(0019,"SIEMENS MR VA0  COAD",da)',vr:"LT",name:"PhaseCodingDirection",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  GEN",10)':{tag:'(0019,"SIEMENS MR VA0  GEN",10)',vr:"DS",name:"TotalMeasurementTimeNominal",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  GEN",11)':{tag:'(0019,"SIEMENS MR VA0  GEN",11)',vr:"DS",name:"TotalMeasurementTimeCurrent",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  GEN",12)':{tag:'(0019,"SIEMENS MR VA0  GEN",12)',vr:"DS",name:"StartDelayTime",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  GEN",13)':{tag:'(0019,"SIEMENS MR VA0  GEN",13)',vr:"DS",name:"DwellTime",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  GEN",14)':{tag:'(0019,"SIEMENS MR VA0  GEN",14)',vr:"IS",name:"NumberOfPhases",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  GEN",16)':{tag:'(0019,"SIEMENS MR VA0  GEN",16)',vr:"UL",name:"SequenceControlMask",vm:"2",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  GEN",18)':{tag:'(0019,"SIEMENS MR VA0  GEN",18)',vr:"UL",name:"MeasurementStatusMask",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  GEN",20)':{tag:'(0019,"SIEMENS MR VA0  GEN",20)',vr:"IS",name:"NumberOfFourierLinesNominal",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  GEN",21)':{tag:'(0019,"SIEMENS MR VA0  GEN",21)',vr:"IS",name:"NumberOfFourierLinesCurrent",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  GEN",26)':{tag:'(0019,"SIEMENS MR VA0  GEN",26)',vr:"IS",name:"NumberOfFourierLinesAfterZero",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  GEN",28)':{tag:'(0019,"SIEMENS MR VA0  GEN",28)',vr:"IS",name:"FirstMeasuredFourierLine",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  GEN",30)':{tag:'(0019,"SIEMENS MR VA0  GEN",30)',vr:"IS",name:"AcquisitionColumns",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  GEN",31)':{tag:'(0019,"SIEMENS MR VA0  GEN",31)',vr:"IS",name:"ReconstructionColumns",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  GEN",40)':{tag:'(0019,"SIEMENS MR VA0  GEN",40)',vr:"IS",name:"ArrayCoilElementNumber",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  GEN",41)':{tag:'(0019,"SIEMENS MR VA0  GEN",41)',vr:"UL",name:"ArrayCoilElementSelectMask",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  GEN",42)':{tag:'(0019,"SIEMENS MR VA0  GEN",42)',vr:"UL",name:"ArrayCoilElementDataMask",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  GEN",43)':{tag:'(0019,"SIEMENS MR VA0  GEN",43)',vr:"IS",name:"ArrayCoilElementToADCConnect",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  GEN",44)':{tag:'(0019,"SIEMENS MR VA0  GEN",44)',vr:"DS",name:"ArrayCoilElementNoiseLevel",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  GEN",45)':{tag:'(0019,"SIEMENS MR VA0  GEN",45)',vr:"IS",name:"ArrayCoilADCPairNumber",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  GEN",46)':{tag:'(0019,"SIEMENS MR VA0  GEN",46)',vr:"UL",name:"ArrayCoilCombinationMask",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  GEN",50)':{tag:'(0019,"SIEMENS MR VA0  GEN",50)',vr:"IS",name:"NumberOfAverages",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  GEN",60)':{tag:'(0019,"SIEMENS MR VA0  GEN",60)',vr:"DS",name:"FlipAngle",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  GEN",70)':{tag:'(0019,"SIEMENS MR VA0  GEN",70)',vr:"IS",name:"NumberOfPrescans",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  GEN",81)':{tag:'(0019,"SIEMENS MR VA0  GEN",81)',vr:"LT",name:"FilterTypeForRawData",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  GEN",82)':{tag:'(0019,"SIEMENS MR VA0  GEN",82)',vr:"DS",name:"FilterParameterForRawData",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  GEN",83)':{tag:'(0019,"SIEMENS MR VA0  GEN",83)',vr:"LT",name:"FilterTypeForImageData",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  GEN",84)':{tag:'(0019,"SIEMENS MR VA0  GEN",84)',vr:"DS",name:"FilterParameterForImageData",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  GEN",85)':{tag:'(0019,"SIEMENS MR VA0  GEN",85)',vr:"LT",name:"FilterTypeForPhaseCorrection",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  GEN",86)':{tag:'(0019,"SIEMENS MR VA0  GEN",86)',vr:"DS",name:"FilterParameterForPhaseCorrection",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  GEN",87)':{tag:'(0019,"SIEMENS MR VA0  GEN",87)',vr:"LT",name:"NormalizationFilterTypeForImageData",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  GEN",88)':{tag:'(0019,"SIEMENS MR VA0  GEN",88)',vr:"DS",name:"NormalizationFilterParameterForImageData",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  GEN",90)':{tag:'(0019,"SIEMENS MR VA0  GEN",90)',vr:"IS",name:"NumberOfSaturationRegions",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  GEN",91)':{tag:'(0019,"SIEMENS MR VA0  GEN",91)',vr:"DS",name:"SaturationPhaseEncodingVectorSagittalComponent",vm:"6",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  GEN",92)':{tag:'(0019,"SIEMENS MR VA0  GEN",92)',vr:"DS",name:"SaturationReadoutVectorSagittalComponent",vm:"6",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  GEN",93)':{tag:'(0019,"SIEMENS MR VA0  GEN",93)',vr:"DS",name:"EPIStimulationMonitorMode",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  GEN",94)':{tag:'(0019,"SIEMENS MR VA0  GEN",94)',vr:"DS",name:"ImageRotationAngle",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  GEN",96)':{tag:'(0019,"SIEMENS MR VA0  GEN",96)',vr:"UL",name:"CoilIDMask",vm:"3",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  GEN",97)':{tag:'(0019,"SIEMENS MR VA0  GEN",97)',vr:"UL",name:"CoilClassMask",vm:"2",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  GEN",98)':{tag:'(0019,"SIEMENS MR VA0  GEN",98)',vr:"DS",name:"CoilPosition",vm:"3",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  GEN",a0)':{tag:'(0019,"SIEMENS MR VA0  GEN",a0)',vr:"DS",name:"EPIReconstructionPhase",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS MR VA0  GEN",a1)':{tag:'(0019,"SIEMENS MR VA0  GEN",a1)',vr:"DS",name:"EPIReconstructionSlope",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  GEN",20)':{tag:'(0021,"SIEMENS MR VA0  GEN",20)',vr:"IS",name:"PhaseCorrectionRowsSequence",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  GEN",21)':{tag:'(0021,"SIEMENS MR VA0  GEN",21)',vr:"IS",name:"PhaseCorrectionColumnsSequence",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  GEN",22)':{tag:'(0021,"SIEMENS MR VA0  GEN",22)',vr:"IS",name:"PhaseCorrectionRowsReconstruction",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  GEN",24)':{tag:'(0021,"SIEMENS MR VA0  GEN",24)',vr:"IS",name:"PhaseCorrectionColumnsReconstruction",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  GEN",30)':{tag:'(0021,"SIEMENS MR VA0  GEN",30)',vr:"IS",name:"NumberOf3DRawPartitionsNominal",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  GEN",31)':{tag:'(0021,"SIEMENS MR VA0  GEN",31)',vr:"IS",name:"NumberOf3DRawPartitionsCurrent",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  GEN",34)':{tag:'(0021,"SIEMENS MR VA0  GEN",34)',vr:"IS",name:"NumberOf3DImagePartitions",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  GEN",36)':{tag:'(0021,"SIEMENS MR VA0  GEN",36)',vr:"IS",name:"Actual3DImagePartitionNumber",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  GEN",39)':{tag:'(0021,"SIEMENS MR VA0  GEN",39)',vr:"DS",name:"SlabThickness",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  GEN",40)':{tag:'(0021,"SIEMENS MR VA0  GEN",40)',vr:"IS",name:"NumberOfSlicesNominal",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  GEN",41)':{tag:'(0021,"SIEMENS MR VA0  GEN",41)',vr:"IS",name:"NumberOfSlicesCurrent",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  GEN",42)':{tag:'(0021,"SIEMENS MR VA0  GEN",42)',vr:"IS",name:"CurrentSliceNumber",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  GEN",43)':{tag:'(0021,"SIEMENS MR VA0  GEN",43)',vr:"IS",name:"CurrentGroupNumber",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  GEN",44)':{tag:'(0021,"SIEMENS MR VA0  GEN",44)',vr:"DS",name:"CurrentSliceDistanceFactor",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  GEN",45)':{tag:'(0021,"SIEMENS MR VA0  GEN",45)',vr:"IS",name:"MIPStartRow",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  GEN",46)':{tag:'(0021,"SIEMENS MR VA0  GEN",46)',vr:"IS",name:"MIPStopRow",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  GEN",47)':{tag:'(0021,"SIEMENS MR VA0  GEN",47)',vr:"IS",name:"MIPStartColumn",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  GEN",48)':{tag:'(0021,"SIEMENS MR VA0  GEN",48)',vr:"IS",name:"MIPStartColumn",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  GEN",49)':{tag:'(0021,"SIEMENS MR VA0  GEN",49)',vr:"IS",name:"MIPStartSlice Name=",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  GEN",4a)':{tag:'(0021,"SIEMENS MR VA0  GEN",4a)',vr:"IS",name:"MIPStartSlice",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  GEN",4f)':{tag:'(0021,"SIEMENS MR VA0  GEN",4f)',vr:"LT",name:"OrderofSlices",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  GEN",50)':{tag:'(0021,"SIEMENS MR VA0  GEN",50)',vr:"US",name:"SignalMask",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  GEN",52)':{tag:'(0021,"SIEMENS MR VA0  GEN",52)',vr:"DS",name:"DelayAfterTrigger",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  GEN",53)':{tag:'(0021,"SIEMENS MR VA0  GEN",53)',vr:"IS",name:"RRInterval",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  GEN",54)':{tag:'(0021,"SIEMENS MR VA0  GEN",54)',vr:"DS",name:"NumberOfTriggerPulses",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  GEN",56)':{tag:'(0021,"SIEMENS MR VA0  GEN",56)',vr:"DS",name:"RepetitionTimeEffective",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  GEN",57)':{tag:'(0021,"SIEMENS MR VA0  GEN",57)',vr:"LT",name:"GatePhase",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  GEN",58)':{tag:'(0021,"SIEMENS MR VA0  GEN",58)',vr:"DS",name:"GateThreshold",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  GEN",59)':{tag:'(0021,"SIEMENS MR VA0  GEN",59)',vr:"DS",name:"GatedRatio",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  GEN",60)':{tag:'(0021,"SIEMENS MR VA0  GEN",60)',vr:"IS",name:"NumberOfInterpolatedImages",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  GEN",70)':{tag:'(0021,"SIEMENS MR VA0  GEN",70)',vr:"IS",name:"NumberOfEchoes",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  GEN",72)':{tag:'(0021,"SIEMENS MR VA0  GEN",72)',vr:"DS",name:"SecondEchoTime",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  GEN",73)':{tag:'(0021,"SIEMENS MR VA0  GEN",73)',vr:"DS",name:"SecondRepetitionTime",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  GEN",80)':{tag:'(0021,"SIEMENS MR VA0  GEN",80)',vr:"IS",name:"CardiacCode",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  GEN",91)':{tag:'(0021,"SIEMENS MR VA0  GEN",91)',vr:"DS",name:"SaturationPhaseEncodingVectorTransverseComponent",vm:"6",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  GEN",92)':{tag:'(0021,"SIEMENS MR VA0  GEN",92)',vr:"DS",name:"SaturationReadoutVectorTransverseComponent",vm:"6",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  GEN",93)':{tag:'(0021,"SIEMENS MR VA0  GEN",93)',vr:"DS",name:"EPIChangeValueOfMagnitude",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  GEN",94)':{tag:'(0021,"SIEMENS MR VA0  GEN",94)',vr:"DS",name:"EPIChangeValueOfXComponent",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  GEN",95)':{tag:'(0021,"SIEMENS MR VA0  GEN",95)',vr:"DS",name:"EPIChangeValueOfYComponent",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  GEN",96)':{tag:'(0021,"SIEMENS MR VA0  GEN",96)',vr:"DS",name:"EPIChangeValueOfZComponent",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  RAW",00)':{tag:'(0021,"SIEMENS MR VA0  RAW",00)',vr:"LT",name:"SequenceType",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  RAW",01)':{tag:'(0021,"SIEMENS MR VA0  RAW",01)',vr:"IS",name:"VectorSizeOriginal",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  RAW",02)':{tag:'(0021,"SIEMENS MR VA0  RAW",02)',vr:"IS",name:"VectorSizeExtended",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  RAW",03)':{tag:'(0021,"SIEMENS MR VA0  RAW",03)',vr:"DS",name:"AcquiredSpectralRange",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  RAW",04)':{tag:'(0021,"SIEMENS MR VA0  RAW",04)',vr:"DS",name:"VOIPosition",vm:"3",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  RAW",05)':{tag:'(0021,"SIEMENS MR VA0  RAW",05)',vr:"DS",name:"VOISize",vm:"3",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  RAW",06)':{tag:'(0021,"SIEMENS MR VA0  RAW",06)',vr:"IS",name:"CSIMatrixSizeOriginal",vm:"3",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  RAW",07)':{tag:'(0021,"SIEMENS MR VA0  RAW",07)',vr:"IS",name:"CSIMatrixSizeExtended",vm:"3",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  RAW",08)':{tag:'(0021,"SIEMENS MR VA0  RAW",08)',vr:"DS",name:"SpatialGridShift",vm:"3",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  RAW",09)':{tag:'(0021,"SIEMENS MR VA0  RAW",09)',vr:"DS",name:"SignalLimitsMinimum",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  RAW",10)':{tag:'(0021,"SIEMENS MR VA0  RAW",10)',vr:"DS",name:"SignalLimitsMaximum",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  RAW",11)':{tag:'(0021,"SIEMENS MR VA0  RAW",11)',vr:"DS",name:"SpecInfoMask",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  RAW",12)':{tag:'(0021,"SIEMENS MR VA0  RAW",12)',vr:"DS",name:"EPITimeRateOfChangeOfMagnitude",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  RAW",13)':{tag:'(0021,"SIEMENS MR VA0  RAW",13)',vr:"DS",name:"EPITimeRateOfChangeOfXComponent",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  RAW",14)':{tag:'(0021,"SIEMENS MR VA0  RAW",14)',vr:"DS",name:"EPITimeRateOfChangeOfYComponent",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  RAW",15)':{tag:'(0021,"SIEMENS MR VA0  RAW",15)',vr:"DS",name:"EPITimeRateOfChangeOfZComponent",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  RAW",16)':{tag:'(0021,"SIEMENS MR VA0  RAW",16)',vr:"DS",name:"EPITimeRateOfChangeLegalLimit1",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  RAW",17)':{tag:'(0021,"SIEMENS MR VA0  RAW",17)',vr:"DS",name:"EPIOperationModeFlag",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  RAW",18)':{tag:'(0021,"SIEMENS MR VA0  RAW",18)',vr:"DS",name:"EPIFieldCalculationSafetyFactor",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  RAW",19)':{tag:'(0021,"SIEMENS MR VA0  RAW",19)',vr:"DS",name:"EPILegalLimit1OfChangeValue",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  RAW",20)':{tag:'(0021,"SIEMENS MR VA0  RAW",20)',vr:"DS",name:"EPILegalLimit2OfChangeValue",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  RAW",21)':{tag:'(0021,"SIEMENS MR VA0  RAW",21)',vr:"DS",name:"EPIRiseTime",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  RAW",30)':{tag:'(0021,"SIEMENS MR VA0  RAW",30)',vr:"DS",name:"ArrayCoilADCOffset",vm:"16",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  RAW",31)':{tag:'(0021,"SIEMENS MR VA0  RAW",31)',vr:"DS",name:"ArrayCoilPreamplifierGain",vm:"16",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  RAW",50)':{tag:'(0021,"SIEMENS MR VA0  RAW",50)',vr:"LT",name:"SaturationType",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  RAW",51)':{tag:'(0021,"SIEMENS MR VA0  RAW",51)',vr:"DS",name:"SaturationNormalVector",vm:"3",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  RAW",52)':{tag:'(0021,"SIEMENS MR VA0  RAW",52)',vr:"DS",name:"SaturationPositionVector",vm:"3",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  RAW",53)':{tag:'(0021,"SIEMENS MR VA0  RAW",53)',vr:"DS",name:"SaturationThickness",vm:"6",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  RAW",54)':{tag:'(0021,"SIEMENS MR VA0  RAW",54)',vr:"DS",name:"SaturationWidth",vm:"6",version:"PrivateTag"},'(0021,"SIEMENS MR VA0  RAW",55)':{tag:'(0021,"SIEMENS MR VA0  RAW",55)',vr:"DS",name:"SaturationDistance",vm:"6",version:"PrivateTag"},'(7fe3,"SIEMENS NUMARIS II",00)':{tag:'(7fe3,"SIEMENS NUMARIS II",00)',vr:"LT",name:"ImageGraphicsFormatCode",vm:"1",version:"PrivateTag"},'(7fe3,"SIEMENS NUMARIS II",10)':{tag:'(7fe3,"SIEMENS NUMARIS II",10)',vr:"OB",name:"ImageGraphics",vm:"1",version:"PrivateTag"},'(7fe3,"SIEMENS NUMARIS II",20)':{tag:'(7fe3,"SIEMENS NUMARIS II",20)',vr:"OB",name:"ImageGraphicsDummy",vm:"1",version:"PrivateTag"},'(0011,"SIEMENS RA GEN",20)':{tag:'(0011,"SIEMENS RA GEN",20)',vr:"SL",name:"FluoroTimer",vm:"1",version:"PrivateTag"},'(0011,"SIEMENS RA GEN",25)':{tag:'(0011,"SIEMENS RA GEN",25)',vr:"SL",name:"PtopDoseAreaProduct",vm:"1",version:"PrivateTag"},'(0011,"SIEMENS RA GEN",26)':{tag:'(0011,"SIEMENS RA GEN",26)',vr:"SL",name:"PtopTotalSkinDose",vm:"1",version:"PrivateTag"},'(0011,"SIEMENS RA GEN",30)':{tag:'(0011,"SIEMENS RA GEN",30)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0011,"SIEMENS RA GEN",35)':{tag:'(0011,"SIEMENS RA GEN",35)',vr:"LO",name:"PatientInitialPuckCounter",vm:"1",version:"PrivateTag"},'(0011,"SIEMENS RA GEN",40)':{tag:'(0011,"SIEMENS RA GEN",40)',vr:"SS",name:"SPIDataObjectType",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",15)':{tag:'(0019,"SIEMENS RA GEN",15)',vr:"LO",name:"AcquiredPlane",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",1f)':{tag:'(0019,"SIEMENS RA GEN",1f)',vr:"SS",name:"DefaultTableIsoCenterHeight",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",20)':{tag:'(0019,"SIEMENS RA GEN",20)',vr:"SL",name:"SceneFlag",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",22)':{tag:'(0019,"SIEMENS RA GEN",22)',vr:"SL",name:"RefPhotofileFlag",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",24)':{tag:'(0019,"SIEMENS RA GEN",24)',vr:"LO",name:"SceneName",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",26)':{tag:'(0019,"SIEMENS RA GEN",26)',vr:"SS",name:"AcquisitionIndex",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",28)':{tag:'(0019,"SIEMENS RA GEN",28)',vr:"SS",name:"MixedPulseMode",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",2a)':{tag:'(0019,"SIEMENS RA GEN",2a)',vr:"SS",name:"NoOfPositions",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",2c)':{tag:'(0019,"SIEMENS RA GEN",2c)',vr:"SS",name:"NoOfPhases",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",2e)':{tag:'(0019,"SIEMENS RA GEN",2e)',vr:"SS",name:"FrameRateForPositions",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",30)':{tag:'(0019,"SIEMENS RA GEN",30)',vr:"SS",name:"NoOfFramesForPositions",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",32)':{tag:'(0019,"SIEMENS RA GEN",32)',vr:"SS",name:"SteppingDirection",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",34)':{tag:'(0019,"SIEMENS RA GEN",34)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",36)':{tag:'(0019,"SIEMENS RA GEN",36)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",38)':{tag:'(0019,"SIEMENS RA GEN",38)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",3a)':{tag:'(0019,"SIEMENS RA GEN",3a)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",3c)':{tag:'(0019,"SIEMENS RA GEN",3c)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",3e)':{tag:'(0019,"SIEMENS RA GEN",3e)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",40)':{tag:'(0019,"SIEMENS RA GEN",40)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",42)':{tag:'(0019,"SIEMENS RA GEN",42)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",44)':{tag:'(0019,"SIEMENS RA GEN",44)',vr:"SS",name:"ImageTransferDelay",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",46)':{tag:'(0019,"SIEMENS RA GEN",46)',vr:"SL",name:"InversFlag",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",48)':{tag:'(0019,"SIEMENS RA GEN",48)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",4a)':{tag:'(0019,"SIEMENS RA GEN",4a)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",4c)':{tag:'(0019,"SIEMENS RA GEN",4c)',vr:"SS",name:"BlankingCircleDiameter",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",50)':{tag:'(0019,"SIEMENS RA GEN",50)',vr:"SL",name:"StandDataValid",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",52)':{tag:'(0019,"SIEMENS RA GEN",52)',vr:"SS",name:"TableTilt",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",54)':{tag:'(0019,"SIEMENS RA GEN",54)',vr:"SS",name:"TableAxisRotation",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",56)':{tag:'(0019,"SIEMENS RA GEN",56)',vr:"SS",name:"TableLongitudalPosition",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",58)':{tag:'(0019,"SIEMENS RA GEN",58)',vr:"SS",name:"TableSideOffset",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",5a)':{tag:'(0019,"SIEMENS RA GEN",5a)',vr:"SS",name:"TableIsoCenterHeight",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",5c)':{tag:'(0019,"SIEMENS RA GEN",5c)',vr:"UN",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",5e)':{tag:'(0019,"SIEMENS RA GEN",5e)',vr:"SL",name:"CollimationDataValid",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",60)':{tag:'(0019,"SIEMENS RA GEN",60)',vr:"SL",name:"PeriSequenceNo",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",62)':{tag:'(0019,"SIEMENS RA GEN",62)',vr:"SL",name:"PeriTotalScenes",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",64)':{tag:'(0019,"SIEMENS RA GEN",64)',vr:"SL",name:"PeriOverlapTop",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",66)':{tag:'(0019,"SIEMENS RA GEN",66)',vr:"SL",name:"PeriOverlapBottom",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",68)':{tag:'(0019,"SIEMENS RA GEN",68)',vr:"SL",name:"RawImageNumber",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",6a)':{tag:'(0019,"SIEMENS RA GEN",6a)',vr:"SL",name:"XRayDataValid",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",70)':{tag:'(0019,"SIEMENS RA GEN",70)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",72)':{tag:'(0019,"SIEMENS RA GEN",72)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",74)':{tag:'(0019,"SIEMENS RA GEN",74)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",76)':{tag:'(0019,"SIEMENS RA GEN",76)',vr:"SL",name:"FillingAverageFactor",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",78)':{tag:'(0019,"SIEMENS RA GEN",78)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",7a)':{tag:'(0019,"SIEMENS RA GEN",7a)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",7c)':{tag:'(0019,"SIEMENS RA GEN",7c)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",7e)':{tag:'(0019,"SIEMENS RA GEN",7e)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",80)':{tag:'(0019,"SIEMENS RA GEN",80)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",82)':{tag:'(0019,"SIEMENS RA GEN",82)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",84)':{tag:'(0019,"SIEMENS RA GEN",84)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",86)':{tag:'(0019,"SIEMENS RA GEN",86)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",88)':{tag:'(0019,"SIEMENS RA GEN",88)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",8a)':{tag:'(0019,"SIEMENS RA GEN",8a)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",8c)':{tag:'(0019,"SIEMENS RA GEN",8c)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",8e)':{tag:'(0019,"SIEMENS RA GEN",8e)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",92)':{tag:'(0019,"SIEMENS RA GEN",92)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",94)':{tag:'(0019,"SIEMENS RA GEN",94)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",96)':{tag:'(0019,"SIEMENS RA GEN",96)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",98)':{tag:'(0019,"SIEMENS RA GEN",98)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",9a)':{tag:'(0019,"SIEMENS RA GEN",9a)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",9c)':{tag:'(0019,"SIEMENS RA GEN",9c)',vr:"SL",name:"IntensifierLevelCalibrationFactor",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",9e)':{tag:'(0019,"SIEMENS RA GEN",9e)',vr:"SL",name:"NativeReviewFlag",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",a2)':{tag:'(0019,"SIEMENS RA GEN",a2)',vr:"SL",name:"SceneNumber",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",a4)':{tag:'(0019,"SIEMENS RA GEN",a4)',vr:"SS",name:"AcquisitionMode",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",a5)':{tag:'(0019,"SIEMENS RA GEN",a5)',vr:"SS",name:"AcquisitonFrameRate",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",a6)':{tag:'(0019,"SIEMENS RA GEN",a6)',vr:"SL",name:"ECGFlag",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",a7)':{tag:'(0019,"SIEMENS RA GEN",a7)',vr:"SL",name:"AdditionalSceneData",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",a8)':{tag:'(0019,"SIEMENS RA GEN",a8)',vr:"SL",name:"FileCopyFlag",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",a9)':{tag:'(0019,"SIEMENS RA GEN",a9)',vr:"SL",name:"PhlebovisionFlag",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",aa)':{tag:'(0019,"SIEMENS RA GEN",aa)',vr:"SL",name:"Co2Flag",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",ab)':{tag:'(0019,"SIEMENS RA GEN",ab)',vr:"SS",name:"MaxSpeed",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",ac)':{tag:'(0019,"SIEMENS RA GEN",ac)',vr:"SS",name:"StepWidth",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",ad)':{tag:'(0019,"SIEMENS RA GEN",ad)',vr:"SL",name:"DigitalAcquisitionZoom",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA GEN",ff)':{tag:'(0019,"SIEMENS RA GEN",ff)',vr:"SS",name:"Internal",vm:"1-n",version:"PrivateTag"},'(0021,"SIEMENS RA GEN",15)':{tag:'(0021,"SIEMENS RA GEN",15)',vr:"SS",name:"ImagesInStudy",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS RA GEN",20)':{tag:'(0021,"SIEMENS RA GEN",20)',vr:"SS",name:"ScenesInStudy",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS RA GEN",25)':{tag:'(0021,"SIEMENS RA GEN",25)',vr:"SS",name:"ImagesInPhotofile",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS RA GEN",27)':{tag:'(0021,"SIEMENS RA GEN",27)',vr:"SS",name:"PlaneBImagesExist",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS RA GEN",28)':{tag:'(0021,"SIEMENS RA GEN",28)',vr:"SS",name:"NoOf2MBChunks",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS RA GEN",30)':{tag:'(0021,"SIEMENS RA GEN",30)',vr:"SS",name:"ImagesInAllScenes",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS RA GEN",40)':{tag:'(0021,"SIEMENS RA GEN",40)',vr:"SS",name:"ArchiveSWInternalVersion",vm:"1",version:"PrivateTag"},'(0011,"SIEMENS RA PLANE A",28)':{tag:'(0011,"SIEMENS RA PLANE A",28)',vr:"SL",name:"FluoroTimerA",vm:"1",version:"PrivateTag"},'(0011,"SIEMENS RA PLANE A",29)':{tag:'(0011,"SIEMENS RA PLANE A",29)',vr:"SL",name:"FluoroSkinDoseA",vm:"1",version:"PrivateTag"},'(0011,"SIEMENS RA PLANE A",2a)':{tag:'(0011,"SIEMENS RA PLANE A",2a)',vr:"SL",name:"TotalSkinDoseA",vm:"1",version:"PrivateTag"},'(0011,"SIEMENS RA PLANE A",2b)':{tag:'(0011,"SIEMENS RA PLANE A",2b)',vr:"SL",name:"FluoroDoseAreaProductA",vm:"1",version:"PrivateTag"},'(0011,"SIEMENS RA PLANE A",2c)':{tag:'(0011,"SIEMENS RA PLANE A",2c)',vr:"SL",name:"TotalDoseAreaProductA",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",15)':{tag:'(0019,"SIEMENS RA PLANE A",15)',vr:"LT",name:"OfflineUID",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",18)':{tag:'(0019,"SIEMENS RA PLANE A",18)',vr:"SS",name:"Internal",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",19)':{tag:'(0019,"SIEMENS RA PLANE A",19)',vr:"SS",name:"Internal",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",1a)':{tag:'(0019,"SIEMENS RA PLANE A",1a)',vr:"SS",name:"Internal",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",1b)':{tag:'(0019,"SIEMENS RA PLANE A",1b)',vr:"SS",name:"Internal",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",1c)':{tag:'(0019,"SIEMENS RA PLANE A",1c)',vr:"SS",name:"Internal",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",1d)':{tag:'(0019,"SIEMENS RA PLANE A",1d)',vr:"SS",name:"Internal",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",1e)':{tag:'(0019,"SIEMENS RA PLANE A",1e)',vr:"SS",name:"Internal",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",1f)':{tag:'(0019,"SIEMENS RA PLANE A",1f)',vr:"SS",name:"Internal",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",20)':{tag:'(0019,"SIEMENS RA PLANE A",20)',vr:"SS",name:"SystemCalibFactorPlaneA",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",22)':{tag:'(0019,"SIEMENS RA PLANE A",22)',vr:"SS",name:"XRayParameterSetNo",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",24)':{tag:'(0019,"SIEMENS RA PLANE A",24)',vr:"SS",name:"XRaySystem",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",26)':{tag:'(0019,"SIEMENS RA PLANE A",26)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",28)':{tag:'(0019,"SIEMENS RA PLANE A",28)',vr:"SS",name:"AcquiredDisplayMode",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",2a)':{tag:'(0019,"SIEMENS RA PLANE A",2a)',vr:"SS",name:"AcquisitionDelay",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",2c)':{tag:'(0019,"SIEMENS RA PLANE A",2c)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",2e)':{tag:'(0019,"SIEMENS RA PLANE A",2e)',vr:"SS",name:"MaxFramesLimit",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",30)':{tag:'(0019,"SIEMENS RA PLANE A",30)',vr:"US",name:"MaximumFrameSizeNIU",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",32)':{tag:'(0019,"SIEMENS RA PLANE A",32)',vr:"SS",name:"SubtractedFilterType",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",34)':{tag:'(0019,"SIEMENS RA PLANE A",34)',vr:"SS",name:"FilterFactorNative",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",36)':{tag:'(0019,"SIEMENS RA PLANE A",36)',vr:"SS",name:"AnatomicBackgroundFactor",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",38)':{tag:'(0019,"SIEMENS RA PLANE A",38)',vr:"SS",name:"WindowUpperLimitNative",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",3a)':{tag:'(0019,"SIEMENS RA PLANE A",3a)',vr:"SS",name:"WindowLowerLimitNative",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",3c)':{tag:'(0019,"SIEMENS RA PLANE A",3c)',vr:"SS",name:"WindowBrightnessPhase1",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",3e)':{tag:'(0019,"SIEMENS RA PLANE A",3e)',vr:"SS",name:"WindowBrightnessPhase2",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",40)':{tag:'(0019,"SIEMENS RA PLANE A",40)',vr:"SS",name:"WindowContrastPhase1",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",42)':{tag:'(0019,"SIEMENS RA PLANE A",42)',vr:"SS",name:"WindowContrastPhase2",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",44)':{tag:'(0019,"SIEMENS RA PLANE A",44)',vr:"SS",name:"FilterFactorSub",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",46)':{tag:'(0019,"SIEMENS RA PLANE A",46)',vr:"SS",name:"PeakOpacified",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",48)':{tag:'(0019,"SIEMENS RA PLANE A",48)',vr:"SL",name:"MaskFrame",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",4a)':{tag:'(0019,"SIEMENS RA PLANE A",4a)',vr:"SL",name:"BIHFrame",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",4c)':{tag:'(0019,"SIEMENS RA PLANE A",4c)',vr:"SS",name:"CentBeamAngulationCaudCran",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",4e)':{tag:'(0019,"SIEMENS RA PLANE A",4e)',vr:"SS",name:"CentBeamAngulationLRAnterior",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",50)':{tag:'(0019,"SIEMENS RA PLANE A",50)',vr:"SS",name:"LongitudinalPosition",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",52)':{tag:'(0019,"SIEMENS RA PLANE A",52)',vr:"SS",name:"SideOffset",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",54)':{tag:'(0019,"SIEMENS RA PLANE A",54)',vr:"SS",name:"IsoCenterHeight",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",56)':{tag:'(0019,"SIEMENS RA PLANE A",56)',vr:"SS",name:"ImageTwist",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",58)':{tag:'(0019,"SIEMENS RA PLANE A",58)',vr:"SS",name:"SourceImageDistance",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",5a)':{tag:'(0019,"SIEMENS RA PLANE A",5a)',vr:"SS",name:"MechanicalMagnificationFactor",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",5c)':{tag:'(0019,"SIEMENS RA PLANE A",5c)',vr:"SL",name:"CalibrationFlag",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",5e)':{tag:'(0019,"SIEMENS RA PLANE A",5e)',vr:"SL",name:"CalibrationAngleCranCaud",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",60)':{tag:'(0019,"SIEMENS RA PLANE A",60)',vr:"SL",name:"CalibrationAngleRAOLAO",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",62)':{tag:'(0019,"SIEMENS RA PLANE A",62)',vr:"SL",name:"CalibrationTableToFloorDist",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",64)':{tag:'(0019,"SIEMENS RA PLANE A",64)',vr:"SL",name:"CalibrationIsocenterToFloorDist",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",66)':{tag:'(0019,"SIEMENS RA PLANE A",66)',vr:"SL",name:"CalibrationIsocenterToSourceDist",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",68)':{tag:'(0019,"SIEMENS RA PLANE A",68)',vr:"SL",name:"CalibrationSourceToII",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",6a)':{tag:'(0019,"SIEMENS RA PLANE A",6a)',vr:"SL",name:"CalibrationIIZoom",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",6c)':{tag:'(0019,"SIEMENS RA PLANE A",6c)',vr:"SL",name:"CalibrationIIField",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",6e)':{tag:'(0019,"SIEMENS RA PLANE A",6e)',vr:"SL",name:"CalibrationFactor",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",70)':{tag:'(0019,"SIEMENS RA PLANE A",70)',vr:"SL",name:"CalibrationObjectToImageDistance",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",72)':{tag:'(0019,"SIEMENS RA PLANE A",72)',vr:"SL",name:"CalibrationSystemFactor",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",74)':{tag:'(0019,"SIEMENS RA PLANE A",74)',vr:"SL",name:"CalibrationSystemCorrection",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",76)':{tag:'(0019,"SIEMENS RA PLANE A",76)',vr:"SL",name:"CalibrationSystemIIFormats",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",78)':{tag:'(0019,"SIEMENS RA PLANE A",78)',vr:"SL",name:"CalibrationGantryDataValid",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",7a)':{tag:'(0019,"SIEMENS RA PLANE A",7a)',vr:"SS",name:"CollimatorSquareBreadth",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",7c)':{tag:'(0019,"SIEMENS RA PLANE A",7c)',vr:"SS",name:"CollimatorSquareHeight",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",7e)':{tag:'(0019,"SIEMENS RA PLANE A",7e)',vr:"SS",name:"CollimatorSquareDiameter",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",80)':{tag:'(0019,"SIEMENS RA PLANE A",80)',vr:"SS",name:"CollimaterFingerTurnAngle",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",82)':{tag:'(0019,"SIEMENS RA PLANE A",82)',vr:"SS",name:"CollimaterFingerPosition",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",84)':{tag:'(0019,"SIEMENS RA PLANE A",84)',vr:"SS",name:"CollimaterDiaphragmTurnAngle",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",86)':{tag:'(0019,"SIEMENS RA PLANE A",86)',vr:"SS",name:"CollimaterDiaphragmPosition1",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",88)':{tag:'(0019,"SIEMENS RA PLANE A",88)',vr:"SS",name:"CollimaterDiaphragmPosition2",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",8a)':{tag:'(0019,"SIEMENS RA PLANE A",8a)',vr:"SS",name:"CollimaterDiaphragmMode",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",8c)':{tag:'(0019,"SIEMENS RA PLANE A",8c)',vr:"SS",name:"CollimaterBeamLimitBreadth",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",8e)':{tag:'(0019,"SIEMENS RA PLANE A",8e)',vr:"SS",name:"CollimaterBeamLimitHeight",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",90)':{tag:'(0019,"SIEMENS RA PLANE A",90)',vr:"SS",name:"CollimaterBeamLimitDiameter",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",92)':{tag:'(0019,"SIEMENS RA PLANE A",92)',vr:"SS",name:"X-RayControlMOde",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",94)':{tag:'(0019,"SIEMENS RA PLANE A",94)',vr:"SS",name:"X-RaySystem",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",96)':{tag:'(0019,"SIEMENS RA PLANE A",96)',vr:"SS",name:"FocalSpot",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",98)':{tag:'(0019,"SIEMENS RA PLANE A",98)',vr:"SS",name:"ExposureControl",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",9a)':{tag:'(0019,"SIEMENS RA PLANE A",9a)',vr:"SL",name:"XRayVoltage",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",9c)':{tag:'(0019,"SIEMENS RA PLANE A",9c)',vr:"SL",name:"XRayCurrent",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",9e)':{tag:'(0019,"SIEMENS RA PLANE A",9e)',vr:"SL",name:"XRayCurrentTimeProduct",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",a0)':{tag:'(0019,"SIEMENS RA PLANE A",a0)',vr:"SL",name:"XRayPulseTime",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",a2)':{tag:'(0019,"SIEMENS RA PLANE A",a2)',vr:"SL",name:"XRaySceneTimeFluoroClock",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",a4)':{tag:'(0019,"SIEMENS RA PLANE A",a4)',vr:"SS",name:"MaximumPulseRate",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",a6)':{tag:'(0019,"SIEMENS RA PLANE A",a6)',vr:"SS",name:"PulsesPerScene",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",a8)':{tag:'(0019,"SIEMENS RA PLANE A",a8)',vr:"SL",name:"DoseAreaProductOfScene",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",aa)':{tag:'(0019,"SIEMENS RA PLANE A",aa)',vr:"SS",name:"Dose",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",ac)':{tag:'(0019,"SIEMENS RA PLANE A",ac)',vr:"SS",name:"DoseRate",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",ae)':{tag:'(0019,"SIEMENS RA PLANE A",ae)',vr:"SL",name:"IIToCoverDistance",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",b0)':{tag:'(0019,"SIEMENS RA PLANE A",b0)',vr:"SS",name:"LastFramePhase1",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",b1)':{tag:'(0019,"SIEMENS RA PLANE A",b1)',vr:"SS",name:"FrameRatePhase1",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",b2)':{tag:'(0019,"SIEMENS RA PLANE A",b2)',vr:"SS",name:"LastFramePhase2",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",b3)':{tag:'(0019,"SIEMENS RA PLANE A",b3)',vr:"SS",name:"FrameRatePhase2",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",b4)':{tag:'(0019,"SIEMENS RA PLANE A",b4)',vr:"SS",name:"LastFramePhase3",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",b5)':{tag:'(0019,"SIEMENS RA PLANE A",b5)',vr:"SS",name:"FrameRatePhase3",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",b6)':{tag:'(0019,"SIEMENS RA PLANE A",b6)',vr:"SS",name:"LastFramePhase4",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",b7)':{tag:'(0019,"SIEMENS RA PLANE A",b7)',vr:"SS",name:"FrameRatePhase4",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",b8)':{tag:'(0019,"SIEMENS RA PLANE A",b8)',vr:"SS",name:"GammaOfNativeImage",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",b9)':{tag:'(0019,"SIEMENS RA PLANE A",b9)',vr:"SS",name:"GammaOfTVSystem",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",bb)':{tag:'(0019,"SIEMENS RA PLANE A",bb)',vr:"SL",name:"PixelshiftX",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",bc)':{tag:'(0019,"SIEMENS RA PLANE A",bc)',vr:"SL",name:"PixelshiftY",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",bd)':{tag:'(0019,"SIEMENS RA PLANE A",bd)',vr:"SL",name:"MaskAverageFactor",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",be)':{tag:'(0019,"SIEMENS RA PLANE A",be)',vr:"SL",name:"BlankingCircleFlag",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",bf)':{tag:'(0019,"SIEMENS RA PLANE A",bf)',vr:"SL",name:"CircleRowStart",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",c0)':{tag:'(0019,"SIEMENS RA PLANE A",c0)',vr:"SL",name:"CircleRowEnd",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",c1)':{tag:'(0019,"SIEMENS RA PLANE A",c1)',vr:"SL",name:"CircleColumnStart",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",c2)':{tag:'(0019,"SIEMENS RA PLANE A",c2)',vr:"SL",name:"CircleColumnEnd",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",c3)':{tag:'(0019,"SIEMENS RA PLANE A",c3)',vr:"SL",name:"CircleDiameter",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",c4)':{tag:'(0019,"SIEMENS RA PLANE A",c4)',vr:"SL",name:"RectangularCollimaterFlag",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",c5)':{tag:'(0019,"SIEMENS RA PLANE A",c5)',vr:"SL",name:"RectangleRowStart",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",c6)':{tag:'(0019,"SIEMENS RA PLANE A",c6)',vr:"SL",name:"RectangleRowEnd",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",c7)':{tag:'(0019,"SIEMENS RA PLANE A",c7)',vr:"SL",name:"RectangleColumnStart",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",c8)':{tag:'(0019,"SIEMENS RA PLANE A",c8)',vr:"SL",name:"RectangleColumnEnd",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",c9)':{tag:'(0019,"SIEMENS RA PLANE A",c9)',vr:"SL",name:"RectangleAngulation",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",ca)':{tag:'(0019,"SIEMENS RA PLANE A",ca)',vr:"SL",name:"IrisCollimatorFlag",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",cb)':{tag:'(0019,"SIEMENS RA PLANE A",cb)',vr:"SL",name:"IrisRowStart",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",cc)':{tag:'(0019,"SIEMENS RA PLANE A",cc)',vr:"SL",name:"IrisRowEnd",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",cd)':{tag:'(0019,"SIEMENS RA PLANE A",cd)',vr:"SL",name:"IrisColumnStart",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",ce)':{tag:'(0019,"SIEMENS RA PLANE A",ce)',vr:"SL",name:"IrisColumnEnd",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",cf)':{tag:'(0019,"SIEMENS RA PLANE A",cf)',vr:"SL",name:"IrisAngulation",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",d1)':{tag:'(0019,"SIEMENS RA PLANE A",d1)',vr:"SS",name:"NumberOfFramesPlane",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",d2)':{tag:'(0019,"SIEMENS RA PLANE A",d2)',vr:"SS",name:"Internal",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",d3)':{tag:'(0019,"SIEMENS RA PLANE A",d3)',vr:"SS",name:"Internal",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",d4)':{tag:'(0019,"SIEMENS RA PLANE A",d4)',vr:"SS",name:"Internal",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",d5)':{tag:'(0019,"SIEMENS RA PLANE A",d5)',vr:"SS",name:"Internal",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",d6)':{tag:'(0019,"SIEMENS RA PLANE A",d6)',vr:"SS",name:"Internal",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",d7)':{tag:'(0019,"SIEMENS RA PLANE A",d7)',vr:"SS",name:"Internal",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",d8)':{tag:'(0019,"SIEMENS RA PLANE A",d8)',vr:"SS",name:"Internal",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",d9)':{tag:'(0019,"SIEMENS RA PLANE A",d9)',vr:"SS",name:"Internal",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",da)':{tag:'(0019,"SIEMENS RA PLANE A",da)',vr:"SS",name:"Internal",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",db)':{tag:'(0019,"SIEMENS RA PLANE A",db)',vr:"SS",name:"Internal",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",dc)':{tag:'(0019,"SIEMENS RA PLANE A",dc)',vr:"SS",name:"Internal",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",dd)':{tag:'(0019,"SIEMENS RA PLANE A",dd)',vr:"SL",name:"AnatomicBackground",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",de)':{tag:'(0019,"SIEMENS RA PLANE A",de)',vr:"SL",name:"AutoWindowBase",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",df)':{tag:'(0019,"SIEMENS RA PLANE A",df)',vr:"SS",name:"Internal",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE A",e0)':{tag:'(0019,"SIEMENS RA PLANE A",e0)',vr:"SL",name:"Internal",vm:"1",version:"PrivateTag"},'(0011,"SIEMENS RA PLANE B",28)':{tag:'(0011,"SIEMENS RA PLANE B",28)',vr:"SL",name:"FluoroTimerB",vm:"1",version:"PrivateTag"},'(0011,"SIEMENS RA PLANE B",29)':{tag:'(0011,"SIEMENS RA PLANE B",29)',vr:"SL",name:"FluoroSkinDoseB",vm:"1",version:"PrivateTag"},'(0011,"SIEMENS RA PLANE B",2a)':{tag:'(0011,"SIEMENS RA PLANE B",2a)',vr:"SL",name:"TotalSkinDoseB",vm:"1",version:"PrivateTag"},'(0011,"SIEMENS RA PLANE B",2b)':{tag:'(0011,"SIEMENS RA PLANE B",2b)',vr:"SL",name:"FluoroDoseAreaProductB",vm:"1",version:"PrivateTag"},'(0011,"SIEMENS RA PLANE B",2c)':{tag:'(0011,"SIEMENS RA PLANE B",2c)',vr:"SL",name:"TotalDoseAreaProductB",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",18)':{tag:'(0019,"SIEMENS RA PLANE B",18)',vr:"SS",name:"Internal",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",19)':{tag:'(0019,"SIEMENS RA PLANE B",19)',vr:"SS",name:"Internal",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",1a)':{tag:'(0019,"SIEMENS RA PLANE B",1a)',vr:"SS",name:"Internal",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",1b)':{tag:'(0019,"SIEMENS RA PLANE B",1b)',vr:"SS",name:"Internal",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",1c)':{tag:'(0019,"SIEMENS RA PLANE B",1c)',vr:"SS",name:"Internal",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",1d)':{tag:'(0019,"SIEMENS RA PLANE B",1d)',vr:"SS",name:"Internal",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",1e)':{tag:'(0019,"SIEMENS RA PLANE B",1e)',vr:"SS",name:"Internal",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",1f)':{tag:'(0019,"SIEMENS RA PLANE B",1f)',vr:"SS",name:"Internal",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",20)':{tag:'(0019,"SIEMENS RA PLANE B",20)',vr:"SL",name:"SystemCalibFactorPlaneB",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",22)':{tag:'(0019,"SIEMENS RA PLANE B",22)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",24)':{tag:'(0019,"SIEMENS RA PLANE B",24)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",26)':{tag:'(0019,"SIEMENS RA PLANE B",26)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",28)':{tag:'(0019,"SIEMENS RA PLANE B",28)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",2a)':{tag:'(0019,"SIEMENS RA PLANE B",2a)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",2c)':{tag:'(0019,"SIEMENS RA PLANE B",2c)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",2e)':{tag:'(0019,"SIEMENS RA PLANE B",2e)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",30)':{tag:'(0019,"SIEMENS RA PLANE B",30)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",32)':{tag:'(0019,"SIEMENS RA PLANE B",32)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",34)':{tag:'(0019,"SIEMENS RA PLANE B",34)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",36)':{tag:'(0019,"SIEMENS RA PLANE B",36)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",38)':{tag:'(0019,"SIEMENS RA PLANE B",38)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",3a)':{tag:'(0019,"SIEMENS RA PLANE B",3a)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",3c)':{tag:'(0019,"SIEMENS RA PLANE B",3c)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",3e)':{tag:'(0019,"SIEMENS RA PLANE B",3e)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",40)':{tag:'(0019,"SIEMENS RA PLANE B",40)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",42)':{tag:'(0019,"SIEMENS RA PLANE B",42)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",44)':{tag:'(0019,"SIEMENS RA PLANE B",44)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",46)':{tag:'(0019,"SIEMENS RA PLANE B",46)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",48)':{tag:'(0019,"SIEMENS RA PLANE B",48)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",4a)':{tag:'(0019,"SIEMENS RA PLANE B",4a)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",4c)':{tag:'(0019,"SIEMENS RA PLANE B",4c)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",4e)':{tag:'(0019,"SIEMENS RA PLANE B",4e)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",50)':{tag:'(0019,"SIEMENS RA PLANE B",50)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",52)':{tag:'(0019,"SIEMENS RA PLANE B",52)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",54)':{tag:'(0019,"SIEMENS RA PLANE B",54)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",56)':{tag:'(0019,"SIEMENS RA PLANE B",56)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",58)':{tag:'(0019,"SIEMENS RA PLANE B",58)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",5a)':{tag:'(0019,"SIEMENS RA PLANE B",5a)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",5c)':{tag:'(0019,"SIEMENS RA PLANE B",5c)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",5e)':{tag:'(0019,"SIEMENS RA PLANE B",5e)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",60)':{tag:'(0019,"SIEMENS RA PLANE B",60)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",62)':{tag:'(0019,"SIEMENS RA PLANE B",62)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",64)':{tag:'(0019,"SIEMENS RA PLANE B",64)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",66)':{tag:'(0019,"SIEMENS RA PLANE B",66)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",68)':{tag:'(0019,"SIEMENS RA PLANE B",68)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",6a)':{tag:'(0019,"SIEMENS RA PLANE B",6a)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",6c)':{tag:'(0019,"SIEMENS RA PLANE B",6c)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",6e)':{tag:'(0019,"SIEMENS RA PLANE B",6e)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",70)':{tag:'(0019,"SIEMENS RA PLANE B",70)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",72)':{tag:'(0019,"SIEMENS RA PLANE B",72)',vr:"UN",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",74)':{tag:'(0019,"SIEMENS RA PLANE B",74)',vr:"UN",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",76)':{tag:'(0019,"SIEMENS RA PLANE B",76)',vr:"UN",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",78)':{tag:'(0019,"SIEMENS RA PLANE B",78)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",7a)':{tag:'(0019,"SIEMENS RA PLANE B",7a)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",7c)':{tag:'(0019,"SIEMENS RA PLANE B",7c)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",7e)':{tag:'(0019,"SIEMENS RA PLANE B",7e)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",80)':{tag:'(0019,"SIEMENS RA PLANE B",80)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",82)':{tag:'(0019,"SIEMENS RA PLANE B",82)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",84)':{tag:'(0019,"SIEMENS RA PLANE B",84)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",86)':{tag:'(0019,"SIEMENS RA PLANE B",86)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",88)':{tag:'(0019,"SIEMENS RA PLANE B",88)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",8a)':{tag:'(0019,"SIEMENS RA PLANE B",8a)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",8c)':{tag:'(0019,"SIEMENS RA PLANE B",8c)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",8e)':{tag:'(0019,"SIEMENS RA PLANE B",8e)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",90)':{tag:'(0019,"SIEMENS RA PLANE B",90)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",92)':{tag:'(0019,"SIEMENS RA PLANE B",92)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",94)':{tag:'(0019,"SIEMENS RA PLANE B",94)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",96)':{tag:'(0019,"SIEMENS RA PLANE B",96)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",98)':{tag:'(0019,"SIEMENS RA PLANE B",98)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",9a)':{tag:'(0019,"SIEMENS RA PLANE B",9a)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",9c)':{tag:'(0019,"SIEMENS RA PLANE B",9c)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",9e)':{tag:'(0019,"SIEMENS RA PLANE B",9e)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",a0)':{tag:'(0019,"SIEMENS RA PLANE B",a0)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",a2)':{tag:'(0019,"SIEMENS RA PLANE B",a2)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",a4)':{tag:'(0019,"SIEMENS RA PLANE B",a4)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",a6)':{tag:'(0019,"SIEMENS RA PLANE B",a6)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",a8)':{tag:'(0019,"SIEMENS RA PLANE B",a8)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",aa)':{tag:'(0019,"SIEMENS RA PLANE B",aa)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS RA PLANE B",ac)':{tag:'(0019,"SIEMENS RA PLANE B",ac)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0011,"SIEMENS RIS",10)':{tag:'(0011,"SIEMENS RIS",10)',vr:"LT",name:"PatientUID",vm:"1",version:"PrivateTag"},'(0011,"SIEMENS RIS",11)':{tag:'(0011,"SIEMENS RIS",11)',vr:"LT",name:"PatientID",vm:"1",version:"PrivateTag"},'(0011,"SIEMENS RIS",20)':{tag:'(0011,"SIEMENS RIS",20)',vr:"DA",name:"PatientRegistrationDate",vm:"1",version:"PrivateTag"},'(0011,"SIEMENS RIS",21)':{tag:'(0011,"SIEMENS RIS",21)',vr:"TM",name:"PatientRegistrationTime",vm:"1",version:"PrivateTag"},'(0011,"SIEMENS RIS",30)':{tag:'(0011,"SIEMENS RIS",30)',vr:"LT",name:"PatientnameRIS",vm:"1",version:"PrivateTag"},'(0011,"SIEMENS RIS",31)':{tag:'(0011,"SIEMENS RIS",31)',vr:"LT",name:"PatientprenameRIS",vm:"1",version:"PrivateTag"},'(0011,"SIEMENS RIS",40)':{tag:'(0011,"SIEMENS RIS",40)',vr:"LT",name:"PatientHospitalStatus",vm:"1",version:"PrivateTag"},'(0011,"SIEMENS RIS",41)':{tag:'(0011,"SIEMENS RIS",41)',vr:"LT",name:"MedicalAlerts",vm:"1",version:"PrivateTag"},'(0011,"SIEMENS RIS",42)':{tag:'(0011,"SIEMENS RIS",42)',vr:"LT",name:"ContrastAllergies",vm:"1",version:"PrivateTag"},'(0031,"SIEMENS RIS",10)':{tag:'(0031,"SIEMENS RIS",10)',vr:"LT",name:"RequestUID",vm:"1",version:"PrivateTag"},'(0031,"SIEMENS RIS",45)':{tag:'(0031,"SIEMENS RIS",45)',vr:"LT",name:"RequestingPhysician",vm:"1",version:"PrivateTag"},'(0031,"SIEMENS RIS",50)':{tag:'(0031,"SIEMENS RIS",50)',vr:"LT",name:"RequestedPhysician",vm:"1",version:"PrivateTag"},'(0033,"SIEMENS RIS",10)':{tag:'(0033,"SIEMENS RIS",10)',vr:"LT",name:"PatientStudyUID",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS SMS-AX  ACQ 1.0",00)':{tag:'(0021,"SIEMENS SMS-AX  ACQ 1.0",00)',vr:"US",name:"AcquisitionType",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS SMS-AX  ACQ 1.0",01)':{tag:'(0021,"SIEMENS SMS-AX  ACQ 1.0",01)',vr:"US",name:"AcquisitionMode",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS SMS-AX  ACQ 1.0",02)':{tag:'(0021,"SIEMENS SMS-AX  ACQ 1.0",02)',vr:"US",name:"FootswitchIndex",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS SMS-AX  ACQ 1.0",03)':{tag:'(0021,"SIEMENS SMS-AX  ACQ 1.0",03)',vr:"US",name:"AcquisitionRoom",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS SMS-AX  ACQ 1.0",04)':{tag:'(0021,"SIEMENS SMS-AX  ACQ 1.0",04)',vr:"SL",name:"CurrentTimeProduct",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS SMS-AX  ACQ 1.0",05)':{tag:'(0021,"SIEMENS SMS-AX  ACQ 1.0",05)',vr:"SL",name:"Dose",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS SMS-AX  ACQ 1.0",06)':{tag:'(0021,"SIEMENS SMS-AX  ACQ 1.0",06)',vr:"SL",name:"SkinDosePercent",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS SMS-AX  ACQ 1.0",07)':{tag:'(0021,"SIEMENS SMS-AX  ACQ 1.0",07)',vr:"SL",name:"SkinDoseAccumulation",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS SMS-AX  ACQ 1.0",08)':{tag:'(0021,"SIEMENS SMS-AX  ACQ 1.0",08)',vr:"SL",name:"SkinDoseRate",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS SMS-AX  ACQ 1.0",0A)':{tag:'(0021,"SIEMENS SMS-AX  ACQ 1.0",0A)',vr:"UL",name:"CopperFilter",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS SMS-AX  ACQ 1.0",0B)':{tag:'(0021,"SIEMENS SMS-AX  ACQ 1.0",0B)',vr:"US",name:"MeasuringField",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS SMS-AX  ACQ 1.0",0C)':{tag:'(0021,"SIEMENS SMS-AX  ACQ 1.0",0C)',vr:"SS",name:"PostBlankingCircle",vm:"3",version:"PrivateTag"},'(0021,"SIEMENS SMS-AX  ACQ 1.0",0D)':{tag:'(0021,"SIEMENS SMS-AX  ACQ 1.0",0D)',vr:"SS",name:"DynaAngles",vm:"2-2n",version:"PrivateTag"},'(0021,"SIEMENS SMS-AX  ACQ 1.0",0E)':{tag:'(0021,"SIEMENS SMS-AX  ACQ 1.0",0E)',vr:"SS",name:"TotalSteps",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS SMS-AX  ACQ 1.0",0F)':{tag:'(0021,"SIEMENS SMS-AX  ACQ 1.0",0F)',vr:"SL",name:"DynaXRayInfo",vm:"3-3n",version:"PrivateTag"},'(0021,"SIEMENS SMS-AX  ACQ 1.0",10)':{tag:'(0021,"SIEMENS SMS-AX  ACQ 1.0",10)',vr:"US",name:"ModalityLUTInputGamma",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS SMS-AX  ACQ 1.0",11)':{tag:'(0021,"SIEMENS SMS-AX  ACQ 1.0",11)',vr:"US",name:"ModalityLUTOutputGamma",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS SMS-AX  ACQ 1.0",12)':{tag:'(0021,"SIEMENS SMS-AX  ACQ 1.0",12)',vr:"OB",name:"SH_STPAR",vm:"1-n",version:"PrivateTag"},'(0021,"SIEMENS SMS-AX  ACQ 1.0",13)':{tag:'(0021,"SIEMENS SMS-AX  ACQ 1.0",13)',vr:"US",name:"AcquisitionZoom",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS SMS-AX  ACQ 1.0",14)':{tag:'(0021,"SIEMENS SMS-AX  ACQ 1.0",14)',vr:"SS",name:"DynaAngulationStepWidth",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS SMS-AX  ACQ 1.0",15)':{tag:'(0021,"SIEMENS SMS-AX  ACQ 1.0",15)',vr:"US",name:"Harmonization",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS SMS-AX  ACQ 1.0",16)':{tag:'(0021,"SIEMENS SMS-AX  ACQ 1.0",16)',vr:"US",name:"DRSingleFlag",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS SMS-AX  ACQ 1.0",17)':{tag:'(0021,"SIEMENS SMS-AX  ACQ 1.0",17)',vr:"SL",name:"SourceToIsocenter",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS SMS-AX  ACQ 1.0",18)':{tag:'(0021,"SIEMENS SMS-AX  ACQ 1.0",18)',vr:"US",name:"PressureData",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS SMS-AX  ACQ 1.0",19)':{tag:'(0021,"SIEMENS SMS-AX  ACQ 1.0",19)',vr:"SL",name:"ECGIndexArray",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS SMS-AX  ACQ 1.0",1A)':{tag:'(0021,"SIEMENS SMS-AX  ACQ 1.0",1A)',vr:"US",name:"FDFlag",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS SMS-AX  ACQ 1.0",1B)':{tag:'(0021,"SIEMENS SMS-AX  ACQ 1.0",1B)',vr:"OB",name:"SH_ZOOM",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS SMS-AX  ACQ 1.0",1C)':{tag:'(0021,"SIEMENS SMS-AX  ACQ 1.0",1C)',vr:"OB",name:"SH_COLPAR",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS SMS-AX  ACQ 1.0",1D)':{tag:'(0021,"SIEMENS SMS-AX  ACQ 1.0",1D)',vr:"US",name:"K_Factor",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS SMS-AX  ACQ 1.0",1E)':{tag:'(0021,"SIEMENS SMS-AX  ACQ 1.0",1E)',vr:"US",name:"EVE",vm:"8",version:"PrivateTag"},'(0021,"SIEMENS SMS-AX  ACQ 1.0",1F)':{tag:'(0021,"SIEMENS SMS-AX  ACQ 1.0",1F)',vr:"SL",name:"TotalSceneTime",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS SMS-AX  ACQ 1.0",20)':{tag:'(0021,"SIEMENS SMS-AX  ACQ 1.0",20)',vr:"US",name:"RestoreFlag",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS SMS-AX  ACQ 1.0",21)':{tag:'(0021,"SIEMENS SMS-AX  ACQ 1.0",21)',vr:"US",name:"StandMovementFlag",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS SMS-AX  ACQ 1.0",22)':{tag:'(0021,"SIEMENS SMS-AX  ACQ 1.0",22)',vr:"US",name:"FDRows",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS SMS-AX  ACQ 1.0",23)':{tag:'(0021,"SIEMENS SMS-AX  ACQ 1.0",23)',vr:"US",name:"FDColumns",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS SMS-AX  ACQ 1.0",24)':{tag:'(0021,"SIEMENS SMS-AX  ACQ 1.0",24)',vr:"US",name:"TableMovementFlag",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS SMS-AX  ACQ 1.0",25)':{tag:'(0021,"SIEMENS SMS-AX  ACQ 1.0",25)',vr:"LO",name:"OriginalOrganProgramName",vm:"1",version:"PrivateTag"},'(0021,"SIEMENS SMS-AX  ACQ 1.0",26)':{tag:'(0021,"SIEMENS SMS-AX  ACQ 1.0",26)',vr:"DS",name:"CrispyXPIFilter",vm:"1",version:"PrivateTag"},'(0025,"SIEMENS SMS-AX  ORIGINAL IMAGE INFO 1.0",00)':{tag:'(0025,"SIEMENS SMS-AX  ORIGINAL IMAGE INFO 1.0",00)',vr:"US",name:"ViewNative",vm:"1",version:"PrivateTag"},'(0025,"SIEMENS SMS-AX  ORIGINAL IMAGE INFO 1.0",01)':{tag:'(0025,"SIEMENS SMS-AX  ORIGINAL IMAGE INFO 1.0",01)',vr:"US",name:"OriginalSeriesNumber",vm:"1",version:"PrivateTag"},'(0025,"SIEMENS SMS-AX  ORIGINAL IMAGE INFO 1.0",02)':{tag:'(0025,"SIEMENS SMS-AX  ORIGINAL IMAGE INFO 1.0",02)',vr:"US",name:"OriginalImageNumber",vm:"1",version:"PrivateTag"},'(0025,"SIEMENS SMS-AX  ORIGINAL IMAGE INFO 1.0",03)':{tag:'(0025,"SIEMENS SMS-AX  ORIGINAL IMAGE INFO 1.0",03)',vr:"US",name:"WinCenter",vm:"1",version:"PrivateTag"},'(0025,"SIEMENS SMS-AX  ORIGINAL IMAGE INFO 1.0",04)':{tag:'(0025,"SIEMENS SMS-AX  ORIGINAL IMAGE INFO 1.0",04)',vr:"US",name:"WinWidth",vm:"1",version:"PrivateTag"},'(0025,"SIEMENS SMS-AX  ORIGINAL IMAGE INFO 1.0",05)':{tag:'(0025,"SIEMENS SMS-AX  ORIGINAL IMAGE INFO 1.0",05)',vr:"US",name:"WinBrightness",vm:"1",version:"PrivateTag"},'(0025,"SIEMENS SMS-AX  ORIGINAL IMAGE INFO 1.0",06)':{tag:'(0025,"SIEMENS SMS-AX  ORIGINAL IMAGE INFO 1.0",06)',vr:"US",name:"WinContrast",vm:"1",version:"PrivateTag"},'(0025,"SIEMENS SMS-AX  ORIGINAL IMAGE INFO 1.0",07)':{tag:'(0025,"SIEMENS SMS-AX  ORIGINAL IMAGE INFO 1.0",07)',vr:"US",name:"OriginalFrameNumber",vm:"1",version:"PrivateTag"},'(0025,"SIEMENS SMS-AX  ORIGINAL IMAGE INFO 1.0",08)':{tag:'(0025,"SIEMENS SMS-AX  ORIGINAL IMAGE INFO 1.0",08)',vr:"US",name:"OriginalMaskFrameNumber",vm:"1",version:"PrivateTag"},'(0025,"SIEMENS SMS-AX  ORIGINAL IMAGE INFO 1.0",09)':{tag:'(0025,"SIEMENS SMS-AX  ORIGINAL IMAGE INFO 1.0",09)',vr:"US",name:"Opac",vm:"1",version:"PrivateTag"},'(0025,"SIEMENS SMS-AX  ORIGINAL IMAGE INFO 1.0",0A)':{tag:'(0025,"SIEMENS SMS-AX  ORIGINAL IMAGE INFO 1.0",0A)',vr:"US",name:"OriginalNumberOfFrames",vm:"1",version:"PrivateTag"},'(0025,"SIEMENS SMS-AX  ORIGINAL IMAGE INFO 1.0",0B)':{tag:'(0025,"SIEMENS SMS-AX  ORIGINAL IMAGE INFO 1.0",0B)',vr:"DS",name:"OriginalSceneDuration",vm:"1",version:"PrivateTag"},'(0025,"SIEMENS SMS-AX  ORIGINAL IMAGE INFO 1.0",0C)':{tag:'(0025,"SIEMENS SMS-AX  ORIGINAL IMAGE INFO 1.0",0C)',vr:"LO",name:"IdentifierLOID",vm:"1",version:"PrivateTag"},'(0025,"SIEMENS SMS-AX  ORIGINAL IMAGE INFO 1.0",0D)':{tag:'(0025,"SIEMENS SMS-AX  ORIGINAL IMAGE INFO 1.0",0D)',vr:"SS",name:"OriginalSceneVFRInfo",vm:"1-n",version:"PrivateTag"},'(0025,"SIEMENS SMS-AX  ORIGINAL IMAGE INFO 1.0",0E)':{tag:'(0025,"SIEMENS SMS-AX  ORIGINAL IMAGE INFO 1.0",0E)',vr:"SS",name:"OriginalFrameECGPosition",vm:"1",version:"PrivateTag"},'(0025,"SIEMENS SMS-AX  ORIGINAL IMAGE INFO 1.0",0F)':{tag:'(0025,"SIEMENS SMS-AX  ORIGINAL IMAGE INFO 1.0",0F)',vr:"SS",name:"OriginalECG1stFrameOffset_retired",vm:"1",version:"PrivateTag"},'(0025,"SIEMENS SMS-AX  ORIGINAL IMAGE INFO 1.0",10)':{tag:'(0025,"SIEMENS SMS-AX  ORIGINAL IMAGE INFO 1.0",10)',vr:"SS",name:"ZoomFlag",vm:"1",version:"PrivateTag"},'(0025,"SIEMENS SMS-AX  ORIGINAL IMAGE INFO 1.0",11)':{tag:'(0025,"SIEMENS SMS-AX  ORIGINAL IMAGE INFO 1.0",11)',vr:"US",name:"Flex",vm:"1",version:"PrivateTag"},'(0025,"SIEMENS SMS-AX  ORIGINAL IMAGE INFO 1.0",12)':{tag:'(0025,"SIEMENS SMS-AX  ORIGINAL IMAGE INFO 1.0",12)',vr:"US",name:"NumberOfMaskFrames",vm:"1",version:"PrivateTag"},'(0025,"SIEMENS SMS-AX  ORIGINAL IMAGE INFO 1.0",13)':{tag:'(0025,"SIEMENS SMS-AX  ORIGINAL IMAGE INFO 1.0",13)',vr:"US",name:"NumberOfFillFrames",vm:"1",version:"PrivateTag"},'(0025,"SIEMENS SMS-AX  ORIGINAL IMAGE INFO 1.0",14)':{tag:'(0025,"SIEMENS SMS-AX  ORIGINAL IMAGE INFO 1.0",14)',vr:"US",name:"SeriesNumber",vm:"1",version:"PrivateTag"},'(0025,"SIEMENS SMS-AX  ORIGINAL IMAGE INFO 1.0",15)':{tag:'(0025,"SIEMENS SMS-AX  ORIGINAL IMAGE INFO 1.0",15)',vr:"IS",name:"ImageNumber",vm:"1",version:"PrivateTag"},'(0023,"SIEMENS SMS-AX  QUANT 1.0",00)':{tag:'(0023,"SIEMENS SMS-AX  QUANT 1.0",00)',vr:"DS",name:"HorizontalCalibrationPixelSize",vm:"2",version:"PrivateTag"},'(0023,"SIEMENS SMS-AX  QUANT 1.0",01)':{tag:'(0023,"SIEMENS SMS-AX  QUANT 1.0",01)',vr:"DS",name:"VerticalCalibrationPixelSize",vm:"2",version:"PrivateTag"},'(0023,"SIEMENS SMS-AX  QUANT 1.0",02)':{tag:'(0023,"SIEMENS SMS-AX  QUANT 1.0",02)',vr:"LO",name:"CalibrationObject",vm:"1",version:"PrivateTag"},'(0023,"SIEMENS SMS-AX  QUANT 1.0",03)':{tag:'(0023,"SIEMENS SMS-AX  QUANT 1.0",03)',vr:"DS",name:"CalibrationObjectSize",vm:"1",version:"PrivateTag"},'(0023,"SIEMENS SMS-AX  QUANT 1.0",04)':{tag:'(0023,"SIEMENS SMS-AX  QUANT 1.0",04)',vr:"LO",name:"CalibrationMethod",vm:"1",version:"PrivateTag"},'(0023,"SIEMENS SMS-AX  QUANT 1.0",05)':{tag:'(0023,"SIEMENS SMS-AX  QUANT 1.0",05)',vr:"ST",name:"Filename",vm:"1",version:"PrivateTag"},'(0023,"SIEMENS SMS-AX  QUANT 1.0",06)':{tag:'(0023,"SIEMENS SMS-AX  QUANT 1.0",06)',vr:"IS",name:"FrameNumber",vm:"1",version:"PrivateTag"},'(0023,"SIEMENS SMS-AX  QUANT 1.0",07)':{tag:'(0023,"SIEMENS SMS-AX  QUANT 1.0",07)',vr:"IS",name:"CalibrationFactorMultiplicity",vm:"2",version:"PrivateTag"},'(0023,"SIEMENS SMS-AX  QUANT 1.0",08)':{tag:'(0023,"SIEMENS SMS-AX  QUANT 1.0",08)',vr:"IS",name:"CalibrationTODValue",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS SMS-AX  VIEW 1.0",00)':{tag:'(0019,"SIEMENS SMS-AX  VIEW 1.0",00)',vr:"US",name:"ReviewMode",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS SMS-AX  VIEW 1.0",01)':{tag:'(0019,"SIEMENS SMS-AX  VIEW 1.0",01)',vr:"US",name:"AnatomicalBackgroundPercent",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS SMS-AX  VIEW 1.0",02)':{tag:'(0019,"SIEMENS SMS-AX  VIEW 1.0",02)',vr:"US",name:"NumberOfPhases",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS SMS-AX  VIEW 1.0",03)':{tag:'(0019,"SIEMENS SMS-AX  VIEW 1.0",03)',vr:"US",name:"ApplyAnatomicalBackground",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS SMS-AX  VIEW 1.0",04)':{tag:'(0019,"SIEMENS SMS-AX  VIEW 1.0",04)',vr:"SS",name:"PixelShiftArray",vm:"4-4n",version:"PrivateTag"},'(0019,"SIEMENS SMS-AX  VIEW 1.0",05)':{tag:'(0019,"SIEMENS SMS-AX  VIEW 1.0",05)',vr:"US",name:"Brightness",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS SMS-AX  VIEW 1.0",06)':{tag:'(0019,"SIEMENS SMS-AX  VIEW 1.0",06)',vr:"US",name:"Contrast",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS SMS-AX  VIEW 1.0",07)':{tag:'(0019,"SIEMENS SMS-AX  VIEW 1.0",07)',vr:"US",name:"Enabled",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS SMS-AX  VIEW 1.0",08)':{tag:'(0019,"SIEMENS SMS-AX  VIEW 1.0",08)',vr:"US",name:"NativeEdgeEnhancementPercentGain",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS SMS-AX  VIEW 1.0",09)':{tag:'(0019,"SIEMENS SMS-AX  VIEW 1.0",09)',vr:"SS",name:"NativeEdgeEnhancementLUTIndex",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS SMS-AX  VIEW 1.0",0A)':{tag:'(0019,"SIEMENS SMS-AX  VIEW 1.0",0A)',vr:"SS",name:"NativeEdgeEnhancementKernelSize",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS SMS-AX  VIEW 1.0",0B)':{tag:'(0019,"SIEMENS SMS-AX  VIEW 1.0",0B)',vr:"US",name:"SubtrEdgeEnhancementPercentGain",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS SMS-AX  VIEW 1.0",0C)':{tag:'(0019,"SIEMENS SMS-AX  VIEW 1.0",0C)',vr:"SS",name:"SubtrEdgeEnhancementLUTIndex",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS SMS-AX  VIEW 1.0",0D)':{tag:'(0019,"SIEMENS SMS-AX  VIEW 1.0",0D)',vr:"SS",name:"SubtrEdgeEnhancementKernelSize",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS SMS-AX  VIEW 1.0",0E)':{tag:'(0019,"SIEMENS SMS-AX  VIEW 1.0",0E)',vr:"US",name:"FadePercent",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS SMS-AX  VIEW 1.0",0F)':{tag:'(0019,"SIEMENS SMS-AX  VIEW 1.0",0F)',vr:"US",name:"FlippedBeforeLateralityApplied",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS SMS-AX  VIEW 1.0",10)':{tag:'(0019,"SIEMENS SMS-AX  VIEW 1.0",10)',vr:"US",name:"ApplyFade",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS SMS-AX  VIEW 1.0",12)':{tag:'(0019,"SIEMENS SMS-AX  VIEW 1.0",12)',vr:"US",name:"Zoom",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS SMS-AX  VIEW 1.0",13)':{tag:'(0019,"SIEMENS SMS-AX  VIEW 1.0",13)',vr:"SS",name:"PanX",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS SMS-AX  VIEW 1.0",14)':{tag:'(0019,"SIEMENS SMS-AX  VIEW 1.0",14)',vr:"SS",name:"PanY",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS SMS-AX  VIEW 1.0",15)':{tag:'(0019,"SIEMENS SMS-AX  VIEW 1.0",15)',vr:"SS",name:"NativeEdgeEnhancementAdvPercGain",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS SMS-AX  VIEW 1.0",16)':{tag:'(0019,"SIEMENS SMS-AX  VIEW 1.0",16)',vr:"SS",name:"SubtrEdgeEnhancementAdvPercGain",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS SMS-AX  VIEW 1.0",17)':{tag:'(0019,"SIEMENS SMS-AX  VIEW 1.0",17)',vr:"US",name:"InvertFlag",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS SMS-AX  VIEW 1.0",1A)':{tag:'(0019,"SIEMENS SMS-AX  VIEW 1.0",1A)',vr:"OB",name:"Quant1KOverlay",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS SMS-AX  VIEW 1.0",1B)':{tag:'(0019,"SIEMENS SMS-AX  VIEW 1.0",1B)',vr:"US",name:"OriginalResolution",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS SMS-AX  VIEW 1.0",1C)':{tag:'(0019,"SIEMENS SMS-AX  VIEW 1.0",1C)',vr:"DS",name:"AutoWindowCenter",vm:"1",version:"PrivateTag"},'(0019,"SIEMENS SMS-AX  VIEW 1.0",1D)':{tag:'(0019,"SIEMENS SMS-AX  VIEW 1.0",1D)',vr:"DS",name:"AutoWindowWidth",vm:"1",version:"PrivateTag"},'(0009,"SIENET",01)':{tag:'(0009,"SIENET",01)',vr:"US",name:"SIENETCommandField",vm:"1",version:"PrivateTag"},'(0009,"SIENET",14)':{tag:'(0009,"SIENET",14)',vr:"LT",name:"ReceiverPLA",vm:"1",version:"PrivateTag"},'(0009,"SIENET",16)':{tag:'(0009,"SIENET",16)',vr:"US",name:"TransferPriority",vm:"1",version:"PrivateTag"},'(0009,"SIENET",29)':{tag:'(0009,"SIENET",29)',vr:"LT",name:"ActualUser",vm:"1",version:"PrivateTag"},'(0095,"SIENET",01)':{tag:'(0095,"SIENET",01)',vr:"LT",name:"ExaminationFolderID",vm:"1",version:"PrivateTag"},'(0095,"SIENET",04)':{tag:'(0095,"SIENET",04)',vr:"UL",name:"FolderReportedStatus",vm:"1",version:"PrivateTag"},'(0095,"SIENET",05)':{tag:'(0095,"SIENET",05)',vr:"LT",name:"FolderReportingRadiologist",vm:"1",version:"PrivateTag"},'(0095,"SIENET",07)':{tag:'(0095,"SIENET",07)',vr:"LT",name:"SIENETISAPLA",vm:"1",version:"PrivateTag"},'(0099,"SIENET",02)':{tag:'(0099,"SIENET",02)',vr:"UL",name:"DataObjectAttributes",vm:"1",version:"PrivateTag"},'(0009,"SPI RELEASE 1",10)':{tag:'(0009,"SPI RELEASE 1",10)',vr:"LT",name:"Comments",vm:"1",version:"PrivateTag"},'(0009,"SPI RELEASE 1",15)':{tag:'(0009,"SPI RELEASE 1",15)',vr:"LO",name:"SPIImageUID",vm:"1",version:"PrivateTag"},'(0009,"SPI RELEASE 1",40)':{tag:'(0009,"SPI RELEASE 1",40)',vr:"US",name:"DataObjectType",vm:"1",version:"PrivateTag"},'(0009,"SPI RELEASE 1",41)':{tag:'(0009,"SPI RELEASE 1",41)',vr:"LO",name:"DataObjectSubtype",vm:"1",version:"PrivateTag"},'(0011,"SPI RELEASE 1",10)':{tag:'(0011,"SPI RELEASE 1",10)',vr:"LO",name:"Organ",vm:"1",version:"PrivateTag"},'(0011,"SPI RELEASE 1",15)':{tag:'(0011,"SPI RELEASE 1",15)',vr:"LO",name:"AllergyIndication",vm:"1",version:"PrivateTag"},'(0011,"SPI RELEASE 1",20)':{tag:'(0011,"SPI RELEASE 1",20)',vr:"LO",name:"Pregnancy",vm:"1",version:"PrivateTag"},'(0029,"SPI RELEASE 1",60)':{tag:'(0029,"SPI RELEASE 1",60)',vr:"LT",name:"CompressionAlgorithm",vm:"1",version:"PrivateTag"},'(0009,"SPI Release 1",10)':{tag:'(0009,"SPI Release 1",10)',vr:"LT",name:"Comments",vm:"1",version:"PrivateTag"},'(0009,"SPI Release 1",15)':{tag:'(0009,"SPI Release 1",15)',vr:"LO",name:"SPIImageUID",vm:"1",version:"PrivateTag"},'(0009,"SPI Release 1",40)':{tag:'(0009,"SPI Release 1",40)',vr:"US",name:"DataObjectType",vm:"1",version:"PrivateTag"},'(0009,"SPI Release 1",41)':{tag:'(0009,"SPI Release 1",41)',vr:"LO",name:"DataObjectSubtype",vm:"1",version:"PrivateTag"},'(0011,"SPI Release 1",10)':{tag:'(0011,"SPI Release 1",10)',vr:"LO",name:"Organ",vm:"1",version:"PrivateTag"},'(0011,"SPI Release 1",15)':{tag:'(0011,"SPI Release 1",15)',vr:"LO",name:"AllergyIndication",vm:"1",version:"PrivateTag"},'(0011,"SPI Release 1",20)':{tag:'(0011,"SPI Release 1",20)',vr:"LO",name:"Pregnancy",vm:"1",version:"PrivateTag"},'(0029,"SPI Release 1",60)':{tag:'(0029,"SPI Release 1",60)',vr:"LT",name:"CompressionAlgorithm",vm:"1",version:"PrivateTag"},'(0009,"SPI",10)':{tag:'(0009,"SPI",10)',vr:"LO",name:"Comments",vm:"1",version:"PrivateTag"},'(0009,"SPI",15)':{tag:'(0009,"SPI",15)',vr:"LO",name:"SPIImageUID",vm:"1",version:"PrivateTag"},'(0009,"SPI",40)':{tag:'(0009,"SPI",40)',vr:"US",name:"DataObjectType",vm:"1",version:"PrivateTag"},'(0009,"SPI",41)':{tag:'(0009,"SPI",41)',vr:"LT",name:"DataObjectSubtype",vm:"1",version:"PrivateTag"},'(0011,"SPI",10)':{tag:'(0011,"SPI",10)',vr:"LT",name:"Organ",vm:"1",version:"PrivateTag"},'(0011,"SPI",15)':{tag:'(0011,"SPI",15)',vr:"LT",name:"AllergyIndication",vm:"1",version:"PrivateTag"},'(0011,"SPI",20)':{tag:'(0011,"SPI",20)',vr:"LT",name:"Pregnancy",vm:"1",version:"PrivateTag"},'(0029,"SPI",60)':{tag:'(0029,"SPI",60)',vr:"LT",name:"CompressionAlgorithm",vm:"1",version:"PrivateTag"},'(0009,"SPI-P Release 1",00)':{tag:'(0009,"SPI-P Release 1",00)',vr:"LT",name:"DataObjectRecognitionCode",vm:"1",version:"PrivateTag"},'(0009,"SPI-P Release 1",04)':{tag:'(0009,"SPI-P Release 1",04)',vr:"LO",name:"ImageDataConsistence",vm:"1",version:"PrivateTag"},'(0009,"SPI-P Release 1",08)':{tag:'(0009,"SPI-P Release 1",08)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"SPI-P Release 1",12)':{tag:'(0009,"SPI-P Release 1",12)',vr:"LO",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"SPI-P Release 1",15)':{tag:'(0009,"SPI-P Release 1",15)',vr:"LO",name:"UniqueIdentifier",vm:"1",version:"PrivateTag"},'(0009,"SPI-P Release 1",16)':{tag:'(0009,"SPI-P Release 1",16)',vr:"LO",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"SPI-P Release 1",18)':{tag:'(0009,"SPI-P Release 1",18)',vr:"LO",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"SPI-P Release 1",21)':{tag:'(0009,"SPI-P Release 1",21)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"SPI-P Release 1",31)':{tag:'(0009,"SPI-P Release 1",31)',vr:"LT",name:"PACSUniqueIdentifier",vm:"1",version:"PrivateTag"},'(0009,"SPI-P Release 1",34)':{tag:'(0009,"SPI-P Release 1",34)',vr:"LT",name:"ClusterUniqueIdentifier",vm:"1",version:"PrivateTag"},'(0009,"SPI-P Release 1",38)':{tag:'(0009,"SPI-P Release 1",38)',vr:"LT",name:"SystemUniqueIdentifier",vm:"1",version:"PrivateTag"},'(0009,"SPI-P Release 1",39)':{tag:'(0009,"SPI-P Release 1",39)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"SPI-P Release 1",51)':{tag:'(0009,"SPI-P Release 1",51)',vr:"LT",name:"StudyUniqueIdentifier",vm:"1",version:"PrivateTag"},'(0009,"SPI-P Release 1",61)':{tag:'(0009,"SPI-P Release 1",61)',vr:"LT",name:"SeriesUniqueIdentifier",vm:"1",version:"PrivateTag"},'(0009,"SPI-P Release 1",91)':{tag:'(0009,"SPI-P Release 1",91)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"SPI-P Release 1",f2)':{tag:'(0009,"SPI-P Release 1",f2)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"SPI-P Release 1",f3)':{tag:'(0009,"SPI-P Release 1",f3)',vr:"UN",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"SPI-P Release 1",f4)':{tag:'(0009,"SPI-P Release 1",f4)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"SPI-P Release 1",f5)':{tag:'(0009,"SPI-P Release 1",f5)',vr:"UN",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"SPI-P Release 1",f7)':{tag:'(0009,"SPI-P Release 1",f7)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0011,"SPI-P Release 1",10)':{tag:'(0011,"SPI-P Release 1",10)',vr:"LT",name:"PatientEntryID",vm:"1",version:"PrivateTag"},'(0011,"SPI-P Release 1",21)':{tag:'(0011,"SPI-P Release 1",21)',vr:"UN",name:"Unknown",vm:"1",version:"PrivateTag"},'(0011,"SPI-P Release 1",22)':{tag:'(0011,"SPI-P Release 1",22)',vr:"UN",name:"Unknown",vm:"1",version:"PrivateTag"},'(0011,"SPI-P Release 1",31)':{tag:'(0011,"SPI-P Release 1",31)',vr:"UN",name:"Unknown",vm:"1",version:"PrivateTag"},'(0011,"SPI-P Release 1",32)':{tag:'(0011,"SPI-P Release 1",32)',vr:"UN",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SPI-P Release 1",00)':{tag:'(0019,"SPI-P Release 1",00)',vr:"UN",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SPI-P Release 1",01)':{tag:'(0019,"SPI-P Release 1",01)',vr:"UN",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SPI-P Release 1",02)':{tag:'(0019,"SPI-P Release 1",02)',vr:"UN",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SPI-P Release 1",10)':{tag:'(0019,"SPI-P Release 1",10)',vr:"US",name:"MainsFrequency",vm:"1",version:"PrivateTag"},'(0019,"SPI-P Release 1",25)':{tag:'(0019,"SPI-P Release 1",25)',vr:"LT",name:"OriginalPixelDataQuality",vm:"1-n",version:"PrivateTag"},'(0019,"SPI-P Release 1",30)':{tag:'(0019,"SPI-P Release 1",30)',vr:"US",name:"ECGTriggering",vm:"1",version:"PrivateTag"},'(0019,"SPI-P Release 1",31)':{tag:'(0019,"SPI-P Release 1",31)',vr:"UN",name:"ECG1Offset",vm:"1",version:"PrivateTag"},'(0019,"SPI-P Release 1",32)':{tag:'(0019,"SPI-P Release 1",32)',vr:"UN",name:"ECG2Offset1",vm:"1",version:"PrivateTag"},'(0019,"SPI-P Release 1",33)':{tag:'(0019,"SPI-P Release 1",33)',vr:"UN",name:"ECG2Offset2",vm:"1",version:"PrivateTag"},'(0019,"SPI-P Release 1",50)':{tag:'(0019,"SPI-P Release 1",50)',vr:"US",name:"VideoScanMode",vm:"1",version:"PrivateTag"},'(0019,"SPI-P Release 1",51)':{tag:'(0019,"SPI-P Release 1",51)',vr:"US",name:"VideoLineRate",vm:"1",version:"PrivateTag"},'(0019,"SPI-P Release 1",60)':{tag:'(0019,"SPI-P Release 1",60)',vr:"US",name:"XrayTechnique",vm:"1",version:"PrivateTag"},'(0019,"SPI-P Release 1",61)':{tag:'(0019,"SPI-P Release 1",61)',vr:"DS",name:"ImageIdentifierFromat",vm:"1",version:"PrivateTag"},'(0019,"SPI-P Release 1",62)':{tag:'(0019,"SPI-P Release 1",62)',vr:"US",name:"IrisDiaphragm",vm:"1",version:"PrivateTag"},'(0019,"SPI-P Release 1",63)':{tag:'(0019,"SPI-P Release 1",63)',vr:"CS",name:"Filter",vm:"1",version:"PrivateTag"},'(0019,"SPI-P Release 1",64)':{tag:'(0019,"SPI-P Release 1",64)',vr:"CS",name:"CineParallel",vm:"1",version:"PrivateTag"},'(0019,"SPI-P Release 1",65)':{tag:'(0019,"SPI-P Release 1",65)',vr:"CS",name:"CineMaster",vm:"1",version:"PrivateTag"},'(0019,"SPI-P Release 1",70)':{tag:'(0019,"SPI-P Release 1",70)',vr:"US",name:"ExposureChannel",vm:"1",version:"PrivateTag"},'(0019,"SPI-P Release 1",71)':{tag:'(0019,"SPI-P Release 1",71)',vr:"UN",name:"ExposureChannelFirstImage",vm:"1",version:"PrivateTag"},'(0019,"SPI-P Release 1",72)':{tag:'(0019,"SPI-P Release 1",72)',vr:"US",name:"ProcessingChannel",vm:"1",version:"PrivateTag"},'(0019,"SPI-P Release 1",80)':{tag:'(0019,"SPI-P Release 1",80)',vr:"DS",name:"AcquisitionDelay",vm:"1",version:"PrivateTag"},'(0019,"SPI-P Release 1",81)':{tag:'(0019,"SPI-P Release 1",81)',vr:"UN",name:"RelativeImageTime",vm:"1",version:"PrivateTag"},'(0019,"SPI-P Release 1",90)':{tag:'(0019,"SPI-P Release 1",90)',vr:"CS",name:"VideoWhiteCompression",vm:"1",version:"PrivateTag"},'(0019,"SPI-P Release 1",a0)':{tag:'(0019,"SPI-P Release 1",a0)',vr:"US",name:"Angulation",vm:"1",version:"PrivateTag"},'(0019,"SPI-P Release 1",a1)':{tag:'(0019,"SPI-P Release 1",a1)',vr:"US",name:"Rotation",vm:"1",version:"PrivateTag"},'(0021,"SPI-P Release 1",12)':{tag:'(0021,"SPI-P Release 1",12)',vr:"LT",name:"SeriesUniqueIdentifier",vm:"1",version:"PrivateTag"},'(0021,"SPI-P Release 1",14)':{tag:'(0021,"SPI-P Release 1",14)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SPI-P Release 1",00)':{tag:'(0029,"SPI-P Release 1",00)',vr:"DS",name:"Unknown",vm:"4",version:"PrivateTag"},'(0029,"SPI-P Release 1",20)':{tag:'(0029,"SPI-P Release 1",20)',vr:"DS",name:"PixelAspectRatio",vm:"1",version:"PrivateTag"},'(0029,"SPI-P Release 1",25)':{tag:'(0029,"SPI-P Release 1",25)',vr:"LO",name:"ProcessedPixelDataQuality",vm:"1-n",version:"PrivateTag"},'(0029,"SPI-P Release 1",30)':{tag:'(0029,"SPI-P Release 1",30)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SPI-P Release 1",38)':{tag:'(0029,"SPI-P Release 1",38)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SPI-P Release 1",60)':{tag:'(0029,"SPI-P Release 1",60)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SPI-P Release 1",61)':{tag:'(0029,"SPI-P Release 1",61)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SPI-P Release 1",67)':{tag:'(0029,"SPI-P Release 1",67)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SPI-P Release 1",70)':{tag:'(0029,"SPI-P Release 1",70)',vr:"LT",name:"WindowID",vm:"1",version:"PrivateTag"},'(0029,"SPI-P Release 1",71)':{tag:'(0029,"SPI-P Release 1",71)',vr:"CS",name:"VideoInvertSubtracted",vm:"1",version:"PrivateTag"},'(0029,"SPI-P Release 1",72)':{tag:'(0029,"SPI-P Release 1",72)',vr:"CS",name:"VideoInvertNonsubtracted",vm:"1",version:"PrivateTag"},'(0029,"SPI-P Release 1",77)':{tag:'(0029,"SPI-P Release 1",77)',vr:"CS",name:"WindowSelectStatus",vm:"1",version:"PrivateTag"},'(0029,"SPI-P Release 1",78)':{tag:'(0029,"SPI-P Release 1",78)',vr:"LT",name:"ECGDisplayPrintingID",vm:"1",version:"PrivateTag"},'(0029,"SPI-P Release 1",79)':{tag:'(0029,"SPI-P Release 1",79)',vr:"CS",name:"ECGDisplayPrinting",vm:"1",version:"PrivateTag"},'(0029,"SPI-P Release 1",7e)':{tag:'(0029,"SPI-P Release 1",7e)',vr:"CS",name:"ECGDisplayPrintingEnableStatus",vm:"1",version:"PrivateTag"},'(0029,"SPI-P Release 1",7f)':{tag:'(0029,"SPI-P Release 1",7f)',vr:"CS",name:"ECGDisplayPrintingSelectStatus",vm:"1",version:"PrivateTag"},'(0029,"SPI-P Release 1",80)':{tag:'(0029,"SPI-P Release 1",80)',vr:"LT",name:"PhysiologicalDisplayID",vm:"1",version:"PrivateTag"},'(0029,"SPI-P Release 1",81)':{tag:'(0029,"SPI-P Release 1",81)',vr:"US",name:"PreferredPhysiologicalChannelDisplay",vm:"1",version:"PrivateTag"},'(0029,"SPI-P Release 1",8e)':{tag:'(0029,"SPI-P Release 1",8e)',vr:"CS",name:"PhysiologicalDisplayEnableStatus",vm:"1",version:"PrivateTag"},'(0029,"SPI-P Release 1",8f)':{tag:'(0029,"SPI-P Release 1",8f)',vr:"CS",name:"PhysiologicalDisplaySelectStatus",vm:"1",version:"PrivateTag"},'(0029,"SPI-P Release 1",c0)':{tag:'(0029,"SPI-P Release 1",c0)',vr:"LT",name:"FunctionalShutterID",vm:"1",version:"PrivateTag"},'(0029,"SPI-P Release 1",c1)':{tag:'(0029,"SPI-P Release 1",c1)',vr:"US",name:"FieldOfShutter",vm:"1",version:"PrivateTag"},'(0029,"SPI-P Release 1",c5)':{tag:'(0029,"SPI-P Release 1",c5)',vr:"LT",name:"FieldOfShutterRectangle",vm:"1",version:"PrivateTag"},'(0029,"SPI-P Release 1",ce)':{tag:'(0029,"SPI-P Release 1",ce)',vr:"CS",name:"ShutterEnableStatus",vm:"1",version:"PrivateTag"},'(0029,"SPI-P Release 1",cf)':{tag:'(0029,"SPI-P Release 1",cf)',vr:"CS",name:"ShutterSelectStatus",vm:"1",version:"PrivateTag"},'(7FE1,"SPI-P Release 1",10)':{tag:'(7FE1,"SPI-P Release 1",10)',vr:"ox",name:"PixelData",vm:"1",version:"PrivateTag"},'(0009,"SPI-P Release 1;1",c0)':{tag:'(0009,"SPI-P Release 1;1",c0)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"SPI-P Release 1;1",c1)':{tag:'(0009,"SPI-P Release 1;1",c1)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SPI-P Release 1;1",00)':{tag:'(0019,"SPI-P Release 1;1",00)',vr:"UN",name:"PhysiologicalDataType",vm:"1",version:"PrivateTag"},'(0019,"SPI-P Release 1;1",01)':{tag:'(0019,"SPI-P Release 1;1",01)',vr:"UN",name:"PhysiologicalDataChannelAndKind",vm:"1",version:"PrivateTag"},'(0019,"SPI-P Release 1;1",02)':{tag:'(0019,"SPI-P Release 1;1",02)',vr:"US",name:"SampleBitsAllocated",vm:"1",version:"PrivateTag"},'(0019,"SPI-P Release 1;1",03)':{tag:'(0019,"SPI-P Release 1;1",03)',vr:"US",name:"SampleBitsStored",vm:"1",version:"PrivateTag"},'(0019,"SPI-P Release 1;1",04)':{tag:'(0019,"SPI-P Release 1;1",04)',vr:"US",name:"SampleHighBit",vm:"1",version:"PrivateTag"},'(0019,"SPI-P Release 1;1",05)':{tag:'(0019,"SPI-P Release 1;1",05)',vr:"US",name:"SampleRepresentation",vm:"1",version:"PrivateTag"},'(0019,"SPI-P Release 1;1",06)':{tag:'(0019,"SPI-P Release 1;1",06)',vr:"UN",name:"SmallestSampleValue",vm:"1",version:"PrivateTag"},'(0019,"SPI-P Release 1;1",07)':{tag:'(0019,"SPI-P Release 1;1",07)',vr:"UN",name:"LargestSampleValue",vm:"1",version:"PrivateTag"},'(0019,"SPI-P Release 1;1",08)':{tag:'(0019,"SPI-P Release 1;1",08)',vr:"UN",name:"NumberOfSamples",vm:"1",version:"PrivateTag"},'(0019,"SPI-P Release 1;1",09)':{tag:'(0019,"SPI-P Release 1;1",09)',vr:"UN",name:"SampleData",vm:"1",version:"PrivateTag"},'(0019,"SPI-P Release 1;1",0a)':{tag:'(0019,"SPI-P Release 1;1",0a)',vr:"UN",name:"SampleRate",vm:"1",version:"PrivateTag"},'(0019,"SPI-P Release 1;1",10)':{tag:'(0019,"SPI-P Release 1;1",10)',vr:"UN",name:"PhysiologicalDataType2",vm:"1",version:"PrivateTag"},'(0019,"SPI-P Release 1;1",11)':{tag:'(0019,"SPI-P Release 1;1",11)',vr:"UN",name:"PhysiologicalDataChannelAndKind2",vm:"1",version:"PrivateTag"},'(0019,"SPI-P Release 1;1",12)':{tag:'(0019,"SPI-P Release 1;1",12)',vr:"US",name:"SampleBitsAllocated2",vm:"1",version:"PrivateTag"},'(0019,"SPI-P Release 1;1",13)':{tag:'(0019,"SPI-P Release 1;1",13)',vr:"US",name:"SampleBitsStored2",vm:"1",version:"PrivateTag"},'(0019,"SPI-P Release 1;1",14)':{tag:'(0019,"SPI-P Release 1;1",14)',vr:"US",name:"SampleHighBit2",vm:"1",version:"PrivateTag"},'(0019,"SPI-P Release 1;1",15)':{tag:'(0019,"SPI-P Release 1;1",15)',vr:"US",name:"SampleRepresentation2",vm:"1",version:"PrivateTag"},'(0019,"SPI-P Release 1;1",16)':{tag:'(0019,"SPI-P Release 1;1",16)',vr:"UN",name:"SmallestSampleValue2",vm:"1",version:"PrivateTag"},'(0019,"SPI-P Release 1;1",17)':{tag:'(0019,"SPI-P Release 1;1",17)',vr:"UN",name:"LargestSampleValue2",vm:"1",version:"PrivateTag"},'(0019,"SPI-P Release 1;1",18)':{tag:'(0019,"SPI-P Release 1;1",18)',vr:"UN",name:"NumberOfSamples2",vm:"1",version:"PrivateTag"},'(0019,"SPI-P Release 1;1",19)':{tag:'(0019,"SPI-P Release 1;1",19)',vr:"UN",name:"SampleData2",vm:"1",version:"PrivateTag"},'(0019,"SPI-P Release 1;1",1a)':{tag:'(0019,"SPI-P Release 1;1",1a)',vr:"UN",name:"SampleRate2",vm:"1",version:"PrivateTag"},'(0029,"SPI-P Release 1;1",00)':{tag:'(0029,"SPI-P Release 1;1",00)',vr:"LT",name:"ZoomID",vm:"1",version:"PrivateTag"},'(0029,"SPI-P Release 1;1",01)':{tag:'(0029,"SPI-P Release 1;1",01)',vr:"DS",name:"ZoomRectangle",vm:"1-n",version:"PrivateTag"},'(0029,"SPI-P Release 1;1",03)':{tag:'(0029,"SPI-P Release 1;1",03)',vr:"DS",name:"ZoomFactor",vm:"1",version:"PrivateTag"},'(0029,"SPI-P Release 1;1",04)':{tag:'(0029,"SPI-P Release 1;1",04)',vr:"US",name:"ZoomFunction",vm:"1",version:"PrivateTag"},'(0029,"SPI-P Release 1;1",0e)':{tag:'(0029,"SPI-P Release 1;1",0e)',vr:"CS",name:"ZoomEnableStatus",vm:"1",version:"PrivateTag"},'(0029,"SPI-P Release 1;1",0f)':{tag:'(0029,"SPI-P Release 1;1",0f)',vr:"CS",name:"ZoomSelectStatus",vm:"1",version:"PrivateTag"},'(0029,"SPI-P Release 1;1",40)':{tag:'(0029,"SPI-P Release 1;1",40)',vr:"LT",name:"MagnifyingGlassID",vm:"1",version:"PrivateTag"},'(0029,"SPI-P Release 1;1",41)':{tag:'(0029,"SPI-P Release 1;1",41)',vr:"DS",name:"MagnifyingGlassRectangle",vm:"1-n",version:"PrivateTag"},'(0029,"SPI-P Release 1;1",43)':{tag:'(0029,"SPI-P Release 1;1",43)',vr:"DS",name:"MagnifyingGlassFactor",vm:"1",version:"PrivateTag"},'(0029,"SPI-P Release 1;1",44)':{tag:'(0029,"SPI-P Release 1;1",44)',vr:"US",name:"MagnifyingGlassFunction",vm:"1",version:"PrivateTag"},'(0029,"SPI-P Release 1;1",4e)':{tag:'(0029,"SPI-P Release 1;1",4e)',vr:"CS",name:"MagnifyingGlassEnableStatus",vm:"1",version:"PrivateTag"},'(0029,"SPI-P Release 1;1",4f)':{tag:'(0029,"SPI-P Release 1;1",4f)',vr:"CS",name:"MagnifyingGlassSelectStatus",vm:"1",version:"PrivateTag"},'(0029,"SPI-P Release 1;2",00)':{tag:'(0029,"SPI-P Release 1;2",00)',vr:"LT",name:"SubtractionMaskID",vm:"1",version:"PrivateTag"},'(0029,"SPI-P Release 1;2",04)':{tag:'(0029,"SPI-P Release 1;2",04)',vr:"UN",name:"MaskingFunction",vm:"1",version:"PrivateTag"},'(0029,"SPI-P Release 1;2",0c)':{tag:'(0029,"SPI-P Release 1;2",0c)',vr:"UN",name:"ProprietaryMaskingParameters",vm:"1",version:"PrivateTag"},'(0029,"SPI-P Release 1;2",1e)':{tag:'(0029,"SPI-P Release 1;2",1e)',vr:"CS",name:"SubtractionMaskEnableStatus",vm:"1",version:"PrivateTag"},'(0029,"SPI-P Release 1;2",1f)':{tag:'(0029,"SPI-P Release 1;2",1f)',vr:"CS",name:"SubtractionMaskSelectStatus",vm:"1",version:"PrivateTag"},'(0029,"SPI-P Release 1;3",00)':{tag:'(0029,"SPI-P Release 1;3",00)',vr:"LT",name:"ImageEnhancementID",vm:"1",version:"PrivateTag"},'(0029,"SPI-P Release 1;3",01)':{tag:'(0029,"SPI-P Release 1;3",01)',vr:"LT",name:"ImageEnhancement",vm:"1",version:"PrivateTag"},'(0029,"SPI-P Release 1;3",02)':{tag:'(0029,"SPI-P Release 1;3",02)',vr:"LT",name:"ConvolutionID",vm:"1",version:"PrivateTag"},'(0029,"SPI-P Release 1;3",03)':{tag:'(0029,"SPI-P Release 1;3",03)',vr:"LT",name:"ConvolutionType",vm:"1",version:"PrivateTag"},'(0029,"SPI-P Release 1;3",04)':{tag:'(0029,"SPI-P Release 1;3",04)',vr:"LT",name:"ConvolutionKernelSizeID",vm:"1",version:"PrivateTag"},'(0029,"SPI-P Release 1;3",05)':{tag:'(0029,"SPI-P Release 1;3",05)',vr:"US",name:"ConvolutionKernelSize",vm:"2",version:"PrivateTag"},'(0029,"SPI-P Release 1;3",06)':{tag:'(0029,"SPI-P Release 1;3",06)',vr:"US",name:"ConvolutionKernel",vm:"1-n",version:"PrivateTag"},'(0029,"SPI-P Release 1;3",0c)':{tag:'(0029,"SPI-P Release 1;3",0c)',vr:"DS",name:"EnhancementGain",vm:"1",version:"PrivateTag"},'(0029,"SPI-P Release 1;3",1e)':{tag:'(0029,"SPI-P Release 1;3",1e)',vr:"CS",name:"ImageEnhancementEnableStatus",vm:"1",version:"PrivateTag"},'(0029,"SPI-P Release 1;3",1f)':{tag:'(0029,"SPI-P Release 1;3",1f)',vr:"CS",name:"ImageEnhancementSelectStatus",vm:"1",version:"PrivateTag"},'(0011,"SPI-P Release 2;1",18)':{tag:'(0011,"SPI-P Release 2;1",18)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0023,"SPI-P Release 2;1",0d)':{tag:'(0023,"SPI-P Release 2;1",0d)',vr:"UI",name:"Unknown",vm:"1",version:"PrivateTag"},'(0023,"SPI-P Release 2;1",0e)':{tag:'(0023,"SPI-P Release 2;1",0e)',vr:"UI",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"SPI-P-GV-CT Release 1",00)':{tag:'(0009,"SPI-P-GV-CT Release 1",00)',vr:"LO",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"SPI-P-GV-CT Release 1",10)':{tag:'(0009,"SPI-P-GV-CT Release 1",10)',vr:"LO",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"SPI-P-GV-CT Release 1",20)':{tag:'(0009,"SPI-P-GV-CT Release 1",20)',vr:"LO",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"SPI-P-GV-CT Release 1",30)':{tag:'(0009,"SPI-P-GV-CT Release 1",30)',vr:"LO",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"SPI-P-GV-CT Release 1",40)':{tag:'(0009,"SPI-P-GV-CT Release 1",40)',vr:"LO",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"SPI-P-GV-CT Release 1",50)':{tag:'(0009,"SPI-P-GV-CT Release 1",50)',vr:"LO",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"SPI-P-GV-CT Release 1",60)':{tag:'(0009,"SPI-P-GV-CT Release 1",60)',vr:"LO",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"SPI-P-GV-CT Release 1",70)':{tag:'(0009,"SPI-P-GV-CT Release 1",70)',vr:"LO",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"SPI-P-GV-CT Release 1",75)':{tag:'(0009,"SPI-P-GV-CT Release 1",75)',vr:"LO",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"SPI-P-GV-CT Release 1",80)':{tag:'(0009,"SPI-P-GV-CT Release 1",80)',vr:"LO",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"SPI-P-GV-CT Release 1",90)':{tag:'(0009,"SPI-P-GV-CT Release 1",90)',vr:"LO",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SPI-P-GV-CT Release 1",08)':{tag:'(0019,"SPI-P-GV-CT Release 1",08)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SPI-P-GV-CT Release 1",09)':{tag:'(0019,"SPI-P-GV-CT Release 1",09)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SPI-P-GV-CT Release 1",0a)':{tag:'(0019,"SPI-P-GV-CT Release 1",0a)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SPI-P-GV-CT Release 1",10)':{tag:'(0019,"SPI-P-GV-CT Release 1",10)',vr:"LO",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SPI-P-GV-CT Release 1",20)':{tag:'(0019,"SPI-P-GV-CT Release 1",20)',vr:"TM",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SPI-P-GV-CT Release 1",50)':{tag:'(0019,"SPI-P-GV-CT Release 1",50)',vr:"LO",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SPI-P-GV-CT Release 1",60)':{tag:'(0019,"SPI-P-GV-CT Release 1",60)',vr:"DS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SPI-P-GV-CT Release 1",61)':{tag:'(0019,"SPI-P-GV-CT Release 1",61)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SPI-P-GV-CT Release 1",63)':{tag:'(0019,"SPI-P-GV-CT Release 1",63)',vr:"LO",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SPI-P-GV-CT Release 1",64)':{tag:'(0019,"SPI-P-GV-CT Release 1",64)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SPI-P-GV-CT Release 1",65)':{tag:'(0019,"SPI-P-GV-CT Release 1",65)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SPI-P-GV-CT Release 1",70)':{tag:'(0019,"SPI-P-GV-CT Release 1",70)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SPI-P-GV-CT Release 1",80)':{tag:'(0019,"SPI-P-GV-CT Release 1",80)',vr:"LO",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SPI-P-GV-CT Release 1",81)':{tag:'(0019,"SPI-P-GV-CT Release 1",81)',vr:"LO",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SPI-P-GV-CT Release 1",90)':{tag:'(0019,"SPI-P-GV-CT Release 1",90)',vr:"LO",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SPI-P-GV-CT Release 1",a0)':{tag:'(0019,"SPI-P-GV-CT Release 1",a0)',vr:"LO",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SPI-P-GV-CT Release 1",a1)':{tag:'(0019,"SPI-P-GV-CT Release 1",a1)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SPI-P-GV-CT Release 1",a2)':{tag:'(0019,"SPI-P-GV-CT Release 1",a2)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SPI-P-GV-CT Release 1",a3)':{tag:'(0019,"SPI-P-GV-CT Release 1",a3)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SPI-P-GV-CT Release 1",b0)':{tag:'(0019,"SPI-P-GV-CT Release 1",b0)',vr:"LO",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SPI-P-GV-CT Release 1",b1)':{tag:'(0019,"SPI-P-GV-CT Release 1",b1)',vr:"LO",name:"Unknown",vm:"1",version:"PrivateTag"},'(0021,"SPI-P-GV-CT Release 1",20)':{tag:'(0021,"SPI-P-GV-CT Release 1",20)',vr:"LO",name:"Unknown",vm:"1",version:"PrivateTag"},'(0021,"SPI-P-GV-CT Release 1",30)':{tag:'(0021,"SPI-P-GV-CT Release 1",30)',vr:"DS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0021,"SPI-P-GV-CT Release 1",40)':{tag:'(0021,"SPI-P-GV-CT Release 1",40)',vr:"LO",name:"Unknown",vm:"1",version:"PrivateTag"},'(0021,"SPI-P-GV-CT Release 1",50)':{tag:'(0021,"SPI-P-GV-CT Release 1",50)',vr:"LO",name:"Unknown",vm:"1",version:"PrivateTag"},'(0021,"SPI-P-GV-CT Release 1",60)':{tag:'(0021,"SPI-P-GV-CT Release 1",60)',vr:"DS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0021,"SPI-P-GV-CT Release 1",70)':{tag:'(0021,"SPI-P-GV-CT Release 1",70)',vr:"DS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0021,"SPI-P-GV-CT Release 1",80)':{tag:'(0021,"SPI-P-GV-CT Release 1",80)',vr:"DS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0021,"SPI-P-GV-CT Release 1",90)':{tag:'(0021,"SPI-P-GV-CT Release 1",90)',vr:"DS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0021,"SPI-P-GV-CT Release 1",a0)':{tag:'(0021,"SPI-P-GV-CT Release 1",a0)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0021,"SPI-P-GV-CT Release 1",a1)':{tag:'(0021,"SPI-P-GV-CT Release 1",a1)',vr:"DS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0021,"SPI-P-GV-CT Release 1",a2)':{tag:'(0021,"SPI-P-GV-CT Release 1",a2)',vr:"DS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0021,"SPI-P-GV-CT Release 1",a3)':{tag:'(0021,"SPI-P-GV-CT Release 1",a3)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0021,"SPI-P-GV-CT Release 1",a4)':{tag:'(0021,"SPI-P-GV-CT Release 1",a4)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0021,"SPI-P-GV-CT Release 1",b0)':{tag:'(0021,"SPI-P-GV-CT Release 1",b0)',vr:"LO",name:"Unknown",vm:"1",version:"PrivateTag"},'(0021,"SPI-P-GV-CT Release 1",c0)':{tag:'(0021,"SPI-P-GV-CT Release 1",c0)',vr:"LO",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SPI-P-GV-CT Release 1",10)':{tag:'(0029,"SPI-P-GV-CT Release 1",10)',vr:"LO",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SPI-P-GV-CT Release 1",30)':{tag:'(0029,"SPI-P-GV-CT Release 1",30)',vr:"UL",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SPI-P-GV-CT Release 1",31)':{tag:'(0029,"SPI-P-GV-CT Release 1",31)',vr:"UL",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SPI-P-GV-CT Release 1",32)':{tag:'(0029,"SPI-P-GV-CT Release 1",32)',vr:"UL",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SPI-P-GV-CT Release 1",33)':{tag:'(0029,"SPI-P-GV-CT Release 1",33)',vr:"UL",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SPI-P-GV-CT Release 1",80)':{tag:'(0029,"SPI-P-GV-CT Release 1",80)',vr:"LO",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SPI-P-GV-CT Release 1",90)':{tag:'(0029,"SPI-P-GV-CT Release 1",90)',vr:"LO",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SPI-P-GV-CT Release 1",d0)':{tag:'(0029,"SPI-P-GV-CT Release 1",d0)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SPI-P-GV-CT Release 1",d1)':{tag:'(0029,"SPI-P-GV-CT Release 1",d1)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SPI-P-PCR Release 2",30)':{tag:'(0019,"SPI-P-PCR Release 2",30)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0021,"SPI-P-Private-CWS Release 1",00)':{tag:'(0021,"SPI-P-Private-CWS Release 1",00)',vr:"LT",name:"WindowOfImagesID",vm:"1",version:"PrivateTag"},'(0021,"SPI-P-Private-CWS Release 1",01)':{tag:'(0021,"SPI-P-Private-CWS Release 1",01)',vr:"CS",name:"WindowOfImagesType",vm:"1",version:"PrivateTag"},'(0021,"SPI-P-Private-CWS Release 1",02)':{tag:'(0021,"SPI-P-Private-CWS Release 1",02)',vr:"IS",name:"WindowOfImagesScope",vm:"1-n",version:"PrivateTag"},'(0019,"SPI-P-Private-DCI Release 1",10)':{tag:'(0019,"SPI-P-Private-DCI Release 1",10)',vr:"UN",name:"ECGTimeMapDataBitsAllocated",vm:"1",version:"PrivateTag"},'(0019,"SPI-P-Private-DCI Release 1",11)':{tag:'(0019,"SPI-P-Private-DCI Release 1",11)',vr:"UN",name:"ECGTimeMapDataBitsStored",vm:"1",version:"PrivateTag"},'(0019,"SPI-P-Private-DCI Release 1",12)':{tag:'(0019,"SPI-P-Private-DCI Release 1",12)',vr:"UN",name:"ECGTimeMapDataHighBit",vm:"1",version:"PrivateTag"},'(0019,"SPI-P-Private-DCI Release 1",13)':{tag:'(0019,"SPI-P-Private-DCI Release 1",13)',vr:"UN",name:"ECGTimeMapDataRepresentation",vm:"1",version:"PrivateTag"},'(0019,"SPI-P-Private-DCI Release 1",14)':{tag:'(0019,"SPI-P-Private-DCI Release 1",14)',vr:"UN",name:"ECGTimeMapDataSmallestDataValue",vm:"1",version:"PrivateTag"},'(0019,"SPI-P-Private-DCI Release 1",15)':{tag:'(0019,"SPI-P-Private-DCI Release 1",15)',vr:"UN",name:"ECGTimeMapDataLargestDataValue",vm:"1",version:"PrivateTag"},'(0019,"SPI-P-Private-DCI Release 1",16)':{tag:'(0019,"SPI-P-Private-DCI Release 1",16)',vr:"UN",name:"ECGTimeMapDataNumberOfDataValues",vm:"1",version:"PrivateTag"},'(0019,"SPI-P-Private-DCI Release 1",17)':{tag:'(0019,"SPI-P-Private-DCI Release 1",17)',vr:"UN",name:"ECGTimeMapData",vm:"1",version:"PrivateTag"},'(0021,"SPI-P-Private_CDS Release 1",40)':{tag:'(0021,"SPI-P-Private_CDS Release 1",40)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SPI-P-Private_CDS Release 1",00)':{tag:'(0029,"SPI-P-Private_CDS Release 1",00)',vr:"UN",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SPI-P-Private_ICS Release 1",30)':{tag:'(0019,"SPI-P-Private_ICS Release 1",30)',vr:"DS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SPI-P-Private_ICS Release 1",31)':{tag:'(0019,"SPI-P-Private_ICS Release 1",31)',vr:"LO",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SPI-P-Private_ICS Release 1",08)':{tag:'(0029,"SPI-P-Private_ICS Release 1",08)',vr:"SQ",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SPI-P-Private_ICS Release 1",0f)':{tag:'(0029,"SPI-P-Private_ICS Release 1",0f)',vr:"SQ",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SPI-P-Private_ICS Release 1",10)':{tag:'(0029,"SPI-P-Private_ICS Release 1",10)',vr:"SQ",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SPI-P-Private_ICS Release 1",1b)':{tag:'(0029,"SPI-P-Private_ICS Release 1",1b)',vr:"SQ",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SPI-P-Private_ICS Release 1",1c)':{tag:'(0029,"SPI-P-Private_ICS Release 1",1c)',vr:"SQ",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SPI-P-Private_ICS Release 1",21)':{tag:'(0029,"SPI-P-Private_ICS Release 1",21)',vr:"SQ",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SPI-P-Private_ICS Release 1",43)':{tag:'(0029,"SPI-P-Private_ICS Release 1",43)',vr:"SQ",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SPI-P-Private_ICS Release 1",44)':{tag:'(0029,"SPI-P-Private_ICS Release 1",44)',vr:"SQ",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SPI-P-Private_ICS Release 1",4C)':{tag:'(0029,"SPI-P-Private_ICS Release 1",4C)',vr:"SQ",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SPI-P-Private_ICS Release 1",67)':{tag:'(0029,"SPI-P-Private_ICS Release 1",67)',vr:"LO",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SPI-P-Private_ICS Release 1",68)':{tag:'(0029,"SPI-P-Private_ICS Release 1",68)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SPI-P-Private_ICS Release 1",6A)':{tag:'(0029,"SPI-P-Private_ICS Release 1",6A)',vr:"LO",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SPI-P-Private_ICS Release 1",6B)':{tag:'(0029,"SPI-P-Private_ICS Release 1",6B)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SPI-P-Private_ICS Release 1;1",00)':{tag:'(0029,"SPI-P-Private_ICS Release 1;1",00)',vr:"SL",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SPI-P-Private_ICS Release 1;1",05)':{tag:'(0029,"SPI-P-Private_ICS Release 1;1",05)',vr:"FL",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SPI-P-Private_ICS Release 1;1",06)':{tag:'(0029,"SPI-P-Private_ICS Release 1;1",06)',vr:"FL",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SPI-P-Private_ICS Release 1;1",20)':{tag:'(0029,"SPI-P-Private_ICS Release 1;1",20)',vr:"FL",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SPI-P-Private_ICS Release 1;1",21)':{tag:'(0029,"SPI-P-Private_ICS Release 1;1",21)',vr:"FL",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SPI-P-Private_ICS Release 1;1",CD)':{tag:'(0029,"SPI-P-Private_ICS Release 1;1",CD)',vr:"SQ",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SPI-P-Private_ICS Release 1;2",00)':{tag:'(0029,"SPI-P-Private_ICS Release 1;2",00)',vr:"FD",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SPI-P-Private_ICS Release 1;2",01)':{tag:'(0029,"SPI-P-Private_ICS Release 1;2",01)',vr:"FD",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SPI-P-Private_ICS Release 1;2",02)':{tag:'(0029,"SPI-P-Private_ICS Release 1;2",02)',vr:"FD",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SPI-P-Private_ICS Release 1;2",03)':{tag:'(0029,"SPI-P-Private_ICS Release 1;2",03)',vr:"SL",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SPI-P-Private_ICS Release 1;2",04)':{tag:'(0029,"SPI-P-Private_ICS Release 1;2",04)',vr:"SL",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SPI-P-Private_ICS Release 1;2",05)':{tag:'(0029,"SPI-P-Private_ICS Release 1;2",05)',vr:"SL",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SPI-P-Private_ICS Release 1;3",C0)':{tag:'(0029,"SPI-P-Private_ICS Release 1;3",C0)',vr:"SQ",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SPI-P-Private_ICS Release 1;3",C1)':{tag:'(0029,"SPI-P-Private_ICS Release 1;3",C1)',vr:"SQ",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SPI-P-Private_ICS Release 1;3",C2)':{tag:'(0029,"SPI-P-Private_ICS Release 1;3",C2)',vr:"SQ",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SPI-P-Private_ICS Release 1;3",C3)':{tag:'(0029,"SPI-P-Private_ICS Release 1;3",C3)',vr:"SQ",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SPI-P-Private_ICS Release 1;3",C4)':{tag:'(0029,"SPI-P-Private_ICS Release 1;3",C4)',vr:"SQ",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SPI-P-Private_ICS Release 1;3",C5)':{tag:'(0029,"SPI-P-Private_ICS Release 1;3",C5)',vr:"SQ",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SPI-P-Private_ICS Release 1;4",02)':{tag:'(0029,"SPI-P-Private_ICS Release 1;4",02)',vr:"SQ",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SPI-P-Private_ICS Release 1;4",9A)':{tag:'(0029,"SPI-P-Private_ICS Release 1;4",9A)',vr:"SQ",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SPI-P-Private_ICS Release 1;4",E0)':{tag:'(0029,"SPI-P-Private_ICS Release 1;4",E0)',vr:"SQ",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SPI-P-Private_ICS Release 1;5",50)':{tag:'(0029,"SPI-P-Private_ICS Release 1;5",50)',vr:"CS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"SPI-P-Private_ICS Release 1;5",55)':{tag:'(0029,"SPI-P-Private_ICS Release 1;5",55)',vr:"CS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"SPI-P-XSB-DCI Release 1",10)':{tag:'(0019,"SPI-P-XSB-DCI Release 1",10)',vr:"LT",name:"VideoBeamBoost",vm:"1",version:"PrivateTag"},'(0019,"SPI-P-XSB-DCI Release 1",11)':{tag:'(0019,"SPI-P-XSB-DCI Release 1",11)',vr:"US",name:"ChannelGeneratingVideoSync",vm:"1",version:"PrivateTag"},'(0019,"SPI-P-XSB-DCI Release 1",12)':{tag:'(0019,"SPI-P-XSB-DCI Release 1",12)',vr:"US",name:"VideoGain",vm:"1",version:"PrivateTag"},'(0019,"SPI-P-XSB-DCI Release 1",13)':{tag:'(0019,"SPI-P-XSB-DCI Release 1",13)',vr:"US",name:"VideoOffset",vm:"1",version:"PrivateTag"},'(0019,"SPI-P-XSB-DCI Release 1",20)':{tag:'(0019,"SPI-P-XSB-DCI Release 1",20)',vr:"DS",name:"RTDDataCompressionFactor",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Annot V1.0",11)':{tag:'(0029,"Silhouette Annot V1.0",11)',vr:"IS",name:"AnnotationName",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Annot V1.0",12)':{tag:'(0029,"Silhouette Annot V1.0",12)',vr:"LT",name:"AnnotationFont",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Annot V1.0",13)':{tag:'(0029,"Silhouette Annot V1.0",13)',vr:"LT",name:"AnnotationTextForegroundColor",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Annot V1.0",14)':{tag:'(0029,"Silhouette Annot V1.0",14)',vr:"LT",name:"AnnotationTextBackgroundColor",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Annot V1.0",15)':{tag:'(0029,"Silhouette Annot V1.0",15)',vr:"UL",name:"AnnotationTextBackingMode",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Annot V1.0",16)':{tag:'(0029,"Silhouette Annot V1.0",16)',vr:"UL",name:"AnnotationTextJustification",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Annot V1.0",17)':{tag:'(0029,"Silhouette Annot V1.0",17)',vr:"UL",name:"AnnotationTextLocation",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Annot V1.0",18)':{tag:'(0029,"Silhouette Annot V1.0",18)',vr:"LT",name:"AnnotationTextString",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Annot V1.0",19)':{tag:'(0029,"Silhouette Annot V1.0",19)',vr:"UL",name:"AnnotationTextAttachMode",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Annot V1.0",20)':{tag:'(0029,"Silhouette Annot V1.0",20)',vr:"UL",name:"AnnotationTextCursorMode",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Annot V1.0",21)':{tag:'(0029,"Silhouette Annot V1.0",21)',vr:"UL",name:"AnnotationTextShadowOffsetX",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Annot V1.0",22)':{tag:'(0029,"Silhouette Annot V1.0",22)',vr:"UL",name:"AnnotationTextShadowOffsetY",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Annot V1.0",23)':{tag:'(0029,"Silhouette Annot V1.0",23)',vr:"LT",name:"AnnotationLineColor",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Annot V1.0",24)':{tag:'(0029,"Silhouette Annot V1.0",24)',vr:"UL",name:"AnnotationLineThickness",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Annot V1.0",25)':{tag:'(0029,"Silhouette Annot V1.0",25)',vr:"UL",name:"AnnotationLineType",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Annot V1.0",26)':{tag:'(0029,"Silhouette Annot V1.0",26)',vr:"UL",name:"AnnotationLineStyle",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Annot V1.0",27)':{tag:'(0029,"Silhouette Annot V1.0",27)',vr:"UL",name:"AnnotationLineDashLength",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Annot V1.0",28)':{tag:'(0029,"Silhouette Annot V1.0",28)',vr:"UL",name:"AnnotationLineAttachMode",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Annot V1.0",29)':{tag:'(0029,"Silhouette Annot V1.0",29)',vr:"UL",name:"AnnotationLinePointCount",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Annot V1.0",30)':{tag:'(0029,"Silhouette Annot V1.0",30)',vr:"FD",name:"AnnotationLinePoints",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Annot V1.0",31)':{tag:'(0029,"Silhouette Annot V1.0",31)',vr:"UL",name:"AnnotationLineControlSize",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Annot V1.0",32)':{tag:'(0029,"Silhouette Annot V1.0",32)',vr:"LT",name:"AnnotationMarkerColor",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Annot V1.0",33)':{tag:'(0029,"Silhouette Annot V1.0",33)',vr:"UL",name:"AnnotationMarkerType",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Annot V1.0",34)':{tag:'(0029,"Silhouette Annot V1.0",34)',vr:"UL",name:"AnnotationMarkerSize",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Annot V1.0",35)':{tag:'(0029,"Silhouette Annot V1.0",35)',vr:"FD",name:"AnnotationMarkerLocation",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Annot V1.0",36)':{tag:'(0029,"Silhouette Annot V1.0",36)',vr:"UL",name:"AnnotationMarkerAttachMode",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Annot V1.0",37)':{tag:'(0029,"Silhouette Annot V1.0",37)',vr:"LT",name:"AnnotationGeomColor",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Annot V1.0",38)':{tag:'(0029,"Silhouette Annot V1.0",38)',vr:"UL",name:"AnnotationGeomThickness",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Annot V1.0",39)':{tag:'(0029,"Silhouette Annot V1.0",39)',vr:"UL",name:"AnnotationGeomLineStyle",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Annot V1.0",40)':{tag:'(0029,"Silhouette Annot V1.0",40)',vr:"UL",name:"AnnotationGeomDashLength",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Annot V1.0",41)':{tag:'(0029,"Silhouette Annot V1.0",41)',vr:"UL",name:"AnnotationGeomFillPattern",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Annot V1.0",42)':{tag:'(0029,"Silhouette Annot V1.0",42)',vr:"UL",name:"AnnotationInteractivity",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Annot V1.0",43)':{tag:'(0029,"Silhouette Annot V1.0",43)',vr:"FD",name:"AnnotationArrowLength",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Annot V1.0",44)':{tag:'(0029,"Silhouette Annot V1.0",44)',vr:"FD",name:"AnnotationArrowAngle",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Annot V1.0",45)':{tag:'(0029,"Silhouette Annot V1.0",45)',vr:"UL",name:"AnnotationDontSave",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Graphics Export V1.0",00)':{tag:'(0029,"Silhouette Graphics Export V1.0",00)',vr:"UI",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Line V1.0",11)':{tag:'(0029,"Silhouette Line V1.0",11)',vr:"IS",name:"LineName",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Line V1.0",12)':{tag:'(0029,"Silhouette Line V1.0",12)',vr:"LT",name:"LineNameFont",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Line V1.0",13)':{tag:'(0029,"Silhouette Line V1.0",13)',vr:"UL",name:"LineNameDisplay",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Line V1.0",14)':{tag:'(0029,"Silhouette Line V1.0",14)',vr:"LT",name:"LineNormalColor",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Line V1.0",15)':{tag:'(0029,"Silhouette Line V1.0",15)',vr:"UL",name:"LineType",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Line V1.0",16)':{tag:'(0029,"Silhouette Line V1.0",16)',vr:"UL",name:"LineThickness",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Line V1.0",17)':{tag:'(0029,"Silhouette Line V1.0",17)',vr:"UL",name:"LineStyle",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Line V1.0",18)':{tag:'(0029,"Silhouette Line V1.0",18)',vr:"UL",name:"LineDashLength",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Line V1.0",19)':{tag:'(0029,"Silhouette Line V1.0",19)',vr:"UL",name:"LineInteractivity",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Line V1.0",20)':{tag:'(0029,"Silhouette Line V1.0",20)',vr:"LT",name:"LineMeasurementColor",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Line V1.0",21)':{tag:'(0029,"Silhouette Line V1.0",21)',vr:"LT",name:"LineMeasurementFont",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Line V1.0",22)':{tag:'(0029,"Silhouette Line V1.0",22)',vr:"UL",name:"LineMeasurementDashLength",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Line V1.0",23)':{tag:'(0029,"Silhouette Line V1.0",23)',vr:"UL",name:"LinePointSpace",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Line V1.0",24)':{tag:'(0029,"Silhouette Line V1.0",24)',vr:"FD",name:"LinePoints",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Line V1.0",25)':{tag:'(0029,"Silhouette Line V1.0",25)',vr:"UL",name:"LineControlPointSize",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Line V1.0",26)':{tag:'(0029,"Silhouette Line V1.0",26)',vr:"UL",name:"LineControlPointSpace",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Line V1.0",27)':{tag:'(0029,"Silhouette Line V1.0",27)',vr:"FD",name:"LineControlPoints",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Line V1.0",28)':{tag:'(0029,"Silhouette Line V1.0",28)',vr:"LT",name:"LineLabel",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Line V1.0",29)':{tag:'(0029,"Silhouette Line V1.0",29)',vr:"UL",name:"LineDontSave",vm:"1",version:"PrivateTag"},'(0029,"Silhouette ROI V1.0",11)':{tag:'(0029,"Silhouette ROI V1.0",11)',vr:"IS",name:"ROIName",vm:"1",version:"PrivateTag"},'(0029,"Silhouette ROI V1.0",12)':{tag:'(0029,"Silhouette ROI V1.0",12)',vr:"LT",name:"ROINameFont",vm:"1",version:"PrivateTag"},'(0029,"Silhouette ROI V1.0",13)':{tag:'(0029,"Silhouette ROI V1.0",13)',vr:"LT",name:"ROINormalColor",vm:"1",version:"PrivateTag"},'(0029,"Silhouette ROI V1.0",14)':{tag:'(0029,"Silhouette ROI V1.0",14)',vr:"UL",name:"ROIFillPattern",vm:"1",version:"PrivateTag"},'(0029,"Silhouette ROI V1.0",15)':{tag:'(0029,"Silhouette ROI V1.0",15)',vr:"UL",name:"ROIBpSeg",vm:"1",version:"PrivateTag"},'(0029,"Silhouette ROI V1.0",16)':{tag:'(0029,"Silhouette ROI V1.0",16)',vr:"UN",name:"ROIBpSegPairs",vm:"1",version:"PrivateTag"},'(0029,"Silhouette ROI V1.0",17)':{tag:'(0029,"Silhouette ROI V1.0",17)',vr:"UL",name:"ROISeedSpace",vm:"1",version:"PrivateTag"},'(0029,"Silhouette ROI V1.0",18)':{tag:'(0029,"Silhouette ROI V1.0",18)',vr:"UN",name:"ROISeeds",vm:"1",version:"PrivateTag"},'(0029,"Silhouette ROI V1.0",19)':{tag:'(0029,"Silhouette ROI V1.0",19)',vr:"UL",name:"ROILineThickness",vm:"1",version:"PrivateTag"},'(0029,"Silhouette ROI V1.0",20)':{tag:'(0029,"Silhouette ROI V1.0",20)',vr:"UL",name:"ROILineStyle",vm:"1",version:"PrivateTag"},'(0029,"Silhouette ROI V1.0",21)':{tag:'(0029,"Silhouette ROI V1.0",21)',vr:"UL",name:"ROILineDashLength",vm:"1",version:"PrivateTag"},'(0029,"Silhouette ROI V1.0",22)':{tag:'(0029,"Silhouette ROI V1.0",22)',vr:"UL",name:"ROIInteractivity",vm:"1",version:"PrivateTag"},'(0029,"Silhouette ROI V1.0",23)':{tag:'(0029,"Silhouette ROI V1.0",23)',vr:"UL",name:"ROINamePosition",vm:"1",version:"PrivateTag"},'(0029,"Silhouette ROI V1.0",24)':{tag:'(0029,"Silhouette ROI V1.0",24)',vr:"UL",name:"ROINameDisplay",vm:"1",version:"PrivateTag"},'(0029,"Silhouette ROI V1.0",25)':{tag:'(0029,"Silhouette ROI V1.0",25)',vr:"LT",name:"ROILabel",vm:"1",version:"PrivateTag"},'(0029,"Silhouette ROI V1.0",26)':{tag:'(0029,"Silhouette ROI V1.0",26)',vr:"UL",name:"ROIShape",vm:"1",version:"PrivateTag"},'(0029,"Silhouette ROI V1.0",27)':{tag:'(0029,"Silhouette ROI V1.0",27)',vr:"FD",name:"ROIShapeTilt",vm:"1",version:"PrivateTag"},'(0029,"Silhouette ROI V1.0",28)':{tag:'(0029,"Silhouette ROI V1.0",28)',vr:"UL",name:"ROIShapePointsCount",vm:"1",version:"PrivateTag"},'(0029,"Silhouette ROI V1.0",29)':{tag:'(0029,"Silhouette ROI V1.0",29)',vr:"UL",name:"ROIShapePointsSpace",vm:"1",version:"PrivateTag"},'(0029,"Silhouette ROI V1.0",30)':{tag:'(0029,"Silhouette ROI V1.0",30)',vr:"FD",name:"ROIShapePoints",vm:"1",version:"PrivateTag"},'(0029,"Silhouette ROI V1.0",31)':{tag:'(0029,"Silhouette ROI V1.0",31)',vr:"UL",name:"ROIShapeControlPointsCount",vm:"1",version:"PrivateTag"},'(0029,"Silhouette ROI V1.0",32)':{tag:'(0029,"Silhouette ROI V1.0",32)',vr:"UL",name:"ROIShapeControlPointsSpace",vm:"1",version:"PrivateTag"},'(0029,"Silhouette ROI V1.0",33)':{tag:'(0029,"Silhouette ROI V1.0",33)',vr:"FD",name:"ROIShapeControlPoints",vm:"1",version:"PrivateTag"},'(0029,"Silhouette ROI V1.0",34)':{tag:'(0029,"Silhouette ROI V1.0",34)',vr:"UL",name:"ROIDontSave",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Sequence Ids V1.0",41)':{tag:'(0029,"Silhouette Sequence Ids V1.0",41)',vr:"SQ",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Sequence Ids V1.0",42)':{tag:'(0029,"Silhouette Sequence Ids V1.0",42)',vr:"SQ",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"Silhouette Sequence Ids V1.0",43)':{tag:'(0029,"Silhouette Sequence Ids V1.0",43)',vr:"SQ",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"Silhouette V1.0",13)':{tag:'(0029,"Silhouette V1.0",13)',vr:"UL",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"Silhouette V1.0",14)':{tag:'(0029,"Silhouette V1.0",14)',vr:"UL",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"Silhouette V1.0",17)':{tag:'(0029,"Silhouette V1.0",17)',vr:"UN",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"Silhouette V1.0",18)':{tag:'(0029,"Silhouette V1.0",18)',vr:"UN",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"Silhouette V1.0",19)':{tag:'(0029,"Silhouette V1.0",19)',vr:"UL",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"Silhouette V1.0",1a)':{tag:'(0029,"Silhouette V1.0",1a)',vr:"UN",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"Silhouette V1.0",1b)':{tag:'(0029,"Silhouette V1.0",1b)',vr:"UL",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"Silhouette V1.0",1c)':{tag:'(0029,"Silhouette V1.0",1c)',vr:"UL",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"Silhouette V1.0",1d)':{tag:'(0029,"Silhouette V1.0",1d)',vr:"UN",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"Silhouette V1.0",1e)':{tag:'(0029,"Silhouette V1.0",1e)',vr:"UN",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"Silhouette V1.0",21)':{tag:'(0029,"Silhouette V1.0",21)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"Silhouette V1.0",22)':{tag:'(0029,"Silhouette V1.0",22)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"Silhouette V1.0",23)':{tag:'(0029,"Silhouette V1.0",23)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"Silhouette V1.0",24)':{tag:'(0029,"Silhouette V1.0",24)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"Silhouette V1.0",25)':{tag:'(0029,"Silhouette V1.0",25)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"Silhouette V1.0",27)':{tag:'(0029,"Silhouette V1.0",27)',vr:"UN",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"Silhouette V1.0",28)':{tag:'(0029,"Silhouette V1.0",28)',vr:"UN",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"Silhouette V1.0",29)':{tag:'(0029,"Silhouette V1.0",29)',vr:"UN",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"Silhouette V1.0",30)':{tag:'(0029,"Silhouette V1.0",30)',vr:"UN",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"Silhouette V1.0",52)':{tag:'(0029,"Silhouette V1.0",52)',vr:"US",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"Silhouette V1.0",53)':{tag:'(0029,"Silhouette V1.0",53)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"Silhouette V1.0",54)':{tag:'(0029,"Silhouette V1.0",54)',vr:"UN",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"Silhouette V1.0",55)':{tag:'(0029,"Silhouette V1.0",55)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"Silhouette V1.0",56)':{tag:'(0029,"Silhouette V1.0",56)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0029,"Silhouette V1.0",57)':{tag:'(0029,"Silhouette V1.0",57)',vr:"UN",name:"Unknown",vm:"1",version:"PrivateTag"},'(0135,"SONOWAND AS",10)':{tag:'(0135,"SONOWAND AS",10)',vr:"LO",name:"UltrasoundScannerName",vm:"1",version:"PrivateTag"},'(0135,"SONOWAND AS",11)':{tag:'(0135,"SONOWAND AS",11)',vr:"LO",name:"TransducerSerial",vm:"1",version:"PrivateTag"},'(0135,"SONOWAND AS",12)':{tag:'(0135,"SONOWAND AS",12)',vr:"LO",name:"ProbeApplication",vm:"1",version:"PrivateTag"},'(0017,"SVISION",00)':{tag:'(0017,"SVISION",00)',vr:"LO",name:"ExtendedBodyPart",vm:"1",version:"PrivateTag"},'(0017,"SVISION",10)':{tag:'(0017,"SVISION",10)',vr:"LO",name:"ExtendedViewPosition",vm:"1",version:"PrivateTag"},'(0017,"SVISION",F0)':{tag:'(0017,"SVISION",F0)',vr:"IS",name:"ImagesSOPClass",vm:"1",version:"PrivateTag"},'(0019,"SVISION",00)':{tag:'(0019,"SVISION",00)',vr:"IS",name:"AECField",vm:"1",version:"PrivateTag"},'(0019,"SVISION",01)':{tag:'(0019,"SVISION",01)',vr:"IS",name:"AECFilmScreen",vm:"1",version:"PrivateTag"},'(0019,"SVISION",02)':{tag:'(0019,"SVISION",02)',vr:"IS",name:"AECDensity",vm:"1",version:"PrivateTag"},'(0019,"SVISION",10)':{tag:'(0019,"SVISION",10)',vr:"IS",name:"PatientThickness",vm:"1",version:"PrivateTag"},'(0019,"SVISION",18)':{tag:'(0019,"SVISION",18)',vr:"IS",name:"BeamDistance",vm:"1",version:"PrivateTag"},'(0019,"SVISION",20)':{tag:'(0019,"SVISION",20)',vr:"IS",name:"WorkstationNumber",vm:"1",version:"PrivateTag"},'(0019,"SVISION",28)':{tag:'(0019,"SVISION",28)',vr:"IS",name:"TubeNumber",vm:"1",version:"PrivateTag"},'(0019,"SVISION",30)':{tag:'(0019,"SVISION",30)',vr:"IS",name:"BuckyGrid",vm:"1",version:"PrivateTag"},'(0019,"SVISION",34)':{tag:'(0019,"SVISION",34)',vr:"IS",name:"Focus",vm:"1",version:"PrivateTag"},'(0019,"SVISION",38)':{tag:'(0019,"SVISION",38)',vr:"IS",name:"Child",vm:"1",version:"PrivateTag"},'(0019,"SVISION",40)':{tag:'(0019,"SVISION",40)',vr:"IS",name:"CollimatorDistanceX",vm:"1",version:"PrivateTag"},'(0019,"SVISION",41)':{tag:'(0019,"SVISION",41)',vr:"IS",name:"CollimatorDistanceY",vm:"1",version:"PrivateTag"},'(0019,"SVISION",50)':{tag:'(0019,"SVISION",50)',vr:"IS",name:"CentralBeamHeight",vm:"1",version:"PrivateTag"},'(0019,"SVISION",60)':{tag:'(0019,"SVISION",60)',vr:"IS",name:"BuckyAngle",vm:"1",version:"PrivateTag"},'(0019,"SVISION",68)':{tag:'(0019,"SVISION",68)',vr:"IS",name:"CArmAngle",vm:"1",version:"PrivateTag"},'(0019,"SVISION",69)':{tag:'(0019,"SVISION",69)',vr:"IS",name:"CollimatorAngle",vm:"1",version:"PrivateTag"},'(0019,"SVISION",70)':{tag:'(0019,"SVISION",70)',vr:"IS",name:"FilterNumber",vm:"1",version:"PrivateTag"},'(0019,"SVISION",74)':{tag:'(0019,"SVISION",74)',vr:"LO",name:"FilterMaterial1",vm:"1",version:"PrivateTag"},'(0019,"SVISION",75)':{tag:'(0019,"SVISION",75)',vr:"LO",name:"FilterMaterial2",vm:"1",version:"PrivateTag"},'(0019,"SVISION",78)':{tag:'(0019,"SVISION",78)',vr:"DS",name:"FilterThickness1",vm:"1",version:"PrivateTag"},'(0019,"SVISION",79)':{tag:'(0019,"SVISION",79)',vr:"DS",name:"FilterThickness2",vm:"1",version:"PrivateTag"},'(0019,"SVISION",80)':{tag:'(0019,"SVISION",80)',vr:"IS",name:"BuckyFormat",vm:"1",version:"PrivateTag"},'(0019,"SVISION",81)':{tag:'(0019,"SVISION",81)',vr:"IS",name:"ObjectPosition",vm:"1",version:"PrivateTag"},'(0019,"SVISION",90)':{tag:'(0019,"SVISION",90)',vr:"LO",name:"DeskCommand",vm:"1",version:"PrivateTag"},'(0019,"SVISION",A0)':{tag:'(0019,"SVISION",A0)',vr:"DS",name:"ExtendedExposureTime",vm:"1",version:"PrivateTag"},'(0019,"SVISION",A1)':{tag:'(0019,"SVISION",A1)',vr:"DS",name:"ActualExposureTime",vm:"1",version:"PrivateTag"},'(0019,"SVISION",A8)':{tag:'(0019,"SVISION",A8)',vr:"DS",name:"ExtendedXRayTubeCurrent",vm:"1",version:"PrivateTag"},'(0021,"SVISION",00)':{tag:'(0021,"SVISION",00)',vr:"DS",name:"NoiseReduction",vm:"1",version:"PrivateTag"},'(0021,"SVISION",01)':{tag:'(0021,"SVISION",01)',vr:"DS",name:"ContrastAmplification",vm:"1",version:"PrivateTag"},'(0021,"SVISION",02)':{tag:'(0021,"SVISION",02)',vr:"DS",name:"EdgeContrastBoosting",vm:"1",version:"PrivateTag"},'(0021,"SVISION",03)':{tag:'(0021,"SVISION",03)',vr:"DS",name:"LatitudeReduction",vm:"1",version:"PrivateTag"},'(0021,"SVISION",10)':{tag:'(0021,"SVISION",10)',vr:"LO",name:"FindRangeAlgorithm",vm:"1",version:"PrivateTag"},'(0021,"SVISION",11)':{tag:'(0021,"SVISION",11)',vr:"DS",name:"ThresholdCAlgorithm",vm:"1",version:"PrivateTag"},'(0021,"SVISION",20)':{tag:'(0021,"SVISION",20)',vr:"LO",name:"SensometricCurve",vm:"1",version:"PrivateTag"},'(0021,"SVISION",30)':{tag:'(0021,"SVISION",30)',vr:"DS",name:"LowerWindowOffset",vm:"1",version:"PrivateTag"},'(0021,"SVISION",31)':{tag:'(0021,"SVISION",31)',vr:"DS",name:"UpperWindowOffset",vm:"1",version:"PrivateTag"},'(0021,"SVISION",40)':{tag:'(0021,"SVISION",40)',vr:"DS",name:"MinPrintableDensity",vm:"1",version:"PrivateTag"},'(0021,"SVISION",41)':{tag:'(0021,"SVISION",41)',vr:"DS",name:"MaxPrintableDensity",vm:"1",version:"PrivateTag"},'(0021,"SVISION",90)':{tag:'(0021,"SVISION",90)',vr:"DS",name:"Brightness",vm:"1",version:"PrivateTag"},'(0021,"SVISION",91)':{tag:'(0021,"SVISION",91)',vr:"DS",name:"Contrast",vm:"1",version:"PrivateTag"},'(0021,"SVISION",92)':{tag:'(0021,"SVISION",92)',vr:"DS",name:"ShapeFactor",vm:"1",version:"PrivateTag"},'(0023,"SVISION",00)':{tag:'(0023,"SVISION",00)',vr:"LO",name:"ImageLaterality",vm:"1",version:"PrivateTag"},'(0023,"SVISION",01)':{tag:'(0023,"SVISION",01)',vr:"IS",name:"LetterPosition",vm:"1",version:"PrivateTag"},'(0023,"SVISION",02)':{tag:'(0023,"SVISION",02)',vr:"IS",name:"BurnedInAnnotation",vm:"1",version:"PrivateTag"},'(0023,"SVISION",03)':{tag:'(0023,"SVISION",03)',vr:"LO",name:"Unknown",vm:"1",version:"PrivateTag"},'(0023,"SVISION",F0)':{tag:'(0023,"SVISION",F0)',vr:"IS",name:"ImageSOPClass",vm:"1",version:"PrivateTag"},'(0025,"SVISION",00)':{tag:'(0025,"SVISION",00)',vr:"IS",name:"OriginalImage",vm:"1",version:"PrivateTag"},'(0025,"SVISION",01)':{tag:'(0025,"SVISION",01)',vr:"IS",name:"NotProcessedImage",vm:"1",version:"PrivateTag"},'(0025,"SVISION",02)':{tag:'(0025,"SVISION",02)',vr:"IS",name:"CutOutImage",vm:"1",version:"PrivateTag"},'(0025,"SVISION",03)':{tag:'(0025,"SVISION",03)',vr:"IS",name:"DuplicatedImage",vm:"1",version:"PrivateTag"},'(0025,"SVISION",04)':{tag:'(0025,"SVISION",04)',vr:"IS",name:"StoredImage",vm:"1",version:"PrivateTag"},'(0025,"SVISION",05)':{tag:'(0025,"SVISION",05)',vr:"IS",name:"RetrievedImage",vm:"1",version:"PrivateTag"},'(0025,"SVISION",06)':{tag:'(0025,"SVISION",06)',vr:"IS",name:"RemoteImage",vm:"1",version:"PrivateTag"},'(0025,"SVISION",07)':{tag:'(0025,"SVISION",07)',vr:"IS",name:"MediaStoredImage",vm:"1",version:"PrivateTag"},'(0025,"SVISION",08)':{tag:'(0025,"SVISION",08)',vr:"IS",name:"ImageState",vm:"1",version:"PrivateTag"},'(0025,"SVISION",20)':{tag:'(0025,"SVISION",20)',vr:"LO",name:"SourceImageFile",vm:"1",version:"PrivateTag"},'(0025,"SVISION",21)':{tag:'(0025,"SVISION",21)',vr:"UI",name:"Unknown",vm:"1",version:"PrivateTag"},'(0027,"SVISION",00)':{tag:'(0027,"SVISION",00)',vr:"IS",name:"NumberOfSeries",vm:"1",version:"PrivateTag"},'(0027,"SVISION",01)':{tag:'(0027,"SVISION",01)',vr:"IS",name:"NumberOfStudies",vm:"1",version:"PrivateTag"},'(0027,"SVISION",10)':{tag:'(0027,"SVISION",10)',vr:"DT",name:"OldestSeries",vm:"1",version:"PrivateTag"},'(0027,"SVISION",11)':{tag:'(0027,"SVISION",11)',vr:"DT",name:"NewestSeries",vm:"1",version:"PrivateTag"},'(0027,"SVISION",12)':{tag:'(0027,"SVISION",12)',vr:"DT",name:"OldestStudy",vm:"1",version:"PrivateTag"},'(0027,"SVISION",13)':{tag:'(0027,"SVISION",13)',vr:"DT",name:"NewestStudy",vm:"1",version:"PrivateTag"},'(0009,"TOSHIBA_MEC_1.0",01)':{tag:'(0009,"TOSHIBA_MEC_1.0",01)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0009,"TOSHIBA_MEC_1.0",02)':{tag:'(0009,"TOSHIBA_MEC_1.0",02)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0009,"TOSHIBA_MEC_1.0",03)':{tag:'(0009,"TOSHIBA_MEC_1.0",03)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0009,"TOSHIBA_MEC_1.0",04)':{tag:'(0009,"TOSHIBA_MEC_1.0",04)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0011,"TOSHIBA_MEC_1.0",01)':{tag:'(0011,"TOSHIBA_MEC_1.0",01)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0011,"TOSHIBA_MEC_1.0",02)':{tag:'(0011,"TOSHIBA_MEC_1.0",02)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"TOSHIBA_MEC_1.0",01)':{tag:'(0019,"TOSHIBA_MEC_1.0",01)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"TOSHIBA_MEC_1.0",02)':{tag:'(0019,"TOSHIBA_MEC_1.0",02)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0021,"TOSHIBA_MEC_1.0",01)':{tag:'(0021,"TOSHIBA_MEC_1.0",01)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0021,"TOSHIBA_MEC_1.0",02)':{tag:'(0021,"TOSHIBA_MEC_1.0",02)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0021,"TOSHIBA_MEC_1.0",03)':{tag:'(0021,"TOSHIBA_MEC_1.0",03)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(7ff1,"TOSHIBA_MEC_1.0",01)':{tag:'(7ff1,"TOSHIBA_MEC_1.0",01)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(7ff1,"TOSHIBA_MEC_1.0",02)':{tag:'(7ff1,"TOSHIBA_MEC_1.0",02)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(7ff1,"TOSHIBA_MEC_1.0",03)':{tag:'(7ff1,"TOSHIBA_MEC_1.0",03)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(7ff1,"TOSHIBA_MEC_1.0",10)':{tag:'(7ff1,"TOSHIBA_MEC_1.0",10)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"TOSHIBA_MEC_CT_1.0",01)':{tag:'(0019,"TOSHIBA_MEC_CT_1.0",01)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"TOSHIBA_MEC_CT_1.0",02)':{tag:'(0019,"TOSHIBA_MEC_CT_1.0",02)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"TOSHIBA_MEC_CT_1.0",03)':{tag:'(0019,"TOSHIBA_MEC_CT_1.0",03)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"TOSHIBA_MEC_CT_1.0",04)':{tag:'(0019,"TOSHIBA_MEC_CT_1.0",04)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"TOSHIBA_MEC_CT_1.0",05)':{tag:'(0019,"TOSHIBA_MEC_CT_1.0",05)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"TOSHIBA_MEC_CT_1.0",06)':{tag:'(0019,"TOSHIBA_MEC_CT_1.0",06)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"TOSHIBA_MEC_CT_1.0",07)':{tag:'(0019,"TOSHIBA_MEC_CT_1.0",07)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"TOSHIBA_MEC_CT_1.0",08)':{tag:'(0019,"TOSHIBA_MEC_CT_1.0",08)',vr:"LT",name:"OrientationHeadFeet",vm:"1",version:"PrivateTag"},'(0019,"TOSHIBA_MEC_CT_1.0",09)':{tag:'(0019,"TOSHIBA_MEC_CT_1.0",09)',vr:"LT",name:"ViewDirection",vm:"1",version:"PrivateTag"},'(0019,"TOSHIBA_MEC_CT_1.0",0a)':{tag:'(0019,"TOSHIBA_MEC_CT_1.0",0a)',vr:"LT",name:"OrientationSupineProne",vm:"1",version:"PrivateTag"},'(0019,"TOSHIBA_MEC_CT_1.0",0b)':{tag:'(0019,"TOSHIBA_MEC_CT_1.0",0b)',vr:"DS",name:"Unknown",vm:"1",version:"PrivateTag"},'(0019,"TOSHIBA_MEC_CT_1.0",0c)':{tag:'(0019,"TOSHIBA_MEC_CT_1.0",0c)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(0019,"TOSHIBA_MEC_CT_1.0",0d)':{tag:'(0019,"TOSHIBA_MEC_CT_1.0",0d)',vr:"TM",name:"Time",vm:"1",version:"PrivateTag"},'(0019,"TOSHIBA_MEC_CT_1.0",0e)':{tag:'(0019,"TOSHIBA_MEC_CT_1.0",0e)',vr:"DS",name:"Unknown",vm:"1",version:"PrivateTag"},'(7ff1,"TOSHIBA_MEC_CT_1.0",01)':{tag:'(7ff1,"TOSHIBA_MEC_CT_1.0",01)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(7ff1,"TOSHIBA_MEC_CT_1.0",02)':{tag:'(7ff1,"TOSHIBA_MEC_CT_1.0",02)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(7ff1,"TOSHIBA_MEC_CT_1.0",03)':{tag:'(7ff1,"TOSHIBA_MEC_CT_1.0",03)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(7ff1,"TOSHIBA_MEC_CT_1.0",04)':{tag:'(7ff1,"TOSHIBA_MEC_CT_1.0",04)',vr:"IS",name:"Unknown",vm:"1",version:"PrivateTag"},'(7ff1,"TOSHIBA_MEC_CT_1.0",05)':{tag:'(7ff1,"TOSHIBA_MEC_CT_1.0",05)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(7ff1,"TOSHIBA_MEC_CT_1.0",07)':{tag:'(7ff1,"TOSHIBA_MEC_CT_1.0",07)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(7ff1,"TOSHIBA_MEC_CT_1.0",08)':{tag:'(7ff1,"TOSHIBA_MEC_CT_1.0",08)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(7ff1,"TOSHIBA_MEC_CT_1.0",09)':{tag:'(7ff1,"TOSHIBA_MEC_CT_1.0",09)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(7ff1,"TOSHIBA_MEC_CT_1.0",0a)':{tag:'(7ff1,"TOSHIBA_MEC_CT_1.0",0a)',vr:"LT",name:"Unknown",vm:"1",version:"PrivateTag"},'(7ff1,"TOSHIBA_MEC_CT_1.0",0b)':{tag:'(7ff1,"TOSHIBA_MEC_CT_1.0",0b)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(7ff1,"TOSHIBA_MEC_CT_1.0",0c)':{tag:'(7ff1,"TOSHIBA_MEC_CT_1.0",0c)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"},'(7ff1,"TOSHIBA_MEC_CT_1.0",0d)':{tag:'(7ff1,"TOSHIBA_MEC_CT_1.0",0d)',vr:"US",name:"Unknown",vm:"1-n",version:"PrivateTag"}},m6={get:function(e,n){return n=="__isProxy"?!0:n in e?e[n]:e[0][n]},set:function(e,n,r){return typeof n=="number"||n in e?e[n]=r:e[0][n]=r,!0}},Xi=function(e,n){if(e.__isProxy)return e;var r=n;if(r===void 0){if(N1(e)!=="object"||Array.isArray(e)&&e.length!==1)return e;r=Array.isArray(e)?e[0]:e}return Array.isArray(e)?(e.length=0,e.push(r),new Proxy(e,m6)):new Proxy([r],m6)},Ea=function(){function t(e){Pt(this,t),this.customDictionary=e,this.customNameMap=t._generateCustomNameMap(e)}return At(t,[{key:"denaturalizeDataset",value:function(n){return t.denaturalizeDataset(n,this.customNameMap)}}],[{key:"punctuateTag",value:function(n){if(n.indexOf(",")!==-1)return n;if(n.length===8&&n===n.match(/[0-9a-fA-F]*/)[0]){var r=n.toUpperCase();return"("+r.substring(0,4)+","+r.substring(4,8)+")"}}},{key:"unpunctuateTag",value:function(n){return n.indexOf(",")===-1?n:n.substring(1,10).replace(",","")}},{key:"parseIntFromTag",value:function(n){var r=parseInt("0x"+t.unpunctuateTag(n));return r}},{key:"tagAsIntegerFromName",value:function(n){var r=t.nameMap[n];if(r!=null)return this.parseIntFromTag(r.tag)}},{key:"cleanDataset",value:function(n){var r={};return Object.keys(n).forEach(function(a){var i=Object.assign({},n[a]);if(i.vr=="SQ"){var o=[];Object.keys(i.Value).forEach(function(s){o.push(t.cleanDataset(i.Value[s]))}),i.Value=o}else i.Value=Object.keys(i.Value).map(function(s){var c=i.Value[s];return c.constructor.name=="String"?c.replace(/\0/,""):c});r[a]=i}),r}},{key:"namifyDataset",value:function(n){var r={};return Object.keys(n).forEach(function(a){var i=Object.assign({},n[a]);if(i.vr=="SQ"){var o=[];Object.keys(i.Value).forEach(function(u){o.push(t.namifyDataset(i.Value[u]))}),i.Value=o}var s=t.punctuateTag(a),c=t.dictionary[s],l=a;c&&(l=c.name),r[l]=i}),r}},{key:"naturalizeDataset",value:function(n){var r=Gr.addTagAccessors({_vrMap:{}});return Object.keys(n).forEach(function(a){var i=n[a],o=t.punctuateTag(a),s=t.dictionary[o],c=a;if(s&&(c=s.name,s.vr=="ox"&&(r._vrMap[c]=i.vr),i.vr!==s.vr&&(r._vrMap[c]=i.vr)),i.Value===void 0)r[c]=null,i.InlineBinary?r[c]={InlineBinary:i.InlineBinary}:i.BulkDataURI&&(r[c]={BulkDataURI:i.BulkDataURI});else{if(i.vr==="SQ"){var l=[];Object.keys(i.Value).forEach(function(f){l.push(t.naturalizeDataset(i.Value[f]))}),r[c]=l}else r[c]=i.Value;if(r[c].length===1){var u=r[c][0];u&&N1(u)==="object"&&!u.length?r[c]=Xi(r[c],u):r[c]=u}}}),r}},{key:"denaturalizeValue",value:function(n){var r=n;if(!Array.isArray(r))r=[r];else{var a=n.some(function(i){return i===void 0});if(a)throw new Error("There are undefined values at the array naturalValue in DicomMetaDictionary.denaturalizeValue")}return r=r.map(function(i){return i.constructor.name=="Number"?String(i):i}),r}},{key:"denaturalizeDataset",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t.nameMap,a={};return Object.keys(n).forEach(function(i){var o=i,s=r[o];if(s){var c=n[i];if(c===void 0)return;var l=n._vrMap&&n._vrMap[i]?n._vrMap[i]:s.vr,u=Gr.addTagAccessors({vr:l});if(u.Value=n[i],c!==null){s.vr=="ox"&&(n._vrMap&&n._vrMap[i]?u.vr=n._vrMap[i]:Ga.error("No value representation given for",i));var f=Gr.createByTypeString(u.vr);if(u.Value=t.denaturalizeValue(u.Value),s.vr=="SQ"){for(var v=[],g=0;g<u.Value.length;g++){var d=u.Value[g];v.push(t.denaturalizeDataset(d,r))}u.Value=v}!f.isBinary()&&f.maxLength&&(u.Value=u.Value.map(function(C){return C.length>f.maxLength?(Ga.warn("Truncating value ".concat(C," of ").concat(i," because it is longer than ").concat(f.maxLength)),C.slice(0,f.maxLength)):C}))}var m=t.unpunctuateTag(s.tag);a[m]=u}else{var h=["_vrMap","_meta"];h.indexOf(o)==-1&&Ga.warn("Unknown name in dataset",o,":",n[o])}}),a}},{key:"uid",value:function(){for(var n="2.25."+Math.floor(1+Math.random()*9),r=0;r<38;r++)n=n+Math.floor(Math.random()*10);return n}},{key:"date",value:function(){var n=new Date;return n.toISOString().replace(/-/g,"").slice(0,8)}},{key:"time",value:function(){var n=new Date;return n.toISOString().replace(/:/g,"").slice(11,17)}},{key:"dateTime",value:function(){var n=new Date;return n.toISOString().replace(/[:\-TZ]/g,"")}},{key:"_generateNameMap",value:function(){t.nameMap={},Object.keys(t.dictionary).forEach(function(n){var r=t.dictionary[n];r.version!="PrivateTag"&&(t.nameMap[r.name]=r)})}},{key:"_generateCustomNameMap",value:function(n){var r={};return Object.keys(n).forEach(function(a){var i=n[a];i.version!="PrivateTag"&&(r[i.name]=i)}),r}},{key:"_generateUIDMap",value:function(){t.sopClassUIDsByName={},Object.keys(t.sopClassNamesByUID).forEach(function(n){var r=t.sopClassNamesByUID[n];t.sopClassUIDsByName[r]=n})}}]),t}();Ea.sopClassNamesByUID={"1.2.840.10008.5.1.4.1.1.20":"NMImage","1.2.840.10008.5.1.4.1.1.2":"CTImage","1.2.840.10008.5.1.4.1.1.2.1":"EnhancedCTImage","1.2.840.10008.5.1.4.1.1.2.2":"LegacyConvertedEnhancedCTImage","1.2.840.10008.5.1.4.1.1.3.1":"USMultiframeImage","1.2.840.10008.5.1.4.1.1.4":"MRImage","1.2.840.10008.5.1.4.1.1.4.1":"EnhancedMRImage","1.2.840.10008.5.1.4.1.1.4.2":"MRSpectroscopy","1.2.840.10008.5.1.4.1.1.4.3":"EnhancedMRColorImage","1.2.840.10008.5.1.4.1.1.4.4":"LegacyConvertedEnhancedMRImage","1.2.840.10008.5.1.4.1.1.6.1":"USImage","1.2.840.10008.5.1.4.1.1.6.2":"EnhancedUSVolume","1.2.840.10008.5.1.4.1.1.7":"SecondaryCaptureImage","1.2.840.10008.5.1.4.1.1.30":"ParametricMapStorage","1.2.840.10008.5.1.4.1.1.66":"RawData","1.2.840.10008.5.1.4.1.1.66.1":"SpatialRegistration","1.2.840.10008.5.1.4.1.1.66.2":"SpatialFiducials","1.2.840.10008.5.1.4.1.1.66.3":"DeformableSpatialRegistration","1.2.840.10008.5.1.4.1.1.66.4":"Segmentation","1.2.840.10008.5.1.4.1.1.67":"RealWorldValueMapping","1.2.840.10008.5.1.4.1.1.88.11":"BasicTextSR","1.2.840.10008.5.1.4.1.1.88.22":"EnhancedSR","1.2.840.10008.5.1.4.1.1.88.33":"ComprehensiveSR","1.2.840.10008.5.1.4.1.1.128":"PETImage","1.2.840.10008.5.1.4.1.1.130":"EnhancedPETImage","1.2.840.10008.5.1.4.1.1.128.1":"LegacyConvertedEnhancedPETImage","1.2.840.10008.5.1.4.1.1.77.1.5.1":"OphthalmicPhotography8BitImage","1.2.840.10008.5.1.4.1.1.77.1.5.4":"OphthalmicTomographyImage"};Ea.dictionary=J8e;Ea._generateNameMap();Ea._generateUIDMap();var ewe={set:function(e,n,r){var a;if(["values","Value"].includes(n)&&e.vr&&Gr.hasValueAccessors(e.vr))a=Gr.createByTypeString(e.vr);else if(n in Ea.nameMap&&Gr.hasValueAccessors(Ea.nameMap[n].vr))a=Gr.createByTypeString(Ea.nameMap[n].vr);else return e[n]=r,!0;return e[n]=a.addValueAccessors(r),!0}};function Ph(t){return t.replace(/\s*$/g,"")}function twe(t,e){return Array.from({length:t.length-(e-1)},function(n,r){return t.slice(r,r+e)})}var Qy,Fm,nwe=["FL","FD","SL","SS","UL","US","AT"],rwe=["OB","OW","OF","SQ","UC","UR","UT","UN","OD"],awe=["SQ","OF","OW","OB","UN"],Gr=function(){function t(e){Pt(this,t),this.type=e,this.multi=!1,this._isBinary=nwe.indexOf(this.type)!=-1,this._allowMultiple=!this._isBinary&&awe.indexOf(this.type)==-1,this._isExplicit=rwe.indexOf(this.type)!=-1,this._storeRaw=!0}return At(t,[{key:"isBinary",value:function(){return this._isBinary}},{key:"allowMultiple",value:function(){return this._allowMultiple}},{key:"isExplicit",value:function(){return this._isExplicit}},{key:"storeRaw",value:function(){return this._storeRaw}},{key:"addValueAccessors",value:function(n){return n}},{key:"dropPadByte",value:function(n){var r,a=(r=this.maxLength)!==null&&r!==void 0?r:this.maxCharLength;if(!Array.isArray(n)||!a||!this.padByte)return n;if(n.length>1){var i=String.fromCharCode(this.padByte),o=n.length-1,s=n[o];s.length%2!==0&&s.endsWith(i)&&(n[o]=s.substring(0,s.length-1))}return n}},{key:"read",value:function(n,r,a){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{forceStoreRaw:!1};if(this.fixed&&this.maxLength){if(!r)return this.defaultValue;this.maxLength!=r&&Ga.error("Invalid length for fixed length tag, vr "+this.type+", length "+this.maxLength+" != "+r)}var o=this.readBytes(n,r,a),s=this.applyFormatting(o);return!this.storeRaw()&&!i.forceStoreRaw&&(o=void 0),{rawValue:o,value:s}}},{key:"applyFormatting",value:function(n){return n}},{key:"readBytes",value:function(n,r){return n.readAsciiString(r)}},{key:"readPaddedAsciiString",value:function(n,r){if(!r)return"";if(n.peekUint8(r-1)!==this.padByte)return n.readAsciiString(r);var a=n.readAsciiString(r-1);return n.increment(1),a}},{key:"readPaddedEncodedString",value:function(n,r){if(!r)return"";var a=n.readEncodedString(r);return a.length&&a[a.length-1]!==String.fromCharCode(this.padByte)?a:a.slice(0,-1)}},{key:"write",value:function(n,r){var a=Array.from(arguments);if(a[2]===null||a[2]===""||a[2]===void 0)return[n.writeAsciiString("")];var i=[],o=a.slice(2),s=n["write"+r];if(Array.isArray(o[0]))if(o[0].length<1)i.push(0);else{var c=this;o[0].forEach(function(l,u){c.allowMultiple()&&u>0&&n.writeUint8(Kc);var f=[l].concat(o.slice(1)),v=s.apply(n,f);i.push(v)})}else i.push(s.apply(n,o));return i}},{key:"writeBytes",value:function(n,r,a){for(var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{allowInvalidVRLength:!1},o=i.allowInvalidVRLength,s=!0,c=Array.isArray(r)?r:[r],l=0,u=0;u<c.length;u++){var f=c[u],v=a[u],g=!1,d=v;if(f===null||o)s=!0;else if(this.checkLength)s=this.checkLength(f);else if(this.maxCharLength){var m=this.maxCharLength;s=f.length<=m,d=f.length,g=!0}else this.maxLength&&(s=v<=this.maxLength);if(!s){var h="Value exceeds max length, vr: "+this.type+", value: "+f+", length: "+d;if(g)Ga.info(h);else throw new Error(h)}l+=v}this.allowMultiple()&&(l+=c.length?c.length-1:0);var C=l;return l&1&&(n.writeUint8(this.padByte),C++),C}}],[{key:"setDicomMessageClass",value:function(n){Qy=n}},{key:"setTagClass",value:function(n){Fm=n}},{key:"addTagAccessors",value:function(n){var r;return!n.__hasTagAccessors&&t.hasValueAccessors(((r=n.vr)===null||r===void 0?void 0:r.type)||n.vr)?(Object.defineProperty(n,"__hasTagAccessors",{value:!0}),new Proxy(n,ewe)):n}},{key:"hasValueAccessors",value:function(n){return n in mf?mf[n].addValueAccessors!==t.prototype.addValueAccessors:n===void 0}},{key:"createByTypeString",value:function(n){var r=mf[n];return r===void 0&&(n=="ox"?(g3.error("Invalid vr type",n,"- using OW"),r=mf.OW):n=="xs"?(g3.error("Invalid vr type",n,"- using US"),r=mf.US):(g3.error("Invalid vr type",n,"- using UN"),r=mf.UN)),r}},{key:"parseUnknownVr",value:function(n){return new xwe(n)}}]),t}(),rl=function(t){Jt(e,t);function e(n){return Pt(this,e),Zt(this,e,[n])}return At(e,[{key:"readBytes",value:function(r,a){return r.readAsciiString(a)}},{key:"writeBytes",value:function(r,a,i){var o=An(yn(e.prototype),"write",this).call(this,r,"AsciiString",a);return An(yn(e.prototype),"writeBytes",this).call(this,r,a,o,i)}}]),e}(Gr),X1=function(t){Jt(e,t);function e(n){return Pt(this,e),Zt(this,e,[n])}return At(e,[{key:"readBytes",value:function(r,a){return r.readEncodedString(a)}},{key:"writeBytes",value:function(r,a,i){var o=An(yn(e.prototype),"write",this).call(this,r,"UTF8String",a);return An(yn(e.prototype),"writeBytes",this).call(this,r,a,o,i)}}]),e}(Gr),rg=function(t){Jt(e,t);function e(n){var r;return Pt(this,e),r=Zt(this,e,[n]),r._storeRaw=!1,r}return At(e,[{key:"writeBytes",value:function(r,a,i,o){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},c,l,u=s.fragmentMultiframe,f=u===void 0?!0:u;if(a=a??[],o){var v=20480,g=a.length,d=[],m=0;for(c=0;c<g;c++){var h=!!(a[c].byteLength&1);m+=a[c].byteLength+(h?1:0);var C=1;f&&(C=Math.ceil(a[c].byteLength/v)),m+=C*8}for(l=new RC(m,r.isLittleEndian),c=0;c<g;c++){var p=!!(a[c].byteLength&1);d.push(l.size);var S=a[c],I=new kl(S),D=1;f&&(D=Math.ceil(I.size/v));for(var E=0,T=0;E<D;E++){var y=E===D-1,M=T+I.size;f&&(M=T+v),y&&(M=I.size);var _=new kl(I.getBuffer(T,M));T=M,l.writeUint16(65534),l.writeUint16(57344);var O=y&&p;l.writeUint32(_.size+(O?1:0)),l.concat(_),O&&l.writeInt8(this.padByte)}}for(r.writeUint16(65534),r.writeUint16(57344),r.writeUint32(d.length*4),c=0;c<d.length;c++)r.writeUint32(d[c]);return r.concat(l),r.writeUint16(65534),r.writeUint16(57565),r.writeUint32(0),4294967295}else{var w=a[0];return l=new kl(w),r.concat(l),An(yn(e.prototype),"writeBytes",this).call(this,r,w,[l.size],s)}}},{key:"readBytes",value:function(r,a){if(a==4294967295){var i=Fm.readTag(r),o=[];if(i.is(4294893568)){var s=r.readUint32(),c=1,l=[];if(s>0){c=s/4;for(var u=0;u++<c;)l.push(r.readUint32())}else l=[];var f=4294893568,v=4294893789,g=function(C){var p=Fm.readTag(C);if(p.is(f)){var S=C.readUint32(),I=C.getBuffer(C.offset,C.offset+S);return C.increment(S),I}else if(p.is(v)){if(C.readUint32()!==0)throw Error("SequenceDelimiterItem tag value was not zero");return null}throw Error("Invalid tag in sequence")};if(l.length>0)l=l.map(function(h){return h+r.offset}),l.push(r.size),o=twe(l,2).map(function(h){for(var C=[],p=Ja(h,2),S=p[0],I=p[1],D=new kl(r.buffer,r.isLittleEndian,{start:S,stop:I,noCopy:r.noCopy}),E=0;!D.end();){var T=g(D);if(T===null)break;C.push(T),E+=T.byteLength}if(r.offset=D.offset,C.length===1)return C[0];if(D.noCopy)return C;var y=new ArrayBuffer(E),M=new Uint8Array(y);return C.reduce(function(_,O){return M.set(new Uint8Array(O),_),_+O.byteLength},0),y});else for(;!r.end();){var d=g(r);if(d===null)break;o.push(d)}}else throw new Error("Item tag not found after undefined binary length");return o}else{var m;return m=r.getBuffer(r.offset,r.offset+a),r.increment(a),[m]}}}]),e}(Gr),iwe=function(t){Jt(e,t);function e(){var n;return Pt(this,e),n=Zt(this,e,["AE"]),n.maxLength=16,n.padByte=ao,n}return At(e,[{key:"readBytes",value:function(r,a){return r.readAsciiString(a)}},{key:"applyFormatting",value:function(r){return r.trim()}}]),e}(rl),owe=function(t){Jt(e,t);function e(){var n;return Pt(this,e),n=Zt(this,e,["CS"]),n.maxLength=16,n.padByte=ao,n}return At(e,[{key:"readBytes",value:function(r,a){var i=String.fromCharCode(Kc);return this.dropPadByte(r.readAsciiString(a).split(i))}},{key:"applyFormatting",value:function(r){var a=function(o){return o.trim()};return Array.isArray(r)?r.map(function(i){return a(i)}):a(r)}}]),e}(rl),swe=function(t){Jt(e,t);function e(){var n;return Pt(this,e),n=Zt(this,e,["AS"]),n.maxLength=4,n.padByte=ao,n.fixed=!0,n.defaultValue="",n}return At(e)}(rl),cwe=function(t){Jt(e,t);function e(){var n;return Pt(this,e),n=Zt(this,e,["AT"]),n.maxLength=4,n.valueLength=4,n.padByte=Wo,n.fixed=!0,n}return At(e,[{key:"readBytes",value:function(r){return Fm.readTag(r).value}},{key:"writeBytes",value:function(r,a,i){return An(yn(e.prototype),"writeBytes",this).call(this,r,a,An(yn(e.prototype),"write",this).call(this,r,"TwoUint16s",a),i)}}]),e}(Gr),lwe=function(t){Jt(e,t);function e(n){var r;return Pt(this,e),r=Zt(this,e,["DA",n]),r.maxLength=8,r.padByte=ao,r.defaultValue="",r}return At(e)}(rl),yz=function(t){Jt(e,t);function e(){return Pt(this,e),Zt(this,e,arguments)}return At(e,[{key:"readBytes",value:function(r,a){var i=String.fromCharCode(Kc),o=r.readAsciiString(a);return this.dropPadByte(o.split(i))}}]),e}(rl),uwe=function(t){Jt(e,t);function e(){var n;return Pt(this,e),n=Zt(this,e,["DS"]),n.maxLength=16,n.padByte=ao,n}return At(e,[{key:"applyFormatting",value:function(r){var a=function(o){var s=o.trim().replace(/[^0-9.\\\-+e]/gi,"");return s===""?null:Number(s)};return Array.isArray(r)?r.map(a):a(r)}},{key:"convertToString",value:function(r){if(r===null)return"";if(typeof r=="string")return r;var a=String(r);if(a.length>this.maxLength){var i=r<0?1:0,o=Math.log10(Math.abs(r)),s=o<-4||o>=14-i;if(s){var c=r.toExponential(16-i);return c.length<=16?c:r.toExponential(16-(c.length-16)-i)}else{var l=r.toFixed(16-i);return l.length<=16?l:r.toFixed(16-i-(l.length-16))}}return a}},{key:"writeBytes",value:function(r,a,i){var o=this,s=Array.isArray(a)?a.map(function(c){return o.convertToString(c)}):[this.convertToString(a)];return An(yn(e.prototype),"writeBytes",this).call(this,r,s,i)}}]),e}(yz),fwe=function(t){Jt(e,t);function e(){var n;return Pt(this,e),n=Zt(this,e,["DT"]),n.maxLength=26,n.padByte=ao,n}return At(e)}(rl),vwe=function(t){Jt(e,t);function e(){var n;return Pt(this,e),n=Zt(this,e,["FL"]),n.maxLength=4,n.padByte=Wo,n.fixed=!0,n.defaultValue=0,n}return At(e,[{key:"readBytes",value:function(r){return r.readFloat()}},{key:"applyFormatting",value:function(r){return Number(r)}},{key:"writeBytes",value:function(r,a,i){return An(yn(e.prototype),"writeBytes",this).call(this,r,a,An(yn(e.prototype),"write",this).call(this,r,"Float",a),i)}}]),e}(Gr),gwe=function(t){Jt(e,t);function e(){var n;return Pt(this,e),n=Zt(this,e,["FD"]),n.maxLength=8,n.padByte=Wo,n.fixed=!0,n.defaultValue=0,n}return At(e,[{key:"readBytes",value:function(r){return r.readDouble()}},{key:"applyFormatting",value:function(r){return Number(r)}},{key:"writeBytes",value:function(r,a,i){return An(yn(e.prototype),"writeBytes",this).call(this,r,a,An(yn(e.prototype),"write",this).call(this,r,"Double",a),i)}}]),e}(Gr),dwe=function(t){Jt(e,t);function e(){var n;return Pt(this,e),n=Zt(this,e,["IS"]),n.maxLength=12,n.padByte=ao,n}return At(e,[{key:"applyFormatting",value:function(r){var a=function(o){var s=o.trim().replace(/[^0-9.\\\-+e]/gi,"");return s===""?null:Number(s)};return Array.isArray(r)?r.map(a):a(r)}},{key:"convertToString",value:function(r){return typeof r=="string"?r:r===null?"":String(r)}},{key:"writeBytes",value:function(r,a,i){var o=this,s=Array.isArray(a)?a.map(function(c){return o.convertToString(c)}):[this.convertToString(a)];return An(yn(e.prototype),"writeBytes",this).call(this,r,s,i)}}]),e}(yz),mwe=function(t){Jt(e,t);function e(){var n;return Pt(this,e),n=Zt(this,e,["LO"]),n.maxCharLength=64,n.padByte=ao,n}return At(e,[{key:"readBytes",value:function(r,a){return r.readEncodedString(a)}},{key:"applyFormatting",value:function(r){return r.trim()}}]),e}(X1),hwe=function(t){Jt(e,t);function e(){var n;return Pt(this,e),n=Zt(this,e,["LT"]),n.maxCharLength=10240,n.padByte=ao,n}return At(e,[{key:"readBytes",value:function(r,a){return r.readEncodedString(a)}},{key:"applyFormatting",value:function(r){return Ph(r)}}]),e}(X1),pwe=function(t){Jt(e,t);function e(){var n;return Pt(this,e),n=Zt(this,e,["PN"]),n.maxLength=null,n.padByte=ao,n}return At(e,[{key:"addValueAccessors",value:function(r){if(typeof r=="string"&&(r=new String(r)),r!=null){if(N1(r)==="object")return w3.pnAddValueAccessors(r);throw new Error("Cannot add accessors to non-string primitives")}return r}},{key:"checkLength",value:function(r){if(Array.isArray(r)){var a=OA(r),i;try{for(a.s();!(i=a.n()).done;){var o=i.value,s=Object.keys(o).forEach(function(g){return r[g]});if(!e.checkComponentLengths(s))return!1}}catch(g){a.e(g)}finally{a.f()}}else if(typeof r=="string"||r instanceof String){var c=r.split(String.fromCharCode(Kc)),l=OA(c),u;try{for(l.s();!(u=l.n()).done;){var f=u.value,v=f.split(String.fromCharCode(B4));if(!e.checkComponentLengths(v))return!1}}catch(g){l.e(g)}finally{l.f()}}return!0}},{key:"readBytes",value:function(r,a){return this.readPaddedEncodedString(r,a).split(String.fromCharCode(Kc))}},{key:"applyFormatting",value:function(r){var a=function(o){return w3.pnConvertToJsonObject(o,!1)};return Array.isArray(r)?r.map(function(i){return a(i)}):a(r)}},{key:"writeBytes",value:function(r,a,i){return An(yn(e.prototype),"writeBytes",this).call(this,r,w3.pnObjectToString(a),i)}}],[{key:"checkComponentLengths",value:function(r){for(var a in r){var i=r[a];if(i.length>64)return!1}return!0}}]),e}(X1),Swe=function(t){Jt(e,t);function e(){var n;return Pt(this,e),n=Zt(this,e,["SH"]),n.maxCharLength=16,n.padByte=ao,n}return At(e,[{key:"readBytes",value:function(r,a){return r.readEncodedString(a)}},{key:"applyFormatting",value:function(r){return r.trim()}}]),e}(X1),Cwe=function(t){Jt(e,t);function e(){var n;return Pt(this,e),n=Zt(this,e,["SL"]),n.maxLength=4,n.padByte=Wo,n.fixed=!0,n.defaultValue=0,n}return At(e,[{key:"readBytes",value:function(r){return r.readInt32()}},{key:"writeBytes",value:function(r,a,i){return An(yn(e.prototype),"writeBytes",this).call(this,r,a,An(yn(e.prototype),"write",this).call(this,r,"Int32",a),i)}}]),e}(Gr),Iwe=function(t){Jt(e,t);function e(){var n;return Pt(this,e),n=Zt(this,e,["SQ"]),n.maxLength=null,n.padByte=Wo,n.noMultiple=!0,n._storeRaw=!1,n}return At(e,[{key:"readBytes",value:function(r,a,i){if(a==0)return[];for(var o=a==4294967295,s=[],c=0;;){var l=Fm.readTag(r),u=null;if(c+=4,l.is(4294893789)){r.readUint32();break}else{if(!o&&c==a)break;if(l.is(4294893568)){u=r.readUint32(),c+=4;var f=null,v=0,g=u==4294967295;if(g)for(var d=0;;){var m=r.readUint16();if(m==65534){var h=r.readUint16(),C=r.readUint32();if(r.increment(-4),h==57357)if(C===0)if(d--,d<0){r.increment(4),c+=8;break}else v+=4;else v+=2;else h==57344?(v+=4,C==4294967295&&d++):(v+=2,r.increment(-2))}else v+=2}else v=u;if(v){r.increment(g?-v-8:0),f=r.more(v),c+=v,g&&r.increment(8);var p=Qy._read(f,i);s.push(p)}if(!o&&c==a)break}}}return s}},{key:"writeBytes",value:function(r,a,i,o){var s=0;if(a)for(var c=0;c<a.length;c++){var l=a[c];An(yn(e.prototype),"write",this).call(this,r,"Uint16",65534),An(yn(e.prototype),"write",this).call(this,r,"Uint16",57344),An(yn(e.prototype),"write",this).call(this,r,"Uint32",4294967295),s+=Qy.write(l,r,i,o),An(yn(e.prototype),"write",this).call(this,r,"Uint16",65534),An(yn(e.prototype),"write",this).call(this,r,"Uint16",57357),An(yn(e.prototype),"write",this).call(this,r,"Uint32",0),s+=16}return An(yn(e.prototype),"write",this).call(this,r,"Uint16",65534),An(yn(e.prototype),"write",this).call(this,r,"Uint16",57565),An(yn(e.prototype),"write",this).call(this,r,"Uint32",0),s+=8,An(yn(e.prototype),"writeBytes",this).call(this,r,a,[s],o)}}]),e}(Gr),Dwe=function(t){Jt(e,t);function e(){var n;return Pt(this,e),n=Zt(this,e,["SS"]),n.maxLength=2,n.valueLength=2,n.padByte=Wo,n.fixed=!0,n.defaultValue=0,n}return At(e,[{key:"readBytes",value:function(r){return r.readInt16()}},{key:"writeBytes",value:function(r,a,i){return An(yn(e.prototype),"writeBytes",this).call(this,r,a,An(yn(e.prototype),"write",this).call(this,r,"Int16",a),i)}}]),e}(Gr),Ewe=function(t){Jt(e,t);function e(){var n;return Pt(this,e),n=Zt(this,e,["ST"]),n.maxCharLength=1024,n.padByte=ao,n}return At(e,[{key:"readBytes",value:function(r,a){return r.readEncodedString(a)}},{key:"applyFormatting",value:function(r){return Ph(r)}}]),e}(X1),Twe=function(t){Jt(e,t);function e(){var n;return Pt(this,e),n=Zt(this,e,["TM"]),n.maxLength=14,n.padByte=ao,n}return At(e,[{key:"readBytes",value:function(r,a){return r.readAsciiString(a)}},{key:"applyFormatting",value:function(r){return Ph(r)}}]),e}(rl),ywe=function(t){Jt(e,t);function e(){var n;return Pt(this,e),n=Zt(this,e,["UC"]),n.maxLength=null,n.multi=!0,n.padByte=ao,n}return At(e,[{key:"readBytes",value:function(r,a){return r.readEncodedString(a)}},{key:"applyFormatting",value:function(r){return Ph(r)}}]),e}(X1),Mwe=function(t){Jt(e,t);function e(){var n;return Pt(this,e),n=Zt(this,e,["UT"]),n.maxLength=null,n.padByte=ao,n}return At(e,[{key:"readBytes",value:function(r,a){return r.readEncodedString(a)}},{key:"applyFormatting",value:function(r){return Ph(r)}}]),e}(X1),_we=function(t){Jt(e,t);function e(){var n;return Pt(this,e),n=Zt(this,e,["US"]),n.maxLength=2,n.padByte=Wo,n.fixed=!0,n.defaultValue=0,n}return At(e,[{key:"readBytes",value:function(r){return r.readUint16()}},{key:"writeBytes",value:function(r,a,i){return An(yn(e.prototype),"writeBytes",this).call(this,r,a,An(yn(e.prototype),"write",this).call(this,r,"Uint16",a),i)}}]),e}(Gr),Owe=function(t){Jt(e,t);function e(){var n;return Pt(this,e),n=Zt(this,e,["UL"]),n.maxLength=4,n.padByte=Wo,n.fixed=!0,n.defaultValue=0,n}return At(e,[{key:"readBytes",value:function(r){return r.readUint32()}},{key:"writeBytes",value:function(r,a,i){return An(yn(e.prototype),"writeBytes",this).call(this,r,a,An(yn(e.prototype),"write",this).call(this,r,"Uint32",a),i)}}]),e}(Gr),wwe=function(t){Jt(e,t);function e(){var n;return Pt(this,e),n=Zt(this,e,["UI"]),n.maxLength=64,n.padByte=Wo,n}return At(e,[{key:"readBytes",value:function(r,a){var i=this.readPaddedAsciiString(r,a),o=String.fromCharCode(Kc);return i.indexOf(o)===-1?i:this.dropPadByte(i.split(o))}},{key:"applyFormatting",value:function(r){var a=function(o){return o.replace(/[^0-9.]/g,"")};return Array.isArray(r)?r.map(a):a(r)}}]),e}(rl),Pwe=function(t){Jt(e,t);function e(){var n;return Pt(this,e),n=Zt(this,e,["UR"]),n.maxLength=null,n.padByte=ao,n}return At(e,[{key:"readBytes",value:function(r,a){return r.readAsciiString(a)}}]),e}(rl),Awe=function(t){Jt(e,t);function e(){var n;return Pt(this,e),n=Zt(this,e,["UN"]),n.maxLength=null,n.padByte=Wo,n.noMultiple=!0,n}return At(e)}(rg),xwe=function(t){Jt(e,t);function e(n){var r;return Pt(this,e),r=Zt(this,e,[n]),r.maxLength=null,r.padByte=0,r.noMultiple=!0,r._isBinary=!0,r._allowMultiple=!1,r._isExplicit=!0,r._storeRaw=!0,r}return At(e,[{key:"read",value:function(r,a,i,o){var s=this.readBytes(r,a,i)[0],c=new kl(s,!0),l=Gr.createByTypeString(this.type);if(l.isBinary()&&a>l.maxLength&&!l.noMultiple){for(var u=[],f=[],v=a/l.maxLength,g=0;g++<v;){var d=l.read(c,l.maxLength,i,o),m=d.rawValue,h=d.value;f.push(m),u.push(h)}return{rawValue:f,value:u}}else return l.read(c,a,i,o)}}]),e}(rg),Rwe=function(t){Jt(e,t);function e(){var n;return Pt(this,e),n=Zt(this,e,["OW"]),n.maxLength=null,n.padByte=Wo,n.noMultiple=!0,n}return At(e)}(rg),bwe=function(t){Jt(e,t);function e(){var n;return Pt(this,e),n=Zt(this,e,["OB"]),n.maxLength=null,n.padByte=Wo,n.noMultiple=!0,n}return At(e)}(rg),Nwe=function(t){Jt(e,t);function e(){var n;return Pt(this,e),n=Zt(this,e,["OD"]),n.maxLength=null,n.padByte=Wo,n.noMultiple=!0,n}return At(e)}(rg),Lwe=function(t){Jt(e,t);function e(){var n;return Pt(this,e),n=Zt(this,e,["OF"]),n.maxLength=null,n.padByte=Wo,n.noMultiple=!0,n}return At(e)}(rg),mf={AE:new iwe,AS:new swe,AT:new cwe,CS:new owe,DA:new lwe,DS:new uwe,DT:new fwe,FL:new vwe,FD:new gwe,IS:new dwe,LO:new mwe,LT:new hwe,OB:new bwe,OD:new Nwe,OF:new Lwe,OW:new Rwe,PN:new pwe,SH:new Swe,SL:new Cwe,SQ:new Iwe,SS:new Dwe,ST:new Ewe,TM:new Twe,UC:new ywe,UI:new wwe,UL:new Owe,UN:new Awe,UR:new Pwe,US:new _we,UT:new Mwe},h6="1.2.840.10008.1.2.1",u2,Mz=function(){function t(e){Pt(this,t),this.meta=e,this.dict={}}return At(t,[{key:"upsertTag",value:function(n,r,a){this.dict[n]?this.dict[n].Value=a:(this.dict[n]=Gr.addTagAccessors({vr:r}),this.dict[n].Value=a)}},{key:"write",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{allowInvalidVRLength:!1},r=h6,a=new RC(4096,!0);a.writeUint8Repeat(0,128),a.writeAsciiString("DICM");var i=new RC(1024);this.meta["00020010"]||(this.meta["00020010"]={vr:"UI",Value:[h6]}),u2.write(this.meta,i,r,n),u2.writeTagObject(a,"00020000","UL",i.size,r,n),a.concat(i);var o=this.meta["00020010"].Value[0];return u2.write(this.dict,a,o,n),a.getBuffer()}}],[{key:"setDicomMessageClass",value:function(n){u2=n}}]),t}();function f2(t,e){return String(t+e).slice(-t.length)}var P3,bd=function(){function t(e){Pt(this,t),this.value=e}return At(t,[{key:"toString",value:function(){return"("+f2("0000",this.group().toString(16).toUpperCase())+","+f2("0000",this.element().toString(16).toUpperCase())+")"}},{key:"toCleanString",value:function(){return f2("0000",this.group().toString(16).toUpperCase())+f2("0000",this.element().toString(16).toUpperCase())}},{key:"is",value:function(n){return this.value==n}},{key:"group",value:function(){return this.value>>>16}},{key:"element",value:function(){return this.value&65535}},{key:"isPixelDataTag",value:function(){return this.is(2145386512)}},{key:"isPrivateCreator",value:function(){var n=this.group(),r=this.element();return n%2===1&&r<256&&r>0}},{key:"write",value:function(n,r,a,i,o){var s=Gr.createByTypeString(r),c=P3._normalizeSyntax(i),l=c==Rd,u=c==Rd||c==ed,f=this.isPixelDataTag()&&P3.isEncapsulated(i),v=n.isLittleEndian;n.setEndian(u),n.writeUint16(this.group()),n.writeUint16(this.element());var g=new RC(256),d;g.setEndian(u),r=="OW"||r=="OB"||r=="UN"?d=s.writeBytes(g,a,c,f,o):r=="SQ"?d=s.writeBytes(g,a,c,o):d=s.writeBytes(g,a,o),r=="SQ"&&(d=4294967295);var m=g.size+4;return l?(n.writeUint32(d),m+=4):s.isExplicit()?(n.writeAsciiString(s.type),n.writeUint16(0),n.writeUint32(d),m+=8):(n.writeAsciiString(s.type),n.writeUint16(d),m+=4),n.concat(g),n.setEndian(v),m}}],[{key:"setDicomMessageClass",value:function(n){P3=n}},{key:"fromString",value:function(n){var r=parseInt(n.substring(0,4),16),a=parseInt(n.substring(4),16);return t.fromNumbers(r,a)}},{key:"fromPString",value:function(n){var r=parseInt(n.substring(1,5),16),a=parseInt(n.substring(6,10),16);return t.fromNumbers(r,a)}},{key:"fromNumbers",value:function(n,r){return new t((n<<16|r)>>>0)}},{key:"readTag",value:function(n){var r=n.readUint16(),a=n.readUint16();return t.fromNumbers(r,a)}}]),t}();function _z(t,e){if(Object.is(t,e))return!0;if(N1(t)!=="object"||N1(e)!=="object"||t===null||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(var a=0,i=n;a<i.length;a++){var o=i[a];if(!r.includes(o)||!_z(t[o],e[o]))return!1}return!0}var Uwe=["SQ","OF","OW","OB","UN","LT"],p6={"":"iso-8859-1","iso-ir-6":"iso-8859-1","iso-ir-13":"shift-jis","iso-ir-100":"latin1","iso-ir-101":"iso-8859-2","iso-ir-109":"iso-8859-3","iso-ir-110":"iso-8859-4","iso-ir-126":"iso-ir-126","iso-ir-127":"iso-ir-127","iso-ir-138":"iso-ir-138","iso-ir-144":"iso-ir-144","iso-ir-148":"iso-ir-148","iso-ir-166":"tis-620","iso-2022-ir-6":"iso-8859-1","iso-2022-ir-13":"shift-jis","iso-2022-ir-87":"iso-2022-jp","iso-2022-ir-100":"latin1","iso-2022-ir-101":"iso-8859-2","iso-2022-ir-109":"iso-8859-3","iso-2022-ir-110":"iso-8859-4","iso-2022-ir-126":"iso-ir-126","iso-2022-ir-127":"iso-ir-127","iso-2022-ir-138":"iso-ir-138","iso-2022-ir-144":"iso-ir-144","iso-2022-ir-148":"iso-ir-148","iso-2022-ir-149":"euc-kr","iso-2022-ir-159":"iso-2022-jp","iso-2022-ir-166":"tis-620","iso-2022-ir-58":"iso-ir-58","iso-ir-192":"utf-8",gb18030:"gb18030","iso-2022-gbk":"gbk","iso-2022-58":"gb2312",gbk:"gbk"},Fwe=["1.2.840.10008.1.2.4.50","1.2.840.10008.1.2.4.51","1.2.840.10008.1.2.4.57","1.2.840.10008.1.2.4.70","1.2.840.10008.1.2.4.80","1.2.840.10008.1.2.4.81","1.2.840.10008.1.2.4.90","1.2.840.10008.1.2.4.91","1.2.840.10008.1.2.4.92","1.2.840.10008.1.2.4.93","1.2.840.10008.1.2.4.94","1.2.840.10008.1.2.4.95","1.2.840.10008.1.2.5","1.2.840.10008.1.2.6.1","1.2.840.10008.1.2.4.100","1.2.840.10008.1.2.4.102","1.2.840.10008.1.2.4.103","1.2.840.10008.1.2.4.201","1.2.840.10008.1.2.4.202","1.2.840.10008.1.2.4.203"],W4=function(){function t(){Pt(this,t)}return At(t,null,[{key:"read",value:function(n,r,a){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;return Ga.warn("DicomMessage.read to be deprecated after dcmjs 0.24.x"),this._read(n,r,{ignoreErrors:a,untilTag:i,includeUntilTagValue:o})}},{key:"readTag",value:function(n,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return Ga.warn("DicomMessage.readTag to be deprecated after dcmjs 0.24.x"),this._readTag(n,r,{untilTag:a,includeUntilTagValue:i})}},{key:"_read",value:function(n,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{ignoreErrors:!1,untilTag:null,includeUntilTagValue:!1},i=a.ignoreErrors,o=a.untilTag,s={};try{for(;!n.end();){var c=t._readTag(n,r,a),l=c.tag.toCleanString();if(l==="00080005"){if(c.values.length>0){var u=c.values[0];if(u=u.replace(/[_ ]/g,"-").toLowerCase(),u in p6)u=p6[u],n.setDecoder(new TextDecoder(u));else if(i)Ga.warn("Unsupported character set: ".concat(u,", using default character set"));else throw Error("Unsupported character set: ".concat(u))}if(c.values.length>1)if(i)Ga.warn("Using multiple character sets is not supported, proceeding with just the first character set",c.values);else throw Error("Using multiple character sets is not supported: ".concat(c.values));c.values=["ISO_IR 192"]}if(s[l]=Gr.addTagAccessors({vr:c.vr.type}),s[l].Value=c.values,s[l]._rawValue=c.rawValues,o&&o===l)break}return s}catch(f){if(i)return Ga.warn("WARN:",f),s;throw f}}},{key:"_normalizeSyntax",value:function(n){return n==Rd||n==ed||n==Y8e?n:ed}},{key:"isEncapsulated",value:function(n){return Fwe.indexOf(n)!=-1}},{key:"readFile",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ignoreErrors:!1,untilTag:null,includeUntilTagValue:!1,noCopy:!1,forceStoreRaw:!1},a=new kl(n,null,{noCopy:r.noCopy}),i=ed;if(a.reset(),a.increment(128),a.readAsciiString(4)!=="DICM")throw new Error("Invalid DICOM file, expected header is missing");var o=t._readTag(a,i);if(o.tag.toCleanString()!=="00020000")throw new Error("Invalid DICOM file, meta length tag is malformed or not present.");var s=o.values[0],c=a.more(s),l=t._read(c,i,r),u=l["00020010"].Value[0];u===X8e&&(a=new K8e(a,{noCopy:r.noCopy})),u=t._normalizeSyntax(u);var f=t._read(a,u,r),v=new Mz(l);return v.dict=f,v}},{key:"writeTagObject",value:function(n,r,a,i,o,s){var c=bd.fromString(r);c.write(n,a,i,o,s)}},{key:"write",value:function(n,r,a,i){var o=0,s=Object.keys(n).sort();return s.forEach(function(c){var l=bd.fromString(c),u=n[c],f=u.vr,v=t._getTagWriteValues(f,u);o+=l.write(r,f,v,a,i)}),o}},{key:"_getTagWriteValues",value:function(n,r){if(!r._rawValue)return r.Value;var a=Gr.createByTypeString(n),i=r._rawValue.map(function(o){return a.applyFormatting(o)});return _z(r.Value,i)?r._rawValue:r.Value}},{key:"_readTag",value:function(n,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{untilTag:null,includeUntilTagValue:!1},i=a.untilTag,o=a.includeUntilTagValue,s=r==Rd,c=r==Rd||r==ed,l=n.isLittleEndian;n.setEndian(c);var u=bd.readTag(n);if(i===u.toCleanString()&&i!==null&&!o)return{tag:u,vr:0,values:0};var f=null,v=null,g;if(s){f=n.readUint32();var d=t.lookupTag(u);d?g=d.vr:f==4294967295?g="SQ":u.isPixelDataTag()?g="OW":g=="xs"?g="US":u.isPrivateCreator()?g="LO":g="UN",v=Gr.createByTypeString(g)}else g=n.readVR(),g==="UN"&&t.lookupTag(u)&&t.lookupTag(u).vr?(g=t.lookupTag(u).vr,v=Gr.parseUnknownVr(g)):v=Gr.createByTypeString(g),v.isExplicit()?(n.increment(2),f=n.readUint32()):f=n.readUint16();var m=[],h=[];if(v.isBinary()&&f>v.maxLength&&!v.noMultiple)for(var C=f/v.maxLength,p=0;p++<C;){var S=v.read(n,v.maxLength,r,a),I=S.rawValue,D=S.value;h.push(I),m.push(D)}else{var E=v.read(n,f,r,a),T=E.rawValue,y=E.value;if(!v.isBinary()&&Uwe.indexOf(v.type)==-1){if(h=T,m=y,typeof y=="string"){var M=String.fromCharCode(Kc);h=v.dropPadByte(T.split(M)),m=v.dropPadByte(y.split(M))}}else v.type=="SQ"||v.type=="OW"||v.type=="OB"?(h=T,m=y):(Array.isArray(y)?m=y:m.push(y),Array.isArray(T)?h=T:h.push(T))}n.setEndian(l);var _=Gr.addTagAccessors({tag:u,vr:v});return _.values=m,_.rawValues=h,_}},{key:"lookupTag",value:function(n){return Ea.dictionary[n.toString()]}}]),t}(),iS=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Pt(this,t),this.options=JSON.parse(JSON.stringify(n));var r=this.options;r.Manufacturer=n.Manufacturer||"Unspecified",r.ManufacturerModelName=n.ManufacturerModelName||"Unspecified",r.SeriesDescription=n.SeriesDescription||"Research Derived series",r.SeriesNumber=n.SeriesNumber||"99",r.SoftwareVersions=n.SoftwareVersions||"0",r.DeviceSerialNumber=n.DeviceSerialNumber||"1";var a=Ea.date(),i=Ea.time();r.SeriesDate=n.SeriesDate||a,r.SeriesTime=n.SeriesTime||i,r.ContentDate=n.ContentDate||a,r.ContentTime=n.ContentTime||i,r.SOPInstanceUID=n.SOPInstanceUID||Ea.uid(),r.SeriesInstanceUID=n.SeriesInstanceUID||Ea.uid(),r.ClinicalTrialTimePointID=n.ClinicalTrialTimePointID||"",r.ClinicalTrialCoordinatingCenterName=n.ClinicalTrialCoordinatingCenterName||"",r.ClinicalTrialSeriesID=n.ClinicalTrialSeriesID||"",r.ImageComments=n.ImageComments||"NOT FOR CLINICAL USE",r.ContentQualification="RESEARCH",this.referencedDatasets=e,this.referencedDataset=this.referencedDatasets[0],this.dataset={_vrMap:this.referencedDataset._vrMap,_meta:this.referencedDataset._meta},this.derive()}return At(t,[{key:"assignToDataset",value:function(n){var r=this;Object.keys(n).forEach(function(a){return r.dataset[a]=n[a]})}},{key:"assignFromReference",value:function(n){var r=this;n.forEach(function(a){return r.dataset[a]=r.referencedDataset[a]||""})}},{key:"assignFromOptions",value:function(n){var r=this;n.forEach(function(a){return r.dataset[a]=r.options[a]||""})}},{key:"derive",value:function(){this.assignFromReference(["AccessionNumber","ReferringPhysicianName","StudyDate","StudyID","StudyTime","PatientName","PatientID","PatientBirthDate","PatientSex","PatientAge","StudyInstanceUID","StudyID"]),this.assignFromOptions(["Manufacturer","SoftwareVersions","DeviceSerialNumber","ManufacturerModelName","SeriesDescription","SeriesNumber","ImageComments","SeriesDate","SeriesTime","ContentDate","ContentTime","ContentQualification","SOPInstanceUID","SeriesInstanceUID"])}}],[{key:"copyDataset",value:function(n){return JSON.parse(JSON.stringify(n))}}]),t}(),Vwe=function(t){Jt(e,t);function e(n){var r,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Pt(this,e),r=Zt(this,e,[n,a]);var i=r.options;return i.ContentLabel=a.ContentLabel||"",i.ContentDescription=a.ContentDescription||"",i.ContentCreatorName=a.ContentCreatorName||"",r}return At(e,[{key:"derive",value:function(){An(yn(e.prototype),"derive",this).call(this),this.assignToDataset({ImageType:["DERIVED","PRIMARY"],LossyImageCompression:"00",InstanceNumber:"1"}),this.assignFromReference(["SOPClassUID","Modality","FrameOfReferenceUID","PositionReferenceIndicator","NumberOfFrames","Rows","Columns","SamplesPerPixel","PhotometricInterpretation","BitsStored","HighBit"]),this.assignFromOptions(["ContentLabel","ContentDescription","ContentCreatorName"]),this.referencedDataset.SharedFunctionalGroupsSequence&&(this.dataset.SharedFunctionalGroupsSequence=iS.copyDataset(this.referencedDataset.SharedFunctionalGroupsSequence)),this.referencedDataset.PerFrameFunctionalGroupsSequence&&(this.dataset.PerFrameFunctionalGroupsSequence=iS.copyDataset(this.referencedDataset.PerFrameFunctionalGroupsSequence)),this.dataset.PixelData=new ArrayBuffer(this.referencedDataset.PixelData.byteLength)}}]),e}(iS),kwe=function(t){Jt(e,t);function e(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Pt(this,e),Zt(this,e,[n,r])}return At(e,[{key:"derive",value:function(){An(yn(e.prototype),"derive",this).call(this),this.assignFromReference(["WindowCenter","WindowWidth","BitsAllocated","PixelRepresentation","BodyPartExamined","Laterality","PatientPosition","RescaleSlope","RescaleIntercept","PixelPresentation","VolumetricProperties","VolumeBasedCalculationTechnique","PresentationLUTShape"])}}]),e}(Vwe),Tv=function(){function t(e){Pt(this,t),this.datasets=e,this.dataset=void 0}return At(t,[{key:"normalize",value:function(){return"No normalization defined"}}],[{key:"consistentSOPClassUIDs",value:function(n){var r;return n.forEach(function(a){if(a.SOPClassUID&&(r||(r=a.SOPClassUID),a.SOPClassUID!==r)){Ga.error("inconsistent sopClassUIDs: ",a.SOPClassUID,r);return}}),r}},{key:"normalizerForSOPClassUID",value:function(n){n=n.replace(/[^0-9.]/g,"");var r=Ea.sopClassUIDsByName,a={};return a[r.NMImage]=Wwe,a[r.CTImage]=Hwe,a[r.ParametricMapStorage]=zwe,a[r.MRImage]=Gwe,a[r.EnhancedCTImage]=S6,a[r.LegacyConvertedEnhancedCTImage]=S6,a[r.EnhancedMRImage]=C6,a[r.LegacyConvertedEnhancedMRImage]=C6,a[r.EnhancedUSVolume]=Bwe,a[r.PETImage]=A3,a[r.EnhancedPETImage]=A3,a[r.LegacyConvertedEnhancedPETImage]=A3,a[r.Segmentation]=$we,a[r.DeformableSpatialRegistration]=qwe,a[r.OphthalmicPhotography8BitImage]=jwe,a[r.OphthalmicTomographyImage]=Qwe,a[n]}},{key:"isMultiframeSOPClassUID",value:function(n){var r=Ea.sopClassUIDsByName,a=[r.NMImage,r.EnhancedMRImage,r.LegacyConvertedEnhancedMRImage,r.EnhancedCTImage,r.LegacyConvertedEnhancedCTImage,r.EnhancedUSVolume,r.EnhancedPETImage,r.LegacyConvertedEnhancedPETImage,r.Segmentation,r.ParametricMapStorage,r.OphthalmicTomographyImage];return a.indexOf(n)!==-1}},{key:"isMultiframeDataset",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.dataset,r=n.SOPClassUID.replace(/[^0-9.]/g,"");return t.isMultiframeSOPClassUID(r)}},{key:"normalizeToDataset",value:function(n){var r=t.consistentSOPClassUIDs(n),a=t.normalizerForSOPClassUID(r);if(!a){Ga.error("no normalizerClass for ",r);return}var i=new a(n);return i.normalize(),i.dataset}}]),t}(),ic=function(t){Jt(e,t);function e(){return Pt(this,e),Zt(this,e,arguments)}return At(e,[{key:"normalize",value:function(){this.convertToMultiframe(),this.normalizeMultiframe()}},{key:"convertToMultiframe",value:function(){if(this.datasets.length===1&&Tv.isMultiframeDataset(this.datasets[0])){this.dataset=this.datasets[0];return}this.derivation=new kwe(this.datasets),this.dataset=this.derivation.dataset;var r=this.dataset,a=this.datasets[0];r.NumberOfFrames=this.datasets.length,r.SOPClassUID=a.SOPClassUID,r.Rows=a.Rows,r.Columns=a.Columns,r.BitsAllocated=a.BitsAllocated,r.PixelRepresentation=a.PixelRepresentation,r.RescaleSlope=a.RescaleSlope||"1",r.RescaleIntercept=a.RescaleIntercept||"0";var i=a.ImagePositionPatient,o=a.ImageOrientationPatient.slice(0,3),s=a.ImageOrientationPatient.slice(3,6),c=e.vec3CrossProduct(o,s),l=[];this.datasets.forEach(function(p){var S=p.ImagePositionPatient.slice(),I=e.vec3Subtract(S,i),D=e.vec3Dot(I,c);l.push([D,p])}),l.sort(function(p,S){return S[0]-p[0]}),r.BitsAllocated!==16&&Ga.error("Only works with 16 bit data, not "+String(this.dataset.BitsAllocated)),a._vrMap&&!a._vrMap.PixelData?(Ga.warn("No vr map given for pixel data, using OW"),r._vrMap={PixelData:"OW"}):r._vrMap={PixelData:a._vrMap.PixelData};var u=a.PixelData.byteLength;r.PixelData=new ArrayBuffer(r.NumberOfFrames*u);var f=0;l.forEach(function(p){var S=p[1],I=new Uint16Array(S.PixelData),D=new Uint16Array(r.PixelData,f*u,u/2);try{D.set(I)}catch(T){if(T instanceof RangeError){var E=`Error inserting pixels in PixelData
`+"frameSize ".concat(u,`
`)+"NumberOfFrames ".concat(r.NumberOfFrames,`
`)+"pair ".concat(p,`
`)+"dataset PixelData size ".concat(S.PixelData.length);Ga.error(E)}}f++}),r.NumberOfFrames<2&&Ga.error("Cannot populate shared groups uniquely without multiple frames");var v=Ja(l[0],2),g=v[0],d=v[1],m=l[1][0],h=Math.abs(m-g);r.SharedFunctionalGroupsSequence={PlaneOrientationSequence:{ImageOrientationPatient:d.ImageOrientationPatient},PixelMeasuresSequence:{PixelSpacing:d.PixelSpacing,SpacingBetweenSlices:h,SliceThickness:h}},r.ReferencedSeriesSequence={SeriesInstanceUID:d.SeriesInstanceUID,ReferencedInstanceSequence:[]},r.PerFrameFunctionalGroupsSequence=[],l.forEach(function(p){var S=p[1];r.PerFrameFunctionalGroupsSequence.push({PlanePositionSequence:{ImagePositionPatient:S.ImagePositionPatient},FrameVOILUTSequence:{WindowCenter:S.WindowCenter,WindowWidth:S.WindowWidth}}),r.ReferencedSeriesSequence.ReferencedInstanceSequence.push({ReferencedSOPClassUID:S.SOPClassUID,ReferencedSOPInstanceUID:S.SOPInstanceUID})});var C=Ea.uid();this.dataset.DimensionOrganizationSequence={DimensionOrganizationUID:C},this.dataset.DimensionIndexSequence=[{DimensionOrganizationUID:C,DimensionIndexPointer:2097202,FunctionalGroupPointer:2134291,DimensionDescriptionLabel:"ImagePositionPatient"}]}},{key:"normalizeMultiframe",value:function(){var r=this.dataset;if(!r.NumberOfFrames){Ga.error("Missing number or frames not supported");return}r.PixelRepresentation||(r.PixelRepresentation=1),(!r.StudyID||r.StudyID==="")&&(r.StudyID="No Study ID");var a=["R","L"];a.indexOf(r.Laterality)===-1&&delete r.Laterality,r.PresentationLUTShape||(r.PresentationLUTShape="IDENTITY"),r.SharedFunctionalGroupsSequence||Ga.error("Can only process multiframe data with SharedFunctionalGroupsSequence"),r.BodyPartExamined==="PROSTATE"&&(r.SharedFunctionalGroupsSequence.FrameAnatomySequence={AnatomicRegionSequence:{CodeValue:"T-9200B",CodingSchemeDesignator:"SRT",CodeMeaning:"Prostate"},FrameLaterality:"U"});var i=r.RescaleIntercept||0,o=r.RescaleSlope||1;r.SharedFunctionalGroupsSequence.PixelValueTransformationSequence={RescaleIntercept:i,RescaleSlope:o,RescaleType:"US"};var s=1;if(this.datasets.forEach(function(l){r.NumberOfFrames===1&&(r.PerFrameFunctionalGroupsSequence=[r.PerFrameFunctionalGroupsSequence]),r.PerFrameFunctionalGroupsSequence[s-1].FrameContentSequence={FrameAcquisitionDuration:0,StackID:1,InStackPositionNumber:s,DimensionIndexValues:s};var u=l.AcquisitionDate+l.AcquisitionTime;if(!isNaN(u)){var f=r.PerFrameFunctionalGroupsSequence[s-1].FrameContentSequence;f.FrameAcquisitionDateTime=u,f.FrameReferenceDateTime=u}s++}),r.WindowCenter&&r.WindowWidth&&(Array.isArray(r.WindowCenter)||(r.WindowCenter=[r.WindowCenter]),Array.isArray(r.WindowWidth)||(r.WindowWidth=[r.WindowWidth])),(!r.WindowCenter||!r.WindowWidth)&&(r.WindowCenter=[],r.WindowWidth=[],r.PerFrameFunctionalGroupsSequence)){var c={center:0,width:0,count:0};r.PerFrameFunctionalGroupsSequence.forEach(function(l){if(l.FrameVOILUT){var u=l.FrameVOILUTSequence.WindowCenter,f=l.FrameVOILUTSequence.WindowWidth;l.FrameVOILUTSequence&&u&&f&&(Array.isArray(u)&&(u=u[0]),Array.isArray(f)&&(f=f[0]),c.center+=Number(u),c.width+=Number(f),c.count++)}}),c.count>0&&(r.WindowCenter.push(String(c.center/c.count)),r.WindowWidth.push(String(c.width/c.count)))}r.WindowCenter.length===0&&(r.WindowCenter=[300]),r.WindowWidth.length===0&&(r.WindowWidth=[500])}}],[{key:"vec3CrossProduct",value:function(r,a){var i=r[0],o=r[1],s=r[2],c=a[0],l=a[1],u=a[2],f=[];return f[0]=o*u-s*l,f[1]=s*c-i*u,f[2]=i*l-o*c,f}},{key:"vec3Subtract",value:function(r,a){var i=[];return i[0]=r[0]-a[0],i[1]=r[1]-a[1],i[2]=r[2]-a[2],i}},{key:"vec3Dot",value:function(r,a){return r[0]*a[0]+r[1]*a[1]+r[2]*a[2]}}]),e}(Tv),Gwe=function(t){Jt(e,t);function e(){return Pt(this,e),Zt(this,e,arguments)}return At(e,[{key:"normalize",value:function(){An(yn(e.prototype),"normalize",this).call(this),this.dataset.SOPClassUID="LegacyConvertedEnhancedMRImage"}},{key:"normalizeMultiframe",value:function(){An(yn(e.prototype),"normalizeMultiframe",this).call(this);var r=this.dataset;(!r.ImageType||!r.ImageType.constructor||r.ImageType.constructor.name!="Array"||r.ImageType.length!=4)&&(r.ImageType=["ORIGINAL","PRIMARY","OTHER","NONE"]),r.SharedFunctionalGroupsSequence.MRImageFrameTypeSequence={FrameType:r.ImageType,PixelPresentation:"MONOCHROME",VolumetricProperties:"VOLUME",VolumeBasedCalculationTechnique:"NONE",ComplexImageComponent:"MAGNITUDE",AcquisitionContrast:"UNKNOWN"}}}]),e}(ic),S6=function(t){Jt(e,t);function e(){return Pt(this,e),Zt(this,e,arguments)}return At(e,[{key:"normalize",value:function(){An(yn(e.prototype),"normalize",this).call(this)}}]),e}(ic),C6=function(t){Jt(e,t);function e(){return Pt(this,e),Zt(this,e,arguments)}return At(e,[{key:"normalize",value:function(){An(yn(e.prototype),"normalize",this).call(this)}}]),e}(ic),Bwe=function(t){Jt(e,t);function e(){return Pt(this,e),Zt(this,e,arguments)}return At(e,[{key:"normalize",value:function(){An(yn(e.prototype),"normalize",this).call(this)}}]),e}(ic),Wwe=function(t){Jt(e,t);function e(){return Pt(this,e),Zt(this,e,arguments)}return At(e,[{key:"normalize",value:function(){An(yn(e.prototype),"normalize",this).call(this);var r=Ea.sopClassUIDsByName;this.dataset.SOPClassUID=r.NMImage}}]),e}(ic),Hwe=function(t){Jt(e,t);function e(){return Pt(this,e),Zt(this,e,arguments)}return At(e,[{key:"normalize",value:function(){An(yn(e.prototype),"normalize",this).call(this);var r=Ea.sopClassUIDsByName;this.dataset.SOPClassUID=r.EnhancedCTImage}}]),e}(ic),A3=function(t){Jt(e,t);function e(){return Pt(this,e),Zt(this,e,arguments)}return At(e,[{key:"normalize",value:function(){An(yn(e.prototype),"normalize",this).call(this);var r=Ea.sopClassUIDsByName;this.dataset.SOPClassUID=r.EnhancedPETImage}}]),e}(ic),$we=function(t){Jt(e,t);function e(){return Pt(this,e),Zt(this,e,arguments)}return At(e,[{key:"normalize",value:function(){An(yn(e.prototype),"normalize",this).call(this)}}]),e}(ic),zwe=function(t){Jt(e,t);function e(){return Pt(this,e),Zt(this,e,arguments)}return At(e,[{key:"normalize",value:function(){An(yn(e.prototype),"normalize",this).call(this);var r=this.datasets[0];r.BitsAllocated!==32&&Ga.error("Only works with 32 bit data, not "+String(r.BitsAllocated))}}]),e}(ic),qwe=function(t){Jt(e,t);function e(){return Pt(this,e),Zt(this,e,arguments)}return At(e,[{key:"normalize",value:function(){this.dataset=this.datasets[0]}}]),e}(Tv),jwe=function(t){Jt(e,t);function e(){return Pt(this,e),Zt(this,e,arguments)}return At(e,[{key:"normalize",value:function(){this.dataset=this.datasets[0]}}]),e}(Tv),Qwe=function(t){Jt(e,t);function e(){return Pt(this,e),Zt(this,e,arguments)}return At(e,[{key:"normalize",value:function(){An(yn(e.prototype),"normalize",this).call(this)}}]),e}(ic),H4=function(t){Jt(e,t);function e(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Pt(this,e),Zt(this,e,[n,r])}return At(e,[{key:"derive",value:function(){An(yn(e.prototype),"derive",this).call(this),this.assignToDataset({SOPClassUID:Ea.sopClassUIDsByName.EnhancedSR,Modality:"SR",ValueType:"CONTAINER"}),this.assignFromReference([])}}]),e}(iS),$4=function(){function t(e){Pt(this,t),this.TIDIncludeGroups=e;var n=[],r=[];this.ImageLibraryContentSequence=n,this.CurrentRequestedProcedureEvidenceSequence=r,this.PersonObserverName={RelationshipType:"HAS OBS CONTEXT",ValueType:"PNAME",ConceptNameCodeSequence:{CodeValue:"121008",CodingSchemeDesignator:"DCM",CodeMeaning:"Person Observer Name"},PersonName:"unknown^unknown"},this.tid1500={ConceptNameCodeSequence:{CodeValue:"126000",CodingSchemeDesignator:"DCM",CodeMeaning:"Imaging Measurement Report"},ContinuityOfContent:"SEPARATE",PerformedProcedureCodeSequence:[],CompletionFlag:"COMPLETE",VerificationFlag:"UNVERIFIED",ReferencedPerformedProcedureStepSequence:[],InstanceNumber:1,CurrentRequestedProcedureEvidenceSequence:r,CodingSchemeIdentificationSequence:{CodingSchemeDesignator:"99dcmjs",CodingSchemeName:"Codes used for dcmjs",CodingSchemeVersion:"0",CodingSchemeResponsibleOrganization:"https://github.com/dcmjs-org/dcmjs"},ContentTemplateSequence:{MappingResource:"DCMR",TemplateIdentifier:"1500"},ContentSequence:[{RelationshipType:"HAS CONCEPT MOD",ValueType:"CODE",ConceptNameCodeSequence:Xi({CodeValue:"121049",CodingSchemeDesignator:"DCM",CodeMeaning:"Language of Content Item and Descendants"}),ConceptCodeSequence:Xi({CodeValue:"eng",CodingSchemeDesignator:"RFC5646",CodeMeaning:"English"}),ContentSequence:Xi({RelationshipType:"HAS CONCEPT MOD",ValueType:"CODE",ConceptNameCodeSequence:Xi({CodeValue:"121046",CodingSchemeDesignator:"DCM",CodeMeaning:"Country of Language"}),ConceptCodeSequence:Xi({CodeValue:"US",CodingSchemeDesignator:"ISO3166_1",CodeMeaning:"United States"})})},this.PersonObserverName,{RelationshipType:"HAS CONCEPT MOD",ValueType:"CODE",ConceptNameCodeSequence:Xi({CodeValue:"121058",CodingSchemeDesignator:"DCM",CodeMeaning:"Procedure reported"}),ConceptCodeSequence:Xi({CodeValue:"1",CodingSchemeDesignator:"99dcmjs",CodeMeaning:"Unknown procedure"})},{RelationshipType:"CONTAINS",ValueType:"CONTAINER",ConceptNameCodeSequence:{CodeValue:"111028",CodingSchemeDesignator:"DCM",CodeMeaning:"Image Library"},ContinuityOfContent:"SEPARATE",ContentSequence:{RelationshipType:"CONTAINS",ValueType:"CONTAINER",ConceptNameCodeSequence:{CodeValue:"126200",CodingSchemeDesignator:"DCM",CodeMeaning:"Image Library Group"},ContinuityOfContent:"SEPARATE",ContentSequence:n}}]}}return At(t,[{key:"validate",value:function(){}},{key:"contentItem",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};r.PersonName&&(this.PersonObserverName.PersonName=r.PersonName);var a=Array.isArray(n)?n:[n];return this.addTID1501MeasurementGroups(a,r),this.tid1500}},{key:"addTID1501MeasurementGroups",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=this.CurrentRequestedProcedureEvidenceSequence,i=this.ImageLibraryContentSequence,o=r.sopInstanceUIDsToSeriesInstanceUIDMap;if(n.length>1&&o===void 0)throw new Error("addTID1501MeasurementGroups provided with ".concat(n.length," derivationSourceDatasets, with no sopInstanceUIDsToSeriesInstanceUIDMap in options."));var s=this.TIDIncludeGroups.TID1501MeasurementGroups;if(s){var c=[];s.forEach(function(f){c=c.concat(f.contentItem())});var l=[];s.forEach(function(f){f.TID300Measurements.forEach(function(v){var g=v.ReferencedSOPSequence.ReferencedSOPInstanceUID;if(!l.includes(g)){i.push({RelationshipType:"CONTAINS",ValueType:"IMAGE",ReferencedSOPSequence:v.ReferencedSOPSequence});var d;if(n.length===1)d=n[0];else{var m=o[g];d=n.find(function(h){return h.SeriesInstanceUID===m})}a.push({StudyInstanceUID:d.StudyInstanceUID,ReferencedSeriesSequence:{SeriesInstanceUID:d.SeriesInstanceUID,ReferencedSOPSequence:v.ReferencedSOPSequence}}),l.push(g)}})});var u={RelationshipType:"CONTAINS",ValueType:"CONTAINER",ConceptNameCodeSequence:{CodeValue:"126010",CodingSchemeDesignator:"DCM",CodeMeaning:"Imaging Measurements"},ContinuityOfContent:"SEPARATE",ContentSequence:c};this.tid1500.ContentSequence.push(u)}}}]),t}(),z4=function(){function t(e){Pt(this,t),this.TID300Measurements=e}return At(t,[{key:"contentItem",value:function(){var n=this,r=this.TID300Measurements,a=[];return r.forEach(function(i){a.push(n.getMeasurementGroup(i.contentItem()))}),a}},{key:"getMeasurementGroup",value:function(n){return{RelationshipType:"CONTAINS",ValueType:"CONTAINER",ConceptNameCodeSequence:{CodeValue:"125007",CodingSchemeDesignator:"DCM",CodeMeaning:"Measurement Group"},ContinuityOfContent:"SEPARATE",ContentSequence:ns(n)}}}]),t}(),xa=function(e){return Array.isArray(e)?e:[e]},yv=function(e){return function(n){return n.ConceptNameCodeSequence.CodeMeaning===e}},Kwe=function(e){return function(n){return n&&n.GraphicType===e}},Xwe={CodingSchemeDesignator:"DCM",CodeValue:"121071"},Ywe={CodingSchemeDesignator:"SCT",CodeValue:"363698007"},Zwe={CodingSchemeDesignator:"SRT",CodeValue:"G-C0E3"},I6=function(e,n,r){var a=e.ConceptNameCodeSequence;if(a){var i=a.CodingSchemeDesignator,o=a.CodeValue;return i==n.CodingSchemeDesignator&&o==n.CodeValue||r&&i==r.CodingSchemeDesignator&&o==r.CodeValue}};function Jwe(t,e,n,r){var a=r.getTID300RepresentationArguments(t);a.ReferencedSOPSequence=n;var i=new r.TID300Representation(a);return i}function e9e(t,e,n){var r=e[t],a=ei.CORNERSTONE_TOOL_CLASSES_BY_TOOL_TYPE[t];if(!(!r||!r.data||!r.data.length||!a)){var i=r.data.map(function(o){return Jwe(o,t,n,a)});return new z4(i)}}var ei=function(){function t(){Pt(this,t)}return At(t,null,[{key:"getSetupMeasurementData",value:function(n){var r=n.ContentSequence,a=xa(r),i=a.find(function(d){return I6(d,Xwe)}),o=a.filter(function(d){return I6(d,Ywe,Zwe)})||[],s=a.find(function(d){return d.ValueType==="NUM"}),c=xa(s.ContentSequence).find(function(d){return d.ValueType==="SCOORD"}),l=c.ContentSequence.ReferencedSOPSequence,u=l.ReferencedSOPInstanceUID,f=l.ReferencedFrameNumber,v={sopInstanceUid:u,frameIndex:f||1,complete:!0,finding:i?Xi(i.ConceptCodeSequence):void 0,findingSites:o.map(function(d){return Xi(d.ConceptCodeSequence)})};v.finding&&(v.description=v.finding.CodeMeaning);var g=v.findingSites&&v.findingSites[0];return g&&(v.location=g[0]&&g[0].CodeMeaning||g.CodeMeaning),{defaultState:v,findingGroup:i,findingSiteGroups:o,NUMGroup:s,SCOORDGroup:c,ReferencedSOPSequence:l,ReferencedSOPInstanceUID:u,ReferencedFrameNumber:f}}},{key:"generateReport",value:function(n,r,a){var i=[],o=Object.keys(n)[0];if(!o)throw new Error("No measurements provided.");var s=r.get("generalSeriesModule",o),c=s.studyInstanceUID,l=s.seriesInstanceUID;Object.keys(n).forEach(function(C){var p=r.get("sopCommonModule",C),S=r.get("frameNumber",C),I=n[C],D=Object.keys(I),E={ReferencedSOPClassUID:p.sopClassUID,ReferencedSOPInstanceUID:p.sopInstanceUID};Tv.isMultiframeSOPClassUID(p.sopClassUID)&&(E.ReferencedFrameNumber=S);var T=[];D.forEach(function(y){var M=e9e(y,I,E);M&&T.push(M)}),i=i.concat(T)});var u=new $4({TID1501MeasurementGroups:i},a),f=new Uint8Array(2);f[1]=1;var v={StudyInstanceUID:c,SeriesInstanceUID:l},g={FileMetaInformationVersion:{Value:[f.buffer],vr:"OB"},TransferSyntaxUID:{Value:["1.2.840.10008.1.2.1"],vr:"UI"},ImplementationClassUID:{Value:[Ea.uid()],vr:"UI"},ImplementationVersionName:{Value:["dcmjs"],vr:"SH"}},d={PixelData:"OW"};v._meta=g,v._vrMap=d;var m=new H4([v]),h=u.contentItem(v);return m.dataset=Object.assign(m.dataset,h),m.dataset._meta=g,m}},{key:"generateToolState",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(n.ContentTemplateSequence.TemplateIdentifier!=="1500")throw new Error("This package can currently only interpret DICOM SR TID 1500");var a="Imaging Measurements",i="Measurement Group",o="Tracking Identifier",s=xa(n.ContentSequence).find(yv(a)),c=xa(s.ContentSequence).filter(yv(i)),l={},u=t.CORNERSTONE_TOOL_CLASSES_BY_UTILITY_TYPE,f=[];return Object.keys(u).forEach(function(v){f.push(u[v]),l[v]=[]}),c.forEach(function(v){var g=xa(v.ContentSequence),d=g.find(function(p){return p.ConceptNameCodeSequence.CodeMeaning===o}),m=d.TextValue,h=r.getToolClass?r.getToolClass(v,n,f):f.find(function(p){return p.isValidCornerstoneTrackingIdentifier(m)});if(h){var C=h.getMeasurementData(v);console.log("=== ".concat(h.toolType," ===")),console.log(C),l[h.toolType].push(C)}}),l}},{key:"registerTool",value:function(n){t.CORNERSTONE_TOOL_CLASSES_BY_UTILITY_TYPE[n.utilityToolType]=n,t.CORNERSTONE_TOOL_CLASSES_BY_TOOL_TYPE[n.toolType]=n,t.MEASUREMENT_BY_TOOLTYPE[n.toolType]=n.utilityToolType}}]),t}();ei.MEASUREMENT_BY_TOOLTYPE={};ei.CORNERSTONE_TOOL_CLASSES_BY_UTILITY_TYPE={};ei.CORNERSTONE_TOOL_CLASSES_BY_TOOL_TYPE={};var Su=function(){function t(e){Pt(this,t),this.ReferencedSOPSequence=e.ReferencedSOPSequence,this.props=e}return At(t,[{key:"getMeasurement",value:function(n){return[].concat(ns(this.getTrackingGroups()),ns(this.getFindingGroup()),ns(this.getFindingSiteGroups()),ns(n))}},{key:"getTrackingGroups",value:function(){var n=this.props.trackingIdentifierTextValue;return[{RelationshipType:"HAS OBS CONTEXT",ValueType:"TEXT",ConceptNameCodeSequence:{CodeValue:"112039",CodingSchemeDesignator:"DCM",CodeMeaning:"Tracking Identifier"},TextValue:n||"web annotation"},{RelationshipType:"HAS OBS CONTEXT",ValueType:"UIDREF",ConceptNameCodeSequence:{CodeValue:"112040",CodingSchemeDesignator:"DCM",CodeMeaning:"Tracking Unique Identifier"},UID:Ea.uid()}]}},{key:"getFindingGroup",value:function(){var n=this.props.finding;if(!n)return[];var r=n.CodeValue,a=n.CodingSchemeDesignator,i=n.CodeMeaning;return[{RelationshipType:"CONTAINS",ValueType:"CODE",ConceptNameCodeSequence:Xi({CodeValue:"121071",CodingSchemeDesignator:"DCM",CodeMeaning:"Finding"}),ConceptCodeSequence:Xi({CodeValue:r,CodingSchemeDesignator:a,CodeMeaning:i})}]}},{key:"getFindingSiteGroups",value:function(){var n=this.props.findingSites||[];return n.map(function(r){var a=r.CodeValue,i=r.CodingSchemeDesignator,o=r.CodeMeaning;return{RelationshipType:"CONTAINS",ValueType:"CODE",ConceptNameCodeSequence:Xi({CodeValue:"363698007",CodingSchemeDesignator:"SCT",CodeMeaning:"Finding Site"}),ConceptCodeSequence:Xi({CodeValue:a,CodingSchemeDesignator:i,CodeMeaning:o})}})}}]),t}(),Oz={CodeValue:"mm",CodingSchemeDesignator:"UCUM",CodingSchemeVersion:"1.4",CodeMeaning:"millimeter"},D6={CodeValue:"mm2",CodingSchemeDesignator:"UCUM",CodingSchemeVersion:"1.4",CodeMeaning:"SquareMilliMeter"},q4={CodeValue:"1",CodingSchemeDesignator:"UCUM",CodingSchemeVersion:"1.4",CodeMeaning:"px"},t9e=q4,Ky={px:q4,mm:Oz,mm2:D6,"mm":D6,"px":t9e},u0=function(e){if(!e)return q4;var n=e.indexOf(" "),r=n===-1?e:e.substring(0,n),a=Ky[e]||Ky[r];return a||(Ga.error("Unspecified units",e),Oz)};u0.measurementMap=Ky;var wz=function(t){Jt(e,t);function e(){return Pt(this,e),Zt(this,e,arguments)}return At(e,[{key:"contentItem",value:function(){var r=this.props,a=r.point1,i=r.point2,o=r.unit,s=o===void 0?"mm":o,c=r.distance,l=r.ReferencedSOPSequence;return this.getMeasurement([{RelationshipType:"CONTAINS",ValueType:"NUM",ConceptNameCodeSequence:{CodeValue:"G-D7FE",CodingSchemeDesignator:"SRT",CodeMeaning:"Length"},MeasuredValueSequence:{MeasurementUnitsCodeSequence:u0(s),NumericValue:c},ContentSequence:{RelationshipType:"INFERRED FROM",ValueType:"SCOORD",GraphicType:"POLYLINE",GraphicData:[a.x,a.y,i.x,i.y],ContentSequence:{RelationshipType:"SELECTED FROM",ValueType:"IMAGE",ReferencedSOPSequence:l}}}])}}]),e}(Su),al="cornerstoneTools@^4.0.0",j4="Length",Ah=function(){function t(){Pt(this,t)}return At(t,null,[{key:"getMeasurementData",value:function(n){var r=ei.getSetupMeasurementData(n),a=r.defaultState,i=r.NUMGroup,o=r.SCOORDGroup,s=Aa(Aa({},a),{},{length:i.MeasuredValueSequence.NumericValue,toolType:t.toolType,handles:{start:{},end:{},textBox:{hasMoved:!1,movesIndependently:!1,drawnIndependently:!0,allowedOutsideImage:!0,hasBoundingBox:!0}}}),c=Ja(o.GraphicData,4);return s.handles.start.x=c[0],s.handles.start.y=c[1],s.handles.end.x=c[2],s.handles.end.y=c[3],s}},{key:"getTID300RepresentationArguments",value:function(n){var r=n.handles,a=n.finding,i=n.findingSites,o=r.start,s=r.end,c=n.length,l="cornerstoneTools@^4.0.0:Length";return{point1:o,point2:s,distance:c,trackingIdentifierTextValue:l,finding:a,findingSites:i||[]}}}]),t}();Ah.toolType=j4;Ah.utilityToolType=j4;Ah.TID300Representation=wz;Ah.isValidCornerstoneTrackingIdentifier=function(t){if(!t.includes(":"))return!1;var e=t.split(":"),n=Ja(e,2),r=n[0],a=n[1];return r!==al?!1:a===j4};ei.registerTool(Ah);function n9e(t){var e=[];return t.forEach(function(n){e.push(n[0]||n.x),e.push(n[1]||n.y),(n[2]!==void 0||n.z!==void 0)&&e.push(n[2]||n.z)}),e}var vD=function(t){Jt(e,t);function e(){return Pt(this,e),Zt(this,e,arguments)}return At(e,[{key:"contentItem",value:function(){var r=this.props,a=r.points,i=r.area,o=r.areaUnit,s=o===void 0?"mm2":o,c=r.ReferencedSOPSequence,l=r.use3DSpatialCoordinates,u=l===void 0?!1:l,f=r.perimeter,v=r.unit,g=v===void 0?"mm":v,d=n9e(a);return this.getMeasurement([{RelationshipType:"CONTAINS",ValueType:"NUM",ConceptNameCodeSequence:{CodeValue:"131191004",CodingSchemeDesignator:"SCT",CodeMeaning:"Perimeter"},MeasuredValueSequence:{MeasurementUnitsCodeSequence:u0(g),NumericValue:f},ContentSequence:{RelationshipType:"INFERRED FROM",ValueType:u?"SCOORD3D":"SCOORD",GraphicType:"POLYLINE",GraphicData:d,ContentSequence:u?void 0:{RelationshipType:"SELECTED FROM",ValueType:"IMAGE",ReferencedSOPSequence:c}}},{RelationshipType:"CONTAINS",ValueType:"NUM",ConceptNameCodeSequence:{CodeValue:"G-A166",CodingSchemeDesignator:"SRT",CodeMeaning:"Area"},MeasuredValueSequence:{MeasurementUnitsCodeSequence:u0(s),NumericValue:i},ContentSequence:{RelationshipType:"INFERRED FROM",ValueType:u?"SCOORD3D":"SCOORD",GraphicType:"POLYLINE",GraphicData:d,ContentSequence:u?void 0:{RelationshipType:"SELECTED FROM",ValueType:"IMAGE",ReferencedSOPSequence:c}}}])}}]),e}(Su),Mv=function(){function t(){Pt(this,t)}return At(t,null,[{key:"getMeasurementData",value:function(n){for(var r=ei.getSetupMeasurementData(n),a=r.defaultState,i=r.SCOORDGroup,o=r.NUMGroup,s=Aa(Aa({},a),{},{toolType:t.toolType,handles:{points:[],textBox:{active:!1,hasMoved:!1,movesIndependently:!1,drawnIndependently:!0,allowedOutsideImage:!0,hasBoundingBox:!0}},cachedStats:{area:o?o.MeasuredValueSequence.NumericValue:0},color:void 0,invalidated:!0}),c=i.GraphicData,l=0;l<c.length;l+=2)s.handles.points.push({x:c[l],y:c[l+1]});return s}},{key:"getTID300RepresentationArguments",value:function(n){var r=n.handles,a=n.finding,i=n.findingSites,o=n.cachedStats,s=o===void 0?{}:o,c=r.points,l=s.area,u=l===void 0?0:l,f=s.perimeter,v=f===void 0?0:f,g="cornerstoneTools@^4.0.0:FreehandRoi";return{points:c,area:u,perimeter:v,trackingIdentifierTextValue:g,finding:a,findingSites:i||[]}}}]),t}();Mv.toolType="FreehandRoi";Mv.utilityToolType="FreehandRoi";Mv.TID300Representation=vD;Mv.isValidCornerstoneTrackingIdentifier=function(t){if(!t.includes(":"))return!1;var e=t.split(":"),n=Ja(e,2),r=n[0],a=n[1];return r!==al?!1:a===Mv.toolType};ei.registerTool(Mv);var Pz=function(t){Jt(e,t);function e(){return Pt(this,e),Zt(this,e,arguments)}return At(e,[{key:"contentItem",value:function(){var r=this.props,a=r.longAxis,i=r.shortAxis,o=r.longAxisLength,s=r.shortAxisLength,c=r.unit,l=r.ReferencedSOPSequence;return this.getMeasurement([{RelationshipType:"CONTAINS",ValueType:"NUM",ConceptNameCodeSequence:{CodeValue:"G-A185",CodingSchemeDesignator:"SRT",CodeMeaning:"Long Axis"},MeasuredValueSequence:{MeasurementUnitsCodeSequence:u0(c),NumericValue:o},ContentSequence:{RelationshipType:"INFERRED FROM",ValueType:"SCOORD",GraphicType:"POLYLINE",GraphicData:[a.point1.x,a.point1.y,a.point2.x,a.point2.y],ContentSequence:{RelationshipType:"SELECTED FROM",ValueType:"IMAGE",ReferencedSOPSequence:l}}},{RelationshipType:"CONTAINS",ValueType:"NUM",ConceptNameCodeSequence:{CodeValue:"G-A186",CodingSchemeDesignator:"SRT",CodeMeaning:"Short Axis"},MeasuredValueSequence:{MeasurementUnitsCodeSequence:u0(c),NumericValue:s},ContentSequence:{RelationshipType:"INFERRED FROM",ValueType:"SCOORD",GraphicType:"POLYLINE",GraphicData:[i.point1.x,i.point1.y,i.point2.x,i.point2.y],ContentSequence:{RelationshipType:"SELECTED FROM",ValueType:"IMAGE",ReferencedSOPSequence:l}}}])}}]),e}(Su),Q4="Bidirectional",r9e="Long Axis",a9e="Short Axis",i9e="121071",o9e="G-C0E3",xh=function(){function t(){Pt(this,t)}return At(t,null,[{key:"getMeasurementData",value:function(n){var r=n.ContentSequence,a=xa(r).find(function(C){return C.ConceptNameCodeSequence.CodeValue===i9e}),i=xa(r).filter(function(C){return C.ConceptNameCodeSequence.CodeValue===o9e}),o=xa(r).find(function(C){return C.ConceptNameCodeSequence.CodeMeaning===r9e}),s=xa(o.ContentSequence).find(function(C){return C.ValueType==="SCOORD"}),c=xa(r).find(function(C){return C.ConceptNameCodeSequence.CodeMeaning===a9e}),l=xa(c.ContentSequence).find(function(C){return C.ValueType==="SCOORD"}),u=s.ContentSequence.ReferencedSOPSequence,f=u.ReferencedSOPInstanceUID,v=u.ReferencedFrameNumber,g=String(o.MeasuredValueSequence.NumericValue),d=String(c.MeasuredValueSequence.NumericValue),m={x:Math.max(s.GraphicData[0],s.GraphicData[2],l.GraphicData[0],l.GraphicData[2]),y:Math.max(s.GraphicData[1],s.GraphicData[3],l.GraphicData[1],l.GraphicData[3])},h={sopInstanceUid:f,frameIndex:v||1,toolType:t.toolType,active:!1,handles:{start:{x:s.GraphicData[0],y:s.GraphicData[1],drawnIndependently:!1,allowedOutsideImage:!1,active:!1,highlight:!1,index:0},end:{x:s.GraphicData[2],y:s.GraphicData[3],drawnIndependently:!1,allowedOutsideImage:!1,active:!1,highlight:!1,index:1},perpendicularStart:{x:l.GraphicData[0],y:l.GraphicData[1],drawnIndependently:!1,allowedOutsideImage:!1,active:!1,highlight:!1,index:2},perpendicularEnd:{x:l.GraphicData[2],y:l.GraphicData[3],drawnIndependently:!1,allowedOutsideImage:!1,active:!1,highlight:!1,index:3},textBox:{highlight:!1,hasMoved:!0,active:!1,movesIndependently:!1,drawnIndependently:!0,allowedOutsideImage:!0,hasBoundingBox:!0,x:m.x+10,y:m.y+10}},invalidated:!1,isCreating:!1,longestDiameter:g,shortestDiameter:d,toolName:"Bidirectional",visible:!0,finding:a?a.ConceptCodeSequence:void 0,findingSites:i.map(function(C){return C.ConceptCodeSequence})};return h}},{key:"getTID300RepresentationArguments",value:function(n){var r=n.handles,a=r.start,i=r.end,o=r.perpendicularStart,s=r.perpendicularEnd,c=n.shortestDiameter,l=n.longestDiameter,u=n.finding,f=n.findingSites,v="cornerstoneTools@^4.0.0:Bidirectional";return{longAxis:{point1:a,point2:i},shortAxis:{point1:o,point2:s},longAxisLength:l,shortAxisLength:c,trackingIdentifierTextValue:v,finding:u,findingSites:f||[]}}}]),t}();xh.toolType=Q4;xh.utilityToolType=Q4;xh.TID300Representation=Pz;xh.isValidCornerstoneTrackingIdentifier=function(t){if(!t.includes(":"))return!1;var e=t.split(":"),n=Ja(e,2),r=n[0],a=n[1];return r!==al?!1:a===Q4};ei.registerTool(xh);function s9e(t){var e=[];return t.forEach(function(n){e.push(n.x),e.push(n.y)}),e}var K4=function(t){Jt(e,t);function e(){return Pt(this,e),Zt(this,e,arguments)}return At(e,[{key:"contentItem",value:function(){var r=this.props,a=r.points,i=r.ReferencedSOPSequence,o=r.area,s=r.areaUnit,c=s9e(a);return this.getMeasurement([{RelationshipType:"CONTAINS",ValueType:"NUM",ConceptNameCodeSequence:{CodeValue:"G-D7FE",CodingSchemeDesignator:"SRT",CodeMeaning:"AREA"},MeasuredValueSequence:{MeasurementUnitsCodeSequence:u0(s),NumericValue:o},ContentSequence:{RelationshipType:"INFERRED FROM",ValueType:"SCOORD",GraphicType:"ELLIPSE",GraphicData:c,ContentSequence:{RelationshipType:"SELECTED FROM",ValueType:"IMAGE",ReferencedSOPSequence:i}}}])}}]),e}(Su),X4="EllipticalRoi",Rh=function(){function t(){Pt(this,t)}return At(t,null,[{key:"getMeasurementData",value:function(n){var r=ei.getSetupMeasurementData(n),a=r.defaultState,i=r.NUMGroup,o=r.SCOORDGroup,s=o.GraphicData,c=[{x:s[0],y:s[1]},{x:s[2],y:s[3]}],l=[{x:s[4],y:s[5]},{x:s[6],y:s[7]}],u=Math.sqrt(Math.pow(l[0].x-l[1].x,2)+Math.pow(l[0].y-l[1].y,2)),f={x:(l[1].x-l[0].x)/u,y:(l[1].y-l[0].y)/u},v=u/2,g={x:c[0].x+f.x*v,y:c[0].y+f.y*v},d={x:c[1].x-f.x*v,y:c[1].y-f.y*v},m=Aa(Aa({},a),{},{toolType:t.toolType,active:!1,cachedStats:{area:i?i.MeasuredValueSequence.NumericValue:0},handles:{end:{x:g.x,y:g.y,highlight:!1,active:!1},initialRotation:0,start:{x:d.x,y:d.y,highlight:!1,active:!1},textBox:{hasMoved:!1,movesIndependently:!1,drawnIndependently:!0,allowedOutsideImage:!0,hasBoundingBox:!0}},invalidated:!0,visible:!0});return m}},{key:"getTID300RepresentationArguments",value:function(n){var r=n.cachedStats,a=r===void 0?{}:r,i=n.handles,o=n.finding,s=n.findingSites,c=i.start,l=i.end,u=a.area,f=Math.abs(c.x-l.x)/2,v=Math.abs(c.y-l.y)/2,g=[],d={x:(c.x+l.x)/2,y:(c.y+l.y)/2};f>v?(g.push({x:d.x-f,y:d.y}),g.push({x:d.x+f,y:d.y}),g.push({x:d.x,y:d.y-v}),g.push({x:d.x,y:d.y+v})):(g.push({x:d.x,y:d.y-v}),g.push({x:d.x,y:d.y+v}),g.push({x:d.x-f,y:d.y}),g.push({x:d.x+f,y:d.y}));var m="cornerstoneTools@^4.0.0:EllipticalRoi";return{area:u,points:g,trackingIdentifierTextValue:m,finding:o,findingSites:s||[]}}}]),t}();Rh.toolType=X4;Rh.utilityToolType=X4;Rh.TID300Representation=K4;Rh.isValidCornerstoneTrackingIdentifier=function(t){if(!t.includes(":"))return!1;var e=t.split(":"),n=Ja(e,2),r=n[0],a=n[1];return r!==al?!1:a===X4};ei.registerTool(Rh);function c9e(t){var e=[];return t.forEach(function(n){e.push(n.x),e.push(n.y)}),e}var Az=function(t){Jt(e,t);function e(){return Pt(this,e),Zt(this,e,arguments)}return At(e,[{key:"contentItem",value:function(){var r=this.props,a=r.points,i=r.ReferencedSOPSequence,o=r.use3DSpatialCoordinates,s=o===void 0?!1:o,c=r.perimeter,l=r.area,u=r.areaUnit,f=u===void 0?"mm2":u,v=r.unit,g=v===void 0?"mm":v,d=c9e(a);return this.getMeasurement([{RelationshipType:"CONTAINS",ValueType:"NUM",ConceptNameCodeSequence:{CodeValue:"G-A197",CodingSchemeDesignator:"SRT",CodeMeaning:"Perimeter"},MeasuredValueSequence:{MeasurementUnitsCodeSequence:u0(g),NumericValue:c},ContentSequence:{RelationshipType:"INFERRED FROM",ValueType:s?"SCOORD3D":"SCOORD",GraphicType:"CIRCLE",GraphicData:d,ContentSequence:s?void 0:{RelationshipType:"SELECTED FROM",ValueType:"IMAGE",ReferencedSOPSequence:i}}},{RelationshipType:"CONTAINS",ValueType:"NUM",ConceptNameCodeSequence:{CodeValue:"G-A166",CodingSchemeDesignator:"SRT",CodeMeaning:"Area"},MeasuredValueSequence:{MeasurementUnitsCodeSequence:u0(f),NumericValue:l},ContentSequence:{RelationshipType:"INFERRED FROM",ValueType:s?"SCOORD3D":"SCOORD",GraphicType:"CIRCLE",GraphicData:d,ContentSequence:s?void 0:{RelationshipType:"SELECTED FROM",ValueType:"IMAGE",ReferencedSOPSequence:i}}}])}}]),e}(Su),Y4="CircleRoi",bh=function(){function t(){Pt(this,t)}return At(t,null,[{key:"getMeasurementData",value:function(n){var r=ei.getSetupMeasurementData(n),a=r.defaultState,i=r.NUMGroup,o=r.SCOORDGroup,s=o.GraphicData,c={x:s[0],y:s[1]},l={x:s[2],y:s[3]},u=Aa(Aa({},a),{},{toolType:t.toolType,active:!1,cachedStats:{area:i?i.MeasuredValueSequence.NumericValue:0,radius:0,perimeter:0},handles:{end:Aa(Aa({},l),{},{highlight:!1,active:!1}),initialRotation:0,start:Aa(Aa({},c),{},{highlight:!1,active:!1}),textBox:{hasMoved:!1,movesIndependently:!1,drawnIndependently:!0,allowedOutsideImage:!0,hasBoundingBox:!0}},invalidated:!0,visible:!0});return u}},{key:"getTID300RepresentationArguments",value:function(n){var r=n.cachedStats,a=r===void 0?{}:r,i=n.handles,o=n.finding,s=n.findingSites,c=i.start,l=i.end,u=a.area,f=a.areaUnit,v=f===void 0?"mm2":f,g=a.unit,d=g===void 0?"mm":g,m=a.radius,h=2*Math.PI*m,C=[];C.push(c),C.push(l);var p="cornerstoneTools@^4.0.0:CircleRoi";return{area:u,areaUnit:v,perimeter:h,unit:d,radius:m,points:C,trackingIdentifierTextValue:p,finding:o,findingSites:s||[]}}}]),t}();bh.toolType=Y4;bh.utilityToolType=Y4;bh.TID300Representation=Az;bh.isValidCornerstoneTrackingIdentifier=function(t){if(!t.includes(":"))return!1;var e=t.split(":"),n=Ja(e,2),r=n[0],a=n[1];return r!==al?!1:a===Y4};ei.registerTool(bh);var gD=function(t){Jt(e,t);function e(){return Pt(this,e),Zt(this,e,arguments)}return At(e,[{key:"contentItem",value:function(){var r=this.props,a=r.points,i=r.ReferencedSOPSequence,o=r.use3DSpatialCoordinates,s=o===void 0?!1:o,c=s?[a[0].x,a[0].y,a[0].z]:[a[0].x,a[0].y];return a.length==2&&(c.push(a[1].x),c.push(a[1].y),s&&c.push(a[1].z)),this.getMeasurement([{RelationshipType:"CONTAINS",ValueType:"NUM",ConceptNameCodeSequence:{CodeValue:"111010",CodingSchemeDesignator:"DCM",CodeMeaning:"Center"},ContentSequence:{RelationshipType:"INFERRED FROM",ValueType:s?"SCOORD3D":"SCOORD",GraphicType:"POINT",GraphicData:c,ContentSequence:s?void 0:{RelationshipType:"SELECTED FROM",ValueType:"IMAGE",ReferencedSOPSequence:i}}}])}}]),e}(Su),Z4="ArrowAnnotate",E6="CORNERSTONEFREETEXT",Nh=function(){function t(){Pt(this,t)}return At(t,null,[{key:"getMeasurementData",value:function(n){var r=ei.getSetupMeasurementData(n),a=r.defaultState,i=r.SCOORDGroup,o=r.findingGroup,s=o.ConceptCodeSequence.CodeMeaning,c=i.GraphicData,l=Aa(Aa({},a),{},{toolType:t.toolType,active:!1,handles:{start:{x:c[0],y:c[1],highlight:!0,active:!1},end:{x:c.length==4?c[2]:c[0]+20,y:c.length==4?c[3]:c[1]+20,highlight:!0,active:!1},textBox:{hasMoved:!1,movesIndependently:!1,drawnIndependently:!0,allowedOutsideImage:!0,hasBoundingBox:!0}},invalidated:!0,text:s,visible:!0});return l}},{key:"getTID300RepresentationArguments",value:function(n){var r=[n.handles.start,n.handles.end],a=n.finding,i=n.findingSites,o={points:r,trackingIdentifierTextValue:"cornerstoneTools@^4.0.0:ArrowAnnotate",findingSites:i||[]};return(!a||a.CodeValue!==E6)&&(a={CodeValue:E6,CodingSchemeDesignator:"CST4",CodeMeaning:n.text}),o.finding=a,o}}]),t}();Nh.toolType=Z4;Nh.utilityToolType=Z4;Nh.TID300Representation=gD;Nh.isValidCornerstoneTrackingIdentifier=function(t){if(!t.includes(":"))return!1;var e=t.split(":"),n=Ja(e,2),r=n[0],a=n[1];return r!==al?!1:a===Z4};ei.registerTool(Nh);var bC={exports:{}};bC.exports;(function(t,e){var n=200,r="__lodash_hash_undefined__",a=9007199254740991,i="[object Arguments]",o="[object Array]",s="[object Boolean]",c="[object Date]",l="[object Error]",u="[object Function]",f="[object GeneratorFunction]",v="[object Map]",g="[object Number]",d="[object Object]",m="[object Promise]",h="[object RegExp]",C="[object Set]",p="[object String]",S="[object Symbol]",I="[object WeakMap]",D="[object ArrayBuffer]",E="[object DataView]",T="[object Float32Array]",y="[object Float64Array]",M="[object Int8Array]",_="[object Int16Array]",O="[object Int32Array]",w="[object Uint8Array]",x="[object Uint8ClampedArray]",P="[object Uint16Array]",R="[object Uint32Array]",L=/[\\^$.*+?()[\]{}|]/g,H=/\w*$/,F=/^\[object .+?Constructor\]$/,U=/^(?:0|[1-9]\d*)$/,V={};V[i]=V[o]=V[D]=V[E]=V[s]=V[c]=V[T]=V[y]=V[M]=V[_]=V[O]=V[v]=V[g]=V[d]=V[h]=V[C]=V[p]=V[S]=V[w]=V[x]=V[P]=V[R]=!0,V[l]=V[u]=V[I]=!1;var X=typeof Yg=="object"&&Yg&&Yg.Object===Object&&Yg,re=typeof self=="object"&&self&&self.Object===Object&&self,ue=X||re||Function("return this")(),De=e&&!e.nodeType&&e,pe=De&&!0&&t&&!t.nodeType&&t,Te=pe&&pe.exports===De;function Fe(Se,We){return Se.set(We[0],We[1]),Se}function Ne(Se,We){return Se.add(We),Se}function Re(Se,We){for(var lt=-1,wt=Se?Se.length:0;++lt<wt&&We(Se[lt],lt,Se)!==!1;);return Se}function k(Se,We){for(var lt=-1,wt=We.length,On=Se.length;++lt<wt;)Se[On+lt]=We[lt];return Se}function A(Se,We,lt,wt){for(var On=-1,Sn=Se?Se.length:0;++On<Sn;)lt=We(lt,Se[On],On,Se);return lt}function b(Se,We){for(var lt=-1,wt=Array(Se);++lt<Se;)wt[lt]=We(lt);return wt}function N(Se,We){return Se==null?void 0:Se[We]}function W(Se){var We=!1;if(Se!=null&&typeof Se.toString!="function")try{We=!!(Se+"")}catch{}return We}function j(Se){var We=-1,lt=Array(Se.size);return Se.forEach(function(wt,On){lt[++We]=[On,wt]}),lt}function K(Se,We){return function(lt){return Se(We(lt))}}function ge(Se){var We=-1,lt=Array(Se.size);return Se.forEach(function(wt){lt[++We]=wt}),lt}var ye=Array.prototype,we=Function.prototype,be=Object.prototype,Z=ue["__core-js_shared__"],ie=function(){var Se=/[^.]+$/.exec(Z&&Z.keys&&Z.keys.IE_PROTO||"");return Se?"Symbol(src)_1."+Se:""}(),he=we.toString,se=be.hasOwnProperty,me=be.toString,fe=RegExp("^"+he.call(se).replace(L,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),q=Te?ue.Buffer:void 0,Pe=ue.Symbol,Le=ue.Uint8Array,Ue=K(Object.getPrototypeOf,Object),Me=Object.create,Be=be.propertyIsEnumerable,nt=ye.splice,Ze=Object.getOwnPropertySymbols,at=q?q.isBuffer:void 0,Ot=K(Object.keys,Object),Oe=le(ue,"DataView"),$e=le(ue,"Map"),ht=le(ue,"Promise"),Ut=le(ue,"Set"),Qt=le(ue,"WeakMap"),Rt=le(Object,"create"),Dn=kt(Oe),jn=kt($e),xn=kt(ht),Qe=kt(Ut),Et=kt(Qt),$t=Pe?Pe.prototype:void 0,Fn=$t?$t.valueOf:void 0;function Rr(Se){var We=-1,lt=Se?Se.length:0;for(this.clear();++We<lt;){var wt=Se[We];this.set(wt[0],wt[1])}}function Kt(){this.__data__=Rt?Rt(null):{}}function qr(Se){return this.has(Se)&&delete this.__data__[Se]}function Rn(Se){var We=this.__data__;if(Rt){var lt=We[Se];return lt===r?void 0:lt}return se.call(We,Se)?We[Se]:void 0}function cr(Se){var We=this.__data__;return Rt?We[Se]!==void 0:se.call(We,Se)}function fi(Se,We){var lt=this.__data__;return lt[Se]=Rt&&We===void 0?r:We,this}Rr.prototype.clear=Kt,Rr.prototype.delete=qr,Rr.prototype.get=Rn,Rr.prototype.has=cr,Rr.prototype.set=fi;function nn(Se){var We=-1,lt=Se?Se.length:0;for(this.clear();++We<lt;){var wt=Se[We];this.set(wt[0],wt[1])}}function ya(){this.__data__=[]}function wi(Se){var We=this.__data__,lt=oo(We,Se);if(lt<0)return!1;var wt=We.length-1;return lt==wt?We.pop():nt.call(We,lt,1),!0}function Wi(Se){var We=this.__data__,lt=oo(We,Se);return lt<0?void 0:We[lt][1]}function Oo(Se){return oo(this.__data__,Se)>-1}function Ci(Se,We){var lt=this.__data__,wt=oo(lt,Se);return wt<0?lt.push([Se,We]):lt[wt][1]=We,this}nn.prototype.clear=ya,nn.prototype.delete=wi,nn.prototype.get=Wi,nn.prototype.has=Oo,nn.prototype.set=Ci;function mr(Se){var We=-1,lt=Se?Se.length:0;for(this.clear();++We<lt;){var wt=Se[We];this.set(wt[0],wt[1])}}function Ii(){this.__data__={hash:new Rr,map:new($e||nn),string:new Rr}}function Gn(Se){return Y(this,Se).delete(Se)}function ma(Se){return Y(this,Se).get(Se)}function Hi(Se){return Y(this,Se).has(Se)}function Ha(Se,We){return Y(this,Se).set(Se,We),this}mr.prototype.clear=Ii,mr.prototype.delete=Gn,mr.prototype.get=ma,mr.prototype.has=Hi,mr.prototype.set=Ha;function ti(Se){this.__data__=new nn(Se)}function Di(){this.__data__=new nn}function La(Se){return this.__data__.delete(Se)}function wo(Se){return this.__data__.get(Se)}function vi(Se){return this.__data__.has(Se)}function Ua(Se,We){var lt=this.__data__;if(lt instanceof nn){var wt=lt.__data__;if(!$e||wt.length<n-1)return wt.push([Se,We]),this;lt=this.__data__=new mr(wt)}return lt.set(Se,We),this}ti.prototype.clear=Di,ti.prototype.delete=La,ti.prototype.get=wo,ti.prototype.has=vi,ti.prototype.set=Ua;function Po(Se,We){var lt=Mt(Se)||sn(Se)?b(Se.length,String):[],wt=lt.length,On=!!wt;for(var Sn in Se)se.call(Se,Sn)&&!(On&&(Sn=="length"||It(Sn,wt)))&&lt.push(Sn);return lt}function ua(Se,We,lt){var wt=Se[We];(!(se.call(Se,We)&&on(wt,lt))||lt===void 0&&!(We in Se))&&(Se[We]=lt)}function oo(Se,We){for(var lt=Se.length;lt--;)if(on(Se[lt][0],We))return lt;return-1}function $i(Se,We){return Se&&ai(We,Vt(We),Se)}function $a(Se,We,lt,wt,On,Sn,Bn){var Qn;if(wt&&(Qn=Sn?wt(Se,On,Sn,Bn):wt(Se)),Qn!==void 0)return Qn;if(!Nn(Se))return Se;var Zr=Mt(Se);if(Zr){if(Qn=rt(Se),!We)return xo(Se,Qn)}else{var jr=ze(Se),Jr=jr==u||jr==f;if(_n(Se))return ms(Se,We);if(jr==d||jr==i||Jr&&!Sn){if(W(Se))return Sn?Se:{};if(Qn=ct(Jr?{}:Se),!We)return gi(Se,$i(Qn,Se))}else{if(!V[jr])return Sn?Se:{};Qn=et(Se,jr,$a,We)}}Bn||(Bn=new ti);var Fa=Bn.get(Se);if(Fa)return Fa;if(Bn.set(Se,Qn),!Zr)var qa=lt?ee(Se):Vt(Se);return Re(qa||Se,function(ea,Vr){qa&&(Vr=ea,ea=Se[Vr]),ua(Qn,Vr,$a(ea,We,lt,wt,Vr,Se,Bn))}),Qn}function ni(Se){return Nn(Se)?Me(Se):{}}function ha(Se,We,lt){var wt=We(Se);return Mt(Se)?wt:k(wt,lt(Se))}function ri(Se){return me.call(Se)}function zi(Se){if(!Nn(Se)||mt(Se))return!1;var We=rn(Se)||W(Se)?fe:F;return We.test(kt(Se))}function Ma(Se){if(!bt(Se))return Ot(Se);var We=[];for(var lt in Object(Se))se.call(Se,lt)&&lt!="constructor"&&We.push(lt);return We}function ms(Se,We){if(We)return Se.slice();var lt=new Se.constructor(Se.length);return Se.copy(lt),lt}function so(Se){var We=new Se.constructor(Se.byteLength);return new Le(We).set(new Le(Se)),We}function za(Se,We){var lt=We?so(Se.buffer):Se.buffer;return new Se.constructor(lt,Se.byteOffset,Se.byteLength)}function Ao(Se,We,lt){var wt=We?lt(j(Se),!0):j(Se);return A(wt,Fe,new Se.constructor)}function qi(Se){var We=new Se.constructor(Se.source,H.exec(Se));return We.lastIndex=Se.lastIndex,We}function Gs(Se,We,lt){var wt=We?lt(ge(Se),!0):ge(Se);return A(wt,Ne,new Se.constructor)}function Ho(Se){return Fn?Object(Fn.call(Se)):{}}function Bs(Se,We){var lt=We?so(Se.buffer):Se.buffer;return new Se.constructor(lt,Se.byteOffset,Se.length)}function xo(Se,We){var lt=-1,wt=Se.length;for(We||(We=Array(wt));++lt<wt;)We[lt]=Se[lt];return We}function ai(Se,We,lt,wt){lt||(lt={});for(var On=-1,Sn=We.length;++On<Sn;){var Bn=We[On],Qn=void 0;ua(lt,Bn,Qn===void 0?Se[Bn]:Qn)}return lt}function gi(Se,We){return ai(Se,Ce(Se),We)}function ee(Se){return ha(Se,Vt,Ce)}function Y(Se,We){var lt=Se.__data__;return gt(We)?lt[typeof We=="string"?"string":"hash"]:lt.map}function le(Se,We){var lt=N(Se,We);return zi(lt)?lt:void 0}var Ce=Ze?K(Ze,Object):Er,ze=ri;(Oe&&ze(new Oe(new ArrayBuffer(1)))!=E||$e&&ze(new $e)!=v||ht&&ze(ht.resolve())!=m||Ut&&ze(new Ut)!=C||Qt&&ze(new Qt)!=I)&&(ze=function(Se){var We=me.call(Se),lt=We==d?Se.constructor:void 0,wt=lt?kt(lt):void 0;if(wt)switch(wt){case Dn:return E;case jn:return v;case xn:return m;case Qe:return C;case Et:return I}return We});function rt(Se){var We=Se.length,lt=Se.constructor(We);return We&&typeof Se[0]=="string"&&se.call(Se,"index")&&(lt.index=Se.index,lt.input=Se.input),lt}function ct(Se){return typeof Se.constructor=="function"&&!bt(Se)?ni(Ue(Se)):{}}function et(Se,We,lt,wt){var On=Se.constructor;switch(We){case D:return so(Se);case s:case c:return new On(+Se);case E:return za(Se,wt);case T:case y:case M:case _:case O:case w:case x:case P:case R:return Bs(Se,wt);case v:return Ao(Se,wt,lt);case g:case p:return new On(Se);case h:return qi(Se);case C:return Gs(Se,wt,lt);case S:return Ho(Se)}}function It(Se,We){return We=We??a,!!We&&(typeof Se=="number"||U.test(Se))&&Se>-1&&Se%1==0&&Se<We}function gt(Se){var We=typeof Se;return We=="string"||We=="number"||We=="symbol"||We=="boolean"?Se!=="__proto__":Se===null}function mt(Se){return!!ie&&ie in Se}function bt(Se){var We=Se&&Se.constructor,lt=typeof We=="function"&&We.prototype||be;return Se===lt}function kt(Se){if(Se!=null){try{return he.call(Se)}catch{}try{return Se+""}catch{}}return""}function dn(Se){return $a(Se,!0,!0)}function on(Se,We){return Se===We||Se!==Se&&We!==We}function sn(Se){return cn(Se)&&se.call(Se,"callee")&&(!Be.call(Se,"callee")||me.call(Se)==i)}var Mt=Array.isArray;function mn(Se){return Se!=null&&vn(Se.length)&&!rn(Se)}function cn(Se){return an(Se)&&mn(Se)}var _n=at||pn;function rn(Se){var We=Nn(Se)?me.call(Se):"";return We==u||We==f}function vn(Se){return typeof Se=="number"&&Se>-1&&Se%1==0&&Se<=a}function Nn(Se){var We=typeof Se;return!!Se&&(We=="object"||We=="function")}function an(Se){return!!Se&&typeof Se=="object"}function Vt(Se){return mn(Se)?Po(Se):Ma(Se)}function Er(){return[]}function pn(){return!1}t.exports=dn})(bC,bC.exports);bC.exports;var xz=function(t){Jt(e,t);function e(){return Pt(this,e),Zt(this,e,arguments)}return At(e,[{key:"contentItem",value:function(){var r=this.props,a=r.point1,i=r.point2,o=r.point3,s=r.point4,c=r.rAngle,l=r.ReferencedSOPSequence;return this.getMeasurement([{RelationshipType:"CONTAINS",ValueType:"NUM",ConceptNameCodeSequence:{CodeValue:"285285000",CodingSchemeDesignator:"SCT",CodeMeaning:"Cobb angle"},MeasuredValueSequence:{MeasurementUnitsCodeSequence:{CodeValue:"deg",CodingSchemeDesignator:"UCUM",CodingSchemeVersion:"1.4",CodeMeaning:""},NumericValue:c},ContentSequence:{RelationshipType:"INFERRED FROM",ValueType:"SCOORD",GraphicType:"POLYLINE",GraphicData:[a.x,a.y,i.x,i.y,o.x,o.y,s.x,s.y],ContentSequence:{RelationshipType:"SELECTED FROM",ValueType:"IMAGE",ReferencedSOPSequence:l}}}])}}]),e}(Su),J4="CobbAngle",Lh=function(){function t(){Pt(this,t)}return At(t,null,[{key:"getMeasurementData",value:function(n){var r=ei.getSetupMeasurementData(n),a=r.defaultState,i=r.NUMGroup,o=r.SCOORDGroup,s=Aa(Aa({},a),{},{rAngle:i.MeasuredValueSequence.NumericValue,toolType:t.toolType,handles:{start:{},end:{},start2:{highlight:!0,drawnIndependently:!0},end2:{highlight:!0,drawnIndependently:!0},textBox:{hasMoved:!1,movesIndependently:!1,drawnIndependently:!0,allowedOutsideImage:!0,hasBoundingBox:!0}}}),c=Ja(o.GraphicData,8);return s.handles.start.x=c[0],s.handles.start.y=c[1],s.handles.end.x=c[2],s.handles.end.y=c[3],s.handles.start2.x=c[4],s.handles.start2.y=c[5],s.handles.end2.x=c[6],s.handles.end2.y=c[7],s}},{key:"getTID300RepresentationArguments",value:function(n){var r=n.handles,a=n.finding,i=n.findingSites,o=r.start,s=r.end,c=r.start2,l=r.end2,u=n.rAngle,f="cornerstoneTools@^4.0.0:CobbAngle";return{point1:o,point2:s,point3:c,point4:l,rAngle:u,trackingIdentifierTextValue:f,finding:a,findingSites:i||[]}}}]),t}();Lh.toolType=J4;Lh.utilityToolType=J4;Lh.TID300Representation=xz;Lh.isValidCornerstoneTrackingIdentifier=function(t){if(!t.includes(":"))return!1;var e=t.split(":"),n=Ja(e,2),r=n[0],a=n[1];return r!==al?!1:a===J4};ei.registerTool(Lh);var eO="Angle",Uh=function(){function t(){Pt(this,t)}return At(t,null,[{key:"getMeasurementData",value:function(n){var r=ei.getSetupMeasurementData(n),a=r.defaultState,i=r.NUMGroup,o=r.SCOORDGroup,s=Aa(Aa({},a),{},{rAngle:i.MeasuredValueSequence.NumericValue,toolType:t.toolType,handles:{start:{},middle:{},end:{},textBox:{hasMoved:!1,movesIndependently:!1,drawnIndependently:!0,allowedOutsideImage:!0,hasBoundingBox:!0}}}),c=Ja(o.GraphicData,8);return s.handles.start.x=c[0],s.handles.start.y=c[1],s.handles.middle.x=c[2],s.handles.middle.y=c[3],s.handles.middle.x=c[4],s.handles.middle.y=c[5],s.handles.end.x=c[6],s.handles.end.y=c[7],s}},{key:"getTID300RepresentationArguments",value:function(n){var r=n.handles,a=n.finding,i=n.findingSites,o=r.start,s=r.middle,c=r.middle,l=r.end,u=n.rAngle,f="cornerstoneTools@^4.0.0:Angle";return{point1:o,point2:s,point3:c,point4:l,rAngle:u,trackingIdentifierTextValue:f,finding:a,findingSites:i||[]}}}]),t}();Uh.toolType=eO;Uh.utilityToolType=eO;Uh.TID300Representation=xz;Uh.isValidCornerstoneTrackingIdentifier=function(t){if(!t.includes(":"))return!1;var e=t.split(":"),n=Ja(e,2),r=n[0],a=n[1];return r!==al?!1:a===eO};ei.registerTool(Uh);var _v=function(){function t(){Pt(this,t)}return At(t,null,[{key:"getMeasurementData",value:function(n){var r=ei.getSetupMeasurementData(n),a=r.defaultState,i=r.SCOORDGroup,o=r.NUMGroup,s=Aa(Aa({},a),{},{toolType:t.toolType,handles:{start:{},end:{},textBox:{active:!1,hasMoved:!1,movesIndependently:!1,drawnIndependently:!0,allowedOutsideImage:!0,hasBoundingBox:!0},initialRotation:0},cachedStats:{area:o?o.MeasuredValueSequence.NumericValue:0},color:void 0,invalidated:!0}),c=Ja(i.GraphicData,6);return s.handles.start.x=c[0],s.handles.start.y=c[1],c[2],c[3],s.handles.end.x=c[4],s.handles.end.y=c[5],s}},{key:"getTID300RepresentationArguments",value:function(n){var r=n.finding,a=n.findingSites,i=n.cachedStats,o=i===void 0?{}:i,s=n.handles;console.log("getTID300 Rectangle",n,o,s);var c=s.start,l=s.end,u=[c,{x:c.x,y:l.y},l,{x:l.x,y:c.y}],f=o.area,v=o.perimeter;console.log("Point=",u,"cachedStats=",o);var g="cornerstoneTools@^4.0.0:RectangleRoi";return{points:u,area:f,perimeter:v,trackingIdentifierTextValue:g,finding:r,findingSites:a||[]}}}]),t}();_v.toolType="RectangleRoi";_v.utilityToolType="RectangleRoi";_v.TID300Representation=vD;_v.isValidCornerstoneTrackingIdentifier=function(t){if(!t.includes(":"))return!1;var e=t.split(":"),n=Ja(e,2),r=n[0],a=n[1];return r!==al?!1:a===_v.toolType};ei.registerTool(_v);var l9e="CORNERSTONEFREETEXT",u9e="CORNERSTONEJS",tO={CodingSchemeDesignator:u9e,codeValues:{CORNERSTONEFREETEXT:l9e}},f9e={CodingSchemeDesignator:"DCM",CodeValue:"121071"},v9e={CodingSchemeDesignator:"SCT",CodeValue:"363698007"},g9e={CodingSchemeDesignator:"SRT",CodeValue:"G-C0E3"},T6=function(e,n,r){var a=e.ConceptNameCodeSequence;if(a){var i=a.CodingSchemeDesignator,o=a.CodeValue;return i==n.CodingSchemeDesignator&&o==n.CodeValue||r&&i==r.CodingSchemeDesignator&&o==r.CodeValue}};function d9e(t,e,n,r,a){var i=r.getTID300RepresentationArguments(t,a);i.ReferencedSOPSequence=n;var o=new r.TID300Representation(i);return o}function m9e(t,e,n,r){var a=e[t],i=io.CORNERSTONE_TOOL_CLASSES_BY_TOOL_TYPE[t];if(!(!a||!a.data||!a.data.length||!i)){var o=a.data.map(function(s){return d9e(s,t,n,i,r)});return new z4(o)}}var io=function(){function t(){Pt(this,t)}return At(t,null,[{key:"getCornerstoneLabelFromDefaultState",value:function(n){var r=n.findingSites,a=r===void 0?[]:r,i=n.finding,o=tO.codeValues.CORNERSTONEFREETEXT,s=a.find(function(c){return c.CodeValue===o});if(s)return s.CodeMeaning;if(i&&i.CodeValue===o)return i.CodeMeaning}},{key:"generateDatasetMeta",value:function(){var n=new Uint8Array(2);n[1]=1;var r={FileMetaInformationVersion:{Value:[n.buffer],vr:"OB"},TransferSyntaxUID:{Value:["1.2.840.10008.1.2.1"],vr:"UI"},ImplementationClassUID:{Value:[Ea.uid()],vr:"UI"},ImplementationVersionName:{Value:["dcmjs"],vr:"SH"}};return r}},{key:"generateDerivationSourceDataset",value:function(n,r){var a={PixelData:"OW"},i=t.generateDatasetMeta(),o={StudyInstanceUID:n,SeriesInstanceUID:r,_meta:i,_vrMap:a};return o}},{key:"getSetupMeasurementData",value:function(n,r,a,i){var o=n.ContentSequence,s=xa(o),c=s.find(function(I){return T6(I,f9e)}),l=s.filter(function(I){return T6(I,v9e,g9e)})||[],u=s.find(function(I){return I.ValueType==="NUM"}),f=xa(u.ContentSequence).find(function(I){return I.ValueType==="SCOORD"}),v=f.ContentSequence.ReferencedSOPSequence,g=v.ReferencedSOPInstanceUID,d=v.ReferencedFrameNumber,m=r[g],h=a.get("imagePlaneModule",m),C=c?Xi(c.ConceptCodeSequence):void 0,p=l.map(function(I){return Xi(I.ConceptCodeSequence)}),S={sopInstanceUid:g,annotation:{annotationUID:Ea.uid(),metadata:{toolName:i,referencedImageId:m,FrameOfReferenceUID:h.frameOfReferenceUID,label:""}},finding:C,findingSites:p};return S.finding&&(S.description=S.finding.CodeMeaning),S.annotation.metadata.label=t.getCornerstoneLabelFromDefaultState(S),{defaultState:S,NUMGroup:u,SCOORDGroup:f,ReferencedSOPSequence:v,ReferencedSOPInstanceUID:g,ReferencedFrameNumber:d}}},{key:"generateReport",value:function(n,r,a,i){var o=[],s={},c=[],l=t.generateDatasetMeta();Object.keys(n).forEach(function(g){var d=r.get("sopCommonModule",g),m=r.get("generalSeriesModule",g),h=d.sopInstanceUID,C=d.sopClassUID,p=m.studyInstanceUID,S=m.seriesInstanceUID;if(s[h]=S,!c.find(function(O){return O.SeriesInstanceUID===S})){var I=t.generateDerivationSourceDataset(p,S);c.push(I)}var D=r.get("frameNumber",g),E=n[g],T=Object.keys(E),y={ReferencedSOPClassUID:C,ReferencedSOPInstanceUID:h},M=r.get("instance",g);(M&&M.NumberOfFrames&&M.NumberOfFrames>1||Tv.isMultiframeSOPClassUID(C))&&(y.ReferencedFrameNumber=D);var _=[];T.forEach(function(O){var w=m9e(O,E,y,a);w&&_.push(w)}),o=o.concat(_)});var u=new $4({TID1501MeasurementGroups:o},i),f=new H4(c),v=u.contentItem(c,{sopInstanceUIDsToSeriesInstanceUIDMap:s});return f.dataset=Object.assign(f.dataset,v),f.dataset._meta=l,f}},{key:"generateToolState",value:function(n,r,a,i){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};if(n.ContentTemplateSequence.TemplateIdentifier!=="1500")throw new Error("This package can currently only interpret DICOM SR TID 1500");var s="Imaging Measurements",c="Measurement Group",l="Tracking Identifier",u=xa(n.ContentSequence).find(yv(s)),f=xa(u.ContentSequence).filter(yv(c)),v={},g=t.CORNERSTONE_TOOL_CLASSES_BY_UTILITY_TYPE,d=[];return Object.keys(g).forEach(function(m){d.push(g[m]),v[m]=[]}),f.forEach(function(m){var h=xa(m.ContentSequence),C=h.find(function(D){return D.ConceptNameCodeSequence.CodeMeaning===l}),p=C.TextValue,S=o.getToolClass?o.getToolClass(m,n,d):d.find(function(D){return D.isValidCornerstoneTrackingIdentifier(p)});if(S){var I=S.getMeasurementData(m,r,a,i);console.log("=== ".concat(S.toolType," ===")),console.log(I),v[S.toolType].push(I)}}),v}},{key:"registerTool",value:function(n){t.CORNERSTONE_TOOL_CLASSES_BY_UTILITY_TYPE[n.utilityToolType]=n,t.CORNERSTONE_TOOL_CLASSES_BY_TOOL_TYPE[n.toolType]=n,t.MEASUREMENT_BY_TOOLTYPE[n.toolType]=n.utilityToolType}}]),t}();io.MEASUREMENT_BY_TOOLTYPE={};io.CORNERSTONE_TOOL_CLASSES_BY_UTILITY_TYPE={};io.CORNERSTONE_TOOL_CLASSES_BY_TOOL_TYPE={};var ks="Cornerstone3DTools@^0.1.0",dD="Length",h9e="".concat(ks,":").concat(dD),Fh=function(){function t(){Pt(this,t)}return At(t,null,[{key:"getMeasurementData",value:function(n,r,a,i){for(var o=io.getSetupMeasurementData(n,r,i,t.toolType),s=o.defaultState,c=o.NUMGroup,l=o.SCOORDGroup,u=o.ReferencedFrameNumber,f=s.annotation.metadata.referencedImageId,v=l.GraphicData,g=[],d=0;d<v.length;d+=2){var m=a(f,[v[d],v[d+1]]);g.push(m)}var h=s;return h.annotation.data={handles:{points:[g[0],g[1]],activeHandleIndex:0,textBox:{hasMoved:!1}},cachedStats:cD({},"imageId:".concat(f),{length:c?c.MeasuredValueSequence.NumericValue:0}),frameNumber:u},h}},{key:"getTID300RepresentationArguments",value:function(n,r){var a=n.data,i=n.finding,o=n.findingSites,s=n.metadata,c=a.cachedStats,l=c===void 0?{}:c,u=a.handles,f=s.referencedImageId;if(!f)throw new Error("Length.getTID300RepresentationArguments: referencedImageId is not defined");var v=r(f,u.points[0]),g=r(f,u.points[1]),d={x:v[0],y:v[1]},m={x:g[0],y:g[1]},h=l["imageId:".concat(f)]||{},C=h.length;return{point1:d,point2:m,distance:C,trackingIdentifierTextValue:h9e,finding:i,findingSites:o||[]}}}]),t}();Fh.toolType=dD;Fh.utilityToolType=dD;Fh.TID300Representation=wz;Fh.isValidCornerstoneTrackingIdentifier=function(t){if(!t.includes(":"))return!1;var e=t.split(":"),n=Ja(e,2),r=n[0],a=n[1];return r!==ks?!1:a===dD};io.registerTool(Fh);var mD="Bidirectional",p9e="Long Axis",S9e="Short Axis",C9e="".concat(ks,":").concat(mD),Vh=function(){function t(){Pt(this,t)}return At(t,null,[{key:"getMeasurementData",value:function(n,r,a,i){var o=io.getSetupMeasurementData(n,r,i,t.toolType),s=o.defaultState,c=o.ReferencedFrameNumber,l=s.annotation.metadata.referencedImageId,u=n.ContentSequence,f=xa(u).find(function(C){return C.ConceptNameCodeSequence.CodeMeaning===p9e}),v=xa(f.ContentSequence).find(function(C){return C.ValueType==="SCOORD"}),g=xa(u).find(function(C){return C.ConceptNameCodeSequence.CodeMeaning===S9e}),d=xa(g.ContentSequence).find(function(C){return C.ValueType==="SCOORD"}),m=[];[v,d].forEach(function(C){for(var p=C.GraphicData,S=0;S<p.length;S+=2){var I=a(l,[p[S],p[S+1]]);m.push(I)}});var h=s;return h.annotation.data={handles:{points:[m[0],m[1],m[2],m[3]],activeHandleIndex:0,textBox:{hasMoved:!1}},cachedStats:cD({},"imageId:".concat(l),{length:f.MeasuredValueSequence.NumericValue,width:g.MeasuredValueSequence.NumericValue}),frameNumber:c},h}},{key:"getTID300RepresentationArguments",value:function(n,r){var a=n.data,i=n.finding,o=n.findingSites,s=n.metadata,c=a.cachedStats,l=c===void 0?{}:c,u=a.handles,f=s.referencedImageId;if(!f)throw new Error("Bidirectional.getTID300RepresentationArguments: referencedImageId is not defined");var v=l["imageId:".concat(f)]||{},g=v.length,d=v.width,m=u.points,h=[m[0],m[1]],C=[m[2],m[3]],p=Math.sqrt(Math.pow(h[0][0]-h[1][0],2)+Math.pow(h[0][1]-h[1][1],2)+Math.pow(h[0][2]-h[1][2],2)),S=Math.sqrt(Math.pow(C[0][0]-C[1][0],2)+Math.pow(C[0][1]-C[1][1],2)+Math.pow(C[0][2]-C[1][2],2)),I,D;p>S?(I=h,D=C):(I=C,D=h);var E=r(f,I[0]),T=r(f,I[1]),y=r(f,D[0]),M=r(f,D[1]);return{longAxis:{point1:{x:E[0],y:E[1]},point2:{x:T[0],y:T[1]}},shortAxis:{point1:{x:y[0],y:y[1]},point2:{x:M[0],y:M[1]}},longAxisLength:g,shortAxisLength:d,trackingIdentifierTextValue:C9e,finding:i,findingSites:o||[]}}}]),t}();Vh.toolType=mD;Vh.utilityToolType=mD;Vh.TID300Representation=Pz;Vh.isValidCornerstoneTrackingIdentifier=function(t){if(!t.includes(":"))return!1;var e=t.split(":"),n=Ja(e,2),r=n[0],a=n[1];return r!==ks?!1:a===mD};io.registerTool(Vh);var x3=1e-6,NC=typeof Float32Array<"u"?Float32Array:Array,y6=Math.random;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function LC(){var t=new NC(3);return NC!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function I9e(t){var e=new NC(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Rz(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function Tf(t,e,n){var r=new NC(3);return r[0]=t,r[1]=e,r[2]=n,r}function D9e(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function E9e(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function T9e(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function bz(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function Nz(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function Lz(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function y9e(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function M9e(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function _9e(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function O9e(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function w9e(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function P9e(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function A9e(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function nO(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2];return Math.hypot(n,r,a)}function Uz(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2];return n*n+r*r+a*a}function Fz(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function x9e(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function R9e(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function Xy(t,e){var n=e[0],r=e[1],a=e[2],i=n*n+r*r+a*a;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function UC(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function b9e(t,e,n){var r=e[0],a=e[1],i=e[2],o=n[0],s=n[1],c=n[2];return t[0]=a*c-i*s,t[1]=i*o-r*c,t[2]=r*s-a*o,t}function N9e(t,e,n,r){var a=e[0],i=e[1],o=e[2];return t[0]=a+r*(n[0]-a),t[1]=i+r*(n[1]-i),t[2]=o+r*(n[2]-o),t}function L9e(t,e,n,r,a,i){var o=i*i,s=o*(2*i-3)+1,c=o*(i-2)+i,l=o*(i-1),u=o*(3-2*i);return t[0]=e[0]*s+n[0]*c+r[0]*l+a[0]*u,t[1]=e[1]*s+n[1]*c+r[1]*l+a[1]*u,t[2]=e[2]*s+n[2]*c+r[2]*l+a[2]*u,t}function U9e(t,e,n,r,a,i){var o=1-i,s=o*o,c=i*i,l=s*o,u=3*i*s,f=3*c*o,v=c*i;return t[0]=e[0]*l+n[0]*u+r[0]*f+a[0]*v,t[1]=e[1]*l+n[1]*u+r[1]*f+a[1]*v,t[2]=e[2]*l+n[2]*u+r[2]*f+a[2]*v,t}function F9e(t,e){e=e||1;var n=y6()*2*Math.PI,r=y6()*2-1,a=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*a,t[1]=Math.sin(n)*a,t[2]=r*e,t}function V9e(t,e,n){var r=e[0],a=e[1],i=e[2],o=n[3]*r+n[7]*a+n[11]*i+n[15];return o=o||1,t[0]=(n[0]*r+n[4]*a+n[8]*i+n[12])/o,t[1]=(n[1]*r+n[5]*a+n[9]*i+n[13])/o,t[2]=(n[2]*r+n[6]*a+n[10]*i+n[14])/o,t}function k9e(t,e,n){var r=e[0],a=e[1],i=e[2];return t[0]=r*n[0]+a*n[3]+i*n[6],t[1]=r*n[1]+a*n[4]+i*n[7],t[2]=r*n[2]+a*n[5]+i*n[8],t}function G9e(t,e,n){var r=n[0],a=n[1],i=n[2],o=n[3],s=e[0],c=e[1],l=e[2],u=a*l-i*c,f=i*s-r*l,v=r*c-a*s,g=a*v-i*f,d=i*u-r*v,m=r*f-a*u,h=o*2;return u*=h,f*=h,v*=h,g*=2,d*=2,m*=2,t[0]=s+u+g,t[1]=c+f+d,t[2]=l+v+m,t}function B9e(t,e,n,r){var a=[],i=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],i[0]=a[0],i[1]=a[1]*Math.cos(r)-a[2]*Math.sin(r),i[2]=a[1]*Math.sin(r)+a[2]*Math.cos(r),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function W9e(t,e,n,r){var a=[],i=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],i[0]=a[2]*Math.sin(r)+a[0]*Math.cos(r),i[1]=a[1],i[2]=a[2]*Math.cos(r)-a[0]*Math.sin(r),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function H9e(t,e,n,r){var a=[],i=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],i[0]=a[0]*Math.cos(r)-a[1]*Math.sin(r),i[1]=a[0]*Math.sin(r)+a[1]*Math.cos(r),i[2]=a[2],t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function $9e(t,e){var n=t[0],r=t[1],a=t[2],i=e[0],o=e[1],s=e[2],c=Math.sqrt(n*n+r*r+a*a),l=Math.sqrt(i*i+o*o+s*s),u=c*l,f=u&&UC(t,e)/u;return Math.acos(Math.min(Math.max(f,-1),1))}function z9e(t){return t[0]=0,t[1]=0,t[2]=0,t}function q9e(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function j9e(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function Q9e(t,e){var n=t[0],r=t[1],a=t[2],i=e[0],o=e[1],s=e[2];return Math.abs(n-i)<=x3*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-o)<=x3*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(a-s)<=x3*Math.max(1,Math.abs(a),Math.abs(s))}var Yy=bz,K9e=Nz,X9e=Lz,Y9e=nO,Z9e=Uz,J9e=Rz,ePe=Fz,tPe=function(){var t=LC();return function(e,n,r,a,i,o){var s,c;for(n||(n=3),r||(r=0),a?c=Math.min(a*n+r,e.length):c=e.length,s=r;s<c;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],i(t,t,o),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2];return e}}(),Pg=Object.freeze({__proto__:null,add:T9e,angle:$9e,bezier:U9e,ceil:y9e,clone:I9e,copy:D9e,create:LC,cross:b9e,dist:Y9e,distance:nO,div:X9e,divide:Lz,dot:UC,equals:Q9e,exactEquals:j9e,floor:M9e,forEach:tPe,fromValues:Tf,hermite:L9e,inverse:R9e,len:J9e,length:Rz,lerp:N9e,max:O9e,min:_9e,mul:K9e,multiply:Nz,negate:x9e,normalize:Xy,random:F9e,rotateX:B9e,rotateY:W9e,rotateZ:H9e,round:w9e,scale:P9e,scaleAndAdd:A9e,set:E9e,sqrDist:Z9e,sqrLen:ePe,squaredDistance:Uz,squaredLength:Fz,str:q9e,sub:Yy,subtract:bz,transformMat3:k9e,transformMat4:V9e,transformQuat:G9e,zero:z9e}),hD="EllipticalROI",M6=1e-4,nPe="".concat(ks,":").concat(hD),kh=function(){function t(){Pt(this,t)}return At(t,null,[{key:"getMeasurementData",value:function(n,r,a,i){for(var o=io.getSetupMeasurementData(n,r,i,t.toolType),s=o.defaultState,c=o.NUMGroup,l=o.SCOORDGroup,u=o.ReferencedFrameNumber,f=s.annotation.metadata.referencedImageId,v=l.GraphicData,g=[],d=0;d<v.length;d+=2){var m=a(f,[v[d],v[d+1]]);g.push(m)}var h=Tf.apply(Pg,ns(g[0])),C=Tf.apply(Pg,ns(g[1])),p=Tf.apply(Pg,ns(g[2])),S=Tf.apply(Pg,ns(g[3])),I=LC();Yy(I,C,h),Xy(I,I);var D=LC();Yy(D,S,p),Xy(D,D);var E=i.get("imagePlaneModule",f);if(!E)throw new Error("imageId does not have imagePlaneModule metadata");var T=E.columnCosines,y=Tf.apply(Pg,ns(T)),M=UC(y,I),_=UC(y,D),O=Math.abs(M),w=Math.abs(_),x=[];Math.abs(O-1)<M6?x=[g[0],g[1],g[2],g[3]]:Math.abs(w-1)<M6?x=[g[2],g[3],g[0],g[1]]:console.warn("OBLIQUE ELLIPSE NOT YET SUPPORTED");var P=s;return P.annotation.data={handles:{points:ns(x),activeHandleIndex:0,textBox:{hasMoved:!1}},cachedStats:cD({},"imageId:".concat(f),{area:c?c.MeasuredValueSequence.NumericValue:0}),frameNumber:u},P}},{key:"getTID300RepresentationArguments",value:function(n,r){var a=n.data,i=n.finding,o=n.findingSites,s=n.metadata,c=a.cachedStats,l=c===void 0?{}:c,u=a.handles,f=s.referencedImageId;if(!f)throw new Error("EllipticalROI.getTID300RepresentationArguments: referencedImageId is not defined");var v=r(f,u.points[0]),g=r(f,u.points[1]),d=r(f,u.points[2]),m=r(f,u.points[3]),h=Math.abs(v[1]-g[1]),C=Math.abs(d[0]-m[0]),p=[];h>C?(p.push({x:v[0],y:v[1]}),p.push({x:g[0],y:g[1]}),p.push({x:d[0],y:d[1]}),p.push({x:m[0],y:m[1]})):(p.push({x:d[0],y:d[1]}),p.push({x:m[0],y:m[1]}),p.push({x:v[0],y:v[1]}),p.push({x:g[0],y:g[1]}));var S=l["imageId:".concat(f)]||{},I=S.area;return{area:I,points:p,trackingIdentifierTextValue:nPe,finding:i,findingSites:o||[]}}}]),t}();kh.toolType=hD;kh.utilityToolType=hD;kh.TID300Representation=K4;kh.isValidCornerstoneTrackingIdentifier=function(t){if(!t.includes(":"))return!1;var e=t.split(":"),n=Ja(e,2),r=n[0],a=n[1];return r!==ks?!1:a.toLowerCase()===hD.toLowerCase()};io.registerTool(kh);var pD="ArrowAnnotate",rPe="".concat(ks,":").concat(pD),_6=tO.codeValues,aPe=tO.CodingSchemeDesignator,Gh=function(){function t(){Pt(this,t)}return At(t,null,[{key:"getMeasurementData",value:function(n,r,a,i){for(var o=io.getSetupMeasurementData(n,r,i,t.toolType),s=o.defaultState,c=o.SCOORDGroup,l=o.ReferencedFrameNumber,u=s.annotation.metadata.referencedImageId,f=s.annotation.metadata.label,v=c.GraphicData,g=[],d=0;d<v.length;d+=2){var m=a(u,[v[d],v[d+1]]);g.push(m)}if(g.length===1){var h=i.get("imagePixelModule",u),C=10,p=10;if(h){var S=h.columns,I=h.rows;C=S/10,p=I/10}var D=a(u,[v[0]+C,v[1]+p]);g.push(D)}var E=s;return E.annotation.data={text:f,handles:{arrowFirst:!0,points:[g[0],g[1]],activeHandleIndex:0,textBox:{hasMoved:!1}},frameNumber:l},E}},{key:"getTID300RepresentationArguments",value:function(n,r){var a=n.data,i=n.metadata,o=n.finding,s=n.findingSites,c=i.referencedImageId;if(!c)throw new Error("ArrowAnnotate.getTID300RepresentationArguments: referencedImageId is not defined");var l=a.handles,u=l.points,f=l.arrowFirst,v;f?v=u[0]:v=u[1];var g=r(c,v),d={points:[{x:g[0],y:g[1]}],trackingIdentifierTextValue:rPe,findingSites:s||[]};return(!o||o.CodeValue!==_6.CORNERSTONEFREETEXT)&&(o={CodeValue:_6.CORNERSTONEFREETEXT,CodingSchemeDesignator:aPe,CodeMeaning:a.text}),d.finding=o,d}}]),t}();Gh.toolType=pD;Gh.utilityToolType=pD;Gh.TID300Representation=gD;Gh.isValidCornerstoneTrackingIdentifier=function(t){if(!t.includes(":"))return!1;var e=t.split(":"),n=Ja(e,2),r=n[0],a=n[1];return r!==ks?!1:a===pD};io.registerTool(Gh);var SD="Probe",iPe="".concat(ks,":").concat(SD),Bh=function(){function t(){Pt(this,t)}return At(t,null,[{key:"getMeasurementData",value:function(n,r,a,i){for(var o=io.getSetupMeasurementData(n,r,i,t.toolType),s=o.defaultState,c=o.SCOORDGroup,l=o.ReferencedFrameNumber,u=s.annotation.metadata.referencedImageId,f=c.GraphicData,v=[],g=0;g<f.length;g+=2){var d=a(u,[f[g],f[g+1]]);v.push(d)}var m=s;return m.annotation.data={handles:{points:v,activeHandleIndex:null,textBox:{hasMoved:!1}},frameNumber:l},m}},{key:"getTID300RepresentationArguments",value:function(n,r){var a=n.data,i=n.metadata,o=n.finding,s=n.findingSites,c=i.referencedImageId;if(!c)throw new Error("Probe.getTID300RepresentationArguments: referencedImageId is not defined");var l=a.handles.points,u=l.map(function(v){var g=r(c,v);return{x:g[0],y:g[1]}}),f={points:u,trackingIdentifierTextValue:iPe,findingSites:s||[],finding:o};return f}}]),t}();Bh.toolType=SD;Bh.utilityToolType=SD;Bh.TID300Representation=gD;Bh.isValidCornerstoneTrackingIdentifier=function(t){if(!t.includes(":"))return!1;var e=t.split(":"),n=Ja(e,2),r=n[0],a=n[1];return r!==ks?!1:a===SD};io.registerTool(Bh);var CD="PlanarFreehandROI",oPe="".concat(ks,":").concat(CD),sPe=1e-5,Wh=function(){function t(){Pt(this,t)}return At(t,null,[{key:"getMeasurementData",value:function(n,r,a,i){for(var o=io.getSetupMeasurementData(n,r,i,t.toolType),s=o.defaultState,c=o.SCOORDGroup,l=o.ReferencedFrameNumber,u=s.annotation.metadata.referencedImageId,f=c.GraphicData,v=[],g=0;g<f.length;g+=2){var d=a(u,[f[g],f[g+1]]);v.push(d)}var m=nO(v[v.length-1],v[0]),h=!0;m<sPe&&(v.pop(),h=!1);var C=[];h&&C.push(v[0],v[v.length-1]);var p=s;return p.annotation.data={polyline:v,isOpenContour:h,handles:{points:C,activeHandleIndex:null,textBox:{hasMoved:!1}},frameNumber:l},p}},{key:"getTID300RepresentationArguments",value:function(n,r){var a=n.data,i=n.finding,o=n.findingSites,s=n.metadata,c=a.isOpenContour,l=a.polyline,u=s.referencedImageId;if(!u)throw new Error("PlanarFreehandROI.getTID300RepresentationArguments: referencedImageId is not defined");var f=l.map(function(m){return r(u,m)});if(!c){var v=f[0];f.push([v[0],v[1]])}var g=0,d=0;return{points:f,area:g,perimeter:d,trackingIdentifierTextValue:oPe,finding:i,findingSites:o||[]}}}]),t}();Wh.toolType=CD;Wh.utilityToolType=CD;Wh.TID300Representation=vD;Wh.isValidCornerstoneTrackingIdentifier=function(t){if(!t.includes(":"))return!1;var e=t.split(":"),n=Ja(e,2),r=n[0],a=n[1];return r!==ks?!1:a===CD};io.registerTool(Wh);function cPe(t,e){var n=e.getTID300RepresentationArguments(t);return n.use3DSpatialCoordinates=!0,new e.TID300Representation(n)}function lPe(t,e){var n=il.MICROSCOPY_TOOL_CLASSES_BY_TOOL_TYPE[t],r=e.map(function(a){return cPe(a,n)});return new z4(r)}var il=function(){function t(){Pt(this,t)}return At(t,null,[{key:"generateReport",value:function(n,r,a){var i={};n.forEach(function(C){var p=C.scoord3d.graphicType;p!=="POINT"&&C.scoord3d.graphicData.map(function(S){return S.push(0)}),i[p]||(i[p]=[]),i[p].push(C.scoord3d)});var o=[],s=[];Object.keys(i).forEach(function(C){var p=i[C],S=lPe(C,p);S&&s.push(S),o=o.concat(s)});var c=new $4({TID1501MeasurementGroups:o},a),l=new Uint8Array(2);l[1]=1;var u="12.4",f="12.4",v={StudyInstanceUID:u,SeriesInstanceUID:f},g={FileMetaInformationVersion:{Value:[l.buffer],vr:"OB"},TransferSyntaxUID:{Value:["1.2.840.10008.1.2.1"],vr:"UI"},ImplementationClassUID:{Value:[Ea.uid()],vr:"UI"},ImplementationVersionName:{Value:["dcmjs"],vr:"SH"}},d={PixelData:"OW"};v._meta=g,v._vrMap=d;var m=new H4([v]),h=c.contentItem(v);return m.dataset=Object.assign(m.dataset,h),m.dataset._meta=g,m}},{key:"generateToolState",value:function(n){if(n.ContentTemplateSequence.TemplateIdentifier!=="1500")throw new Error("This package can currently only interpret DICOM SR TID 1500");var r="Imaging Measurements",a="Measurement Group",i=xa(n.ContentSequence).find(yv(r)),o=xa(i.ContentSequence).filter(yv(a)),s={};return o.forEach(function(c){Object.keys(t.MICROSCOPY_TOOL_CLASSES_BY_UTILITY_TYPE).forEach(function(l){var u=xa(c.ContentSequence),f=u.filter(Kwe(l.toUpperCase()));if(!(!f||f.length===0)){var v=t.MICROSCOPY_TOOL_CLASSES_BY_UTILITY_TYPE[l],g=v.toolType;if(!v.getMeasurementData)throw new Error("MICROSCOPY Tool Adapters must define a getMeasurementData static method.");s[g]||(s[g]=[]),s[g]=[].concat(ns(s[g]),ns(v.getMeasurementData(f)))}})}),s}},{key:"registerTool",value:function(n){t.MICROSCOPY_TOOL_CLASSES_BY_UTILITY_TYPE[n.utilityToolType]=n,t.MICROSCOPY_TOOL_CLASSES_BY_TOOL_TYPE[n.graphicType]=n,t.MEASUREMENT_BY_TOOLTYPE[n.graphicType]=n.utilityToolType}}]),t}();il.MEASUREMENT_BY_TOOLTYPE={};il.MICROSCOPY_TOOL_CLASSES_BY_UTILITY_TYPE={};il.MICROSCOPY_TOOL_CLASSES_BY_TOOL_TYPE={};var Hh=function(){function t(){Pt(this,t)}return At(t,null,[{key:"getMeasurementData",value:function(n){var r=n.map(function(a){return a.GraphicData}).filter(function(a){return function(i){return function(o){return!a.has(o)&&a.add(o)}(JSON.stringify(i))}}(new Set));return r.map(function(a){return a.reduce(function(i,o,s){var c=Math.floor(s/3);return i[c]=[].concat(i[c]||[],o),i},[])})}},{key:"getTID300RepresentationArguments",value:function(n){if(n.graphicType!=="POLYLINE")throw new Error("We expected a POLYLINE graphicType");var r=n.graphicData,a=1;return{points:r,lengths:a}}}]),t}();Hh.graphicType="POLYLINE";Hh.toolType="Polyline";Hh.utilityToolType="Polyline";Hh.TID300Representation=vD;il.registerTool(Hh);function uPe(t){var e=[];return t.forEach(function(n){e.push(n[0]),e.push(n[1]),n[2]!==void 0&&e.push(n[2])}),e}var fPe=function(t){Jt(e,t);function e(){return Pt(this,e),Zt(this,e,arguments)}return At(e,[{key:"contentItem",value:function(){var r=this.props,a=r.points,i=r.perimeter,o=r.unit,s=o===void 0?"mm":o,c=r.area,l=r.areaUnit,u=r.ReferencedSOPSequence,f=r.use3DSpatialCoordinates,v=f===void 0?!1:f,g=uPe(a);return this.getMeasurement([{RelationshipType:"CONTAINS",ValueType:"NUM",ConceptNameCodeSequence:{CodeValue:"G-A197",CodingSchemeDesignator:"SRT",CodeMeaning:"Perimeter"},MeasuredValueSequence:{MeasurementUnitsCodeSequence:u0(s),NumericValue:i},ContentSequence:{RelationshipType:"INFERRED FROM",ValueType:v?"SCOORD3D":"SCOORD",GraphicType:"POLYGON",GraphicData:g,ContentSequence:v?void 0:{RelationshipType:"SELECTED FROM",ValueType:"IMAGE",ReferencedSOPSequence:u}}},{RelationshipType:"CONTAINS",ValueType:"NUM",ConceptNameCodeSequence:{CodeValue:"G-A166",CodingSchemeDesignator:"SRT",CodeMeaning:"Area"},MeasuredValueSequence:{MeasurementUnitsCodeSequence:u0(l),NumericValue:c},ContentSequence:{RelationshipType:"INFERRED FROM",ValueType:v?"SCOORD3D":"SCOORD",GraphicType:"POLYGON",GraphicData:g,ContentSequence:v?void 0:{RelationshipType:"SELECTED FROM",ValueType:"IMAGE",ReferencedSOPSequence:u}}}])}}]),e}(Su),$h=function(){function t(){Pt(this,t)}return At(t,null,[{key:"getMeasurementData",value:function(n){var r=n.map(function(a){return a.GraphicData}).filter(function(a){return function(i){return function(o){return!a.has(o)&&a.add(o)}(JSON.stringify(i))}}(new Set));return r.map(function(a){return a.reduce(function(i,o,s){var c=Math.floor(s/3);return i[c]=[].concat(i[c]||[],o),i},[])})}},{key:"getTID300RepresentationArguments",value:function(n){if(n.graphicType!=="POLYGON")throw new Error("We expected a POLYGON graphicType");var r=n.graphicData,a=1;return{points:r,lengths:a}}}]),t}();$h.graphicType="POLYGON";$h.toolType="Polygon";$h.utilityToolType="Polygon";$h.TID300Representation=fPe;il.registerTool($h);var zh=function(){function t(){Pt(this,t)}return At(t,null,[{key:"getMeasurementData",value:function(n){var r=n.map(function(a){return a.GraphicData});return r.filter(function(a){return function(i){return function(o){return!a.has(o)&&a.add(o)}(JSON.stringify(i))}}(new Set))}},{key:"getTID300RepresentationArguments",value:function(n){if(n.graphicType!=="POINT")throw new Error("We expected a POINT graphicType");var r=[n.graphicData],a=1;return{points:r,lengths:a}}}]),t}();zh.graphicType="POINT";zh.toolType="Point";zh.utilityToolType="Point";zh.TID300Representation=gD;il.registerTool(zh);var qh=function(){function t(){Pt(this,t)}return At(t,null,[{key:"getMeasurementData",value:function(n){var r=n.map(function(a){return a.GraphicData}).filter(function(a){return function(i){return function(o){return!a.has(o)&&a.add(o)}(JSON.stringify(i))}}(new Set));return r.map(function(a){return a.reduce(function(i,o,s){var c=Math.floor(s/3);return i[c]=[].concat(i[c]||[],o),i},[])})}},{key:"getTID300RepresentationArguments",value:function(n){if(n.graphicType!=="CIRCLE")throw new Error("We expected a CIRCLE graphicType");var r=n.graphicData,a=1;return{points:r,lengths:a}}}]),t}();qh.graphicType="CIRCLE";qh.toolType="Circle";qh.utilityToolType="Circle";qh.TID300Representation=Az;il.registerTool(qh);var jh=function(){function t(){Pt(this,t)}return At(t,null,[{key:"getMeasurementData",value:function(n){var r=n.map(function(a){return a.GraphicData}).filter(function(a){return function(i){return function(o){return!a.has(o)&&a.add(o)}(JSON.stringify(i))}}(new Set));return r.map(function(a){return a.reduce(function(i,o,s){var c=Math.floor(s/3);return i[c]=[].concat(i[c]||[],o),i},[])})}},{key:"getTID300RepresentationArguments",value:function(n){if(n.graphicType!=="Ellipse")throw new Error("We expected a Ellipse graphicType");var r=n.graphicData,a=1;return{points:r,lengths:a}}}]),t}();jh.graphicType="ELLIPSE";jh.toolType="Ellipse";jh.utilityToolType="Ellipse";jh.TID300Representation=K4;il.registerTool(jh);Mz.setDicomMessageClass(W4);Gr.setDicomMessageClass(W4);Gr.setTagClass(bd);bd.setDicomMessageClass(W4);const Vz={};function vPe(t,e){const n=ca(t);Vz[n]=e}function gPe(t,e){if(t==="scalingModule"){const n=ca(e);return Vz[n]}}const O6={addInstance:vPe,get:gPe},{calibratedPixelSpacingMetadataProvider:w6}=Zn;function dPe(){qc(O6.get.bind(O6),1e4),qc(w6.get.bind(w6),11e3)}function mPe(){KU($S),zS("cornerstoneStreamingImageVolume",$S),zS("cornerstoneStreamingDynamicImageVolume",fV)}var oS={exports:{}},hf={},R3,P6;function hPe(){if(P6)return R3;P6=1;const t="bold|bolder|lighter|[1-9]00",e="italic|oblique",n="small-caps",r="ultra-condensed|extra-condensed|condensed|semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded",a="px|pt|pc|in|cm|mm|%|em|ex|ch|rem|q",i=/'((\\'|[^'])+)'|"((\\"|[^"])+)"|[\w\s-]+/.source,o=new RegExp(`(${t}) +`,"i"),s=new RegExp(`(${e}) +`,"i"),c=new RegExp(`(${n}) +`,"i"),l=new RegExp(`(${r}) +`,"i"),u=new RegExp(i,"g"),f=/^['"](.*)['"]$/,v=/\\(['"])/g,g=new RegExp(`([\\d\\.]+)(${a}) *((?:${i})( *, *(?:${i}))*)`),d={},m=16;return R3=h=>{if(d[h])return d[h];const C=g.exec(h);if(!C)return;const p=C[3].match(u).map(M=>M.trim().replace(f,"$1").replace(v,"$1")).filter(M=>!!M),S={weight:"normal",style:"normal",stretch:"normal",variant:"normal",size:parseFloat(C[1]),unit:C[2],family:p.join(",")};let I,D,E,T;const y=h.substring(0,C.index);switch((I=o.exec(y))&&(S.weight=I[1]),(D=s.exec(y))&&(S.style=D[1]),(E=c.exec(y))&&(S.variant=E[1]),(T=l.exec(y))&&(S.stretch=T[1]),S.unit){case"pt":S.size/=.75;break;case"pc":S.size*=16;break;case"in":S.size*=96;break;case"cm":S.size*=96/2.54;break;case"mm":S.size*=96/25.4;break;case"%":break;case"em":case"rem":S.size*=m/.75;break;case"q":S.size*=96/25.4/4;break}return d[h]=S},R3}var A6;function pPe(){if(A6)return hf;A6=1;const t=hPe();return hf.parseFont=t,hf.createCanvas=function(e,n){return Object.assign(document.createElement("canvas"),{width:e,height:n})},hf.createImageData=function(e,n,r){switch(arguments.length){case 0:return new ImageData;case 1:return new ImageData(e);case 2:return new ImageData(e,n);default:return new ImageData(e,n,r)}},hf.loadImage=function(e,n){return new Promise(function(r,a){const i=Object.assign(document.createElement("img"),n);function o(){i.onload=null,i.onerror=null}i.onload=function(){o(),r(i)},i.onerror=function(){o(),a(new Error('Failed to load the image "'+e+'"'))},i.src=e})},hf}var SPe=oS.exports,x6;function CPe(){return x6||(x6=1,function(t){var e=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")},n=function(){if(typeof globalThis=="object"&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return e()}try{return __global__||e()}finally{delete Object.prototype.__global__}},r=function(){const a=n();return typeof a.process<"u"&&a.process.versions&&a.process.versions.node};(function(a,i){t.exports?t.exports=i():a.resemble=i()})(SPe,function(){var a,i,o;r()?(i=pPe(),a=i.Image,o=i.loadImage):a=Image;function s(g,d){if(r())return i.createCanvas(g,d);var m=document.createElement("canvas");return m.width=g,m.height=d,m}var c={},l=c,u=function(g){var d=1,m={red:255,green:0,blue:255,alpha:255},h={r:0,g:0,b:0,a:0},C={flat:function(fe,q){fe[q]=m.red,fe[q+1]=m.green,fe[q+2]=m.blue,fe[q+3]=m.alpha},movement:function(fe,q,Pe,Le){fe[q]=(Le.r*(m.red/255)+m.red)/2,fe[q+1]=(Le.g*(m.green/255)+m.green)/2,fe[q+2]=(Le.b*(m.blue/255)+m.blue)/2,fe[q+3]=Le.a},flatDifferenceIntensity:function(fe,q,Pe,Le){fe[q]=m.red,fe[q+1]=m.green,fe[q+2]=m.blue,fe[q+3]=F(Pe,Le)},movementDifferenceIntensity:function(fe,q,Pe,Le){var Ue=F(Pe,Le)/255*.8;fe[q]=(1-Ue)*(Le.r*(m.red/255))+Ue*m.red,fe[q+1]=(1-Ue)*(Le.g*(m.green/255))+Ue*m.green,fe[q+2]=(1-Ue)*(Le.b*(m.blue/255))+Ue*m.blue,fe[q+3]=Le.a},diffOnly:function(fe,q,Pe,Le){fe[q]=Le.r,fe[q+1]=Le.g,fe[q+2]=Le.b,fe[q+3]=Le.a}},p=C.flat,S,I,D,E,T=1200,y=!0,M={},_=[],O=[],w={red:16,green:16,blue:16,alpha:16,minBrightness:16,maxBrightness:240},x=!1,P=!1,R=!1,L=!1,H;function F(fe,q){return(Math.abs(fe.r-q.r)+Math.abs(fe.g-q.g)+Math.abs(fe.b-q.b))/3}function U(fe,q,Pe,Le,Ue){return fe>(Ue.left||0)&&fe<(Ue.right||Pe)&&q>(Ue.top||0)&&q<(Ue.bottom||Le)}function V(fe,q,Pe,Le,Ue){var Me=!0,Be,nt,Ze,at,Ot;if(I instanceof Array){for(at=!1,Be=0;Be<I.length;Be++)if(nt=I[Be],U(fe,q,Pe,Le,nt)){at=!0;break}}if(D instanceof Array){for(Ot=!0,Be=0;Be<D.length;Be++)if(Ze=D[Be],U(fe,q,Pe,Le,Ze)){Ot=!1;break}}return E?F(Ue,E)!==0:at===void 0&&Ot===void 0?!0:at===!1&&Ot===!0?!1:((at===!0||Ot===!0)&&(Me=!0),(at===!1||Ot===!1)&&(Me=!1),Me)}function X(){var fe=O.length,q;for(q=0;q<fe;q++)typeof O[q]=="function"&&O[q](M)}function re(fe,q,Pe){var Le,Ue;for(Le=0;Le<fe;Le++)for(Ue=0;Ue<q;Ue++)Pe(Le,Ue)}function ue(fe,q,Pe){var Le=0,Ue=0,Me=0,Be=0,nt=0,Ze=0,at=0,Ot=0;re(q,Pe,function(Oe,$e){var ht=($e*q+Oe)*4,Ut=fe[ht],Qt=fe[ht+1],Rt=fe[ht+2],Dn=fe[ht+3],jn=Ne(Ut,Qt,Rt);Ut===Qt&&Ut===Rt&&Dn&&(Ut===0?Ot++:Ut===255&&at++),Le++,Ue+=Ut/255*100,Me+=Qt/255*100,Be+=Rt/255*100,nt+=(255-Dn)/255*100,Ze+=jn/255*100}),M.red=Math.floor(Ue/Le),M.green=Math.floor(Me/Le),M.blue=Math.floor(Be/Le),M.alpha=Math.floor(nt/Le),M.brightness=Math.floor(Ze/Le),M.white=Math.floor(at/Le*100),M.black=Math.floor(Ot/Le*100),X()}function De(fe,q){var Pe=fe.width,Le=fe.height;R&&_.length===1&&(Pe=_[0].width,Le=_[0].height);var Ue=s(Pe,Le),Me;Ue.getContext("2d").drawImage(fe,0,0,Pe,Le),Me=Ue.getContext("2d").getImageData(0,0,Pe,Le),_.push(Me),q(Me,Pe,Le)}function pe(fe,q){var Pe,Le=new a;Le.setAttribute||(Le.setAttribute=function(){}),y&&Le.setAttribute("crossorigin","anonymous"),Le.onerror=function(Ue){Le.onload=null,Le.onerror=null;const Me=Ue?Ue+"":"Unknown error";_.push({error:`Failed to load image '${fe}'. ${Me}`}),q()},Le.onload=function(){Le.onload=null,Le.onerror=null,De(Le,q)},typeof fe=="string"?(Le.src=fe,!r()&&Le.complete&&Le.naturalWidth>0&&Le.onload()):typeof fe.data<"u"&&typeof fe.width=="number"&&typeof fe.height=="number"?(_.push(fe),q(fe,fe.width,fe.height)):typeof Buffer<"u"&&fe instanceof Buffer?o(fe).then(function(Ue){Le.onload=null,Le.onerror=null,De(Ue,q)}).catch(function(Ue){_.push({error:Ue?Ue+"":"Image load error."}),q()}):(Pe=new FileReader,Pe.onload=function(Ue){Le.src=Ue.target.result},Pe.readAsDataURL(fe))}function Te(fe,q,Pe){var Le=Math.abs(fe-q);return typeof fe>"u"||typeof q>"u"?!1:fe===q?!0:Le<w[Pe]}function Fe(fe,q){var Pe=Te(fe.a,q.a,"alpha"),Le=Te(fe.brightness,q.brightness,"minBrightness");return Le&&Pe}function Ne(fe,q,Pe){return .3*fe+.59*q+.11*Pe}function Re(fe,q){var Pe=fe.r===q.r,Le=fe.g===q.g,Ue=fe.b===q.b;return Pe&&Le&&Ue}function k(fe,q){var Pe=Te(fe.r,q.r,"red"),Le=Te(fe.g,q.g,"green"),Ue=Te(fe.b,q.b,"blue"),Me=Te(fe.a,q.a,"alpha");return Pe&&Le&&Ue&&Me}function A(fe,q){return Math.abs(fe.brightness-q.brightness)>w.maxBrightness}function b(fe,q,Pe){var Le=fe/255,Ue=q/255,Me=Pe/255,Be=Math.max(Le,Ue,Me),nt=Math.min(Le,Ue,Me),Ze,at;if(Be===nt)Ze=0;else switch(at=Be-nt,Be){case Le:Ze=(Ue-Me)/at+(Ue<Me?6:0);break;case Ue:Ze=(Me-Le)/at+2;break;case Me:Ze=(Le-Ue)/at+4;break;default:Ze/=6}return Ze}function N(fe,q,Pe,Le,Ue,Me){var Be,nt=1,Ze,at,Ot=0,Oe=0,$e=0;for(ye(fe),Ze=nt*-1;Ze<=nt;Ze++)for(at=nt*-1;at<=nt;at++)if(!(Ze===0&&at===0)){if(Be=((Le+at)*Me+(Ue+Ze))*4,!K(h,q,Be))continue;if(ge(h),ye(h),A(fe,h)&&Ot++,Re(fe,h)&&$e++,Math.abs(h.h-fe.h)>.3&&Oe++,Oe>1||Ot>1)return!0}return $e<2}function W(fe,q,Pe){S!=="diffOnly"&&(fe[q]=Pe.r,fe[q+1]=Pe.g,fe[q+2]=Pe.b,fe[q+3]=Pe.a*d)}function j(fe,q,Pe){S!=="diffOnly"&&(fe[q]=Pe.brightness,fe[q+1]=Pe.brightness,fe[q+2]=Pe.brightness,fe[q+3]=Pe.a*d)}function K(fe,q,Pe){return q.length>Pe?(fe.r=q[Pe],fe.g=q[Pe+1],fe.b=q[Pe+2],fe.a=q[Pe+3],!0):!1}function ge(fe){fe.brightness=Ne(fe.r,fe.g,fe.b)}function ye(fe){fe.h=b(fe.r,fe.g,fe.b)}function we(fe,q,Pe,Le){var Ue=fe.data,Me=q.data,Be,nt,Ze,at;L||(Be=s(Pe,Le),nt=Be.getContext("2d"),Ze=nt.createImageData(Pe,Le),at=Ze.data);var Ot=0,Oe={top:Le,left:Pe,bottom:0,right:0},$e=function(jn,xn){Oe.left=Math.min(jn,Oe.left),Oe.right=Math.max(jn,Oe.right),Oe.top=Math.min(xn,Oe.top),Oe.bottom=Math.max(xn,Oe.bottom)},ht=Date.now(),Ut;T&&x&&(Pe>T||Le>T)&&(Ut=6);var Qt={r:0,g:0,b:0,a:0},Rt={r:0,g:0,b:0,a:0},Dn=!1;re(Pe,Le,function(jn,xn){if(!Dn&&!(Ut&&(xn%Ut===0||jn%Ut===0))){var Qe=(xn*Pe+jn)*4;if(!(!K(Qt,Ue,Qe)||!K(Rt,Me,Qe))){var Et=V(jn,xn,Pe,Le,Rt);if(P){ge(Qt),ge(Rt),Fe(Qt,Rt)||!Et?L||j(at,Qe,Rt):(L||p(at,Qe,Qt,Rt),Ot++,$e(jn,xn));return}if(k(Qt,Rt)||!Et?L||W(at,Qe,Qt):x&&(ge(Qt),ge(Rt),N(Qt,Ue,1,xn,jn,Pe)||N(Rt,Me,2,xn,jn,Pe))&&(Fe(Qt,Rt)||!Et)?L||j(at,Qe,Rt):(L||p(at,Qe,Qt,Rt),Ot++,$e(jn,xn)),L){var $t=Ot/(Le*Pe)*100;$t>H&&(Dn=!0)}}}}),M.rawMisMatchPercentage=Ot/(Le*Pe)*100,M.misMatchPercentage=M.rawMisMatchPercentage.toFixed(2),M.diffBounds=Oe,M.analysisTime=Date.now()-ht,M.getImageDataUrl=function(jn){if(L)throw Error("No diff image available - ran in compareOnly mode");var xn=0;return jn&&(xn=be(jn,nt,Be)),nt.putImageData(Ze,0,xn),Be.toDataURL("image/png")},!L&&Be.toBuffer&&(M.getBuffer=function(jn){if(jn){var xn=Be.width+2;Be.width=xn*3,nt.putImageData(fe,0,0),nt.putImageData(q,xn,0),nt.putImageData(Ze,xn*2,0)}else nt.putImageData(Ze,0,0);return Be.toBuffer()})}function be(fe,q,Pe){var Le=2;q.font="12px sans-serif";var Ue=q.measureText(fe).width+Le*2,Me=22;return Ue>Pe.width&&(Pe.width=Ue),Pe.height+=Me,q.fillStyle="#666",q.fillRect(0,0,Pe.width,Me-4),q.fillStyle="#fff",q.fillRect(0,Me-4,Pe.width,4),q.fillStyle="#fff",q.textBaseline="top",q.font="12px sans-serif",q.fillText(fe,Le,1),Me}function Z(fe,q,Pe){var Le,Ue;return fe.height<Pe||fe.width<q?(Le=s(q,Pe),Ue=Le.getContext("2d"),Ue.putImageData(fe,0,0),Ue.getImageData(0,0,q,Pe)):fe}function ie(fe){var q;if(fe.errorColor)for(q in fe.errorColor)fe.errorColor.hasOwnProperty(q)&&(m[q]=fe.errorColor[q]===void 0?m[q]:fe.errorColor[q]);fe.errorType&&C[fe.errorType]&&(p=C[fe.errorType],S=fe.errorType),fe.errorPixel&&typeof fe.errorPixel=="function"&&(p=fe.errorPixel),d=isNaN(Number(fe.transparency))?d:fe.transparency,fe.largeImageThreshold!==void 0&&(T=fe.largeImageThreshold),fe.useCrossOrigin!==void 0&&(y=fe.useCrossOrigin),fe.boundingBox!==void 0&&(I=[fe.boundingBox]),fe.ignoredBox!==void 0&&(D=[fe.ignoredBox]),fe.boundingBoxes!==void 0&&(I=fe.boundingBoxes),fe.ignoredBoxes!==void 0&&(D=fe.ignoredBoxes),fe.ignoreAreasColoredWith!==void 0&&(E=fe.ignoreAreasColoredWith)}function he(fe,q){l!==c&&ie(l);function Pe(){var Le,Ue;if(_.length===2){if(_[0].error||_[1].error){M={},M.error=_[0].error?_[0].error:_[1].error,X();return}Le=_[0].width>_[1].width?_[0].width:_[1].width,Ue=_[0].height>_[1].height?_[0].height:_[1].height,_[0].width===_[1].width&&_[0].height===_[1].height?M.isSameDimensions=!0:M.isSameDimensions=!1,M.dimensionDifference={width:_[0].width-_[1].width,height:_[0].height-_[1].height},we(Z(_[0],Le,Ue),Z(_[1],Le,Ue),Le,Ue),X()}}_=[],pe(fe,Pe),pe(q,Pe)}function se(fe){var q,Pe=typeof fe=="function";Pe||(q=fe);var Le={setReturnEarlyThreshold:function(Ue){return Ue&&(L=!0,H=Ue),Le},scaleToSameSize:function(){return R=!0,Pe&&fe(),Le},useOriginalSize:function(){return R=!1,Pe&&fe(),Le},ignoreNothing:function(){return w.red=0,w.green=0,w.blue=0,w.alpha=0,w.minBrightness=0,w.maxBrightness=255,x=!1,P=!1,Pe&&fe(),Le},ignoreLess:function(){return w.red=16,w.green=16,w.blue=16,w.alpha=16,w.minBrightness=16,w.maxBrightness=240,x=!1,P=!1,Pe&&fe(),Le},ignoreAntialiasing:function(){return w.red=32,w.green=32,w.blue=32,w.alpha=32,w.minBrightness=64,w.maxBrightness=96,x=!0,P=!1,Pe&&fe(),Le},ignoreColors:function(){return w.alpha=16,w.minBrightness=16,w.maxBrightness=240,x=!1,P=!0,Pe&&fe(),Le},ignoreAlpha:function(){return w.red=16,w.green=16,w.blue=16,w.alpha=255,w.minBrightness=16,w.maxBrightness=240,x=!1,P=!1,Pe&&fe(),Le},repaint:function(){return Pe&&fe(),Le},outputSettings:function(Ue){return ie(Ue),Le},onComplete:function(Ue){O.push(Ue);var Me=function(){he(g,q)};return Me(),se(Me)},setupCustomTolerance:function(Ue){for(var Me in w)Ue.hasOwnProperty(Me)&&(w[Me]=Ue[Me])}};return Le}var me={onComplete:function(fe){O.push(fe),pe(g,function(q,Pe,Le){ue(q.data,Pe,Le)})},compareTo:function(fe){return se(fe)},outputSettings:function(fe){return ie(fe),me}};return me};function f(g){return l=g,u}function v(g,d,m){switch(d){case"nothing":g.ignoreNothing();break;case"less":g.ignoreLess();break;case"antialiasing":g.ignoreAntialiasing();break;case"colors":g.ignoreColors();break;case"alpha":g.ignoreAlpha();break;default:throw new Error("Invalid ignore: "+d)}g.setupCustomTolerance(m)}return u.compare=function(g,d,m,h){var C,p;typeof m=="function"?(C=m,p={}):(C=h,p=m||{});var S=u(g),I;p.output&&S.outputSettings(p.output),I=S.compareTo(d),p.returnEarlyThreshold&&I.setReturnEarlyThreshold(p.returnEarlyThreshold),p.scaleToSameSize&&I.scaleToSameSize();var D=p.tolerance||{};typeof p.ignore=="string"?v(I,p.ignore,D):p.ignore&&p.ignore.forEach&&p.ignore.forEach(function(E){v(I,E,D)}),I.onComplete(function(E){E.error?C(E.error):C(null,E)})},u.outputSettings=f,u})}(oS)),oS.exports}CPe();const IPe=t=>{const e=kz(t),{rows:n,columns:r,barStart:a,barWidth:i,xSpacing:o,ySpacing:s,rgb:c,id:l}=e,u=c?3:1,f=new Uint8Array(n*r*u),v=yo.createImageVoxelManager({height:n,width:r,numberOfComponents:u,scalarData:f}),g={rows:n,columns:r,width:r,height:n,imageId:t,intercept:0,slope:1,voxelManager:v,invert:!1,windowCenter:40,windowWidth:400,maxPixelValue:255,minPixelValue:0,rowPixelSpacing:s,columnPixelSpacing:o,getPixelData:()=>v.getScalarData(),sizeInBytes:n*r*1,FrameOfReferenceUID:"Stack_Frame_Of_Reference",imageFrame:{photometricInterpretation:c?"RGB":"MONOCHROME2"}};return c?MPe(v,n,r,a,i):yPe(v,n,r,a,i),{promise:Promise.resolve(g)}};function DPe(t,e){if(!e.startsWith("fakeImageLoader")||e.startsWith("derived")||Array.isArray(e))return;if(typeof e!="string")throw new Error(`Expected imageId to be of type string, but received ${e}`);const n=kz(e);if(!n)return;const{rows:r,columns:a,barStart:i,barWidth:o,xSpacing:s,ySpacing:c,sliceIndex:l=0,rgb:u,PT:f=!1,id:v}=n,g=f?"PT":"MR",d=u?"RGB":"MONOCHROME2";if(t==="imagePixelModule")return{photometricInterpretation:d,rows:r,columns:a,samplesPerPixel:u?3:1,bitsAllocated:u?24:8,bitsStored:u?24:8,highBit:u?24:8,pixelRepresentation:0};if(t==="generalSeriesModule")return{modality:g};if(t==="scalingModule")return{suvbw:100,suvlbm:100,suvbsa:100};if(t==="imagePlaneModule")return{rows:r,columns:a,width:r,height:a,imageOrientationPatient:[1,0,0,0,1,0],rowCosines:[1,0,0],columnCosines:[0,1,0],imagePositionPatient:[0,0,l],pixelSpacing:[s,c],rowPixelSpacing:c,columnPixelSpacing:s};if(t==="voiLutModule")return{windowWidth:void 0,windowCenter:void 0};if(t==="modalityLutModule")return{rescaleSlope:void 0,rescaleIntercept:void 0}}const rO=[[255,0,0],[0,255,0],[128,0,0],[0,0,255],[0,128,0],[255,255,0],[0,255,255],[0,0,0],[0,0,128],[255,0,255]];Object.freeze(rO);function EPe(t){return`fakeImageLoader:${encodeURIComponent(JSON.stringify(t))}`}function kz(t){const[e,n]=t.split(":");return e!=="fakeImageLoader"?null:JSON.parse(decodeURIComponent(n))}function TPe(t){const[e,n]=t.split(":");return e!=="fakeVolumeLoader"?null:JSON.parse(decodeURIComponent(n))}function yPe(t,e,n,r,a,i=0){for(let o=0;o<e;o++)for(let s=r;s<r+a;s++)t.setAtIJK(s,o,i,255)}function MPe(t,e,n,r,a){let i=r;rO.forEach(o=>{for(let s=0;s<e;s++)for(let c=i;c<i+a;c++)t.setAtIJK(c,s,0,o);i+=a})}function _Pe(t,e,n,r){let a=0;const i=Math.floor(e/r);for(let o=0;o<r;o++){for(let s=0;s<e;s++)for(let c=a;c<a+i;c++)t.setAtIJK(c,s,o,255);a+=i}}function OPe(t,e,n,r,a){const{startRow:i,startColumn:o,startSlice:s,endRow:c,endColumn:l,endSlice:u,value:f=1}=a;for(let v=s;v<u;v++)for(let g=i;g<c;g++)for(let d=o;d<l;d++)t.setAtIJK(d,g,v,f)}function wPe(t,e,n,r){let a;a=new Uint8Array(e*n*r*3);for(let i=0;i<r;i++)for(let o=0;o<e;o++)for(let s=0;s<n;s++)t.setAtIJK(s,o,i,rO[i]);return a}const PPe=t=>{const e=TPe(t),{name:n,rows:r,columns:a,slices:i,xSpacing:o,ySpacing:s,zSpacing:c,rgb:l=0,PT:u=!1,exactRegion:f={},id:v}=e,g=[r,a,i],d=l?"RGB":"MONOCHROME2",m=new Array(i).fill().map((I,D)=>EPe({loader:"fakeImageLoader",name:v,id:v,rows:r,columns:a,xSpacing:o,ySpacing:s,rgb:l?1:0,sliceIndex:D})),h={BitsAllocated:l?24:8,BitsStored:l?24:8,SamplesPerPixel:l?3:1,HighBit:l?24:8,PixelRepresentation:0,PhotometricInterpretation:d,FrameOfReferenceUID:"Volume_Frame_Of_Reference",ImageOrientationPatient:[1,0,0,0,1,0],PixelSpacing:[o,s,c],Columns:a,Rows:r},C=l?3:1;m.forEach((I,D)=>{const E=yo.createImageVoxelManager({width:a,height:r,scalarData:new Uint8Array(r*a*C),numberOfComponents:C}),T={rows:r,columns:a,width:a,height:r,imageId:I,intercept:0,slope:1,invert:!1,windowCenter:40,windowWidth:400,maxPixelValue:255,minPixelValue:0,voxelManager:E,rowPixelSpacing:s,columnPixelSpacing:o,getPixelData:()=>E.getScalarData(),sizeInBytes:r*a*C,FrameOfReferenceUID:"Stack_Frame_Of_Reference",imageFrame:{photometricInterpretation:l?"RGB":"MONOCHROME2"}};Ye.putImageSync(I,T)});const p=yo.createImageVolumeVoxelManager({dimensions:g,imageIds:m,numberOfComponents:C});l?wPe(p,r,a,i):Object.keys(f).length>0?OPe(p,r,a,i,f):_Pe(p,r,a,i),Ye._imageCache;const S=new H1({dataType:"Uint8Array",volumeId:t,metadata:h,dimensions:g,voxelManager:p,spacing:[1,1,1],origin:[0,0,0],direction:[1,0,0,0,1,0,0,0,1],numberOfComponents:C,imageIds:m});return S.modified(),{promise:Promise.resolve(S)}};window.cornerstone=hve;window.cornerstoneTools=sD;async function APe(t){dPe(),zde.init(),mPe(),await nU({peerImport:xPe}),await cW(),zS("fakeVolumeLoader",PPe),Wl("fakeImageLoader",IPe),qc(DPe,1e4)}async function xPe(t){if(t==="dicom-microscopy-viewer")return importGlobal("/dicom-microscopy-viewer/dicomMicroscopyViewer.min.js","dicomMicroscopyViewer");if(t==="@icr/polyseg-wasm")return S_(()=>import("@icr/polyseg-wasm"),[])}const{RectangleScissorsTool:R6,SphereScissorsTool:Zy,CircleScissorsTool:b6,BrushTool:V1,PaintFillTool:N6}=sD,Gz={0:[255,255,255,128],1:[0,255,255,255]},RPe={enabled:!0,previewColors:Gz},FC={preview:RPe,strategySpecificConfiguration:{useCenterSegmentIndex:!1}},Qh={preview:{enabled:!1,previewColors:Gz},strategySpecificConfiguration:{useCenterSegmentIndex:!1}},ol=new Map;ol.set("Dynamic Radius 0",{isDynamic:!0,dynamicRadius:0});ol.set("Dynamic Radius 1",{isDynamic:!0,dynamicRadius:1});ol.set("Dynamic Radius 2",{isDynamic:!0,dynamicRadius:2});ol.set("Dynamic Radius 3",{isDynamic:!0,dynamicRadius:3});ol.set("Use Existing Threshold",{isDynamic:!1,dynamicRadius:5});ol.set("CT Fat: (-150, -70)",{threshold:[-150,-70],isDynamic:!1});ol.set("CT Bone: (200, 1000)",{threshold:[200,1e3],isDynamic:!1});const bPe=[...ol.keys()][2],Bz=ol.get(bPe),g0=new Map;g0.set("ThresholdCircle",{tool:V1,baseTool:V1.toolName,configuration:{...FC,activeStrategy:"THRESHOLD_INSIDE_CIRCLE",strategySpecificConfiguration:{...FC.strategySpecificConfiguration,THRESHOLD:{...Bz}}}});g0.set("ThresholdSphere",{baseTool:V1.toolName,configuration:{...FC,activeStrategy:"THRESHOLD_INSIDE_SPHERE_WITH_ISLAND_REMOVAL",strategySpecificConfiguration:{...FC.strategySpecificConfiguration,THRESHOLD:{...Bz}}}});g0.set("CircularBrush",{baseTool:V1.toolName,configuration:{...Qh,activeStrategy:"FILL_INSIDE_CIRCLE"}});g0.set("CircularEraser",{baseTool:V1.toolName,configuration:{...Qh,activeStrategy:"ERASE_INSIDE_CIRCLE"}});g0.set("SphereBrush",{baseTool:V1.toolName,configuration:{...Qh,activeStrategy:"FILL_INSIDE_SPHERE"}});g0.set("SphereEraser",{baseTool:V1.toolName,configuration:{...Qh,activeStrategy:"ERASE_INSIDE_SPHERE"}});g0.set(R6.toolName,{tool:R6});g0.set(b6.toolName,{tool:b6});g0.set(Zy.toolName,{tool:Zy});g0.set("SphereScissorsEraser",{baseTool:Zy.toolName,configuration:{...Qh,activeStrategy:"ERASE_INSIDE"}});g0.set(N6.toolName,{tool:N6});var pf={},En={},b3={},L6;function NPe(){return L6||(L6=1,function(t){var e={};t.default=function(n,r,a,i,o){var s=new Worker(e[r]||(e[r]=URL.createObjectURL(new Blob([n+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))));return s.onmessage=function(c){var l=c.data,u=l.$e$;if(u){var f=new Error(u[0]);f.code=u[1],f.stack=u[2],o(f,null)}else o(null,l)},s.postMessage(a,i),s}}(b3)),b3}var U6;function LPe(){if(U6)return En;U6=1;var t=NPe(),e=Uint8Array,n=Uint16Array,r=Uint32Array,a=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(ee,Y){for(var le=new n(31),Ce=0;Ce<31;++Ce)le[Ce]=Y+=1<<ee[Ce-1];for(var ze=new r(le[30]),Ce=1;Ce<30;++Ce)for(var rt=le[Ce];rt<le[Ce+1];++rt)ze[rt]=rt-le[Ce]<<5|Ce;return[le,ze]},c=s(a,2),l=c[0],u=c[1];l[28]=258,u[258]=28;for(var f=s(i,0),v=f[0],g=f[1],d=new n(32768),m=0;m<32768;++m){var h=(m&43690)>>>1|(m&21845)<<1;h=(h&52428)>>>2|(h&13107)<<2,h=(h&61680)>>>4|(h&3855)<<4,d[m]=((h&65280)>>>8|(h&255)<<8)>>>1}for(var C=function(ee,Y,le){for(var Ce=ee.length,ze=0,rt=new n(Y);ze<Ce;++ze)ee[ze]&&++rt[ee[ze]-1];var ct=new n(Y);for(ze=0;ze<Y;++ze)ct[ze]=ct[ze-1]+rt[ze-1]<<1;var et;if(le){et=new n(1<<Y);var It=15-Y;for(ze=0;ze<Ce;++ze)if(ee[ze])for(var gt=ze<<4|ee[ze],mt=Y-ee[ze],bt=ct[ee[ze]-1]++<<mt,kt=bt|(1<<mt)-1;bt<=kt;++bt)et[d[bt]>>>It]=gt}else for(et=new n(Ce),ze=0;ze<Ce;++ze)ee[ze]&&(et[ze]=d[ct[ee[ze]-1]++]>>>15-ee[ze]);return et},p=new e(288),m=0;m<144;++m)p[m]=8;for(var m=144;m<256;++m)p[m]=9;for(var m=256;m<280;++m)p[m]=7;for(var m=280;m<288;++m)p[m]=8;for(var S=new e(32),m=0;m<32;++m)S[m]=5;var I=C(p,9,0),D=C(p,9,1),E=C(S,5,0),T=C(S,5,1),y=function(ee){for(var Y=ee[0],le=1;le<ee.length;++le)ee[le]>Y&&(Y=ee[le]);return Y},M=function(ee,Y,le){var Ce=Y/8|0;return(ee[Ce]|ee[Ce+1]<<8)>>(Y&7)&le},_=function(ee,Y){var le=Y/8|0;return(ee[le]|ee[le+1]<<8|ee[le+2]<<16)>>(Y&7)},O=function(ee){return(ee+7)/8|0},w=function(ee,Y,le){(Y==null||Y<0)&&(Y=0),(le==null||le>ee.length)&&(le=ee.length);var Ce=new(ee.BYTES_PER_ELEMENT==2?n:ee.BYTES_PER_ELEMENT==4?r:e)(le-Y);return Ce.set(ee.subarray(Y,le)),Ce};En.FlateErrorCode={UnexpectedEOF:0,InvalidBlockType:1,InvalidLengthLiteral:2,InvalidDistance:3,StreamFinished:4,NoStreamHandler:5,InvalidHeader:6,NoCallback:7,InvalidUTF8:8,ExtraFieldTooLong:9,InvalidDate:10,FilenameTooLong:11,StreamFinishing:12,InvalidZipData:13,UnknownCompressionMethod:14};var x=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],P=function(ee,Y,le){var Ce=new Error(Y||x[ee]);if(Ce.code=ee,Error.captureStackTrace&&Error.captureStackTrace(Ce,P),!le)throw Ce;return Ce},R=function(ee,Y,le){var Ce=ee.length;if(!Ce||le&&le.f&&!le.l)return Y||new e(0);var ze=!Y||le,rt=!le||le.i;le||(le={}),Y||(Y=new e(Ce*3));var ct=function($o){var zo=Y.length;if($o>zo){var co=new e(Math.max(zo*2,$o));co.set(Y),Y=co}},et=le.f||0,It=le.p||0,gt=le.b||0,mt=le.l,bt=le.d,kt=le.m,dn=le.n,on=Ce*8;do{if(!mt){et=M(ee,It,1);var sn=M(ee,It+1,3);if(It+=3,sn)if(sn==1)mt=D,bt=T,kt=9,dn=5;else if(sn==2){var _n=M(ee,It,31)+257,rn=M(ee,It+10,15)+4,vn=_n+M(ee,It+5,31)+1;It+=14;for(var Nn=new e(vn),an=new e(19),Vt=0;Vt<rn;++Vt)an[o[Vt]]=M(ee,It+Vt*3,7);It+=rn*3;for(var Er=y(an),pn=(1<<Er)-1,Se=C(an,Er,1),Vt=0;Vt<vn;){var We=Se[M(ee,It,pn)];It+=We&15;var Mt=We>>>4;if(Mt<16)Nn[Vt++]=Mt;else{var lt=0,wt=0;for(Mt==16?(wt=3+M(ee,It,3),It+=2,lt=Nn[Vt-1]):Mt==17?(wt=3+M(ee,It,7),It+=3):Mt==18&&(wt=11+M(ee,It,127),It+=7);wt--;)Nn[Vt++]=lt}}var On=Nn.subarray(0,_n),Sn=Nn.subarray(_n);kt=y(On),dn=y(Sn),mt=C(On,kt,1),bt=C(Sn,dn,1)}else P(1);else{var Mt=O(It)+4,mn=ee[Mt-4]|ee[Mt-3]<<8,cn=Mt+mn;if(cn>Ce){rt&&P(0);break}ze&&ct(gt+mn),Y.set(ee.subarray(Mt,cn),gt),le.b=gt+=mn,le.p=It=cn*8,le.f=et;continue}if(It>on){rt&&P(0);break}}ze&&ct(gt+131072);for(var Bn=(1<<kt)-1,Qn=(1<<dn)-1,Zr=It;;Zr=It){var lt=mt[_(ee,It)&Bn],jr=lt>>>4;if(It+=lt&15,It>on){rt&&P(0);break}if(lt||P(2),jr<256)Y[gt++]=jr;else if(jr==256){Zr=It,mt=null;break}else{var Jr=jr-254;if(jr>264){var Vt=jr-257,Fa=a[Vt];Jr=M(ee,It,(1<<Fa)-1)+l[Vt],It+=Fa}var qa=bt[_(ee,It)&Qn],ea=qa>>>4;qa||P(3),It+=qa&15;var Sn=v[ea];if(ea>3){var Fa=i[ea];Sn+=_(ee,It)&(1<<Fa)-1,It+=Fa}if(It>on){rt&&P(0);break}ze&&ct(gt+131072);for(var Vr=gt+Jr;gt<Vr;gt+=4)Y[gt]=Y[gt-Sn],Y[gt+1]=Y[gt+1-Sn],Y[gt+2]=Y[gt+2-Sn],Y[gt+3]=Y[gt+3-Sn];gt=Vr}}le.l=mt,le.p=Zr,le.b=gt,le.f=et,mt&&(et=1,le.m=kt,le.d=bt,le.n=dn)}while(!et);return gt==Y.length?Y:w(Y,0,gt)},L=function(ee,Y,le){le<<=Y&7;var Ce=Y/8|0;ee[Ce]|=le,ee[Ce+1]|=le>>>8},H=function(ee,Y,le){le<<=Y&7;var Ce=Y/8|0;ee[Ce]|=le,ee[Ce+1]|=le>>>8,ee[Ce+2]|=le>>>16},F=function(ee,Y){for(var le=[],Ce=0;Ce<ee.length;++Ce)ee[Ce]&&le.push({s:Ce,f:ee[Ce]});var ze=le.length,rt=le.slice();if(!ze)return[pe,0];if(ze==1){var ct=new e(le[0].s+1);return ct[le[0].s]=1,[ct,1]}le.sort(function(vn,Nn){return vn.f-Nn.f}),le.push({s:-1,f:25001});var et=le[0],It=le[1],gt=0,mt=1,bt=2;for(le[0]={s:-1,f:et.f+It.f,l:et,r:It};mt!=ze-1;)et=le[le[gt].f<le[bt].f?gt++:bt++],It=le[gt!=mt&&le[gt].f<le[bt].f?gt++:bt++],le[mt++]={s:-1,f:et.f+It.f,l:et,r:It};for(var kt=rt[0].s,Ce=1;Ce<ze;++Ce)rt[Ce].s>kt&&(kt=rt[Ce].s);var dn=new n(kt+1),on=U(le[mt-1],dn,0);if(on>Y){var Ce=0,sn=0,Mt=on-Y,mn=1<<Mt;for(rt.sort(function(Nn,an){return dn[an.s]-dn[Nn.s]||Nn.f-an.f});Ce<ze;++Ce){var cn=rt[Ce].s;if(dn[cn]>Y)sn+=mn-(1<<on-dn[cn]),dn[cn]=Y;else break}for(sn>>>=Mt;sn>0;){var _n=rt[Ce].s;dn[_n]<Y?sn-=1<<Y-dn[_n]++-1:++Ce}for(;Ce>=0&&sn;--Ce){var rn=rt[Ce].s;dn[rn]==Y&&(--dn[rn],++sn)}on=Y}return[new e(dn),on]},U=function(ee,Y,le){return ee.s==-1?Math.max(U(ee.l,Y,le+1),U(ee.r,Y,le+1)):Y[ee.s]=le},V=function(ee){for(var Y=ee.length;Y&&!ee[--Y];);for(var le=new n(++Y),Ce=0,ze=ee[0],rt=1,ct=function(It){le[Ce++]=It},et=1;et<=Y;++et)if(ee[et]==ze&&et!=Y)++rt;else{if(!ze&&rt>2){for(;rt>138;rt-=138)ct(32754);rt>2&&(ct(rt>10?rt-11<<5|28690:rt-3<<5|12305),rt=0)}else if(rt>3){for(ct(ze),--rt;rt>6;rt-=6)ct(8304);rt>2&&(ct(rt-3<<5|8208),rt=0)}for(;rt--;)ct(ze);rt=1,ze=ee[et]}return[le.subarray(0,Ce),Y]},X=function(ee,Y){for(var le=0,Ce=0;Ce<Y.length;++Ce)le+=ee[Ce]*Y[Ce];return le},re=function(ee,Y,le){var Ce=le.length,ze=O(Y+2);ee[ze]=Ce&255,ee[ze+1]=Ce>>>8,ee[ze+2]=ee[ze]^255,ee[ze+3]=ee[ze+1]^255;for(var rt=0;rt<Ce;++rt)ee[ze+rt+4]=le[rt];return(ze+4+Ce)*8},ue=function(ee,Y,le,Ce,ze,rt,ct,et,It,gt,mt){L(Y,mt++,le),++ze[256];for(var bt=F(ze,15),kt=bt[0],dn=bt[1],on=F(rt,15),sn=on[0],Mt=on[1],mn=V(kt),cn=mn[0],_n=mn[1],rn=V(sn),vn=rn[0],Nn=rn[1],an=new n(19),Vt=0;Vt<cn.length;++Vt)an[cn[Vt]&31]++;for(var Vt=0;Vt<vn.length;++Vt)an[vn[Vt]&31]++;for(var Er=F(an,7),pn=Er[0],Se=Er[1],We=19;We>4&&!pn[o[We-1]];--We);var lt=gt+5<<3,wt=X(ze,p)+X(rt,S)+ct,On=X(ze,kt)+X(rt,sn)+ct+14+3*We+X(an,pn)+(2*an[16]+3*an[17]+7*an[18]);if(lt<=wt&&lt<=On)return re(Y,mt,ee.subarray(It,It+gt));var Sn,Bn,Qn,Zr;if(L(Y,mt,1+(On<wt)),mt+=2,On<wt){Sn=C(kt,dn,0),Bn=kt,Qn=C(sn,Mt,0),Zr=sn;var jr=C(pn,Se,0);L(Y,mt,_n-257),L(Y,mt+5,Nn-1),L(Y,mt+10,We-4),mt+=14;for(var Vt=0;Vt<We;++Vt)L(Y,mt+3*Vt,pn[o[Vt]]);mt+=3*We;for(var Jr=[cn,vn],Fa=0;Fa<2;++Fa)for(var qa=Jr[Fa],Vt=0;Vt<qa.length;++Vt){var ea=qa[Vt]&31;L(Y,mt,jr[ea]),mt+=pn[ea],ea>15&&(L(Y,mt,qa[Vt]>>>5&127),mt+=qa[Vt]>>>12)}}else Sn=I,Bn=p,Qn=E,Zr=S;for(var Vt=0;Vt<et;++Vt)if(Ce[Vt]>255){var ea=Ce[Vt]>>>18&31;H(Y,mt,Sn[ea+257]),mt+=Bn[ea+257],ea>7&&(L(Y,mt,Ce[Vt]>>>23&31),mt+=a[ea]);var Vr=Ce[Vt]&31;H(Y,mt,Qn[Vr]),mt+=Zr[Vr],Vr>3&&(H(Y,mt,Ce[Vt]>>>5&8191),mt+=i[Vr])}else H(Y,mt,Sn[Ce[Vt]]),mt+=Bn[Ce[Vt]];return H(Y,mt,Sn[256]),mt+Bn[256]},De=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),pe=new e(0),Te=function(ee,Y,le,Ce,ze,rt){var ct=ee.length,et=new e(Ce+ct+5*(1+Math.ceil(ct/7e3))+ze),It=et.subarray(Ce,et.length-ze),gt=0;if(!Y||ct<8)for(var mt=0;mt<=ct;mt+=65535){var bt=mt+65535;bt>=ct&&(It[gt>>3]=rt),gt=re(It,gt+1,ee.subarray(mt,bt))}else{for(var kt=De[Y-1],dn=kt>>>13,on=kt&8191,sn=(1<<le)-1,Mt=new n(32768),mn=new n(sn+1),cn=Math.ceil(le/3),_n=2*cn,rn=function(hs){return(ee[hs]^ee[hs+1]<<cn^ee[hs+2]<<_n)&sn},vn=new r(25e3),Nn=new n(288),an=new n(32),Vt=0,Er=0,mt=0,pn=0,Se=0,We=0;mt<ct;++mt){var lt=rn(mt),wt=mt&32767,On=mn[lt];if(Mt[wt]=On,mn[lt]=wt,Se<=mt){var Sn=ct-mt;if((Vt>7e3||pn>24576)&&Sn>423){gt=ue(ee,It,0,vn,Nn,an,Er,pn,We,mt-We,gt),pn=Vt=Er=0,We=mt;for(var Bn=0;Bn<286;++Bn)Nn[Bn]=0;for(var Bn=0;Bn<30;++Bn)an[Bn]=0}var Qn=2,Zr=0,jr=on,Jr=wt-On&32767;if(Sn>2&&lt==rn(mt-Jr))for(var Fa=Math.min(dn,Sn)-1,qa=Math.min(32767,mt),ea=Math.min(258,Sn);Jr<=qa&&--jr&&wt!=On;){if(ee[mt+Qn]==ee[mt+Qn-Jr]){for(var Vr=0;Vr<ea&&ee[mt+Vr]==ee[mt+Vr-Jr];++Vr);if(Vr>Qn){if(Qn=Vr,Zr=Jr,Vr>Fa)break;for(var $o=Math.min(Jr,Vr-2),zo=0,Bn=0;Bn<$o;++Bn){var co=mt-Jr+Bn+32768&32767,d0=Mt[co],m0=co-d0+32768&32767;m0>zo&&(zo=m0,On=co)}}}wt=On,On=Mt[wt],Jr+=wt-On+32768&32767}if(Zr){vn[pn++]=268435456|u[Qn]<<18|g[Zr];var Ws=u[Qn]&31,Hs=g[Zr]&31;Er+=a[Ws]+i[Hs],++Nn[257+Ws],++an[Hs],Se=mt+Qn,++Vt}else vn[pn++]=ee[mt],++Nn[ee[mt]]}}gt=ue(ee,It,rt,vn,Nn,an,Er,pn,We,mt-We,gt),!rt&&gt&7&&(gt=re(It,gt+1,pe))}return w(et,0,Ce+O(gt)+ze)},Fe=function(){for(var ee=new Int32Array(256),Y=0;Y<256;++Y){for(var le=Y,Ce=9;--Ce;)le=(le&1&&-306674912)^le>>>1;ee[Y]=le}return ee}(),Ne=function(){var ee=-1;return{p:function(Y){for(var le=ee,Ce=0;Ce<Y.length;++Ce)le=Fe[le&255^Y[Ce]]^le>>>8;ee=le},d:function(){return~ee}}},Re=function(){var ee=1,Y=0;return{p:function(le){for(var Ce=ee,ze=Y,rt=le.length|0,ct=0;ct!=rt;){for(var et=Math.min(ct+2655,rt);ct<et;++ct)ze+=Ce+=le[ct];Ce=(Ce&65535)+15*(Ce>>16),ze=(ze&65535)+15*(ze>>16)}ee=Ce,Y=ze},d:function(){return ee%=65521,Y%=65521,(ee&255)<<24|ee>>>8<<16|(Y&255)<<8|Y>>>8}}},k=function(ee,Y,le,Ce,ze){return Te(ee,Y.level==null?6:Y.level,Y.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(ee.length)))*1.5):12+Y.mem,le,Ce,!ze)},A=function(ee,Y){var le={};for(var Ce in ee)le[Ce]=ee[Ce];for(var Ce in Y)le[Ce]=Y[Ce];return le},b=function(ee,Y,le){for(var Ce=ee(),ze=ee.toString(),rt=ze.slice(ze.indexOf("[")+1,ze.lastIndexOf("]")).replace(/\s+/g,"").split(","),ct=0;ct<Ce.length;++ct){var et=Ce[ct],It=rt[ct];if(typeof et=="function"){Y+=";"+It+"=";var gt=et.toString();if(et.prototype)if(gt.indexOf("[native code]")!=-1){var mt=gt.indexOf(" ",8)+1;Y+=gt.slice(mt,gt.indexOf("(",mt))}else{Y+=gt;for(var bt in et.prototype)Y+=";"+It+".prototype."+bt+"="+et.prototype[bt].toString()}else Y+=gt}else le[It]=et}return[Y,le]},N=[],W=function(ee){var Y=[];for(var le in ee)ee[le].buffer&&Y.push((ee[le]=new ee[le].constructor(ee[le])).buffer);return Y},j=function(ee,Y,le,Ce){var ze;if(!N[le]){for(var rt="",ct={},et=ee.length-1,It=0;It<et;++It)ze=b(ee[It],rt,ct),rt=ze[0],ct=ze[1];N[le]=b(ee[et],rt,ct)}var gt=A({},N[le][1]);return t.default(N[le][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+Y.toString()+"}",le,gt,W(gt),Ce)},K=function(){return[e,n,r,a,i,o,l,v,D,T,d,x,C,y,M,_,O,w,P,R,xn,ie,he]},ge=function(){return[e,n,r,a,i,o,u,g,I,p,E,S,d,De,pe,C,L,H,F,U,V,X,re,ue,O,w,Te,k,Qt,ie]},ye=function(){return[Me,Ze,Ue,Ne,Fe]},we=function(){return[Be,nt]},be=function(){return[at,Ue,Re]},Z=function(){return[Ot]},ie=function(ee){return postMessage(ee,[ee.buffer])},he=function(ee){return ee&&ee.size&&new e(ee.size)},se=function(ee,Y,le,Ce,ze,rt){var ct=j(le,Ce,ze,function(et,It){ct.terminate(),rt(et,It)});return ct.postMessage([ee,Y],Y.consume?[ee.buffer]:[]),function(){ct.terminate()}},me=function(ee){return ee.ondata=function(Y,le){return postMessage([Y,le],[Y.buffer])},function(Y){return ee.push(Y.data[0],Y.data[1])}},fe=function(ee,Y,le,Ce,ze){var rt,ct=j(ee,Ce,ze,function(et,It){et?(ct.terminate(),Y.ondata.call(Y,et)):(It[1]&&ct.terminate(),Y.ondata.call(Y,et,It[0],It[1]))});ct.postMessage(le),Y.push=function(et,It){Y.ondata||P(5),rt&&Y.ondata(P(4,0,1),null,!!It),ct.postMessage([et,rt=It],[et.buffer])},Y.terminate=function(){ct.terminate()}},q=function(ee,Y){return ee[Y]|ee[Y+1]<<8},Pe=function(ee,Y){return(ee[Y]|ee[Y+1]<<8|ee[Y+2]<<16|ee[Y+3]<<24)>>>0},Le=function(ee,Y){return Pe(ee,Y)+Pe(ee,Y+4)*4294967296},Ue=function(ee,Y,le){for(;le;++Y)ee[Y]=le,le>>>=8},Me=function(ee,Y){var le=Y.filename;if(ee[0]=31,ee[1]=139,ee[2]=8,ee[8]=Y.level<2?4:Y.level==9?2:0,ee[9]=3,Y.mtime!=0&&Ue(ee,4,Math.floor(new Date(Y.mtime||Date.now())/1e3)),le){ee[3]=8;for(var Ce=0;Ce<=le.length;++Ce)ee[Ce+10]=le.charCodeAt(Ce)}},Be=function(ee){(ee[0]!=31||ee[1]!=139||ee[2]!=8)&&P(6,"invalid gzip data");var Y=ee[3],le=10;Y&4&&(le+=ee[10]|(ee[11]<<8)+2);for(var Ce=(Y>>3&1)+(Y>>4&1);Ce>0;Ce-=!ee[le++]);return le+(Y&2)},nt=function(ee){var Y=ee.length;return(ee[Y-4]|ee[Y-3]<<8|ee[Y-2]<<16|ee[Y-1]<<24)>>>0},Ze=function(ee){return 10+(ee.filename&&ee.filename.length+1||0)},at=function(ee,Y){var le=Y.level,Ce=le==0?0:le<6?1:le==9?3:2;ee[0]=120,ee[1]=Ce<<6|(Ce?32-2*Ce:1)},Ot=function(ee){((ee[0]&15)!=8||ee[0]>>>4>7||(ee[0]<<8|ee[1])%31)&&P(6,"invalid zlib data"),ee[1]&32&&P(6,"invalid zlib data: preset dictionaries not supported")};function Oe(ee,Y){return!Y&&typeof ee=="function"&&(Y=ee,ee={}),this.ondata=Y,ee}var $e=function(){function ee(Y,le){!le&&typeof Y=="function"&&(le=Y,Y={}),this.ondata=le,this.o=Y||{}}return ee.prototype.p=function(Y,le){this.ondata(k(Y,this.o,0,0,!le),le)},ee.prototype.push=function(Y,le){this.ondata||P(5),this.d&&P(4),this.d=le,this.p(Y,le||!1)},ee}();En.Deflate=$e;var ht=function(){function ee(Y,le){fe([ge,function(){return[me,$e]}],this,Oe.call(this,Y,le),function(Ce){var ze=new $e(Ce.data);onmessage=me(ze)},6)}return ee}();En.AsyncDeflate=ht;function Ut(ee,Y,le){return le||(le=Y,Y={}),typeof le!="function"&&P(7),se(ee,Y,[ge],function(Ce){return ie(Qt(Ce.data[0],Ce.data[1]))},0,le)}En.deflate=Ut;function Qt(ee,Y){return k(ee,Y||{},0,0)}En.deflateSync=Qt;var Rt=function(){function ee(Y){this.s={},this.p=new e(0),this.ondata=Y}return ee.prototype.e=function(Y){this.ondata||P(5),this.d&&P(4);var le=this.p.length,Ce=new e(le+Y.length);Ce.set(this.p),Ce.set(Y,le),this.p=Ce},ee.prototype.c=function(Y){this.d=this.s.i=Y||!1;var le=this.s.b,Ce=R(this.p,this.o,this.s);this.ondata(w(Ce,le,this.s.b),this.d),this.o=w(Ce,this.s.b-32768),this.s.b=this.o.length,this.p=w(this.p,this.s.p/8|0),this.s.p&=7},ee.prototype.push=function(Y,le){this.e(Y),this.c(le)},ee}();En.Inflate=Rt;var Dn=function(){function ee(Y){this.ondata=Y,fe([K,function(){return[me,Rt]}],this,0,function(){var le=new Rt;onmessage=me(le)},7)}return ee}();En.AsyncInflate=Dn;function jn(ee,Y,le){return le||(le=Y,Y={}),typeof le!="function"&&P(7),se(ee,Y,[K],function(Ce){return ie(xn(Ce.data[0],he(Ce.data[1])))},1,le)}En.inflate=jn;function xn(ee,Y){return R(ee,Y)}En.inflateSync=xn;var Qe=function(){function ee(Y,le){this.c=Ne(),this.l=0,this.v=1,$e.call(this,Y,le)}return ee.prototype.push=function(Y,le){$e.prototype.push.call(this,Y,le)},ee.prototype.p=function(Y,le){this.c.p(Y),this.l+=Y.length;var Ce=k(Y,this.o,this.v&&Ze(this.o),le&&8,!le);this.v&&(Me(Ce,this.o),this.v=0),le&&(Ue(Ce,Ce.length-8,this.c.d()),Ue(Ce,Ce.length-4,this.l)),this.ondata(Ce,le)},ee}();En.Gzip=Qe,En.Compress=Qe;var Et=function(){function ee(Y,le){fe([ge,ye,function(){return[me,$e,Qe]}],this,Oe.call(this,Y,le),function(Ce){var ze=new Qe(Ce.data);onmessage=me(ze)},8)}return ee}();En.AsyncGzip=Et,En.AsyncCompress=Et;function $t(ee,Y,le){return le||(le=Y,Y={}),typeof le!="function"&&P(7),se(ee,Y,[ge,ye,function(){return[Fn]}],function(Ce){return ie(Fn(Ce.data[0],Ce.data[1]))},2,le)}En.gzip=$t,En.compress=$t;function Fn(ee,Y){Y||(Y={});var le=Ne(),Ce=ee.length;le.p(ee);var ze=k(ee,Y,Ze(Y),8),rt=ze.length;return Me(ze,Y),Ue(ze,rt-8,le.d()),Ue(ze,rt-4,Ce),ze}En.gzipSync=Fn,En.compressSync=Fn;var Rr=function(){function ee(Y){this.v=1,Rt.call(this,Y)}return ee.prototype.push=function(Y,le){if(Rt.prototype.e.call(this,Y),this.v){var Ce=this.p.length>3?Be(this.p):4;if(Ce>=this.p.length&&!le)return;this.p=this.p.subarray(Ce),this.v=0}le&&(this.p.length<8&&P(6,"invalid gzip data"),this.p=this.p.subarray(0,-8)),Rt.prototype.c.call(this,le)},ee}();En.Gunzip=Rr;var Kt=function(){function ee(Y){this.ondata=Y,fe([K,we,function(){return[me,Rt,Rr]}],this,0,function(){var le=new Rr;onmessage=me(le)},9)}return ee}();En.AsyncGunzip=Kt;function qr(ee,Y,le){return le||(le=Y,Y={}),typeof le!="function"&&P(7),se(ee,Y,[K,we,function(){return[Rn]}],function(Ce){return ie(Rn(Ce.data[0]))},3,le)}En.gunzip=qr;function Rn(ee,Y){return R(ee.subarray(Be(ee),-8),Y||new e(nt(ee)))}En.gunzipSync=Rn;var cr=function(){function ee(Y,le){this.c=Re(),this.v=1,$e.call(this,Y,le)}return ee.prototype.push=function(Y,le){$e.prototype.push.call(this,Y,le)},ee.prototype.p=function(Y,le){this.c.p(Y);var Ce=k(Y,this.o,this.v&&2,le&&4,!le);this.v&&(at(Ce,this.o),this.v=0),le&&Ue(Ce,Ce.length-4,this.c.d()),this.ondata(Ce,le)},ee}();En.Zlib=cr;var fi=function(){function ee(Y,le){fe([ge,be,function(){return[me,$e,cr]}],this,Oe.call(this,Y,le),function(Ce){var ze=new cr(Ce.data);onmessage=me(ze)},10)}return ee}();En.AsyncZlib=fi;function nn(ee,Y,le){return le||(le=Y,Y={}),typeof le!="function"&&P(7),se(ee,Y,[ge,be,function(){return[ya]}],function(Ce){return ie(ya(Ce.data[0],Ce.data[1]))},4,le)}En.zlib=nn;function ya(ee,Y){Y||(Y={});var le=Re();le.p(ee);var Ce=k(ee,Y,2,4);return at(Ce,Y),Ue(Ce,Ce.length-4,le.d()),Ce}En.zlibSync=ya;var wi=function(){function ee(Y){this.v=1,Rt.call(this,Y)}return ee.prototype.push=function(Y,le){if(Rt.prototype.e.call(this,Y),this.v){if(this.p.length<2&&!le)return;this.p=this.p.subarray(2),this.v=0}le&&(this.p.length<4&&P(6,"invalid zlib data"),this.p=this.p.subarray(0,-4)),Rt.prototype.c.call(this,le)},ee}();En.Unzlib=wi;var Wi=function(){function ee(Y){this.ondata=Y,fe([K,Z,function(){return[me,Rt,wi]}],this,0,function(){var le=new wi;onmessage=me(le)},11)}return ee}();En.AsyncUnzlib=Wi;function Oo(ee,Y,le){return le||(le=Y,Y={}),typeof le!="function"&&P(7),se(ee,Y,[K,Z,function(){return[Ci]}],function(Ce){return ie(Ci(Ce.data[0],he(Ce.data[1])))},5,le)}En.unzlib=Oo;function Ci(ee,Y){return R((Ot(ee),ee.subarray(2,-4)),Y)}En.unzlibSync=Ci;var mr=function(){function ee(Y){this.G=Rr,this.I=Rt,this.Z=wi,this.ondata=Y}return ee.prototype.push=function(Y,le){if(this.ondata||P(5),this.s)this.s.push(Y,le);else{if(this.p&&this.p.length){var Ce=new e(this.p.length+Y.length);Ce.set(this.p),Ce.set(Y,this.p.length)}else this.p=Y;if(this.p.length>2){var ze=this,rt=function(){ze.ondata.apply(ze,arguments)};this.s=this.p[0]==31&&this.p[1]==139&&this.p[2]==8?new this.G(rt):(this.p[0]&15)!=8||this.p[0]>>4>7||(this.p[0]<<8|this.p[1])%31?new this.I(rt):new this.Z(rt),this.s.push(this.p,le),this.p=null}}},ee}();En.Decompress=mr;var Ii=function(){function ee(Y){this.G=Kt,this.I=Dn,this.Z=Wi,this.ondata=Y}return ee.prototype.push=function(Y,le){mr.prototype.push.call(this,Y,le)},ee}();En.AsyncDecompress=Ii;function Gn(ee,Y,le){return le||(le=Y,Y={}),typeof le!="function"&&P(7),ee[0]==31&&ee[1]==139&&ee[2]==8?qr(ee,Y,le):(ee[0]&15)!=8||ee[0]>>4>7||(ee[0]<<8|ee[1])%31?jn(ee,Y,le):Oo(ee,Y,le)}En.decompress=Gn;function ma(ee,Y){return ee[0]==31&&ee[1]==139&&ee[2]==8?Rn(ee,Y):(ee[0]&15)!=8||ee[0]>>4>7||(ee[0]<<8|ee[1])%31?xn(ee,Y):Ci(ee,Y)}En.decompressSync=ma;var Hi=function(ee,Y,le,Ce){for(var ze in ee){var rt=ee[ze],ct=Y+ze,et=Ce;Array.isArray(rt)&&(et=A(Ce,rt[1]),rt=rt[0]),rt instanceof e?le[ct]=[rt,et]:(le[ct+="/"]=[new e(0),et],Hi(rt,ct,le,Ce))}},Ha=typeof TextEncoder<"u"&&new TextEncoder,ti=typeof TextDecoder<"u"&&new TextDecoder,Di=0;try{ti.decode(pe,{stream:!0}),Di=1}catch{}var La=function(ee){for(var Y="",le=0;;){var Ce=ee[le++],ze=(Ce>127)+(Ce>223)+(Ce>239);if(le+ze>ee.length)return[Y,w(ee,le-1)];ze?ze==3?(Ce=((Ce&15)<<18|(ee[le++]&63)<<12|(ee[le++]&63)<<6|ee[le++]&63)-65536,Y+=String.fromCharCode(55296|Ce>>10,56320|Ce&1023)):ze&1?Y+=String.fromCharCode((Ce&31)<<6|ee[le++]&63):Y+=String.fromCharCode((Ce&15)<<12|(ee[le++]&63)<<6|ee[le++]&63):Y+=String.fromCharCode(Ce)}},wo=function(){function ee(Y){this.ondata=Y,Di?this.t=new TextDecoder:this.p=pe}return ee.prototype.push=function(Y,le){if(this.ondata||P(5),le=!!le,this.t){this.ondata(this.t.decode(Y,{stream:!0}),le),le&&(this.t.decode().length&&P(8),this.t=null);return}this.p||P(4);var Ce=new e(this.p.length+Y.length);Ce.set(this.p),Ce.set(Y,this.p.length);var ze=La(Ce),rt=ze[0],ct=ze[1];le?(ct.length&&P(8),this.p=null):this.p=ct,this.ondata(rt,le)},ee}();En.DecodeUTF8=wo;var vi=function(){function ee(Y){this.ondata=Y}return ee.prototype.push=function(Y,le){this.ondata||P(5),this.d&&P(4),this.ondata(Ua(Y),this.d=le||!1)},ee}();En.EncodeUTF8=vi;function Ua(ee,Y){if(Y){for(var le=new e(ee.length),Ce=0;Ce<ee.length;++Ce)le[Ce]=ee.charCodeAt(Ce);return le}if(Ha)return Ha.encode(ee);for(var ze=ee.length,rt=new e(ee.length+(ee.length>>1)),ct=0,et=function(mt){rt[ct++]=mt},Ce=0;Ce<ze;++Ce){if(ct+5>rt.length){var It=new e(ct+8+(ze-Ce<<1));It.set(rt),rt=It}var gt=ee.charCodeAt(Ce);gt<128||Y?et(gt):gt<2048?(et(192|gt>>6),et(128|gt&63)):gt>55295&&gt<57344?(gt=65536+(gt&1047552)|ee.charCodeAt(++Ce)&1023,et(240|gt>>18),et(128|gt>>12&63),et(128|gt>>6&63),et(128|gt&63)):(et(224|gt>>12),et(128|gt>>6&63),et(128|gt&63))}return w(rt,0,ct)}En.strToU8=Ua;function Po(ee,Y){if(Y){for(var le="",Ce=0;Ce<ee.length;Ce+=16384)le+=String.fromCharCode.apply(null,ee.subarray(Ce,Ce+16384));return le}else{if(ti)return ti.decode(ee);var ze=La(ee),rt=ze[0],ct=ze[1];return ct.length&&P(8),rt}}En.strFromU8=Po;var ua=function(ee){return ee==1?3:ee<6?2:ee==9?1:0},oo=function(ee,Y){return Y+30+q(ee,Y+26)+q(ee,Y+28)},$i=function(ee,Y,le){var Ce=q(ee,Y+28),ze=Po(ee.subarray(Y+46,Y+46+Ce),!(q(ee,Y+8)&2048)),rt=Y+46+Ce,ct=Pe(ee,Y+20),et=le&&ct==4294967295?$a(ee,rt):[ct,Pe(ee,Y+24),Pe(ee,Y+42)],It=et[0],gt=et[1],mt=et[2];return[q(ee,Y+10),It,gt,ze,rt+q(ee,Y+30)+q(ee,Y+32),mt]},$a=function(ee,Y){for(;q(ee,Y)!=1;Y+=4+q(ee,Y+2));return[Le(ee,Y+12),Le(ee,Y+4),Le(ee,Y+20)]},ni=function(ee){var Y=0;if(ee)for(var le in ee){var Ce=ee[le].length;Ce>65535&&P(9),Y+=Ce+4}return Y},ha=function(ee,Y,le,Ce,ze,rt,ct,et){var It=Ce.length,gt=le.extra,mt=et&&et.length,bt=ni(gt);Ue(ee,Y,ct!=null?33639248:67324752),Y+=4,ct!=null&&(ee[Y++]=20,ee[Y++]=le.os),ee[Y]=20,Y+=2,ee[Y++]=le.flag<<1|(rt==null&&8),ee[Y++]=ze&&8,ee[Y++]=le.compression&255,ee[Y++]=le.compression>>8;var kt=new Date(le.mtime==null?Date.now():le.mtime),dn=kt.getFullYear()-1980;if((dn<0||dn>119)&&P(10),Ue(ee,Y,dn<<25|kt.getMonth()+1<<21|kt.getDate()<<16|kt.getHours()<<11|kt.getMinutes()<<5|kt.getSeconds()>>>1),Y+=4,rt!=null&&(Ue(ee,Y,le.crc),Ue(ee,Y+4,rt),Ue(ee,Y+8,le.size)),Ue(ee,Y+12,It),Ue(ee,Y+14,bt),Y+=16,ct!=null&&(Ue(ee,Y,mt),Ue(ee,Y+6,le.attrs),Ue(ee,Y+10,ct),Y+=14),ee.set(Ce,Y),Y+=It,bt)for(var on in gt){var sn=gt[on],Mt=sn.length;Ue(ee,Y,+on),Ue(ee,Y+2,Mt),ee.set(sn,Y+4),Y+=4+Mt}return mt&&(ee.set(et,Y),Y+=mt),Y},ri=function(ee,Y,le,Ce,ze){Ue(ee,Y,101010256),Ue(ee,Y+8,le),Ue(ee,Y+10,le),Ue(ee,Y+12,Ce),Ue(ee,Y+16,ze)},zi=function(){function ee(Y){this.filename=Y,this.c=Ne(),this.size=0,this.compression=0}return ee.prototype.process=function(Y,le){this.ondata(null,Y,le)},ee.prototype.push=function(Y,le){this.ondata||P(5),this.c.p(Y),this.size+=Y.length,le&&(this.crc=this.c.d()),this.process(Y,le||!1)},ee}();En.ZipPassThrough=zi;var Ma=function(){function ee(Y,le){var Ce=this;le||(le={}),zi.call(this,Y),this.d=new $e(le,function(ze,rt){Ce.ondata(null,ze,rt)}),this.compression=8,this.flag=ua(le.level)}return ee.prototype.process=function(Y,le){try{this.d.push(Y,le)}catch(Ce){this.ondata(Ce,null,le)}},ee.prototype.push=function(Y,le){zi.prototype.push.call(this,Y,le)},ee}();En.ZipDeflate=Ma;var ms=function(){function ee(Y,le){var Ce=this;le||(le={}),zi.call(this,Y),this.d=new ht(le,function(ze,rt,ct){Ce.ondata(ze,rt,ct)}),this.compression=8,this.flag=ua(le.level),this.terminate=this.d.terminate}return ee.prototype.process=function(Y,le){this.d.push(Y,le)},ee.prototype.push=function(Y,le){zi.prototype.push.call(this,Y,le)},ee}();En.AsyncZipDeflate=ms;var so=function(){function ee(Y){this.ondata=Y,this.u=[],this.d=1}return ee.prototype.add=function(Y){var le=this;if(this.ondata||P(5),this.d&2)this.ondata(P(4+(this.d&1)*8,0,1),null,!1);else{var Ce=Ua(Y.filename),ze=Ce.length,rt=Y.comment,ct=rt&&Ua(rt),et=ze!=Y.filename.length||ct&&rt.length!=ct.length,It=ze+ni(Y.extra)+30;ze>65535&&this.ondata(P(11,0,1),null,!1);var gt=new e(It);ha(gt,0,Y,Ce,et);var mt=[gt],bt=function(){for(var Mt=0,mn=mt;Mt<mn.length;Mt++){var cn=mn[Mt];le.ondata(null,cn,!1)}mt=[]},kt=this.d;this.d=0;var dn=this.u.length,on=A(Y,{f:Ce,u:et,o:ct,t:function(){Y.terminate&&Y.terminate()},r:function(){if(bt(),kt){var Mt=le.u[dn+1];Mt?Mt.r():le.d=1}kt=1}}),sn=0;Y.ondata=function(Mt,mn,cn){if(Mt)le.ondata(Mt,mn,cn),le.terminate();else if(sn+=mn.length,mt.push(mn),cn){var _n=new e(16);Ue(_n,0,134695760),Ue(_n,4,Y.crc),Ue(_n,8,sn),Ue(_n,12,Y.size),mt.push(_n),on.c=sn,on.b=It+sn+16,on.crc=Y.crc,on.size=Y.size,kt&&on.r(),kt=1}else kt&&bt()},this.u.push(on)}},ee.prototype.end=function(){var Y=this;if(this.d&2){this.ondata(P(4+(this.d&1)*8,0,1),null,!0);return}this.d?this.e():this.u.push({r:function(){Y.d&1&&(Y.u.splice(-1,1),Y.e())},t:function(){}}),this.d=3},ee.prototype.e=function(){for(var Y=0,le=0,Ce=0,ze=0,rt=this.u;ze<rt.length;ze++){var ct=rt[ze];Ce+=46+ct.f.length+ni(ct.extra)+(ct.o?ct.o.length:0)}for(var et=new e(Ce+22),It=0,gt=this.u;It<gt.length;It++){var ct=gt[It];ha(et,Y,ct,ct.f,ct.u,ct.c,le,ct.o),Y+=46+ct.f.length+ni(ct.extra)+(ct.o?ct.o.length:0),le+=ct.b}ri(et,Y,this.u.length,Ce,le),this.ondata(null,et,!0),this.d=2},ee.prototype.terminate=function(){for(var Y=0,le=this.u;Y<le.length;Y++){var Ce=le[Y];Ce.t()}this.d=2},ee}();En.Zip=so;function za(ee,Y,le){le||(le=Y,Y={}),typeof le!="function"&&P(7);var Ce={};Hi(ee,"",Ce,Y);var ze=Object.keys(Ce),rt=ze.length,ct=0,et=0,It=rt,gt=new Array(rt),mt=[],bt=function(){for(var Mt=0;Mt<mt.length;++Mt)mt[Mt]()},kt=function(Mt,mn){xo(function(){le(Mt,mn)})};xo(function(){kt=le});var dn=function(){var Mt=new e(et+22),mn=ct,cn=et-ct;et=0;for(var _n=0;_n<It;++_n){var rn=gt[_n];try{var vn=rn.c.length;ha(Mt,et,rn,rn.f,rn.u,vn);var Nn=30+rn.f.length+ni(rn.extra),an=et+Nn;Mt.set(rn.c,an),ha(Mt,ct,rn,rn.f,rn.u,vn,et,rn.m),ct+=16+Nn+(rn.m?rn.m.length:0),et=an+vn}catch(Vt){return kt(Vt,null)}}ri(Mt,ct,gt.length,cn,mn),kt(null,Mt)};rt||dn();for(var on=function(Mt){var mn=ze[Mt],cn=Ce[mn],_n=cn[0],rn=cn[1],vn=Ne(),Nn=_n.length;vn.p(_n);var an=Ua(mn),Vt=an.length,Er=rn.comment,pn=Er&&Ua(Er),Se=pn&&pn.length,We=ni(rn.extra),lt=rn.level==0?0:8,wt=function(On,Sn){if(On)bt(),kt(On,null);else{var Bn=Sn.length;gt[Mt]=A(rn,{size:Nn,crc:vn.d(),c:Sn,f:an,m:pn,u:Vt!=mn.length||pn&&Er.length!=Se,compression:lt}),ct+=30+Vt+We+Bn,et+=76+2*(Vt+We)+(Se||0)+Bn,--rt||dn()}};if(Vt>65535&&wt(P(11,0,1),null),!lt)wt(null,_n);else if(Nn<16e4)try{wt(null,Qt(_n,rn))}catch(On){wt(On,null)}else mt.push(Ut(_n,rn,wt))},sn=0;sn<It;++sn)on(sn);return bt}En.zip=za;function Ao(ee,Y){Y||(Y={});var le={},Ce=[];Hi(ee,"",le,Y);var ze=0,rt=0;for(var ct in le){var et=le[ct],It=et[0],gt=et[1],mt=gt.level==0?0:8,bt=Ua(ct),kt=bt.length,dn=gt.comment,on=dn&&Ua(dn),sn=on&&on.length,Mt=ni(gt.extra);kt>65535&&P(11);var mn=mt?Qt(It,gt):It,cn=mn.length,_n=Ne();_n.p(It),Ce.push(A(gt,{size:It.length,crc:_n.d(),c:mn,f:bt,m:on,u:kt!=ct.length||on&&dn.length!=sn,o:ze,compression:mt})),ze+=30+kt+Mt+cn,rt+=76+2*(kt+Mt)+(sn||0)+cn}for(var rn=new e(rt+22),vn=ze,Nn=rt-ze,an=0;an<Ce.length;++an){var bt=Ce[an];ha(rn,bt.o,bt,bt.f,bt.u,bt.c.length);var Vt=30+bt.f.length+ni(bt.extra);rn.set(bt.c,bt.o+Vt),ha(rn,ze,bt,bt.f,bt.u,bt.c.length,bt.o,bt.m),ze+=16+Vt+(bt.m?bt.m.length:0)}return ri(rn,ze,Ce.length,Nn,vn),rn}En.zipSync=Ao;var qi=function(){function ee(){}return ee.prototype.push=function(Y,le){this.ondata(null,Y,le)},ee.compression=0,ee}();En.UnzipPassThrough=qi;var Gs=function(){function ee(){var Y=this;this.i=new Rt(function(le,Ce){Y.ondata(null,le,Ce)})}return ee.prototype.push=function(Y,le){try{this.i.push(Y,le)}catch(Ce){this.ondata(Ce,null,le)}},ee.compression=8,ee}();En.UnzipInflate=Gs;var Ho=function(){function ee(Y,le){var Ce=this;le<32e4?this.i=new Rt(function(ze,rt){Ce.ondata(null,ze,rt)}):(this.i=new Dn(function(ze,rt,ct){Ce.ondata(ze,rt,ct)}),this.terminate=this.i.terminate)}return ee.prototype.push=function(Y,le){this.i.terminate&&(Y=w(Y,0)),this.i.push(Y,le)},ee.compression=8,ee}();En.AsyncUnzipInflate=Ho;var Bs=function(){function ee(Y){this.onfile=Y,this.k=[],this.o={0:qi},this.p=pe}return ee.prototype.push=function(Y,le){var Ce=this;if(this.onfile||P(5),this.p||P(4),this.c>0){var ze=Math.min(this.c,Y.length),rt=Y.subarray(0,ze);if(this.c-=ze,this.d?this.d.push(rt,!this.c):this.k[0].push(rt),Y=Y.subarray(ze),Y.length)return this.push(Y,le)}else{var ct=0,et=0,It=void 0,gt=void 0;this.p.length?Y.length?(gt=new e(this.p.length+Y.length),gt.set(this.p),gt.set(Y,this.p.length)):gt=this.p:gt=Y;for(var mt=gt.length,bt=this.c,kt=bt&&this.d,dn=function(){var mn,cn=Pe(gt,et);if(cn==67324752){ct=1,It=et,on.d=null,on.c=0;var _n=q(gt,et+6),rn=q(gt,et+8),vn=_n&2048,Nn=_n&8,an=q(gt,et+26),Vt=q(gt,et+28);if(mt>et+30+an+Vt){var Er=[];on.k.unshift(Er),ct=2;var pn=Pe(gt,et+18),Se=Pe(gt,et+22),We=Po(gt.subarray(et+30,et+=30+an),!vn);pn==4294967295?(mn=Nn?[-2]:$a(gt,et),pn=mn[0],Se=mn[1]):Nn&&(pn=-1),et+=Vt,on.c=pn;var lt,wt={name:We,compression:rn,start:function(){if(wt.ondata||P(5),!pn)wt.ondata(null,pe,!0);else{var On=Ce.o[rn];On||wt.ondata(P(14,"unknown compression type "+rn,1),null,!1),lt=pn<0?new On(We):new On(We,pn,Se),lt.ondata=function(Zr,jr,Jr){wt.ondata(Zr,jr,Jr)};for(var Sn=0,Bn=Er;Sn<Bn.length;Sn++){var Qn=Bn[Sn];lt.push(Qn,!1)}Ce.k[0]==Er&&Ce.c?Ce.d=lt:lt.push(pe,!0)}},terminate:function(){lt&&lt.terminate&&lt.terminate()}};pn>=0&&(wt.size=pn,wt.originalSize=Se),on.onfile(wt)}return"break"}else if(bt){if(cn==134695760)return It=et+=12+(bt==-2&&8),ct=3,on.c=0,"break";if(cn==33639248)return It=et-=4,ct=3,on.c=0,"break"}},on=this;et<mt-4;++et){var sn=dn();if(sn==="break")break}if(this.p=pe,bt<0){var Mt=ct?gt.subarray(0,It-12-(bt==-2&&8)-(Pe(gt,It-16)==134695760&&4)):gt.subarray(0,et);kt?kt.push(Mt,!!ct):this.k[+(ct==2)].push(Mt)}if(ct&2)return this.push(gt.subarray(et),le);this.p=gt.subarray(et)}le&&(this.c&&P(13),this.p=null)},ee.prototype.register=function(Y){this.o[Y.compression]=Y},ee}();En.Unzip=Bs;var xo=typeof queueMicrotask=="function"?queueMicrotask:typeof setTimeout=="function"?setTimeout:function(ee){ee()};function ai(ee,Y,le){le||(le=Y,Y={}),typeof le!="function"&&P(7);var Ce=[],ze=function(){for(var sn=0;sn<Ce.length;++sn)Ce[sn]()},rt={},ct=function(sn,Mt){xo(function(){le(sn,Mt)})};xo(function(){ct=le});for(var et=ee.length-22;Pe(ee,et)!=101010256;--et)if(!et||ee.length-et>65558)return ct(P(13,0,1),null),ze;var It=q(ee,et+8);if(It){var gt=It,mt=Pe(ee,et+16),bt=mt==4294967295;if(bt){if(et=Pe(ee,et-12),Pe(ee,et)!=101075792)return ct(P(13,0,1),null),ze;gt=It=Pe(ee,et+32),mt=Pe(ee,et+48)}for(var kt=Y&&Y.filter,dn=function(sn){var Mt=$i(ee,mt,bt),mn=Mt[0],cn=Mt[1],_n=Mt[2],rn=Mt[3],vn=Mt[4],Nn=Mt[5],an=oo(ee,Nn);mt=vn;var Vt=function(pn,Se){pn?(ze(),ct(pn,null)):(Se&&(rt[rn]=Se),--It||ct(null,rt))};if(!kt||kt({name:rn,size:cn,originalSize:_n,compression:mn}))if(!mn)Vt(null,w(ee,an,an+cn));else if(mn==8){var Er=ee.subarray(an,an+cn);if(cn<32e4)try{Vt(null,xn(Er,new e(_n)))}catch(pn){Vt(pn,null)}else Ce.push(jn(Er,{size:_n},Vt))}else Vt(P(14,"unknown compression type "+mn,1),null);else Vt(null,null)},on=0;on<gt;++on)dn(on)}else ct(null,{});return ze}En.unzip=ai;function gi(ee,Y){for(var le={},Ce=ee.length-22;Pe(ee,Ce)!=101010256;--Ce)(!Ce||ee.length-Ce>65558)&&P(13);var ze=q(ee,Ce+8);if(!ze)return{};var rt=Pe(ee,Ce+16),ct=rt==4294967295;ct&&(Ce=Pe(ee,Ce-12),Pe(ee,Ce)!=101075792&&P(13),ze=Pe(ee,Ce+32),rt=Pe(ee,Ce+48));for(var et=Y&&Y.filter,It=0;It<ze;++It){var gt=$i(ee,rt,ct),mt=gt[0],bt=gt[1],kt=gt[2],dn=gt[3],on=gt[4],sn=gt[5],Mt=oo(ee,sn);rt=on,(!et||et({name:dn,size:bt,originalSize:kt,compression:mt}))&&(mt?mt==8?le[dn]=xn(ee.subarray(Mt,Mt+bt),new e(kt)):P(14,"unknown compression type "+mt):le[dn]=w(ee,Mt,Mt+bt))}return le}return En.unzipSync=gi,En}var Ag={},xg={},Rg={},F6;function Wz(){if(F6)return Rg;F6=1,Object.defineProperty(Rg,"__esModule",{value:!0}),Rg.NIFTIEXTENSION=void 0;class t{constructor(n,r,a,i){it(this,"esize");it(this,"ecode");it(this,"edata");it(this,"littleEndian");if(n%16!=0)throw new Error("This does not appear to be a NIFTI extension");this.esize=n,this.ecode=r,this.edata=a,this.littleEndian=i}toArrayBuffer(){let n=new Uint8Array(this.esize),r=new Uint8Array(this.edata);n.set(r,8);let a=new DataView(n.buffer);return a.setInt32(0,this.esize,this.littleEndian),a.setInt32(4,this.ecode,this.littleEndian),n.buffer}}return Rg.NIFTIEXTENSION=t,Rg}var V6;function VC(){if(V6)return xg;V6=1,Object.defineProperty(xg,"__esModule",{value:!0}),xg.Utils=void 0;const t=Wz(),n=class n{static getStringAt(a,i,o){var s="",c,l;for(c=i;c<o;c+=1)l=a.getUint8(c),l!==0&&(s+=String.fromCharCode(l));return s}static getIntAt(a,i,o){return a.getInt32(i,o)}static getFloatAt(a,i,o){return a.getFloat32(i,o)}static getDoubleAt(a,i,o){return a.getFloat64(i,o)}static getLongAt(a,i,o){var s,c=[],l=0;for(s=0;s<8;s+=1)c[s]=n.getByteAt(a,i+s);for(s=c.length-1;s>=0;s--)l=l*256+c[s];return l}static getExtensionsAt(a,i,o,s){let c=[],l=i;for(;l<s;){let u=o,f=n.getIntAt(a,l,o);if(!f)break;if(f+l>s&&(u=!u,f=n.getIntAt(a,l,u),f+l>s))throw new Error("This does not appear to be a valid NIFTI extension");if(f%16!=0)throw new Error("This does not appear to be a NIFTI extension");let v=n.getIntAt(a,l+4,u),g=a.buffer.slice(l+8,l+f);console.log("extensionByteIndex: "+(l+8)+" esize: "+f),console.log(g);let d=new t.NIFTIEXTENSION(f,v,g,u);c.push(d),l+=f}return c}static toArrayBuffer(a){var i,o,s;for(i=new ArrayBuffer(a.length),o=new Uint8Array(i),s=0;s<a.length;s+=1)o[s]=a[s];return i}static isString(a){return typeof a=="string"||a instanceof String}static formatNumber(a,i=void 0){let o;return n.isString(a)?o=Number(a):o=a,i?o=o.toPrecision(5):o=o.toPrecision(7),parseFloat(o)}static makeCRCTable(){let a,i=[];for(var o=0;o<256;o++){a=o;for(var s=0;s<8;s++)a=a&1?3988292384^a>>>1:a>>>1;i[o]=a}return i}static crc32(a){n.crcTable||(n.crcTable=n.makeCRCTable());const i=n.crcTable;let o=-1;for(var s=0;s<a.byteLength;s++)o=o>>>8^i[(o^a.getUint8(s))&255];return(o^-1)>>>0}};it(n,"crcTable",null),it(n,"GUNZIP_MAGIC_COOKIE1",31),it(n,"GUNZIP_MAGIC_COOKIE2",139),it(n,"getByteAt",function(a,i){return a.getInt8(i)}),it(n,"getShortAt",function(a,i,o){return a.getInt16(i,o)});let e=n;return xg.Utils=e,xg}var k6;function Jy(){if(k6)return Ag;k6=1,Object.defineProperty(Ag,"__esModule",{value:!0}),Ag.NIFTI1=void 0;const t=VC(),n=class n{constructor(){it(this,"littleEndian",!1);it(this,"dim_info",0);it(this,"dims",[]);it(this,"intent_p1",0);it(this,"intent_p2",0);it(this,"intent_p3",0);it(this,"intent_code",0);it(this,"datatypeCode",0);it(this,"numBitsPerVoxel",0);it(this,"slice_start",0);it(this,"slice_end",0);it(this,"slice_code",0);it(this,"pixDims",[]);it(this,"vox_offset",0);it(this,"scl_slope",1);it(this,"scl_inter",0);it(this,"xyzt_units",0);it(this,"cal_max",0);it(this,"cal_min",0);it(this,"slice_duration",0);it(this,"toffset",0);it(this,"description","");it(this,"aux_file","");it(this,"intent_name","");it(this,"qform_code",0);it(this,"sform_code",0);it(this,"quatern_a",0);it(this,"quatern_b",0);it(this,"quatern_c",0);it(this,"quatern_d",0);it(this,"qoffset_x",0);it(this,"qoffset_y",0);it(this,"qoffset_z",0);it(this,"affine",[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]]);it(this,"qfac",1);it(this,"quatern_R");it(this,"magic","0");it(this,"isHDR",!1);it(this,"extensionFlag",[0,0,0,0]);it(this,"extensionSize",0);it(this,"extensionCode",0);it(this,"extensions",[]);it(this,"getDatatypeCodeString",function(a){return a===n.TYPE_UINT8?"1-Byte Unsigned Integer":a===n.TYPE_INT16?"2-Byte Signed Integer":a===n.TYPE_INT32?"4-Byte Signed Integer":a===n.TYPE_FLOAT32?"4-Byte Float":a===n.TYPE_FLOAT64?"8-Byte Float":a===n.TYPE_RGB24?"RGB":a===n.TYPE_INT8?"1-Byte Signed Integer":a===n.TYPE_UINT16?"2-Byte Unsigned Integer":a===n.TYPE_UINT32?"4-Byte Unsigned Integer":a===n.TYPE_INT64?"8-Byte Signed Integer":a===n.TYPE_UINT64?"8-Byte Unsigned Integer":"Unknown"});it(this,"getTransformCodeString",function(a){return a===n.XFORM_SCANNER_ANAT?"Scanner":a===n.XFORM_ALIGNED_ANAT?"Aligned":a===n.XFORM_TALAIRACH?"Talairach":a===n.XFORM_MNI_152?"MNI":"Unknown"});it(this,"getUnitsCodeString",function(a){return a===n.UNITS_METER?"Meters":a===n.UNITS_MM?"Millimeters":a===n.UNITS_MICRON?"Microns":a===n.UNITS_SEC?"Seconds":a===n.UNITS_MSEC?"Milliseconds":a===n.UNITS_USEC?"Microseconds":a===n.UNITS_HZ?"Hz":a===n.UNITS_PPM?"PPM":a===n.UNITS_RADS?"Rads":"Unknown"});it(this,"nifti_mat33_mul",function(a,i){var o=[[0,0,0],[0,0,0],[0,0,0]],s,c;for(s=0;s<3;s+=1)for(c=0;c<3;c+=1)o[s][c]=a[s][0]*i[0][c]+a[s][1]*i[1][c]+a[s][2]*i[2][c];return o});it(this,"nifti_mat33_determ",function(a){var i,o,s,c,l,u,f,v,g;return i=a[0][0],o=a[0][1],s=a[0][2],c=a[1][0],l=a[1][1],u=a[1][2],f=a[2][0],v=a[2][1],g=a[2][2],i*l*g-i*v*u-c*o*g+c*v*s+f*o*u-f*l*s})}readHeader(a){var i=new DataView(a),o=t.Utils.getIntAt(i,0,this.littleEndian),s,c,l,u;if(o!==n.MAGIC_COOKIE&&(this.littleEndian=!0,o=t.Utils.getIntAt(i,0,this.littleEndian)),o!==n.MAGIC_COOKIE)throw new Error("This does not appear to be a NIFTI file!");for(this.dim_info=t.Utils.getByteAt(i,39),s=0;s<8;s+=1)u=40+s*2,this.dims[s]=t.Utils.getShortAt(i,u,this.littleEndian);for(this.intent_p1=t.Utils.getFloatAt(i,56,this.littleEndian),this.intent_p2=t.Utils.getFloatAt(i,60,this.littleEndian),this.intent_p3=t.Utils.getFloatAt(i,64,this.littleEndian),this.intent_code=t.Utils.getShortAt(i,68,this.littleEndian),this.datatypeCode=t.Utils.getShortAt(i,70,this.littleEndian),this.numBitsPerVoxel=t.Utils.getShortAt(i,72,this.littleEndian),this.slice_start=t.Utils.getShortAt(i,74,this.littleEndian),s=0;s<8;s+=1)u=76+s*4,this.pixDims[s]=t.Utils.getFloatAt(i,u,this.littleEndian);if(this.vox_offset=t.Utils.getFloatAt(i,108,this.littleEndian),this.scl_slope=t.Utils.getFloatAt(i,112,this.littleEndian),this.scl_inter=t.Utils.getFloatAt(i,116,this.littleEndian),this.slice_end=t.Utils.getShortAt(i,120,this.littleEndian),this.slice_code=t.Utils.getByteAt(i,122),this.xyzt_units=t.Utils.getByteAt(i,123),this.cal_max=t.Utils.getFloatAt(i,124,this.littleEndian),this.cal_min=t.Utils.getFloatAt(i,128,this.littleEndian),this.slice_duration=t.Utils.getFloatAt(i,132,this.littleEndian),this.toffset=t.Utils.getFloatAt(i,136,this.littleEndian),this.description=t.Utils.getStringAt(i,148,228),this.aux_file=t.Utils.getStringAt(i,228,252),this.qform_code=t.Utils.getShortAt(i,252,this.littleEndian),this.sform_code=t.Utils.getShortAt(i,254,this.littleEndian),this.quatern_b=t.Utils.getFloatAt(i,256,this.littleEndian),this.quatern_c=t.Utils.getFloatAt(i,260,this.littleEndian),this.quatern_d=t.Utils.getFloatAt(i,264,this.littleEndian),this.quatern_a=Math.sqrt(1-(Math.pow(this.quatern_b,2)+Math.pow(this.quatern_c,2)+Math.pow(this.quatern_d,2))),this.qoffset_x=t.Utils.getFloatAt(i,268,this.littleEndian),this.qoffset_y=t.Utils.getFloatAt(i,272,this.littleEndian),this.qoffset_z=t.Utils.getFloatAt(i,276,this.littleEndian),this.qform_code<1&&this.sform_code<1&&(this.affine[0][0]=this.pixDims[1],this.affine[1][1]=this.pixDims[2],this.affine[2][2]=this.pixDims[3]),this.qform_code>0&&this.sform_code<this.qform_code){const f=this.quatern_a,v=this.quatern_b,g=this.quatern_c,d=this.quatern_d;for(this.qfac=this.pixDims[0]===0?1:this.pixDims[0],this.quatern_R=[[f*f+v*v-g*g-d*d,2*v*g-2*f*d,2*v*d+2*f*g],[2*v*g+2*f*d,f*f+g*g-v*v-d*d,2*g*d-2*f*v],[2*v*d-2*f*g,2*g*d+2*f*v,f*f+d*d-g*g-v*v]],c=0;c<3;c+=1)for(l=0;l<3;l+=1)this.affine[c][l]=this.quatern_R[c][l]*this.pixDims[l+1],l===2&&(this.affine[c][l]*=this.qfac);this.affine[0][3]=this.qoffset_x,this.affine[1][3]=this.qoffset_y,this.affine[2][3]=this.qoffset_z}else if(this.sform_code>0)for(c=0;c<3;c+=1)for(l=0;l<4;l+=1)u=280+(c*4+l)*4,this.affine[c][l]=t.Utils.getFloatAt(i,u,this.littleEndian);if(this.affine[3][0]=0,this.affine[3][1]=0,this.affine[3][2]=0,this.affine[3][3]=1,this.intent_name=t.Utils.getStringAt(i,328,344),this.magic=t.Utils.getStringAt(i,344,348),this.isHDR=this.magic===String.fromCharCode.apply(null,n.MAGIC_NUMBER2),i.byteLength>n.MAGIC_COOKIE){this.extensionFlag[0]=t.Utils.getByteAt(i,348),this.extensionFlag[1]=t.Utils.getByteAt(i,349),this.extensionFlag[2]=t.Utils.getByteAt(i,350),this.extensionFlag[3]=t.Utils.getByteAt(i,351);let f=!0;!this.isHDR&&this.vox_offset<=352&&(f=!1),i.byteLength<=368&&(f=!1),f&&this.extensionFlag[0]&&(this.extensions=t.Utils.getExtensionsAt(i,this.getExtensionLocation(),this.littleEndian,this.vox_offset),this.extensionSize=this.extensions[0].esize,this.extensionCode=this.extensions[0].ecode)}}toFormattedString(){var a=t.Utils.formatNumber,i="";return i+="Dim Info = "+this.dim_info+`
`,i+="Image Dimensions (1-8): "+this.dims[0]+", "+this.dims[1]+", "+this.dims[2]+", "+this.dims[3]+", "+this.dims[4]+", "+this.dims[5]+", "+this.dims[6]+", "+this.dims[7]+`
`,i+="Intent Parameters (1-3): "+this.intent_p1+", "+this.intent_p2+", "+this.intent_p3+`
`,i+="Intent Code = "+this.intent_code+`
`,i+="Datatype = "+this.datatypeCode+" ("+this.getDatatypeCodeString(this.datatypeCode)+`)
`,i+="Bits Per Voxel = "+this.numBitsPerVoxel+`
`,i+="Slice Start = "+this.slice_start+`
`,i+="Voxel Dimensions (1-8): "+a(this.pixDims[0])+", "+a(this.pixDims[1])+", "+a(this.pixDims[2])+", "+a(this.pixDims[3])+", "+a(this.pixDims[4])+", "+a(this.pixDims[5])+", "+a(this.pixDims[6])+", "+a(this.pixDims[7])+`
`,i+="Image Offset = "+this.vox_offset+`
`,i+="Data Scale:  Slope = "+a(this.scl_slope)+"  Intercept = "+a(this.scl_inter)+`
`,i+="Slice End = "+this.slice_end+`
`,i+="Slice Code = "+this.slice_code+`
`,i+="Units Code = "+this.xyzt_units+" ("+this.getUnitsCodeString(n.SPATIAL_UNITS_MASK&this.xyzt_units)+", "+this.getUnitsCodeString(n.TEMPORAL_UNITS_MASK&this.xyzt_units)+`)
`,i+="Display Range:  Max = "+a(this.cal_max)+"  Min = "+a(this.cal_min)+`
`,i+="Slice Duration = "+this.slice_duration+`
`,i+="Time Axis Shift = "+this.toffset+`
`,i+='Description: "'+this.description+`"
`,i+='Auxiliary File: "'+this.aux_file+`"
`,i+="Q-Form Code = "+this.qform_code+" ("+this.getTransformCodeString(this.qform_code)+`)
`,i+="S-Form Code = "+this.sform_code+" ("+this.getTransformCodeString(this.sform_code)+`)
`,i+="Quaternion Parameters:  b = "+a(this.quatern_b)+"  c = "+a(this.quatern_c)+"  d = "+a(this.quatern_d)+`
`,i+="Quaternion Offsets:  x = "+this.qoffset_x+"  y = "+this.qoffset_y+"  z = "+this.qoffset_z+`
`,i+="S-Form Parameters X: "+a(this.affine[0][0])+", "+a(this.affine[0][1])+", "+a(this.affine[0][2])+", "+a(this.affine[0][3])+`
`,i+="S-Form Parameters Y: "+a(this.affine[1][0])+", "+a(this.affine[1][1])+", "+a(this.affine[1][2])+", "+a(this.affine[1][3])+`
`,i+="S-Form Parameters Z: "+a(this.affine[2][0])+", "+a(this.affine[2][1])+", "+a(this.affine[2][2])+", "+a(this.affine[2][3])+`
`,i+='Intent Name: "'+this.intent_name+`"
`,this.extensionFlag[0]&&(i+="Extension: Size = "+this.extensionSize+"  Code = "+this.extensionCode+`
`),i}getQformMat(){return this.convertNiftiQFormToNiftiSForm(this.quatern_b,this.quatern_c,this.quatern_d,this.qoffset_x,this.qoffset_y,this.qoffset_z,this.pixDims[1],this.pixDims[2],this.pixDims[3],this.pixDims[0])}convertNiftiQFormToNiftiSForm(a,i,o,s,c,l,u,f,v,g){var d=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],m,h=a,C=i,p=o,S,I,D;return d[3][0]=d[3][1]=d[3][2]=0,d[3][3]=1,m=1-(h*h+C*C+p*p),m<1e-7?(m=1/Math.sqrt(h*h+C*C+p*p),h*=m,C*=m,p*=m,m=0):m=Math.sqrt(m),S=u>0?u:1,I=f>0?f:1,D=v>0?v:1,g<0&&(D=-D),d[0][0]=(m*m+h*h-C*C-p*p)*S,d[0][1]=2*(h*C-m*p)*I,d[0][2]=2*(h*p+m*C)*D,d[1][0]=2*(h*C+m*p)*S,d[1][1]=(m*m+C*C-h*h-p*p)*I,d[1][2]=2*(C*p-m*h)*D,d[2][0]=2*(h*p-m*C)*S,d[2][1]=2*(C*p+m*h)*I,d[2][2]=(m*m+p*p-C*C-h*h)*D,d[0][3]=s,d[1][3]=c,d[2][3]=l,d}convertNiftiSFormToNEMA(a){var i,o,s,c,l,u,f,v,g,d,m,h,C,p,S,I,D,E,T,y,M,_,O,w,x,P,R,L,H,F,U,V,X,re;if(S=0,R=[[0,0,0],[0,0,0],[0,0,0]],L=[[0,0,0],[0,0,0],[0,0,0]],i=a[0][0],o=a[0][1],s=a[0][2],c=a[1][0],l=a[1][1],u=a[1][2],f=a[2][0],v=a[2][1],g=a[2][2],d=Math.sqrt(i*i+c*c+f*f),d===0||(i/=d,c/=d,f/=d,d=Math.sqrt(o*o+l*l+v*v),d===0))return null;if(o/=d,l/=d,v/=d,d=i*o+c*l+f*v,Math.abs(d)>1e-4){if(o-=d*i,l-=d*c,v-=d*f,d=Math.sqrt(o*o+l*l+v*v),d===0)return null;o/=d,l/=d,v/=d}if(d=Math.sqrt(s*s+u*u+g*g),d===0?(s=c*v-f*l,u=f*o-v*i,g=i*l-c*o):(s/=d,u/=d,g/=d),d=i*s+c*u+f*g,Math.abs(d)>1e-4){if(s-=d*i,u-=d*c,g-=d*f,d=Math.sqrt(s*s+u*u+g*g),d===0)return null;s/=d,u/=d,g/=d}if(d=o*s+l*u+v*g,Math.abs(d)>1e-4){if(s-=d*o,u-=d*l,g-=d*v,d=Math.sqrt(s*s+u*u+g*g),d===0)return null;s/=d,u/=d,g/=d}if(R[0][0]=i,R[0][1]=o,R[0][2]=s,R[1][0]=c,R[1][1]=l,R[1][2]=u,R[2][0]=f,R[2][1]=v,R[2][2]=g,m=this.nifti_mat33_determ(R),m===0)return null;for(P=-666,T=_=O=w=1,y=2,M=3,C=1;C<=3;C+=1)for(p=1;p<=3;p+=1)if(C!==p){for(S=1;S<=3;S+=1)if(!(C===S||p===S))for(L[0][0]=L[0][1]=L[0][2]=L[1][0]=L[1][1]=L[1][2]=L[2][0]=L[2][1]=L[2][2]=0,I=-1;I<=1;I+=2)for(D=-1;D<=1;D+=2)for(E=-1;E<=1;E+=2)L[0][C-1]=I,L[1][p-1]=D,L[2][S-1]=E,h=this.nifti_mat33_determ(L),h*m>0&&(x=this.nifti_mat33_mul(L,R),d=x[0][0]+x[1][1]+x[2][2],d>P&&(P=d,T=C,y=p,M=S,_=I,O=D,w=E))}switch(H=F=U=V=X=re="",T*_){case 1:H="X",V="+";break;case-1:H="X",V="-";break;case 2:H="Y",V="+";break;case-2:H="Y",V="-";break;case 3:H="Z",V="+";break;case-3:H="Z",V="-";break}switch(y*O){case 1:F="X",X="+";break;case-1:F="X",X="-";break;case 2:F="Y",X="+";break;case-2:F="Y",X="-";break;case 3:F="Z",X="+";break;case-3:F="Z",X="-";break}switch(M*w){case 1:U="X",re="+";break;case-1:U="X",re="-";break;case 2:U="Y",re="+";break;case-2:U="Y",re="-";break;case 3:U="Z",re="+";break;case-3:U="Z",re="-";break}return H+F+U+V+X+re}getExtensionLocation(){return n.MAGIC_COOKIE+4}getExtensionSize(a){return t.Utils.getIntAt(a,this.getExtensionLocation(),this.littleEndian)}getExtensionCode(a){return t.Utils.getIntAt(a,this.getExtensionLocation()+4,this.littleEndian)}addExtension(a,i=-1){i==-1?this.extensions.push(a):this.extensions.splice(i,0,a),this.vox_offset+=a.esize}removeExtension(a){let i=this.extensions[a];i&&(this.vox_offset-=i.esize),this.extensions.splice(a,1)}toArrayBuffer(a=!1){let s=352;if(a)for(let f of this.extensions)s+=f.esize;let c=new Uint8Array(s),l=new DataView(c.buffer);l.setInt32(0,348,this.littleEndian),l.setUint8(39,this.dim_info);for(let f=0;f<8;f++)l.setUint16(40+2*f,this.dims[f],this.littleEndian);l.setFloat32(56,this.intent_p1,this.littleEndian),l.setFloat32(60,this.intent_p2,this.littleEndian),l.setFloat32(64,this.intent_p3,this.littleEndian),l.setInt16(68,this.intent_code,this.littleEndian),l.setInt16(70,this.datatypeCode,this.littleEndian),l.setInt16(72,this.numBitsPerVoxel,this.littleEndian),l.setInt16(74,this.slice_start,this.littleEndian);for(let f=0;f<8;f++)l.setFloat32(76+4*f,this.pixDims[f],this.littleEndian);l.setFloat32(108,this.vox_offset,this.littleEndian),l.setFloat32(112,this.scl_slope,this.littleEndian),l.setFloat32(116,this.scl_inter,this.littleEndian),l.setInt16(120,this.slice_end,this.littleEndian),l.setUint8(122,this.slice_code),l.setUint8(123,this.xyzt_units),l.setFloat32(124,this.cal_max,this.littleEndian),l.setFloat32(128,this.cal_min,this.littleEndian),l.setFloat32(132,this.slice_duration,this.littleEndian),l.setFloat32(136,this.toffset,this.littleEndian),c.set(Buffer.from(this.description),148),c.set(Buffer.from(this.aux_file),228),l.setInt16(252,this.qform_code,this.littleEndian),l.setInt16(254,this.sform_code,this.littleEndian),l.setFloat32(256,this.quatern_b,this.littleEndian),l.setFloat32(260,this.quatern_c,this.littleEndian),l.setFloat32(264,this.quatern_d,this.littleEndian),l.setFloat32(268,this.qoffset_x,this.littleEndian),l.setFloat32(272,this.qoffset_y,this.littleEndian),l.setFloat32(276,this.qoffset_z,this.littleEndian);const u=this.affine.flat();for(let f=0;f<12;f++)l.setFloat32(280+4*f,u[f],this.littleEndian);if(c.set(Buffer.from(this.intent_name),328),c.set(Buffer.from(this.magic),344),a){c.set(Uint8Array.from([1,0,0,0]),348);let f=this.getExtensionLocation();for(const v of this.extensions)l.setInt32(f,v.esize,v.littleEndian),l.setInt32(f+4,v.ecode,v.littleEndian),c.set(new Uint8Array(v.edata),f+8),f+=v.esize}else c.set(new Uint8Array(4).fill(0),348);return c.buffer}};it(n,"TYPE_NONE",0),it(n,"TYPE_BINARY",1),it(n,"TYPE_UINT8",2),it(n,"TYPE_INT16",4),it(n,"TYPE_INT32",8),it(n,"TYPE_FLOAT32",16),it(n,"TYPE_COMPLEX64",32),it(n,"TYPE_FLOAT64",64),it(n,"TYPE_RGB24",128),it(n,"TYPE_INT8",256),it(n,"TYPE_UINT16",512),it(n,"TYPE_UINT32",768),it(n,"TYPE_INT64",1024),it(n,"TYPE_UINT64",1280),it(n,"TYPE_FLOAT128",1536),it(n,"TYPE_COMPLEX128",1792),it(n,"TYPE_COMPLEX256",2048),it(n,"XFORM_UNKNOWN",0),it(n,"XFORM_SCANNER_ANAT",1),it(n,"XFORM_ALIGNED_ANAT",2),it(n,"XFORM_TALAIRACH",3),it(n,"XFORM_MNI_152",4),it(n,"SPATIAL_UNITS_MASK",7),it(n,"TEMPORAL_UNITS_MASK",56),it(n,"UNITS_UNKNOWN",0),it(n,"UNITS_METER",1),it(n,"UNITS_MM",2),it(n,"UNITS_MICRON",3),it(n,"UNITS_SEC",8),it(n,"UNITS_MSEC",16),it(n,"UNITS_USEC",24),it(n,"UNITS_HZ",32),it(n,"UNITS_PPM",40),it(n,"UNITS_RADS",48),it(n,"MAGIC_COOKIE",348),it(n,"STANDARD_HEADER_SIZE",348),it(n,"MAGIC_NUMBER_LOCATION",344),it(n,"MAGIC_NUMBER",[110,43,49]),it(n,"MAGIC_NUMBER2",[110,105,49]),it(n,"EXTENSION_HEADER_SIZE",8);let e=n;return Ag.NIFTI1=e,Ag}var bg={},G6;function B6(){if(G6)return bg;G6=1,Object.defineProperty(bg,"__esModule",{value:!0}),bg.NIFTI2=void 0;const t=Jy(),e=VC(),r=class r{constructor(){it(this,"littleEndian",!1);it(this,"dim_info",0);it(this,"dims",[]);it(this,"intent_p1",0);it(this,"intent_p2",0);it(this,"intent_p3",0);it(this,"intent_code",0);it(this,"datatypeCode",0);it(this,"numBitsPerVoxel",0);it(this,"slice_start",0);it(this,"slice_end",0);it(this,"slice_code",0);it(this,"pixDims",[]);it(this,"vox_offset",0);it(this,"scl_slope",1);it(this,"scl_inter",0);it(this,"xyzt_units",0);it(this,"cal_max",0);it(this,"cal_min",0);it(this,"slice_duration",0);it(this,"toffset",0);it(this,"description","");it(this,"aux_file","");it(this,"intent_name","");it(this,"qform_code",0);it(this,"sform_code",0);it(this,"quatern_b",0);it(this,"quatern_c",0);it(this,"quatern_d",0);it(this,"qoffset_x",0);it(this,"qoffset_y",0);it(this,"qoffset_z",0);it(this,"affine",[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]]);it(this,"magic","0");it(this,"extensionFlag",[0,0,0,0]);it(this,"extensions",[]);it(this,"extensionSize",0);it(this,"extensionCode",0);it(this,"getExtensionLocation",function(){return r.MAGIC_COOKIE+4});it(this,"getExtensionSize",t.NIFTI1.prototype.getExtensionSize);it(this,"getExtensionCode",t.NIFTI1.prototype.getExtensionCode);it(this,"addExtension",t.NIFTI1.prototype.addExtension);it(this,"removeExtension",t.NIFTI1.prototype.removeExtension);it(this,"getDatatypeCodeString",t.NIFTI1.prototype.getDatatypeCodeString);it(this,"getTransformCodeString",t.NIFTI1.prototype.getTransformCodeString);it(this,"getUnitsCodeString",t.NIFTI1.prototype.getUnitsCodeString);it(this,"getQformMat",t.NIFTI1.prototype.getQformMat);it(this,"convertNiftiQFormToNiftiSForm",t.NIFTI1.prototype.convertNiftiQFormToNiftiSForm);it(this,"convertNiftiSFormToNEMA",t.NIFTI1.prototype.convertNiftiSFormToNEMA);it(this,"nifti_mat33_mul",t.NIFTI1.prototype.nifti_mat33_mul);it(this,"nifti_mat33_determ",t.NIFTI1.prototype.nifti_mat33_determ)}readHeader(i){var o=new DataView(i),s=e.Utils.getIntAt(o,0,this.littleEndian),c,l,u,f;if(s!==r.MAGIC_COOKIE&&(this.littleEndian=!0,s=e.Utils.getIntAt(o,0,this.littleEndian)),s!==r.MAGIC_COOKIE)throw new Error("This does not appear to be a NIFTI file!");for(this.magic=e.Utils.getStringAt(o,4,12),this.datatypeCode=e.Utils.getShortAt(o,12,this.littleEndian),this.numBitsPerVoxel=e.Utils.getShortAt(o,14,this.littleEndian),c=0;c<8;c+=1)f=16+c*8,this.dims[c]=e.Utils.getLongAt(o,f,this.littleEndian);for(this.intent_p1=e.Utils.getDoubleAt(o,80,this.littleEndian),this.intent_p2=e.Utils.getDoubleAt(o,88,this.littleEndian),this.intent_p3=e.Utils.getDoubleAt(o,96,this.littleEndian),c=0;c<8;c+=1)f=104+c*8,this.pixDims[c]=e.Utils.getDoubleAt(o,f,this.littleEndian);for(this.vox_offset=e.Utils.getLongAt(o,168,this.littleEndian),this.scl_slope=e.Utils.getDoubleAt(o,176,this.littleEndian),this.scl_inter=e.Utils.getDoubleAt(o,184,this.littleEndian),this.cal_max=e.Utils.getDoubleAt(o,192,this.littleEndian),this.cal_min=e.Utils.getDoubleAt(o,200,this.littleEndian),this.slice_duration=e.Utils.getDoubleAt(o,208,this.littleEndian),this.toffset=e.Utils.getDoubleAt(o,216,this.littleEndian),this.slice_start=e.Utils.getLongAt(o,224,this.littleEndian),this.slice_end=e.Utils.getLongAt(o,232,this.littleEndian),this.description=e.Utils.getStringAt(o,240,320),this.aux_file=e.Utils.getStringAt(o,320,344),this.qform_code=e.Utils.getIntAt(o,344,this.littleEndian),this.sform_code=e.Utils.getIntAt(o,348,this.littleEndian),this.quatern_b=e.Utils.getDoubleAt(o,352,this.littleEndian),this.quatern_c=e.Utils.getDoubleAt(o,360,this.littleEndian),this.quatern_d=e.Utils.getDoubleAt(o,368,this.littleEndian),this.qoffset_x=e.Utils.getDoubleAt(o,376,this.littleEndian),this.qoffset_y=e.Utils.getDoubleAt(o,384,this.littleEndian),this.qoffset_z=e.Utils.getDoubleAt(o,392,this.littleEndian),l=0;l<3;l+=1)for(u=0;u<4;u+=1)f=400+(l*4+u)*8,this.affine[l][u]=e.Utils.getDoubleAt(o,f,this.littleEndian);this.affine[3][0]=0,this.affine[3][1]=0,this.affine[3][2]=0,this.affine[3][3]=1,this.slice_code=e.Utils.getIntAt(o,496,this.littleEndian),this.xyzt_units=e.Utils.getIntAt(o,500,this.littleEndian),this.intent_code=e.Utils.getIntAt(o,504,this.littleEndian),this.intent_name=e.Utils.getStringAt(o,508,524),this.dim_info=e.Utils.getByteAt(o,524),o.byteLength>r.MAGIC_COOKIE&&(this.extensionFlag[0]=e.Utils.getByteAt(o,540),this.extensionFlag[1]=e.Utils.getByteAt(o,541),this.extensionFlag[2]=e.Utils.getByteAt(o,542),this.extensionFlag[3]=e.Utils.getByteAt(o,543),this.extensionFlag[0]&&(this.extensions=e.Utils.getExtensionsAt(o,this.getExtensionLocation(),this.littleEndian,this.vox_offset),this.extensionSize=this.extensions[0].esize,this.extensionCode=this.extensions[0].ecode))}toFormattedString(){var i=e.Utils.formatNumber,o="";return o+="Datatype = "+ +this.datatypeCode+" ("+this.getDatatypeCodeString(this.datatypeCode)+`)
`,o+="Bits Per Voxel =  = "+this.numBitsPerVoxel+`
`,o+="Image Dimensions (1-8): "+this.dims[0]+", "+this.dims[1]+", "+this.dims[2]+", "+this.dims[3]+", "+this.dims[4]+", "+this.dims[5]+", "+this.dims[6]+", "+this.dims[7]+`
`,o+="Intent Parameters (1-3): "+this.intent_p1+", "+this.intent_p2+", "+this.intent_p3+`
`,o+="Voxel Dimensions (1-8): "+i(this.pixDims[0])+", "+i(this.pixDims[1])+", "+i(this.pixDims[2])+", "+i(this.pixDims[3])+", "+i(this.pixDims[4])+", "+i(this.pixDims[5])+", "+i(this.pixDims[6])+", "+i(this.pixDims[7])+`
`,o+="Image Offset = "+this.vox_offset+`
`,o+="Data Scale:  Slope = "+i(this.scl_slope)+"  Intercept = "+i(this.scl_inter)+`
`,o+="Display Range:  Max = "+i(this.cal_max)+"  Min = "+i(this.cal_min)+`
`,o+="Slice Duration = "+this.slice_duration+`
`,o+="Time Axis Shift = "+this.toffset+`
`,o+="Slice Start = "+this.slice_start+`
`,o+="Slice End = "+this.slice_end+`
`,o+='Description: "'+this.description+`"
`,o+='Auxiliary File: "'+this.aux_file+`"
`,o+="Q-Form Code = "+this.qform_code+" ("+this.getTransformCodeString(this.qform_code)+`)
`,o+="S-Form Code = "+this.sform_code+" ("+this.getTransformCodeString(this.sform_code)+`)
`,o+="Quaternion Parameters:  b = "+i(this.quatern_b)+"  c = "+i(this.quatern_c)+"  d = "+i(this.quatern_d)+`
`,o+="Quaternion Offsets:  x = "+this.qoffset_x+"  y = "+this.qoffset_y+"  z = "+this.qoffset_z+`
`,o+="S-Form Parameters X: "+i(this.affine[0][0])+", "+i(this.affine[0][1])+", "+i(this.affine[0][2])+", "+i(this.affine[0][3])+`
`,o+="S-Form Parameters Y: "+i(this.affine[1][0])+", "+i(this.affine[1][1])+", "+i(this.affine[1][2])+", "+i(this.affine[1][3])+`
`,o+="S-Form Parameters Z: "+i(this.affine[2][0])+", "+i(this.affine[2][1])+", "+i(this.affine[2][2])+", "+i(this.affine[2][3])+`
`,o+="Slice Code = "+this.slice_code+`
`,o+="Units Code = "+this.xyzt_units+" ("+this.getUnitsCodeString(t.NIFTI1.SPATIAL_UNITS_MASK&this.xyzt_units)+", "+this.getUnitsCodeString(t.NIFTI1.TEMPORAL_UNITS_MASK&this.xyzt_units)+`)
`,o+="Intent Code = "+this.intent_code+`
`,o+='Intent Name: "'+this.intent_name+`"
`,o+="Dim Info = "+this.dim_info+`
`,o}toArrayBuffer(i=!1){let c=544;if(i)for(let v of this.extensions)c+=v.esize;let l=new Uint8Array(c),u=new DataView(l.buffer);u.setInt32(0,540,this.littleEndian),l.set(Buffer.from(this.magic),4),u.setInt16(12,this.datatypeCode,this.littleEndian),u.setInt16(14,this.numBitsPerVoxel,this.littleEndian);for(let v=0;v<8;v++)u.setBigInt64(16+8*v,BigInt(this.dims[v]),this.littleEndian);u.setFloat64(80,this.intent_p1,this.littleEndian),u.setFloat64(88,this.intent_p2,this.littleEndian),u.setFloat64(96,this.intent_p3,this.littleEndian);for(let v=0;v<8;v++)u.setFloat64(104+8*v,this.pixDims[v],this.littleEndian);u.setBigInt64(168,BigInt(this.vox_offset),this.littleEndian),u.setFloat64(176,this.scl_slope,this.littleEndian),u.setFloat64(184,this.scl_inter,this.littleEndian),u.setFloat64(192,this.cal_max,this.littleEndian),u.setFloat64(200,this.cal_min,this.littleEndian),u.setFloat64(208,this.slice_duration,this.littleEndian),u.setFloat64(216,this.toffset,this.littleEndian),u.setBigInt64(224,BigInt(this.slice_start),this.littleEndian),u.setBigInt64(232,BigInt(this.slice_end),this.littleEndian),l.set(Buffer.from(this.description),240),l.set(Buffer.from(this.aux_file),320),u.setInt32(344,this.qform_code,this.littleEndian),u.setInt32(348,this.sform_code,this.littleEndian),u.setFloat64(352,this.quatern_b,this.littleEndian),u.setFloat64(360,this.quatern_c,this.littleEndian),u.setFloat64(368,this.quatern_d,this.littleEndian),u.setFloat64(376,this.qoffset_x,this.littleEndian),u.setFloat64(384,this.qoffset_y,this.littleEndian),u.setFloat64(392,this.qoffset_z,this.littleEndian);const f=this.affine.flat();for(let v=0;v<12;v++)u.setFloat64(400+8*v,f[v],this.littleEndian);if(u.setInt32(496,this.slice_code,this.littleEndian),u.setInt32(500,this.xyzt_units,this.littleEndian),u.setInt32(504,this.intent_code,this.littleEndian),l.set(Buffer.from(this.intent_name),508),u.setUint8(524,this.dim_info),i){l.set(Uint8Array.from([1,0,0,0]),540);let v=this.getExtensionLocation();for(const g of this.extensions)u.setInt32(v,g.esize,g.littleEndian),u.setInt32(v+4,g.ecode,g.littleEndian),l.set(new Uint8Array(g.edata),v+8),v+=g.esize}else l.set(new Uint8Array(4).fill(0),540);return l.buffer}};it(r,"MAGIC_COOKIE",540),it(r,"MAGIC_NUMBER_LOCATION",4),it(r,"MAGIC_NUMBER",[110,43,50,0,13,10,26,10]),it(r,"MAGIC_NUMBER2",[110,105,50,0,13,10,26,10]);let n=r;return bg.NIFTI2=n,bg}var W6;function UPe(){return W6||(W6=1,function(t){var e=pf.__createBinding||(Object.create?function(E,T,y,M){M===void 0&&(M=y);var _=Object.getOwnPropertyDescriptor(T,y);(!_||("get"in _?!T.__esModule:_.writable||_.configurable))&&(_={enumerable:!0,get:function(){return T[y]}}),Object.defineProperty(E,M,_)}:function(E,T,y,M){M===void 0&&(M=y),E[M]=T[y]}),n=pf.__setModuleDefault||(Object.create?function(E,T){Object.defineProperty(E,"default",{enumerable:!0,value:T})}:function(E,T){E.default=T}),r=pf.__importStar||function(E){if(E&&E.__esModule)return E;var T={};if(E!=null)for(var y in E)y!=="default"&&Object.prototype.hasOwnProperty.call(E,y)&&e(T,E,y);return n(T,E),T};Object.defineProperty(t,"__esModule",{value:!0}),t.readExtensionData=t.readExtension=t.readImage=t.hasExtension=t.readHeader=t.decompress=t.isCompressed=t.isNIFTI=t.isNIFTI2=t.isNIFTI1=t.NIFTIEXTENSION=t.Utils=t.NIFTI2=t.NIFTI1=void 0;const a=r(LPe()),i=Jy(),o=B6(),s=VC();var c=Jy();Object.defineProperty(t,"NIFTI1",{enumerable:!0,get:function(){return c.NIFTI1}});var l=B6();Object.defineProperty(t,"NIFTI2",{enumerable:!0,get:function(){return l.NIFTI2}});var u=VC();Object.defineProperty(t,"Utils",{enumerable:!0,get:function(){return u.Utils}});var f=Wz();Object.defineProperty(t,"NIFTIEXTENSION",{enumerable:!0,get:function(){return f.NIFTIEXTENSION}});function v(E,T=!1){var y,M,_,O;return E.byteLength<i.NIFTI1.STANDARD_HEADER_SIZE?!1:(y=new DataView(E),y&&(M=y.getUint8(i.NIFTI1.MAGIC_NUMBER_LOCATION)),_=y.getUint8(i.NIFTI1.MAGIC_NUMBER_LOCATION+1),O=y.getUint8(i.NIFTI1.MAGIC_NUMBER_LOCATION+2),T&&M===i.NIFTI1.MAGIC_NUMBER2[0]&&_===i.NIFTI1.MAGIC_NUMBER2[1]&&O===i.NIFTI1.MAGIC_NUMBER2[2]?!0:M===i.NIFTI1.MAGIC_NUMBER[0]&&_===i.NIFTI1.MAGIC_NUMBER[1]&&O===i.NIFTI1.MAGIC_NUMBER[2])}t.isNIFTI1=v;function g(E,T=!1){var y,M,_,O;return E.byteLength<i.NIFTI1.STANDARD_HEADER_SIZE?!1:(y=new DataView(E),M=y.getUint8(o.NIFTI2.MAGIC_NUMBER_LOCATION),_=y.getUint8(o.NIFTI2.MAGIC_NUMBER_LOCATION+1),O=y.getUint8(o.NIFTI2.MAGIC_NUMBER_LOCATION+2),T&&M===o.NIFTI2.MAGIC_NUMBER2[0]&&_===o.NIFTI2.MAGIC_NUMBER2[1]&&O===o.NIFTI2.MAGIC_NUMBER2[2]?!0:M===o.NIFTI2.MAGIC_NUMBER[0]&&_===o.NIFTI2.MAGIC_NUMBER[1]&&O===o.NIFTI2.MAGIC_NUMBER[2])}t.isNIFTI2=g;function d(E,T=!1){return v(E,T)||g(E,T)}t.isNIFTI=d;function m(E){var T,y,M;return!!(E&&(T=new DataView(E),y=T.getUint8(0),M=T.getUint8(1),y===s.Utils.GUNZIP_MAGIC_COOKIE1||M===s.Utils.GUNZIP_MAGIC_COOKIE2))}t.isCompressed=m;function h(E){return a.decompressSync(new Uint8Array(E)).buffer}t.decompress=h;function C(E,T=!1){var y=null;return m(E)&&(E=h(E)),v(E,T)?y=new i.NIFTI1:g(E,T)&&(y=new o.NIFTI2),y?y.readHeader(E):console.error("That file does not appear to be NIFTI!"),y}t.readHeader=C;function p(E){return E.extensionFlag[0]!=0}t.hasExtension=p;function S(E,T){var y=E.vox_offset,M=1,_=1;E.dims[4]&&(M=E.dims[4]),E.dims[5]&&(_=E.dims[5]);var O=E.dims[1]*E.dims[2]*E.dims[3]*M*_*(E.numBitsPerVoxel/8);return T.slice(y,y+O)}t.readImage=S;function I(E,T){var y=E.getExtensionLocation(),M=E.extensionSize;return T.slice(y,y+M)}t.readExtension=I;function D(E,T){var y=E.getExtensionLocation(),M=E.extensionSize;return T.slice(y+8,y+M)}t.readExtensionData=D}(pf)),pf}var yf=UPe(),Vm;(function(t){t.NIFTI_VOLUME_LOADED="CORNERSTONE_NIFTI_VOLUME_LOADED",t.NIFTI_VOLUME_PROGRESS="CORNERSTONE_NIFTI_VOLUME_PROGRESS"})(Vm||(Vm={}));function FPe(t,e,n){const{numBitsPerVoxel:r,littleEndian:a,pixDims:i,dims:o}=t;o[1]*o[2],Math.floor(o[3]/2);const{windowWidth:s,windowCenter:c}={windowWidth:400,windowCenter:40},l=Xe(),u=Xe(),f=Xe();return or(l,e[0],e[1],e[2]),or(u,e[3],e[4],e[5]),or(f,e[6],e[7],e[8]),{volumeMetadata:{BitsAllocated:r,BitsStored:r,SamplesPerPixel:1,HighBit:a?r-1:1,PhotometricInterpretation:"MONOCHROME2",PixelRepresentation:n,ImageOrientationPatient:[l[0],l[1],l[2],u[0],u[1],u[2]],PixelSpacing:[i[1],i[2]],Columns:o[1],Rows:o[2],voiLut:[{windowCenter:c,windowWidth:s}],FrameOfReferenceUID:"1.2.3",Modality:"MR",VOILUTFunction:"LINEAR"},dimensions:[o[1],o[2],o[3]],direction:new Float32Array([l[0],l[1],l[2],u[0],u[1],u[2],f[0],f[1],f[2]])}}const Hz=2,$z=4,zz=8,qz=16,jz=256,Qz=512,Kz=768;function VPe(t,e){const{datatypeCode:n,scl_slope:r,scl_inter:a}=t;let i=r,o=a;(!r||r===0||Number.isNaN(r))&&(i=1),(!a||Number.isNaN(a))&&(o=0);const s=o<0||i<0,c=o%1!==0||i%1!==0;let l,u,f=1;switch(n){case Hz:l=new Uint8Array(e),c?u=Is("Float32Array",l):s?u=Is("Int16Array",l):(f=0,u=Is("Uint8Array",l));break;case $z:l=new Int16Array(e),c?u=Is("Float32Array",l):u=Is("Int16Array",l);break;case zz:l=new Int32Array(e),u=Is("Float32Array",l);break;case qz:{l=new Float32Array(e),u=Is("Float32Array",l);break}case jz:l=new Int8Array(e),c?u=Is("Float32Array",l):u=Is("Int8Array",l);break;case Qz:l=new Uint16Array(e),c||s?u=Is("Float32Array",l):(f=0,u=Is("Uint16Array",l));break;case Kz:l=new Uint32Array(e),u=Is("Float32Array",l);break;default:throw new Error(`NIFTI datatypeCode ${n} is not yet supported`)}const v=u.length;if(i!==1&&o!==0)for(let g=0;g<v;g++)u[g]=kPe(u[g],i,o);return t.numBitsPerVoxel=u.byteLength/u.length*8,{scalarData:u,pixelRepresentation:f}}function kPe(t,e,n){return t*e+n}function Ng(t,e){const n=t/8*e;if(!Ye.isCacheable(n))throw new Error(vt.CACHE_SIZE_EXCEEDED);return Ye.decacheIfNecessaryUntilBytesAvailable(n),n}function Is(t,e){let n,r;const a=e.length;switch(t){case"Float32Array":n=32,Ng(n,a),r=new Float32Array(a);break;case"Int16Array":n=16,Ng(n,a),r=new Int16Array(a);break;case"Int8Array":n=8,Ng(n,a),r=new Int16Array(a);break;case"Uint16Array":n=16,Ng(n,a),r=new Uint16Array(a);break;case"Uint8Array":n=8,Ng(n,a),r=new Uint8Array(a);break;default:throw new Error(`TypedArray ${t} is not yet supported`)}return r.set(e),r}let GPe={beforeSend(){}};function Xz(){return GPe}const kC=new Map;function BPe({url:t,signal:e,onload:n}){return new Promise((r,a)=>{const i=new XMLHttpRequest;i.open("GET",t,!0);const o={},c=Xz().beforeSend(i,o,t),l=Object.assign({},o,c);i.responseType="arraybuffer",Object.keys(l).forEach(function(g){l[g]!==null&&i.setRequestHeader(g,l[g])});const u=function(g){n&&typeof n=="function"&&n(),e&&e.removeEventListener("abort",f),r(i.response)},f=()=>{i.abort(),i.removeEventListener("load",u),a(new Error("Request aborted"))};i.addEventListener("load",u);const v=(g,d)=>{const m={url:t,loaded:g,total:d};Dt(ot,Vm.NIFTI_VOLUME_PROGRESS,{data:m})};i.onprogress=function(g){v(g.loaded,g.total)},e&&e.aborted?(i.abort(),a(new Error("Request aborted"))):e&&e.addEventListener("abort",f),i.send()})}function WPe(t){const[e,n]=t.substring(6).split("?frame="),r=parseInt(n,10),a=Lt(po.IMAGE_PIXEL,t),i=Lt(po.IMAGE_PLANE,t);return{promise:new Promise((s,c)=>{kC.get(e)?$Pe(t,e,r,a,i).then(s).catch(c):(kC.set(e,{status:"fetching"}),HPe(t,e,r,a,i).then(s).catch(c))}),cancelFn:void 0}}async function HPe(t,e,n,r,a){let i=await BPe({url:e}),o=null,s=null;if(yf.isCompressed(i)&&(i=yf.decompress(i)),yf.isNIFTI(i))o=yf.readHeader(i),s=yf.readImage(o,i);else{const l="The provided buffer is not a valid NIFTI file.";throw console.warn(l),new Error(l)}const{scalarData:c}=VPe(o,s);return kC.set(e,{status:"fetched",scalarData:c}),Yz(t,n,r,a,c)}function $Pe(t,e,n,r,a){return new Promise(i=>{const o=setInterval(()=>{const s=kC.get(e);s.status==="fetched"&&(clearInterval(o),i(Yz(t,n,r,a,s.scalarData)))},10)})}function Yz(t,e,n,r,a){const{rows:i,columns:o}=r,s=i*o,c=s*e,l=new a.constructor(s);l.set(a.subarray(c,c+s));const u=yo.createImageVoxelManager({width:o,height:i,numberOfComponents:1,scalarData:l});let f=l[0],v=l[0];for(let g=1;g<l.length;g++){const d=l[g];d<f&&(f=d),d>v&&(v=d)}return{imageId:t,dataType:a.constructor.name,columnPixelSpacing:r.columnPixelSpacing,columns:r.columns,height:r.rows,invert:n.photometricInterpretation==="MONOCHROME1",rowPixelSpacing:r.rowPixelSpacing,rows:r.rows,sizeInBytes:i*o*a.BYTES_PER_ELEMENT,width:r.columns,getPixelData:()=>u.getScalarData(),getCanvas:void 0,numberOfComponents:void 0,voxelManager:u,minPixelValue:f,maxPixelValue:v}}function zPe(t){const e=[t[0][3],t[1][3],t[2][3]],n=[Math.sqrt(t[0][0]**2+t[1][0]**2+t[2][0]**2),Math.sqrt(t[0][1]**2+t[1][1]**2+t[2][1]**2),Math.sqrt(t[0][2]**2+t[1][2]**2+t[2][2]**2)],r=[t[0][0]/n[0],t[0][1]/n[1],t[0][2]/n[2],t[1][0]/n[0],t[1][1]/n[1],t[1][2]/n[2],t[2][0]/n[0],t[2][1]/n[1],t[2][2]/n[2]];return{origin:e,orientation:r,spacing:n}}function qPe(t){const{affine:e}=t,{orientation:n,origin:r,spacing:a}=zPe(e),i=[-r[0],-r[1],r[2]],o=[-n[0],-n[3],n[6],-n[1],-n[4],n[7],-n[2],-n[5],n[8]];return{origin:i,orientation:o,spacing:a}}function jPe(t){switch(t){case Hz:return Uint8Array;case $z:return Int16Array;case zz:return Int32Array;case qz:return Float32Array;case jz:return Int8Array;case Qz:return Uint16Array;case Kz:return Uint32Array;default:throw new Error(`NIFTI datatypeCode ${t} is not yet supported`)}}const H6=new Map,QPe=348,Zz=540,eM=Math.max(QPe,Zz);async function KPe({url:t,onProgress:e,controller:n,onLoad:r,onHeader:a,loadFullVolume:i=!1}){var I;const s=new URL(t).pathname.endsWith(".gz");let c=new Uint8Array(0),l=null;const u=null;let f;const v=0,g=n.signal,d=Xz(),m={},h=(I=d.beforeSend)==null?void 0:I.call(d,null,m,t),C=Object.assign({},m,h);Object.keys(C).forEach(function(D){C[D]===null&&(C[D]=void 0)});try{const D=await fetch(t,{signal:g,headers:C});if(!D.ok)throw new Error(`HTTP error! status: ${D.status}`);f=D.headers.get("Content-Length");const E=D.body.getReader(),T=s?new DecompressionStream("gzip"):null,y=T?T.writable.getWriter():null;if(XPe(E,y,s,v,p,n).catch(console.error),s){const M=T.readable.getReader();for(;;){const{done:_,value:O}=await M.read();if(_)break;if(p(O),l&&!i){n.abort();break}}}return r&&typeof r=="function"&&r(),{data:c,headerInfo:l,sliceInfo:u}}catch(D){throw D.name==="AbortError"?console.log("Fetch aborted"):console.error("Fetch error:",D),D}function p(D){S(D),e&&typeof e=="function"&&e(v,f)}function S(D){const E=new Uint8Array(c.length+D.length);E.set(c),E.set(D,c.length),c=E,!i&&!l&&c.length>=eM&&(l=YPe(c),l&&l.isValid&&n.abort(),a==null||a(l))}}async function XPe(t,e,n,r,a,i){for(;;){const{done:o,value:s}=await t.read();if(o){n&&e.close();break}if(r+=s.length,n?await e.write(s):a(s),i.signal.aborted)break}}function YPe(t){if(t.length<eM)return{isValid:!1,message:"Not enough data to check header"};try{const e=t.slice(0,eM).buffer,n=yf.readHeader(e),r=n.sizeof_hdr===Zz?2:1,{orientation:a,origin:i,spacing:o}=qPe(n),{dimensions:s,direction:c}=FPe(n,a,1),l=jPe(n.datatypeCode);return{dimensions:s,direction:c,isValid:!0,message:`Valid Nifti-${r} header detected`,origin:i,version:r,orientation:a,spacing:o,header:n,arrayConstructor:l}}catch(e){return console.error("Error reading Nifti header:",e),{isValid:!1,message:"Error reading Nifti header"}}}async function ZPe(t){const e=t,n=(C,p)=>{const S={volumeId:t,loaded:C,total:p};Dt(ot,Vm.NIFTI_VOLUME_PROGRESS,{data:S})},r=()=>{const C={volumeId:t};Dt(ot,Vm.NIFTI_VOLUME_LOADED,{data:C})},a=new AbortController;H6.set(e,{controller:a,loading:!0});const i=await new Promise(C=>{KPe({url:e,onProgress:n,controller:a,onLoad:r,onHeader:C})}),{dimensions:o,direction:s,isValid:c,message:l,origin:u,version:f,header:v,spacing:g,arrayConstructor:d}=i,m=o[2];if(!c){console.error(l);return}const h=[];for(let C=0;C<m;C++){const p=`nifti:${e}?frame=${C}`,S=C;h.push(p);const I=[s[0],s[1],s[2],s[3],s[4],s[5]],D=6,E=[parseFloat((u[0]+S*s[6]*g[0]).toFixed(D)),parseFloat((u[1]+S*s[7]*g[1]).toFixed(D)),parseFloat((u[2]+S*s[8]*g[2]).toFixed(D))],T={frameOfReferenceUID:"1.2.840.10008.1.4",rows:o[1],columns:o[0],imageOrientationPatient:I,rowCosines:s.slice(0,3),columnCosines:s.slice(3,6),imagePositionPatient:E,sliceThickness:g[2],sliceLocation:u[2]+C*g[2],pixelSpacing:[g[0],g[1]],rowPixelSpacing:g[1],columnPixelSpacing:g[0]},y={samplesPerPixel:1,photometricInterpretation:"MONOCHROME2",rows:o[1],columns:o[0],bitsAllocated:d.BYTES_PER_ELEMENT*8,bitsStored:d.BYTES_PER_ELEMENT*8,highBit:d.BYTES_PER_ELEMENT*8-1,pixelRepresentation:1,planarConfiguration:0,pixelAspectRatio:"1\\1",redPaletteColorLookupTableDescriptor:[],greenPaletteColorLookupTableDescriptor:[],bluePaletteColorLookupTableDescriptor:[],redPaletteColorLookupTableData:[],greenPaletteColorLookupTableData:[],bluePaletteColorLookupTableData:[],smallestPixelValue:void 0,largestPixelValue:void 0},M={seriesDate:new Date,seriesTime:new Date};rs.add(p,{type:"imagePixelModule",metadata:y}),rs.add(p,{type:"imagePlaneModule",metadata:T}),rs.add(p,{type:"generalSeriesModule",metadata:M}),rs.add(p,{type:"niftiVersion",metadata:{version:f}}),rs.addRaw(p,{type:"niftiHeader",metadata:{header:v}})}return H6.delete(e),h}async function $6({url:t}){return await ZPe(t)}/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const JPe=4,z6=0,q6=1,eAe=2;function ag(t){let e=t.length;for(;--e>=0;)t[e]=0}const tAe=0,Jz=1,nAe=2,rAe=3,aAe=258,aO=29,Kh=256,km=Kh+1+aO,tv=30,iO=19,eq=2*km+1,i1=15,N3=16,iAe=7,oO=256,tq=16,nq=17,rq=18,tM=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),sS=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),oAe=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),aq=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),sAe=512,wc=new Array((km+2)*2);ag(wc);const Nd=new Array(tv*2);ag(Nd);const Gm=new Array(sAe);ag(Gm);const Bm=new Array(aAe-rAe+1);ag(Bm);const sO=new Array(aO);ag(sO);const GC=new Array(tv);ag(GC);function L3(t,e,n,r,a){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=r,this.max_length=a,this.has_stree=t&&t.length}let iq,oq,sq;function U3(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}const cq=t=>t<256?Gm[t]:Gm[256+(t>>>7)],Wm=(t,e)=>{t.pending_buf[t.pending++]=e&255,t.pending_buf[t.pending++]=e>>>8&255},Fo=(t,e,n)=>{t.bi_valid>N3-n?(t.bi_buf|=e<<t.bi_valid&65535,Wm(t,t.bi_buf),t.bi_buf=e>>N3-t.bi_valid,t.bi_valid+=n-N3):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)},R0=(t,e,n)=>{Fo(t,n[e*2],n[e*2+1])},lq=(t,e)=>{let n=0;do n|=t&1,t>>>=1,n<<=1;while(--e>0);return n>>>1},cAe=t=>{t.bi_valid===16?(Wm(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=t.bi_buf&255,t.bi_buf>>=8,t.bi_valid-=8)},lAe=(t,e)=>{const n=e.dyn_tree,r=e.max_code,a=e.stat_desc.static_tree,i=e.stat_desc.has_stree,o=e.stat_desc.extra_bits,s=e.stat_desc.extra_base,c=e.stat_desc.max_length;let l,u,f,v,g,d,m=0;for(v=0;v<=i1;v++)t.bl_count[v]=0;for(n[t.heap[t.heap_max]*2+1]=0,l=t.heap_max+1;l<eq;l++)u=t.heap[l],v=n[n[u*2+1]*2+1]+1,v>c&&(v=c,m++),n[u*2+1]=v,!(u>r)&&(t.bl_count[v]++,g=0,u>=s&&(g=o[u-s]),d=n[u*2],t.opt_len+=d*(v+g),i&&(t.static_len+=d*(a[u*2+1]+g)));if(m!==0){do{for(v=c-1;t.bl_count[v]===0;)v--;t.bl_count[v]--,t.bl_count[v+1]+=2,t.bl_count[c]--,m-=2}while(m>0);for(v=c;v!==0;v--)for(u=t.bl_count[v];u!==0;)f=t.heap[--l],!(f>r)&&(n[f*2+1]!==v&&(t.opt_len+=(v-n[f*2+1])*n[f*2],n[f*2+1]=v),u--)}},uq=(t,e,n)=>{const r=new Array(i1+1);let a=0,i,o;for(i=1;i<=i1;i++)a=a+n[i-1]<<1,r[i]=a;for(o=0;o<=e;o++){let s=t[o*2+1];s!==0&&(t[o*2]=lq(r[s]++,s))}},uAe=()=>{let t,e,n,r,a;const i=new Array(i1+1);for(n=0,r=0;r<aO-1;r++)for(sO[r]=n,t=0;t<1<<tM[r];t++)Bm[n++]=r;for(Bm[n-1]=r,a=0,r=0;r<16;r++)for(GC[r]=a,t=0;t<1<<sS[r];t++)Gm[a++]=r;for(a>>=7;r<tv;r++)for(GC[r]=a<<7,t=0;t<1<<sS[r]-7;t++)Gm[256+a++]=r;for(e=0;e<=i1;e++)i[e]=0;for(t=0;t<=143;)wc[t*2+1]=8,t++,i[8]++;for(;t<=255;)wc[t*2+1]=9,t++,i[9]++;for(;t<=279;)wc[t*2+1]=7,t++,i[7]++;for(;t<=287;)wc[t*2+1]=8,t++,i[8]++;for(uq(wc,km+1,i),t=0;t<tv;t++)Nd[t*2+1]=5,Nd[t*2]=lq(t,5);iq=new L3(wc,tM,Kh+1,km,i1),oq=new L3(Nd,sS,0,tv,i1),sq=new L3(new Array(0),oAe,0,iO,iAe)},fq=t=>{let e;for(e=0;e<km;e++)t.dyn_ltree[e*2]=0;for(e=0;e<tv;e++)t.dyn_dtree[e*2]=0;for(e=0;e<iO;e++)t.bl_tree[e*2]=0;t.dyn_ltree[oO*2]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},vq=t=>{t.bi_valid>8?Wm(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},j6=(t,e,n,r)=>{const a=e*2,i=n*2;return t[a]<t[i]||t[a]===t[i]&&r[e]<=r[n]},F3=(t,e,n)=>{const r=t.heap[n];let a=n<<1;for(;a<=t.heap_len&&(a<t.heap_len&&j6(e,t.heap[a+1],t.heap[a],t.depth)&&a++,!j6(e,r,t.heap[a],t.depth));)t.heap[n]=t.heap[a],n=a,a<<=1;t.heap[n]=r},Q6=(t,e,n)=>{let r,a,i=0,o,s;if(t.sym_next!==0)do r=t.pending_buf[t.sym_buf+i++]&255,r+=(t.pending_buf[t.sym_buf+i++]&255)<<8,a=t.pending_buf[t.sym_buf+i++],r===0?R0(t,a,e):(o=Bm[a],R0(t,o+Kh+1,e),s=tM[o],s!==0&&(a-=sO[o],Fo(t,a,s)),r--,o=cq(r),R0(t,o,n),s=sS[o],s!==0&&(r-=GC[o],Fo(t,r,s)));while(i<t.sym_next);R0(t,oO,e)},nM=(t,e)=>{const n=e.dyn_tree,r=e.stat_desc.static_tree,a=e.stat_desc.has_stree,i=e.stat_desc.elems;let o,s,c=-1,l;for(t.heap_len=0,t.heap_max=eq,o=0;o<i;o++)n[o*2]!==0?(t.heap[++t.heap_len]=c=o,t.depth[o]=0):n[o*2+1]=0;for(;t.heap_len<2;)l=t.heap[++t.heap_len]=c<2?++c:0,n[l*2]=1,t.depth[l]=0,t.opt_len--,a&&(t.static_len-=r[l*2+1]);for(e.max_code=c,o=t.heap_len>>1;o>=1;o--)F3(t,n,o);l=i;do o=t.heap[1],t.heap[1]=t.heap[t.heap_len--],F3(t,n,1),s=t.heap[1],t.heap[--t.heap_max]=o,t.heap[--t.heap_max]=s,n[l*2]=n[o*2]+n[s*2],t.depth[l]=(t.depth[o]>=t.depth[s]?t.depth[o]:t.depth[s])+1,n[o*2+1]=n[s*2+1]=l,t.heap[1]=l++,F3(t,n,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],lAe(t,e),uq(n,c,t.bl_count)},K6=(t,e,n)=>{let r,a=-1,i,o=e[0*2+1],s=0,c=7,l=4;for(o===0&&(c=138,l=3),e[(n+1)*2+1]=65535,r=0;r<=n;r++)i=o,o=e[(r+1)*2+1],!(++s<c&&i===o)&&(s<l?t.bl_tree[i*2]+=s:i!==0?(i!==a&&t.bl_tree[i*2]++,t.bl_tree[tq*2]++):s<=10?t.bl_tree[nq*2]++:t.bl_tree[rq*2]++,s=0,a=i,o===0?(c=138,l=3):i===o?(c=6,l=3):(c=7,l=4))},X6=(t,e,n)=>{let r,a=-1,i,o=e[0*2+1],s=0,c=7,l=4;for(o===0&&(c=138,l=3),r=0;r<=n;r++)if(i=o,o=e[(r+1)*2+1],!(++s<c&&i===o)){if(s<l)do R0(t,i,t.bl_tree);while(--s!==0);else i!==0?(i!==a&&(R0(t,i,t.bl_tree),s--),R0(t,tq,t.bl_tree),Fo(t,s-3,2)):s<=10?(R0(t,nq,t.bl_tree),Fo(t,s-3,3)):(R0(t,rq,t.bl_tree),Fo(t,s-11,7));s=0,a=i,o===0?(c=138,l=3):i===o?(c=6,l=3):(c=7,l=4)}},fAe=t=>{let e;for(K6(t,t.dyn_ltree,t.l_desc.max_code),K6(t,t.dyn_dtree,t.d_desc.max_code),nM(t,t.bl_desc),e=iO-1;e>=3&&t.bl_tree[aq[e]*2+1]===0;e--);return t.opt_len+=3*(e+1)+5+5+4,e},vAe=(t,e,n,r)=>{let a;for(Fo(t,e-257,5),Fo(t,n-1,5),Fo(t,r-4,4),a=0;a<r;a++)Fo(t,t.bl_tree[aq[a]*2+1],3);X6(t,t.dyn_ltree,e-1),X6(t,t.dyn_dtree,n-1)},gAe=t=>{let e=4093624447,n;for(n=0;n<=31;n++,e>>>=1)if(e&1&&t.dyn_ltree[n*2]!==0)return z6;if(t.dyn_ltree[9*2]!==0||t.dyn_ltree[10*2]!==0||t.dyn_ltree[13*2]!==0)return q6;for(n=32;n<Kh;n++)if(t.dyn_ltree[n*2]!==0)return q6;return z6};let Y6=!1;const dAe=t=>{Y6||(uAe(),Y6=!0),t.l_desc=new U3(t.dyn_ltree,iq),t.d_desc=new U3(t.dyn_dtree,oq),t.bl_desc=new U3(t.bl_tree,sq),t.bi_buf=0,t.bi_valid=0,fq(t)},gq=(t,e,n,r)=>{Fo(t,(tAe<<1)+(r?1:0),3),vq(t),Wm(t,n),Wm(t,~n),n&&t.pending_buf.set(t.window.subarray(e,e+n),t.pending),t.pending+=n},mAe=t=>{Fo(t,Jz<<1,3),R0(t,oO,wc),cAe(t)},hAe=(t,e,n,r)=>{let a,i,o=0;t.level>0?(t.strm.data_type===eAe&&(t.strm.data_type=gAe(t)),nM(t,t.l_desc),nM(t,t.d_desc),o=fAe(t),a=t.opt_len+3+7>>>3,i=t.static_len+3+7>>>3,i<=a&&(a=i)):a=i=n+5,n+4<=a&&e!==-1?gq(t,e,n,r):t.strategy===JPe||i===a?(Fo(t,(Jz<<1)+(r?1:0),3),Q6(t,wc,Nd)):(Fo(t,(nAe<<1)+(r?1:0),3),vAe(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),Q6(t,t.dyn_ltree,t.dyn_dtree)),fq(t),r&&vq(t)},pAe=(t,e,n)=>(t.pending_buf[t.sym_buf+t.sym_next++]=e,t.pending_buf[t.sym_buf+t.sym_next++]=e>>8,t.pending_buf[t.sym_buf+t.sym_next++]=n,e===0?t.dyn_ltree[n*2]++:(t.matches++,e--,t.dyn_ltree[(Bm[n]+Kh+1)*2]++,t.dyn_dtree[cq(e)*2]++),t.sym_next===t.sym_end);var SAe=dAe,CAe=gq,IAe=hAe,DAe=pAe,EAe=mAe,TAe={_tr_init:SAe,_tr_stored_block:CAe,_tr_flush_block:IAe,_tr_tally:DAe,_tr_align:EAe};const yAe=(t,e,n,r)=>{let a=t&65535|0,i=t>>>16&65535|0,o=0;for(;n!==0;){o=n>2e3?2e3:n,n-=o;do a=a+e[r++]|0,i=i+a|0;while(--o);a%=65521,i%=65521}return a|i<<16|0};var Hm=yAe;const MAe=()=>{let t,e=[];for(var n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=t&1?3988292384^t>>>1:t>>>1;e[n]=t}return e},_Ae=new Uint32Array(MAe()),OAe=(t,e,n,r)=>{const a=_Ae,i=r+n;t^=-1;for(let o=r;o<i;o++)t=t>>>8^a[(t^e[o])&255];return t^-1};var Mi=OAe,k1={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Y1={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:wAe,_tr_stored_block:rM,_tr_flush_block:PAe,_tr_tally:Yl,_tr_align:AAe}=TAe,{Z_NO_FLUSH:Zl,Z_PARTIAL_FLUSH:xAe,Z_FULL_FLUSH:RAe,Z_FINISH:ws,Z_BLOCK:Z6,Z_OK:Ni,Z_STREAM_END:J6,Z_STREAM_ERROR:$0,Z_DATA_ERROR:bAe,Z_BUF_ERROR:V3,Z_DEFAULT_COMPRESSION:NAe,Z_FILTERED:LAe,Z_HUFFMAN_ONLY:v2,Z_RLE:UAe,Z_FIXED:FAe,Z_DEFAULT_STRATEGY:VAe,Z_UNKNOWN:kAe,Z_DEFLATED:ID}=Y1,GAe=9,BAe=15,WAe=8,HAe=29,$Ae=256,aM=$Ae+1+HAe,zAe=30,qAe=19,jAe=2*aM+1,QAe=15,Sr=3,Gl=258,z0=Gl+Sr+1,KAe=32,Ov=42,cO=57,iM=69,oM=73,sM=91,cM=103,o1=113,td=666,Io=1,ig=2,G1=3,og=4,XAe=3,s1=(t,e)=>(t.msg=k1[e],e),ex=t=>t*2-(t>4?9:0),Al=t=>{let e=t.length;for(;--e>=0;)t[e]=0},YAe=t=>{let e,n,r,a=t.w_size;e=t.hash_size,r=e;do n=t.head[--r],t.head[r]=n>=a?n-a:0;while(--e);e=a,r=e;do n=t.prev[--r],t.prev[r]=n>=a?n-a:0;while(--e)};let ZAe=(t,e,n)=>(e<<t.hash_shift^n)&t.hash_mask,Jl=ZAe;const Yo=t=>{const e=t.state;let n=e.pending;n>t.avail_out&&(n=t.avail_out),n!==0&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+n),t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,e.pending===0&&(e.pending_out=0))},cs=(t,e)=>{PAe(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,Yo(t.strm)},Or=(t,e)=>{t.pending_buf[t.pending++]=e},Lg=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=e&255},lM=(t,e,n,r)=>{let a=t.avail_in;return a>r&&(a=r),a===0?0:(t.avail_in-=a,e.set(t.input.subarray(t.next_in,t.next_in+a),n),t.state.wrap===1?t.adler=Hm(t.adler,e,a,n):t.state.wrap===2&&(t.adler=Mi(t.adler,e,a,n)),t.next_in+=a,t.total_in+=a,a)},dq=(t,e)=>{let n=t.max_chain_length,r=t.strstart,a,i,o=t.prev_length,s=t.nice_match;const c=t.strstart>t.w_size-z0?t.strstart-(t.w_size-z0):0,l=t.window,u=t.w_mask,f=t.prev,v=t.strstart+Gl;let g=l[r+o-1],d=l[r+o];t.prev_length>=t.good_match&&(n>>=2),s>t.lookahead&&(s=t.lookahead);do if(a=e,!(l[a+o]!==d||l[a+o-1]!==g||l[a]!==l[r]||l[++a]!==l[r+1])){r+=2,a++;do;while(l[++r]===l[++a]&&l[++r]===l[++a]&&l[++r]===l[++a]&&l[++r]===l[++a]&&l[++r]===l[++a]&&l[++r]===l[++a]&&l[++r]===l[++a]&&l[++r]===l[++a]&&r<v);if(i=Gl-(v-r),r=v-Gl,i>o){if(t.match_start=e,o=i,i>=s)break;g=l[r+o-1],d=l[r+o]}}while((e=f[e&u])>c&&--n!==0);return o<=t.lookahead?o:t.lookahead},wv=t=>{const e=t.w_size;let n,r,a;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-z0)&&(t.window.set(t.window.subarray(e,e+e-r),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,t.insert>t.strstart&&(t.insert=t.strstart),YAe(t),r+=e),t.strm.avail_in===0)break;if(n=lM(t.strm,t.window,t.strstart+t.lookahead,r),t.lookahead+=n,t.lookahead+t.insert>=Sr)for(a=t.strstart-t.insert,t.ins_h=t.window[a],t.ins_h=Jl(t,t.ins_h,t.window[a+1]);t.insert&&(t.ins_h=Jl(t,t.ins_h,t.window[a+Sr-1]),t.prev[a&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=a,a++,t.insert--,!(t.lookahead+t.insert<Sr)););}while(t.lookahead<z0&&t.strm.avail_in!==0)},mq=(t,e)=>{let n=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,r,a,i,o=0,s=t.strm.avail_in;do{if(r=65535,i=t.bi_valid+42>>3,t.strm.avail_out<i||(i=t.strm.avail_out-i,a=t.strstart-t.block_start,r>a+t.strm.avail_in&&(r=a+t.strm.avail_in),r>i&&(r=i),r<n&&(r===0&&e!==ws||e===Zl||r!==a+t.strm.avail_in)))break;o=e===ws&&r===a+t.strm.avail_in?1:0,rM(t,0,0,o),t.pending_buf[t.pending-4]=r,t.pending_buf[t.pending-3]=r>>8,t.pending_buf[t.pending-2]=~r,t.pending_buf[t.pending-1]=~r>>8,Yo(t.strm),a&&(a>r&&(a=r),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+a),t.strm.next_out),t.strm.next_out+=a,t.strm.avail_out-=a,t.strm.total_out+=a,t.block_start+=a,r-=a),r&&(lM(t.strm,t.strm.output,t.strm.next_out,r),t.strm.next_out+=r,t.strm.avail_out-=r,t.strm.total_out+=r)}while(o===0);return s-=t.strm.avail_in,s&&(s>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=s&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-s,t.strm.next_in),t.strstart),t.strstart+=s,t.insert+=s>t.w_size-t.insert?t.w_size-t.insert:s),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),o?og:e!==Zl&&e!==ws&&t.strm.avail_in===0&&t.strstart===t.block_start?ig:(i=t.window_size-t.strstart,t.strm.avail_in>i&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,i+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),i>t.strm.avail_in&&(i=t.strm.avail_in),i&&(lM(t.strm,t.window,t.strstart,i),t.strstart+=i,t.insert+=i>t.w_size-t.insert?t.w_size-t.insert:i),t.high_water<t.strstart&&(t.high_water=t.strstart),i=t.bi_valid+42>>3,i=t.pending_buf_size-i>65535?65535:t.pending_buf_size-i,n=i>t.w_size?t.w_size:i,a=t.strstart-t.block_start,(a>=n||(a||e===ws)&&e!==Zl&&t.strm.avail_in===0&&a<=i)&&(r=a>i?i:a,o=e===ws&&t.strm.avail_in===0&&r===a?1:0,rM(t,t.block_start,r,o),t.block_start+=r,Yo(t.strm)),o?G1:Io)},k3=(t,e)=>{let n,r;for(;;){if(t.lookahead<z0){if(wv(t),t.lookahead<z0&&e===Zl)return Io;if(t.lookahead===0)break}if(n=0,t.lookahead>=Sr&&(t.ins_h=Jl(t,t.ins_h,t.window[t.strstart+Sr-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),n!==0&&t.strstart-n<=t.w_size-z0&&(t.match_length=dq(t,n)),t.match_length>=Sr)if(r=Yl(t,t.strstart-t.match_start,t.match_length-Sr),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=Sr){t.match_length--;do t.strstart++,t.ins_h=Jl(t,t.ins_h,t.window[t.strstart+Sr-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(--t.match_length!==0);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=Jl(t,t.ins_h,t.window[t.strstart+1]);else r=Yl(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(cs(t,!1),t.strm.avail_out===0))return Io}return t.insert=t.strstart<Sr-1?t.strstart:Sr-1,e===ws?(cs(t,!0),t.strm.avail_out===0?G1:og):t.sym_next&&(cs(t,!1),t.strm.avail_out===0)?Io:ig},Sf=(t,e)=>{let n,r,a;for(;;){if(t.lookahead<z0){if(wv(t),t.lookahead<z0&&e===Zl)return Io;if(t.lookahead===0)break}if(n=0,t.lookahead>=Sr&&(t.ins_h=Jl(t,t.ins_h,t.window[t.strstart+Sr-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=Sr-1,n!==0&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-z0&&(t.match_length=dq(t,n),t.match_length<=5&&(t.strategy===LAe||t.match_length===Sr&&t.strstart-t.match_start>4096)&&(t.match_length=Sr-1)),t.prev_length>=Sr&&t.match_length<=t.prev_length){a=t.strstart+t.lookahead-Sr,r=Yl(t,t.strstart-1-t.prev_match,t.prev_length-Sr),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=a&&(t.ins_h=Jl(t,t.ins_h,t.window[t.strstart+Sr-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(--t.prev_length!==0);if(t.match_available=0,t.match_length=Sr-1,t.strstart++,r&&(cs(t,!1),t.strm.avail_out===0))return Io}else if(t.match_available){if(r=Yl(t,0,t.window[t.strstart-1]),r&&cs(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return Io}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=Yl(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<Sr-1?t.strstart:Sr-1,e===ws?(cs(t,!0),t.strm.avail_out===0?G1:og):t.sym_next&&(cs(t,!1),t.strm.avail_out===0)?Io:ig},JAe=(t,e)=>{let n,r,a,i;const o=t.window;for(;;){if(t.lookahead<=Gl){if(wv(t),t.lookahead<=Gl&&e===Zl)return Io;if(t.lookahead===0)break}if(t.match_length=0,t.lookahead>=Sr&&t.strstart>0&&(a=t.strstart-1,r=o[a],r===o[++a]&&r===o[++a]&&r===o[++a])){i=t.strstart+Gl;do;while(r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&a<i);t.match_length=Gl-(i-a),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=Sr?(n=Yl(t,1,t.match_length-Sr),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=Yl(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(cs(t,!1),t.strm.avail_out===0))return Io}return t.insert=0,e===ws?(cs(t,!0),t.strm.avail_out===0?G1:og):t.sym_next&&(cs(t,!1),t.strm.avail_out===0)?Io:ig},e6e=(t,e)=>{let n;for(;;){if(t.lookahead===0&&(wv(t),t.lookahead===0)){if(e===Zl)return Io;break}if(t.match_length=0,n=Yl(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(cs(t,!1),t.strm.avail_out===0))return Io}return t.insert=0,e===ws?(cs(t,!0),t.strm.avail_out===0?G1:og):t.sym_next&&(cs(t,!1),t.strm.avail_out===0)?Io:ig};function E0(t,e,n,r,a){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=r,this.func=a}const nd=[new E0(0,0,0,0,mq),new E0(4,4,8,4,k3),new E0(4,5,16,8,k3),new E0(4,6,32,32,k3),new E0(4,4,16,16,Sf),new E0(8,16,32,32,Sf),new E0(8,16,128,128,Sf),new E0(8,32,128,256,Sf),new E0(32,128,258,1024,Sf),new E0(32,258,258,4096,Sf)],t6e=t=>{t.window_size=2*t.w_size,Al(t.head),t.max_lazy_match=nd[t.level].max_lazy,t.good_match=nd[t.level].good_length,t.nice_match=nd[t.level].nice_length,t.max_chain_length=nd[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=Sr-1,t.match_available=0,t.ins_h=0};function n6e(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ID,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(jAe*2),this.dyn_dtree=new Uint16Array((2*zAe+1)*2),this.bl_tree=new Uint16Array((2*qAe+1)*2),Al(this.dyn_ltree),Al(this.dyn_dtree),Al(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(QAe+1),this.heap=new Uint16Array(2*aM+1),Al(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*aM+1),Al(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Xh=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.status!==Ov&&e.status!==cO&&e.status!==iM&&e.status!==oM&&e.status!==sM&&e.status!==cM&&e.status!==o1&&e.status!==td?1:0},hq=t=>{if(Xh(t))return s1(t,$0);t.total_in=t.total_out=0,t.data_type=kAe;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap===2?cO:e.wrap?Ov:o1,t.adler=e.wrap===2?0:1,e.last_flush=-2,wAe(e),Ni},pq=t=>{const e=hq(t);return e===Ni&&t6e(t.state),e},r6e=(t,e)=>Xh(t)||t.state.wrap!==2?$0:(t.state.gzhead=e,Ni),Sq=(t,e,n,r,a,i)=>{if(!t)return $0;let o=1;if(e===NAe&&(e=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),a<1||a>GAe||n!==ID||r<8||r>15||e<0||e>9||i<0||i>FAe||r===8&&o!==1)return s1(t,$0);r===8&&(r=9);const s=new n6e;return t.state=s,s.strm=t,s.status=Ov,s.wrap=o,s.gzhead=null,s.w_bits=r,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=a+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+Sr-1)/Sr),s.window=new Uint8Array(s.w_size*2),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<a+6,s.pending_buf_size=s.lit_bufsize*4,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=(s.lit_bufsize-1)*3,s.level=e,s.strategy=i,s.method=n,pq(t)},a6e=(t,e)=>Sq(t,e,ID,BAe,WAe,VAe),i6e=(t,e)=>{if(Xh(t)||e>Z6||e<0)return t?s1(t,$0):$0;const n=t.state;if(!t.output||t.avail_in!==0&&!t.input||n.status===td&&e!==ws)return s1(t,t.avail_out===0?V3:$0);const r=n.last_flush;if(n.last_flush=e,n.pending!==0){if(Yo(t),t.avail_out===0)return n.last_flush=-1,Ni}else if(t.avail_in===0&&ex(e)<=ex(r)&&e!==ws)return s1(t,V3);if(n.status===td&&t.avail_in!==0)return s1(t,V3);if(n.status===Ov&&n.wrap===0&&(n.status=o1),n.status===Ov){let a=ID+(n.w_bits-8<<4)<<8,i=-1;if(n.strategy>=v2||n.level<2?i=0:n.level<6?i=1:n.level===6?i=2:i=3,a|=i<<6,n.strstart!==0&&(a|=KAe),a+=31-a%31,Lg(n,a),n.strstart!==0&&(Lg(n,t.adler>>>16),Lg(n,t.adler&65535)),t.adler=1,n.status=o1,Yo(t),n.pending!==0)return n.last_flush=-1,Ni}if(n.status===cO){if(t.adler=0,Or(n,31),Or(n,139),Or(n,8),n.gzhead)Or(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),Or(n,n.gzhead.time&255),Or(n,n.gzhead.time>>8&255),Or(n,n.gzhead.time>>16&255),Or(n,n.gzhead.time>>24&255),Or(n,n.level===9?2:n.strategy>=v2||n.level<2?4:0),Or(n,n.gzhead.os&255),n.gzhead.extra&&n.gzhead.extra.length&&(Or(n,n.gzhead.extra.length&255),Or(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(t.adler=Mi(t.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=iM;else if(Or(n,0),Or(n,0),Or(n,0),Or(n,0),Or(n,0),Or(n,n.level===9?2:n.strategy>=v2||n.level<2?4:0),Or(n,XAe),n.status=o1,Yo(t),n.pending!==0)return n.last_flush=-1,Ni}if(n.status===iM){if(n.gzhead.extra){let a=n.pending,i=(n.gzhead.extra.length&65535)-n.gzindex;for(;n.pending+i>n.pending_buf_size;){let s=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+s),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>a&&(t.adler=Mi(t.adler,n.pending_buf,n.pending-a,a)),n.gzindex+=s,Yo(t),n.pending!==0)return n.last_flush=-1,Ni;a=0,i-=s}let o=new Uint8Array(n.gzhead.extra);n.pending_buf.set(o.subarray(n.gzindex,n.gzindex+i),n.pending),n.pending+=i,n.gzhead.hcrc&&n.pending>a&&(t.adler=Mi(t.adler,n.pending_buf,n.pending-a,a)),n.gzindex=0}n.status=oM}if(n.status===oM){if(n.gzhead.name){let a=n.pending,i;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>a&&(t.adler=Mi(t.adler,n.pending_buf,n.pending-a,a)),Yo(t),n.pending!==0)return n.last_flush=-1,Ni;a=0}n.gzindex<n.gzhead.name.length?i=n.gzhead.name.charCodeAt(n.gzindex++)&255:i=0,Or(n,i)}while(i!==0);n.gzhead.hcrc&&n.pending>a&&(t.adler=Mi(t.adler,n.pending_buf,n.pending-a,a)),n.gzindex=0}n.status=sM}if(n.status===sM){if(n.gzhead.comment){let a=n.pending,i;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>a&&(t.adler=Mi(t.adler,n.pending_buf,n.pending-a,a)),Yo(t),n.pending!==0)return n.last_flush=-1,Ni;a=0}n.gzindex<n.gzhead.comment.length?i=n.gzhead.comment.charCodeAt(n.gzindex++)&255:i=0,Or(n,i)}while(i!==0);n.gzhead.hcrc&&n.pending>a&&(t.adler=Mi(t.adler,n.pending_buf,n.pending-a,a))}n.status=cM}if(n.status===cM){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(Yo(t),n.pending!==0))return n.last_flush=-1,Ni;Or(n,t.adler&255),Or(n,t.adler>>8&255),t.adler=0}if(n.status=o1,Yo(t),n.pending!==0)return n.last_flush=-1,Ni}if(t.avail_in!==0||n.lookahead!==0||e!==Zl&&n.status!==td){let a=n.level===0?mq(n,e):n.strategy===v2?e6e(n,e):n.strategy===UAe?JAe(n,e):nd[n.level].func(n,e);if((a===G1||a===og)&&(n.status=td),a===Io||a===G1)return t.avail_out===0&&(n.last_flush=-1),Ni;if(a===ig&&(e===xAe?AAe(n):e!==Z6&&(rM(n,0,0,!1),e===RAe&&(Al(n.head),n.lookahead===0&&(n.strstart=0,n.block_start=0,n.insert=0))),Yo(t),t.avail_out===0))return n.last_flush=-1,Ni}return e!==ws?Ni:n.wrap<=0?J6:(n.wrap===2?(Or(n,t.adler&255),Or(n,t.adler>>8&255),Or(n,t.adler>>16&255),Or(n,t.adler>>24&255),Or(n,t.total_in&255),Or(n,t.total_in>>8&255),Or(n,t.total_in>>16&255),Or(n,t.total_in>>24&255)):(Lg(n,t.adler>>>16),Lg(n,t.adler&65535)),Yo(t),n.wrap>0&&(n.wrap=-n.wrap),n.pending!==0?Ni:J6)},o6e=t=>{if(Xh(t))return $0;const e=t.state.status;return t.state=null,e===o1?s1(t,bAe):Ni},s6e=(t,e)=>{let n=e.length;if(Xh(t))return $0;const r=t.state,a=r.wrap;if(a===2||a===1&&r.status!==Ov||r.lookahead)return $0;if(a===1&&(t.adler=Hm(t.adler,e,n,0)),r.wrap=0,n>=r.w_size){a===0&&(Al(r.head),r.strstart=0,r.block_start=0,r.insert=0);let c=new Uint8Array(r.w_size);c.set(e.subarray(n-r.w_size,n),0),e=c,n=r.w_size}const i=t.avail_in,o=t.next_in,s=t.input;for(t.avail_in=n,t.next_in=0,t.input=e,wv(r);r.lookahead>=Sr;){let c=r.strstart,l=r.lookahead-(Sr-1);do r.ins_h=Jl(r,r.ins_h,r.window[c+Sr-1]),r.prev[c&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=c,c++;while(--l);r.strstart=c,r.lookahead=Sr-1,wv(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=Sr-1,r.match_available=0,t.next_in=o,t.input=s,t.avail_in=i,r.wrap=a,Ni};var c6e=a6e,l6e=Sq,u6e=pq,f6e=hq,v6e=r6e,g6e=i6e,d6e=o6e,m6e=s6e,h6e="pako deflate (from Nodeca project)",Ld={deflateInit:c6e,deflateInit2:l6e,deflateReset:u6e,deflateResetKeep:f6e,deflateSetHeader:v6e,deflate:g6e,deflateEnd:d6e,deflateSetDictionary:m6e,deflateInfo:h6e};const p6e=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var S6e=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const n=e.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const r in n)p6e(n,r)&&(t[r]=n[r])}}return t},C6e=t=>{let e=0;for(let r=0,a=t.length;r<a;r++)e+=t[r].length;const n=new Uint8Array(e);for(let r=0,a=0,i=t.length;r<i;r++){let o=t[r];n.set(o,a),a+=o.length}return n},DD={assign:S6e,flattenChunks:C6e};let Cq=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Cq=!1}const $m=new Uint8Array(256);for(let t=0;t<256;t++)$m[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;$m[254]=$m[254]=1;var I6e=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,n,r,a,i,o=t.length,s=0;for(a=0;a<o;a++)n=t.charCodeAt(a),(n&64512)===55296&&a+1<o&&(r=t.charCodeAt(a+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),a++)),s+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Uint8Array(s),i=0,a=0;i<s;a++)n=t.charCodeAt(a),(n&64512)===55296&&a+1<o&&(r=t.charCodeAt(a+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),a++)),n<128?e[i++]=n:n<2048?(e[i++]=192|n>>>6,e[i++]=128|n&63):n<65536?(e[i++]=224|n>>>12,e[i++]=128|n>>>6&63,e[i++]=128|n&63):(e[i++]=240|n>>>18,e[i++]=128|n>>>12&63,e[i++]=128|n>>>6&63,e[i++]=128|n&63);return e};const D6e=(t,e)=>{if(e<65534&&t.subarray&&Cq)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let n="";for(let r=0;r<e;r++)n+=String.fromCharCode(t[r]);return n};var E6e=(t,e)=>{const n=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let r,a;const i=new Array(n*2);for(a=0,r=0;r<n;){let o=t[r++];if(o<128){i[a++]=o;continue}let s=$m[o];if(s>4){i[a++]=65533,r+=s-1;continue}for(o&=s===2?31:s===3?15:7;s>1&&r<n;)o=o<<6|t[r++]&63,s--;if(s>1){i[a++]=65533;continue}o<65536?i[a++]=o:(o-=65536,i[a++]=55296|o>>10&1023,i[a++]=56320|o&1023)}return D6e(i,a)},T6e=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let n=e-1;for(;n>=0&&(t[n]&192)===128;)n--;return n<0||n===0?e:n+$m[t[n]]>e?n:e},zm={string2buf:I6e,buf2string:E6e,utf8border:T6e};function y6e(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Iq=y6e;const Dq=Object.prototype.toString,{Z_NO_FLUSH:M6e,Z_SYNC_FLUSH:_6e,Z_FULL_FLUSH:O6e,Z_FINISH:w6e,Z_OK:BC,Z_STREAM_END:P6e,Z_DEFAULT_COMPRESSION:A6e,Z_DEFAULT_STRATEGY:x6e,Z_DEFLATED:R6e}=Y1;function Yh(t){this.options=DD.assign({level:A6e,method:R6e,chunkSize:16384,windowBits:15,memLevel:8,strategy:x6e},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Iq,this.strm.avail_out=0;let n=Ld.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==BC)throw new Error(k1[n]);if(e.header&&Ld.deflateSetHeader(this.strm,e.header),e.dictionary){let r;if(typeof e.dictionary=="string"?r=zm.string2buf(e.dictionary):Dq.call(e.dictionary)==="[object ArrayBuffer]"?r=new Uint8Array(e.dictionary):r=e.dictionary,n=Ld.deflateSetDictionary(this.strm,r),n!==BC)throw new Error(k1[n]);this._dict_set=!0}}Yh.prototype.push=function(t,e){const n=this.strm,r=this.options.chunkSize;let a,i;if(this.ended)return!1;for(e===~~e?i=e:i=e===!0?w6e:M6e,typeof t=="string"?n.input=zm.string2buf(t):Dq.call(t)==="[object ArrayBuffer]"?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;){if(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(i===_6e||i===O6e)&&n.avail_out<=6){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(a=Ld.deflate(n,i),a===P6e)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),a=Ld.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===BC;if(n.avail_out===0){this.onData(n.output);continue}if(i>0&&n.next_out>0){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(n.avail_in===0)break}return!0};Yh.prototype.onData=function(t){this.chunks.push(t)};Yh.prototype.onEnd=function(t){t===BC&&(this.result=DD.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function lO(t,e){const n=new Yh(e);if(n.push(t,!0),n.err)throw n.msg||k1[n.err];return n.result}function b6e(t,e){return e=e||{},e.raw=!0,lO(t,e)}function N6e(t,e){return e=e||{},e.gzip=!0,lO(t,e)}var L6e=Yh,U6e=lO,F6e=b6e,V6e=N6e,k6e=Y1,G6e={Deflate:L6e,deflate:U6e,deflateRaw:F6e,gzip:V6e,constants:k6e};const g2=16209,B6e=16191;var W6e=function(e,n){let r,a,i,o,s,c,l,u,f,v,g,d,m,h,C,p,S,I,D,E,T,y,M,_;const O=e.state;r=e.next_in,M=e.input,a=r+(e.avail_in-5),i=e.next_out,_=e.output,o=i-(n-e.avail_out),s=i+(e.avail_out-257),c=O.dmax,l=O.wsize,u=O.whave,f=O.wnext,v=O.window,g=O.hold,d=O.bits,m=O.lencode,h=O.distcode,C=(1<<O.lenbits)-1,p=(1<<O.distbits)-1;e:do{d<15&&(g+=M[r++]<<d,d+=8,g+=M[r++]<<d,d+=8),S=m[g&C];t:for(;;){if(I=S>>>24,g>>>=I,d-=I,I=S>>>16&255,I===0)_[i++]=S&65535;else if(I&16){D=S&65535,I&=15,I&&(d<I&&(g+=M[r++]<<d,d+=8),D+=g&(1<<I)-1,g>>>=I,d-=I),d<15&&(g+=M[r++]<<d,d+=8,g+=M[r++]<<d,d+=8),S=h[g&p];n:for(;;){if(I=S>>>24,g>>>=I,d-=I,I=S>>>16&255,I&16){if(E=S&65535,I&=15,d<I&&(g+=M[r++]<<d,d+=8,d<I&&(g+=M[r++]<<d,d+=8)),E+=g&(1<<I)-1,E>c){e.msg="invalid distance too far back",O.mode=g2;break e}if(g>>>=I,d-=I,I=i-o,E>I){if(I=E-I,I>u&&O.sane){e.msg="invalid distance too far back",O.mode=g2;break e}if(T=0,y=v,f===0){if(T+=l-I,I<D){D-=I;do _[i++]=v[T++];while(--I);T=i-E,y=_}}else if(f<I){if(T+=l+f-I,I-=f,I<D){D-=I;do _[i++]=v[T++];while(--I);if(T=0,f<D){I=f,D-=I;do _[i++]=v[T++];while(--I);T=i-E,y=_}}}else if(T+=f-I,I<D){D-=I;do _[i++]=v[T++];while(--I);T=i-E,y=_}for(;D>2;)_[i++]=y[T++],_[i++]=y[T++],_[i++]=y[T++],D-=3;D&&(_[i++]=y[T++],D>1&&(_[i++]=y[T++]))}else{T=i-E;do _[i++]=_[T++],_[i++]=_[T++],_[i++]=_[T++],D-=3;while(D>2);D&&(_[i++]=_[T++],D>1&&(_[i++]=_[T++]))}}else if(I&64){e.msg="invalid distance code",O.mode=g2;break e}else{S=h[(S&65535)+(g&(1<<I)-1)];continue n}break}}else if(I&64)if(I&32){O.mode=B6e;break e}else{e.msg="invalid literal/length code",O.mode=g2;break e}else{S=m[(S&65535)+(g&(1<<I)-1)];continue t}break}}while(r<a&&i<s);D=d>>3,r-=D,d-=D<<3,g&=(1<<d)-1,e.next_in=r,e.next_out=i,e.avail_in=r<a?5+(a-r):5-(r-a),e.avail_out=i<s?257+(s-i):257-(i-s),O.hold=g,O.bits=d};const Cf=15,tx=852,nx=592,rx=0,G3=1,ax=2,H6e=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),$6e=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),z6e=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),q6e=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),j6e=(t,e,n,r,a,i,o,s)=>{const c=s.bits;let l=0,u=0,f=0,v=0,g=0,d=0,m=0,h=0,C=0,p=0,S,I,D,E,T,y=null,M;const _=new Uint16Array(Cf+1),O=new Uint16Array(Cf+1);let w=null,x,P,R;for(l=0;l<=Cf;l++)_[l]=0;for(u=0;u<r;u++)_[e[n+u]]++;for(g=c,v=Cf;v>=1&&_[v]===0;v--);if(g>v&&(g=v),v===0)return a[i++]=1<<24|64<<16|0,a[i++]=1<<24|64<<16|0,s.bits=1,0;for(f=1;f<v&&_[f]===0;f++);for(g<f&&(g=f),h=1,l=1;l<=Cf;l++)if(h<<=1,h-=_[l],h<0)return-1;if(h>0&&(t===rx||v!==1))return-1;for(O[1]=0,l=1;l<Cf;l++)O[l+1]=O[l]+_[l];for(u=0;u<r;u++)e[n+u]!==0&&(o[O[e[n+u]]++]=u);if(t===rx?(y=w=o,M=20):t===G3?(y=H6e,w=$6e,M=257):(y=z6e,w=q6e,M=0),p=0,u=0,l=f,T=i,d=g,m=0,D=-1,C=1<<g,E=C-1,t===G3&&C>tx||t===ax&&C>nx)return 1;for(;;){x=l-m,o[u]+1<M?(P=0,R=o[u]):o[u]>=M?(P=w[o[u]-M],R=y[o[u]-M]):(P=96,R=0),S=1<<l-m,I=1<<d,f=I;do I-=S,a[T+(p>>m)+I]=x<<24|P<<16|R|0;while(I!==0);for(S=1<<l-1;p&S;)S>>=1;if(S!==0?(p&=S-1,p+=S):p=0,u++,--_[l]===0){if(l===v)break;l=e[n+o[u]]}if(l>g&&(p&E)!==D){for(m===0&&(m=g),T+=f,d=l-m,h=1<<d;d+m<v&&(h-=_[d+m],!(h<=0));)d++,h<<=1;if(C+=1<<d,t===G3&&C>tx||t===ax&&C>nx)return 1;D=p&E,a[D]=g<<24|d<<16|T-i|0}}return p!==0&&(a[T+p]=l-m<<24|64<<16|0),s.bits=g,0};var Ud=j6e;const Q6e=0,Eq=1,Tq=2,{Z_FINISH:ix,Z_BLOCK:K6e,Z_TREES:d2,Z_OK:B1,Z_STREAM_END:X6e,Z_NEED_DICT:Y6e,Z_STREAM_ERROR:Us,Z_DATA_ERROR:yq,Z_MEM_ERROR:Mq,Z_BUF_ERROR:Z6e,Z_DEFLATED:ox}=Y1,ED=16180,sx=16181,cx=16182,lx=16183,ux=16184,fx=16185,vx=16186,gx=16187,dx=16188,mx=16189,WC=16190,Sc=16191,B3=16192,hx=16193,W3=16194,px=16195,Sx=16196,Cx=16197,Ix=16198,m2=16199,h2=16200,Dx=16201,Ex=16202,Tx=16203,yx=16204,Mx=16205,H3=16206,_x=16207,Ox=16208,Ca=16209,_q=16210,Oq=16211,J6e=852,exe=592,txe=15,nxe=txe,wx=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function rxe(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Z1=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<ED||e.mode>Oq?1:0},wq=t=>{if(Z1(t))return Us;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=ED,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(J6e),e.distcode=e.distdyn=new Int32Array(exe),e.sane=1,e.back=-1,B1},Pq=t=>{if(Z1(t))return Us;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,wq(t)},Aq=(t,e)=>{let n;if(Z1(t))return Us;const r=t.state;return e<0?(n=0,e=-e):(n=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Us:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,Pq(t))},xq=(t,e)=>{if(!t)return Us;const n=new rxe;t.state=n,n.strm=t,n.window=null,n.mode=ED;const r=Aq(t,e);return r!==B1&&(t.state=null),r},axe=t=>xq(t,nxe);let Px=!0,$3,z3;const ixe=t=>{if(Px){$3=new Int32Array(512),z3=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(Ud(Eq,t.lens,0,288,$3,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;Ud(Tq,t.lens,0,32,z3,0,t.work,{bits:5}),Px=!1}t.lencode=$3,t.lenbits=9,t.distcode=z3,t.distbits=5},Rq=(t,e,n,r)=>{let a;const i=t.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),r>=i.wsize?(i.window.set(e.subarray(n-i.wsize,n),0),i.wnext=0,i.whave=i.wsize):(a=i.wsize-i.wnext,a>r&&(a=r),i.window.set(e.subarray(n-r,n-r+a),i.wnext),r-=a,r?(i.window.set(e.subarray(n-r,n),0),i.wnext=r,i.whave=i.wsize):(i.wnext+=a,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=a))),0},oxe=(t,e)=>{let n,r,a,i,o,s,c,l,u,f,v,g,d,m,h=0,C,p,S,I,D,E,T,y;const M=new Uint8Array(4);let _,O;const w=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Z1(t)||!t.output||!t.input&&t.avail_in!==0)return Us;n=t.state,n.mode===Sc&&(n.mode=B3),o=t.next_out,a=t.output,c=t.avail_out,i=t.next_in,r=t.input,s=t.avail_in,l=n.hold,u=n.bits,f=s,v=c,y=B1;e:for(;;)switch(n.mode){case ED:if(n.wrap===0){n.mode=B3;break}for(;u<16;){if(s===0)break e;s--,l+=r[i++]<<u,u+=8}if(n.wrap&2&&l===35615){n.wbits===0&&(n.wbits=15),n.check=0,M[0]=l&255,M[1]=l>>>8&255,n.check=Mi(n.check,M,2,0),l=0,u=0,n.mode=sx;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((l&255)<<8)+(l>>8))%31){t.msg="incorrect header check",n.mode=Ca;break}if((l&15)!==ox){t.msg="unknown compression method",n.mode=Ca;break}if(l>>>=4,u-=4,T=(l&15)+8,n.wbits===0&&(n.wbits=T),T>15||T>n.wbits){t.msg="invalid window size",n.mode=Ca;break}n.dmax=1<<n.wbits,n.flags=0,t.adler=n.check=1,n.mode=l&512?mx:Sc,l=0,u=0;break;case sx:for(;u<16;){if(s===0)break e;s--,l+=r[i++]<<u,u+=8}if(n.flags=l,(n.flags&255)!==ox){t.msg="unknown compression method",n.mode=Ca;break}if(n.flags&57344){t.msg="unknown header flags set",n.mode=Ca;break}n.head&&(n.head.text=l>>8&1),n.flags&512&&n.wrap&4&&(M[0]=l&255,M[1]=l>>>8&255,n.check=Mi(n.check,M,2,0)),l=0,u=0,n.mode=cx;case cx:for(;u<32;){if(s===0)break e;s--,l+=r[i++]<<u,u+=8}n.head&&(n.head.time=l),n.flags&512&&n.wrap&4&&(M[0]=l&255,M[1]=l>>>8&255,M[2]=l>>>16&255,M[3]=l>>>24&255,n.check=Mi(n.check,M,4,0)),l=0,u=0,n.mode=lx;case lx:for(;u<16;){if(s===0)break e;s--,l+=r[i++]<<u,u+=8}n.head&&(n.head.xflags=l&255,n.head.os=l>>8),n.flags&512&&n.wrap&4&&(M[0]=l&255,M[1]=l>>>8&255,n.check=Mi(n.check,M,2,0)),l=0,u=0,n.mode=ux;case ux:if(n.flags&1024){for(;u<16;){if(s===0)break e;s--,l+=r[i++]<<u,u+=8}n.length=l,n.head&&(n.head.extra_len=l),n.flags&512&&n.wrap&4&&(M[0]=l&255,M[1]=l>>>8&255,n.check=Mi(n.check,M,2,0)),l=0,u=0}else n.head&&(n.head.extra=null);n.mode=fx;case fx:if(n.flags&1024&&(g=n.length,g>s&&(g=s),g&&(n.head&&(T=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(i,i+g),T)),n.flags&512&&n.wrap&4&&(n.check=Mi(n.check,r,g,i)),s-=g,i+=g,n.length-=g),n.length))break e;n.length=0,n.mode=vx;case vx:if(n.flags&2048){if(s===0)break e;g=0;do T=r[i+g++],n.head&&T&&n.length<65536&&(n.head.name+=String.fromCharCode(T));while(T&&g<s);if(n.flags&512&&n.wrap&4&&(n.check=Mi(n.check,r,g,i)),s-=g,i+=g,T)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=gx;case gx:if(n.flags&4096){if(s===0)break e;g=0;do T=r[i+g++],n.head&&T&&n.length<65536&&(n.head.comment+=String.fromCharCode(T));while(T&&g<s);if(n.flags&512&&n.wrap&4&&(n.check=Mi(n.check,r,g,i)),s-=g,i+=g,T)break e}else n.head&&(n.head.comment=null);n.mode=dx;case dx:if(n.flags&512){for(;u<16;){if(s===0)break e;s--,l+=r[i++]<<u,u+=8}if(n.wrap&4&&l!==(n.check&65535)){t.msg="header crc mismatch",n.mode=Ca;break}l=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=Sc;break;case mx:for(;u<32;){if(s===0)break e;s--,l+=r[i++]<<u,u+=8}t.adler=n.check=wx(l),l=0,u=0,n.mode=WC;case WC:if(n.havedict===0)return t.next_out=o,t.avail_out=c,t.next_in=i,t.avail_in=s,n.hold=l,n.bits=u,Y6e;t.adler=n.check=1,n.mode=Sc;case Sc:if(e===K6e||e===d2)break e;case B3:if(n.last){l>>>=u&7,u-=u&7,n.mode=H3;break}for(;u<3;){if(s===0)break e;s--,l+=r[i++]<<u,u+=8}switch(n.last=l&1,l>>>=1,u-=1,l&3){case 0:n.mode=hx;break;case 1:if(ixe(n),n.mode=m2,e===d2){l>>>=2,u-=2;break e}break;case 2:n.mode=Sx;break;case 3:t.msg="invalid block type",n.mode=Ca}l>>>=2,u-=2;break;case hx:for(l>>>=u&7,u-=u&7;u<32;){if(s===0)break e;s--,l+=r[i++]<<u,u+=8}if((l&65535)!==(l>>>16^65535)){t.msg="invalid stored block lengths",n.mode=Ca;break}if(n.length=l&65535,l=0,u=0,n.mode=W3,e===d2)break e;case W3:n.mode=px;case px:if(g=n.length,g){if(g>s&&(g=s),g>c&&(g=c),g===0)break e;a.set(r.subarray(i,i+g),o),s-=g,i+=g,c-=g,o+=g,n.length-=g;break}n.mode=Sc;break;case Sx:for(;u<14;){if(s===0)break e;s--,l+=r[i++]<<u,u+=8}if(n.nlen=(l&31)+257,l>>>=5,u-=5,n.ndist=(l&31)+1,l>>>=5,u-=5,n.ncode=(l&15)+4,l>>>=4,u-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=Ca;break}n.have=0,n.mode=Cx;case Cx:for(;n.have<n.ncode;){for(;u<3;){if(s===0)break e;s--,l+=r[i++]<<u,u+=8}n.lens[w[n.have++]]=l&7,l>>>=3,u-=3}for(;n.have<19;)n.lens[w[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,_={bits:n.lenbits},y=Ud(Q6e,n.lens,0,19,n.lencode,0,n.work,_),n.lenbits=_.bits,y){t.msg="invalid code lengths set",n.mode=Ca;break}n.have=0,n.mode=Ix;case Ix:for(;n.have<n.nlen+n.ndist;){for(;h=n.lencode[l&(1<<n.lenbits)-1],C=h>>>24,p=h>>>16&255,S=h&65535,!(C<=u);){if(s===0)break e;s--,l+=r[i++]<<u,u+=8}if(S<16)l>>>=C,u-=C,n.lens[n.have++]=S;else{if(S===16){for(O=C+2;u<O;){if(s===0)break e;s--,l+=r[i++]<<u,u+=8}if(l>>>=C,u-=C,n.have===0){t.msg="invalid bit length repeat",n.mode=Ca;break}T=n.lens[n.have-1],g=3+(l&3),l>>>=2,u-=2}else if(S===17){for(O=C+3;u<O;){if(s===0)break e;s--,l+=r[i++]<<u,u+=8}l>>>=C,u-=C,T=0,g=3+(l&7),l>>>=3,u-=3}else{for(O=C+7;u<O;){if(s===0)break e;s--,l+=r[i++]<<u,u+=8}l>>>=C,u-=C,T=0,g=11+(l&127),l>>>=7,u-=7}if(n.have+g>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=Ca;break}for(;g--;)n.lens[n.have++]=T}}if(n.mode===Ca)break;if(n.lens[256]===0){t.msg="invalid code -- missing end-of-block",n.mode=Ca;break}if(n.lenbits=9,_={bits:n.lenbits},y=Ud(Eq,n.lens,0,n.nlen,n.lencode,0,n.work,_),n.lenbits=_.bits,y){t.msg="invalid literal/lengths set",n.mode=Ca;break}if(n.distbits=6,n.distcode=n.distdyn,_={bits:n.distbits},y=Ud(Tq,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,_),n.distbits=_.bits,y){t.msg="invalid distances set",n.mode=Ca;break}if(n.mode=m2,e===d2)break e;case m2:n.mode=h2;case h2:if(s>=6&&c>=258){t.next_out=o,t.avail_out=c,t.next_in=i,t.avail_in=s,n.hold=l,n.bits=u,W6e(t,v),o=t.next_out,a=t.output,c=t.avail_out,i=t.next_in,r=t.input,s=t.avail_in,l=n.hold,u=n.bits,n.mode===Sc&&(n.back=-1);break}for(n.back=0;h=n.lencode[l&(1<<n.lenbits)-1],C=h>>>24,p=h>>>16&255,S=h&65535,!(C<=u);){if(s===0)break e;s--,l+=r[i++]<<u,u+=8}if(p&&!(p&240)){for(I=C,D=p,E=S;h=n.lencode[E+((l&(1<<I+D)-1)>>I)],C=h>>>24,p=h>>>16&255,S=h&65535,!(I+C<=u);){if(s===0)break e;s--,l+=r[i++]<<u,u+=8}l>>>=I,u-=I,n.back+=I}if(l>>>=C,u-=C,n.back+=C,n.length=S,p===0){n.mode=Mx;break}if(p&32){n.back=-1,n.mode=Sc;break}if(p&64){t.msg="invalid literal/length code",n.mode=Ca;break}n.extra=p&15,n.mode=Dx;case Dx:if(n.extra){for(O=n.extra;u<O;){if(s===0)break e;s--,l+=r[i++]<<u,u+=8}n.length+=l&(1<<n.extra)-1,l>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=Ex;case Ex:for(;h=n.distcode[l&(1<<n.distbits)-1],C=h>>>24,p=h>>>16&255,S=h&65535,!(C<=u);){if(s===0)break e;s--,l+=r[i++]<<u,u+=8}if(!(p&240)){for(I=C,D=p,E=S;h=n.distcode[E+((l&(1<<I+D)-1)>>I)],C=h>>>24,p=h>>>16&255,S=h&65535,!(I+C<=u);){if(s===0)break e;s--,l+=r[i++]<<u,u+=8}l>>>=I,u-=I,n.back+=I}if(l>>>=C,u-=C,n.back+=C,p&64){t.msg="invalid distance code",n.mode=Ca;break}n.offset=S,n.extra=p&15,n.mode=Tx;case Tx:if(n.extra){for(O=n.extra;u<O;){if(s===0)break e;s--,l+=r[i++]<<u,u+=8}n.offset+=l&(1<<n.extra)-1,l>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=Ca;break}n.mode=yx;case yx:if(c===0)break e;if(g=v-c,n.offset>g){if(g=n.offset-g,g>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=Ca;break}g>n.wnext?(g-=n.wnext,d=n.wsize-g):d=n.wnext-g,g>n.length&&(g=n.length),m=n.window}else m=a,d=o-n.offset,g=n.length;g>c&&(g=c),c-=g,n.length-=g;do a[o++]=m[d++];while(--g);n.length===0&&(n.mode=h2);break;case Mx:if(c===0)break e;a[o++]=n.length,c--,n.mode=h2;break;case H3:if(n.wrap){for(;u<32;){if(s===0)break e;s--,l|=r[i++]<<u,u+=8}if(v-=c,t.total_out+=v,n.total+=v,n.wrap&4&&v&&(t.adler=n.check=n.flags?Mi(n.check,a,v,o-v):Hm(n.check,a,v,o-v)),v=c,n.wrap&4&&(n.flags?l:wx(l))!==n.check){t.msg="incorrect data check",n.mode=Ca;break}l=0,u=0}n.mode=_x;case _x:if(n.wrap&&n.flags){for(;u<32;){if(s===0)break e;s--,l+=r[i++]<<u,u+=8}if(n.wrap&4&&l!==(n.total&4294967295)){t.msg="incorrect length check",n.mode=Ca;break}l=0,u=0}n.mode=Ox;case Ox:y=X6e;break e;case Ca:y=yq;break e;case _q:return Mq;case Oq:default:return Us}return t.next_out=o,t.avail_out=c,t.next_in=i,t.avail_in=s,n.hold=l,n.bits=u,(n.wsize||v!==t.avail_out&&n.mode<Ca&&(n.mode<H3||e!==ix))&&Rq(t,t.output,t.next_out,v-t.avail_out),f-=t.avail_in,v-=t.avail_out,t.total_in+=f,t.total_out+=v,n.total+=v,n.wrap&4&&v&&(t.adler=n.check=n.flags?Mi(n.check,a,v,t.next_out-v):Hm(n.check,a,v,t.next_out-v)),t.data_type=n.bits+(n.last?64:0)+(n.mode===Sc?128:0)+(n.mode===m2||n.mode===W3?256:0),(f===0&&v===0||e===ix)&&y===B1&&(y=Z6e),y},sxe=t=>{if(Z1(t))return Us;let e=t.state;return e.window&&(e.window=null),t.state=null,B1},cxe=(t,e)=>{if(Z1(t))return Us;const n=t.state;return n.wrap&2?(n.head=e,e.done=!1,B1):Us},lxe=(t,e)=>{const n=e.length;let r,a,i;return Z1(t)||(r=t.state,r.wrap!==0&&r.mode!==WC)?Us:r.mode===WC&&(a=1,a=Hm(a,e,n,0),a!==r.check)?yq:(i=Rq(t,e,n,n),i?(r.mode=_q,Mq):(r.havedict=1,B1))};var uxe=Pq,fxe=Aq,vxe=wq,gxe=axe,dxe=xq,mxe=oxe,hxe=sxe,pxe=cxe,Sxe=lxe,Cxe="pako inflate (from Nodeca project)",Pc={inflateReset:uxe,inflateReset2:fxe,inflateResetKeep:vxe,inflateInit:gxe,inflateInit2:dxe,inflate:mxe,inflateEnd:hxe,inflateGetHeader:pxe,inflateSetDictionary:Sxe,inflateInfo:Cxe};function Ixe(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Dxe=Ixe;const bq=Object.prototype.toString,{Z_NO_FLUSH:Exe,Z_FINISH:Txe,Z_OK:qm,Z_STREAM_END:q3,Z_NEED_DICT:j3,Z_STREAM_ERROR:yxe,Z_DATA_ERROR:Ax,Z_MEM_ERROR:Mxe}=Y1;function Zh(t){this.options=DD.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Iq,this.strm.avail_out=0;let n=Pc.inflateInit2(this.strm,e.windowBits);if(n!==qm)throw new Error(k1[n]);if(this.header=new Dxe,Pc.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=zm.string2buf(e.dictionary):bq.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=Pc.inflateSetDictionary(this.strm,e.dictionary),n!==qm)))throw new Error(k1[n])}Zh.prototype.push=function(t,e){const n=this.strm,r=this.options.chunkSize,a=this.options.dictionary;let i,o,s;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?Txe:Exe,bq.call(t)==="[object ArrayBuffer]"?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),i=Pc.inflate(n,o),i===j3&&a&&(i=Pc.inflateSetDictionary(n,a),i===qm?i=Pc.inflate(n,o):i===Ax&&(i=j3));n.avail_in>0&&i===q3&&n.state.wrap>0&&t[n.next_in]!==0;)Pc.inflateReset(n),i=Pc.inflate(n,o);switch(i){case yxe:case Ax:case j3:case Mxe:return this.onEnd(i),this.ended=!0,!1}if(s=n.avail_out,n.next_out&&(n.avail_out===0||i===q3))if(this.options.to==="string"){let c=zm.utf8border(n.output,n.next_out),l=n.next_out-c,u=zm.buf2string(n.output,c);n.next_out=l,n.avail_out=r-l,l&&n.output.set(n.output.subarray(c,c+l),0),this.onData(u)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(i===qm&&s===0)){if(i===q3)return i=Pc.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};Zh.prototype.onData=function(t){this.chunks.push(t)};Zh.prototype.onEnd=function(t){t===qm&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=DD.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function uO(t,e){const n=new Zh(e);if(n.push(t),n.err)throw n.msg||k1[n.err];return n.result}function _xe(t,e){return e=e||{},e.raw=!0,uO(t,e)}var Oxe=Zh,wxe=uO,Pxe=_xe,Axe=uO,xxe=Y1,Rxe={Inflate:Oxe,inflate:wxe,inflateRaw:Pxe,ungzip:Axe,constants:xxe};const{Deflate:bxe,deflate:Nxe,deflateRaw:Lxe,gzip:Uxe}=G6e,{Inflate:Fxe,inflate:Vxe,inflateRaw:kxe,ungzip:Gxe}=Rxe;var Bxe=bxe,Wxe=Nxe,Hxe=Lxe,$xe=Uxe,zxe=Fxe,qxe=Vxe,jxe=kxe,Qxe=Gxe,Kxe=Y1,Xxe={Deflate:Bxe,deflate:Wxe,deflateRaw:Hxe,gzip:$xe,Inflate:zxe,inflate:qxe,inflateRaw:jxe,ungzip:Qxe,constants:Kxe};const Nq=(t,e)=>{const n=t.__vccOpts||t;for(const[r,a]of e)n[r]=a;return n},Yxe={class:"main"},Zxe="CT_NIFTI_AXIAL",Jxe="CT_NIFTI_SAGITTAL",eRe="CT_NIFTI_CORONAL",xx="3D_VIEWPORT",Rx="cornerstoneStreamingImageVolume",tRe={__name:"Niftibasic",setup(t){let e,n,r,a,i,o,s;const{ViewportType:c}=vs;let l=new URL("/nifti-viewer/assets/PANCREAS-fZNE0aGF.nii",import.meta.url).href;cR(()=>{document.getElementById("element1"),document.getElementById("element2"),document.getElementById("element3"),document.getElementById("element4"),u()});async function u(){r=`${Rx}:${l}`,await APe(),Wl("nifti",WPe),n=await $6({url:l}),i="myRenderingEngine",o=new K5(i),s=[{viewportId:Zxe,type:Kr.ORTHOGRAPHIC,element:element1,defaultOptions:{orientation:xl.AXIAL}},{viewportId:Jxe,type:Kr.ORTHOGRAPHIC,element:element2,defaultOptions:{orientation:xl.SAGITTAL}},{viewportId:eRe,type:Kr.ORTHOGRAPHIC,element:element3,defaultOptions:{orientation:xl.CORONAL}},{viewportId:xx,type:c.VOLUME_3D,element:element4,defaultOptions:{orientation:xl.CORONAL,background:kR.slicer3D}}],o.setViewports(s),a=await im(r,{imageIds:n}),await a.load(),e=o.getViewport(xx),await XS(o,[{volumeId:r}],s.map(v=>v.viewportId)).then(()=>{e.setProperties({preset:"CT-Bone"}),e.render()}),o.render()}async function f(v){let g=v.target.files[0];if(g){if(g.name.endsWith(".gz")){const d=await g.arrayBuffer();try{const m=Xxe.inflate(new Uint8Array(d));g=new Blob([m],{type:"application/octet-stream"})}catch(m){console.error("Decompression failed:",m)}}l=URL.createObjectURL(g),n=await $6({url:l}),r=`${Rx}:${l}`,a=await im(r,{imageIds:n}),await a.load(),await XS(o,[{volumeId:r}],s.map(d=>d.viewportId)).then(()=>{e.setProperties({preset:"CT-Bone"}),e.render()}),o.render()}}return(v,g)=>(wR(),PR("div",Yxe,[g[0]||(g[0]=gS("h1",null,"Cornerstone3D Nifti Viewer(.nii.nii.gz)",-1)),gS("input",{type:"file",multiple:"",onChange:f},null,32),g[1]||(g[1]=_Q('<div id="view" data-v-e32423a3><div data-v-e32423a3><div id="element1" data-v-e32423a3></div><div id="element2" data-v-e32423a3></div></div><div data-v-e32423a3><div id="element3" data-v-e32423a3></div><div id="element4" data-v-e32423a3></div></div></div>',1))]))}},nRe=Nq(tRe,[["__scopeId","data-v-e32423a3"]]),rRe={id:"router"},aRe={__name:"App",setup(t){return(e,n)=>(wR(),PR("div",rRe,[Vc(nRe)]))}},iRe=Nq(aRe,[["__scopeId","data-v-1b37c307"]]);oK(iRe).mount("#app");
